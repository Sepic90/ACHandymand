function EE(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var kO=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function NE(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Hw={exports:{}},dm={},Ww={exports:{}},It={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nd=Symbol.for("react.element"),IE=Symbol.for("react.portal"),TE=Symbol.for("react.fragment"),kE=Symbol.for("react.strict_mode"),PE=Symbol.for("react.profiler"),CE=Symbol.for("react.provider"),LE=Symbol.for("react.context"),RE=Symbol.for("react.forward_ref"),jE=Symbol.for("react.suspense"),DE=Symbol.for("react.memo"),OE=Symbol.for("react.lazy"),Fy=Symbol.iterator;function FE(t){return t===null||typeof t!="object"?null:(t=Fy&&t[Fy]||t["@@iterator"],typeof t=="function"?t:null)}var Gw={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Kw=Object.assign,Qw={};function Rc(t,e,n){this.props=t,this.context=e,this.refs=Qw,this.updater=n||Gw}Rc.prototype.isReactComponent={};Rc.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Rc.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Yw(){}Yw.prototype=Rc.prototype;function i2(t,e,n){this.props=t,this.context=e,this.refs=Qw,this.updater=n||Gw}var s2=i2.prototype=new Yw;s2.constructor=i2;Kw(s2,Rc.prototype);s2.isPureReactComponent=!0;var My=Array.isArray,Xw=Object.prototype.hasOwnProperty,o2={current:null},Jw={key:!0,ref:!0,__self:!0,__source:!0};function Zw(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)Xw.call(e,r)&&!Jw.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Nd,type:t,key:s,ref:o,props:i,_owner:o2.current}}function ME(t,e){return{$$typeof:Nd,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function a2(t){return typeof t=="object"&&t!==null&&t.$$typeof===Nd}function UE(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Uy=/\/+/g;function Ag(t,e){return typeof t=="object"&&t!==null&&t.key!=null?UE(""+t.key):e.toString(36)}function $f(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Nd:case IE:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+Ag(o,0):r,My(i)?(n="",t!=null&&(n=t.replace(Uy,"$&/")+"/"),$f(i,e,n,"",function(u){return u})):i!=null&&(a2(i)&&(i=ME(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Uy,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",My(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+Ag(s,a);o+=$f(s,e,n,l,i)}else if(l=FE(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+Ag(s,a++),o+=$f(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function mf(t,e,n){if(t==null)return t;var r=[],i=0;return $f(t,r,"","",function(s){return e.call(n,s,i++)}),r}function VE(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var zr={current:null},Hf={transition:null},BE={ReactCurrentDispatcher:zr,ReactCurrentBatchConfig:Hf,ReactCurrentOwner:o2};function eb(){throw Error("act(...) is not supported in production builds of React.")}It.Children={map:mf,forEach:function(t,e,n){mf(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return mf(t,function(){e++}),e},toArray:function(t){return mf(t,function(e){return e})||[]},only:function(t){if(!a2(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};It.Component=Rc;It.Fragment=TE;It.Profiler=PE;It.PureComponent=i2;It.StrictMode=kE;It.Suspense=jE;It.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=BE;It.act=eb;It.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Kw({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=o2.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)Xw.call(e,l)&&!Jw.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:Nd,type:t.type,key:i,ref:s,props:r,_owner:o}};It.createContext=function(t){return t={$$typeof:LE,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:CE,_context:t},t.Consumer=t};It.createElement=Zw;It.createFactory=function(t){var e=Zw.bind(null,t);return e.type=t,e};It.createRef=function(){return{current:null}};It.forwardRef=function(t){return{$$typeof:RE,render:t}};It.isValidElement=a2;It.lazy=function(t){return{$$typeof:OE,_payload:{_status:-1,_result:t},_init:VE}};It.memo=function(t,e){return{$$typeof:DE,type:t,compare:e===void 0?null:e}};It.startTransition=function(t){var e=Hf.transition;Hf.transition={};try{t()}finally{Hf.transition=e}};It.unstable_act=eb;It.useCallback=function(t,e){return zr.current.useCallback(t,e)};It.useContext=function(t){return zr.current.useContext(t)};It.useDebugValue=function(){};It.useDeferredValue=function(t){return zr.current.useDeferredValue(t)};It.useEffect=function(t,e){return zr.current.useEffect(t,e)};It.useId=function(){return zr.current.useId()};It.useImperativeHandle=function(t,e,n){return zr.current.useImperativeHandle(t,e,n)};It.useInsertionEffect=function(t,e){return zr.current.useInsertionEffect(t,e)};It.useLayoutEffect=function(t,e){return zr.current.useLayoutEffect(t,e)};It.useMemo=function(t,e){return zr.current.useMemo(t,e)};It.useReducer=function(t,e,n){return zr.current.useReducer(t,e,n)};It.useRef=function(t){return zr.current.useRef(t)};It.useState=function(t){return zr.current.useState(t)};It.useSyncExternalStore=function(t,e,n){return zr.current.useSyncExternalStore(t,e,n)};It.useTransition=function(){return zr.current.useTransition()};It.version="18.3.1";Ww.exports=It;var de=Ww.exports;const tb=NE(de),qE=EE({__proto__:null,default:tb},[de]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zE=de,$E=Symbol.for("react.element"),HE=Symbol.for("react.fragment"),WE=Object.prototype.hasOwnProperty,GE=zE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,KE={key:!0,ref:!0,__self:!0,__source:!0};function nb(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)WE.call(e,r)&&!KE.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:$E,type:t,key:s,ref:o,props:i,_owner:GE.current}}dm.Fragment=HE;dm.jsx=nb;dm.jsxs=nb;Hw.exports=dm;var v=Hw.exports,x1={},rb={exports:{}},Ei={},ib={exports:{}},sb={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(W,ee){var re=W.length;W.push(ee);e:for(;0<re;){var xe=re-1>>>1,F=W[xe];if(0<i(F,ee))W[xe]=ee,W[re]=F,re=xe;else break e}}function n(W){return W.length===0?null:W[0]}function r(W){if(W.length===0)return null;var ee=W[0],re=W.pop();if(re!==ee){W[0]=re;e:for(var xe=0,F=W.length,G=F>>>1;xe<G;){var Y=2*(xe+1)-1,Z=W[Y],ae=Y+1,ie=W[ae];if(0>i(Z,re))ae<F&&0>i(ie,Z)?(W[xe]=ie,W[ae]=re,xe=ae):(W[xe]=Z,W[Y]=re,xe=Y);else if(ae<F&&0>i(ie,re))W[xe]=ie,W[ae]=re,xe=ae;else break e}}return ee}function i(W,ee){var re=W.sortIndex-ee.sortIndex;return re!==0?re:W.id-ee.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],h=1,f=null,m=3,p=!1,b=!1,E=!1,k=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(W){for(var ee=n(u);ee!==null;){if(ee.callback===null)r(u);else if(ee.startTime<=W)r(u),ee.sortIndex=ee.expirationTime,e(l,ee);else break;ee=n(u)}}function M(W){if(E=!1,C(W),!b)if(n(l)!==null)b=!0,O(Q);else{var ee=n(u);ee!==null&&U(M,ee.startTime-W)}}function Q(W,ee){b=!1,E&&(E=!1,w(y),y=-1),p=!0;var re=m;try{for(C(ee),f=n(l);f!==null&&(!(f.expirationTime>ee)||W&&!A());){var xe=f.callback;if(typeof xe=="function"){f.callback=null,m=f.priorityLevel;var F=xe(f.expirationTime<=ee);ee=t.unstable_now(),typeof F=="function"?f.callback=F:f===n(l)&&r(l),C(ee)}else r(l);f=n(l)}if(f!==null)var G=!0;else{var Y=n(u);Y!==null&&U(M,Y.startTime-ee),G=!1}return G}finally{f=null,m=re,p=!1}}var z=!1,L=null,y=-1,N=5,R=-1;function A(){return!(t.unstable_now()-R<N)}function I(){if(L!==null){var W=t.unstable_now();R=W;var ee=!0;try{ee=L(!0,W)}finally{ee?P():(z=!1,L=null)}}else z=!1}var P;if(typeof x=="function")P=function(){x(I)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,J=V.port2;V.port1.onmessage=I,P=function(){J.postMessage(null)}}else P=function(){k(I,0)};function O(W){L=W,z||(z=!0,P())}function U(W,ee){y=k(function(){W(t.unstable_now())},ee)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(W){W.callback=null},t.unstable_continueExecution=function(){b||p||(b=!0,O(Q))},t.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<W?Math.floor(1e3/W):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(W){switch(m){case 1:case 2:case 3:var ee=3;break;default:ee=m}var re=m;m=ee;try{return W()}finally{m=re}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(W,ee){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var re=m;m=W;try{return ee()}finally{m=re}},t.unstable_scheduleCallback=function(W,ee,re){var xe=t.unstable_now();switch(typeof re=="object"&&re!==null?(re=re.delay,re=typeof re=="number"&&0<re?xe+re:xe):re=xe,W){case 1:var F=-1;break;case 2:F=250;break;case 5:F=1073741823;break;case 4:F=1e4;break;default:F=5e3}return F=re+F,W={id:h++,callback:ee,priorityLevel:W,startTime:re,expirationTime:F,sortIndex:-1},re>xe?(W.sortIndex=re,e(u,W),n(l)===null&&W===n(u)&&(E?(w(y),y=-1):E=!0,U(M,re-xe))):(W.sortIndex=F,e(l,W),b||p||(b=!0,O(Q))),W},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(W){var ee=m;return function(){var re=m;m=ee;try{return W.apply(this,arguments)}finally{m=re}}}})(sb);ib.exports=sb;var QE=ib.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var YE=de,Ai=QE;function qe(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var ob=new Set,Yh={};function Yl(t,e){vc(t,e),vc(t+"Capture",e)}function vc(t,e){for(Yh[t]=e,t=0;t<e.length;t++)ob.add(e[t])}var Eo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),S1=Object.prototype.hasOwnProperty,XE=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Vy={},By={};function JE(t){return S1.call(By,t)?!0:S1.call(Vy,t)?!1:XE.test(t)?By[t]=!0:(Vy[t]=!0,!1)}function ZE(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function eN(t,e,n,r){if(e===null||typeof e>"u"||ZE(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function $r(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var fr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){fr[t]=new $r(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];fr[e]=new $r(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){fr[t]=new $r(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){fr[t]=new $r(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){fr[t]=new $r(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){fr[t]=new $r(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){fr[t]=new $r(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){fr[t]=new $r(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){fr[t]=new $r(t,5,!1,t.toLowerCase(),null,!1,!1)});var l2=/[\-:]([a-z])/g;function u2(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(l2,u2);fr[e]=new $r(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(l2,u2);fr[e]=new $r(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(l2,u2);fr[e]=new $r(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){fr[t]=new $r(t,1,!1,t.toLowerCase(),null,!1,!1)});fr.xlinkHref=new $r("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){fr[t]=new $r(t,1,!1,t.toLowerCase(),null,!0,!0)});function c2(t,e,n,r){var i=fr.hasOwnProperty(e)?fr[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(eN(e,n,i,r)&&(n=null),r||i===null?JE(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Ro=YE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,gf=Symbol.for("react.element"),qu=Symbol.for("react.portal"),zu=Symbol.for("react.fragment"),h2=Symbol.for("react.strict_mode"),A1=Symbol.for("react.profiler"),ab=Symbol.for("react.provider"),lb=Symbol.for("react.context"),d2=Symbol.for("react.forward_ref"),E1=Symbol.for("react.suspense"),N1=Symbol.for("react.suspense_list"),f2=Symbol.for("react.memo"),ma=Symbol.for("react.lazy"),ub=Symbol.for("react.offscreen"),qy=Symbol.iterator;function hh(t){return t===null||typeof t!="object"?null:(t=qy&&t[qy]||t["@@iterator"],typeof t=="function"?t:null)}var yn=Object.assign,Eg;function Sh(t){if(Eg===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Eg=e&&e[1]||""}return`
`+Eg+t}var Ng=!1;function Ig(t,e){if(!t||Ng)return"";Ng=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Ng=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Sh(t):""}function tN(t){switch(t.tag){case 5:return Sh(t.type);case 16:return Sh("Lazy");case 13:return Sh("Suspense");case 19:return Sh("SuspenseList");case 0:case 2:case 15:return t=Ig(t.type,!1),t;case 11:return t=Ig(t.type.render,!1),t;case 1:return t=Ig(t.type,!0),t;default:return""}}function I1(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case zu:return"Fragment";case qu:return"Portal";case A1:return"Profiler";case h2:return"StrictMode";case E1:return"Suspense";case N1:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case lb:return(t.displayName||"Context")+".Consumer";case ab:return(t._context.displayName||"Context")+".Provider";case d2:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case f2:return e=t.displayName||null,e!==null?e:I1(t.type)||"Memo";case ma:e=t._payload,t=t._init;try{return I1(t(e))}catch{}}return null}function nN(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return I1(e);case 8:return e===h2?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function qa(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function cb(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function rN(t){var e=cb(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function vf(t){t._valueTracker||(t._valueTracker=rN(t))}function hb(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=cb(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function gp(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function T1(t,e){var n=e.checked;return yn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function zy(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=qa(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function db(t,e){e=e.checked,e!=null&&c2(t,"checked",e,!1)}function k1(t,e){db(t,e);var n=qa(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?P1(t,e.type,n):e.hasOwnProperty("defaultValue")&&P1(t,e.type,qa(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function $y(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function P1(t,e,n){(e!=="number"||gp(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Ah=Array.isArray;function rc(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+qa(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function C1(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(qe(91));return yn({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Hy(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(qe(92));if(Ah(n)){if(1<n.length)throw Error(qe(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:qa(n)}}function fb(t,e){var n=qa(e.value),r=qa(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Wy(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function pb(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function L1(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?pb(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var yf,mb=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(yf=yf||document.createElement("div"),yf.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=yf.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Xh(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var jh={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},iN=["Webkit","ms","Moz","O"];Object.keys(jh).forEach(function(t){iN.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),jh[e]=jh[t]})});function gb(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||jh.hasOwnProperty(t)&&jh[t]?(""+e).trim():e+"px"}function vb(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=gb(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var sN=yn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function R1(t,e){if(e){if(sN[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(qe(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(qe(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(qe(61))}if(e.style!=null&&typeof e.style!="object")throw Error(qe(62))}}function j1(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var D1=null;function p2(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var O1=null,ic=null,sc=null;function Gy(t){if(t=kd(t)){if(typeof O1!="function")throw Error(qe(280));var e=t.stateNode;e&&(e=vm(e),O1(t.stateNode,t.type,e))}}function yb(t){ic?sc?sc.push(t):sc=[t]:ic=t}function _b(){if(ic){var t=ic,e=sc;if(sc=ic=null,Gy(t),e)for(t=0;t<e.length;t++)Gy(e[t])}}function wb(t,e){return t(e)}function bb(){}var Tg=!1;function xb(t,e,n){if(Tg)return t(e,n);Tg=!0;try{return wb(t,e,n)}finally{Tg=!1,(ic!==null||sc!==null)&&(bb(),_b())}}function Jh(t,e){var n=t.stateNode;if(n===null)return null;var r=vm(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(qe(231,e,typeof n));return n}var F1=!1;if(Eo)try{var dh={};Object.defineProperty(dh,"passive",{get:function(){F1=!0}}),window.addEventListener("test",dh,dh),window.removeEventListener("test",dh,dh)}catch{F1=!1}function oN(t,e,n,r,i,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(h){this.onError(h)}}var Dh=!1,vp=null,yp=!1,M1=null,aN={onError:function(t){Dh=!0,vp=t}};function lN(t,e,n,r,i,s,o,a,l){Dh=!1,vp=null,oN.apply(aN,arguments)}function uN(t,e,n,r,i,s,o,a,l){if(lN.apply(this,arguments),Dh){if(Dh){var u=vp;Dh=!1,vp=null}else throw Error(qe(198));yp||(yp=!0,M1=u)}}function Xl(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Sb(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Ky(t){if(Xl(t)!==t)throw Error(qe(188))}function cN(t){var e=t.alternate;if(!e){if(e=Xl(t),e===null)throw Error(qe(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Ky(i),t;if(s===r)return Ky(i),e;s=s.sibling}throw Error(qe(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(qe(189))}}if(n.alternate!==r)throw Error(qe(190))}if(n.tag!==3)throw Error(qe(188));return n.stateNode.current===n?t:e}function Ab(t){return t=cN(t),t!==null?Eb(t):null}function Eb(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Eb(t);if(e!==null)return e;t=t.sibling}return null}var Nb=Ai.unstable_scheduleCallback,Qy=Ai.unstable_cancelCallback,hN=Ai.unstable_shouldYield,dN=Ai.unstable_requestPaint,Rn=Ai.unstable_now,fN=Ai.unstable_getCurrentPriorityLevel,m2=Ai.unstable_ImmediatePriority,Ib=Ai.unstable_UserBlockingPriority,_p=Ai.unstable_NormalPriority,pN=Ai.unstable_LowPriority,Tb=Ai.unstable_IdlePriority,fm=null,Os=null;function mN(t){if(Os&&typeof Os.onCommitFiberRoot=="function")try{Os.onCommitFiberRoot(fm,t,void 0,(t.current.flags&128)===128)}catch{}}var as=Math.clz32?Math.clz32:yN,gN=Math.log,vN=Math.LN2;function yN(t){return t>>>=0,t===0?32:31-(gN(t)/vN|0)|0}var _f=64,wf=4194304;function Eh(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function wp(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=Eh(a):(s&=o,s!==0&&(r=Eh(s)))}else o=n&~i,o!==0?r=Eh(o):s!==0&&(r=Eh(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-as(e),i=1<<n,r|=t[n],e&=~i;return r}function _N(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wN(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-as(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=_N(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function U1(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function kb(){var t=_f;return _f<<=1,!(_f&4194240)&&(_f=64),t}function kg(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Id(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-as(e),t[e]=n}function bN(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-as(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function g2(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-as(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Kt=0;function Pb(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Cb,v2,Lb,Rb,jb,V1=!1,bf=[],ka=null,Pa=null,Ca=null,Zh=new Map,ed=new Map,va=[],xN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Yy(t,e){switch(t){case"focusin":case"focusout":ka=null;break;case"dragenter":case"dragleave":Pa=null;break;case"mouseover":case"mouseout":Ca=null;break;case"pointerover":case"pointerout":Zh.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ed.delete(e.pointerId)}}function fh(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=kd(e),e!==null&&v2(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function SN(t,e,n,r,i){switch(e){case"focusin":return ka=fh(ka,t,e,n,r,i),!0;case"dragenter":return Pa=fh(Pa,t,e,n,r,i),!0;case"mouseover":return Ca=fh(Ca,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Zh.set(s,fh(Zh.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,ed.set(s,fh(ed.get(s)||null,t,e,n,r,i)),!0}return!1}function Db(t){var e=Tl(t.target);if(e!==null){var n=Xl(e);if(n!==null){if(e=n.tag,e===13){if(e=Sb(n),e!==null){t.blockedOn=e,jb(t.priority,function(){Lb(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Wf(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=B1(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);D1=r,n.target.dispatchEvent(r),D1=null}else return e=kd(n),e!==null&&v2(e),t.blockedOn=n,!1;e.shift()}return!0}function Xy(t,e,n){Wf(t)&&n.delete(e)}function AN(){V1=!1,ka!==null&&Wf(ka)&&(ka=null),Pa!==null&&Wf(Pa)&&(Pa=null),Ca!==null&&Wf(Ca)&&(Ca=null),Zh.forEach(Xy),ed.forEach(Xy)}function ph(t,e){t.blockedOn===e&&(t.blockedOn=null,V1||(V1=!0,Ai.unstable_scheduleCallback(Ai.unstable_NormalPriority,AN)))}function td(t){function e(i){return ph(i,t)}if(0<bf.length){ph(bf[0],t);for(var n=1;n<bf.length;n++){var r=bf[n];r.blockedOn===t&&(r.blockedOn=null)}}for(ka!==null&&ph(ka,t),Pa!==null&&ph(Pa,t),Ca!==null&&ph(Ca,t),Zh.forEach(e),ed.forEach(e),n=0;n<va.length;n++)r=va[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<va.length&&(n=va[0],n.blockedOn===null);)Db(n),n.blockedOn===null&&va.shift()}var oc=Ro.ReactCurrentBatchConfig,bp=!0;function EN(t,e,n,r){var i=Kt,s=oc.transition;oc.transition=null;try{Kt=1,y2(t,e,n,r)}finally{Kt=i,oc.transition=s}}function NN(t,e,n,r){var i=Kt,s=oc.transition;oc.transition=null;try{Kt=4,y2(t,e,n,r)}finally{Kt=i,oc.transition=s}}function y2(t,e,n,r){if(bp){var i=B1(t,e,n,r);if(i===null)Ug(t,e,r,xp,n),Yy(t,r);else if(SN(i,t,e,n,r))r.stopPropagation();else if(Yy(t,r),e&4&&-1<xN.indexOf(t)){for(;i!==null;){var s=kd(i);if(s!==null&&Cb(s),s=B1(t,e,n,r),s===null&&Ug(t,e,r,xp,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Ug(t,e,r,null,n)}}var xp=null;function B1(t,e,n,r){if(xp=null,t=p2(r),t=Tl(t),t!==null)if(e=Xl(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Sb(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return xp=t,null}function Ob(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(fN()){case m2:return 1;case Ib:return 4;case _p:case pN:return 16;case Tb:return 536870912;default:return 16}default:return 16}}var Aa=null,_2=null,Gf=null;function Fb(){if(Gf)return Gf;var t,e=_2,n=e.length,r,i="value"in Aa?Aa.value:Aa.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Gf=i.slice(t,1<r?1-r:void 0)}function Kf(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function xf(){return!0}function Jy(){return!1}function Ni(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?xf:Jy,this.isPropagationStopped=Jy,this}return yn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=xf)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=xf)},persist:function(){},isPersistent:xf}),e}var jc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},w2=Ni(jc),Td=yn({},jc,{view:0,detail:0}),IN=Ni(Td),Pg,Cg,mh,pm=yn({},Td,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:b2,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==mh&&(mh&&t.type==="mousemove"?(Pg=t.screenX-mh.screenX,Cg=t.screenY-mh.screenY):Cg=Pg=0,mh=t),Pg)},movementY:function(t){return"movementY"in t?t.movementY:Cg}}),Zy=Ni(pm),TN=yn({},pm,{dataTransfer:0}),kN=Ni(TN),PN=yn({},Td,{relatedTarget:0}),Lg=Ni(PN),CN=yn({},jc,{animationName:0,elapsedTime:0,pseudoElement:0}),LN=Ni(CN),RN=yn({},jc,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),jN=Ni(RN),DN=yn({},jc,{data:0}),e5=Ni(DN),ON={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},FN={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},MN={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function UN(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=MN[t])?!!e[t]:!1}function b2(){return UN}var VN=yn({},Td,{key:function(t){if(t.key){var e=ON[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Kf(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?FN[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:b2,charCode:function(t){return t.type==="keypress"?Kf(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Kf(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),BN=Ni(VN),qN=yn({},pm,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),t5=Ni(qN),zN=yn({},Td,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:b2}),$N=Ni(zN),HN=yn({},jc,{propertyName:0,elapsedTime:0,pseudoElement:0}),WN=Ni(HN),GN=yn({},pm,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),KN=Ni(GN),QN=[9,13,27,32],x2=Eo&&"CompositionEvent"in window,Oh=null;Eo&&"documentMode"in document&&(Oh=document.documentMode);var YN=Eo&&"TextEvent"in window&&!Oh,Mb=Eo&&(!x2||Oh&&8<Oh&&11>=Oh),n5=" ",r5=!1;function Ub(t,e){switch(t){case"keyup":return QN.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vb(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var $u=!1;function XN(t,e){switch(t){case"compositionend":return Vb(e);case"keypress":return e.which!==32?null:(r5=!0,n5);case"textInput":return t=e.data,t===n5&&r5?null:t;default:return null}}function JN(t,e){if($u)return t==="compositionend"||!x2&&Ub(t,e)?(t=Fb(),Gf=_2=Aa=null,$u=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Mb&&e.locale!=="ko"?null:e.data;default:return null}}var ZN={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function i5(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!ZN[t.type]:e==="textarea"}function Bb(t,e,n,r){yb(r),e=Sp(e,"onChange"),0<e.length&&(n=new w2("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Fh=null,nd=null;function eI(t){Jb(t,0)}function mm(t){var e=Gu(t);if(hb(e))return t}function tI(t,e){if(t==="change")return e}var qb=!1;if(Eo){var Rg;if(Eo){var jg="oninput"in document;if(!jg){var s5=document.createElement("div");s5.setAttribute("oninput","return;"),jg=typeof s5.oninput=="function"}Rg=jg}else Rg=!1;qb=Rg&&(!document.documentMode||9<document.documentMode)}function o5(){Fh&&(Fh.detachEvent("onpropertychange",zb),nd=Fh=null)}function zb(t){if(t.propertyName==="value"&&mm(nd)){var e=[];Bb(e,nd,t,p2(t)),xb(eI,e)}}function nI(t,e,n){t==="focusin"?(o5(),Fh=e,nd=n,Fh.attachEvent("onpropertychange",zb)):t==="focusout"&&o5()}function rI(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return mm(nd)}function iI(t,e){if(t==="click")return mm(e)}function sI(t,e){if(t==="input"||t==="change")return mm(e)}function oI(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var us=typeof Object.is=="function"?Object.is:oI;function rd(t,e){if(us(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!S1.call(e,i)||!us(t[i],e[i]))return!1}return!0}function a5(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function l5(t,e){var n=a5(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=a5(n)}}function $b(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?$b(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Hb(){for(var t=window,e=gp();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=gp(t.document)}return e}function S2(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function aI(t){var e=Hb(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&$b(n.ownerDocument.documentElement,n)){if(r!==null&&S2(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=l5(n,s);var o=l5(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var lI=Eo&&"documentMode"in document&&11>=document.documentMode,Hu=null,q1=null,Mh=null,z1=!1;function u5(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;z1||Hu==null||Hu!==gp(r)||(r=Hu,"selectionStart"in r&&S2(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Mh&&rd(Mh,r)||(Mh=r,r=Sp(q1,"onSelect"),0<r.length&&(e=new w2("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Hu)))}function Sf(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Wu={animationend:Sf("Animation","AnimationEnd"),animationiteration:Sf("Animation","AnimationIteration"),animationstart:Sf("Animation","AnimationStart"),transitionend:Sf("Transition","TransitionEnd")},Dg={},Wb={};Eo&&(Wb=document.createElement("div").style,"AnimationEvent"in window||(delete Wu.animationend.animation,delete Wu.animationiteration.animation,delete Wu.animationstart.animation),"TransitionEvent"in window||delete Wu.transitionend.transition);function gm(t){if(Dg[t])return Dg[t];if(!Wu[t])return t;var e=Wu[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Wb)return Dg[t]=e[n];return t}var Gb=gm("animationend"),Kb=gm("animationiteration"),Qb=gm("animationstart"),Yb=gm("transitionend"),Xb=new Map,c5="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ya(t,e){Xb.set(t,e),Yl(e,[t])}for(var Og=0;Og<c5.length;Og++){var Fg=c5[Og],uI=Fg.toLowerCase(),cI=Fg[0].toUpperCase()+Fg.slice(1);Ya(uI,"on"+cI)}Ya(Gb,"onAnimationEnd");Ya(Kb,"onAnimationIteration");Ya(Qb,"onAnimationStart");Ya("dblclick","onDoubleClick");Ya("focusin","onFocus");Ya("focusout","onBlur");Ya(Yb,"onTransitionEnd");vc("onMouseEnter",["mouseout","mouseover"]);vc("onMouseLeave",["mouseout","mouseover"]);vc("onPointerEnter",["pointerout","pointerover"]);vc("onPointerLeave",["pointerout","pointerover"]);Yl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Yl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Yl("onBeforeInput",["compositionend","keypress","textInput","paste"]);Yl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Yl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Yl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Nh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),hI=new Set("cancel close invalid load scroll toggle".split(" ").concat(Nh));function h5(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,uN(r,e,void 0,t),t.currentTarget=null}function Jb(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;h5(i,a,u),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;h5(i,a,u),s=l}}}if(yp)throw t=M1,yp=!1,M1=null,t}function ln(t,e){var n=e[K1];n===void 0&&(n=e[K1]=new Set);var r=t+"__bubble";n.has(r)||(Zb(e,t,2,!1),n.add(r))}function Mg(t,e,n){var r=0;e&&(r|=4),Zb(n,t,r,e)}var Af="_reactListening"+Math.random().toString(36).slice(2);function id(t){if(!t[Af]){t[Af]=!0,ob.forEach(function(n){n!=="selectionchange"&&(hI.has(n)||Mg(n,!1,t),Mg(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Af]||(e[Af]=!0,Mg("selectionchange",!1,e))}}function Zb(t,e,n,r){switch(Ob(e)){case 1:var i=EN;break;case 4:i=NN;break;default:i=y2}n=i.bind(null,e,n,t),i=void 0,!F1||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Ug(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Tl(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}xb(function(){var u=s,h=p2(n),f=[];e:{var m=Xb.get(t);if(m!==void 0){var p=w2,b=t;switch(t){case"keypress":if(Kf(n)===0)break e;case"keydown":case"keyup":p=BN;break;case"focusin":b="focus",p=Lg;break;case"focusout":b="blur",p=Lg;break;case"beforeblur":case"afterblur":p=Lg;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=Zy;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=kN;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=$N;break;case Gb:case Kb:case Qb:p=LN;break;case Yb:p=WN;break;case"scroll":p=IN;break;case"wheel":p=KN;break;case"copy":case"cut":case"paste":p=jN;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=t5}var E=(e&4)!==0,k=!E&&t==="scroll",w=E?m!==null?m+"Capture":null:m;E=[];for(var x=u,C;x!==null;){C=x;var M=C.stateNode;if(C.tag===5&&M!==null&&(C=M,w!==null&&(M=Jh(x,w),M!=null&&E.push(sd(x,M,C)))),k)break;x=x.return}0<E.length&&(m=new p(m,b,null,n,h),f.push({event:m,listeners:E}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",m&&n!==D1&&(b=n.relatedTarget||n.fromElement)&&(Tl(b)||b[No]))break e;if((p||m)&&(m=h.window===h?h:(m=h.ownerDocument)?m.defaultView||m.parentWindow:window,p?(b=n.relatedTarget||n.toElement,p=u,b=b?Tl(b):null,b!==null&&(k=Xl(b),b!==k||b.tag!==5&&b.tag!==6)&&(b=null)):(p=null,b=u),p!==b)){if(E=Zy,M="onMouseLeave",w="onMouseEnter",x="mouse",(t==="pointerout"||t==="pointerover")&&(E=t5,M="onPointerLeave",w="onPointerEnter",x="pointer"),k=p==null?m:Gu(p),C=b==null?m:Gu(b),m=new E(M,x+"leave",p,n,h),m.target=k,m.relatedTarget=C,M=null,Tl(h)===u&&(E=new E(w,x+"enter",b,n,h),E.target=C,E.relatedTarget=k,M=E),k=M,p&&b)t:{for(E=p,w=b,x=0,C=E;C;C=Lu(C))x++;for(C=0,M=w;M;M=Lu(M))C++;for(;0<x-C;)E=Lu(E),x--;for(;0<C-x;)w=Lu(w),C--;for(;x--;){if(E===w||w!==null&&E===w.alternate)break t;E=Lu(E),w=Lu(w)}E=null}else E=null;p!==null&&d5(f,m,p,E,!1),b!==null&&k!==null&&d5(f,k,b,E,!0)}}e:{if(m=u?Gu(u):window,p=m.nodeName&&m.nodeName.toLowerCase(),p==="select"||p==="input"&&m.type==="file")var Q=tI;else if(i5(m))if(qb)Q=sI;else{Q=rI;var z=nI}else(p=m.nodeName)&&p.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(Q=iI);if(Q&&(Q=Q(t,u))){Bb(f,Q,n,h);break e}z&&z(t,m,u),t==="focusout"&&(z=m._wrapperState)&&z.controlled&&m.type==="number"&&P1(m,"number",m.value)}switch(z=u?Gu(u):window,t){case"focusin":(i5(z)||z.contentEditable==="true")&&(Hu=z,q1=u,Mh=null);break;case"focusout":Mh=q1=Hu=null;break;case"mousedown":z1=!0;break;case"contextmenu":case"mouseup":case"dragend":z1=!1,u5(f,n,h);break;case"selectionchange":if(lI)break;case"keydown":case"keyup":u5(f,n,h)}var L;if(x2)e:{switch(t){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else $u?Ub(t,n)&&(y="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(y="onCompositionStart");y&&(Mb&&n.locale!=="ko"&&($u||y!=="onCompositionStart"?y==="onCompositionEnd"&&$u&&(L=Fb()):(Aa=h,_2="value"in Aa?Aa.value:Aa.textContent,$u=!0)),z=Sp(u,y),0<z.length&&(y=new e5(y,t,null,n,h),f.push({event:y,listeners:z}),L?y.data=L:(L=Vb(n),L!==null&&(y.data=L)))),(L=YN?XN(t,n):JN(t,n))&&(u=Sp(u,"onBeforeInput"),0<u.length&&(h=new e5("onBeforeInput","beforeinput",null,n,h),f.push({event:h,listeners:u}),h.data=L))}Jb(f,e)})}function sd(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Sp(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Jh(t,n),s!=null&&r.unshift(sd(t,s,i)),s=Jh(t,e),s!=null&&r.push(sd(t,s,i))),t=t.return}return r}function Lu(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function d5(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,i?(l=Jh(n,s),l!=null&&o.unshift(sd(n,l,a))):i||(l=Jh(n,s),l!=null&&o.push(sd(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var dI=/\r\n?/g,fI=/\u0000|\uFFFD/g;function f5(t){return(typeof t=="string"?t:""+t).replace(dI,`
`).replace(fI,"")}function Ef(t,e,n){if(e=f5(e),f5(t)!==e&&n)throw Error(qe(425))}function Ap(){}var $1=null,H1=null;function W1(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var G1=typeof setTimeout=="function"?setTimeout:void 0,pI=typeof clearTimeout=="function"?clearTimeout:void 0,p5=typeof Promise=="function"?Promise:void 0,mI=typeof queueMicrotask=="function"?queueMicrotask:typeof p5<"u"?function(t){return p5.resolve(null).then(t).catch(gI)}:G1;function gI(t){setTimeout(function(){throw t})}function Vg(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),td(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);td(e)}function La(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function m5(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Dc=Math.random().toString(36).slice(2),Rs="__reactFiber$"+Dc,od="__reactProps$"+Dc,No="__reactContainer$"+Dc,K1="__reactEvents$"+Dc,vI="__reactListeners$"+Dc,yI="__reactHandles$"+Dc;function Tl(t){var e=t[Rs];if(e)return e;for(var n=t.parentNode;n;){if(e=n[No]||n[Rs]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=m5(t);t!==null;){if(n=t[Rs])return n;t=m5(t)}return e}t=n,n=t.parentNode}return null}function kd(t){return t=t[Rs]||t[No],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Gu(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(qe(33))}function vm(t){return t[od]||null}var Q1=[],Ku=-1;function Xa(t){return{current:t}}function hn(t){0>Ku||(t.current=Q1[Ku],Q1[Ku]=null,Ku--)}function rn(t,e){Ku++,Q1[Ku]=t.current,t.current=e}var za={},kr=Xa(za),si=Xa(!1),Ml=za;function yc(t,e){var n=t.type.contextTypes;if(!n)return za;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function oi(t){return t=t.childContextTypes,t!=null}function Ep(){hn(si),hn(kr)}function g5(t,e,n){if(kr.current!==za)throw Error(qe(168));rn(kr,e),rn(si,n)}function e4(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(qe(108,nN(t)||"Unknown",i));return yn({},n,r)}function Np(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||za,Ml=kr.current,rn(kr,t),rn(si,si.current),!0}function v5(t,e,n){var r=t.stateNode;if(!r)throw Error(qe(169));n?(t=e4(t,e,Ml),r.__reactInternalMemoizedMergedChildContext=t,hn(si),hn(kr),rn(kr,t)):hn(si),rn(si,n)}var mo=null,ym=!1,Bg=!1;function t4(t){mo===null?mo=[t]:mo.push(t)}function _I(t){ym=!0,t4(t)}function Ja(){if(!Bg&&mo!==null){Bg=!0;var t=0,e=Kt;try{var n=mo;for(Kt=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}mo=null,ym=!1}catch(i){throw mo!==null&&(mo=mo.slice(t+1)),Nb(m2,Ja),i}finally{Kt=e,Bg=!1}}return null}var Qu=[],Yu=0,Ip=null,Tp=0,Di=[],Oi=0,Ul=null,go=1,vo="";function xl(t,e){Qu[Yu++]=Tp,Qu[Yu++]=Ip,Ip=t,Tp=e}function n4(t,e,n){Di[Oi++]=go,Di[Oi++]=vo,Di[Oi++]=Ul,Ul=t;var r=go;t=vo;var i=32-as(r)-1;r&=~(1<<i),n+=1;var s=32-as(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,go=1<<32-as(e)+i|n<<i|r,vo=s+t}else go=1<<s|n<<i|r,vo=t}function A2(t){t.return!==null&&(xl(t,1),n4(t,1,0))}function E2(t){for(;t===Ip;)Ip=Qu[--Yu],Qu[Yu]=null,Tp=Qu[--Yu],Qu[Yu]=null;for(;t===Ul;)Ul=Di[--Oi],Di[Oi]=null,vo=Di[--Oi],Di[Oi]=null,go=Di[--Oi],Di[Oi]=null}var Si=null,_i=null,pn=!1,os=null;function r4(t,e){var n=Fi(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function y5(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Si=t,_i=La(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Si=t,_i=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ul!==null?{id:go,overflow:vo}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Fi(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Si=t,_i=null,!0):!1;default:return!1}}function Y1(t){return(t.mode&1)!==0&&(t.flags&128)===0}function X1(t){if(pn){var e=_i;if(e){var n=e;if(!y5(t,e)){if(Y1(t))throw Error(qe(418));e=La(n.nextSibling);var r=Si;e&&y5(t,e)?r4(r,n):(t.flags=t.flags&-4097|2,pn=!1,Si=t)}}else{if(Y1(t))throw Error(qe(418));t.flags=t.flags&-4097|2,pn=!1,Si=t}}}function _5(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Si=t}function Nf(t){if(t!==Si)return!1;if(!pn)return _5(t),pn=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!W1(t.type,t.memoizedProps)),e&&(e=_i)){if(Y1(t))throw i4(),Error(qe(418));for(;e;)r4(t,e),e=La(e.nextSibling)}if(_5(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(qe(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){_i=La(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}_i=null}}else _i=Si?La(t.stateNode.nextSibling):null;return!0}function i4(){for(var t=_i;t;)t=La(t.nextSibling)}function _c(){_i=Si=null,pn=!1}function N2(t){os===null?os=[t]:os.push(t)}var wI=Ro.ReactCurrentBatchConfig;function gh(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(qe(309));var r=n.stateNode}if(!r)throw Error(qe(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(qe(284));if(!n._owner)throw Error(qe(290,t))}return t}function If(t,e){throw t=Object.prototype.toString.call(e),Error(qe(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function w5(t){var e=t._init;return e(t._payload)}function s4(t){function e(w,x){if(t){var C=w.deletions;C===null?(w.deletions=[x],w.flags|=16):C.push(x)}}function n(w,x){if(!t)return null;for(;x!==null;)e(w,x),x=x.sibling;return null}function r(w,x){for(w=new Map;x!==null;)x.key!==null?w.set(x.key,x):w.set(x.index,x),x=x.sibling;return w}function i(w,x){return w=Oa(w,x),w.index=0,w.sibling=null,w}function s(w,x,C){return w.index=C,t?(C=w.alternate,C!==null?(C=C.index,C<x?(w.flags|=2,x):C):(w.flags|=2,x)):(w.flags|=1048576,x)}function o(w){return t&&w.alternate===null&&(w.flags|=2),w}function a(w,x,C,M){return x===null||x.tag!==6?(x=Kg(C,w.mode,M),x.return=w,x):(x=i(x,C),x.return=w,x)}function l(w,x,C,M){var Q=C.type;return Q===zu?h(w,x,C.props.children,M,C.key):x!==null&&(x.elementType===Q||typeof Q=="object"&&Q!==null&&Q.$$typeof===ma&&w5(Q)===x.type)?(M=i(x,C.props),M.ref=gh(w,x,C),M.return=w,M):(M=tp(C.type,C.key,C.props,null,w.mode,M),M.ref=gh(w,x,C),M.return=w,M)}function u(w,x,C,M){return x===null||x.tag!==4||x.stateNode.containerInfo!==C.containerInfo||x.stateNode.implementation!==C.implementation?(x=Qg(C,w.mode,M),x.return=w,x):(x=i(x,C.children||[]),x.return=w,x)}function h(w,x,C,M,Q){return x===null||x.tag!==7?(x=jl(C,w.mode,M,Q),x.return=w,x):(x=i(x,C),x.return=w,x)}function f(w,x,C){if(typeof x=="string"&&x!==""||typeof x=="number")return x=Kg(""+x,w.mode,C),x.return=w,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case gf:return C=tp(x.type,x.key,x.props,null,w.mode,C),C.ref=gh(w,null,x),C.return=w,C;case qu:return x=Qg(x,w.mode,C),x.return=w,x;case ma:var M=x._init;return f(w,M(x._payload),C)}if(Ah(x)||hh(x))return x=jl(x,w.mode,C,null),x.return=w,x;If(w,x)}return null}function m(w,x,C,M){var Q=x!==null?x.key:null;if(typeof C=="string"&&C!==""||typeof C=="number")return Q!==null?null:a(w,x,""+C,M);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case gf:return C.key===Q?l(w,x,C,M):null;case qu:return C.key===Q?u(w,x,C,M):null;case ma:return Q=C._init,m(w,x,Q(C._payload),M)}if(Ah(C)||hh(C))return Q!==null?null:h(w,x,C,M,null);If(w,C)}return null}function p(w,x,C,M,Q){if(typeof M=="string"&&M!==""||typeof M=="number")return w=w.get(C)||null,a(x,w,""+M,Q);if(typeof M=="object"&&M!==null){switch(M.$$typeof){case gf:return w=w.get(M.key===null?C:M.key)||null,l(x,w,M,Q);case qu:return w=w.get(M.key===null?C:M.key)||null,u(x,w,M,Q);case ma:var z=M._init;return p(w,x,C,z(M._payload),Q)}if(Ah(M)||hh(M))return w=w.get(C)||null,h(x,w,M,Q,null);If(x,M)}return null}function b(w,x,C,M){for(var Q=null,z=null,L=x,y=x=0,N=null;L!==null&&y<C.length;y++){L.index>y?(N=L,L=null):N=L.sibling;var R=m(w,L,C[y],M);if(R===null){L===null&&(L=N);break}t&&L&&R.alternate===null&&e(w,L),x=s(R,x,y),z===null?Q=R:z.sibling=R,z=R,L=N}if(y===C.length)return n(w,L),pn&&xl(w,y),Q;if(L===null){for(;y<C.length;y++)L=f(w,C[y],M),L!==null&&(x=s(L,x,y),z===null?Q=L:z.sibling=L,z=L);return pn&&xl(w,y),Q}for(L=r(w,L);y<C.length;y++)N=p(L,w,y,C[y],M),N!==null&&(t&&N.alternate!==null&&L.delete(N.key===null?y:N.key),x=s(N,x,y),z===null?Q=N:z.sibling=N,z=N);return t&&L.forEach(function(A){return e(w,A)}),pn&&xl(w,y),Q}function E(w,x,C,M){var Q=hh(C);if(typeof Q!="function")throw Error(qe(150));if(C=Q.call(C),C==null)throw Error(qe(151));for(var z=Q=null,L=x,y=x=0,N=null,R=C.next();L!==null&&!R.done;y++,R=C.next()){L.index>y?(N=L,L=null):N=L.sibling;var A=m(w,L,R.value,M);if(A===null){L===null&&(L=N);break}t&&L&&A.alternate===null&&e(w,L),x=s(A,x,y),z===null?Q=A:z.sibling=A,z=A,L=N}if(R.done)return n(w,L),pn&&xl(w,y),Q;if(L===null){for(;!R.done;y++,R=C.next())R=f(w,R.value,M),R!==null&&(x=s(R,x,y),z===null?Q=R:z.sibling=R,z=R);return pn&&xl(w,y),Q}for(L=r(w,L);!R.done;y++,R=C.next())R=p(L,w,y,R.value,M),R!==null&&(t&&R.alternate!==null&&L.delete(R.key===null?y:R.key),x=s(R,x,y),z===null?Q=R:z.sibling=R,z=R);return t&&L.forEach(function(I){return e(w,I)}),pn&&xl(w,y),Q}function k(w,x,C,M){if(typeof C=="object"&&C!==null&&C.type===zu&&C.key===null&&(C=C.props.children),typeof C=="object"&&C!==null){switch(C.$$typeof){case gf:e:{for(var Q=C.key,z=x;z!==null;){if(z.key===Q){if(Q=C.type,Q===zu){if(z.tag===7){n(w,z.sibling),x=i(z,C.props.children),x.return=w,w=x;break e}}else if(z.elementType===Q||typeof Q=="object"&&Q!==null&&Q.$$typeof===ma&&w5(Q)===z.type){n(w,z.sibling),x=i(z,C.props),x.ref=gh(w,z,C),x.return=w,w=x;break e}n(w,z);break}else e(w,z);z=z.sibling}C.type===zu?(x=jl(C.props.children,w.mode,M,C.key),x.return=w,w=x):(M=tp(C.type,C.key,C.props,null,w.mode,M),M.ref=gh(w,x,C),M.return=w,w=M)}return o(w);case qu:e:{for(z=C.key;x!==null;){if(x.key===z)if(x.tag===4&&x.stateNode.containerInfo===C.containerInfo&&x.stateNode.implementation===C.implementation){n(w,x.sibling),x=i(x,C.children||[]),x.return=w,w=x;break e}else{n(w,x);break}else e(w,x);x=x.sibling}x=Qg(C,w.mode,M),x.return=w,w=x}return o(w);case ma:return z=C._init,k(w,x,z(C._payload),M)}if(Ah(C))return b(w,x,C,M);if(hh(C))return E(w,x,C,M);If(w,C)}return typeof C=="string"&&C!==""||typeof C=="number"?(C=""+C,x!==null&&x.tag===6?(n(w,x.sibling),x=i(x,C),x.return=w,w=x):(n(w,x),x=Kg(C,w.mode,M),x.return=w,w=x),o(w)):n(w,x)}return k}var wc=s4(!0),o4=s4(!1),kp=Xa(null),Pp=null,Xu=null,I2=null;function T2(){I2=Xu=Pp=null}function k2(t){var e=kp.current;hn(kp),t._currentValue=e}function J1(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function ac(t,e){Pp=t,I2=Xu=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(ii=!0),t.firstContext=null)}function Vi(t){var e=t._currentValue;if(I2!==t)if(t={context:t,memoizedValue:e,next:null},Xu===null){if(Pp===null)throw Error(qe(308));Xu=t,Pp.dependencies={lanes:0,firstContext:t}}else Xu=Xu.next=t;return e}var kl=null;function P2(t){kl===null?kl=[t]:kl.push(t)}function a4(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,P2(e)):(n.next=i.next,i.next=n),e.interleaved=n,Io(t,r)}function Io(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var ga=!1;function C2(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function l4(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function xo(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ra(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Ft&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Io(t,n)}return i=r.interleaved,i===null?(e.next=e,P2(r)):(e.next=i.next,i.next=e),r.interleaved=e,Io(t,n)}function Qf(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,g2(t,n)}}function b5(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Cp(t,e,n,r){var i=t.updateQueue;ga=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=u:a.next=u,h.lastBaseUpdate=l))}if(s!==null){var f=i.baseState;o=0,h=u=l=null,a=s;do{var m=a.lane,p=a.eventTime;if((r&m)===m){h!==null&&(h=h.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var b=t,E=a;switch(m=e,p=n,E.tag){case 1:if(b=E.payload,typeof b=="function"){f=b.call(p,f,m);break e}f=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=E.payload,m=typeof b=="function"?b.call(p,f,m):b,m==null)break e;f=yn({},f,m);break e;case 2:ga=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,m=i.effects,m===null?i.effects=[a]:m.push(a))}else p={eventTime:p,lane:m,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(u=h=p,l=f):h=h.next=p,o|=m;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;m=a,a=m.next,m.next=null,i.lastBaseUpdate=m,i.shared.pending=null}}while(!0);if(h===null&&(l=f),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Bl|=o,t.lanes=o,t.memoizedState=f}}function x5(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(qe(191,i));i.call(r)}}}var Pd={},Fs=Xa(Pd),ad=Xa(Pd),ld=Xa(Pd);function Pl(t){if(t===Pd)throw Error(qe(174));return t}function L2(t,e){switch(rn(ld,e),rn(ad,t),rn(Fs,Pd),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:L1(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=L1(e,t)}hn(Fs),rn(Fs,e)}function bc(){hn(Fs),hn(ad),hn(ld)}function u4(t){Pl(ld.current);var e=Pl(Fs.current),n=L1(e,t.type);e!==n&&(rn(ad,t),rn(Fs,n))}function R2(t){ad.current===t&&(hn(Fs),hn(ad))}var mn=Xa(0);function Lp(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var qg=[];function j2(){for(var t=0;t<qg.length;t++)qg[t]._workInProgressVersionPrimary=null;qg.length=0}var Yf=Ro.ReactCurrentDispatcher,zg=Ro.ReactCurrentBatchConfig,Vl=0,gn=null,Kn=null,er=null,Rp=!1,Uh=!1,ud=0,bI=0;function yr(){throw Error(qe(321))}function D2(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!us(t[n],e[n]))return!1;return!0}function O2(t,e,n,r,i,s){if(Vl=s,gn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Yf.current=t===null||t.memoizedState===null?EI:NI,t=n(r,i),Uh){s=0;do{if(Uh=!1,ud=0,25<=s)throw Error(qe(301));s+=1,er=Kn=null,e.updateQueue=null,Yf.current=II,t=n(r,i)}while(Uh)}if(Yf.current=jp,e=Kn!==null&&Kn.next!==null,Vl=0,er=Kn=gn=null,Rp=!1,e)throw Error(qe(300));return t}function F2(){var t=ud!==0;return ud=0,t}function Cs(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return er===null?gn.memoizedState=er=t:er=er.next=t,er}function Bi(){if(Kn===null){var t=gn.alternate;t=t!==null?t.memoizedState:null}else t=Kn.next;var e=er===null?gn.memoizedState:er.next;if(e!==null)er=e,Kn=t;else{if(t===null)throw Error(qe(310));Kn=t,t={memoizedState:Kn.memoizedState,baseState:Kn.baseState,baseQueue:Kn.baseQueue,queue:Kn.queue,next:null},er===null?gn.memoizedState=er=t:er=er.next=t}return er}function cd(t,e){return typeof e=="function"?e(t):e}function $g(t){var e=Bi(),n=e.queue;if(n===null)throw Error(qe(311));n.lastRenderedReducer=t;var r=Kn,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,u=s;do{var h=u.lane;if((Vl&h)===h)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var f={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=f,o=r):l=l.next=f,gn.lanes|=h,Bl|=h}u=u.next}while(u!==null&&u!==s);l===null?o=r:l.next=a,us(r,e.memoizedState)||(ii=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,gn.lanes|=s,Bl|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Hg(t){var e=Bi(),n=e.queue;if(n===null)throw Error(qe(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);us(s,e.memoizedState)||(ii=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function c4(){}function h4(t,e){var n=gn,r=Bi(),i=e(),s=!us(r.memoizedState,i);if(s&&(r.memoizedState=i,ii=!0),r=r.queue,M2(p4.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||er!==null&&er.memoizedState.tag&1){if(n.flags|=2048,hd(9,f4.bind(null,n,r,i,e),void 0,null),nr===null)throw Error(qe(349));Vl&30||d4(n,e,i)}return i}function d4(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=gn.updateQueue,e===null?(e={lastEffect:null,stores:null},gn.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function f4(t,e,n,r){e.value=n,e.getSnapshot=r,m4(e)&&g4(t)}function p4(t,e,n){return n(function(){m4(e)&&g4(t)})}function m4(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!us(t,n)}catch{return!0}}function g4(t){var e=Io(t,1);e!==null&&ls(e,t,1,-1)}function S5(t){var e=Cs();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:cd,lastRenderedState:t},e.queue=t,t=t.dispatch=AI.bind(null,gn,t),[e.memoizedState,t]}function hd(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=gn.updateQueue,e===null?(e={lastEffect:null,stores:null},gn.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function v4(){return Bi().memoizedState}function Xf(t,e,n,r){var i=Cs();gn.flags|=t,i.memoizedState=hd(1|e,n,void 0,r===void 0?null:r)}function _m(t,e,n,r){var i=Bi();r=r===void 0?null:r;var s=void 0;if(Kn!==null){var o=Kn.memoizedState;if(s=o.destroy,r!==null&&D2(r,o.deps)){i.memoizedState=hd(e,n,s,r);return}}gn.flags|=t,i.memoizedState=hd(1|e,n,s,r)}function A5(t,e){return Xf(8390656,8,t,e)}function M2(t,e){return _m(2048,8,t,e)}function y4(t,e){return _m(4,2,t,e)}function _4(t,e){return _m(4,4,t,e)}function w4(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function b4(t,e,n){return n=n!=null?n.concat([t]):null,_m(4,4,w4.bind(null,e,t),n)}function U2(){}function x4(t,e){var n=Bi();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&D2(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function S4(t,e){var n=Bi();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&D2(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function A4(t,e,n){return Vl&21?(us(n,e)||(n=kb(),gn.lanes|=n,Bl|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,ii=!0),t.memoizedState=n)}function xI(t,e){var n=Kt;Kt=n!==0&&4>n?n:4,t(!0);var r=zg.transition;zg.transition={};try{t(!1),e()}finally{Kt=n,zg.transition=r}}function E4(){return Bi().memoizedState}function SI(t,e,n){var r=Da(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},N4(t))I4(e,n);else if(n=a4(t,e,n,r),n!==null){var i=Br();ls(n,t,r,i),T4(n,e,r)}}function AI(t,e,n){var r=Da(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(N4(t))I4(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,us(a,o)){var l=e.interleaved;l===null?(i.next=i,P2(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=a4(t,e,i,r),n!==null&&(i=Br(),ls(n,t,r,i),T4(n,e,r))}}function N4(t){var e=t.alternate;return t===gn||e!==null&&e===gn}function I4(t,e){Uh=Rp=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function T4(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,g2(t,n)}}var jp={readContext:Vi,useCallback:yr,useContext:yr,useEffect:yr,useImperativeHandle:yr,useInsertionEffect:yr,useLayoutEffect:yr,useMemo:yr,useReducer:yr,useRef:yr,useState:yr,useDebugValue:yr,useDeferredValue:yr,useTransition:yr,useMutableSource:yr,useSyncExternalStore:yr,useId:yr,unstable_isNewReconciler:!1},EI={readContext:Vi,useCallback:function(t,e){return Cs().memoizedState=[t,e===void 0?null:e],t},useContext:Vi,useEffect:A5,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Xf(4194308,4,w4.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Xf(4194308,4,t,e)},useInsertionEffect:function(t,e){return Xf(4,2,t,e)},useMemo:function(t,e){var n=Cs();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Cs();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=SI.bind(null,gn,t),[r.memoizedState,t]},useRef:function(t){var e=Cs();return t={current:t},e.memoizedState=t},useState:S5,useDebugValue:U2,useDeferredValue:function(t){return Cs().memoizedState=t},useTransition:function(){var t=S5(!1),e=t[0];return t=xI.bind(null,t[1]),Cs().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=gn,i=Cs();if(pn){if(n===void 0)throw Error(qe(407));n=n()}else{if(n=e(),nr===null)throw Error(qe(349));Vl&30||d4(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,A5(p4.bind(null,r,s,t),[t]),r.flags|=2048,hd(9,f4.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Cs(),e=nr.identifierPrefix;if(pn){var n=vo,r=go;n=(r&~(1<<32-as(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=ud++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=bI++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},NI={readContext:Vi,useCallback:x4,useContext:Vi,useEffect:M2,useImperativeHandle:b4,useInsertionEffect:y4,useLayoutEffect:_4,useMemo:S4,useReducer:$g,useRef:v4,useState:function(){return $g(cd)},useDebugValue:U2,useDeferredValue:function(t){var e=Bi();return A4(e,Kn.memoizedState,t)},useTransition:function(){var t=$g(cd)[0],e=Bi().memoizedState;return[t,e]},useMutableSource:c4,useSyncExternalStore:h4,useId:E4,unstable_isNewReconciler:!1},II={readContext:Vi,useCallback:x4,useContext:Vi,useEffect:M2,useImperativeHandle:b4,useInsertionEffect:y4,useLayoutEffect:_4,useMemo:S4,useReducer:Hg,useRef:v4,useState:function(){return Hg(cd)},useDebugValue:U2,useDeferredValue:function(t){var e=Bi();return Kn===null?e.memoizedState=t:A4(e,Kn.memoizedState,t)},useTransition:function(){var t=Hg(cd)[0],e=Bi().memoizedState;return[t,e]},useMutableSource:c4,useSyncExternalStore:h4,useId:E4,unstable_isNewReconciler:!1};function rs(t,e){if(t&&t.defaultProps){e=yn({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Z1(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:yn({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var wm={isMounted:function(t){return(t=t._reactInternals)?Xl(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Br(),i=Da(t),s=xo(r,i);s.payload=e,n!=null&&(s.callback=n),e=Ra(t,s,i),e!==null&&(ls(e,t,i,r),Qf(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Br(),i=Da(t),s=xo(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Ra(t,s,i),e!==null&&(ls(e,t,i,r),Qf(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Br(),r=Da(t),i=xo(n,r);i.tag=2,e!=null&&(i.callback=e),e=Ra(t,i,r),e!==null&&(ls(e,t,r,n),Qf(e,t,r))}};function E5(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!rd(n,r)||!rd(i,s):!0}function k4(t,e,n){var r=!1,i=za,s=e.contextType;return typeof s=="object"&&s!==null?s=Vi(s):(i=oi(e)?Ml:kr.current,r=e.contextTypes,s=(r=r!=null)?yc(t,i):za),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=wm,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function N5(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&wm.enqueueReplaceState(e,e.state,null)}function e0(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},C2(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Vi(s):(s=oi(e)?Ml:kr.current,i.context=yc(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Z1(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&wm.enqueueReplaceState(i,i.state,null),Cp(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function xc(t,e){try{var n="",r=e;do n+=tN(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Wg(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function t0(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var TI=typeof WeakMap=="function"?WeakMap:Map;function P4(t,e,n){n=xo(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Op||(Op=!0,h0=r),t0(t,e)},n}function C4(t,e,n){n=xo(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){t0(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){t0(t,e),typeof r!="function"&&(ja===null?ja=new Set([this]):ja.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function I5(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new TI;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=qI.bind(null,t,e,n),e.then(t,t))}function T5(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function k5(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=xo(-1,1),e.tag=2,Ra(n,e,1))),n.lanes|=1),t)}var kI=Ro.ReactCurrentOwner,ii=!1;function Vr(t,e,n,r){e.child=t===null?o4(e,null,n,r):wc(e,t.child,n,r)}function P5(t,e,n,r,i){n=n.render;var s=e.ref;return ac(e,i),r=O2(t,e,n,r,s,i),n=F2(),t!==null&&!ii?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,To(t,e,i)):(pn&&n&&A2(e),e.flags|=1,Vr(t,e,r,i),e.child)}function C5(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!G2(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,L4(t,e,s,r,i)):(t=tp(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:rd,n(o,r)&&t.ref===e.ref)return To(t,e,i)}return e.flags|=1,t=Oa(s,r),t.ref=e.ref,t.return=e,e.child=t}function L4(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(rd(s,r)&&t.ref===e.ref)if(ii=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(ii=!0);else return e.lanes=t.lanes,To(t,e,i)}return n0(t,e,n,r,i)}function R4(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},rn(Zu,yi),yi|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,rn(Zu,yi),yi|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,rn(Zu,yi),yi|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,rn(Zu,yi),yi|=r;return Vr(t,e,i,n),e.child}function j4(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function n0(t,e,n,r,i){var s=oi(n)?Ml:kr.current;return s=yc(e,s),ac(e,i),n=O2(t,e,n,r,s,i),r=F2(),t!==null&&!ii?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,To(t,e,i)):(pn&&r&&A2(e),e.flags|=1,Vr(t,e,n,i),e.child)}function L5(t,e,n,r,i){if(oi(n)){var s=!0;Np(e)}else s=!1;if(ac(e,i),e.stateNode===null)Jf(t,e),k4(e,n,r),e0(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=Vi(u):(u=oi(n)?Ml:kr.current,u=yc(e,u));var h=n.getDerivedStateFromProps,f=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==u)&&N5(e,o,r,u),ga=!1;var m=e.memoizedState;o.state=m,Cp(e,r,o,i),l=e.memoizedState,a!==r||m!==l||si.current||ga?(typeof h=="function"&&(Z1(e,n,h,r),l=e.memoizedState),(a=ga||E5(e,n,a,r,m,l,u))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,l4(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:rs(e.type,a),o.props=u,f=e.pendingProps,m=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Vi(l):(l=oi(n)?Ml:kr.current,l=yc(e,l));var p=n.getDerivedStateFromProps;(h=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||m!==l)&&N5(e,o,r,l),ga=!1,m=e.memoizedState,o.state=m,Cp(e,r,o,i);var b=e.memoizedState;a!==f||m!==b||si.current||ga?(typeof p=="function"&&(Z1(e,n,p,r),b=e.memoizedState),(u=ga||E5(e,n,u,r,m,b,l)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,b,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,b,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=b),o.props=r,o.state=b,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),r=!1)}return r0(t,e,n,r,s,i)}function r0(t,e,n,r,i,s){j4(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&v5(e,n,!1),To(t,e,s);r=e.stateNode,kI.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=wc(e,t.child,null,s),e.child=wc(e,null,a,s)):Vr(t,e,a,s),e.memoizedState=r.state,i&&v5(e,n,!0),e.child}function D4(t){var e=t.stateNode;e.pendingContext?g5(t,e.pendingContext,e.pendingContext!==e.context):e.context&&g5(t,e.context,!1),L2(t,e.containerInfo)}function R5(t,e,n,r,i){return _c(),N2(i),e.flags|=256,Vr(t,e,n,r),e.child}var i0={dehydrated:null,treeContext:null,retryLane:0};function s0(t){return{baseLanes:t,cachePool:null,transitions:null}}function O4(t,e,n){var r=e.pendingProps,i=mn.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),rn(mn,i&1),t===null)return X1(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Sm(o,r,0,null),t=jl(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=s0(n),e.memoizedState=i0,t):V2(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return PI(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Oa(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Oa(a,s):(s=jl(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?s0(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=i0,r}return s=t.child,t=s.sibling,r=Oa(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function V2(t,e){return e=Sm({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Tf(t,e,n,r){return r!==null&&N2(r),wc(e,t.child,null,n),t=V2(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function PI(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Wg(Error(qe(422))),Tf(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Sm({mode:"visible",children:r.children},i,0,null),s=jl(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&wc(e,t.child,null,o),e.child.memoizedState=s0(o),e.memoizedState=i0,s);if(!(e.mode&1))return Tf(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(qe(419)),r=Wg(s,r,void 0),Tf(t,e,o,r)}if(a=(o&t.childLanes)!==0,ii||a){if(r=nr,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Io(t,i),ls(r,t,i,-1))}return W2(),r=Wg(Error(qe(421))),Tf(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=zI.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,_i=La(i.nextSibling),Si=e,pn=!0,os=null,t!==null&&(Di[Oi++]=go,Di[Oi++]=vo,Di[Oi++]=Ul,go=t.id,vo=t.overflow,Ul=e),e=V2(e,r.children),e.flags|=4096,e)}function j5(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),J1(t.return,e,n)}function Gg(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function F4(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Vr(t,e,r.children,n),r=mn.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&j5(t,n,e);else if(t.tag===19)j5(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(rn(mn,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Lp(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Gg(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Lp(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Gg(e,!0,n,null,s);break;case"together":Gg(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Jf(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function To(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Bl|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(qe(153));if(e.child!==null){for(t=e.child,n=Oa(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Oa(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function CI(t,e,n){switch(e.tag){case 3:D4(e),_c();break;case 5:u4(e);break;case 1:oi(e.type)&&Np(e);break;case 4:L2(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;rn(kp,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(rn(mn,mn.current&1),e.flags|=128,null):n&e.child.childLanes?O4(t,e,n):(rn(mn,mn.current&1),t=To(t,e,n),t!==null?t.sibling:null);rn(mn,mn.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return F4(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),rn(mn,mn.current),r)break;return null;case 22:case 23:return e.lanes=0,R4(t,e,n)}return To(t,e,n)}var M4,o0,U4,V4;M4=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};o0=function(){};U4=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Pl(Fs.current);var s=null;switch(n){case"input":i=T1(t,i),r=T1(t,r),s=[];break;case"select":i=yn({},i,{value:void 0}),r=yn({},r,{value:void 0}),s=[];break;case"textarea":i=C1(t,i),r=C1(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Ap)}R1(n,r);var o;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Yh.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var l=r[u];if(a=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Yh.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&ln("scroll",t),s||a===l||(s=[])):(s=s||[]).push(u,l))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};V4=function(t,e,n,r){n!==r&&(e.flags|=4)};function vh(t,e){if(!pn)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function _r(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function LI(t,e,n){var r=e.pendingProps;switch(E2(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return _r(e),null;case 1:return oi(e.type)&&Ep(),_r(e),null;case 3:return r=e.stateNode,bc(),hn(si),hn(kr),j2(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Nf(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,os!==null&&(p0(os),os=null))),o0(t,e),_r(e),null;case 5:R2(e);var i=Pl(ld.current);if(n=e.type,t!==null&&e.stateNode!=null)U4(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(qe(166));return _r(e),null}if(t=Pl(Fs.current),Nf(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Rs]=e,r[od]=s,t=(e.mode&1)!==0,n){case"dialog":ln("cancel",r),ln("close",r);break;case"iframe":case"object":case"embed":ln("load",r);break;case"video":case"audio":for(i=0;i<Nh.length;i++)ln(Nh[i],r);break;case"source":ln("error",r);break;case"img":case"image":case"link":ln("error",r),ln("load",r);break;case"details":ln("toggle",r);break;case"input":zy(r,s),ln("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},ln("invalid",r);break;case"textarea":Hy(r,s),ln("invalid",r)}R1(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Ef(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Ef(r.textContent,a,t),i=["children",""+a]):Yh.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&ln("scroll",r)}switch(n){case"input":vf(r),$y(r,s,!0);break;case"textarea":vf(r),Wy(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Ap)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=pb(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Rs]=e,t[od]=r,M4(t,e,!1,!1),e.stateNode=t;e:{switch(o=j1(n,r),n){case"dialog":ln("cancel",t),ln("close",t),i=r;break;case"iframe":case"object":case"embed":ln("load",t),i=r;break;case"video":case"audio":for(i=0;i<Nh.length;i++)ln(Nh[i],t);i=r;break;case"source":ln("error",t),i=r;break;case"img":case"image":case"link":ln("error",t),ln("load",t),i=r;break;case"details":ln("toggle",t),i=r;break;case"input":zy(t,r),i=T1(t,r),ln("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=yn({},r,{value:void 0}),ln("invalid",t);break;case"textarea":Hy(t,r),i=C1(t,r),ln("invalid",t);break;default:i=r}R1(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?vb(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&mb(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Xh(t,l):typeof l=="number"&&Xh(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Yh.hasOwnProperty(s)?l!=null&&s==="onScroll"&&ln("scroll",t):l!=null&&c2(t,s,l,o))}switch(n){case"input":vf(t),$y(t,r,!1);break;case"textarea":vf(t),Wy(t);break;case"option":r.value!=null&&t.setAttribute("value",""+qa(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?rc(t,!!r.multiple,s,!1):r.defaultValue!=null&&rc(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Ap)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return _r(e),null;case 6:if(t&&e.stateNode!=null)V4(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(qe(166));if(n=Pl(ld.current),Pl(Fs.current),Nf(e)){if(r=e.stateNode,n=e.memoizedProps,r[Rs]=e,(s=r.nodeValue!==n)&&(t=Si,t!==null))switch(t.tag){case 3:Ef(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ef(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Rs]=e,e.stateNode=r}return _r(e),null;case 13:if(hn(mn),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(pn&&_i!==null&&e.mode&1&&!(e.flags&128))i4(),_c(),e.flags|=98560,s=!1;else if(s=Nf(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(qe(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(qe(317));s[Rs]=e}else _c(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;_r(e),s=!1}else os!==null&&(p0(os),os=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||mn.current&1?Qn===0&&(Qn=3):W2())),e.updateQueue!==null&&(e.flags|=4),_r(e),null);case 4:return bc(),o0(t,e),t===null&&id(e.stateNode.containerInfo),_r(e),null;case 10:return k2(e.type._context),_r(e),null;case 17:return oi(e.type)&&Ep(),_r(e),null;case 19:if(hn(mn),s=e.memoizedState,s===null)return _r(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)vh(s,!1);else{if(Qn!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Lp(t),o!==null){for(e.flags|=128,vh(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return rn(mn,mn.current&1|2),e.child}t=t.sibling}s.tail!==null&&Rn()>Sc&&(e.flags|=128,r=!0,vh(s,!1),e.lanes=4194304)}else{if(!r)if(t=Lp(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),vh(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!pn)return _r(e),null}else 2*Rn()-s.renderingStartTime>Sc&&n!==1073741824&&(e.flags|=128,r=!0,vh(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Rn(),e.sibling=null,n=mn.current,rn(mn,r?n&1|2:n&1),e):(_r(e),null);case 22:case 23:return H2(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?yi&1073741824&&(_r(e),e.subtreeFlags&6&&(e.flags|=8192)):_r(e),null;case 24:return null;case 25:return null}throw Error(qe(156,e.tag))}function RI(t,e){switch(E2(e),e.tag){case 1:return oi(e.type)&&Ep(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return bc(),hn(si),hn(kr),j2(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return R2(e),null;case 13:if(hn(mn),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(qe(340));_c()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return hn(mn),null;case 4:return bc(),null;case 10:return k2(e.type._context),null;case 22:case 23:return H2(),null;case 24:return null;default:return null}}var kf=!1,Nr=!1,jI=typeof WeakSet=="function"?WeakSet:Set,et=null;function Ju(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){In(t,e,r)}else n.current=null}function a0(t,e,n){try{n()}catch(r){In(t,e,r)}}var D5=!1;function DI(t,e){if($1=bp,t=Hb(),S2(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,h=0,f=t,m=null;t:for(;;){for(var p;f!==n||i!==0&&f.nodeType!==3||(a=o+i),f!==s||r!==0&&f.nodeType!==3||(l=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(p=f.firstChild)!==null;)m=f,f=p;for(;;){if(f===t)break t;if(m===n&&++u===i&&(a=o),m===s&&++h===r&&(l=o),(p=f.nextSibling)!==null)break;f=m,m=f.parentNode}f=p}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(H1={focusedElem:t,selectionRange:n},bp=!1,et=e;et!==null;)if(e=et,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,et=t;else for(;et!==null;){e=et;try{var b=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var E=b.memoizedProps,k=b.memoizedState,w=e.stateNode,x=w.getSnapshotBeforeUpdate(e.elementType===e.type?E:rs(e.type,E),k);w.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var C=e.stateNode.containerInfo;C.nodeType===1?C.textContent="":C.nodeType===9&&C.documentElement&&C.removeChild(C.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(qe(163))}}catch(M){In(e,e.return,M)}if(t=e.sibling,t!==null){t.return=e.return,et=t;break}et=e.return}return b=D5,D5=!1,b}function Vh(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&a0(e,n,s)}i=i.next}while(i!==r)}}function bm(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function l0(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function B4(t){var e=t.alternate;e!==null&&(t.alternate=null,B4(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Rs],delete e[od],delete e[K1],delete e[vI],delete e[yI])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function q4(t){return t.tag===5||t.tag===3||t.tag===4}function O5(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||q4(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function u0(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Ap));else if(r!==4&&(t=t.child,t!==null))for(u0(t,e,n),t=t.sibling;t!==null;)u0(t,e,n),t=t.sibling}function c0(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(c0(t,e,n),t=t.sibling;t!==null;)c0(t,e,n),t=t.sibling}var lr=null,ss=!1;function ha(t,e,n){for(n=n.child;n!==null;)z4(t,e,n),n=n.sibling}function z4(t,e,n){if(Os&&typeof Os.onCommitFiberUnmount=="function")try{Os.onCommitFiberUnmount(fm,n)}catch{}switch(n.tag){case 5:Nr||Ju(n,e);case 6:var r=lr,i=ss;lr=null,ha(t,e,n),lr=r,ss=i,lr!==null&&(ss?(t=lr,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):lr.removeChild(n.stateNode));break;case 18:lr!==null&&(ss?(t=lr,n=n.stateNode,t.nodeType===8?Vg(t.parentNode,n):t.nodeType===1&&Vg(t,n),td(t)):Vg(lr,n.stateNode));break;case 4:r=lr,i=ss,lr=n.stateNode.containerInfo,ss=!0,ha(t,e,n),lr=r,ss=i;break;case 0:case 11:case 14:case 15:if(!Nr&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&a0(n,e,o),i=i.next}while(i!==r)}ha(t,e,n);break;case 1:if(!Nr&&(Ju(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){In(n,e,a)}ha(t,e,n);break;case 21:ha(t,e,n);break;case 22:n.mode&1?(Nr=(r=Nr)||n.memoizedState!==null,ha(t,e,n),Nr=r):ha(t,e,n);break;default:ha(t,e,n)}}function F5(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new jI),e.forEach(function(r){var i=$I.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Zi(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:lr=a.stateNode,ss=!1;break e;case 3:lr=a.stateNode.containerInfo,ss=!0;break e;case 4:lr=a.stateNode.containerInfo,ss=!0;break e}a=a.return}if(lr===null)throw Error(qe(160));z4(s,o,i),lr=null,ss=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){In(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)$4(e,t),e=e.sibling}function $4(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Zi(e,t),Ts(t),r&4){try{Vh(3,t,t.return),bm(3,t)}catch(E){In(t,t.return,E)}try{Vh(5,t,t.return)}catch(E){In(t,t.return,E)}}break;case 1:Zi(e,t),Ts(t),r&512&&n!==null&&Ju(n,n.return);break;case 5:if(Zi(e,t),Ts(t),r&512&&n!==null&&Ju(n,n.return),t.flags&32){var i=t.stateNode;try{Xh(i,"")}catch(E){In(t,t.return,E)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&db(i,s),j1(a,o);var u=j1(a,s);for(o=0;o<l.length;o+=2){var h=l[o],f=l[o+1];h==="style"?vb(i,f):h==="dangerouslySetInnerHTML"?mb(i,f):h==="children"?Xh(i,f):c2(i,h,f,u)}switch(a){case"input":k1(i,s);break;case"textarea":fb(i,s);break;case"select":var m=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var p=s.value;p!=null?rc(i,!!s.multiple,p,!1):m!==!!s.multiple&&(s.defaultValue!=null?rc(i,!!s.multiple,s.defaultValue,!0):rc(i,!!s.multiple,s.multiple?[]:"",!1))}i[od]=s}catch(E){In(t,t.return,E)}}break;case 6:if(Zi(e,t),Ts(t),r&4){if(t.stateNode===null)throw Error(qe(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(E){In(t,t.return,E)}}break;case 3:if(Zi(e,t),Ts(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{td(e.containerInfo)}catch(E){In(t,t.return,E)}break;case 4:Zi(e,t),Ts(t);break;case 13:Zi(e,t),Ts(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(z2=Rn())),r&4&&F5(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(Nr=(u=Nr)||h,Zi(e,t),Nr=u):Zi(e,t),Ts(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!h&&t.mode&1)for(et=t,h=t.child;h!==null;){for(f=et=h;et!==null;){switch(m=et,p=m.child,m.tag){case 0:case 11:case 14:case 15:Vh(4,m,m.return);break;case 1:Ju(m,m.return);var b=m.stateNode;if(typeof b.componentWillUnmount=="function"){r=m,n=m.return;try{e=r,b.props=e.memoizedProps,b.state=e.memoizedState,b.componentWillUnmount()}catch(E){In(r,n,E)}}break;case 5:Ju(m,m.return);break;case 22:if(m.memoizedState!==null){U5(f);continue}}p!==null?(p.return=m,et=p):U5(f)}h=h.sibling}e:for(h=null,f=t;;){if(f.tag===5){if(h===null){h=f;try{i=f.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=f.stateNode,l=f.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=gb("display",o))}catch(E){In(t,t.return,E)}}}else if(f.tag===6){if(h===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(E){In(t,t.return,E)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Zi(e,t),Ts(t),r&4&&F5(t);break;case 21:break;default:Zi(e,t),Ts(t)}}function Ts(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(q4(n)){var r=n;break e}n=n.return}throw Error(qe(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Xh(i,""),r.flags&=-33);var s=O5(t);c0(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=O5(t);u0(t,a,o);break;default:throw Error(qe(161))}}catch(l){In(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function OI(t,e,n){et=t,H4(t)}function H4(t,e,n){for(var r=(t.mode&1)!==0;et!==null;){var i=et,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||kf;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Nr;a=kf;var u=Nr;if(kf=o,(Nr=l)&&!u)for(et=i;et!==null;)o=et,l=o.child,o.tag===22&&o.memoizedState!==null?V5(i):l!==null?(l.return=o,et=l):V5(i);for(;s!==null;)et=s,H4(s),s=s.sibling;et=i,kf=a,Nr=u}M5(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,et=s):M5(t)}}function M5(t){for(;et!==null;){var e=et;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Nr||bm(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Nr)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:rs(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&x5(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}x5(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var f=h.dehydrated;f!==null&&td(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(qe(163))}Nr||e.flags&512&&l0(e)}catch(m){In(e,e.return,m)}}if(e===t){et=null;break}if(n=e.sibling,n!==null){n.return=e.return,et=n;break}et=e.return}}function U5(t){for(;et!==null;){var e=et;if(e===t){et=null;break}var n=e.sibling;if(n!==null){n.return=e.return,et=n;break}et=e.return}}function V5(t){for(;et!==null;){var e=et;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{bm(4,e)}catch(l){In(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){In(e,i,l)}}var s=e.return;try{l0(e)}catch(l){In(e,s,l)}break;case 5:var o=e.return;try{l0(e)}catch(l){In(e,o,l)}}}catch(l){In(e,e.return,l)}if(e===t){et=null;break}var a=e.sibling;if(a!==null){a.return=e.return,et=a;break}et=e.return}}var FI=Math.ceil,Dp=Ro.ReactCurrentDispatcher,B2=Ro.ReactCurrentOwner,Mi=Ro.ReactCurrentBatchConfig,Ft=0,nr=null,qn=null,hr=0,yi=0,Zu=Xa(0),Qn=0,dd=null,Bl=0,xm=0,q2=0,Bh=null,ti=null,z2=0,Sc=1/0,po=null,Op=!1,h0=null,ja=null,Pf=!1,Ea=null,Fp=0,qh=0,d0=null,Zf=-1,ep=0;function Br(){return Ft&6?Rn():Zf!==-1?Zf:Zf=Rn()}function Da(t){return t.mode&1?Ft&2&&hr!==0?hr&-hr:wI.transition!==null?(ep===0&&(ep=kb()),ep):(t=Kt,t!==0||(t=window.event,t=t===void 0?16:Ob(t.type)),t):1}function ls(t,e,n,r){if(50<qh)throw qh=0,d0=null,Error(qe(185));Id(t,n,r),(!(Ft&2)||t!==nr)&&(t===nr&&(!(Ft&2)&&(xm|=n),Qn===4&&ya(t,hr)),ai(t,r),n===1&&Ft===0&&!(e.mode&1)&&(Sc=Rn()+500,ym&&Ja()))}function ai(t,e){var n=t.callbackNode;wN(t,e);var r=wp(t,t===nr?hr:0);if(r===0)n!==null&&Qy(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Qy(n),e===1)t.tag===0?_I(B5.bind(null,t)):t4(B5.bind(null,t)),mI(function(){!(Ft&6)&&Ja()}),n=null;else{switch(Pb(r)){case 1:n=m2;break;case 4:n=Ib;break;case 16:n=_p;break;case 536870912:n=Tb;break;default:n=_p}n=Z4(n,W4.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function W4(t,e){if(Zf=-1,ep=0,Ft&6)throw Error(qe(327));var n=t.callbackNode;if(lc()&&t.callbackNode!==n)return null;var r=wp(t,t===nr?hr:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Mp(t,r);else{e=r;var i=Ft;Ft|=2;var s=K4();(nr!==t||hr!==e)&&(po=null,Sc=Rn()+500,Rl(t,e));do try{VI();break}catch(a){G4(t,a)}while(!0);T2(),Dp.current=s,Ft=i,qn!==null?e=0:(nr=null,hr=0,e=Qn)}if(e!==0){if(e===2&&(i=U1(t),i!==0&&(r=i,e=f0(t,i))),e===1)throw n=dd,Rl(t,0),ya(t,r),ai(t,Rn()),n;if(e===6)ya(t,r);else{if(i=t.current.alternate,!(r&30)&&!MI(i)&&(e=Mp(t,r),e===2&&(s=U1(t),s!==0&&(r=s,e=f0(t,s))),e===1))throw n=dd,Rl(t,0),ya(t,r),ai(t,Rn()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(qe(345));case 2:Sl(t,ti,po);break;case 3:if(ya(t,r),(r&130023424)===r&&(e=z2+500-Rn(),10<e)){if(wp(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Br(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=G1(Sl.bind(null,t,ti,po),e);break}Sl(t,ti,po);break;case 4:if(ya(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-as(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Rn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*FI(r/1960))-r,10<r){t.timeoutHandle=G1(Sl.bind(null,t,ti,po),r);break}Sl(t,ti,po);break;case 5:Sl(t,ti,po);break;default:throw Error(qe(329))}}}return ai(t,Rn()),t.callbackNode===n?W4.bind(null,t):null}function f0(t,e){var n=Bh;return t.current.memoizedState.isDehydrated&&(Rl(t,e).flags|=256),t=Mp(t,e),t!==2&&(e=ti,ti=n,e!==null&&p0(e)),t}function p0(t){ti===null?ti=t:ti.push.apply(ti,t)}function MI(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!us(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ya(t,e){for(e&=~q2,e&=~xm,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-as(e),r=1<<n;t[n]=-1,e&=~r}}function B5(t){if(Ft&6)throw Error(qe(327));lc();var e=wp(t,0);if(!(e&1))return ai(t,Rn()),null;var n=Mp(t,e);if(t.tag!==0&&n===2){var r=U1(t);r!==0&&(e=r,n=f0(t,r))}if(n===1)throw n=dd,Rl(t,0),ya(t,e),ai(t,Rn()),n;if(n===6)throw Error(qe(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Sl(t,ti,po),ai(t,Rn()),null}function $2(t,e){var n=Ft;Ft|=1;try{return t(e)}finally{Ft=n,Ft===0&&(Sc=Rn()+500,ym&&Ja())}}function ql(t){Ea!==null&&Ea.tag===0&&!(Ft&6)&&lc();var e=Ft;Ft|=1;var n=Mi.transition,r=Kt;try{if(Mi.transition=null,Kt=1,t)return t()}finally{Kt=r,Mi.transition=n,Ft=e,!(Ft&6)&&Ja()}}function H2(){yi=Zu.current,hn(Zu)}function Rl(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,pI(n)),qn!==null)for(n=qn.return;n!==null;){var r=n;switch(E2(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ep();break;case 3:bc(),hn(si),hn(kr),j2();break;case 5:R2(r);break;case 4:bc();break;case 13:hn(mn);break;case 19:hn(mn);break;case 10:k2(r.type._context);break;case 22:case 23:H2()}n=n.return}if(nr=t,qn=t=Oa(t.current,null),hr=yi=e,Qn=0,dd=null,q2=xm=Bl=0,ti=Bh=null,kl!==null){for(e=0;e<kl.length;e++)if(n=kl[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}kl=null}return t}function G4(t,e){do{var n=qn;try{if(T2(),Yf.current=jp,Rp){for(var r=gn.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Rp=!1}if(Vl=0,er=Kn=gn=null,Uh=!1,ud=0,B2.current=null,n===null||n.return===null){Qn=1,dd=e,qn=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=hr,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,h=a,f=h.tag;if(!(h.mode&1)&&(f===0||f===11||f===15)){var m=h.alternate;m?(h.updateQueue=m.updateQueue,h.memoizedState=m.memoizedState,h.lanes=m.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=T5(o);if(p!==null){p.flags&=-257,k5(p,o,a,s,e),p.mode&1&&I5(s,u,e),e=p,l=u;var b=e.updateQueue;if(b===null){var E=new Set;E.add(l),e.updateQueue=E}else b.add(l);break e}else{if(!(e&1)){I5(s,u,e),W2();break e}l=Error(qe(426))}}else if(pn&&a.mode&1){var k=T5(o);if(k!==null){!(k.flags&65536)&&(k.flags|=256),k5(k,o,a,s,e),N2(xc(l,a));break e}}s=l=xc(l,a),Qn!==4&&(Qn=2),Bh===null?Bh=[s]:Bh.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var w=P4(s,l,e);b5(s,w);break e;case 1:a=l;var x=s.type,C=s.stateNode;if(!(s.flags&128)&&(typeof x.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(ja===null||!ja.has(C)))){s.flags|=65536,e&=-e,s.lanes|=e;var M=C4(s,a,e);b5(s,M);break e}}s=s.return}while(s!==null)}Y4(n)}catch(Q){e=Q,qn===n&&n!==null&&(qn=n=n.return);continue}break}while(!0)}function K4(){var t=Dp.current;return Dp.current=jp,t===null?jp:t}function W2(){(Qn===0||Qn===3||Qn===2)&&(Qn=4),nr===null||!(Bl&268435455)&&!(xm&268435455)||ya(nr,hr)}function Mp(t,e){var n=Ft;Ft|=2;var r=K4();(nr!==t||hr!==e)&&(po=null,Rl(t,e));do try{UI();break}catch(i){G4(t,i)}while(!0);if(T2(),Ft=n,Dp.current=r,qn!==null)throw Error(qe(261));return nr=null,hr=0,Qn}function UI(){for(;qn!==null;)Q4(qn)}function VI(){for(;qn!==null&&!hN();)Q4(qn)}function Q4(t){var e=J4(t.alternate,t,yi);t.memoizedProps=t.pendingProps,e===null?Y4(t):qn=e,B2.current=null}function Y4(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=RI(n,e),n!==null){n.flags&=32767,qn=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Qn=6,qn=null;return}}else if(n=LI(n,e,yi),n!==null){qn=n;return}if(e=e.sibling,e!==null){qn=e;return}qn=e=t}while(e!==null);Qn===0&&(Qn=5)}function Sl(t,e,n){var r=Kt,i=Mi.transition;try{Mi.transition=null,Kt=1,BI(t,e,n,r)}finally{Mi.transition=i,Kt=r}return null}function BI(t,e,n,r){do lc();while(Ea!==null);if(Ft&6)throw Error(qe(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(qe(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(bN(t,s),t===nr&&(qn=nr=null,hr=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Pf||(Pf=!0,Z4(_p,function(){return lc(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Mi.transition,Mi.transition=null;var o=Kt;Kt=1;var a=Ft;Ft|=4,B2.current=null,DI(t,n),$4(n,t),aI(H1),bp=!!$1,H1=$1=null,t.current=n,OI(n),dN(),Ft=a,Kt=o,Mi.transition=s}else t.current=n;if(Pf&&(Pf=!1,Ea=t,Fp=i),s=t.pendingLanes,s===0&&(ja=null),mN(n.stateNode),ai(t,Rn()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Op)throw Op=!1,t=h0,h0=null,t;return Fp&1&&t.tag!==0&&lc(),s=t.pendingLanes,s&1?t===d0?qh++:(qh=0,d0=t):qh=0,Ja(),null}function lc(){if(Ea!==null){var t=Pb(Fp),e=Mi.transition,n=Kt;try{if(Mi.transition=null,Kt=16>t?16:t,Ea===null)var r=!1;else{if(t=Ea,Ea=null,Fp=0,Ft&6)throw Error(qe(331));var i=Ft;for(Ft|=4,et=t.current;et!==null;){var s=et,o=s.child;if(et.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(et=u;et!==null;){var h=et;switch(h.tag){case 0:case 11:case 15:Vh(8,h,s)}var f=h.child;if(f!==null)f.return=h,et=f;else for(;et!==null;){h=et;var m=h.sibling,p=h.return;if(B4(h),h===u){et=null;break}if(m!==null){m.return=p,et=m;break}et=p}}}var b=s.alternate;if(b!==null){var E=b.child;if(E!==null){b.child=null;do{var k=E.sibling;E.sibling=null,E=k}while(E!==null)}}et=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,et=o;else e:for(;et!==null;){if(s=et,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Vh(9,s,s.return)}var w=s.sibling;if(w!==null){w.return=s.return,et=w;break e}et=s.return}}var x=t.current;for(et=x;et!==null;){o=et;var C=o.child;if(o.subtreeFlags&2064&&C!==null)C.return=o,et=C;else e:for(o=x;et!==null;){if(a=et,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:bm(9,a)}}catch(Q){In(a,a.return,Q)}if(a===o){et=null;break e}var M=a.sibling;if(M!==null){M.return=a.return,et=M;break e}et=a.return}}if(Ft=i,Ja(),Os&&typeof Os.onPostCommitFiberRoot=="function")try{Os.onPostCommitFiberRoot(fm,t)}catch{}r=!0}return r}finally{Kt=n,Mi.transition=e}}return!1}function q5(t,e,n){e=xc(n,e),e=P4(t,e,1),t=Ra(t,e,1),e=Br(),t!==null&&(Id(t,1,e),ai(t,e))}function In(t,e,n){if(t.tag===3)q5(t,t,n);else for(;e!==null;){if(e.tag===3){q5(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ja===null||!ja.has(r))){t=xc(n,t),t=C4(e,t,1),e=Ra(e,t,1),t=Br(),e!==null&&(Id(e,1,t),ai(e,t));break}}e=e.return}}function qI(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Br(),t.pingedLanes|=t.suspendedLanes&n,nr===t&&(hr&n)===n&&(Qn===4||Qn===3&&(hr&130023424)===hr&&500>Rn()-z2?Rl(t,0):q2|=n),ai(t,e)}function X4(t,e){e===0&&(t.mode&1?(e=wf,wf<<=1,!(wf&130023424)&&(wf=4194304)):e=1);var n=Br();t=Io(t,e),t!==null&&(Id(t,e,n),ai(t,n))}function zI(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),X4(t,n)}function $I(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(qe(314))}r!==null&&r.delete(e),X4(t,n)}var J4;J4=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||si.current)ii=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return ii=!1,CI(t,e,n);ii=!!(t.flags&131072)}else ii=!1,pn&&e.flags&1048576&&n4(e,Tp,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Jf(t,e),t=e.pendingProps;var i=yc(e,kr.current);ac(e,n),i=O2(null,e,r,t,i,n);var s=F2();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,oi(r)?(s=!0,Np(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,C2(e),i.updater=wm,e.stateNode=i,i._reactInternals=e,e0(e,r,t,n),e=r0(null,e,r,!0,s,n)):(e.tag=0,pn&&s&&A2(e),Vr(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Jf(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=WI(r),t=rs(r,t),i){case 0:e=n0(null,e,r,t,n);break e;case 1:e=L5(null,e,r,t,n);break e;case 11:e=P5(null,e,r,t,n);break e;case 14:e=C5(null,e,r,rs(r.type,t),n);break e}throw Error(qe(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:rs(r,i),n0(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:rs(r,i),L5(t,e,r,i,n);case 3:e:{if(D4(e),t===null)throw Error(qe(387));r=e.pendingProps,s=e.memoizedState,i=s.element,l4(t,e),Cp(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=xc(Error(qe(423)),e),e=R5(t,e,r,n,i);break e}else if(r!==i){i=xc(Error(qe(424)),e),e=R5(t,e,r,n,i);break e}else for(_i=La(e.stateNode.containerInfo.firstChild),Si=e,pn=!0,os=null,n=o4(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(_c(),r===i){e=To(t,e,n);break e}Vr(t,e,r,n)}e=e.child}return e;case 5:return u4(e),t===null&&X1(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,W1(r,i)?o=null:s!==null&&W1(r,s)&&(e.flags|=32),j4(t,e),Vr(t,e,o,n),e.child;case 6:return t===null&&X1(e),null;case 13:return O4(t,e,n);case 4:return L2(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=wc(e,null,r,n):Vr(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:rs(r,i),P5(t,e,r,i,n);case 7:return Vr(t,e,e.pendingProps,n),e.child;case 8:return Vr(t,e,e.pendingProps.children,n),e.child;case 12:return Vr(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,rn(kp,r._currentValue),r._currentValue=o,s!==null)if(us(s.value,o)){if(s.children===i.children&&!si.current){e=To(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=xo(-1,n&-n),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?l.next=l:(l.next=h.next,h.next=l),u.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),J1(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(qe(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),J1(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Vr(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,ac(e,n),i=Vi(i),r=r(i),e.flags|=1,Vr(t,e,r,n),e.child;case 14:return r=e.type,i=rs(r,e.pendingProps),i=rs(r.type,i),C5(t,e,r,i,n);case 15:return L4(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:rs(r,i),Jf(t,e),e.tag=1,oi(r)?(t=!0,Np(e)):t=!1,ac(e,n),k4(e,r,i),e0(e,r,i,n),r0(null,e,r,!0,t,n);case 19:return F4(t,e,n);case 22:return R4(t,e,n)}throw Error(qe(156,e.tag))};function Z4(t,e){return Nb(t,e)}function HI(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Fi(t,e,n,r){return new HI(t,e,n,r)}function G2(t){return t=t.prototype,!(!t||!t.isReactComponent)}function WI(t){if(typeof t=="function")return G2(t)?1:0;if(t!=null){if(t=t.$$typeof,t===d2)return 11;if(t===f2)return 14}return 2}function Oa(t,e){var n=t.alternate;return n===null?(n=Fi(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function tp(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")G2(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case zu:return jl(n.children,i,s,e);case h2:o=8,i|=8;break;case A1:return t=Fi(12,n,e,i|2),t.elementType=A1,t.lanes=s,t;case E1:return t=Fi(13,n,e,i),t.elementType=E1,t.lanes=s,t;case N1:return t=Fi(19,n,e,i),t.elementType=N1,t.lanes=s,t;case ub:return Sm(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case ab:o=10;break e;case lb:o=9;break e;case d2:o=11;break e;case f2:o=14;break e;case ma:o=16,r=null;break e}throw Error(qe(130,t==null?t:typeof t,""))}return e=Fi(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function jl(t,e,n,r){return t=Fi(7,t,r,e),t.lanes=n,t}function Sm(t,e,n,r){return t=Fi(22,t,r,e),t.elementType=ub,t.lanes=n,t.stateNode={isHidden:!1},t}function Kg(t,e,n){return t=Fi(6,t,null,e),t.lanes=n,t}function Qg(t,e,n){return e=Fi(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function GI(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=kg(0),this.expirationTimes=kg(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=kg(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function K2(t,e,n,r,i,s,o,a,l){return t=new GI(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Fi(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},C2(s),t}function KI(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:qu,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function e3(t){if(!t)return za;t=t._reactInternals;e:{if(Xl(t)!==t||t.tag!==1)throw Error(qe(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(oi(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(qe(171))}if(t.tag===1){var n=t.type;if(oi(n))return e4(t,n,e)}return e}function t3(t,e,n,r,i,s,o,a,l){return t=K2(n,r,!0,t,i,s,o,a,l),t.context=e3(null),n=t.current,r=Br(),i=Da(n),s=xo(r,i),s.callback=e??null,Ra(n,s,i),t.current.lanes=i,Id(t,i,r),ai(t,r),t}function Am(t,e,n,r){var i=e.current,s=Br(),o=Da(i);return n=e3(n),e.context===null?e.context=n:e.pendingContext=n,e=xo(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Ra(i,e,o),t!==null&&(ls(t,i,o,s),Qf(t,i,o)),o}function Up(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function z5(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Q2(t,e){z5(t,e),(t=t.alternate)&&z5(t,e)}function QI(){return null}var n3=typeof reportError=="function"?reportError:function(t){console.error(t)};function Y2(t){this._internalRoot=t}Em.prototype.render=Y2.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(qe(409));Am(t,e,null,null)};Em.prototype.unmount=Y2.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ql(function(){Am(null,t,null,null)}),e[No]=null}};function Em(t){this._internalRoot=t}Em.prototype.unstable_scheduleHydration=function(t){if(t){var e=Rb();t={blockedOn:null,target:t,priority:e};for(var n=0;n<va.length&&e!==0&&e<va[n].priority;n++);va.splice(n,0,t),n===0&&Db(t)}};function X2(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Nm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function $5(){}function YI(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=Up(o);s.call(u)}}var o=t3(e,r,t,0,null,!1,!1,"",$5);return t._reactRootContainer=o,t[No]=o.current,id(t.nodeType===8?t.parentNode:t),ql(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var u=Up(l);a.call(u)}}var l=K2(t,0,!1,null,null,!1,!1,"",$5);return t._reactRootContainer=l,t[No]=l.current,id(t.nodeType===8?t.parentNode:t),ql(function(){Am(e,l,n,r)}),l}function Im(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=Up(o);a.call(l)}}Am(e,o,t,i)}else o=YI(n,e,t,i,r);return Up(o)}Cb=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Eh(e.pendingLanes);n!==0&&(g2(e,n|1),ai(e,Rn()),!(Ft&6)&&(Sc=Rn()+500,Ja()))}break;case 13:ql(function(){var r=Io(t,1);if(r!==null){var i=Br();ls(r,t,1,i)}}),Q2(t,1)}};v2=function(t){if(t.tag===13){var e=Io(t,134217728);if(e!==null){var n=Br();ls(e,t,134217728,n)}Q2(t,134217728)}};Lb=function(t){if(t.tag===13){var e=Da(t),n=Io(t,e);if(n!==null){var r=Br();ls(n,t,e,r)}Q2(t,e)}};Rb=function(){return Kt};jb=function(t,e){var n=Kt;try{return Kt=t,e()}finally{Kt=n}};O1=function(t,e,n){switch(e){case"input":if(k1(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=vm(r);if(!i)throw Error(qe(90));hb(r),k1(r,i)}}}break;case"textarea":fb(t,n);break;case"select":e=n.value,e!=null&&rc(t,!!n.multiple,e,!1)}};wb=$2;bb=ql;var XI={usingClientEntryPoint:!1,Events:[kd,Gu,vm,yb,_b,$2]},yh={findFiberByHostInstance:Tl,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},JI={bundleType:yh.bundleType,version:yh.version,rendererPackageName:yh.rendererPackageName,rendererConfig:yh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ro.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Ab(t),t===null?null:t.stateNode},findFiberByHostInstance:yh.findFiberByHostInstance||QI,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Cf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Cf.isDisabled&&Cf.supportsFiber)try{fm=Cf.inject(JI),Os=Cf}catch{}}Ei.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=XI;Ei.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!X2(e))throw Error(qe(200));return KI(t,e,null,n)};Ei.createRoot=function(t,e){if(!X2(t))throw Error(qe(299));var n=!1,r="",i=n3;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=K2(t,1,!1,null,null,n,!1,r,i),t[No]=e.current,id(t.nodeType===8?t.parentNode:t),new Y2(e)};Ei.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(qe(188)):(t=Object.keys(t).join(","),Error(qe(268,t)));return t=Ab(e),t=t===null?null:t.stateNode,t};Ei.flushSync=function(t){return ql(t)};Ei.hydrate=function(t,e,n){if(!Nm(e))throw Error(qe(200));return Im(null,t,e,!0,n)};Ei.hydrateRoot=function(t,e,n){if(!X2(t))throw Error(qe(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=n3;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=t3(e,null,t,1,n??null,i,!1,s,o),t[No]=e.current,id(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Em(e)};Ei.render=function(t,e,n){if(!Nm(e))throw Error(qe(200));return Im(null,t,e,!1,n)};Ei.unmountComponentAtNode=function(t){if(!Nm(t))throw Error(qe(40));return t._reactRootContainer?(ql(function(){Im(null,null,t,!1,function(){t._reactRootContainer=null,t[No]=null})}),!0):!1};Ei.unstable_batchedUpdates=$2;Ei.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Nm(n))throw Error(qe(200));if(t==null||t._reactInternals===void 0)throw Error(qe(38));return Im(t,e,n,!1,r)};Ei.version="18.3.1-next-f1338f8080-20240426";function r3(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r3)}catch(t){console.error(t)}}r3(),rb.exports=Ei;var ZI=rb.exports,H5=ZI;x1.createRoot=H5.createRoot,x1.hydrateRoot=H5.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function fd(){return fd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},fd.apply(this,arguments)}var Na;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Na||(Na={}));const W5="popstate";function eT(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return m0("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:Vp(i)}return nT(e,n,null,t)}function vn(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function i3(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function tT(){return Math.random().toString(36).substr(2,8)}function G5(t,e){return{usr:t.state,key:t.key,idx:e}}function m0(t,e,n,r){return n===void 0&&(n=null),fd({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Oc(e):e,{state:n,key:e&&e.key||r||tT()})}function Vp(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Oc(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function nT(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=Na.Pop,l=null,u=h();u==null&&(u=0,o.replaceState(fd({},o.state,{idx:u}),""));function h(){return(o.state||{idx:null}).idx}function f(){a=Na.Pop;let k=h(),w=k==null?null:k-u;u=k,l&&l({action:a,location:E.location,delta:w})}function m(k,w){a=Na.Push;let x=m0(E.location,k,w);u=h()+1;let C=G5(x,u),M=E.createHref(x);try{o.pushState(C,"",M)}catch(Q){if(Q instanceof DOMException&&Q.name==="DataCloneError")throw Q;i.location.assign(M)}s&&l&&l({action:a,location:E.location,delta:1})}function p(k,w){a=Na.Replace;let x=m0(E.location,k,w);u=h();let C=G5(x,u),M=E.createHref(x);o.replaceState(C,"",M),s&&l&&l({action:a,location:E.location,delta:0})}function b(k){let w=i.location.origin!=="null"?i.location.origin:i.location.href,x=typeof k=="string"?k:Vp(k);return x=x.replace(/ $/,"%20"),vn(w,"No window.location.(origin|href) available to create URL for href: "+x),new URL(x,w)}let E={get action(){return a},get location(){return t(i,o)},listen(k){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(W5,f),l=k,()=>{i.removeEventListener(W5,f),l=null}},createHref(k){return e(i,k)},createURL:b,encodeLocation(k){let w=b(k);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:m,replace:p,go(k){return o.go(k)}};return E}var K5;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(K5||(K5={}));function rT(t,e,n){return n===void 0&&(n="/"),iT(t,e,n)}function iT(t,e,n,r){let i=typeof e=="string"?Oc(e):e,s=Ac(i.pathname||"/",n);if(s==null)return null;let o=s3(t);sT(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let u=gT(s);a=pT(o[l],u)}return a}function s3(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(vn(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let u=Fa([r,l.relativePath]),h=n.concat(l);s.children&&s.children.length>0&&(vn(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),s3(s.children,e,h,u)),!(s.path==null&&!s.index)&&e.push({path:u,score:dT(u,s.index),routesMeta:h})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of o3(s.path))i(s,o,l)}),e}function o3(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=o3(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function sT(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:fT(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const oT=/^:[\w-]+$/,aT=3,lT=2,uT=1,cT=10,hT=-2,Q5=t=>t==="*";function dT(t,e){let n=t.split("/"),r=n.length;return n.some(Q5)&&(r+=hT),e&&(r+=lT),n.filter(i=>!Q5(i)).reduce((i,s)=>i+(oT.test(s)?aT:s===""?uT:cT),r)}function fT(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function pT(t,e,n){let{routesMeta:r}=t,i={},s="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],u=a===r.length-1,h=s==="/"?e:e.slice(s.length)||"/",f=g0({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},h),m=l.route;if(!f)return null;Object.assign(i,f.params),o.push({params:i,pathname:Fa([s,f.pathname]),pathnameBase:wT(Fa([s,f.pathnameBase])),route:m}),f.pathnameBase!=="/"&&(s=Fa([s,f.pathnameBase]))}return o}function g0(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=mT(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((u,h,f)=>{let{paramName:m,isOptional:p}=h;if(m==="*"){let E=a[f]||"";o=s.slice(0,s.length-E.length).replace(/(.)\/+$/,"$1")}const b=a[f];return p&&!b?u[m]=void 0:u[m]=(b||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:o,pattern:t}}function mT(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),i3(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function gT(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return i3(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Ac(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function vT(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?Oc(t):t;return{pathname:n?n.startsWith("/")?n:yT(n,e):e,search:bT(r),hash:xT(i)}}function yT(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Yg(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function _T(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function J2(t,e){let n=_T(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Z2(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=Oc(t):(i=fd({},t),vn(!i.pathname||!i.pathname.includes("?"),Yg("?","pathname","search",i)),vn(!i.pathname||!i.pathname.includes("#"),Yg("#","pathname","hash",i)),vn(!i.search||!i.search.includes("#"),Yg("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let f=e.length-1;if(!r&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),f-=1;i.pathname=m.join("/")}a=f>=0?e[f]:"/"}let l=vT(i,a),u=o&&o!=="/"&&o.endsWith("/"),h=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(u||h)&&(l.pathname+="/"),l}const Fa=t=>t.join("/").replace(/\/\/+/g,"/"),wT=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),bT=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,xT=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function ST(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const a3=["post","put","patch","delete"];new Set(a3);const AT=["get",...a3];new Set(AT);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function pd(){return pd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},pd.apply(this,arguments)}const Tm=de.createContext(null),l3=de.createContext(null),jo=de.createContext(null),km=de.createContext(null),Hs=de.createContext({outlet:null,matches:[],isDataRoute:!1}),u3=de.createContext(null);function ET(t,e){let{relative:n}=e===void 0?{}:e;Fc()||vn(!1);let{basename:r,navigator:i}=de.useContext(jo),{hash:s,pathname:o,search:a}=Pm(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:Fa([r,o])),i.createHref({pathname:l,search:a,hash:s})}function Fc(){return de.useContext(km)!=null}function Mc(){return Fc()||vn(!1),de.useContext(km).location}function c3(t){de.useContext(jo).static||de.useLayoutEffect(t)}function Uc(){let{isDataRoute:t}=de.useContext(Hs);return t?BT():NT()}function NT(){Fc()||vn(!1);let t=de.useContext(Tm),{basename:e,future:n,navigator:r}=de.useContext(jo),{matches:i}=de.useContext(Hs),{pathname:s}=Mc(),o=JSON.stringify(J2(i,n.v7_relativeSplatPath)),a=de.useRef(!1);return c3(()=>{a.current=!0}),de.useCallback(function(u,h){if(h===void 0&&(h={}),!a.current)return;if(typeof u=="number"){r.go(u);return}let f=Z2(u,JSON.parse(o),s,h.relative==="path");t==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:Fa([e,f.pathname])),(h.replace?r.replace:r.push)(f,h.state,h)},[e,r,o,s,t])}const IT=de.createContext(null);function TT(t){let e=de.useContext(Hs).outlet;return e&&de.createElement(IT.Provider,{value:t},e)}function kT(){let{matches:t}=de.useContext(Hs),e=t[t.length-1];return e?e.params:{}}function Pm(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=de.useContext(jo),{matches:i}=de.useContext(Hs),{pathname:s}=Mc(),o=JSON.stringify(J2(i,r.v7_relativeSplatPath));return de.useMemo(()=>Z2(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function PT(t,e){return CT(t,e)}function CT(t,e,n,r){Fc()||vn(!1);let{navigator:i}=de.useContext(jo),{matches:s}=de.useContext(Hs),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let u=Mc(),h;if(e){var f;let k=typeof e=="string"?Oc(e):e;l==="/"||(f=k.pathname)!=null&&f.startsWith(l)||vn(!1),h=k}else h=u;let m=h.pathname||"/",p=m;if(l!=="/"){let k=l.replace(/^\//,"").split("/");p="/"+m.replace(/^\//,"").split("/").slice(k.length).join("/")}let b=rT(t,{pathname:p}),E=OT(b&&b.map(k=>Object.assign({},k,{params:Object.assign({},a,k.params),pathname:Fa([l,i.encodeLocation?i.encodeLocation(k.pathname).pathname:k.pathname]),pathnameBase:k.pathnameBase==="/"?l:Fa([l,i.encodeLocation?i.encodeLocation(k.pathnameBase).pathname:k.pathnameBase])})),s,n,r);return e&&E?de.createElement(km.Provider,{value:{location:pd({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:Na.Pop}},E):E}function LT(){let t=VT(),e=ST(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return de.createElement(de.Fragment,null,de.createElement("h2",null,"Unexpected Application Error!"),de.createElement("h3",{style:{fontStyle:"italic"}},e),n?de.createElement("pre",{style:i},n):null,null)}const RT=de.createElement(LT,null);class jT extends de.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?de.createElement(Hs.Provider,{value:this.props.routeContext},de.createElement(u3.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function DT(t){let{routeContext:e,match:n,children:r}=t,i=de.useContext(Tm);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),de.createElement(Hs.Provider,{value:e},r)}function OT(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(i=n)==null?void 0:i.errors;if(a!=null){let h=o.findIndex(f=>f.route.id&&(a==null?void 0:a[f.route.id])!==void 0);h>=0||vn(!1),o=o.slice(0,Math.min(o.length,h+1))}let l=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let h=0;h<o.length;h++){let f=o[h];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=h),f.route.id){let{loaderData:m,errors:p}=n,b=f.route.loader&&m[f.route.id]===void 0&&(!p||p[f.route.id]===void 0);if(f.route.lazy||b){l=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((h,f,m)=>{let p,b=!1,E=null,k=null;n&&(p=a&&f.route.id?a[f.route.id]:void 0,E=f.route.errorElement||RT,l&&(u<0&&m===0?(qT("route-fallback"),b=!0,k=null):u===m&&(b=!0,k=f.route.hydrateFallbackElement||null)));let w=e.concat(o.slice(0,m+1)),x=()=>{let C;return p?C=E:b?C=k:f.route.Component?C=de.createElement(f.route.Component,null):f.route.element?C=f.route.element:C=h,de.createElement(DT,{match:f,routeContext:{outlet:h,matches:w,isDataRoute:n!=null},children:C})};return n&&(f.route.ErrorBoundary||f.route.errorElement||m===0)?de.createElement(jT,{location:n.location,revalidation:n.revalidation,component:E,error:p,children:x(),routeContext:{outlet:null,matches:w,isDataRoute:!0}}):x()},null)}var h3=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(h3||{}),d3=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(d3||{});function FT(t){let e=de.useContext(Tm);return e||vn(!1),e}function MT(t){let e=de.useContext(l3);return e||vn(!1),e}function UT(t){let e=de.useContext(Hs);return e||vn(!1),e}function f3(t){let e=UT(),n=e.matches[e.matches.length-1];return n.route.id||vn(!1),n.route.id}function VT(){var t;let e=de.useContext(u3),n=MT(),r=f3();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function BT(){let{router:t}=FT(h3.UseNavigateStable),e=f3(d3.UseNavigateStable),n=de.useRef(!1);return c3(()=>{n.current=!0}),de.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,pd({fromRouteId:e},s)))},[t,e])}const Y5={};function qT(t,e,n){Y5[t]||(Y5[t]=!0)}function zT(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function v0(t){let{to:e,replace:n,state:r,relative:i}=t;Fc()||vn(!1);let{future:s,static:o}=de.useContext(jo),{matches:a}=de.useContext(Hs),{pathname:l}=Mc(),u=Uc(),h=Z2(e,J2(a,s.v7_relativeSplatPath),l,i==="path"),f=JSON.stringify(h);return de.useEffect(()=>u(JSON.parse(f),{replace:n,state:r,relative:i}),[u,f,i,n,r]),null}function $T(t){return TT(t.context)}function ks(t){vn(!1)}function HT(t){let{basename:e="/",children:n=null,location:r,navigationType:i=Na.Pop,navigator:s,static:o=!1,future:a}=t;Fc()&&vn(!1);let l=e.replace(/^\/*/,"/"),u=de.useMemo(()=>({basename:l,navigator:s,static:o,future:pd({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof r=="string"&&(r=Oc(r));let{pathname:h="/",search:f="",hash:m="",state:p=null,key:b="default"}=r,E=de.useMemo(()=>{let k=Ac(h,l);return k==null?null:{location:{pathname:k,search:f,hash:m,state:p,key:b},navigationType:i}},[l,h,f,m,p,b,i]);return E==null?null:de.createElement(jo.Provider,{value:u},de.createElement(km.Provider,{children:n,value:E}))}function WT(t){let{children:e,location:n}=t;return PT(y0(e),n)}new Promise(()=>{});function y0(t,e){e===void 0&&(e=[]);let n=[];return de.Children.forEach(t,(r,i)=>{if(!de.isValidElement(r))return;let s=[...e,i];if(r.type===de.Fragment){n.push.apply(n,y0(r.props.children,s));return}r.type!==ks&&vn(!1),!r.props.index||!r.props.children||vn(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=y0(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Bp(){return Bp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Bp.apply(this,arguments)}function p3(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function GT(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function KT(t,e){return t.button===0&&(!e||e==="_self")&&!GT(t)}const QT=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],YT=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],XT="6";try{window.__reactRouterVersion=XT}catch{}const JT=de.createContext({isTransitioning:!1}),ZT="startTransition",X5=qE[ZT];function ek(t){let{basename:e,children:n,future:r,window:i}=t,s=de.useRef();s.current==null&&(s.current=eT({window:i,v5Compat:!0}));let o=s.current,[a,l]=de.useState({action:o.action,location:o.location}),{v7_startTransition:u}=r||{},h=de.useCallback(f=>{u&&X5?X5(()=>l(f)):l(f)},[l,u]);return de.useLayoutEffect(()=>o.listen(h),[o,h]),de.useEffect(()=>zT(r),[r]),de.createElement(HT,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const tk=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",nk=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,rk=de.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:a,target:l,to:u,preventScrollReset:h,viewTransition:f}=e,m=p3(e,QT),{basename:p}=de.useContext(jo),b,E=!1;if(typeof u=="string"&&nk.test(u)&&(b=u,tk))try{let C=new URL(window.location.href),M=u.startsWith("//")?new URL(C.protocol+u):new URL(u),Q=Ac(M.pathname,p);M.origin===C.origin&&Q!=null?u=Q+M.search+M.hash:E=!0}catch{}let k=ET(u,{relative:i}),w=sk(u,{replace:o,state:a,target:l,preventScrollReset:h,relative:i,viewTransition:f});function x(C){r&&r(C),C.defaultPrevented||w(C)}return de.createElement("a",Bp({},m,{href:b||k,onClick:E||s?r:x,ref:n,target:l}))}),Lf=de.forwardRef(function(e,n){let{"aria-current":r="page",caseSensitive:i=!1,className:s="",end:o=!1,style:a,to:l,viewTransition:u,children:h}=e,f=p3(e,YT),m=Pm(l,{relative:f.relative}),p=Mc(),b=de.useContext(l3),{navigator:E,basename:k}=de.useContext(jo),w=b!=null&&ok(m)&&u===!0,x=E.encodeLocation?E.encodeLocation(m).pathname:m.pathname,C=p.pathname,M=b&&b.navigation&&b.navigation.location?b.navigation.location.pathname:null;i||(C=C.toLowerCase(),M=M?M.toLowerCase():null,x=x.toLowerCase()),M&&k&&(M=Ac(M,k)||M);const Q=x!=="/"&&x.endsWith("/")?x.length-1:x.length;let z=C===x||!o&&C.startsWith(x)&&C.charAt(Q)==="/",L=M!=null&&(M===x||!o&&M.startsWith(x)&&M.charAt(x.length)==="/"),y={isActive:z,isPending:L,isTransitioning:w},N=z?r:void 0,R;typeof s=="function"?R=s(y):R=[s,z?"active":null,L?"pending":null,w?"transitioning":null].filter(Boolean).join(" ");let A=typeof a=="function"?a(y):a;return de.createElement(rk,Bp({},f,{"aria-current":N,className:R,ref:n,style:A,to:l,viewTransition:u}),typeof h=="function"?h(y):h)});var _0;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(_0||(_0={}));var J5;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(J5||(J5={}));function ik(t){let e=de.useContext(Tm);return e||vn(!1),e}function sk(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o,viewTransition:a}=e===void 0?{}:e,l=Uc(),u=Mc(),h=Pm(t,{relative:o});return de.useCallback(f=>{if(KT(f,n)){f.preventDefault();let m=r!==void 0?r:Vp(u)===Vp(h);l(t,{replace:m,state:i,preventScrollReset:s,relative:o,viewTransition:a})}},[u,l,h,r,i,n,t,s,o,a])}function ok(t,e){e===void 0&&(e={});let n=de.useContext(JT);n==null&&vn(!1);let{basename:r}=ik(_0.useViewTransitionState),i=Pm(t,{relative:e.relative});if(!n.isTransitioning)return!1;let s=Ac(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=Ac(n.nextLocation.pathname,r)||n.nextLocation.pathname;return g0(i.pathname,o)!=null||g0(i.pathname,s)!=null}const m3=de.createContext(),Za=()=>{const t=de.useContext(m3);if(!t)throw new Error("useNotification must be used within NotificationProvider");return t},ak=({children:t})=>{const[e,n]=de.useState([]),[r,i]=de.useState(null),[s,o]=de.useState(null),a=de.useCallback((k,w="info")=>{const x=Date.now()+Math.random(),C={id:x,message:k,type:w};return n(M=>[...M,C]),setTimeout(()=>{l(x)},4e3),x},[]),l=de.useCallback(k=>{n(w=>w.filter(x=>x.id!==k))},[]),u=de.useCallback(k=>a(k,"success"),[a]),h=de.useCallback(k=>a(k,"error"),[a]),f=de.useCallback(k=>a(k,"info"),[a]),m=de.useCallback(k=>a(k,"warning"),[a]),p=de.useCallback(k=>new Promise(w=>{i({...k,onConfirm:()=>{i(null),w(!0)},onCancel:()=>{i(null),w(!1)}})}),[]),b=de.useCallback(k=>new Promise(w=>{o({...k,onConfirm:()=>{o(null),w(!0)},onCancel:()=>{o(null),w(!1)}})}),[]),E={toasts:e,showToast:a,removeToast:l,showSuccess:u,showError:h,showInfo:f,showWarning:m,showConfirm:p,confirmDialog:r,showCriticalConfirm:b,criticalConfirmDialog:s};return v.jsx(m3.Provider,{value:E,children:t})},lk=t=>{switch(t){case"success":return"";case"error":return"";case"warning":return"";case"info":default:return""}},uk=t=>{switch(t){case"success":return"toast-success";case"error":return"toast-error";case"warning":return"toast-warning";case"info":default:return"toast-info"}};function ck({toast:t,onRemove:e}){return de.useEffect(()=>{const n=setTimeout(()=>{e(t.id)},4e3);return()=>clearTimeout(n)},[t.id,e]),v.jsxs("div",{className:`toast ${uk(t.type)}`,children:[v.jsx("div",{className:"toast-icon",children:lk(t.type)}),v.jsx("div",{className:"toast-message",children:t.message}),v.jsx("button",{className:"toast-close",onClick:()=>e(t.id),"aria-label":"Luk notifikation",children:""})]})}function hk(){const{toasts:t,removeToast:e}=Za();return v.jsx("div",{className:"toast-container",children:t.map(n=>v.jsx(ck,{toast:n,onRemove:e},n.id))})}function dk(){const{confirmDialog:t}=Za();if(!t)return null;const{title:e="Bekrft handling",message:n,confirmText:r="Bekrft",cancelText:i="Annuller",onConfirm:s,onCancel:o,type:a="danger"}=t;return v.jsx("div",{className:"confirm-overlay",children:v.jsxs("div",{className:"confirm-dialog",children:[v.jsx("div",{className:"confirm-header",children:v.jsx("h3",{children:e})}),v.jsx("div",{className:"confirm-body",children:v.jsx("p",{children:n})}),v.jsxs("div",{className:"confirm-footer",children:[v.jsx("button",{className:"btn-secondary",onClick:o,children:i}),v.jsx("button",{className:a==="danger"?"btn-danger":"btn-primary",onClick:s,children:r})]})]})})}function fk(){const{criticalConfirmDialog:t}=Za(),[e,n]=de.useState(""),[r,i]=de.useState(!1);if(de.useEffect(()=>{n(""),i(!1)},[t]),!t)return null;const{title:s="Bekrft sletning",message:o,itemName:a,confirmText:l="Slet",cancelText:u="Annuller",onConfirm:h,onCancel:f,warningText:m}=t,p=()=>{e.toLowerCase()==="slet"?(i(!1),h()):i(!0)},b=E=>{E.key==="Enter"&&p()};return v.jsx("div",{className:"confirm-overlay",children:v.jsxs("div",{className:"critical-confirm-dialog",children:[v.jsxs("div",{className:"confirm-header critical-header",children:[v.jsx("div",{className:"critical-icon",children:""}),v.jsx("h3",{children:s})]}),v.jsxs("div",{className:"confirm-body",children:[v.jsx("p",{className:"critical-message",children:o}),a&&v.jsx("div",{className:"item-highlight",children:v.jsx("strong",{children:a})}),m&&v.jsxs("div",{className:"warning-box",children:[v.jsx("span",{className:"warning-icon",children:""}),v.jsx("span",{children:m})]}),v.jsxs("div",{className:"confirmation-input-section",children:[v.jsxs("label",{children:["Skriv ",v.jsx("strong",{children:'"Slet"'})," for at bekrfte:"]}),v.jsx("input",{type:"text",value:e,onChange:E=>{n(E.target.value),i(!1)},onKeyPress:b,placeholder:"Skriv Slet",className:r?"input-error":"",autoFocus:!0}),r&&v.jsx("span",{className:"error-text",children:'Du skal skrive "Slet" for at bekrfte'})]})]}),v.jsxs("div",{className:"confirm-footer",children:[v.jsx("button",{className:"btn-secondary",onClick:f,children:u}),v.jsx("button",{className:"btn-danger",onClick:p,disabled:!e,children:l})]})]})})}var Z5={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g3=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},pk=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},v3={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,u=l?t[i+2]:0,h=s>>2,f=(s&3)<<4|a>>4;let m=(a&15)<<2|u>>6,p=u&63;l||(p=64,o||(m=64)),r.push(n[h],n[f],n[m],n[p])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(g3(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):pk(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const u=i<t.length?n[t.charAt(i)]:64;++i;const f=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||u==null||f==null)throw new mk;const m=s<<2|a>>4;if(r.push(m),u!==64){const p=a<<4&240|u>>2;if(r.push(p),f!==64){const b=u<<6&192|f;r.push(b)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class mk extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const gk=function(t){const e=g3(t);return v3.encodeByteArray(e,!0)},qp=function(t){return gk(t).replace(/\./g,"")},y3=function(t){try{return v3.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vk(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yk=()=>vk().__FIREBASE_DEFAULTS__,_k=()=>{if(typeof process>"u"||typeof Z5>"u")return;const t=Z5.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},wk=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&y3(t[1]);return e&&JSON.parse(e)},Cm=()=>{try{return yk()||_k()||wk()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},_3=t=>{var e,n;return(n=(e=Cm())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},w3=t=>{const e=_3(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},b3=()=>{var t;return(t=Cm())===null||t===void 0?void 0:t.config},x3=t=>{var e;return(e=Cm())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bk{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S3(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[qp(JSON.stringify(n)),qp(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function xk(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Pr())}function Sk(){var t;const e=(t=Cm())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Ak(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Ek(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Nk(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Ik(){const t=Pr();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function Tk(){return!Sk()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function kk(){try{return typeof indexedDB=="object"}catch{return!1}}function Pk(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ck="FirebaseError";class Ws extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=Ck,Object.setPrototypeOf(this,Ws.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Cd.prototype.create)}}class Cd{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?Lk(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Ws(i,a,r)}}function Lk(t,e){return t.replace(Rk,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const Rk=/\{\$([^}]+)}/g;function jk(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function zp(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(e_(s)&&e_(o)){if(!zp(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function e_(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ld(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Ih(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function Th(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function Dk(t,e){const n=new Ok(t,e);return n.subscribe.bind(n)}class Ok{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");Fk(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Xg),i.error===void 0&&(i.error=Xg),i.complete===void 0&&(i.complete=Xg);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Fk(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Xg(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _n(t){return t&&t._delegate?t._delegate:t}class $a{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Al="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mk{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new bk;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Vk(e))try{this.getOrInitializeService({instanceIdentifier:Al})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Al){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Al){return this.instances.has(e)}getOptions(e=Al){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Uk(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Al){return this.component?this.component.multipleInstances?e:Al:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Uk(t){return t===Al?void 0:t}function Vk(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bk{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Mk(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Rt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Rt||(Rt={}));const qk={debug:Rt.DEBUG,verbose:Rt.VERBOSE,info:Rt.INFO,warn:Rt.WARN,error:Rt.ERROR,silent:Rt.SILENT},zk=Rt.INFO,$k={[Rt.DEBUG]:"log",[Rt.VERBOSE]:"log",[Rt.INFO]:"info",[Rt.WARN]:"warn",[Rt.ERROR]:"error"},Hk=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=$k[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class ev{constructor(e){this.name=e,this._logLevel=zk,this._logHandler=Hk,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Rt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?qk[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Rt.DEBUG,...e),this._logHandler(this,Rt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Rt.VERBOSE,...e),this._logHandler(this,Rt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Rt.INFO,...e),this._logHandler(this,Rt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Rt.WARN,...e),this._logHandler(this,Rt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Rt.ERROR,...e),this._logHandler(this,Rt.ERROR,...e)}}const Wk=(t,e)=>e.some(n=>t instanceof n);let t_,n_;function Gk(){return t_||(t_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Kk(){return n_||(n_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const A3=new WeakMap,w0=new WeakMap,E3=new WeakMap,Jg=new WeakMap,tv=new WeakMap;function Qk(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Ma(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&A3.set(n,t)}).catch(()=>{}),tv.set(e,t),e}function Yk(t){if(w0.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});w0.set(t,e)}let b0={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return w0.get(t);if(e==="objectStoreNames")return t.objectStoreNames||E3.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ma(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Xk(t){b0=t(b0)}function Jk(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Zg(this),e,...n);return E3.set(r,e.sort?e.sort():[e]),Ma(r)}:Kk().includes(t)?function(...e){return t.apply(Zg(this),e),Ma(A3.get(this))}:function(...e){return Ma(t.apply(Zg(this),e))}}function Zk(t){return typeof t=="function"?Jk(t):(t instanceof IDBTransaction&&Yk(t),Wk(t,Gk())?new Proxy(t,b0):t)}function Ma(t){if(t instanceof IDBRequest)return Qk(t);if(Jg.has(t))return Jg.get(t);const e=Zk(t);return e!==t&&(Jg.set(t,e),tv.set(e,t)),e}const Zg=t=>tv.get(t);function eP(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=Ma(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Ma(o.result),l.oldVersion,l.newVersion,Ma(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const tP=["get","getKey","getAll","getAllKeys","count"],nP=["put","add","delete","clear"],e1=new Map;function r_(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(e1.get(e))return e1.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=nP.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||tP.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),i&&l.done]))[0]};return e1.set(e,s),s}Xk(t=>({...t,get:(e,n,r)=>r_(e,n)||t.get(e,n,r),has:(e,n)=>!!r_(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rP{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(iP(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function iP(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const x0="@firebase/app",i_="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ko=new ev("@firebase/app"),sP="@firebase/app-compat",oP="@firebase/analytics-compat",aP="@firebase/analytics",lP="@firebase/app-check-compat",uP="@firebase/app-check",cP="@firebase/auth",hP="@firebase/auth-compat",dP="@firebase/database",fP="@firebase/data-connect",pP="@firebase/database-compat",mP="@firebase/functions",gP="@firebase/functions-compat",vP="@firebase/installations",yP="@firebase/installations-compat",_P="@firebase/messaging",wP="@firebase/messaging-compat",bP="@firebase/performance",xP="@firebase/performance-compat",SP="@firebase/remote-config",AP="@firebase/remote-config-compat",EP="@firebase/storage",NP="@firebase/storage-compat",IP="@firebase/firestore",TP="@firebase/vertexai-preview",kP="@firebase/firestore-compat",PP="firebase",CP="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S0="[DEFAULT]",LP={[x0]:"fire-core",[sP]:"fire-core-compat",[aP]:"fire-analytics",[oP]:"fire-analytics-compat",[uP]:"fire-app-check",[lP]:"fire-app-check-compat",[cP]:"fire-auth",[hP]:"fire-auth-compat",[dP]:"fire-rtdb",[fP]:"fire-data-connect",[pP]:"fire-rtdb-compat",[mP]:"fire-fn",[gP]:"fire-fn-compat",[vP]:"fire-iid",[yP]:"fire-iid-compat",[_P]:"fire-fcm",[wP]:"fire-fcm-compat",[bP]:"fire-perf",[xP]:"fire-perf-compat",[SP]:"fire-rc",[AP]:"fire-rc-compat",[EP]:"fire-gcs",[NP]:"fire-gcs-compat",[IP]:"fire-fst",[kP]:"fire-fst-compat",[TP]:"fire-vertex","fire-js":"fire-js",[PP]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $p=new Map,RP=new Map,A0=new Map;function s_(t,e){try{t.container.addComponent(e)}catch(n){ko.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function zl(t){const e=t.name;if(A0.has(e))return ko.debug(`There were multiple attempts to register component ${e}.`),!1;A0.set(e,t);for(const n of $p.values())s_(n,t);for(const n of RP.values())s_(n,t);return!0}function Lm(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function yo(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jP={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ua=new Cd("app","Firebase",jP);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DP{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new $a("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ua.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jl=CP;function N3(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:S0,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Ua.create("bad-app-name",{appName:String(i)});if(n||(n=b3()),!n)throw Ua.create("no-options");const s=$p.get(i);if(s){if(zp(n,s.options)&&zp(r,s.config))return s;throw Ua.create("duplicate-app",{appName:i})}const o=new Bk(i);for(const l of A0.values())o.addComponent(l);const a=new DP(n,r,o);return $p.set(i,a),a}function nv(t=S0){const e=$p.get(t);if(!e&&t===S0&&b3())return N3();if(!e)throw Ua.create("no-app",{appName:t});return e}function Ms(t,e,n){var r;let i=(r=LP[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ko.warn(a.join(" "));return}zl(new $a(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OP="firebase-heartbeat-database",FP=1,md="firebase-heartbeat-store";let t1=null;function I3(){return t1||(t1=eP(OP,FP,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(md)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ua.create("idb-open",{originalErrorMessage:t.message})})),t1}async function MP(t){try{const n=(await I3()).transaction(md),r=await n.objectStore(md).get(T3(t));return await n.done,r}catch(e){if(e instanceof Ws)ko.warn(e.message);else{const n=Ua.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ko.warn(n.message)}}}async function o_(t,e){try{const r=(await I3()).transaction(md,"readwrite");await r.objectStore(md).put(e,T3(t)),await r.done}catch(n){if(n instanceof Ws)ko.warn(n.message);else{const r=Ua.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ko.warn(r.message)}}}function T3(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UP=1024,VP=30*24*60*60*1e3;class BP{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new zP(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=a_();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=VP}),this._storage.overwrite(this._heartbeatsCache))}catch(r){ko.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=a_(),{heartbeatsToSend:r,unsentEntries:i}=qP(this._heartbeatsCache.heartbeats),s=qp(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return ko.warn(n),""}}}function a_(){return new Date().toISOString().substring(0,10)}function qP(t,e=UP){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),l_(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),l_(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class zP{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return kk()?Pk().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await MP(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return o_(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return o_(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function l_(t){return qp(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $P(t){zl(new $a("platform-logger",e=>new rP(e),"PRIVATE")),zl(new $a("heartbeat",e=>new BP(e),"PRIVATE")),Ms(x0,i_,t),Ms(x0,i_,"esm2017"),Ms("fire-js","")}$P("");function rv(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function k3(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const HP=k3,P3=new Cd("auth","Firebase",k3());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hp=new ev("@firebase/auth");function WP(t,...e){Hp.logLevel<=Rt.WARN&&Hp.warn(`Auth (${Jl}): ${t}`,...e)}function np(t,...e){Hp.logLevel<=Rt.ERROR&&Hp.error(`Auth (${Jl}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cs(t,...e){throw iv(t,...e)}function Us(t,...e){return iv(t,...e)}function C3(t,e,n){const r=Object.assign(Object.assign({},HP()),{[e]:n});return new Cd("auth","Firebase",r).create(e,{appName:t.name})}function Va(t){return C3(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function iv(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return P3.create(t,...e)}function mt(t,e,...n){if(!t)throw iv(e,...n)}function _o(t){const e="INTERNAL ASSERTION FAILED: "+t;throw np(e),new Error(e)}function Po(t,e){t||_o(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E0(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function GP(){return u_()==="http:"||u_()==="https:"}function u_(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KP(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(GP()||Ek()||"connection"in navigator)?navigator.onLine:!0}function QP(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rd{constructor(e,n){this.shortDelay=e,this.longDelay=n,Po(n>e,"Short delay should be less than long delay!"),this.isMobile=xk()||Nk()}get(){return KP()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sv(t,e){Po(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L3{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;_o("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;_o("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;_o("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YP={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XP=new Rd(3e4,6e4);function Zl(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function el(t,e,n,r,i={}){return R3(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=Ld(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const u=Object.assign({method:e,headers:l},s);return Ak()||(u.referrerPolicy="no-referrer"),L3.fetch()(j3(t,t.config.apiHost,n,a),u)})}async function R3(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},YP),e);try{const i=new ZP(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw Rf(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Rf(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Rf(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw Rf(t,"user-disabled",o);const h=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw C3(t,h,u);cs(t,h)}}catch(i){if(i instanceof Ws)throw i;cs(t,"network-request-failed",{message:String(i)})}}async function Rm(t,e,n,r,i={}){const s=await el(t,e,n,r,i);return"mfaPendingCredential"in s&&cs(t,"multi-factor-auth-required",{_serverResponse:s}),s}function j3(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?sv(t.config,i):`${t.config.apiScheme}://${i}`}function JP(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class ZP{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Us(this.auth,"network-request-failed")),XP.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Rf(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Us(t,e,r);return i.customData._tokenResponse=n,i}function c_(t){return t!==void 0&&t.enterprise!==void 0}class e6{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return JP(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function t6(t,e){return el(t,"GET","/v2/recaptchaConfig",Zl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function n6(t,e){return el(t,"POST","/v1/accounts:delete",e)}async function D3(t,e){return el(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zh(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function r6(t,e=!1){const n=_n(t),r=await n.getIdToken(e),i=ov(r);mt(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:zh(n1(i.auth_time)),issuedAtTime:zh(n1(i.iat)),expirationTime:zh(n1(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function n1(t){return Number(t)*1e3}function ov(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return np("JWT malformed, contained fewer than 3 sections"),null;try{const i=y3(n);return i?JSON.parse(i):(np("Failed to decode base64 JWT payload"),null)}catch(i){return np("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function h_(t){const e=ov(t);return mt(e,"internal-error"),mt(typeof e.exp<"u","internal-error"),mt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gd(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Ws&&i6(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function i6({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s6{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N0{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=zh(this.lastLoginAt),this.creationTime=zh(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wp(t){var e;const n=t.auth,r=await t.getIdToken(),i=await gd(t,D3(n,{idToken:r}));mt(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?O3(s.providerUserInfo):[],a=a6(t.providerData,o),l=t.isAnonymous,u=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),h=l?u:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new N0(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(t,f)}async function o6(t){const e=_n(t);await Wp(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function a6(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function O3(t){return t.map(e=>{var{providerId:n}=e,r=rv(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function l6(t,e){const n=await R3(t,{},async()=>{const r=Ld({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=j3(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",L3.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function u6(t,e){return el(t,"POST","/v2/accounts:revokeToken",Zl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uc{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){mt(e.idToken,"internal-error"),mt(typeof e.idToken<"u","internal-error"),mt(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):h_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){mt(e.length!==0,"internal-error");const n=h_(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(mt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await l6(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new uc;return r&&(mt(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(mt(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(mt(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new uc,this.toJSON())}_performRefresh(){return _o("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function da(t,e){mt(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class wo{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=rv(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new s6(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new N0(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await gd(this,this.stsTokenManager.getToken(this.auth,e));return mt(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return r6(this,e)}reload(){return o6(this)}_assign(e){this!==e&&(mt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new wo(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){mt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Wp(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(yo(this.auth.app))return Promise.reject(Va(this.auth));const e=await this.getIdToken();return await gd(this,n6(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,l,u,h;const f=(r=n.displayName)!==null&&r!==void 0?r:void 0,m=(i=n.email)!==null&&i!==void 0?i:void 0,p=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,b=(o=n.photoURL)!==null&&o!==void 0?o:void 0,E=(a=n.tenantId)!==null&&a!==void 0?a:void 0,k=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,w=(u=n.createdAt)!==null&&u!==void 0?u:void 0,x=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:C,emailVerified:M,isAnonymous:Q,providerData:z,stsTokenManager:L}=n;mt(C&&L,e,"internal-error");const y=uc.fromJSON(this.name,L);mt(typeof C=="string",e,"internal-error"),da(f,e.name),da(m,e.name),mt(typeof M=="boolean",e,"internal-error"),mt(typeof Q=="boolean",e,"internal-error"),da(p,e.name),da(b,e.name),da(E,e.name),da(k,e.name),da(w,e.name),da(x,e.name);const N=new wo({uid:C,auth:e,email:m,emailVerified:M,displayName:f,isAnonymous:Q,photoURL:b,phoneNumber:p,tenantId:E,stsTokenManager:y,createdAt:w,lastLoginAt:x});return z&&Array.isArray(z)&&(N.providerData=z.map(R=>Object.assign({},R))),k&&(N._redirectEventId=k),N}static async _fromIdTokenResponse(e,n,r=!1){const i=new uc;i.updateFromServerResponse(n);const s=new wo({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Wp(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];mt(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?O3(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new uc;a.updateFromIdToken(r);const l=new wo({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new N0(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,u),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d_=new Map;function bo(t){Po(t instanceof Function,"Expected a class definition");let e=d_.get(t);return e?(Po(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,d_.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F3{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}F3.type="NONE";const f_=F3;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rp(t,e,n){return`firebase:${t}:${e}:${n}`}class cc{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=rp(this.userKey,i.apiKey,s),this.fullPersistenceKey=rp("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?wo._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new cc(bo(f_),e,r);const i=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=i[0]||bo(f_);const o=rp(r,e.config.apiKey,e.name);let a=null;for(const u of n)try{const h=await u._get(o);if(h){const f=wo._fromJSON(e,h);u!==s&&(a=f),s=u;break}}catch{}const l=i.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new cc(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==s)try{await u._remove(o)}catch{}})),new cc(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p_(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(B3(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(M3(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(z3(e))return"Blackberry";if($3(e))return"Webos";if(U3(e))return"Safari";if((e.includes("chrome/")||V3(e))&&!e.includes("edge/"))return"Chrome";if(q3(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function M3(t=Pr()){return/firefox\//i.test(t)}function U3(t=Pr()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function V3(t=Pr()){return/crios\//i.test(t)}function B3(t=Pr()){return/iemobile/i.test(t)}function q3(t=Pr()){return/android/i.test(t)}function z3(t=Pr()){return/blackberry/i.test(t)}function $3(t=Pr()){return/webos/i.test(t)}function av(t=Pr()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function c6(t=Pr()){var e;return av(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function h6(){return Ik()&&document.documentMode===10}function H3(t=Pr()){return av(t)||q3(t)||$3(t)||z3(t)||/windows phone/i.test(t)||B3(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W3(t,e=[]){let n;switch(t){case"Browser":n=p_(Pr());break;case"Worker":n=`${p_(Pr())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Jl}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d6{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function f6(t,e={}){return el(t,"GET","/v2/passwordPolicy",Zl(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p6=6;class m6{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:p6,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g6{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new m_(this),this.idTokenSubscription=new m_(this),this.beforeStateQueue=new d6(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=P3,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=bo(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await cc.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await D3(this,{idToken:e}),r=await wo._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(yo(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return mt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Wp(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=QP()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(yo(this.app))return Promise.reject(Va(this));const n=e?_n(e):null;return n&&mt(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&mt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return yo(this.app)?Promise.reject(Va(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return yo(this.app)?Promise.reject(Va(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(bo(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await f6(this),n=new m6(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Cd("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await u6(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&bo(e)||this._popupRedirectResolver;mt(n,this,"argument-error"),this.redirectPersistenceManager=await cc.create(this,[bo(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(mt(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return mt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=W3(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&WP(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Vc(t){return _n(t)}class m_{constructor(e){this.auth=e,this.observer=null,this.addObserver=Dk(n=>this.observer=n)}get next(){return mt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function v6(t){jm=t}function G3(t){return jm.loadJS(t)}function y6(){return jm.recaptchaEnterpriseScript}function _6(){return jm.gapiScript}function w6(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const b6="recaptcha-enterprise",x6="NO_RECAPTCHA";class S6{constructor(e){this.type=b6,this.auth=Vc(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{t6(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const u=new e6(l);return s.tenantId==null?s._agentRecaptchaConfig=u:s._tenantRecaptchaConfigs[s.tenantId]=u,o(u.siteKey)}}).catch(l=>{a(l)})})}function i(s,o,a){const l=window.grecaptcha;c_(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(u=>{o(u)}).catch(()=>{o(x6)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&c_(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=y6();l.length!==0&&(l+=a),G3(l).then(()=>{i(a,s,o)}).catch(u=>{o(u)})}}).catch(a=>{o(a)})})}}async function g_(t,e,n,r=!1){const i=new S6(t);let s;try{s=await i.verify(n)}catch{s=await i.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function v_(t,e,n,r){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await g_(t,e,n,n==="getOobCode");return r(t,s)}else return r(t,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await g_(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(s)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A6(t,e){const n=Lm(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(zp(s,e??{}))return i;cs(i,"already-initialized")}return n.initialize({options:e})}function E6(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(bo);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function N6(t,e,n){const r=Vc(t);mt(r._canInitEmulator,r,"emulator-config-failed"),mt(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=K3(e),{host:o,port:a}=I6(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),T6()}function K3(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function I6(t){const e=K3(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:y_(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:y_(o)}}}function y_(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function T6(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lv{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return _o("not implemented")}_getIdTokenResponse(e){return _o("not implemented")}_linkToIdToken(e,n){return _o("not implemented")}_getReauthenticationResolver(e){return _o("not implemented")}}async function k6(t,e){return el(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function P6(t,e){return Rm(t,"POST","/v1/accounts:signInWithPassword",Zl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function C6(t,e){return Rm(t,"POST","/v1/accounts:signInWithEmailLink",Zl(t,e))}async function L6(t,e){return Rm(t,"POST","/v1/accounts:signInWithEmailLink",Zl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vd extends lv{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new vd(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new vd(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return v_(e,n,"signInWithPassword",P6);case"emailLink":return C6(e,{email:this._email,oobCode:this._password});default:cs(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return v_(e,r,"signUpPassword",k6);case"emailLink":return L6(e,{idToken:n,email:this._email,oobCode:this._password});default:cs(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hc(t,e){return Rm(t,"POST","/v1/accounts:signInWithIdp",Zl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R6="http://localhost";class $l extends lv{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new $l(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):cs("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=rv(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new $l(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return hc(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,hc(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,hc(e,n)}buildRequest(){const e={requestUri:R6,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Ld(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j6(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function D6(t){const e=Ih(Th(t)).link,n=e?Ih(Th(e)).deep_link_id:null,r=Ih(Th(t)).deep_link_id;return(r?Ih(Th(r)).link:null)||r||n||e||t}class uv{constructor(e){var n,r,i,s,o,a;const l=Ih(Th(e)),u=(n=l.apiKey)!==null&&n!==void 0?n:null,h=(r=l.oobCode)!==null&&r!==void 0?r:null,f=j6((i=l.mode)!==null&&i!==void 0?i:null);mt(u&&h&&f,"argument-error"),this.apiKey=u,this.operation=f,this.code=h,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=D6(e);try{return new uv(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bc{constructor(){this.providerId=Bc.PROVIDER_ID}static credential(e,n){return vd._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=uv.parseLink(n);return mt(r,"argument-error"),vd._fromEmailAndCode(e,r.code,r.tenantId)}}Bc.PROVIDER_ID="password";Bc.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Bc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q3{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jd extends Q3{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _a extends jd{constructor(){super("facebook.com")}static credential(e){return $l._fromParams({providerId:_a.PROVIDER_ID,signInMethod:_a.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return _a.credentialFromTaggedObject(e)}static credentialFromError(e){return _a.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return _a.credential(e.oauthAccessToken)}catch{return null}}}_a.FACEBOOK_SIGN_IN_METHOD="facebook.com";_a.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wa extends jd{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return $l._fromParams({providerId:wa.PROVIDER_ID,signInMethod:wa.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return wa.credentialFromTaggedObject(e)}static credentialFromError(e){return wa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return wa.credential(n,r)}catch{return null}}}wa.GOOGLE_SIGN_IN_METHOD="google.com";wa.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ba extends jd{constructor(){super("github.com")}static credential(e){return $l._fromParams({providerId:ba.PROVIDER_ID,signInMethod:ba.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ba.credentialFromTaggedObject(e)}static credentialFromError(e){return ba.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ba.credential(e.oauthAccessToken)}catch{return null}}}ba.GITHUB_SIGN_IN_METHOD="github.com";ba.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xa extends jd{constructor(){super("twitter.com")}static credential(e,n){return $l._fromParams({providerId:xa.PROVIDER_ID,signInMethod:xa.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return xa.credentialFromTaggedObject(e)}static credentialFromError(e){return xa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return xa.credential(n,r)}catch{return null}}}xa.TWITTER_SIGN_IN_METHOD="twitter.com";xa.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ec{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await wo._fromIdTokenResponse(e,r,i),o=__(r);return new Ec({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=__(r);return new Ec({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function __(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gp extends Ws{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Gp.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Gp(e,n,r,i)}}function Y3(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Gp._fromErrorAndOperation(t,s,e,r):s})}async function O6(t,e,n=!1){const r=await gd(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Ec._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function F6(t,e,n=!1){const{auth:r}=t;if(yo(r.app))return Promise.reject(Va(r));const i="reauthenticate";try{const s=await gd(t,Y3(r,i,e,t),n);mt(s.idToken,r,"internal-error");const o=ov(s.idToken);mt(o,r,"internal-error");const{sub:a}=o;return mt(t.uid===a,r,"user-mismatch"),Ec._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&cs(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function X3(t,e,n=!1){if(yo(t.app))return Promise.reject(Va(t));const r="signIn",i=await Y3(t,r,e),s=await Ec._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function M6(t,e){return X3(Vc(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function U6(t){const e=Vc(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function V6(t,e,n){return yo(t.app)?Promise.reject(Va(t)):M6(_n(t),Bc.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&U6(t),r})}function B6(t,e,n,r){return _n(t).onIdTokenChanged(e,n,r)}function q6(t,e,n){return _n(t).beforeAuthStateChanged(e,n)}function z6(t,e,n,r){return _n(t).onAuthStateChanged(e,n,r)}function $6(t){return _n(t).signOut()}const Kp="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J3{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Kp,"1"),this.storage.removeItem(Kp),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H6=1e3,W6=10;class Z3 extends J3{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=H3(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);h6()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,W6):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},H6)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Z3.type="LOCAL";const G6=Z3;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ex extends J3{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}ex.type="SESSION";const tx=ex;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K6(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dm{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new Dm(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async u=>u(n.origin,s)),l=await K6(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Dm.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cv(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q6{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const u=cv("",20);i.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(f){const m=f;if(m.data.eventId===u)switch(m.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(m.data.response);break;default:clearTimeout(h),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vs(){return window}function Y6(t){Vs().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nx(){return typeof Vs().WorkerGlobalScope<"u"&&typeof Vs().importScripts=="function"}async function X6(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function J6(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function Z6(){return nx()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rx="firebaseLocalStorageDb",eC=1,Qp="firebaseLocalStorage",ix="fbase_key";class Dd{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Om(t,e){return t.transaction([Qp],e?"readwrite":"readonly").objectStore(Qp)}function tC(){const t=indexedDB.deleteDatabase(rx);return new Dd(t).toPromise()}function I0(){const t=indexedDB.open(rx,eC);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Qp,{keyPath:ix})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Qp)?e(r):(r.close(),await tC(),e(await I0()))})})}async function w_(t,e,n){const r=Om(t,!0).put({[ix]:e,value:n});return new Dd(r).toPromise()}async function nC(t,e){const n=Om(t,!1).get(e),r=await new Dd(n).toPromise();return r===void 0?null:r.value}function b_(t,e){const n=Om(t,!0).delete(e);return new Dd(n).toPromise()}const rC=800,iC=3;class sx{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await I0(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>iC)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return nx()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Dm._getInstance(Z6()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await X6(),!this.activeServiceWorker)return;this.sender=new Q6(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||J6()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await I0();return await w_(e,Kp,"1"),await b_(e,Kp),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>w_(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>nC(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>b_(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=Om(i,!1).getAll();return new Dd(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),rC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}sx.type="LOCAL";const sC=sx;new Rd(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oC(t,e){return e?bo(e):(mt(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hv extends lv{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return hc(e,this._buildIdpRequest())}_linkToIdToken(e,n){return hc(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return hc(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function aC(t){return X3(t.auth,new hv(t),t.bypassAuthState)}function lC(t){const{auth:e,user:n}=t;return mt(n,e,"internal-error"),F6(n,new hv(t),t.bypassAuthState)}async function uC(t){const{auth:e,user:n}=t;return mt(n,e,"internal-error"),O6(n,new hv(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ox{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return aC;case"linkViaPopup":case"linkViaRedirect":return uC;case"reauthViaPopup":case"reauthViaRedirect":return lC;default:cs(this.auth,"internal-error")}}resolve(e){Po(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Po(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cC=new Rd(2e3,1e4);class ec extends ox{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,ec.currentPopupAction&&ec.currentPopupAction.cancel(),ec.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return mt(e,this.auth,"internal-error"),e}async onExecution(){Po(this.filter.length===1,"Popup operations only handle one event");const e=cv();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Us(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Us(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ec.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Us(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,cC.get())};e()}}ec.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hC="pendingRedirect",ip=new Map;class dC extends ox{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=ip.get(this.auth._key());if(!e){try{const r=await fC(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}ip.set(this.auth._key(),e)}return this.bypassAuthState||ip.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function fC(t,e){const n=gC(e),r=mC(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function pC(t,e){ip.set(t._key(),e)}function mC(t){return bo(t._redirectPersistence)}function gC(t){return rp(hC,t.config.apiKey,t.name)}async function vC(t,e,n=!1){if(yo(t.app))return Promise.reject(Va(t));const r=Vc(t),i=oC(r,e),o=await new dC(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yC=10*60*1e3;class _C{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!wC(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!ax(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Us(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=yC&&this.cachedEventUids.clear(),this.cachedEventUids.has(x_(e))}saveEventToCache(e){this.cachedEventUids.add(x_(e)),this.lastProcessedEventTime=Date.now()}}function x_(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function ax({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function wC(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ax(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bC(t,e={}){return el(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,SC=/^https?/;async function AC(t){if(t.config.emulator)return;const{authorizedDomains:e}=await bC(t);for(const n of e)try{if(EC(n))return}catch{}cs(t,"unauthorized-domain")}function EC(t){const e=E0(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!SC.test(n))return!1;if(xC.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NC=new Rd(3e4,6e4);function S_(){const t=Vs().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function IC(t){return new Promise((e,n)=>{var r,i,s;function o(){S_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{S_(),n(Us(t,"network-request-failed"))},timeout:NC.get()})}if(!((i=(r=Vs().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=Vs().gapi)===null||s===void 0)&&s.load)o();else{const a=w6("iframefcb");return Vs()[a]=()=>{gapi.load?o():n(Us(t,"network-request-failed"))},G3(`${_6()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw sp=null,e})}let sp=null;function TC(t){return sp=sp||IC(t),sp}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kC=new Rd(5e3,15e3),PC="__/auth/iframe",CC="emulator/auth/iframe",LC={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},RC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function jC(t){const e=t.config;mt(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?sv(e,CC):`https://${t.config.authDomain}/${PC}`,r={apiKey:e.apiKey,appName:t.name,v:Jl},i=RC.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Ld(r).slice(1)}`}async function DC(t){const e=await TC(t),n=Vs().gapi;return mt(n,t,"internal-error"),e.open({where:document.body,url:jC(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:LC,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=Us(t,"network-request-failed"),a=Vs().setTimeout(()=>{s(o)},kC.get());function l(){Vs().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OC={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},FC=500,MC=600,UC="_blank",VC="http://localhost";class A_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function BC(t,e,n,r=FC,i=MC){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},OC),{width:r.toString(),height:i.toString(),top:s,left:o}),u=Pr().toLowerCase();n&&(a=V3(u)?UC:n),M3(u)&&(e=e||VC,l.scrollbars="yes");const h=Object.entries(l).reduce((m,[p,b])=>`${m}${p}=${b},`,"");if(c6(u)&&a!=="_self")return qC(e||"",a),new A_(null);const f=window.open(e||"",a,h);mt(f,t,"popup-blocked");try{f.focus()}catch{}return new A_(f)}function qC(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zC="__/auth/handler",$C="emulator/auth/handler",HC=encodeURIComponent("fac");async function E_(t,e,n,r,i,s){mt(t.config.authDomain,t,"auth-domain-config-required"),mt(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Jl,eventId:i};if(e instanceof Q3){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",jk(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,f]of Object.entries({}))o[h]=f}if(e instanceof jd){const h=e.getScopes().filter(f=>f!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const l=await t._getAppCheckToken(),u=l?`#${HC}=${encodeURIComponent(l)}`:"";return`${WC(t)}?${Ld(a).slice(1)}${u}`}function WC({config:t}){return t.emulator?sv(t,$C):`https://${t.authDomain}/${zC}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r1="webStorageSupport";class GC{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=tx,this._completeRedirectFn=vC,this._overrideRedirectResult=pC}async _openPopup(e,n,r,i){var s;Po((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await E_(e,n,r,E0(),i);return BC(e,o,cv())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await E_(e,n,r,E0(),i);return Y6(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Po(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await DC(e),r=new _C(e);return n.register("authEvent",i=>(mt(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(r1,{type:r1},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[r1];o!==void 0&&n(!!o),cs(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=AC(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return H3()||U3()||av()}}const KC=GC;var N_="@firebase/auth",I_="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QC{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){mt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YC(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function XC(t){zl(new $a("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;mt(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:W3(t)},u=new g6(r,i,s,l);return E6(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),zl(new $a("auth-internal",e=>{const n=Vc(e.getProvider("auth").getImmediate());return(r=>new QC(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ms(N_,I_,YC(t)),Ms(N_,I_,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JC=5*60,ZC=x3("authIdTokenMaxAge")||JC;let T_=null;const eL=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>ZC)return;const i=n==null?void 0:n.token;T_!==i&&(T_=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function tL(t=nv()){const e=Lm(t,"auth");if(e.isInitialized())return e.getImmediate();const n=A6(t,{popupRedirectResolver:KC,persistence:[sC,G6,tx]}),r=x3("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=eL(s.toString());q6(n,o,()=>o(n.currentUser)),B6(n,a=>o(a))}}const i=_3("auth");return i&&N6(n,`http://${i}`),n}function nL(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}v6({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=Us("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",nL().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});XC("Browser");var rL="firebase",iL="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ms(rL,iL,"app");var k_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Dl,lx;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(L,y){function N(){}N.prototype=y.prototype,L.D=y.prototype,L.prototype=new N,L.prototype.constructor=L,L.C=function(R,A,I){for(var P=Array(arguments.length-2),V=2;V<arguments.length;V++)P[V-2]=arguments[V];return y.prototype[A].apply(R,P)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(L,y,N){N||(N=0);var R=Array(16);if(typeof y=="string")for(var A=0;16>A;++A)R[A]=y.charCodeAt(N++)|y.charCodeAt(N++)<<8|y.charCodeAt(N++)<<16|y.charCodeAt(N++)<<24;else for(A=0;16>A;++A)R[A]=y[N++]|y[N++]<<8|y[N++]<<16|y[N++]<<24;y=L.g[0],N=L.g[1],A=L.g[2];var I=L.g[3],P=y+(I^N&(A^I))+R[0]+3614090360&4294967295;y=N+(P<<7&4294967295|P>>>25),P=I+(A^y&(N^A))+R[1]+3905402710&4294967295,I=y+(P<<12&4294967295|P>>>20),P=A+(N^I&(y^N))+R[2]+606105819&4294967295,A=I+(P<<17&4294967295|P>>>15),P=N+(y^A&(I^y))+R[3]+3250441966&4294967295,N=A+(P<<22&4294967295|P>>>10),P=y+(I^N&(A^I))+R[4]+4118548399&4294967295,y=N+(P<<7&4294967295|P>>>25),P=I+(A^y&(N^A))+R[5]+1200080426&4294967295,I=y+(P<<12&4294967295|P>>>20),P=A+(N^I&(y^N))+R[6]+2821735955&4294967295,A=I+(P<<17&4294967295|P>>>15),P=N+(y^A&(I^y))+R[7]+4249261313&4294967295,N=A+(P<<22&4294967295|P>>>10),P=y+(I^N&(A^I))+R[8]+1770035416&4294967295,y=N+(P<<7&4294967295|P>>>25),P=I+(A^y&(N^A))+R[9]+2336552879&4294967295,I=y+(P<<12&4294967295|P>>>20),P=A+(N^I&(y^N))+R[10]+4294925233&4294967295,A=I+(P<<17&4294967295|P>>>15),P=N+(y^A&(I^y))+R[11]+2304563134&4294967295,N=A+(P<<22&4294967295|P>>>10),P=y+(I^N&(A^I))+R[12]+1804603682&4294967295,y=N+(P<<7&4294967295|P>>>25),P=I+(A^y&(N^A))+R[13]+4254626195&4294967295,I=y+(P<<12&4294967295|P>>>20),P=A+(N^I&(y^N))+R[14]+2792965006&4294967295,A=I+(P<<17&4294967295|P>>>15),P=N+(y^A&(I^y))+R[15]+1236535329&4294967295,N=A+(P<<22&4294967295|P>>>10),P=y+(A^I&(N^A))+R[1]+4129170786&4294967295,y=N+(P<<5&4294967295|P>>>27),P=I+(N^A&(y^N))+R[6]+3225465664&4294967295,I=y+(P<<9&4294967295|P>>>23),P=A+(y^N&(I^y))+R[11]+643717713&4294967295,A=I+(P<<14&4294967295|P>>>18),P=N+(I^y&(A^I))+R[0]+3921069994&4294967295,N=A+(P<<20&4294967295|P>>>12),P=y+(A^I&(N^A))+R[5]+3593408605&4294967295,y=N+(P<<5&4294967295|P>>>27),P=I+(N^A&(y^N))+R[10]+38016083&4294967295,I=y+(P<<9&4294967295|P>>>23),P=A+(y^N&(I^y))+R[15]+3634488961&4294967295,A=I+(P<<14&4294967295|P>>>18),P=N+(I^y&(A^I))+R[4]+3889429448&4294967295,N=A+(P<<20&4294967295|P>>>12),P=y+(A^I&(N^A))+R[9]+568446438&4294967295,y=N+(P<<5&4294967295|P>>>27),P=I+(N^A&(y^N))+R[14]+3275163606&4294967295,I=y+(P<<9&4294967295|P>>>23),P=A+(y^N&(I^y))+R[3]+4107603335&4294967295,A=I+(P<<14&4294967295|P>>>18),P=N+(I^y&(A^I))+R[8]+1163531501&4294967295,N=A+(P<<20&4294967295|P>>>12),P=y+(A^I&(N^A))+R[13]+2850285829&4294967295,y=N+(P<<5&4294967295|P>>>27),P=I+(N^A&(y^N))+R[2]+4243563512&4294967295,I=y+(P<<9&4294967295|P>>>23),P=A+(y^N&(I^y))+R[7]+1735328473&4294967295,A=I+(P<<14&4294967295|P>>>18),P=N+(I^y&(A^I))+R[12]+2368359562&4294967295,N=A+(P<<20&4294967295|P>>>12),P=y+(N^A^I)+R[5]+4294588738&4294967295,y=N+(P<<4&4294967295|P>>>28),P=I+(y^N^A)+R[8]+2272392833&4294967295,I=y+(P<<11&4294967295|P>>>21),P=A+(I^y^N)+R[11]+1839030562&4294967295,A=I+(P<<16&4294967295|P>>>16),P=N+(A^I^y)+R[14]+4259657740&4294967295,N=A+(P<<23&4294967295|P>>>9),P=y+(N^A^I)+R[1]+2763975236&4294967295,y=N+(P<<4&4294967295|P>>>28),P=I+(y^N^A)+R[4]+1272893353&4294967295,I=y+(P<<11&4294967295|P>>>21),P=A+(I^y^N)+R[7]+4139469664&4294967295,A=I+(P<<16&4294967295|P>>>16),P=N+(A^I^y)+R[10]+3200236656&4294967295,N=A+(P<<23&4294967295|P>>>9),P=y+(N^A^I)+R[13]+681279174&4294967295,y=N+(P<<4&4294967295|P>>>28),P=I+(y^N^A)+R[0]+3936430074&4294967295,I=y+(P<<11&4294967295|P>>>21),P=A+(I^y^N)+R[3]+3572445317&4294967295,A=I+(P<<16&4294967295|P>>>16),P=N+(A^I^y)+R[6]+76029189&4294967295,N=A+(P<<23&4294967295|P>>>9),P=y+(N^A^I)+R[9]+3654602809&4294967295,y=N+(P<<4&4294967295|P>>>28),P=I+(y^N^A)+R[12]+3873151461&4294967295,I=y+(P<<11&4294967295|P>>>21),P=A+(I^y^N)+R[15]+530742520&4294967295,A=I+(P<<16&4294967295|P>>>16),P=N+(A^I^y)+R[2]+3299628645&4294967295,N=A+(P<<23&4294967295|P>>>9),P=y+(A^(N|~I))+R[0]+4096336452&4294967295,y=N+(P<<6&4294967295|P>>>26),P=I+(N^(y|~A))+R[7]+1126891415&4294967295,I=y+(P<<10&4294967295|P>>>22),P=A+(y^(I|~N))+R[14]+2878612391&4294967295,A=I+(P<<15&4294967295|P>>>17),P=N+(I^(A|~y))+R[5]+4237533241&4294967295,N=A+(P<<21&4294967295|P>>>11),P=y+(A^(N|~I))+R[12]+1700485571&4294967295,y=N+(P<<6&4294967295|P>>>26),P=I+(N^(y|~A))+R[3]+2399980690&4294967295,I=y+(P<<10&4294967295|P>>>22),P=A+(y^(I|~N))+R[10]+4293915773&4294967295,A=I+(P<<15&4294967295|P>>>17),P=N+(I^(A|~y))+R[1]+2240044497&4294967295,N=A+(P<<21&4294967295|P>>>11),P=y+(A^(N|~I))+R[8]+1873313359&4294967295,y=N+(P<<6&4294967295|P>>>26),P=I+(N^(y|~A))+R[15]+4264355552&4294967295,I=y+(P<<10&4294967295|P>>>22),P=A+(y^(I|~N))+R[6]+2734768916&4294967295,A=I+(P<<15&4294967295|P>>>17),P=N+(I^(A|~y))+R[13]+1309151649&4294967295,N=A+(P<<21&4294967295|P>>>11),P=y+(A^(N|~I))+R[4]+4149444226&4294967295,y=N+(P<<6&4294967295|P>>>26),P=I+(N^(y|~A))+R[11]+3174756917&4294967295,I=y+(P<<10&4294967295|P>>>22),P=A+(y^(I|~N))+R[2]+718787259&4294967295,A=I+(P<<15&4294967295|P>>>17),P=N+(I^(A|~y))+R[9]+3951481745&4294967295,L.g[0]=L.g[0]+y&4294967295,L.g[1]=L.g[1]+(A+(P<<21&4294967295|P>>>11))&4294967295,L.g[2]=L.g[2]+A&4294967295,L.g[3]=L.g[3]+I&4294967295}r.prototype.u=function(L,y){y===void 0&&(y=L.length);for(var N=y-this.blockSize,R=this.B,A=this.h,I=0;I<y;){if(A==0)for(;I<=N;)i(this,L,I),I+=this.blockSize;if(typeof L=="string"){for(;I<y;)if(R[A++]=L.charCodeAt(I++),A==this.blockSize){i(this,R),A=0;break}}else for(;I<y;)if(R[A++]=L[I++],A==this.blockSize){i(this,R),A=0;break}}this.h=A,this.o+=y},r.prototype.v=function(){var L=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);L[0]=128;for(var y=1;y<L.length-8;++y)L[y]=0;var N=8*this.o;for(y=L.length-8;y<L.length;++y)L[y]=N&255,N/=256;for(this.u(L),L=Array(16),y=N=0;4>y;++y)for(var R=0;32>R;R+=8)L[N++]=this.g[y]>>>R&255;return L};function s(L,y){var N=a;return Object.prototype.hasOwnProperty.call(N,L)?N[L]:N[L]=y(L)}function o(L,y){this.h=y;for(var N=[],R=!0,A=L.length-1;0<=A;A--){var I=L[A]|0;R&&I==y||(N[A]=I,R=!1)}this.g=N}var a={};function l(L){return-128<=L&&128>L?s(L,function(y){return new o([y|0],0>y?-1:0)}):new o([L|0],0>L?-1:0)}function u(L){if(isNaN(L)||!isFinite(L))return f;if(0>L)return k(u(-L));for(var y=[],N=1,R=0;L>=N;R++)y[R]=L/N|0,N*=4294967296;return new o(y,0)}function h(L,y){if(L.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(L.charAt(0)=="-")return k(h(L.substring(1),y));if(0<=L.indexOf("-"))throw Error('number format error: interior "-" character');for(var N=u(Math.pow(y,8)),R=f,A=0;A<L.length;A+=8){var I=Math.min(8,L.length-A),P=parseInt(L.substring(A,A+I),y);8>I?(I=u(Math.pow(y,I)),R=R.j(I).add(u(P))):(R=R.j(N),R=R.add(u(P)))}return R}var f=l(0),m=l(1),p=l(16777216);t=o.prototype,t.m=function(){if(E(this))return-k(this).m();for(var L=0,y=1,N=0;N<this.g.length;N++){var R=this.i(N);L+=(0<=R?R:4294967296+R)*y,y*=4294967296}return L},t.toString=function(L){if(L=L||10,2>L||36<L)throw Error("radix out of range: "+L);if(b(this))return"0";if(E(this))return"-"+k(this).toString(L);for(var y=u(Math.pow(L,6)),N=this,R="";;){var A=M(N,y).g;N=w(N,A.j(y));var I=((0<N.g.length?N.g[0]:N.h)>>>0).toString(L);if(N=A,b(N))return I+R;for(;6>I.length;)I="0"+I;R=I+R}},t.i=function(L){return 0>L?0:L<this.g.length?this.g[L]:this.h};function b(L){if(L.h!=0)return!1;for(var y=0;y<L.g.length;y++)if(L.g[y]!=0)return!1;return!0}function E(L){return L.h==-1}t.l=function(L){return L=w(this,L),E(L)?-1:b(L)?0:1};function k(L){for(var y=L.g.length,N=[],R=0;R<y;R++)N[R]=~L.g[R];return new o(N,~L.h).add(m)}t.abs=function(){return E(this)?k(this):this},t.add=function(L){for(var y=Math.max(this.g.length,L.g.length),N=[],R=0,A=0;A<=y;A++){var I=R+(this.i(A)&65535)+(L.i(A)&65535),P=(I>>>16)+(this.i(A)>>>16)+(L.i(A)>>>16);R=P>>>16,I&=65535,P&=65535,N[A]=P<<16|I}return new o(N,N[N.length-1]&-2147483648?-1:0)};function w(L,y){return L.add(k(y))}t.j=function(L){if(b(this)||b(L))return f;if(E(this))return E(L)?k(this).j(k(L)):k(k(this).j(L));if(E(L))return k(this.j(k(L)));if(0>this.l(p)&&0>L.l(p))return u(this.m()*L.m());for(var y=this.g.length+L.g.length,N=[],R=0;R<2*y;R++)N[R]=0;for(R=0;R<this.g.length;R++)for(var A=0;A<L.g.length;A++){var I=this.i(R)>>>16,P=this.i(R)&65535,V=L.i(A)>>>16,J=L.i(A)&65535;N[2*R+2*A]+=P*J,x(N,2*R+2*A),N[2*R+2*A+1]+=I*J,x(N,2*R+2*A+1),N[2*R+2*A+1]+=P*V,x(N,2*R+2*A+1),N[2*R+2*A+2]+=I*V,x(N,2*R+2*A+2)}for(R=0;R<y;R++)N[R]=N[2*R+1]<<16|N[2*R];for(R=y;R<2*y;R++)N[R]=0;return new o(N,0)};function x(L,y){for(;(L[y]&65535)!=L[y];)L[y+1]+=L[y]>>>16,L[y]&=65535,y++}function C(L,y){this.g=L,this.h=y}function M(L,y){if(b(y))throw Error("division by zero");if(b(L))return new C(f,f);if(E(L))return y=M(k(L),y),new C(k(y.g),k(y.h));if(E(y))return y=M(L,k(y)),new C(k(y.g),y.h);if(30<L.g.length){if(E(L)||E(y))throw Error("slowDivide_ only works with positive integers.");for(var N=m,R=y;0>=R.l(L);)N=Q(N),R=Q(R);var A=z(N,1),I=z(R,1);for(R=z(R,2),N=z(N,2);!b(R);){var P=I.add(R);0>=P.l(L)&&(A=A.add(N),I=P),R=z(R,1),N=z(N,1)}return y=w(L,A.j(y)),new C(A,y)}for(A=f;0<=L.l(y);){for(N=Math.max(1,Math.floor(L.m()/y.m())),R=Math.ceil(Math.log(N)/Math.LN2),R=48>=R?1:Math.pow(2,R-48),I=u(N),P=I.j(y);E(P)||0<P.l(L);)N-=R,I=u(N),P=I.j(y);b(I)&&(I=m),A=A.add(I),L=w(L,P)}return new C(A,L)}t.A=function(L){return M(this,L).h},t.and=function(L){for(var y=Math.max(this.g.length,L.g.length),N=[],R=0;R<y;R++)N[R]=this.i(R)&L.i(R);return new o(N,this.h&L.h)},t.or=function(L){for(var y=Math.max(this.g.length,L.g.length),N=[],R=0;R<y;R++)N[R]=this.i(R)|L.i(R);return new o(N,this.h|L.h)},t.xor=function(L){for(var y=Math.max(this.g.length,L.g.length),N=[],R=0;R<y;R++)N[R]=this.i(R)^L.i(R);return new o(N,this.h^L.h)};function Q(L){for(var y=L.g.length+1,N=[],R=0;R<y;R++)N[R]=L.i(R)<<1|L.i(R-1)>>>31;return new o(N,L.h)}function z(L,y){var N=y>>5;y%=32;for(var R=L.g.length-N,A=[],I=0;I<R;I++)A[I]=0<y?L.i(I+N)>>>y|L.i(I+N+1)<<32-y:L.i(I+N);return new o(A,L.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,lx=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=h,Dl=o}).apply(typeof k_<"u"?k_:typeof self<"u"?self:typeof window<"u"?window:{});var jf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ux,kh,cx,op,T0,hx,dx,fx;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(d,T,D){return d==Array.prototype||d==Object.prototype||(d[T]=D.value),d};function n(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof jf=="object"&&jf];for(var T=0;T<d.length;++T){var D=d[T];if(D&&D.Math==Math)return D}throw Error("Cannot find global object")}var r=n(this);function i(d,T){if(T)e:{var D=r;d=d.split(".");for(var K=0;K<d.length-1;K++){var me=d[K];if(!(me in D))break e;D=D[me]}d=d[d.length-1],K=D[d],T=T(K),T!=K&&T!=null&&e(D,d,{configurable:!0,writable:!0,value:T})}}function s(d,T){d instanceof String&&(d+="");var D=0,K=!1,me={next:function(){if(!K&&D<d.length){var be=D++;return{value:T(be,d[be]),done:!1}}return K=!0,{done:!0,value:void 0}}};return me[Symbol.iterator]=function(){return me},me}i("Array.prototype.values",function(d){return d||function(){return s(this,function(T,D){return D})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(d){var T=typeof d;return T=T!="object"?T:d?Array.isArray(d)?"array":T:"null",T=="array"||T=="object"&&typeof d.length=="number"}function u(d){var T=typeof d;return T=="object"&&d!=null||T=="function"}function h(d,T,D){return d.call.apply(d.bind,arguments)}function f(d,T,D){if(!d)throw Error();if(2<arguments.length){var K=Array.prototype.slice.call(arguments,2);return function(){var me=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(me,K),d.apply(T,me)}}return function(){return d.apply(T,arguments)}}function m(d,T,D){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:f,m.apply(null,arguments)}function p(d,T){var D=Array.prototype.slice.call(arguments,1);return function(){var K=D.slice();return K.push.apply(K,arguments),d.apply(this,K)}}function b(d,T){function D(){}D.prototype=T.prototype,d.aa=T.prototype,d.prototype=new D,d.prototype.constructor=d,d.Qb=function(K,me,be){for(var Fe=Array(arguments.length-2),yt=2;yt<arguments.length;yt++)Fe[yt-2]=arguments[yt];return T.prototype[me].apply(K,Fe)}}function E(d){const T=d.length;if(0<T){const D=Array(T);for(let K=0;K<T;K++)D[K]=d[K];return D}return[]}function k(d,T){for(let D=1;D<arguments.length;D++){const K=arguments[D];if(l(K)){const me=d.length||0,be=K.length||0;d.length=me+be;for(let Fe=0;Fe<be;Fe++)d[me+Fe]=K[Fe]}else d.push(K)}}class w{constructor(T,D){this.i=T,this.j=D,this.h=0,this.g=null}get(){let T;return 0<this.h?(this.h--,T=this.g,this.g=T.next,T.next=null):T=this.i(),T}}function x(d){return/^[\s\xa0]*$/.test(d)}function C(){var d=a.navigator;return d&&(d=d.userAgent)?d:""}function M(d){return M[" "](d),d}M[" "]=function(){};var Q=C().indexOf("Gecko")!=-1&&!(C().toLowerCase().indexOf("webkit")!=-1&&C().indexOf("Edge")==-1)&&!(C().indexOf("Trident")!=-1||C().indexOf("MSIE")!=-1)&&C().indexOf("Edge")==-1;function z(d,T,D){for(const K in d)T.call(D,d[K],K,d)}function L(d,T){for(const D in d)T.call(void 0,d[D],D,d)}function y(d){const T={};for(const D in d)T[D]=d[D];return T}const N="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function R(d,T){let D,K;for(let me=1;me<arguments.length;me++){K=arguments[me];for(D in K)d[D]=K[D];for(let be=0;be<N.length;be++)D=N[be],Object.prototype.hasOwnProperty.call(K,D)&&(d[D]=K[D])}}function A(d){var T=1;d=d.split(":");const D=[];for(;0<T&&d.length;)D.push(d.shift()),T--;return d.length&&D.push(d.join(":")),D}function I(d){a.setTimeout(()=>{throw d},0)}function P(){var d=ee;let T=null;return d.g&&(T=d.g,d.g=d.g.next,d.g||(d.h=null),T.next=null),T}class V{constructor(){this.h=this.g=null}add(T,D){const K=J.get();K.set(T,D),this.h?this.h.next=K:this.g=K,this.h=K}}var J=new w(()=>new O,d=>d.reset());class O{constructor(){this.next=this.g=this.h=null}set(T,D){this.h=T,this.g=D,this.next=null}reset(){this.next=this.g=this.h=null}}let U,W=!1,ee=new V,re=()=>{const d=a.Promise.resolve(void 0);U=()=>{d.then(xe)}};var xe=()=>{for(var d;d=P();){try{d.h.call(d.g)}catch(D){I(D)}var T=J;T.j(d),100>T.h&&(T.h++,d.next=T.g,T.g=d)}W=!1};function F(){this.s=this.s,this.C=this.C}F.prototype.s=!1,F.prototype.ma=function(){this.s||(this.s=!0,this.N())},F.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function G(d,T){this.type=d,this.g=this.target=T,this.defaultPrevented=!1}G.prototype.h=function(){this.defaultPrevented=!0};var Y=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var d=!1,T=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const D=()=>{};a.addEventListener("test",D,T),a.removeEventListener("test",D,T)}catch{}return d}();function Z(d,T){if(G.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d){var D=this.type=d.type,K=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;if(this.target=d.target||d.srcElement,this.g=T,T=d.relatedTarget){if(Q){e:{try{M(T.nodeName);var me=!0;break e}catch{}me=!1}me||(T=null)}}else D=="mouseover"?T=d.fromElement:D=="mouseout"&&(T=d.toElement);this.relatedTarget=T,K?(this.clientX=K.clientX!==void 0?K.clientX:K.pageX,this.clientY=K.clientY!==void 0?K.clientY:K.pageY,this.screenX=K.screenX||0,this.screenY=K.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=typeof d.pointerType=="string"?d.pointerType:ae[d.pointerType]||"",this.state=d.state,this.i=d,d.defaultPrevented&&Z.aa.h.call(this)}}b(Z,G);var ae={2:"touch",3:"pen",4:"mouse"};Z.prototype.h=function(){Z.aa.h.call(this);var d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var ie="closure_listenable_"+(1e6*Math.random()|0),ce=0;function fe(d,T,D,K,me){this.listener=d,this.proxy=null,this.src=T,this.type=D,this.capture=!!K,this.ha=me,this.key=++ce,this.da=this.fa=!1}function Ie(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function Ee(d){this.src=d,this.g={},this.h=0}Ee.prototype.add=function(d,T,D,K,me){var be=d.toString();d=this.g[be],d||(d=this.g[be]=[],this.h++);var Fe=Ue(d,T,K,me);return-1<Fe?(T=d[Fe],D||(T.fa=!1)):(T=new fe(T,this.src,be,!!K,me),T.fa=D,d.push(T)),T};function je(d,T){var D=T.type;if(D in d.g){var K=d.g[D],me=Array.prototype.indexOf.call(K,T,void 0),be;(be=0<=me)&&Array.prototype.splice.call(K,me,1),be&&(Ie(T),d.g[D].length==0&&(delete d.g[D],d.h--))}}function Ue(d,T,D,K){for(var me=0;me<d.length;++me){var be=d[me];if(!be.da&&be.listener==T&&be.capture==!!D&&be.ha==K)return me}return-1}var Ye="closure_lm_"+(1e6*Math.random()|0),Se={};function oe(d,T,D,K,me){if(Array.isArray(T)){for(var be=0;be<T.length;be++)oe(d,T[be],D,K,me);return null}return D=st(D),d&&d[ie]?d.K(T,D,u(K)?!!K.capture:!1,me):ye(d,T,D,!1,K,me)}function ye(d,T,D,K,me,be){if(!T)throw Error("Invalid event type");var Fe=u(me)?!!me.capture:!!me,yt=He(d);if(yt||(d[Ye]=yt=new Ee(d)),D=yt.add(T,D,K,Fe,be),D.proxy)return D;if(K=Re(),D.proxy=K,K.src=d,K.listener=D,d.addEventListener)Y||(me=Fe),me===void 0&&(me=!1),d.addEventListener(T.toString(),K,me);else if(d.attachEvent)d.attachEvent(Be(T.toString()),K);else if(d.addListener&&d.removeListener)d.addListener(K);else throw Error("addEventListener and attachEvent are unavailable.");return D}function Re(){function d(D){return T.call(d.src,d.listener,D)}const T=ze;return d}function Te(d,T,D,K,me){if(Array.isArray(T))for(var be=0;be<T.length;be++)Te(d,T[be],D,K,me);else K=u(K)?!!K.capture:!!K,D=st(D),d&&d[ie]?(d=d.i,T=String(T).toString(),T in d.g&&(be=d.g[T],D=Ue(be,D,K,me),-1<D&&(Ie(be[D]),Array.prototype.splice.call(be,D,1),be.length==0&&(delete d.g[T],d.h--)))):d&&(d=He(d))&&(T=d.g[T.toString()],d=-1,T&&(d=Ue(T,D,K,me)),(D=-1<d?T[d]:null)&&Me(D))}function Me(d){if(typeof d!="number"&&d&&!d.da){var T=d.src;if(T&&T[ie])je(T.i,d);else{var D=d.type,K=d.proxy;T.removeEventListener?T.removeEventListener(D,K,d.capture):T.detachEvent?T.detachEvent(Be(D),K):T.addListener&&T.removeListener&&T.removeListener(K),(D=He(T))?(je(D,d),D.h==0&&(D.src=null,T[Ye]=null)):Ie(d)}}}function Be(d){return d in Se?Se[d]:Se[d]="on"+d}function ze(d,T){if(d.da)d=!0;else{T=new Z(T,this);var D=d.listener,K=d.ha||d.src;d.fa&&Me(d),d=D.call(K,T)}return d}function He(d){return d=d[Ye],d instanceof Ee?d:null}var Qe="__closure_events_fn_"+(1e9*Math.random()>>>0);function st(d){return typeof d=="function"?d:(d[Qe]||(d[Qe]=function(T){return d.handleEvent(T)}),d[Qe])}function tt(){F.call(this),this.i=new Ee(this),this.M=this,this.F=null}b(tt,F),tt.prototype[ie]=!0,tt.prototype.removeEventListener=function(d,T,D,K){Te(this,d,T,D,K)};function lt(d,T){var D,K=d.F;if(K)for(D=[];K;K=K.F)D.push(K);if(d=d.M,K=T.type||T,typeof T=="string")T=new G(T,d);else if(T instanceof G)T.target=T.target||d;else{var me=T;T=new G(K,d),R(T,me)}if(me=!0,D)for(var be=D.length-1;0<=be;be--){var Fe=T.g=D[be];me=ht(Fe,K,!0,T)&&me}if(Fe=T.g=d,me=ht(Fe,K,!0,T)&&me,me=ht(Fe,K,!1,T)&&me,D)for(be=0;be<D.length;be++)Fe=T.g=D[be],me=ht(Fe,K,!1,T)&&me}tt.prototype.N=function(){if(tt.aa.N.call(this),this.i){var d=this.i,T;for(T in d.g){for(var D=d.g[T],K=0;K<D.length;K++)Ie(D[K]);delete d.g[T],d.h--}}this.F=null},tt.prototype.K=function(d,T,D,K){return this.i.add(String(d),T,!1,D,K)},tt.prototype.L=function(d,T,D,K){return this.i.add(String(d),T,!0,D,K)};function ht(d,T,D,K){if(T=d.i.g[String(T)],!T)return!0;T=T.concat();for(var me=!0,be=0;be<T.length;++be){var Fe=T[be];if(Fe&&!Fe.da&&Fe.capture==D){var yt=Fe.listener,Tt=Fe.ha||Fe.src;Fe.fa&&je(d.i,Fe),me=yt.call(Tt,K)!==!1&&me}}return me&&!K.defaultPrevented}function ot(d,T,D){if(typeof d=="function")D&&(d=m(d,D));else if(d&&typeof d.handleEvent=="function")d=m(d.handleEvent,d);else throw Error("Invalid listener argument");return 2147483647<Number(T)?-1:a.setTimeout(d,T||0)}function at(d){d.g=ot(()=>{d.g=null,d.i&&(d.i=!1,at(d))},d.l);const T=d.h;d.h=null,d.m.apply(null,T)}class $e extends F{constructor(T,D){super(),this.m=T,this.l=D,this.h=null,this.i=!1,this.g=null}j(T){this.h=arguments,this.g?this.i=!0:at(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ct(d){F.call(this),this.h=d,this.g={}}b(Ct,F);var vt=[];function sn(d){z(d.g,function(T,D){this.g.hasOwnProperty(D)&&Me(T)},d),d.g={}}Ct.prototype.N=function(){Ct.aa.N.call(this),sn(this)},Ct.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var At=a.JSON.stringify,Bt=a.JSON.parse,Hr=class{stringify(d){return a.JSON.stringify(d,void 0)}parse(d){return a.JSON.parse(d,void 0)}};function Nt(){}Nt.prototype.h=null;function ui(d){return d.h||(d.h=d.i())}function Ut(){}var Hn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function xn(){G.call(this,"d")}b(xn,G);function Lt(){G.call(this,"c")}b(Lt,G);var it={},Et=null;function Lr(){return Et=Et||new tt}it.La="serverreachability";function Yt(d){G.call(this,it.La,d)}b(Yt,G);function fn(d){const T=Lr();lt(T,new Yt(T))}it.STAT_EVENT="statevent";function ci(d,T){G.call(this,it.STAT_EVENT,d),this.stat=T}b(ci,G);function Ze(d){const T=Lr();lt(T,new ci(T,d))}it.Ma="timingevent";function Wr(d,T){G.call(this,it.Ma,d),this.size=T}b(Wr,G);function mr(d,T){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){d()},T)}function Fn(){this.g=!0}Fn.prototype.xa=function(){this.g=!1};function Tn(d,T,D,K,me,be){d.info(function(){if(d.g)if(be)for(var Fe="",yt=be.split("&"),Tt=0;Tt<yt.length;Tt++){var _t=yt[Tt].split("=");if(1<_t.length){var zt=_t[0];_t=_t[1];var Jt=zt.split("_");Fe=2<=Jt.length&&Jt[1]=="type"?Fe+(zt+"="+_t+"&"):Fe+(zt+"=redacted&")}}else Fe=null;else Fe=be;return"XMLHTTP REQ ("+K+") [attempt "+me+"]: "+T+`
`+D+`
`+Fe})}function Sn(d,T,D,K,me,be,Fe){d.info(function(){return"XMLHTTP RESP ("+K+") [ attempt "+me+"]: "+T+`
`+D+`
`+be+" "+Fe})}function Mn(d,T,D,K){d.info(function(){return"XMLHTTP TEXT ("+T+"): "+qi(d,D)+(K?" "+K:"")})}function Oo(d,T){d.info(function(){return"TIMEOUT: "+T})}Fn.prototype.info=function(){};function qi(d,T){if(!d.g)return T;if(!T)return null;try{var D=JSON.parse(T);if(D){for(d=0;d<D.length;d++)if(Array.isArray(D[d])){var K=D[d];if(!(2>K.length)){var me=K[1];if(Array.isArray(me)&&!(1>me.length)){var be=me[0];if(be!="noop"&&be!="stop"&&be!="close")for(var Fe=1;Fe<me.length;Fe++)me[Fe]=""}}}}return At(D)}catch{return T}}var gr={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Gr={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Rr;function jr(){}b(jr,Nt),jr.prototype.g=function(){return new XMLHttpRequest},jr.prototype.i=function(){return{}},Rr=new jr;function kn(d,T,D,K){this.j=d,this.i=T,this.l=D,this.R=K||1,this.U=new Ct(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new hi}function hi(){this.i=null,this.g="",this.h=!1}var ms={},gs={};function vs(d,T,D){d.L=1,d.v=Zs(Dr(T)),d.m=D,d.P=!0,Ks(d,null)}function Ks(d,T){d.F=Date.now(),Fo(d),d.A=Dr(d.v);var D=d.A,K=d.R;Array.isArray(K)||(K=[String(K)]),pt(D.i,"t",K),d.C=0,D=d.j.J,d.h=new hi,d.g=B(d.j,D?T:null,!d.m),0<d.O&&(d.M=new $e(m(d.Y,d,d.g),d.O)),T=d.U,D=d.g,K=d.ca;var me="readystatechange";Array.isArray(me)||(me&&(vt[0]=me.toString()),me=vt);for(var be=0;be<me.length;be++){var Fe=oe(D,me[be],K||T.handleEvent,!1,T.h||T);if(!Fe)break;T.g[Fe.key]=Fe}T=d.H?y(d.H):{},d.m?(d.u||(d.u="POST"),T["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.A,d.u,d.m,T)):(d.u="GET",d.g.ea(d.A,d.u,null,T)),fn(),Tn(d.i,d.u,d.A,d.l,d.R,d.m)}kn.prototype.ca=function(d){d=d.target;const T=this.M;T&&Wn(d)==3?T.j():this.Y(d)},kn.prototype.Y=function(d){try{if(d==this.g)e:{const Jt=Wn(this.g);var T=this.g.Ba();const Yi=this.g.Z();if(!(3>Jt)&&(Jt!=3||this.g&&(this.h.h||this.g.oa()||vu(this.g)))){this.J||Jt!=4||T==7||(T==8||0>=Yi?fn(3):fn(2)),ys(this);var D=this.g.Z();this.X=D;t:if(Qs(this)){var K=vu(this.g);d="";var me=K.length,be=Wn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){zi(this),_s(this);var Fe="";break t}this.h.i=new a.TextDecoder}for(T=0;T<me;T++)this.h.h=!0,d+=this.h.i.decode(K[T],{stream:!(be&&T==me-1)});K.length=0,this.h.g+=d,this.C=0,Fe=this.h.g}else Fe=this.g.oa();if(this.o=D==200,Sn(this.i,this.u,this.A,this.l,this.R,Jt,D),this.o){if(this.T&&!this.K){t:{if(this.g){var yt,Tt=this.g;if((yt=Tt.g?Tt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!x(yt)){var _t=yt;break t}}_t=null}if(D=_t)Mn(this.i,this.l,D,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ys(this,D);else{this.o=!1,this.s=3,Ze(12),zi(this),_s(this);break e}}if(this.P){D=!0;let ir;for(;!this.J&&this.C<Fe.length;)if(ir=lu(this,Fe),ir==gs){Jt==4&&(this.s=4,Ze(14),D=!1),Mn(this.i,this.l,null,"[Incomplete Response]");break}else if(ir==ms){this.s=4,Ze(15),Mn(this.i,this.l,Fe,"[Invalid Chunk]"),D=!1;break}else Mn(this.i,this.l,ir,null),Ys(this,ir);if(Qs(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Jt!=4||Fe.length!=0||this.h.h||(this.s=1,Ze(16),D=!1),this.o=this.o&&D,!D)Mn(this.i,this.l,Fe,"[Invalid Chunked Response]"),zi(this),_s(this);else if(0<Fe.length&&!this.W){this.W=!0;var zt=this.j;zt.g==this&&zt.ba&&!zt.M&&(zt.j.info("Great, no buffering proxy detected. Bytes received: "+Fe.length),Xo(zt),zt.M=!0,Ze(11))}}else Mn(this.i,this.l,Fe,null),Ys(this,Fe);Jt==4&&zi(this),this.o&&!this.J&&(Jt==4?As(this.j,this):(this.o=!1,Fo(this)))}else xs(this.g),D==400&&0<Fe.indexOf("Unknown SID")?(this.s=3,Ze(12)):(this.s=0,Ze(13)),zi(this),_s(this)}}}catch{}finally{}};function Qs(d){return d.g?d.u=="GET"&&d.L!=2&&d.j.Ca:!1}function lu(d,T){var D=d.C,K=T.indexOf(`
`,D);return K==-1?gs:(D=Number(T.substring(D,K)),isNaN(D)?ms:(K+=1,K+D>T.length?gs:(T=T.slice(K,K+D),d.C=K+D,T)))}kn.prototype.cancel=function(){this.J=!0,zi(this)};function Fo(d){d.S=Date.now()+d.I,uu(d,d.I)}function uu(d,T){if(d.B!=null)throw Error("WatchDog timer not null");d.B=mr(m(d.ba,d),T)}function ys(d){d.B&&(a.clearTimeout(d.B),d.B=null)}kn.prototype.ba=function(){this.B=null;const d=Date.now();0<=d-this.S?(Oo(this.i,this.A),this.L!=2&&(fn(),Ze(17)),zi(this),this.s=2,_s(this)):uu(this,this.S-d)};function _s(d){d.j.G==0||d.J||As(d.j,d)}function zi(d){ys(d);var T=d.M;T&&typeof T.ma=="function"&&T.ma(),d.M=null,sn(d.U),d.g&&(T=d.g,d.g=null,T.abort(),T.ma())}function Ys(d,T){try{var D=d.j;if(D.G!=0&&(D.g==d||rl(D.h,d))){if(!d.K&&rl(D.h,d)&&D.G==3){try{var K=D.Da.g.parse(T)}catch{K=null}if(Array.isArray(K)&&K.length==3){var me=K;if(me[0]==0){e:if(!D.u){if(D.g)if(D.g.F+3e3<d.F)Qi(D),Go(D);else break e;io(D),Ze(18)}}else D.za=me[1],0<D.za-D.T&&37500>me[2]&&D.F&&D.v==0&&!D.C&&(D.C=mr(m(D.Za,D),6e3));if(1>=Xs(D.h)&&D.ca){try{D.ca()}catch{}D.ca=void 0}}else vr(D,11)}else if((d.K||D.g==d)&&Qi(D),!x(T))for(me=D.Da.g.parse(T),T=0;T<me.length;T++){let _t=me[T];if(D.T=_t[0],_t=_t[1],D.G==2)if(_t[0]=="c"){D.K=_t[1],D.ia=_t[2];const zt=_t[3];zt!=null&&(D.la=zt,D.j.info("VER="+D.la));const Jt=_t[4];Jt!=null&&(D.Aa=Jt,D.j.info("SVER="+D.Aa));const Yi=_t[5];Yi!=null&&typeof Yi=="number"&&0<Yi&&(K=1.5*Yi,D.L=K,D.j.info("backChannelRequestTimeoutMs_="+K)),K=D;const ir=d.g;if(ir){const Es=ir.g?ir.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Es){var be=K.h;be.g||Es.indexOf("spdy")==-1&&Es.indexOf("quic")==-1&&Es.indexOf("h2")==-1||(be.j=be.l,be.g=new Set,be.h&&(on(be,be.h),be.h=null))}if(K.D){const Ns=ir.g?ir.g.getResponseHeader("X-HTTP-Session-Id"):null;Ns&&(K.ya=Ns,$t(K.I,K.D,Ns))}}D.G=3,D.l&&D.l.ua(),D.ba&&(D.R=Date.now()-d.F,D.j.info("Handshake RTT: "+D.R+"ms")),K=D;var Fe=d;if(K.qa=_(K,K.J?K.ia:null,K.W),Fe.K){il(K.h,Fe);var yt=Fe,Tt=K.L;Tt&&(yt.I=Tt),yt.B&&(ys(yt),Fo(yt)),K.g=Fe}else Yo(K);0<D.i.length&&Ko(D)}else _t[0]!="stop"&&_t[0]!="close"||vr(D,7);else D.G==3&&(_t[0]=="stop"||_t[0]=="close"?_t[0]=="stop"?vr(D,7):Ki(D):_t[0]!="noop"&&D.l&&D.l.ta(_t),D.v=0)}}fn(4)}catch{}}var Gc=class{constructor(d,T){this.g=d,this.map=T}};function nl(d){this.l=d||10,a.PerformanceNavigationTiming?(d=a.performance.getEntriesByType("navigation"),d=0<d.length&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function cu(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function Xs(d){return d.h?1:d.g?d.g.size:0}function rl(d,T){return d.h?d.h==T:d.g?d.g.has(T):!1}function on(d,T){d.g?d.g.add(T):d.h=T}function il(d,T){d.h&&d.h==T?d.h=null:d.g&&d.g.has(T)&&d.g.delete(T)}nl.prototype.cancel=function(){if(this.i=sl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function sl(d){if(d.h!=null)return d.i.concat(d.h.D);if(d.g!=null&&d.g.size!==0){let T=d.i;for(const D of d.g.values())T=T.concat(D.D);return T}return E(d.i)}function hu(d){if(d.V&&typeof d.V=="function")return d.V();if(typeof Map<"u"&&d instanceof Map||typeof Set<"u"&&d instanceof Set)return Array.from(d.values());if(typeof d=="string")return d.split("");if(l(d)){for(var T=[],D=d.length,K=0;K<D;K++)T.push(d[K]);return T}T=[],D=0;for(K in d)T[D++]=d[K];return T}function ol(d){if(d.na&&typeof d.na=="function")return d.na();if(!d.V||typeof d.V!="function"){if(typeof Map<"u"&&d instanceof Map)return Array.from(d.keys());if(!(typeof Set<"u"&&d instanceof Set)){if(l(d)||typeof d=="string"){var T=[];d=d.length;for(var D=0;D<d;D++)T.push(D);return T}T=[],D=0;for(const K in d)T[D++]=K;return T}}}function du(d,T){if(d.forEach&&typeof d.forEach=="function")d.forEach(T,void 0);else if(l(d)||typeof d=="string")Array.prototype.forEach.call(d,T,void 0);else for(var D=ol(d),K=hu(d),me=K.length,be=0;be<me;be++)T.call(void 0,K[be],D&&D[be],d)}var Kr=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Mo(d,T){if(d){d=d.split("&");for(var D=0;D<d.length;D++){var K=d[D].indexOf("="),me=null;if(0<=K){var be=d[D].substring(0,K);me=d[D].substring(K+1)}else be=d[D];T(be,me?decodeURIComponent(me.replace(/\+/g," ")):"")}}}function An(d){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,d instanceof An){this.h=d.h,Js(this,d.j),this.o=d.o,this.g=d.g,Uo(this,d.s),this.l=d.l;var T=d.i,D=new ws;D.i=T.i,T.g&&(D.g=new Map(T.g),D.h=T.h),al(this,D),this.m=d.m}else d&&(T=String(d).match(Kr))?(this.h=!1,Js(this,T[1]||"",!0),this.o=eo(T[2]||""),this.g=eo(T[3]||"",!0),Uo(this,T[4]),this.l=eo(T[5]||"",!0),al(this,T[6]||"",!0),this.m=eo(T[7]||"")):(this.h=!1,this.i=new ws(null,this.h))}An.prototype.toString=function(){var d=[],T=this.j;T&&d.push($i(T,fu,!0),":");var D=this.g;return(D||T=="file")&&(d.push("//"),(T=this.o)&&d.push($i(T,fu,!0),"@"),d.push(encodeURIComponent(String(D)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),D=this.s,D!=null&&d.push(":",String(D))),(D=this.l)&&(this.g&&D.charAt(0)!="/"&&d.push("/"),d.push($i(D,D.charAt(0)=="/"?Hi:Qc,!0))),(D=this.i.toString())&&d.push("?",D),(D=this.m)&&d.push("#",$i(D,Bo)),d.join("")};function Dr(d){return new An(d)}function Js(d,T,D){d.j=D?eo(T,!0):T,d.j&&(d.j=d.j.replace(/:$/,""))}function Uo(d,T){if(T){if(T=Number(T),isNaN(T)||0>T)throw Error("Bad port number "+T);d.s=T}else d.s=null}function al(d,T,D){T instanceof ws?(d.i=T,Yc(d.i,d.h)):(D||(T=$i(T,Vo)),d.i=new ws(T,d.h))}function $t(d,T,D){d.i.set(T,D)}function Zs(d){return $t(d,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),d}function eo(d,T){return d?T?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function $i(d,T,D){return typeof d=="string"?(d=encodeURI(d).replace(T,Kc),D&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function Kc(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var fu=/[#\/\?@]/g,Qc=/[#\?:]/g,Hi=/[#\?]/g,Vo=/[#\?@]/g,Bo=/#/g;function ws(d,T){this.h=this.g=null,this.i=d||null,this.j=!!T}function an(d){d.g||(d.g=new Map,d.h=0,d.i&&Mo(d.i,function(T,D){d.add(decodeURIComponent(T.replace(/\+/g," ")),D)}))}t=ws.prototype,t.add=function(d,T){an(this),this.i=null,d=bs(this,d);var D=this.g.get(d);return D||this.g.set(d,D=[]),D.push(T),this.h+=1,this};function pu(d,T){an(d),T=bs(d,T),d.g.has(T)&&(d.i=null,d.h-=d.g.get(T).length,d.g.delete(T))}function ll(d,T){return an(d),T=bs(d,T),d.g.has(T)}t.forEach=function(d,T){an(this),this.g.forEach(function(D,K){D.forEach(function(me){d.call(T,me,K,this)},this)},this)},t.na=function(){an(this);const d=Array.from(this.g.values()),T=Array.from(this.g.keys()),D=[];for(let K=0;K<T.length;K++){const me=d[K];for(let be=0;be<me.length;be++)D.push(T[K])}return D},t.V=function(d){an(this);let T=[];if(typeof d=="string")ll(this,d)&&(T=T.concat(this.g.get(bs(this,d))));else{d=Array.from(this.g.values());for(let D=0;D<d.length;D++)T=T.concat(d[D])}return T},t.set=function(d,T){return an(this),this.i=null,d=bs(this,d),ll(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[T]),this.h+=1,this},t.get=function(d,T){return d?(d=this.V(d),0<d.length?String(d[0]):T):T};function pt(d,T,D){pu(d,T),0<D.length&&(d.i=null,d.g.set(bs(d,T),E(D)),d.h+=D.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],T=Array.from(this.g.keys());for(var D=0;D<T.length;D++){var K=T[D];const be=encodeURIComponent(String(K)),Fe=this.V(K);for(K=0;K<Fe.length;K++){var me=be;Fe[K]!==""&&(me+="="+encodeURIComponent(String(Fe[K]))),d.push(me)}}return this.i=d.join("&")};function bs(d,T){return T=String(T),d.j&&(T=T.toLowerCase()),T}function Yc(d,T){T&&!d.j&&(an(d),d.i=null,d.g.forEach(function(D,K){var me=K.toLowerCase();K!=me&&(pu(this,K),pt(this,me,D))},d)),d.j=T}function Ii(d,T){const D=new Fn;if(a.Image){const K=new Image;K.onload=p(di,D,"TestLoadImage: loaded",!0,T,K),K.onerror=p(di,D,"TestLoadImage: error",!1,T,K),K.onabort=p(di,D,"TestLoadImage: abort",!1,T,K),K.ontimeout=p(di,D,"TestLoadImage: timeout",!1,T,K),a.setTimeout(function(){K.ontimeout&&K.ontimeout()},1e4),K.src=d}else T(!1)}function mu(d,T){const D=new Fn,K=new AbortController,me=setTimeout(()=>{K.abort(),di(D,"TestPingServer: timeout",!1,T)},1e4);fetch(d,{signal:K.signal}).then(be=>{clearTimeout(me),be.ok?di(D,"TestPingServer: ok",!0,T):di(D,"TestPingServer: server error",!1,T)}).catch(()=>{clearTimeout(me),di(D,"TestPingServer: error",!1,T)})}function di(d,T,D,K,me){try{me&&(me.onload=null,me.onerror=null,me.onabort=null,me.ontimeout=null),K(D)}catch{}}function qo(){this.g=new Hr}function ul(d,T,D){const K=D||"";try{du(d,function(me,be){let Fe=me;u(me)&&(Fe=At(me)),T.push(K+be+"="+encodeURIComponent(Fe))})}catch(me){throw T.push(K+"type="+encodeURIComponent("_badmap")),me}}function zo(d){this.l=d.Ub||null,this.j=d.eb||!1}b(zo,Nt),zo.prototype.g=function(){return new $o(this.l,this.j)},zo.prototype.i=function(d){return function(){return d}}({});function $o(d,T){tt.call(this),this.D=d,this.o=T,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}b($o,tt),t=$o.prototype,t.open=function(d,T){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=d,this.A=T,this.readyState=1,fi(this)},t.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const T={headers:this.u,method:this.B,credentials:this.m,cache:void 0};d&&(T.body=d),(this.D||a).fetch(new Request(this.A,T)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Wi(this)),this.readyState=0},t.Sa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,fi(this)),this.g&&(this.readyState=3,fi(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;gu(this)}else d.text().then(this.Ra.bind(this),this.ga.bind(this))};function gu(d){d.j.read().then(d.Pa.bind(d)).catch(d.ga.bind(d))}t.Pa=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var T=d.value?d.value:new Uint8Array(0);(T=this.v.decode(T,{stream:!d.done}))&&(this.response=this.responseText+=T)}d.done?Wi(this):fi(this),this.readyState==3&&gu(this)}},t.Ra=function(d){this.g&&(this.response=this.responseText=d,Wi(this))},t.Qa=function(d){this.g&&(this.response=d,Wi(this))},t.ga=function(){this.g&&Wi(this)};function Wi(d){d.readyState=4,d.l=null,d.j=null,d.v=null,fi(d)}t.setRequestHeader=function(d,T){this.u.append(d,T)},t.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],T=this.h.entries();for(var D=T.next();!D.done;)D=D.value,d.push(D[0]+": "+D[1]),D=T.next();return d.join(`\r
`)};function fi(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty($o.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function Gi(d){let T="";return z(d,function(D,K){T+=K,T+=":",T+=D,T+=`\r
`}),T}function cl(d,T,D){e:{for(K in D){var K=!1;break e}K=!0}K||(D=Gi(D),typeof d=="string"?D!=null&&encodeURIComponent(String(D)):$t(d,T,D))}function qt(d){tt.call(this),this.headers=new Map,this.o=d||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}b(qt,tt);var hl=/^https?$/i,Ho=["POST","PUT"];t=qt.prototype,t.Ha=function(d){this.J=d},t.ea=function(d,T,D,K){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);T=T?T.toUpperCase():"GET",this.D=d,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Rr.g(),this.v=this.o?ui(this.o):ui(Rr),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(T,String(d),!0),this.B=!1}catch(be){dl(this,be);return}if(d=D||"",D=new Map(this.headers),K)if(Object.getPrototypeOf(K)===Object.prototype)for(var me in K)D.set(me,K[me]);else if(typeof K.keys=="function"&&typeof K.get=="function")for(const be of K.keys())D.set(be,K.get(be));else throw Error("Unknown input type for opt_headers: "+String(K));K=Array.from(D.keys()).find(be=>be.toLowerCase()=="content-type"),me=a.FormData&&d instanceof a.FormData,!(0<=Array.prototype.indexOf.call(Ho,T,void 0))||K||me||D.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[be,Fe]of D)this.g.setRequestHeader(be,Fe);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{pi(this),this.u=!0,this.g.send(d),this.u=!1}catch(be){dl(this,be)}};function dl(d,T){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=T,d.m=5,fl(d),to(d)}function fl(d){d.A||(d.A=!0,lt(d,"complete"),lt(d,"error"))}t.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=d||7,lt(this,"complete"),lt(this,"abort"),to(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),to(this,!0)),qt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?pl(this):this.bb())},t.bb=function(){pl(this)};function pl(d){if(d.h&&typeof o<"u"&&(!d.v[1]||Wn(d)!=4||d.Z()!=2)){if(d.u&&Wn(d)==4)ot(d.Ea,0,d);else if(lt(d,"readystatechange"),Wn(d)==4){d.h=!1;try{const Fe=d.Z();e:switch(Fe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var T=!0;break e;default:T=!1}var D;if(!(D=T)){var K;if(K=Fe===0){var me=String(d.D).match(Kr)[1]||null;!me&&a.self&&a.self.location&&(me=a.self.location.protocol.slice(0,-1)),K=!hl.test(me?me.toLowerCase():"")}D=K}if(D)lt(d,"complete"),lt(d,"success");else{d.m=6;try{var be=2<Wn(d)?d.g.statusText:""}catch{be=""}d.l=be+" ["+d.Z()+"]",fl(d)}}finally{to(d)}}}}function to(d,T){if(d.g){pi(d);const D=d.g,K=d.v[0]?()=>{}:null;d.g=null,d.v=null,T||lt(d,"ready");try{D.onreadystatechange=K}catch{}}}function pi(d){d.I&&(a.clearTimeout(d.I),d.I=null)}t.isActive=function(){return!!this.g};function Wn(d){return d.g?d.g.readyState:0}t.Z=function(){try{return 2<Wn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(d){if(this.g){var T=this.g.responseText;return d&&T.indexOf(d)==0&&(T=T.substring(d.length)),Bt(T)}};function vu(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.H){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function xs(d){const T={};d=(d.g&&2<=Wn(d)&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let K=0;K<d.length;K++){if(x(d[K]))continue;var D=A(d[K]);const me=D[0];if(D=D[1],typeof D!="string")continue;D=D.trim();const be=T[me]||[];T[me]=be,be.push(D)}L(T,function(K){return K.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function rr(d,T,D){return D&&D.internalChannelParams&&D.internalChannelParams[d]||T}function Wo(d){this.Aa=0,this.i=[],this.j=new Fn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=rr("failFast",!1,d),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=rr("baseRetryDelayMs",5e3,d),this.cb=rr("retryDelaySeedMs",1e4,d),this.Wa=rr("forwardChannelMaxRetries",2,d),this.wa=rr("forwardChannelRequestTimeoutMs",2e4,d),this.pa=d&&d.xmlHttpFactory||void 0,this.Xa=d&&d.Tb||void 0,this.Ca=d&&d.useFetchStreams||!1,this.L=void 0,this.J=d&&d.supportsCrossDomainXhr||!1,this.K="",this.h=new nl(d&&d.concurrentRequestLimit),this.Da=new qo,this.P=d&&d.fastHandshake||!1,this.O=d&&d.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=d&&d.Rb||!1,d&&d.xa&&this.j.xa(),d&&d.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&d&&d.detectBufferingProxy||!1,this.ja=void 0,d&&d.longPollingTimeout&&0<d.longPollingTimeout&&(this.ja=d.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Wo.prototype,t.la=8,t.G=1,t.connect=function(d,T,D,K){Ze(0),this.W=d,this.H=T||{},D&&K!==void 0&&(this.H.OSID=D,this.H.OAID=K),this.F=this.X,this.I=_(this,null,this.W),Ko(this)};function Ki(d){if(no(d),d.G==3){var T=d.U++,D=Dr(d.I);if($t(D,"SID",d.K),$t(D,"RID",T),$t(D,"TYPE","terminate"),Ss(d,D),T=new kn(d,d.j,T),T.L=2,T.v=Zs(Dr(D)),D=!1,a.navigator&&a.navigator.sendBeacon)try{D=a.navigator.sendBeacon(T.v.toString(),"")}catch{}!D&&a.Image&&(new Image().src=T.v,D=!0),D||(T.g=B(T.j,null),T.g.ea(T.v)),T.F=Date.now(),Fo(T)}Zo(d)}function Go(d){d.g&&(Xo(d),d.g.cancel(),d.g=null)}function no(d){Go(d),d.u&&(a.clearTimeout(d.u),d.u=null),Qi(d),d.h.cancel(),d.s&&(typeof d.s=="number"&&a.clearTimeout(d.s),d.s=null)}function Ko(d){if(!cu(d.h)&&!d.s){d.s=!0;var T=d.Ga;U||re(),W||(U(),W=!0),ee.add(T,d),d.B=0}}function ml(d,T){return Xs(d.h)>=d.h.j-(d.s?1:0)?!1:d.s?(d.i=T.D.concat(d.i),!0):d.G==1||d.G==2||d.B>=(d.Va?0:d.Wa)?!1:(d.s=mr(m(d.Ga,d,T),Jo(d,d.B)),d.B++,!0)}t.Ga=function(d){if(this.s)if(this.s=null,this.G==1){if(!d){this.U=Math.floor(1e5*Math.random()),d=this.U++;const me=new kn(this,this.j,d);let be=this.o;if(this.S&&(be?(be=y(be),R(be,this.S)):be=this.S),this.m!==null||this.O||(me.H=be,be=null),this.P)e:{for(var T=0,D=0;D<this.i.length;D++){t:{var K=this.i[D];if("__data__"in K.map&&(K=K.map.__data__,typeof K=="string")){K=K.length;break t}K=void 0}if(K===void 0)break;if(T+=K,4096<T){T=D;break e}if(T===4096||D===this.i.length-1){T=D+1;break e}}T=1e3}else T=1e3;T=ro(this,me,T),D=Dr(this.I),$t(D,"RID",d),$t(D,"CVER",22),this.D&&$t(D,"X-HTTP-Session-Id",this.D),Ss(this,D),be&&(this.O?T="headers="+encodeURIComponent(String(Gi(be)))+"&"+T:this.m&&cl(D,this.m,be)),on(this.h,me),this.Ua&&$t(D,"TYPE","init"),this.P?($t(D,"$req",T),$t(D,"SID","null"),me.T=!0,vs(me,D,null)):vs(me,D,T),this.G=2}}else this.G==3&&(d?Qo(this,d):this.i.length==0||cu(this.h)||Qo(this))};function Qo(d,T){var D;T?D=T.l:D=d.U++;const K=Dr(d.I);$t(K,"SID",d.K),$t(K,"RID",D),$t(K,"AID",d.T),Ss(d,K),d.m&&d.o&&cl(K,d.m,d.o),D=new kn(d,d.j,D,d.B+1),d.m===null&&(D.H=d.o),T&&(d.i=T.D.concat(d.i)),T=ro(d,D,1e3),D.I=Math.round(.5*d.wa)+Math.round(.5*d.wa*Math.random()),on(d.h,D),vs(D,K,T)}function Ss(d,T){d.H&&z(d.H,function(D,K){$t(T,K,D)}),d.l&&du({},function(D,K){$t(T,K,D)})}function ro(d,T,D){D=Math.min(d.i.length,D);var K=d.l?m(d.l.Na,d.l,d):null;e:{var me=d.i;let be=-1;for(;;){const Fe=["count="+D];be==-1?0<D?(be=me[0].g,Fe.push("ofs="+be)):be=0:Fe.push("ofs="+be);let yt=!0;for(let Tt=0;Tt<D;Tt++){let _t=me[Tt].g;const zt=me[Tt].map;if(_t-=be,0>_t)be=Math.max(0,me[Tt].g-100),yt=!1;else try{ul(zt,Fe,"req"+_t+"_")}catch{K&&K(zt)}}if(yt){K=Fe.join("&");break e}}}return d=d.i.splice(0,D),T.D=d,K}function Yo(d){if(!d.g&&!d.u){d.Y=1;var T=d.Fa;U||re(),W||(U(),W=!0),ee.add(T,d),d.v=0}}function io(d){return d.g||d.u||3<=d.v?!1:(d.Y++,d.u=mr(m(d.Fa,d),Jo(d,d.v)),d.v++,!0)}t.Fa=function(){if(this.u=null,yu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var d=2*this.R;this.j.info("BP detection timer enabled: "+d),this.A=mr(m(this.ab,this),d)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ze(10),Go(this),yu(this))};function Xo(d){d.A!=null&&(a.clearTimeout(d.A),d.A=null)}function yu(d){d.g=new kn(d,d.j,"rpc",d.Y),d.m===null&&(d.g.H=d.o),d.g.O=0;var T=Dr(d.qa);$t(T,"RID","rpc"),$t(T,"SID",d.K),$t(T,"AID",d.T),$t(T,"CI",d.F?"0":"1"),!d.F&&d.ja&&$t(T,"TO",d.ja),$t(T,"TYPE","xmlhttp"),Ss(d,T),d.m&&d.o&&cl(T,d.m,d.o),d.L&&(d.g.I=d.L);var D=d.g;d=d.ia,D.L=1,D.v=Zs(Dr(T)),D.m=null,D.P=!0,Ks(D,d)}t.Za=function(){this.C!=null&&(this.C=null,Go(this),io(this),Ze(19))};function Qi(d){d.C!=null&&(a.clearTimeout(d.C),d.C=null)}function As(d,T){var D=null;if(d.g==T){Qi(d),Xo(d),d.g=null;var K=2}else if(rl(d.h,T))D=T.D,il(d.h,T),K=1;else return;if(d.G!=0){if(T.o)if(K==1){D=T.m?T.m.length:0,T=Date.now()-T.F;var me=d.B;K=Lr(),lt(K,new Wr(K,D)),Ko(d)}else Yo(d);else if(me=T.s,me==3||me==0&&0<T.X||!(K==1&&ml(d,T)||K==2&&io(d)))switch(D&&0<D.length&&(T=d.h,T.i=T.i.concat(D)),me){case 1:vr(d,5);break;case 4:vr(d,10);break;case 3:vr(d,6);break;default:vr(d,2)}}}function Jo(d,T){let D=d.Ta+Math.floor(Math.random()*d.cb);return d.isActive()||(D*=2),D*T}function vr(d,T){if(d.j.info("Error code "+T),T==2){var D=m(d.fb,d),K=d.Xa;const me=!K;K=new An(K||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Js(K,"https"),Zs(K),me?Ii(K.toString(),D):mu(K.toString(),D)}else Ze(2);d.G=0,d.l&&d.l.sa(T),Zo(d),no(d)}t.fb=function(d){d?(this.j.info("Successfully pinged google.com"),Ze(2)):(this.j.info("Failed to ping google.com"),Ze(1))};function Zo(d){if(d.G=0,d.ka=[],d.l){const T=sl(d.h);(T.length!=0||d.i.length!=0)&&(k(d.ka,T),k(d.ka,d.i),d.h.i.length=0,E(d.i),d.i.length=0),d.l.ra()}}function _(d,T,D){var K=D instanceof An?Dr(D):new An(D);if(K.g!="")T&&(K.g=T+"."+K.g),Uo(K,K.s);else{var me=a.location;K=me.protocol,T=T?T+"."+me.hostname:me.hostname,me=+me.port;var be=new An(null);K&&Js(be,K),T&&(be.g=T),me&&Uo(be,me),D&&(be.l=D),K=be}return D=d.D,T=d.ya,D&&T&&$t(K,D,T),$t(K,"VER",d.la),Ss(d,K),K}function B(d,T,D){if(T&&!d.J)throw Error("Can't create secondary domain capable XhrIo object.");return T=d.Ca&&!d.pa?new qt(new zo({eb:D})):new qt(d.pa),T.Ha(d.J),T}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function se(){}t=se.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function le(){}le.prototype.g=function(d,T){return new ge(d,T)};function ge(d,T){tt.call(this),this.g=new Wo(T),this.l=d,this.h=T&&T.messageUrlParams||null,d=T&&T.messageHeaders||null,T&&T.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=T&&T.initMessageHeaders||null,T&&T.messageContentType&&(d?d["X-WebChannel-Content-Type"]=T.messageContentType:d={"X-WebChannel-Content-Type":T.messageContentType}),T&&T.va&&(d?d["X-WebChannel-Client-Profile"]=T.va:d={"X-WebChannel-Client-Profile":T.va}),this.g.S=d,(d=T&&T.Sb)&&!x(d)&&(this.g.m=d),this.v=T&&T.supportsCrossDomainXhr||!1,this.u=T&&T.sendRawJson||!1,(T=T&&T.httpSessionIdParam)&&!x(T)&&(this.g.D=T,d=this.h,d!==null&&T in d&&(d=this.h,T in d&&delete d[T])),this.j=new Ge(this)}b(ge,tt),ge.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},ge.prototype.close=function(){Ki(this.g)},ge.prototype.o=function(d){var T=this.g;if(typeof d=="string"){var D={};D.__data__=d,d=D}else this.u&&(D={},D.__data__=At(d),d=D);T.i.push(new Gc(T.Ya++,d)),T.G==3&&Ko(T)},ge.prototype.N=function(){this.g.l=null,delete this.j,Ki(this.g),delete this.g,ge.aa.N.call(this)};function Ne(d){xn.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var T=d.__sm__;if(T){e:{for(const D in T){d=D;break e}d=void 0}(this.i=d)&&(d=this.i,T=T!==null&&d in T?T[d]:void 0),this.data=T}else this.data=d}b(Ne,xn);function Oe(){Lt.call(this),this.status=1}b(Oe,Lt);function Ge(d){this.g=d}b(Ge,se),Ge.prototype.ua=function(){lt(this.g,"a")},Ge.prototype.ta=function(d){lt(this.g,new Ne(d))},Ge.prototype.sa=function(d){lt(this.g,new Oe)},Ge.prototype.ra=function(){lt(this.g,"b")},le.prototype.createWebChannel=le.prototype.g,ge.prototype.send=ge.prototype.o,ge.prototype.open=ge.prototype.m,ge.prototype.close=ge.prototype.close,fx=function(){return new le},dx=function(){return Lr()},hx=it,T0={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},gr.NO_ERROR=0,gr.TIMEOUT=8,gr.HTTP_ERROR=6,op=gr,Gr.COMPLETE="complete",cx=Gr,Ut.EventType=Hn,Hn.OPEN="a",Hn.CLOSE="b",Hn.ERROR="c",Hn.MESSAGE="d",tt.prototype.listen=tt.prototype.K,kh=Ut,qt.prototype.listenOnce=qt.prototype.L,qt.prototype.getLastError=qt.prototype.Ka,qt.prototype.getLastErrorCode=qt.prototype.Ba,qt.prototype.getStatus=qt.prototype.Z,qt.prototype.getResponseJson=qt.prototype.Oa,qt.prototype.getResponseText=qt.prototype.oa,qt.prototype.send=qt.prototype.ea,qt.prototype.setWithCredentials=qt.prototype.Ha,ux=qt}).apply(typeof jf<"u"?jf:typeof self<"u"?self:typeof window<"u"?window:{});const P_="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Er.UNAUTHENTICATED=new Er(null),Er.GOOGLE_CREDENTIALS=new Er("google-credentials-uid"),Er.FIRST_PARTY=new Er("first-party-uid"),Er.MOCK_USER=new Er("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qc="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hl=new ev("@firebase/firestore");function _h(){return Hl.logLevel}function rt(t,...e){if(Hl.logLevel<=Rt.DEBUG){const n=e.map(dv);Hl.debug(`Firestore (${qc}): ${t}`,...n)}}function Co(t,...e){if(Hl.logLevel<=Rt.ERROR){const n=e.map(dv);Hl.error(`Firestore (${qc}): ${t}`,...n)}}function Nc(t,...e){if(Hl.logLevel<=Rt.WARN){const n=e.map(dv);Hl.warn(`Firestore (${qc}): ${t}`,...n)}}function dv(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gt(t="Unexpected state"){const e=`FIRESTORE (${qc}) INTERNAL ASSERTION FAILED: `+t;throw Co(e),new Error(e)}function Qt(t,e){t||gt()}function xt(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Le={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Je extends Ws{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class So{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class px{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class sL{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Er.UNAUTHENTICATED))}shutdown(){}}class oL{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class aL{constructor(e){this.t=e,this.currentUser=Er.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Qt(this.o===void 0);let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new So;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new So,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{rt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(rt("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new So)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(rt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Qt(typeof r.accessToken=="string"),new px(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Qt(e===null||typeof e=="string"),new Er(e)}}class lL{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Er.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class uL{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new lL(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Er.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class cL{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class hL{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Qt(this.o===void 0);const r=s=>{s.error!=null&&rt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,rt("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{rt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):rt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Qt(typeof n.token=="string"),this.R=n.token,new cL(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dL(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mx{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=dL(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function Mt(t,e){return t<e?-1:t>e?1:0}function Ic(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yn{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Je(Le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Je(Le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new Je(Le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Je(Le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Yn.fromMillis(Date.now())}static fromDate(e){return Yn.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Yn(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Mt(this.nanoseconds,e.nanoseconds):Mt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new bt(e)}static min(){return new bt(new Yn(0,0))}static max(){return new bt(new Yn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yd{constructor(e,n,r){n===void 0?n=0:n>e.length&&gt(),r===void 0?r=e.length-n:r>e.length-n&&gt(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return yd.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof yd?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class un extends yd{construct(e,n,r){return new un(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Je(Le.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new un(n)}static emptyPath(){return new un([])}}const fL=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class cr extends yd{construct(e,n,r){return new cr(e,n,r)}static isValidIdentifier(e){return fL.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),cr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new cr(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new Je(Le.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new Je(Le.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new Je(Le.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new Je(Le.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new cr(n)}static emptyPath(){return new cr([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ut{constructor(e){this.path=e}static fromPath(e){return new ut(un.fromString(e))}static fromName(e){return new ut(un.fromString(e).popFirst(5))}static empty(){return new ut(un.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&un.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return un.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ut(new un(e.slice()))}}function pL(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=bt.fromTimestamp(r===1e9?new Yn(n+1,0):new Yn(n,r));return new Ha(i,ut.empty(),e)}function mL(t){return new Ha(t.readTime,t.key,-1)}class Ha{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Ha(bt.min(),ut.empty(),-1)}static max(){return new Ha(bt.max(),ut.empty(),-1)}}function gL(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ut.comparator(t.documentKey,e.documentKey),n!==0?n:Mt(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vL="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class yL{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Od(t){if(t.code!==Le.FAILED_PRECONDITION||t.message!==vL)throw t;rt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ve{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&gt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Ve((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof Ve?n:Ve.resolve(n)}catch(n){return Ve.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):Ve.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):Ve.reject(n)}static resolve(e){return new Ve((n,r)=>{n(e)})}static reject(e){return new Ve((n,r)=>{r(e)})}static waitFor(e){return new Ve((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(e){let n=Ve.resolve(!1);for(const r of e)n=n.next(i=>i?Ve.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new Ve((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const u=l;n(e[u]).next(h=>{o[u]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,n){return new Ve((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function _L(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Fd(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fv{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}fv.oe=-1;function Fm(t){return t==null}function Yp(t){return t===0&&1/t==-1/0}function wL(t){return typeof t=="number"&&Number.isInteger(t)&&!Yp(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C_(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function eu(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function gx(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(e,n){this.comparator=e,this.root=n||ur.EMPTY}insert(e,n){return new wn(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ur.BLACK,null,null))}remove(e){return new wn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ur.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Df(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Df(this.root,e,this.comparator,!1)}getReverseIterator(){return new Df(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Df(this.root,e,this.comparator,!0)}}class Df{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ur{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??ur.RED,this.left=i??ur.EMPTY,this.right=s??ur.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new ur(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ur.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return ur.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ur.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ur.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw gt();const e=this.left.check();if(e!==this.right.check())throw gt();return e+(this.isRed()?0:1)}}ur.EMPTY=null,ur.RED=!0,ur.BLACK=!1;ur.EMPTY=new class{constructor(){this.size=0}get key(){throw gt()}get value(){throw gt()}get color(){throw gt()}get left(){throw gt()}get right(){throw gt()}copy(e,n,r,i,s){return this}insert(e,n,r){return new ur(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dr{constructor(e){this.comparator=e,this.data=new wn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new L_(this.data.getIterator())}getIteratorFrom(e){return new L_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof dr)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new dr(this.comparator);return n.data=e,n}}class L_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wi{constructor(e){this.fields=e,e.sort(cr.comparator)}static empty(){return new wi([])}unionWith(e){let n=new dr(cr.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new wi(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ic(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vx extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new vx("Invalid base64 string: "+s):s}}(e);return new pr(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new pr(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Mt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}pr.EMPTY_BYTE_STRING=new pr("");const bL=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Wa(t){if(Qt(!!t),typeof t=="string"){let e=0;const n=bL.exec(t);if(Qt(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ln(t.seconds),nanos:Ln(t.nanos)}}function Ln(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Wl(t){return typeof t=="string"?pr.fromBase64String(t):pr.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pv(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function mv(t){const e=t.mapValue.fields.__previous_value__;return pv(e)?mv(e):e}function _d(t){const e=Wa(t.mapValue.fields.__local_write_time__.timestampValue);return new Yn(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xL{constructor(e,n,r,i,s,o,a,l,u){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u}}class wd{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new wd("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof wd&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Of={mapValue:{}};function Gl(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?pv(t)?4:AL(t)?9007199254740991:SL(t)?10:11:gt()}function $s(t,e){if(t===e)return!0;const n=Gl(t);if(n!==Gl(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return _d(t).isEqual(_d(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Wa(i.timestampValue),a=Wa(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Wl(i.bytesValue).isEqual(Wl(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Ln(i.geoPointValue.latitude)===Ln(s.geoPointValue.latitude)&&Ln(i.geoPointValue.longitude)===Ln(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Ln(i.integerValue)===Ln(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Ln(i.doubleValue),a=Ln(s.doubleValue);return o===a?Yp(o)===Yp(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Ic(t.arrayValue.values||[],e.arrayValue.values||[],$s);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(C_(o)!==C_(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!$s(o[l],a[l])))return!1;return!0}(t,e);default:return gt()}}function bd(t,e){return(t.values||[]).find(n=>$s(n,e))!==void 0}function Tc(t,e){if(t===e)return 0;const n=Gl(t),r=Gl(e);if(n!==r)return Mt(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Mt(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=Ln(s.integerValue||s.doubleValue),l=Ln(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return R_(t.timestampValue,e.timestampValue);case 4:return R_(_d(t),_d(e));case 5:return Mt(t.stringValue,e.stringValue);case 6:return function(s,o){const a=Wl(s),l=Wl(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let u=0;u<a.length&&u<l.length;u++){const h=Mt(a[u],l[u]);if(h!==0)return h}return Mt(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=Mt(Ln(s.latitude),Ln(o.latitude));return a!==0?a:Mt(Ln(s.longitude),Ln(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return j_(t.arrayValue,e.arrayValue);case 10:return function(s,o){var a,l,u,h;const f=s.fields||{},m=o.fields||{},p=(a=f.value)===null||a===void 0?void 0:a.arrayValue,b=(l=m.value)===null||l===void 0?void 0:l.arrayValue,E=Mt(((u=p==null?void 0:p.values)===null||u===void 0?void 0:u.length)||0,((h=b==null?void 0:b.values)===null||h===void 0?void 0:h.length)||0);return E!==0?E:j_(p,b)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===Of.mapValue&&o===Of.mapValue)return 0;if(s===Of.mapValue)return 1;if(o===Of.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),u=o.fields||{},h=Object.keys(u);l.sort(),h.sort();for(let f=0;f<l.length&&f<h.length;++f){const m=Mt(l[f],h[f]);if(m!==0)return m;const p=Tc(a[l[f]],u[h[f]]);if(p!==0)return p}return Mt(l.length,h.length)}(t.mapValue,e.mapValue);default:throw gt()}}function R_(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Mt(t,e);const n=Wa(t),r=Wa(e),i=Mt(n.seconds,r.seconds);return i!==0?i:Mt(n.nanos,r.nanos)}function j_(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=Tc(n[i],r[i]);if(s)return s}return Mt(n.length,r.length)}function kc(t){return k0(t)}function k0(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Wa(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Wl(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ut.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=k0(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${k0(n.fields[o])}`;return i+"}"}(t.mapValue):gt()}function D_(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function P0(t){return!!t&&"integerValue"in t}function gv(t){return!!t&&"arrayValue"in t}function O_(t){return!!t&&"nullValue"in t}function F_(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function ap(t){return!!t&&"mapValue"in t}function SL(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function $h(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return eu(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=$h(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=$h(t.arrayValue.values[n]);return e}return Object.assign({},t)}function AL(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ri{constructor(e){this.value=e}static empty(){return new ri({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!ap(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=$h(n)}setAll(e){let n=cr.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=$h(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());ap(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return $s(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];ap(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){eu(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new ri($h(this.value))}}function yx(t){const e=[];return eu(t.fields,(n,r)=>{const i=new cr([n]);if(ap(r)){const s=yx(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new wi(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ir{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Ir(e,0,bt.min(),bt.min(),bt.min(),ri.empty(),0)}static newFoundDocument(e,n,r,i){return new Ir(e,1,n,bt.min(),r,i,0)}static newNoDocument(e,n){return new Ir(e,2,n,bt.min(),bt.min(),ri.empty(),0)}static newUnknownDocument(e,n){return new Ir(e,3,n,bt.min(),bt.min(),ri.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(bt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ri.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ri.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=bt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ir&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ir(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xp{constructor(e,n){this.position=e,this.inclusive=n}}function M_(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=ut.comparator(ut.fromName(o.referenceValue),n.key):r=Tc(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function U_(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!$s(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xd{constructor(e,n="asc"){this.field=e,this.dir=n}}function EL(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _x{}class zn extends _x{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new IL(e,n,r):n==="array-contains"?new PL(e,r):n==="in"?new CL(e,r):n==="not-in"?new LL(e,r):n==="array-contains-any"?new RL(e,r):new zn(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new TL(e,r):new kL(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Tc(n,this.value)):n!==null&&Gl(this.value)===Gl(n)&&this.matchesComparison(Tc(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return gt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class hs extends _x{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new hs(e,n)}matches(e){return wx(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function wx(t){return t.op==="and"}function bx(t){return NL(t)&&wx(t)}function NL(t){for(const e of t.filters)if(e instanceof hs)return!1;return!0}function C0(t){if(t instanceof zn)return t.field.canonicalString()+t.op.toString()+kc(t.value);if(bx(t))return t.filters.map(e=>C0(e)).join(",");{const e=t.filters.map(n=>C0(n)).join(",");return`${t.op}(${e})`}}function xx(t,e){return t instanceof zn?function(r,i){return i instanceof zn&&r.op===i.op&&r.field.isEqual(i.field)&&$s(r.value,i.value)}(t,e):t instanceof hs?function(r,i){return i instanceof hs&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&xx(o,i.filters[a]),!0):!1}(t,e):void gt()}function Sx(t){return t instanceof zn?function(n){return`${n.field.canonicalString()} ${n.op} ${kc(n.value)}`}(t):t instanceof hs?function(n){return n.op.toString()+" {"+n.getFilters().map(Sx).join(" ,")+"}"}(t):"Filter"}class IL extends zn{constructor(e,n,r){super(e,n,r),this.key=ut.fromName(r.referenceValue)}matches(e){const n=ut.comparator(e.key,this.key);return this.matchesComparison(n)}}class TL extends zn{constructor(e,n){super(e,"in",n),this.keys=Ax("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class kL extends zn{constructor(e,n){super(e,"not-in",n),this.keys=Ax("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Ax(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>ut.fromName(r.referenceValue))}class PL extends zn{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return gv(n)&&bd(n.arrayValue,this.value)}}class CL extends zn{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&bd(this.value.arrayValue,n)}}class LL extends zn{constructor(e,n){super(e,"not-in",n)}matches(e){if(bd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!bd(this.value.arrayValue,n)}}class RL extends zn{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!gv(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>bd(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jL{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function V_(t,e=null,n=[],r=[],i=null,s=null,o=null){return new jL(t,e,n,r,i,s,o)}function vv(t){const e=xt(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>C0(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Fm(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>kc(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>kc(r)).join(",")),e.ue=n}return e.ue}function yv(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!EL(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!xx(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!U_(t.startAt,e.startAt)&&U_(t.endAt,e.endAt)}function L0(t){return ut.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zc{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function DL(t,e,n,r,i,s,o,a){return new zc(t,e,n,r,i,s,o,a)}function _v(t){return new zc(t)}function B_(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Ex(t){return t.collectionGroup!==null}function Hh(t){const e=xt(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new dr(cr.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new xd(s,r))}),n.has(cr.keyField().canonicalString())||e.ce.push(new xd(cr.keyField(),r))}return e.ce}function Bs(t){const e=xt(t);return e.le||(e.le=OL(e,Hh(t))),e.le}function OL(t,e){if(t.limitType==="F")return V_(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new xd(i.field,s)});const n=t.endAt?new Xp(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Xp(t.startAt.position,t.startAt.inclusive):null;return V_(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function R0(t,e){const n=t.filters.concat([e]);return new zc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function j0(t,e,n){return new zc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Mm(t,e){return yv(Bs(t),Bs(e))&&t.limitType===e.limitType}function Nx(t){return`${vv(Bs(t))}|lt:${t.limitType}`}function Fu(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>Sx(i)).join(", ")}]`),Fm(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>kc(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>kc(i)).join(",")),`Target(${r})`}(Bs(t))}; limitType=${t.limitType})`}function Um(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):ut.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of Hh(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const u=M_(o,a,l);return o.inclusive?u<=0:u<0}(r.startAt,Hh(r),i)||r.endAt&&!function(o,a,l){const u=M_(o,a,l);return o.inclusive?u>=0:u>0}(r.endAt,Hh(r),i))}(t,e)}function FL(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Ix(t){return(e,n)=>{let r=!1;for(const i of Hh(t)){const s=ML(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function ML(t,e,n){const r=t.field.isKeyField()?ut.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),u=a.data.field(s);return l!==null&&u!==null?Tc(l,u):gt()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return gt()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $c{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){eu(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return gx(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UL=new wn(ut.comparator);function Lo(){return UL}const Tx=new wn(ut.comparator);function Ph(...t){let e=Tx;for(const n of t)e=e.insert(n.key,n);return e}function kx(t){let e=Tx;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Cl(){return Wh()}function Px(){return Wh()}function Wh(){return new $c(t=>t.toString(),(t,e)=>t.isEqual(e))}const VL=new wn(ut.comparator),BL=new dr(ut.comparator);function Pt(...t){let e=BL;for(const n of t)e=e.add(n);return e}const qL=new dr(Mt);function zL(){return qL}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wv(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Yp(e)?"-0":e}}function Cx(t){return{integerValue:""+t}}function $L(t,e){return wL(e)?Cx(e):wv(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vm{constructor(){this._=void 0}}function HL(t,e,n){return t instanceof Jp?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&pv(s)&&(s=mv(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof Sd?Rx(t,e):t instanceof Ad?jx(t,e):function(i,s){const o=Lx(i,s),a=q_(o)+q_(i.Pe);return P0(o)&&P0(i.Pe)?Cx(a):wv(i.serializer,a)}(t,e)}function WL(t,e,n){return t instanceof Sd?Rx(t,e):t instanceof Ad?jx(t,e):n}function Lx(t,e){return t instanceof Zp?function(r){return P0(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Jp extends Vm{}class Sd extends Vm{constructor(e){super(),this.elements=e}}function Rx(t,e){const n=Dx(e);for(const r of t.elements)n.some(i=>$s(i,r))||n.push(r);return{arrayValue:{values:n}}}class Ad extends Vm{constructor(e){super(),this.elements=e}}function jx(t,e){let n=Dx(e);for(const r of t.elements)n=n.filter(i=>!$s(i,r));return{arrayValue:{values:n}}}class Zp extends Vm{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function q_(t){return Ln(t.integerValue||t.doubleValue)}function Dx(t){return gv(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function GL(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Sd&&i instanceof Sd||r instanceof Ad&&i instanceof Ad?Ic(r.elements,i.elements,$s):r instanceof Zp&&i instanceof Zp?$s(r.Pe,i.Pe):r instanceof Jp&&i instanceof Jp}(t.transform,e.transform)}class KL{constructor(e,n){this.version=e,this.transformResults=n}}class Ui{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Ui}static exists(e){return new Ui(void 0,e)}static updateTime(e){return new Ui(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function lp(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Bm{}function Ox(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new bv(t.key,Ui.none()):new Md(t.key,t.data,Ui.none());{const n=t.data,r=ri.empty();let i=new dr(cr.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new tl(t.key,r,new wi(i.toArray()),Ui.none())}}function QL(t,e,n){t instanceof Md?function(i,s,o){const a=i.value.clone(),l=$_(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof tl?function(i,s,o){if(!lp(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=$_(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(Fx(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Gh(t,e,n,r){return t instanceof Md?function(s,o,a,l){if(!lp(s.precondition,o))return a;const u=s.value.clone(),h=H_(s.fieldTransforms,l,o);return u.setAll(h),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof tl?function(s,o,a,l){if(!lp(s.precondition,o))return a;const u=H_(s.fieldTransforms,l,o),h=o.data;return h.setAll(Fx(s)),h.setAll(u),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(s,o,a){return lp(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function YL(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=Lx(r.transform,i||null);s!=null&&(n===null&&(n=ri.empty()),n.set(r.field,s))}return n||null}function z_(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Ic(r,i,(s,o)=>GL(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Md extends Bm{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class tl extends Bm{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function Fx(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function $_(t,e,n){const r=new Map;Qt(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,WL(o,a,n[i]))}return r}function H_(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,HL(s,o,e))}return r}class bv extends Bm{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class XL extends Bm{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JL{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&QL(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Gh(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Gh(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=Px();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=Ox(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(bt.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Pt())}isEqual(e){return this.batchId===e.batchId&&Ic(this.mutations,e.mutations,(n,r)=>z_(n,r))&&Ic(this.baseMutations,e.baseMutations,(n,r)=>z_(n,r))}}class xv{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Qt(e.mutations.length===r.length);let i=function(){return VL}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new xv(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZL{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eR{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Bn,Dt;function tR(t){switch(t){default:return gt();case Le.CANCELLED:case Le.UNKNOWN:case Le.DEADLINE_EXCEEDED:case Le.RESOURCE_EXHAUSTED:case Le.INTERNAL:case Le.UNAVAILABLE:case Le.UNAUTHENTICATED:return!1;case Le.INVALID_ARGUMENT:case Le.NOT_FOUND:case Le.ALREADY_EXISTS:case Le.PERMISSION_DENIED:case Le.FAILED_PRECONDITION:case Le.ABORTED:case Le.OUT_OF_RANGE:case Le.UNIMPLEMENTED:case Le.DATA_LOSS:return!0}}function Mx(t){if(t===void 0)return Co("GRPC error has no .code"),Le.UNKNOWN;switch(t){case Bn.OK:return Le.OK;case Bn.CANCELLED:return Le.CANCELLED;case Bn.UNKNOWN:return Le.UNKNOWN;case Bn.DEADLINE_EXCEEDED:return Le.DEADLINE_EXCEEDED;case Bn.RESOURCE_EXHAUSTED:return Le.RESOURCE_EXHAUSTED;case Bn.INTERNAL:return Le.INTERNAL;case Bn.UNAVAILABLE:return Le.UNAVAILABLE;case Bn.UNAUTHENTICATED:return Le.UNAUTHENTICATED;case Bn.INVALID_ARGUMENT:return Le.INVALID_ARGUMENT;case Bn.NOT_FOUND:return Le.NOT_FOUND;case Bn.ALREADY_EXISTS:return Le.ALREADY_EXISTS;case Bn.PERMISSION_DENIED:return Le.PERMISSION_DENIED;case Bn.FAILED_PRECONDITION:return Le.FAILED_PRECONDITION;case Bn.ABORTED:return Le.ABORTED;case Bn.OUT_OF_RANGE:return Le.OUT_OF_RANGE;case Bn.UNIMPLEMENTED:return Le.UNIMPLEMENTED;case Bn.DATA_LOSS:return Le.DATA_LOSS;default:return gt()}}(Dt=Bn||(Bn={}))[Dt.OK=0]="OK",Dt[Dt.CANCELLED=1]="CANCELLED",Dt[Dt.UNKNOWN=2]="UNKNOWN",Dt[Dt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Dt[Dt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Dt[Dt.NOT_FOUND=5]="NOT_FOUND",Dt[Dt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Dt[Dt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Dt[Dt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Dt[Dt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Dt[Dt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Dt[Dt.ABORTED=10]="ABORTED",Dt[Dt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Dt[Dt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Dt[Dt.INTERNAL=13]="INTERNAL",Dt[Dt.UNAVAILABLE=14]="UNAVAILABLE",Dt[Dt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nR(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rR=new Dl([4294967295,4294967295],0);function W_(t){const e=nR().encode(t),n=new lx;return n.update(e),new Uint8Array(n.digest())}function G_(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Dl([n,r],0),new Dl([i,s],0)]}class Sv{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Ch(`Invalid padding: ${n}`);if(r<0)throw new Ch(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ch(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Ch(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Dl.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(Dl.fromNumber(r)));return i.compare(rR)===1&&(i=new Dl([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=W_(e),[r,i]=G_(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new Sv(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=W_(e),[r,i]=G_(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Ch extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qm{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Ud.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new qm(bt.min(),i,new wn(Mt),Lo(),Pt())}}class Ud{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Ud(r,n,Pt(),Pt(),Pt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class up{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class Ux{constructor(e,n){this.targetId=e,this.me=n}}class Vx{constructor(e,n,r=pr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class K_{constructor(){this.fe=0,this.ge=Y_(),this.pe=pr.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Pt(),n=Pt(),r=Pt();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:gt()}}),new Ud(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=Y_()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Qt(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class iR{constructor(e){this.Le=e,this.Be=new Map,this.ke=Lo(),this.qe=Q_(),this.Qe=new wn(Mt)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:gt()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const s=i.target;if(L0(s))if(r===0){const o=new ut(s.path);this.Ue(n,o,Ir.newNoDocument(o,bt.min()))}else Qt(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(e),l=a?this.Xe(a,e,o):1;if(l!==0){this.je(n);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,u)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=Wl(r).toUint8Array()}catch(l){if(l instanceof vx)return Nc("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new Sv(o,i,s)}catch(l){return Nc(l instanceof Ch?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&L0(a.target)){const l=new ut(a.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,Ir.newNoDocument(l,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let r=Pt();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const u=this.Je(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new qm(e,n,this.Qe,this.ke,r);return this.ke=Lo(),this.qe=Q_(),this.Qe=new wn(Mt),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new K_,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new dr(Mt),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||rt("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new K_),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function Q_(){return new wn(ut.comparator)}function Y_(){return new wn(ut.comparator)}const sR={asc:"ASCENDING",desc:"DESCENDING"},oR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},aR={and:"AND",or:"OR"};class lR{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function D0(t,e){return t.useProto3Json||Fm(e)?e:{value:e}}function em(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Bx(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function uR(t,e){return em(t,e.toTimestamp())}function qs(t){return Qt(!!t),bt.fromTimestamp(function(n){const r=Wa(n);return new Yn(r.seconds,r.nanos)}(t))}function Av(t,e){return O0(t,e).canonicalString()}function O0(t,e){const n=function(i){return new un(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function qx(t){const e=un.fromString(t);return Qt(Gx(e)),e}function F0(t,e){return Av(t.databaseId,e.path)}function i1(t,e){const n=qx(e);if(n.get(1)!==t.databaseId.projectId)throw new Je(Le.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Je(Le.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ut($x(n))}function zx(t,e){return Av(t.databaseId,e)}function cR(t){const e=qx(t);return e.length===4?un.emptyPath():$x(e)}function M0(t){return new un(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function $x(t){return Qt(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function X_(t,e,n){return{name:F0(t,e),fields:n.value.mapValue.fields}}function hR(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:gt()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(u,h){return u.useProto3Json?(Qt(h===void 0||typeof h=="string"),pr.fromBase64String(h||"")):(Qt(h===void 0||h instanceof Buffer||h instanceof Uint8Array),pr.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){const h=u.code===void 0?Le.UNKNOWN:Mx(u.code);return new Je(h,u.message||"")}(o);n=new Vx(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=i1(t,r.document.name),s=qs(r.document.updateTime),o=r.document.createTime?qs(r.document.createTime):bt.min(),a=new ri({mapValue:{fields:r.document.fields}}),l=Ir.newFoundDocument(i,s,o,a),u=r.targetIds||[],h=r.removedTargetIds||[];n=new up(u,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=i1(t,r.document),s=r.readTime?qs(r.readTime):bt.min(),o=Ir.newNoDocument(i,s),a=r.removedTargetIds||[];n=new up([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=i1(t,r.document),s=r.removedTargetIds||[];n=new up([],s,i,null)}else{if(!("filter"in e))return gt();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new eR(i,s),a=r.targetId;n=new Ux(a,o)}}return n}function dR(t,e){let n;if(e instanceof Md)n={update:X_(t,e.key,e.value)};else if(e instanceof bv)n={delete:F0(t,e.key)};else if(e instanceof tl)n={update:X_(t,e.key,e.data),updateMask:bR(e.fieldMask)};else{if(!(e instanceof XL))return gt();n={verify:F0(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof Jp)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Sd)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Ad)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Zp)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw gt()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:uR(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:gt()}(t,e.precondition)),n}function fR(t,e){return t&&t.length>0?(Qt(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?qs(i.updateTime):qs(s);return o.isEqual(bt.min())&&(o=qs(s)),new KL(o,i.transformResults||[])}(n,e))):[]}function pR(t,e){return{documents:[zx(t,e.path)]}}function mR(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=zx(t,i);const s=function(u){if(u.length!==0)return Wx(hs.create(u,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(u){if(u.length!==0)return u.map(h=>function(m){return{field:Mu(m.field),direction:yR(m.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=D0(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{_t:n,parent:i}}function gR(t){let e=cR(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Qt(r===1);const h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];n.where&&(s=function(f){const m=Hx(f);return m instanceof hs&&bx(m)?m.getFilters():[m]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(m=>function(b){return new xd(Uu(b.field),function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction))}(m))}(n.orderBy));let a=null;n.limit&&(a=function(f){let m;return m=typeof f=="object"?f.value:f,Fm(m)?null:m}(n.limit));let l=null;n.startAt&&(l=function(f){const m=!!f.before,p=f.values||[];return new Xp(p,m)}(n.startAt));let u=null;return n.endAt&&(u=function(f){const m=!f.before,p=f.values||[];return new Xp(p,m)}(n.endAt)),DL(e,i,o,s,a,"F",l,u)}function vR(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return gt()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Hx(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Uu(n.unaryFilter.field);return zn.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Uu(n.unaryFilter.field);return zn.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Uu(n.unaryFilter.field);return zn.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Uu(n.unaryFilter.field);return zn.create(o,"!=",{nullValue:"NULL_VALUE"});default:return gt()}}(t):t.fieldFilter!==void 0?function(n){return zn.create(Uu(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return gt()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return hs.create(n.compositeFilter.filters.map(r=>Hx(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return gt()}}(n.compositeFilter.op))}(t):gt()}function yR(t){return sR[t]}function _R(t){return oR[t]}function wR(t){return aR[t]}function Mu(t){return{fieldPath:t.canonicalString()}}function Uu(t){return cr.fromServerFormat(t.fieldPath)}function Wx(t){return t instanceof zn?function(n){if(n.op==="=="){if(F_(n.value))return{unaryFilter:{field:Mu(n.field),op:"IS_NAN"}};if(O_(n.value))return{unaryFilter:{field:Mu(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(F_(n.value))return{unaryFilter:{field:Mu(n.field),op:"IS_NOT_NAN"}};if(O_(n.value))return{unaryFilter:{field:Mu(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Mu(n.field),op:_R(n.op),value:n.value}}}(t):t instanceof hs?function(n){const r=n.getFilters().map(i=>Wx(i));return r.length===1?r[0]:{compositeFilter:{op:wR(n.op),filters:r}}}(t):gt()}function bR(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Gx(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ia{constructor(e,n,r,i,s=bt.min(),o=bt.min(),a=pr.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Ia(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ia(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ia(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ia(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xR{constructor(e){this.ct=e}}function SR(t){const e=gR({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?j0(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AR{constructor(){this.un=new ER}addToCollectionParentIndex(e,n){return this.un.add(n),Ve.resolve()}getCollectionParents(e,n){return Ve.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return Ve.resolve()}deleteFieldIndex(e,n){return Ve.resolve()}deleteAllFieldIndexes(e){return Ve.resolve()}createTargetIndexes(e,n){return Ve.resolve()}getDocumentsMatchingTarget(e,n){return Ve.resolve(null)}getIndexType(e,n){return Ve.resolve(0)}getFieldIndexes(e,n){return Ve.resolve([])}getNextCollectionGroupToUpdate(e){return Ve.resolve(null)}getMinOffset(e,n){return Ve.resolve(Ha.min())}getMinOffsetFromCollectionGroup(e,n){return Ve.resolve(Ha.min())}updateCollectionGroup(e,n,r){return Ve.resolve()}updateIndexEntries(e,n){return Ve.resolve()}}class ER{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new dr(un.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new dr(un.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pc{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Pc(0)}static kn(){return new Pc(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NR{constructor(){this.changes=new $c(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Ir.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?Ve.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IR{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TR{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Gh(r.mutation,i,wi.empty(),Yn.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Pt()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Pt()){const i=Cl();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Ph();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Cl();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Pt()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=Lo();const o=Wh(),a=function(){return Wh()}();return n.forEach((l,u)=>{const h=r.get(u.key);i.has(u.key)&&(h===void 0||h.mutation instanceof tl)?s=s.insert(u.key,u):h!==void 0?(o.set(u.key,h.mutation.getFieldMask()),Gh(h.mutation,u,h.mutation.getFieldMask(),Yn.now())):o.set(u.key,wi.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((u,h)=>o.set(u,h)),n.forEach((u,h)=>{var f;return a.set(u,new IR(h,(f=o.get(u))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,n){const r=Wh();let i=new wn((o,a)=>o-a),s=Pt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const u=n.get(l);if(u===null)return;let h=r.get(l)||wi.empty();h=a.applyToLocalView(u,h),r.set(l,h);const f=(i.get(a.batchId)||Pt()).add(l);i=i.insert(a.batchId,f)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,h=l.value,f=Px();h.forEach(m=>{if(!s.has(m)){const p=Ox(n.get(m),r.get(m));p!==null&&f.set(m,p),s=s.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,f))}return Ve.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return ut.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Ex(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):Ve.resolve(Cl());let a=-1,l=s;return o.next(u=>Ve.forEach(u,(h,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),s.get(h)?Ve.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{l=l.insert(h,m)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,l,u,Pt())).next(h=>({batchId:a,changes:kx(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ut(n)).next(r=>{let i=Ph();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=Ph();return this.indexManager.getCollectionParents(e,s).next(a=>Ve.forEach(a,l=>{const u=function(f,m){return new zc(m,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(h=>{h.forEach((f,m)=>{o=o.insert(f,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((l,u)=>{const h=u.getKey();o.get(h)===null&&(o=o.insert(h,Ir.newInvalidDocument(h)))});let a=Ph();return o.forEach((l,u)=>{const h=s.get(l);h!==void 0&&Gh(h.mutation,u,wi.empty(),Yn.now()),Um(n,u)&&(a=a.insert(l,u))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kR{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return Ve.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:qs(i.createTime)}}(n)),Ve.resolve()}getNamedQuery(e,n){return Ve.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:SR(i.bundledQuery),readTime:qs(i.readTime)}}(n)),Ve.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PR{constructor(){this.overlays=new wn(ut.comparator),this.Ir=new Map}getOverlay(e,n){return Ve.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Cl();return Ve.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),Ve.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),Ve.resolve()}getOverlaysForCollection(e,n,r){const i=Cl(),s=n.length+1,o=new ut(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return Ve.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new wn((u,h)=>u-h);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let h=s.get(u.largestBatchId);h===null&&(h=Cl(),s=s.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}const a=Cl(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,h)=>a.set(u,h)),!(a.size()>=i)););return Ve.resolve(a)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new ZL(n,r));let s=this.Ir.get(n);s===void 0&&(s=Pt(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CR{constructor(){this.sessionToken=pr.EMPTY_BYTE_STRING}getSessionToken(e){return Ve.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,Ve.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ev{constructor(){this.Tr=new dr(Zn.Er),this.dr=new dr(Zn.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new Zn(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new Zn(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new ut(new un([])),r=new Zn(n,e),i=new Zn(n,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new ut(new un([])),r=new Zn(n,e),i=new Zn(n,e+1);let s=Pt();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new Zn(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Zn{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return ut.comparator(e.key,n.key)||Mt(e.wr,n.wr)}static Ar(e,n){return Mt(e.wr,n.wr)||ut.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LR{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new dr(Zn.Er)}checkEmpty(e){return Ve.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new JL(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.br=this.br.add(new Zn(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return Ve.resolve(o)}lookupMutationBatch(e,n){return Ve.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),s=i<0?0:i;return Ve.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Ve.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return Ve.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Zn(n,0),i=new Zn(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{const a=this.Dr(o.wr);s.push(a)}),Ve.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new dr(Mt);return n.forEach(i=>{const s=new Zn(i,0),o=new Zn(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{r=r.add(a.wr)})}),Ve.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;ut.isDocumentKey(s)||(s=s.child(""));const o=new Zn(new ut(s),0);let a=new dr(Mt);return this.br.forEachWhile(l=>{const u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(l.wr)),!0)},o),Ve.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Qt(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return Ve.forEach(n.mutations,i=>{const s=new Zn(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new Zn(n,0),i=this.br.firstAfterOrEqual(r);return Ve.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,Ve.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RR{constructor(e){this.Mr=e,this.docs=function(){return new wn(ut.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return Ve.resolve(r?r.document.mutableCopy():Ir.newInvalidDocument(n))}getEntries(e,n){let r=Lo();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Ir.newInvalidDocument(i))}),Ve.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Lo();const o=n.path,a=new ut(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:u,value:{document:h}}=l.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||gL(mL(h),r)<=0||(i.has(h.key)||Um(n,h))&&(s=s.insert(h.key,h.mutableCopy()))}return Ve.resolve(s)}getAllFromCollectionGroup(e,n,r,i){gt()}Or(e,n){return Ve.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new jR(this)}getSize(e){return Ve.resolve(this.size)}}class jR extends NR{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),Ve.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DR{constructor(e){this.persistence=e,this.Nr=new $c(n=>vv(n),yv),this.lastRemoteSnapshotVersion=bt.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Ev,this.targetCount=0,this.kr=Pc.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),Ve.resolve()}getLastRemoteSnapshotVersion(e){return Ve.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ve.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),Ve.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),Ve.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Pc(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,Ve.resolve()}updateTargetData(e,n){return this.Kn(n),Ve.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,Ve.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),Ve.waitFor(s).next(()=>i)}getTargetCount(e){return Ve.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return Ve.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),Ve.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),Ve.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),Ve.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return Ve.resolve(r)}containsKey(e,n){return Ve.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OR{constructor(e,n){this.qr={},this.overlays={},this.Qr=new fv(0),this.Kr=!1,this.Kr=!0,this.$r=new CR,this.referenceDelegate=e(this),this.Ur=new DR(this),this.indexManager=new AR,this.remoteDocumentCache=function(i){return new RR(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new xR(n),this.Gr=new kR(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new PR,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new LR(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){rt("MemoryPersistence","Starting transaction:",e);const i=new FR(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,n){return Ve.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class FR extends yL{constructor(e){super(),this.currentSequenceNumber=e}}class Nv{constructor(e){this.persistence=e,this.Jr=new Ev,this.Yr=null}static Zr(e){return new Nv(e)}get Xr(){if(this.Yr)return this.Yr;throw gt()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),Ve.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),Ve.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),Ve.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ve.forEach(this.Xr,r=>{const i=ut.fromPath(r);return this.ei(e,i).next(s=>{s||n.removeEntry(i,bt.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return Ve.or([()=>Ve.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iv{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=Pt(),i=Pt();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new Iv(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MR{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UR{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return Tk()?8:_L(Pr())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.Yi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new MR;return this.Xi(e,n,o).next(a=>{if(s.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>s.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(_h()<=Rt.DEBUG&&rt("QueryEngine","SDK will not create cache indexes for query:",Fu(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),Ve.resolve()):(_h()<=Rt.DEBUG&&rt("QueryEngine","Query:",Fu(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(_h()<=Rt.DEBUG&&rt("QueryEngine","The SDK decides to create cache indexes for query:",Fu(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Bs(n))):Ve.resolve())}Yi(e,n){if(B_(n))return Ve.resolve(null);let r=Bs(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=j0(n,null,"F"),r=Bs(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=Pt(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const u=this.ts(n,a);return this.ns(n,u,o,l.readTime)?this.Yi(e,j0(n,null,"F")):this.rs(e,u,n,l)}))})))}Zi(e,n,r,i){return B_(n)||i.isEqual(bt.min())?Ve.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const o=this.ts(n,s);return this.ns(n,o,r,i)?Ve.resolve(null):(_h()<=Rt.DEBUG&&rt("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Fu(n)),this.rs(e,o,n,pL(i,-1)).next(a=>a))})}ts(e,n){let r=new dr(Ix(e));return n.forEach((i,s)=>{Um(e,s)&&(r=r.add(s))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,n,r){return _h()<=Rt.DEBUG&&rt("QueryEngine","Using full collection scan to execute query:",Fu(n)),this.Ji.getDocumentsMatchingQuery(e,n,Ha.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VR{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new wn(Mt),this._s=new $c(s=>vv(s),yv),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new TR(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function BR(t,e,n,r){return new VR(t,e,n,r)}async function Kx(t,e){const n=xt(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=Pt();for(const u of i){o.push(u.batchId);for(const h of u.mutations)l=l.add(h.key)}for(const u of s){a.push(u.batchId);for(const h of u.mutations)l=l.add(h.key)}return n.localDocuments.getDocuments(r,l).next(u=>({hs:u,removedBatchIds:o,addedBatchIds:a}))})})}function qR(t,e){const n=xt(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,l,u,h){const f=u.batch,m=f.keys();let p=Ve.resolve();return m.forEach(b=>{p=p.next(()=>h.getEntry(l,b)).next(E=>{const k=u.docVersions.get(b);Qt(k!==null),E.version.compareTo(k)<0&&(f.applyToRemoteDocument(E,u),E.isValidDocument()&&(E.setReadTime(u.commitVersion),h.addEntry(E)))})}),p.next(()=>a.mutationQueue.removeMutationBatch(l,f))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=Pt();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(l=l.add(a.batch.mutations[u].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function Qx(t){const e=xt(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function zR(t,e){const n=xt(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const a=[];e.targetChanges.forEach((h,f)=>{const m=i.get(f);if(!m)return;a.push(n.Ur.removeMatchingKeys(s,h.removedDocuments,f).next(()=>n.Ur.addMatchingKeys(s,h.addedDocuments,f)));let p=m.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(f)!==null?p=p.withResumeToken(pr.EMPTY_BYTE_STRING,bt.min()).withLastLimboFreeSnapshotVersion(bt.min()):h.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(h.resumeToken,r)),i=i.insert(f,p),function(E,k,w){return E.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-E.snapshotVersion.toMicroseconds()>=3e8?!0:w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0}(m,p,h)&&a.push(n.Ur.updateTargetData(s,p))});let l=Lo(),u=Pt();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push($R(s,o,e.documentUpdates).next(h=>{l=h.Ps,u=h.Is})),!r.isEqual(bt.min())){const h=n.Ur.getLastRemoteSnapshotVersion(s).next(f=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(h)}return Ve.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,u)).next(()=>l)}).then(s=>(n.os=i,s))}function $R(t,e,n){let r=Pt(),i=Pt();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=Lo();return n.forEach((a,l)=>{const u=s.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(bt.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):rt("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{Ps:o,Is:i}})}function HR(t,e){const n=xt(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function WR(t,e){const n=xt(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(s=>s?(i=s,Ve.resolve(i)):n.Ur.allocateTargetId(r).next(o=>(i=new Ia(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function U0(t,e,n){const r=xt(t),i=r.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Fd(o))throw o;rt("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function J_(t,e,n){const r=xt(t);let i=bt.min(),s=Pt();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,u,h){const f=xt(l),m=f._s.get(h);return m!==void 0?Ve.resolve(f.os.get(m)):f.Ur.getTargetData(u,h)}(r,o,Bs(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?i:bt.min(),n?s:Pt())).next(a=>(GR(r,FL(e),a),{documents:a,Ts:s})))}function GR(t,e,n){let r=t.us.get(e)||bt.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.us.set(e,r)}class Z_{constructor(){this.activeTargetIds=zL()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class KR{constructor(){this.so=new Z_,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Z_,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QR{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ew{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){rt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){rt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ff=null;function s1(){return Ff===null?Ff=function(){return 268435456+Math.round(2147483648*Math.random())}():Ff++,"0x"+Ff.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YR={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XR{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wr="WebChannelConnection";class JR extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(n,r,i,s,o){const a=s1(),l=this.xo(n,r.toUriEncodedString());rt("RestConnection",`Sending RPC '${n}' ${a}:`,l,i);const u={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(u,s,o),this.No(n,l,u,i).then(h=>(rt("RestConnection",`Received RPC '${n}' ${a}: `,h),h),h=>{throw Nc("RestConnection",`RPC '${n}' ${a} failed with error: `,h,"url: ",l,"request:",i),h})}Lo(n,r,i,s,o,a){return this.Mo(n,r,i,s,o)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+qc}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}xo(n,r){const i=YR[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const s=s1();return new Promise((o,a)=>{const l=new ux;l.setWithCredentials(!0),l.listenOnce(cx.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case op.NO_ERROR:const h=l.getResponseJson();rt(wr,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),o(h);break;case op.TIMEOUT:rt(wr,`RPC '${e}' ${s} timed out`),a(new Je(Le.DEADLINE_EXCEEDED,"Request time out"));break;case op.HTTP_ERROR:const f=l.getStatus();if(rt(wr,`RPC '${e}' ${s} failed with status:`,f,"response text:",l.getResponseText()),f>0){let m=l.getResponseJson();Array.isArray(m)&&(m=m[0]);const p=m==null?void 0:m.error;if(p&&p.status&&p.message){const b=function(k){const w=k.toLowerCase().replace(/_/g,"-");return Object.values(Le).indexOf(w)>=0?w:Le.UNKNOWN}(p.status);a(new Je(b,p.message))}else a(new Je(Le.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new Je(Le.UNAVAILABLE,"Connection failed."));break;default:gt()}}finally{rt(wr,`RPC '${e}' ${s} completed.`)}});const u=JSON.stringify(i);rt(wr,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",u,r,15)})}Bo(e,n,r){const i=s1(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=fx(),a=dx(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const h=s.join("");rt(wr,`Creating RPC '${e}' stream ${i}: ${h}`,l);const f=o.createWebChannel(h,l);let m=!1,p=!1;const b=new XR({Io:k=>{p?rt(wr,`Not sending because RPC '${e}' stream ${i} is closed:`,k):(m||(rt(wr,`Opening RPC '${e}' stream ${i} transport.`),f.open(),m=!0),rt(wr,`RPC '${e}' stream ${i} sending:`,k),f.send(k))},To:()=>f.close()}),E=(k,w,x)=>{k.listen(w,C=>{try{x(C)}catch(M){setTimeout(()=>{throw M},0)}})};return E(f,kh.EventType.OPEN,()=>{p||(rt(wr,`RPC '${e}' stream ${i} transport opened.`),b.yo())}),E(f,kh.EventType.CLOSE,()=>{p||(p=!0,rt(wr,`RPC '${e}' stream ${i} transport closed`),b.So())}),E(f,kh.EventType.ERROR,k=>{p||(p=!0,Nc(wr,`RPC '${e}' stream ${i} transport errored:`,k),b.So(new Je(Le.UNAVAILABLE,"The operation could not be completed")))}),E(f,kh.EventType.MESSAGE,k=>{var w;if(!p){const x=k.data[0];Qt(!!x);const C=x,M=C.error||((w=C[0])===null||w===void 0?void 0:w.error);if(M){rt(wr,`RPC '${e}' stream ${i} received error:`,M);const Q=M.status;let z=function(N){const R=Bn[N];if(R!==void 0)return Mx(R)}(Q),L=M.message;z===void 0&&(z=Le.INTERNAL,L="Unknown error status: "+Q+" with message "+M.message),p=!0,b.So(new Je(z,L)),f.close()}else rt(wr,`RPC '${e}' stream ${i} received:`,x),b.bo(x)}}),E(a,hx.STAT_EVENT,k=>{k.stat===T0.PROXY?rt(wr,`RPC '${e}' stream ${i} detected buffering proxy`):k.stat===T0.NOPROXY&&rt(wr,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{b.wo()},0),b}}function o1(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zm(t){return new lR(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yx{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&rt("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xx{constructor(e,n,r,i,s,o,a,l){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Yx(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===Le.RESOURCE_EXHAUSTED?(Co(n.toString()),Co("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===Le.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{const i=new Je(Le.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return rt("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(rt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class ZR extends Xx{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=hR(this.serializer,e),r=function(s){if(!("targetChange"in s))return bt.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?bt.min():o.readTime?qs(o.readTime):bt.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=M0(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=L0(l)?{documents:pR(s,l)}:{query:mR(s,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=Bx(s,o.resumeToken);const u=D0(s,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(bt.min())>0){a.readTime=em(s,o.snapshotVersion.toTimestamp());const u=D0(s,o.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);const r=vR(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=M0(this.serializer),n.removeTarget=e,this.a_(n)}}class e8 extends Xx{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Qt(!!e.streamToken),this.lastStreamToken=e.streamToken,Qt(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Qt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=fR(e.writeResults,e.commitTime),r=qs(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=M0(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>dR(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t8 extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new Je(Le.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,O0(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===Le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Je(Le.UNKNOWN,s.toString())})}Lo(e,n,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,O0(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Je(Le.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class n8{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Co(n),this.D_=!1):rt("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r8{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(async()=>{tu(this)&&(rt("RemoteStore","Restarting streams for network reachability change."),await async function(l){const u=xt(l);u.L_.add(4),await Vd(u),u.q_.set("Unknown"),u.L_.delete(4),await $m(u)}(this))})}),this.q_=new n8(r,i)}}async function $m(t){if(tu(t))for(const e of t.B_)await e(!0)}async function Vd(t){for(const e of t.B_)await e(!1)}function Jx(t,e){const n=xt(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Cv(n)?Pv(n):Hc(n).r_()&&kv(n,e))}function Tv(t,e){const n=xt(t),r=Hc(n);n.N_.delete(e),r.r_()&&Zx(n,e),n.N_.size===0&&(r.r_()?r.o_():tu(n)&&n.q_.set("Unknown"))}function kv(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(bt.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Hc(t).A_(e)}function Zx(t,e){t.Q_.xe(e),Hc(t).R_(e)}function Pv(t){t.Q_=new iR({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Hc(t).start(),t.q_.v_()}function Cv(t){return tu(t)&&!Hc(t).n_()&&t.N_.size>0}function tu(t){return xt(t).L_.size===0}function eS(t){t.Q_=void 0}async function i8(t){t.q_.set("Online")}async function s8(t){t.N_.forEach((e,n)=>{kv(t,e)})}async function o8(t,e){eS(t),Cv(t)?(t.q_.M_(e),Pv(t)):t.q_.set("Unknown")}async function a8(t,e,n){if(t.q_.set("Online"),e instanceof Vx&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.N_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.N_.delete(a),i.Q_.removeTarget(a))}(t,e)}catch(r){rt("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await tm(t,r)}else if(e instanceof up?t.Q_.Ke(e):e instanceof Ux?t.Q_.He(e):t.Q_.We(e),!n.isEqual(bt.min()))try{const r=await Qx(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.Q_.rt(o);return a.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const h=s.N_.get(u);h&&s.N_.set(u,h.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,u)=>{const h=s.N_.get(l);if(!h)return;s.N_.set(l,h.withResumeToken(pr.EMPTY_BYTE_STRING,h.snapshotVersion)),Zx(s,l);const f=new Ia(h.target,l,u,h.sequenceNumber);kv(s,f)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){rt("RemoteStore","Failed to raise snapshot:",r),await tm(t,r)}}async function tm(t,e,n){if(!Fd(e))throw e;t.L_.add(1),await Vd(t),t.q_.set("Offline"),n||(n=()=>Qx(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{rt("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await $m(t)})}function tS(t,e){return e().catch(n=>tm(t,n,e))}async function Hm(t){const e=xt(t),n=Ga(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;l8(e);)try{const i=await HR(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,u8(e,i)}catch(i){await tm(e,i)}nS(e)&&rS(e)}function l8(t){return tu(t)&&t.O_.length<10}function u8(t,e){t.O_.push(e);const n=Ga(t);n.r_()&&n.V_&&n.m_(e.mutations)}function nS(t){return tu(t)&&!Ga(t).n_()&&t.O_.length>0}function rS(t){Ga(t).start()}async function c8(t){Ga(t).p_()}async function h8(t){const e=Ga(t);for(const n of t.O_)e.m_(n.mutations)}async function d8(t,e,n){const r=t.O_.shift(),i=xv.from(r,e,n);await tS(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Hm(t)}async function f8(t,e){e&&Ga(t).V_&&await async function(r,i){if(function(o){return tR(o)&&o!==Le.ABORTED}(i.code)){const s=r.O_.shift();Ga(r).s_(),await tS(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Hm(r)}}(t,e),nS(t)&&rS(t)}async function tw(t,e){const n=xt(t);n.asyncQueue.verifyOperationInProgress(),rt("RemoteStore","RemoteStore received new credentials");const r=tu(n);n.L_.add(3),await Vd(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await $m(n)}async function p8(t,e){const n=xt(t);e?(n.L_.delete(2),await $m(n)):e||(n.L_.add(2),await Vd(n),n.q_.set("Unknown"))}function Hc(t){return t.K_||(t.K_=function(n,r,i){const s=xt(n);return s.w_(),new ZR(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:i8.bind(null,t),Ro:s8.bind(null,t),mo:o8.bind(null,t),d_:a8.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),Cv(t)?Pv(t):t.q_.set("Unknown")):(await t.K_.stop(),eS(t))})),t.K_}function Ga(t){return t.U_||(t.U_=function(n,r,i){const s=xt(n);return s.w_(),new e8(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:c8.bind(null,t),mo:f8.bind(null,t),f_:h8.bind(null,t),g_:d8.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Hm(t)):(await t.U_.stop(),t.O_.length>0&&(rt("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lv{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new So,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new Lv(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Je(Le.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Rv(t,e){if(Co("AsyncQueue",`${e}: ${t}`),Fd(t))return new Je(Le.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dc{constructor(e){this.comparator=e?(n,r)=>e(n,r)||ut.comparator(n.key,r.key):(n,r)=>ut.comparator(n.key,r.key),this.keyedMap=Ph(),this.sortedSet=new wn(this.comparator)}static emptySet(e){return new dc(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof dc)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new dc;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nw{constructor(){this.W_=new wn(ut.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):gt():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Cc{constructor(e,n,r,i,s,o,a,l,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Cc(e,n,dc.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Mm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m8{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class g8{constructor(){this.queries=rw(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=xt(n),s=i.queries;i.queries=rw(),s.forEach((o,a)=>{for(const l of a.j_)l.onError(r)})})(this,new Je(Le.ABORTED,"Firestore shutting down"))}}function rw(){return new $c(t=>Nx(t),Mm)}async function iS(t,e){const n=xt(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new m8,r=e.J_()?0:1);try{switch(r){case 0:s.z_=await n.onListen(i,!0);break;case 1:s.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=Rv(o,`Initialization of query '${Fu(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&jv(n)}async function sS(t,e){const n=xt(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function v8(t,e){const n=xt(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.j_)a.X_(i)&&(r=!0);o.z_=i}}r&&jv(n)}function y8(t,e,n){const r=xt(t),i=r.queries.get(e);if(i)for(const s of i.j_)s.onError(n);r.queries.delete(e)}function jv(t){t.Y_.forEach(e=>{e.next()})}var V0,iw;(iw=V0||(V0={})).ea="default",iw.Cache="cache";class oS{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Cc(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Cc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==V0.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aS{constructor(e){this.key=e}}class lS{constructor(e){this.key=e}}class _8{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Pt(),this.mutatedKeys=Pt(),this.Aa=Ix(e),this.Ra=new dc(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new nw,i=n?n.Ra:this.Ra;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,f)=>{const m=i.get(h),p=Um(this.query,f)?f:null,b=!!m&&this.mutatedKeys.has(m.key),E=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations);let k=!1;m&&p?m.data.isEqual(p.data)?b!==E&&(r.track({type:3,doc:p}),k=!0):this.ga(m,p)||(r.track({type:2,doc:p}),k=!0,(l&&this.Aa(p,l)>0||u&&this.Aa(p,u)<0)&&(a=!0)):!m&&p?(r.track({type:0,doc:p}),k=!0):m&&!p&&(r.track({type:1,doc:m}),k=!0,(l||u)&&(a=!0)),k&&(p?(o=o.add(p),s=E?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{Ra:o,fa:r,ns:a,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((h,f)=>function(p,b){const E=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return gt()}};return E(p)-E(b)}(h.type,f.type)||this.Aa(h.doc,f.doc)),this.pa(r),i=i!=null&&i;const a=n&&!i?this.ya():[],l=this.da.size===0&&this.current&&!i?1:0,u=l!==this.Ea;return this.Ea=l,o.length!==0||u?{snapshot:new Cc(this.query,e.Ra,s,o,e.mutatedKeys,l===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new nw,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Pt(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new lS(r))}),this.da.forEach(r=>{e.has(r)||n.push(new aS(r))}),n}ba(e){this.Ta=e.Ts,this.da=Pt();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Cc.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class w8{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class b8{constructor(e){this.key=e,this.va=!1}}class x8{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new $c(a=>Nx(a),Mm),this.Ma=new Map,this.xa=new Set,this.Oa=new wn(ut.comparator),this.Na=new Map,this.La=new Ev,this.Ba={},this.ka=new Map,this.qa=Pc.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function S8(t,e,n=!0){const r=pS(t);let i;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await uS(r,e,n,!0),i}async function A8(t,e){const n=pS(t);await uS(n,e,!0,!1)}async function uS(t,e,n,r){const i=await WR(t.localStore,Bs(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await E8(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&Jx(t.remoteStore,i),a}async function E8(t,e,n,r,i){t.Ka=(f,m,p)=>async function(E,k,w,x){let C=k.view.ma(w);C.ns&&(C=await J_(E.localStore,k.query,!1).then(({documents:L})=>k.view.ma(L,C)));const M=x&&x.targetChanges.get(k.targetId),Q=x&&x.targetMismatches.get(k.targetId)!=null,z=k.view.applyChanges(C,E.isPrimaryClient,M,Q);return ow(E,k.targetId,z.wa),z.snapshot}(t,f,m,p);const s=await J_(t.localStore,e,!0),o=new _8(e,s.Ts),a=o.ma(s.documents),l=Ud.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),u=o.applyChanges(a,t.isPrimaryClient,l);ow(t,n,u.wa);const h=new w8(e,n,o);return t.Fa.set(e,h),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),u.snapshot}async function N8(t,e,n){const r=xt(t),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!Mm(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await U0(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Tv(r.remoteStore,i.targetId),B0(r,i.targetId)}).catch(Od)):(B0(r,i.targetId),await U0(r.localStore,i.targetId,!0))}async function I8(t,e){const n=xt(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Tv(n.remoteStore,r.targetId))}async function T8(t,e,n){const r=D8(t);try{const i=await function(o,a){const l=xt(o),u=Yn.now(),h=a.reduce((p,b)=>p.add(b.key),Pt());let f,m;return l.persistence.runTransaction("Locally write mutations","readwrite",p=>{let b=Lo(),E=Pt();return l.cs.getEntries(p,h).next(k=>{b=k,b.forEach((w,x)=>{x.isValidDocument()||(E=E.add(w))})}).next(()=>l.localDocuments.getOverlayedDocuments(p,b)).next(k=>{f=k;const w=[];for(const x of a){const C=YL(x,f.get(x.key).overlayedDocument);C!=null&&w.push(new tl(x.key,C,yx(C.value.mapValue),Ui.exists(!0)))}return l.mutationQueue.addMutationBatch(p,u,w,a)}).next(k=>{m=k;const w=k.applyToLocalDocumentSet(f,E);return l.documentOverlayCache.saveOverlays(p,k.batchId,w)})}).then(()=>({batchId:m.batchId,changes:kx(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let u=o.Ba[o.currentUser.toKey()];u||(u=new wn(Mt)),u=u.insert(a,l),o.Ba[o.currentUser.toKey()]=u}(r,i.batchId,n),await Bd(r,i.changes),await Hm(r.remoteStore)}catch(i){const s=Rv(i,"Failed to persist write");n.reject(s)}}async function cS(t,e){const n=xt(t);try{const r=await zR(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Na.get(s);o&&(Qt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?Qt(o.va):i.removedDocuments.size>0&&(Qt(o.va),o.va=!1))}),await Bd(n,r,e)}catch(r){await Od(r)}}function sw(t,e,n){const r=xt(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach((s,o)=>{const a=o.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=xt(o);l.onlineState=a;let u=!1;l.queries.forEach((h,f)=>{for(const m of f.j_)m.Z_(a)&&(u=!0)}),u&&jv(l)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function k8(t,e,n){const r=xt(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),s=i&&i.key;if(s){let o=new wn(ut.comparator);o=o.insert(s,Ir.newNoDocument(s,bt.min()));const a=Pt().add(s),l=new qm(bt.min(),new Map,new wn(Mt),o,a);await cS(r,l),r.Oa=r.Oa.remove(s),r.Na.delete(e),Dv(r)}else await U0(r.localStore,e,!1).then(()=>B0(r,e,n)).catch(Od)}async function P8(t,e){const n=xt(t),r=e.batch.batchId;try{const i=await qR(n.localStore,e);dS(n,r,null),hS(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Bd(n,i)}catch(i){await Od(i)}}async function C8(t,e,n){const r=xt(t);try{const i=await function(o,a){const l=xt(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let h;return l.mutationQueue.lookupMutationBatch(u,a).next(f=>(Qt(f!==null),h=f.keys(),l.mutationQueue.removeMutationBatch(u,f))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,h,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,h)).next(()=>l.localDocuments.getDocuments(u,h))})}(r.localStore,e);dS(r,e,n),hS(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Bd(r,i)}catch(i){await Od(i)}}function hS(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function dS(t,e,n){const r=xt(t);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function B0(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||fS(t,r)})}function fS(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(Tv(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Dv(t))}function ow(t,e,n){for(const r of n)r instanceof aS?(t.La.addReference(r.key,e),L8(t,r)):r instanceof lS?(rt("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||fS(t,r.key)):gt()}function L8(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(rt("SyncEngine","New document in limbo: "+n),t.xa.add(r),Dv(t))}function Dv(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new ut(un.fromString(e)),r=t.qa.next();t.Na.set(r,new b8(n)),t.Oa=t.Oa.insert(n,r),Jx(t.remoteStore,new Ia(Bs(_v(n.path)),r,"TargetPurposeLimboResolution",fv.oe))}}async function Bd(t,e,n){const r=xt(t),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,l)=>{o.push(r.Ka(l,e,n).then(u=>{var h;if((u||n)&&r.isPrimaryClient){const f=u?!u.fromCache:(h=n==null?void 0:n.targetChanges.get(l.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(l.targetId,f?"current":"not-current")}if(u){i.push(u);const f=Iv.Wi(l.targetId,u);s.push(f)}}))}),await Promise.all(o),r.Ca.d_(i),await async function(l,u){const h=xt(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>Ve.forEach(u,m=>Ve.forEach(m.$i,p=>h.persistence.referenceDelegate.addReference(f,m.targetId,p)).next(()=>Ve.forEach(m.Ui,p=>h.persistence.referenceDelegate.removeReference(f,m.targetId,p)))))}catch(f){if(!Fd(f))throw f;rt("LocalStore","Failed to update sequence numbers: "+f)}for(const f of u){const m=f.targetId;if(!f.fromCache){const p=h.os.get(m),b=p.snapshotVersion,E=p.withLastLimboFreeSnapshotVersion(b);h.os=h.os.insert(m,E)}}}(r.localStore,s))}async function R8(t,e){const n=xt(t);if(!n.currentUser.isEqual(e)){rt("SyncEngine","User change. New user:",e.toKey());const r=await Kx(n.localStore,e);n.currentUser=e,function(s,o){s.ka.forEach(a=>{a.forEach(l=>{l.reject(new Je(Le.CANCELLED,o))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Bd(n,r.hs)}}function j8(t,e){const n=xt(t),r=n.Na.get(e);if(r&&r.va)return Pt().add(r.key);{let i=Pt();const s=n.Ma.get(e);if(!s)return i;for(const o of s){const a=n.Fa.get(o);i=i.unionWith(a.view.Va)}return i}}function pS(t){const e=xt(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=cS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=j8.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=k8.bind(null,e),e.Ca.d_=v8.bind(null,e.eventManager),e.Ca.$a=y8.bind(null,e.eventManager),e}function D8(t){const e=xt(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=P8.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=C8.bind(null,e),e}class nm{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=zm(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return BR(this.persistence,new UR,e.initialUser,this.serializer)}Ga(e){return new OR(Nv.Zr,this.serializer)}Wa(e){return new KR}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}nm.provider={build:()=>new nm};class q0{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>sw(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=R8.bind(null,this.syncEngine),await p8(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new g8}()}createDatastore(e){const n=zm(e.databaseInfo.databaseId),r=function(s){return new JR(s)}(e.databaseInfo);return function(s,o,a,l){return new t8(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new r8(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>sw(this.syncEngine,n,0),function(){return ew.D()?new ew:new QR}())}createSyncEngine(e,n){return function(i,s,o,a,l,u,h){const f=new x8(i,s,o,a,l,u);return h&&(f.Qa=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=xt(i);rt("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await Vd(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}q0.provider={build:()=>new q0};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mS{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Co("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O8{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Er.UNAUTHENTICATED,this.clientId=mx.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{rt("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(rt("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new So;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Rv(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function a1(t,e){t.asyncQueue.verifyOperationInProgress(),rt("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await Kx(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function aw(t,e){t.asyncQueue.verifyOperationInProgress();const n=await F8(t);rt("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>tw(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>tw(e.remoteStore,i)),t._onlineComponents=e}async function F8(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){rt("FirestoreClient","Using user provided OfflineComponentProvider");try{await a1(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===Le.FAILED_PRECONDITION||i.code===Le.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Nc("Error using user provided cache. Falling back to memory cache: "+n),await a1(t,new nm)}}else rt("FirestoreClient","Using default OfflineComponentProvider"),await a1(t,new nm);return t._offlineComponents}async function gS(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(rt("FirestoreClient","Using user provided OnlineComponentProvider"),await aw(t,t._uninitializedComponentsProvider._online)):(rt("FirestoreClient","Using default OnlineComponentProvider"),await aw(t,new q0))),t._onlineComponents}function M8(t){return gS(t).then(e=>e.syncEngine)}async function vS(t){const e=await gS(t),n=e.eventManager;return n.onListen=S8.bind(null,e.syncEngine),n.onUnlisten=N8.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=A8.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=I8.bind(null,e.syncEngine),n}function U8(t,e,n={}){const r=new So;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,u){const h=new mS({next:m=>{h.Za(),o.enqueueAndForget(()=>sS(s,f));const p=m.docs.has(a);!p&&m.fromCache?u.reject(new Je(Le.UNAVAILABLE,"Failed to get document because the client is offline.")):p&&m.fromCache&&l&&l.source==="server"?u.reject(new Je(Le.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(m)},error:m=>u.reject(m)}),f=new oS(_v(a.path),h,{includeMetadataChanges:!0,_a:!0});return iS(s,f)}(await vS(t),t.asyncQueue,e,n,r)),r.promise}function V8(t,e,n={}){const r=new So;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,u){const h=new mS({next:m=>{h.Za(),o.enqueueAndForget(()=>sS(s,f)),m.fromCache&&l.source==="server"?u.reject(new Je(Le.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(m)},error:m=>u.reject(m)}),f=new oS(a,h,{includeMetadataChanges:!0,_a:!0});return iS(s,f)}(await vS(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yS(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lw=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _S(t,e,n){if(!n)throw new Je(Le.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function B8(t,e,n,r){if(e===!0&&r===!0)throw new Je(Le.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function uw(t){if(!ut.isDocumentKey(t))throw new Je(Le.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function cw(t){if(ut.isDocumentKey(t))throw new Je(Le.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Wm(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":gt()}function ds(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Je(Le.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Wm(t);throw new Je(Le.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hw{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Je(Le.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Je(Le.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}B8("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=yS((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Je(Le.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Je(Le.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Je(Le.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Gm{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new hw({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Je(Le.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Je(Le.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new hw(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new sL;switch(r.type){case"firstParty":return new uL(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Je(Le.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=lw.get(n);r&&(rt("ComponentProvider","Removing Datastore"),lw.delete(n),r.terminate())}(this),Promise.resolve()}}function q8(t,e,n,r={}){var i;const s=(t=ds(t,Gm))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Nc("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=Er.MOCK_USER;else{a=S3(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new Je(Le.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Er(u)}t._authCredentials=new oL(new px(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nu{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new nu(this.firestore,e,this._query)}}class qr{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ba(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new qr(this.firestore,e,this._key)}}class Ba extends nu{constructor(e,n,r){super(e,n,_v(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new qr(this.firestore,null,new ut(e))}withConverter(e){return new Ba(this.firestore,e,this._path)}}function Cr(t,e,...n){if(t=_n(t),_S("collection","path",e),t instanceof Gm){const r=un.fromString(e,...n);return cw(r),new Ba(t,null,r)}{if(!(t instanceof qr||t instanceof Ba))throw new Je(Le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(un.fromString(e,...n));return cw(r),new Ba(t.firestore,null,r)}}function $n(t,e,...n){if(t=_n(t),arguments.length===1&&(e=mx.newId()),_S("doc","path",e),t instanceof Gm){const r=un.fromString(e,...n);return uw(r),new qr(t,null,new ut(r))}{if(!(t instanceof qr||t instanceof Ba))throw new Je(Le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(un.fromString(e,...n));return uw(r),new qr(t.firestore,t instanceof Ba?t.converter:null,new ut(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dw{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Yx(this,"async_queue_retry"),this.Vu=()=>{const r=o1();r&&rt("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=o1();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=o1();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new So;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Fd(e))throw e;rt("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Co("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const i=Lv.createAndSchedule(this,e,n,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&gt()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}class ru extends Gm{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new dw,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new dw(e),this._firestoreClient=void 0,await e}}}function z8(t,e){const n=typeof t=="object"?t:nv(),r=typeof t=="string"?t:"(default)",i=Lm(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=w3("firestore");s&&q8(i,...s)}return i}function Ov(t){if(t._terminated)throw new Je(Le.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||$8(t),t._firestoreClient}function $8(t){var e,n,r;const i=t._freezeSettings(),s=function(a,l,u,h){return new xL(a,l,u,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,yS(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new O8(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Lc(pr.fromBase64String(e))}catch(n){throw new Je(Le.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Lc(pr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Km{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Je(Le.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new cr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fv{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mv{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Je(Le.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Je(Le.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Mt(this._lat,e._lat)||Mt(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uv{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H8=/^__.*__$/;class W8{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new tl(e,this.data,this.fieldMask,n,this.fieldTransforms):new Md(e,this.data,n,this.fieldTransforms)}}class wS{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new tl(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function bS(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw gt()}}class Vv{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Vv(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return rm(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(bS(this.Cu)&&H8.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class G8{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||zm(e)}Qu(e,n,r,i=!1){return new Vv({Cu:e,methodName:n,qu:r,path:cr.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Qm(t){const e=t._freezeSettings(),n=zm(t._databaseId);return new G8(t._databaseId,!!e.ignoreUndefinedProperties,n)}function xS(t,e,n,r,i,s={}){const o=t.Qu(s.merge||s.mergeFields?2:0,e,n,i);Bv("Data must be an object, but it was:",o,r);const a=SS(r,o);let l,u;if(s.merge)l=new wi(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const h=[];for(const f of s.mergeFields){const m=z0(e,f,n);if(!o.contains(m))throw new Je(Le.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);ES(h,m)||h.push(m)}l=new wi(h),u=o.fieldTransforms.filter(f=>l.covers(f.field))}else l=null,u=o.fieldTransforms;return new W8(new ri(a),l,u)}class Ym extends Fv{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Ym}}function K8(t,e,n,r){const i=t.Qu(1,e,n);Bv("Data must be an object, but it was:",i,r);const s=[],o=ri.empty();eu(r,(l,u)=>{const h=qv(e,l,n);u=_n(u);const f=i.Nu(h);if(u instanceof Ym)s.push(h);else{const m=qd(u,f);m!=null&&(s.push(h),o.set(h,m))}});const a=new wi(s);return new wS(o,a,i.fieldTransforms)}function Q8(t,e,n,r,i,s){const o=t.Qu(1,e,n),a=[z0(e,r,n)],l=[i];if(s.length%2!=0)throw new Je(Le.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<s.length;m+=2)a.push(z0(e,s[m])),l.push(s[m+1]);const u=[],h=ri.empty();for(let m=a.length-1;m>=0;--m)if(!ES(u,a[m])){const p=a[m];let b=l[m];b=_n(b);const E=o.Nu(p);if(b instanceof Ym)u.push(p);else{const k=qd(b,E);k!=null&&(u.push(p),h.set(p,k))}}const f=new wi(u);return new wS(h,f,o.fieldTransforms)}function Y8(t,e,n,r=!1){return qd(n,t.Qu(r?4:3,e))}function qd(t,e){if(AS(t=_n(t)))return Bv("Unsupported field value:",e,t),SS(t,e);if(t instanceof Fv)return function(r,i){if(!bS(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=qd(a,i.Lu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=_n(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return $L(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Yn.fromDate(r);return{timestampValue:em(i.serializer,s)}}if(r instanceof Yn){const s=new Yn(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:em(i.serializer,s)}}if(r instanceof Mv)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Lc)return{bytesValue:Bx(i.serializer,r._byteString)};if(r instanceof qr){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Av(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Uv)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.Bu("VectorValues must only contain numeric values.");return wv(a.serializer,l)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${Wm(r)}`)}(t,e)}function SS(t,e){const n={};return gx(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):eu(t,(r,i)=>{const s=qd(i,e.Mu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function AS(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Yn||t instanceof Mv||t instanceof Lc||t instanceof qr||t instanceof Fv||t instanceof Uv)}function Bv(t,e,n){if(!AS(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=Wm(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function z0(t,e,n){if((e=_n(e))instanceof Km)return e._internalPath;if(typeof e=="string")return qv(t,e);throw rm("Field path arguments must be of type string or ",t,!1,void 0,n)}const X8=new RegExp("[~\\*/\\[\\]]");function qv(t,e,n){if(e.search(X8)>=0)throw rm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Km(...e.split("."))._internalPath}catch{throw rm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function rm(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new Je(Le.INVALID_ARGUMENT,a+t+l)}function ES(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NS{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new qr(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new J8(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Xm("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class J8 extends NS{data(){return super.data()}}function Xm(t,e){return typeof e=="string"?qv(t,e):e instanceof Km?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z8(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Je(Le.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class zv{}class IS extends zv{}function $v(t,e,...n){let r=[];e instanceof zv&&r.push(e),r=r.concat(n),function(s){const o=s.filter(l=>l instanceof Wv).length,a=s.filter(l=>l instanceof Jm).length;if(o>1||o>0&&a>0)throw new Je(Le.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class Jm extends IS{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Jm(e,n,r)}_apply(e){const n=this._parse(e);return TS(e._query,n),new nu(e.firestore,e.converter,R0(e._query,n))}_parse(e){const n=Qm(e.firestore);return function(s,o,a,l,u,h,f){let m;if(u.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new Je(Le.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){pw(f,h);const p=[];for(const b of f)p.push(fw(l,s,b));m={arrayValue:{values:p}}}else m=fw(l,s,f)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||pw(f,h),m=Y8(a,o,f,h==="in"||h==="not-in");return zn.create(u,h,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Hv(t,e,n){const r=e,i=Xm("where",t);return Jm._create(i,r,n)}class Wv extends zv{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Wv(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:hs.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const l of a)TS(o,l),o=R0(o,l)}(e._query,n),new nu(e.firestore,e.converter,R0(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Gv extends IS{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Gv(e,n)}_apply(e){const n=function(i,s,o){if(i.startAt!==null)throw new Je(Le.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new Je(Le.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new xd(s,o)}(e._query,this._field,this._direction);return new nu(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new zc(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function ej(t,e="asc"){const n=e,r=Xm("orderBy",t);return Gv._create(r,n)}function fw(t,e,n){if(typeof(n=_n(n))=="string"){if(n==="")throw new Je(Le.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ex(e)&&n.indexOf("/")!==-1)throw new Je(Le.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(un.fromString(n));if(!ut.isDocumentKey(r))throw new Je(Le.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return D_(t,new ut(r))}if(n instanceof qr)return D_(t,n._key);throw new Je(Le.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Wm(n)}.`)}function pw(t,e){if(!Array.isArray(t)||t.length===0)throw new Je(Le.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function TS(t,e){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new Je(Le.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Je(Le.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class tj{convertValue(e,n="none"){switch(Gl(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ln(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Wl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw gt()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return eu(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>Ln(o.doubleValue));return new Uv(s)}convertGeoPoint(e){return new Mv(Ln(e.latitude),Ln(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=mv(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(_d(e));default:return null}}convertTimestamp(e){const n=Wa(e);return new Yn(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=un.fromString(e);Qt(Gx(r));const i=new wd(r.get(1),r.get(3)),s=new ut(r.popFirst(5));return i.isEqual(n)||Co(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kS(t,e,n){let r;return r=t?t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lh{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class PS extends NS{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new cp(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Xm("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class cp extends PS{data(e={}){return super.data(e)}}class nj{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Lh(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new cp(this._firestore,this._userDataWriter,r.key,r,new Lh(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Je(Le.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new cp(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Lh(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new cp(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Lh(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,h=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:rj(a.type),doc:l,oldIndex:u,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function rj(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return gt()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zm(t){t=ds(t,qr);const e=ds(t.firestore,ru);return U8(Ov(e),t._key).then(n=>ij(e,t,n))}class CS extends tj{constructor(e){super(),this.firestore=e}convertBytes(e){return new Lc(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new qr(this.firestore,null,n)}}function Do(t){t=ds(t,nu);const e=ds(t.firestore,ru),n=Ov(e),r=new CS(e);return Z8(t._query),V8(n,t._query).then(i=>new nj(e,r,t,i))}function $0(t,e,n){t=ds(t,qr);const r=ds(t.firestore,ru),i=kS(t.converter,e);return eg(r,[xS(Qm(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Ui.none())])}function Kl(t,e,n,...r){t=ds(t,qr);const i=ds(t.firestore,ru),s=Qm(i);let o;return o=typeof(e=_n(e))=="string"||e instanceof Km?Q8(s,"updateDoc",t._key,e,n,r):K8(s,"updateDoc",t._key,e),eg(i,[o.toMutation(t._key,Ui.exists(!0))])}function iu(t){return eg(ds(t.firestore,ru),[new bv(t._key,Ui.none())])}function su(t,e){const n=ds(t.firestore,ru),r=$n(t),i=kS(t.converter,e);return eg(n,[xS(Qm(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Ui.exists(!1))]).then(()=>r)}function eg(t,e){return function(r,i){const s=new So;return r.asyncQueue.enqueueAndForget(async()=>T8(await M8(r),i,s)),s.promise}(Ov(t),e)}function ij(t,e,n){const r=n.docs.get(e._key),i=new CS(t);return new PS(t,i,e._key,r,new Lh(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){qc=i})(Jl),zl(new $a("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new ru(new aL(r.getProvider("auth-internal")),new hL(r.getProvider("app-check-internal")),function(u,h){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new Je(Le.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new wd(u.options.projectId,h)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Ms(P_,"4.7.3",e),Ms(P_,"4.7.3","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LS="firebasestorage.googleapis.com",RS="storageBucket",sj=2*60*1e3,oj=10*60*1e3,aj=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn extends Ws{constructor(e,n,r=0){super(l1(e),`Firebase Storage: ${n} (${l1(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,bn.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return l1(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var dn;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(dn||(dn={}));function l1(t){return"storage/"+t}function Kv(){const t="An unknown error occurred, please check the error payload for server response.";return new bn(dn.UNKNOWN,t)}function lj(t){return new bn(dn.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function uj(t){return new bn(dn.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function cj(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new bn(dn.UNAUTHENTICATED,t)}function hj(){return new bn(dn.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function dj(t){return new bn(dn.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function jS(){return new bn(dn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function DS(){return new bn(dn.CANCELED,"User canceled the upload/download.")}function fj(t){return new bn(dn.INVALID_URL,"Invalid URL '"+t+"'.")}function pj(t){return new bn(dn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function mj(){return new bn(dn.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+RS+"' property when initializing the app?")}function OS(){return new bn(dn.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function gj(){return new bn(dn.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function vj(){return new bn(dn.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function yj(t){return new bn(dn.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function H0(t){return new bn(dn.INVALID_ARGUMENT,t)}function FS(){return new bn(dn.APP_DELETED,"The Firebase app was deleted.")}function _j(t){return new bn(dn.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Kh(t,e){return new bn(dn.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function wh(t){throw new bn(dn.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bi{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=bi.makeFromUrl(e,n)}catch{return new bi(e,"")}if(r.path==="")return r;throw pj(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(M){M.path.charAt(M.path.length-1)==="/"&&(M.path_=M.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),l={bucket:1,path:3};function u(M){M.path_=decodeURIComponent(M.path)}const h="v[A-Za-z0-9_]+",f=n.replace(/[.]/g,"\\."),m="(/([^?#]*).*)?$",p=new RegExp(`^https?://${f}/${h}/b/${i}/o${m}`,"i"),b={bucket:1,path:3},E=n===LS?"(?:storage.googleapis.com|storage.cloud.google.com)":n,k="([^?#]*)",w=new RegExp(`^https?://${E}/${i}/${k}`,"i"),C=[{regex:a,indices:l,postModify:s},{regex:p,indices:b,postModify:u},{regex:w,indices:{bucket:1,path:2},postModify:u}];for(let M=0;M<C.length;M++){const Q=C[M],z=Q.regex.exec(e);if(z){const L=z[Q.indices.bucket];let y=z[Q.indices.path];y||(y=""),r=new bi(L,y),Q.postModify(r);break}}if(r==null)throw fj(e);return r}}class wj{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bj(t,e,n){let r=1,i=null,s=null,o=!1,a=0;function l(){return a===2}let u=!1;function h(...k){u||(u=!0,e.apply(null,k))}function f(k){i=setTimeout(()=>{i=null,t(p,l())},k)}function m(){s&&clearTimeout(s)}function p(k,...w){if(u){m();return}if(k){m(),h.call(null,k,...w);return}if(l()||o){m(),h.call(null,k,...w);return}r<64&&(r*=2);let C;a===1?(a=2,C=0):C=(r+Math.random())*1e3,f(C)}let b=!1;function E(k){b||(b=!0,m(),!u&&(i!==null?(k||(a=2),clearTimeout(i),f(0)):k||(a=1)))}return f(0),s=setTimeout(()=>{o=!0,E(!0)},n),E}function xj(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sj(t){return t!==void 0}function Aj(t){return typeof t=="function"}function Ej(t){return typeof t=="object"&&!Array.isArray(t)}function tg(t){return typeof t=="string"||t instanceof String}function mw(t){return Qv()&&t instanceof Blob}function Qv(){return typeof Blob<"u"}function gw(t,e,n,r){if(r<e)throw H0(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw H0(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wc(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function MS(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var Ol;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Ol||(Ol={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function US(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nj{constructor(e,n,r,i,s,o,a,l,u,h,f,m=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=u,this.progressCallback_=h,this.connectionFactory_=f,this.retry=m,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((p,b)=>{this.resolve_=p,this.reject_=b,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new Mf(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const l=a.loaded,u=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,u)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===Ol.NO_ERROR,l=s.getStatus();if(!a||US(l,this.additionalRetryCodes_)&&this.retry){const h=s.getErrorCode()===Ol.ABORT;r(!1,new Mf(!1,null,h));return}const u=this.successCodes_.indexOf(l)!==-1;r(!0,new Mf(u,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());Sj(l)?s(l):s()}catch(l){o(l)}else if(a!==null){const l=Kv();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(i.canceled){const l=this.appDelete_?FS():DS();o(l)}else{const l=jS();o(l)}};this.canceled_?n(!1,new Mf(!1,null,!0)):this.backoffId_=bj(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&xj(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Mf{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function Ij(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function Tj(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function kj(t,e){e&&(t["X-Firebase-GMPID"]=e)}function Pj(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function Cj(t,e,n,r,i,s,o=!0){const a=MS(t.urlParams),l=t.url+a,u=Object.assign({},t.headers);return kj(u,e),Ij(u,n),Tj(u,s),Pj(u,r),new Nj(l,t.method,u,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lj(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function Rj(...t){const e=Lj();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(Qv())return new Blob(t);throw new bn(dn.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function jj(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dj(t){if(typeof atob>"u")throw yj("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const js={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class u1{constructor(e,n){this.data=e,this.contentType=n||null}}function Oj(t,e){switch(t){case js.RAW:return new u1(VS(e));case js.BASE64:case js.BASE64URL:return new u1(BS(t,e));case js.DATA_URL:return new u1(Mj(e),Uj(e))}throw Kv()}function VS(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const s=r,o=t.charCodeAt(++n);r=65536|(s&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function Fj(t){let e;try{e=decodeURIComponent(t)}catch{throw Kh(js.DATA_URL,"Malformed data URL.")}return VS(e)}function BS(t,e){switch(t){case js.BASE64:{const i=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(i||s)throw Kh(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case js.BASE64URL:{const i=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(i||s)throw Kh(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=Dj(e)}catch(i){throw i.message.includes("polyfill")?i:Kh(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class qS{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Kh(js.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=Vj(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function Mj(t){const e=new qS(t);return e.base64?BS(js.BASE64,e.rest):Fj(e.rest)}function Uj(t){return new qS(t).contentType}function Vj(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sa{constructor(e,n){let r=0,i="";mw(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(mw(this.data_)){const r=this.data_,i=jj(r,e,n);return i===null?null:new Sa(i)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new Sa(r,!0)}}static getBlob(...e){if(Qv()){const n=e.map(r=>r instanceof Sa?r.data_:r);return new Sa(Rj.apply(null,n))}else{const n=e.map(o=>tg(o)?Oj(js.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new Sa(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zS(t){let e;try{e=JSON.parse(t)}catch{return null}return Ej(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bj(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function qj(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function $S(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zj(t,e){return e}class Ur{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||zj}}let Uf=null;function $j(t){return!tg(t)||t.length<2?t:$S(t)}function HS(){if(Uf)return Uf;const t=[];t.push(new Ur("bucket")),t.push(new Ur("generation")),t.push(new Ur("metageneration")),t.push(new Ur("name","fullPath",!0));function e(s,o){return $j(o)}const n=new Ur("name");n.xform=e,t.push(n);function r(s,o){return o!==void 0?Number(o):o}const i=new Ur("size");return i.xform=r,t.push(i),t.push(new Ur("timeCreated")),t.push(new Ur("updated")),t.push(new Ur("md5Hash",null,!0)),t.push(new Ur("cacheControl",null,!0)),t.push(new Ur("contentDisposition",null,!0)),t.push(new Ur("contentEncoding",null,!0)),t.push(new Ur("contentLanguage",null,!0)),t.push(new Ur("contentType",null,!0)),t.push(new Ur("metadata","customMetadata",!0)),Uf=t,Uf}function Hj(t,e){function n(){const r=t.bucket,i=t.fullPath,s=new bi(r,i);return e._makeStorageReference(s)}Object.defineProperty(t,"ref",{get:n})}function Wj(t,e,n){const r={};r.type="file";const i=n.length;for(let s=0;s<i;s++){const o=n[s];r[o.local]=o.xform(r,e[o.server])}return Hj(r,t),r}function WS(t,e,n){const r=zS(e);return r===null?null:Wj(t,r,n)}function Gj(t,e,n,r){const i=zS(e);if(i===null||!tg(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(u=>{const h=t.bucket,f=t.fullPath,m="/b/"+o(h)+"/o/"+o(f),p=Wc(m,n,r),b=MS({alt:"media",token:u});return p+b})[0]}function GS(t,e){const n={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(n[s.server]=t[s.local])}return JSON.stringify(n)}class ou{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ao(t){if(!t)throw Kv()}function Yv(t,e){function n(r,i){const s=WS(t,i,e);return Ao(s!==null),s}return n}function Kj(t,e){function n(r,i){const s=WS(t,i,e);return Ao(s!==null),Gj(s,i,t.host,t._protocol)}return n}function zd(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=hj():i=cj():n.getStatus()===402?i=uj(t.bucket):n.getStatus()===403?i=dj(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function Xv(t){const e=zd(t);function n(r,i){let s=e(r,i);return r.getStatus()===404&&(s=lj(t.path)),s.serverResponse=i.serverResponse,s}return n}function Qj(t,e,n){const r=e.fullServerUrl(),i=Wc(r,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,a=new ou(i,s,Yv(t,n),o);return a.errorHandler=Xv(e),a}function Yj(t,e,n){const r=e.fullServerUrl(),i=Wc(r,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,a=new ou(i,s,Kj(t,n),o);return a.errorHandler=Xv(e),a}function Xj(t,e){const n=e.fullServerUrl(),r=Wc(n,t.host,t._protocol),i="DELETE",s=t.maxOperationRetryTime;function o(l,u){}const a=new ou(r,i,o,s);return a.successCodes=[200,204],a.errorHandler=Xv(e),a}function Jj(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function KS(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=Jj(null,e)),r}function Zj(t,e,n,r,i){const s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let C="";for(let M=0;M<2;M++)C=C+Math.random().toString().slice(2);return C}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const u=KS(e,r,i),h=GS(u,n),f="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+h+`\r
--`+l+`\r
Content-Type: `+u.contentType+`\r
\r
`,m=`\r
--`+l+"--",p=Sa.getBlob(f,r,m);if(p===null)throw OS();const b={name:u.fullPath},E=Wc(s,t.host,t._protocol),k="POST",w=t.maxUploadRetryTime,x=new ou(E,k,Yv(t,n),w);return x.urlParams=b,x.headers=o,x.body=p.uploadData(),x.errorHandler=zd(e),x}class im{constructor(e,n,r,i){this.current=e,this.total=n,this.finalized=!!r,this.metadata=i||null}}function Jv(t,e){let n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch{Ao(!1)}return Ao(!!n&&(e||["active"]).indexOf(n)!==-1),n}function e7(t,e,n,r,i){const s=e.bucketOnlyServerUrl(),o=KS(e,r,i),a={name:o.fullPath},l=Wc(s,t.host,t._protocol),u="POST",h={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},f=GS(o,n),m=t.maxUploadRetryTime;function p(E){Jv(E);let k;try{k=E.getResponseHeader("X-Goog-Upload-URL")}catch{Ao(!1)}return Ao(tg(k)),k}const b=new ou(l,u,p,m);return b.urlParams=a,b.headers=h,b.body=f,b.errorHandler=zd(e),b}function t7(t,e,n,r){const i={"X-Goog-Upload-Command":"query"};function s(u){const h=Jv(u,["active","final"]);let f=null;try{f=u.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Ao(!1)}f||Ao(!1);const m=Number(f);return Ao(!isNaN(m)),new im(m,r.size(),h==="final")}const o="POST",a=t.maxUploadRetryTime,l=new ou(n,o,s,a);return l.headers=i,l.errorHandler=zd(e),l}const vw=256*1024;function n7(t,e,n,r,i,s,o,a){const l=new im(0,0);if(o?(l.current=o.current,l.total=o.total):(l.current=0,l.total=r.size()),r.size()!==l.total)throw gj();const u=l.total-l.current;let h=u;i>0&&(h=Math.min(h,i));const f=l.current,m=f+h;let p="";h===0?p="finalize":u===h?p="upload, finalize":p="upload";const b={"X-Goog-Upload-Command":p,"X-Goog-Upload-Offset":`${l.current}`},E=r.slice(f,m);if(E===null)throw OS();function k(M,Q){const z=Jv(M,["active","final"]),L=l.current+h,y=r.size();let N;return z==="final"?N=Yv(e,s)(M,Q):N=null,new im(L,y,z==="final",N)}const w="POST",x=e.maxUploadRetryTime,C=new ou(n,w,k,x);return C.headers=b,C.body=E.uploadData(),C.progressCallback=a||null,C.errorHandler=zd(t),C}const ei={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function c1(t){switch(t){case"running":case"pausing":case"canceling":return ei.RUNNING;case"paused":return ei.PAUSED;case"success":return ei.SUCCESS;case"canceled":return ei.CANCELED;case"error":return ei.ERROR;default:return ei.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r7{constructor(e,n,r){if(Aj(e)||n!=null||r!=null)this.next=e,this.error=n??void 0,this.complete=r??void 0;else{const s=e;this.next=s.next,this.error=s.error,this.complete=s.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ru(t){return(...e)=>{Promise.resolve().then(()=>t(...e))}}class i7{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Ol.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Ol.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Ol.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i){if(this.sent_)throw wh("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw wh("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw wh("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw wh("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw wh("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class s7 extends i7{initXhr(){this.xhr_.responseType="text"}}function Nl(){return new s7}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o7{constructor(e,n,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=n,this._metadata=r,this._mappings=HS(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals(dn.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const s=this.isExponentialBackoffExpired();if(US(i.status,[]))if(s)i=jS();else{this.sleepTime=Math.max(this.sleepTime*2,aj),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals(dn.CANCELED)?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,s)=>{this._resolve=i,this._reject=s,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return n=>this._updateProgress(e+n)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,r])=>{switch(this._state){case"running":e(n,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,n)=>{const r=e7(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Nl,e,n);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((n,r)=>{const i=t7(this._ref.storage,this._ref._location,e,this._blob),s=this._ref.storage._makeRequest(i,Nl,n,r);this._request=s,s.getPromise().then(o=>{o=o,this._request=void 0,this._updateProgress(o.current),this._needToFetchStatus=!1,o.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=vw*this._chunkMultiplier,n=new im(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,s)=>{let o;try{o=n7(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,n,this._makeProgressCallback())}catch(l){this._error=l,this._transition("error");return}const a=this._ref.storage._makeRequest(o,Nl,i,s,!1);this._request=a,a.getPromise().then(l=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(l.current),l.finalized?(this._metadata=l.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){vw*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,n)=>{const r=Qj(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,Nl,e,n);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,n)=>{const r=Zj(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Nl,e,n);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const n=this._transferred;this._transferred=e,this._transferred!==n&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const n=this._state==="paused";this._state=e,n&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=DS(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=c1(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,n,r,i){const s=new r7(n||void 0,r||void 0,i||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(e,n){return this._promise.then(e,n)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const n=this._observers.indexOf(e);n!==-1&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(c1(this._state)){case ei.SUCCESS:Ru(this._resolve.bind(null,this.snapshot))();break;case ei.CANCELED:case ei.ERROR:const n=this._reject;Ru(n.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(c1(this._state)){case ei.RUNNING:case ei.PAUSED:e.next&&Ru(e.next.bind(e,this.snapshot))();break;case ei.SUCCESS:e.complete&&Ru(e.complete.bind(e))();break;case ei.CANCELED:case ei.ERROR:e.error&&Ru(e.error.bind(e,this._error))();break;default:e.error&&Ru(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ql{constructor(e,n){this._service=e,n instanceof bi?this._location=n:this._location=bi.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Ql(e,n)}get root(){const e=new bi(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return $S(this._location.path)}get storage(){return this._service}get parent(){const e=Bj(this._location.path);if(e===null)return null;const n=new bi(this._location.bucket,e);return new Ql(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw _j(e)}}function a7(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new o7(t,new Sa(e),n)}function l7(t){t._throwIfRoot("getDownloadURL");const e=Yj(t.storage,t._location,HS());return t.storage.makeRequestWithTokens(e,Nl).then(n=>{if(n===null)throw vj();return n})}function u7(t){t._throwIfRoot("deleteObject");const e=Xj(t.storage,t._location);return t.storage.makeRequestWithTokens(e,Nl)}function c7(t,e){const n=qj(t._location.path,e),r=new bi(t._location.bucket,n);return new Ql(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h7(t){return/^[A-Za-z]+:\/\//.test(t)}function d7(t,e){return new Ql(t,e)}function QS(t,e){if(t instanceof Zv){const n=t;if(n._bucket==null)throw mj();const r=new Ql(n,n._bucket);return e!=null?QS(r,e):r}else return e!==void 0?c7(t,e):t}function f7(t,e){if(e&&h7(e)){if(t instanceof Zv)return d7(t,e);throw H0("To use ref(service, url), the first argument must be a Storage instance.")}else return QS(t,e)}function yw(t,e){const n=e==null?void 0:e[RS];return n==null?null:bi.makeFromBucketSpec(n,t)}function p7(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:S3(i,t.app.options.projectId))}class Zv{constructor(e,n,r,i,s){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=LS,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=sj,this._maxUploadRetryTime=oj,this._requests=new Set,i!=null?this._bucket=bi.makeFromBucketSpec(i,this._host):this._bucket=yw(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=bi.makeFromBucketSpec(this._url,e):this._bucket=yw(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){gw("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){gw("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Ql(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new wj(FS());{const o=Cj(e,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const _w="@firebase/storage",ww="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YS="storage";function XS(t,e,n){return t=_n(t),a7(t,e,n)}function JS(t){return t=_n(t),l7(t)}function m7(t){return t=_n(t),u7(t)}function ey(t,e){return t=_n(t),f7(t,e)}function g7(t=nv(),e){t=_n(t);const r=Lm(t,YS).getImmediate({identifier:e}),i=w3("storage");return i&&v7(r,...i),r}function v7(t,e,n,r={}){p7(t,e,n,r)}function y7(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new Zv(n,r,i,e,Jl)}function _7(){zl(new $a(YS,y7,"PUBLIC").setMultipleInstances(!0)),Ms(_w,ww,""),Ms(_w,ww,"esm2017")}_7();const w7={apiKey:"AIzaSyAcdG_9cM9yzmeMOFx-fhL4QAf9_wM3Yjo",authDomain:"achandymand-145da.firebaseapp.com",projectId:"achandymand-145da",storageBucket:"achandymand-145da.firebasestorage.app",messagingSenderId:"865306374889",appId:"1:865306374889:web:be1bc2500f388596de7678"},ty=N3(w7),ny=tL(ty),jt=z8(ty),ry=g7(ty);function b7(){const[t,e]=de.useState(""),[n,r]=de.useState(""),[i,s]=de.useState(""),[o,a]=de.useState(!1),l=Uc(),u=async h=>{h.preventDefault(),s(""),a(!0);try{await V6(ny,t,n),l("/timeregistrering")}catch(f){console.error("Login error:",f);let m="Der opstod en fejl ved login. Prv igen.";f.code==="auth/user-not-found"||f.code==="auth/wrong-password"?m="Forkert brugernavn eller adgangskode.":f.code==="auth/invalid-email"?m="Ugyldig e-mailadresse.":f.code==="auth/too-many-requests"&&(m="For mange forsg. Prv igen senere."),s(m)}finally{a(!1)}};return v.jsx("div",{className:"login-container",children:v.jsxs("div",{className:"login-box",children:[v.jsxs("div",{className:"login-logo",children:[v.jsx("h1",{children:"AC Handymand"}),v.jsx("p",{children:"Timeregistrering System"})]}),v.jsxs("form",{className:"login-form",onSubmit:u,children:[i&&v.jsx("div",{className:"error-message",children:i}),v.jsxs("div",{className:"form-group",children:[v.jsx("label",{htmlFor:"email",children:"Brugernavn (E-mail)"}),v.jsx("input",{type:"email",id:"email",value:t,onChange:h=>e(h.target.value),required:!0,disabled:o,placeholder:"din@email.dk"})]}),v.jsxs("div",{className:"form-group",children:[v.jsx("label",{htmlFor:"password",children:"Adgangskode"}),v.jsx("input",{type:"password",id:"password",value:n,onChange:h=>r(h.target.value),required:!0,disabled:o,placeholder:""})]}),v.jsx("button",{type:"submit",className:"btn-login",disabled:o,children:o?"Logger ind...":"Log ind"})]})]})})}const x7=["Sndag","Mandag","Tirsdag","Onsdag","Torsdag","Fredag","Lrdag"],sm=["Januar","Februar","Marts","April","Maj","Juni","Juli","August","September","Oktober","November","December"];function S7(t){return x7[t.getDay()]}function A7(t){const e=t.getDay();return e===0||e===6}function E7(t,e){const n=[];let r=new Date(t,e,20);const i=e===11?0:e+1,s=e===11?t+1:t,o=new Date(s,i,19);for(;r<=o;)n.push({date:new Date(r),dayOfMonth:r.getDate(),month:r.getMonth(),year:r.getFullYear(),weekday:S7(r),isWeekend:A7(r),formattedDate:`${String(r.getDate()).padStart(2,"0")}.${String(r.getMonth()+1).padStart(2,"0")}`}),r.setDate(r.getDate()+1);return n}function ZS(t){const e=t===11?0:t+1;return`${sm[t]} / ${sm[e]}`}function eA(t,e){return e===11?`${t} / ${t+1}`:String(t)}function N7(){return sm.map((t,e)=>{const n=e===11?0:e+1;return{value:e,label:`${t} / ${sm[n]}`}})}const I7="modulepreload",T7=function(t){return"/"+t},bw={},W0=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(n.map(l=>{if(l=T7(l),l in bw)return;bw[l]=!0;const u=l.endsWith(".css"),h=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${h}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":I7,u||(f.as="script"),f.crossOrigin="",f.href=l,a&&f.setAttribute("nonce",a),document.head.appendChild(f),u)return new Promise((m,p)=>{f.addEventListener("load",m),f.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})};function Gt(t){"@babel/helpers - typeof";return Gt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gt(t)}var Tr=Uint8Array,xi=Uint16Array,iy=Int32Array,ng=new Tr([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),rg=new Tr([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),G0=new Tr([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),tA=function(t,e){for(var n=new xi(31),r=0;r<31;++r)n[r]=e+=1<<t[r-1];for(var i=new iy(n[30]),r=1;r<30;++r)for(var s=n[r];s<n[r+1];++s)i[s]=s-n[r]<<5|r;return{b:n,r:i}},nA=tA(ng,2),rA=nA.b,K0=nA.r;rA[28]=258,K0[258]=28;var iA=tA(rg,0),k7=iA.b,xw=iA.r,Q0=new xi(32768);for(var cn=0;cn<32768;++cn){var fa=(cn&43690)>>1|(cn&21845)<<1;fa=(fa&52428)>>2|(fa&13107)<<2,fa=(fa&61680)>>4|(fa&3855)<<4,Q0[cn]=((fa&65280)>>8|(fa&255)<<8)>>1}var zs=function(t,e,n){for(var r=t.length,i=0,s=new xi(e);i<r;++i)t[i]&&++s[t[i]-1];var o=new xi(e);for(i=1;i<e;++i)o[i]=o[i-1]+s[i-1]<<1;var a;if(n){a=new xi(1<<e);var l=15-e;for(i=0;i<r;++i)if(t[i])for(var u=i<<4|t[i],h=e-t[i],f=o[t[i]-1]++<<h,m=f|(1<<h)-1;f<=m;++f)a[Q0[f]>>l]=u}else for(a=new xi(r),i=0;i<r;++i)t[i]&&(a[i]=Q0[o[t[i]-1]++]>>15-t[i]);return a},Ka=new Tr(288);for(var cn=0;cn<144;++cn)Ka[cn]=8;for(var cn=144;cn<256;++cn)Ka[cn]=9;for(var cn=256;cn<280;++cn)Ka[cn]=7;for(var cn=280;cn<288;++cn)Ka[cn]=8;var Ed=new Tr(32);for(var cn=0;cn<32;++cn)Ed[cn]=5;var P7=zs(Ka,9,0),C7=zs(Ka,9,1),L7=zs(Ed,5,0),R7=zs(Ed,5,1),h1=function(t){for(var e=t[0],n=1;n<t.length;++n)t[n]>e&&(e=t[n]);return e},es=function(t,e,n){var r=e/8|0;return(t[r]|t[r+1]<<8)>>(e&7)&n},d1=function(t,e){var n=e/8|0;return(t[n]|t[n+1]<<8|t[n+2]<<16)>>(e&7)},sy=function(t){return(t+7)/8|0},sA=function(t,e,n){return(n==null||n>t.length)&&(n=t.length),new Tr(t.subarray(e,n))},j7=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],is=function(t,e,n){var r=new Error(e||j7[t]);if(r.code=t,Error.captureStackTrace&&Error.captureStackTrace(r,is),!n)throw r;return r},D7=function(t,e,n,r){var i=t.length,s=0;if(!i||e.f&&!e.l)return n||new Tr(0);var o=!n,a=o||e.i!=2,l=e.i;o&&(n=new Tr(i*3));var u=function(Ee){var je=n.length;if(Ee>je){var Ue=new Tr(Math.max(je*2,Ee));Ue.set(n),n=Ue}},h=e.f||0,f=e.p||0,m=e.b||0,p=e.l,b=e.d,E=e.m,k=e.n,w=i*8;do{if(!p){h=es(t,f,1);var x=es(t,f+1,3);if(f+=3,x)if(x==1)p=C7,b=R7,E=9,k=5;else if(x==2){var z=es(t,f,31)+257,L=es(t,f+10,15)+4,y=z+es(t,f+5,31)+1;f+=14;for(var N=new Tr(y),R=new Tr(19),A=0;A<L;++A)R[G0[A]]=es(t,f+A*3,7);f+=L*3;for(var I=h1(R),P=(1<<I)-1,V=zs(R,I,1),A=0;A<y;){var J=V[es(t,f,P)];f+=J&15;var C=J>>4;if(C<16)N[A++]=C;else{var O=0,U=0;for(C==16?(U=3+es(t,f,3),f+=2,O=N[A-1]):C==17?(U=3+es(t,f,7),f+=3):C==18&&(U=11+es(t,f,127),f+=7);U--;)N[A++]=O}}var W=N.subarray(0,z),ee=N.subarray(z);E=h1(W),k=h1(ee),p=zs(W,E,1),b=zs(ee,k,1)}else is(1);else{var C=sy(f)+4,M=t[C-4]|t[C-3]<<8,Q=C+M;if(Q>i){l&&is(0);break}a&&u(m+M),n.set(t.subarray(C,Q),m),e.b=m+=M,e.p=f=Q*8,e.f=h;continue}if(f>w){l&&is(0);break}}a&&u(m+131072);for(var re=(1<<E)-1,xe=(1<<k)-1,F=f;;F=f){var O=p[d1(t,f)&re],G=O>>4;if(f+=O&15,f>w){l&&is(0);break}if(O||is(2),G<256)n[m++]=G;else if(G==256){F=f,p=null;break}else{var Y=G-254;if(G>264){var A=G-257,Z=ng[A];Y=es(t,f,(1<<Z)-1)+rA[A],f+=Z}var ae=b[d1(t,f)&xe],ie=ae>>4;ae||is(3),f+=ae&15;var ee=k7[ie];if(ie>3){var Z=rg[ie];ee+=d1(t,f)&(1<<Z)-1,f+=Z}if(f>w){l&&is(0);break}a&&u(m+131072);var ce=m+Y;if(m<ee){var fe=s-ee,Ie=Math.min(ee,ce);for(fe+m<0&&is(3);m<Ie;++m)n[m]=r[fe+m]}for(;m<ce;++m)n[m]=n[m-ee]}}e.l=p,e.p=F,e.b=m,e.f=h,p&&(h=1,e.m=E,e.d=b,e.n=k)}while(!h);return m!=n.length&&o?sA(n,0,m):n.subarray(0,m)},fo=function(t,e,n){n<<=e&7;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8},bh=function(t,e,n){n<<=e&7;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8,t[r+2]|=n>>16},f1=function(t,e){for(var n=[],r=0;r<t.length;++r)t[r]&&n.push({s:r,f:t[r]});var i=n.length,s=n.slice();if(!i)return{t:aA,l:0};if(i==1){var o=new Tr(n[0].s+1);return o[n[0].s]=1,{t:o,l:1}}n.sort(function(Q,z){return Q.f-z.f}),n.push({s:-1,f:25001});var a=n[0],l=n[1],u=0,h=1,f=2;for(n[0]={s:-1,f:a.f+l.f,l:a,r:l};h!=i-1;)a=n[n[u].f<n[f].f?u++:f++],l=n[u!=h&&n[u].f<n[f].f?u++:f++],n[h++]={s:-1,f:a.f+l.f,l:a,r:l};for(var m=s[0].s,r=1;r<i;++r)s[r].s>m&&(m=s[r].s);var p=new xi(m+1),b=Y0(n[h-1],p,0);if(b>e){var r=0,E=0,k=b-e,w=1<<k;for(s.sort(function(z,L){return p[L.s]-p[z.s]||z.f-L.f});r<i;++r){var x=s[r].s;if(p[x]>e)E+=w-(1<<b-p[x]),p[x]=e;else break}for(E>>=k;E>0;){var C=s[r].s;p[C]<e?E-=1<<e-p[C]++-1:++r}for(;r>=0&&E;--r){var M=s[r].s;p[M]==e&&(--p[M],++E)}b=e}return{t:new Tr(p),l:b}},Y0=function(t,e,n){return t.s==-1?Math.max(Y0(t.l,e,n+1),Y0(t.r,e,n+1)):e[t.s]=n},Sw=function(t){for(var e=t.length;e&&!t[--e];);for(var n=new xi(++e),r=0,i=t[0],s=1,o=function(l){n[r++]=l},a=1;a<=e;++a)if(t[a]==i&&a!=e)++s;else{if(!i&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(i),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(i);s=1,i=t[a]}return{c:n.subarray(0,r),n:e}},xh=function(t,e){for(var n=0,r=0;r<e.length;++r)n+=t[r]*e[r];return n},oA=function(t,e,n){var r=n.length,i=sy(e+2);t[i]=r&255,t[i+1]=r>>8,t[i+2]=t[i]^255,t[i+3]=t[i+1]^255;for(var s=0;s<r;++s)t[i+s+4]=n[s];return(i+4+r)*8},Aw=function(t,e,n,r,i,s,o,a,l,u,h){fo(e,h++,n),++i[256];for(var f=f1(i,15),m=f.t,p=f.l,b=f1(s,15),E=b.t,k=b.l,w=Sw(m),x=w.c,C=w.n,M=Sw(E),Q=M.c,z=M.n,L=new xi(19),y=0;y<x.length;++y)++L[x[y]&31];for(var y=0;y<Q.length;++y)++L[Q[y]&31];for(var N=f1(L,7),R=N.t,A=N.l,I=19;I>4&&!R[G0[I-1]];--I);var P=u+5<<3,V=xh(i,Ka)+xh(s,Ed)+o,J=xh(i,m)+xh(s,E)+o+14+3*I+xh(L,R)+2*L[16]+3*L[17]+7*L[18];if(l>=0&&P<=V&&P<=J)return oA(e,h,t.subarray(l,l+u));var O,U,W,ee;if(fo(e,h,1+(J<V)),h+=2,J<V){O=zs(m,p,0),U=m,W=zs(E,k,0),ee=E;var re=zs(R,A,0);fo(e,h,C-257),fo(e,h+5,z-1),fo(e,h+10,I-4),h+=14;for(var y=0;y<I;++y)fo(e,h+3*y,R[G0[y]]);h+=3*I;for(var xe=[x,Q],F=0;F<2;++F)for(var G=xe[F],y=0;y<G.length;++y){var Y=G[y]&31;fo(e,h,re[Y]),h+=R[Y],Y>15&&(fo(e,h,G[y]>>5&127),h+=G[y]>>12)}}else O=P7,U=Ka,W=L7,ee=Ed;for(var y=0;y<a;++y){var Z=r[y];if(Z>255){var Y=Z>>18&31;bh(e,h,O[Y+257]),h+=U[Y+257],Y>7&&(fo(e,h,Z>>23&31),h+=ng[Y]);var ae=Z&31;bh(e,h,W[ae]),h+=ee[ae],ae>3&&(bh(e,h,Z>>5&8191),h+=rg[ae])}else bh(e,h,O[Z]),h+=U[Z]}return bh(e,h,O[256]),h+U[256]},O7=new iy([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),aA=new Tr(0),F7=function(t,e,n,r,i,s){var o=s.z||t.length,a=new Tr(r+o+5*(1+Math.ceil(o/7e3))+i),l=a.subarray(r,a.length-i),u=s.l,h=(s.r||0)&7;if(e){h&&(l[0]=s.r>>3);for(var f=O7[e-1],m=f>>13,p=f&8191,b=(1<<n)-1,E=s.p||new xi(32768),k=s.h||new xi(b+1),w=Math.ceil(n/3),x=2*w,C=function(Ye){return(t[Ye]^t[Ye+1]<<w^t[Ye+2]<<x)&b},M=new iy(25e3),Q=new xi(288),z=new xi(32),L=0,y=0,N=s.i||0,R=0,A=s.w||0,I=0;N+2<o;++N){var P=C(N),V=N&32767,J=k[P];if(E[V]=J,k[P]=V,A<=N){var O=o-N;if((L>7e3||R>24576)&&(O>423||!u)){h=Aw(t,l,0,M,Q,z,y,R,I,N-I,h),R=L=y=0,I=N;for(var U=0;U<286;++U)Q[U]=0;for(var U=0;U<30;++U)z[U]=0}var W=2,ee=0,re=p,xe=V-J&32767;if(O>2&&P==C(N-xe))for(var F=Math.min(m,O)-1,G=Math.min(32767,N),Y=Math.min(258,O);xe<=G&&--re&&V!=J;){if(t[N+W]==t[N+W-xe]){for(var Z=0;Z<Y&&t[N+Z]==t[N+Z-xe];++Z);if(Z>W){if(W=Z,ee=xe,Z>F)break;for(var ae=Math.min(xe,Z-2),ie=0,U=0;U<ae;++U){var ce=N-xe+U&32767,fe=E[ce],Ie=ce-fe&32767;Ie>ie&&(ie=Ie,J=ce)}}}V=J,J=E[V],xe+=V-J&32767}if(ee){M[R++]=268435456|K0[W]<<18|xw[ee];var Ee=K0[W]&31,je=xw[ee]&31;y+=ng[Ee]+rg[je],++Q[257+Ee],++z[je],A=N+W,++L}else M[R++]=t[N],++Q[t[N]]}}for(N=Math.max(N,A);N<o;++N)M[R++]=t[N],++Q[t[N]];h=Aw(t,l,u,M,Q,z,y,R,I,N-I,h),u||(s.r=h&7|l[h/8|0]<<3,h-=7,s.h=k,s.p=E,s.i=N,s.w=A)}else{for(var N=s.w||0;N<o+u;N+=65535){var Ue=N+65535;Ue>=o&&(l[h/8|0]=u,Ue=o),h=oA(l,h+1,t.subarray(N,Ue))}s.i=o}return sA(a,0,r+sy(h)+i)},lA=function(){var t=1,e=0;return{p:function(n){for(var r=t,i=e,s=n.length|0,o=0;o!=s;){for(var a=Math.min(o+2655,s);o<a;++o)i+=r+=n[o];r=(r&65535)+15*(r>>16),i=(i&65535)+15*(i>>16)}t=r,e=i},d:function(){return t%=65521,e%=65521,(t&255)<<24|(t&65280)<<8|(e&255)<<8|e>>8}}},M7=function(t,e,n,r,i){if(!i&&(i={l:1},e.dictionary)){var s=e.dictionary.subarray(-32768),o=new Tr(s.length+t.length);o.set(s),o.set(t,s.length),t=o,i.w=s.length}return F7(t,e.level==null?6:e.level,e.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+e.mem,n,r,i)},uA=function(t,e,n){for(;n;++e)t[e]=n,n>>>=8},U7=function(t,e){var n=e.level,r=n==0?0:n<6?1:n==9?3:2;if(t[0]=120,t[1]=r<<6|(e.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,e.dictionary){var i=lA();i.p(e.dictionary),uA(t,2,i.d())}},V7=function(t,e){return((t[0]&15)!=8||t[0]>>4>7||(t[0]<<8|t[1])%31)&&is(6,"invalid zlib data"),(t[1]>>5&1)==1&&is(6,"invalid zlib data: "+(t[1]&32?"need":"unexpected")+" dictionary"),(t[1]>>3&4)+2};function X0(t,e){e||(e={});var n=lA();n.p(t);var r=M7(t,e,e.dictionary?6:2,4);return U7(r,e),uA(r,r.length-4,n.d()),r}function B7(t,e){return D7(t.subarray(V7(t),-4),{i:2},e,e)}var q7=typeof TextDecoder<"u"&&new TextDecoder,z7=0;try{q7.decode(aA,{stream:!0}),z7=1}catch{}var ft=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function p1(){ft.console&&typeof ft.console.log=="function"&&ft.console.log.apply(ft.console,arguments)}var en={log:p1,warn:function(t){ft.console&&(typeof ft.console.warn=="function"?ft.console.warn.apply(ft.console,arguments):p1.call(null,arguments))},error:function(t){ft.console&&(typeof ft.console.error=="function"?ft.console.error.apply(ft.console,arguments):p1(t))}};function m1(t,e,n){var r=new XMLHttpRequest;r.open("GET",t),r.responseType="blob",r.onload=function(){El(r.response,e,n)},r.onerror=function(){en.error("could not download file")},r.send()}function Ew(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function Vf(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var Qh,J0,El=ft.saveAs||((typeof window>"u"?"undefined":Gt(window))!=="object"||window!==ft?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,e,n){var r=ft.URL||ft.webkitURL,i=document.createElement("a");e=e||t.name||"download",i.download=e,i.rel="noopener",typeof t=="string"?(i.href=t,i.origin!==location.origin?Ew(i.href)?m1(t,e,n):Vf(i,i.target="_blank"):Vf(i)):(i.href=r.createObjectURL(t),setTimeout(function(){r.revokeObjectURL(i.href)},4e4),setTimeout(function(){Vf(i)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,n){if(e=e||t.name||"download",typeof t=="string")if(Ew(t))m1(t,e,n);else{var r=document.createElement("a");r.href=t,r.target="_blank",setTimeout(function(){Vf(r)})}else navigator.msSaveOrOpenBlob(function(i,s){return s===void 0?s={autoBom:!1}:Gt(s)!=="object"&&(en.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i}(t,n),e)}:function(t,e,n,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof t=="string")return m1(t,e,n);var i=t.type==="application/octet-stream",s=/constructor/i.test(ft.HTMLElement)||ft.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||i&&s)&&(typeof FileReader>"u"?"undefined":Gt(FileReader))==="object"){var a=new FileReader;a.onloadend=function(){var h=a.result;h=o?h:h.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=h:location=h,r=null},a.readAsDataURL(t)}else{var l=ft.URL||ft.webkitURL,u=l.createObjectURL(t);r?r.location=u:location.href=u,r=null,setTimeout(function(){l.revokeObjectURL(u)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function cA(t){var e;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(a){return[parseInt(a[1]),parseInt(a[2]),parseInt(a[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}}],r=0;r<n.length;r++){var i=n[r].re,s=n[r].process,o=i.exec(t);o&&(e=s(o),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var a=this.r.toString(16),l=this.g.toString(16),u=this.b.toString(16);return a.length==1&&(a="0"+a),l.length==1&&(l="0"+l),u.length==1&&(u="0"+u),"#"+a+l+u}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function g1(t,e){var n=t[0],r=t[1],i=t[2],s=t[3];n=br(n,r,i,s,e[0],7,-680876936),s=br(s,n,r,i,e[1],12,-389564586),i=br(i,s,n,r,e[2],17,606105819),r=br(r,i,s,n,e[3],22,-1044525330),n=br(n,r,i,s,e[4],7,-176418897),s=br(s,n,r,i,e[5],12,1200080426),i=br(i,s,n,r,e[6],17,-1473231341),r=br(r,i,s,n,e[7],22,-45705983),n=br(n,r,i,s,e[8],7,1770035416),s=br(s,n,r,i,e[9],12,-1958414417),i=br(i,s,n,r,e[10],17,-42063),r=br(r,i,s,n,e[11],22,-1990404162),n=br(n,r,i,s,e[12],7,1804603682),s=br(s,n,r,i,e[13],12,-40341101),i=br(i,s,n,r,e[14],17,-1502002290),n=xr(n,r=br(r,i,s,n,e[15],22,1236535329),i,s,e[1],5,-165796510),s=xr(s,n,r,i,e[6],9,-1069501632),i=xr(i,s,n,r,e[11],14,643717713),r=xr(r,i,s,n,e[0],20,-373897302),n=xr(n,r,i,s,e[5],5,-701558691),s=xr(s,n,r,i,e[10],9,38016083),i=xr(i,s,n,r,e[15],14,-660478335),r=xr(r,i,s,n,e[4],20,-405537848),n=xr(n,r,i,s,e[9],5,568446438),s=xr(s,n,r,i,e[14],9,-1019803690),i=xr(i,s,n,r,e[3],14,-187363961),r=xr(r,i,s,n,e[8],20,1163531501),n=xr(n,r,i,s,e[13],5,-1444681467),s=xr(s,n,r,i,e[2],9,-51403784),i=xr(i,s,n,r,e[7],14,1735328473),n=Sr(n,r=xr(r,i,s,n,e[12],20,-1926607734),i,s,e[5],4,-378558),s=Sr(s,n,r,i,e[8],11,-2022574463),i=Sr(i,s,n,r,e[11],16,1839030562),r=Sr(r,i,s,n,e[14],23,-35309556),n=Sr(n,r,i,s,e[1],4,-1530992060),s=Sr(s,n,r,i,e[4],11,1272893353),i=Sr(i,s,n,r,e[7],16,-155497632),r=Sr(r,i,s,n,e[10],23,-1094730640),n=Sr(n,r,i,s,e[13],4,681279174),s=Sr(s,n,r,i,e[0],11,-358537222),i=Sr(i,s,n,r,e[3],16,-722521979),r=Sr(r,i,s,n,e[6],23,76029189),n=Sr(n,r,i,s,e[9],4,-640364487),s=Sr(s,n,r,i,e[12],11,-421815835),i=Sr(i,s,n,r,e[15],16,530742520),n=Ar(n,r=Sr(r,i,s,n,e[2],23,-995338651),i,s,e[0],6,-198630844),s=Ar(s,n,r,i,e[7],10,1126891415),i=Ar(i,s,n,r,e[14],15,-1416354905),r=Ar(r,i,s,n,e[5],21,-57434055),n=Ar(n,r,i,s,e[12],6,1700485571),s=Ar(s,n,r,i,e[3],10,-1894986606),i=Ar(i,s,n,r,e[10],15,-1051523),r=Ar(r,i,s,n,e[1],21,-2054922799),n=Ar(n,r,i,s,e[8],6,1873313359),s=Ar(s,n,r,i,e[15],10,-30611744),i=Ar(i,s,n,r,e[6],15,-1560198380),r=Ar(r,i,s,n,e[13],21,1309151649),n=Ar(n,r,i,s,e[4],6,-145523070),s=Ar(s,n,r,i,e[11],10,-1120210379),i=Ar(i,s,n,r,e[2],15,718787259),r=Ar(r,i,s,n,e[9],21,-343485551),t[0]=Ta(n,t[0]),t[1]=Ta(r,t[1]),t[2]=Ta(i,t[2]),t[3]=Ta(s,t[3])}function ig(t,e,n,r,i,s){return e=Ta(Ta(e,t),Ta(r,s)),Ta(e<<i|e>>>32-i,n)}function br(t,e,n,r,i,s,o){return ig(e&n|~e&r,t,e,i,s,o)}function xr(t,e,n,r,i,s,o){return ig(e&r|n&~r,t,e,i,s,o)}function Sr(t,e,n,r,i,s,o){return ig(e^n^r,t,e,i,s,o)}function Ar(t,e,n,r,i,s,o){return ig(n^(e|~r),t,e,i,s,o)}function hA(t){var e,n=t.length,r=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)g1(r,$7(t.substring(e-64,e)));t=t.substring(e-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)i[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(i[e>>2]|=128<<(e%4<<3),e>55)for(g1(r,i),e=0;e<16;e++)i[e]=0;return i[14]=8*n,g1(r,i),r}function $7(t){var e,n=[];for(e=0;e<64;e+=4)n[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return n}Qh=ft.atob.bind(ft),J0=ft.btoa.bind(ft);var Nw="0123456789abcdef".split("");function H7(t){for(var e="",n=0;n<4;n++)e+=Nw[t>>8*n+4&15]+Nw[t>>8*n&15];return e}function W7(t){return String.fromCharCode((255&t)>>0,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function Z0(t){return hA(t).map(W7).join("")}var G7=function(t){for(var e=0;e<t.length;e++)t[e]=H7(t[e]);return t.join("")}(hA("hello"))!="5d41402abc4b2a76b9719d911017c592";function Ta(t,e){if(G7){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}return t+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function e2(t,e){var n,r,i,s;if(t!==n){for(var o=(i=t,s=1+(256/t.length>>0),new Array(s+1).join(i)),a=[],l=0;l<256;l++)a[l]=l;var u=0;for(l=0;l<256;l++){var h=a[l];u=(u+h+o.charCodeAt(l))%256,a[l]=a[u],a[u]=h}n=t,r=a}else a=r;var f=e.length,m=0,p=0,b="";for(l=0;l<f;l++)p=(p+(h=a[m=(m+1)%256]))%256,a[m]=a[p],a[p]=h,o=a[(a[m]+a[p])%256],b+=String.fromCharCode(e.charCodeAt(l)^o);return b}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var Iw={print:4,modify:8,copy:16,"annot-forms":32};function Vu(t,e,n,r){this.v=1,this.r=2;var i=192;t.forEach(function(a){if(Iw.perm!==void 0)throw new Error("Invalid permission: "+a);i+=Iw[a]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var s=(e+this.padding).substr(0,32),o=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,o),this.P=-(1+(255^i)),this.encryptionKey=Z0(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=e2(this.encryptionKey,this.padding)}function Bu(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",n=t.length,r=0;r<n;r++){var i=t.charCodeAt(r);i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?e+="#"+("0"+i.toString(16)).slice(-2):e+=t[r]}return e}function Tw(t){if(Gt(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(n,r,i){if(i=i||!1,typeof n!="string"||typeof r!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(n)||(e[n]={});var s=Math.random().toString(35);return e[n][s]=[r,!!i],s},this.unsubscribe=function(n){for(var r in e)if(e[r][n])return delete e[r][n],Object.keys(e[r]).length===0&&delete e[r],!0;return!1},this.publish=function(n){if(e.hasOwnProperty(n)){var r=Array.prototype.slice.call(arguments,1),i=[];for(var s in e[n]){var o=e[n][s];try{o[0].apply(t,r)}catch(a){ft.console&&en.error("jsPDF PubSub Error",a.message,a)}o[1]&&i.push(s)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function om(t){if(!(this instanceof om))return new om(t);var e="opacity,stroke-opacity".split(",");for(var n in t)t.hasOwnProperty(n)&&e.indexOf(n)>=0&&(this[n]=t[n]);this.id="",this.objectNumber=-1}function dA(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function Il(t,e,n,r,i){if(!(this instanceof Il))return new Il(t,e,n,r,i);this.type=t==="axial"?2:3,this.coords=e,this.colors=n,dA.call(this,r,i)}function tc(t,e,n,r,i){if(!(this instanceof tc))return new tc(t,e,n,r,i);this.boundingBox=t,this.xStep=e,this.yStep=n,this.stream="",this.cloneIndex=0,dA.call(this,r,i)}function dt(t){var e,n=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],i=arguments[2],s=arguments[3],o=[],a=1,l=16,u="S",h=null;Gt(t=t||{})==="object"&&(n=t.orientation,r=t.unit||r,i=t.format||i,s=t.compress||t.compressPdf||s,(h=t.encryption||null)!==null&&(h.userPassword=h.userPassword||"",h.ownerPassword=h.ownerPassword||"",h.userPermissions=h.userPermissions||[]),a=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(e=t.precision),t.floatPrecision!==void 0&&(l=t.floatPrecision),u=t.defaultPathOperation||"S"),o=t.filters||(s===!0?["FlateEncode"]:o),r=r||"mm",n=(""+(n||"P")).toLowerCase();var f=t.putOnlyUsedFonts||!1,m={},p={internal:{},__private__:{}};p.__private__.PubSub=Tw;var b="1.3",E=p.__private__.getPdfVersion=function(){return b};p.__private__.setPdfVersion=function(_){b=_};var k={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};p.__private__.getPageFormats=function(){return k};var w=p.__private__.getPageFormat=function(_){return k[_]};i=i||"a4";var x={COMPAT:"compat",ADVANCED:"advanced"},C=x.COMPAT;function M(){this.saveGraphicsState(),oe(new Ze($e,0,0,-$e,0,vr()*$e).toString()+" cm"),this.setFontSize(this.getFontSize()/$e),u="n",C=x.ADVANCED}function Q(){this.restoreGraphicsState(),u="S",C=x.COMPAT}var z=p.__private__.combineFontStyleAndFontWeight=function(_,B){if(_=="bold"&&B=="normal"||_=="bold"&&B==400||_=="normal"&&B=="italic"||_=="bold"&&B=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return B&&(_=B==400||B==="normal"?_==="italic"?"italic":"normal":B!=700&&B!=="bold"||_!=="normal"?(B==700?"bold":B)+""+_:"bold"),_};p.advancedAPI=function(_){var B=C===x.COMPAT;return B&&M.call(this),typeof _!="function"||(_(this),B&&Q.call(this)),this},p.compatAPI=function(_){var B=C===x.ADVANCED;return B&&Q.call(this),typeof _!="function"||(_(this),B&&M.call(this)),this},p.isAdvancedAPI=function(){return C===x.ADVANCED};var L,y=function(_){if(C!==x.ADVANCED)throw new Error(_+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},N=p.roundToPrecision=p.__private__.roundToPrecision=function(_,B){var se=e||B;if(isNaN(_)||isNaN(se))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return _.toFixed(se).replace(/0+$/,"")};L=p.hpf=p.__private__.hpf=typeof l=="number"?function(_){if(isNaN(_))throw new Error("Invalid argument passed to jsPDF.hpf");return N(_,l)}:l==="smart"?function(_){if(isNaN(_))throw new Error("Invalid argument passed to jsPDF.hpf");return N(_,_>-1&&_<1?16:5)}:function(_){if(isNaN(_))throw new Error("Invalid argument passed to jsPDF.hpf");return N(_,16)};var R=p.f2=p.__private__.f2=function(_){if(isNaN(_))throw new Error("Invalid argument passed to jsPDF.f2");return N(_,2)},A=p.__private__.f3=function(_){if(isNaN(_))throw new Error("Invalid argument passed to jsPDF.f3");return N(_,3)},I=p.scale=p.__private__.scale=function(_){if(isNaN(_))throw new Error("Invalid argument passed to jsPDF.scale");return C===x.COMPAT?_*$e:C===x.ADVANCED?_:void 0},P=function(_){return C===x.COMPAT?vr()-_:C===x.ADVANCED?_:void 0},V=function(_){return I(P(_))};p.__private__.setPrecision=p.setPrecision=function(_){typeof parseInt(_,10)=="number"&&(e=parseInt(_,10))};var J,O="00000000000000000000000000000000",U=p.__private__.getFileId=function(){return O},W=p.__private__.setFileId=function(_){return O=_!==void 0&&/^[a-fA-F0-9]{32}$/.test(_)?_.toUpperCase():O.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),h!==null&&(an=new Vu(h.userPermissions,h.userPassword,h.ownerPassword,O)),O};p.setFileId=function(_){return W(_),this},p.getFileId=function(){return U()};var ee=p.__private__.convertDateToPDFDate=function(_){var B=_.getTimezoneOffset(),se=B<0?"+":"-",le=Math.floor(Math.abs(B/60)),ge=Math.abs(B%60),Ne=[se,Y(le),"'",Y(ge),"'"].join("");return["D:",_.getFullYear(),Y(_.getMonth()+1),Y(_.getDate()),Y(_.getHours()),Y(_.getMinutes()),Y(_.getSeconds()),Ne].join("")},re=p.__private__.convertPDFDateToDate=function(_){var B=parseInt(_.substr(2,4),10),se=parseInt(_.substr(6,2),10)-1,le=parseInt(_.substr(8,2),10),ge=parseInt(_.substr(10,2),10),Ne=parseInt(_.substr(12,2),10),Oe=parseInt(_.substr(14,2),10);return new Date(B,se,le,ge,Ne,Oe,0)},xe=p.__private__.setCreationDate=function(_){var B;if(_===void 0&&(_=new Date),_ instanceof Date)B=ee(_);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(_))throw new Error("Invalid argument passed to jsPDF.setCreationDate");B=_}return J=B},F=p.__private__.getCreationDate=function(_){var B=J;return _==="jsDate"&&(B=re(J)),B};p.setCreationDate=function(_){return xe(_),this},p.getCreationDate=function(_){return F(_)};var G,Y=p.__private__.padd2=function(_){return("0"+parseInt(_)).slice(-2)},Z=p.__private__.padd2Hex=function(_){return("00"+(_=_.toString())).substr(_.length)},ae=0,ie=[],ce=[],fe=0,Ie=[],Ee=[],je=!1,Ue=ce,Ye=function(){ae=0,fe=0,ce=[],ie=[],Ie=[],qi=Sn(),gr=Sn()};p.__private__.setCustomOutputDestination=function(_){je=!0,Ue=_};var Se=function(_){je||(Ue=_)};p.__private__.resetCustomOutputDestination=function(){je=!1,Ue=ce};var oe=p.__private__.out=function(_){return _=_.toString(),fe+=_.length+1,Ue.push(_),Ue},ye=p.__private__.write=function(_){return oe(arguments.length===1?_.toString():Array.prototype.join.call(arguments," "))},Re=p.__private__.getArrayBuffer=function(_){for(var B=_.length,se=new ArrayBuffer(B),le=new Uint8Array(se);B--;)le[B]=_.charCodeAt(B);return se},Te=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];p.__private__.getStandardFonts=function(){return Te};var Me=t.fontSize||16;p.__private__.setFontSize=p.setFontSize=function(_){return Me=C===x.ADVANCED?_/$e:_,this};var Be,ze=p.__private__.getFontSize=p.getFontSize=function(){return C===x.COMPAT?Me:Me*$e},He=t.R2L||!1;p.__private__.setR2L=p.setR2L=function(_){return He=_,this},p.__private__.getR2L=p.getR2L=function(){return He};var Qe,st=p.__private__.setZoomMode=function(_){var B=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(_))Be=_;else if(isNaN(_)){if(B.indexOf(_)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+_+'" is not recognized.');Be=_}else Be=parseInt(_,10)};p.__private__.getZoomMode=function(){return Be};var tt,lt=p.__private__.setPageMode=function(_){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(_)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+_+'" is not recognized.');Qe=_};p.__private__.getPageMode=function(){return Qe};var ht=p.__private__.setLayoutMode=function(_){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(_)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+_+'" is not recognized.');tt=_};p.__private__.getLayoutMode=function(){return tt},p.__private__.setDisplayMode=p.setDisplayMode=function(_,B,se){return st(_),ht(B),lt(se),this};var ot={title:"",subject:"",author:"",keywords:"",creator:""};p.__private__.getDocumentProperty=function(_){if(Object.keys(ot).indexOf(_)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return ot[_]},p.__private__.getDocumentProperties=function(){return ot},p.__private__.setDocumentProperties=p.setProperties=p.setDocumentProperties=function(_){for(var B in ot)ot.hasOwnProperty(B)&&_[B]&&(ot[B]=_[B]);return this},p.__private__.setDocumentProperty=function(_,B){if(Object.keys(ot).indexOf(_)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return ot[_]=B};var at,$e,Ct,vt,sn,At={},Bt={},Hr=[],Nt={},ui={},Ut={},Hn={},xn=null,Lt=0,it=[],Et=new Tw(p),Lr=t.hotfixes||[],Yt={},fn={},ci=[],Ze=function _(B,se,le,ge,Ne,Oe){if(!(this instanceof _))return new _(B,se,le,ge,Ne,Oe);isNaN(B)&&(B=1),isNaN(se)&&(se=0),isNaN(le)&&(le=0),isNaN(ge)&&(ge=1),isNaN(Ne)&&(Ne=0),isNaN(Oe)&&(Oe=0),this._matrix=[B,se,le,ge,Ne,Oe]};Object.defineProperty(Ze.prototype,"sx",{get:function(){return this._matrix[0]},set:function(_){this._matrix[0]=_}}),Object.defineProperty(Ze.prototype,"shy",{get:function(){return this._matrix[1]},set:function(_){this._matrix[1]=_}}),Object.defineProperty(Ze.prototype,"shx",{get:function(){return this._matrix[2]},set:function(_){this._matrix[2]=_}}),Object.defineProperty(Ze.prototype,"sy",{get:function(){return this._matrix[3]},set:function(_){this._matrix[3]=_}}),Object.defineProperty(Ze.prototype,"tx",{get:function(){return this._matrix[4]},set:function(_){this._matrix[4]=_}}),Object.defineProperty(Ze.prototype,"ty",{get:function(){return this._matrix[5]},set:function(_){this._matrix[5]=_}}),Object.defineProperty(Ze.prototype,"a",{get:function(){return this._matrix[0]},set:function(_){this._matrix[0]=_}}),Object.defineProperty(Ze.prototype,"b",{get:function(){return this._matrix[1]},set:function(_){this._matrix[1]=_}}),Object.defineProperty(Ze.prototype,"c",{get:function(){return this._matrix[2]},set:function(_){this._matrix[2]=_}}),Object.defineProperty(Ze.prototype,"d",{get:function(){return this._matrix[3]},set:function(_){this._matrix[3]=_}}),Object.defineProperty(Ze.prototype,"e",{get:function(){return this._matrix[4]},set:function(_){this._matrix[4]=_}}),Object.defineProperty(Ze.prototype,"f",{get:function(){return this._matrix[5]},set:function(_){this._matrix[5]=_}}),Object.defineProperty(Ze.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Ze.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Ze.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Ze.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Ze.prototype.join=function(_){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(L).join(_)},Ze.prototype.multiply=function(_){var B=_.sx*this.sx+_.shy*this.shx,se=_.sx*this.shy+_.shy*this.sy,le=_.shx*this.sx+_.sy*this.shx,ge=_.shx*this.shy+_.sy*this.sy,Ne=_.tx*this.sx+_.ty*this.shx+this.tx,Oe=_.tx*this.shy+_.ty*this.sy+this.ty;return new Ze(B,se,le,ge,Ne,Oe)},Ze.prototype.decompose=function(){var _=this.sx,B=this.shy,se=this.shx,le=this.sy,ge=this.tx,Ne=this.ty,Oe=Math.sqrt(_*_+B*B),Ge=(_/=Oe)*se+(B/=Oe)*le;se-=_*Ge,le-=B*Ge;var d=Math.sqrt(se*se+le*le);return Ge/=d,_*(le/=d)<B*(se/=d)&&(_=-_,B=-B,Ge=-Ge,Oe=-Oe),{scale:new Ze(Oe,0,0,d,0,0),translate:new Ze(1,0,0,1,ge,Ne),rotate:new Ze(_,B,-B,_,0,0),skew:new Ze(1,0,Ge,1,0,0)}},Ze.prototype.toString=function(_){return this.join(" ")},Ze.prototype.inversed=function(){var _=this.sx,B=this.shy,se=this.shx,le=this.sy,ge=this.tx,Ne=this.ty,Oe=1/(_*le-B*se),Ge=le*Oe,d=-B*Oe,T=-se*Oe,D=_*Oe;return new Ze(Ge,d,T,D,-Ge*ge-T*Ne,-d*ge-D*Ne)},Ze.prototype.applyToPoint=function(_){var B=_.x*this.sx+_.y*this.shx+this.tx,se=_.x*this.shy+_.y*this.sy+this.ty;return new ro(B,se)},Ze.prototype.applyToRectangle=function(_){var B=this.applyToPoint(_),se=this.applyToPoint(new ro(_.x+_.w,_.y+_.h));return new Yo(B.x,B.y,se.x-B.x,se.y-B.y)},Ze.prototype.clone=function(){var _=this.sx,B=this.shy,se=this.shx,le=this.sy,ge=this.tx,Ne=this.ty;return new Ze(_,B,se,le,ge,Ne)},p.Matrix=Ze;var Wr=p.matrixMult=function(_,B){return B.multiply(_)},mr=new Ze(1,0,0,1,0,0);p.unitMatrix=p.identityMatrix=mr;var Fn=function(_,B){if(!ui[_]){var se=(B instanceof Il?"Sh":"P")+(Object.keys(Nt).length+1).toString(10);B.id=se,ui[_]=se,Nt[se]=B,Et.publish("addPattern",B)}};p.ShadingPattern=Il,p.TilingPattern=tc,p.addShadingPattern=function(_,B){return y("addShadingPattern()"),Fn(_,B),this},p.beginTilingPattern=function(_){y("beginTilingPattern()"),Xo(_.boundingBox[0],_.boundingBox[1],_.boundingBox[2]-_.boundingBox[0],_.boundingBox[3]-_.boundingBox[1],_.matrix)},p.endTilingPattern=function(_,B){y("endTilingPattern()"),B.stream=Ee[G].join(`
`),Fn(_,B),Et.publish("endTilingPattern",B),ci.pop().restore()};var Tn=p.__private__.newObject=function(){var _=Sn();return Mn(_,!0),_},Sn=p.__private__.newObjectDeferred=function(){return ae++,ie[ae]=function(){return fe},ae},Mn=function(_,B){return B=typeof B=="boolean"&&B,ie[_]=fe,B&&oe(_+" 0 obj"),_},Oo=p.__private__.newAdditionalObject=function(){var _={objId:Sn(),content:""};return Ie.push(_),_},qi=Sn(),gr=Sn(),Gr=p.__private__.decodeColorString=function(_){var B=_.split(" ");if(B.length!==2||B[1]!=="g"&&B[1]!=="G")B.length===5&&(B[4]==="k"||B[4]==="K")&&(B=[(1-B[0])*(1-B[3]),(1-B[1])*(1-B[3]),(1-B[2])*(1-B[3]),"r"]);else{var se=parseFloat(B[0]);B=[se,se,se,"r"]}for(var le="#",ge=0;ge<3;ge++)le+=("0"+Math.floor(255*parseFloat(B[ge])).toString(16)).slice(-2);return le},Rr=p.__private__.encodeColorString=function(_){var B;typeof _=="string"&&(_={ch1:_});var se=_.ch1,le=_.ch2,ge=_.ch3,Ne=_.ch4,Oe=_.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof se=="string"&&se.charAt(0)!=="#"){var Ge=new cA(se);if(Ge.ok)se=Ge.toHex();else if(!/^\d*\.?\d*$/.test(se))throw new Error('Invalid color "'+se+'" passed to jsPDF.encodeColorString.')}if(typeof se=="string"&&/^#[0-9A-Fa-f]{3}$/.test(se)&&(se="#"+se[1]+se[1]+se[2]+se[2]+se[3]+se[3]),typeof se=="string"&&/^#[0-9A-Fa-f]{6}$/.test(se)){var d=parseInt(se.substr(1),16);se=d>>16&255,le=d>>8&255,ge=255&d}if(le===void 0||Ne===void 0&&se===le&&le===ge)if(typeof se=="string")B=se+" "+Oe[0];else switch(_.precision){case 2:B=R(se/255)+" "+Oe[0];break;case 3:default:B=A(se/255)+" "+Oe[0]}else if(Ne===void 0||Gt(Ne)==="object"){if(Ne&&!isNaN(Ne.a)&&Ne.a===0)return B=["1.","1.","1.",Oe[1]].join(" ");if(typeof se=="string")B=[se,le,ge,Oe[1]].join(" ");else switch(_.precision){case 2:B=[R(se/255),R(le/255),R(ge/255),Oe[1]].join(" ");break;default:case 3:B=[A(se/255),A(le/255),A(ge/255),Oe[1]].join(" ")}}else if(typeof se=="string")B=[se,le,ge,Ne,Oe[2]].join(" ");else switch(_.precision){case 2:B=[R(se),R(le),R(ge),R(Ne),Oe[2]].join(" ");break;case 3:default:B=[A(se),A(le),A(ge),A(Ne),Oe[2]].join(" ")}return B},jr=p.__private__.getFilters=function(){return o},kn=p.__private__.putStream=function(_){var B=(_=_||{}).data||"",se=_.filters||jr(),le=_.alreadyAppliedFilters||[],ge=_.addLength1||!1,Ne=B.length,Oe=_.objectId,Ge=function(yt){return yt};if(h!==null&&Oe===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");h!==null&&(Ge=an.encryptor(Oe,0));var d={};se===!0&&(se=["FlateEncode"]);var T=_.additionalKeyValues||[],D=(d=dt.API.processDataByFilters!==void 0?dt.API.processDataByFilters(B,se):{data:B,reverseChain:[]}).reverseChain+(Array.isArray(le)?le.join(" "):le.toString());if(d.data.length!==0&&(T.push({key:"Length",value:d.data.length}),ge===!0&&T.push({key:"Length1",value:Ne})),D.length!=0)if(D.split("/").length-1==1)T.push({key:"Filter",value:D});else{T.push({key:"Filter",value:"["+D+"]"});for(var K=0;K<T.length;K+=1)if(T[K].key==="DecodeParms"){for(var me=[],be=0;be<d.reverseChain.split("/").length-1;be+=1)me.push("null");me.push(T[K].value),T[K].value="["+me.join(" ")+"]"}}oe("<<");for(var Fe=0;Fe<T.length;Fe++)oe("/"+T[Fe].key+" "+T[Fe].value);oe(">>"),d.data.length!==0&&(oe("stream"),oe(Ge(d.data)),oe("endstream"))},hi=p.__private__.putPage=function(_){var B=_.number,se=_.data,le=_.objId,ge=_.contentsObjId;Mn(le,!0),oe("<</Type /Page"),oe("/Parent "+_.rootDictionaryObjId+" 0 R"),oe("/Resources "+_.resourceDictionaryObjId+" 0 R"),oe("/MediaBox ["+parseFloat(L(_.mediaBox.bottomLeftX))+" "+parseFloat(L(_.mediaBox.bottomLeftY))+" "+L(_.mediaBox.topRightX)+" "+L(_.mediaBox.topRightY)+"]"),_.cropBox!==null&&oe("/CropBox ["+L(_.cropBox.bottomLeftX)+" "+L(_.cropBox.bottomLeftY)+" "+L(_.cropBox.topRightX)+" "+L(_.cropBox.topRightY)+"]"),_.bleedBox!==null&&oe("/BleedBox ["+L(_.bleedBox.bottomLeftX)+" "+L(_.bleedBox.bottomLeftY)+" "+L(_.bleedBox.topRightX)+" "+L(_.bleedBox.topRightY)+"]"),_.trimBox!==null&&oe("/TrimBox ["+L(_.trimBox.bottomLeftX)+" "+L(_.trimBox.bottomLeftY)+" "+L(_.trimBox.topRightX)+" "+L(_.trimBox.topRightY)+"]"),_.artBox!==null&&oe("/ArtBox ["+L(_.artBox.bottomLeftX)+" "+L(_.artBox.bottomLeftY)+" "+L(_.artBox.topRightX)+" "+L(_.artBox.topRightY)+"]"),typeof _.userUnit=="number"&&_.userUnit!==1&&oe("/UserUnit "+_.userUnit),Et.publish("putPage",{objId:le,pageContext:it[B],pageNumber:B,page:se}),oe("/Contents "+ge+" 0 R"),oe(">>"),oe("endobj");var Ne=se.join(`
`);return C===x.ADVANCED&&(Ne+=`
Q`),Mn(ge,!0),kn({data:Ne,filters:jr(),objectId:ge}),oe("endobj"),le},ms=p.__private__.putPages=function(){var _,B,se=[];for(_=1;_<=Lt;_++)it[_].objId=Sn(),it[_].contentsObjId=Sn();for(_=1;_<=Lt;_++)se.push(hi({number:_,data:Ee[_],objId:it[_].objId,contentsObjId:it[_].contentsObjId,mediaBox:it[_].mediaBox,cropBox:it[_].cropBox,bleedBox:it[_].bleedBox,trimBox:it[_].trimBox,artBox:it[_].artBox,userUnit:it[_].userUnit,rootDictionaryObjId:qi,resourceDictionaryObjId:gr}));Mn(qi,!0),oe("<</Type /Pages");var le="/Kids [";for(B=0;B<Lt;B++)le+=se[B]+" 0 R ";oe(le+"]"),oe("/Count "+Lt),oe(">>"),oe("endobj"),Et.publish("postPutPages")},gs=function(_){Et.publish("putFont",{font:_,out:oe,newObject:Tn,putStream:kn}),_.isAlreadyPutted!==!0&&(_.objectNumber=Tn(),oe("<<"),oe("/Type /Font"),oe("/BaseFont /"+Bu(_.postScriptName)),oe("/Subtype /Type1"),typeof _.encoding=="string"&&oe("/Encoding /"+_.encoding),oe("/FirstChar 32"),oe("/LastChar 255"),oe(">>"),oe("endobj"))},vs=function(){for(var _ in At)At.hasOwnProperty(_)&&(f===!1||f===!0&&m.hasOwnProperty(_))&&gs(At[_])},Ks=function(_){_.objectNumber=Tn();var B=[];B.push({key:"Type",value:"/XObject"}),B.push({key:"Subtype",value:"/Form"}),B.push({key:"BBox",value:"["+[L(_.x),L(_.y),L(_.x+_.width),L(_.y+_.height)].join(" ")+"]"}),B.push({key:"Matrix",value:"["+_.matrix.toString()+"]"});var se=_.pages[1].join(`
`);kn({data:se,additionalKeyValues:B,objectId:_.objectNumber}),oe("endobj")},Qs=function(){for(var _ in Yt)Yt.hasOwnProperty(_)&&Ks(Yt[_])},lu=function(_,B){var se,le=[],ge=1/(B-1);for(se=0;se<1;se+=ge)le.push(se);if(le.push(1),_[0].offset!=0){var Ne={offset:0,color:_[0].color};_.unshift(Ne)}if(_[_.length-1].offset!=1){var Oe={offset:1,color:_[_.length-1].color};_.push(Oe)}for(var Ge="",d=0,T=0;T<le.length;T++){for(se=le[T];se>_[d+1].offset;)d++;var D=_[d].offset,K=(se-D)/(_[d+1].offset-D),me=_[d].color,be=_[d+1].color;Ge+=Z(Math.round((1-K)*me[0]+K*be[0]).toString(16))+Z(Math.round((1-K)*me[1]+K*be[1]).toString(16))+Z(Math.round((1-K)*me[2]+K*be[2]).toString(16))}return Ge.trim()},Fo=function(_,B){B||(B=21);var se=Tn(),le=lu(_.colors,B),ge=[];ge.push({key:"FunctionType",value:"0"}),ge.push({key:"Domain",value:"[0.0 1.0]"}),ge.push({key:"Size",value:"["+B+"]"}),ge.push({key:"BitsPerSample",value:"8"}),ge.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),ge.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),kn({data:le,additionalKeyValues:ge,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:se}),oe("endobj"),_.objectNumber=Tn(),oe("<< /ShadingType "+_.type),oe("/ColorSpace /DeviceRGB");var Ne="/Coords ["+L(parseFloat(_.coords[0]))+" "+L(parseFloat(_.coords[1]))+" ";_.type===2?Ne+=L(parseFloat(_.coords[2]))+" "+L(parseFloat(_.coords[3])):Ne+=L(parseFloat(_.coords[2]))+" "+L(parseFloat(_.coords[3]))+" "+L(parseFloat(_.coords[4]))+" "+L(parseFloat(_.coords[5])),oe(Ne+="]"),_.matrix&&oe("/Matrix ["+_.matrix.toString()+"]"),oe("/Function "+se+" 0 R"),oe("/Extend [true true]"),oe(">>"),oe("endobj")},uu=function(_,B){var se=Sn(),le=Tn();B.push({resourcesOid:se,objectOid:le}),_.objectNumber=le;var ge=[];ge.push({key:"Type",value:"/Pattern"}),ge.push({key:"PatternType",value:"1"}),ge.push({key:"PaintType",value:"1"}),ge.push({key:"TilingType",value:"1"}),ge.push({key:"BBox",value:"["+_.boundingBox.map(L).join(" ")+"]"}),ge.push({key:"XStep",value:L(_.xStep)}),ge.push({key:"YStep",value:L(_.yStep)}),ge.push({key:"Resources",value:se+" 0 R"}),_.matrix&&ge.push({key:"Matrix",value:"["+_.matrix.toString()+"]"}),kn({data:_.stream,additionalKeyValues:ge,objectId:_.objectNumber}),oe("endobj")},ys=function(_){var B;for(B in Nt)Nt.hasOwnProperty(B)&&(Nt[B]instanceof Il?Fo(Nt[B]):Nt[B]instanceof tc&&uu(Nt[B],_))},_s=function(_){for(var B in _.objectNumber=Tn(),oe("<<"),_)switch(B){case"opacity":oe("/ca "+R(_[B]));break;case"stroke-opacity":oe("/CA "+R(_[B]))}oe(">>"),oe("endobj")},zi=function(){var _;for(_ in Ut)Ut.hasOwnProperty(_)&&_s(Ut[_])},Ys=function(){for(var _ in oe("/XObject <<"),Yt)Yt.hasOwnProperty(_)&&Yt[_].objectNumber>=0&&oe("/"+_+" "+Yt[_].objectNumber+" 0 R");Et.publish("putXobjectDict"),oe(">>")},Gc=function(){an.oid=Tn(),oe("<<"),oe("/Filter /Standard"),oe("/V "+an.v),oe("/R "+an.r),oe("/U <"+an.toHexString(an.U)+">"),oe("/O <"+an.toHexString(an.O)+">"),oe("/P "+an.P),oe(">>"),oe("endobj")},nl=function(){for(var _ in oe("/Font <<"),At)At.hasOwnProperty(_)&&(f===!1||f===!0&&m.hasOwnProperty(_))&&oe("/"+_+" "+At[_].objectNumber+" 0 R");oe(">>")},cu=function(){if(Object.keys(Nt).length>0){for(var _ in oe("/Shading <<"),Nt)Nt.hasOwnProperty(_)&&Nt[_]instanceof Il&&Nt[_].objectNumber>=0&&oe("/"+_+" "+Nt[_].objectNumber+" 0 R");Et.publish("putShadingPatternDict"),oe(">>")}},Xs=function(_){if(Object.keys(Nt).length>0){for(var B in oe("/Pattern <<"),Nt)Nt.hasOwnProperty(B)&&Nt[B]instanceof p.TilingPattern&&Nt[B].objectNumber>=0&&Nt[B].objectNumber<_&&oe("/"+B+" "+Nt[B].objectNumber+" 0 R");Et.publish("putTilingPatternDict"),oe(">>")}},rl=function(){if(Object.keys(Ut).length>0){var _;for(_ in oe("/ExtGState <<"),Ut)Ut.hasOwnProperty(_)&&Ut[_].objectNumber>=0&&oe("/"+_+" "+Ut[_].objectNumber+" 0 R");Et.publish("putGStateDict"),oe(">>")}},on=function(_){Mn(_.resourcesOid,!0),oe("<<"),oe("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),nl(),cu(),Xs(_.objectOid),rl(),Ys(),oe(">>"),oe("endobj")},il=function(){var _=[];vs(),zi(),Qs(),ys(_),Et.publish("putResources"),_.forEach(on),on({resourcesOid:gr,objectOid:Number.MAX_SAFE_INTEGER}),Et.publish("postPutResources")},sl=function(){Et.publish("putAdditionalObjects");for(var _=0;_<Ie.length;_++){var B=Ie[_];Mn(B.objId,!0),oe(B.content),oe("endobj")}Et.publish("postPutAdditionalObjects")},hu=function(_){Bt[_.fontName]=Bt[_.fontName]||{},Bt[_.fontName][_.fontStyle]=_.id},ol=function(_,B,se,le,ge){var Ne={id:"F"+(Object.keys(At).length+1).toString(10),postScriptName:_,fontName:B,fontStyle:se,encoding:le,isStandardFont:ge||!1,metadata:{}};return Et.publish("addFont",{font:Ne,instance:this}),At[Ne.id]=Ne,hu(Ne),Ne.id},du=function(_){for(var B=0,se=Te.length;B<se;B++){var le=ol.call(this,_[B][0],_[B][1],_[B][2],Te[B][3],!0);f===!1&&(m[le]=!0);var ge=_[B][0].split("-");hu({id:le,fontName:ge[0],fontStyle:ge[1]||""})}Et.publish("addFonts",{fonts:At,dictionary:Bt})},Kr=function(_){return _.foo=function(){try{return _.apply(this,arguments)}catch(le){var B=le.stack||"";~B.indexOf(" at ")&&(B=B.split(" at ")[1]);var se="Error in function "+B.split(`
`)[0].split("<")[0]+": "+le.message;if(!ft.console)throw new Error(se);ft.console.error(se,le),ft.alert&&alert(se)}},_.foo.bar=_,_.foo},Mo=function(_,B){var se,le,ge,Ne,Oe,Ge,d,T,D;if(ge=(B=B||{}).sourceEncoding||"Unicode",Oe=B.outputEncoding,(B.autoencode||Oe)&&At[at].metadata&&At[at].metadata[ge]&&At[at].metadata[ge].encoding&&(Ne=At[at].metadata[ge].encoding,!Oe&&At[at].encoding&&(Oe=At[at].encoding),!Oe&&Ne.codePages&&(Oe=Ne.codePages[0]),typeof Oe=="string"&&(Oe=Ne[Oe]),Oe)){for(d=!1,Ge=[],se=0,le=_.length;se<le;se++)(T=Oe[_.charCodeAt(se)])?Ge.push(String.fromCharCode(T)):Ge.push(_[se]),Ge[se].charCodeAt(0)>>8&&(d=!0);_=Ge.join("")}for(se=_.length;d===void 0&&se!==0;)_.charCodeAt(se-1)>>8&&(d=!0),se--;if(!d)return _;for(Ge=B.noBOM?[]:[254,255],se=0,le=_.length;se<le;se++){if((D=(T=_.charCodeAt(se))>>8)>>8)throw new Error("Character at position "+se+" of string '"+_+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Ge.push(D),Ge.push(T-(D<<8))}return String.fromCharCode.apply(void 0,Ge)},An=p.__private__.pdfEscape=p.pdfEscape=function(_,B){return Mo(_,B).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Dr=p.__private__.beginPage=function(_){Ee[++Lt]=[],it[Lt]={objId:0,contentsObjId:0,userUnit:Number(a),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(_[0]),topRightY:Number(_[1])}},al(Lt),Se(Ee[G])},Js=function(_,B){var se,le,ge;switch(n=B||n,typeof _=="string"&&(se=w(_.toLowerCase()),Array.isArray(se)&&(le=se[0],ge=se[1])),Array.isArray(_)&&(le=_[0]*$e,ge=_[1]*$e),isNaN(le)&&(le=i[0],ge=i[1]),(le>14400||ge>14400)&&(en.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),le=Math.min(14400,le),ge=Math.min(14400,ge)),i=[le,ge],n.substr(0,1)){case"l":ge>le&&(i=[ge,le]);break;case"p":le>ge&&(i=[ge,le])}Dr(i),dl(hl),oe(rr),ml!==0&&oe(ml+" J"),Qo!==0&&oe(Qo+" j"),Et.publish("addPage",{pageNumber:Lt})},Uo=function(_){_>0&&_<=Lt&&(Ee.splice(_,1),it.splice(_,1),Lt--,G>Lt&&(G=Lt),this.setPage(G))},al=function(_){_>0&&_<=Lt&&(G=_)},$t=p.__private__.getNumberOfPages=p.getNumberOfPages=function(){return Ee.length-1},Zs=function(_,B,se){var le,ge=void 0;return se=se||{},_=_!==void 0?_:At[at].fontName,B=B!==void 0?B:At[at].fontStyle,le=_.toLowerCase(),Bt[le]!==void 0&&Bt[le][B]!==void 0?ge=Bt[le][B]:Bt[_]!==void 0&&Bt[_][B]!==void 0?ge=Bt[_][B]:se.disableWarning===!1&&en.warn("Unable to look up font label for font '"+_+"', '"+B+"'. Refer to getFontList() for available fonts."),ge||se.noFallback||(ge=Bt.times[B])==null&&(ge=Bt.times.normal),ge},eo=p.__private__.putInfo=function(){var _=Tn(),B=function(le){return le};for(var se in h!==null&&(B=an.encryptor(_,0)),oe("<<"),oe("/Producer ("+An(B("jsPDF "+dt.version))+")"),ot)ot.hasOwnProperty(se)&&ot[se]&&oe("/"+se.substr(0,1).toUpperCase()+se.substr(1)+" ("+An(B(ot[se]))+")");oe("/CreationDate ("+An(B(J))+")"),oe(">>"),oe("endobj")},$i=p.__private__.putCatalog=function(_){var B=(_=_||{}).rootDictionaryObjId||qi;switch(Tn(),oe("<<"),oe("/Type /Catalog"),oe("/Pages "+B+" 0 R"),Be||(Be="fullwidth"),Be){case"fullwidth":oe("/OpenAction [3 0 R /FitH null]");break;case"fullheight":oe("/OpenAction [3 0 R /FitV null]");break;case"fullpage":oe("/OpenAction [3 0 R /Fit]");break;case"original":oe("/OpenAction [3 0 R /XYZ null null 1]");break;default:var se=""+Be;se.substr(se.length-1)==="%"&&(Be=parseInt(Be)/100),typeof Be=="number"&&oe("/OpenAction [3 0 R /XYZ null null "+R(Be)+"]")}switch(tt||(tt="continuous"),tt){case"continuous":oe("/PageLayout /OneColumn");break;case"single":oe("/PageLayout /SinglePage");break;case"two":case"twoleft":oe("/PageLayout /TwoColumnLeft");break;case"tworight":oe("/PageLayout /TwoColumnRight")}Qe&&oe("/PageMode /"+Qe),Et.publish("putCatalog"),oe(">>"),oe("endobj")},Kc=p.__private__.putTrailer=function(){oe("trailer"),oe("<<"),oe("/Size "+(ae+1)),oe("/Root "+ae+" 0 R"),oe("/Info "+(ae-1)+" 0 R"),h!==null&&oe("/Encrypt "+an.oid+" 0 R"),oe("/ID [ <"+O+"> <"+O+"> ]"),oe(">>")},fu=p.__private__.putHeader=function(){oe("%PDF-"+b),oe("%")},Qc=p.__private__.putXRef=function(){var _="0000000000";oe("xref"),oe("0 "+(ae+1)),oe("0000000000 65535 f ");for(var B=1;B<=ae;B++)typeof ie[B]=="function"?oe((_+ie[B]()).slice(-10)+" 00000 n "):ie[B]!==void 0?oe((_+ie[B]).slice(-10)+" 00000 n "):oe("0000000000 00000 n ")},Hi=p.__private__.buildDocument=function(){Ye(),Se(ce),Et.publish("buildDocument"),fu(),ms(),sl(),il(),h!==null&&Gc(),eo(),$i();var _=fe;return Qc(),Kc(),oe("startxref"),oe(""+_),oe("%%EOF"),Se(Ee[G]),ce.join(`
`)},Vo=p.__private__.getBlob=function(_){return new Blob([Re(_)],{type:"application/pdf"})},Bo=p.output=p.__private__.output=Kr(function(_,B){switch(typeof(B=B||{})=="string"?B={filename:B}:B.filename=B.filename||"generated.pdf",_){case void 0:return Hi();case"save":p.save(B.filename);break;case"arraybuffer":return Re(Hi());case"blob":return Vo(Hi());case"bloburi":case"bloburl":if(ft.URL!==void 0&&typeof ft.URL.createObjectURL=="function")return ft.URL&&ft.URL.createObjectURL(Vo(Hi()))||void 0;en.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var se="",le=Hi();try{se=J0(le)}catch{se=J0(unescape(encodeURIComponent(le)))}return"data:application/pdf;filename="+B.filename+";base64,"+se;case"pdfobjectnewwindow":if(Object.prototype.toString.call(ft)==="[object Window]"){var ge="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Ne=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';B.pdfObjectUrl&&(ge=B.pdfObjectUrl,Ne="");var Oe='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+ge+'"'+Ne+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(B)+");<\/script></body></html>",Ge=ft.open();return Ge!==null&&Ge.document.write(Oe),Ge}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(ft)==="[object Window]"){var d='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(B.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+B.filename+'" width="500px" height="400px" /></body></html>',T=ft.open();if(T!==null){T.document.write(d);var D=this;T.document.documentElement.querySelector("#pdfViewer").onload=function(){T.document.title=B.filename,T.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(D.output("bloburl"))}}return T}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(ft)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var K='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",B)+'"></iframe></body></html>',me=ft.open();if(me!==null&&(me.document.write(K),me.document.title=B.filename),me||typeof safari>"u")return me;break;case"datauri":case"dataurl":return ft.document.location.href=this.output("datauristring",B);default:return null}}),ws=function(_){return Array.isArray(Lr)===!0&&Lr.indexOf(_)>-1};switch(r){case"pt":$e=1;break;case"mm":$e=72/25.4;break;case"cm":$e=72/2.54;break;case"in":$e=72;break;case"px":$e=ws("px_scaling")==1?.75:96/72;break;case"pc":case"em":$e=12;break;case"ex":$e=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);$e=r}var an=null;xe(),W();var pu=function(_){return h!==null?an.encryptor(_,0):function(B){return B}},ll=p.__private__.getPageInfo=p.getPageInfo=function(_){if(isNaN(_)||_%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:it[_].objId,pageNumber:_,pageContext:it[_]}},pt=p.__private__.getPageInfoByObjId=function(_){if(isNaN(_)||_%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var B in it)if(it[B].objId===_)break;return ll(B)},bs=p.__private__.getCurrentPageInfo=p.getCurrentPageInfo=function(){return{objId:it[G].objId,pageNumber:G,pageContext:it[G]}};p.addPage=function(){return Js.apply(this,arguments),this},p.setPage=function(){return al.apply(this,arguments),Se.call(this,Ee[G]),this},p.insertPage=function(_){return this.addPage(),this.movePage(G,_),this},p.movePage=function(_,B){var se,le;if(_>B){se=Ee[_],le=it[_];for(var ge=_;ge>B;ge--)Ee[ge]=Ee[ge-1],it[ge]=it[ge-1];Ee[B]=se,it[B]=le,this.setPage(B)}else if(_<B){se=Ee[_],le=it[_];for(var Ne=_;Ne<B;Ne++)Ee[Ne]=Ee[Ne+1],it[Ne]=it[Ne+1];Ee[B]=se,it[B]=le,this.setPage(B)}return this},p.deletePage=function(){return Uo.apply(this,arguments),this},p.__private__.text=p.text=function(_,B,se,le,ge){var Ne,Oe,Ge,d,T,D,K,me,be,Fe=(le=le||{}).scope||this;if(typeof _=="number"&&typeof B=="number"&&(typeof se=="string"||Array.isArray(se))){var yt=se;se=B,B=_,_=yt}if(arguments[3]instanceof Ze?(y("The transform parameter of text() with a Matrix value"),be=ge):(Ge=arguments[4],d=arguments[5],Gt(K=arguments[3])==="object"&&K!==null||(typeof Ge=="string"&&(d=Ge,Ge=null),typeof K=="string"&&(d=K,K=null),typeof K=="number"&&(Ge=K,K=null),le={flags:K,angle:Ge,align:d})),isNaN(B)||isNaN(se)||_==null)throw new Error("Invalid arguments passed to jsPDF.text");if(_.length===0)return Fe;var Tt="",_t=!1,zt=typeof le.lineHeightFactor=="number"?le.lineHeightFactor:qt,Jt=Fe.internal.scaleFactor;function Yi(tn){return tn=tn.split("	").join(Array(le.TabLen||9).join(" ")),An(tn,K)}function ir(tn){for(var nn,Cn=tn.concat(),Gn=[],lo=Cn.length;lo--;)typeof(nn=Cn.shift())=="string"?Gn.push(nn):Array.isArray(tn)&&(nn.length===1||nn[1]===void 0&&nn[2]===void 0)?Gn.push(nn[0]):Gn.push([nn[0],nn[1],nn[2]]);return Gn}function Es(tn,nn){var Cn;if(typeof tn=="string")Cn=nn(tn)[0];else if(Array.isArray(tn)){for(var Gn,lo,ih=tn.concat(),Iu=[],Kd=ih.length;Kd--;)typeof(Gn=ih.shift())=="string"?Iu.push(nn(Gn)[0]):Array.isArray(Gn)&&typeof Gn[0]=="string"&&(lo=nn(Gn[0],Gn[1],Gn[2]),Iu.push([lo[0],lo[1],lo[2]]));Cn=Iu}return Cn}var Ns=!1,Xc=!0;if(typeof _=="string")Ns=!0;else if(Array.isArray(_)){var Jc=_.concat();Oe=[];for(var _u,sr=Jc.length;sr--;)(typeof(_u=Jc.shift())!="string"||Array.isArray(_u)&&typeof _u[0]!="string")&&(Xc=!1);Ns=Xc}if(Ns===!1)throw new Error('Type of text must be string or Array. "'+_+'" is not recognized.');typeof _=="string"&&(_=_.match(/[\r?\n]/)?_.split(/\r\n|\r|\n/g):[_]);var wu=Me/Fe.internal.scaleFactor,bu=wu*(zt-1);switch(le.baseline){case"bottom":se-=bu;break;case"top":se+=wu-bu;break;case"hanging":se+=wu-2*bu;break;case"middle":se+=wu/2-bu}if((D=le.maxWidth||0)>0&&(typeof _=="string"?_=Fe.splitTextToSize(_,D):Object.prototype.toString.call(_)==="[object Array]"&&(_=_.reduce(function(tn,nn){return tn.concat(Fe.splitTextToSize(nn,D))},[]))),Ne={text:_,x:B,y:se,options:le,mutex:{pdfEscape:An,activeFontKey:at,fonts:At,activeFontSize:Me}},Et.publish("preProcessText",Ne),_=Ne.text,Ge=(le=Ne.options).angle,!(be instanceof Ze)&&Ge&&typeof Ge=="number"){Ge*=Math.PI/180,le.rotationDirection===0&&(Ge=-Ge),C===x.ADVANCED&&(Ge=-Ge);var xu=Math.cos(Ge),Zc=Math.sin(Ge);be=new Ze(xu,Zc,-Zc,xu,0,0)}else Ge&&Ge instanceof Ze&&(be=Ge);C!==x.ADVANCED||be||(be=mr),(T=le.charSpace||no)!==void 0&&(Tt+=L(I(T))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(me=le.horizontalScale)!==void 0&&(Tt+=L(100*me)+` Tz
`),le.lang;var Qr=-1,og=le.renderingMode!==void 0?le.renderingMode:le.stroke,eh=Fe.internal.getCurrentPageInfo().pageContext;switch(og){case 0:case!1:case"fill":Qr=0;break;case 1:case!0:case"stroke":Qr=1;break;case 2:case"fillThenStroke":Qr=2;break;case 3:case"invisible":Qr=3;break;case 4:case"fillAndAddForClipping":Qr=4;break;case 5:case"strokeAndAddPathForClipping":Qr=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Qr=6;break;case 7:case"addToPathForClipping":Qr=7}var $d=eh.usedRenderingMode!==void 0?eh.usedRenderingMode:-1;Qr!==-1?Tt+=Qr+` Tr
`:$d!==-1&&(Tt+=`0 Tr
`),Qr!==-1&&(eh.usedRenderingMode=Qr),d=le.align||"left";var Ti,Su=Me*zt,Hd=Fe.internal.pageSize.getWidth(),Wd=At[at];T=le.charSpace||no,D=le.maxWidth||0,K=Object.assign({autoencode:!0,noBOM:!0},le.flags);var ea=[],gl=function(tn){return Fe.getStringUnitWidth(tn,{font:Wd,charSpace:T,fontSize:Me,doKerning:!1})*Me/Jt};if(Object.prototype.toString.call(_)==="[object Array]"){var Yr;Oe=ir(_),d!=="left"&&(Ti=Oe.map(gl));var Or,ta=0;if(d==="right"){B-=Ti[0],_=[],sr=Oe.length;for(var so=0;so<sr;so++)so===0?(Or=pi(B),Yr=Wn(se)):(Or=I(ta-Ti[so]),Yr=-Su),_.push([Oe[so],Or,Yr]),ta=Ti[so]}else if(d==="center"){B-=Ti[0]/2,_=[],sr=Oe.length;for(var oo=0;oo<sr;oo++)oo===0?(Or=pi(B),Yr=Wn(se)):(Or=I((ta-Ti[oo])/2),Yr=-Su),_.push([Oe[oo],Or,Yr]),ta=Ti[oo]}else if(d==="left"){_=[],sr=Oe.length;for(var Au=0;Au<sr;Au++)_.push(Oe[Au])}else if(d==="justify"&&Wd.encoding==="Identity-H"){_=[],sr=Oe.length,D=D!==0?D:Hd;for(var ao=0,Pn=0;Pn<sr;Pn++)if(Yr=Pn===0?Wn(se):-Su,Or=Pn===0?pi(B):ao,Pn<sr-1){var th=I((D-Ti[Pn])/(Oe[Pn].split(" ").length-1)),Fr=Oe[Pn].split(" ");_.push([Fr[0]+" ",Or,Yr]),ao=0;for(var ki=1;ki<Fr.length;ki++){var Eu=(gl(Fr[ki-1]+" "+Fr[ki])-gl(Fr[ki]))*Jt+th;ki==Fr.length-1?_.push([Fr[ki],Eu,0]):_.push([Fr[ki]+" ",Eu,0]),ao-=Eu}}else _.push([Oe[Pn],Or,Yr]);_.push(["",ao,0])}else{if(d!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(_=[],sr=Oe.length,D=D!==0?D:Hd,Pn=0;Pn<sr;Pn++)Yr=Pn===0?Wn(se):-Su,Or=Pn===0?pi(B):0,Pn<sr-1?ea.push(L(I((D-Ti[Pn])/(Oe[Pn].split(" ").length-1)))):ea.push(0),_.push([Oe[Pn],Or,Yr])}}var Gd=typeof le.R2L=="boolean"?le.R2L:He;Gd===!0&&(_=Es(_,function(tn,nn,Cn){return[tn.split("").reverse().join(""),nn,Cn]})),Ne={text:_,x:B,y:se,options:le,mutex:{pdfEscape:An,activeFontKey:at,fonts:At,activeFontSize:Me}},Et.publish("postProcessText",Ne),_=Ne.text,_t=Ne.mutex.isHex||!1;var nh=At[at].encoding;nh!=="WinAnsiEncoding"&&nh!=="StandardEncoding"||(_=Es(_,function(tn,nn,Cn){return[Yi(tn),nn,Cn]})),Oe=ir(_),_=[];for(var vl,yl,na,_l=0,Nu=1,wl=Array.isArray(Oe[0])?Nu:_l,ra="",rh=function(tn,nn,Cn){var Gn="";return Cn instanceof Ze?(Cn=typeof le.angle=="number"?Wr(Cn,new Ze(1,0,0,1,tn,nn)):Wr(new Ze(1,0,0,1,tn,nn),Cn),C===x.ADVANCED&&(Cn=Wr(new Ze(1,0,0,-1,0,0),Cn)),Gn=Cn.join(" ")+` Tm
`):Gn=L(tn)+" "+L(nn)+` Td
`,Gn},Pi=0;Pi<Oe.length;Pi++){switch(ra="",wl){case Nu:na=(_t?"<":"(")+Oe[Pi][0]+(_t?">":")"),vl=parseFloat(Oe[Pi][1]),yl=parseFloat(Oe[Pi][2]);break;case _l:na=(_t?"<":"(")+Oe[Pi]+(_t?">":")"),vl=pi(B),yl=Wn(se)}ea!==void 0&&ea[Pi]!==void 0&&(ra=ea[Pi]+` Tw
`),Pi===0?_.push(ra+rh(vl,yl,be)+na):wl===_l?_.push(ra+na):wl===Nu&&_.push(ra+rh(vl,yl,be)+na)}_=wl===_l?_.join(` Tj
T* `):_.join(` Tj
`),_+=` Tj
`;var Ci=`BT
/`;return Ci+=at+" "+Me+` Tf
`,Ci+=L(Me*zt)+` TL
`,Ci+=Ki+`
`,Ci+=Tt,Ci+=_,oe(Ci+="ET"),m[at]=!0,Fe};var Yc=p.__private__.clip=p.clip=function(_){return oe(_==="evenodd"?"W*":"W"),this};p.clipEvenOdd=function(){return Yc("evenodd")},p.__private__.discardPath=p.discardPath=function(){return oe("n"),this};var Ii=p.__private__.isValidStyle=function(_){var B=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(_)!==-1&&(B=!0),B};p.__private__.setDefaultPathOperation=p.setDefaultPathOperation=function(_){return Ii(_)&&(u=_),this};var mu=p.__private__.getStyle=p.getStyle=function(_){var B=u;switch(_){case"D":case"S":B="S";break;case"F":B="f";break;case"FD":case"DF":B="B";break;case"f":case"f*":case"B":case"B*":B=_}return B},di=p.close=function(){return oe("h"),this};p.stroke=function(){return oe("S"),this},p.fill=function(_){return qo("f",_),this},p.fillEvenOdd=function(_){return qo("f*",_),this},p.fillStroke=function(_){return qo("B",_),this},p.fillStrokeEvenOdd=function(_){return qo("B*",_),this};var qo=function(_,B){Gt(B)==="object"?$o(B,_):oe(_)},ul=function(_){_===null||C===x.ADVANCED&&_===void 0||(_=mu(_),oe(_))};function zo(_,B,se,le,ge){var Ne=new tc(B||this.boundingBox,se||this.xStep,le||this.yStep,this.gState,ge||this.matrix);Ne.stream=this.stream;var Oe=_+"$$"+this.cloneIndex+++"$$";return Fn(Oe,Ne),Ne}var $o=function(_,B){var se=ui[_.key],le=Nt[se];if(le instanceof Il)oe("q"),oe(gu(B)),le.gState&&p.setGState(le.gState),oe(_.matrix.toString()+" cm"),oe("/"+se+" sh"),oe("Q");else if(le instanceof tc){var ge=new Ze(1,0,0,-1,0,vr());_.matrix&&(ge=ge.multiply(_.matrix||mr),se=zo.call(le,_.key,_.boundingBox,_.xStep,_.yStep,ge).id),oe("q"),oe("/Pattern cs"),oe("/"+se+" scn"),le.gState&&p.setGState(le.gState),oe(B),oe("Q")}},gu=function(_){switch(_){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},Wi=p.moveTo=function(_,B){return oe(L(I(_))+" "+L(V(B))+" m"),this},fi=p.lineTo=function(_,B){return oe(L(I(_))+" "+L(V(B))+" l"),this},Gi=p.curveTo=function(_,B,se,le,ge,Ne){return oe([L(I(_)),L(V(B)),L(I(se)),L(V(le)),L(I(ge)),L(V(Ne)),"c"].join(" ")),this};p.__private__.line=p.line=function(_,B,se,le,ge){if(isNaN(_)||isNaN(B)||isNaN(se)||isNaN(le)||!Ii(ge))throw new Error("Invalid arguments passed to jsPDF.line");return C===x.COMPAT?this.lines([[se-_,le-B]],_,B,[1,1],ge||"S"):this.lines([[se-_,le-B]],_,B,[1,1]).stroke()},p.__private__.lines=p.lines=function(_,B,se,le,ge,Ne){var Oe,Ge,d,T,D,K,me,be,Fe,yt,Tt,_t;if(typeof _=="number"&&(_t=se,se=B,B=_,_=_t),le=le||[1,1],Ne=Ne||!1,isNaN(B)||isNaN(se)||!Array.isArray(_)||!Array.isArray(le)||!Ii(ge)||typeof Ne!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Wi(B,se),Oe=le[0],Ge=le[1],T=_.length,yt=B,Tt=se,d=0;d<T;d++)(D=_[d]).length===2?(yt=D[0]*Oe+yt,Tt=D[1]*Ge+Tt,fi(yt,Tt)):(K=D[0]*Oe+yt,me=D[1]*Ge+Tt,be=D[2]*Oe+yt,Fe=D[3]*Ge+Tt,yt=D[4]*Oe+yt,Tt=D[5]*Ge+Tt,Gi(K,me,be,Fe,yt,Tt));return Ne&&di(),ul(ge),this},p.path=function(_){for(var B=0;B<_.length;B++){var se=_[B],le=se.c;switch(se.op){case"m":Wi(le[0],le[1]);break;case"l":fi(le[0],le[1]);break;case"c":Gi.apply(this,le);break;case"h":di()}}return this},p.__private__.rect=p.rect=function(_,B,se,le,ge){if(isNaN(_)||isNaN(B)||isNaN(se)||isNaN(le)||!Ii(ge))throw new Error("Invalid arguments passed to jsPDF.rect");return C===x.COMPAT&&(le=-le),oe([L(I(_)),L(V(B)),L(I(se)),L(I(le)),"re"].join(" ")),ul(ge),this},p.__private__.triangle=p.triangle=function(_,B,se,le,ge,Ne,Oe){if(isNaN(_)||isNaN(B)||isNaN(se)||isNaN(le)||isNaN(ge)||isNaN(Ne)||!Ii(Oe))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[se-_,le-B],[ge-se,Ne-le],[_-ge,B-Ne]],_,B,[1,1],Oe,!0),this},p.__private__.roundedRect=p.roundedRect=function(_,B,se,le,ge,Ne,Oe){if(isNaN(_)||isNaN(B)||isNaN(se)||isNaN(le)||isNaN(ge)||isNaN(Ne)||!Ii(Oe))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Ge=4/3*(Math.SQRT2-1);return ge=Math.min(ge,.5*se),Ne=Math.min(Ne,.5*le),this.lines([[se-2*ge,0],[ge*Ge,0,ge,Ne-Ne*Ge,ge,Ne],[0,le-2*Ne],[0,Ne*Ge,-ge*Ge,Ne,-ge,Ne],[2*ge-se,0],[-ge*Ge,0,-ge,-Ne*Ge,-ge,-Ne],[0,2*Ne-le],[0,-Ne*Ge,ge*Ge,-Ne,ge,-Ne]],_+ge,B,[1,1],Oe,!0),this},p.__private__.ellipse=p.ellipse=function(_,B,se,le,ge){if(isNaN(_)||isNaN(B)||isNaN(se)||isNaN(le)||!Ii(ge))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Ne=4/3*(Math.SQRT2-1)*se,Oe=4/3*(Math.SQRT2-1)*le;return Wi(_+se,B),Gi(_+se,B-Oe,_+Ne,B-le,_,B-le),Gi(_-Ne,B-le,_-se,B-Oe,_-se,B),Gi(_-se,B+Oe,_-Ne,B+le,_,B+le),Gi(_+Ne,B+le,_+se,B+Oe,_+se,B),ul(ge),this},p.__private__.circle=p.circle=function(_,B,se,le){if(isNaN(_)||isNaN(B)||isNaN(se)||!Ii(le))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(_,B,se,se,le)},p.setFont=function(_,B,se){return se&&(B=z(B,se)),at=Zs(_,B,{disableWarning:!1}),this};var cl=p.__private__.getFont=p.getFont=function(){return At[Zs.apply(p,arguments)]};p.__private__.getFontList=p.getFontList=function(){var _,B,se={};for(_ in Bt)if(Bt.hasOwnProperty(_))for(B in se[_]=[],Bt[_])Bt[_].hasOwnProperty(B)&&se[_].push(B);return se},p.addFont=function(_,B,se,le,ge){var Ne=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Ne.indexOf(arguments[3])!==-1?ge=arguments[3]:arguments[3]&&Ne.indexOf(arguments[3])==-1&&(se=z(se,le)),ge=ge||"Identity-H",ol.call(this,_,B,se,ge)};var qt,hl=t.lineWidth||.200025,Ho=p.__private__.getLineWidth=p.getLineWidth=function(){return hl},dl=p.__private__.setLineWidth=p.setLineWidth=function(_){return hl=_,oe(L(I(_))+" w"),this};p.__private__.setLineDash=dt.API.setLineDash=dt.API.setLineDashPattern=function(_,B){if(_=_||[],B=B||0,isNaN(B)||!Array.isArray(_))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return _=_.map(function(se){return L(I(se))}).join(" "),B=L(I(B)),oe("["+_+"] "+B+" d"),this};var fl=p.__private__.getLineHeight=p.getLineHeight=function(){return Me*qt};p.__private__.getLineHeight=p.getLineHeight=function(){return Me*qt};var pl=p.__private__.setLineHeightFactor=p.setLineHeightFactor=function(_){return typeof(_=_||1.15)=="number"&&(qt=_),this},to=p.__private__.getLineHeightFactor=p.getLineHeightFactor=function(){return qt};pl(t.lineHeight);var pi=p.__private__.getHorizontalCoordinate=function(_){return I(_)},Wn=p.__private__.getVerticalCoordinate=function(_){return C===x.ADVANCED?_:it[G].mediaBox.topRightY-it[G].mediaBox.bottomLeftY-I(_)},vu=p.__private__.getHorizontalCoordinateString=p.getHorizontalCoordinateString=function(_){return L(pi(_))},xs=p.__private__.getVerticalCoordinateString=p.getVerticalCoordinateString=function(_){return L(Wn(_))},rr=t.strokeColor||"0 G";p.__private__.getStrokeColor=p.getDrawColor=function(){return Gr(rr)},p.__private__.setStrokeColor=p.setDrawColor=function(_,B,se,le){return rr=Rr({ch1:_,ch2:B,ch3:se,ch4:le,pdfColorType:"draw",precision:2}),oe(rr),this};var Wo=t.fillColor||"0 g";p.__private__.getFillColor=p.getFillColor=function(){return Gr(Wo)},p.__private__.setFillColor=p.setFillColor=function(_,B,se,le){return Wo=Rr({ch1:_,ch2:B,ch3:se,ch4:le,pdfColorType:"fill",precision:2}),oe(Wo),this};var Ki=t.textColor||"0 g",Go=p.__private__.getTextColor=p.getTextColor=function(){return Gr(Ki)};p.__private__.setTextColor=p.setTextColor=function(_,B,se,le){return Ki=Rr({ch1:_,ch2:B,ch3:se,ch4:le,pdfColorType:"text",precision:3}),this};var no=t.charSpace,Ko=p.__private__.getCharSpace=p.getCharSpace=function(){return parseFloat(no||0)};p.__private__.setCharSpace=p.setCharSpace=function(_){if(isNaN(_))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return no=_,this};var ml=0;p.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},p.__private__.setLineCap=p.setLineCap=function(_){var B=p.CapJoinStyles[_];if(B===void 0)throw new Error("Line cap style of '"+_+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return ml=B,oe(B+" J"),this};var Qo=0;p.__private__.setLineJoin=p.setLineJoin=function(_){var B=p.CapJoinStyles[_];if(B===void 0)throw new Error("Line join style of '"+_+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Qo=B,oe(B+" j"),this},p.__private__.setLineMiterLimit=p.__private__.setMiterLimit=p.setLineMiterLimit=p.setMiterLimit=function(_){if(_=_||0,isNaN(_))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return oe(L(I(_))+" M"),this},p.GState=om,p.setGState=function(_){(_=typeof _=="string"?Ut[Hn[_]]:Ss(null,_)).equals(xn)||(oe("/"+_.id+" gs"),xn=_)};var Ss=function(_,B){if(!_||!Hn[_]){var se=!1;for(var le in Ut)if(Ut.hasOwnProperty(le)&&Ut[le].equals(B)){se=!0;break}if(se)B=Ut[le];else{var ge="GS"+(Object.keys(Ut).length+1).toString(10);Ut[ge]=B,B.id=ge}return _&&(Hn[_]=B.id),Et.publish("addGState",B),B}};p.addGState=function(_,B){return Ss(_,B),this},p.saveGraphicsState=function(){return oe("q"),Hr.push({key:at,size:Me,color:Ki}),this},p.restoreGraphicsState=function(){oe("Q");var _=Hr.pop();return at=_.key,Me=_.size,Ki=_.color,xn=null,this},p.setCurrentTransformationMatrix=function(_){return oe(_.toString()+" cm"),this},p.comment=function(_){return oe("#"+_),this};var ro=function(_,B){var se=_||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return se},set:function(Ne){isNaN(Ne)||(se=parseFloat(Ne))}});var le=B||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return le},set:function(Ne){isNaN(Ne)||(le=parseFloat(Ne))}});var ge="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return ge},set:function(Ne){ge=Ne.toString()}}),this},Yo=function(_,B,se,le){ro.call(this,_,B),this.type="rect";var ge=se||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return ge},set:function(Oe){isNaN(Oe)||(ge=parseFloat(Oe))}});var Ne=le||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Ne},set:function(Oe){isNaN(Oe)||(Ne=parseFloat(Oe))}}),this},io=function(){this.page=Lt,this.currentPage=G,this.pages=Ee.slice(0),this.pagesContext=it.slice(0),this.x=Ct,this.y=vt,this.matrix=sn,this.width=As(G),this.height=vr(G),this.outputDestination=Ue,this.id="",this.objectNumber=-1};io.prototype.restore=function(){Lt=this.page,G=this.currentPage,it=this.pagesContext,Ee=this.pages,Ct=this.x,vt=this.y,sn=this.matrix,Jo(G,this.width),Zo(G,this.height),Ue=this.outputDestination};var Xo=function(_,B,se,le,ge){ci.push(new io),Lt=G=0,Ee=[],Ct=_,vt=B,sn=ge,Dr([se,le])},yu=function(_){if(fn[_])ci.pop().restore();else{var B=new io,se="Xo"+(Object.keys(Yt).length+1).toString(10);B.id=se,fn[_]=se,Yt[se]=B,Et.publish("addFormObject",B),ci.pop().restore()}};for(var Qi in p.beginFormObject=function(_,B,se,le,ge){return Xo(_,B,se,le,ge),this},p.endFormObject=function(_){return yu(_),this},p.doFormObject=function(_,B){var se=Yt[fn[_]];return oe("q"),oe(B.toString()+" cm"),oe("/"+se.id+" Do"),oe("Q"),this},p.getFormObject=function(_){var B=Yt[fn[_]];return{x:B.x,y:B.y,width:B.width,height:B.height,matrix:B.matrix}},p.save=function(_,B){return _=_||"generated.pdf",(B=B||{}).returnPromise=B.returnPromise||!1,B.returnPromise===!1?(El(Vo(Hi()),_),typeof El.unload=="function"&&ft.setTimeout&&setTimeout(El.unload,911),this):new Promise(function(se,le){try{var ge=El(Vo(Hi()),_);typeof El.unload=="function"&&ft.setTimeout&&setTimeout(El.unload,911),se(ge)}catch(Ne){le(Ne.message)}})},dt.API)dt.API.hasOwnProperty(Qi)&&(Qi==="events"&&dt.API.events.length?function(_,B){var se,le,ge;for(ge=B.length-1;ge!==-1;ge--)se=B[ge][0],le=B[ge][1],_.subscribe.apply(_,[se].concat(typeof le=="function"?[le]:le))}(Et,dt.API.events):p[Qi]=dt.API[Qi]);var As=p.getPageWidth=function(_){return(it[_=_||G].mediaBox.topRightX-it[_].mediaBox.bottomLeftX)/$e},Jo=p.setPageWidth=function(_,B){it[_].mediaBox.topRightX=B*$e+it[_].mediaBox.bottomLeftX},vr=p.getPageHeight=function(_){return(it[_=_||G].mediaBox.topRightY-it[_].mediaBox.bottomLeftY)/$e},Zo=p.setPageHeight=function(_,B){it[_].mediaBox.topRightY=B*$e+it[_].mediaBox.bottomLeftY};return p.internal={pdfEscape:An,getStyle:mu,getFont:cl,getFontSize:ze,getCharSpace:Ko,getTextColor:Go,getLineHeight:fl,getLineHeightFactor:to,getLineWidth:Ho,write:ye,getHorizontalCoordinate:pi,getVerticalCoordinate:Wn,getCoordinateString:vu,getVerticalCoordinateString:xs,collections:{},newObject:Tn,newAdditionalObject:Oo,newObjectDeferred:Sn,newObjectDeferredBegin:Mn,getFilters:jr,putStream:kn,events:Et,scaleFactor:$e,pageSize:{getWidth:function(){return As(G)},setWidth:function(_){Jo(G,_)},getHeight:function(){return vr(G)},setHeight:function(_){Zo(G,_)}},encryptionOptions:h,encryption:an,getEncryptor:pu,output:Bo,getNumberOfPages:$t,pages:Ee,out:oe,f2:R,f3:A,getPageInfo:ll,getPageInfoByObjId:pt,getCurrentPageInfo:bs,getPDFVersion:E,Point:ro,Rectangle:Yo,Matrix:Ze,hasHotfix:ws},Object.defineProperty(p.internal.pageSize,"width",{get:function(){return As(G)},set:function(_){Jo(G,_)},enumerable:!0,configurable:!0}),Object.defineProperty(p.internal.pageSize,"height",{get:function(){return vr(G)},set:function(_){Zo(G,_)},enumerable:!0,configurable:!0}),du.call(p,Te),at="F1",Js(i,n),Et.publish("initialized"),p}Vu.prototype.lsbFirstWord=function(t){return String.fromCharCode(t>>0&255,t>>8&255,t>>16&255,t>>24&255)},Vu.prototype.toHexString=function(t){return t.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Vu.prototype.hexToBytes=function(t){for(var e=[],n=0;n<t.length;n+=2)e.push(String.fromCharCode(parseInt(t.substr(n,2),16)));return e.join("")},Vu.prototype.processOwnerPassword=function(t,e){return e2(Z0(e).substr(0,5),t)},Vu.prototype.encryptor=function(t,e){var n=Z0(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(r){return e2(n,r)}},om.prototype.equals=function(t){var e,n="id,objectNumber,equals";if(!t||Gt(t)!==Gt(this))return!1;var r=0;for(e in this)if(!(n.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this[e]!==t[e])return!1;r++}for(e in t)t.hasOwnProperty(e)&&n.indexOf(e)<0&&r--;return r===0},dt.API={events:[]},dt.version="2.5.2";var Nn=dt.API,oy=1,au=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},ju=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},wt=function(t){return t.toFixed(2)},pa=function(t){return t.toFixed(5)};Nn.__acroform__={};var li=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},kw=function(t){return t*oy},Ps=function(t){var e=new pA,n=nt.internal.getHeight(t)||0,r=nt.internal.getWidth(t)||0;return e.BBox=[0,0,Number(wt(r)),Number(wt(n))],e},K7=Nn.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|=1<<e},Q7=Nn.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&=~(1<<e)},Y7=Nn.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return t&1<<e?1:0},jn=Nn.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return Y7(t,e-1)},Dn=Nn.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return K7(t,e-1)},On=Nn.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return Q7(t,e-1)},X7=Nn.__acroform__.calculateCoordinates=function(t,e){var n=e.internal.getHorizontalCoordinate,r=e.internal.getVerticalCoordinate,i=t[0],s=t[1],o=t[2],a=t[3],l={};return l.lowerLeft_X=n(i)||0,l.lowerLeft_Y=r(s+a)||0,l.upperRight_X=n(i+o)||0,l.upperRight_Y=r(s)||0,[Number(wt(l.lowerLeft_X)),Number(wt(l.lowerLeft_Y)),Number(wt(l.upperRight_X)),Number(wt(l.upperRight_Y))]},J7=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],n=t._V||t.DV,r=t2(t,n),i=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+i+" "+wt(r.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(r.text),e.push("ET"),e.push("Q"),e.push("EMC");var s=Ps(t);return s.scope=t.scope,s.stream=e.join(`
`),s}},t2=function(t,e){var n=t.fontSize===0?t.maxFontSize:t.fontSize,r={text:"",fontSize:""},i=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");i=t.multiline?i.map(function(A){return A.split(`
`)}):i.map(function(A){return[A]});var s=n,o=nt.internal.getHeight(t)||0;o=o<0?-o:o;var a=nt.internal.getWidth(t)||0;a=a<0?-a:a;var l=function(A,I,P){if(A+1<i.length){var V=I+" "+i[A+1][0];return Bf(V,t,P).width<=a-4}return!1};s++;e:for(;s>0;){e="",s--;var u,h,f=Bf("3",t,s).height,m=t.multiline?o-s:(o-f)/2,p=m+=2,b=0,E=0,k=0;if(s<=0){e=`(...) Tj
`,e+="% Width of Text: "+Bf(e,t,s=12).width+", FieldWidth:"+a+`
`;break}for(var w="",x=0,C=0;C<i.length;C++)if(i.hasOwnProperty(C)){var M=!1;if(i[C].length!==1&&k!==i[C].length-1){if((f+2)*(x+2)+2>o)continue e;w+=i[C][k],M=!0,E=C,C--}else{w=(w+=i[C][k]+" ").substr(w.length-1)==" "?w.substr(0,w.length-1):w;var Q=parseInt(C),z=l(Q,w,s),L=C>=i.length-1;if(z&&!L){w+=" ",k=0;continue}if(z||L){if(L)E=Q;else if(t.multiline&&(f+2)*(x+2)+2>o)continue e}else{if(!t.multiline||(f+2)*(x+2)+2>o)continue e;E=Q}}for(var y="",N=b;N<=E;N++){var R=i[N];if(t.multiline){if(N===E){y+=R[k]+" ",k=(k+1)%R.length;continue}if(N===b){y+=R[R.length-1]+" ";continue}}y+=R[0]+" "}switch(y=y.substr(y.length-1)==" "?y.substr(0,y.length-1):y,h=Bf(y,t,s).width,t.textAlign){case"right":u=a-h-2;break;case"center":u=(a-h)/2;break;case"left":default:u=2}e+=wt(u)+" "+wt(p)+` Td
`,e+="("+au(y)+`) Tj
`,e+=-wt(u)+` 0 Td
`,p=-(s+2),h=0,b=M?E:E+1,x++,w=""}break}return r.text=e,r.fontSize=s,r},Bf=function(t,e,n){var r=e.scope.internal.getFont(e.fontName,e.fontStyle),i=e.scope.getStringUnitWidth(t,{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:e.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:i}},Z7={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},eD=function(t,e){var n={type:"reference",object:t};e.internal.getPageInfo(t.page).pageContext.annotations.find(function(r){return r.type===n.type&&r.object===n.object})===void 0&&e.internal.getPageInfo(t.page).pageContext.annotations.push(n)},tD=function(t,e){for(var n in t)if(t.hasOwnProperty(n)){var r=n,i=t[n];e.internal.newObjectDeferredBegin(i.objId,!0),Gt(i)==="object"&&typeof i.putStream=="function"&&i.putStream(),delete t[r]}},nD=function(t,e){if(e.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(fs.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(Z7)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");oy=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new mA,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(n){n.internal.events.unsubscribe(n.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete n.internal.acroformPlugin.acroFormDictionaryRoot._eventID,n.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(n){n.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=n.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in r)if(r.hasOwnProperty(i)){var s=r[i];s.objId=void 0,s.hasAnnotation&&eD(s,n)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(n){if(n.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");n.internal.write("/AcroForm "+n.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(n){(function(r,i){var s=!r;for(var o in r||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(o)){var a=r[o],l=[],u=a.Rect;if(a.Rect&&(a.Rect=X7(a.Rect,i)),i.internal.newObjectDeferredBegin(a.objId,!0),a.DA=nt.createDefaultAppearanceStream(a),Gt(a)==="object"&&typeof a.getKeyValueListForStream=="function"&&(l=a.getKeyValueListForStream()),a.Rect=u,a.hasAppearanceStream&&!a.appearanceStreamContent){var h=J7(a);l.push({key:"AP",value:"<</N "+h+">>"}),i.internal.acroformPlugin.xForms.push(h)}if(a.appearanceStreamContent){var f="";for(var m in a.appearanceStreamContent)if(a.appearanceStreamContent.hasOwnProperty(m)){var p=a.appearanceStreamContent[m];if(f+="/"+m+" ",f+="<<",Object.keys(p).length>=1||Array.isArray(p)){for(var o in p)if(p.hasOwnProperty(o)){var b=p[o];typeof b=="function"&&(b=b.call(i,a)),f+="/"+o+" "+b+" ",i.internal.acroformPlugin.xForms.indexOf(b)>=0||i.internal.acroformPlugin.xForms.push(b)}}else typeof(b=p)=="function"&&(b=b.call(i,a)),f+="/"+o+" "+b,i.internal.acroformPlugin.xForms.indexOf(b)>=0||i.internal.acroformPlugin.xForms.push(b);f+=">>"}l.push({key:"AP",value:`<<
`+f+">>"})}i.internal.putStream({additionalKeyValues:l,objectId:a.objId}),i.internal.out("endobj")}s&&tD(i.internal.acroformPlugin.xForms,i)})(n,t)}),t.internal.acroformPlugin.isInitialized=!0}},fA=Nn.__acroform__.arrayToPdfArray=function(t,e,n){var r=function(o){return o};if(Array.isArray(t)){for(var i="[",s=0;s<t.length;s++)switch(s!==0&&(i+=" "),Gt(t[s])){case"boolean":case"number":case"object":i+=t[s].toString();break;case"string":t[s].substr(0,1)!=="/"?(e!==void 0&&n&&(r=n.internal.getEncryptor(e)),i+="("+au(r(t[s].toString()))+")"):i+=t[s].toString()}return i+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},v1=function(t,e,n){var r=function(i){return i};return e!==void 0&&n&&(r=n.internal.getEncryptor(e)),(t=t||"").toString(),t="("+au(r(t))+")"},Ds=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Ds.prototype.toString=function(){return this.objId+" 0 R"},Ds.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},Ds.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var n in e)if(Object.getOwnPropertyDescriptor(this,e[n]).configurable===!1){var r=e[n],i=this[r];i&&(Array.isArray(i)?t.push({key:r,value:fA(i,this.objId,this.scope)}):i instanceof Ds?(i.scope=this.scope,t.push({key:r,value:i.objId+" 0 R"})):typeof i!="function"&&t.push({key:r,value:i}))}return t};var pA=function(){Ds.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(n){t=n.trim()},get:function(){return t||null}})};li(pA,Ds);var mA=function(){Ds.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var n=function(r){return r};return this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),"("+au(n(t))+")"}},set:function(n){t=n}})};li(mA,Ds);var fs=function t(){Ds.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(w){if(isNaN(w))throw new Error('Invalid value "'+w+'" for attribute F supplied.');e=w}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!jn(e,3)},set:function(w){w?this.F=Dn(e,3):this.F=On(e,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(w){if(isNaN(w))throw new Error('Invalid value "'+w+'" for attribute Ff supplied.');n=w}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(w){r=w!==void 0?w:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(w){r[0]=w}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(w){r[1]=w}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(w){r[2]=w}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(w){r[3]=w}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(w){switch(w){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=w;break;default:throw new Error('Invalid value "'+w+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof am)return;s="FieldObject"+t.FieldNum++}var w=function(x){return x};return this.scope&&(w=this.scope.internal.getEncryptor(this.objId)),"("+au(w(s))+")"},set:function(w){s=w.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(w){s=w}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(w){o=w}});var a="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return a},set:function(w){a=w}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(w){l=w}});var u=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return u===void 0?50/oy:u},set:function(w){u=w}});var h="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return h},set:function(w){h=w}});var f="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!f||this instanceof am||this instanceof Fl))return v1(f,this.objId,this.scope)},set:function(w){w=w.toString(),f=w}});var m=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(m)return this instanceof tr?m:v1(m,this.objId,this.scope)},set:function(w){w=w.toString(),m=this instanceof tr?w:w.substr(0,1)==="("?ju(w.substr(1,w.length-2)):ju(w)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof tr?ju(m.substr(1,m.length-1)):m},set:function(w){w=w.toString(),m=this instanceof tr?"/"+w:w}});var p=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(p)return p},set:function(w){this.V=w}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(p)return this instanceof tr?p:v1(p,this.objId,this.scope)},set:function(w){w=w.toString(),p=this instanceof tr?w:w.substr(0,1)==="("?ju(w.substr(1,w.length-2)):ju(w)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof tr?ju(p.substr(1,p.length-1)):p},set:function(w){w=w.toString(),p=this instanceof tr?"/"+w:w}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var b,E=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return E},set:function(w){w=!!w,E=w}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(b)return b},set:function(w){b=w}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!jn(this.Ff,1)},set:function(w){w?this.Ff=Dn(this.Ff,1):this.Ff=On(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!jn(this.Ff,2)},set:function(w){w?this.Ff=Dn(this.Ff,2):this.Ff=On(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!jn(this.Ff,3)},set:function(w){w?this.Ff=Dn(this.Ff,3):this.Ff=On(this.Ff,3)}});var k=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(k!==null)return k},set:function(w){if([0,1,2].indexOf(w)===-1)throw new Error('Invalid value "'+w+'" for attribute Q supplied.');k=w}}),Object.defineProperty(this,"textAlign",{get:function(){var w;switch(k){case 0:default:w="left";break;case 1:w="center";break;case 2:w="right"}return w},configurable:!0,enumerable:!0,set:function(w){switch(w){case"right":case 2:k=2;break;case"center":case 1:k=1;break;case"left":case 0:default:k=0}}})};li(fs,Ds);var fc=function(){fs.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(n){t=n}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return fA(e,this.objId,this.scope)},set:function(n){var r,i;i=[],typeof(r=n)=="string"&&(i=function(s,o,a){a||(a=1);for(var l,u=[];l=o.exec(s);)u.push(l[a]);return u}(r,/\((.*?)\)/g)),e=i}}),this.getOptions=function(){return e},this.setOptions=function(n){e=n,this.sort&&e.sort()},this.addOption=function(n){n=(n=n||"").toString(),e.push(n),this.sort&&e.sort()},this.removeOption=function(n,r){for(r=r||!1,n=(n=n||"").toString();e.indexOf(n)!==-1&&(e.splice(e.indexOf(n),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!jn(this.Ff,18)},set:function(n){n?this.Ff=Dn(this.Ff,18):this.Ff=On(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!jn(this.Ff,19)},set:function(n){this.combo===!0&&(n?this.Ff=Dn(this.Ff,19):this.Ff=On(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!jn(this.Ff,20)},set:function(n){n?(this.Ff=Dn(this.Ff,20),e.sort()):this.Ff=On(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!jn(this.Ff,22)},set:function(n){n?this.Ff=Dn(this.Ff,22):this.Ff=On(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!jn(this.Ff,23)},set:function(n){n?this.Ff=Dn(this.Ff,23):this.Ff=On(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!jn(this.Ff,27)},set:function(n){n?this.Ff=Dn(this.Ff,27):this.Ff=On(this.Ff,27)}}),this.hasAppearanceStream=!1};li(fc,fs);var pc=function(){fc.call(this),this.fontName="helvetica",this.combo=!1};li(pc,fc);var mc=function(){pc.call(this),this.combo=!0};li(mc,pc);var hp=function(){mc.call(this),this.edit=!0};li(hp,mc);var tr=function(){fs.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!jn(this.Ff,15)},set:function(n){n?this.Ff=Dn(this.Ff,15):this.Ff=On(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!jn(this.Ff,16)},set:function(n){n?this.Ff=Dn(this.Ff,16):this.Ff=On(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!jn(this.Ff,17)},set:function(n){n?this.Ff=Dn(this.Ff,17):this.Ff=On(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!jn(this.Ff,26)},set:function(n){n?this.Ff=Dn(this.Ff,26):this.Ff=On(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var n=function(s){return s};if(this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var r,i=[];for(r in i.push("<<"),e)i.push("/"+r+" ("+au(n(e[r]))+")");return i.push(">>"),i.join(`
`)}},set:function(n){Gt(n)==="object"&&(e=n)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(n){typeof n=="string"&&(e.CA=n)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(n){t="/"+n}})};li(tr,fs);var dp=function(){tr.call(this),this.pushButton=!0};li(dp,tr);var gc=function(){tr.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e!==void 0?e:[]}})};li(gc,tr);var am=function(){var t,e;fs.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(i){t=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(i){e=i}});var n,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(a){return a};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var s,o=[];for(s in o.push("<<"),r)o.push("/"+s+" ("+au(i(r[s]))+")");return o.push(">>"),o.join(`
`)},set:function(i){Gt(i)==="object"&&(r=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(i){typeof i=="string"&&(r.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(i){n=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(i){n="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=nt.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};li(am,fs),gc.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var n=this.Kids[e];n.appearanceStreamContent=t.createAppearanceStream(n.optionName),n.caption=t.getCA()}},gc.prototype.createOption=function(t){var e=new am;return e.Parent=this,e.optionName=t,this.Kids.push(e),rD.call(this.scope,e),e};var fp=function(){tr.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=nt.CheckBox.createAppearanceStream()};li(fp,tr);var Fl=function(){fs.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!jn(this.Ff,13)},set:function(e){e?this.Ff=Dn(this.Ff,13):this.Ff=On(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!jn(this.Ff,21)},set:function(e){e?this.Ff=Dn(this.Ff,21):this.Ff=On(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!jn(this.Ff,23)},set:function(e){e?this.Ff=Dn(this.Ff,23):this.Ff=On(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!jn(this.Ff,24)},set:function(e){e?this.Ff=Dn(this.Ff,24):this.Ff=On(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!jn(this.Ff,25)},set:function(e){e?this.Ff=Dn(this.Ff,25):this.Ff=On(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!jn(this.Ff,26)},set:function(e){e?this.Ff=Dn(this.Ff,26):this.Ff=On(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};li(Fl,fs);var pp=function(){Fl.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!jn(this.Ff,14)},set:function(t){t?this.Ff=Dn(this.Ff,14):this.Ff=On(this.Ff,14)}}),this.password=!0};li(pp,Fl);var nt={CheckBox:{createAppearanceStream:function(){return{N:{On:nt.CheckBox.YesNormal},D:{On:nt.CheckBox.YesPushDown,Off:nt.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=Ps(t);e.scope=t.scope;var n=[],r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,i=t.scope.__private__.encodeColorString(t.color),s=t2(t,t.caption);return n.push("0.749023 g"),n.push("0 0 "+wt(nt.internal.getWidth(t))+" "+wt(nt.internal.getHeight(t))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+r+" "+wt(s.fontSize)+" Tf "+i),n.push("BT"),n.push(s.text),n.push("ET"),n.push("Q"),n.push("EMC"),e.stream=n.join(`
`),e},YesNormal:function(t){var e=Ps(t);e.scope=t.scope;var n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color),i=[],s=nt.internal.getHeight(t),o=nt.internal.getWidth(t),a=t2(t,t.caption);return i.push("1 g"),i.push("0 0 "+wt(o)+" "+wt(s)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+wt(o-1)+" "+wt(s-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+n+" "+wt(a.fontSize)+" Tf "+r),i.push(a.text),i.push("ET"),i.push("Q"),e.stream=i.join(`
`),e},OffPushDown:function(t){var e=Ps(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+wt(nt.internal.getWidth(t))+" "+wt(nt.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:nt.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=nt.RadioButton.Circle.YesNormal,e.D[t]=nt.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=Ps(t);e.scope=t.scope;var n=[],r=nt.internal.getWidth(t)<=nt.internal.getHeight(t)?nt.internal.getWidth(t)/4:nt.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=nt.internal.Bezier_C,s=Number((r*i).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+pa(nt.internal.getWidth(t)/2)+" "+pa(nt.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+s+" "+s+" "+r+" 0 "+r+" c"),n.push("-"+s+" "+r+" -"+r+" "+s+" -"+r+" 0 c"),n.push("-"+r+" -"+s+" -"+s+" -"+r+" 0 -"+r+" c"),n.push(s+" -"+r+" "+r+" -"+s+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=Ps(t);e.scope=t.scope;var n=[],r=nt.internal.getWidth(t)<=nt.internal.getHeight(t)?nt.internal.getWidth(t)/4:nt.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*nt.internal.Bezier_C).toFixed(5)),o=Number((r*nt.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+pa(nt.internal.getWidth(t)/2)+" "+pa(nt.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),n.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),n.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),n.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+pa(nt.internal.getWidth(t)/2)+" "+pa(nt.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+o+" "+o+" "+r+" 0 "+r+" c"),n.push("-"+o+" "+r+" -"+r+" "+o+" -"+r+" 0 c"),n.push("-"+r+" -"+o+" -"+o+" -"+r+" 0 -"+r+" c"),n.push(o+" -"+r+" "+r+" -"+o+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(t){var e=Ps(t);e.scope=t.scope;var n=[],r=nt.internal.getWidth(t)<=nt.internal.getHeight(t)?nt.internal.getWidth(t)/4:nt.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*nt.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+pa(nt.internal.getWidth(t)/2)+" "+pa(nt.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),n.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),n.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),n.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:nt.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=nt.RadioButton.Cross.YesNormal,e.D[t]=nt.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=Ps(t);e.scope=t.scope;var n=[],r=nt.internal.calculateCross(t);return n.push("q"),n.push("1 1 "+wt(nt.internal.getWidth(t)-2)+" "+wt(nt.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(wt(r.x1.x)+" "+wt(r.x1.y)+" m"),n.push(wt(r.x2.x)+" "+wt(r.x2.y)+" l"),n.push(wt(r.x4.x)+" "+wt(r.x4.y)+" m"),n.push(wt(r.x3.x)+" "+wt(r.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=Ps(t);e.scope=t.scope;var n=nt.internal.calculateCross(t),r=[];return r.push("0.749023 g"),r.push("0 0 "+wt(nt.internal.getWidth(t))+" "+wt(nt.internal.getHeight(t))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+wt(nt.internal.getWidth(t)-2)+" "+wt(nt.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(wt(n.x1.x)+" "+wt(n.x1.y)+" m"),r.push(wt(n.x2.x)+" "+wt(n.x2.y)+" l"),r.push(wt(n.x4.x)+" "+wt(n.x4.y)+" m"),r.push(wt(n.x3.x)+" "+wt(n.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(t){var e=Ps(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+wt(nt.internal.getWidth(t))+" "+wt(nt.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+n}};nt.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=nt.internal.getWidth(t),n=nt.internal.getHeight(t),r=Math.min(e,n);return{x1:{x:(e-r)/2,y:(n-r)/2+r},x2:{x:(e-r)/2+r,y:(n-r)/2},x3:{x:(e-r)/2,y:(n-r)/2},x4:{x:(e-r)/2+r,y:(n-r)/2+r}}}},nt.internal.getWidth=function(t){var e=0;return Gt(t)==="object"&&(e=kw(t.Rect[2])),e},nt.internal.getHeight=function(t){var e=0;return Gt(t)==="object"&&(e=kw(t.Rect[3])),e};var rD=Nn.addField=function(t){if(nD(this,t),!(t instanceof fs))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};Nn.AcroFormChoiceField=fc,Nn.AcroFormListBox=pc,Nn.AcroFormComboBox=mc,Nn.AcroFormEditBox=hp,Nn.AcroFormButton=tr,Nn.AcroFormPushButton=dp,Nn.AcroFormRadioButton=gc,Nn.AcroFormCheckBox=fp,Nn.AcroFormTextField=Fl,Nn.AcroFormPasswordField=pp,Nn.AcroFormAppearance=nt,Nn.AcroForm={ChoiceField:fc,ListBox:pc,ComboBox:mc,EditBox:hp,Button:tr,PushButton:dp,RadioButton:gc,CheckBox:fp,TextField:Fl,PasswordField:pp,Appearance:nt},dt.AcroForm={ChoiceField:fc,ListBox:pc,ComboBox:mc,EditBox:hp,Button:tr,PushButton:dp,RadioButton:gc,CheckBox:fp,TextField:Fl,PasswordField:pp,Appearance:nt};dt.AcroForm;function gA(t){return t.reduce(function(e,n,r){return e[n]=r,e},{})}(function(t){t.__addimage__={};var e="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},r=t.__addimage__.getImageFileTypeByImageData=function(A,I){var P,V,J,O,U,W=e;if((I=I||e)==="RGBA"||A.data!==void 0&&A.data instanceof Uint8ClampedArray&&"height"in A&&"width"in A)return"RGBA";if(z(A))for(U in n)for(J=n[U],P=0;P<J.length;P+=1){for(O=!0,V=0;V<J[P].length;V+=1)if(J[P][V]!==void 0&&J[P][V]!==A[V]){O=!1;break}if(O===!0){W=U;break}}else for(U in n)for(J=n[U],P=0;P<J.length;P+=1){for(O=!0,V=0;V<J[P].length;V+=1)if(J[P][V]!==void 0&&J[P][V]!==A.charCodeAt(V)){O=!1;break}if(O===!0){W=U;break}}return W===e&&I!==e&&(W=I),W},i=function A(I){for(var P=this.internal.write,V=this.internal.putStream,J=(0,this.internal.getFilters)();J.indexOf("FlateEncode")!==-1;)J.splice(J.indexOf("FlateEncode"),1);I.objectId=this.internal.newObject();var O=[];if(O.push({key:"Type",value:"/XObject"}),O.push({key:"Subtype",value:"/Image"}),O.push({key:"Width",value:I.width}),O.push({key:"Height",value:I.height}),I.colorSpace===k.INDEXED?O.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(I.palette.length/3-1)+" "+("sMask"in I&&I.sMask!==void 0?I.objectId+2:I.objectId+1)+" 0 R]"}):(O.push({key:"ColorSpace",value:"/"+I.colorSpace}),I.colorSpace===k.DEVICE_CMYK&&O.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),O.push({key:"BitsPerComponent",value:I.bitsPerComponent}),"decodeParameters"in I&&I.decodeParameters!==void 0&&O.push({key:"DecodeParms",value:"<<"+I.decodeParameters+">>"}),"transparency"in I&&Array.isArray(I.transparency)){for(var U="",W=0,ee=I.transparency.length;W<ee;W++)U+=I.transparency[W]+" "+I.transparency[W]+" ";O.push({key:"Mask",value:"["+U+"]"})}I.sMask!==void 0&&O.push({key:"SMask",value:I.objectId+1+" 0 R"});var re=I.filter!==void 0?["/"+I.filter]:void 0;if(V({data:I.data,additionalKeyValues:O,alreadyAppliedFilters:re,objectId:I.objectId}),P("endobj"),"sMask"in I&&I.sMask!==void 0){var xe="/Predictor "+I.predictor+" /Colors 1 /BitsPerComponent "+I.bitsPerComponent+" /Columns "+I.width,F={width:I.width,height:I.height,colorSpace:"DeviceGray",bitsPerComponent:I.bitsPerComponent,decodeParameters:xe,data:I.sMask};"filter"in I&&(F.filter=I.filter),A.call(this,F)}if(I.colorSpace===k.INDEXED){var G=this.internal.newObject();V({data:y(new Uint8Array(I.palette)),objectId:G}),P("endobj")}},s=function(){var A=this.internal.collections.addImage_images;for(var I in A)i.call(this,A[I])},o=function(){var A,I=this.internal.collections.addImage_images,P=this.internal.write;for(var V in I)P("/I"+(A=I[V]).index,A.objectId,"0","R")},a=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",s),this.internal.events.subscribe("putXobjectDict",o))},l=function(){var A=this.internal.collections.addImage_images;return a.call(this),A},u=function(){return Object.keys(this.internal.collections.addImage_images).length},h=function(A){return typeof t["process"+A.toUpperCase()]=="function"},f=function(A){return Gt(A)==="object"&&A.nodeType===1},m=function(A,I){if(A.nodeName==="IMG"&&A.hasAttribute("src")){var P=""+A.getAttribute("src");if(P.indexOf("data:image/")===0)return Qh(unescape(P).split("base64,").pop());var V=t.loadFile(P,!0);if(V!==void 0)return V}if(A.nodeName==="CANVAS"){if(A.width===0||A.height===0)throw new Error("Given canvas must have data. Canvas width: "+A.width+", height: "+A.height);var J;switch(I){case"PNG":J="image/png";break;case"WEBP":J="image/webp";break;case"JPEG":case"JPG":default:J="image/jpeg"}return Qh(A.toDataURL(J,1).split("base64,").pop())}},p=function(A){var I=this.internal.collections.addImage_images;if(I){for(var P in I)if(A===I[P].alias)return I[P]}},b=function(A,I,P){return A||I||(A=-96,I=-96),A<0&&(A=-1*P.width*72/A/this.internal.scaleFactor),I<0&&(I=-1*P.height*72/I/this.internal.scaleFactor),A===0&&(A=I*P.width/P.height),I===0&&(I=A*P.height/P.width),[A,I]},E=function(A,I,P,V,J,O){var U=b.call(this,P,V,J),W=this.internal.getCoordinateString,ee=this.internal.getVerticalCoordinateString,re=l.call(this);if(P=U[0],V=U[1],re[J.index]=J,O){O*=Math.PI/180;var xe=Math.cos(O),F=Math.sin(O),G=function(Z){return Z.toFixed(4)},Y=[G(xe),G(F),G(-1*F),G(xe),0,0,"cm"]}this.internal.write("q"),O?(this.internal.write([1,"0","0",1,W(A),ee(I+V),"cm"].join(" ")),this.internal.write(Y.join(" ")),this.internal.write([W(P),"0","0",W(V),"0","0","cm"].join(" "))):this.internal.write([W(P),"0","0",W(V),W(A),ee(I+V),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+J.index+" Do"),this.internal.write("Q")},k=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var w=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},x=t.__addimage__.sHashCode=function(A){var I,P,V=0;if(typeof A=="string")for(P=A.length,I=0;I<P;I++)V=(V<<5)-V+A.charCodeAt(I),V|=0;else if(z(A))for(P=A.byteLength/2,I=0;I<P;I++)V=(V<<5)-V+A[I],V|=0;return V},C=t.__addimage__.validateStringAsBase64=function(A){(A=A||"").toString().trim();var I=!0;return A.length===0&&(I=!1),A.length%4!=0&&(I=!1),/^[A-Za-z0-9+/]+$/.test(A.substr(0,A.length-2))===!1&&(I=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(A.substr(-2))===!1&&(I=!1),I},M=t.__addimage__.extractImageFromDataUrl=function(A){var I=(A=A||"").split("base64,"),P=null;if(I.length===2){var V=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(I[0]);Array.isArray(V)&&(P={mimeType:V[1],charset:V[2],data:I[1]})}return P},Q=t.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};t.__addimage__.isArrayBuffer=function(A){return Q()&&A instanceof ArrayBuffer};var z=t.__addimage__.isArrayBufferView=function(A){return Q()&&typeof Uint32Array<"u"&&(A instanceof Int8Array||A instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&A instanceof Uint8ClampedArray||A instanceof Int16Array||A instanceof Uint16Array||A instanceof Int32Array||A instanceof Uint32Array||A instanceof Float32Array||A instanceof Float64Array)},L=t.__addimage__.binaryStringToUint8Array=function(A){for(var I=A.length,P=new Uint8Array(I),V=0;V<I;V++)P[V]=A.charCodeAt(V);return P},y=t.__addimage__.arrayBufferToBinaryString=function(A){for(var I="",P=z(A)?A:new Uint8Array(A),V=0;V<P.length;V+=8192)I+=String.fromCharCode.apply(null,P.subarray(V,V+8192));return I};t.addImage=function(){var A,I,P,V,J,O,U,W,ee;if(typeof arguments[1]=="number"?(I=e,P=arguments[1],V=arguments[2],J=arguments[3],O=arguments[4],U=arguments[5],W=arguments[6],ee=arguments[7]):(I=arguments[1],P=arguments[2],V=arguments[3],J=arguments[4],O=arguments[5],U=arguments[6],W=arguments[7],ee=arguments[8]),Gt(A=arguments[0])==="object"&&!f(A)&&"imageData"in A){var re=A;A=re.imageData,I=re.format||I||e,P=re.x||P||0,V=re.y||V||0,J=re.w||re.width||J,O=re.h||re.height||O,U=re.alias||U,W=re.compression||W,ee=re.rotation||re.angle||ee}var xe=this.internal.getFilters();if(W===void 0&&xe.indexOf("FlateEncode")!==-1&&(W="SLOW"),isNaN(P)||isNaN(V))throw new Error("Invalid coordinates passed to jsPDF.addImage");a.call(this);var F=N.call(this,A,I,U,W);return E.call(this,P,V,J,O,F,ee),this};var N=function(A,I,P,V){var J,O,U;if(typeof A=="string"&&r(A)===e){A=unescape(A);var W=R(A,!1);(W!==""||(W=t.loadFile(A,!0))!==void 0)&&(A=W)}if(f(A)&&(A=m(A,I)),I=r(A,I),!h(I))throw new Error("addImage does not support files of type '"+I+"', please ensure that a plugin for '"+I+"' support is added.");if(((U=P)==null||U.length===0)&&(P=function(ee){return typeof ee=="string"||z(ee)?x(ee):z(ee.data)?x(ee.data):null}(A)),(J=p.call(this,P))||(Q()&&(A instanceof Uint8Array||I==="RGBA"||(O=A,A=L(A))),J=this["process"+I.toUpperCase()](A,u.call(this),P,function(ee){return ee&&typeof ee=="string"&&(ee=ee.toUpperCase()),ee in t.image_compression?ee:w.NONE}(V),O)),!J)throw new Error("An unknown error occurred whilst processing the image.");return J},R=t.__addimage__.convertBase64ToBinaryString=function(A,I){var P;I=typeof I!="boolean"||I;var V,J="";if(typeof A=="string"){V=(P=M(A))!==null?P.data:A;try{J=Qh(V)}catch(O){if(I)throw C(V)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+O.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return J};t.getImageProperties=function(A){var I,P,V="";if(f(A)&&(A=m(A)),typeof A=="string"&&r(A)===e&&((V=R(A,!1))===""&&(V=t.loadFile(A)||""),A=V),P=r(A),!h(P))throw new Error("addImage does not support files of type '"+P+"', please ensure that a plugin for '"+P+"' support is added.");if(!Q()||A instanceof Uint8Array||(A=L(A)),!(I=this["process"+P.toUpperCase()](A)))throw new Error("An unknown error occurred whilst processing the image");return I.fileType=P,I}})(dt.API),function(t){var e=function(n){if(n!==void 0&&n!="")return!0};dt.API.events.push(["addPage",function(n){this.internal.getPageInfo(n.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(n){for(var r,i,s,o=this.internal.getCoordinateString,a=this.internal.getVerticalCoordinateString,l=this.internal.getPageInfoByObjId(n.objId),u=n.pageContext.annotations,h=!1,f=0;f<u.length&&!h;f++)switch((r=u[f]).type){case"link":(e(r.options.url)||e(r.options.pageNumber))&&(h=!0);break;case"reference":case"text":case"freetext":h=!0}if(h!=0){this.internal.write("/Annots [");for(var m=0;m<u.length;m++){r=u[m];var p=this.internal.pdfEscape,b=this.internal.getEncryptor(n.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var E=this.internal.newAdditionalObject(),k=this.internal.newAdditionalObject(),w=this.internal.getEncryptor(E.objId),x=r.title||"Note";s="<</Type /Annot /Subtype /Text "+(i="/Rect ["+o(r.bounds.x)+" "+a(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w)+" "+a(r.bounds.y)+"] ")+"/Contents ("+p(w(r.contents))+")",s+=" /Popup "+k.objId+" 0 R",s+=" /P "+l.objId+" 0 R",s+=" /T ("+p(w(x))+") >>",E.content=s;var C=E.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+o(r.bounds.x+30)+" "+a(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w+30)+" "+a(r.bounds.y)+"] ")+" /Parent "+C,r.open&&(s+=" /Open true"),s+=" >>",k.content=s,this.internal.write(E.objId,"0 R",k.objId,"0 R");break;case"freetext":i="/Rect ["+o(r.bounds.x)+" "+a(r.bounds.y)+" "+o(r.bounds.x+r.bounds.w)+" "+a(r.bounds.y+r.bounds.h)+"] ";var M=r.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+p(b(r.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+M+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(r.options.name){var Q=this.annotations._nameMap[r.options.name];r.options.pageNumber=Q.page,r.options.top=Q.y}else r.options.top||(r.options.top=0);if(i="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",s="",r.options.url)s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+p(b(r.options.url))+") >>";else if(r.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,s+=" /FitV "+r.options.left+"]";break;case"XYZ":default:var z=a(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),s+=" /XYZ "+r.options.left+" "+z+" "+r.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),t.createAnnotation=function(n){var r=this.internal.getCurrentPageInfo();switch(n.type){case"link":this.link(n.bounds.x,n.bounds.y,n.bounds.w,n.bounds.h,n);break;case"text":case"freetext":r.pageContext.annotations.push(n)}},t.link=function(n,r,i,s,o){var a=this.internal.getCurrentPageInfo(),l=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString;a.pageContext.annotations.push({finalBounds:{x:l(n),y:u(r),w:l(n+i),h:u(r+s)},options:o,type:"link"})},t.textWithLink=function(n,r,i,s){var o,a,l=this.getTextWidth(n),u=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){a=s.maxWidth;var h=this.splitTextToSize(n,a).length;o=Math.ceil(u*h)}else a=l,o=u;return this.text(n,r,i,s),i+=.2*u,s.align==="center"&&(r-=l/2),s.align==="right"&&(r-=l),this.link(r,i-u,a,o,s),l},t.getTextWidth=function(n){var r=this.internal.getFontSize();return this.getStringUnitWidth(n)*r/this.internal.scaleFactor}}(dt.API),function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];t.__arabicParser__={};var s=t.__arabicParser__.isInArabicSubstitutionA=function(E){return e[E.charCodeAt(0)]!==void 0},o=t.__arabicParser__.isArabicLetter=function(E){return typeof E=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(E)},a=t.__arabicParser__.isArabicEndLetter=function(E){return o(E)&&s(E)&&e[E.charCodeAt(0)].length<=2},l=t.__arabicParser__.isArabicAlfLetter=function(E){return o(E)&&i.indexOf(E.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(E){return o(E)&&s(E)&&e[E.charCodeAt(0)].length>=1};var u=t.__arabicParser__.arabicLetterHasFinalForm=function(E){return o(E)&&s(E)&&e[E.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(E){return o(E)&&s(E)&&e[E.charCodeAt(0)].length>=3};var h=t.__arabicParser__.arabicLetterHasMedialForm=function(E){return o(E)&&s(E)&&e[E.charCodeAt(0)].length==4},f=t.__arabicParser__.resolveLigatures=function(E){var k=0,w=n,x="",C=0;for(k=0;k<E.length;k+=1)w[E.charCodeAt(k)]!==void 0?(C++,typeof(w=w[E.charCodeAt(k)])=="number"&&(x+=String.fromCharCode(w),w=n,C=0),k===E.length-1&&(w=n,x+=E.charAt(k-(C-1)),k-=C-1,C=0)):(w=n,x+=E.charAt(k-C),k-=C,C=0);return x};t.__arabicParser__.isArabicDiacritic=function(E){return E!==void 0&&r[E.charCodeAt(0)]!==void 0};var m=t.__arabicParser__.getCorrectForm=function(E,k,w){return o(E)?s(E)===!1?-1:!u(E)||!o(k)&&!o(w)||!o(w)&&a(k)||a(E)&&!o(k)||a(E)&&l(k)||a(E)&&a(k)?0:h(E)&&o(k)&&!a(k)&&o(w)&&u(w)?3:a(E)||!o(w)?1:2:-1},p=function(E){var k=0,w=0,x=0,C="",M="",Q="",z=(E=E||"").split("\\s+"),L=[];for(k=0;k<z.length;k+=1){for(L.push(""),w=0;w<z[k].length;w+=1)C=z[k][w],M=z[k][w-1],Q=z[k][w+1],o(C)?(x=m(C,M,Q),L[k]+=x!==-1?String.fromCharCode(e[C.charCodeAt(0)][x]):C):L[k]+=C;L[k]=f(L[k])}return L.join(" ")},b=t.__arabicParser__.processArabic=t.processArabic=function(){var E,k=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,w=[];if(Array.isArray(k)){var x=0;for(w=[],x=0;x<k.length;x+=1)Array.isArray(k[x])?w.push([p(k[x][0]),k[x][1],k[x][2]]):w.push([p(k[x])]);E=w}else E=p(k);return typeof arguments[0]=="string"?E:(arguments[0].text=E,arguments[0])};t.events.push(["preProcessText",b])}(dt.API),dt.API.autoPrint=function(t){var e;switch((t=t||{}).variant=t.variant||"non-conform",t.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(t){var e=function(){var n=void 0;Object.defineProperty(this,"pdf",{get:function(){return n},set:function(a){n=a}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(a){r=isNaN(a)||Number.isInteger(a)===!1||a<0?150:a,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(a){i=isNaN(a)||Number.isInteger(a)===!1||a<0?300:a,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(a){s=a}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(a){o=a}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(n,r){var i;if((n=n||"2d")!=="2d")return null;for(i in r)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=r[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(dt.API),function(t){var e={left:0,top:0,bottom:0,right:0},n=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var l=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return l},set:function(E){l=E}});var u=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return u},set:function(E){u=E}});var h=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return h},set:function(E){h=E}});var f=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return f},set:function(E){f=E}});var m=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return m},set:function(E){m=E}});var p=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return p},set:function(E){p=E}});var b=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return b},set:function(E){b=E}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(l){return r.call(this),this.internal.__cell__.headerFunction=typeof l=="function"?l:void 0,this},t.getTextDimensions=function(l,u){r.call(this);var h=(u=u||{}).fontSize||this.getFontSize(),f=u.font||this.getFont(),m=u.scaleFactor||this.internal.scaleFactor,p=0,b=0,E=0,k=this;if(!Array.isArray(l)&&typeof l!="string"){if(typeof l!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");l=String(l)}var w=u.maxWidth;w>0?typeof l=="string"?l=this.splitTextToSize(l,w):Object.prototype.toString.call(l)==="[object Array]"&&(l=l.reduce(function(C,M){return C.concat(k.splitTextToSize(M,w))},[])):l=Array.isArray(l)?l:[l];for(var x=0;x<l.length;x++)p<(E=this.getStringUnitWidth(l[x],{font:f})*h)&&(p=E);return p!==0&&(b=l.length),{w:p/=m,h:Math.max((b*h*this.getLineHeightFactor()-h*(this.getLineHeightFactor()-1))/m,0)}},t.cellAddPage=function(){r.call(this),this.addPage();var l=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new s(l.left,l.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=t.cell=function(){var l;l=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var u=this.internal.__cell__.lastCell,h=this.internal.__cell__.padding,f=this.internal.__cell__.margins||e,m=this.internal.__cell__.tableHeaderRow,p=this.internal.__cell__.printHeaders;return u.lineNumber!==void 0&&(u.lineNumber===l.lineNumber?(l.x=(u.x||0)+(u.width||0),l.y=u.y||0):u.y+u.height+l.height+f.bottom>this.getPageHeight()?(this.cellAddPage(),l.y=f.top,p&&m&&(this.printHeaderRow(l.lineNumber,!0),l.y+=m[0].height)):l.y=u.y+u.height||l.y),l.text[0]!==void 0&&(this.rect(l.x,l.y,l.width,l.height,n===!0?"FD":void 0),l.align==="right"?this.text(l.text,l.x+l.width-h,l.y+h,{align:"right",baseline:"top"}):l.align==="center"?this.text(l.text,l.x+l.width/2,l.y+h,{align:"center",baseline:"top",maxWidth:l.width-h-h}):this.text(l.text,l.x+h,l.y+h,{align:"left",baseline:"top",maxWidth:l.width-h-h})),this.internal.__cell__.lastCell=l,this};t.table=function(l,u,h,f,m){if(r.call(this),!h)throw new Error("No data for PDF table.");var p,b,E,k,w=[],x=[],C=[],M={},Q={},z=[],L=[],y=(m=m||{}).autoSize||!1,N=m.printHeaders!==!1,R=m.css&&m.css["font-size"]!==void 0?16*m.css["font-size"]:m.fontSize||12,A=m.margins||Object.assign({width:this.getPageWidth()},e),I=typeof m.padding=="number"?m.padding:3,P=m.headerBackgroundColor||"#c8c8c8",V=m.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=N,this.internal.__cell__.margins=A,this.internal.__cell__.table_font_size=R,this.internal.__cell__.padding=I,this.internal.__cell__.headerBackgroundColor=P,this.internal.__cell__.headerTextColor=V,this.setFontSize(R),f==null)x=w=Object.keys(h[0]),C=w.map(function(){return"left"});else if(Array.isArray(f)&&Gt(f[0])==="object")for(w=f.map(function(re){return re.name}),x=f.map(function(re){return re.prompt||re.name||""}),C=f.map(function(re){return re.align||"left"}),p=0;p<f.length;p+=1)Q[f[p].name]=f[p].width*(19.049976/25.4);else Array.isArray(f)&&typeof f[0]=="string"&&(x=w=f,C=w.map(function(){return"left"}));if(y||Array.isArray(f)&&typeof f[0]=="string")for(p=0;p<w.length;p+=1){for(M[k=w[p]]=h.map(function(re){return re[k]}),this.setFont(void 0,"bold"),z.push(this.getTextDimensions(x[p],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),b=M[k],this.setFont(void 0,"normal"),E=0;E<b.length;E+=1)z.push(this.getTextDimensions(b[E],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);Q[k]=Math.max.apply(null,z)+I+I,z=[]}if(N){var J={};for(p=0;p<w.length;p+=1)J[w[p]]={},J[w[p]].text=x[p],J[w[p]].align=C[p];var O=a.call(this,J,Q);L=w.map(function(re){return new s(l,u,Q[re],O,J[re].text,void 0,J[re].align)}),this.setTableHeaderRow(L),this.printHeaderRow(1,!1)}var U=f.reduce(function(re,xe){return re[xe.name]=xe.align,re},{});for(p=0;p<h.length;p+=1){"rowStart"in m&&m.rowStart instanceof Function&&m.rowStart({row:p,data:h[p]},this);var W=a.call(this,h[p],Q);for(E=0;E<w.length;E+=1){var ee=h[p][w[E]];"cellStart"in m&&m.cellStart instanceof Function&&m.cellStart({row:p,col:E,data:ee},this),o.call(this,new s(l,u,Q[w[E]],W,ee,p+2,U[w[E]]))}}return this.internal.__cell__.table_x=l,this.internal.__cell__.table_y=u,this};var a=function(l,u){var h=this.internal.__cell__.padding,f=this.internal.__cell__.table_font_size,m=this.internal.scaleFactor;return Object.keys(l).map(function(p){var b=l[p];return this.splitTextToSize(b.hasOwnProperty("text")?b.text:b,u[p]-h-h)},this).map(function(p){return this.getLineHeightFactor()*p.length*f/m+h+h},this).reduce(function(p,b){return Math.max(p,b)},0)};t.setTableHeaderRow=function(l){r.call(this),this.internal.__cell__.tableHeaderRow=l},t.printHeaderRow=function(l,u){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var h;if(n=!0,typeof this.internal.__cell__.headerFunction=="function"){var f=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(f[0],f[1],f[2],f[3],void 0,-1)}this.setFont(void 0,"bold");for(var m=[],p=0;p<this.internal.__cell__.tableHeaderRow.length;p+=1){h=this.internal.__cell__.tableHeaderRow[p].clone(),u&&(h.y=this.internal.__cell__.margins.top||0,m.push(h)),h.lineNumber=l;var b=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,h),this.setTextColor(b)}m.length>0&&this.setTableHeaderRow(m),this.setFont(void 0,"normal"),n=!1}}(dt.API);var vA={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},yA=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],n2=gA(yA),_A=[100,200,300,400,500,600,700,800,900],iD=gA(_A);function r2(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),n=function(s){return vA[s=s||"normal"]?s:"normal"}(t.style),r=function(s){if(!s)return 400;if(typeof s=="number")return s>=100&&s<=900&&s%100==0?s:400;if(/^\d00$/.test(s))return parseInt(s);switch(s){case"bold":return 700;case"normal":default:return 400}}(t.weight),i=function(s){return typeof n2[s=s||"normal"]=="number"?s:"normal"}(t.stretch);return{family:e,style:n,weight:r,stretch:i,src:t.src||[],ref:t.ref||{name:e,style:[i,n,r].join(" ")}}}function Pw(t,e,n,r){var i;for(i=n;i>=0&&i<e.length;i+=r)if(t[e[i]])return t[e[i]];for(i=n;i>=0&&i<e.length;i-=r)if(t[e[i]])return t[e[i]]}var sD={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},Cw={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function Lw(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function oD(t,e,n){for(var r=(n=n||{}).defaultFontFamily||"times",i=Object.assign({},sD,n.genericFontFamilies||{}),s=null,o=null,a=0;a<e.length;++a)if(i[(s=r2(e[a])).family]&&(s.family=i[s.family]),t.hasOwnProperty(s.family)){o=t[s.family];break}if(!(o=o||t[r]))throw new Error("Could not find a font-family for the rule '"+Lw(s)+"' and default family '"+r+"'.");if(o=function(l,u){if(u[l])return u[l];var h=n2[l],f=h<=n2.normal?-1:1,m=Pw(u,yA,h,f);if(!m)throw new Error("Could not find a matching font-stretch value for "+l);return m}(s.stretch,o),o=function(l,u){if(u[l])return u[l];for(var h=vA[l],f=0;f<h.length;++f)if(u[h[f]])return u[h[f]];throw new Error("Could not find a matching font-style for "+l)}(s.style,o),!(o=function(l,u){if(u[l])return u[l];if(l===400&&u[500])return u[500];if(l===500&&u[400])return u[400];var h=iD[l],f=Pw(u,_A,h,l<400?-1:1);if(!f)throw new Error("Could not find a matching font-weight for value "+l);return f}(s.weight,o)))throw new Error("Failed to resolve a font for the rule '"+Lw(s)+"'.");return o}function Rw(t){return t.trimLeft()}function aD(t,e){for(var n=0;n<t.length;){if(t.charAt(n)===e)return[t.substring(0,n),t.substring(n+1)];n+=1}return null}function lD(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],t.substring(e[0].length)]}var qf,jw,Dw,y1=["times"];(function(t){var e,n,r,i,s,o,a,l,u,h=function(F){return F=F||{},this.isStrokeTransparent=F.isStrokeTransparent||!1,this.strokeOpacity=F.strokeOpacity||1,this.strokeStyle=F.strokeStyle||"#000000",this.fillStyle=F.fillStyle||"#000000",this.isFillTransparent=F.isFillTransparent||!1,this.fillOpacity=F.fillOpacity||1,this.font=F.font||"10px sans-serif",this.textBaseline=F.textBaseline||"alphabetic",this.textAlign=F.textAlign||"left",this.lineWidth=F.lineWidth||1,this.lineJoin=F.lineJoin||"miter",this.lineCap=F.lineCap||"butt",this.path=F.path||[],this.transform=F.transform!==void 0?F.transform.clone():new l,this.globalCompositeOperation=F.globalCompositeOperation||"normal",this.globalAlpha=F.globalAlpha||1,this.clip_path=F.clip_path||[],this.currentPoint=F.currentPoint||new o,this.miterLimit=F.miterLimit||10,this.lastPoint=F.lastPoint||new o,this.lineDashOffset=F.lineDashOffset||0,this.lineDash=F.lineDash||[],this.margin=F.margin||[0,0,0,0],this.prevPageLastElemOffset=F.prevPageLastElemOffset||0,this.ignoreClearRect=typeof F.ignoreClearRect!="boolean"||F.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new f(this),e=this.internal.f2,n=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,o=this.internal.Point,a=this.internal.Rectangle,l=this.internal.Matrix,u=new h}]);var f=function(F){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var G=F;Object.defineProperty(this,"pdf",{get:function(){return G}});var Y=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return Y},set:function(Se){Y=!!Se}});var Z=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return Z},set:function(Se){Z=!!Se}});var ae=0;Object.defineProperty(this,"posX",{get:function(){return ae},set:function(Se){isNaN(Se)||(ae=Se)}});var ie=0;Object.defineProperty(this,"posY",{get:function(){return ie},set:function(Se){isNaN(Se)||(ie=Se)}}),Object.defineProperty(this,"margin",{get:function(){return u.margin},set:function(Se){var oe;typeof Se=="number"?oe=[Se,Se,Se,Se]:((oe=new Array(4))[0]=Se[0],oe[1]=Se.length>=2?Se[1]:oe[0],oe[2]=Se.length>=3?Se[2]:oe[0],oe[3]=Se.length>=4?Se[3]:oe[1]),u.margin=oe}});var ce=!1;Object.defineProperty(this,"autoPaging",{get:function(){return ce},set:function(Se){ce=Se}});var fe=0;Object.defineProperty(this,"lastBreak",{get:function(){return fe},set:function(Se){fe=Se}});var Ie=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Ie},set:function(Se){Ie=Se}}),Object.defineProperty(this,"ctx",{get:function(){return u},set:function(Se){Se instanceof h&&(u=Se)}}),Object.defineProperty(this,"path",{get:function(){return u.path},set:function(Se){u.path=Se}});var Ee=[];Object.defineProperty(this,"ctxStack",{get:function(){return Ee},set:function(Se){Ee=Se}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Se){var oe;oe=m(Se),this.ctx.fillStyle=oe.style,this.ctx.isFillTransparent=oe.a===0,this.ctx.fillOpacity=oe.a,this.pdf.setFillColor(oe.r,oe.g,oe.b,{a:oe.a}),this.pdf.setTextColor(oe.r,oe.g,oe.b,{a:oe.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Se){var oe=m(Se);this.ctx.strokeStyle=oe.style,this.ctx.isStrokeTransparent=oe.a===0,this.ctx.strokeOpacity=oe.a,oe.a===0?this.pdf.setDrawColor(255,255,255):(oe.a,this.pdf.setDrawColor(oe.r,oe.g,oe.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Se){["butt","round","square"].indexOf(Se)!==-1&&(this.ctx.lineCap=Se,this.pdf.setLineCap(Se))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Se){isNaN(Se)||(this.ctx.lineWidth=Se,this.pdf.setLineWidth(Se))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Se){["bevel","round","miter"].indexOf(Se)!==-1&&(this.ctx.lineJoin=Se,this.pdf.setLineJoin(Se))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Se){isNaN(Se)||(this.ctx.miterLimit=Se,this.pdf.setMiterLimit(Se))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Se){this.ctx.textBaseline=Se}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Se){["right","end","center","left","start"].indexOf(Se)!==-1&&(this.ctx.textAlign=Se)}});var je=null;function Ue(Se,oe){if(je===null){var ye=function(Re){var Te=[];return Object.keys(Re).forEach(function(Me){Re[Me].forEach(function(Be){var ze=null;switch(Be){case"bold":ze={family:Me,weight:"bold"};break;case"italic":ze={family:Me,style:"italic"};break;case"bolditalic":ze={family:Me,weight:"bold",style:"italic"};break;case"":case"normal":ze={family:Me}}ze!==null&&(ze.ref={name:Me,style:Be},Te.push(ze))})}),Te}(Se.getFontList());je=function(Re){for(var Te={},Me=0;Me<Re.length;++Me){var Be=r2(Re[Me]),ze=Be.family,He=Be.stretch,Qe=Be.style,st=Be.weight;Te[ze]=Te[ze]||{},Te[ze][He]=Te[ze][He]||{},Te[ze][He][Qe]=Te[ze][He][Qe]||{},Te[ze][He][Qe][st]=Be}return Te}(ye.concat(oe))}return je}var Ye=null;Object.defineProperty(this,"fontFaces",{get:function(){return Ye},set:function(Se){je=null,Ye=Se}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Se){var oe;if(this.ctx.font=Se,(oe=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(Se))!==null){var ye=oe[1],Re=(oe[2],oe[3]),Te=oe[4],Me=(oe[5],oe[6]),Be=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Te)[2];Te=Math.floor(Be==="px"?parseFloat(Te)*this.pdf.internal.scaleFactor:Be==="em"?parseFloat(Te)*this.pdf.getFontSize():parseFloat(Te)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Te);var ze=function(ot){var at,$e,Ct=[],vt=ot.trim();if(vt==="")return y1;if(vt in Cw)return[Cw[vt]];for(;vt!=="";){switch($e=null,at=(vt=Rw(vt)).charAt(0)){case'"':case"'":$e=aD(vt.substring(1),at);break;default:$e=lD(vt)}if($e===null||(Ct.push($e[0]),(vt=Rw($e[1]))!==""&&vt.charAt(0)!==","))return y1;vt=vt.replace(/^,/,"")}return Ct}(Me);if(this.fontFaces){var He=oD(Ue(this.pdf,this.fontFaces),ze.map(function(ot){return{family:ot,stretch:"normal",weight:Re,style:ye}}));this.pdf.setFont(He.ref.name,He.ref.style)}else{var Qe="";(Re==="bold"||parseInt(Re,10)>=700||ye==="bold")&&(Qe="bold"),ye==="italic"&&(Qe+="italic"),Qe.length===0&&(Qe="normal");for(var st="",tt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},lt=0;lt<ze.length;lt++){if(this.pdf.internal.getFont(ze[lt],Qe,{noFallback:!0,disableWarning:!0})!==void 0){st=ze[lt];break}if(Qe==="bolditalic"&&this.pdf.internal.getFont(ze[lt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)st=ze[lt],Qe="bold";else if(this.pdf.internal.getFont(ze[lt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){st=ze[lt],Qe="normal";break}}if(st===""){for(var ht=0;ht<ze.length;ht++)if(tt[ze[ht]]){st=tt[ze[ht]];break}}st=st===""?"Times":st,this.pdf.setFont(st,Qe)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Se){this.ctx.globalCompositeOperation=Se}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Se){this.ctx.globalAlpha=Se}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Se){this.ctx.lineDashOffset=Se,xe.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Se){this.ctx.lineDash=Se,xe.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Se){this.ctx.ignoreClearRect=!!Se}})};f.prototype.setLineDash=function(F){this.lineDash=F},f.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},f.prototype.fill=function(){M.call(this,"fill",!1)},f.prototype.stroke=function(){M.call(this,"stroke",!1)},f.prototype.beginPath=function(){this.path=[{type:"begin"}]},f.prototype.moveTo=function(F,G){if(isNaN(F)||isNaN(G))throw en.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var Y=this.ctx.transform.applyToPoint(new o(F,G));this.path.push({type:"mt",x:Y.x,y:Y.y}),this.ctx.lastPoint=new o(F,G)},f.prototype.closePath=function(){var F=new o(0,0),G=0;for(G=this.path.length-1;G!==-1;G--)if(this.path[G].type==="begin"&&Gt(this.path[G+1])==="object"&&typeof this.path[G+1].x=="number"){F=new o(this.path[G+1].x,this.path[G+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(F.x,F.y)},f.prototype.lineTo=function(F,G){if(isNaN(F)||isNaN(G))throw en.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var Y=this.ctx.transform.applyToPoint(new o(F,G));this.path.push({type:"lt",x:Y.x,y:Y.y}),this.ctx.lastPoint=new o(Y.x,Y.y)},f.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),M.call(this,null,!0)},f.prototype.quadraticCurveTo=function(F,G,Y,Z){if(isNaN(Y)||isNaN(Z)||isNaN(F)||isNaN(G))throw en.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var ae=this.ctx.transform.applyToPoint(new o(Y,Z)),ie=this.ctx.transform.applyToPoint(new o(F,G));this.path.push({type:"qct",x1:ie.x,y1:ie.y,x:ae.x,y:ae.y}),this.ctx.lastPoint=new o(ae.x,ae.y)},f.prototype.bezierCurveTo=function(F,G,Y,Z,ae,ie){if(isNaN(ae)||isNaN(ie)||isNaN(F)||isNaN(G)||isNaN(Y)||isNaN(Z))throw en.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var ce=this.ctx.transform.applyToPoint(new o(ae,ie)),fe=this.ctx.transform.applyToPoint(new o(F,G)),Ie=this.ctx.transform.applyToPoint(new o(Y,Z));this.path.push({type:"bct",x1:fe.x,y1:fe.y,x2:Ie.x,y2:Ie.y,x:ce.x,y:ce.y}),this.ctx.lastPoint=new o(ce.x,ce.y)},f.prototype.arc=function(F,G,Y,Z,ae,ie){if(isNaN(F)||isNaN(G)||isNaN(Y)||isNaN(Z)||isNaN(ae))throw en.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(ie=!!ie,!this.ctx.transform.isIdentity){var ce=this.ctx.transform.applyToPoint(new o(F,G));F=ce.x,G=ce.y;var fe=this.ctx.transform.applyToPoint(new o(0,Y)),Ie=this.ctx.transform.applyToPoint(new o(0,0));Y=Math.sqrt(Math.pow(fe.x-Ie.x,2)+Math.pow(fe.y-Ie.y,2))}Math.abs(ae-Z)>=2*Math.PI&&(Z=0,ae=2*Math.PI),this.path.push({type:"arc",x:F,y:G,radius:Y,startAngle:Z,endAngle:ae,counterclockwise:ie})},f.prototype.arcTo=function(F,G,Y,Z,ae){throw new Error("arcTo not implemented.")},f.prototype.rect=function(F,G,Y,Z){if(isNaN(F)||isNaN(G)||isNaN(Y)||isNaN(Z))throw en.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(F,G),this.lineTo(F+Y,G),this.lineTo(F+Y,G+Z),this.lineTo(F,G+Z),this.lineTo(F,G),this.lineTo(F+Y,G),this.lineTo(F,G)},f.prototype.fillRect=function(F,G,Y,Z){if(isNaN(F)||isNaN(G)||isNaN(Y)||isNaN(Z))throw en.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!p.call(this)){var ae={};this.lineCap!=="butt"&&(ae.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(ae.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(F,G,Y,Z),this.fill(),ae.hasOwnProperty("lineCap")&&(this.lineCap=ae.lineCap),ae.hasOwnProperty("lineJoin")&&(this.lineJoin=ae.lineJoin)}},f.prototype.strokeRect=function(F,G,Y,Z){if(isNaN(F)||isNaN(G)||isNaN(Y)||isNaN(Z))throw en.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");b.call(this)||(this.beginPath(),this.rect(F,G,Y,Z),this.stroke())},f.prototype.clearRect=function(F,G,Y,Z){if(isNaN(F)||isNaN(G)||isNaN(Y)||isNaN(Z))throw en.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(F,G,Y,Z))},f.prototype.save=function(F){F=typeof F!="boolean"||F;for(var G=this.pdf.internal.getCurrentPageInfo().pageNumber,Y=0;Y<this.pdf.internal.getNumberOfPages();Y++)this.pdf.setPage(Y+1),this.pdf.internal.out("q");if(this.pdf.setPage(G),F){this.ctx.fontSize=this.pdf.internal.getFontSize();var Z=new h(this.ctx);this.ctxStack.push(this.ctx),this.ctx=Z}},f.prototype.restore=function(F){F=typeof F!="boolean"||F;for(var G=this.pdf.internal.getCurrentPageInfo().pageNumber,Y=0;Y<this.pdf.internal.getNumberOfPages();Y++)this.pdf.setPage(Y+1),this.pdf.internal.out("Q");this.pdf.setPage(G),F&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},f.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var m=function(F){var G,Y,Z,ae;if(F.isCanvasGradient===!0&&(F=F.getColor()),!F)return{r:0,g:0,b:0,a:0,style:F};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(F))G=0,Y=0,Z=0,ae=0;else{var ie=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(F);if(ie!==null)G=parseInt(ie[1]),Y=parseInt(ie[2]),Z=parseInt(ie[3]),ae=1;else if((ie=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(F))!==null)G=parseInt(ie[1]),Y=parseInt(ie[2]),Z=parseInt(ie[3]),ae=parseFloat(ie[4]);else{if(ae=1,typeof F=="string"&&F.charAt(0)!=="#"){var ce=new cA(F);F=ce.ok?ce.toHex():"#000000"}F.length===4?(G=F.substring(1,2),G+=G,Y=F.substring(2,3),Y+=Y,Z=F.substring(3,4),Z+=Z):(G=F.substring(1,3),Y=F.substring(3,5),Z=F.substring(5,7)),G=parseInt(G,16),Y=parseInt(Y,16),Z=parseInt(Z,16)}}return{r:G,g:Y,b:Z,a:ae,style:F}},p=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},b=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};f.prototype.fillText=function(F,G,Y,Z){if(isNaN(G)||isNaN(Y)||typeof F!="string")throw en.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(Z=isNaN(Z)?void 0:Z,!p.call(this)){var ae=W(this.ctx.transform.rotation),ie=this.ctx.transform.scaleX;I.call(this,{text:F,x:G,y:Y,scale:ie,angle:ae,align:this.textAlign,maxWidth:Z})}},f.prototype.strokeText=function(F,G,Y,Z){if(isNaN(G)||isNaN(Y)||typeof F!="string")throw en.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!b.call(this)){Z=isNaN(Z)?void 0:Z;var ae=W(this.ctx.transform.rotation),ie=this.ctx.transform.scaleX;I.call(this,{text:F,x:G,y:Y,scale:ie,renderingMode:"stroke",angle:ae,align:this.textAlign,maxWidth:Z})}},f.prototype.measureText=function(F){if(typeof F!="string")throw en.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var G=this.pdf,Y=this.pdf.internal.scaleFactor,Z=G.internal.getFontSize(),ae=G.getStringUnitWidth(F)*Z/G.internal.scaleFactor,ie=function(ce){var fe=(ce=ce||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return fe}}),this};return new ie({width:ae*=Math.round(96*Y/72*1e4)/1e4})},f.prototype.scale=function(F,G){if(isNaN(F)||isNaN(G))throw en.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var Y=new l(F,0,0,G,0,0);this.ctx.transform=this.ctx.transform.multiply(Y)},f.prototype.rotate=function(F){if(isNaN(F))throw en.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var G=new l(Math.cos(F),Math.sin(F),-Math.sin(F),Math.cos(F),0,0);this.ctx.transform=this.ctx.transform.multiply(G)},f.prototype.translate=function(F,G){if(isNaN(F)||isNaN(G))throw en.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var Y=new l(1,0,0,1,F,G);this.ctx.transform=this.ctx.transform.multiply(Y)},f.prototype.transform=function(F,G,Y,Z,ae,ie){if(isNaN(F)||isNaN(G)||isNaN(Y)||isNaN(Z)||isNaN(ae)||isNaN(ie))throw en.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var ce=new l(F,G,Y,Z,ae,ie);this.ctx.transform=this.ctx.transform.multiply(ce)},f.prototype.setTransform=function(F,G,Y,Z,ae,ie){F=isNaN(F)?1:F,G=isNaN(G)?0:G,Y=isNaN(Y)?0:Y,Z=isNaN(Z)?1:Z,ae=isNaN(ae)?0:ae,ie=isNaN(ie)?0:ie,this.ctx.transform=new l(F,G,Y,Z,ae,ie)};var E=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};f.prototype.drawImage=function(F,G,Y,Z,ae,ie,ce,fe,Ie){var Ee=this.pdf.getImageProperties(F),je=1,Ue=1,Ye=1,Se=1;Z!==void 0&&fe!==void 0&&(Ye=fe/Z,Se=Ie/ae,je=Ee.width/Z*fe/Z,Ue=Ee.height/ae*Ie/ae),ie===void 0&&(ie=G,ce=Y,G=0,Y=0),Z!==void 0&&fe===void 0&&(fe=Z,Ie=ae),Z===void 0&&fe===void 0&&(fe=Ee.width,Ie=Ee.height);for(var oe,ye=this.ctx.transform.decompose(),Re=W(ye.rotate.shx),Te=new l,Me=(Te=(Te=(Te=Te.multiply(ye.translate)).multiply(ye.skew)).multiply(ye.scale)).applyToRectangle(new a(ie-G*Ye,ce-Y*Se,Z*je,ae*Ue)),Be=k.call(this,Me),ze=[],He=0;He<Be.length;He+=1)ze.indexOf(Be[He])===-1&&ze.push(Be[He]);if(C(ze),this.autoPaging)for(var Qe=ze[0],st=ze[ze.length-1],tt=Qe;tt<st+1;tt++){this.pdf.setPage(tt);var lt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],ht=tt===1?this.posY+this.margin[0]:this.margin[0],ot=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],at=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],$e=tt===1?0:ot+(tt-2)*at;if(this.ctx.clip_path.length!==0){var Ct=this.path;oe=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=x(oe,this.posX+this.margin[3],-$e+ht+this.ctx.prevPageLastElemOffset),Q.call(this,"fill",!0),this.path=Ct}var vt=JSON.parse(JSON.stringify(Me));vt=x([vt],this.posX+this.margin[3],-$e+ht+this.ctx.prevPageLastElemOffset)[0];var sn=(tt>Qe||tt<st)&&E.call(this);sn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],lt,at,null).clip().discardPath()),this.pdf.addImage(F,"JPEG",vt.x,vt.y,vt.w,vt.h,null,null,Re),sn&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(F,"JPEG",Me.x,Me.y,Me.w,Me.h,null,null,Re)};var k=function(F,G,Y){var Z=[];G=G||this.pdf.internal.pageSize.width,Y=Y||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var ae=this.posY+this.ctx.prevPageLastElemOffset;switch(F.type){default:case"mt":case"lt":Z.push(Math.floor((F.y+ae)/Y)+1);break;case"arc":Z.push(Math.floor((F.y+ae-F.radius)/Y)+1),Z.push(Math.floor((F.y+ae+F.radius)/Y)+1);break;case"qct":var ie=ee(this.ctx.lastPoint.x,this.ctx.lastPoint.y,F.x1,F.y1,F.x,F.y);Z.push(Math.floor((ie.y+ae)/Y)+1),Z.push(Math.floor((ie.y+ie.h+ae)/Y)+1);break;case"bct":var ce=re(this.ctx.lastPoint.x,this.ctx.lastPoint.y,F.x1,F.y1,F.x2,F.y2,F.x,F.y);Z.push(Math.floor((ce.y+ae)/Y)+1),Z.push(Math.floor((ce.y+ce.h+ae)/Y)+1);break;case"rect":Z.push(Math.floor((F.y+ae)/Y)+1),Z.push(Math.floor((F.y+F.h+ae)/Y)+1)}for(var fe=0;fe<Z.length;fe+=1)for(;this.pdf.internal.getNumberOfPages()<Z[fe];)w.call(this);return Z},w=function(){var F=this.fillStyle,G=this.strokeStyle,Y=this.font,Z=this.lineCap,ae=this.lineWidth,ie=this.lineJoin;this.pdf.addPage(),this.fillStyle=F,this.strokeStyle=G,this.font=Y,this.lineCap=Z,this.lineWidth=ae,this.lineJoin=ie},x=function(F,G,Y){for(var Z=0;Z<F.length;Z++)switch(F[Z].type){case"bct":F[Z].x2+=G,F[Z].y2+=Y;case"qct":F[Z].x1+=G,F[Z].y1+=Y;case"mt":case"lt":case"arc":default:F[Z].x+=G,F[Z].y+=Y}return F},C=function(F){return F.sort(function(G,Y){return G-Y})},M=function(F,G){for(var Y,Z,ae=this.fillStyle,ie=this.strokeStyle,ce=this.lineCap,fe=this.lineWidth,Ie=Math.abs(fe*this.ctx.transform.scaleX),Ee=this.lineJoin,je=JSON.parse(JSON.stringify(this.path)),Ue=JSON.parse(JSON.stringify(this.path)),Ye=[],Se=0;Se<Ue.length;Se++)if(Ue[Se].x!==void 0)for(var oe=k.call(this,Ue[Se]),ye=0;ye<oe.length;ye+=1)Ye.indexOf(oe[ye])===-1&&Ye.push(oe[ye]);for(var Re=0;Re<Ye.length;Re++)for(;this.pdf.internal.getNumberOfPages()<Ye[Re];)w.call(this);if(C(Ye),this.autoPaging)for(var Te=Ye[0],Me=Ye[Ye.length-1],Be=Te;Be<Me+1;Be++){this.pdf.setPage(Be),this.fillStyle=ae,this.strokeStyle=ie,this.lineCap=ce,this.lineWidth=Ie,this.lineJoin=Ee;var ze=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],He=Be===1?this.posY+this.margin[0]:this.margin[0],Qe=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],st=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],tt=Be===1?0:Qe+(Be-2)*st;if(this.ctx.clip_path.length!==0){var lt=this.path;Y=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=x(Y,this.posX+this.margin[3],-tt+He+this.ctx.prevPageLastElemOffset),Q.call(this,F,!0),this.path=lt}if(Z=JSON.parse(JSON.stringify(je)),this.path=x(Z,this.posX+this.margin[3],-tt+He+this.ctx.prevPageLastElemOffset),G===!1||Be===0){var ht=(Be>Te||Be<Me)&&E.call(this);ht&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ze,st,null).clip().discardPath()),Q.call(this,F,G),ht&&this.pdf.restoreGraphicsState()}this.lineWidth=fe}else this.lineWidth=Ie,Q.call(this,F,G),this.lineWidth=fe;this.path=je},Q=function(F,G){if((F!=="stroke"||G||!b.call(this))&&(F==="stroke"||G||!p.call(this))){for(var Y,Z,ae=[],ie=this.path,ce=0;ce<ie.length;ce++){var fe=ie[ce];switch(fe.type){case"begin":ae.push({begin:!0});break;case"close":ae.push({close:!0});break;case"mt":ae.push({start:fe,deltas:[],abs:[]});break;case"lt":var Ie=ae.length;if(ie[ce-1]&&!isNaN(ie[ce-1].x)&&(Y=[fe.x-ie[ce-1].x,fe.y-ie[ce-1].y],Ie>0)){for(;Ie>=0;Ie--)if(ae[Ie-1].close!==!0&&ae[Ie-1].begin!==!0){ae[Ie-1].deltas.push(Y),ae[Ie-1].abs.push(fe);break}}break;case"bct":Y=[fe.x1-ie[ce-1].x,fe.y1-ie[ce-1].y,fe.x2-ie[ce-1].x,fe.y2-ie[ce-1].y,fe.x-ie[ce-1].x,fe.y-ie[ce-1].y],ae[ae.length-1].deltas.push(Y);break;case"qct":var Ee=ie[ce-1].x+2/3*(fe.x1-ie[ce-1].x),je=ie[ce-1].y+2/3*(fe.y1-ie[ce-1].y),Ue=fe.x+2/3*(fe.x1-fe.x),Ye=fe.y+2/3*(fe.y1-fe.y),Se=fe.x,oe=fe.y;Y=[Ee-ie[ce-1].x,je-ie[ce-1].y,Ue-ie[ce-1].x,Ye-ie[ce-1].y,Se-ie[ce-1].x,oe-ie[ce-1].y],ae[ae.length-1].deltas.push(Y);break;case"arc":ae.push({deltas:[],abs:[],arc:!0}),Array.isArray(ae[ae.length-1].abs)&&ae[ae.length-1].abs.push(fe)}}Z=G?null:F==="stroke"?"stroke":"fill";for(var ye=!1,Re=0;Re<ae.length;Re++)if(ae[Re].arc)for(var Te=ae[Re].abs,Me=0;Me<Te.length;Me++){var Be=Te[Me];Be.type==="arc"?y.call(this,Be.x,Be.y,Be.radius,Be.startAngle,Be.endAngle,Be.counterclockwise,void 0,G,!ye):P.call(this,Be.x,Be.y),ye=!0}else if(ae[Re].close===!0)this.pdf.internal.out("h"),ye=!1;else if(ae[Re].begin!==!0){var ze=ae[Re].start.x,He=ae[Re].start.y;V.call(this,ae[Re].deltas,ze,He),ye=!0}Z&&N.call(this,Z),G&&R.call(this)}},z=function(F){var G=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,Y=G*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return F-Y;case"top":return F+G-Y;case"hanging":return F+G-2*Y;case"middle":return F+G/2-Y;case"ideographic":return F;case"alphabetic":default:return F}},L=function(F){return F+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};f.prototype.createLinearGradient=function(){var F=function(){};return F.colorStops=[],F.addColorStop=function(G,Y){this.colorStops.push([G,Y])},F.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},F.isCanvasGradient=!0,F},f.prototype.createPattern=function(){return this.createLinearGradient()},f.prototype.createRadialGradient=function(){return this.createLinearGradient()};var y=function(F,G,Y,Z,ae,ie,ce,fe,Ie){for(var Ee=O.call(this,Y,Z,ae,ie),je=0;je<Ee.length;je++){var Ue=Ee[je];je===0&&(Ie?A.call(this,Ue.x1+F,Ue.y1+G):P.call(this,Ue.x1+F,Ue.y1+G)),J.call(this,F,G,Ue.x2,Ue.y2,Ue.x3,Ue.y3,Ue.x4,Ue.y4)}fe?R.call(this):N.call(this,ce)},N=function(F){switch(F){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},R=function(){this.pdf.clip(),this.pdf.discardPath()},A=function(F,G){this.pdf.internal.out(n(F)+" "+r(G)+" m")},I=function(F){var G;switch(F.align){case"right":case"end":G="right";break;case"center":G="center";break;case"left":case"start":default:G="left"}var Y=this.pdf.getTextDimensions(F.text),Z=z.call(this,F.y),ae=L.call(this,Z)-Y.h,ie=this.ctx.transform.applyToPoint(new o(F.x,Z)),ce=this.ctx.transform.decompose(),fe=new l;fe=(fe=(fe=fe.multiply(ce.translate)).multiply(ce.skew)).multiply(ce.scale);for(var Ie,Ee,je,Ue=this.ctx.transform.applyToRectangle(new a(F.x,Z,Y.w,Y.h)),Ye=fe.applyToRectangle(new a(F.x,ae,Y.w,Y.h)),Se=k.call(this,Ye),oe=[],ye=0;ye<Se.length;ye+=1)oe.indexOf(Se[ye])===-1&&oe.push(Se[ye]);if(C(oe),this.autoPaging)for(var Re=oe[0],Te=oe[oe.length-1],Me=Re;Me<Te+1;Me++){this.pdf.setPage(Me);var Be=Me===1?this.posY+this.margin[0]:this.margin[0],ze=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],He=this.pdf.internal.pageSize.height-this.margin[2],Qe=He-this.margin[0],st=this.pdf.internal.pageSize.width-this.margin[1],tt=st-this.margin[3],lt=Me===1?0:ze+(Me-2)*Qe;if(this.ctx.clip_path.length!==0){var ht=this.path;Ie=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=x(Ie,this.posX+this.margin[3],-1*lt+Be),Q.call(this,"fill",!0),this.path=ht}var ot=x([JSON.parse(JSON.stringify(Ye))],this.posX+this.margin[3],-lt+Be+this.ctx.prevPageLastElemOffset)[0];F.scale>=.01&&(Ee=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Ee*F.scale),je=this.lineWidth,this.lineWidth=je*F.scale);var at=this.autoPaging!=="text";if(at||ot.y+ot.h<=He){if(at||ot.y>=Be&&ot.x<=st){var $e=at?F.text:this.pdf.splitTextToSize(F.text,F.maxWidth||st-ot.x)[0],Ct=x([JSON.parse(JSON.stringify(Ue))],this.posX+this.margin[3],-lt+Be+this.ctx.prevPageLastElemOffset)[0],vt=at&&(Me>Re||Me<Te)&&E.call(this);vt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],tt,Qe,null).clip().discardPath()),this.pdf.text($e,Ct.x,Ct.y,{angle:F.angle,align:G,renderingMode:F.renderingMode}),vt&&this.pdf.restoreGraphicsState()}}else ot.y<He&&(this.ctx.prevPageLastElemOffset+=He-ot.y);F.scale>=.01&&(this.pdf.setFontSize(Ee),this.lineWidth=je)}else F.scale>=.01&&(Ee=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Ee*F.scale),je=this.lineWidth,this.lineWidth=je*F.scale),this.pdf.text(F.text,ie.x+this.posX,ie.y+this.posY,{angle:F.angle,align:G,renderingMode:F.renderingMode,maxWidth:F.maxWidth}),F.scale>=.01&&(this.pdf.setFontSize(Ee),this.lineWidth=je)},P=function(F,G,Y,Z){Y=Y||0,Z=Z||0,this.pdf.internal.out(n(F+Y)+" "+r(G+Z)+" l")},V=function(F,G,Y){return this.pdf.lines(F,G,Y,null,null)},J=function(F,G,Y,Z,ae,ie,ce,fe){this.pdf.internal.out([e(i(Y+F)),e(s(Z+G)),e(i(ae+F)),e(s(ie+G)),e(i(ce+F)),e(s(fe+G)),"c"].join(" "))},O=function(F,G,Y,Z){for(var ae=2*Math.PI,ie=Math.PI/2;G>Y;)G-=ae;var ce=Math.abs(Y-G);ce<ae&&Z&&(ce=ae-ce);for(var fe=[],Ie=Z?-1:1,Ee=G;ce>1e-5;){var je=Ee+Ie*Math.min(ce,ie);fe.push(U.call(this,F,Ee,je)),ce-=Math.abs(je-Ee),Ee=je}return fe},U=function(F,G,Y){var Z=(Y-G)/2,ae=F*Math.cos(Z),ie=F*Math.sin(Z),ce=ae,fe=-ie,Ie=ce*ce+fe*fe,Ee=Ie+ce*ae+fe*ie,je=4/3*(Math.sqrt(2*Ie*Ee)-Ee)/(ce*ie-fe*ae),Ue=ce-je*fe,Ye=fe+je*ce,Se=Ue,oe=-Ye,ye=Z+G,Re=Math.cos(ye),Te=Math.sin(ye);return{x1:F*Math.cos(G),y1:F*Math.sin(G),x2:Ue*Re-Ye*Te,y2:Ue*Te+Ye*Re,x3:Se*Re-oe*Te,y3:Se*Te+oe*Re,x4:F*Math.cos(Y),y4:F*Math.sin(Y)}},W=function(F){return 180*F/Math.PI},ee=function(F,G,Y,Z,ae,ie){var ce=F+.5*(Y-F),fe=G+.5*(Z-G),Ie=ae+.5*(Y-ae),Ee=ie+.5*(Z-ie),je=Math.min(F,ae,ce,Ie),Ue=Math.max(F,ae,ce,Ie),Ye=Math.min(G,ie,fe,Ee),Se=Math.max(G,ie,fe,Ee);return new a(je,Ye,Ue-je,Se-Ye)},re=function(F,G,Y,Z,ae,ie,ce,fe){var Ie,Ee,je,Ue,Ye,Se,oe,ye,Re,Te,Me,Be,ze,He,Qe=Y-F,st=Z-G,tt=ae-Y,lt=ie-Z,ht=ce-ae,ot=fe-ie;for(Ee=0;Ee<41;Ee++)Re=(oe=(je=F+(Ie=Ee/40)*Qe)+Ie*((Ye=Y+Ie*tt)-je))+Ie*(Ye+Ie*(ae+Ie*ht-Ye)-oe),Te=(ye=(Ue=G+Ie*st)+Ie*((Se=Z+Ie*lt)-Ue))+Ie*(Se+Ie*(ie+Ie*ot-Se)-ye),Ee==0?(Me=Re,Be=Te,ze=Re,He=Te):(Me=Math.min(Me,Re),Be=Math.min(Be,Te),ze=Math.max(ze,Re),He=Math.max(He,Te));return new a(Math.round(Me),Math.round(Be),Math.round(ze-Me),Math.round(He-Be))},xe=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var F,G,Y=(F=this.ctx.lineDash,G=this.ctx.lineDashOffset,JSON.stringify({lineDash:F,lineDashOffset:G}));this.prevLineDash!==Y&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=Y)}}})(dt.API),function(t){var e=function(s){var o,a,l,u,h,f,m,p,b,E;for(a=[],l=0,u=(s+=o="\0\0\0\0".slice(s.length%4||4)).length;u>l;l+=4)(h=(s.charCodeAt(l)<<24)+(s.charCodeAt(l+1)<<16)+(s.charCodeAt(l+2)<<8)+s.charCodeAt(l+3))!==0?(f=(h=((h=((h=((h=(h-(E=h%85))/85)-(b=h%85))/85)-(p=h%85))/85)-(m=h%85))/85)%85,a.push(f+33,m+33,p+33,b+33,E+33)):a.push(122);return function(k,w){for(var x=w;x>0;x--)k.pop()}(a,o.length),String.fromCharCode.apply(String,a)+"~>"},n=function(s){var o,a,l,u,h,f=String,m="length",p=255,b="charCodeAt",E="slice",k="replace";for(s[E](-2),s=s[E](0,-2)[k](/\s/g,"")[k]("z","!!!!!"),l=[],u=0,h=(s+=o="uuuuu"[E](s[m]%5||5))[m];h>u;u+=5)a=52200625*(s[b](u)-33)+614125*(s[b](u+1)-33)+7225*(s[b](u+2)-33)+85*(s[b](u+3)-33)+(s[b](u+4)-33),l.push(p&a>>24,p&a>>16,p&a>>8,p&a);return function(w,x){for(var C=x;C>0;C--)w.pop()}(l,o[m]),f.fromCharCode.apply(f,l)},r=function(s){var o=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((s=s.replace(/\s/g,"")).indexOf(">")!==-1&&(s=s.substr(0,s.indexOf(">"))),s.length%2&&(s+="0"),o.test(s)===!1)return"";for(var a="",l=0;l<s.length;l+=2)a+=String.fromCharCode("0x"+(s[l]+s[l+1]));return a},i=function(s){for(var o=new Uint8Array(s.length),a=s.length;a--;)o[a]=s.charCodeAt(a);return s=(o=X0(o)).reduce(function(l,u){return l+String.fromCharCode(u)},"")};t.processDataByFilters=function(s,o){var a=0,l=s||"",u=[];for(typeof(o=o||[])=="string"&&(o=[o]),a=0;a<o.length;a+=1)switch(o[a]){case"ASCII85Decode":case"/ASCII85Decode":l=n(l),u.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":l=e(l),u.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":l=r(l),u.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":l=l.split("").map(function(h){return("0"+h.charCodeAt().toString(16)).slice(-2)}).join("")+">",u.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":l=i(l),u.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[a]+'" is not implemented')}return{data:l,reverseChain:u.reverse().join(" ")}}}(dt.API),function(t){t.loadFile=function(e,n,r){return function(i,s,o){s=s!==!1,o=typeof o=="function"?o:function(){};var a=void 0;try{a=function(l,u,h){var f=new XMLHttpRequest,m=0,p=function(b){var E=b.length,k=[],w=String.fromCharCode;for(m=0;m<E;m+=1)k.push(w(255&b.charCodeAt(m)));return k.join("")};if(f.open("GET",l,!u),f.overrideMimeType("text/plain; charset=x-user-defined"),u===!1&&(f.onload=function(){f.status===200?h(p(this.responseText)):h(void 0)}),f.send(null),u&&f.status===200)return p(f.responseText)}(i,s,o)}catch{}return a}(e,n,r)},t.loadImageFile=t.loadFile}(dt.API),function(t){function e(){return(ft.html2canvas?Promise.resolve(ft.html2canvas):W0(()=>import("./html2canvas.esm-CBrSDip1.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load html2canvas: "+o))}).then(function(o){return o.default?o.default:o})}function n(){return(ft.DOMPurify?Promise.resolve(ft.DOMPurify):W0(()=>import("./purify.es-C_uT9hQ1.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load dompurify: "+o))}).then(function(o){return o.default?o.default:o})}var r=function(o){var a=Gt(o);return a==="undefined"?"undefined":a==="string"||o instanceof String?"string":a==="number"||o instanceof Number?"number":a==="function"||o instanceof Function?"function":o&&o.constructor===Array?"array":o&&o.nodeType===1?"element":a==="object"?"object":"unknown"},i=function(o,a){var l=document.createElement(o);for(var u in a.className&&(l.className=a.className),a.innerHTML&&a.dompurify&&(l.innerHTML=a.dompurify.sanitize(a.innerHTML)),a.style)l.style[u]=a.style[u];return l},s=function o(a){var l=Object.assign(o.convert(Promise.resolve()),JSON.parse(JSON.stringify(o.template))),u=o.convert(Promise.resolve(),l);return u=(u=u.setProgress(1,o,1,[o])).set(a)};(s.prototype=Object.create(Promise.prototype)).constructor=s,s.convert=function(o,a){return o.__proto__=a||s.prototype,o},s.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},s.prototype.from=function(o,a){return this.then(function(){switch(a=a||function(l){switch(r(l)){case"string":return"string";case"element":return l.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(o)){case"string":return this.then(n).then(function(l){return this.set({src:i("div",{innerHTML:o,dompurify:l})})});case"element":return this.set({src:o});case"canvas":return this.set({canvas:o});case"img":return this.set({img:o});default:return this.error("Unknown source type.")}})},s.prototype.to=function(o){switch(o){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},s.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var o={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},a=function l(u,h){for(var f=u.nodeType===3?document.createTextNode(u.nodeValue):u.cloneNode(!1),m=u.firstChild;m;m=m.nextSibling)h!==!0&&m.nodeType===1&&m.nodeName==="SCRIPT"||f.appendChild(l(m,h));return u.nodeType===1&&(u.nodeName==="CANVAS"?(f.width=u.width,f.height=u.height,f.getContext("2d").drawImage(u,0,0)):u.nodeName!=="TEXTAREA"&&u.nodeName!=="SELECT"||(f.value=u.value),f.addEventListener("load",function(){f.scrollTop=u.scrollTop,f.scrollLeft=u.scrollLeft},!0)),f}(this.prop.src,this.opt.html2canvas.javascriptEnabled);a.tagName==="BODY"&&(o.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:o}),this.prop.container.appendChild(a),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},s.prototype.toCanvas=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(a){var l=Object.assign({},this.opt.html2canvas);return delete l.onrendered,a(this.prop.container,l)}).then(function(a){(this.opt.html2canvas.onrendered||function(){})(a),this.prop.canvas=a,document.body.removeChild(this.prop.overlay)})},s.prototype.toContext2d=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(a){var l=this.opt.jsPDF,u=this.opt.fontFaces,h=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,f=Object.assign({async:!0,allowTaint:!0,scale:h,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete f.onrendered,l.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,l.context2d.posX=this.opt.x,l.context2d.posY=this.opt.y,l.context2d.margin=this.opt.margin,l.context2d.fontFaces=u,u)for(var m=0;m<u.length;++m){var p=u[m],b=p.src.find(function(E){return E.format==="truetype"});b&&l.addFont(b.url,p.ref.name,p.ref.style)}return f.windowHeight=f.windowHeight||0,f.windowHeight=f.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):f.windowHeight,l.context2d.save(!0),a(this.prop.container,f)}).then(function(a){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(a),this.prop.canvas=a,document.body.removeChild(this.prop.overlay)})},s.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var o=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=o})},s.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},s.prototype.output=function(o,a,l){return(l=l||"pdf").toLowerCase()==="img"||l.toLowerCase()==="image"?this.outputImg(o,a):this.outputPdf(o,a)},s.prototype.outputPdf=function(o,a){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(o,a)})},s.prototype.outputImg=function(o){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(o){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+o+'" is not supported.'}})},s.prototype.save=function(o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(o?{filename:o}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},s.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},s.prototype.set=function(o){if(r(o)!=="object")return this;var a=Object.keys(o||{}).map(function(l){if(l in s.template.prop)return function(){this.prop[l]=o[l]};switch(l){case"margin":return this.setMargin.bind(this,o.margin);case"jsPDF":return function(){return this.opt.jsPDF=o.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,o.pageSize);default:return function(){this.opt[l]=o[l]}}},this);return this.then(function(){return this.thenList(a)})},s.prototype.get=function(o,a){return this.then(function(){var l=o in s.template.prop?this.prop[o]:this.opt[o];return a?a(l):l})},s.prototype.setMargin=function(o){return this.then(function(){switch(r(o)){case"number":o=[o,o,o,o];case"array":if(o.length===2&&(o=[o[0],o[1],o[0],o[1]]),o.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=o}).then(this.setPageSize)},s.prototype.setPageSize=function(o){function a(l,u){return Math.floor(l*u/72*96)}return this.then(function(){(o=o||dt.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(o.inner={width:o.width-this.opt.margin[1]-this.opt.margin[3],height:o.height-this.opt.margin[0]-this.opt.margin[2]},o.inner.px={width:a(o.inner.width,o.k),height:a(o.inner.height,o.k)},o.inner.ratio=o.inner.height/o.inner.width),this.prop.pageSize=o})},s.prototype.setProgress=function(o,a,l,u){return o!=null&&(this.progress.val=o),a!=null&&(this.progress.state=a),l!=null&&(this.progress.n=l),u!=null&&(this.progress.stack=u),this.progress.ratio=this.progress.val/this.progress.state,this},s.prototype.updateProgress=function(o,a,l,u){return this.setProgress(o?this.progress.val+o:null,a||null,l?this.progress.n+l:null,u?this.progress.stack.concat(u):null)},s.prototype.then=function(o,a){var l=this;return this.thenCore(o,a,function(u,h){return l.updateProgress(null,null,1,[u]),Promise.prototype.then.call(this,function(f){return l.updateProgress(null,u),f}).then(u,h).then(function(f){return l.updateProgress(1),f})})},s.prototype.thenCore=function(o,a,l){l=l||Promise.prototype.then,o&&(o=o.bind(this)),a&&(a=a.bind(this));var u=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:s.convert(Object.assign({},this),Promise.prototype),h=l.call(u,o,a);return s.convert(h,this.__proto__)},s.prototype.thenExternal=function(o,a){return Promise.prototype.then.call(this,o,a)},s.prototype.thenList=function(o){var a=this;return o.forEach(function(l){a=a.thenCore(l)}),a},s.prototype.catch=function(o){o&&(o=o.bind(this));var a=Promise.prototype.catch.call(this,o);return s.convert(a,this)},s.prototype.catchExternal=function(o){return Promise.prototype.catch.call(this,o)},s.prototype.error=function(o){return this.then(function(){throw new Error(o)})},s.prototype.using=s.prototype.set,s.prototype.saveAs=s.prototype.save,s.prototype.export=s.prototype.output,s.prototype.run=s.prototype.then,dt.getPageSize=function(o,a,l){if(Gt(o)==="object"){var u=o;o=u.orientation,a=u.unit||a,l=u.format||l}a=a||"mm",l=l||"a4",o=(""+(o||"P")).toLowerCase();var h,f=(""+l).toLowerCase(),m={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(a){case"pt":h=1;break;case"mm":h=72/25.4;break;case"cm":h=72/2.54;break;case"in":h=72;break;case"px":h=.75;break;case"pc":case"em":h=12;break;case"ex":h=6;break;default:throw"Invalid unit: "+a}var p,b=0,E=0;if(m.hasOwnProperty(f))b=m[f][1]/h,E=m[f][0]/h;else try{b=l[1],E=l[0]}catch{throw new Error("Invalid format: "+l)}if(o==="p"||o==="portrait")o="p",E>b&&(p=E,E=b,b=p);else{if(o!=="l"&&o!=="landscape")throw"Invalid orientation: "+o;o="l",b>E&&(p=E,E=b,b=p)}return{width:E,height:b,unit:a,k:h,orientation:o}},t.html=function(o,a){(a=a||{}).callback=a.callback||function(){},a.html2canvas=a.html2canvas||{},a.html2canvas.canvas=a.html2canvas.canvas||this.canvas,a.jsPDF=a.jsPDF||this,a.fontFaces=a.fontFaces?a.fontFaces.map(r2):null;var l=new s(a);return a.worker?l:l.from(o).doCallback()}}(dt.API),dt.API.addJS=function(t){return Dw=t,this.internal.events.subscribe("postPutResources",function(){qf=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(qf+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),jw=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+Dw+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){qf!==void 0&&jw!==void 0&&this.internal.out("/Names <</JavaScript "+qf+" 0 R>>")}),this},function(t){var e;t.events.push(["postPutResources",function(){var n=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=n.outline.render().split(/\r\n/),s=0;s<i.length;s++){var o=i[s],a=r.exec(o);if(a!=null){var l=a[1];n.internal.newObjectDeferredBegin(l,!1)}n.internal.write(o)}if(this.outline.createNamedDestinations){var u=this.internal.pages.length,h=[];for(s=0;s<u;s++){var f=n.internal.newObject();h.push(f);var m=n.internal.getPageInfo(s+1);n.internal.write("<< /D["+m.objId+" 0 R /XYZ null null null]>> endobj")}var p=n.internal.newObject();for(n.internal.write("<< /Names [ "),s=0;s<h.length;s++)n.internal.write("(page_"+(s+1)+")"+h[s]+" 0 R");n.internal.write(" ] >>","endobj"),e=n.internal.newObject(),n.internal.write("<< /Dests "+p+" 0 R"),n.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var n=this;n.outline={createNamedDestinations:!1,root:{children:[]}},n.outline.add=function(r,i,s){var o={title:i,options:s,children:[]};return r==null&&(r=this.root),r.children.push(o),o},n.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=n,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},n.outline.genIds_r=function(r){r.id=n.internal.newObjectDeferred();for(var i=0;i<r.children.length;i++)this.genIds_r(r.children[i])},n.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},n.outline.renderItems=function(r){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<r.children.length;s++){var o=r.children[s];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(r)),s>0&&this.line("/Prev "+this.makeRef(r.children[s-1])),s<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[s+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var a=this.count=this.count_r({count:0},o);if(a>0&&this.line("/Count "+a),o.options&&o.options.pageNumber){var l=n.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+l.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var u=0;u<r.children.length;u++)this.renderItems(r.children[u])},n.outline.line=function(r){this.ctx.val+=r+`\r
`},n.outline.makeRef=function(r){return r.id+" 0 R"},n.outline.makeString=function(r){return"("+n.internal.pdfEscape(r)+")"},n.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},n.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},n.outline.count_r=function(r,i){for(var s=0;s<i.children.length;s++)r.count++,this.count_r(r,i.children[s]);return r.count}}])}(dt.API),function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(n,r,i,s,o,a){var l,u=this.decode.DCT_DECODE,h=null;if(typeof n=="string"||this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n)){switch(n=o||n,n=this.__addimage__.isArrayBuffer(n)?new Uint8Array(n):n,(l=function(f){for(var m,p=256*f.charCodeAt(4)+f.charCodeAt(5),b=f.length,E={width:0,height:0,numcomponents:1},k=4;k<b;k+=2){if(k+=p,e.indexOf(f.charCodeAt(k+1))!==-1){m=256*f.charCodeAt(k+5)+f.charCodeAt(k+6),E={width:256*f.charCodeAt(k+7)+f.charCodeAt(k+8),height:m,numcomponents:f.charCodeAt(k+9)};break}p=256*f.charCodeAt(k+2)+f.charCodeAt(k+3)}return E}(n=this.__addimage__.isArrayBufferView(n)?this.__addimage__.arrayBufferToBinaryString(n):n)).numcomponents){case 1:a=this.color_spaces.DEVICE_GRAY;break;case 4:a=this.color_spaces.DEVICE_CMYK;break;case 3:a=this.color_spaces.DEVICE_RGB}h={data:n,width:l.width,height:l.height,colorSpace:a,bitsPerComponent:8,filter:u,index:r,alias:i}}return h}}(dt.API);var Du,zf,Ow,Fw,Mw,uD=function(){var t,e,n;function r(s){var o,a,l,u,h,f,m,p,b,E,k,w,x,C;for(this.data=s,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},f=null;;){switch(o=this.readUInt32(),b=(function(){var M,Q;for(Q=[],M=0;M<4;++M)Q.push(String.fromCharCode(this.data[this.pos++]));return Q}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(o);break;case"fcTL":f&&this.animation.frames.push(f),this.pos+=4,f={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},h=this.readUInt16(),u=this.readUInt16()||100,f.delay=1e3*h/u,f.disposeOp=this.data[this.pos++],f.blendOp=this.data[this.pos++],f.data=[];break;case"IDAT":case"fdAT":for(b==="fdAT"&&(this.pos+=4,o-=4),s=(f!=null?f.data:void 0)||this.imgData,w=0;0<=o?w<o:w>o;0<=o?++w:--w)s.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(l=this.palette.length/3,this.transparency.indexed=this.read(o),this.transparency.indexed.length>l)throw new Error("More transparent colors than palette size");if((E=l-this.transparency.indexed.length)>0)for(x=0;0<=E?x<E:x>E;0<=E?++x:--x)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(o)[0];break;case 2:this.transparency.rgb=this.read(o)}break;case"tEXt":m=(k=this.read(o)).indexOf(0),p=String.fromCharCode.apply(String,k.slice(0,m)),this.text[p]=String.fromCharCode.apply(String,k.slice(m+1));break;case"IEND":return f&&this.animation.frames.push(f),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(C=this.colorType)===4||C===6,a=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*a,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=o}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}r.prototype.read=function(s){var o,a;for(a=[],o=0;0<=s?o<s:o>s;0<=s?++o:--o)a.push(this.data[this.pos++]);return a},r.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.decodePixels=function(s){var o=this.pixelBitlength/8,a=new Uint8Array(this.width*this.height*o),l=0,u=this;if(s==null&&(s=this.imgData),s.length===0)return new Uint8Array(0);function h(f,m,p,b){var E,k,w,x,C,M,Q,z,L,y,N,R,A,I,P,V,J,O,U,W,ee,re=Math.ceil((u.width-f)/p),xe=Math.ceil((u.height-m)/b),F=u.width==re&&u.height==xe;for(I=o*re,R=F?a:new Uint8Array(I*xe),M=s.length,A=0,k=0;A<xe&&l<M;){switch(s[l++]){case 0:for(x=J=0;J<I;x=J+=1)R[k++]=s[l++];break;case 1:for(x=O=0;O<I;x=O+=1)E=s[l++],C=x<o?0:R[k-o],R[k++]=(E+C)%256;break;case 2:for(x=U=0;U<I;x=U+=1)E=s[l++],w=(x-x%o)/o,P=A&&R[(A-1)*I+w*o+x%o],R[k++]=(P+E)%256;break;case 3:for(x=W=0;W<I;x=W+=1)E=s[l++],w=(x-x%o)/o,C=x<o?0:R[k-o],P=A&&R[(A-1)*I+w*o+x%o],R[k++]=(E+Math.floor((C+P)/2))%256;break;case 4:for(x=ee=0;ee<I;x=ee+=1)E=s[l++],w=(x-x%o)/o,C=x<o?0:R[k-o],A===0?P=V=0:(P=R[(A-1)*I+w*o+x%o],V=w&&R[(A-1)*I+(w-1)*o+x%o]),Q=C+P-V,z=Math.abs(Q-C),y=Math.abs(Q-P),N=Math.abs(Q-V),L=z<=y&&z<=N?C:y<=N?P:V,R[k++]=(E+L)%256;break;default:throw new Error("Invalid filter algorithm: "+s[l-1])}if(!F){var G=((m+A*b)*u.width+f)*o,Y=A*I;for(x=0;x<re;x+=1){for(var Z=0;Z<o;Z+=1)a[G++]=R[Y++];G+=(p-1)*o}}A++}}return s=B7(s),u.interlaceMethod==1?(h(0,0,8,8),h(4,0,8,8),h(0,4,4,8),h(2,0,4,4),h(0,2,2,4),h(1,0,2,2),h(0,1,1,2)):h(0,0,1,1),a},r.prototype.decodePalette=function(){var s,o,a,l,u,h,f,m,p;for(a=this.palette,h=this.transparency.indexed||[],u=new Uint8Array((h.length||0)+a.length),l=0,s=0,o=f=0,m=a.length;f<m;o=f+=3)u[l++]=a[o],u[l++]=a[o+1],u[l++]=a[o+2],u[l++]=(p=h[s++])!=null?p:255;return u},r.prototype.copyToImageData=function(s,o){var a,l,u,h,f,m,p,b,E,k,w;if(l=this.colors,E=null,a=this.hasAlphaChannel,this.palette.length&&(E=(w=this._decodedPalette)!=null?w:this._decodedPalette=this.decodePalette(),l=4,a=!0),b=(u=s.data||s).length,f=E||o,h=m=0,l===1)for(;h<b;)p=E?4*o[h/4]:m,k=f[p++],u[h++]=k,u[h++]=k,u[h++]=k,u[h++]=a?f[p++]:255,m=p;else for(;h<b;)p=E?4*o[h/4]:m,u[h++]=f[p++],u[h++]=f[p++],u[h++]=f[p++],u[h++]=a?f[p++]:255,m=p},r.prototype.decode=function(){var s;return s=new Uint8Array(this.width*this.height*4),this.copyToImageData(s,this.decodePixels()),s};var i=function(){if(Object.prototype.toString.call(ft)==="[object Window]"){try{e=ft.document.createElement("canvas"),n=e.getContext("2d")}catch{return!1}return!0}return!1};return i(),t=function(s){var o;if(i()===!0)return n.width=s.width,n.height=s.height,n.clearRect(0,0,s.width,s.height),n.putImageData(s,0,0),(o=new Image).src=e.toDataURL(),o;throw new Error("This method requires a Browser with Canvas-capability.")},r.prototype.decodeFrames=function(s){var o,a,l,u,h,f,m,p;if(this.animation){for(p=[],a=h=0,f=(m=this.animation.frames).length;h<f;a=++h)o=m[a],l=s.createImageData(o.width,o.height),u=this.decodePixels(new Uint8Array(o.data)),this.copyToImageData(l,u),o.imageData=l,p.push(o.image=t(l));return p}},r.prototype.renderFrame=function(s,o){var a,l,u;return a=(l=this.animation.frames)[o],u=l[o-1],o===0&&s.clearRect(0,0,this.width,this.height),(u!=null?u.disposeOp:void 0)===1?s.clearRect(u.xOffset,u.yOffset,u.width,u.height):(u!=null?u.disposeOp:void 0)===2&&s.putImageData(u.imageData,u.xOffset,u.yOffset),a.blendOp===0&&s.clearRect(a.xOffset,a.yOffset,a.width,a.height),s.drawImage(a.image,a.xOffset,a.yOffset)},r.prototype.animate=function(s){var o,a,l,u,h,f,m=this;return a=0,f=this.animation,u=f.numFrames,l=f.frames,h=f.numPlays,(o=function(){var p,b;if(p=a++%u,b=l[p],m.renderFrame(s,p),u>1&&a/u<h)return m.animation._timeout=setTimeout(o,b.delay)})()},r.prototype.stopAnimation=function(){var s;return clearTimeout((s=this.animation)!=null?s._timeout:void 0)},r.prototype.render=function(s){var o,a;return s._png&&s._png.stopAnimation(),s._png=this,s.width=this.width,s.height=this.height,o=s.getContext("2d"),this.animation?(this.decodeFrames(o),this.animate(o)):(a=o.createImageData(this.width,this.height),this.copyToImageData(a,this.decodePixels()),o.putImageData(a,0,0))},r}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function cD(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!=56||t[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var n=t[e++]|t[e++]<<8,r=t[e++]|t[e++]<<8,i=t[e++],s=i>>7,o=1<<(7&i)+1;t[e++],t[e++];var a=null,l=null;s&&(a=e,l=o,e+=3*o);var u=!0,h=[],f=0,m=null,p=0,b=null;for(this.width=n,this.height=r;u&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0)e+=14,b=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((A=t[e++])>=0))throw Error("Invalid block size");if(A===0)break;e+=A}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var E=t[e++];f=t[e++]|t[e++]<<8,m=t[e++],!(1&E)&&(m=null),p=E>>2&7,e++;break;case 254:for(;;){if(!((A=t[e++])>=0))throw Error("Invalid block size");if(A===0)break;e+=A}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var k=t[e++]|t[e++]<<8,w=t[e++]|t[e++]<<8,x=t[e++]|t[e++]<<8,C=t[e++]|t[e++]<<8,M=t[e++],Q=M>>6&1,z=1<<(7&M)+1,L=a,y=l,N=!1;M>>7&&(N=!0,L=e,y=z,e+=3*z);var R=e;for(e++;;){var A;if(!((A=t[e++])>=0))throw Error("Invalid block size");if(A===0)break;e+=A}h.push({x:k,y:w,width:x,height:C,has_local_palette:N,palette_offset:L,palette_size:y,data_offset:R,data_length:e-R,transparent_index:m,interlaced:!!Q,delay:f,disposal:p});break;case 59:u=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return h.length},this.loopCount=function(){return b},this.frameInfo=function(I){if(I<0||I>=h.length)throw new Error("Frame index out of range.");return h[I]},this.decodeAndBlitFrameBGRA=function(I,P){var V=this.frameInfo(I),J=V.width*V.height,O=new Uint8Array(J);Uw(t,V.data_offset,O,J);var U=V.palette_offset,W=V.transparent_index;W===null&&(W=256);var ee=V.width,re=n-ee,xe=ee,F=4*(V.y*n+V.x),G=4*((V.y+V.height)*n+V.x),Y=F,Z=4*re;V.interlaced===!0&&(Z+=4*n*7);for(var ae=8,ie=0,ce=O.length;ie<ce;++ie){var fe=O[ie];if(xe===0&&(xe=ee,(Y+=Z)>=G&&(Z=4*re+4*n*(ae-1),Y=F+(ee+re)*(ae<<1),ae>>=1)),fe===W)Y+=4;else{var Ie=t[U+3*fe],Ee=t[U+3*fe+1],je=t[U+3*fe+2];P[Y++]=je,P[Y++]=Ee,P[Y++]=Ie,P[Y++]=255}--xe}},this.decodeAndBlitFrameRGBA=function(I,P){var V=this.frameInfo(I),J=V.width*V.height,O=new Uint8Array(J);Uw(t,V.data_offset,O,J);var U=V.palette_offset,W=V.transparent_index;W===null&&(W=256);var ee=V.width,re=n-ee,xe=ee,F=4*(V.y*n+V.x),G=4*((V.y+V.height)*n+V.x),Y=F,Z=4*re;V.interlaced===!0&&(Z+=4*n*7);for(var ae=8,ie=0,ce=O.length;ie<ce;++ie){var fe=O[ie];if(xe===0&&(xe=ee,(Y+=Z)>=G&&(Z=4*re+4*n*(ae-1),Y=F+(ee+re)*(ae<<1),ae>>=1)),fe===W)Y+=4;else{var Ie=t[U+3*fe],Ee=t[U+3*fe+1],je=t[U+3*fe+2];P[Y++]=Ie,P[Y++]=Ee,P[Y++]=je,P[Y++]=255}--xe}}}function Uw(t,e,n,r){for(var i=t[e++],s=1<<i,o=s+1,a=o+1,l=i+1,u=(1<<l)-1,h=0,f=0,m=0,p=t[e++],b=new Int32Array(4096),E=null;;){for(;h<16&&p!==0;)f|=t[e++]<<h,h+=8,p===1?p=t[e++]:--p;if(h<l)break;var k=f&u;if(f>>=l,h-=l,k!==s){if(k===o)break;for(var w=k<a?k:E,x=0,C=w;C>s;)C=b[C]>>8,++x;var M=C;if(m+x+(w!==k?1:0)>r)return void en.log("Warning, gif stream longer than expected.");n[m++]=M;var Q=m+=x;for(w!==k&&(n[m++]=M),C=w;x--;)C=b[C],n[--Q]=255&C,C>>=8;E!==null&&a<4096&&(b[a++]=E<<8|M,a>=u+1&&l<12&&(++l,u=u<<1|1)),E=k}else a=o+1,u=(1<<(l=i+1))-1,E=null}return m!==r&&en.log("Warning, gif stream shorter than expected."),n}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function _1(t){var e,n,r,i,s,o=Math.floor,a=new Array(64),l=new Array(64),u=new Array(64),h=new Array(64),f=new Array(65535),m=new Array(65535),p=new Array(64),b=new Array(64),E=[],k=0,w=7,x=new Array(64),C=new Array(64),M=new Array(64),Q=new Array(256),z=new Array(2048),L=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],y=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],N=[0,1,2,3,4,5,6,7,8,9,10,11],R=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],A=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],I=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],P=[0,1,2,3,4,5,6,7,8,9,10,11],V=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],J=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function O(F,G){for(var Y=0,Z=0,ae=new Array,ie=1;ie<=16;ie++){for(var ce=1;ce<=F[ie];ce++)ae[G[Z]]=[],ae[G[Z]][0]=Y,ae[G[Z]][1]=ie,Z++,Y++;Y*=2}return ae}function U(F){for(var G=F[0],Y=F[1]-1;Y>=0;)G&1<<Y&&(k|=1<<w),Y--,--w<0&&(k==255?(W(255),W(0)):W(k),w=7,k=0)}function W(F){E.push(F)}function ee(F){W(F>>8&255),W(255&F)}function re(F,G,Y,Z,ae){for(var ie,ce=ae[0],fe=ae[240],Ie=function(Te,Me){var Be,ze,He,Qe,st,tt,lt,ht,ot,at,$e=0;for(ot=0;ot<8;++ot){Be=Te[$e],ze=Te[$e+1],He=Te[$e+2],Qe=Te[$e+3],st=Te[$e+4],tt=Te[$e+5],lt=Te[$e+6];var Ct=Be+(ht=Te[$e+7]),vt=Be-ht,sn=ze+lt,At=ze-lt,Bt=He+tt,Hr=He-tt,Nt=Qe+st,ui=Qe-st,Ut=Ct+Nt,Hn=Ct-Nt,xn=sn+Bt,Lt=sn-Bt;Te[$e]=Ut+xn,Te[$e+4]=Ut-xn;var it=.707106781*(Lt+Hn);Te[$e+2]=Hn+it,Te[$e+6]=Hn-it;var Et=.382683433*((Ut=ui+Hr)-(Lt=At+vt)),Lr=.5411961*Ut+Et,Yt=1.306562965*Lt+Et,fn=.707106781*(xn=Hr+At),ci=vt+fn,Ze=vt-fn;Te[$e+5]=Ze+Lr,Te[$e+3]=Ze-Lr,Te[$e+1]=ci+Yt,Te[$e+7]=ci-Yt,$e+=8}for($e=0,ot=0;ot<8;++ot){Be=Te[$e],ze=Te[$e+8],He=Te[$e+16],Qe=Te[$e+24],st=Te[$e+32],tt=Te[$e+40],lt=Te[$e+48];var Wr=Be+(ht=Te[$e+56]),mr=Be-ht,Fn=ze+lt,Tn=ze-lt,Sn=He+tt,Mn=He-tt,Oo=Qe+st,qi=Qe-st,gr=Wr+Oo,Gr=Wr-Oo,Rr=Fn+Sn,jr=Fn-Sn;Te[$e]=gr+Rr,Te[$e+32]=gr-Rr;var kn=.707106781*(jr+Gr);Te[$e+16]=Gr+kn,Te[$e+48]=Gr-kn;var hi=.382683433*((gr=qi+Mn)-(jr=Tn+mr)),ms=.5411961*gr+hi,gs=1.306562965*jr+hi,vs=.707106781*(Rr=Mn+Tn),Ks=mr+vs,Qs=mr-vs;Te[$e+40]=Qs+ms,Te[$e+24]=Qs-ms,Te[$e+8]=Ks+gs,Te[$e+56]=Ks-gs,$e++}for(ot=0;ot<64;++ot)at=Te[ot]*Me[ot],p[ot]=at>0?at+.5|0:at-.5|0;return p}(F,G),Ee=0;Ee<64;++Ee)b[L[Ee]]=Ie[Ee];var je=b[0]-Y;Y=b[0],je==0?U(Z[0]):(U(Z[m[ie=32767+je]]),U(f[ie]));for(var Ue=63;Ue>0&&b[Ue]==0;)Ue--;if(Ue==0)return U(ce),Y;for(var Ye,Se=1;Se<=Ue;){for(var oe=Se;b[Se]==0&&Se<=Ue;)++Se;var ye=Se-oe;if(ye>=16){Ye=ye>>4;for(var Re=1;Re<=Ye;++Re)U(fe);ye&=15}ie=32767+b[Se],U(ae[(ye<<4)+m[ie]]),U(f[ie]),Se++}return Ue!=63&&U(ce),Y}function xe(F){F=Math.min(Math.max(F,1),100),s!=F&&(function(G){for(var Y=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],Z=0;Z<64;Z++){var ae=o((Y[Z]*G+50)/100);ae=Math.min(Math.max(ae,1),255),a[L[Z]]=ae}for(var ie=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],ce=0;ce<64;ce++){var fe=o((ie[ce]*G+50)/100);fe=Math.min(Math.max(fe,1),255),l[L[ce]]=fe}for(var Ie=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Ee=0,je=0;je<8;je++)for(var Ue=0;Ue<8;Ue++)u[Ee]=1/(a[L[Ee]]*Ie[je]*Ie[Ue]*8),h[Ee]=1/(l[L[Ee]]*Ie[je]*Ie[Ue]*8),Ee++}(F<50?Math.floor(5e3/F):Math.floor(200-2*F)),s=F)}this.encode=function(F,G){G&&xe(G),E=new Array,k=0,w=7,ee(65496),ee(65504),ee(16),W(74),W(70),W(73),W(70),W(0),W(1),W(1),W(0),ee(1),ee(1),W(0),W(0),function(){ee(65499),ee(132),W(0);for(var ze=0;ze<64;ze++)W(a[ze]);W(1);for(var He=0;He<64;He++)W(l[He])}(),function(ze,He){ee(65472),ee(17),W(8),ee(He),ee(ze),W(3),W(1),W(17),W(0),W(2),W(17),W(1),W(3),W(17),W(1)}(F.width,F.height),function(){ee(65476),ee(418),W(0);for(var ze=0;ze<16;ze++)W(y[ze+1]);for(var He=0;He<=11;He++)W(N[He]);W(16);for(var Qe=0;Qe<16;Qe++)W(R[Qe+1]);for(var st=0;st<=161;st++)W(A[st]);W(1);for(var tt=0;tt<16;tt++)W(I[tt+1]);for(var lt=0;lt<=11;lt++)W(P[lt]);W(17);for(var ht=0;ht<16;ht++)W(V[ht+1]);for(var ot=0;ot<=161;ot++)W(J[ot])}(),ee(65498),ee(12),W(3),W(1),W(0),W(2),W(17),W(3),W(17),W(0),W(63),W(0);var Y=0,Z=0,ae=0;k=0,w=7,this.encode.displayName="_encode_";for(var ie,ce,fe,Ie,Ee,je,Ue,Ye,Se,oe=F.data,ye=F.width,Re=F.height,Te=4*ye,Me=0;Me<Re;){for(ie=0;ie<Te;){for(Ee=Te*Me+ie,Ue=-1,Ye=0,Se=0;Se<64;Se++)je=Ee+(Ye=Se>>3)*Te+(Ue=4*(7&Se)),Me+Ye>=Re&&(je-=Te*(Me+1+Ye-Re)),ie+Ue>=Te&&(je-=ie+Ue-Te+4),ce=oe[je++],fe=oe[je++],Ie=oe[je++],x[Se]=(z[ce]+z[fe+256>>0]+z[Ie+512>>0]>>16)-128,C[Se]=(z[ce+768>>0]+z[fe+1024>>0]+z[Ie+1280>>0]>>16)-128,M[Se]=(z[ce+1280>>0]+z[fe+1536>>0]+z[Ie+1792>>0]>>16)-128;Y=re(x,u,Y,e,r),Z=re(C,h,Z,n,i),ae=re(M,h,ae,n,i),ie+=32}Me+=8}if(w>=0){var Be=[];Be[1]=w+1,Be[0]=(1<<w+1)-1,U(Be)}return ee(65497),new Uint8Array(E)},t=t||50,function(){for(var F=String.fromCharCode,G=0;G<256;G++)Q[G]=F(G)}(),e=O(y,N),n=O(I,P),r=O(R,A),i=O(V,J),function(){for(var F=1,G=2,Y=1;Y<=15;Y++){for(var Z=F;Z<G;Z++)m[32767+Z]=Y,f[32767+Z]=[],f[32767+Z][1]=Y,f[32767+Z][0]=Z;for(var ae=-(G-1);ae<=-F;ae++)m[32767+ae]=Y,f[32767+ae]=[],f[32767+ae][1]=Y,f[32767+ae][0]=G-1+ae;F<<=1,G<<=1}}(),function(){for(var F=0;F<256;F++)z[F]=19595*F,z[F+256>>0]=38470*F,z[F+512>>0]=7471*F+32768,z[F+768>>0]=-11059*F,z[F+1024>>0]=-21709*F,z[F+1280>>0]=32768*F+8421375,z[F+1536>>0]=-27439*F,z[F+1792>>0]=-5329*F}(),xe(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function ts(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function Vw(t){function e(y){if(!y)throw Error("assert :P")}function n(y,N,R){for(var A=0;4>A;A++)if(y[N+A]!=R.charCodeAt(A))return!0;return!1}function r(y,N,R,A,I){for(var P=0;P<I;P++)y[N+P]=R[A+P]}function i(y,N,R,A){for(var I=0;I<A;I++)y[N+I]=R}function s(y){return new Int32Array(y)}function o(y,N){for(var R=[],A=0;A<y;A++)R.push(new N);return R}function a(y,N){var R=[];return function A(I,P,V){for(var J=V[P],O=0;O<J&&(I.push(V.length>P+1?[]:new N),!(V.length<P+1));O++)A(I[O],P+1,V)}(R,0,y),R}var l=function(){var y=this;function N(c,g){for(var S=1<<g-1>>>0;c&S;)S>>>=1;return S?(c&S-1)+S:c}function R(c,g,S,j,q){e(!(j%S));do c[g+(j-=S)]=q;while(0<j)}function A(c,g,S,j,q){if(e(2328>=q),512>=q)var $=s(512);else if(($=s(q))==null)return 0;return function(H,X,te,ne,ue,_e){var we,ve,Ce=X,Ae=1<<te,he=s(16),pe=s(16);for(e(ue!=0),e(ne!=null),e(H!=null),e(0<te),ve=0;ve<ue;++ve){if(15<ne[ve])return 0;++he[ne[ve]]}if(he[0]==ue)return 0;for(pe[1]=0,we=1;15>we;++we){if(he[we]>1<<we)return 0;pe[we+1]=pe[we]+he[we]}for(ve=0;ve<ue;++ve)we=ne[ve],0<ne[ve]&&(_e[pe[we]++]=ve);if(pe[15]==1)return(ne=new I).g=0,ne.value=_e[0],R(H,Ce,1,Ae,ne),Ae;var ke,De=-1,Pe=Ae-1,Xe=0,We=1,ct=1,Ke=1<<te;for(ve=0,we=1,ue=2;we<=te;++we,ue<<=1){if(We+=ct<<=1,0>(ct-=he[we]))return 0;for(;0<he[we];--he[we])(ne=new I).g=we,ne.value=_e[ve++],R(H,Ce+Xe,ue,Ke,ne),Xe=N(Xe,we)}for(we=te+1,ue=2;15>=we;++we,ue<<=1){if(We+=ct<<=1,0>(ct-=he[we]))return 0;for(;0<he[we];--he[we]){if(ne=new I,(Xe&Pe)!=De){for(Ce+=Ke,ke=1<<(De=we)-te;15>De&&!(0>=(ke-=he[De]));)++De,ke<<=1;Ae+=Ke=1<<(ke=De-te),H[X+(De=Xe&Pe)].g=ke+te,H[X+De].value=Ce-X-De}ne.g=we-te,ne.value=_e[ve++],R(H,Ce+(Xe>>te),ue,Ke,ne),Xe=N(Xe,we)}}return We!=2*pe[15]-1?0:Ae}(c,g,S,j,q,$)}function I(){this.value=this.g=0}function P(){this.value=this.g=0}function V(){this.G=o(5,I),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(sr,P)}function J(c,g,S,j){e(c!=null),e(g!=null),e(2147483648>j),c.Ca=254,c.I=0,c.b=-8,c.Ka=0,c.oa=g,c.pa=S,c.Jd=g,c.Yc=S+j,c.Zc=4<=j?S+j-4+1:S,ie(c)}function O(c,g){for(var S=0;0<g--;)S|=fe(c,128)<<g;return S}function U(c,g){var S=O(c,g);return ce(c)?-S:S}function W(c,g,S,j){var q,$=0;for(e(c!=null),e(g!=null),e(4294967288>j),c.Sb=j,c.Ra=0,c.u=0,c.h=0,4<j&&(j=4),q=0;q<j;++q)$+=g[S+q]<<8*q;c.Ra=$,c.bb=j,c.oa=g,c.pa=S}function ee(c){for(;8<=c.u&&c.bb<c.Sb;)c.Ra>>>=8,c.Ra+=c.oa[c.pa+c.bb]<<xu-8>>>0,++c.bb,c.u-=8;Y(c)&&(c.h=1,c.u=0)}function re(c,g){if(e(0<=g),!c.h&&g<=bu){var S=G(c)&wu[g];return c.u+=g,ee(c),S}return c.h=1,c.u=0}function xe(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function F(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function G(c){return c.Ra>>>(c.u&xu-1)>>>0}function Y(c){return e(c.bb<=c.Sb),c.h||c.bb==c.Sb&&c.u>xu}function Z(c,g){c.u=g,c.h=Y(c)}function ae(c){c.u>=Zc&&(e(c.u>=Zc),ee(c))}function ie(c){e(c!=null&&c.oa!=null),c.pa<c.Zc?(c.I=(c.oa[c.pa++]|c.I<<8)>>>0,c.b+=8):(e(c!=null&&c.oa!=null),c.pa<c.Yc?(c.b+=8,c.I=c.oa[c.pa++]|c.I<<8):c.Ka?c.b=0:(c.I<<=8,c.b+=8,c.Ka=1))}function ce(c){return O(c,1)}function fe(c,g){var S=c.Ca;0>c.b&&ie(c);var j=c.b,q=S*g>>>8,$=(c.I>>>j>q)+0;for($?(S-=q,c.I-=q+1<<j>>>0):S=q+1,j=S,q=0;256<=j;)q+=8,j>>=8;return j=7^q+Qr[j],c.b-=j,c.Ca=(S<<j)-1,$}function Ie(c,g,S){c[g+0]=S>>24&255,c[g+1]=S>>16&255,c[g+2]=S>>8&255,c[g+3]=S>>0&255}function Ee(c,g){return c[g+0]<<0|c[g+1]<<8}function je(c,g){return Ee(c,g)|c[g+2]<<16}function Ue(c,g){return Ee(c,g)|Ee(c,g+2)<<16}function Ye(c,g){var S=1<<g;return e(c!=null),e(0<g),c.X=s(S),c.X==null?0:(c.Mb=32-g,c.Xa=g,1)}function Se(c,g){e(c!=null),e(g!=null),e(c.Xa==g.Xa),r(g.X,0,c.X,0,1<<g.Xa)}function oe(){this.X=[],this.Xa=this.Mb=0}function ye(c,g,S,j){e(S!=null),e(j!=null);var q=S[0],$=j[0];return q==0&&(q=(c*$+g/2)/g),$==0&&($=(g*q+c/2)/c),0>=q||0>=$?0:(S[0]=q,j[0]=$,1)}function Re(c,g){return c+(1<<g)-1>>>g}function Te(c,g){return((4278255360&c)+(4278255360&g)>>>0&4278255360)+((16711935&c)+(16711935&g)>>>0&16711935)>>>0}function Me(c,g){y[g]=function(S,j,q,$,H,X,te){var ne;for(ne=0;ne<H;++ne){var ue=y[c](X[te+ne-1],q,$+ne);X[te+ne]=Te(S[j+ne],ue)}}}function Be(){this.ud=this.hd=this.jd=0}function ze(c,g){return((4278124286&(c^g))>>>1)+(c&g)>>>0}function He(c){return 0<=c&&256>c?c:0>c?0:255<c?255:void 0}function Qe(c,g){return He(c+(c-g+.5>>1))}function st(c,g,S){return Math.abs(g-S)-Math.abs(c-S)}function tt(c,g,S,j,q,$,H){for(j=$[H-1],S=0;S<q;++S)$[H+S]=j=Te(c[g+S],j)}function lt(c,g,S,j,q){var $;for($=0;$<S;++$){var H=c[g+$],X=H>>8&255,te=16711935&(te=(te=16711935&H)+((X<<16)+X));j[q+$]=(4278255360&H)+te>>>0}}function ht(c,g){g.jd=c>>0&255,g.hd=c>>8&255,g.ud=c>>16&255}function ot(c,g,S,j,q,$){var H;for(H=0;H<j;++H){var X=g[S+H],te=X>>>8,ne=X,ue=255&(ue=(ue=X>>>16)+((c.jd<<24>>24)*(te<<24>>24)>>>5));ne=255&(ne=(ne=ne+((c.hd<<24>>24)*(te<<24>>24)>>>5))+((c.ud<<24>>24)*(ue<<24>>24)>>>5)),q[$+H]=(4278255360&X)+(ue<<16)+ne}}function at(c,g,S,j,q){y[g]=function($,H,X,te,ne,ue,_e,we,ve){for(te=_e;te<we;++te)for(_e=0;_e<ve;++_e)ne[ue++]=q(X[j($[H++])])},y[c]=function($,H,X,te,ne,ue,_e){var we=8>>$.b,ve=$.Ea,Ce=$.K[0],Ae=$.w;if(8>we)for($=(1<<$.b)-1,Ae=(1<<we)-1;H<X;++H){var he,pe=0;for(he=0;he<ve;++he)he&$||(pe=j(te[ne++])),ue[_e++]=q(Ce[pe&Ae]),pe>>=we}else y["VP8LMapColor"+S](te,ne,Ce,Ae,ue,_e,H,X,ve)}}function $e(c,g,S,j,q){for(S=g+S;g<S;){var $=c[g++];j[q++]=$>>16&255,j[q++]=$>>8&255,j[q++]=$>>0&255}}function Ct(c,g,S,j,q){for(S=g+S;g<S;){var $=c[g++];j[q++]=$>>16&255,j[q++]=$>>8&255,j[q++]=$>>0&255,j[q++]=$>>24&255}}function vt(c,g,S,j,q){for(S=g+S;g<S;){var $=(H=c[g++])>>16&240|H>>12&15,H=H>>0&240|H>>28&15;j[q++]=$,j[q++]=H}}function sn(c,g,S,j,q){for(S=g+S;g<S;){var $=(H=c[g++])>>16&248|H>>13&7,H=H>>5&224|H>>3&31;j[q++]=$,j[q++]=H}}function At(c,g,S,j,q){for(S=g+S;g<S;){var $=c[g++];j[q++]=$>>0&255,j[q++]=$>>8&255,j[q++]=$>>16&255}}function Bt(c,g,S,j,q,$){if($==0)for(S=g+S;g<S;)Ie(j,(($=c[g++])[0]>>24|$[1]>>8&65280|$[2]<<8&16711680|$[3]<<24)>>>0),q+=32;else r(j,q,c,g,S)}function Hr(c,g){y[g][0]=y[c+"0"],y[g][1]=y[c+"1"],y[g][2]=y[c+"2"],y[g][3]=y[c+"3"],y[g][4]=y[c+"4"],y[g][5]=y[c+"5"],y[g][6]=y[c+"6"],y[g][7]=y[c+"7"],y[g][8]=y[c+"8"],y[g][9]=y[c+"9"],y[g][10]=y[c+"10"],y[g][11]=y[c+"11"],y[g][12]=y[c+"12"],y[g][13]=y[c+"13"],y[g][14]=y[c+"0"],y[g][15]=y[c+"0"]}function Nt(c){return c==ug||c==cg||c==ef||c==hg}function ui(){this.eb=[],this.size=this.A=this.fb=0}function Ut(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Hn(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new ui,this.f.kb=new Ut,this.sd=null}function xn(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Lt(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function it(c){return alert("todo:WebPSamplerProcessPlane"),c.T}function Et(c,g){var S=c.T,j=g.ba.f.RGBA,q=j.eb,$=j.fb+c.ka*j.A,H=Ri[g.ba.S],X=c.y,te=c.O,ne=c.f,ue=c.N,_e=c.ea,we=c.W,ve=g.cc,Ce=g.dc,Ae=g.Mc,he=g.Nc,pe=c.ka,ke=c.ka+c.T,De=c.U,Pe=De+1>>1;for(pe==0?H(X,te,null,null,ne,ue,_e,we,ne,ue,_e,we,q,$,null,null,De):(H(g.ec,g.fc,X,te,ve,Ce,Ae,he,ne,ue,_e,we,q,$-j.A,q,$,De),++S);pe+2<ke;pe+=2)ve=ne,Ce=ue,Ae=_e,he=we,ue+=c.Rc,we+=c.Rc,$+=2*j.A,H(X,(te+=2*c.fa)-c.fa,X,te,ve,Ce,Ae,he,ne,ue,_e,we,q,$-j.A,q,$,De);return te+=c.fa,c.j+ke<c.o?(r(g.ec,g.fc,X,te,De),r(g.cc,g.dc,ne,ue,Pe),r(g.Mc,g.Nc,_e,we,Pe),S--):1&ke||H(X,te,null,null,ne,ue,_e,we,ne,ue,_e,we,q,$+j.A,null,null,De),S}function Lr(c,g,S){var j=c.F,q=[c.J];if(j!=null){var $=c.U,H=g.ba.S,X=H==Zd||H==ef;g=g.ba.f.RGBA;var te=[0],ne=c.ka;te[0]=c.T,c.Kb&&(ne==0?--te[0]:(--ne,q[0]-=c.width),c.j+c.ka+c.T==c.o&&(te[0]=c.o-c.j-ne));var ue=g.eb;ne=g.fb+ne*g.A,c=nn(j,q[0],c.width,$,te,ue,ne+(X?0:3),g.A),e(S==te),c&&Nt(H)&&Ci(ue,ne,X,$,te,g.A)}return 0}function Yt(c){var g=c.ma,S=g.ba.S,j=11>S,q=S==Xd||S==Jd||S==Zd||S==lg||S==12||Nt(S);if(g.memory=null,g.Ib=null,g.Jb=null,g.Nd=null,!Xc(g.Oa,c,q?11:12))return 0;if(q&&Nt(S)&&Oe(),c.da)alert("todo:use_scaling");else{if(j){if(g.Ib=it,c.Kb){if(S=c.U+1>>1,g.memory=s(c.U+2*S),g.memory==null)return 0;g.ec=g.memory,g.fc=0,g.cc=g.ec,g.dc=g.fc+c.U,g.Mc=g.cc,g.Nc=g.dc+S,g.Ib=Et,Oe()}}else alert("todo:EmitYUV");q&&(g.Jb=Lr,j&&ge())}if(j&&!_y){for(c=0;256>c;++c)oE[c]=89858*(c-128)+nf>>tf,uE[c]=-22014*(c-128)+nf,lE[c]=-45773*(c-128),aE[c]=113618*(c-128)+nf>>tf;for(c=oh;c<pg;++c)g=76283*(c-16)+nf>>tf,cE[c-oh]=zt(g,255),hE[c-oh]=zt(g+8>>4,15);_y=1}return 1}function fn(c){var g=c.ma,S=c.U,j=c.T;return e(!(1&c.ka)),0>=S||0>=j?0:(S=g.Ib(c,g),g.Jb!=null&&g.Jb(c,g,S),g.Dc+=S,1)}function ci(c){c.ma.memory=null}function Ze(c,g,S,j){return re(c,8)!=47?0:(g[0]=re(c,14)+1,S[0]=re(c,14)+1,j[0]=re(c,1),re(c,3)!=0?0:!c.h)}function Wr(c,g){if(4>c)return c+1;var S=c-2>>1;return(2+(1&c)<<S)+re(g,S)+1}function mr(c,g){return 120<g?g-120:1<=(S=((S=WA[g-1])>>4)*c+(8-(15&S)))?S:1;var S}function Fn(c,g,S){var j=G(S),q=c[g+=255&j].g-8;return 0<q&&(Z(S,S.u+8),j=G(S),g+=c[g].value,g+=j&(1<<q)-1),Z(S,S.u+c[g].g),c[g].value}function Tn(c,g,S){return S.g+=c.g,S.value+=c.value<<g>>>0,e(8>=S.g),c.g}function Sn(c,g,S){var j=c.xc;return e((g=j==0?0:c.vc[c.md*(S>>j)+(g>>j)])<c.Wb),c.Ya[g]}function Mn(c,g,S,j){var q=c.ab,$=c.c*g,H=c.C;g=H+g;var X=S,te=j;for(j=c.Ta,S=c.Ua;0<q--;){var ne=c.gc[q],ue=H,_e=g,we=X,ve=te,Ce=(te=j,X=S,ne.Ea);switch(e(ue<_e),e(_e<=ne.nc),ne.hc){case 2:$d(we,ve,(_e-ue)*Ce,te,X);break;case 0:var Ae=ue,he=_e,pe=te,ke=X,De=(Ke=ne).Ea;Ae==0&&(og(we,ve,null,null,1,pe,ke),tt(we,ve+1,0,0,De-1,pe,ke+1),ve+=De,ke+=De,++Ae);for(var Pe=1<<Ke.b,Xe=Pe-1,We=Re(De,Ke.b),ct=Ke.K,Ke=Ke.w+(Ae>>Ke.b)*We;Ae<he;){var Vt=ct,Ht=Ke,Ot=1;for(eh(we,ve,pe,ke-De,1,pe,ke);Ot<De;){var kt=(Ot&~Xe)+Pe;kt>De&&(kt=De),(0,ea[Vt[Ht++]>>8&15])(we,ve+ +Ot,pe,ke+Ot-De,kt-Ot,pe,ke+Ot),Ot=kt}ve+=De,ke+=De,++Ae&Xe||(Ke+=We)}_e!=ne.nc&&r(te,X-Ce,te,X+(_e-ue-1)*Ce,Ce);break;case 1:for(Ce=we,he=ve,De=(we=ne.Ea)-(ke=we&~(pe=(ve=1<<ne.b)-1)),Ae=Re(we,ne.b),Pe=ne.K,ne=ne.w+(ue>>ne.b)*Ae;ue<_e;){for(Xe=Pe,We=ne,ct=new Be,Ke=he+ke,Vt=he+we;he<Ke;)ht(Xe[We++],ct),gl(ct,Ce,he,ve,te,X),he+=ve,X+=ve;he<Vt&&(ht(Xe[We++],ct),gl(ct,Ce,he,De,te,X),he+=De,X+=De),++ue&pe||(ne+=Ae)}break;case 3:if(we==te&&ve==X&&0<ne.b){for(he=te,we=Ce=X+(_e-ue)*Ce-(ke=(_e-ue)*Re(ne.Ea,ne.b)),ve=te,pe=X,Ae=[],ke=(De=ke)-1;0<=ke;--ke)Ae[ke]=ve[pe+ke];for(ke=De-1;0<=ke;--ke)he[we+ke]=Ae[ke];Ti(ne,ue,_e,te,Ce,te,X)}else Ti(ne,ue,_e,we,ve,te,X)}X=j,te=S}te!=S&&r(j,S,X,te,$)}function Oo(c,g){var S=c.V,j=c.Ba+c.c*c.C,q=g-c.C;if(e(g<=c.l.o),e(16>=q),0<q){var $=c.l,H=c.Ta,X=c.Ua,te=$.width;if(Mn(c,q,S,j),q=X=[X],e((S=c.C)<(j=g)),e($.v<$.va),j>$.o&&(j=$.o),S<$.j){var ne=$.j-S;S=$.j,q[0]+=ne*te}if(S>=j?S=0:(q[0]+=4*$.v,$.ka=S-$.j,$.U=$.va-$.v,$.T=j-S,S=1),S){if(X=X[0],11>(S=c.ca).S){var ue=S.f.RGBA,_e=(j=S.S,q=$.U,$=$.T,ne=ue.eb,ue.A),we=$;for(ue=ue.fb+c.Ma*ue.A;0<we--;){var ve=H,Ce=X,Ae=q,he=ne,pe=ue;switch(j){case Yd:Yr(ve,Ce,Ae,he,pe);break;case Xd:Or(ve,Ce,Ae,he,pe);break;case ug:Or(ve,Ce,Ae,he,pe),Ci(he,pe,0,Ae,1,0);break;case cy:oo(ve,Ce,Ae,he,pe);break;case Jd:Bt(ve,Ce,Ae,he,pe,1);break;case cg:Bt(ve,Ce,Ae,he,pe,1),Ci(he,pe,0,Ae,1,0);break;case Zd:Bt(ve,Ce,Ae,he,pe,0);break;case ef:Bt(ve,Ce,Ae,he,pe,0),Ci(he,pe,1,Ae,1,0);break;case lg:ta(ve,Ce,Ae,he,pe);break;case hg:ta(ve,Ce,Ae,he,pe),tn(he,pe,Ae,1,0);break;case hy:so(ve,Ce,Ae,he,pe);break;default:e(0)}X+=te,ue+=_e}c.Ma+=$}else alert("todo:EmitRescaledRowsYUVA");e(c.Ma<=S.height)}}c.C=g,e(c.C<=c.i)}function qi(c){var g;if(0<c.ua)return 0;for(g=0;g<c.Wb;++g){var S=c.Ya[g].G,j=c.Ya[g].H;if(0<S[1][j[1]+0].g||0<S[2][j[2]+0].g||0<S[3][j[3]+0].g)return 0}return 1}function gr(c,g,S,j,q,$){if(c.Z!=0){var H=c.qd,X=c.rd;for(e(sa[c.Z]!=null);g<S;++g)sa[c.Z](H,X,j,q,j,q,$),H=j,X=q,q+=$;c.qd=H,c.rd=X}}function Gr(c,g){var S=c.l.ma,j=S.Z==0||S.Z==1?c.l.j:c.C;if(j=c.C<j?j:c.C,e(g<=c.l.o),g>j){var q=c.l.width,$=S.ca,H=S.tb+q*j,X=c.V,te=c.Ba+c.c*j,ne=c.gc;e(c.ab==1),e(ne[0].hc==3),Hd(ne[0],j,g,X,te,$,H),gr(S,j,g,$,H,q)}c.C=c.Ma=g}function Rr(c,g,S,j,q,$,H){var X=c.$/j,te=c.$%j,ne=c.m,ue=c.s,_e=S+c.$,we=_e;q=S+j*q;var ve=S+j*$,Ce=280+ue.ua,Ae=c.Pb?X:16777216,he=0<ue.ua?ue.Wa:null,pe=ue.wc,ke=_e<ve?Sn(ue,te,X):null;e(c.C<$),e(ve<=q);var De=!1;e:for(;;){for(;De||_e<ve;){var Pe=0;if(X>=Ae){var Xe=_e-S;e((Ae=c).Pb),Ae.wd=Ae.m,Ae.xd=Xe,0<Ae.s.ua&&Se(Ae.s.Wa,Ae.s.vb),Ae=X+KA}if(te&pe||(ke=Sn(ue,te,X)),e(ke!=null),ke.Qb&&(g[_e]=ke.qb,De=!0),!De)if(ae(ne),ke.jc){Pe=ne,Xe=g;var We=_e,ct=ke.pd[G(Pe)&sr-1];e(ke.jc),256>ct.g?(Z(Pe,Pe.u+ct.g),Xe[We]=ct.value,Pe=0):(Z(Pe,Pe.u+ct.g-256),e(256<=ct.value),Pe=ct.value),Pe==0&&(De=!0)}else Pe=Fn(ke.G[0],ke.H[0],ne);if(ne.h)break;if(De||256>Pe){if(!De)if(ke.nd)g[_e]=(ke.qb|Pe<<8)>>>0;else{if(ae(ne),De=Fn(ke.G[1],ke.H[1],ne),ae(ne),Xe=Fn(ke.G[2],ke.H[2],ne),We=Fn(ke.G[3],ke.H[3],ne),ne.h)break;g[_e]=(We<<24|De<<16|Pe<<8|Xe)>>>0}if(De=!1,++_e,++te>=j&&(te=0,++X,H!=null&&X<=$&&!(X%16)&&H(c,X),he!=null))for(;we<_e;)Pe=g[we++],he.X[(506832829*Pe&4294967295)>>>he.Mb]=Pe}else if(280>Pe){if(Pe=Wr(Pe-256,ne),Xe=Fn(ke.G[4],ke.H[4],ne),ae(ne),Xe=mr(j,Xe=Wr(Xe,ne)),ne.h)break;if(_e-S<Xe||q-_e<Pe)break e;for(We=0;We<Pe;++We)g[_e+We]=g[_e+We-Xe];for(_e+=Pe,te+=Pe;te>=j;)te-=j,++X,H!=null&&X<=$&&!(X%16)&&H(c,X);if(e(_e<=q),te&pe&&(ke=Sn(ue,te,X)),he!=null)for(;we<_e;)Pe=g[we++],he.X[(506832829*Pe&4294967295)>>>he.Mb]=Pe}else{if(!(Pe<Ce))break e;for(De=Pe-280,e(he!=null);we<_e;)Pe=g[we++],he.X[(506832829*Pe&4294967295)>>>he.Mb]=Pe;Pe=_e,e(!(De>>>(Xe=he).Xa)),g[Pe]=Xe.X[De],De=!0}De||e(ne.h==Y(ne))}if(c.Pb&&ne.h&&_e<q)e(c.m.h),c.a=5,c.m=c.wd,c.$=c.xd,0<c.s.ua&&Se(c.s.vb,c.s.Wa);else{if(ne.h)break e;H!=null&&H(c,X>$?$:X),c.a=0,c.$=_e-S}return 1}return c.a=3,0}function jr(c){e(c!=null),c.vc=null,c.yc=null,c.Ya=null;var g=c.Wa;g!=null&&(g.X=null),c.vb=null,e(c!=null)}function kn(){var c=new yu;return c==null?null:(c.a=0,c.xb=py,Hr("Predictor","VP8LPredictors"),Hr("Predictor","VP8LPredictors_C"),Hr("PredictorAdd","VP8LPredictorsAdd"),Hr("PredictorAdd","VP8LPredictorsAdd_C"),$d=lt,gl=ot,Yr=$e,Or=Ct,ta=vt,so=sn,oo=At,y.VP8LMapColor32b=Su,y.VP8LMapColor8b=Wd,c)}function hi(c,g,S,j,q){var $=1,H=[c],X=[g],te=j.m,ne=j.s,ue=null,_e=0;e:for(;;){if(S)for(;$&&re(te,1);){var we=H,ve=X,Ce=j,Ae=1,he=Ce.m,pe=Ce.gc[Ce.ab],ke=re(he,2);if(Ce.Oc&1<<ke)$=0;else{switch(Ce.Oc|=1<<ke,pe.hc=ke,pe.Ea=we[0],pe.nc=ve[0],pe.K=[null],++Ce.ab,e(4>=Ce.ab),ke){case 0:case 1:pe.b=re(he,3)+2,Ae=hi(Re(pe.Ea,pe.b),Re(pe.nc,pe.b),0,Ce,pe.K),pe.K=pe.K[0];break;case 3:var De,Pe=re(he,8)+1,Xe=16<Pe?0:4<Pe?1:2<Pe?2:3;if(we[0]=Re(pe.Ea,Xe),pe.b=Xe,De=Ae=hi(Pe,1,0,Ce,pe.K)){var We,ct=Pe,Ke=pe,Vt=1<<(8>>Ke.b),Ht=s(Vt);if(Ht==null)De=0;else{var Ot=Ke.K[0],kt=Ke.w;for(Ht[0]=Ke.K[0][0],We=1;We<1*ct;++We)Ht[We]=Te(Ot[kt+We],Ht[We-1]);for(;We<4*Vt;++We)Ht[We]=0;Ke.K[0]=null,Ke.K[0]=Ht,De=1}}Ae=De;break;case 2:break;default:e(0)}$=Ae}}if(H=H[0],X=X[0],$&&re(te,1)&&!($=1<=(_e=re(te,4))&&11>=_e)){j.a=3;break e}var Zt;if(Zt=$)t:{var Xt,St,Un,Xr=j,Vn=H,Jr=X,Wt=_e,gi=S,vi=Xr.m,Xn=Xr.s,or=[null],Mr=1,ji=0,Is=GA[Wt];n:for(;;){if(gi&&re(vi,1)){var Jn=re(vi,3)+2,co=Re(Vn,Jn),bl=Re(Jr,Jn),Tu=co*bl;if(!hi(co,bl,0,Xr,or))break n;for(or=or[0],Xn.xc=Jn,Xt=0;Xt<Tu;++Xt){var oa=or[Xt]>>8&65535;or[Xt]=oa,oa>=Mr&&(Mr=oa+1)}}if(vi.h)break n;for(St=0;5>St;++St){var En=dy[St];!St&&0<Wt&&(En+=1<<Wt),ji<En&&(ji=En)}var mg=o(Mr*Is,I),xy=Mr,Sy=o(xy,V);if(Sy==null)var sf=null;else e(65536>=xy),sf=Sy;var ah=s(ji);if(sf==null||ah==null||mg==null){Xr.a=1;break n}var of=mg;for(Xt=Un=0;Xt<Mr;++Xt){var Ji=sf[Xt],ku=Ji.G,Pu=Ji.H,Ay=0,af=1,Ey=0;for(St=0;5>St;++St){En=dy[St],ku[St]=of,Pu[St]=Un,!St&&0<Wt&&(En+=1<<Wt);i:{var lf,gg=En,uf=Xr,lh=ah,pE=of,mE=Un,vg=0,aa=uf.m,gE=re(aa,1);if(i(lh,0,0,gg),gE){var vE=re(aa,1)+1,yE=re(aa,1),Ny=re(aa,yE==0?1:8);lh[Ny]=1,vE==2&&(lh[Ny=re(aa,8)]=1);var cf=1}else{var Iy=s(19),Ty=re(aa,4)+4;if(19<Ty){uf.a=3;var hf=0;break i}for(lf=0;lf<Ty;++lf)Iy[HA[lf]]=re(aa,3);var yg=void 0,uh=void 0,ky=uf,_E=Iy,df=gg,Py=lh,_g=0,la=ky.m,Cy=8,Ly=o(128,I);r:for(;A(Ly,0,7,_E,19);){if(re(la,1)){var wE=2+2*re(la,3);if((yg=2+re(la,wE))>df)break r}else yg=df;for(uh=0;uh<df&&yg--;){ae(la);var Ry=Ly[0+(127&G(la))];Z(la,la.u+Ry.g);var Cu=Ry.value;if(16>Cu)Py[uh++]=Cu,Cu!=0&&(Cy=Cu);else{var bE=Cu==16,jy=Cu-16,xE=zA[jy],Dy=re(la,qA[jy])+xE;if(uh+Dy>df)break r;for(var SE=bE?Cy:0;0<Dy--;)Py[uh++]=SE}}_g=1;break r}_g||(ky.a=3),cf=_g}(cf=cf&&!aa.h)&&(vg=A(pE,mE,8,lh,gg)),cf&&vg!=0?hf=vg:(uf.a=3,hf=0)}if(hf==0)break n;if(af&&$A[St]==1&&(af=of[Un].g==0),Ay+=of[Un].g,Un+=hf,3>=St){var ch,wg=ah[0];for(ch=1;ch<En;++ch)ah[ch]>wg&&(wg=ah[ch]);Ey+=wg}}if(Ji.nd=af,Ji.Qb=0,af&&(Ji.qb=(ku[3][Pu[3]+0].value<<24|ku[1][Pu[1]+0].value<<16|ku[2][Pu[2]+0].value)>>>0,Ay==0&&256>ku[0][Pu[0]+0].value&&(Ji.Qb=1,Ji.qb+=ku[0][Pu[0]+0].value<<8)),Ji.jc=!Ji.Qb&&6>Ey,Ji.jc){var ff,ho=Ji;for(ff=0;ff<sr;++ff){var ua=ff,ca=ho.pd[ua],pf=ho.G[0][ho.H[0]+ua];256<=pf.value?(ca.g=pf.g+256,ca.value=pf.value):(ca.g=0,ca.value=0,ua>>=Tn(pf,8,ca),ua>>=Tn(ho.G[1][ho.H[1]+ua],16,ca),ua>>=Tn(ho.G[2][ho.H[2]+ua],0,ca),Tn(ho.G[3][ho.H[3]+ua],24,ca))}}}Xn.vc=or,Xn.Wb=Mr,Xn.Ya=sf,Xn.yc=mg,Zt=1;break t}Zt=0}if(!($=Zt)){j.a=3;break e}if(0<_e){if(ne.ua=1<<_e,!Ye(ne.Wa,_e)){j.a=1,$=0;break e}}else ne.ua=0;var bg=j,Oy=H,AE=X,xg=bg.s,Sg=xg.xc;if(bg.c=Oy,bg.i=AE,xg.md=Re(Oy,Sg),xg.wc=Sg==0?-1:(1<<Sg)-1,S){j.xb=tE;break e}if((ue=s(H*X))==null){j.a=1,$=0;break e}$=($=Rr(j,ue,0,H,X,X,null))&&!te.h;break e}return $?(q!=null?q[0]=ue:(e(ue==null),e(S)),j.$=0,S||jr(ne)):jr(ne),$}function ms(c,g){var S=c.c*c.i,j=S+g+16*g;return e(c.c<=g),c.V=s(j),c.V==null?(c.Ta=null,c.Ua=0,c.a=1,0):(c.Ta=c.V,c.Ua=c.Ba+S+g,1)}function gs(c,g){var S=c.C,j=g-S,q=c.V,$=c.Ba+c.c*S;for(e(g<=c.l.o);0<j;){var H=16<j?16:j,X=c.l.ma,te=c.l.width,ne=te*H,ue=X.ca,_e=X.tb+te*S,we=c.Ta,ve=c.Ua;Mn(c,H,q,$),Cn(we,ve,ue,_e,ne),gr(X,S,S+H,ue,_e,te),j-=H,q+=H*c.c,S+=H}e(S==g),c.C=c.Ma=g}function vs(){this.ub=this.yd=this.td=this.Rb=0}function Ks(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Qs(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function lu(){this.Yb=function(){var c=[];return function g(S,j,q){for(var $=q[j],H=0;H<$&&(S.push(q.length>j+1?[]:0),!(q.length<j+1));H++)g(S[H],j+1,q)}(c,0,[3,11]),c}()}function Fo(){this.jb=s(3),this.Wc=a([4,8],lu),this.Xc=a([4,17],lu)}function uu(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function ys(){this.ld=this.La=this.dd=this.tc=0}function _s(){this.Na=this.la=0}function zi(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Ys(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Gc(){this.uc=this.M=this.Nb=0,this.wa=Array(new ys),this.Y=0,this.ya=Array(new Ys),this.aa=0,this.l=new Xs}function nl(){this.y=s(16),this.f=s(8),this.ea=s(8)}function cu(){this.cb=this.a=0,this.sc="",this.m=new xe,this.Od=new vs,this.Kc=new Ks,this.ed=new uu,this.Qa=new Qs,this.Ic=this.$c=this.Aa=0,this.D=new Gc,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,xe),this.ia=0,this.pb=o(4,zi),this.Pa=new Fo,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new nl),this.Hd=0,this.rb=Array(new _s),this.sb=0,this.wa=Array(new ys),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Ys),this.L=this.aa=0,this.gd=a([4,2],ys),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Xs(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function rl(){var c=new cu;return c!=null&&(c.a=0,c.sc="OK",c.cb=0,c.Xb=0,sh||(sh=hu)),c}function on(c,g,S){return c.a==0&&(c.a=g,c.sc=S,c.cb=0),0}function il(c,g,S){return 3<=S&&c[g+0]==157&&c[g+1]==1&&c[g+2]==42}function sl(c,g){if(c==null)return 0;if(c.a=0,c.sc="OK",g==null)return on(c,2,"null VP8Io passed to VP8GetHeaders()");var S=g.data,j=g.w,q=g.ha;if(4>q)return on(c,7,"Truncated header.");var $=S[j+0]|S[j+1]<<8|S[j+2]<<16,H=c.Od;if(H.Rb=!(1&$),H.td=$>>1&7,H.yd=$>>4&1,H.ub=$>>5,3<H.td)return on(c,3,"Incorrect keyframe parameters.");if(!H.yd)return on(c,4,"Frame not displayable.");j+=3,q-=3;var X=c.Kc;if(H.Rb){if(7>q)return on(c,7,"cannot parse picture header");if(!il(S,j,q))return on(c,3,"Bad code word");X.c=16383&(S[j+4]<<8|S[j+3]),X.Td=S[j+4]>>6,X.i=16383&(S[j+6]<<8|S[j+5]),X.Ud=S[j+6]>>6,j+=7,q-=7,c.za=X.c+15>>4,c.Ub=X.i+15>>4,g.width=X.c,g.height=X.i,g.Da=0,g.j=0,g.v=0,g.va=g.width,g.o=g.height,g.da=0,g.ib=g.width,g.hb=g.height,g.U=g.width,g.T=g.height,i(($=c.Pa).jb,0,255,$.jb.length),e(($=c.Qa)!=null),$.Cb=0,$.Bb=0,$.Fb=1,i($.Zb,0,0,$.Zb.length),i($.Lb,0,0,$.Lb)}if(H.ub>q)return on(c,7,"bad partition length");J($=c.m,S,j,H.ub),j+=H.ub,q-=H.ub,H.Rb&&(X.Ld=ce($),X.Kd=ce($)),X=c.Qa;var te,ne=c.Pa;if(e($!=null),e(X!=null),X.Cb=ce($),X.Cb){if(X.Bb=ce($),ce($)){for(X.Fb=ce($),te=0;4>te;++te)X.Zb[te]=ce($)?U($,7):0;for(te=0;4>te;++te)X.Lb[te]=ce($)?U($,6):0}if(X.Bb)for(te=0;3>te;++te)ne.jb[te]=ce($)?O($,8):255}else X.Bb=0;if($.Ka)return on(c,3,"cannot parse segment header");if((X=c.ed).zd=ce($),X.Tb=O($,6),X.wb=O($,3),X.Pc=ce($),X.Pc&&ce($)){for(ne=0;4>ne;++ne)ce($)&&(X.vd[ne]=U($,6));for(ne=0;4>ne;++ne)ce($)&&(X.od[ne]=U($,6))}if(c.L=X.Tb==0?0:X.zd?1:2,$.Ka)return on(c,3,"cannot parse filter header");var ue=q;if(q=te=j,j=te+ue,X=ue,c.Xb=(1<<O(c.m,2))-1,ue<3*(ne=c.Xb))S=7;else{for(te+=3*ne,X-=3*ne,ue=0;ue<ne;++ue){var _e=S[q+0]|S[q+1]<<8|S[q+2]<<16;_e>X&&(_e=X),J(c.Jc[+ue],S,te,_e),te+=_e,X-=_e,q+=3}J(c.Jc[+ne],S,te,X),S=te<j?0:5}if(S!=0)return on(c,S,"cannot parse partitions");for(S=O(te=c.m,7),q=ce(te)?U(te,4):0,j=ce(te)?U(te,4):0,X=ce(te)?U(te,4):0,ne=ce(te)?U(te,4):0,te=ce(te)?U(te,4):0,ue=c.Qa,_e=0;4>_e;++_e){if(ue.Cb){var we=ue.Zb[_e];ue.Fb||(we+=S)}else{if(0<_e){c.pb[_e]=c.pb[0];continue}we=S}var ve=c.pb[_e];ve.Sc[0]=dg[zt(we+q,127)],ve.Sc[1]=fg[zt(we+0,127)],ve.Eb[0]=2*dg[zt(we+j,127)],ve.Eb[1]=101581*fg[zt(we+X,127)]>>16,8>ve.Eb[1]&&(ve.Eb[1]=8),ve.Qc[0]=dg[zt(we+ne,117)],ve.Qc[1]=fg[zt(we+te,127)],ve.lc=we+te}if(!H.Rb)return on(c,4,"Not a key frame.");for(ce($),H=c.Pa,S=0;4>S;++S){for(q=0;8>q;++q)for(j=0;3>j;++j)for(X=0;11>X;++X)ne=fe($,ZA[S][q][j][X])?O($,8):XA[S][q][j][X],H.Wc[S][q].Yb[j][X]=ne;for(q=0;17>q;++q)H.Xc[S][q]=H.Wc[S][eE[q]]}return c.kc=ce($),c.kc&&(c.Bd=O($,8)),c.cb=1}function hu(c,g,S,j,q,$,H){var X=g[q].Yb[S];for(S=0;16>q;++q){if(!fe(c,X[S+0]))return q;for(;!fe(c,X[S+1]);)if(X=g[++q].Yb[0],S=0,q==16)return 16;var te=g[q+1].Yb;if(fe(c,X[S+2])){var ne=c,ue=0;if(fe(ne,(we=X)[(_e=S)+3]))if(fe(ne,we[_e+6])){for(X=0,_e=2*(ue=fe(ne,we[_e+8]))+(we=fe(ne,we[_e+9+ue])),ue=0,we=QA[_e];we[X];++X)ue+=ue+fe(ne,we[X]);ue+=3+(8<<_e)}else fe(ne,we[_e+7])?(ue=7+2*fe(ne,165),ue+=fe(ne,145)):ue=5+fe(ne,159);else ue=fe(ne,we[_e+4])?3+fe(ne,we[_e+5]):2;X=te[2]}else ue=1,X=te[1];te=H+YA[q],0>(ne=c).b&&ie(ne);var _e,we=ne.b,ve=(_e=ne.Ca>>1)-(ne.I>>we)>>31;--ne.b,ne.Ca+=ve,ne.Ca|=1,ne.I-=(_e+1&ve)<<we,$[te]=((ue^ve)-ve)*j[(0<q)+0]}return 16}function ol(c){var g=c.rb[c.sb-1];g.la=0,g.Na=0,i(c.zc,0,0,c.zc.length),c.ja=0}function du(c,g){if(c==null)return 0;if(g==null)return on(c,2,"NULL VP8Io parameter in VP8Decode().");if(!c.cb&&!sl(c,g))return 0;if(e(c.cb),g.ac==null||g.ac(g)){g.ob&&(c.L=0);var S=rf[c.L];if(c.L==2?(c.yb=0,c.zb=0):(c.yb=g.v-S>>4,c.zb=g.j-S>>4,0>c.yb&&(c.yb=0),0>c.zb&&(c.zb=0)),c.Va=g.o+15+S>>4,c.Hb=g.va+15+S>>4,c.Hb>c.za&&(c.Hb=c.za),c.Va>c.Ub&&(c.Va=c.Ub),0<c.L){var j=c.ed;for(S=0;4>S;++S){var q;if(c.Qa.Cb){var $=c.Qa.Lb[S];c.Qa.Fb||($+=j.Tb)}else $=j.Tb;for(q=0;1>=q;++q){var H=c.gd[S][q],X=$;if(j.Pc&&(X+=j.vd[0],q&&(X+=j.od[0])),0<(X=0>X?0:63<X?63:X)){var te=X;0<j.wb&&(te=4<j.wb?te>>2:te>>1)>9-j.wb&&(te=9-j.wb),1>te&&(te=1),H.dd=te,H.tc=2*X+te,H.ld=40<=X?2:15<=X?1:0}else H.tc=0;H.La=q}}}S=0}else on(c,6,"Frame setup failed"),S=c.a;if(S=S==0){if(S){c.$c=0,0<c.Aa||(c.Ic=fE);e:{S=c.Ic,j=4*(te=c.za);var ne=32*te,ue=te+1,_e=0<c.L?te*(0<c.Aa?2:1):0,we=(c.Aa==2?2:1)*te;if((H=j+832+(q=3*(16*S+rf[c.L])/2*ne)+($=c.Fa!=null&&0<c.Fa.length?c.Kc.c*c.Kc.i:0))!=H)S=0;else{if(H>c.Vb){if(c.Vb=0,c.Ec=s(H),c.Fc=0,c.Ec==null){S=on(c,1,"no memory during frame initialization.");break e}c.Vb=H}H=c.Ec,X=c.Fc,c.Ac=H,c.Bc=X,X+=j,c.Gd=o(ne,nl),c.Hd=0,c.rb=o(ue+1,_s),c.sb=1,c.wa=_e?o(_e,ys):null,c.Y=0,c.D.Nb=0,c.D.wa=c.wa,c.D.Y=c.Y,0<c.Aa&&(c.D.Y+=te),e(!0),c.oc=H,c.pc=X,X+=832,c.ya=o(we,Ys),c.aa=0,c.D.ya=c.ya,c.D.aa=c.aa,c.Aa==2&&(c.D.aa+=te),c.R=16*te,c.B=8*te,te=(ne=rf[c.L])*c.R,ne=ne/2*c.B,c.sa=H,c.ta=X+te,c.qa=c.sa,c.ra=c.ta+16*S*c.R+ne,c.Ha=c.qa,c.Ia=c.ra+8*S*c.B+ne,c.$c=0,X+=q,c.mb=$?H:null,c.nb=$?X:null,e(X+$<=c.Fc+c.Vb),ol(c),i(c.Ac,c.Bc,0,j),S=1}}if(S){if(g.ka=0,g.y=c.sa,g.O=c.ta,g.f=c.qa,g.N=c.ra,g.ea=c.Ha,g.Vd=c.Ia,g.fa=c.R,g.Rc=c.B,g.F=null,g.J=0,!Kd){for(S=-255;255>=S;++S)Gn[255+S]=0>S?-S:S;for(S=-1020;1020>=S;++S)lo[1020+S]=-128>S?-128:127<S?127:S;for(S=-112;112>=S;++S)ih[112+S]=-16>S?-16:15<S?15:S;for(S=-255;510>=S;++S)Iu[255+S]=0>S?0:255<S?255:S;Kd=1}Au=eo,ao=Uo,th=al,Fr=$t,ki=Zs,Pn=Js,Eu=Wo,Gd=Ki,nh=Ko,vl=ml,yl=Go,na=no,_l=Qo,Nu=Ss,wl=to,ra=pi,rh=Wn,Pi=vu,Xi[0]=Ii,Xi[1]=Kc,Xi[2]=bs,Xi[3]=Yc,Xi[4]=mu,Xi[5]=qo,Xi[6]=di,Xi[7]=ul,Xi[8]=$o,Xi[9]=zo,ia[0]=ws,ia[1]=Qc,ia[2]=Hi,ia[3]=Vo,ia[4]=an,ia[5]=pu,ia[6]=ll,uo[0]=Gi,uo[1]=fu,uo[2]=gu,uo[3]=Wi,uo[4]=qt,uo[5]=cl,uo[6]=hl,S=1}else S=0}S&&(S=function(ve,Ce){for(ve.M=0;ve.M<ve.Va;++ve.M){var Ae,he=ve.Jc[ve.M&ve.Xb],pe=ve.m,ke=ve;for(Ae=0;Ae<ke.za;++Ae){var De=pe,Pe=ke,Xe=Pe.Ac,We=Pe.Bc+4*Ae,ct=Pe.zc,Ke=Pe.ya[Pe.aa+Ae];if(Pe.Qa.Bb?Ke.$b=fe(De,Pe.Pa.jb[0])?2+fe(De,Pe.Pa.jb[2]):fe(De,Pe.Pa.jb[1]):Ke.$b=0,Pe.kc&&(Ke.Ad=fe(De,Pe.Bd)),Ke.Za=!fe(De,145)+0,Ke.Za){var Vt=Ke.Ob,Ht=0;for(Pe=0;4>Pe;++Pe){var Ot,kt=ct[0+Pe];for(Ot=0;4>Ot;++Ot){kt=JA[Xe[We+Ot]][kt];for(var Zt=fy[fe(De,kt[0])];0<Zt;)Zt=fy[2*Zt+fe(De,kt[Zt])];kt=-Zt,Xe[We+Ot]=kt}r(Vt,Ht,Xe,We,4),Ht+=4,ct[0+Pe]=kt}}else kt=fe(De,156)?fe(De,128)?1:3:fe(De,163)?2:0,Ke.Ob[0]=kt,i(Xe,We,kt,4),i(ct,0,kt,4);Ke.Dd=fe(De,142)?fe(De,114)?fe(De,183)?1:3:2:0}if(ke.m.Ka)return on(ve,7,"Premature end-of-partition0 encountered.");for(;ve.ja<ve.za;++ve.ja){if(ke=he,De=(pe=ve).rb[pe.sb-1],Xe=pe.rb[pe.sb+pe.ja],Ae=pe.ya[pe.aa+pe.ja],We=pe.kc?Ae.Ad:0)De.la=Xe.la=0,Ae.Za||(De.Na=Xe.Na=0),Ae.Hc=0,Ae.Gc=0,Ae.ia=0;else{var Xt,St;if(De=Xe,Xe=ke,We=pe.Pa.Xc,ct=pe.ya[pe.aa+pe.ja],Ke=pe.pb[ct.$b],Pe=ct.ad,Vt=0,Ht=pe.rb[pe.sb-1],kt=Ot=0,i(Pe,Vt,0,384),ct.Za)var Un=0,Xr=We[3];else{Zt=s(16);var Vn=De.Na+Ht.Na;if(Vn=sh(Xe,We[1],Vn,Ke.Eb,0,Zt,0),De.Na=Ht.Na=(0<Vn)+0,1<Vn)Au(Zt,0,Pe,Vt);else{var Jr=Zt[0]+3>>3;for(Zt=0;256>Zt;Zt+=16)Pe[Vt+Zt]=Jr}Un=1,Xr=We[0]}var Wt=15&De.la,gi=15&Ht.la;for(Zt=0;4>Zt;++Zt){var vi=1&gi;for(Jr=St=0;4>Jr;++Jr)Wt=Wt>>1|(vi=(Vn=sh(Xe,Xr,Vn=vi+(1&Wt),Ke.Sc,Un,Pe,Vt))>Un)<<7,St=St<<2|(3<Vn?3:1<Vn?2:Pe[Vt+0]!=0),Vt+=16;Wt>>=4,gi=gi>>1|vi<<7,Ot=(Ot<<8|St)>>>0}for(Xr=Wt,Un=gi>>4,Xt=0;4>Xt;Xt+=2){for(St=0,Wt=De.la>>4+Xt,gi=Ht.la>>4+Xt,Zt=0;2>Zt;++Zt){for(vi=1&gi,Jr=0;2>Jr;++Jr)Vn=vi+(1&Wt),Wt=Wt>>1|(vi=0<(Vn=sh(Xe,We[2],Vn,Ke.Qc,0,Pe,Vt)))<<3,St=St<<2|(3<Vn?3:1<Vn?2:Pe[Vt+0]!=0),Vt+=16;Wt>>=2,gi=gi>>1|vi<<5}kt|=St<<4*Xt,Xr|=Wt<<4<<Xt,Un|=(240&gi)<<Xt}De.la=Xr,Ht.la=Un,ct.Hc=Ot,ct.Gc=kt,ct.ia=43690&kt?0:Ke.ia,We=!(Ot|kt)}if(0<pe.L&&(pe.wa[pe.Y+pe.ja]=pe.gd[Ae.$b][Ae.Za],pe.wa[pe.Y+pe.ja].La|=!We),ke.Ka)return on(ve,7,"Premature end-of-file encountered.")}if(ol(ve),pe=Ce,ke=1,Ae=(he=ve).D,De=0<he.L&&he.M>=he.zb&&he.M<=he.Va,he.Aa==0)e:{if(Ae.M=he.M,Ae.uc=De,Es(he,Ae),ke=1,Ae=(St=he.D).Nb,De=(kt=rf[he.L])*he.R,Xe=kt/2*he.B,Zt=16*Ae*he.R,Jr=8*Ae*he.B,We=he.sa,ct=he.ta-De+Zt,Ke=he.qa,Pe=he.ra-Xe+Jr,Vt=he.Ha,Ht=he.Ia-Xe+Jr,gi=(Wt=St.M)==0,Ot=Wt>=he.Va-1,he.Aa==2&&Es(he,St),St.uc)for(vi=(Vn=he).D.M,e(Vn.D.uc),St=Vn.yb;St<Vn.Hb;++St){Un=St,Xr=vi;var Xn=(or=(En=Vn).D).Nb;Xt=En.R;var or=or.wa[or.Y+Un],Mr=En.sa,ji=En.ta+16*Xn*Xt+16*Un,Is=or.dd,Jn=or.tc;if(Jn!=0)if(e(3<=Jn),En.L==1)0<Un&&ra(Mr,ji,Xt,Jn+4),or.La&&Pi(Mr,ji,Xt,Jn),0<Xr&&wl(Mr,ji,Xt,Jn+4),or.La&&rh(Mr,ji,Xt,Jn);else{var co=En.B,bl=En.qa,Tu=En.ra+8*Xn*co+8*Un,oa=En.Ha,En=En.Ia+8*Xn*co+8*Un;Xn=or.ld,0<Un&&(Gd(Mr,ji,Xt,Jn+4,Is,Xn),vl(bl,Tu,oa,En,co,Jn+4,Is,Xn)),or.La&&(na(Mr,ji,Xt,Jn,Is,Xn),Nu(bl,Tu,oa,En,co,Jn,Is,Xn)),0<Xr&&(Eu(Mr,ji,Xt,Jn+4,Is,Xn),nh(bl,Tu,oa,En,co,Jn+4,Is,Xn)),or.La&&(yl(Mr,ji,Xt,Jn,Is,Xn),_l(bl,Tu,oa,En,co,Jn,Is,Xn))}}if(he.ia&&alert("todo:DitherRow"),pe.put!=null){if(St=16*Wt,Wt=16*(Wt+1),gi?(pe.y=he.sa,pe.O=he.ta+Zt,pe.f=he.qa,pe.N=he.ra+Jr,pe.ea=he.Ha,pe.W=he.Ia+Jr):(St-=kt,pe.y=We,pe.O=ct,pe.f=Ke,pe.N=Pe,pe.ea=Vt,pe.W=Ht),Ot||(Wt-=kt),Wt>pe.o&&(Wt=pe.o),pe.F=null,pe.J=null,he.Fa!=null&&0<he.Fa.length&&St<Wt&&(pe.J=Zo(he,pe,St,Wt-St),pe.F=he.mb,pe.F==null&&pe.F.length==0)){ke=on(he,3,"Could not decode alpha data.");break e}St<pe.j&&(kt=pe.j-St,St=pe.j,e(!(1&kt)),pe.O+=he.R*kt,pe.N+=he.B*(kt>>1),pe.W+=he.B*(kt>>1),pe.F!=null&&(pe.J+=pe.width*kt)),St<Wt&&(pe.O+=pe.v,pe.N+=pe.v>>1,pe.W+=pe.v>>1,pe.F!=null&&(pe.J+=pe.v),pe.ka=St-pe.j,pe.U=pe.va-pe.v,pe.T=Wt-St,ke=pe.put(pe))}Ae+1!=he.Ic||Ot||(r(he.sa,he.ta-De,We,ct+16*he.R,De),r(he.qa,he.ra-Xe,Ke,Pe+8*he.B,Xe),r(he.Ha,he.Ia-Xe,Vt,Ht+8*he.B,Xe))}if(!ke)return on(ve,6,"Output aborted.")}return 1}(c,g)),g.bc!=null&&g.bc(g),S&=1}return S?(c.cb=0,S):0}function Kr(c,g,S,j,q){q=c[g+S+32*j]+(q>>3),c[g+S+32*j]=-256&q?0>q?0:255:q}function Mo(c,g,S,j,q,$){Kr(c,g,0,S,j+q),Kr(c,g,1,S,j+$),Kr(c,g,2,S,j-$),Kr(c,g,3,S,j-q)}function An(c){return(20091*c>>16)+c}function Dr(c,g,S,j){var q,$=0,H=s(16);for(q=0;4>q;++q){var X=c[g+0]+c[g+8],te=c[g+0]-c[g+8],ne=(35468*c[g+4]>>16)-An(c[g+12]),ue=An(c[g+4])+(35468*c[g+12]>>16);H[$+0]=X+ue,H[$+1]=te+ne,H[$+2]=te-ne,H[$+3]=X-ue,$+=4,g++}for(q=$=0;4>q;++q)X=(c=H[$+0]+4)+H[$+8],te=c-H[$+8],ne=(35468*H[$+4]>>16)-An(H[$+12]),Kr(S,j,0,0,X+(ue=An(H[$+4])+(35468*H[$+12]>>16))),Kr(S,j,1,0,te+ne),Kr(S,j,2,0,te-ne),Kr(S,j,3,0,X-ue),$++,j+=32}function Js(c,g,S,j){var q=c[g+0]+4,$=35468*c[g+4]>>16,H=An(c[g+4]),X=35468*c[g+1]>>16;Mo(S,j,0,q+H,c=An(c[g+1]),X),Mo(S,j,1,q+$,c,X),Mo(S,j,2,q-$,c,X),Mo(S,j,3,q-H,c,X)}function Uo(c,g,S,j,q){Dr(c,g,S,j),q&&Dr(c,g+16,S,j+4)}function al(c,g,S,j){ao(c,g+0,S,j,1),ao(c,g+32,S,j+128,1)}function $t(c,g,S,j){var q;for(c=c[g+0]+4,q=0;4>q;++q)for(g=0;4>g;++g)Kr(S,j,g,q,c)}function Zs(c,g,S,j){c[g+0]&&Fr(c,g+0,S,j),c[g+16]&&Fr(c,g+16,S,j+4),c[g+32]&&Fr(c,g+32,S,j+128),c[g+48]&&Fr(c,g+48,S,j+128+4)}function eo(c,g,S,j){var q,$=s(16);for(q=0;4>q;++q){var H=c[g+0+q]+c[g+12+q],X=c[g+4+q]+c[g+8+q],te=c[g+4+q]-c[g+8+q],ne=c[g+0+q]-c[g+12+q];$[0+q]=H+X,$[8+q]=H-X,$[4+q]=ne+te,$[12+q]=ne-te}for(q=0;4>q;++q)H=(c=$[0+4*q]+3)+$[3+4*q],X=$[1+4*q]+$[2+4*q],te=$[1+4*q]-$[2+4*q],ne=c-$[3+4*q],S[j+0]=H+X>>3,S[j+16]=ne+te>>3,S[j+32]=H-X>>3,S[j+48]=ne-te>>3,j+=64}function $i(c,g,S){var j,q=g-32,$=mi,H=255-c[q-1];for(j=0;j<S;++j){var X,te=$,ne=H+c[g-1];for(X=0;X<S;++X)c[g+X]=te[ne+c[q+X]];g+=32}}function Kc(c,g){$i(c,g,4)}function fu(c,g){$i(c,g,8)}function Qc(c,g){$i(c,g,16)}function Hi(c,g){var S;for(S=0;16>S;++S)r(c,g+32*S,c,g-32,16)}function Vo(c,g){var S;for(S=16;0<S;--S)i(c,g,c[g-1],16),g+=32}function Bo(c,g,S){var j;for(j=0;16>j;++j)i(g,S+32*j,c,16)}function ws(c,g){var S,j=16;for(S=0;16>S;++S)j+=c[g-1+32*S]+c[g+S-32];Bo(j>>5,c,g)}function an(c,g){var S,j=8;for(S=0;16>S;++S)j+=c[g-1+32*S];Bo(j>>4,c,g)}function pu(c,g){var S,j=8;for(S=0;16>S;++S)j+=c[g+S-32];Bo(j>>4,c,g)}function ll(c,g){Bo(128,c,g)}function pt(c,g,S){return c+2*g+S+2>>2}function bs(c,g){var S,j=g-32;for(j=new Uint8Array([pt(c[j-1],c[j+0],c[j+1]),pt(c[j+0],c[j+1],c[j+2]),pt(c[j+1],c[j+2],c[j+3]),pt(c[j+2],c[j+3],c[j+4])]),S=0;4>S;++S)r(c,g+32*S,j,0,j.length)}function Yc(c,g){var S=c[g-1],j=c[g-1+32],q=c[g-1+64],$=c[g-1+96];Ie(c,g+0,16843009*pt(c[g-1-32],S,j)),Ie(c,g+32,16843009*pt(S,j,q)),Ie(c,g+64,16843009*pt(j,q,$)),Ie(c,g+96,16843009*pt(q,$,$))}function Ii(c,g){var S,j=4;for(S=0;4>S;++S)j+=c[g+S-32]+c[g-1+32*S];for(j>>=3,S=0;4>S;++S)i(c,g+32*S,j,4)}function mu(c,g){var S=c[g-1+0],j=c[g-1+32],q=c[g-1+64],$=c[g-1-32],H=c[g+0-32],X=c[g+1-32],te=c[g+2-32],ne=c[g+3-32];c[g+0+96]=pt(j,q,c[g-1+96]),c[g+1+96]=c[g+0+64]=pt(S,j,q),c[g+2+96]=c[g+1+64]=c[g+0+32]=pt($,S,j),c[g+3+96]=c[g+2+64]=c[g+1+32]=c[g+0+0]=pt(H,$,S),c[g+3+64]=c[g+2+32]=c[g+1+0]=pt(X,H,$),c[g+3+32]=c[g+2+0]=pt(te,X,H),c[g+3+0]=pt(ne,te,X)}function di(c,g){var S=c[g+1-32],j=c[g+2-32],q=c[g+3-32],$=c[g+4-32],H=c[g+5-32],X=c[g+6-32],te=c[g+7-32];c[g+0+0]=pt(c[g+0-32],S,j),c[g+1+0]=c[g+0+32]=pt(S,j,q),c[g+2+0]=c[g+1+32]=c[g+0+64]=pt(j,q,$),c[g+3+0]=c[g+2+32]=c[g+1+64]=c[g+0+96]=pt(q,$,H),c[g+3+32]=c[g+2+64]=c[g+1+96]=pt($,H,X),c[g+3+64]=c[g+2+96]=pt(H,X,te),c[g+3+96]=pt(X,te,te)}function qo(c,g){var S=c[g-1+0],j=c[g-1+32],q=c[g-1+64],$=c[g-1-32],H=c[g+0-32],X=c[g+1-32],te=c[g+2-32],ne=c[g+3-32];c[g+0+0]=c[g+1+64]=$+H+1>>1,c[g+1+0]=c[g+2+64]=H+X+1>>1,c[g+2+0]=c[g+3+64]=X+te+1>>1,c[g+3+0]=te+ne+1>>1,c[g+0+96]=pt(q,j,S),c[g+0+64]=pt(j,S,$),c[g+0+32]=c[g+1+96]=pt(S,$,H),c[g+1+32]=c[g+2+96]=pt($,H,X),c[g+2+32]=c[g+3+96]=pt(H,X,te),c[g+3+32]=pt(X,te,ne)}function ul(c,g){var S=c[g+0-32],j=c[g+1-32],q=c[g+2-32],$=c[g+3-32],H=c[g+4-32],X=c[g+5-32],te=c[g+6-32],ne=c[g+7-32];c[g+0+0]=S+j+1>>1,c[g+1+0]=c[g+0+64]=j+q+1>>1,c[g+2+0]=c[g+1+64]=q+$+1>>1,c[g+3+0]=c[g+2+64]=$+H+1>>1,c[g+0+32]=pt(S,j,q),c[g+1+32]=c[g+0+96]=pt(j,q,$),c[g+2+32]=c[g+1+96]=pt(q,$,H),c[g+3+32]=c[g+2+96]=pt($,H,X),c[g+3+64]=pt(H,X,te),c[g+3+96]=pt(X,te,ne)}function zo(c,g){var S=c[g-1+0],j=c[g-1+32],q=c[g-1+64],$=c[g-1+96];c[g+0+0]=S+j+1>>1,c[g+2+0]=c[g+0+32]=j+q+1>>1,c[g+2+32]=c[g+0+64]=q+$+1>>1,c[g+1+0]=pt(S,j,q),c[g+3+0]=c[g+1+32]=pt(j,q,$),c[g+3+32]=c[g+1+64]=pt(q,$,$),c[g+3+64]=c[g+2+64]=c[g+0+96]=c[g+1+96]=c[g+2+96]=c[g+3+96]=$}function $o(c,g){var S=c[g-1+0],j=c[g-1+32],q=c[g-1+64],$=c[g-1+96],H=c[g-1-32],X=c[g+0-32],te=c[g+1-32],ne=c[g+2-32];c[g+0+0]=c[g+2+32]=S+H+1>>1,c[g+0+32]=c[g+2+64]=j+S+1>>1,c[g+0+64]=c[g+2+96]=q+j+1>>1,c[g+0+96]=$+q+1>>1,c[g+3+0]=pt(X,te,ne),c[g+2+0]=pt(H,X,te),c[g+1+0]=c[g+3+32]=pt(S,H,X),c[g+1+32]=c[g+3+64]=pt(j,S,H),c[g+1+64]=c[g+3+96]=pt(q,j,S),c[g+1+96]=pt($,q,j)}function gu(c,g){var S;for(S=0;8>S;++S)r(c,g+32*S,c,g-32,8)}function Wi(c,g){var S;for(S=0;8>S;++S)i(c,g,c[g-1],8),g+=32}function fi(c,g,S){var j;for(j=0;8>j;++j)i(g,S+32*j,c,8)}function Gi(c,g){var S,j=8;for(S=0;8>S;++S)j+=c[g+S-32]+c[g-1+32*S];fi(j>>4,c,g)}function cl(c,g){var S,j=4;for(S=0;8>S;++S)j+=c[g+S-32];fi(j>>3,c,g)}function qt(c,g){var S,j=4;for(S=0;8>S;++S)j+=c[g-1+32*S];fi(j>>3,c,g)}function hl(c,g){fi(128,c,g)}function Ho(c,g,S){var j=c[g-S],q=c[g+0],$=3*(q-j)+ag[1020+c[g-2*S]-c[g+S]],H=Qd[112+($+4>>3)];c[g-S]=mi[255+j+Qd[112+($+3>>3)]],c[g+0]=mi[255+q-H]}function dl(c,g,S,j){var q=c[g+0],$=c[g+S];return Li[255+c[g-2*S]-c[g-S]]>j||Li[255+$-q]>j}function fl(c,g,S,j){return 4*Li[255+c[g-S]-c[g+0]]+Li[255+c[g-2*S]-c[g+S]]<=j}function pl(c,g,S,j,q){var $=c[g-3*S],H=c[g-2*S],X=c[g-S],te=c[g+0],ne=c[g+S],ue=c[g+2*S],_e=c[g+3*S];return 4*Li[255+X-te]+Li[255+H-ne]>j?0:Li[255+c[g-4*S]-$]<=q&&Li[255+$-H]<=q&&Li[255+H-X]<=q&&Li[255+_e-ue]<=q&&Li[255+ue-ne]<=q&&Li[255+ne-te]<=q}function to(c,g,S,j){var q=2*j+1;for(j=0;16>j;++j)fl(c,g+j,S,q)&&Ho(c,g+j,S)}function pi(c,g,S,j){var q=2*j+1;for(j=0;16>j;++j)fl(c,g+j*S,1,q)&&Ho(c,g+j*S,1)}function Wn(c,g,S,j){var q;for(q=3;0<q;--q)to(c,g+=4*S,S,j)}function vu(c,g,S,j){var q;for(q=3;0<q;--q)pi(c,g+=4,S,j)}function xs(c,g,S,j,q,$,H,X){for($=2*$+1;0<q--;){if(pl(c,g,S,$,H))if(dl(c,g,S,X))Ho(c,g,S);else{var te=c,ne=g,ue=S,_e=te[ne-2*ue],we=te[ne-ue],ve=te[ne+0],Ce=te[ne+ue],Ae=te[ne+2*ue],he=27*(ke=ag[1020+3*(ve-we)+ag[1020+_e-Ce]])+63>>7,pe=18*ke+63>>7,ke=9*ke+63>>7;te[ne-3*ue]=mi[255+te[ne-3*ue]+ke],te[ne-2*ue]=mi[255+_e+pe],te[ne-ue]=mi[255+we+he],te[ne+0]=mi[255+ve-he],te[ne+ue]=mi[255+Ce-pe],te[ne+2*ue]=mi[255+Ae-ke]}g+=j}}function rr(c,g,S,j,q,$,H,X){for($=2*$+1;0<q--;){if(pl(c,g,S,$,H))if(dl(c,g,S,X))Ho(c,g,S);else{var te=c,ne=g,ue=S,_e=te[ne-ue],we=te[ne+0],ve=te[ne+ue],Ce=Qd[112+((Ae=3*(we-_e))+4>>3)],Ae=Qd[112+(Ae+3>>3)],he=Ce+1>>1;te[ne-2*ue]=mi[255+te[ne-2*ue]+he],te[ne-ue]=mi[255+_e+Ae],te[ne+0]=mi[255+we-Ce],te[ne+ue]=mi[255+ve-he]}g+=j}}function Wo(c,g,S,j,q,$){xs(c,g,S,1,16,j,q,$)}function Ki(c,g,S,j,q,$){xs(c,g,1,S,16,j,q,$)}function Go(c,g,S,j,q,$){var H;for(H=3;0<H;--H)rr(c,g+=4*S,S,1,16,j,q,$)}function no(c,g,S,j,q,$){var H;for(H=3;0<H;--H)rr(c,g+=4,1,S,16,j,q,$)}function Ko(c,g,S,j,q,$,H,X){xs(c,g,q,1,8,$,H,X),xs(S,j,q,1,8,$,H,X)}function ml(c,g,S,j,q,$,H,X){xs(c,g,1,q,8,$,H,X),xs(S,j,1,q,8,$,H,X)}function Qo(c,g,S,j,q,$,H,X){rr(c,g+4*q,q,1,8,$,H,X),rr(S,j+4*q,q,1,8,$,H,X)}function Ss(c,g,S,j,q,$,H,X){rr(c,g+4,1,q,8,$,H,X),rr(S,j+4,1,q,8,$,H,X)}function ro(){this.ba=new Hn,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Lt,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Yo(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function io(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Xo(){this.ua=0,this.Wa=new oe,this.vb=new oe,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new V,this.yc=new I}function yu(){this.xb=this.a=0,this.l=new Xs,this.ca=new Hn,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new F,this.Pb=0,this.wd=new F,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Xo,this.ab=0,this.gc=o(4,io),this.Oc=0}function Qi(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Xs,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function As(c,g,S,j,q,$,H){for(c=c==null?0:c[g+0],g=0;g<H;++g)q[$+g]=c+S[j+g]&255,c=q[$+g]}function Jo(c,g,S,j,q,$,H){var X;if(c==null)As(null,null,S,j,q,$,H);else for(X=0;X<H;++X)q[$+X]=c[g+X]+S[j+X]&255}function vr(c,g,S,j,q,$,H){if(c==null)As(null,null,S,j,q,$,H);else{var X,te=c[g+0],ne=te,ue=te;for(X=0;X<H;++X)ne=ue+(te=c[g+X])-ne,ue=S[j+X]+(-256&ne?0>ne?0:255:ne)&255,ne=te,q[$+X]=ue}}function Zo(c,g,S,j){var q=g.width,$=g.o;if(e(c!=null&&g!=null),0>S||0>=j||S+j>$)return null;if(!c.Cc){if(c.ga==null){var H;if(c.ga=new Qi,(H=c.ga==null)||(H=g.width*g.o,e(c.Gb.length==0),c.Gb=s(H),c.Uc=0,c.Gb==null?H=0:(c.mb=c.Gb,c.nb=c.Uc,c.rc=null,H=1),H=!H),!H){H=c.ga;var X=c.Fa,te=c.P,ne=c.qc,ue=c.mb,_e=c.nb,we=te+1,ve=ne-1,Ce=H.l;if(e(X!=null&&ue!=null&&g!=null),sa[0]=null,sa[1]=As,sa[2]=Jo,sa[3]=vr,H.ca=ue,H.tb=_e,H.c=g.width,H.i=g.height,e(0<H.c&&0<H.i),1>=ne)g=0;else if(H.$a=X[te+0]>>0&3,H.Z=X[te+0]>>2&3,H.Lc=X[te+0]>>4&3,te=X[te+0]>>6&3,0>H.$a||1<H.$a||4<=H.Z||1<H.Lc||te)g=0;else if(Ce.put=fn,Ce.ac=Yt,Ce.bc=ci,Ce.ma=H,Ce.width=g.width,Ce.height=g.height,Ce.Da=g.Da,Ce.v=g.v,Ce.va=g.va,Ce.j=g.j,Ce.o=g.o,H.$a)e:{e(H.$a==1),g=kn();t:for(;;){if(g==null){g=0;break e}if(e(H!=null),H.mc=g,g.c=H.c,g.i=H.i,g.l=H.l,g.l.ma=H,g.l.width=H.c,g.l.height=H.i,g.a=0,W(g.m,X,we,ve),!hi(H.c,H.i,1,g,null)||(g.ab==1&&g.gc[0].hc==3&&qi(g.s)?(H.ic=1,X=g.c*g.i,g.Ta=null,g.Ua=0,g.V=s(X),g.Ba=0,g.V==null?(g.a=1,g=0):g=1):(H.ic=0,g=ms(g,H.c)),!g))break t;g=1;break e}H.mc=null,g=0}else g=ve>=H.c*H.i;H=!g}if(H)return null;c.ga.Lc!=1?c.Ga=0:j=$-S}e(c.ga!=null),e(S+j<=$);e:{if(g=(X=c.ga).c,$=X.l.o,X.$a==0){if(we=c.rc,ve=c.Vc,Ce=c.Fa,te=c.P+1+S*g,ne=c.mb,ue=c.nb+S*g,e(te<=c.P+c.qc),X.Z!=0)for(e(sa[X.Z]!=null),H=0;H<j;++H)sa[X.Z](we,ve,Ce,te,ne,ue,g),we=ne,ve=ue,ue+=g,te+=g;else for(H=0;H<j;++H)r(ne,ue,Ce,te,g),we=ne,ve=ue,ue+=g,te+=g;c.rc=we,c.Vc=ve}else{if(e(X.mc!=null),g=S+j,e((H=X.mc)!=null),e(g<=H.i),H.C>=g)g=1;else if(X.ic||ge(),X.ic){X=H.V,we=H.Ba,ve=H.c;var Ae=H.i,he=(Ce=1,te=H.$/ve,ne=H.$%ve,ue=H.m,_e=H.s,H.$),pe=ve*Ae,ke=ve*g,De=_e.wc,Pe=he<ke?Sn(_e,ne,te):null;e(he<=pe),e(g<=Ae),e(qi(_e));t:for(;;){for(;!ue.h&&he<ke;){if(ne&De||(Pe=Sn(_e,ne,te)),e(Pe!=null),ae(ue),256>(Ae=Fn(Pe.G[0],Pe.H[0],ue)))X[we+he]=Ae,++he,++ne>=ve&&(ne=0,++te<=g&&!(te%16)&&Gr(H,te));else{if(!(280>Ae)){Ce=0;break t}Ae=Wr(Ae-256,ue);var Xe,We=Fn(Pe.G[4],Pe.H[4],ue);if(ae(ue),!(he>=(We=mr(ve,We=Wr(We,ue)))&&pe-he>=Ae)){Ce=0;break t}for(Xe=0;Xe<Ae;++Xe)X[we+he+Xe]=X[we+he+Xe-We];for(he+=Ae,ne+=Ae;ne>=ve;)ne-=ve,++te<=g&&!(te%16)&&Gr(H,te);he<ke&&ne&De&&(Pe=Sn(_e,ne,te))}e(ue.h==Y(ue))}Gr(H,te>g?g:te);break t}!Ce||ue.h&&he<pe?(Ce=0,H.a=ue.h?5:3):H.$=he,g=Ce}else g=Rr(H,H.V,H.Ba,H.c,H.i,g,gs);if(!g){j=0;break e}}S+j>=$&&(c.Cc=1),j=1}if(!j)return null;if(c.Cc&&((j=c.ga)!=null&&(j.mc=null),c.ga=null,0<c.Ga))return alert("todo:WebPDequantizeLevels"),null}return c.nb+S*q}function _(c,g,S,j,q,$){for(;0<q--;){var H,X=c,te=g+(S?1:0),ne=c,ue=g+(S?0:3);for(H=0;H<j;++H){var _e=ne[ue+4*H];_e!=255&&(_e*=32897,X[te+4*H+0]=X[te+4*H+0]*_e>>23,X[te+4*H+1]=X[te+4*H+1]*_e>>23,X[te+4*H+2]=X[te+4*H+2]*_e>>23)}g+=$}}function B(c,g,S,j,q){for(;0<j--;){var $;for($=0;$<S;++$){var H=c[g+2*$+0],X=15&(ne=c[g+2*$+1]),te=4369*X,ne=(240&ne|ne>>4)*te>>16;c[g+2*$+0]=(240&H|H>>4)*te>>16&240|(15&H|H<<4)*te>>16>>4&15,c[g+2*$+1]=240&ne|X}g+=q}}function se(c,g,S,j,q,$,H,X){var te,ne,ue=255;for(ne=0;ne<q;++ne){for(te=0;te<j;++te){var _e=c[g+te];$[H+4*te]=_e,ue&=_e}g+=S,H+=X}return ue!=255}function le(c,g,S,j,q){var $;for($=0;$<q;++$)S[j+$]=c[g+$]>>8}function ge(){Ci=_,tn=B,nn=se,Cn=le}function Ne(c,g,S){y[c]=function(j,q,$,H,X,te,ne,ue,_e,we,ve,Ce,Ae,he,pe,ke,De){var Pe,Xe=De-1>>1,We=X[te+0]|ne[ue+0]<<16,ct=_e[we+0]|ve[Ce+0]<<16;e(j!=null);var Ke=3*We+ct+131074>>2;for(g(j[q+0],255&Ke,Ke>>16,Ae,he),$!=null&&(Ke=3*ct+We+131074>>2,g($[H+0],255&Ke,Ke>>16,pe,ke)),Pe=1;Pe<=Xe;++Pe){var Vt=X[te+Pe]|ne[ue+Pe]<<16,Ht=_e[we+Pe]|ve[Ce+Pe]<<16,Ot=We+Vt+ct+Ht+524296,kt=Ot+2*(Vt+ct)>>3;Ke=kt+We>>1,We=(Ot=Ot+2*(We+Ht)>>3)+Vt>>1,g(j[q+2*Pe-1],255&Ke,Ke>>16,Ae,he+(2*Pe-1)*S),g(j[q+2*Pe-0],255&We,We>>16,Ae,he+(2*Pe-0)*S),$!=null&&(Ke=Ot+ct>>1,We=kt+Ht>>1,g($[H+2*Pe-1],255&Ke,Ke>>16,pe,ke+(2*Pe-1)*S),g($[H+2*Pe+0],255&We,We>>16,pe,ke+(2*Pe+0)*S)),We=Vt,ct=Ht}1&De||(Ke=3*We+ct+131074>>2,g(j[q+De-1],255&Ke,Ke>>16,Ae,he+(De-1)*S),$!=null&&(Ke=3*ct+We+131074>>2,g($[H+De-1],255&Ke,Ke>>16,pe,ke+(De-1)*S)))}}function Oe(){Ri[Yd]=nE,Ri[Xd]=my,Ri[cy]=rE,Ri[Jd]=gy,Ri[Zd]=vy,Ri[lg]=yy,Ri[hy]=iE,Ri[ug]=my,Ri[cg]=gy,Ri[ef]=vy,Ri[hg]=yy}function Ge(c){return c&-16384?0>c?0:255:c>>sE}function d(c,g){return Ge((19077*c>>8)+(26149*g>>8)-14234)}function T(c,g,S){return Ge((19077*c>>8)-(6419*g>>8)-(13320*S>>8)+8708)}function D(c,g){return Ge((19077*c>>8)+(33050*g>>8)-17685)}function K(c,g,S,j,q){j[q+0]=d(c,S),j[q+1]=T(c,g,S),j[q+2]=D(c,g)}function me(c,g,S,j,q){j[q+0]=D(c,g),j[q+1]=T(c,g,S),j[q+2]=d(c,S)}function be(c,g,S,j,q){var $=T(c,g,S);g=$<<3&224|D(c,g)>>3,j[q+0]=248&d(c,S)|$>>5,j[q+1]=g}function Fe(c,g,S,j,q){var $=240&D(c,g)|15;j[q+0]=240&d(c,S)|T(c,g,S)>>4,j[q+1]=$}function yt(c,g,S,j,q){j[q+0]=255,K(c,g,S,j,q+1)}function Tt(c,g,S,j,q){me(c,g,S,j,q),j[q+3]=255}function _t(c,g,S,j,q){K(c,g,S,j,q),j[q+3]=255}function zt(c,g){return 0>c?0:c>g?g:c}function Jt(c,g,S){y[c]=function(j,q,$,H,X,te,ne,ue,_e){for(var we=ue+(-2&_e)*S;ue!=we;)g(j[q+0],$[H+0],X[te+0],ne,ue),g(j[q+1],$[H+0],X[te+0],ne,ue+S),q+=2,++H,++te,ue+=2*S;1&_e&&g(j[q+0],$[H+0],X[te+0],ne,ue)}}function Yi(c,g,S){return S==0?c==0?g==0?6:5:g==0?4:0:S}function ir(c,g,S,j,q){switch(c>>>30){case 3:ao(g,S,j,q,0);break;case 2:Pn(g,S,j,q);break;case 1:Fr(g,S,j,q)}}function Es(c,g){var S,j,q=g.M,$=g.Nb,H=c.oc,X=c.pc+40,te=c.oc,ne=c.pc+584,ue=c.oc,_e=c.pc+600;for(S=0;16>S;++S)H[X+32*S-1]=129;for(S=0;8>S;++S)te[ne+32*S-1]=129,ue[_e+32*S-1]=129;for(0<q?H[X-1-32]=te[ne-1-32]=ue[_e-1-32]=129:(i(H,X-32-1,127,21),i(te,ne-32-1,127,9),i(ue,_e-32-1,127,9)),j=0;j<c.za;++j){var we=g.ya[g.aa+j];if(0<j){for(S=-1;16>S;++S)r(H,X+32*S-4,H,X+32*S+12,4);for(S=-1;8>S;++S)r(te,ne+32*S-4,te,ne+32*S+4,4),r(ue,_e+32*S-4,ue,_e+32*S+4,4)}var ve=c.Gd,Ce=c.Hd+j,Ae=we.ad,he=we.Hc;if(0<q&&(r(H,X-32,ve[Ce].y,0,16),r(te,ne-32,ve[Ce].f,0,8),r(ue,_e-32,ve[Ce].ea,0,8)),we.Za){var pe=H,ke=X-32+16;for(0<q&&(j>=c.za-1?i(pe,ke,ve[Ce].y[15],4):r(pe,ke,ve[Ce+1].y,0,4)),S=0;4>S;S++)pe[ke+128+S]=pe[ke+256+S]=pe[ke+384+S]=pe[ke+0+S];for(S=0;16>S;++S,he<<=2)pe=H,ke=X+wy[S],Xi[we.Ob[S]](pe,ke),ir(he,Ae,16*+S,pe,ke)}else if(pe=Yi(j,q,we.Ob[0]),ia[pe](H,X),he!=0)for(S=0;16>S;++S,he<<=2)ir(he,Ae,16*+S,H,X+wy[S]);for(S=we.Gc,pe=Yi(j,q,we.Dd),uo[pe](te,ne),uo[pe](ue,_e),he=Ae,pe=te,ke=ne,255&(we=S>>0)&&(170&we?th(he,256,pe,ke):ki(he,256,pe,ke)),we=ue,he=_e,255&(S>>=8)&&(170&S?th(Ae,320,we,he):ki(Ae,320,we,he)),q<c.Ub-1&&(r(ve[Ce].y,0,H,X+480,16),r(ve[Ce].f,0,te,ne+224,8),r(ve[Ce].ea,0,ue,_e+224,8)),S=8*$*c.B,ve=c.sa,Ce=c.ta+16*j+16*$*c.R,Ae=c.qa,we=c.ra+8*j+S,he=c.Ha,pe=c.Ia+8*j+S,S=0;16>S;++S)r(ve,Ce+S*c.R,H,X+32*S,16);for(S=0;8>S;++S)r(Ae,we+S*c.B,te,ne+32*S,8),r(he,pe+S*c.B,ue,_e+32*S,8)}}function Ns(c,g,S,j,q,$,H,X,te){var ne=[0],ue=[0],_e=0,we=te!=null?te.kd:0,ve=te??new Yo;if(c==null||12>S)return 7;ve.data=c,ve.w=g,ve.ha=S,g=[g],S=[S],ve.gb=[ve.gb];e:{var Ce=g,Ae=S,he=ve.gb;if(e(c!=null),e(Ae!=null),e(he!=null),he[0]=0,12<=Ae[0]&&!n(c,Ce[0],"RIFF")){if(n(c,Ce[0]+8,"WEBP")){he=3;break e}var pe=Ue(c,Ce[0]+4);if(12>pe||4294967286<pe){he=3;break e}if(we&&pe>Ae[0]-8){he=7;break e}he[0]=pe,Ce[0]+=12,Ae[0]-=12}he=0}if(he!=0)return he;for(pe=0<ve.gb[0],S=S[0];;){e:{var ke=c;Ae=g,he=S;var De=ne,Pe=ue,Xe=Ce=[0];if((Ke=_e=[_e])[0]=0,8>he[0])he=7;else{if(!n(ke,Ae[0],"VP8X")){if(Ue(ke,Ae[0]+4)!=10){he=3;break e}if(18>he[0]){he=7;break e}var We=Ue(ke,Ae[0]+8),ct=1+je(ke,Ae[0]+12);if(2147483648<=ct*(ke=1+je(ke,Ae[0]+15))){he=3;break e}Xe!=null&&(Xe[0]=We),De!=null&&(De[0]=ct),Pe!=null&&(Pe[0]=ke),Ae[0]+=18,he[0]-=18,Ke[0]=1}he=0}}if(_e=_e[0],Ce=Ce[0],he!=0)return he;if(Ae=!!(2&Ce),!pe&&_e)return 3;if($!=null&&($[0]=!!(16&Ce)),H!=null&&(H[0]=Ae),X!=null&&(X[0]=0),H=ne[0],Ce=ue[0],_e&&Ae&&te==null){he=0;break}if(4>S){he=7;break}if(pe&&_e||!pe&&!_e&&!n(c,g[0],"ALPH")){S=[S],ve.na=[ve.na],ve.P=[ve.P],ve.Sa=[ve.Sa];e:{We=c,he=g,pe=S;var Ke=ve.gb;De=ve.na,Pe=ve.P,Xe=ve.Sa,ct=22,e(We!=null),e(pe!=null),ke=he[0];var Vt=pe[0];for(e(De!=null),e(Xe!=null),De[0]=null,Pe[0]=null,Xe[0]=0;;){if(he[0]=ke,pe[0]=Vt,8>Vt){he=7;break e}var Ht=Ue(We,ke+4);if(4294967286<Ht){he=3;break e}var Ot=8+Ht+1&-2;if(ct+=Ot,0<Ke&&ct>Ke){he=3;break e}if(!n(We,ke,"VP8 ")||!n(We,ke,"VP8L")){he=0;break e}if(Vt[0]<Ot){he=7;break e}n(We,ke,"ALPH")||(De[0]=We,Pe[0]=ke+8,Xe[0]=Ht),ke+=Ot,Vt-=Ot}}if(S=S[0],ve.na=ve.na[0],ve.P=ve.P[0],ve.Sa=ve.Sa[0],he!=0)break}S=[S],ve.Ja=[ve.Ja],ve.xa=[ve.xa];e:if(Ke=c,he=g,pe=S,De=ve.gb[0],Pe=ve.Ja,Xe=ve.xa,We=he[0],ke=!n(Ke,We,"VP8 "),ct=!n(Ke,We,"VP8L"),e(Ke!=null),e(pe!=null),e(Pe!=null),e(Xe!=null),8>pe[0])he=7;else{if(ke||ct){if(Ke=Ue(Ke,We+4),12<=De&&Ke>De-12){he=3;break e}if(we&&Ke>pe[0]-8){he=7;break e}Pe[0]=Ke,he[0]+=8,pe[0]-=8,Xe[0]=ct}else Xe[0]=5<=pe[0]&&Ke[We+0]==47&&!(Ke[We+4]>>5),Pe[0]=pe[0];he=0}if(S=S[0],ve.Ja=ve.Ja[0],ve.xa=ve.xa[0],g=g[0],he!=0)break;if(4294967286<ve.Ja)return 3;if(X==null||Ae||(X[0]=ve.xa?2:1),H=[H],Ce=[Ce],ve.xa){if(5>S){he=7;break}X=H,we=Ce,Ae=$,c==null||5>S?c=0:5<=S&&c[g+0]==47&&!(c[g+4]>>5)?(pe=[0],Ke=[0],De=[0],W(Pe=new F,c,g,S),Ze(Pe,pe,Ke,De)?(X!=null&&(X[0]=pe[0]),we!=null&&(we[0]=Ke[0]),Ae!=null&&(Ae[0]=De[0]),c=1):c=0):c=0}else{if(10>S){he=7;break}X=Ce,c==null||10>S||!il(c,g+3,S-3)?c=0:(we=c[g+0]|c[g+1]<<8|c[g+2]<<16,Ae=16383&(c[g+7]<<8|c[g+6]),c=16383&(c[g+9]<<8|c[g+8]),1&we||3<(we>>1&7)||!(we>>4&1)||we>>5>=ve.Ja||!Ae||!c?c=0:(H&&(H[0]=Ae),X&&(X[0]=c),c=1))}if(!c||(H=H[0],Ce=Ce[0],_e&&(ne[0]!=H||ue[0]!=Ce)))return 3;te!=null&&(te[0]=ve,te.offset=g-te.w,e(4294967286>g-te.w),e(te.offset==te.ha-S));break}return he==0||he==7&&_e&&te==null?($!=null&&($[0]|=ve.na!=null&&0<ve.na.length),j!=null&&(j[0]=H),q!=null&&(q[0]=Ce),0):he}function Xc(c,g,S){var j=g.width,q=g.height,$=0,H=0,X=j,te=q;if(g.Da=c!=null&&0<c.Da,g.Da&&(X=c.cd,te=c.bd,$=c.v,H=c.j,11>S||($&=-2,H&=-2),0>$||0>H||0>=X||0>=te||$+X>j||H+te>q))return 0;if(g.v=$,g.j=H,g.va=$+X,g.o=H+te,g.U=X,g.T=te,g.da=c!=null&&0<c.da,g.da){if(!ye(X,te,S=[c.ib],$=[c.hb]))return 0;g.ib=S[0],g.hb=$[0]}return g.ob=c!=null&&c.ob,g.Kb=c==null||!c.Sd,g.da&&(g.ob=g.ib<3*j/4&&g.hb<3*q/4,g.Kb=0),1}function Jc(c){if(c==null)return 2;if(11>c.S){var g=c.f.RGBA;g.fb+=(c.height-1)*g.A,g.A=-g.A}else g=c.f.kb,c=c.height,g.O+=(c-1)*g.fa,g.fa=-g.fa,g.N+=(c-1>>1)*g.Ab,g.Ab=-g.Ab,g.W+=(c-1>>1)*g.Db,g.Db=-g.Db,g.F!=null&&(g.J+=(c-1)*g.lb,g.lb=-g.lb);return 0}function _u(c,g,S,j){if(j==null||0>=c||0>=g)return 2;if(S!=null){if(S.Da){var q=S.cd,$=S.bd,H=-2&S.v,X=-2&S.j;if(0>H||0>X||0>=q||0>=$||H+q>c||X+$>g)return 2;c=q,g=$}if(S.da){if(!ye(c,g,q=[S.ib],$=[S.hb]))return 2;c=q[0],g=$[0]}}j.width=c,j.height=g;e:{var te=j.width,ne=j.height;if(c=j.S,0>=te||0>=ne||!(c>=Yd&&13>c))c=2;else{if(0>=j.Rd&&j.sd==null){H=$=q=g=0;var ue=(X=te*by[c])*ne;if(11>c||($=(ne+1)/2*(g=(te+1)/2),c==12&&(H=(q=te)*ne)),(ne=s(ue+2*$+H))==null){c=1;break e}j.sd=ne,11>c?((te=j.f.RGBA).eb=ne,te.fb=0,te.A=X,te.size=ue):((te=j.f.kb).y=ne,te.O=0,te.fa=X,te.Fd=ue,te.f=ne,te.N=0+ue,te.Ab=g,te.Cd=$,te.ea=ne,te.W=0+ue+$,te.Db=g,te.Ed=$,c==12&&(te.F=ne,te.J=0+ue+2*$),te.Tc=H,te.lb=q)}if(g=1,q=j.S,$=j.width,H=j.height,q>=Yd&&13>q)if(11>q)c=j.f.RGBA,g&=(X=Math.abs(c.A))*(H-1)+$<=c.size,g&=X>=$*by[q],g&=c.eb!=null;else{c=j.f.kb,X=($+1)/2,ue=(H+1)/2,te=Math.abs(c.fa),ne=Math.abs(c.Ab);var _e=Math.abs(c.Db),we=Math.abs(c.lb),ve=we*(H-1)+$;g&=te*(H-1)+$<=c.Fd,g&=ne*(ue-1)+X<=c.Cd,g=(g&=_e*(ue-1)+X<=c.Ed)&te>=$&ne>=X&_e>=X,g&=c.y!=null,g&=c.f!=null,g&=c.ea!=null,q==12&&(g&=we>=$,g&=ve<=c.Tc,g&=c.F!=null)}else g=0;c=g?0:2}}return c!=0||S!=null&&S.fd&&(c=Jc(j)),c}var sr=64,wu=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],bu=24,xu=32,Zc=8,Qr=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Me("Predictor0","PredictorAdd0"),y.Predictor0=function(){return 4278190080},y.Predictor1=function(c){return c},y.Predictor2=function(c,g,S){return g[S+0]},y.Predictor3=function(c,g,S){return g[S+1]},y.Predictor4=function(c,g,S){return g[S-1]},y.Predictor5=function(c,g,S){return ze(ze(c,g[S+1]),g[S+0])},y.Predictor6=function(c,g,S){return ze(c,g[S-1])},y.Predictor7=function(c,g,S){return ze(c,g[S+0])},y.Predictor8=function(c,g,S){return ze(g[S-1],g[S+0])},y.Predictor9=function(c,g,S){return ze(g[S+0],g[S+1])},y.Predictor10=function(c,g,S){return ze(ze(c,g[S-1]),ze(g[S+0],g[S+1]))},y.Predictor11=function(c,g,S){var j=g[S+0];return 0>=st(j>>24&255,c>>24&255,(g=g[S-1])>>24&255)+st(j>>16&255,c>>16&255,g>>16&255)+st(j>>8&255,c>>8&255,g>>8&255)+st(255&j,255&c,255&g)?j:c},y.Predictor12=function(c,g,S){var j=g[S+0];return(He((c>>24&255)+(j>>24&255)-((g=g[S-1])>>24&255))<<24|He((c>>16&255)+(j>>16&255)-(g>>16&255))<<16|He((c>>8&255)+(j>>8&255)-(g>>8&255))<<8|He((255&c)+(255&j)-(255&g)))>>>0},y.Predictor13=function(c,g,S){var j=g[S-1];return(Qe((c=ze(c,g[S+0]))>>24&255,j>>24&255)<<24|Qe(c>>16&255,j>>16&255)<<16|Qe(c>>8&255,j>>8&255)<<8|Qe(c>>0&255,j>>0&255))>>>0};var og=y.PredictorAdd0;y.PredictorAdd1=tt,Me("Predictor2","PredictorAdd2"),Me("Predictor3","PredictorAdd3"),Me("Predictor4","PredictorAdd4"),Me("Predictor5","PredictorAdd5"),Me("Predictor6","PredictorAdd6"),Me("Predictor7","PredictorAdd7"),Me("Predictor8","PredictorAdd8"),Me("Predictor9","PredictorAdd9"),Me("Predictor10","PredictorAdd10"),Me("Predictor11","PredictorAdd11"),Me("Predictor12","PredictorAdd12"),Me("Predictor13","PredictorAdd13");var eh=y.PredictorAdd2;at("ColorIndexInverseTransform","MapARGB","32b",function(c){return c>>8&255},function(c){return c}),at("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(c){return c},function(c){return c>>8&255});var $d,Ti=y.ColorIndexInverseTransform,Su=y.MapARGB,Hd=y.VP8LColorIndexInverseTransformAlpha,Wd=y.MapAlpha,ea=y.VP8LPredictorsAdd=[];ea.length=16,(y.VP8LPredictors=[]).length=16,(y.VP8LPredictorsAdd_C=[]).length=16,(y.VP8LPredictors_C=[]).length=16;var gl,Yr,Or,ta,so,oo,Au,ao,Pn,th,Fr,ki,Eu,Gd,nh,vl,yl,na,_l,Nu,wl,ra,rh,Pi,Ci,tn,nn,Cn,Gn=s(511),lo=s(2041),ih=s(225),Iu=s(767),Kd=0,ag=lo,Qd=ih,mi=Iu,Li=Gn,Yd=0,Xd=1,cy=2,Jd=3,Zd=4,lg=5,hy=6,ug=7,cg=8,ef=9,hg=10,qA=[2,3,7],zA=[3,3,11],dy=[280,256,256,256,40],$A=[0,1,1,1,0],HA=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],WA=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],GA=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],KA=8,dg=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],fg=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],sh=null,QA=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],YA=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],fy=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],XA=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],JA=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],ZA=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],eE=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],ia=[],Xi=[],uo=[],tE=1,py=2,sa=[],Ri=[];Ne("UpsampleRgbLinePair",K,3),Ne("UpsampleBgrLinePair",me,3),Ne("UpsampleRgbaLinePair",_t,4),Ne("UpsampleBgraLinePair",Tt,4),Ne("UpsampleArgbLinePair",yt,4),Ne("UpsampleRgba4444LinePair",Fe,2),Ne("UpsampleRgb565LinePair",be,2);var nE=y.UpsampleRgbLinePair,rE=y.UpsampleBgrLinePair,my=y.UpsampleRgbaLinePair,gy=y.UpsampleBgraLinePair,vy=y.UpsampleArgbLinePair,yy=y.UpsampleRgba4444LinePair,iE=y.UpsampleRgb565LinePair,tf=16,nf=1<<tf-1,oh=-227,pg=482,sE=6,_y=0,oE=s(256),aE=s(256),lE=s(256),uE=s(256),cE=s(pg-oh),hE=s(pg-oh);Jt("YuvToRgbRow",K,3),Jt("YuvToBgrRow",me,3),Jt("YuvToRgbaRow",_t,4),Jt("YuvToBgraRow",Tt,4),Jt("YuvToArgbRow",yt,4),Jt("YuvToRgba4444Row",Fe,2),Jt("YuvToRgb565Row",be,2);var wy=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],rf=[0,2,8],dE=[8,7,6,4,4,2,2,2,1,1,1,1],fE=1;this.WebPDecodeRGBA=function(c,g,S,j,q){var $=Xd,H=new ro,X=new Hn;H.ba=X,X.S=$,X.width=[X.width],X.height=[X.height];var te=X.width,ne=X.height,ue=new xn;if(ue==null||c==null)var _e=2;else e(ue!=null),_e=Ns(c,g,S,ue.width,ue.height,ue.Pd,ue.Qd,ue.format,null);if(_e!=0?te=0:(te!=null&&(te[0]=ue.width[0]),ne!=null&&(ne[0]=ue.height[0]),te=1),te){X.width=X.width[0],X.height=X.height[0],j!=null&&(j[0]=X.width),q!=null&&(q[0]=X.height);e:{if(j=new Xs,(q=new Yo).data=c,q.w=g,q.ha=S,q.kd=1,g=[0],e(q!=null),((c=Ns(q.data,q.w,q.ha,null,null,null,g,null,q))==0||c==7)&&g[0]&&(c=4),(g=c)==0){if(e(H!=null),j.data=q.data,j.w=q.w+q.offset,j.ha=q.ha-q.offset,j.put=fn,j.ac=Yt,j.bc=ci,j.ma=H,q.xa){if((c=kn())==null){H=1;break e}if(function(we,ve){var Ce=[0],Ae=[0],he=[0];t:for(;;){if(we==null)return 0;if(ve==null)return we.a=2,0;if(we.l=ve,we.a=0,W(we.m,ve.data,ve.w,ve.ha),!Ze(we.m,Ce,Ae,he)){we.a=3;break t}if(we.xb=py,ve.width=Ce[0],ve.height=Ae[0],!hi(Ce[0],Ae[0],1,we,null))break t;return 1}return e(we.a!=0),0}(c,j)){if(j=(g=_u(j.width,j.height,H.Oa,H.ba))==0){t:{j=c;n:for(;;){if(j==null){j=0;break t}if(e(j.s.yc!=null),e(j.s.Ya!=null),e(0<j.s.Wb),e((S=j.l)!=null),e((q=S.ma)!=null),j.xb!=0){if(j.ca=q.ba,j.tb=q.tb,e(j.ca!=null),!Xc(q.Oa,S,Jd)){j.a=2;break n}if(!ms(j,S.width)||S.da)break n;if((S.da||Nt(j.ca.S))&&ge(),11>j.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),j.ca.f.kb.F!=null&&ge()),j.Pb&&0<j.s.ua&&j.s.vb.X==null&&!Ye(j.s.vb,j.s.Wa.Xa)){j.a=1;break n}j.xb=0}if(!Rr(j,j.V,j.Ba,j.c,j.i,S.o,Oo))break n;q.Dc=j.Ma,j=1;break t}e(j.a!=0),j=0}j=!j}j&&(g=c.a)}else g=c.a}else{if((c=new rl)==null){H=1;break e}if(c.Fa=q.na,c.P=q.P,c.qc=q.Sa,sl(c,j)){if((g=_u(j.width,j.height,H.Oa,H.ba))==0){if(c.Aa=0,S=H.Oa,e((q=c)!=null),S!=null){if(0<(te=0>(te=S.Md)?0:100<te?255:255*te/100)){for(ne=ue=0;4>ne;++ne)12>(_e=q.pb[ne]).lc&&(_e.ia=te*dE[0>_e.lc?0:_e.lc]>>3),ue|=_e.ia;ue&&(alert("todo:VP8InitRandom"),q.ia=1)}q.Ga=S.Id,100<q.Ga?q.Ga=100:0>q.Ga&&(q.Ga=0)}du(c,j)||(g=c.a)}}else g=c.a}g==0&&H.Oa!=null&&H.Oa.fd&&(g=Jc(H.ba))}H=g}$=H!=0?null:11>$?X.f.RGBA.eb:X.f.kb.y}else $=null;return $};var by=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function u(y,N){for(var R="",A=0;A<4;A++)R+=String.fromCharCode(y[N++]);return R}function h(y,N){return(y[N+0]<<0|y[N+1]<<8|y[N+2]<<16)>>>0}function f(y,N){return(y[N+0]<<0|y[N+1]<<8|y[N+2]<<16|y[N+3]<<24)>>>0}new l;var m=[0],p=[0],b=[],E=new l,k=t,w=function(y,N){var R={},A=0,I=!1,P=0,V=0;if(R.frames=[],!function(G,Y,Z,ae){for(var ie=0;ie<ae;ie++)if(G[Y+ie]!=Z.charCodeAt(ie))return!0;return!1}(y,N,"RIFF",4)){var J,O;for(f(y,N+=4),N+=8;N<y.length;){var U=u(y,N),W=f(y,N+=4);N+=4;var ee=W+(1&W);switch(U){case"VP8 ":case"VP8L":R.frames[A]===void 0&&(R.frames[A]={}),(F=R.frames[A]).src_off=I?V:N-8,F.src_size=P+W+8,A++,I&&(I=!1,P=0,V=0);break;case"VP8X":(F=R.header={}).feature_flags=y[N];var re=N+4;F.canvas_width=1+h(y,re),re+=3,F.canvas_height=1+h(y,re),re+=3;break;case"ALPH":I=!0,P=ee+8,V=N-8;break;case"ANIM":(F=R.header).bgcolor=f(y,N),re=N+4,F.loop_count=(J=y)[(O=re)+0]<<0|J[O+1]<<8,re+=2;break;case"ANMF":var xe,F;(F=R.frames[A]={}).offset_x=2*h(y,N),N+=3,F.offset_y=2*h(y,N),N+=3,F.width=1+h(y,N),N+=3,F.height=1+h(y,N),N+=3,F.duration=h(y,N),N+=3,xe=y[N++],F.dispose=1&xe,F.blend=xe>>1&1}U!="ANMF"&&(N+=ee)}return R}}(k,0);w.response=k,w.rgbaoutput=!0,w.dataurl=!1;var x=w.header?w.header:null,C=w.frames?w.frames:null;if(x){x.loop_counter=x.loop_count,m=[x.canvas_height],p=[x.canvas_width];for(var M=0;M<C.length&&C[M].blend!=0;M++);}var Q=C[0],z=E.WebPDecodeRGBA(k,Q.src_off,Q.src_size,p,m);Q.rgba=z,Q.imgwidth=p[0],Q.imgheight=m[0];for(var L=0;L<p[0]*m[0]*4;L++)b[L]=z[L];return this.width=p,this.height=m,this.data=b,this}(function(t){var e=function(){return typeof X0=="function"},n=function(m,p,b,E){var k=4,w=o;switch(E){case t.image_compression.FAST:k=1,w=s;break;case t.image_compression.MEDIUM:k=6,w=a;break;case t.image_compression.SLOW:k=9,w=l}m=r(m,p,b,w);var x=X0(m,{level:k});return t.__addimage__.arrayBufferToBinaryString(x)},r=function(m,p,b,E){for(var k,w,x,C=m.length/p,M=new Uint8Array(m.length+C),Q=h(),z=0;z<C;z+=1){if(x=z*p,k=m.subarray(x,x+p),E)M.set(E(k,b,w),x+z);else{for(var L,y=Q.length,N=[];L<y;L+=1)N[L]=Q[L](k,b,w);var R=f(N.concat());M.set(N[R],x+z)}w=k}return M},i=function(m){var p=Array.apply([],m);return p.unshift(0),p},s=function(m,p){var b,E=[],k=m.length;E[0]=1;for(var w=0;w<k;w+=1)b=m[w-p]||0,E[w+1]=m[w]-b+256&255;return E},o=function(m,p,b){var E,k=[],w=m.length;k[0]=2;for(var x=0;x<w;x+=1)E=b&&b[x]||0,k[x+1]=m[x]-E+256&255;return k},a=function(m,p,b){var E,k,w=[],x=m.length;w[0]=3;for(var C=0;C<x;C+=1)E=m[C-p]||0,k=b&&b[C]||0,w[C+1]=m[C]+256-(E+k>>>1)&255;return w},l=function(m,p,b){var E,k,w,x,C=[],M=m.length;C[0]=4;for(var Q=0;Q<M;Q+=1)E=m[Q-p]||0,k=b&&b[Q]||0,w=b&&b[Q-p]||0,x=u(E,k,w),C[Q+1]=m[Q]-x+256&255;return C},u=function(m,p,b){if(m===p&&p===b)return m;var E=Math.abs(p-b),k=Math.abs(m-b),w=Math.abs(m+p-b-b);return E<=k&&E<=w?m:k<=w?p:b},h=function(){return[i,s,o,a,l]},f=function(m){var p=m.map(function(b){return b.reduce(function(E,k){return E+Math.abs(k)},0)});return p.indexOf(Math.min.apply(null,p))};t.processPNG=function(m,p,b,E){var k,w,x,C,M,Q,z,L,y,N,R,A,I,P,V,J=this.decode.FLATE_DECODE,O="";if(this.__addimage__.isArrayBuffer(m)&&(m=new Uint8Array(m)),this.__addimage__.isArrayBufferView(m)){if(m=(x=new uD(m)).imgData,w=x.bits,k=x.colorSpace,M=x.colors,[4,6].indexOf(x.colorType)!==-1){if(x.bits===8){y=(L=x.pixelBitlength==32?new Uint32Array(x.decodePixels().buffer):x.pixelBitlength==16?new Uint16Array(x.decodePixels().buffer):new Uint8Array(x.decodePixels().buffer)).length,R=new Uint8Array(y*x.colors),N=new Uint8Array(y);var U,W=x.pixelBitlength-x.bits;for(P=0,V=0;P<y;P++){for(I=L[P],U=0;U<W;)R[V++]=I>>>U&255,U+=x.bits;N[P]=I>>>U&255}}if(x.bits===16){y=(L=new Uint32Array(x.decodePixels().buffer)).length,R=new Uint8Array(y*(32/x.pixelBitlength)*x.colors),N=new Uint8Array(y*(32/x.pixelBitlength)),A=x.colors>1,P=0,V=0;for(var ee=0;P<y;)I=L[P++],R[V++]=I>>>0&255,A&&(R[V++]=I>>>16&255,I=L[P++],R[V++]=I>>>0&255),N[ee++]=I>>>16&255;w=8}E!==t.image_compression.NONE&&e()?(m=n(R,x.width*x.colors,x.colors,E),z=n(N,x.width,1,E)):(m=R,z=N,J=void 0)}if(x.colorType===3&&(k=this.color_spaces.INDEXED,Q=x.palette,x.transparency.indexed)){var re=x.transparency.indexed,xe=0;for(P=0,y=re.length;P<y;++P)xe+=re[P];if((xe/=255)===y-1&&re.indexOf(0)!==-1)C=[re.indexOf(0)];else if(xe!==y){for(L=x.decodePixels(),N=new Uint8Array(L.length),P=0,y=L.length;P<y;P++)N[P]=re[L[P]];z=n(N,x.width,1)}}var F=function(G){var Y;switch(G){case t.image_compression.FAST:Y=11;break;case t.image_compression.MEDIUM:Y=13;break;case t.image_compression.SLOW:Y=14;break;default:Y=12}return Y}(E);return J===this.decode.FLATE_DECODE&&(O="/Predictor "+F+" "),O+="/Colors "+M+" /BitsPerComponent "+w+" /Columns "+x.width,(this.__addimage__.isArrayBuffer(m)||this.__addimage__.isArrayBufferView(m))&&(m=this.__addimage__.arrayBufferToBinaryString(m)),(z&&this.__addimage__.isArrayBuffer(z)||this.__addimage__.isArrayBufferView(z))&&(z=this.__addimage__.arrayBufferToBinaryString(z)),{alias:b,data:m,index:p,filter:J,decodeParameters:O,transparency:C,palette:Q,sMask:z,predictor:F,width:x.width,height:x.height,bitsPerComponent:w,colorSpace:k}}}})(dt.API),function(t){t.processGIF89A=function(e,n,r,i){var s=new cD(e),o=s.width,a=s.height,l=[];s.decodeAndBlitFrameRGBA(0,l);var u={data:l,width:o,height:a},h=new _1(100).encode(u,100);return t.processJPEG.call(this,h,n,r,i)},t.processGIF87A=t.processGIF89A}(dt.API),ts.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var n=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:i,green:r,blue:n,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},ts.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(n){en.log("bit decode error:"+n)}},ts.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),n=e%4;for(t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<e;i++)for(var s=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+8*i*4,a=0;a<8&&8*i+a<this.width;a++){var l=this.palette[s>>7-a&1];this.data[o+4*a]=l.blue,this.data[o+4*a+1]=l.green,this.data[o+4*a+2]=l.red,this.data[o+4*a+3]=255}n!==0&&(this.pos+=4-n)}},ts.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<t;i++){var s=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+2*i*4,a=s>>4,l=15&s,u=this.palette[a];if(this.data[o]=u.blue,this.data[o+1]=u.green,this.data[o+2]=u.red,this.data[o+3]=255,2*i+1>=this.width)break;u=this.palette[l],this.data[o+4]=u.blue,this.data[o+4+1]=u.green,this.data[o+4+2]=u.red,this.data[o+4+3]=255}e!==0&&(this.pos+=4-e)}},ts.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),s=n*this.width*4+4*r;if(i<this.palette.length){var o=this.palette[i];this.data[s]=o.red,this.data[s+1]=o.green,this.data[s+2]=o.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}t!==0&&(this.pos+=4-t)}},ts.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<this.width;i++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(s&e)/e*255|0,a=(s>>5&e)/e*255|0,l=(s>>10&e)/e*255|0,u=s>>15?255:0,h=r*this.width*4+4*i;this.data[h]=l,this.data[h+1]=a,this.data[h+2]=o,this.data[h+3]=u}this.pos+=t}},ts.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),n=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,s=0;s<this.width;s++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(o&e)/e*255|0,l=(o>>5&n)/n*255|0,u=(o>>11)/e*255|0,h=i*this.width*4+4*s;this.data[h]=u,this.data[h+1]=l,this.data[h+2]=a,this.data[h+3]=255}this.pos+=t}},ts.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*n;this.data[o]=s,this.data[o+1]=i,this.data[o+2]=r,this.data[o+3]=255}this.pos+=this.width%4}},ts.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),a=e*this.width*4+4*n;this.data[a]=s,this.data[a+1]=i,this.data[a+2]=r,this.data[a+3]=o}},ts.prototype.getData=function(){return this.data},function(t){t.processBMP=function(e,n,r,i){var s=new ts(e,!1),o=s.width,a=s.height,l={data:s.getData(),width:o,height:a},u=new _1(100).encode(l,100);return t.processJPEG.call(this,u,n,r,i)}}(dt.API),Vw.prototype.getData=function(){return this.data},function(t){t.processWEBP=function(e,n,r,i){var s=new Vw(e),o=s.width,a=s.height,l={data:s.getData(),width:o,height:a},u=new _1(100).encode(l,100);return t.processJPEG.call(this,u,n,r,i)}}(dt.API),dt.API.processRGBA=function(t,e,n){for(var r=t.data,i=r.length,s=new Uint8Array(i/4*3),o=new Uint8Array(i/4),a=0,l=0,u=0;u<i;u+=4){var h=r[u],f=r[u+1],m=r[u+2],p=r[u+3];s[a++]=h,s[a++]=f,s[a++]=m,o[l++]=p}var b=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:b,index:e,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},dt.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Du=dt.API,zf=Du.getCharWidthsArray=function(t,e){var n,r,i=(e=e||{}).font||this.internal.getFont(),s=e.fontSize||this.internal.getFontSize(),o=e.charSpace||this.internal.getCharSpace(),a=e.widths?e.widths:i.metadata.Unicode.widths,l=a.fof?a.fof:1,u=e.kerning?e.kerning:i.metadata.Unicode.kerning,h=u.fof?u.fof:1,f=e.doKerning!==!1,m=0,p=t.length,b=0,E=a[0]||l,k=[];for(n=0;n<p;n++)r=t.charCodeAt(n),typeof i.metadata.widthOfString=="function"?k.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(r))+o*(1e3/s)||0)/1e3):(m=f&&Gt(u[r])==="object"&&!isNaN(parseInt(u[r][b],10))?u[r][b]/h:0,k.push((a[r]||E)/l+m)),b=r;return k},Ow=Du.getStringUnitWidth=function(t,e){var n=(e=e||{}).fontSize||this.internal.getFontSize(),r=e.font||this.internal.getFont(),i=e.charSpace||this.internal.getCharSpace();return Du.processArabic&&(t=Du.processArabic(t)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(t,n,i)/n:zf.apply(this,arguments).reduce(function(s,o){return s+o},0)},Fw=function(t,e,n,r){for(var i=[],s=0,o=t.length,a=0;s!==o&&a+e[s]<n;)a+=e[s],s++;i.push(t.slice(0,s));var l=s;for(a=0;s!==o;)a+e[s]>r&&(i.push(t.slice(l,s)),a=0,l=s),a+=e[s],s++;return l!==s&&i.push(t.slice(l,s)),i},Mw=function(t,e,n){n||(n={});var r,i,s,o,a,l,u,h=[],f=[h],m=n.textIndent||0,p=0,b=0,E=t.split(" "),k=zf.apply(this,[" ",n])[0];if(l=n.lineIndent===-1?E[0].length+2:n.lineIndent||0){var w=Array(l).join(" "),x=[];E.map(function(M){(M=M.split(/\s*\n/)).length>1?x=x.concat(M.map(function(Q,z){return(z&&Q.length?`
`:"")+Q})):x.push(M[0])}),E=x,l=Ow.apply(this,[w,n])}for(s=0,o=E.length;s<o;s++){var C=0;if(r=E[s],l&&r[0]==`
`&&(r=r.substr(1),C=1),m+p+(b=(i=zf.apply(this,[r,n])).reduce(function(M,Q){return M+Q},0))>e||C){if(b>e){for(a=Fw.apply(this,[r,i,e-(m+p),e]),h.push(a.shift()),h=[a.pop()];a.length;)f.push([a.shift()]);b=i.slice(r.length-(h[0]?h[0].length:0)).reduce(function(M,Q){return M+Q},0)}else h=[r];f.push(h),m=b+l,p=k}else h.push(r),m+=p+b,p=k}return u=l?function(M,Q){return(Q?w:"")+M.join(" ")}:function(M){return M.join(" ")},f.map(u)},Du.splitTextToSize=function(t,e,n){var r,i=(n=n||{}).fontSize||this.internal.getFontSize(),s=(function(h){if(h.widths&&h.kerning)return{widths:h.widths,kerning:h.kerning};var f=this.internal.getFont(h.fontName,h.fontStyle);return f.metadata.Unicode?{widths:f.metadata.Unicode.widths||{0:1},kerning:f.metadata.Unicode.kerning||{}}:{font:f.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,n);r=Array.isArray(t)?t:String(t).split(/\r?\n/);var o=1*this.internal.scaleFactor*e/i;s.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/i:0,s.lineIndent=n.lineIndent;var a,l,u=[];for(a=0,l=r.length;a<l;a++)u=u.concat(Mw.apply(this,[r[a],o,s]));return u},function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",n={},r={},i=0;i<e.length;i++)n[e[i]]="0123456789abcdef"[i],r["0123456789abcdef"[i]]=e[i];var s=function(f){return"0x"+parseInt(f,10).toString(16)},o=t.__fontmetrics__.compress=function(f){var m,p,b,E,k=["{"];for(var w in f){if(m=f[w],isNaN(parseInt(w,10))?p="'"+w+"'":(w=parseInt(w,10),p=(p=s(w).slice(2)).slice(0,-1)+r[p.slice(-1)]),typeof m=="number")m<0?(b=s(m).slice(3),E="-"):(b=s(m).slice(2),E=""),b=E+b.slice(0,-1)+r[b.slice(-1)];else{if(Gt(m)!=="object")throw new Error("Don't know what to do with value type "+Gt(m)+".");b=o(m)}k.push(p+b)}return k.push("}"),k.join("")},a=t.__fontmetrics__.uncompress=function(f){if(typeof f!="string")throw new Error("Invalid argument passed to uncompress.");for(var m,p,b,E,k={},w=1,x=k,C=[],M="",Q="",z=f.length-1,L=1;L<z;L+=1)(E=f[L])=="'"?m?(b=m.join(""),m=void 0):m=[]:m?m.push(E):E=="{"?(C.push([x,b]),x={},b=void 0):E=="}"?((p=C.pop())[0][p[1]]=x,b=void 0,x=p[0]):E=="-"?w=-1:b===void 0?n.hasOwnProperty(E)?(M+=n[E],b=parseInt(M,16)*w,w=1,M=""):M+=E:n.hasOwnProperty(E)?(Q+=n[E],x[b]=parseInt(Q,16)*w,w=1,b=void 0,Q=""):Q+=E;return k},l={codePages:["WinAnsiEncoding"],WinAnsiEncoding:a("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},u={Unicode:{Courier:l,"Courier-Bold":l,"Courier-BoldOblique":l,"Courier-Oblique":l,Helvetica:l,"Helvetica-Bold":l,"Helvetica-BoldOblique":l,"Helvetica-Oblique":l,"Times-Roman":l,"Times-Bold":l,"Times-BoldItalic":l,"Times-Italic":l}},h={Unicode:{"Courier-Oblique":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":a("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":a("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":a("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:a("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:a("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":a("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:a("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":a("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":a("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":a("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(f){var m=f.font,p=h.Unicode[m.postScriptName];p&&(m.metadata.Unicode={},m.metadata.Unicode.widths=p.widths,m.metadata.Unicode.kerning=p.kerning);var b=u.Unicode[m.postScriptName];b&&(m.metadata.Unicode.encoding=b,m.encoding=b.codePages[0])}])}(dt.API),function(t){var e=function(n){for(var r=n.length,i=new Uint8Array(r),s=0;s<r;s++)i[s]=n.charCodeAt(s);return i};t.API.events.push(["addFont",function(n){var r=void 0,i=n.font,s=n.instance;if(!i.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(r=s.existsFileInVFS(i.postScriptName)===!1?s.loadFile(i.postScriptName):s.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(o,a){a=/^\x00\x01\x00\x00/.test(a)?e(a):e(Qh(a)),o.metadata=t.API.TTFFont.open(a),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(i,r)}}])}(dt),function(t){function e(){return(ft.canvg?Promise.resolve(ft.canvg):W0(()=>import("./index.es-BTn5IkAa.js"),[])).catch(function(n){return Promise.reject(new Error("Could not load canvg: "+n))}).then(function(n){return n.default?n.default:n})}dt.API.addSvgAsImage=function(n,r,i,s,o,a,l,u){if(isNaN(r)||isNaN(i))throw en.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(s)||isNaN(o))throw en.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var h=document.createElement("canvas");h.width=s,h.height=o;var f=h.getContext("2d");f.fillStyle="#fff",f.fillRect(0,0,h.width,h.height);var m={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},p=this;return e().then(function(b){return b.fromString(f,n,m)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(b){return b.render(m)}).then(function(){p.addImage(h.toDataURL("image/jpeg",1),r,i,s,o,l,u)})}}(),dt.API.putTotalPages=function(t){var e,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),n=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var i=0;i<this.internal.pages[r].length;i++)this.internal.pages[r][i]=this.internal.pages[r][i].replace(e,n);return this},dt.API.viewerPreferences=function(t,e){var n;t=t||{},e=e||!1;var r,i,s,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},a=Object.keys(o),l=[],u=0,h=0,f=0;function m(b,E){var k,w=!1;for(k=0;k<b.length;k+=1)b[k]===E&&(w=!0);return w}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,t==="reset"||e===!0){var p=a.length;for(f=0;f<p;f+=1)n[a[f]].value=n[a[f]].defaultValue,n[a[f]].explicitSet=!1}if(Gt(t)==="object"){for(i in t)if(s=t[i],m(a,i)&&s!==void 0){if(n[i].type==="boolean"&&typeof s=="boolean")n[i].value=s;else if(n[i].type==="name"&&m(n[i].valueSet,s))n[i].value=s;else if(n[i].type==="integer"&&Number.isInteger(s))n[i].value=s;else if(n[i].type==="array"){for(u=0;u<s.length;u+=1)if(r=!0,s[u].length===1&&typeof s[u][0]=="number")l.push(String(s[u]-1));else if(s[u].length>1){for(h=0;h<s[u].length;h+=1)typeof s[u][h]!="number"&&(r=!1);r===!0&&l.push([s[u][0]-1,s[u][1]-1].join(" "))}n[i].value="["+l.join(" ")+"]"}else n[i].value=n[i].defaultValue;n[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var b,E=[];for(b in n)n[b].explicitSet===!0&&(n[b].type==="name"?E.push("/"+b+" /"+n[b].value):E.push("/"+b+" "+n[b].value));E.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+E.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},function(t){var e=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(r)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),a=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),l=unescape(encodeURIComponent("</x:xmpmeta>")),u=s.length+o.length+a.length+i.length+l.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+u+" >>"),this.internal.write("stream"),this.internal.write(i+s+o+a+l),this.internal.write("endstream"),this.internal.write("endobj")},n=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(r,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",n),this.internal.events.subscribe("postPutResources",e)),this}}(dt.API),function(t){var e=t.API,n=e.pdfEscape16=function(s,o){for(var a,l=o.metadata.Unicode.widths,u=["","0","00","000","0000"],h=[""],f=0,m=s.length;f<m;++f){if(a=o.metadata.characterToGlyph(s.charCodeAt(f)),o.metadata.glyIdsUsed.push(a),o.metadata.toUnicode[a]=s.charCodeAt(f),l.indexOf(a)==-1&&(l.push(a),l.push([parseInt(o.metadata.widthOfGlyph(a),10)])),a=="0")return h.join("");a=a.toString(16),h.push(u[4-a.length],a)}return h.join("")},r=function(s){var o,a,l,u,h,f,m;for(h=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,l=[],f=0,m=(a=Object.keys(s).sort(function(p,b){return p-b})).length;f<m;f++)o=a[f],l.length>=100&&(h+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar`,l=[]),s[o]!==void 0&&s[o]!==null&&typeof s[o].toString=="function"&&(u=("0000"+s[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),l.push("<"+o+"><"+u+">"));return l.length&&(h+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar
`),h+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(s){(function(o){var a=o.font,l=o.out,u=o.newObject,h=o.putStream;if(a.metadata instanceof t.API.TTFFont&&a.encoding==="Identity-H"){for(var f=a.metadata.Unicode.widths,m=a.metadata.subset.encode(a.metadata.glyIdsUsed,1),p="",b=0;b<m.length;b++)p+=String.fromCharCode(m[b]);var E=u();h({data:p,addLength1:!0,objectId:E}),l("endobj");var k=u();h({data:r(a.metadata.toUnicode),addLength1:!0,objectId:k}),l("endobj");var w=u();l("<<"),l("/Type /FontDescriptor"),l("/FontName /"+Bu(a.fontName)),l("/FontFile2 "+E+" 0 R"),l("/FontBBox "+t.API.PDFObject.convert(a.metadata.bbox)),l("/Flags "+a.metadata.flags),l("/StemV "+a.metadata.stemV),l("/ItalicAngle "+a.metadata.italicAngle),l("/Ascent "+a.metadata.ascender),l("/Descent "+a.metadata.decender),l("/CapHeight "+a.metadata.capHeight),l(">>"),l("endobj");var x=u();l("<<"),l("/Type /Font"),l("/BaseFont /"+Bu(a.fontName)),l("/FontDescriptor "+w+" 0 R"),l("/W "+t.API.PDFObject.convert(f)),l("/CIDToGIDMap /Identity"),l("/DW 1000"),l("/Subtype /CIDFontType2"),l("/CIDSystemInfo"),l("<<"),l("/Supplement 0"),l("/Registry (Adobe)"),l("/Ordering ("+a.encoding+")"),l(">>"),l(">>"),l("endobj"),a.objectNumber=u(),l("<<"),l("/Type /Font"),l("/Subtype /Type0"),l("/ToUnicode "+k+" 0 R"),l("/BaseFont /"+Bu(a.fontName)),l("/Encoding /"+a.encoding),l("/DescendantFonts ["+x+" 0 R]"),l(">>"),l("endobj"),a.isAlreadyPutted=!0}})(s)}]),e.events.push(["putFont",function(s){(function(o){var a=o.font,l=o.out,u=o.newObject,h=o.putStream;if(a.metadata instanceof t.API.TTFFont&&a.encoding==="WinAnsiEncoding"){for(var f=a.metadata.rawData,m="",p=0;p<f.length;p++)m+=String.fromCharCode(f[p]);var b=u();h({data:m,addLength1:!0,objectId:b}),l("endobj");var E=u();h({data:r(a.metadata.toUnicode),addLength1:!0,objectId:E}),l("endobj");var k=u();l("<<"),l("/Descent "+a.metadata.decender),l("/CapHeight "+a.metadata.capHeight),l("/StemV "+a.metadata.stemV),l("/Type /FontDescriptor"),l("/FontFile2 "+b+" 0 R"),l("/Flags 96"),l("/FontBBox "+t.API.PDFObject.convert(a.metadata.bbox)),l("/FontName /"+Bu(a.fontName)),l("/ItalicAngle "+a.metadata.italicAngle),l("/Ascent "+a.metadata.ascender),l(">>"),l("endobj"),a.objectNumber=u();for(var w=0;w<a.metadata.hmtx.widths.length;w++)a.metadata.hmtx.widths[w]=parseInt(a.metadata.hmtx.widths[w]*(1e3/a.metadata.head.unitsPerEm));l("<</Subtype/TrueType/Type/Font/ToUnicode "+E+" 0 R/BaseFont/"+Bu(a.fontName)+"/FontDescriptor "+k+" 0 R/Encoding/"+a.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(a.metadata.hmtx.widths)+">>"),l("endobj"),a.isAlreadyPutted=!0}})(s)}]);var i=function(s){var o,a=s.text||"",l=s.x,u=s.y,h=s.options||{},f=s.mutex||{},m=f.pdfEscape,p=f.activeFontKey,b=f.fonts,E=p,k="",w=0,x="",C=b[E].encoding;if(b[E].encoding!=="Identity-H")return{text:a,x:l,y:u,options:h,mutex:f};for(x=a,E=p,Array.isArray(a)&&(x=a[0]),w=0;w<x.length;w+=1)b[E].metadata.hasOwnProperty("cmap")&&(o=b[E].metadata.cmap.unicode.codeMap[x[w].charCodeAt(0)]),o||x[w].charCodeAt(0)<256&&b[E].metadata.hasOwnProperty("Unicode")?k+=x[w]:k+="";var M="";return parseInt(E.slice(1))<14||C==="WinAnsiEncoding"?M=m(k,E).split("").map(function(Q){return Q.charCodeAt(0).toString(16)}).join(""):C==="Identity-H"&&(M=n(k,b[E])),f.isHex=!0,{text:M,x:l,y:u,options:h,mutex:f}};e.events.push(["postProcessText",function(s){var o=s.text||"",a=[],l={text:o,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(o)){var u=0;for(u=0;u<o.length;u+=1)Array.isArray(o[u])&&o[u].length===3?a.push([i(Object.assign({},l,{text:o[u][0]})).text,o[u][1],o[u][2]]):a.push(i(Object.assign({},l,{text:o[u]})).text);s.text=a}else s.text=i(Object.assign({},l,{text:o})).text}])}(dt),function(t){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0},t.addFileToVFS=function(n,r){return e.call(this),this.internal.vFS[n]=r,this},t.getFileFromVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0?this.internal.vFS[n]:null}}(dt.API),function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(r){var i,s,o,a,l,u,h,f=e,m=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],p=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],b={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},E={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},k=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],w=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),x=!1,C=0;this.__bidiEngine__={};var M=function(A){var I=A.charCodeAt(),P=I>>8,V=E[P];return V!==void 0?f[256*V+(255&I)]:P===252||P===253?"AL":w.test(P)?"L":P===8?"R":"N"},Q=function(A){for(var I,P=0;P<A.length;P++){if((I=M(A.charAt(P)))==="L")return!1;if(I==="R")return!0}return!1},z=function(A,I,P,V){var J,O,U,W,ee=I[V];switch(ee){case"L":case"R":x=!1;break;case"N":case"AN":break;case"EN":x&&(ee="AN");break;case"AL":x=!0,ee="R";break;case"WS":ee="N";break;case"CS":V<1||V+1>=I.length||(J=P[V-1])!=="EN"&&J!=="AN"||(O=I[V+1])!=="EN"&&O!=="AN"?ee="N":x&&(O="AN"),ee=O===J?O:"N";break;case"ES":ee=(J=V>0?P[V-1]:"B")==="EN"&&V+1<I.length&&I[V+1]==="EN"?"EN":"N";break;case"ET":if(V>0&&P[V-1]==="EN"){ee="EN";break}if(x){ee="N";break}for(U=V+1,W=I.length;U<W&&I[U]==="ET";)U++;ee=U<W&&I[U]==="EN"?"EN":"N";break;case"NSM":if(o&&!a){for(W=I.length,U=V+1;U<W&&I[U]==="NSM";)U++;if(U<W){var re=A[V],xe=re>=1425&&re<=2303||re===64286;if(J=I[U],xe&&(J==="R"||J==="AL")){ee="R";break}}}ee=V<1||(J=I[V-1])==="B"?"N":P[V-1];break;case"B":x=!1,i=!0,ee=C;break;case"S":s=!0,ee="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":x=!1;break;case"BN":ee="N"}return ee},L=function(A,I,P){var V=A.split("");return P&&y(V,P,{hiLevel:C}),V.reverse(),I&&I.reverse(),V.join("")},y=function(A,I,P){var V,J,O,U,W,ee=-1,re=A.length,xe=0,F=[],G=C?p:m,Y=[];for(x=!1,i=!1,s=!1,J=0;J<re;J++)Y[J]=M(A[J]);for(O=0;O<re;O++){if(W=xe,F[O]=z(A,Y,F,O),V=240&(xe=G[W][b[F[O]]]),xe&=15,I[O]=U=G[xe][5],V>0)if(V===16){for(J=ee;J<O;J++)I[J]=1;ee=-1}else ee=-1;if(G[xe][6])ee===-1&&(ee=O);else if(ee>-1){for(J=ee;J<O;J++)I[J]=U;ee=-1}Y[O]==="B"&&(I[O]=0),P.hiLevel|=U}s&&function(Z,ae,ie){for(var ce=0;ce<ie;ce++)if(Z[ce]==="S"){ae[ce]=C;for(var fe=ce-1;fe>=0&&Z[fe]==="WS";fe--)ae[fe]=C}}(Y,I,re)},N=function(A,I,P,V,J){if(!(J.hiLevel<A)){if(A===1&&C===1&&!i)return I.reverse(),void(P&&P.reverse());for(var O,U,W,ee,re=I.length,xe=0;xe<re;){if(V[xe]>=A){for(W=xe+1;W<re&&V[W]>=A;)W++;for(ee=xe,U=W-1;ee<U;ee++,U--)O=I[ee],I[ee]=I[U],I[U]=O,P&&(O=P[ee],P[ee]=P[U],P[U]=O);xe=W}xe++}}},R=function(A,I,P){var V=A.split(""),J={hiLevel:C};return P||(P=[]),y(V,P,J),function(O,U,W){if(W.hiLevel!==0&&h)for(var ee,re=0;re<O.length;re++)U[re]===1&&(ee=k.indexOf(O[re]))>=0&&(O[re]=k[ee+1])}(V,P,J),N(2,V,I,P,J),N(1,V,I,P,J),V.join("")};return this.__bidiEngine__.doBidiReorder=function(A,I,P){if(function(J,O){if(O)for(var U=0;U<J.length;U++)O[U]=U;a===void 0&&(a=Q(J)),u===void 0&&(u=Q(J))}(A,I),o||!l||u)if(o&&l&&a^u)C=a?1:0,A=L(A,I,P);else if(!o&&l&&u)C=a?1:0,A=R(A,I,P),A=L(A,I);else if(!o||a||l||u){if(o&&!l&&a^u)A=L(A,I),a?(C=0,A=R(A,I,P)):(C=1,A=R(A,I,P),A=L(A,I));else if(o&&a&&!l&&u)C=1,A=R(A,I,P),A=L(A,I);else if(!o&&!l&&a^u){var V=h;a?(C=1,A=R(A,I,P),C=0,h=!1,A=R(A,I,P),h=V):(C=0,A=R(A,I,P),A=L(A,I),C=1,h=!1,A=R(A,I,P),h=V,A=L(A,I))}}else C=0,A=R(A,I,P);else C=a?1:0,A=R(A,I,P);return A},this.__bidiEngine__.setOptions=function(A){A&&(o=A.isInputVisual,l=A.isOutputVisual,a=A.isInputRtl,u=A.isOutputRtl,h=A.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(r){var i=r.text,s=(r.x,r.y,r.options||{}),o=(r.mutex,s.lang,[]);if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,n.setOptions(s),Object.prototype.toString.call(i)==="[object Array]"){var a=0;for(o=[],a=0;a<i.length;a+=1)Object.prototype.toString.call(i[a])==="[object Array]"?o.push([n.doBidiReorder(i[a][0]),i[a][1],i[a][2]]):o.push([n.doBidiReorder(i[a])]);r.text=o}else r.text=n.doBidiReorder(i);n.setOptions({isInputVisual:!0})}])}(dt),dt.API.TTFFont=function(){function t(e){var n;if(this.rawData=e,n=this.contents=new Qa(e),this.contents.pos=4,n.readString(4)==="ttcf")throw new Error("TTCF not supported.");n.pos=0,this.parse(),this.subset=new ED(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new hD(this.contents),this.head=new fD(this),this.name=new yD(this),this.cmap=new wA(this),this.toUnicode={},this.hhea=new pD(this),this.maxp=new _D(this),this.hmtx=new wD(this),this.post=new gD(this),this.os2=new mD(this),this.loca=new AD(this),this.glyf=new bD(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var e,n,r,i,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var o,a,l,u;for(u=[],o=0,a=(l=this.bbox).length;o<a;o++)e=l[o],u.push(Math.round(e*this.scaleFactor));return u}).call(this),this.stemV=0,this.post.exists?(r=255&(i=this.post.italic_angle),32768&(n=i>>16)&&(n=-(1+(65535^n))),this.italicAngle=+(n+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(e){var n;return((n=this.cmap.unicode)!=null?n.codeMap[e]:void 0)||0},t.prototype.widthOfGlyph=function(e){var n;return n=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*n},t.prototype.widthOfString=function(e,n,r){var i,s,o,a;for(o=0,s=0,a=(e=""+e).length;0<=a?s<a:s>a;s=0<=a?++s:--s)i=e.charCodeAt(s),o+=this.widthOfGlyph(this.characterToGlyph(i))+r*(1e3/n)||0;return o*(n/1e3)},t.prototype.lineHeight=function(e,n){var r;return n==null&&(n=!1),r=n?this.lineGap:0,(this.ascender+r-this.decender)/1e3*e},t}();var ps,Qa=function(){function t(e){this.data=e??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(e){return this.data[this.pos++]=e},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},t.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},t.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},t.prototype.readString=function(e){var n,r;for(r=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)r[n]=String.fromCharCode(this.readByte());return r.join("")},t.prototype.writeString=function(e){var n,r,i;for(i=[],n=0,r=e.length;0<=r?n<r:n>r;n=0<=r?++n:--n)i.push(this.writeByte(e.charCodeAt(n)));return i},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(e){return this.writeInt16(e)},t.prototype.readLongLong=function(){var e,n,r,i,s,o,a,l;return e=this.readByte(),n=this.readByte(),r=this.readByte(),i=this.readByte(),s=this.readByte(),o=this.readByte(),a=this.readByte(),l=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^n)+1099511627776*(255^r)+4294967296*(255^i)+16777216*(255^s)+65536*(255^o)+256*(255^a)+(255^l)+1):72057594037927940*e+281474976710656*n+1099511627776*r+4294967296*i+16777216*s+65536*o+256*a+l},t.prototype.writeLongLong=function(e){var n,r;return n=Math.floor(e/4294967296),r=4294967295&e,this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(e){return this.writeInt32(e)},t.prototype.read=function(e){var n,r;for(n=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)n.push(this.readByte());return n},t.prototype.write=function(e){var n,r,i,s;for(s=[],r=0,i=e.length;r<i;r++)n=e[r],s.push(this.writeByte(n));return s},t}(),hD=function(){var t;function e(n){var r,i,s;for(this.scalarType=n.readInt(),this.tableCount=n.readShort(),this.searchRange=n.readShort(),this.entrySelector=n.readShort(),this.rangeShift=n.readShort(),this.tables={},i=0,s=this.tableCount;0<=s?i<s:i>s;i=0<=s?++i:--i)r={tag:n.readString(4),checksum:n.readInt(),offset:n.readInt(),length:n.readInt()},this.tables[r.tag]=r}return e.prototype.encode=function(n){var r,i,s,o,a,l,u,h,f,m,p,b,E;for(E in p=Object.keys(n).length,l=Math.log(2),f=16*Math.floor(Math.log(p)/l),o=Math.floor(f/l),h=16*p-f,(i=new Qa).writeInt(this.scalarType),i.writeShort(p),i.writeShort(f),i.writeShort(o),i.writeShort(h),s=16*p,u=i.pos+s,a=null,b=[],n)for(m=n[E],i.writeString(E),i.writeInt(t(m)),i.writeInt(u),i.writeInt(m.length),b=b.concat(m),E==="head"&&(a=u),u+=m.length;u%4;)b.push(0),u++;return i.write(b),r=2981146554-t(i.data),i.pos=a+8,i.writeUInt32(r),i.data},t=function(n){var r,i,s,o;for(n=bA.call(n);n.length%4;)n.push(0);for(s=new Qa(n),i=0,r=0,o=n.length;r<o;r=r+=4)i+=s.readUInt32();return 4294967295&i},e}(),dD={}.hasOwnProperty,Gs=function(t,e){for(var n in e)dD.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};ps=function(){function t(e){var n;this.file=e,n=this.file.directory.tables[this.tag],this.exists=!!n,n&&(this.offset=n.offset,this.length=n.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t}();var fD=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Gs(e,ps),e.prototype.tag="head",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.revision=n.readInt(),this.checkSumAdjustment=n.readInt(),this.magicNumber=n.readInt(),this.flags=n.readShort(),this.unitsPerEm=n.readShort(),this.created=n.readLongLong(),this.modified=n.readLongLong(),this.xMin=n.readShort(),this.yMin=n.readShort(),this.xMax=n.readShort(),this.yMax=n.readShort(),this.macStyle=n.readShort(),this.lowestRecPPEM=n.readShort(),this.fontDirectionHint=n.readShort(),this.indexToLocFormat=n.readShort(),this.glyphDataFormat=n.readShort()},e.prototype.encode=function(n){var r;return(r=new Qa).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(n),r.writeShort(this.glyphDataFormat),r.data},e}(),Bw=function(){function t(e,n){var r,i,s,o,a,l,u,h,f,m,p,b,E,k,w,x,C;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=n+e.readInt(),f=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(l=0;l<256;++l)this.codeMap[l]=e.readByte();break;case 4:for(p=e.readUInt16(),m=p/2,e.pos+=6,s=function(){var M,Q;for(Q=[],l=M=0;0<=m?M<m:M>m;l=0<=m?++M:--M)Q.push(e.readUInt16());return Q}(),e.pos+=2,E=function(){var M,Q;for(Q=[],l=M=0;0<=m?M<m:M>m;l=0<=m?++M:--M)Q.push(e.readUInt16());return Q}(),u=function(){var M,Q;for(Q=[],l=M=0;0<=m?M<m:M>m;l=0<=m?++M:--M)Q.push(e.readUInt16());return Q}(),h=function(){var M,Q;for(Q=[],l=M=0;0<=m?M<m:M>m;l=0<=m?++M:--M)Q.push(e.readUInt16());return Q}(),i=(this.length-e.pos+this.offset)/2,a=function(){var M,Q;for(Q=[],l=M=0;0<=i?M<i:M>i;l=0<=i?++M:--M)Q.push(e.readUInt16());return Q}(),l=w=0,C=s.length;w<C;l=++w)for(k=s[l],r=x=b=E[l];b<=k?x<=k:x>=k;r=b<=k?++x:--x)h[l]===0?o=r+u[l]:(o=a[h[l]/2+(r-b)-(m-l)]||0)!==0&&(o+=u[l]),this.codeMap[r]=65535&o}e.pos=f}return t.encode=function(e,n){var r,i,s,o,a,l,u,h,f,m,p,b,E,k,w,x,C,M,Q,z,L,y,N,R,A,I,P,V,J,O,U,W,ee,re,xe,F,G,Y,Z,ae,ie,ce,fe,Ie,Ee,je;switch(V=new Qa,o=Object.keys(e).sort(function(Ue,Ye){return Ue-Ye}),n){case"macroman":for(E=0,k=function(){var Ue=[];for(b=0;b<256;++b)Ue.push(0);return Ue}(),x={0:0},s={},J=0,ee=o.length;J<ee;J++)x[fe=e[i=o[J]]]==null&&(x[fe]=++E),s[i]={old:e[i],new:x[e[i]]},k[i]=x[e[i]];return V.writeUInt16(1),V.writeUInt16(0),V.writeUInt32(12),V.writeUInt16(0),V.writeUInt16(262),V.writeUInt16(0),V.write(k),{charMap:s,subtable:V.data,maxGlyphID:E+1};case"unicode":for(I=[],f=[],C=0,x={},r={},w=u=null,O=0,re=o.length;O<re;O++)x[Q=e[i=o[O]]]==null&&(x[Q]=++C),r[i]={old:Q,new:x[Q]},a=x[Q]-i,w!=null&&a===u||(w&&f.push(w),I.push(i),u=a),w=i;for(w&&f.push(w),f.push(65535),I.push(65535),R=2*(N=I.length),y=2*Math.pow(Math.log(N)/Math.LN2,2),m=Math.log(y/2)/Math.LN2,L=2*N-y,l=[],z=[],p=[],b=U=0,xe=I.length;U<xe;b=++U){if(A=I[b],h=f[b],A===65535){l.push(0),z.push(0);break}if(A-(P=r[A].new)>=32768)for(l.push(0),z.push(2*(p.length+N-b)),i=W=A;A<=h?W<=h:W>=h;i=A<=h?++W:--W)p.push(r[i].new);else l.push(P-A),z.push(0)}for(V.writeUInt16(3),V.writeUInt16(1),V.writeUInt32(12),V.writeUInt16(4),V.writeUInt16(16+8*N+2*p.length),V.writeUInt16(0),V.writeUInt16(R),V.writeUInt16(y),V.writeUInt16(m),V.writeUInt16(L),ie=0,F=f.length;ie<F;ie++)i=f[ie],V.writeUInt16(i);for(V.writeUInt16(0),ce=0,G=I.length;ce<G;ce++)i=I[ce],V.writeUInt16(i);for(Ie=0,Y=l.length;Ie<Y;Ie++)a=l[Ie],V.writeUInt16(a);for(Ee=0,Z=z.length;Ee<Z;Ee++)M=z[Ee],V.writeUInt16(M);for(je=0,ae=p.length;je<ae;je++)E=p[je],V.writeUInt16(E);return{charMap:r,subtable:V.data,maxGlyphID:C+1}}},t}(),wA=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Gs(e,ps),e.prototype.tag="cmap",e.prototype.parse=function(n){var r,i,s;for(n.pos=this.offset,this.version=n.readUInt16(),s=n.readUInt16(),this.tables=[],this.unicode=null,i=0;0<=s?i<s:i>s;i=0<=s?++i:--i)r=new Bw(n,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},e.encode=function(n,r){var i,s;return r==null&&(r="macroman"),i=Bw.encode(n,r),(s=new Qa).writeUInt16(0),s.writeUInt16(1),i.table=s.data.concat(i.subtable),i},e}(),pD=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Gs(e,ps),e.prototype.tag="hhea",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.ascender=n.readShort(),this.decender=n.readShort(),this.lineGap=n.readShort(),this.advanceWidthMax=n.readShort(),this.minLeftSideBearing=n.readShort(),this.minRightSideBearing=n.readShort(),this.xMaxExtent=n.readShort(),this.caretSlopeRise=n.readShort(),this.caretSlopeRun=n.readShort(),this.caretOffset=n.readShort(),n.pos+=8,this.metricDataFormat=n.readShort(),this.numberOfMetrics=n.readUInt16()},e}(),mD=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Gs(e,ps),e.prototype.tag="OS/2",e.prototype.parse=function(n){if(n.pos=this.offset,this.version=n.readUInt16(),this.averageCharWidth=n.readShort(),this.weightClass=n.readUInt16(),this.widthClass=n.readUInt16(),this.type=n.readShort(),this.ySubscriptXSize=n.readShort(),this.ySubscriptYSize=n.readShort(),this.ySubscriptXOffset=n.readShort(),this.ySubscriptYOffset=n.readShort(),this.ySuperscriptXSize=n.readShort(),this.ySuperscriptYSize=n.readShort(),this.ySuperscriptXOffset=n.readShort(),this.ySuperscriptYOffset=n.readShort(),this.yStrikeoutSize=n.readShort(),this.yStrikeoutPosition=n.readShort(),this.familyClass=n.readShort(),this.panose=function(){var r,i;for(i=[],r=0;r<10;++r)i.push(n.readByte());return i}(),this.charRange=function(){var r,i;for(i=[],r=0;r<4;++r)i.push(n.readInt());return i}(),this.vendorID=n.readString(4),this.selection=n.readShort(),this.firstCharIndex=n.readShort(),this.lastCharIndex=n.readShort(),this.version>0&&(this.ascent=n.readShort(),this.descent=n.readShort(),this.lineGap=n.readShort(),this.winAscent=n.readShort(),this.winDescent=n.readShort(),this.codePageRange=function(){var r,i;for(i=[],r=0;r<2;r=++r)i.push(n.readInt());return i}(),this.version>1))return this.xHeight=n.readShort(),this.capHeight=n.readShort(),this.defaultChar=n.readShort(),this.breakChar=n.readShort(),this.maxContext=n.readShort()},e}(),gD=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Gs(e,ps),e.prototype.tag="post",e.prototype.parse=function(n){var r,i,s;switch(n.pos=this.offset,this.format=n.readInt(),this.italicAngle=n.readInt(),this.underlinePosition=n.readShort(),this.underlineThickness=n.readShort(),this.isFixedPitch=n.readInt(),this.minMemType42=n.readInt(),this.maxMemType42=n.readInt(),this.minMemType1=n.readInt(),this.maxMemType1=n.readInt(),this.format){case 65536:break;case 131072:var o;for(i=n.readUInt16(),this.glyphNameIndex=[],o=0;0<=i?o<i:o>i;o=0<=i?++o:--o)this.glyphNameIndex.push(n.readUInt16());for(this.names=[],s=[];n.pos<this.offset+this.length;)r=n.readByte(),s.push(this.names.push(n.readString(r)));return s;case 151552:return i=n.readUInt16(),this.offsets=n.read(i);case 196608:break;case 262144:return this.map=(function(){var a,l,u;for(u=[],o=a=0,l=this.file.maxp.numGlyphs;0<=l?a<l:a>l;o=0<=l?++a:--a)u.push(n.readUInt32());return u}).call(this)}},e}(),vD=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},yD=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Gs(e,ps),e.prototype.tag="name",e.prototype.parse=function(n){var r,i,s,o,a,l,u,h,f,m,p;for(n.pos=this.offset,n.readShort(),r=n.readShort(),l=n.readShort(),i=[],o=0;0<=r?o<r:o>r;o=0<=r?++o:--o)i.push({platformID:n.readShort(),encodingID:n.readShort(),languageID:n.readShort(),nameID:n.readShort(),length:n.readShort(),offset:this.offset+l+n.readShort()});for(u={},o=f=0,m=i.length;f<m;o=++f)s=i[o],n.pos=s.offset,h=n.readString(s.length),a=new vD(h,s),u[p=s.nameID]==null&&(u[p]=[]),u[s.nameID].push(a);this.strings=u,this.copyright=u[0],this.fontFamily=u[1],this.fontSubfamily=u[2],this.uniqueSubfamily=u[3],this.fontName=u[4],this.version=u[5];try{this.postscriptName=u[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=u[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=u[7],this.manufacturer=u[8],this.designer=u[9],this.description=u[10],this.vendorUrl=u[11],this.designerUrl=u[12],this.license=u[13],this.licenseUrl=u[14],this.preferredFamily=u[15],this.preferredSubfamily=u[17],this.compatibleFull=u[18],this.sampleText=u[19]},e}(),_D=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Gs(e,ps),e.prototype.tag="maxp",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.numGlyphs=n.readUInt16(),this.maxPoints=n.readUInt16(),this.maxContours=n.readUInt16(),this.maxCompositePoints=n.readUInt16(),this.maxComponentContours=n.readUInt16(),this.maxZones=n.readUInt16(),this.maxTwilightPoints=n.readUInt16(),this.maxStorage=n.readUInt16(),this.maxFunctionDefs=n.readUInt16(),this.maxInstructionDefs=n.readUInt16(),this.maxStackElements=n.readUInt16(),this.maxSizeOfInstructions=n.readUInt16(),this.maxComponentElements=n.readUInt16(),this.maxComponentDepth=n.readUInt16()},e}(),wD=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Gs(e,ps),e.prototype.tag="hmtx",e.prototype.parse=function(n){var r,i,s,o,a,l,u;for(n.pos=this.offset,this.metrics=[],r=0,l=this.file.hhea.numberOfMetrics;0<=l?r<l:r>l;r=0<=l?++r:--r)this.metrics.push({advance:n.readUInt16(),lsb:n.readInt16()});for(s=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var h,f;for(f=[],r=h=0;0<=s?h<s:h>s;r=0<=s?++h:--h)f.push(n.readInt16());return f}(),this.widths=(function(){var h,f,m,p;for(p=[],h=0,f=(m=this.metrics).length;h<f;h++)o=m[h],p.push(o.advance);return p}).call(this),i=this.widths[this.widths.length-1],u=[],r=a=0;0<=s?a<s:a>s;r=0<=s?++a:--a)u.push(this.widths.push(i));return u},e.prototype.forGlyph=function(n){return n in this.metrics?this.metrics[n]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[n-this.metrics.length]}},e}(),bA=[].slice,bD=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Gs(e,ps),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(n){var r,i,s,o,a,l,u,h,f,m;return n in this.cache?this.cache[n]:(o=this.file.loca,r=this.file.contents,i=o.indexOf(n),(s=o.lengthOf(n))===0?this.cache[n]=null:(r.pos=this.offset+i,a=(l=new Qa(r.read(s))).readShort(),h=l.readShort(),m=l.readShort(),u=l.readShort(),f=l.readShort(),this.cache[n]=a===-1?new SD(l,h,m,u,f):new xD(l,a,h,m,u,f),this.cache[n]))},e.prototype.encode=function(n,r,i){var s,o,a,l,u;for(a=[],o=[],l=0,u=r.length;l<u;l++)s=n[r[l]],o.push(a.length),s&&(a=a.concat(s.encode(i)));return o.push(a.length),{table:a,offsets:o}},e}(),xD=function(){function t(e,n,r,i,s,o){this.raw=e,this.numberOfContours=n,this.xMin=r,this.yMin=i,this.xMax=s,this.yMax=o,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t}(),SD=function(){function t(e,n,r,i,s){var o,a;for(this.raw=e,this.xMin=n,this.yMin=r,this.xMax=i,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;a=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&a;)o.pos+=1&a?4:2,128&a?o.pos+=8:64&a?o.pos+=4:8&a&&(o.pos+=2)}return t.prototype.encode=function(){var e,n,r;for(n=new Qa(bA.call(this.raw.data)),e=0,r=this.glyphIDs.length;e<r;++e)n.pos=this.glyphOffsets[e];return n.data},t}(),AD=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Gs(e,ps),e.prototype.tag="loca",e.prototype.parse=function(n){var r,i;return n.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var s,o;for(o=[],i=0,s=this.length;i<s;i+=2)o.push(2*n.readUInt16());return o}).call(this):(function(){var s,o;for(o=[],i=0,s=this.length;i<s;i+=4)o.push(n.readUInt32());return o}).call(this)},e.prototype.indexOf=function(n){return this.offsets[n]},e.prototype.lengthOf=function(n){return this.offsets[n+1]-this.offsets[n]},e.prototype.encode=function(n,r){for(var i=new Uint32Array(this.offsets.length),s=0,o=0,a=0;a<i.length;++a)if(i[a]=s,o<r.length&&r[o]==a){++o,i[a]=s;var l=this.offsets[a],u=this.offsets[a+1]-l;u>0&&(s+=u)}for(var h=new Array(4*i.length),f=0;f<i.length;++f)h[4*f+3]=255&i[f],h[4*f+2]=(65280&i[f])>>8,h[4*f+1]=(16711680&i[f])>>16,h[4*f]=(4278190080&i[f])>>24;return h},e}(),ED=function(){function t(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var e,n,r,i,s;for(n in i=this.font.cmap.tables[0].codeMap,e={},s=this.subset)r=s[n],e[n]=i[r];return e},t.prototype.glyphsFor=function(e){var n,r,i,s,o,a,l;for(i={},o=0,a=e.length;o<a;o++)i[s=e[o]]=this.font.glyf.glyphFor(s);for(s in n=[],i)(r=i[s])!=null&&r.compound&&n.push.apply(n,r.glyphIDs);if(n.length>0)for(s in l=this.glyphsFor(n))r=l[s],i[s]=r;return i},t.prototype.encode=function(e,n){var r,i,s,o,a,l,u,h,f,m,p,b,E,k,w;for(i in r=wA.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(e),p={0:0},w=r.charMap)p[(l=w[i]).old]=l.new;for(b in m=r.maxGlyphID,o)b in p||(p[b]=m++);return h=function(x){var C,M;for(C in M={},x)M[x[C]]=C;return M}(p),f=Object.keys(h).sort(function(x,C){return x-C}),E=function(){var x,C,M;for(M=[],x=0,C=f.length;x<C;x++)a=f[x],M.push(h[a]);return M}(),s=this.font.glyf.encode(o,E,p),u=this.font.loca.encode(s.offsets,E),k={cmap:this.font.cmap.raw(),glyf:s.table,loca:u,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(n)},this.font.os2.exists&&(k["OS/2"]=this.font.os2.raw()),this.font.directory.encode(k)},t}();dt.API.PDFObject=function(){var t;function e(){}return t=function(n,r){return(Array(r+1).join("0")+n).slice(-r)},e.convert=function(n){var r,i,s,o;if(Array.isArray(n))return"["+function(){var a,l,u;for(u=[],a=0,l=n.length;a<l;a++)r=n[a],u.push(e.convert(r));return u}().join(" ")+"]";if(typeof n=="string")return"/"+n;if(n!=null&&n.isString)return"("+n+")";if(n instanceof Date)return"(D:"+t(n.getUTCFullYear(),4)+t(n.getUTCMonth(),2)+t(n.getUTCDate(),2)+t(n.getUTCHours(),2)+t(n.getUTCMinutes(),2)+t(n.getUTCSeconds(),2)+"Z)";if({}.toString.call(n)==="[object Object]"){for(i in s=["<<"],n)o=n[i],s.push("/"+i+" "+e.convert(o));return s.push(">>"),s.join(`
`)}return""+n},e}();async function ND(t,e,n,r){const i=new dt("portrait","mm","a4"),s=r?n:[n[0]],o=E7(t,e);let a=null;try{const f=await fetch("/logo_black.png");if(f.ok){const m=await f.blob();a=await new Promise(p=>{const b=new FileReader;b.onloadend=()=>p(b.result),b.readAsDataURL(m)})}}catch(f){console.log("Could not load logo:",f)}s.forEach((f,m)=>{m>0&&i.addPage(),ID(i,t,e,o,f,a)});const l=ZS(e),h=`Timeregistrering_${eA(t,e).replace(" / ","_")}_${l.replace(" / ","_")}.pdf`;i.save(h)}function ID(t,e,n,r,i,s){const o=t.internal.pageSize.getWidth(),a=t.internal.pageSize.getHeight(),l=15;let u=l;t.setFontSize(18),t.setFont("helvetica","bold");const h=eA(e,n);if(t.text(`${h} Timeregistrering`,l,u),s)try{t.addImage(s,"PNG",o-l-40,u-5,40,20)}catch(w){console.log("Error adding logo to PDF:",w)}u+=8,t.setFontSize(12),t.setFont("helvetica","normal");const f=ZS(n);t.text(f,l,u),u+=8,t.setFontSize(9),t.setFont("helvetica","normal"),t.text("AC Handymand.dk ApS",l,u),u+=4,t.text("Axel Juels All 72",l,u),u+=4,t.text("2750 Ballerup",l,u),u+=4,t.text("CVR 42397792",l,u),u+=6,t.setFont("helvetica","normal"),t.setFontSize(9),t.text("Oversigt over arbejdstimer, SH og overarbejde (OA).",l,u),u+=4,t.setFont("helvetica","bold"),t.setTextColor(255,0,0),t.text("Afleveres d. 19 i hver mned.",l,u),t.setTextColor(0,0,0),u+=8,TD(t,l,u,o-2*l,r);const m=a-25,p=o/3,b=(o-p)/2;t.setFont("helvetica","normal"),t.setFontSize(10),t.text("Underskrift:",b-25,m),t.line(b,m,b+p,m);const E=t.getTextWidth(i),k=b+(p-E)/2;t.text(i,k,m+6)}function TD(t,e,n,r,i){const s=[{header:"Dato",width:12},{header:"Ugedag",width:14},{header:"Fra kl. / Til kl.",width:32},{header:"Total timer",width:22},{header:`Total timer
minus frokost`,width:28},{header:`Kundens navn / Nume client
By / Oras`,width:50},{header:"Arb. timer",width:22},{header:"OA",width:8}],o=s.reduce((f,m)=>f+m.width,0),a=r/o;s.forEach(f=>f.width*=a);const l=6,u=8;let h=e;t.setFontSize(8),t.setFont("helvetica","bold"),s.forEach(f=>{t.rect(h,n,f.width,u);const m=f.header.split(`
`),p=3,b=n+3;m.forEach((E,k)=>{t.text(E,h+1,b+k*p)}),h+=f.width}),n+=u,t.setFont("helvetica","normal"),t.setFontSize(8),i.forEach(f=>{h=e,s.forEach((m,p)=>{t.rect(h,n,m.width,l);let b="",E=[0,0,0];p===0?b=f.formattedDate:p===1&&(b=f.weekday,f.isWeekend&&(E=[255,0,0])),b&&(t.setTextColor(...E),t.text(b,h+1,n+l/2+1.5),t.setTextColor(0,0,0)),h+=m.width}),n+=l})}function kD(){const[t,e]=de.useState(new Date().getFullYear()),[n,r]=de.useState(new Date().getMonth()),[i,s]=de.useState(!1),[o,a]=de.useState(""),[l,u]=de.useState([]),[h,f]=de.useState(!1),[m,p]=de.useState(!1),b=N7(),E=Array.from({length:10},(x,C)=>new Date().getFullYear()-2+C);de.useEffect(()=>{k()},[]);const k=async()=>{f(!0);try{const x=await Do(Cr(jt,"employees")),C=[];x.forEach(M=>{C.push({id:M.id,...M.data()})}),C.sort((M,Q)=>M.name.localeCompare(Q.name)),u(C),C.length>0&&!o&&a(C[0].name)}catch(x){console.error("Error loading employees:",x)}finally{f(!1)}},w=async()=>{if(!i&&!o){alert("Vlg venligst en medarbejder.");return}p(!0);try{const x=i?l.map(C=>C.name):[o];await ND(t,n,x,i)}catch(x){console.error("Error generating PDF:",x),alert("Der opstod en fejl ved generering af PDF. Prv igen.")}finally{p(!1)}};return v.jsxs("div",{children:[v.jsxs("div",{className:"page-header",children:[v.jsx("h1",{children:"Timeregistrering"}),v.jsx("p",{children:"Generr timeregistreringsformularer til medarbejdere"})]}),v.jsx("div",{className:"content-card",children:v.jsxs("div",{className:"timesheet-form",children:[v.jsxs("div",{className:"form-section",children:[v.jsx("label",{htmlFor:"year",children:"Vlg r"}),v.jsx("select",{id:"year",value:t,onChange:x=>e(Number(x.target.value)),children:E.map(x=>v.jsx("option",{value:x,children:x},x))})]}),v.jsxs("div",{className:"form-section",children:[v.jsx("label",{htmlFor:"monthPair",children:"Vlg mneder"}),v.jsx("select",{id:"monthPair",value:n,onChange:x=>r(Number(x.target.value)),children:b.map(x=>v.jsx("option",{value:x.value,children:x.label},x.value))})]}),v.jsxs("div",{className:"form-section",children:[v.jsx("label",{children:"Ansatte"}),v.jsxs("div",{className:"checkbox-group",children:[v.jsx("input",{type:"checkbox",id:"allEmployees",checked:i,onChange:x=>s(x.target.checked)}),v.jsx("label",{htmlFor:"allEmployees",children:"Alle ansatte"})]}),h?v.jsx("p",{children:"Indlser medarbejdere..."}):v.jsx("select",{value:o,onChange:x=>a(x.target.value),disabled:i||l.length===0,children:l.length===0?v.jsx("option",{value:"",children:"Ingen medarbejdere tilgngelige"}):l.map(x=>v.jsx("option",{value:x.name,children:x.name},x.id))})]}),m&&v.jsxs("div",{className:"loading-indicator",children:[v.jsx("div",{className:"spinner"}),v.jsx("span",{children:"Genererer dokument..."})]}),v.jsx("button",{className:"btn-generate",onClick:w,disabled:m||l.length===0,children:"Generr og download dokument"}),l.length===0&&!h&&v.jsx("p",{style:{color:"#e74c3c",fontSize:"14px",marginTop:"10px"},children:"Ingen medarbejdere fundet. Tilfj medarbejdere i Indstillinger frst."})]})})]})}function PD({employee:t,onSave:e,onClose:n,isOpen:r}){const[i,s]=de.useState("");de.useEffect(()=>{s(t&&t.name||"")},[t,r]);const o=a=>{if(a.preventDefault(),!i.trim()){alert("Indtast venligst et navn.");return}e({name:i.trim()})};return r?v.jsx("div",{className:"modal-overlay",onClick:n,children:v.jsxs("div",{className:"modal-content",onClick:a=>a.stopPropagation(),children:[v.jsxs("div",{className:"modal-header",children:[v.jsx("h2",{children:t?"Redigr medarbejder":"Tilfj medarbejder"}),v.jsx("button",{className:"modal-close",onClick:n,children:""})]}),v.jsxs("form",{onSubmit:o,children:[v.jsx("div",{className:"modal-body",children:v.jsxs("div",{className:"form-group",children:[v.jsx("label",{htmlFor:"employeeName",children:"Navn *"}),v.jsx("input",{type:"text",id:"employeeName",value:i,onChange:a=>s(a.target.value),placeholder:"Indtast medarbejdernavn",autoFocus:!0,required:!0})]})}),v.jsxs("div",{className:"modal-footer",children:[v.jsx("button",{type:"button",className:"btn-secondary",onClick:n,children:"Annuller"}),v.jsx("button",{type:"submit",className:"btn-primary",children:t?"Gem":"Tilfj"})]})]})]})}):null}function CD(){const{showSuccess:t,showError:e,showCriticalConfirm:n}=Za(),[r,i]=de.useState([]),[s,o]=de.useState(!1),[a,l]=de.useState(!1),[u,h]=de.useState(null),[f,m]=de.useState(450),[p,b]=de.useState(!1),[E,k]=de.useState(450);de.useEffect(()=>{w(),x()},[]);const w=async()=>{try{const y=await Zm($n(jt,"settings","hourlyRates"));if(y.exists()){const N=y.data().defaultRate||450;m(N),k(N)}}catch(y){console.error("Error loading settings:",y)}},x=async()=>{o(!0);try{const y=await Do(Cr(jt,"employees")),N=[];y.forEach(R=>{N.push({id:R.id,...R.data()})}),N.sort((R,A)=>R.name.localeCompare(A.name)),i(N)}catch(y){console.error("Error loading employees:",y),e("Der opstod en fejl ved indlsning af medarbejdere.")}finally{o(!1)}},C=async()=>{try{const y=parseFloat(E);if(isNaN(y)||y<=0){e("Indtast venligst en gyldig timepris.");return}await $0($n(jt,"settings","hourlyRates"),{defaultRate:y,updatedAt:new Date().toISOString()}),m(y),b(!1),t("Timepris gemt!")}catch(y){console.error("Error saving default rate:",y),e("Der opstod en fejl ved gemning af timepris.")}},M=()=>{h(null),l(!0)},Q=y=>{h(y),l(!0)},z=async y=>{if(await n({title:"Slet medarbejder?",message:"Dette vil permanent slette medarbejderen fra systemet.",itemName:y.name,warningText:"Historiske timeregistreringer vil stadig vre synlige, men medarbejderen kan ikke vlges fremadrettet",confirmText:"Slet Permanent",cancelText:"Annuller"}))try{await iu($n(jt,"employees",y.id)),t("Medarbejder slettet!"),await x()}catch(R){console.error("Error deleting employee:",R),e("Der opstod en fejl ved sletning af medarbejder.")}},L=async y=>{try{u?(await Kl($n(jt,"employees",u.id),{name:y.name,updatedAt:new Date().toISOString()}),t("Medarbejder opdateret!")):(await su(Cr(jt,"employees"),{name:y.name,createdAt:new Date().toISOString()}),t("Medarbejder oprettet!")),l(!1),await x()}catch(N){console.error("Error saving employee:",N),e("Der opstod en fejl ved gemning af medarbejder.")}};return v.jsxs("div",{children:[v.jsxs("div",{className:"page-header",children:[v.jsx("h1",{children:"Indstillinger"}),v.jsx("p",{children:"Administrr medarbejdere og priser"})]}),v.jsxs("div",{className:"content-card",style:{marginBottom:"20px"},children:[v.jsx("h2",{style:{marginBottom:"20px",fontSize:"20px",color:"#2c3e50"},children:"Standard Timepris"}),p?v.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"15px"},children:[v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[v.jsx("input",{type:"number",value:E,onChange:y=>k(y.target.value),min:"0",step:"50",style:{padding:"10px",fontSize:"18px",width:"150px",border:"1px solid #ddd",borderRadius:"5px"},autoFocus:!0}),v.jsx("span",{style:{color:"#7f8c8d"},children:"kr/time"})]}),v.jsxs("div",{style:{display:"flex",gap:"10px"},children:[v.jsx("button",{className:"btn-secondary",onClick:()=>{k(f),b(!1)},children:"Annuller"}),v.jsx("button",{className:"btn-primary",onClick:C,children:"Gem"})]})]}):v.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[v.jsxs("div",{children:[v.jsxs("div",{style:{fontSize:"32px",fontWeight:"bold",color:"#27ae60",marginBottom:"5px"},children:[f," kr"]}),v.jsx("div",{style:{fontSize:"14px",color:"#7f8c8d"},children:"Standard timepris brugt for alle sager (kan tilpasses per sag)"})]}),v.jsx("button",{className:"btn-secondary",onClick:()=>b(!0),children:"Redigr"})]})]}),v.jsxs("div",{className:"content-card",children:[v.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[v.jsx("h2",{style:{margin:0,fontSize:"20px",color:"#2c3e50"},children:"Medarbejdere"}),v.jsx("button",{className:"btn-primary",onClick:M,children:"+ Tilfj Medarbejder"})]}),s?v.jsx("p",{children:"Indlser medarbejdere..."}):r.length===0?v.jsx("div",{style:{textAlign:"center",padding:"40px",color:"#7f8c8d"},children:v.jsx("p",{children:"Ingen medarbejdere tilfjet endnu."})}):v.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[v.jsx("thead",{children:v.jsxs("tr",{style:{borderBottom:"2px solid #ecf0f1"},children:[v.jsx("th",{style:{textAlign:"left",padding:"12px",color:"#2c3e50",fontWeight:"600"},children:"Navn"}),v.jsx("th",{style:{textAlign:"right",padding:"12px",color:"#2c3e50",fontWeight:"600"},children:"Handlinger"})]})}),v.jsx("tbody",{children:r.map(y=>v.jsxs("tr",{style:{borderBottom:"1px solid #ecf0f1"},children:[v.jsx("td",{style:{padding:"15px"},children:v.jsx("strong",{style:{fontSize:"15px",color:"#2c3e50"},children:y.name})}),v.jsxs("td",{style:{padding:"15px",textAlign:"right"},children:[v.jsx("button",{className:"btn-action btn-edit",onClick:()=>Q(y),children:"Redigr"}),v.jsx("button",{className:"btn-action btn-delete",onClick:()=>z(y),children:"Slet"})]})]},y.id))})]})]}),v.jsx(PD,{isOpen:a,onClose:()=>l(!1),onSave:L,employee:u})]})}const LD=async t=>{const e=$n(jt,"projectCounter",String(t));try{const n=await Zm(e);if(n.exists()){const i=(n.data().currentNumber||0)+1;return await $0(e,{currentNumber:i}),qw(t,i)}else return await $0(e,{currentNumber:1}),qw(t,1)}catch(n){throw console.error("Error getting next project number:",n),n}},qw=(t,e)=>{const n=String(e).padStart(4,"0");return`${t}-${n}`},xA=t=>!t||t.length===0?0:t.reduce((e,n)=>e+(n.duration||0),0),RD=t=>!t||t.length===0?0:t.filter(e=>e.billable).reduce((e,n)=>e+(n.duration||0),0),jD=t=>!t||t.length===0?0:t.filter(e=>e.billable).reduce((e,n)=>e+(n.duration||0)*(n.rate||0),0),SA=async t=>{try{const e=$v(Cr(jt,"timeEntries"),Hv("projectId","==",t)),n=await Do(e),r=[];return n.forEach(i=>{r.push({id:i.id,...i.data()})}),r.sort((i,s)=>new Date(s.date)-new Date(i.date)),r}catch(e){throw console.error("Error getting project time entries:",e),e}},DD=t=>t?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t):!0,OD=t=>t?t.replace(/\D/g,"").length===8:!0;function AA({isOpen:t,onClose:e,onSave:n,project:r}){const[i,s]=de.useState({name:"",customerName:"",customerPhone:"",customerEmail:"",address:"",type:"fixed-price",status:"planned"}),[o,a]=de.useState({});de.useEffect(()=>{s(r?{name:r.name||"",customerName:r.customerName||"",customerPhone:r.customerPhone||"",customerEmail:r.customerEmail||"",address:r.address||"",type:r.type||"fixed-price",status:r.status||"planned"}:{name:"",customerName:"",customerPhone:"",customerEmail:"",address:"",type:"fixed-price",status:"planned"}),a({})},[r,t]);const l=f=>{const{name:m,value:p}=f.target;s(b=>({...b,[m]:p})),o[m]&&a(b=>({...b,[m]:null}))},u=()=>{const f={};return(!i.name||i.name.trim().length<3)&&(f.name="Sagsnavn skal vre mindst 3 tegn"),i.customerEmail&&!DD(i.customerEmail)&&(f.customerEmail="Ugyldig email adresse"),i.customerPhone&&!OD(i.customerPhone)&&(f.customerPhone="Telefonnummer skal vre 8 cifre"),a(f),Object.keys(f).length===0},h=f=>{f.preventDefault(),u()&&n(i)};return t?v.jsx("div",{className:"modal-overlay",onClick:e,children:v.jsxs("div",{className:"modal-content",onClick:f=>f.stopPropagation(),children:[v.jsxs("div",{className:"modal-header",children:[v.jsx("h2",{children:r?"Redigr Sag":"Ny Sag"}),v.jsx("button",{className:"modal-close",onClick:e,children:""})]}),v.jsxs("form",{onSubmit:h,children:[v.jsxs("div",{className:"modal-body",children:[v.jsxs("div",{className:"form-group",children:[v.jsx("label",{htmlFor:"name",children:"Sagsnavn *"}),v.jsx("input",{type:"text",id:"name",name:"name",value:i.name,onChange:l,className:o.name?"error":"",placeholder:"F.eks. Kkkenrenovering"}),o.name&&v.jsx("span",{className:"error-message",children:o.name})]}),v.jsxs("div",{className:"form-group",children:[v.jsx("label",{htmlFor:"customerName",children:"Kundenavn"}),v.jsx("input",{type:"text",id:"customerName",name:"customerName",value:i.customerName,onChange:l,placeholder:"F.eks. Peter Jensen"})]}),v.jsxs("div",{className:"form-row",children:[v.jsxs("div",{className:"form-group",children:[v.jsx("label",{htmlFor:"customerPhone",children:"Telefon"}),v.jsx("input",{type:"text",id:"customerPhone",name:"customerPhone",value:i.customerPhone,onChange:l,className:o.customerPhone?"error":"",placeholder:"12345678"}),o.customerPhone&&v.jsx("span",{className:"error-message",children:o.customerPhone})]}),v.jsxs("div",{className:"form-group",children:[v.jsx("label",{htmlFor:"customerEmail",children:"Email"}),v.jsx("input",{type:"email",id:"customerEmail",name:"customerEmail",value:i.customerEmail,onChange:l,className:o.customerEmail?"error":"",placeholder:"kunde@example.com"}),o.customerEmail&&v.jsx("span",{className:"error-message",children:o.customerEmail})]})]}),v.jsxs("div",{className:"form-group",children:[v.jsx("label",{htmlFor:"address",children:"Adresse"}),v.jsx("input",{type:"text",id:"address",name:"address",value:i.address,onChange:l,placeholder:"F.eks. Hovedgaden 123, 1234 Kbenhavn"})]}),v.jsxs("div",{className:"form-row",children:[v.jsxs("div",{className:"form-group",children:[v.jsx("label",{htmlFor:"type",children:"Type *"}),v.jsxs("select",{id:"type",name:"type",value:i.type,onChange:l,children:[v.jsx("option",{value:"fixed-price",children:"Fast Pris"}),v.jsx("option",{value:"time-material",children:"Tid & Materiale"})]})]}),v.jsxs("div",{className:"form-group",children:[v.jsx("label",{htmlFor:"status",children:"Status *"}),v.jsxs("select",{id:"status",name:"status",value:i.status,onChange:l,children:[v.jsx("option",{value:"planned",children:"Planlagt"}),v.jsx("option",{value:"in-progress",children:"I Gang"}),v.jsx("option",{value:"ready-for-invoice",children:"Klar til Faktura"}),v.jsx("option",{value:"closed",children:"Lukket"})]})]})]})]}),v.jsxs("div",{className:"modal-footer",children:[v.jsx("button",{type:"button",className:"btn-secondary",onClick:e,children:"Annuller"}),v.jsx("button",{type:"submit",className:"btn-primary",children:r?"Gem ndringer":"Opret Sag"})]})]})]})}):null}function EA({status:t}){const e=r=>{switch(r){case"planned":return"#3498db";case"in-progress":return"#e67e22";case"ready-for-invoice":return"#27ae60";case"closed":return"#95a5a6";default:return"#95a5a6"}},n=r=>{switch(r){case"planned":return"Planlagt";case"in-progress":return"I Gang";case"ready-for-invoice":return"Klar til Faktura";case"closed":return"Lukket";default:return r}};return v.jsx("span",{className:"status-badge",style:{backgroundColor:e(t),color:"white",padding:"4px 12px",borderRadius:"12px",fontSize:"13px",fontWeight:"500",display:"inline-block"},children:n(t)})}const Zr=t=>new Intl.NumberFormat("da-DK",{style:"currency",currency:"DKK",minimumFractionDigits:0,maximumFractionDigits:2}).format(t),FD=t=>{if(!t)return"";const n=t.replace(/\D/g,"").match(/^(\d{2})(\d{2})(\d{2})(\d{2})$/);return n?`${n[1]} ${n[2]} ${n[3]} ${n[4]}`:t},MD=t=>t?`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(t)}`:"#",Rh=t=>{if(!t)return"";typeof t=="string"&&(t=new Date(t));const e=String(t.getDate()).padStart(2,"0"),n=String(t.getMonth()+1).padStart(2,"0"),r=t.getFullYear();return`${e}/${n}/${r}`},Ou=t=>!t&&t!==0?"0":Number(t).toFixed(1).replace(".",",");function UD(){const t=Uc(),{showSuccess:e,showError:n,showCriticalConfirm:r}=Za(),[i,s]=de.useState([]),[o,a]=de.useState([]),[l,u]=de.useState(!1),[h,f]=de.useState(!1),[m,p]=de.useState(null),[b,E]=de.useState(""),[k,w]=de.useState("all"),[x,C]=de.useState("all"),[M,Q]=de.useState({});de.useEffect(()=>{z()},[]),de.useEffect(()=>{y()},[i,b,k,x]);const z=async()=>{u(!0);try{const J=await Do(Cr(jt,"projects")),O=[];J.forEach(U=>{O.push({id:U.id,...U.data()})}),O.sort((U,W)=>W.projectNumber&&U.projectNumber?W.projectNumber.localeCompare(U.projectNumber):0),s(O),L(O)}catch(J){console.error("Error loading projects:",J),n("Der opstod en fejl ved indlsning af sager.")}finally{u(!1)}},L=async J=>{const O={};for(const U of J){const W=await SA(U.id);O[U.id]=xA(W)}Q(O)},y=()=>{let J=[...i];b.trim()&&(J=J.filter(O=>{var U,W,ee;return((U=O.name)==null?void 0:U.toLowerCase().includes(b.toLowerCase()))||((W=O.customerName)==null?void 0:W.toLowerCase().includes(b.toLowerCase()))||((ee=O.projectNumber)==null?void 0:ee.toLowerCase().includes(b.toLowerCase()))})),k!=="all"&&(J=J.filter(O=>O.status===k)),x!=="all"&&(J=J.filter(O=>O.type===x)),a(J)},N=()=>{p(null),f(!0)},R=(J,O)=>{J.stopPropagation(),p(O),f(!0)},A=async J=>{try{if(m)await Kl($n(jt,"projects",m.id),J),e("Sag opdateret!");else{const O=await LD();await su(Cr(jt,"projects"),{...J,projectNumber:O,createdAt:new Date().toISOString()}),e("Sag oprettet!")}f(!1),z()}catch(O){console.error("Error saving project:",O),n("Der opstod en fejl ved gemning af sag.")}},I=async(J,O)=>{J.stopPropagation();const U=M[O.id]||0;if(await r({title:"Slet sag?",message:"Dette vil permanent slette sagen og alle tilknyttede data (timer, materialer, filer).",itemName:`${O.projectNumber} - ${O.name}`,warningText:U>0?`Der er registreret ${U} timer p denne sag`:null,confirmText:"Slet Permanent",cancelText:"Annuller"}))try{await iu($n(jt,"projects",O.id)),e("Sag slettet!"),z()}catch(ee){console.error("Error deleting project:",ee),n("Der opstod en fejl ved sletning af sag.")}},P=J=>{t(`/sager/${J.id}`)},V=J=>J==="fixed-price"?"Fast Pris":"Tid & Materiale";return v.jsxs("div",{children:[v.jsxs("div",{className:"page-header",children:[v.jsx("h1",{children:"Sager"}),v.jsx("p",{children:"Administrr projekter og timeregistrering"})]}),v.jsxs("div",{className:"content-card",children:[v.jsxs("div",{className:"sager-controls",children:[v.jsx("div",{className:"search-box",children:v.jsx("input",{type:"text",placeholder:"Sg efter sagsnavn, kunde eller sagsnummer...",value:b,onChange:J=>E(J.target.value),className:"search-input"})}),v.jsxs("div",{className:"filter-row",children:[v.jsxs("select",{value:k,onChange:J=>w(J.target.value),className:"filter-select",children:[v.jsx("option",{value:"all",children:"Alle statusser"}),v.jsx("option",{value:"planned",children:"Planlagt"}),v.jsx("option",{value:"in-progress",children:"I Gang"}),v.jsx("option",{value:"ready-for-invoice",children:"Klar til Faktura"}),v.jsx("option",{value:"closed",children:"Lukket"})]}),v.jsxs("select",{value:x,onChange:J=>C(J.target.value),className:"filter-select",children:[v.jsx("option",{value:"all",children:"Alle typer"}),v.jsx("option",{value:"fixed-price",children:"Fast Pris"}),v.jsx("option",{value:"time-material",children:"Tid & Materiale"})]})]}),v.jsx("button",{className:"btn-create-new-compact",onClick:N,children:"+ Opret sag"})]}),l?v.jsx("p",{children:"Indlser sager..."}):o.length===0?v.jsx("div",{className:"empty-state",children:v.jsx("p",{children:i.length===0?"Ingen sager endnu. Opret din frste sag for at komme i gang.":"Ingen sager matcher din sgning eller filtre."})}):v.jsx("div",{className:"table-container",children:v.jsxs("table",{className:"sager-table",children:[v.jsx("thead",{children:v.jsxs("tr",{children:[v.jsx("th",{children:"Sagsnr."}),v.jsx("th",{children:"Navn"}),v.jsx("th",{children:"Kunde"}),v.jsx("th",{children:"Type"}),v.jsx("th",{children:"Status"}),v.jsx("th",{children:"Timer"}),v.jsx("th",{children:"Handlinger"})]})}),v.jsx("tbody",{children:o.map(J=>v.jsxs("tr",{onClick:()=>P(J),className:"clickable-row",children:[v.jsx("td",{className:"project-number",children:J.projectNumber}),v.jsx("td",{className:"project-name",children:J.name}),v.jsx("td",{children:J.customerName||"-"}),v.jsx("td",{children:V(J.type)}),v.jsx("td",{children:v.jsx(EA,{status:J.status})}),v.jsxs("td",{children:[M[J.id]||0," timer"]}),v.jsxs("td",{className:"actions-cell",children:[v.jsx("button",{className:"btn-icon btn-edit",onClick:O=>R(O,J),title:"Redigr",children:""}),v.jsx("button",{className:"btn-icon btn-delete",onClick:O=>I(O,J),title:"Slet",children:""})]})]},J.id))})]})})]}),v.jsx(AA,{isOpen:h,onClose:()=>f(!1),onSave:A,project:m})]})}function VD({timeEntry:t,defaultRate:e,employees:n,onSave:r,onClose:i}){const[s,o]=de.useState({date:"",duration:"",activity:"",billable:!0,rate:e,useCustomRate:!1,employeeName:"",selectedEmployees:[]}),[a,l]=de.useState({});de.useEffect(()=>{if(t)o({date:t.date||"",duration:String(t.duration||t.hours||""),activity:t.activity||t.description||"",billable:t.billable!==void 0?t.billable:!0,rate:t.rate||t.hourlyRate||e,useCustomRate:t.rate!==e,employeeName:t.employeeName||"",selectedEmployees:t.employeeName?[t.employeeName]:[]});else{const E=new Date().toISOString().split("T")[0];o(k=>({...k,date:E,duration:"",activity:"",billable:!0,rate:e,useCustomRate:!1,employeeName:n.length>0?n[0].name:"",selectedEmployees:[]}))}},[t,e,n,!0]);const h=E=>{if(!E)return 0;const k=String(E).replace(",",".");return parseFloat(k)||0},f=E=>{const{name:k,value:w,type:x,checked:C}=E.target;o(x==="checkbox"?k==="billable"?M=>({...M,billable:C,rate:C?M.useCustomRate?M.rate:e:0}):k==="useCustomRate"?M=>({...M,useCustomRate:C,rate:C&&M.rate||e}):M=>({...M,[k]:C}):M=>({...M,[k]:w})),a[k]&&l(M=>({...M,[k]:null}))},m=E=>{o(k=>{const x=k.selectedEmployees.includes(E)?k.selectedEmployees.filter(C=>C!==E):[...k.selectedEmployees,E];return{...k,selectedEmployees:x,employeeName:x.length>0?x.join(", "):""}})},p=()=>{const E={};if(!s.date)E.date="Dato er pkrvet";else{const w=new Date(s.date),x=new Date;x.setHours(0,0,0,0),w>x&&(E.date="Dato kan ikke vre i fremtiden")}const k=h(s.duration);if((!s.duration||k<=0)&&(E.duration="Varighed skal vre et positivt tal"),(!s.activity||s.activity.trim().length<3)&&(E.activity="Aktivitetsbeskrivelse skal vre mindst 3 tegn"),s.billable){const w=h(s.rate);(!s.rate||w<=0)&&(E.rate="Timepris skal vre et positivt tal")}return s.selectedEmployees.length===0&&(E.employeeName="Vlg mindst n medarbejder"),l(E),Object.keys(E).length===0},b=E=>{if(E.preventDefault(),p()){const k={date:s.date,duration:h(s.duration),activity:s.activity,billable:s.billable,rate:s.billable?h(s.rate):0,employeeName:s.employeeName};r(k)}};return v.jsx("div",{className:"modal-overlay",onClick:i,children:v.jsxs("div",{className:"modal-content time-entry-modal",onClick:E=>E.stopPropagation(),children:[v.jsxs("div",{className:"modal-header",children:[v.jsx("h2",{children:t?"Redigr Timer":"Tilfj Timer"}),v.jsx("button",{className:"modal-close",onClick:i,children:""})]}),v.jsxs("form",{onSubmit:b,className:"modal-form",children:[v.jsxs("div",{className:"form-group",children:[v.jsx("label",{htmlFor:"date",children:"Dato *"}),v.jsx("input",{type:"date",id:"date",name:"date",value:s.date,onChange:f,className:a.date?"input-error":"",max:new Date().toISOString().split("T")[0]}),a.date&&v.jsx("span",{className:"error-text",children:a.date})]}),v.jsxs("div",{className:"form-group",children:[v.jsx("label",{htmlFor:"duration",children:"Varighed (timer) *"}),v.jsx("input",{type:"text",id:"duration",name:"duration",value:s.duration,onChange:f,className:a.duration?"input-error":"",placeholder:"F.eks. 4,5"}),a.duration&&v.jsx("span",{className:"error-text",children:a.duration}),v.jsx("small",{className:"form-hint",children:"Brug komma for decimaler (f.eks. 4,5 timer)"})]}),v.jsxs("div",{className:"form-group",children:[v.jsx("label",{children:"Medarbejder(e) *"}),v.jsx("div",{className:"employee-multi-select",children:n.length===0?v.jsx("p",{className:"no-employees-text",children:"Ingen medarbejdere tilgngelige. Tilfj medarbejdere i Indstillinger."}):n.map(E=>v.jsxs("label",{className:"checkbox-modern",children:[v.jsx("input",{type:"checkbox",checked:s.selectedEmployees.includes(E.name),onChange:()=>m(E.name)}),v.jsx("span",{className:"checkbox-label",children:E.name})]},E.id))}),a.employeeName&&v.jsx("span",{className:"error-text",children:a.employeeName})]}),v.jsxs("div",{className:"form-group",children:[v.jsx("label",{htmlFor:"activity",children:"Aktivitetsbeskrivelse *"}),v.jsx("textarea",{id:"activity",name:"activity",value:s.activity,onChange:f,className:a.activity?"input-error":"",rows:"3",placeholder:"Beskriv det udfrte arbejde..."}),a.activity&&v.jsx("span",{className:"error-text",children:a.activity})]}),v.jsx("div",{className:"checkbox-group-modern",children:v.jsxs("label",{className:"checkbox-modern",children:[v.jsx("input",{type:"checkbox",name:"billable",checked:s.billable,onChange:f}),v.jsx("span",{className:"checkbox-label",children:"Fakturerbar"})]})}),v.jsxs("div",{className:"rate-section",children:[v.jsx("label",{children:"Timepris (DKK) *"}),s.billable?v.jsxs(v.Fragment,{children:[v.jsxs("div",{className:`rate-display ${s.useCustomRate?"inactive":"active"}`,children:[v.jsxs("span",{className:"rate-value",children:[e," kr"]}),v.jsx("span",{className:"rate-note",children:"Standard timepris"})]}),v.jsx("div",{className:"checkbox-group-modern",children:v.jsxs("label",{className:"checkbox-modern",children:[v.jsx("input",{type:"checkbox",name:"useCustomRate",checked:s.useCustomRate,onChange:f}),v.jsx("span",{className:"checkbox-label",children:"Brug tilpasset timepris"})]})}),s.useCustomRate&&v.jsxs("div",{className:"form-group",children:[v.jsx("input",{type:"text",name:"rate",value:s.rate,onChange:f,className:a.rate?"input-error":"",placeholder:"F.eks. 550"}),a.rate&&v.jsx("span",{className:"error-text",children:a.rate}),v.jsx("small",{className:"form-hint",children:"Brug komma for decimaler (f.eks. 550,50)"})]})]}):v.jsxs("div",{className:"rate-display disabled",children:[v.jsx("span",{className:"rate-value",children:"0 kr"}),v.jsx("span",{className:"rate-note",children:"Ikke fakturerbar"})]})]}),v.jsxs("div",{className:"modal-footer",children:[v.jsx("button",{type:"button",className:"btn-secondary",onClick:i,children:"Annuller"}),v.jsx("button",{type:"submit",className:"btn-primary",children:t?"Gem ndringer":"Tilfj timer"})]})]})]})})}function BD({purchase:t,project:e,suppliers:n,materials:r,onSave:i,onClose:s}){const[o,a]=de.useState({date:"",materialName:"",materialId:null,sku:"",quantity:"",unit:"stk",category:"",supplierId:"",supplierName:"",purchasePrice:"",sellingPrice:"",paymentMethod:"Firmakort",notes:""}),[l,u]=de.useState({}),[h,f]=de.useState(!0),[m]=de.useState(50),p=["stk","m","m","m","kg","liter","pose","rulle","palle"],b=["Tr","Gips","El-materialer","VVS","Maling","Vrktj","Diverse"],E=["Firmakort","Faktura","Kontant","MobilePay"];de.useEffect(()=>{if(t)a({date:t.date||"",materialName:t.materialName||"",materialId:t.materialId||null,sku:t.sku||"",quantity:String(t.quantity||""),unit:t.unit||"stk",category:t.category||"",supplierId:t.supplierId||"",supplierName:t.supplierName||"",purchasePrice:String(t.purchasePrice||""),sellingPrice:String(t.sellingPrice||""),paymentMethod:t.paymentMethod||"Firmakort",notes:t.notes||""}),f(!1);else{const L=new Date().toISOString().split("T")[0];a(y=>({...y,date:L}))}},[t]);const k=L=>{if(!L)return 0;const y=String(L).replace(",",".");return parseFloat(y)||0},w=L=>String(L).replace(".",","),x=L=>{const{name:y,value:N}=L.target;a(R=>{const A={...R,[y]:N};if(y==="materialId"&&N){const I=r.find(P=>P.id===N);if(I&&(A.materialName=I.name,A.unit=I.unit,A.category=I.category,A.sku=I.sku||"",I.defaultSupplierId)){A.supplierId=I.defaultSupplierId;const P=n.find(V=>V.id===I.defaultSupplierId);P&&(A.supplierName=P.name)}}if(y==="supplierId"&&N){const I=n.find(P=>P.id===N);I&&(A.supplierName=I.name)}if(y==="purchasePrice"&&h){const I=k(N);if(I>0){const P=m/100,V=I*(1+P);A.sellingPrice=w(V.toFixed(2))}}return A}),l[y]&&u(R=>({...R,[y]:null}))},C=L=>{f(!1),x(L)},M=()=>{const L={};o.date||(L.date="Dato er pkrvet"),(!o.materialName||o.materialName.trim().length<2)&&(L.materialName="Materiale navn er pkrvet");const y=k(o.quantity);(!o.quantity||y<=0)&&(L.quantity="Antal skal vre strre end 0"),o.unit||(L.unit="Enhed er pkrvet"),o.category||(L.category="Kategori er pkrvet"),(!o.supplierName||o.supplierName.trim().length<2)&&(L.supplierName="Leverandr er pkrvet");const N=k(o.purchasePrice);(!o.purchasePrice||N<0)&&(L.purchasePrice="Indkbspris er pkrvet");const R=k(o.sellingPrice);return(!o.sellingPrice||R<0)&&(L.sellingPrice="Salgspris er pkrvet"),R<N&&(L.sellingPrice="Salgspris br vre hjere end indkbspris"),u(L),Object.keys(L).length===0},Q=L=>{if(L.preventDefault(),M()){const y={caseId:e.id,caseNumber:e.projectNumber,caseName:e.name,date:o.date,materialId:o.materialId||null,materialName:o.materialName.trim(),sku:o.sku.trim(),quantity:k(o.quantity),unit:o.unit,category:o.category,supplierId:o.supplierId||null,supplierName:o.supplierName.trim(),purchasePrice:k(o.purchasePrice),sellingPrice:k(o.sellingPrice),paymentMethod:o.paymentMethod,notes:o.notes.trim()};i(y)}},z=()=>{const L=k(o.purchasePrice),y=k(o.sellingPrice);return L>0?((y-L)/L*100).toFixed(1):"0"};return v.jsx("div",{className:"modal-overlay",onClick:s,children:v.jsxs("div",{className:"modal-content material-purchase-modal",onClick:L=>L.stopPropagation(),children:[v.jsxs("div",{className:"modal-header",children:[v.jsx("h2",{children:t?"Redigr Materiale":"Tilfj Materiale"}),v.jsx("button",{className:"modal-close",onClick:s,children:""})]}),v.jsxs("form",{onSubmit:Q,className:"modal-form",children:[v.jsxs("div",{className:"form-group",children:[v.jsx("label",{htmlFor:"date",children:"Dato *"}),v.jsx("input",{type:"date",id:"date",name:"date",value:o.date,onChange:x,className:l.date?"input-error":"",max:new Date().toISOString().split("T")[0]}),l.date&&v.jsx("span",{className:"error-text",children:l.date})]}),r.length>0&&v.jsxs("div",{className:"form-group",children:[v.jsx("label",{htmlFor:"materialId",children:"Vlg fra katalog (valgfrit)"}),v.jsxs("select",{id:"materialId",name:"materialId",value:o.materialId||"",onChange:x,children:[v.jsx("option",{value:"",children:"-- Skriv nyt materiale --"}),r.map(L=>v.jsxs("option",{value:L.id,children:[L.name," (",L.unit,")"]},L.id))]})]}),v.jsxs("div",{className:"form-group",children:[v.jsx("label",{htmlFor:"materialName",children:"Materiale *"}),v.jsx("input",{type:"text",id:"materialName",name:"materialName",value:o.materialName,onChange:x,className:l.materialName?"input-error":"",placeholder:"F.eks. Gipsplader 13mm"}),l.materialName&&v.jsx("span",{className:"error-text",children:l.materialName})]}),v.jsxs("div",{className:"form-group",children:[v.jsx("label",{htmlFor:"sku",children:"Artikelnummer / Varenummer"}),v.jsx("input",{type:"text",id:"sku",name:"sku",value:o.sku,onChange:x,placeholder:"F.eks. 123456"}),v.jsx("small",{className:"form-hint",children:"Leverandrens varenummer - hjlper med faktura-afstemning"})]}),v.jsxs("div",{className:"form-row",children:[v.jsxs("div",{className:"form-group",children:[v.jsx("label",{htmlFor:"quantity",children:"Antal *"}),v.jsx("input",{type:"text",id:"quantity",name:"quantity",value:o.quantity,onChange:x,className:l.quantity?"input-error":"",placeholder:"F.eks. 15"}),l.quantity&&v.jsx("span",{className:"error-text",children:l.quantity})]}),v.jsxs("div",{className:"form-group",children:[v.jsx("label",{htmlFor:"unit",children:"Enhed *"}),v.jsx("select",{id:"unit",name:"unit",value:o.unit,onChange:x,className:l.unit?"input-error":"",children:p.map(L=>v.jsx("option",{value:L,children:L},L))}),l.unit&&v.jsx("span",{className:"error-text",children:l.unit})]})]}),v.jsxs("div",{className:"form-group",children:[v.jsx("label",{htmlFor:"category",children:"Kategori *"}),v.jsxs("select",{id:"category",name:"category",value:o.category,onChange:x,className:l.category?"input-error":"",children:[v.jsx("option",{value:"",children:"-- Vlg kategori --"}),b.map(L=>v.jsx("option",{value:L,children:L},L))]}),l.category&&v.jsx("span",{className:"error-text",children:l.category})]}),n.length>0?v.jsxs("div",{className:"form-group",children:[v.jsx("label",{htmlFor:"supplierId",children:"Leverandr *"}),v.jsxs("select",{id:"supplierId",name:"supplierId",value:o.supplierId,onChange:x,className:l.supplierName?"input-error":"",children:[v.jsx("option",{value:"",children:"-- Vlg leverandr --"}),n.map(L=>v.jsx("option",{value:L.id,children:L.name},L.id))]}),l.supplierName&&v.jsx("span",{className:"error-text",children:l.supplierName})]}):v.jsxs("div",{className:"form-group",children:[v.jsx("label",{htmlFor:"supplierName",children:"Leverandr *"}),v.jsx("input",{type:"text",id:"supplierName",name:"supplierName",value:o.supplierName,onChange:x,className:l.supplierName?"input-error":"",placeholder:"F.eks. XL-BYG"}),l.supplierName&&v.jsx("span",{className:"error-text",children:l.supplierName})]}),v.jsxs("div",{className:"form-group",children:[v.jsx("label",{htmlFor:"purchasePrice",children:"Indkbspris (DKK) *"}),v.jsx("input",{type:"text",id:"purchasePrice",name:"purchasePrice",value:o.purchasePrice,onChange:x,className:l.purchasePrice?"input-error":"",placeholder:"F.eks. 2850"}),l.purchasePrice&&v.jsx("span",{className:"error-text",children:l.purchasePrice}),v.jsx("small",{className:"form-hint",children:"Total indkbspris for det angivne antal"})]}),v.jsxs("div",{className:"form-group",children:[v.jsx("label",{htmlFor:"sellingPrice",children:"Salgspris (DKK) *"}),v.jsx("input",{type:"text",id:"sellingPrice",name:"sellingPrice",value:o.sellingPrice,onChange:C,className:l.sellingPrice?"input-error":"",placeholder:"F.eks. 4275"}),l.sellingPrice&&v.jsx("span",{className:"error-text",children:l.sellingPrice}),v.jsx("small",{className:"form-hint",children:h?`Auto-beregnet med ${m}% markup`:`Margin: ${z()}%`})]}),v.jsxs("div",{className:"form-group",children:[v.jsx("label",{htmlFor:"paymentMethod",children:"Betalingsmetode"}),v.jsx("select",{id:"paymentMethod",name:"paymentMethod",value:o.paymentMethod,onChange:x,children:E.map(L=>v.jsx("option",{value:L,children:L},L))})]}),v.jsxs("div",{className:"form-group",children:[v.jsx("label",{htmlFor:"notes",children:"Noter"}),v.jsx("textarea",{id:"notes",name:"notes",value:o.notes,onChange:x,rows:"2",placeholder:"Ekstra bemrkninger..."})]}),v.jsxs("div",{className:"modal-footer",children:[v.jsx("button",{type:"button",className:"btn-secondary",onClick:s,children:"Annuller"}),v.jsx("button",{type:"submit",className:"btn-primary",children:t?"Gem ndringer":"Tilfj materiale"})]})]})]})})}const qD=async(t,e="Admin")=>{try{return{success:!0,id:(await su(Cr(jt,"suppliers"),{...t,createdAt:new Date().toISOString(),createdBy:e,updatedAt:new Date().toISOString(),updatedBy:e})).id}}catch(n){return console.error("Error creating supplier:",n),{success:!1,error:n.message}}},NA=async()=>{try{const t=await Do(Cr(jt,"suppliers")),e=[];return t.forEach(n=>{e.push({id:n.id,...n.data()})}),e.sort((n,r)=>n.name.localeCompare(r.name)),{success:!0,suppliers:e}}catch(t){return console.error("Error getting suppliers:",t),{success:!1,error:t.message,suppliers:[]}}},zD=async(t,e,n="Admin")=>{try{return await Kl($n(jt,"suppliers",t),{...e,updatedAt:new Date().toISOString(),updatedBy:n}),{success:!0}}catch(r){return console.error("Error updating supplier:",r),{success:!1,error:r.message}}},$D=async t=>{try{return await iu($n(jt,"suppliers",t)),{success:!0}}catch(e){return console.error("Error deleting supplier:",e),{success:!1,error:e.message}}},HD=async(t,e="Admin")=>{try{return{success:!0,id:(await su(Cr(jt,"materials"),{...t,lastPurchasePrice:null,lastPurchaseDate:null,createdAt:new Date().toISOString(),createdBy:e,updatedAt:new Date().toISOString(),updatedBy:e})).id}}catch(n){return console.error("Error creating material:",n),{success:!1,error:n.message}}},IA=async()=>{try{const t=await Do(Cr(jt,"materials")),e=[];return t.forEach(n=>{e.push({id:n.id,...n.data()})}),e.sort((n,r)=>n.name.localeCompare(r.name)),{success:!0,materials:e}}catch(t){return console.error("Error getting materials:",t),{success:!1,error:t.message,materials:[]}}},TA=async(t,e,n="Admin")=>{try{return await Kl($n(jt,"materials",t),{...e,updatedAt:new Date().toISOString(),updatedBy:n}),{success:!0}}catch(r){return console.error("Error updating material:",r),{success:!1,error:r.message}}},WD=async t=>{try{return await iu($n(jt,"materials",t)),{success:!0}}catch(e){return console.error("Error deleting material:",e),{success:!1,error:e.message}}},GD=async(t,e="Admin")=>{try{const n=t.sellingPrice-t.purchasePrice,r=n/t.purchasePrice*100,i=await su(Cr(jt,"materialPurchases"),{...t,marginKr:n,marginPercent:r,createdAt:new Date().toISOString(),createdBy:e,updatedAt:new Date().toISOString(),updatedBy:e});return t.materialId&&await TA(t.materialId,{lastPurchasePrice:t.purchasePrice/t.quantity,lastPurchaseDate:t.date},e),{success:!0,id:i.id}}catch(n){return console.error("Error creating material purchase:",n),{success:!1,error:n.message}}},KD=async t=>{try{const e=$v(Cr(jt,"materialPurchases"),Hv("caseId","==",t),ej("date","desc")),n=await Do(e),r=[];return n.forEach(i=>{r.push({id:i.id,...i.data()})}),{success:!0,purchases:r}}catch(e){return console.error("Error getting case material purchases:",e),{success:!1,error:e.message,purchases:[]}}},QD=async(t,e,n="Admin")=>{try{let r={...e};if(e.purchasePrice!==void 0||e.sellingPrice!==void 0){const s=(await Zm($n(jt,"materialPurchases",t))).data(),o=e.purchasePrice??s.purchasePrice,l=(e.sellingPrice??s.sellingPrice)-o,u=l/o*100;r.marginKr=l,r.marginPercent=u}return await Kl($n(jt,"materialPurchases",t),{...r,updatedAt:new Date().toISOString(),updatedBy:n}),{success:!0}}catch(r){return console.error("Error updating material purchase:",r),{success:!1,error:r.message}}},YD=async t=>{try{return await iu($n(jt,"materialPurchases",t)),{success:!0}}catch(e){return console.error("Error deleting material purchase:",e),{success:!1,error:e.message}}},kA=t=>!t||t.length===0?0:t.reduce((e,n)=>e+(n.purchasePrice||0),0),PA=t=>!t||t.length===0?0:t.reduce((e,n)=>e+(n.sellingPrice||0),0),XD=t=>{const e=kA(t);return PA(t)-e};function JD(t,e){return e.forEach(function(n){n&&typeof n!="string"&&!Array.isArray(n)&&Object.keys(n).forEach(function(r){if(r!=="default"&&!(r in t)){var i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:function(){return n[r]}})}})}),Object.freeze(t)}function CA(t,e){return new Promise(function(n,r){let i;return ZD(t).then(function(s){try{return i=s,n(new Blob([e.slice(0,2),i,e.slice(2)],{type:"image/jpeg"}))}catch(o){return r(o)}},r)})}const ZD=t=>new Promise((e,n)=>{const r=new FileReader;r.addEventListener("load",({target:{result:i}})=>{const s=new DataView(i);let o=0;if(s.getUint16(o)!==65496)return n("not a valid JPEG");for(o+=2;;){const a=s.getUint16(o);if(a===65498)break;const l=s.getUint16(o+2);if(a===65505&&s.getUint32(o+4)===1165519206){const u=o+10;let h;switch(s.getUint16(u)){case 18761:h=!0;break;case 19789:h=!1;break;default:return n("TIFF header contains invalid endian")}if(s.getUint16(u+2,h)!==42)return n("TIFF header contains invalid version");const f=s.getUint32(u+4,h),m=u+f+2+12*s.getUint16(u+f,h);for(let p=u+f+2;p<m;p+=12)if(s.getUint16(p,h)==274){if(s.getUint16(p+2,h)!==3)return n("Orientation data type is invalid");if(s.getUint32(p+4,h)!==1)return n("Orientation data count is invalid");s.setUint16(p+8,1,h);break}return e(i.slice(o,o+2+l))}o+=2+l}return e(new Blob)}),r.readAsArrayBuffer(t)});var lm={},eO={get exports(){return lm},set exports(t){lm=t}};(function(t){var e,n,r={};eO.exports=r,r.parse=function(i,s){for(var o=r.bin.readUshort,a=r.bin.readUint,l=0,u={},h=new Uint8Array(i),f=h.length-4;a(h,f)!=101010256;)f--;l=f,l+=4;var m=o(h,l+=4);o(h,l+=2);var p=a(h,l+=2),b=a(h,l+=4);l+=4,l=b;for(var E=0;E<m;E++){a(h,l),l+=4,l+=4,l+=4,a(h,l+=4),p=a(h,l+=4);var k=a(h,l+=4),w=o(h,l+=4),x=o(h,l+2),C=o(h,l+4);l+=6;var M=a(h,l+=8);l+=4,l+=w+x+C,r._readLocal(h,M,u,p,k,s)}return u},r._readLocal=function(i,s,o,a,l,u){var h=r.bin.readUshort,f=r.bin.readUint;f(i,s),h(i,s+=4),h(i,s+=2);var m=h(i,s+=2);f(i,s+=2),f(i,s+=4),s+=4;var p=h(i,s+=8),b=h(i,s+=2);s+=2;var E=r.bin.readUTF8(i,s,p);if(s+=p,s+=b,u)o[E]={size:l,csize:a};else{var k=new Uint8Array(i.buffer,s);if(m==0)o[E]=new Uint8Array(k.buffer.slice(s,s+a));else{if(m!=8)throw"unknown compression method: "+m;var w=new Uint8Array(l);r.inflateRaw(k,w),o[E]=w}}},r.inflateRaw=function(i,s){return r.F.inflate(i,s)},r.inflate=function(i,s){return i[0],i[1],r.inflateRaw(new Uint8Array(i.buffer,i.byteOffset+2,i.length-6),s)},r.deflate=function(i,s){s==null&&(s={level:6});var o=0,a=new Uint8Array(50+Math.floor(1.1*i.length));a[o]=120,a[o+1]=156,o+=2,o=r.F.deflateRaw(i,a,o,s.level);var l=r.adler(i,0,i.length);return a[o+0]=l>>>24&255,a[o+1]=l>>>16&255,a[o+2]=l>>>8&255,a[o+3]=l>>>0&255,new Uint8Array(a.buffer,0,o+4)},r.deflateRaw=function(i,s){s==null&&(s={level:6});var o=new Uint8Array(50+Math.floor(1.1*i.length)),a=r.F.deflateRaw(i,o,a,s.level);return new Uint8Array(o.buffer,0,a)},r.encode=function(i,s){s==null&&(s=!1);var o=0,a=r.bin.writeUint,l=r.bin.writeUshort,u={};for(var h in i){var f=!r._noNeed(h)&&!s,m=i[h],p=r.crc.crc(m,0,m.length);u[h]={cpr:f,usize:m.length,crc:p,file:f?r.deflateRaw(m):m}}for(var h in u)o+=u[h].file.length+30+46+2*r.bin.sizeUTF8(h);o+=22;var b=new Uint8Array(o),E=0,k=[];for(var h in u){var w=u[h];k.push(E),E=r._writeHeader(b,E,h,w,0)}var x=0,C=E;for(var h in u)w=u[h],k.push(E),E=r._writeHeader(b,E,h,w,1,k[x++]);var M=E-C;return a(b,E,101010256),E+=4,l(b,E+=4,x),l(b,E+=2,x),a(b,E+=2,M),a(b,E+=4,C),E+=4,E+=2,b.buffer},r._noNeed=function(i){var s=i.split(".").pop().toLowerCase();return"png,jpg,jpeg,zip".indexOf(s)!=-1},r._writeHeader=function(i,s,o,a,l,u){var h=r.bin.writeUint,f=r.bin.writeUshort,m=a.file;return h(i,s,l==0?67324752:33639248),s+=4,l==1&&(s+=2),f(i,s,20),f(i,s+=2,0),f(i,s+=2,a.cpr?8:0),h(i,s+=2,0),h(i,s+=4,a.crc),h(i,s+=4,m.length),h(i,s+=4,a.usize),f(i,s+=4,r.bin.sizeUTF8(o)),f(i,s+=2,0),s+=2,l==1&&(s+=2,s+=2,h(i,s+=6,u),s+=4),s+=r.bin.writeUTF8(i,s,o),l==0&&(i.set(m,s),s+=m.length),s},r.crc={table:function(){for(var i=new Uint32Array(256),s=0;s<256;s++){for(var o=s,a=0;a<8;a++)1&o?o=3988292384^o>>>1:o>>>=1;i[s]=o}return i}(),update:function(i,s,o,a){for(var l=0;l<a;l++)i=r.crc.table[255&(i^s[o+l])]^i>>>8;return i},crc:function(i,s,o){return 4294967295^r.crc.update(4294967295,i,s,o)}},r.adler=function(i,s,o){for(var a=1,l=0,u=s,h=s+o;u<h;){for(var f=Math.min(u+5552,h);u<f;)l+=a+=i[u++];a%=65521,l%=65521}return l<<16|a},r.bin={readUshort:function(i,s){return i[s]|i[s+1]<<8},writeUshort:function(i,s,o){i[s]=255&o,i[s+1]=o>>8&255},readUint:function(i,s){return 16777216*i[s+3]+(i[s+2]<<16|i[s+1]<<8|i[s])},writeUint:function(i,s,o){i[s]=255&o,i[s+1]=o>>8&255,i[s+2]=o>>16&255,i[s+3]=o>>24&255},readASCII:function(i,s,o){for(var a="",l=0;l<o;l++)a+=String.fromCharCode(i[s+l]);return a},writeASCII:function(i,s,o){for(var a=0;a<o.length;a++)i[s+a]=o.charCodeAt(a)},pad:function(i){return i.length<2?"0"+i:i},readUTF8:function(i,s,o){for(var a,l="",u=0;u<o;u++)l+="%"+r.bin.pad(i[s+u].toString(16));try{a=decodeURIComponent(l)}catch{return r.bin.readASCII(i,s,o)}return a},writeUTF8:function(i,s,o){for(var a=o.length,l=0,u=0;u<a;u++){var h=o.charCodeAt(u);if(!(4294967168&h))i[s+l]=h,l++;else if(!(4294965248&h))i[s+l]=192|h>>6,i[s+l+1]=128|h>>0&63,l+=2;else if(!(4294901760&h))i[s+l]=224|h>>12,i[s+l+1]=128|h>>6&63,i[s+l+2]=128|h>>0&63,l+=3;else{if(4292870144&h)throw"e";i[s+l]=240|h>>18,i[s+l+1]=128|h>>12&63,i[s+l+2]=128|h>>6&63,i[s+l+3]=128|h>>0&63,l+=4}}return l},sizeUTF8:function(i){for(var s=i.length,o=0,a=0;a<s;a++){var l=i.charCodeAt(a);if(!(4294967168&l))o++;else if(!(4294965248&l))o+=2;else if(!(4294901760&l))o+=3;else{if(4292870144&l)throw"e";o+=4}}return o}},r.F={},r.F.deflateRaw=function(i,s,o,a){var l=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][a],u=r.F.U,h=r.F._goodIndex;r.F._hash;var f=r.F._putsE,m=0,p=o<<3,b=0,E=i.length;if(a==0){for(;m<E;)f(s,p,m+(A=Math.min(65535,E-m))==E?1:0),p=r.F._copyExact(i,m,A,s,p+8),m+=A;return p>>>3}var k=u.lits,w=u.strt,x=u.prev,C=0,M=0,Q=0,z=0,L=0,y=0;for(E>2&&(w[y=r.F._hash(i,0)]=0),m=0;m<E;m++){if(L=y,m+1<E-2){y=r.F._hash(i,m+1);var N=m+1&32767;x[N]=w[y],w[y]=N}if(b<=m){(C>14e3||M>26697)&&E-m>100&&(b<m&&(k[C]=m-b,C+=2,b=m),p=r.F._writeBlock(m==E-1||b==E?1:0,k,C,z,i,Q,m-Q,s,p),C=M=z=0,Q=m);var R=0;m<E-2&&(R=r.F._bestMatch(i,m,x,L,Math.min(l[2],E-m),l[3]));var A=R>>>16,I=65535&R;if(R!=0){I=65535&R;var P=h(A=R>>>16,u.of0);u.lhst[257+P]++;var V=h(I,u.df0);u.dhst[V]++,z+=u.exb[P]+u.dxb[V],k[C]=A<<23|m-b,k[C+1]=I<<16|P<<8|V,C+=2,b=m+A}else u.lhst[i[m]]++;M++}}for(Q==m&&i.length!=0||(b<m&&(k[C]=m-b,C+=2,b=m),p=r.F._writeBlock(1,k,C,z,i,Q,m-Q,s,p),C=0,M=0,C=M=z=0,Q=m);7&p;)p++;return p>>>3},r.F._bestMatch=function(i,s,o,a,l,u){var h=32767&s,f=o[h],m=h-f+32768&32767;if(f==h||a!=r.F._hash(i,s-m))return 0;for(var p=0,b=0,E=Math.min(32767,s);m<=E&&--u!=0&&f!=h;){if(p==0||i[s+p]==i[s+p-m]){var k=r.F._howLong(i,s,m);if(k>p){if(b=m,(p=k)>=l)break;m+2<k&&(k=m+2);for(var w=0,x=0;x<k-2;x++){var C=s-m+x+32768&32767,M=C-o[C]+32768&32767;M>w&&(w=M,f=C)}}}m+=(h=f)-(f=o[h])+32768&32767}return p<<16|b},r.F._howLong=function(i,s,o){if(i[s]!=i[s-o]||i[s+1]!=i[s+1-o]||i[s+2]!=i[s+2-o])return 0;var a=s,l=Math.min(i.length,s+258);for(s+=3;s<l&&i[s]==i[s-o];)s++;return s-a},r.F._hash=function(i,s){return(i[s]<<8|i[s+1])+(i[s+2]<<4)&65535},r.saved=0,r.F._writeBlock=function(i,s,o,a,l,u,h,f,m){var p,b,E,k,w,x,C,M,Q,z=r.F.U,L=r.F._putsF,y=r.F._putsE;z.lhst[256]++,b=(p=r.F.getTrees())[0],E=p[1],k=p[2],w=p[3],x=p[4],C=p[5],M=p[6],Q=p[7];var N=32+(m+3&7?8-(m+3&7):0)+(h<<3),R=a+r.F.contSize(z.fltree,z.lhst)+r.F.contSize(z.fdtree,z.dhst),A=a+r.F.contSize(z.ltree,z.lhst)+r.F.contSize(z.dtree,z.dhst);A+=14+3*C+r.F.contSize(z.itree,z.ihst)+(2*z.ihst[16]+3*z.ihst[17]+7*z.ihst[18]);for(var I=0;I<286;I++)z.lhst[I]=0;for(I=0;I<30;I++)z.dhst[I]=0;for(I=0;I<19;I++)z.ihst[I]=0;var P=N<R&&N<A?0:R<A?1:2;if(L(f,m,i),L(f,m+1,P),m+=3,P==0){for(;7&m;)m++;m=r.F._copyExact(l,u,h,f,m)}else{var V,J;if(P==1&&(V=z.fltree,J=z.fdtree),P==2){r.F.makeCodes(z.ltree,b),r.F.revCodes(z.ltree,b),r.F.makeCodes(z.dtree,E),r.F.revCodes(z.dtree,E),r.F.makeCodes(z.itree,k),r.F.revCodes(z.itree,k),V=z.ltree,J=z.dtree,y(f,m,w-257),y(f,m+=5,x-1),y(f,m+=5,C-4),m+=4;for(var O=0;O<C;O++)y(f,m+3*O,z.itree[1+(z.ordr[O]<<1)]);m+=3*C,m=r.F._codeTiny(M,z.itree,f,m),m=r.F._codeTiny(Q,z.itree,f,m)}for(var U=u,W=0;W<o;W+=2){for(var ee=s[W],re=ee>>>23,xe=U+(8388607&ee);U<xe;)m=r.F._writeLit(l[U++],V,f,m);if(re!=0){var F=s[W+1],G=F>>16,Y=F>>8&255,Z=255&F;y(f,m=r.F._writeLit(257+Y,V,f,m),re-z.of0[Y]),m+=z.exb[Y],L(f,m=r.F._writeLit(Z,J,f,m),G-z.df0[Z]),m+=z.dxb[Z],U+=re}}m=r.F._writeLit(256,V,f,m)}return m},r.F._copyExact=function(i,s,o,a,l){var u=l>>>3;return a[u]=o,a[u+1]=o>>>8,a[u+2]=255-a[u],a[u+3]=255-a[u+1],u+=4,a.set(new Uint8Array(i.buffer,s,o),u),l+(o+4<<3)},r.F.getTrees=function(){for(var i=r.F.U,s=r.F._hufTree(i.lhst,i.ltree,15),o=r.F._hufTree(i.dhst,i.dtree,15),a=[],l=r.F._lenCodes(i.ltree,a),u=[],h=r.F._lenCodes(i.dtree,u),f=0;f<a.length;f+=2)i.ihst[a[f]]++;for(f=0;f<u.length;f+=2)i.ihst[u[f]]++;for(var m=r.F._hufTree(i.ihst,i.itree,7),p=19;p>4&&i.itree[1+(i.ordr[p-1]<<1)]==0;)p--;return[s,o,m,l,h,p,a,u]},r.F.getSecond=function(i){for(var s=[],o=0;o<i.length;o+=2)s.push(i[o+1]);return s},r.F.nonZero=function(i){for(var s="",o=0;o<i.length;o+=2)i[o+1]!=0&&(s+=(o>>1)+",");return s},r.F.contSize=function(i,s){for(var o=0,a=0;a<s.length;a++)o+=s[a]*i[1+(a<<1)];return o},r.F._codeTiny=function(i,s,o,a){for(var l=0;l<i.length;l+=2){var u=i[l],h=i[l+1];a=r.F._writeLit(u,s,o,a);var f=u==16?2:u==17?3:7;u>15&&(r.F._putsE(o,a,h,f),a+=f)}return a},r.F._lenCodes=function(i,s){for(var o=i.length;o!=2&&i[o-1]==0;)o-=2;for(var a=0;a<o;a+=2){var l=i[a+1],u=a+3<o?i[a+3]:-1,h=a+5<o?i[a+5]:-1,f=a==0?-1:i[a-1];if(l==0&&u==l&&h==l){for(var m=a+5;m+2<o&&i[m+2]==l;)m+=2;(p=Math.min(m+1-a>>>1,138))<11?s.push(17,p-3):s.push(18,p-11),a+=2*p-2}else if(l==f&&u==l&&h==l){for(m=a+5;m+2<o&&i[m+2]==l;)m+=2;var p=Math.min(m+1-a>>>1,6);s.push(16,p-3),a+=2*p-2}else s.push(l,0)}return o>>>1},r.F._hufTree=function(i,s,o){var a=[],l=i.length,u=s.length,h=0;for(h=0;h<u;h+=2)s[h]=0,s[h+1]=0;for(h=0;h<l;h++)i[h]!=0&&a.push({lit:h,f:i[h]});var f=a.length,m=a.slice(0);if(f==0)return 0;if(f==1){var p=a[0].lit;return m=p==0?1:0,s[1+(p<<1)]=1,s[1+(m<<1)]=1,1}a.sort(function(M,Q){return M.f-Q.f});var b=a[0],E=a[1],k=0,w=1,x=2;for(a[0]={lit:-1,f:b.f+E.f,l:b,r:E,d:0};w!=f-1;)b=k!=w&&(x==f||a[k].f<a[x].f)?a[k++]:a[x++],E=k!=w&&(x==f||a[k].f<a[x].f)?a[k++]:a[x++],a[w++]={lit:-1,f:b.f+E.f,l:b,r:E};var C=r.F.setDepth(a[w-1],0);for(C>o&&(r.F.restrictDepth(m,o,C),C=o),h=0;h<f;h++)s[1+(m[h].lit<<1)]=m[h].d;return C},r.F.setDepth=function(i,s){return i.lit!=-1?(i.d=s,s):Math.max(r.F.setDepth(i.l,s+1),r.F.setDepth(i.r,s+1))},r.F.restrictDepth=function(i,s,o){var a=0,l=1<<o-s,u=0;for(i.sort(function(f,m){return m.d==f.d?f.f-m.f:m.d-f.d}),a=0;a<i.length&&i[a].d>s;a++){var h=i[a].d;i[a].d=s,u+=l-(1<<o-h)}for(u>>>=o-s;u>0;)(h=i[a].d)<s?(i[a].d++,u-=1<<s-h-1):a++;for(;a>=0;a--)i[a].d==s&&u<0&&(i[a].d--,u++);u!=0&&console.log("debt left")},r.F._goodIndex=function(i,s){var o=0;return s[16|o]<=i&&(o|=16),s[8|o]<=i&&(o|=8),s[4|o]<=i&&(o|=4),s[2|o]<=i&&(o|=2),s[1|o]<=i&&(o|=1),o},r.F._writeLit=function(i,s,o,a){return r.F._putsF(o,a,s[i<<1]),a+s[1+(i<<1)]},r.F.inflate=function(i,s){var o=Uint8Array;if(i[0]==3&&i[1]==0)return s||new o(0);var a=r.F,l=a._bitsF,u=a._bitsE,h=a._decodeTiny,f=a.makeCodes,m=a.codes2map,p=a._get17,b=a.U,E=s==null;E&&(s=new o(i.length>>>2<<3));for(var k,w,x=0,C=0,M=0,Q=0,z=0,L=0,y=0,N=0,R=0;x==0;)if(x=l(i,R,1),C=l(i,R+1,2),R+=3,C!=0){if(E&&(s=r.F._check(s,N+(1<<17))),C==1&&(k=b.flmap,w=b.fdmap,L=511,y=31),C==2){M=u(i,R,5)+257,Q=u(i,R+5,5)+1,z=u(i,R+10,4)+4,R+=14;for(var A=0;A<38;A+=2)b.itree[A]=0,b.itree[A+1]=0;var I=1;for(A=0;A<z;A++){var P=u(i,R+3*A,3);b.itree[1+(b.ordr[A]<<1)]=P,P>I&&(I=P)}R+=3*z,f(b.itree,I),m(b.itree,I,b.imap),k=b.lmap,w=b.dmap,R=h(b.imap,(1<<I)-1,M+Q,i,R,b.ttree);var V=a._copyOut(b.ttree,0,M,b.ltree);L=(1<<V)-1;var J=a._copyOut(b.ttree,M,Q,b.dtree);y=(1<<J)-1,f(b.ltree,V),m(b.ltree,V,k),f(b.dtree,J),m(b.dtree,J,w)}for(;;){var O=k[p(i,R)&L];R+=15&O;var U=O>>>4;if(!(U>>>8))s[N++]=U;else{if(U==256)break;var W=N+U-254;if(U>264){var ee=b.ldef[U-257];W=N+(ee>>>3)+u(i,R,7&ee),R+=7&ee}var re=w[p(i,R)&y];R+=15&re;var xe=re>>>4,F=b.ddef[xe],G=(F>>>4)+l(i,R,15&F);for(R+=15&F,E&&(s=r.F._check(s,N+(1<<17)));N<W;)s[N]=s[N++-G],s[N]=s[N++-G],s[N]=s[N++-G],s[N]=s[N++-G];N=W}}}else{7&R&&(R+=8-(7&R));var Y=4+(R>>>3),Z=i[Y-4]|i[Y-3]<<8;E&&(s=r.F._check(s,N+Z)),s.set(new o(i.buffer,i.byteOffset+Y,Z),N),R=Y+Z<<3,N+=Z}return s.length==N?s:s.slice(0,N)},r.F._check=function(i,s){var o=i.length;if(s<=o)return i;var a=new Uint8Array(Math.max(o<<1,s));return a.set(i,0),a},r.F._decodeTiny=function(i,s,o,a,l,u){for(var h=r.F._bitsE,f=r.F._get17,m=0;m<o;){var p=i[f(a,l)&s];l+=15&p;var b=p>>>4;if(b<=15)u[m]=b,m++;else{var E=0,k=0;b==16?(k=3+h(a,l,2),l+=2,E=u[m-1]):b==17?(k=3+h(a,l,3),l+=3):b==18&&(k=11+h(a,l,7),l+=7);for(var w=m+k;m<w;)u[m]=E,m++}}return l},r.F._copyOut=function(i,s,o,a){for(var l=0,u=0,h=a.length>>>1;u<o;){var f=i[u+s];a[u<<1]=0,a[1+(u<<1)]=f,f>l&&(l=f),u++}for(;u<h;)a[u<<1]=0,a[1+(u<<1)]=0,u++;return l},r.F.makeCodes=function(i,s){for(var o,a,l,u,h=r.F.U,f=i.length,m=h.bl_count,p=0;p<=s;p++)m[p]=0;for(p=1;p<f;p+=2)m[i[p]]++;var b=h.next_code;for(o=0,m[0]=0,a=1;a<=s;a++)o=o+m[a-1]<<1,b[a]=o;for(l=0;l<f;l+=2)(u=i[l+1])!=0&&(i[l]=b[u],b[u]++)},r.F.codes2map=function(i,s,o){for(var a=i.length,l=r.F.U.rev15,u=0;u<a;u+=2)if(i[u+1]!=0)for(var h=u>>1,f=i[u+1],m=h<<4|f,p=s-f,b=i[u]<<p,E=b+(1<<p);b!=E;)o[l[b]>>>15-s]=m,b++},r.F.revCodes=function(i,s){for(var o=r.F.U.rev15,a=15-s,l=0;l<i.length;l+=2){var u=i[l]<<s-i[l+1];i[l]=o[u]>>>a}},r.F._putsE=function(i,s,o){o<<=7&s;var a=s>>>3;i[a]|=o,i[a+1]|=o>>>8},r.F._putsF=function(i,s,o){o<<=7&s;var a=s>>>3;i[a]|=o,i[a+1]|=o>>>8,i[a+2]|=o>>>16},r.F._bitsE=function(i,s,o){return(i[s>>>3]|i[1+(s>>>3)]<<8)>>>(7&s)&(1<<o)-1},r.F._bitsF=function(i,s,o){return(i[s>>>3]|i[1+(s>>>3)]<<8|i[2+(s>>>3)]<<16)>>>(7&s)&(1<<o)-1},r.F._get17=function(i,s){return(i[s>>>3]|i[1+(s>>>3)]<<8|i[2+(s>>>3)]<<16)>>>(7&s)},r.F._get25=function(i,s){return(i[s>>>3]|i[1+(s>>>3)]<<8|i[2+(s>>>3)]<<16|i[3+(s>>>3)]<<24)>>>(7&s)},r.F.U=(e=Uint16Array,n=Uint32Array,{next_code:new e(16),bl_count:new e(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new e(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new n(32),flmap:new e(512),fltree:[],fdmap:new e(32),fdtree:[],lmap:new e(32768),ltree:[],ttree:[],dmap:new e(32768),dtree:[],imap:new e(512),itree:[],rev15:new e(32768),lhst:new n(286),dhst:new n(30),ihst:new n(19),lits:new n(15e3),strt:new e(65536),prev:new e(32768)}),function(){for(var i=r.F.U,s=0;s<32768;s++){var o=s;o=(4278255360&(o=(4042322160&(o=(3435973836&(o=(2863311530&o)>>>1|(1431655765&o)<<1))>>>2|(858993459&o)<<2))>>>4|(252645135&o)<<4))>>>8|(16711935&o)<<8,i.rev15[s]=(o>>>16|o<<16)>>>17}function a(l,u,h){for(;u--!=0;)l.push(0,h)}for(s=0;s<32;s++)i.ldef[s]=i.of0[s]<<3|i.exb[s],i.ddef[s]=i.df0[s]<<4|i.dxb[s];a(i.fltree,144,8),a(i.fltree,112,9),a(i.fltree,24,7),a(i.fltree,8,8),r.F.makeCodes(i.fltree,9),r.F.codes2map(i.fltree,9,i.flmap),r.F.revCodes(i.fltree,9),a(i.fdtree,32,5),r.F.makeCodes(i.fdtree,5),r.F.codes2map(i.fdtree,5,i.fdmap),r.F.revCodes(i.fdtree,5),a(i.itree,19,0),a(i.ltree,286,0),a(i.dtree,30,0),a(i.ttree,320,0)}()})();var tO=JD({__proto__:null,default:lm},[lm]);const ns=function(){var t={nextZero(h,f){for(;h[f]!=0;)f++;return f},readUshort:(h,f)=>h[f]<<8|h[f+1],writeUshort(h,f,m){h[f]=m>>8&255,h[f+1]=255&m},readUint:(h,f)=>16777216*h[f]+(h[f+1]<<16|h[f+2]<<8|h[f+3]),writeUint(h,f,m){h[f]=m>>24&255,h[f+1]=m>>16&255,h[f+2]=m>>8&255,h[f+3]=255&m},readASCII(h,f,m){let p="";for(let b=0;b<m;b++)p+=String.fromCharCode(h[f+b]);return p},writeASCII(h,f,m){for(let p=0;p<m.length;p++)h[f+p]=m.charCodeAt(p)},readBytes(h,f,m){const p=[];for(let b=0;b<m;b++)p.push(h[f+b]);return p},pad:h=>h.length<2?`0${h}`:h,readUTF8(h,f,m){let p,b="";for(let E=0;E<m;E++)b+=`%${t.pad(h[f+E].toString(16))}`;try{p=decodeURIComponent(b)}catch{return t.readASCII(h,f,m)}return p}};function e(h,f,m,p){const b=f*m,E=s(p),k=Math.ceil(f*E/8),w=new Uint8Array(4*b),x=new Uint32Array(w.buffer),{ctype:C}=p,{depth:M}=p,Q=t.readUshort;if(C==6){const ee=b<<2;if(M==8)for(var z=0;z<ee;z+=4)w[z]=h[z],w[z+1]=h[z+1],w[z+2]=h[z+2],w[z+3]=h[z+3];if(M==16)for(z=0;z<ee;z++)w[z]=h[z<<1]}else if(C==2){const ee=p.tabs.tRNS;if(ee==null){if(M==8)for(z=0;z<b;z++){var L=3*z;x[z]=255<<24|h[L+2]<<16|h[L+1]<<8|h[L]}if(M==16)for(z=0;z<b;z++)L=6*z,x[z]=255<<24|h[L+4]<<16|h[L+2]<<8|h[L]}else{var y=ee[0];const re=ee[1],xe=ee[2];if(M==8)for(z=0;z<b;z++){var N=z<<2;L=3*z,x[z]=255<<24|h[L+2]<<16|h[L+1]<<8|h[L],h[L]==y&&h[L+1]==re&&h[L+2]==xe&&(w[N+3]=0)}if(M==16)for(z=0;z<b;z++)N=z<<2,L=6*z,x[z]=255<<24|h[L+4]<<16|h[L+2]<<8|h[L],Q(h,L)==y&&Q(h,L+2)==re&&Q(h,L+4)==xe&&(w[N+3]=0)}}else if(C==3){const ee=p.tabs.PLTE,re=p.tabs.tRNS,xe=re?re.length:0;if(M==1)for(var R=0;R<m;R++){var A=R*k,I=R*f;for(z=0;z<f;z++){N=I+z<<2;var P=3*(V=h[A+(z>>3)]>>7-((7&z)<<0)&1);w[N]=ee[P],w[N+1]=ee[P+1],w[N+2]=ee[P+2],w[N+3]=V<xe?re[V]:255}}if(M==2)for(R=0;R<m;R++)for(A=R*k,I=R*f,z=0;z<f;z++)N=I+z<<2,P=3*(V=h[A+(z>>2)]>>6-((3&z)<<1)&3),w[N]=ee[P],w[N+1]=ee[P+1],w[N+2]=ee[P+2],w[N+3]=V<xe?re[V]:255;if(M==4)for(R=0;R<m;R++)for(A=R*k,I=R*f,z=0;z<f;z++)N=I+z<<2,P=3*(V=h[A+(z>>1)]>>4-((1&z)<<2)&15),w[N]=ee[P],w[N+1]=ee[P+1],w[N+2]=ee[P+2],w[N+3]=V<xe?re[V]:255;if(M==8)for(z=0;z<b;z++){var V;N=z<<2,P=3*(V=h[z]),w[N]=ee[P],w[N+1]=ee[P+1],w[N+2]=ee[P+2],w[N+3]=V<xe?re[V]:255}}else if(C==4){if(M==8)for(z=0;z<b;z++){N=z<<2;var J=h[O=z<<1];w[N]=J,w[N+1]=J,w[N+2]=J,w[N+3]=h[O+1]}if(M==16)for(z=0;z<b;z++){var O;N=z<<2,J=h[O=z<<2],w[N]=J,w[N+1]=J,w[N+2]=J,w[N+3]=h[O+2]}}else if(C==0)for(y=p.tabs.tRNS?p.tabs.tRNS:-1,R=0;R<m;R++){const ee=R*k,re=R*f;if(M==1)for(var U=0;U<f;U++){var W=(J=255*(h[ee+(U>>>3)]>>>7-(7&U)&1))==255*y?0:255;x[re+U]=W<<24|J<<16|J<<8|J}else if(M==2)for(U=0;U<f;U++)W=(J=85*(h[ee+(U>>>2)]>>>6-((3&U)<<1)&3))==85*y?0:255,x[re+U]=W<<24|J<<16|J<<8|J;else if(M==4)for(U=0;U<f;U++)W=(J=17*(h[ee+(U>>>1)]>>>4-((1&U)<<2)&15))==17*y?0:255,x[re+U]=W<<24|J<<16|J<<8|J;else if(M==8)for(U=0;U<f;U++)W=(J=h[ee+U])==y?0:255,x[re+U]=W<<24|J<<16|J<<8|J;else if(M==16)for(U=0;U<f;U++)J=h[ee+(U<<1)],W=Q(h,ee+(U<<1))==y?0:255,x[re+U]=W<<24|J<<16|J<<8|J}return w}function n(h,f,m,p){const b=s(h),E=Math.ceil(m*b/8),k=new Uint8Array((E+1+h.interlace)*p);return f=h.tabs.CgBI?i(f,k):r(f,k),h.interlace==0?f=o(f,h,0,m,p):h.interlace==1&&(f=function(x,C){const M=C.width,Q=C.height,z=s(C),L=z>>3,y=Math.ceil(M*z/8),N=new Uint8Array(Q*y);let R=0;const A=[0,0,4,0,2,0,1],I=[0,4,0,2,0,1,0],P=[8,8,8,4,4,2,2],V=[8,8,4,4,2,2,1];let J=0;for(;J<7;){const U=P[J],W=V[J];let ee=0,re=0,xe=A[J];for(;xe<Q;)xe+=U,re++;let F=I[J];for(;F<M;)F+=W,ee++;const G=Math.ceil(ee*z/8);o(x,C,R,ee,re);let Y=0,Z=A[J];for(;Z<Q;){let ae=I[J],ie=R+Y*G<<3;for(;ae<M;){var O;if(z==1&&(O=(O=x[ie>>3])>>7-(7&ie)&1,N[Z*y+(ae>>3)]|=O<<7-((7&ae)<<0)),z==2&&(O=(O=x[ie>>3])>>6-(7&ie)&3,N[Z*y+(ae>>2)]|=O<<6-((3&ae)<<1)),z==4&&(O=(O=x[ie>>3])>>4-(7&ie)&15,N[Z*y+(ae>>1)]|=O<<4-((1&ae)<<2)),z>=8){const ce=Z*y+ae*L;for(let fe=0;fe<L;fe++)N[ce+fe]=x[(ie>>3)+fe]}ie+=z,ae+=W}Y++,Z+=U}ee*re!=0&&(R+=re*(1+G)),J+=1}return N}(f,h)),f}function r(h,f){return i(new Uint8Array(h.buffer,2,h.length-6),f)}var i=function(){const h={H:{}};return h.H.N=function(f,m){const p=Uint8Array;let b,E,k=0,w=0,x=0,C=0,M=0,Q=0,z=0,L=0,y=0;if(f[0]==3&&f[1]==0)return m||new p(0);const N=h.H,R=N.b,A=N.e,I=N.R,P=N.n,V=N.A,J=N.Z,O=N.m,U=m==null;for(U&&(m=new p(f.length>>>2<<5));k==0;)if(k=R(f,y,1),w=R(f,y+1,2),y+=3,w!=0){if(U&&(m=h.H.W(m,L+(1<<17))),w==1&&(b=O.J,E=O.h,Q=511,z=31),w==2){x=A(f,y,5)+257,C=A(f,y+5,5)+1,M=A(f,y+10,4)+4,y+=14;let ee=1;for(var W=0;W<38;W+=2)O.Q[W]=0,O.Q[W+1]=0;for(W=0;W<M;W++){const F=A(f,y+3*W,3);O.Q[1+(O.X[W]<<1)]=F,F>ee&&(ee=F)}y+=3*M,P(O.Q,ee),V(O.Q,ee,O.u),b=O.w,E=O.d,y=I(O.u,(1<<ee)-1,x+C,f,y,O.v);const re=N.V(O.v,0,x,O.C);Q=(1<<re)-1;const xe=N.V(O.v,x,C,O.D);z=(1<<xe)-1,P(O.C,re),V(O.C,re,b),P(O.D,xe),V(O.D,xe,E)}for(;;){const ee=b[J(f,y)&Q];y+=15&ee;const re=ee>>>4;if(!(re>>>8))m[L++]=re;else{if(re==256)break;{let xe=L+re-254;if(re>264){const ae=O.q[re-257];xe=L+(ae>>>3)+A(f,y,7&ae),y+=7&ae}const F=E[J(f,y)&z];y+=15&F;const G=F>>>4,Y=O.c[G],Z=(Y>>>4)+R(f,y,15&Y);for(y+=15&Y;L<xe;)m[L]=m[L++-Z],m[L]=m[L++-Z],m[L]=m[L++-Z],m[L]=m[L++-Z];L=xe}}}}else{7&y&&(y+=8-(7&y));const ee=4+(y>>>3),re=f[ee-4]|f[ee-3]<<8;U&&(m=h.H.W(m,L+re)),m.set(new p(f.buffer,f.byteOffset+ee,re),L),y=ee+re<<3,L+=re}return m.length==L?m:m.slice(0,L)},h.H.W=function(f,m){const p=f.length;if(m<=p)return f;const b=new Uint8Array(p<<1);return b.set(f,0),b},h.H.R=function(f,m,p,b,E,k){const w=h.H.e,x=h.H.Z;let C=0;for(;C<p;){const M=f[x(b,E)&m];E+=15&M;const Q=M>>>4;if(Q<=15)k[C]=Q,C++;else{let z=0,L=0;Q==16?(L=3+w(b,E,2),E+=2,z=k[C-1]):Q==17?(L=3+w(b,E,3),E+=3):Q==18&&(L=11+w(b,E,7),E+=7);const y=C+L;for(;C<y;)k[C]=z,C++}}return E},h.H.V=function(f,m,p,b){let E=0,k=0;const w=b.length>>>1;for(;k<p;){const x=f[k+m];b[k<<1]=0,b[1+(k<<1)]=x,x>E&&(E=x),k++}for(;k<w;)b[k<<1]=0,b[1+(k<<1)]=0,k++;return E},h.H.n=function(f,m){const p=h.H.m,b=f.length;let E,k,w,x;const C=p.j;for(var M=0;M<=m;M++)C[M]=0;for(M=1;M<b;M+=2)C[f[M]]++;const Q=p.K;for(E=0,C[0]=0,k=1;k<=m;k++)E=E+C[k-1]<<1,Q[k]=E;for(w=0;w<b;w+=2)x=f[w+1],x!=0&&(f[w]=Q[x],Q[x]++)},h.H.A=function(f,m,p){const b=f.length,E=h.H.m.r;for(let k=0;k<b;k+=2)if(f[k+1]!=0){const w=k>>1,x=f[k+1],C=w<<4|x,M=m-x;let Q=f[k]<<M;const z=Q+(1<<M);for(;Q!=z;)p[E[Q]>>>15-m]=C,Q++}},h.H.l=function(f,m){const p=h.H.m.r,b=15-m;for(let E=0;E<f.length;E+=2){const k=f[E]<<m-f[E+1];f[E]=p[k]>>>b}},h.H.M=function(f,m,p){p<<=7&m;const b=m>>>3;f[b]|=p,f[b+1]|=p>>>8},h.H.I=function(f,m,p){p<<=7&m;const b=m>>>3;f[b]|=p,f[b+1]|=p>>>8,f[b+2]|=p>>>16},h.H.e=function(f,m,p){return(f[m>>>3]|f[1+(m>>>3)]<<8)>>>(7&m)&(1<<p)-1},h.H.b=function(f,m,p){return(f[m>>>3]|f[1+(m>>>3)]<<8|f[2+(m>>>3)]<<16)>>>(7&m)&(1<<p)-1},h.H.Z=function(f,m){return(f[m>>>3]|f[1+(m>>>3)]<<8|f[2+(m>>>3)]<<16)>>>(7&m)},h.H.i=function(f,m){return(f[m>>>3]|f[1+(m>>>3)]<<8|f[2+(m>>>3)]<<16|f[3+(m>>>3)]<<24)>>>(7&m)},h.H.m=function(){const f=Uint16Array,m=Uint32Array;return{K:new f(16),j:new f(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new f(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new m(32),J:new f(512),_:[],h:new f(32),$:[],w:new f(32768),C:[],v:[],d:new f(32768),D:[],u:new f(512),Q:[],r:new f(32768),s:new m(286),Y:new m(30),a:new m(19),t:new m(15e3),k:new f(65536),g:new f(32768)}}(),function(){const f=h.H.m;for(var m=0;m<32768;m++){let b=m;b=(2863311530&b)>>>1|(1431655765&b)<<1,b=(3435973836&b)>>>2|(858993459&b)<<2,b=(4042322160&b)>>>4|(252645135&b)<<4,b=(4278255360&b)>>>8|(16711935&b)<<8,f.r[m]=(b>>>16|b<<16)>>>17}function p(b,E,k){for(;E--!=0;)b.push(0,k)}for(m=0;m<32;m++)f.q[m]=f.S[m]<<3|f.T[m],f.c[m]=f.p[m]<<4|f.z[m];p(f._,144,8),p(f._,112,9),p(f._,24,7),p(f._,8,8),h.H.n(f._,9),h.H.A(f._,9,f.J),h.H.l(f._,9),p(f.$,32,5),h.H.n(f.$,5),h.H.A(f.$,5,f.h),h.H.l(f.$,5),p(f.Q,19,0),p(f.C,286,0),p(f.D,30,0),p(f.v,320,0)}(),h.H.N}();function s(h){return[1,null,3,1,2,null,4][h.ctype]*h.depth}function o(h,f,m,p,b){let E=s(f);const k=Math.ceil(p*E/8);let w,x;E=Math.ceil(E/8);let C=h[m],M=0;if(C>1&&(h[m]=[0,0,1][C-2]),C==3)for(M=E;M<k;M++)h[M+1]=h[M+1]+(h[M+1-E]>>>1)&255;for(let Q=0;Q<b;Q++)if(w=m+Q*k,x=w+Q+1,C=h[x-1],M=0,C==0)for(;M<k;M++)h[w+M]=h[x+M];else if(C==1){for(;M<E;M++)h[w+M]=h[x+M];for(;M<k;M++)h[w+M]=h[x+M]+h[w+M-E]}else if(C==2)for(;M<k;M++)h[w+M]=h[x+M]+h[w+M-k];else if(C==3){for(;M<E;M++)h[w+M]=h[x+M]+(h[w+M-k]>>>1);for(;M<k;M++)h[w+M]=h[x+M]+(h[w+M-k]+h[w+M-E]>>>1)}else{for(;M<E;M++)h[w+M]=h[x+M]+a(0,h[w+M-k],0);for(;M<k;M++)h[w+M]=h[x+M]+a(h[w+M-E],h[w+M-k],h[w+M-E-k])}return h}function a(h,f,m){const p=h+f-m,b=p-h,E=p-f,k=p-m;return b*b<=E*E&&b*b<=k*k?h:E*E<=k*k?f:m}function l(h,f,m){m.width=t.readUint(h,f),f+=4,m.height=t.readUint(h,f),f+=4,m.depth=h[f],f++,m.ctype=h[f],f++,m.compress=h[f],f++,m.filter=h[f],f++,m.interlace=h[f],f++}function u(h,f,m,p,b,E,k,w,x){const C=Math.min(f,b),M=Math.min(m,E);let Q=0,z=0;for(let J=0;J<M;J++)for(let O=0;O<C;O++)if(k>=0&&w>=0?(Q=J*f+O<<2,z=(w+J)*b+k+O<<2):(Q=(-w+J)*f-k+O<<2,z=J*b+O<<2),x==0)p[z]=h[Q],p[z+1]=h[Q+1],p[z+2]=h[Q+2],p[z+3]=h[Q+3];else if(x==1){var L=h[Q+3]*.00392156862745098,y=h[Q]*L,N=h[Q+1]*L,R=h[Q+2]*L,A=p[z+3]*(1/255),I=p[z]*A,P=p[z+1]*A,V=p[z+2]*A;const U=1-L,W=L+A*U,ee=W==0?0:1/W;p[z+3]=255*W,p[z+0]=(y+I*U)*ee,p[z+1]=(N+P*U)*ee,p[z+2]=(R+V*U)*ee}else if(x==2)L=h[Q+3],y=h[Q],N=h[Q+1],R=h[Q+2],A=p[z+3],I=p[z],P=p[z+1],V=p[z+2],L==A&&y==I&&N==P&&R==V?(p[z]=0,p[z+1]=0,p[z+2]=0,p[z+3]=0):(p[z]=y,p[z+1]=N,p[z+2]=R,p[z+3]=L);else if(x==3){if(L=h[Q+3],y=h[Q],N=h[Q+1],R=h[Q+2],A=p[z+3],I=p[z],P=p[z+1],V=p[z+2],L==A&&y==I&&N==P&&R==V)continue;if(L<220&&A>20)return!1}return!0}return{decode:function(f){const m=new Uint8Array(f);let p=8;const b=t,E=b.readUshort,k=b.readUint,w={tabs:{},frames:[]},x=new Uint8Array(m.length);let C,M=0,Q=0;const z=[137,80,78,71,13,10,26,10];for(var L=0;L<8;L++)if(m[L]!=z[L])throw"The input is not a PNG file!";for(;p<m.length;){const J=b.readUint(m,p);p+=4;const O=b.readASCII(m,p,4);if(p+=4,O=="IHDR")l(m,p,w);else if(O=="iCCP"){for(var y=p;m[y]!=0;)y++;b.readASCII(m,p,y-p),m[y+1];const U=m.slice(y+2,p+J);let W=null;try{W=r(U)}catch{W=i(U)}w.tabs[O]=W}else if(O=="CgBI")w.tabs[O]=m.slice(p,p+4);else if(O=="IDAT"){for(L=0;L<J;L++)x[M+L]=m[p+L];M+=J}else if(O=="acTL")w.tabs[O]={num_frames:k(m,p),num_plays:k(m,p+4)},C=new Uint8Array(m.length);else if(O=="fcTL"){Q!=0&&((V=w.frames[w.frames.length-1]).data=n(w,C.slice(0,Q),V.rect.width,V.rect.height),Q=0);const U={x:k(m,p+12),y:k(m,p+16),width:k(m,p+4),height:k(m,p+8)};let W=E(m,p+22);W=E(m,p+20)/(W==0?100:W);const ee={rect:U,delay:Math.round(1e3*W),dispose:m[p+24],blend:m[p+25]};w.frames.push(ee)}else if(O=="fdAT"){for(L=0;L<J-4;L++)C[Q+L]=m[p+L+4];Q+=J-4}else if(O=="pHYs")w.tabs[O]=[b.readUint(m,p),b.readUint(m,p+4),m[p+8]];else if(O=="cHRM")for(w.tabs[O]=[],L=0;L<8;L++)w.tabs[O].push(b.readUint(m,p+4*L));else if(O=="tEXt"||O=="zTXt"){w.tabs[O]==null&&(w.tabs[O]={});var N=b.nextZero(m,p),R=b.readASCII(m,p,N-p),A=p+J-N-1;if(O=="tEXt")P=b.readASCII(m,N+1,A);else{var I=r(m.slice(N+2,N+2+A));P=b.readUTF8(I,0,I.length)}w.tabs[O][R]=P}else if(O=="iTXt"){w.tabs[O]==null&&(w.tabs[O]={}),N=0,y=p,N=b.nextZero(m,y),R=b.readASCII(m,y,N-y);const U=m[y=N+1];var P;m[y+1],y+=2,N=b.nextZero(m,y),b.readASCII(m,y,N-y),y=N+1,N=b.nextZero(m,y),b.readUTF8(m,y,N-y),A=J-((y=N+1)-p),U==0?P=b.readUTF8(m,y,A):(I=r(m.slice(y,y+A)),P=b.readUTF8(I,0,I.length)),w.tabs[O][R]=P}else if(O=="PLTE")w.tabs[O]=b.readBytes(m,p,J);else if(O=="hIST"){const U=w.tabs.PLTE.length/3;for(w.tabs[O]=[],L=0;L<U;L++)w.tabs[O].push(E(m,p+2*L))}else if(O=="tRNS")w.ctype==3?w.tabs[O]=b.readBytes(m,p,J):w.ctype==0?w.tabs[O]=E(m,p):w.ctype==2&&(w.tabs[O]=[E(m,p),E(m,p+2),E(m,p+4)]);else if(O=="gAMA")w.tabs[O]=b.readUint(m,p)/1e5;else if(O=="sRGB")w.tabs[O]=m[p];else if(O=="bKGD")w.ctype==0||w.ctype==4?w.tabs[O]=[E(m,p)]:w.ctype==2||w.ctype==6?w.tabs[O]=[E(m,p),E(m,p+2),E(m,p+4)]:w.ctype==3&&(w.tabs[O]=m[p]);else if(O=="IEND")break;p+=J,b.readUint(m,p),p+=4}var V;return Q!=0&&((V=w.frames[w.frames.length-1]).data=n(w,C.slice(0,Q),V.rect.width,V.rect.height)),w.data=n(w,x,w.width,w.height),delete w.compress,delete w.interlace,delete w.filter,w},toRGBA8:function(f){const m=f.width,p=f.height;if(f.tabs.acTL==null)return[e(f.data,m,p,f).buffer];const b=[];f.frames[0].data==null&&(f.frames[0].data=f.data);const E=m*p*4,k=new Uint8Array(E),w=new Uint8Array(E),x=new Uint8Array(E);for(let M=0;M<f.frames.length;M++){const Q=f.frames[M],z=Q.rect.x,L=Q.rect.y,y=Q.rect.width,N=Q.rect.height,R=e(Q.data,y,N,f);if(M!=0)for(var C=0;C<E;C++)x[C]=k[C];if(Q.blend==0?u(R,y,N,k,m,p,z,L,0):Q.blend==1&&u(R,y,N,k,m,p,z,L,1),b.push(k.buffer.slice(0)),Q.dispose!=0){if(Q.dispose==1)u(w,y,N,k,m,p,z,L,0);else if(Q.dispose==2)for(C=0;C<E;C++)k[C]=x[C]}}return b},_paeth:a,_copyTile:u,_bin:t}}();(function(){const{_copyTile:t}=ns,{_bin:e}=ns,n=ns._paeth;var r={table:function(){const y=new Uint32Array(256);for(let N=0;N<256;N++){let R=N;for(let A=0;A<8;A++)1&R?R=3988292384^R>>>1:R>>>=1;y[N]=R}return y}(),update(y,N,R,A){for(let I=0;I<A;I++)y=r.table[255&(y^N[R+I])]^y>>>8;return y},crc:(y,N,R)=>4294967295^r.update(4294967295,y,N,R)};function i(y,N,R,A){N[R]+=y[0]*A>>4,N[R+1]+=y[1]*A>>4,N[R+2]+=y[2]*A>>4,N[R+3]+=y[3]*A>>4}function s(y){return Math.max(0,Math.min(255,y))}function o(y,N){const R=y[0]-N[0],A=y[1]-N[1],I=y[2]-N[2],P=y[3]-N[3];return R*R+A*A+I*I+P*P}function a(y,N,R,A,I,P,V){V==null&&(V=1);const J=A.length,O=[];for(var U=0;U<J;U++){const Z=A[U];O.push([Z>>>0&255,Z>>>8&255,Z>>>16&255,Z>>>24&255])}for(U=0;U<J;U++){let Z=4294967295;for(var W=0,ee=0;ee<J;ee++){var re=o(O[U],O[ee]);ee!=U&&re<Z&&(Z=re,W=ee)}}const xe=new Uint32Array(I.buffer),F=new Int16Array(N*R*4),G=[0,8,2,10,12,4,14,6,3,11,1,9,15,7,13,5];for(U=0;U<G.length;U++)G[U]=255*((G[U]+.5)/16-.5);for(let Z=0;Z<R;Z++)for(let ae=0;ae<N;ae++){var Y;U=4*(Z*N+ae),V!=2?Y=[s(y[U]+F[U]),s(y[U+1]+F[U+1]),s(y[U+2]+F[U+2]),s(y[U+3]+F[U+3])]:(re=G[4*(3&Z)+(3&ae)],Y=[s(y[U]+re),s(y[U+1]+re),s(y[U+2]+re),s(y[U+3]+re)]),W=0;let ie=16777215;for(ee=0;ee<J;ee++){const Ie=o(Y,O[ee]);Ie<ie&&(ie=Ie,W=ee)}const ce=O[W],fe=[Y[0]-ce[0],Y[1]-ce[1],Y[2]-ce[2],Y[3]-ce[3]];V==1&&(ae!=N-1&&i(fe,F,U+4,7),Z!=R-1&&(ae!=0&&i(fe,F,U+4*N-4,3),i(fe,F,U+4*N,5),ae!=N-1&&i(fe,F,U+4*N+4,1))),P[U>>2]=W,xe[U>>2]=A[W]}}function l(y,N,R,A,I){I==null&&(I={});const{crc:P}=r,V=e.writeUint,J=e.writeUshort,O=e.writeASCII;let U=8;const W=y.frames.length>1;let ee,re=!1,xe=33+(W?20:0);if(I.sRGB!=null&&(xe+=13),I.pHYs!=null&&(xe+=21),I.iCCP!=null&&(ee=pako.deflate(I.iCCP),xe+=21+ee.length+4),y.ctype==3){for(var F=y.plte.length,G=0;G<F;G++)y.plte[G]>>>24!=255&&(re=!0);xe+=8+3*F+4+(re?8+1*F+4:0)}for(var Y=0;Y<y.frames.length;Y++)W&&(xe+=38),xe+=(ce=y.frames[Y]).cimg.length+12,Y!=0&&(xe+=4);xe+=12;const Z=new Uint8Array(xe),ae=[137,80,78,71,13,10,26,10];for(G=0;G<8;G++)Z[G]=ae[G];if(V(Z,U,13),U+=4,O(Z,U,"IHDR"),U+=4,V(Z,U,N),U+=4,V(Z,U,R),U+=4,Z[U]=y.depth,U++,Z[U]=y.ctype,U++,Z[U]=0,U++,Z[U]=0,U++,Z[U]=0,U++,V(Z,U,P(Z,U-17,17)),U+=4,I.sRGB!=null&&(V(Z,U,1),U+=4,O(Z,U,"sRGB"),U+=4,Z[U]=I.sRGB,U++,V(Z,U,P(Z,U-5,5)),U+=4),I.iCCP!=null){const fe=13+ee.length;V(Z,U,fe),U+=4,O(Z,U,"iCCP"),U+=4,O(Z,U,"ICC profile"),U+=11,U+=2,Z.set(ee,U),U+=ee.length,V(Z,U,P(Z,U-(fe+4),fe+4)),U+=4}if(I.pHYs!=null&&(V(Z,U,9),U+=4,O(Z,U,"pHYs"),U+=4,V(Z,U,I.pHYs[0]),U+=4,V(Z,U,I.pHYs[1]),U+=4,Z[U]=I.pHYs[2],U++,V(Z,U,P(Z,U-13,13)),U+=4),W&&(V(Z,U,8),U+=4,O(Z,U,"acTL"),U+=4,V(Z,U,y.frames.length),U+=4,V(Z,U,I.loop!=null?I.loop:0),U+=4,V(Z,U,P(Z,U-12,12)),U+=4),y.ctype==3){for(V(Z,U,3*(F=y.plte.length)),U+=4,O(Z,U,"PLTE"),U+=4,G=0;G<F;G++){const fe=3*G,Ie=y.plte[G],Ee=255&Ie,je=Ie>>>8&255,Ue=Ie>>>16&255;Z[U+fe+0]=Ee,Z[U+fe+1]=je,Z[U+fe+2]=Ue}if(U+=3*F,V(Z,U,P(Z,U-3*F-4,3*F+4)),U+=4,re){for(V(Z,U,F),U+=4,O(Z,U,"tRNS"),U+=4,G=0;G<F;G++)Z[U+G]=y.plte[G]>>>24&255;U+=F,V(Z,U,P(Z,U-F-4,F+4)),U+=4}}let ie=0;for(Y=0;Y<y.frames.length;Y++){var ce=y.frames[Y];W&&(V(Z,U,26),U+=4,O(Z,U,"fcTL"),U+=4,V(Z,U,ie++),U+=4,V(Z,U,ce.rect.width),U+=4,V(Z,U,ce.rect.height),U+=4,V(Z,U,ce.rect.x),U+=4,V(Z,U,ce.rect.y),U+=4,J(Z,U,A[Y]),U+=2,J(Z,U,1e3),U+=2,Z[U]=ce.dispose,U++,Z[U]=ce.blend,U++,V(Z,U,P(Z,U-30,30)),U+=4);const fe=ce.cimg;V(Z,U,(F=fe.length)+(Y==0?0:4)),U+=4;const Ie=U;O(Z,U,Y==0?"IDAT":"fdAT"),U+=4,Y!=0&&(V(Z,U,ie++),U+=4),Z.set(fe,U),U+=F,V(Z,U,P(Z,Ie,U-Ie)),U+=4}return V(Z,U,0),U+=4,O(Z,U,"IEND"),U+=4,V(Z,U,P(Z,U-4,4)),U+=4,Z.buffer}function u(y,N,R){for(let A=0;A<y.frames.length;A++){const I=y.frames[A];I.rect.width;const P=I.rect.height,V=new Uint8Array(P*I.bpl+P);I.cimg=p(I.img,P,I.bpp,I.bpl,V,N,R)}}function h(y,N,R,A,I){const P=I[0],V=I[1],J=I[2],O=I[3],U=I[4],W=I[5];let ee=6,re=8,xe=255;for(var F=0;F<y.length;F++){const oe=new Uint8Array(y[F]);for(var G=oe.length,Y=0;Y<G;Y+=4)xe&=oe[Y+3]}const Z=xe!=255,ae=function(ye,Re,Te,Me,Be,ze){const He=[];for(var Qe=0;Qe<ye.length;Qe++){const at=new Uint8Array(ye[Qe]),$e=new Uint32Array(at.buffer);var st;let Ct=0,vt=0,sn=Re,At=Te,Bt=Me?1:0;if(Qe!=0){const Hr=ze||Me||Qe==1||He[Qe-2].dispose!=0?1:2;let Nt=0,ui=1e9;for(let Ut=0;Ut<Hr;Ut++){var tt=new Uint8Array(ye[Qe-1-Ut]);const Hn=new Uint32Array(ye[Qe-1-Ut]);let xn=Re,Lt=Te,it=-1,Et=-1;for(let Yt=0;Yt<Te;Yt++)for(let fn=0;fn<Re;fn++)$e[ht=Yt*Re+fn]!=Hn[ht]&&(fn<xn&&(xn=fn),fn>it&&(it=fn),Yt<Lt&&(Lt=Yt),Yt>Et&&(Et=Yt));it==-1&&(xn=Lt=it=Et=0),Be&&((1&xn)==1&&xn--,(1&Lt)==1&&Lt--);const Lr=(it-xn+1)*(Et-Lt+1);Lr<ui&&(ui=Lr,Nt=Ut,Ct=xn,vt=Lt,sn=it-xn+1,At=Et-Lt+1)}tt=new Uint8Array(ye[Qe-1-Nt]),Nt==1&&(He[Qe-1].dispose=2),st=new Uint8Array(sn*At*4),t(tt,Re,Te,st,sn,At,-Ct,-vt,0),Bt=t(at,Re,Te,st,sn,At,-Ct,-vt,3)?1:0,Bt==1?m(at,Re,Te,st,{x:Ct,y:vt,width:sn,height:At}):t(at,Re,Te,st,sn,At,-Ct,-vt,0)}else st=at.slice(0);He.push({rect:{x:Ct,y:vt,width:sn,height:At},img:st,blend:Bt,dispose:0})}if(Me)for(Qe=0;Qe<He.length;Qe++){if((ot=He[Qe]).blend==1)continue;const at=ot.rect,$e=He[Qe-1].rect,Ct=Math.min(at.x,$e.x),vt=Math.min(at.y,$e.y),sn={x:Ct,y:vt,width:Math.max(at.x+at.width,$e.x+$e.width)-Ct,height:Math.max(at.y+at.height,$e.y+$e.height)-vt};He[Qe-1].dispose=1,Qe-1!=0&&f(ye,Re,Te,He,Qe-1,sn,Be),f(ye,Re,Te,He,Qe,sn,Be)}let lt=0;if(ye.length!=1)for(var ht=0;ht<He.length;ht++){var ot;lt+=(ot=He[ht]).rect.width*ot.rect.height}return He}(y,N,R,P,V,J),ie={},ce=[],fe=[];if(A!=0){const oe=[];for(Y=0;Y<ae.length;Y++)oe.push(ae[Y].img.buffer);const ye=function(Be){let ze=0;for(var He=0;He<Be.length;He++)ze+=Be[He].byteLength;const Qe=new Uint8Array(ze);let st=0;for(He=0;He<Be.length;He++){const tt=new Uint8Array(Be[He]),lt=tt.length;for(let ht=0;ht<lt;ht+=4){let ot=tt[ht],at=tt[ht+1],$e=tt[ht+2];const Ct=tt[ht+3];Ct==0&&(ot=at=$e=0),Qe[st+ht]=ot,Qe[st+ht+1]=at,Qe[st+ht+2]=$e,Qe[st+ht+3]=Ct}st+=lt}return Qe.buffer}(oe),Re=E(ye,A);for(Y=0;Y<Re.plte.length;Y++)ce.push(Re.plte[Y].est.rgba);let Te=0;for(Y=0;Y<ae.length;Y++){const Me=(Ee=ae[Y]).img.length;var Ie=new Uint8Array(Re.inds.buffer,Te>>2,Me>>2);fe.push(Ie);const Be=new Uint8Array(Re.abuf,Te,Me);W&&a(Ee.img,Ee.rect.width,Ee.rect.height,ce,Be,Ie),Ee.img.set(Be),Te+=Me}}else for(F=0;F<ae.length;F++){var Ee=ae[F];const oe=new Uint32Array(Ee.img.buffer);var je=Ee.rect.width;for(G=oe.length,Ie=new Uint8Array(G),fe.push(Ie),Y=0;Y<G;Y++){const ye=oe[Y];if(Y!=0&&ye==oe[Y-1])Ie[Y]=Ie[Y-1];else if(Y>je&&ye==oe[Y-je])Ie[Y]=Ie[Y-je];else{let Re=ie[ye];if(Re==null&&(ie[ye]=Re=ce.length,ce.push(ye),ce.length>=300))break;Ie[Y]=Re}}}const Ue=ce.length;for(Ue<=256&&U==0&&(re=Ue<=2?1:Ue<=4?2:Ue<=16?4:8,re=Math.max(re,O)),F=0;F<ae.length;F++){(Ee=ae[F]).rect.x,Ee.rect.y,je=Ee.rect.width;const oe=Ee.rect.height;let ye=Ee.img;new Uint32Array(ye.buffer);let Re=4*je,Te=4;if(Ue<=256&&U==0){Re=Math.ceil(re*je/8);var Ye=new Uint8Array(Re*oe);const Me=fe[F];for(let Be=0;Be<oe;Be++){Y=Be*Re;const ze=Be*je;if(re==8)for(var Se=0;Se<je;Se++)Ye[Y+Se]=Me[ze+Se];else if(re==4)for(Se=0;Se<je;Se++)Ye[Y+(Se>>1)]|=Me[ze+Se]<<4-4*(1&Se);else if(re==2)for(Se=0;Se<je;Se++)Ye[Y+(Se>>2)]|=Me[ze+Se]<<6-2*(3&Se);else if(re==1)for(Se=0;Se<je;Se++)Ye[Y+(Se>>3)]|=Me[ze+Se]<<7-1*(7&Se)}ye=Ye,ee=3,Te=1}else if(Z==0&&ae.length==1){Ye=new Uint8Array(je*oe*3);const Me=je*oe;for(Y=0;Y<Me;Y++){const Be=3*Y,ze=4*Y;Ye[Be]=ye[ze],Ye[Be+1]=ye[ze+1],Ye[Be+2]=ye[ze+2]}ye=Ye,ee=2,Te=3,Re=3*je}Ee.img=ye,Ee.bpl=Re,Ee.bpp=Te}return{ctype:ee,depth:re,plte:ce,frames:ae}}function f(y,N,R,A,I,P,V){const J=Uint8Array,O=Uint32Array,U=new J(y[I-1]),W=new O(y[I-1]),ee=I+1<y.length?new J(y[I+1]):null,re=new J(y[I]),xe=new O(re.buffer);let F=N,G=R,Y=-1,Z=-1;for(let ie=0;ie<P.height;ie++)for(let ce=0;ce<P.width;ce++){const fe=P.x+ce,Ie=P.y+ie,Ee=Ie*N+fe,je=xe[Ee];je==0||A[I-1].dispose==0&&W[Ee]==je&&(ee==null||ee[4*Ee+3]!=0)||(fe<F&&(F=fe),fe>Y&&(Y=fe),Ie<G&&(G=Ie),Ie>Z&&(Z=Ie))}Y==-1&&(F=G=Y=Z=0),V&&((1&F)==1&&F--,(1&G)==1&&G--),P={x:F,y:G,width:Y-F+1,height:Z-G+1};const ae=A[I];ae.rect=P,ae.blend=1,ae.img=new Uint8Array(P.width*P.height*4),A[I-1].dispose==0?(t(U,N,R,ae.img,P.width,P.height,-P.x,-P.y,0),m(re,N,R,ae.img,P)):t(re,N,R,ae.img,P.width,P.height,-P.x,-P.y,0)}function m(y,N,R,A,I){t(y,N,R,A,I.width,I.height,-I.x,-I.y,2)}function p(y,N,R,A,I,P,V){const J=[];let O,U=[0,1,2,3,4];P!=-1?U=[P]:(N*A>5e5||R==1)&&(U=[0]),V&&(O={level:0});const W=tO;for(var ee=0;ee<U.length;ee++){for(let F=0;F<N;F++)b(I,y,F,A,R,U[ee]);J.push(W.deflate(I,O))}let re,xe=1e9;for(ee=0;ee<J.length;ee++)J[ee].length<xe&&(re=ee,xe=J[ee].length);return J[re]}function b(y,N,R,A,I,P){const V=R*A;let J=V+R;if(y[J]=P,J++,P==0)if(A<500)for(var O=0;O<A;O++)y[J+O]=N[V+O];else y.set(new Uint8Array(N.buffer,V,A),J);else if(P==1){for(O=0;O<I;O++)y[J+O]=N[V+O];for(O=I;O<A;O++)y[J+O]=N[V+O]-N[V+O-I]+256&255}else if(R==0){for(O=0;O<I;O++)y[J+O]=N[V+O];if(P==2)for(O=I;O<A;O++)y[J+O]=N[V+O];if(P==3)for(O=I;O<A;O++)y[J+O]=N[V+O]-(N[V+O-I]>>1)+256&255;if(P==4)for(O=I;O<A;O++)y[J+O]=N[V+O]-n(N[V+O-I],0,0)+256&255}else{if(P==2)for(O=0;O<A;O++)y[J+O]=N[V+O]+256-N[V+O-A]&255;if(P==3){for(O=0;O<I;O++)y[J+O]=N[V+O]+256-(N[V+O-A]>>1)&255;for(O=I;O<A;O++)y[J+O]=N[V+O]+256-(N[V+O-A]+N[V+O-I]>>1)&255}if(P==4){for(O=0;O<I;O++)y[J+O]=N[V+O]+256-n(0,N[V+O-A],0)&255;for(O=I;O<A;O++)y[J+O]=N[V+O]+256-n(N[V+O-I],N[V+O-A],N[V+O-I-A])&255}}}function E(y,N){const R=new Uint8Array(y),A=R.slice(0),I=new Uint32Array(A.buffer),P=k(A,N),V=P[0],J=P[1],O=R.length,U=new Uint8Array(O>>2);let W;if(R.length<2e7)for(var ee=0;ee<O;ee+=4)W=w(V,re=R[ee]*(1/255),xe=R[ee+1]*(1/255),F=R[ee+2]*(1/255),G=R[ee+3]*(1/255)),U[ee>>2]=W.ind,I[ee>>2]=W.est.rgba;else for(ee=0;ee<O;ee+=4){var re=R[ee]*.00392156862745098,xe=R[ee+1]*(1/255),F=R[ee+2]*(1/255),G=R[ee+3]*(1/255);for(W=V;W.left;)W=x(W.est,re,xe,F,G)<=0?W.left:W.right;U[ee>>2]=W.ind,I[ee>>2]=W.est.rgba}return{abuf:A.buffer,inds:U,plte:J}}function k(y,N,R){R==null&&(R=1e-4);const A=new Uint32Array(y.buffer),I={i0:0,i1:y.length,bst:null,est:null,tdst:0,left:null,right:null};I.bst=Q(y,I.i0,I.i1),I.est=z(I.bst);const P=[I];for(;P.length<N;){let J=0,O=0;for(var V=0;V<P.length;V++)P[V].est.L>J&&(J=P[V].est.L,O=V);if(J<R)break;const U=P[O],W=C(y,A,U.i0,U.i1,U.est.e,U.est.eMq255);if(U.i0>=W||U.i1<=W){U.est.L=0;continue}const ee={i0:U.i0,i1:W,bst:null,est:null,tdst:0,left:null,right:null};ee.bst=Q(y,ee.i0,ee.i1),ee.est=z(ee.bst);const re={i0:W,i1:U.i1,bst:null,est:null,tdst:0,left:null,right:null};for(re.bst={R:[],m:[],N:U.bst.N-ee.bst.N},V=0;V<16;V++)re.bst.R[V]=U.bst.R[V]-ee.bst.R[V];for(V=0;V<4;V++)re.bst.m[V]=U.bst.m[V]-ee.bst.m[V];re.est=z(re.bst),U.left=ee,U.right=re,P[O]=ee,P.push(re)}for(P.sort((J,O)=>O.bst.N-J.bst.N),V=0;V<P.length;V++)P[V].ind=V;return[I,P]}function w(y,N,R,A,I){if(y.left==null)return y.tdst=function(ee,re,xe,F,G){const Y=re-ee[0],Z=xe-ee[1],ae=F-ee[2],ie=G-ee[3];return Y*Y+Z*Z+ae*ae+ie*ie}(y.est.q,N,R,A,I),y;const P=x(y.est,N,R,A,I);let V=y.left,J=y.right;P>0&&(V=y.right,J=y.left);const O=w(V,N,R,A,I);if(O.tdst<=P*P)return O;const U=w(J,N,R,A,I);return U.tdst<O.tdst?U:O}function x(y,N,R,A,I){const{e:P}=y;return P[0]*N+P[1]*R+P[2]*A+P[3]*I-y.eMq}function C(y,N,R,A,I,P){for(A-=4;R<A;){for(;M(y,R,I)<=P;)R+=4;for(;M(y,A,I)>P;)A-=4;if(R>=A)break;const V=N[R>>2];N[R>>2]=N[A>>2],N[A>>2]=V,R+=4,A-=4}for(;M(y,R,I)>P;)R-=4;return R+4}function M(y,N,R){return y[N]*R[0]+y[N+1]*R[1]+y[N+2]*R[2]+y[N+3]*R[3]}function Q(y,N,R){const A=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],I=[0,0,0,0],P=R-N>>2;for(let V=N;V<R;V+=4){const J=y[V]*.00392156862745098,O=y[V+1]*(1/255),U=y[V+2]*(1/255),W=y[V+3]*(1/255);I[0]+=J,I[1]+=O,I[2]+=U,I[3]+=W,A[0]+=J*J,A[1]+=J*O,A[2]+=J*U,A[3]+=J*W,A[5]+=O*O,A[6]+=O*U,A[7]+=O*W,A[10]+=U*U,A[11]+=U*W,A[15]+=W*W}return A[4]=A[1],A[8]=A[2],A[9]=A[6],A[12]=A[3],A[13]=A[7],A[14]=A[11],{R:A,m:I,N:P}}function z(y){const{R:N}=y,{m:R}=y,{N:A}=y,I=R[0],P=R[1],V=R[2],J=R[3],O=A==0?0:1/A,U=[N[0]-I*I*O,N[1]-I*P*O,N[2]-I*V*O,N[3]-I*J*O,N[4]-P*I*O,N[5]-P*P*O,N[6]-P*V*O,N[7]-P*J*O,N[8]-V*I*O,N[9]-V*P*O,N[10]-V*V*O,N[11]-V*J*O,N[12]-J*I*O,N[13]-J*P*O,N[14]-J*V*O,N[15]-J*J*O],W=U,ee=L;let re=[Math.random(),Math.random(),Math.random(),Math.random()],xe=0,F=0;if(A!=0)for(let Y=0;Y<16&&(re=ee.multVec(W,re),F=Math.sqrt(ee.dot(re,re)),re=ee.sml(1/F,re),!(Y!=0&&Math.abs(F-xe)<1e-9));Y++)xe=F;const G=[I*O,P*O,V*O,J*O];return{Cov:U,q:G,e:re,L:xe,eMq255:ee.dot(ee.sml(255,G),re),eMq:ee.dot(re,G),rgba:(Math.round(255*G[3])<<24|Math.round(255*G[2])<<16|Math.round(255*G[1])<<8|Math.round(255*G[0])<<0)>>>0}}var L={multVec:(y,N)=>[y[0]*N[0]+y[1]*N[1]+y[2]*N[2]+y[3]*N[3],y[4]*N[0]+y[5]*N[1]+y[6]*N[2]+y[7]*N[3],y[8]*N[0]+y[9]*N[1]+y[10]*N[2]+y[11]*N[3],y[12]*N[0]+y[13]*N[1]+y[14]*N[2]+y[15]*N[3]],dot:(y,N)=>y[0]*N[0]+y[1]*N[1]+y[2]*N[2]+y[3]*N[3],sml:(y,N)=>[y*N[0],y*N[1],y*N[2],y*N[3]]};ns.encode=function(N,R,A,I,P,V,J){I==null&&(I=0),J==null&&(J=!1);const O=h(N,R,A,I,[!1,!1,!1,0,J,!1]);return u(O,-1),l(O,R,A,P,V)},ns.encodeLL=function(N,R,A,I,P,V,J,O){const U={ctype:0+(I==1?0:2)+(P==0?0:4),depth:V,frames:[]},W=(I+P)*V,ee=W*R;for(let re=0;re<N.length;re++)U.frames.push({rect:{x:0,y:0,width:R,height:A},img:new Uint8Array(N[re]),blend:0,dispose:1,bpp:Math.ceil(W/8),bpl:Math.ceil(ee/8)});return u(U,0,!0),l(U,R,A,J,O)},ns.encode.compress=h,ns.encode.dither=a,ns.quantize=E,ns.quantize.getKDtree=k,ns.quantize.getNearest=w})();const LA={toArrayBuffer(t,e){const n=t.width,r=t.height,i=n<<2,s=t.getContext("2d").getImageData(0,0,n,r),o=new Uint32Array(s.data.buffer),a=(32*n+31)/32<<2,l=a*r,u=122+l,h=new ArrayBuffer(u),f=new DataView(h),m=1<<20;let p,b,E,k,w=m,x=0,C=0,M=0;function Q(y){f.setUint16(C,y,!0),C+=2}function z(y){f.setUint32(C,y,!0),C+=4}function L(y){C+=y}Q(19778),z(u),L(4),z(122),z(108),z(n),z(-r>>>0),Q(1),Q(32),z(3),z(l),z(2835),z(2835),L(8),z(16711680),z(65280),z(255),z(4278190080),z(1466527264),function y(){for(;x<r&&w>0;){for(k=122+x*a,p=0;p<i;)w--,b=o[M++],E=b>>>24,f.setUint32(k+p,b<<8|E),p+=4;x++}M<o.length?(w=m,setTimeout(y,LA._dly)):e(h)}()},toBlob(t,e){this.toArrayBuffer(t,n=>{e(new Blob([n],{type:"image/bmp"}))})},_dly:9};var ni={CHROME:"CHROME",FIREFOX:"FIREFOX",DESKTOP_SAFARI:"DESKTOP_SAFARI",IE:"IE",IOS:"IOS",ETC:"ETC"},nO={[ni.CHROME]:16384,[ni.FIREFOX]:11180,[ni.DESKTOP_SAFARI]:16384,[ni.IE]:8192,[ni.IOS]:4096,[ni.ETC]:8192};const ay=typeof window<"u",RA=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,um=ay&&window.cordova&&window.cordova.require&&window.cordova.require("cordova/modulemapper"),rO=(ay||RA)&&(um&&um.getOriginalSymbol(window,"File")||typeof File<"u"&&File),jA=(ay||RA)&&(um&&um.getOriginalSymbol(window,"FileReader")||typeof FileReader<"u"&&FileReader);function ly(t,e,n=Date.now()){return new Promise(r=>{const i=t.split(","),s=i[0].match(/:(.*?);/)[1],o=globalThis.atob(i[1]);let a=o.length;const l=new Uint8Array(a);for(;a--;)l[a]=o.charCodeAt(a);const u=new Blob([l],{type:s});u.name=e,u.lastModified=n,r(u)})}function DA(t){return new Promise((e,n)=>{const r=new jA;r.onload=()=>e(r.result),r.onerror=i=>n(i),r.readAsDataURL(t)})}function OA(t){return new Promise((e,n)=>{const r=new Image;r.onload=()=>e(r),r.onerror=i=>n(i),r.src=t})}function Ll(){if(Ll.cachedResult!==void 0)return Ll.cachedResult;let t=ni.ETC;const{userAgent:e}=navigator;return/Chrom(e|ium)/i.test(e)?t=ni.CHROME:/iP(ad|od|hone)/i.test(e)&&/WebKit/i.test(e)?t=ni.IOS:/Safari/i.test(e)?t=ni.DESKTOP_SAFARI:/Firefox/i.test(e)?t=ni.FIREFOX:(/MSIE/i.test(e)||document.documentMode)&&(t=ni.IE),Ll.cachedResult=t,Ll.cachedResult}function FA(t,e){const n=Ll(),r=nO[n];let i=t,s=e,o=i*s;const a=i>s?s/i:i/s;for(;o>r*r;){const l=(r+i)/2,u=(r+s)/2;l<u?(s=u,i=u*a):(s=l*a,i=l),o=i*s}return{width:i,height:s}}function sg(t,e){let n,r;try{if(n=new OffscreenCanvas(t,e),r=n.getContext("2d"),r===null)throw new Error("getContext of OffscreenCanvas returns null")}catch{n=document.createElement("canvas"),r=n.getContext("2d")}return n.width=t,n.height=e,[n,r]}function MA(t,e){const{width:n,height:r}=FA(t.width,t.height),[i,s]=sg(n,r);return e&&/jpe?g/.test(e)&&(s.fillStyle="white",s.fillRect(0,0,i.width,i.height)),s.drawImage(t,0,0,i.width,i.height),i}function mp(){return mp.cachedResult!==void 0||(mp.cachedResult=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&typeof document<"u"&&"ontouchend"in document),mp.cachedResult}function cm(t,e={}){return new Promise(function(n,r){let i,s;var o=function(){try{return s=MA(i,e.fileType||t.type),n([i,s])}catch(l){return r(l)}},a=function(l){try{var u=function(h){try{throw h}catch(f){return r(f)}};try{let h;return DA(t).then(function(f){try{return h=f,OA(h).then(function(m){try{return i=m,function(){try{return o()}catch(p){return r(p)}}()}catch(p){return u(p)}},u)}catch(m){return u(m)}},u)}catch(h){u(h)}}catch(h){return r(h)}};try{if(mp()||[ni.DESKTOP_SAFARI,ni.MOBILE_SAFARI].includes(Ll()))throw new Error("Skip createImageBitmap on IOS and Safari");return createImageBitmap(t).then(function(l){try{return i=l,o()}catch{return a()}},a)}catch{a()}})}function hm(t,e,n,r,i=1){return new Promise(function(s,o){let a;if(e==="image/png"){let u,h,f;return u=t.getContext("2d"),{data:h}=u.getImageData(0,0,t.width,t.height),f=ns.encode([h.buffer],t.width,t.height,4096*i),a=new Blob([f],{type:e}),a.name=n,a.lastModified=r,l.call(this)}{let u=function(){return l.call(this)};if(e==="image/bmp")return new Promise(h=>LA.toBlob(t,h)).then((function(h){try{return a=h,a.name=n,a.lastModified=r,u.call(this)}catch(f){return o(f)}}).bind(this),o);{let h=function(){return u.call(this)};if(typeof OffscreenCanvas=="function"&&t instanceof OffscreenCanvas)return t.convertToBlob({type:e,quality:i}).then((function(f){try{return a=f,a.name=n,a.lastModified=r,h.call(this)}catch(m){return o(m)}}).bind(this),o);{let f;return f=t.toDataURL(e,i),ly(f,n,r).then((function(m){try{return a=m,h.call(this)}catch(p){return o(p)}}).bind(this),o)}}}function l(){return s(a)}})}function Ls(t){t.width=0,t.height=0}function nc(){return new Promise(function(t,e){let n,r,i,s;return nc.cachedResult!==void 0?t(nc.cachedResult):ly("data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==","test.jpg",Date.now()).then(function(o){try{return n=o,cm(n).then(function(a){try{return r=a[1],hm(r,n.type,n.name,n.lastModified).then(function(l){try{return i=l,Ls(r),cm(i).then(function(u){try{return s=u[0],nc.cachedResult=s.width===1&&s.height===2,t(nc.cachedResult)}catch(h){return e(h)}},e)}catch(u){return e(u)}},e)}catch(l){return e(l)}},e)}catch(a){return e(a)}},e)})}function UA(t){return new Promise((e,n)=>{const r=new jA;r.onload=i=>{const s=new DataView(i.target.result);if(s.getUint16(0,!1)!=65496)return e(-2);const o=s.byteLength;let a=2;for(;a<o;){if(s.getUint16(a+2,!1)<=8)return e(-1);const l=s.getUint16(a,!1);if(a+=2,l==65505){if(s.getUint32(a+=2,!1)!=1165519206)return e(-1);const u=s.getUint16(a+=6,!1)==18761;a+=s.getUint32(a+4,u);const h=s.getUint16(a,u);a+=2;for(let f=0;f<h;f++)if(s.getUint16(a+12*f,u)==274)return e(s.getUint16(a+12*f+8,u))}else{if((65280&l)!=65280)break;a+=s.getUint16(a,!1)}}return e(-1)},r.onerror=i=>n(i),r.readAsArrayBuffer(t)})}function VA(t,e){const{width:n}=t,{height:r}=t,{maxWidthOrHeight:i}=e;let s,o=t;return isFinite(i)&&(n>i||r>i)&&([o,s]=sg(n,r),n>r?(o.width=i,o.height=r/n*i):(o.width=n/r*i,o.height=i),s.drawImage(t,0,0,o.width,o.height),Ls(t)),o}function BA(t,e){const{width:n}=t,{height:r}=t,[i,s]=sg(n,r);switch(e>4&&e<9?(i.width=r,i.height=n):(i.width=n,i.height=r),e){case 2:s.transform(-1,0,0,1,n,0);break;case 3:s.transform(-1,0,0,-1,n,r);break;case 4:s.transform(1,0,0,-1,0,r);break;case 5:s.transform(0,1,1,0,0,0);break;case 6:s.transform(0,1,-1,0,r,0);break;case 7:s.transform(0,-1,-1,0,r,n);break;case 8:s.transform(0,-1,1,0,0,n)}return s.drawImage(t,0,0,n,r),Ls(t),i}function zw(t,e,n=0){return new Promise(function(r,i){let s,o,a,l,u,h,f,m,p,b,E,k,w,x,C,M,Q,z,L,y;function N(A=5){if(e.signal&&e.signal.aborted)throw e.signal.reason;s+=A,e.onProgress(Math.min(s,100))}function R(A){if(e.signal&&e.signal.aborted)throw e.signal.reason;s=Math.min(Math.max(A,s),100),e.onProgress(s)}return s=n,o=e.maxIteration||10,a=1024*e.maxSizeMB*1024,N(),cm(t,e).then((function(A){try{return[,l]=A,N(),u=VA(l,e),N(),new Promise(function(I,P){var V;if(!(V=e.exifOrientation))return UA(t).then((function(O){try{return V=O,J.call(this)}catch(U){return P(U)}}).bind(this),P);function J(){return I(V)}return J.call(this)}).then((function(I){try{return h=I,N(),nc().then((function(P){try{return f=P?u:BA(u,h),N(),m=e.initialQuality||1,p=e.fileType||t.type,hm(f,p,t.name,t.lastModified,m).then((function(V){try{{let O=function(){if(o--&&(C>a||C>w)){let W,ee;return W=y?.95*L.width:L.width,ee=y?.95*L.height:L.height,[Q,z]=sg(W,ee),z.drawImage(L,0,0,W,ee),m*=p==="image/png"?.85:.95,hm(Q,p,t.name,t.lastModified,m).then(function(re){try{return M=re,Ls(L),L=Q,C=M.size,R(Math.min(99,Math.floor((x-C)/(x-a)*100))),O}catch(xe){return i(xe)}},i)}return[1]},U=function(){return Ls(L),Ls(Q),Ls(u),Ls(f),Ls(l),R(100),r(M)};if(b=V,N(),E=b.size>a,k=b.size>t.size,!E&&!k)return R(100),r(b);var J;return w=t.size,x=b.size,C=x,L=f,y=!e.alwaysKeepResolution&&E,(J=(function(W){for(;W;){if(W.then)return void W.then(J,i);try{if(W.pop){if(W.length)return W.pop()?U.call(this):W;W=O}else W=W.call(this)}catch(ee){return i(ee)}}}).bind(this))(O)}}catch(O){return i(O)}}).bind(this),i)}catch(V){return i(V)}}).bind(this),i)}catch(P){return i(P)}}).bind(this),i)}catch(I){return i(I)}}).bind(this),i)})}const iO=`
let scriptImported = false
self.addEventListener('message', async (e) => {
  const { file, id, imageCompressionLibUrl, options } = e.data
  options.onProgress = (progress) => self.postMessage({ progress, id })
  try {
    if (!scriptImported) {
      // console.log('[worker] importScripts', imageCompressionLibUrl)
      self.importScripts(imageCompressionLibUrl)
      scriptImported = true
    }
    // console.log('[worker] self', self)
    const compressedFile = await imageCompression(file, options)
    self.postMessage({ file: compressedFile, id })
  } catch (e) {
    // console.error('[worker] error', e)
    self.postMessage({ error: e.message + '\\n' + e.stack, id })
  }
})
`;let w1;function sO(t,e){return new Promise((n,r)=>{w1||(w1=function(o){const a=[];return a.push(o),URL.createObjectURL(new Blob(a))}(iO));const i=new Worker(w1);i.addEventListener("message",function(o){if(e.signal&&e.signal.aborted)i.terminate();else if(o.data.progress===void 0){if(o.data.error)return r(new Error(o.data.error)),void i.terminate();n(o.data.file),i.terminate()}else e.onProgress(o.data.progress)}),i.addEventListener("error",r),e.signal&&e.signal.addEventListener("abort",()=>{r(e.signal.reason),i.terminate()}),i.postMessage({file:t,imageCompressionLibUrl:e.libURL,options:{...e,onProgress:void 0,signal:void 0}})})}function ar(t,e){return new Promise(function(n,r){let i,s,o,a,l,u;if(i={...e},o=0,{onProgress:a}=i,i.maxSizeMB=i.maxSizeMB||Number.POSITIVE_INFINITY,l=typeof i.useWebWorker!="boolean"||i.useWebWorker,delete i.useWebWorker,i.onProgress=p=>{o=p,typeof a=="function"&&a(o)},!(t instanceof Blob||t instanceof rO))return r(new Error("The file given is not an instance of Blob or File"));if(!/^image/.test(t.type))return r(new Error("The file given is not an image"));if(u=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,!l||typeof Worker!="function"||u)return zw(t,i).then((function(p){try{return s=p,m.call(this)}catch(b){return r(b)}}).bind(this),r);var h=(function(){try{return m.call(this)}catch(p){return r(p)}}).bind(this),f=function(p){try{return zw(t,i).then(function(b){try{return s=b,h()}catch(E){return r(E)}},r)}catch(b){return r(b)}};try{return i.libURL=i.libURL||"https://cdn.jsdelivr.net/npm/browser-image-compression@2.0.2/dist/browser-image-compression.js",sO(t,i).then(function(p){try{return s=p,h()}catch{return f()}},f)}catch{f()}function m(){try{s.name=t.name,s.lastModified=t.lastModified}catch{}try{i.preserveExif&&t.type==="image/jpeg"&&(!i.fileType||i.fileType&&i.fileType===t.type)&&(s=CA(t,s))}catch{}return n(s)}})}ar.getDataUrlFromFile=DA,ar.getFilefromDataUrl=ly,ar.loadImage=OA,ar.drawImageInCanvas=MA,ar.drawFileInCanvas=cm,ar.canvasToFile=hm,ar.getExifOrientation=UA,ar.handleMaxWidthOrHeight=VA,ar.followExifOrientation=BA,ar.cleanupCanvasMemory=Ls,ar.isAutoOrientationInBrowser=nc,ar.approximateBelowMaximumCanvasSizeOfBrowser=FA,ar.copyExifWithoutOrientation=CA,ar.getBrowserName=Ll,ar.version="2.0.2";const oO={"image/jpeg":".jpg","image/jpg":".jpg","image/png":".png","application/pdf":".pdf","application/msword":".doc","application/vnd.openxmlformats-officedocument.wordprocessingml.document":".docx","application/vnd.ms-excel":".xls","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":".xlsx","text/plain":".txt","text/csv":".csv"},aO=t=>{if(t===0)return"0 Bytes";const e=1024,n=["Bytes","KB","MB","GB"],r=Math.floor(Math.log(t)/Math.log(e));return Math.round(t/Math.pow(e,r)*100)/100+" "+n[r]},uy=t=>oO[t]||"",lO=()=>`file_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,uO=t=>t.replace(/[^a-zA-Z0-9._-]/g,"_").replace(/_{2,}/g,"_").toLowerCase(),cO=(t,e,n,r)=>{const i=uO(t.name);uy(t.type)||`${t.name.split(".").pop()}`;const s=`${r}_${i}`,o=`projects/${e}/${n}/${s}`,a=ey(ry,o);return{uploadTask:XS(a,t,{contentType:t.type}),storagePath:o,filename:s}},hO=async(t,e,n,r)=>{if(!t)return null;const i="thumbnail",s=uy(t.type),o=`${r}_${i}${s}`,a=`projects/${e}/${n}/${o}`,l=ey(ry,a);try{return await XS(l,t),{thumbnailURL:await JS(l),thumbnailPath:a}}catch(u){return console.error("Thumbnail upload error:",u),null}},$w=async t=>{try{const e=ey(ry,t);return await m7(e),{success:!0}}catch(e){return console.error("Storage delete error:",e),{success:!1,error:e.message}}},dO=async t=>{try{return{success:!0,fileId:(await su(Cr(jt,"files"),{...t,uploadedAt:new Date().toISOString(),createdAt:new Date().toISOString()})).id}}catch(e){return console.error("Firestore save error:",e),{success:!1,error:e.message}}},fO=async t=>{try{const e=$v(Cr(jt,"files"),Hv("sagsnummer","==",t)),n=await Do(e),r=[];return n.forEach(i=>{r.push({id:i.id,...i.data()})}),{success:!0,files:r}}catch(e){return console.error("Firestore get files error:",e),{success:!1,error:e.message,files:[]}}},pO=(t,e)=>t.filter(n=>n.fileCategory===e),mO=async t=>{try{return await iu($n(jt,"files",t)),{success:!0}}catch(e){return console.error("Firestore delete error:",e),{success:!1,error:e.message}}},gO=async({file:t,thumbnail:e,sagsnummer:n,projectId:r,projectName:i,category:s,uploadedBy:o,uploadedByUID:a,originalSize:l,compressedSize:u,isCompressed:h,description:f="",onProgress:m})=>{const p=lO();try{const{uploadTask:b,storagePath:E,filename:k}=cO(t,n,s,p);return new Promise((w,x)=>{b.on("state_changed",C=>{const M=C.bytesTransferred/C.totalBytes*100;m&&m(M)},C=>{console.error("Upload error:",C),x({success:!1,error:C.message})},async()=>{try{const C=await JS(b.snapshot.ref);let M=null;e&&(M=await hO(e,n,s,p));const Q={fileId:p,fileName:t.name,originalFileName:t.name,fileType:t.type,fileExtension:uy(t.type),fileCategory:s,fileSizeOriginal:l,fileSizeCompressed:u,isCompressed:h,compressionRatio:h?Math.round((1-u/l)*100)+"%":null,sagsnummer:n,projectId:r,projectName:i,fileURL:C,storagePath:E,thumbnailURL:(M==null?void 0:M.thumbnailURL)||null,thumbnailPath:(M==null?void 0:M.thumbnailPath)||null,uploadedBy:o,uploadedByUID:a,description:f.trim(),tags:[]},z=await dO(Q);z.success?w({success:!0,fileId:z.fileId,fileData:{...Q,id:z.fileId}}):x(z)}catch(C){x({success:!1,error:C.message})}})})}catch(b){return console.error("Upload process error:",b),{success:!1,error:b.message}}},vO=async t=>{try{return await $w(t.storagePath),t.thumbnailPath&&await $w(t.thumbnailPath),await mO(t.id),{success:!0}}catch(e){return console.error("Delete file error:",e),{success:!1,error:e.message}}};function yO({sagsnummer:t,projectId:e,projectName:n,uploadedBy:r,uploadedByUID:i,onUploadComplete:s}){const[o,a]=de.useState(!1),[l,u]=de.useState(0),[h,f]=de.useState(0),[m,p]=de.useState(!1),[b,E]=de.useState(null),[k,w]=de.useState(""),[x,C]=de.useState(""),M=de.useRef(null),{showSuccess:Q,showError:z}=Za(),L=V=>{var O;const J=(O=V.target.files)==null?void 0:O[0];J&&(E(J),C(""),p(!0))},y=V=>{var O;V.preventDefault();const J=(O=V.dataTransfer.files)==null?void 0:O[0];J&&(E(J),C(""),p(!0))},N=V=>{V.preventDefault()},R=V=>{w(V)},A=async()=>{if(!k){z("Vlg venligst en kategori");return}p(!1),b&&(await P(b,k,x),E(null),w(""),C(""))},I=async(V,J)=>{try{const U=await ar(V,{maxSizeMB:1,maxWidthOrHeight:1920,useWebWorker:!0,onProgress:J}),ee=await ar(V,{maxSizeMB:.1,maxWidthOrHeight:200,useWebWorker:!0});return{compressed:U,thumbnail:ee}}catch(O){return console.error("Image compression error:",O),{compressed:V,thumbnail:null}}},P=async(V,J,O)=>{if(V.size>10485760){z("Filen er for stor. Maksimum 10MB tilladt.");return}a(!0),u(0),f(0);try{let W=V,ee=V.size,re=V.size,xe=!1,F=null;if(V.type.startsWith("image/")){const Y=await I(V,Z=>{f(Z)});Y.compressed&&(W=Y.compressed,re=Y.compressed.size,xe=!0),Y.thumbnail&&(F=Y.thumbnail),f(100)}const G=await gO({file:W,thumbnail:F,sagsnummer:t,projectId:e,projectName:n,category:J,uploadedBy:r,uploadedByUID:i,originalSize:ee,compressedSize:re,isCompressed:xe,description:O,onProgress:Y=>{u(Math.round(Y))}});G.success?(Q("Fil uploaded!"),s(G.fileData),M.current&&(M.current.value="")):z("Upload fejlede")}catch(W){console.error("Upload error:",W),z("Upload fejlede - prv igen")}finally{a(!1),f(0),u(0)}};return v.jsxs(v.Fragment,{children:[v.jsxs("div",{className:"file-upload-area-compact",children:[v.jsxs("div",{className:"upload-dropzone-compact",onDrop:y,onDragOver:N,onClick:()=>{var V;return(V=M.current)==null?void 0:V.click()},children:[v.jsx("span",{className:"upload-icon-compact",children:""}),v.jsx("span",{className:"upload-text-compact",children:"Drag & drop eller klik for at uploade fil"})]}),v.jsx("input",{ref:M,type:"file",onChange:L,style:{display:"none"}}),o&&v.jsxs("div",{className:"upload-progress-compact",children:[h>0&&h<100&&v.jsxs(v.Fragment,{children:[v.jsxs("span",{className:"progress-text-compact",children:["Komprimerer... ",h,"%"]}),v.jsx("div",{className:"progress-bar-container",children:v.jsx("div",{className:"progress-bar",style:{width:`${h}%`}})})]}),l>0&&v.jsxs(v.Fragment,{children:[v.jsxs("span",{className:"progress-text-compact",children:["Uploader... ",l,"%"]}),v.jsx("div",{className:"progress-bar-container",children:v.jsx("div",{className:"progress-bar",style:{width:`${l}%`}})})]})]})]}),m&&v.jsx("div",{className:"confirm-overlay",children:v.jsxs("div",{className:"confirm-dialog file-upload-dialog",children:[v.jsxs("div",{className:"confirm-header",children:[v.jsx("h3",{children:"Upload fil"}),v.jsx("button",{className:"modal-close",onClick:()=>{p(!1),E(null),w(""),C("")},children:""})]}),v.jsxs("div",{className:"confirm-body",children:[v.jsx("div",{className:"file-info",children:v.jsxs("p",{className:"file-name",children:[" ",b==null?void 0:b.name]})}),v.jsxs("div",{className:"form-group",style:{marginTop:"16px"},children:[v.jsx("label",{children:"Vlg kategori *"}),v.jsxs("div",{className:"category-selection-compact",children:[v.jsxs("button",{type:"button",className:`category-btn-compact ${k==="bilag"?"selected":""}`,onClick:()=>R("bilag"),children:[v.jsx("span",{className:"category-icon",children:""}),v.jsx("span",{children:"Bilag"})]}),v.jsxs("button",{type:"button",className:`category-btn-compact ${k==="billeder"?"selected":""}`,onClick:()=>R("billeder"),children:[v.jsx("span",{className:"category-icon",children:""}),v.jsx("span",{children:"Billeder"})]}),v.jsxs("button",{type:"button",className:`category-btn-compact ${k==="dokumenter"?"selected":""}`,onClick:()=>R("dokumenter"),children:[v.jsx("span",{className:"category-icon",children:""}),v.jsx("span",{children:"Dokumenter"})]})]})]}),v.jsxs("div",{className:"form-group",style:{marginTop:"16px"},children:[v.jsx("label",{htmlFor:"fileNote",children:"Kommentar/Note (valgfri)"}),v.jsx("textarea",{id:"fileNote",value:x,onChange:V=>C(V.target.value),placeholder:"Tilfj en note eller kommentar til filen...",rows:"3",maxLength:"500",style:{width:"100%",padding:"10px",border:"1px solid #ddd",borderRadius:"6px",fontSize:"14px",fontFamily:"inherit",resize:"vertical"}}),v.jsxs("small",{className:"form-hint",children:[x.length,"/500 tegn"]})]})]}),v.jsxs("div",{className:"confirm-footer",children:[v.jsx("button",{className:"btn-secondary",onClick:()=>{p(!1),E(null),w(""),C("")},children:"Annuller"}),v.jsx("button",{className:"btn-primary",onClick:A,disabled:!k,children:"Upload fil"})]})]})})]})}function b1({category:t,files:e,onPreview:n,onDelete:r,onDownload:i}){const o=(()=>{switch(t){case"bilag":return{icon:"",title:"Bilag",emptyText:"Ingen bilag endnu"};case"billeder":return{icon:"",title:"Billeder",emptyText:"Ingen billeder endnu"};case"dokumenter":return{icon:"",title:"Dokumenter",emptyText:"Ingen dokumenter endnu"};default:return{icon:"",title:"Filer",emptyText:"Ingen filer endnu"}}})();return v.jsxs("div",{className:"file-category-column",children:[v.jsxs("div",{className:"category-header",children:[v.jsx("span",{className:"category-icon",children:o.icon}),v.jsx("h3",{children:o.title}),v.jsx("span",{className:"category-count",children:e.length})]}),v.jsx("div",{className:"files-list",children:e.length===0?v.jsxs("div",{className:"empty-state-file",children:[v.jsx("div",{className:"empty-icon",children:o.icon}),v.jsx("p",{children:o.emptyText})]}):e.map(a=>{var l;return v.jsxs("div",{className:"file-item",children:[v.jsx("div",{className:"file-preview",onClick:()=>n(a),children:a.thumbnailURL?v.jsx("img",{src:a.thumbnailURL,alt:a.fileName}):v.jsx("div",{className:"file-icon",children:(l=a.fileType)!=null&&l.startsWith("image/")?"":""})}),v.jsxs("div",{className:"file-details",children:[v.jsx("div",{className:"file-name",title:a.fileName,children:a.fileName}),a.description&&v.jsxs("div",{className:"file-note",title:a.description,children:[" ",a.description]}),v.jsxs("div",{className:"file-meta",children:[v.jsx("span",{className:"file-date",children:Rh(a.uploadedAt)}),a.fileSizeCompressed&&v.jsx("span",{className:"file-size",children:aO(a.fileSizeCompressed)})]}),a.uploadedBy&&v.jsxs("div",{className:"file-uploader",children:[" ",a.uploadedBy]})]}),v.jsxs("div",{className:"file-actions",children:[v.jsx("button",{className:"action-btn",onClick:()=>n(a),title:"Vis",children:""}),v.jsx("button",{className:"action-btn",onClick:()=>i(a),title:"Download",children:""}),v.jsx("button",{className:"action-btn danger",onClick:()=>r(a),title:"Slet",children:""})]})]},a.id)})})]})}function _O({file:t,onClose:e,onNext:n,onPrev:r,hasNext:i,hasPrev:s}){return de.useEffect(()=>{const a=l=>{l.key==="Escape"&&e(),l.key==="ArrowLeft"&&s&&r(),l.key==="ArrowRight"&&i&&n()};return window.addEventListener("keydown",a),()=>window.removeEventListener("keydown",a)},[e,n,r,i,s]),de.useEffect(()=>{if(!t)return;const a=t.fileType==="application/pdf",l=t.fileType.startsWith("image/");if(a){window.open(t.fileURL,"_blank"),e();return}l||e()},[t,e]),!t||!t.fileType.startsWith("image/")?null:v.jsx("div",{className:"preview-overlay",onClick:e,children:v.jsxs("div",{className:"preview-modal",onClick:a=>a.stopPropagation(),children:[v.jsxs("div",{className:"preview-header",children:[v.jsx("span",{className:"preview-filename",children:t.fileName}),v.jsx("button",{className:"preview-close",onClick:e,"aria-label":"Luk",children:""})]}),v.jsx("div",{className:"preview-content",children:v.jsx("img",{src:t.fileURL,alt:t.fileName,className:"preview-image"})}),v.jsxs("div",{className:"preview-navigation",children:[s&&v.jsx("button",{className:"preview-nav-btn preview-prev",onClick:r,"aria-label":"Forrige",children:""}),i&&v.jsx("button",{className:"preview-nav-btn preview-next",onClick:n,"aria-label":"Nste",children:""})]})]})})}function wO({project:t,currentUser:e}){const[n,r]=de.useState([]),[i,s]=de.useState(!0),[o,a]=de.useState(""),[l,u]=de.useState("newest"),[h,f]=de.useState(null),[m,p]=de.useState(0),[b,E]=de.useState(""),{showSuccess:k,showError:w,showConfirm:x}=Za();de.useEffect(()=>{C()},[t.projectNumber]);const C=async()=>{s(!0);try{const O=await fO(t.projectNumber);O.success?r(O.files):w("Kunne ikke indlse filer")}catch(O){console.error("Error loading files:",O),w("Kunne ikke indlse filer")}finally{s(!1)}},M=O=>{r(U=>[...U,O])},Q=async O=>{if(await x({title:"Slet fil?",message:`Er du sikker p at du vil slette "${O.fileName}"? Denne handling kan ikke fortrydes.`,confirmText:"Slet fil",cancelText:"Annuller",type:"danger"}))try{(await vO(O)).success?(r(ee=>ee.filter(re=>re.id!==O.id)),k("Fil slettet")):w("Kunne ikke slette fil")}catch(W){console.error("Delete error:",W),w("Kunne ikke slette fil")}},z=O=>{window.open(O.fileURL,"_blank")},L=O=>{const U=O.fileCategory,ee=A(U).findIndex(re=>re.id===O.id);f(O),p(ee),E(U)},y=()=>{const O=A(b);if(m<O.length-1){const U=m+1;f(O[U]),p(U)}},N=()=>{if(m>0){const O=A(b),U=m-1;f(O[U]),p(U)}},R=()=>{let O=[...n];if(o.trim()){const U=o.toLowerCase();O=O.filter(W=>{var ee;return W.fileName.toLowerCase().includes(U)||((ee=W.description)==null?void 0:ee.toLowerCase().includes(U))})}return O.sort((U,W)=>l==="newest"?new Date(W.uploadedAt)-new Date(U.uploadedAt):l==="oldest"?new Date(U.uploadedAt)-new Date(W.uploadedAt):l==="name"?U.fileName.localeCompare(W.fileName):0),O},A=O=>{const U=R();return pO(U,O)};if(i)return v.jsxs("div",{className:"loading-text",children:[v.jsx("span",{className:"loading-spinner-dark"}),"Indlser filer..."]});const I=A("bilag"),P=A("billeder"),V=A("dokumenter"),J=b?A(b):[];return v.jsxs("div",{className:"files-tab",children:[v.jsx(yO,{sagsnummer:t.projectNumber,projectId:t.id,projectName:t.name,uploadedBy:e,uploadedByUID:"user123",onUploadComplete:M}),v.jsxs("div",{className:"files-controls",children:[v.jsx("input",{type:"text",placeholder:"Sg efter filnavn...",value:o,onChange:O=>a(O.target.value),className:"search-input"}),v.jsxs("select",{value:l,onChange:O=>u(O.target.value),className:"filter-select",children:[v.jsx("option",{value:"newest",children:"Nyeste frst"}),v.jsx("option",{value:"oldest",children:"ldste frst"}),v.jsx("option",{value:"name",children:"Navn (A-Z)"})]})]}),v.jsxs("div",{className:"files-columns",children:[v.jsx(b1,{category:"bilag",files:I,onPreview:L,onDelete:Q,onDownload:z}),v.jsx(b1,{category:"billeder",files:P,onPreview:L,onDelete:Q,onDownload:z}),v.jsx(b1,{category:"dokumenter",files:V,onPreview:L,onDelete:Q,onDownload:z})]}),v.jsx(_O,{file:h,onClose:()=>f(null),onNext:y,onPrev:N,hasNext:m<J.length-1,hasPrev:m>0})]})}function bO(){const{id:t}=kT(),e=Uc(),[n,r]=de.useState(null),[i,s]=de.useState([]),[o,a]=de.useState([]),[l,u]=de.useState([]),[h,f]=de.useState([]),[m,p]=de.useState([]),[b,E]=de.useState(!0),[k,w]=de.useState(!1),[x,C]=de.useState(!1),[M,Q]=de.useState(!1),[z,L]=de.useState(null),[y,N]=de.useState(null),[R,A]=de.useState(450),[I,P]=de.useState("overblik");de.useEffect(()=>{V(),J(),O(),U(),W(),ee()},[t]);const V=async()=>{try{const ye=await Zm($n(jt,"projects",t));ye.exists()?r({id:ye.id,...ye.data()}):(alert("Sag ikke fundet"),e("/sager"))}catch(ye){console.error("Error loading project:",ye),alert("Der opstod en fejl ved indlsning af sag.")}finally{E(!1)}},J=async()=>{try{const ye=await SA(t);s(ye)}catch(ye){console.error("Error loading time entries:",ye)}},O=async()=>{try{const ye=await KD(t);ye.success&&a(ye.purchases)}catch(ye){console.error("Error loading material purchases:",ye)}},U=async()=>{try{const ye=await NA();ye.success&&u(ye.suppliers)}catch(ye){console.error("Error loading suppliers:",ye)}},W=async()=>{try{const ye=await IA();ye.success&&f(ye.materials)}catch(ye){console.error("Error loading materials:",ye)}},ee=async()=>{try{const ye=await Do(Cr(jt,"employees")),Re=[];ye.forEach(Te=>{Re.push({id:Te.id,...Te.data()})}),Re.sort((Te,Me)=>Te.name.localeCompare(Me.name)),p(Re)}catch(ye){console.error("Error loading employees:",ye)}},re=()=>{w(!0)},xe=async ye=>{try{await Kl($n(jt,"projects",t),{...ye,updatedAt:new Date().toISOString(),updatedBy:"Admin"}),w(!1),await V()}catch(Re){console.error("Error updating project:",Re),alert("Der opstod en fejl ved opdatering af sag.")}},F=()=>{L(null),C(!0)},G=ye=>{L(ye),C(!0)},Y=async ye=>{if(window.confirm("Er du sikker p, at du vil slette denne timeregistrering?"))try{await iu($n(jt,"timeEntries",ye.id)),await J()}catch(Re){console.error("Error deleting time entry:",Re),alert("Der opstod en fejl ved sletning af timeregistrering.")}},Z=async ye=>{try{const Re={...ye,projectId:t,duration:ye.duration,hours:ye.duration,hourlyRate:ye.rate||0,employeeName:ye.employeeName||"Ikke angivet",activity:ye.activity,billable:ye.billable,rate:ye.rate||0};z?await Kl($n(jt,"timeEntries",z.id),{...Re,updatedAt:new Date().toISOString()}):await su(Cr(jt,"timeEntries"),{...Re,createdAt:new Date().toISOString(),createdBy:"Admin"}),C(!1),await J()}catch(Re){console.error("Error saving time entry:",Re),alert("Der opstod en fejl ved gemning af timeregistrering.")}},ae=()=>{N(null),Q(!0)},ie=ye=>{N(ye),Q(!0)},ce=async ye=>{if(window.confirm("Er du sikker p, at du vil slette dette materiale?"))try{(await YD(ye.id)).success?await O():alert("Der opstod en fejl ved sletning af materiale.")}catch(Re){console.error("Error deleting material:",Re),alert("Der opstod en fejl ved sletning af materiale.")}},fe=async ye=>{try{y?(await QD(y.id,ye)).success?(Q(!1),await O()):alert("Der opstod en fejl ved opdatering af materiale."):(await GD(ye)).success?(Q(!1),await O()):alert("Der opstod en fejl ved tilfjelse af materiale.")}catch(Re){console.error("Error saving material:",Re),alert("Der opstod en fejl ved gemning af materiale.")}},Ie=ye=>ye==="fixed-price"?"Fast Pris":"Tid & Materiale";if(b)return v.jsx("div",{children:v.jsx("div",{className:"page-header",children:v.jsx("h1",{children:"Indlser..."})})});if(!n)return null;const Ee=xA(i),je=RD(i),Ue=jD(i),Ye=kA(o),Se=PA(o),oe=XD(o);return v.jsxs("div",{children:[v.jsxs("div",{className:"page-header",children:[v.jsx("button",{className:"btn-back",onClick:()=>e("/sager"),children:" Tilbage til oversigt"}),v.jsx("h1",{children:n.name}),v.jsxs("p",{children:["Sagsnr. ",n.projectNumber]})]}),v.jsxs("div",{className:"sag-tabs",children:[v.jsx("button",{className:`sag-tab ${I==="overblik"?"active":""}`,onClick:()=>P("overblik"),children:"Overblik"}),v.jsx("button",{className:`sag-tab ${I==="timeregistrering"?"active":""}`,onClick:()=>P("timeregistrering"),children:"Timeregistrering"}),v.jsx("button",{className:`sag-tab ${I==="materialer"?"active":""}`,onClick:()=>P("materialer"),children:"Materialer"}),v.jsx("button",{className:`sag-tab ${I==="filer"?"active":""}`,onClick:()=>P("filer"),children:"Filer"})]}),v.jsxs("div",{className:"sag-tab-content",children:[I==="overblik"&&v.jsx("div",{className:"overblik-tab",children:v.jsxs("div",{className:"sag-grid",children:[v.jsxs("div",{className:"sag-card",children:[v.jsxs("div",{className:"card-header",children:[v.jsx("h2",{children:"Sagsoplysninger"}),v.jsx("button",{className:"btn-secondary btn-small",onClick:re,children:"Redigr sag"})]}),v.jsx("div",{className:"card-body",children:v.jsxs("div",{className:"info-grid",children:[v.jsxs("div",{className:"info-item",children:[v.jsx("span",{className:"info-label",children:"Status:"}),v.jsx(EA,{status:n.status})]}),v.jsxs("div",{className:"info-item",children:[v.jsx("span",{className:"info-label",children:"Type:"}),v.jsx("span",{className:"info-value",children:Ie(n.type)})]}),n.type==="fixed-price"&&v.jsxs("div",{className:"info-item",children:[v.jsx("span",{className:"info-label",children:"Fast pris:"}),v.jsx("span",{className:"info-value",children:Zr(n.fixedPrice)})]}),v.jsxs("div",{className:"info-item",children:[v.jsx("span",{className:"info-label",children:"Oprettet:"}),v.jsx("span",{className:"info-value",children:Rh(n.createdAt)})]}),v.jsxs("div",{className:"info-item full-width",children:[v.jsx("span",{className:"info-label",children:"Beskrivelse:"}),v.jsx("p",{className:"info-description",children:n.description||"Ingen beskrivelse"})]})]})})]}),v.jsxs("div",{className:"sag-card",children:[v.jsx("div",{className:"card-header",children:v.jsx("h2",{children:"Kundeoplysninger"})}),v.jsx("div",{className:"card-body",children:v.jsxs("div",{className:"info-grid",children:[v.jsxs("div",{className:"info-item full-width",children:[v.jsx("span",{className:"info-label",children:"Navn:"}),v.jsx("span",{className:"info-value",children:n.customerName||"Ikke angivet"})]}),n.customerPhone&&v.jsxs("div",{className:"info-item",children:[v.jsx("span",{className:"info-label",children:"Telefon:"}),v.jsx("a",{href:`tel:${n.customerPhone}`,className:"info-link",children:FD(n.customerPhone)})]}),n.customerEmail&&v.jsxs("div",{className:"info-item",children:[v.jsx("span",{className:"info-label",children:"Email:"}),v.jsx("a",{href:`mailto:${n.customerEmail}`,className:"info-link",children:n.customerEmail})]}),n.customerAddress&&v.jsxs("div",{className:"info-item full-width",children:[v.jsx("span",{className:"info-label",children:"Adresse:"}),v.jsx("a",{href:MD(n.customerAddress),target:"_blank",rel:"noopener noreferrer",className:"info-link",children:n.customerAddress})]})]})})]}),v.jsxs("div",{className:"sag-card",children:[v.jsx("div",{className:"card-header",children:v.jsx("h2",{children:"Timer & konomi"})}),v.jsxs("div",{className:"card-body",children:[v.jsxs("div",{className:"stats-grid",children:[v.jsxs("div",{className:"stat-item",children:[v.jsx("div",{className:"stat-value",children:Ou(Ee)}),v.jsx("div",{className:"stat-label",children:"Totale timer"})]}),v.jsxs("div",{className:"stat-item",children:[v.jsx("div",{className:"stat-value",children:Ou(je)}),v.jsx("div",{className:"stat-label",children:"Fakturerbare"})]}),v.jsxs("div",{className:"stat-item",children:[v.jsx("div",{className:"stat-value",children:Zr(Ue)}),v.jsx("div",{className:"stat-label",children:"Vrdi (timer)"})]})]}),n.type==="fixed-price"&&n.fixedPrice&&v.jsxs("div",{className:"progress-section",children:[v.jsxs("div",{className:"progress-label",children:[v.jsx("span",{children:"Forbrug af fast pris"}),v.jsxs("span",{children:[Math.round(Ue/n.fixedPrice*100),"%"]})]}),v.jsx("div",{className:"progress-bar",children:v.jsx("div",{className:"progress-fill",style:{width:`${Math.min(Ue/n.fixedPrice*100,100)}%`,background:Ue>n.fixedPrice?"#e74c3c":"#27ae60"}})})]})]})]}),v.jsxs("div",{className:"sag-card",children:[v.jsx("div",{className:"card-header",children:v.jsx("h2",{children:"Materialer"})}),v.jsx("div",{className:"card-body",children:v.jsxs("div",{className:"stats-grid",children:[v.jsxs("div",{className:"stat-item",children:[v.jsx("div",{className:"stat-value",children:o.length}),v.jsx("div",{className:"stat-label",children:"Indkb"})]}),v.jsxs("div",{className:"stat-item",children:[v.jsx("div",{className:"stat-value",children:Zr(Ye)}),v.jsx("div",{className:"stat-label",children:"Indkbspris"})]}),v.jsxs("div",{className:"stat-item",children:[v.jsx("div",{className:"stat-value",children:Zr(Se)}),v.jsx("div",{className:"stat-label",children:"Salgspris"})]}),v.jsxs("div",{className:"stat-item",children:[v.jsx("div",{className:"stat-value",style:{color:oe>=0?"#27ae60":"#e74c3c"},children:Zr(oe)}),v.jsx("div",{className:"stat-label",children:"Avance"})]})]})})]}),v.jsxs("div",{className:"sag-card",children:[v.jsx("div",{className:"card-header",children:v.jsx("h2",{children:"Seneste timer"})}),v.jsx("div",{className:"card-body",children:i.length===0?v.jsx("div",{className:"empty-state-small",children:v.jsx("p",{children:"Ingen timeregistreringer"})}):v.jsx("div",{className:"recent-entries-list",children:i.slice(0,5).map(ye=>v.jsxs("div",{className:"recent-entry-item",children:[v.jsx("div",{className:"recent-entry-date",children:Rh(ye.date)}),v.jsx("div",{className:"recent-entry-name",children:ye.employeeName||"Ikke angivet"}),v.jsx("div",{className:"recent-entry-hours",children:Ou(ye.duration||ye.hours||0)})]},ye.id))})})]})]})}),I==="timeregistrering"&&v.jsx("div",{className:"timeregistrering-tab",children:v.jsxs("div",{className:"sag-card",children:[v.jsxs("div",{className:"card-header",children:[v.jsx("h2",{children:"Timeregistreringer"}),v.jsx("button",{className:"btn-primary",onClick:F,children:"+ Tilfj timer"})]}),v.jsx("div",{className:"card-body",children:i.length===0?v.jsxs("div",{className:"empty-state",children:[v.jsx("p",{children:"Ingen timeregistreringer endnu"}),v.jsx("button",{className:"btn-primary",onClick:F,children:"+ Tilfj frste timeregistrering"})]}):v.jsxs(v.Fragment,{children:[v.jsxs("div",{className:"time-summary",children:[v.jsxs("div",{className:"summary-item",children:[v.jsx("span",{className:"summary-label",children:"Totale timer:"}),v.jsx("span",{className:"summary-value",children:Ou(Ee)})]}),v.jsxs("div",{className:"summary-item",children:[v.jsx("span",{className:"summary-label",children:"Fakturerbare timer:"}),v.jsx("span",{className:"summary-value",children:Ou(je)})]}),v.jsxs("div",{className:"summary-item",children:[v.jsx("span",{className:"summary-label",children:"Total vrdi:"}),v.jsx("span",{className:"summary-value",children:Zr(Ue)})]})]}),v.jsxs("table",{className:"time-entries-table",children:[v.jsx("thead",{children:v.jsxs("tr",{children:[v.jsx("th",{children:"Dato"}),v.jsx("th",{children:"Medarbejder"}),v.jsx("th",{children:"Timer"}),v.jsx("th",{children:"Timesats"}),v.jsx("th",{children:"Fakt."}),v.jsx("th",{children:"Vrdi"}),v.jsx("th",{children:"Aktivitet"}),v.jsx("th",{children:"Handlinger"})]})}),v.jsx("tbody",{children:i.map(ye=>v.jsxs("tr",{children:[v.jsx("td",{children:Rh(ye.date)}),v.jsx("td",{children:ye.employeeName||"Ikke angivet"}),v.jsx("td",{children:Ou(ye.duration||ye.hours||0)}),v.jsx("td",{children:Zr(ye.rate||ye.hourlyRate||0)}),v.jsx("td",{children:ye.billable?"":""}),v.jsx("td",{children:ye.billable?Zr((ye.duration||ye.hours||0)*(ye.rate||ye.hourlyRate||0)):"-"}),v.jsx("td",{children:ye.activity||ye.description||"-"}),v.jsxs("td",{children:[v.jsx("button",{className:"btn-icon",onClick:()=>G(ye),title:"Redigr",children:""}),v.jsx("button",{className:"btn-icon",onClick:()=>Y(ye),title:"Slet",children:""})]})]},ye.id))})]})]})})]})}),I==="materialer"&&v.jsx("div",{className:"materialer-tab",children:v.jsxs("div",{className:"sag-card",children:[v.jsxs("div",{className:"card-header",children:[v.jsx("h2",{children:"Materialer"}),v.jsx("button",{className:"btn-primary",onClick:ae,children:"+ Tilfj materiale"})]}),v.jsx("div",{className:"card-body",children:o.length===0?v.jsxs("div",{className:"empty-state",children:[v.jsx("p",{children:"Ingen materialer registreret endnu"}),v.jsx("button",{className:"btn-primary",onClick:ae,children:"+ Tilfj frste materiale"})]}):v.jsxs(v.Fragment,{children:[v.jsxs("div",{className:"time-summary",children:[v.jsxs("div",{className:"summary-item",children:[v.jsx("span",{className:"summary-label",children:"Antal indkb:"}),v.jsx("span",{className:"summary-value",children:o.length})]}),v.jsxs("div",{className:"summary-item",children:[v.jsx("span",{className:"summary-label",children:"Total indkbspris:"}),v.jsx("span",{className:"summary-value",children:Zr(Ye)})]}),v.jsxs("div",{className:"summary-item",children:[v.jsx("span",{className:"summary-label",children:"Total salgspris:"}),v.jsx("span",{className:"summary-value",children:Zr(Se)})]}),v.jsxs("div",{className:"summary-item",children:[v.jsx("span",{className:"summary-label",children:"Total avance:"}),v.jsx("span",{className:"summary-value",style:{color:oe>=0?"#27ae60":"#e74c3c"},children:Zr(oe)})]})]}),v.jsxs("table",{className:"time-entries-table",children:[v.jsx("thead",{children:v.jsxs("tr",{children:[v.jsx("th",{children:"Dato"}),v.jsx("th",{children:"Materiale"}),v.jsx("th",{children:"Antal"}),v.jsx("th",{children:"Kategori"}),v.jsx("th",{children:"Leverandr"}),v.jsx("th",{children:"Indkbspris"}),v.jsx("th",{children:"Salgspris"}),v.jsx("th",{children:"Avance"}),v.jsx("th",{children:"Handlinger"})]})}),v.jsx("tbody",{children:o.map(ye=>v.jsxs("tr",{children:[v.jsx("td",{children:Rh(ye.date)}),v.jsx("td",{children:ye.materialName}),v.jsxs("td",{children:[ye.quantity," ",ye.unit]}),v.jsx("td",{children:ye.category}),v.jsx("td",{children:ye.supplierName}),v.jsx("td",{children:Zr(ye.purchasePrice)}),v.jsx("td",{children:Zr(ye.sellingPrice)}),v.jsx("td",{style:{color:ye.marginKr>=0?"#27ae60":"#e74c3c"},children:Zr(ye.marginKr)}),v.jsxs("td",{children:[v.jsx("button",{className:"btn-icon",onClick:()=>ie(ye),title:"Redigr",children:""}),v.jsx("button",{className:"btn-icon",onClick:()=>ce(ye),title:"Slet",children:""})]})]},ye.id))})]})]})})]})}),I==="filer"&&v.jsx(wO,{project:n,currentUser:"Admin"})]}),k&&v.jsx(AA,{isOpen:k,project:n,onClose:()=>w(!1),onSave:xe}),x&&v.jsx(VD,{timeEntry:z,defaultRate:R,employees:m,onClose:()=>C(!1),onSave:Z}),M&&v.jsx(BD,{purchase:y,project:n,suppliers:l,materials:h,onClose:()=>Q(!1),onSave:fe})]})}function xO({supplier:t,onSave:e,onClose:n}){const[r,i]=de.useState({name:"",cvr:"",contactPerson:"",phone:"",email:"",address:"",customerNumber:"",type:"",preferredPaymentMethod:"",notes:""}),[s,o]=de.useState({}),a=["Byggemarked","Grossist","Specialforhandler","Tmmerhandel","El-grossist","VVS-grossist","Malerforretning","Vrktjsforhandler","Andet"],l=["Faktura","Kontant","Kort","Firmakort","MobilePay","Konto"];de.useEffect(()=>{t&&i({name:t.name||"",cvr:t.cvr||"",contactPerson:t.contactPerson||"",phone:t.phone||"",email:t.email||"",address:t.address||"",customerNumber:t.customerNumber||"",type:t.type||"",preferredPaymentMethod:t.preferredPaymentMethod||"",notes:t.notes||""})},[t]);const u=k=>{const{name:w,value:x}=k.target;i(C=>({...C,[w]:x})),s[w]&&o(C=>({...C,[w]:null}))},h=k=>k.replace(/\D/g,"").slice(0,8),f=k=>{const w=h(k.target.value);i(x=>({...x,cvr:w})),s.cvr&&o(x=>({...x,cvr:null}))},m=k=>k.replace(/\D/g,"").slice(0,8),p=k=>{const w=m(k.target.value);i(x=>({...x,phone:w})),s.phone&&o(x=>({...x,phone:null}))},b=()=>{const k={};return(!r.name||r.name.trim().length<2)&&(k.name="Leverandrnavn er pkrvet (min. 2 tegn)"),(!r.cvr||r.cvr.length!==8)&&(k.cvr="CVR skal vre 8 cifre"),r.email&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r.email)&&(k.email="Ugyldig email-adresse"),r.phone&&r.phone.length!==8&&(k.phone="Telefonnummer skal vre 8 cifre"),o(k),Object.keys(k).length===0},E=k=>{if(k.preventDefault(),b()){const w={name:r.name.trim(),cvr:r.cvr,contactPerson:r.contactPerson.trim(),phone:r.phone,email:r.email.trim().toLowerCase(),address:r.address.trim(),customerNumber:r.customerNumber.trim(),type:r.type,preferredPaymentMethod:r.preferredPaymentMethod,notes:r.notes.trim()};e(w)}};return v.jsx("div",{className:"modal-overlay",onClick:n,children:v.jsxs("div",{className:"modal-content supplier-modal",onClick:k=>k.stopPropagation(),children:[v.jsxs("div",{className:"modal-header",children:[v.jsx("h2",{children:t?"Redigr Leverandr":"Tilfj Leverandr"}),v.jsx("button",{className:"modal-close",onClick:n,children:""})]}),v.jsxs("form",{onSubmit:E,className:"modal-form",children:[v.jsxs("div",{className:"form-section",children:[v.jsx("h3",{className:"form-section-title",children:"Grundoplysninger"}),v.jsxs("div",{className:"form-group",children:[v.jsx("label",{htmlFor:"name",children:"Leverandrnavn *"}),v.jsx("input",{type:"text",id:"name",name:"name",value:r.name,onChange:u,className:s.name?"input-error":"",placeholder:"F.eks. XL-BYG Slagelse",autoFocus:!0}),s.name&&v.jsx("span",{className:"error-text",children:s.name})]}),v.jsxs("div",{className:"form-group",children:[v.jsx("label",{htmlFor:"cvr",children:"CVR-nummer *"}),v.jsx("input",{type:"text",id:"cvr",name:"cvr",value:r.cvr,onChange:f,className:s.cvr?"input-error":"",placeholder:"12345678",maxLength:"8"}),s.cvr&&v.jsx("span",{className:"error-text",children:s.cvr}),v.jsx("small",{className:"form-hint",children:"8 cifre uden mellemrum"})]}),v.jsxs("div",{className:"form-group",children:[v.jsx("label",{htmlFor:"customerNumber",children:"Kundenummer"}),v.jsx("input",{type:"text",id:"customerNumber",name:"customerNumber",value:r.customerNumber,onChange:u,placeholder:"Vores kundenummer hos leverandren"}),v.jsx("small",{className:"form-hint",children:"Jeres kontonummer eller kundenummer hos denne leverandr"})]}),v.jsxs("div",{className:"form-group",children:[v.jsx("label",{htmlFor:"type",children:"Type"}),v.jsxs("select",{id:"type",name:"type",value:r.type,onChange:u,children:[v.jsx("option",{value:"",children:"-- Vlg type --"}),a.map(k=>v.jsx("option",{value:k,children:k},k))]})]})]}),v.jsxs("div",{className:"form-section",children:[v.jsx("h3",{className:"form-section-title",children:"Kontaktoplysninger"}),v.jsxs("div",{className:"form-group",children:[v.jsx("label",{htmlFor:"contactPerson",children:"Kontaktperson"}),v.jsx("input",{type:"text",id:"contactPerson",name:"contactPerson",value:r.contactPerson,onChange:u,placeholder:"F.eks. Hans Jensen"})]}),v.jsxs("div",{className:"form-group",children:[v.jsx("label",{htmlFor:"phone",children:"Telefon"}),v.jsx("input",{type:"text",id:"phone",name:"phone",value:r.phone,onChange:p,className:s.phone?"input-error":"",placeholder:"12345678",maxLength:"8"}),s.phone&&v.jsx("span",{className:"error-text",children:s.phone}),v.jsx("small",{className:"form-hint",children:"8 cifre uden mellemrum"})]}),v.jsxs("div",{className:"form-group",children:[v.jsx("label",{htmlFor:"email",children:"Email"}),v.jsx("input",{type:"email",id:"email",name:"email",value:r.email,onChange:u,className:s.email?"input-error":"",placeholder:"kontakt@leverandoer.dk"}),s.email&&v.jsx("span",{className:"error-text",children:s.email})]}),v.jsxs("div",{className:"form-group",children:[v.jsx("label",{htmlFor:"address",children:"Adresse"}),v.jsx("textarea",{id:"address",name:"address",value:r.address,onChange:u,rows:"2",placeholder:`Gadenavn 123
1234 By`})]})]}),v.jsxs("div",{className:"form-section",children:[v.jsx("h3",{className:"form-section-title",children:"Betaling"}),v.jsxs("div",{className:"form-group",children:[v.jsx("label",{htmlFor:"preferredPaymentMethod",children:"Foretrukken betalingsmetode"}),v.jsxs("select",{id:"preferredPaymentMethod",name:"preferredPaymentMethod",value:r.preferredPaymentMethod,onChange:u,children:[v.jsx("option",{value:"",children:"-- Vlg betalingsmetode --"}),l.map(k=>v.jsx("option",{value:k,children:k},k))]})]})]}),v.jsxs("div",{className:"form-section",children:[v.jsx("h3",{className:"form-section-title",children:"Noter"}),v.jsxs("div",{className:"form-group",children:[v.jsx("label",{htmlFor:"notes",children:"Interne bemrkninger"}),v.jsx("textarea",{id:"notes",name:"notes",value:r.notes,onChange:u,rows:"3",placeholder:"Ekstra noter om leverandren..."})]})]}),v.jsxs("div",{className:"modal-footer",children:[v.jsx("button",{type:"button",className:"btn-secondary",onClick:n,children:"Annuller"}),v.jsx("button",{type:"submit",className:"btn-primary",children:t?"Gem ndringer":"Tilfj leverandr"})]})]})]})})}function SO({material:t,suppliers:e,onSave:n,onClose:r}){const[i,s]=de.useState({name:"",sku:"",unit:"stk",category:"",defaultSupplierId:"",defaultSupplierName:"",standardMarkup:"50"}),[o,a]=de.useState({}),l=["stk","m","m","m","kg","liter","pose","rulle","palle"],u=["Tr","Gips","El-materialer","VVS","Maling","Vrktj","Diverse"];de.useEffect(()=>{t&&s({name:t.name||"",sku:t.sku||"",unit:t.unit||"stk",category:t.category||"",defaultSupplierId:t.defaultSupplierId||"",defaultSupplierName:t.defaultSupplierName||"",standardMarkup:String(t.standardMarkup||50)})},[t]);const h=p=>{const{name:b,value:E}=p.target;s(k=>{const w={...k,[b]:E};if(b==="defaultSupplierId"&&E){const x=e.find(C=>C.id===E);x&&(w.defaultSupplierName=x.name)}else b==="defaultSupplierId"&&!E&&(w.defaultSupplierName="");return w}),o[b]&&a(k=>({...k,[b]:null}))},f=()=>{const p={};(!i.name||i.name.trim().length<2)&&(p.name="Materiale navn er pkrvet (min. 2 tegn)"),i.unit||(p.unit="Enhed er pkrvet"),i.category||(p.category="Kategori er pkrvet");const b=parseFloat(i.standardMarkup);return(isNaN(b)||b<0||b>500)&&(p.standardMarkup="Avance skal vre mellem 0 og 500%"),a(p),Object.keys(p).length===0},m=p=>{if(p.preventDefault(),f()){const b={name:i.name.trim(),sku:i.sku.trim(),unit:i.unit,category:i.category,defaultSupplierId:i.defaultSupplierId||null,defaultSupplierName:i.defaultSupplierName,standardMarkup:parseFloat(i.standardMarkup)};n(b)}};return v.jsx("div",{className:"modal-overlay",onClick:r,children:v.jsxs("div",{className:"modal-content material-modal",onClick:p=>p.stopPropagation(),children:[v.jsxs("div",{className:"modal-header",children:[v.jsx("h2",{children:t?"Redigr Materiale":"Tilfj Materiale"}),v.jsx("button",{className:"modal-close",onClick:r,children:""})]}),v.jsxs("form",{onSubmit:m,className:"modal-form",children:[v.jsxs("div",{className:"form-section",children:[v.jsx("h3",{className:"form-section-title",children:"Grundoplysninger"}),v.jsxs("div",{className:"form-group",children:[v.jsx("label",{htmlFor:"name",children:"Materiale navn *"}),v.jsx("input",{type:"text",id:"name",name:"name",value:i.name,onChange:h,className:o.name?"input-error":"",placeholder:"F.eks. Gipsplader 13mm",autoFocus:!0}),o.name&&v.jsx("span",{className:"error-text",children:o.name})]}),v.jsxs("div",{className:"form-group",children:[v.jsx("label",{htmlFor:"sku",children:"Artikelnummer / Varenummer"}),v.jsx("input",{type:"text",id:"sku",name:"sku",value:i.sku,onChange:h,placeholder:"F.eks. GP13-001"}),v.jsx("small",{className:"form-hint",children:"Leverandrens varenummer"})]}),v.jsxs("div",{className:"form-row",children:[v.jsxs("div",{className:"form-group",children:[v.jsx("label",{htmlFor:"unit",children:"Enhed *"}),v.jsx("select",{id:"unit",name:"unit",value:i.unit,onChange:h,className:o.unit?"input-error":"",children:l.map(p=>v.jsx("option",{value:p,children:p},p))}),o.unit&&v.jsx("span",{className:"error-text",children:o.unit})]}),v.jsxs("div",{className:"form-group",children:[v.jsx("label",{htmlFor:"category",children:"Kategori *"}),v.jsxs("select",{id:"category",name:"category",value:i.category,onChange:h,className:o.category?"input-error":"",children:[v.jsx("option",{value:"",children:"-- Vlg --"}),u.map(p=>v.jsx("option",{value:p,children:p},p))]}),o.category&&v.jsx("span",{className:"error-text",children:o.category})]})]})]}),v.jsxs("div",{className:"form-section",children:[v.jsx("h3",{className:"form-section-title",children:"Standard leverandr & prisstning"}),v.jsxs("div",{className:"form-group",children:[v.jsx("label",{htmlFor:"defaultSupplierId",children:"Standard leverandr"}),v.jsxs("select",{id:"defaultSupplierId",name:"defaultSupplierId",value:i.defaultSupplierId,onChange:h,children:[v.jsx("option",{value:"",children:"-- Ingen standard --"}),e.map(p=>v.jsx("option",{value:p.id,children:p.name},p.id))]}),v.jsx("small",{className:"form-hint",children:"Vlges automatisk nr du tilfjer dette materiale til en sag"})]}),v.jsxs("div",{className:"form-group",children:[v.jsx("label",{htmlFor:"standardMarkup",children:"Standard avance (%) *"}),v.jsx("input",{type:"text",id:"standardMarkup",name:"standardMarkup",value:i.standardMarkup,onChange:h,className:o.standardMarkup?"input-error":"",placeholder:"F.eks. 50"}),o.standardMarkup&&v.jsx("span",{className:"error-text",children:o.standardMarkup}),v.jsx("small",{className:"form-hint",children:"Bruges til at beregne salgspris automatisk (f.eks. 50% = indkb * 1.5)"})]}),t&&t.lastPurchasePrice&&v.jsxs("div",{className:"info-box",children:[v.jsx("div",{className:"info-box-title",children:"Seneste indkb"}),v.jsxs("div",{className:"info-box-content",children:[v.jsx("strong",{children:"Pris pr. enhed:"})," ",t.lastPurchasePrice.toFixed(2)," kr",v.jsx("br",{}),v.jsx("strong",{children:"Dato:"})," ",new Date(t.lastPurchaseDate).toLocaleDateString("da-DK")]})]})]}),v.jsxs("div",{className:"modal-footer",children:[v.jsx("button",{type:"button",className:"btn-secondary",onClick:r,children:"Annuller"}),v.jsx("button",{type:"submit",className:"btn-primary",children:t?"Gem ndringer":"Tilfj materiale"})]})]})]})})}function AO(){const{showSuccess:t,showError:e,showCriticalConfirm:n}=Za(),[r,i]=de.useState("leverandoerer"),[s,o]=de.useState([]),[a,l]=de.useState([]),[u,h]=de.useState([]),[f,m]=de.useState([]),[p,b]=de.useState(!1),[E,k]=de.useState(!1),[w,x]=de.useState(!1),[C,M]=de.useState(null),[Q,z]=de.useState(null),[L,y]=de.useState(""),[N,R]=de.useState("all"),[A,I]=de.useState(""),[P,V]=de.useState("all");de.useEffect(()=>{r==="leverandoerer"?J():r==="katalog"&&(O(),J())},[r]),de.useEffect(()=>{U()},[s,L,N]),de.useEffect(()=>{W()},[a,A,P]);const J=async()=>{b(!0);try{const ie=await NA();ie.success&&o(ie.suppliers)}catch(ie){console.error("Error loading suppliers:",ie)}finally{b(!1)}},O=async()=>{b(!0);try{const ie=await IA();ie.success&&l(ie.materials)}catch(ie){console.error("Error loading materials:",ie)}finally{b(!1)}},U=()=>{let ie=[...s];if(L.trim()){const ce=L.toLowerCase();ie=ie.filter(fe=>{var Ie,Ee,je,Ue,Ye;return((Ie=fe.name)==null?void 0:Ie.toLowerCase().includes(ce))||((Ee=fe.contactPerson)==null?void 0:Ee.toLowerCase().includes(ce))||((je=fe.phone)==null?void 0:je.toLowerCase().includes(ce))||((Ue=fe.email)==null?void 0:Ue.toLowerCase().includes(ce))||((Ye=fe.cvr)==null?void 0:Ye.toLowerCase().includes(ce))})}N!=="all"&&(ie=ie.filter(ce=>ce.type===N)),h(ie)},W=()=>{let ie=[...a];if(A.trim()){const ce=A.toLowerCase();ie=ie.filter(fe=>{var Ie,Ee,je,Ue;return((Ie=fe.name)==null?void 0:Ie.toLowerCase().includes(ce))||((Ee=fe.sku)==null?void 0:Ee.toLowerCase().includes(ce))||((je=fe.category)==null?void 0:je.toLowerCase().includes(ce))||((Ue=fe.defaultSupplierName)==null?void 0:Ue.toLowerCase().includes(ce))})}P!=="all"&&(ie=ie.filter(ce=>ce.category===P)),m(ie)},ee=()=>{M(null),k(!0)},re=ie=>{M(ie),k(!0)},xe=async ie=>{const fe=a.filter(Ee=>Ee.defaultSupplierId===ie.id).length;if(await n({title:"Slet leverandr?",message:"Dette vil permanent slette leverandren fra systemet.",itemName:ie.name,warningText:fe>0?`${fe} materiale${fe>1?"r":""} er knyttet til denne leverandr`:null,confirmText:"Slet Permanent",cancelText:"Annuller"}))try{(await $D(ie.id)).success?(t("Leverandr slettet!"),await J()):e("Der opstod en fejl ved sletning af leverandr.")}catch(Ee){console.error("Error deleting supplier:",Ee),e("Der opstod en fejl ved sletning af leverandr.")}},F=async ie=>{try{C?(await zD(C.id,ie)).success?(k(!1),t("Leverandr opdateret!"),await J()):e("Der opstod en fejl ved opdatering af leverandr."):(await qD(ie)).success?(k(!1),t("Leverandr oprettet!"),await J()):e("Der opstod en fejl ved tilfjelse af leverandr.")}catch(ce){console.error("Error saving supplier:",ce),e("Der opstod en fejl ved gemning af leverandr.")}},G=()=>{z(null),x(!0)},Y=ie=>{z(ie),x(!0)},Z=async ie=>{if(await n({title:"Slet materiale?",message:"Dette vil permanent slette materialet fra kataloget.",itemName:ie.name,warningText:ie.lastPurchaseDate?"Dette materiale har historiske indkb knyttet til sig":null,confirmText:"Slet Permanent",cancelText:"Annuller"}))try{(await WD(ie.id)).success?(t("Materiale slettet!"),await O()):e("Der opstod en fejl ved sletning af materiale.")}catch(fe){console.error("Error deleting material:",fe),e("Der opstod en fejl ved sletning af materiale.")}},ae=async ie=>{try{Q?(await TA(Q.id,ie)).success?(x(!1),t("Materiale opdateret!"),await O()):e("Der opstod en fejl ved opdatering af materiale."):(await HD(ie)).success?(x(!1),t("Materiale oprettet!"),await O()):e("Der opstod en fejl ved tilfjelse af materiale.")}catch(ce){console.error("Error saving material:",ce),e("Der opstod en fejl ved gemning af materiale.")}};return v.jsxs("div",{children:[v.jsxs("div",{className:"page-header",children:[v.jsx("h1",{children:"Materialer"}),v.jsx("p",{children:"Administrer leverandrer, materiale-katalog og se indkbsoversigt"})]}),v.jsxs("div",{className:"sag-tabs",children:[v.jsx("button",{className:`sag-tab ${r==="leverandoerer"?"active":""}`,onClick:()=>i("leverandoerer"),children:"Leverandrer"}),v.jsx("button",{className:`sag-tab ${r==="katalog"?"active":""}`,onClick:()=>i("katalog"),children:"Materiale Katalog"}),v.jsx("button",{className:`sag-tab ${r==="indkoeb"?"active":""}`,onClick:()=>i("indkoeb"),children:"Alle Indkb"})]}),v.jsxs("div",{className:"sag-tab-content",children:[r==="leverandoerer"&&v.jsx("div",{className:"leverandoerer-tab",children:v.jsxs("div",{className:"sag-card",children:[v.jsxs("div",{className:"card-header",children:[v.jsx("h2",{children:"Leverandrer"}),v.jsx("button",{className:"btn-primary",onClick:ee,children:"+ Tilfj leverandr"})]}),v.jsxs("div",{className:"card-body",children:[v.jsxs("div",{className:"sager-controls",children:[v.jsx("div",{className:"search-box",children:v.jsx("input",{type:"text",placeholder:"Sg efter leverandr, kontakt, telefon, email eller CVR...",value:L,onChange:ie=>y(ie.target.value),className:"search-input"})}),v.jsx("div",{className:"filter-row",children:v.jsxs("select",{value:N,onChange:ie=>R(ie.target.value),className:"filter-select",children:[v.jsx("option",{value:"all",children:"Alle typer"}),v.jsx("option",{value:"Byggemarked",children:"Byggemarked"}),v.jsx("option",{value:"Grossist",children:"Grossist"}),v.jsx("option",{value:"Specialforhandler",children:"Specialforhandler"}),v.jsx("option",{value:"Andet",children:"Andet"})]})})]}),p?v.jsx("div",{className:"empty-state",children:v.jsx("p",{children:"Indlser leverandrer..."})}):u.length===0?v.jsx("div",{className:"empty-state",children:v.jsx("p",{children:s.length===0?"Ingen leverandrer endnu. Tilfj din frste leverandr for at komme i gang.":"Ingen leverandrer matcher din sgning eller filtre."})}):v.jsx("div",{className:"table-container",children:v.jsxs("table",{className:"sager-table",children:[v.jsx("thead",{children:v.jsxs("tr",{children:[v.jsx("th",{children:"Navn"}),v.jsx("th",{children:"Type"}),v.jsx("th",{children:"Kontaktperson"}),v.jsx("th",{children:"Telefon"}),v.jsx("th",{children:"Email"}),v.jsx("th",{children:"Handlinger"})]})}),v.jsx("tbody",{children:u.map(ie=>v.jsxs("tr",{children:[v.jsxs("td",{children:[v.jsx("strong",{children:ie.name}),ie.cvr&&v.jsxs("div",{style:{fontSize:"12px",color:"#7f8c8d"},children:["CVR: ",ie.cvr]})]}),v.jsx("td",{children:ie.type||"-"}),v.jsx("td",{children:ie.contactPerson||"-"}),v.jsx("td",{children:ie.phone?v.jsx("a",{href:`tel:${ie.phone}`,style:{color:"#3498db",textDecoration:"none"},children:ie.phone}):"-"}),v.jsx("td",{children:ie.email?v.jsx("a",{href:`mailto:${ie.email}`,style:{color:"#3498db",textDecoration:"none"},children:ie.email}):"-"}),v.jsxs("td",{className:"actions-cell",children:[v.jsx("button",{className:"btn-icon btn-edit",onClick:()=>re(ie),title:"Redigr",children:""}),v.jsx("button",{className:"btn-icon btn-delete",onClick:()=>xe(ie),title:"Slet",children:""})]})]},ie.id))})]})})]})]})}),r==="katalog"&&v.jsx("div",{className:"katalog-tab",children:v.jsxs("div",{className:"sag-card",children:[v.jsxs("div",{className:"card-header",children:[v.jsx("h2",{children:"Materiale Katalog"}),v.jsx("button",{className:"btn-primary",onClick:G,children:"+ Tilfj materiale"})]}),v.jsxs("div",{className:"card-body",children:[v.jsxs("div",{className:"sager-controls",children:[v.jsx("div",{className:"search-box",children:v.jsx("input",{type:"text",placeholder:"Sg efter materiale, kategori, SKU eller leverandr...",value:A,onChange:ie=>I(ie.target.value),className:"search-input"})}),v.jsx("div",{className:"filter-row",children:v.jsxs("select",{value:P,onChange:ie=>V(ie.target.value),className:"filter-select",children:[v.jsx("option",{value:"all",children:"Alle kategorier"}),v.jsx("option",{value:"Tr",children:"Tr"}),v.jsx("option",{value:"Gips",children:"Gips"}),v.jsx("option",{value:"El-materialer",children:"El-materialer"}),v.jsx("option",{value:"VVS",children:"VVS"}),v.jsx("option",{value:"Maling",children:"Maling"}),v.jsx("option",{value:"Vrktj",children:"Vrktj"}),v.jsx("option",{value:"Diverse",children:"Diverse"})]})})]}),p?v.jsx("div",{className:"empty-state",children:v.jsx("p",{children:"Indlser materialer..."})}):f.length===0?v.jsx("div",{className:"empty-state",children:v.jsx("p",{children:a.length===0?"Ingen materialer endnu. Tilfj dit frste materiale for at komme i gang.":"Ingen materialer matcher din sgning eller filtre."})}):v.jsx("div",{className:"table-container",children:v.jsxs("table",{className:"sager-table",children:[v.jsx("thead",{children:v.jsxs("tr",{children:[v.jsx("th",{children:"Navn"}),v.jsx("th",{children:"Kategori"}),v.jsx("th",{children:"Enhed"}),v.jsx("th",{children:"Standard leverandr"}),v.jsx("th",{children:"Seneste pris"}),v.jsx("th",{children:"Handlinger"})]})}),v.jsx("tbody",{children:f.map(ie=>v.jsxs("tr",{children:[v.jsxs("td",{children:[v.jsx("strong",{children:ie.name}),ie.sku&&v.jsxs("div",{style:{fontSize:"12px",color:"#7f8c8d"},children:["SKU: ",ie.sku]})]}),v.jsx("td",{children:ie.category}),v.jsx("td",{children:ie.unit}),v.jsx("td",{children:ie.defaultSupplierName||"-"}),v.jsx("td",{children:ie.lastPurchasePrice?v.jsxs(v.Fragment,{children:[ie.lastPurchasePrice," kr",ie.lastPurchaseDate&&v.jsx("div",{style:{fontSize:"11px",color:"#7f8c8d"},children:new Date(ie.lastPurchaseDate).toLocaleDateString("da-DK")})]}):"-"}),v.jsxs("td",{className:"actions-cell",children:[v.jsx("button",{className:"btn-icon btn-edit",onClick:()=>Y(ie),title:"Redigr",children:""}),v.jsx("button",{className:"btn-icon btn-delete",onClick:()=>Z(ie),title:"Slet",children:""})]})]},ie.id))})]})})]})]})}),r==="indkoeb"&&v.jsx("div",{className:"indkoeb-tab",children:v.jsxs("div",{className:"sag-card",children:[v.jsx("div",{className:"card-header",children:v.jsx("h2",{children:"Alle Indkb"})}),v.jsx("div",{className:"card-body",children:v.jsx("div",{className:"empty-state",children:v.jsx("p",{children:"Indkb vises her nr du tilfjer materialer til sager"})})})]})})]}),E&&v.jsx(xO,{supplier:C,onClose:()=>k(!1),onSave:F}),w&&v.jsx(SO,{material:Q,suppliers:s,onClose:()=>x(!1),onSave:ae})]})}function EO(){const t=Uc(),e=async()=>{try{await $6(ny),t("/login")}catch(n){console.error("Error logging out:",n),alert("Der opstod en fejl ved logud.")}};return v.jsxs("div",{className:"app-layout",children:[v.jsxs("aside",{className:"sidebar",children:[v.jsxs("div",{className:"sidebar-header",children:[v.jsx("img",{src:"/logo_white.png",alt:"Piblo Logo",className:"sidebar-logo",onError:n=>{n.target.style.display="none",n.target.nextElementSibling.style.display="block"}}),v.jsx("div",{style:{width:"80px",height:"80px",margin:"0 auto 15px",display:"none",alignItems:"center",justifyContent:"center",fontSize:"40px"},children:""}),v.jsx("div",{className:"sidebar-title",children:"Piblo"})]}),v.jsxs("nav",{className:"sidebar-nav",children:[v.jsx(Lf,{to:"/sager",className:({isActive:n})=>`nav-item ${n?"active":""}`,children:"Sager"}),v.jsx(Lf,{to:"/materialer",className:({isActive:n})=>`nav-item ${n?"active":""}`,children:"Materialer"}),v.jsx(Lf,{to:"/timeregistrering",className:({isActive:n})=>`nav-item ${n?"active":""}`,children:"Timeregistrering"}),v.jsx(Lf,{to:"/indstillinger",className:({isActive:n})=>`nav-item ${n?"active":""}`,children:"Indstillinger"})]}),v.jsx("div",{className:"sidebar-footer",children:v.jsx("button",{className:"btn-logout",onClick:e,children:"Log ud"})})]}),v.jsx("main",{className:"main-content",children:v.jsx($T,{})})]})}function NO(){const[t,e]=de.useState(null),[n,r]=de.useState(!0);return de.useEffect(()=>{const i=z6(ny,s=>{e(s),r(!1)});return()=>i()},[]),{user:t,loading:n}}function IO({children:t}){const{user:e,loading:n}=NO();return n?v.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"100vh",fontSize:"18px",color:"#7f8c8d"},children:"Indlser..."}):e?t:v.jsx(v0,{to:"/login",replace:!0})}function TO(){return v.jsxs(ak,{children:[v.jsx(ek,{children:v.jsxs(WT,{children:[v.jsx(ks,{path:"/login",element:v.jsx(b7,{})}),v.jsxs(ks,{path:"/",element:v.jsx(IO,{children:v.jsx(EO,{})}),children:[v.jsx(ks,{index:!0,element:v.jsx(v0,{to:"/sager",replace:!0})}),v.jsx(ks,{path:"sager",element:v.jsx(UD,{})}),v.jsx(ks,{path:"sager/:id",element:v.jsx(bO,{})}),v.jsx(ks,{path:"materialer",element:v.jsx(AO,{})}),v.jsx(ks,{path:"timeregistrering",element:v.jsx(kD,{})}),v.jsx(ks,{path:"indstillinger",element:v.jsx(CD,{})})]}),v.jsx(ks,{path:"*",element:v.jsx(v0,{to:"/",replace:!0})})]})}),v.jsx(hk,{}),v.jsx(dk,{}),v.jsx(fk,{})]})}x1.createRoot(document.getElementById("root")).render(v.jsx(tb.StrictMode,{children:v.jsx(TO,{})}));export{Gt as _,kO as c,NE as g};

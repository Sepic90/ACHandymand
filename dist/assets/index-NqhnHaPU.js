function zA(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var E9=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function $A(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var sb={exports:{}},vm={},ab={exports:{}},Pt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Td=Symbol.for("react.element"),HA=Symbol.for("react.portal"),WA=Symbol.for("react.fragment"),GA=Symbol.for("react.strict_mode"),QA=Symbol.for("react.profiler"),YA=Symbol.for("react.provider"),JA=Symbol.for("react.context"),XA=Symbol.for("react.forward_ref"),ZA=Symbol.for("react.suspense"),eE=Symbol.for("react.memo"),tE=Symbol.for("react.lazy"),Hy=Symbol.iterator;function nE(t){return t===null||typeof t!="object"?null:(t=Hy&&t[Hy]||t["@@iterator"],typeof t=="function"?t:null)}var ob={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},lb=Object.assign,cb={};function Ru(t,e,n){this.props=t,this.context=e,this.refs=cb,this.updater=n||ob}Ru.prototype.isReactComponent={};Ru.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ru.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function ub(){}ub.prototype=Ru.prototype;function fv(t,e,n){this.props=t,this.context=e,this.refs=cb,this.updater=n||ob}var pv=fv.prototype=new ub;pv.constructor=fv;lb(pv,Ru.prototype);pv.isPureReactComponent=!0;var Wy=Array.isArray,hb=Object.prototype.hasOwnProperty,mv={current:null},db={key:!0,ref:!0,__self:!0,__source:!0};function fb(t,e,n){var r,i={},s=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(s=""+e.key),e)hb.call(e,r)&&!db.hasOwnProperty(r)&&(i[r]=e[r]);var o=arguments.length-2;if(o===1)i.children=n;else if(1<o){for(var l=Array(o),u=0;u<o;u++)l[u]=arguments[u+2];i.children=l}if(t&&t.defaultProps)for(r in o=t.defaultProps,o)i[r]===void 0&&(i[r]=o[r]);return{$$typeof:Td,type:t,key:s,ref:a,props:i,_owner:mv.current}}function rE(t,e){return{$$typeof:Td,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function gv(t){return typeof t=="object"&&t!==null&&t.$$typeof===Td}function iE(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Gy=/\/+/g;function Ig(t,e){return typeof t=="object"&&t!==null&&t.key!=null?iE(""+t.key):e.toString(36)}function Hf(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case Td:case HA:a=!0}}if(a)return a=t,i=i(a),t=r===""?"."+Ig(a,0):r,Wy(i)?(n="",t!=null&&(n=t.replace(Gy,"$&/")+"/"),Hf(i,e,n,"",function(u){return u})):i!=null&&(gv(i)&&(i=rE(i,n+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(Gy,"$&/")+"/")+t)),e.push(i)),1;if(a=0,r=r===""?".":r+":",Wy(t))for(var o=0;o<t.length;o++){s=t[o];var l=r+Ig(s,o);a+=Hf(s,e,n,l,i)}else if(l=nE(t),typeof l=="function")for(t=l.call(t),o=0;!(s=t.next()).done;)s=s.value,l=r+Ig(s,o++),a+=Hf(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function yf(t,e,n){if(t==null)return t;var r=[],i=0;return Hf(t,r,"","",function(s){return e.call(n,s,i++)}),r}function sE(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Hr={current:null},Wf={transition:null},aE={ReactCurrentDispatcher:Hr,ReactCurrentBatchConfig:Wf,ReactCurrentOwner:mv};function pb(){throw Error("act(...) is not supported in production builds of React.")}Pt.Children={map:yf,forEach:function(t,e,n){yf(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return yf(t,function(){e++}),e},toArray:function(t){return yf(t,function(e){return e})||[]},only:function(t){if(!gv(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Pt.Component=Ru;Pt.Fragment=WA;Pt.Profiler=QA;Pt.PureComponent=fv;Pt.StrictMode=GA;Pt.Suspense=ZA;Pt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=aE;Pt.act=pb;Pt.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=lb({},t.props),i=t.key,s=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,a=mv.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var o=t.type.defaultProps;for(l in e)hb.call(e,l)&&!db.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&o!==void 0?o[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){o=Array(l);for(var u=0;u<l;u++)o[u]=arguments[u+2];r.children=o}return{$$typeof:Td,type:t.type,key:i,ref:s,props:r,_owner:a}};Pt.createContext=function(t){return t={$$typeof:JA,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:YA,_context:t},t.Consumer=t};Pt.createElement=fb;Pt.createFactory=function(t){var e=fb.bind(null,t);return e.type=t,e};Pt.createRef=function(){return{current:null}};Pt.forwardRef=function(t){return{$$typeof:XA,render:t}};Pt.isValidElement=gv;Pt.lazy=function(t){return{$$typeof:tE,_payload:{_status:-1,_result:t},_init:sE}};Pt.memo=function(t,e){return{$$typeof:eE,type:t,compare:e===void 0?null:e}};Pt.startTransition=function(t){var e=Wf.transition;Wf.transition={};try{t()}finally{Wf.transition=e}};Pt.unstable_act=pb;Pt.useCallback=function(t,e){return Hr.current.useCallback(t,e)};Pt.useContext=function(t){return Hr.current.useContext(t)};Pt.useDebugValue=function(){};Pt.useDeferredValue=function(t){return Hr.current.useDeferredValue(t)};Pt.useEffect=function(t,e){return Hr.current.useEffect(t,e)};Pt.useId=function(){return Hr.current.useId()};Pt.useImperativeHandle=function(t,e,n){return Hr.current.useImperativeHandle(t,e,n)};Pt.useInsertionEffect=function(t,e){return Hr.current.useInsertionEffect(t,e)};Pt.useLayoutEffect=function(t,e){return Hr.current.useLayoutEffect(t,e)};Pt.useMemo=function(t,e){return Hr.current.useMemo(t,e)};Pt.useReducer=function(t,e,n){return Hr.current.useReducer(t,e,n)};Pt.useRef=function(t){return Hr.current.useRef(t)};Pt.useState=function(t){return Hr.current.useState(t)};Pt.useSyncExternalStore=function(t,e,n){return Hr.current.useSyncExternalStore(t,e,n)};Pt.useTransition=function(){return Hr.current.useTransition()};Pt.version="18.3.1";ab.exports=Pt;var ie=ab.exports;const mb=$A(ie),oE=zA({__proto__:null,default:mb},[ie]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lE=ie,cE=Symbol.for("react.element"),uE=Symbol.for("react.fragment"),hE=Object.prototype.hasOwnProperty,dE=lE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,fE={key:!0,ref:!0,__self:!0,__source:!0};function gb(t,e,n){var r,i={},s=null,a=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)hE.call(e,r)&&!fE.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:cE,type:t,key:s,ref:a,props:i,_owner:dE.current}}vm.Fragment=uE;vm.jsx=gb;vm.jsxs=gb;sb.exports=vm;var c=sb.exports,I1={},vb={exports:{}},ki={},yb={exports:{}},wb={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(K,H){var te=K.length;K.push(H);e:for(;0<te;){var me=te-1>>>1,R=K[me];if(0<i(R,H))K[me]=H,K[te]=R,te=me;else break e}}function n(K){return K.length===0?null:K[0]}function r(K){if(K.length===0)return null;var H=K[0],te=K.pop();if(te!==H){K[0]=te;e:for(var me=0,R=K.length,$=R>>>1;me<$;){var J=2*(me+1)-1,W=K[J],ae=J+1,le=K[ae];if(0>i(W,te))ae<R&&0>i(le,W)?(K[me]=le,K[ae]=te,me=ae):(K[me]=W,K[J]=te,me=J);else if(ae<R&&0>i(le,te))K[me]=le,K[ae]=te,me=ae;else break e}}return H}function i(K,H){var te=K.sortIndex-H.sortIndex;return te!==0?te:K.id-H.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();t.unstable_now=function(){return a.now()-o}}var l=[],u=[],d=1,p=null,m=3,g=!1,x=!1,b=!1,k=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function j(K){for(var H=n(u);H!==null;){if(H.callback===null)r(u);else if(H.startTime<=K)r(u),H.sortIndex=H.expirationTime,e(l,H);else break;H=n(u)}}function O(K){if(b=!1,j(K),!x)if(n(l)!==null)x=!0,V(Q);else{var H=n(u);H!==null&&U(O,H.startTime-K)}}function Q(K,H){x=!1,b&&(b=!1,w(y),y=-1),g=!0;var te=m;try{for(j(H),p=n(l);p!==null&&(!(p.expirationTime>H)||K&&!A());){var me=p.callback;if(typeof me=="function"){p.callback=null,m=p.priorityLevel;var R=me(p.expirationTime<=H);H=t.unstable_now(),typeof R=="function"?p.callback=R:p===n(l)&&r(l),j(H)}else r(l);p=n(l)}if(p!==null)var $=!0;else{var J=n(u);J!==null&&U(O,J.startTime-H),$=!1}return $}finally{p=null,m=te,g=!1}}var B=!1,P=null,y=-1,S=5,L=-1;function A(){return!(t.unstable_now()-L<S)}function T(){if(P!==null){var K=t.unstable_now();L=K;var H=!0;try{H=P(!0,K)}finally{H?I():(B=!1,P=null)}}else B=!1}var I;if(typeof N=="function")I=function(){N(T)};else if(typeof MessageChannel<"u"){var M=new MessageChannel,ne=M.port2;M.port1.onmessage=T,I=function(){ne.postMessage(null)}}else I=function(){k(T,0)};function V(K){P=K,B||(B=!0,I())}function U(K,H){y=k(function(){K(t.unstable_now())},H)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(K){K.callback=null},t.unstable_continueExecution=function(){x||g||(x=!0,V(Q))},t.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<K?Math.floor(1e3/K):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(K){switch(m){case 1:case 2:case 3:var H=3;break;default:H=m}var te=m;m=H;try{return K()}finally{m=te}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(K,H){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var te=m;m=K;try{return H()}finally{m=te}},t.unstable_scheduleCallback=function(K,H,te){var me=t.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?me+te:me):te=me,K){case 1:var R=-1;break;case 2:R=250;break;case 5:R=1073741823;break;case 4:R=1e4;break;default:R=5e3}return R=te+R,K={id:d++,callback:H,priorityLevel:K,startTime:te,expirationTime:R,sortIndex:-1},te>me?(K.sortIndex=te,e(u,K),n(l)===null&&K===n(u)&&(b?(w(y),y=-1):b=!0,U(O,te-me))):(K.sortIndex=R,e(l,K),x||g||(x=!0,V(Q))),K},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(K){var H=m;return function(){var te=m;m=H;try{return K.apply(this,arguments)}finally{m=te}}}})(wb);yb.exports=wb;var pE=yb.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mE=ie,Ei=pE;function qe(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var _b=new Set,Xh={};function ec(t,e){yu(t,e),yu(t+"Capture",e)}function yu(t,e){for(Xh[t]=e,t=0;t<e.length;t++)_b.add(e[t])}var Ca=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),C1=Object.prototype.hasOwnProperty,gE=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Qy={},Yy={};function vE(t){return C1.call(Yy,t)?!0:C1.call(Qy,t)?!1:gE.test(t)?Yy[t]=!0:(Qy[t]=!0,!1)}function yE(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function wE(t,e,n,r){if(e===null||typeof e>"u"||yE(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Wr(t,e,n,r,i,s,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=a}var mr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){mr[t]=new Wr(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];mr[e]=new Wr(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){mr[t]=new Wr(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){mr[t]=new Wr(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){mr[t]=new Wr(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){mr[t]=new Wr(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){mr[t]=new Wr(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){mr[t]=new Wr(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){mr[t]=new Wr(t,5,!1,t.toLowerCase(),null,!1,!1)});var vv=/[\-:]([a-z])/g;function yv(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(vv,yv);mr[e]=new Wr(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(vv,yv);mr[e]=new Wr(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(vv,yv);mr[e]=new Wr(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){mr[t]=new Wr(t,1,!1,t.toLowerCase(),null,!1,!1)});mr.xlinkHref=new Wr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){mr[t]=new Wr(t,1,!1,t.toLowerCase(),null,!0,!0)});function wv(t,e,n,r){var i=mr.hasOwnProperty(e)?mr[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(wE(e,n,i,r)&&(n=null),r||i===null?vE(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Ma=mE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,wf=Symbol.for("react.element"),qc=Symbol.for("react.portal"),zc=Symbol.for("react.fragment"),_v=Symbol.for("react.strict_mode"),P1=Symbol.for("react.profiler"),bb=Symbol.for("react.provider"),xb=Symbol.for("react.context"),bv=Symbol.for("react.forward_ref"),j1=Symbol.for("react.suspense"),L1=Symbol.for("react.suspense_list"),xv=Symbol.for("react.memo"),_o=Symbol.for("react.lazy"),Sb=Symbol.for("react.offscreen"),Jy=Symbol.iterator;function fh(t){return t===null||typeof t!="object"?null:(t=Jy&&t[Jy]||t["@@iterator"],typeof t=="function"?t:null)}var _n=Object.assign,Cg;function Eh(t){if(Cg===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Cg=e&&e[1]||""}return`
`+Cg+t}var Pg=!1;function jg(t,e){if(!t||Pg)return"";Pg=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),a=i.length-1,o=s.length-1;1<=a&&0<=o&&i[a]!==s[o];)o--;for(;1<=a&&0<=o;a--,o--)if(i[a]!==s[o]){if(a!==1||o!==1)do if(a--,o--,0>o||i[a]!==s[o]){var l=`
`+i[a].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=a&&0<=o);break}}}finally{Pg=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Eh(t):""}function _E(t){switch(t.tag){case 5:return Eh(t.type);case 16:return Eh("Lazy");case 13:return Eh("Suspense");case 19:return Eh("SuspenseList");case 0:case 2:case 15:return t=jg(t.type,!1),t;case 11:return t=jg(t.type.render,!1),t;case 1:return t=jg(t.type,!0),t;default:return""}}function R1(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case zc:return"Fragment";case qc:return"Portal";case P1:return"Profiler";case _v:return"StrictMode";case j1:return"Suspense";case L1:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case xb:return(t.displayName||"Context")+".Consumer";case bb:return(t._context.displayName||"Context")+".Provider";case bv:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case xv:return e=t.displayName||null,e!==null?e:R1(t.type)||"Memo";case _o:e=t._payload,t=t._init;try{return R1(t(e))}catch{}}return null}function bE(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return R1(e);case 8:return e===_v?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Wo(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Nb(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function xE(t){var e=Nb(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(a){r=""+a,s.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function _f(t){t._valueTracker||(t._valueTracker=xE(t))}function Ab(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Nb(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function _p(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function D1(t,e){var n=e.checked;return _n({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Xy(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Wo(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Eb(t,e){e=e.checked,e!=null&&wv(t,"checked",e,!1)}function F1(t,e){Eb(t,e);var n=Wo(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?O1(t,e.type,n):e.hasOwnProperty("defaultValue")&&O1(t,e.type,Wo(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Zy(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function O1(t,e,n){(e!=="number"||_p(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var kh=Array.isArray;function iu(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Wo(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function M1(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(qe(91));return _n({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function e5(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(qe(92));if(kh(n)){if(1<n.length)throw Error(qe(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Wo(n)}}function kb(t,e){var n=Wo(e.value),r=Wo(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function t5(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Tb(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function V1(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Tb(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var bf,Ib=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(bf=bf||document.createElement("div"),bf.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=bf.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Zh(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Fh={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},SE=["Webkit","ms","Moz","O"];Object.keys(Fh).forEach(function(t){SE.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Fh[e]=Fh[t]})});function Cb(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Fh.hasOwnProperty(t)&&Fh[t]?(""+e).trim():e+"px"}function Pb(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Cb(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var NE=_n({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function U1(t,e){if(e){if(NE[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(qe(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(qe(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(qe(61))}if(e.style!=null&&typeof e.style!="object")throw Error(qe(62))}}function B1(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var K1=null;function Sv(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var q1=null,su=null,au=null;function n5(t){if(t=Pd(t)){if(typeof q1!="function")throw Error(qe(280));var e=t.stateNode;e&&(e=xm(e),q1(t.stateNode,t.type,e))}}function jb(t){su?au?au.push(t):au=[t]:su=t}function Lb(){if(su){var t=su,e=au;if(au=su=null,n5(t),e)for(t=0;t<e.length;t++)n5(e[t])}}function Rb(t,e){return t(e)}function Db(){}var Lg=!1;function Fb(t,e,n){if(Lg)return t(e,n);Lg=!0;try{return Rb(t,e,n)}finally{Lg=!1,(su!==null||au!==null)&&(Db(),Lb())}}function ed(t,e){var n=t.stateNode;if(n===null)return null;var r=xm(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(qe(231,e,typeof n));return n}var z1=!1;if(Ca)try{var ph={};Object.defineProperty(ph,"passive",{get:function(){z1=!0}}),window.addEventListener("test",ph,ph),window.removeEventListener("test",ph,ph)}catch{z1=!1}function AE(t,e,n,r,i,s,a,o,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(d){this.onError(d)}}var Oh=!1,bp=null,xp=!1,$1=null,EE={onError:function(t){Oh=!0,bp=t}};function kE(t,e,n,r,i,s,a,o,l){Oh=!1,bp=null,AE.apply(EE,arguments)}function TE(t,e,n,r,i,s,a,o,l){if(kE.apply(this,arguments),Oh){if(Oh){var u=bp;Oh=!1,bp=null}else throw Error(qe(198));xp||(xp=!0,$1=u)}}function tc(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Ob(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function r5(t){if(tc(t)!==t)throw Error(qe(188))}function IE(t){var e=t.alternate;if(!e){if(e=tc(t),e===null)throw Error(qe(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return r5(i),t;if(s===r)return r5(i),e;s=s.sibling}throw Error(qe(188))}if(n.return!==r.return)n=i,r=s;else{for(var a=!1,o=i.child;o;){if(o===n){a=!0,n=i,r=s;break}if(o===r){a=!0,r=i,n=s;break}o=o.sibling}if(!a){for(o=s.child;o;){if(o===n){a=!0,n=s,r=i;break}if(o===r){a=!0,r=s,n=i;break}o=o.sibling}if(!a)throw Error(qe(189))}}if(n.alternate!==r)throw Error(qe(190))}if(n.tag!==3)throw Error(qe(188));return n.stateNode.current===n?t:e}function Mb(t){return t=IE(t),t!==null?Vb(t):null}function Vb(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Vb(t);if(e!==null)return e;t=t.sibling}return null}var Ub=Ei.unstable_scheduleCallback,i5=Ei.unstable_cancelCallback,CE=Ei.unstable_shouldYield,PE=Ei.unstable_requestPaint,Dn=Ei.unstable_now,jE=Ei.unstable_getCurrentPriorityLevel,Nv=Ei.unstable_ImmediatePriority,Bb=Ei.unstable_UserBlockingPriority,Sp=Ei.unstable_NormalPriority,LE=Ei.unstable_LowPriority,Kb=Ei.unstable_IdlePriority,ym=null,Vs=null;function RE(t){if(Vs&&typeof Vs.onCommitFiberRoot=="function")try{Vs.onCommitFiberRoot(ym,t,void 0,(t.current.flags&128)===128)}catch{}}var hs=Math.clz32?Math.clz32:OE,DE=Math.log,FE=Math.LN2;function OE(t){return t>>>=0,t===0?32:31-(DE(t)/FE|0)|0}var xf=64,Sf=4194304;function Th(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Np(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,a=n&268435455;if(a!==0){var o=a&~i;o!==0?r=Th(o):(s&=a,s!==0&&(r=Th(s)))}else a=n&~i,a!==0?r=Th(a):s!==0&&(r=Th(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-hs(e),i=1<<n,r|=t[n],e&=~i;return r}function ME(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function VE(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var a=31-hs(s),o=1<<a,l=i[a];l===-1?(!(o&n)||o&r)&&(i[a]=ME(o,e)):l<=e&&(t.expiredLanes|=o),s&=~o}}function H1(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function qb(){var t=xf;return xf<<=1,!(xf&4194240)&&(xf=64),t}function Rg(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Id(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-hs(e),t[e]=n}function UE(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-hs(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function Av(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-hs(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Qt=0;function zb(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var $b,Ev,Hb,Wb,Gb,W1=!1,Nf=[],Ro=null,Do=null,Fo=null,td=new Map,nd=new Map,xo=[],BE="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function s5(t,e){switch(t){case"focusin":case"focusout":Ro=null;break;case"dragenter":case"dragleave":Do=null;break;case"mouseover":case"mouseout":Fo=null;break;case"pointerover":case"pointerout":td.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":nd.delete(e.pointerId)}}function mh(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Pd(e),e!==null&&Ev(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function KE(t,e,n,r,i){switch(e){case"focusin":return Ro=mh(Ro,t,e,n,r,i),!0;case"dragenter":return Do=mh(Do,t,e,n,r,i),!0;case"mouseover":return Fo=mh(Fo,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return td.set(s,mh(td.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,nd.set(s,mh(nd.get(s)||null,t,e,n,r,i)),!0}return!1}function Qb(t){var e=jl(t.target);if(e!==null){var n=tc(e);if(n!==null){if(e=n.tag,e===13){if(e=Ob(n),e!==null){t.blockedOn=e,Gb(t.priority,function(){Hb(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Gf(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=G1(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);K1=r,n.target.dispatchEvent(r),K1=null}else return e=Pd(n),e!==null&&Ev(e),t.blockedOn=n,!1;e.shift()}return!0}function a5(t,e,n){Gf(t)&&n.delete(e)}function qE(){W1=!1,Ro!==null&&Gf(Ro)&&(Ro=null),Do!==null&&Gf(Do)&&(Do=null),Fo!==null&&Gf(Fo)&&(Fo=null),td.forEach(a5),nd.forEach(a5)}function gh(t,e){t.blockedOn===e&&(t.blockedOn=null,W1||(W1=!0,Ei.unstable_scheduleCallback(Ei.unstable_NormalPriority,qE)))}function rd(t){function e(i){return gh(i,t)}if(0<Nf.length){gh(Nf[0],t);for(var n=1;n<Nf.length;n++){var r=Nf[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Ro!==null&&gh(Ro,t),Do!==null&&gh(Do,t),Fo!==null&&gh(Fo,t),td.forEach(e),nd.forEach(e),n=0;n<xo.length;n++)r=xo[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<xo.length&&(n=xo[0],n.blockedOn===null);)Qb(n),n.blockedOn===null&&xo.shift()}var ou=Ma.ReactCurrentBatchConfig,Ap=!0;function zE(t,e,n,r){var i=Qt,s=ou.transition;ou.transition=null;try{Qt=1,kv(t,e,n,r)}finally{Qt=i,ou.transition=s}}function $E(t,e,n,r){var i=Qt,s=ou.transition;ou.transition=null;try{Qt=4,kv(t,e,n,r)}finally{Qt=i,ou.transition=s}}function kv(t,e,n,r){if(Ap){var i=G1(t,e,n,r);if(i===null)zg(t,e,r,Ep,n),s5(t,r);else if(KE(i,t,e,n,r))r.stopPropagation();else if(s5(t,r),e&4&&-1<BE.indexOf(t)){for(;i!==null;){var s=Pd(i);if(s!==null&&$b(s),s=G1(t,e,n,r),s===null&&zg(t,e,r,Ep,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else zg(t,e,r,null,n)}}var Ep=null;function G1(t,e,n,r){if(Ep=null,t=Sv(r),t=jl(t),t!==null)if(e=tc(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Ob(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ep=t,null}function Yb(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(jE()){case Nv:return 1;case Bb:return 4;case Sp:case LE:return 16;case Kb:return 536870912;default:return 16}default:return 16}}var Io=null,Tv=null,Qf=null;function Jb(){if(Qf)return Qf;var t,e=Tv,n=e.length,r,i="value"in Io?Io.value:Io.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var a=n-t;for(r=1;r<=a&&e[n-r]===i[s-r];r++);return Qf=i.slice(t,1<r?1-r:void 0)}function Yf(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Af(){return!0}function o5(){return!1}function Ti(t){function e(n,r,i,s,a){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(n=t[o],this[o]=n?n(s):s[o]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Af:o5,this.isPropagationStopped=o5,this}return _n(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Af)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Af)},persist:function(){},isPersistent:Af}),e}var Du={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Iv=Ti(Du),Cd=_n({},Du,{view:0,detail:0}),HE=Ti(Cd),Dg,Fg,vh,wm=_n({},Cd,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cv,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==vh&&(vh&&t.type==="mousemove"?(Dg=t.screenX-vh.screenX,Fg=t.screenY-vh.screenY):Fg=Dg=0,vh=t),Dg)},movementY:function(t){return"movementY"in t?t.movementY:Fg}}),l5=Ti(wm),WE=_n({},wm,{dataTransfer:0}),GE=Ti(WE),QE=_n({},Cd,{relatedTarget:0}),Og=Ti(QE),YE=_n({},Du,{animationName:0,elapsedTime:0,pseudoElement:0}),JE=Ti(YE),XE=_n({},Du,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),ZE=Ti(XE),ek=_n({},Du,{data:0}),c5=Ti(ek),tk={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},nk={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},rk={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ik(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=rk[t])?!!e[t]:!1}function Cv(){return ik}var sk=_n({},Cd,{key:function(t){if(t.key){var e=tk[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Yf(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?nk[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cv,charCode:function(t){return t.type==="keypress"?Yf(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Yf(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),ak=Ti(sk),ok=_n({},wm,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),u5=Ti(ok),lk=_n({},Cd,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cv}),ck=Ti(lk),uk=_n({},Du,{propertyName:0,elapsedTime:0,pseudoElement:0}),hk=Ti(uk),dk=_n({},wm,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),fk=Ti(dk),pk=[9,13,27,32],Pv=Ca&&"CompositionEvent"in window,Mh=null;Ca&&"documentMode"in document&&(Mh=document.documentMode);var mk=Ca&&"TextEvent"in window&&!Mh,Xb=Ca&&(!Pv||Mh&&8<Mh&&11>=Mh),h5=" ",d5=!1;function Zb(t,e){switch(t){case"keyup":return pk.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ex(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var $c=!1;function gk(t,e){switch(t){case"compositionend":return ex(e);case"keypress":return e.which!==32?null:(d5=!0,h5);case"textInput":return t=e.data,t===h5&&d5?null:t;default:return null}}function vk(t,e){if($c)return t==="compositionend"||!Pv&&Zb(t,e)?(t=Jb(),Qf=Tv=Io=null,$c=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Xb&&e.locale!=="ko"?null:e.data;default:return null}}var yk={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function f5(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!yk[t.type]:e==="textarea"}function tx(t,e,n,r){jb(r),e=kp(e,"onChange"),0<e.length&&(n=new Iv("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Vh=null,id=null;function wk(t){dx(t,0)}function _m(t){var e=Gc(t);if(Ab(e))return t}function _k(t,e){if(t==="change")return e}var nx=!1;if(Ca){var Mg;if(Ca){var Vg="oninput"in document;if(!Vg){var p5=document.createElement("div");p5.setAttribute("oninput","return;"),Vg=typeof p5.oninput=="function"}Mg=Vg}else Mg=!1;nx=Mg&&(!document.documentMode||9<document.documentMode)}function m5(){Vh&&(Vh.detachEvent("onpropertychange",rx),id=Vh=null)}function rx(t){if(t.propertyName==="value"&&_m(id)){var e=[];tx(e,id,t,Sv(t)),Fb(wk,e)}}function bk(t,e,n){t==="focusin"?(m5(),Vh=e,id=n,Vh.attachEvent("onpropertychange",rx)):t==="focusout"&&m5()}function xk(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return _m(id)}function Sk(t,e){if(t==="click")return _m(e)}function Nk(t,e){if(t==="input"||t==="change")return _m(e)}function Ak(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var fs=typeof Object.is=="function"?Object.is:Ak;function sd(t,e){if(fs(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!C1.call(e,i)||!fs(t[i],e[i]))return!1}return!0}function g5(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function v5(t,e){var n=g5(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=g5(n)}}function ix(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?ix(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function sx(){for(var t=window,e=_p();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=_p(t.document)}return e}function jv(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Ek(t){var e=sx(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&ix(n.ownerDocument.documentElement,n)){if(r!==null&&jv(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=v5(n,s);var a=v5(n,r);i&&a&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var kk=Ca&&"documentMode"in document&&11>=document.documentMode,Hc=null,Q1=null,Uh=null,Y1=!1;function y5(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Y1||Hc==null||Hc!==_p(r)||(r=Hc,"selectionStart"in r&&jv(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Uh&&sd(Uh,r)||(Uh=r,r=kp(Q1,"onSelect"),0<r.length&&(e=new Iv("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Hc)))}function Ef(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Wc={animationend:Ef("Animation","AnimationEnd"),animationiteration:Ef("Animation","AnimationIteration"),animationstart:Ef("Animation","AnimationStart"),transitionend:Ef("Transition","TransitionEnd")},Ug={},ax={};Ca&&(ax=document.createElement("div").style,"AnimationEvent"in window||(delete Wc.animationend.animation,delete Wc.animationiteration.animation,delete Wc.animationstart.animation),"TransitionEvent"in window||delete Wc.transitionend.transition);function bm(t){if(Ug[t])return Ug[t];if(!Wc[t])return t;var e=Wc[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in ax)return Ug[t]=e[n];return t}var ox=bm("animationend"),lx=bm("animationiteration"),cx=bm("animationstart"),ux=bm("transitionend"),hx=new Map,w5="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function tl(t,e){hx.set(t,e),ec(e,[t])}for(var Bg=0;Bg<w5.length;Bg++){var Kg=w5[Bg],Tk=Kg.toLowerCase(),Ik=Kg[0].toUpperCase()+Kg.slice(1);tl(Tk,"on"+Ik)}tl(ox,"onAnimationEnd");tl(lx,"onAnimationIteration");tl(cx,"onAnimationStart");tl("dblclick","onDoubleClick");tl("focusin","onFocus");tl("focusout","onBlur");tl(ux,"onTransitionEnd");yu("onMouseEnter",["mouseout","mouseover"]);yu("onMouseLeave",["mouseout","mouseover"]);yu("onPointerEnter",["pointerout","pointerover"]);yu("onPointerLeave",["pointerout","pointerover"]);ec("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ec("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ec("onBeforeInput",["compositionend","keypress","textInput","paste"]);ec("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ec("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ec("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ih="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ck=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ih));function _5(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,TE(r,e,void 0,t),t.currentTarget=null}function dx(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var a=r.length-1;0<=a;a--){var o=r[a],l=o.instance,u=o.currentTarget;if(o=o.listener,l!==s&&i.isPropagationStopped())break e;_5(i,o,u),s=l}else for(a=0;a<r.length;a++){if(o=r[a],l=o.instance,u=o.currentTarget,o=o.listener,l!==s&&i.isPropagationStopped())break e;_5(i,o,u),s=l}}}if(xp)throw t=$1,xp=!1,$1=null,t}function cn(t,e){var n=e[t0];n===void 0&&(n=e[t0]=new Set);var r=t+"__bubble";n.has(r)||(fx(e,t,2,!1),n.add(r))}function qg(t,e,n){var r=0;e&&(r|=4),fx(n,t,r,e)}var kf="_reactListening"+Math.random().toString(36).slice(2);function ad(t){if(!t[kf]){t[kf]=!0,_b.forEach(function(n){n!=="selectionchange"&&(Ck.has(n)||qg(n,!1,t),qg(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[kf]||(e[kf]=!0,qg("selectionchange",!1,e))}}function fx(t,e,n,r){switch(Yb(e)){case 1:var i=zE;break;case 4:i=$E;break;default:i=kv}n=i.bind(null,e,n,t),i=void 0,!z1||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function zg(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var o=r.stateNode.containerInfo;if(o===i||o.nodeType===8&&o.parentNode===i)break;if(a===4)for(a=r.return;a!==null;){var l=a.tag;if((l===3||l===4)&&(l=a.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;a=a.return}for(;o!==null;){if(a=jl(o),a===null)return;if(l=a.tag,l===5||l===6){r=s=a;continue e}o=o.parentNode}}r=r.return}Fb(function(){var u=s,d=Sv(n),p=[];e:{var m=hx.get(t);if(m!==void 0){var g=Iv,x=t;switch(t){case"keypress":if(Yf(n)===0)break e;case"keydown":case"keyup":g=ak;break;case"focusin":x="focus",g=Og;break;case"focusout":x="blur",g=Og;break;case"beforeblur":case"afterblur":g=Og;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=l5;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=GE;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=ck;break;case ox:case lx:case cx:g=JE;break;case ux:g=hk;break;case"scroll":g=HE;break;case"wheel":g=fk;break;case"copy":case"cut":case"paste":g=ZE;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=u5}var b=(e&4)!==0,k=!b&&t==="scroll",w=b?m!==null?m+"Capture":null:m;b=[];for(var N=u,j;N!==null;){j=N;var O=j.stateNode;if(j.tag===5&&O!==null&&(j=O,w!==null&&(O=ed(N,w),O!=null&&b.push(od(N,O,j)))),k)break;N=N.return}0<b.length&&(m=new g(m,x,null,n,d),p.push({event:m,listeners:b}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",m&&n!==K1&&(x=n.relatedTarget||n.fromElement)&&(jl(x)||x[Pa]))break e;if((g||m)&&(m=d.window===d?d:(m=d.ownerDocument)?m.defaultView||m.parentWindow:window,g?(x=n.relatedTarget||n.toElement,g=u,x=x?jl(x):null,x!==null&&(k=tc(x),x!==k||x.tag!==5&&x.tag!==6)&&(x=null)):(g=null,x=u),g!==x)){if(b=l5,O="onMouseLeave",w="onMouseEnter",N="mouse",(t==="pointerout"||t==="pointerover")&&(b=u5,O="onPointerLeave",w="onPointerEnter",N="pointer"),k=g==null?m:Gc(g),j=x==null?m:Gc(x),m=new b(O,N+"leave",g,n,d),m.target=k,m.relatedTarget=j,O=null,jl(d)===u&&(b=new b(w,N+"enter",x,n,d),b.target=j,b.relatedTarget=k,O=b),k=O,g&&x)t:{for(b=g,w=x,N=0,j=b;j;j=Rc(j))N++;for(j=0,O=w;O;O=Rc(O))j++;for(;0<N-j;)b=Rc(b),N--;for(;0<j-N;)w=Rc(w),j--;for(;N--;){if(b===w||w!==null&&b===w.alternate)break t;b=Rc(b),w=Rc(w)}b=null}else b=null;g!==null&&b5(p,m,g,b,!1),x!==null&&k!==null&&b5(p,k,x,b,!0)}}e:{if(m=u?Gc(u):window,g=m.nodeName&&m.nodeName.toLowerCase(),g==="select"||g==="input"&&m.type==="file")var Q=_k;else if(f5(m))if(nx)Q=Nk;else{Q=xk;var B=bk}else(g=m.nodeName)&&g.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(Q=Sk);if(Q&&(Q=Q(t,u))){tx(p,Q,n,d);break e}B&&B(t,m,u),t==="focusout"&&(B=m._wrapperState)&&B.controlled&&m.type==="number"&&O1(m,"number",m.value)}switch(B=u?Gc(u):window,t){case"focusin":(f5(B)||B.contentEditable==="true")&&(Hc=B,Q1=u,Uh=null);break;case"focusout":Uh=Q1=Hc=null;break;case"mousedown":Y1=!0;break;case"contextmenu":case"mouseup":case"dragend":Y1=!1,y5(p,n,d);break;case"selectionchange":if(kk)break;case"keydown":case"keyup":y5(p,n,d)}var P;if(Pv)e:{switch(t){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else $c?Zb(t,n)&&(y="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(y="onCompositionStart");y&&(Xb&&n.locale!=="ko"&&($c||y!=="onCompositionStart"?y==="onCompositionEnd"&&$c&&(P=Jb()):(Io=d,Tv="value"in Io?Io.value:Io.textContent,$c=!0)),B=kp(u,y),0<B.length&&(y=new c5(y,t,null,n,d),p.push({event:y,listeners:B}),P?y.data=P:(P=ex(n),P!==null&&(y.data=P)))),(P=mk?gk(t,n):vk(t,n))&&(u=kp(u,"onBeforeInput"),0<u.length&&(d=new c5("onBeforeInput","beforeinput",null,n,d),p.push({event:d,listeners:u}),d.data=P))}dx(p,e)})}function od(t,e,n){return{instance:t,listener:e,currentTarget:n}}function kp(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=ed(t,n),s!=null&&r.unshift(od(t,s,i)),s=ed(t,e),s!=null&&r.push(od(t,s,i))),t=t.return}return r}function Rc(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function b5(t,e,n,r,i){for(var s=e._reactName,a=[];n!==null&&n!==r;){var o=n,l=o.alternate,u=o.stateNode;if(l!==null&&l===r)break;o.tag===5&&u!==null&&(o=u,i?(l=ed(n,s),l!=null&&a.unshift(od(n,l,o))):i||(l=ed(n,s),l!=null&&a.push(od(n,l,o)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var Pk=/\r\n?/g,jk=/\u0000|\uFFFD/g;function x5(t){return(typeof t=="string"?t:""+t).replace(Pk,`
`).replace(jk,"")}function Tf(t,e,n){if(e=x5(e),x5(t)!==e&&n)throw Error(qe(425))}function Tp(){}var J1=null,X1=null;function Z1(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var e0=typeof setTimeout=="function"?setTimeout:void 0,Lk=typeof clearTimeout=="function"?clearTimeout:void 0,S5=typeof Promise=="function"?Promise:void 0,Rk=typeof queueMicrotask=="function"?queueMicrotask:typeof S5<"u"?function(t){return S5.resolve(null).then(t).catch(Dk)}:e0;function Dk(t){setTimeout(function(){throw t})}function $g(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),rd(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);rd(e)}function Oo(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function N5(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Fu=Math.random().toString(36).slice(2),Fs="__reactFiber$"+Fu,ld="__reactProps$"+Fu,Pa="__reactContainer$"+Fu,t0="__reactEvents$"+Fu,Fk="__reactListeners$"+Fu,Ok="__reactHandles$"+Fu;function jl(t){var e=t[Fs];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Pa]||n[Fs]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=N5(t);t!==null;){if(n=t[Fs])return n;t=N5(t)}return e}t=n,n=t.parentNode}return null}function Pd(t){return t=t[Fs]||t[Pa],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Gc(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(qe(33))}function xm(t){return t[ld]||null}var n0=[],Qc=-1;function nl(t){return{current:t}}function dn(t){0>Qc||(t.current=n0[Qc],n0[Qc]=null,Qc--)}function sn(t,e){Qc++,n0[Qc]=t.current,t.current=e}var Go={},jr=nl(Go),li=nl(!1),ql=Go;function wu(t,e){var n=t.type.contextTypes;if(!n)return Go;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function ci(t){return t=t.childContextTypes,t!=null}function Ip(){dn(li),dn(jr)}function A5(t,e,n){if(jr.current!==Go)throw Error(qe(168));sn(jr,e),sn(li,n)}function px(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(qe(108,bE(t)||"Unknown",i));return _n({},n,r)}function Cp(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Go,ql=jr.current,sn(jr,t),sn(li,li.current),!0}function E5(t,e,n){var r=t.stateNode;if(!r)throw Error(qe(169));n?(t=px(t,e,ql),r.__reactInternalMemoizedMergedChildContext=t,dn(li),dn(jr),sn(jr,t)):dn(li),sn(li,n)}var _a=null,Sm=!1,Hg=!1;function mx(t){_a===null?_a=[t]:_a.push(t)}function Mk(t){Sm=!0,mx(t)}function rl(){if(!Hg&&_a!==null){Hg=!0;var t=0,e=Qt;try{var n=_a;for(Qt=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}_a=null,Sm=!1}catch(i){throw _a!==null&&(_a=_a.slice(t+1)),Ub(Nv,rl),i}finally{Qt=e,Hg=!1}}return null}var Yc=[],Jc=0,Pp=null,jp=0,Oi=[],Mi=0,zl=null,ba=1,xa="";function El(t,e){Yc[Jc++]=jp,Yc[Jc++]=Pp,Pp=t,jp=e}function gx(t,e,n){Oi[Mi++]=ba,Oi[Mi++]=xa,Oi[Mi++]=zl,zl=t;var r=ba;t=xa;var i=32-hs(r)-1;r&=~(1<<i),n+=1;var s=32-hs(e)+i;if(30<s){var a=i-i%5;s=(r&(1<<a)-1).toString(32),r>>=a,i-=a,ba=1<<32-hs(e)+i|n<<i|r,xa=s+t}else ba=1<<s|n<<i|r,xa=t}function Lv(t){t.return!==null&&(El(t,1),gx(t,1,0))}function Rv(t){for(;t===Pp;)Pp=Yc[--Jc],Yc[Jc]=null,jp=Yc[--Jc],Yc[Jc]=null;for(;t===zl;)zl=Oi[--Mi],Oi[Mi]=null,xa=Oi[--Mi],Oi[Mi]=null,ba=Oi[--Mi],Oi[Mi]=null}var Ai=null,bi=null,gn=!1,us=null;function vx(t,e){var n=Ui(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function k5(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Ai=t,bi=Oo(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Ai=t,bi=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=zl!==null?{id:ba,overflow:xa}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Ui(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Ai=t,bi=null,!0):!1;default:return!1}}function r0(t){return(t.mode&1)!==0&&(t.flags&128)===0}function i0(t){if(gn){var e=bi;if(e){var n=e;if(!k5(t,e)){if(r0(t))throw Error(qe(418));e=Oo(n.nextSibling);var r=Ai;e&&k5(t,e)?vx(r,n):(t.flags=t.flags&-4097|2,gn=!1,Ai=t)}}else{if(r0(t))throw Error(qe(418));t.flags=t.flags&-4097|2,gn=!1,Ai=t}}}function T5(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ai=t}function If(t){if(t!==Ai)return!1;if(!gn)return T5(t),gn=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Z1(t.type,t.memoizedProps)),e&&(e=bi)){if(r0(t))throw yx(),Error(qe(418));for(;e;)vx(t,e),e=Oo(e.nextSibling)}if(T5(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(qe(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){bi=Oo(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}bi=null}}else bi=Ai?Oo(t.stateNode.nextSibling):null;return!0}function yx(){for(var t=bi;t;)t=Oo(t.nextSibling)}function _u(){bi=Ai=null,gn=!1}function Dv(t){us===null?us=[t]:us.push(t)}var Vk=Ma.ReactCurrentBatchConfig;function yh(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(qe(309));var r=n.stateNode}if(!r)throw Error(qe(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(a){var o=i.refs;a===null?delete o[s]:o[s]=a},e._stringRef=s,e)}if(typeof t!="string")throw Error(qe(284));if(!n._owner)throw Error(qe(290,t))}return t}function Cf(t,e){throw t=Object.prototype.toString.call(e),Error(qe(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function I5(t){var e=t._init;return e(t._payload)}function wx(t){function e(w,N){if(t){var j=w.deletions;j===null?(w.deletions=[N],w.flags|=16):j.push(N)}}function n(w,N){if(!t)return null;for(;N!==null;)e(w,N),N=N.sibling;return null}function r(w,N){for(w=new Map;N!==null;)N.key!==null?w.set(N.key,N):w.set(N.index,N),N=N.sibling;return w}function i(w,N){return w=Bo(w,N),w.index=0,w.sibling=null,w}function s(w,N,j){return w.index=j,t?(j=w.alternate,j!==null?(j=j.index,j<N?(w.flags|=2,N):j):(w.flags|=2,N)):(w.flags|=1048576,N)}function a(w){return t&&w.alternate===null&&(w.flags|=2),w}function o(w,N,j,O){return N===null||N.tag!==6?(N=Zg(j,w.mode,O),N.return=w,N):(N=i(N,j),N.return=w,N)}function l(w,N,j,O){var Q=j.type;return Q===zc?d(w,N,j.props.children,O,j.key):N!==null&&(N.elementType===Q||typeof Q=="object"&&Q!==null&&Q.$$typeof===_o&&I5(Q)===N.type)?(O=i(N,j.props),O.ref=yh(w,N,j),O.return=w,O):(O=rp(j.type,j.key,j.props,null,w.mode,O),O.ref=yh(w,N,j),O.return=w,O)}function u(w,N,j,O){return N===null||N.tag!==4||N.stateNode.containerInfo!==j.containerInfo||N.stateNode.implementation!==j.implementation?(N=e1(j,w.mode,O),N.return=w,N):(N=i(N,j.children||[]),N.return=w,N)}function d(w,N,j,O,Q){return N===null||N.tag!==7?(N=Ml(j,w.mode,O,Q),N.return=w,N):(N=i(N,j),N.return=w,N)}function p(w,N,j){if(typeof N=="string"&&N!==""||typeof N=="number")return N=Zg(""+N,w.mode,j),N.return=w,N;if(typeof N=="object"&&N!==null){switch(N.$$typeof){case wf:return j=rp(N.type,N.key,N.props,null,w.mode,j),j.ref=yh(w,null,N),j.return=w,j;case qc:return N=e1(N,w.mode,j),N.return=w,N;case _o:var O=N._init;return p(w,O(N._payload),j)}if(kh(N)||fh(N))return N=Ml(N,w.mode,j,null),N.return=w,N;Cf(w,N)}return null}function m(w,N,j,O){var Q=N!==null?N.key:null;if(typeof j=="string"&&j!==""||typeof j=="number")return Q!==null?null:o(w,N,""+j,O);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case wf:return j.key===Q?l(w,N,j,O):null;case qc:return j.key===Q?u(w,N,j,O):null;case _o:return Q=j._init,m(w,N,Q(j._payload),O)}if(kh(j)||fh(j))return Q!==null?null:d(w,N,j,O,null);Cf(w,j)}return null}function g(w,N,j,O,Q){if(typeof O=="string"&&O!==""||typeof O=="number")return w=w.get(j)||null,o(N,w,""+O,Q);if(typeof O=="object"&&O!==null){switch(O.$$typeof){case wf:return w=w.get(O.key===null?j:O.key)||null,l(N,w,O,Q);case qc:return w=w.get(O.key===null?j:O.key)||null,u(N,w,O,Q);case _o:var B=O._init;return g(w,N,j,B(O._payload),Q)}if(kh(O)||fh(O))return w=w.get(j)||null,d(N,w,O,Q,null);Cf(N,O)}return null}function x(w,N,j,O){for(var Q=null,B=null,P=N,y=N=0,S=null;P!==null&&y<j.length;y++){P.index>y?(S=P,P=null):S=P.sibling;var L=m(w,P,j[y],O);if(L===null){P===null&&(P=S);break}t&&P&&L.alternate===null&&e(w,P),N=s(L,N,y),B===null?Q=L:B.sibling=L,B=L,P=S}if(y===j.length)return n(w,P),gn&&El(w,y),Q;if(P===null){for(;y<j.length;y++)P=p(w,j[y],O),P!==null&&(N=s(P,N,y),B===null?Q=P:B.sibling=P,B=P);return gn&&El(w,y),Q}for(P=r(w,P);y<j.length;y++)S=g(P,w,y,j[y],O),S!==null&&(t&&S.alternate!==null&&P.delete(S.key===null?y:S.key),N=s(S,N,y),B===null?Q=S:B.sibling=S,B=S);return t&&P.forEach(function(A){return e(w,A)}),gn&&El(w,y),Q}function b(w,N,j,O){var Q=fh(j);if(typeof Q!="function")throw Error(qe(150));if(j=Q.call(j),j==null)throw Error(qe(151));for(var B=Q=null,P=N,y=N=0,S=null,L=j.next();P!==null&&!L.done;y++,L=j.next()){P.index>y?(S=P,P=null):S=P.sibling;var A=m(w,P,L.value,O);if(A===null){P===null&&(P=S);break}t&&P&&A.alternate===null&&e(w,P),N=s(A,N,y),B===null?Q=A:B.sibling=A,B=A,P=S}if(L.done)return n(w,P),gn&&El(w,y),Q;if(P===null){for(;!L.done;y++,L=j.next())L=p(w,L.value,O),L!==null&&(N=s(L,N,y),B===null?Q=L:B.sibling=L,B=L);return gn&&El(w,y),Q}for(P=r(w,P);!L.done;y++,L=j.next())L=g(P,w,y,L.value,O),L!==null&&(t&&L.alternate!==null&&P.delete(L.key===null?y:L.key),N=s(L,N,y),B===null?Q=L:B.sibling=L,B=L);return t&&P.forEach(function(T){return e(w,T)}),gn&&El(w,y),Q}function k(w,N,j,O){if(typeof j=="object"&&j!==null&&j.type===zc&&j.key===null&&(j=j.props.children),typeof j=="object"&&j!==null){switch(j.$$typeof){case wf:e:{for(var Q=j.key,B=N;B!==null;){if(B.key===Q){if(Q=j.type,Q===zc){if(B.tag===7){n(w,B.sibling),N=i(B,j.props.children),N.return=w,w=N;break e}}else if(B.elementType===Q||typeof Q=="object"&&Q!==null&&Q.$$typeof===_o&&I5(Q)===B.type){n(w,B.sibling),N=i(B,j.props),N.ref=yh(w,B,j),N.return=w,w=N;break e}n(w,B);break}else e(w,B);B=B.sibling}j.type===zc?(N=Ml(j.props.children,w.mode,O,j.key),N.return=w,w=N):(O=rp(j.type,j.key,j.props,null,w.mode,O),O.ref=yh(w,N,j),O.return=w,w=O)}return a(w);case qc:e:{for(B=j.key;N!==null;){if(N.key===B)if(N.tag===4&&N.stateNode.containerInfo===j.containerInfo&&N.stateNode.implementation===j.implementation){n(w,N.sibling),N=i(N,j.children||[]),N.return=w,w=N;break e}else{n(w,N);break}else e(w,N);N=N.sibling}N=e1(j,w.mode,O),N.return=w,w=N}return a(w);case _o:return B=j._init,k(w,N,B(j._payload),O)}if(kh(j))return x(w,N,j,O);if(fh(j))return b(w,N,j,O);Cf(w,j)}return typeof j=="string"&&j!==""||typeof j=="number"?(j=""+j,N!==null&&N.tag===6?(n(w,N.sibling),N=i(N,j),N.return=w,w=N):(n(w,N),N=Zg(j,w.mode,O),N.return=w,w=N),a(w)):n(w,N)}return k}var bu=wx(!0),_x=wx(!1),Lp=nl(null),Rp=null,Xc=null,Fv=null;function Ov(){Fv=Xc=Rp=null}function Mv(t){var e=Lp.current;dn(Lp),t._currentValue=e}function s0(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function lu(t,e){Rp=t,Fv=Xc=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(oi=!0),t.firstContext=null)}function qi(t){var e=t._currentValue;if(Fv!==t)if(t={context:t,memoizedValue:e,next:null},Xc===null){if(Rp===null)throw Error(qe(308));Xc=t,Rp.dependencies={lanes:0,firstContext:t}}else Xc=Xc.next=t;return e}var Ll=null;function Vv(t){Ll===null?Ll=[t]:Ll.push(t)}function bx(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Vv(e)):(n.next=i.next,i.next=n),e.interleaved=n,ja(t,r)}function ja(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var bo=!1;function Uv(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function xx(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function ka(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Mo(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Vt&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,ja(t,n)}return i=r.interleaved,i===null?(e.next=e,Vv(r)):(e.next=i.next,i.next=e),r.interleaved=e,ja(t,n)}function Jf(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Av(t,n)}}function C5(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=a:s=s.next=a,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Dp(t,e,n,r){var i=t.updateQueue;bo=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,o=i.shared.pending;if(o!==null){i.shared.pending=null;var l=o,u=l.next;l.next=null,a===null?s=u:a.next=u,a=l;var d=t.alternate;d!==null&&(d=d.updateQueue,o=d.lastBaseUpdate,o!==a&&(o===null?d.firstBaseUpdate=u:o.next=u,d.lastBaseUpdate=l))}if(s!==null){var p=i.baseState;a=0,d=u=l=null,o=s;do{var m=o.lane,g=o.eventTime;if((r&m)===m){d!==null&&(d=d.next={eventTime:g,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var x=t,b=o;switch(m=e,g=n,b.tag){case 1:if(x=b.payload,typeof x=="function"){p=x.call(g,p,m);break e}p=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=b.payload,m=typeof x=="function"?x.call(g,p,m):x,m==null)break e;p=_n({},p,m);break e;case 2:bo=!0}}o.callback!==null&&o.lane!==0&&(t.flags|=64,m=i.effects,m===null?i.effects=[o]:m.push(o))}else g={eventTime:g,lane:m,tag:o.tag,payload:o.payload,callback:o.callback,next:null},d===null?(u=d=g,l=p):d=d.next=g,a|=m;if(o=o.next,o===null){if(o=i.shared.pending,o===null)break;m=o,o=m.next,m.next=null,i.lastBaseUpdate=m,i.shared.pending=null}}while(!0);if(d===null&&(l=p),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do a|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Hl|=a,t.lanes=a,t.memoizedState=p}}function P5(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(qe(191,i));i.call(r)}}}var jd={},Us=nl(jd),cd=nl(jd),ud=nl(jd);function Rl(t){if(t===jd)throw Error(qe(174));return t}function Bv(t,e){switch(sn(ud,e),sn(cd,t),sn(Us,jd),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:V1(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=V1(e,t)}dn(Us),sn(Us,e)}function xu(){dn(Us),dn(cd),dn(ud)}function Sx(t){Rl(ud.current);var e=Rl(Us.current),n=V1(e,t.type);e!==n&&(sn(cd,t),sn(Us,n))}function Kv(t){cd.current===t&&(dn(Us),dn(cd))}var vn=nl(0);function Fp(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Wg=[];function qv(){for(var t=0;t<Wg.length;t++)Wg[t]._workInProgressVersionPrimary=null;Wg.length=0}var Xf=Ma.ReactCurrentDispatcher,Gg=Ma.ReactCurrentBatchConfig,$l=0,yn=null,Yn=null,nr=null,Op=!1,Bh=!1,hd=0,Uk=0;function br(){throw Error(qe(321))}function zv(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!fs(t[n],e[n]))return!1;return!0}function $v(t,e,n,r,i,s){if($l=s,yn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Xf.current=t===null||t.memoizedState===null?zk:$k,t=n(r,i),Bh){s=0;do{if(Bh=!1,hd=0,25<=s)throw Error(qe(301));s+=1,nr=Yn=null,e.updateQueue=null,Xf.current=Hk,t=n(r,i)}while(Bh)}if(Xf.current=Mp,e=Yn!==null&&Yn.next!==null,$l=0,nr=Yn=yn=null,Op=!1,e)throw Error(qe(300));return t}function Hv(){var t=hd!==0;return hd=0,t}function Rs(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return nr===null?yn.memoizedState=nr=t:nr=nr.next=t,nr}function zi(){if(Yn===null){var t=yn.alternate;t=t!==null?t.memoizedState:null}else t=Yn.next;var e=nr===null?yn.memoizedState:nr.next;if(e!==null)nr=e,Yn=t;else{if(t===null)throw Error(qe(310));Yn=t,t={memoizedState:Yn.memoizedState,baseState:Yn.baseState,baseQueue:Yn.baseQueue,queue:Yn.queue,next:null},nr===null?yn.memoizedState=nr=t:nr=nr.next=t}return nr}function dd(t,e){return typeof e=="function"?e(t):e}function Qg(t){var e=zi(),n=e.queue;if(n===null)throw Error(qe(311));n.lastRenderedReducer=t;var r=Yn,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var a=i.next;i.next=s.next,s.next=a}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var o=a=null,l=null,u=s;do{var d=u.lane;if(($l&d)===d)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var p={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(o=l=p,a=r):l=l.next=p,yn.lanes|=d,Hl|=d}u=u.next}while(u!==null&&u!==s);l===null?a=r:l.next=o,fs(r,e.memoizedState)||(oi=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,yn.lanes|=s,Hl|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Yg(t){var e=zi(),n=e.queue;if(n===null)throw Error(qe(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var a=i=i.next;do s=t(s,a.action),a=a.next;while(a!==i);fs(s,e.memoizedState)||(oi=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function Nx(){}function Ax(t,e){var n=yn,r=zi(),i=e(),s=!fs(r.memoizedState,i);if(s&&(r.memoizedState=i,oi=!0),r=r.queue,Wv(Tx.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||nr!==null&&nr.memoizedState.tag&1){if(n.flags|=2048,fd(9,kx.bind(null,n,r,i,e),void 0,null),ir===null)throw Error(qe(349));$l&30||Ex(n,e,i)}return i}function Ex(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=yn.updateQueue,e===null?(e={lastEffect:null,stores:null},yn.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function kx(t,e,n,r){e.value=n,e.getSnapshot=r,Ix(e)&&Cx(t)}function Tx(t,e,n){return n(function(){Ix(e)&&Cx(t)})}function Ix(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!fs(t,n)}catch{return!0}}function Cx(t){var e=ja(t,1);e!==null&&ds(e,t,1,-1)}function j5(t){var e=Rs();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:dd,lastRenderedState:t},e.queue=t,t=t.dispatch=qk.bind(null,yn,t),[e.memoizedState,t]}function fd(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=yn.updateQueue,e===null?(e={lastEffect:null,stores:null},yn.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Px(){return zi().memoizedState}function Zf(t,e,n,r){var i=Rs();yn.flags|=t,i.memoizedState=fd(1|e,n,void 0,r===void 0?null:r)}function Nm(t,e,n,r){var i=zi();r=r===void 0?null:r;var s=void 0;if(Yn!==null){var a=Yn.memoizedState;if(s=a.destroy,r!==null&&zv(r,a.deps)){i.memoizedState=fd(e,n,s,r);return}}yn.flags|=t,i.memoizedState=fd(1|e,n,s,r)}function L5(t,e){return Zf(8390656,8,t,e)}function Wv(t,e){return Nm(2048,8,t,e)}function jx(t,e){return Nm(4,2,t,e)}function Lx(t,e){return Nm(4,4,t,e)}function Rx(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Dx(t,e,n){return n=n!=null?n.concat([t]):null,Nm(4,4,Rx.bind(null,e,t),n)}function Gv(){}function Fx(t,e){var n=zi();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&zv(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Ox(t,e){var n=zi();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&zv(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Mx(t,e,n){return $l&21?(fs(n,e)||(n=qb(),yn.lanes|=n,Hl|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,oi=!0),t.memoizedState=n)}function Bk(t,e){var n=Qt;Qt=n!==0&&4>n?n:4,t(!0);var r=Gg.transition;Gg.transition={};try{t(!1),e()}finally{Qt=n,Gg.transition=r}}function Vx(){return zi().memoizedState}function Kk(t,e,n){var r=Uo(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Ux(t))Bx(e,n);else if(n=bx(t,e,n,r),n!==null){var i=qr();ds(n,t,r,i),Kx(n,e,r)}}function qk(t,e,n){var r=Uo(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ux(t))Bx(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var a=e.lastRenderedState,o=s(a,n);if(i.hasEagerState=!0,i.eagerState=o,fs(o,a)){var l=e.interleaved;l===null?(i.next=i,Vv(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=bx(t,e,i,r),n!==null&&(i=qr(),ds(n,t,r,i),Kx(n,e,r))}}function Ux(t){var e=t.alternate;return t===yn||e!==null&&e===yn}function Bx(t,e){Bh=Op=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Kx(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Av(t,n)}}var Mp={readContext:qi,useCallback:br,useContext:br,useEffect:br,useImperativeHandle:br,useInsertionEffect:br,useLayoutEffect:br,useMemo:br,useReducer:br,useRef:br,useState:br,useDebugValue:br,useDeferredValue:br,useTransition:br,useMutableSource:br,useSyncExternalStore:br,useId:br,unstable_isNewReconciler:!1},zk={readContext:qi,useCallback:function(t,e){return Rs().memoizedState=[t,e===void 0?null:e],t},useContext:qi,useEffect:L5,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Zf(4194308,4,Rx.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Zf(4194308,4,t,e)},useInsertionEffect:function(t,e){return Zf(4,2,t,e)},useMemo:function(t,e){var n=Rs();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Rs();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=Kk.bind(null,yn,t),[r.memoizedState,t]},useRef:function(t){var e=Rs();return t={current:t},e.memoizedState=t},useState:j5,useDebugValue:Gv,useDeferredValue:function(t){return Rs().memoizedState=t},useTransition:function(){var t=j5(!1),e=t[0];return t=Bk.bind(null,t[1]),Rs().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=yn,i=Rs();if(gn){if(n===void 0)throw Error(qe(407));n=n()}else{if(n=e(),ir===null)throw Error(qe(349));$l&30||Ex(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,L5(Tx.bind(null,r,s,t),[t]),r.flags|=2048,fd(9,kx.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Rs(),e=ir.identifierPrefix;if(gn){var n=xa,r=ba;n=(r&~(1<<32-hs(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=hd++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Uk++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},$k={readContext:qi,useCallback:Fx,useContext:qi,useEffect:Wv,useImperativeHandle:Dx,useInsertionEffect:jx,useLayoutEffect:Lx,useMemo:Ox,useReducer:Qg,useRef:Px,useState:function(){return Qg(dd)},useDebugValue:Gv,useDeferredValue:function(t){var e=zi();return Mx(e,Yn.memoizedState,t)},useTransition:function(){var t=Qg(dd)[0],e=zi().memoizedState;return[t,e]},useMutableSource:Nx,useSyncExternalStore:Ax,useId:Vx,unstable_isNewReconciler:!1},Hk={readContext:qi,useCallback:Fx,useContext:qi,useEffect:Wv,useImperativeHandle:Dx,useInsertionEffect:jx,useLayoutEffect:Lx,useMemo:Ox,useReducer:Yg,useRef:Px,useState:function(){return Yg(dd)},useDebugValue:Gv,useDeferredValue:function(t){var e=zi();return Yn===null?e.memoizedState=t:Mx(e,Yn.memoizedState,t)},useTransition:function(){var t=Yg(dd)[0],e=zi().memoizedState;return[t,e]},useMutableSource:Nx,useSyncExternalStore:Ax,useId:Vx,unstable_isNewReconciler:!1};function os(t,e){if(t&&t.defaultProps){e=_n({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function a0(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:_n({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Am={isMounted:function(t){return(t=t._reactInternals)?tc(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=qr(),i=Uo(t),s=ka(r,i);s.payload=e,n!=null&&(s.callback=n),e=Mo(t,s,i),e!==null&&(ds(e,t,i,r),Jf(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=qr(),i=Uo(t),s=ka(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Mo(t,s,i),e!==null&&(ds(e,t,i,r),Jf(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=qr(),r=Uo(t),i=ka(n,r);i.tag=2,e!=null&&(i.callback=e),e=Mo(t,i,r),e!==null&&(ds(e,t,r,n),Jf(e,t,r))}};function R5(t,e,n,r,i,s,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,a):e.prototype&&e.prototype.isPureReactComponent?!sd(n,r)||!sd(i,s):!0}function qx(t,e,n){var r=!1,i=Go,s=e.contextType;return typeof s=="object"&&s!==null?s=qi(s):(i=ci(e)?ql:jr.current,r=e.contextTypes,s=(r=r!=null)?wu(t,i):Go),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Am,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function D5(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Am.enqueueReplaceState(e,e.state,null)}function o0(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Uv(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=qi(s):(s=ci(e)?ql:jr.current,i.context=wu(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(a0(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Am.enqueueReplaceState(i,i.state,null),Dp(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Su(t,e){try{var n="",r=e;do n+=_E(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Jg(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function l0(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Wk=typeof WeakMap=="function"?WeakMap:Map;function zx(t,e,n){n=ka(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Up||(Up=!0,y0=r),l0(t,e)},n}function $x(t,e,n){n=ka(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){l0(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){l0(t,e),typeof r!="function"&&(Vo===null?Vo=new Set([this]):Vo.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function F5(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Wk;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=o6.bind(null,t,e,n),e.then(t,t))}function O5(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function M5(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=ka(-1,1),e.tag=2,Mo(n,e,1))),n.lanes|=1),t)}var Gk=Ma.ReactCurrentOwner,oi=!1;function Kr(t,e,n,r){e.child=t===null?_x(e,null,n,r):bu(e,t.child,n,r)}function V5(t,e,n,r,i){n=n.render;var s=e.ref;return lu(e,i),r=$v(t,e,n,r,s,i),n=Hv(),t!==null&&!oi?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,La(t,e,i)):(gn&&n&&Lv(e),e.flags|=1,Kr(t,e,r,i),e.child)}function U5(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!n2(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,Hx(t,e,s,r,i)):(t=rp(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var a=s.memoizedProps;if(n=n.compare,n=n!==null?n:sd,n(a,r)&&t.ref===e.ref)return La(t,e,i)}return e.flags|=1,t=Bo(s,r),t.ref=e.ref,t.return=e,e.child=t}function Hx(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(sd(s,r)&&t.ref===e.ref)if(oi=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(oi=!0);else return e.lanes=t.lanes,La(t,e,i)}return c0(t,e,n,r,i)}function Wx(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},sn(eu,_i),_i|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,sn(eu,_i),_i|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,sn(eu,_i),_i|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,sn(eu,_i),_i|=r;return Kr(t,e,i,n),e.child}function Gx(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function c0(t,e,n,r,i){var s=ci(n)?ql:jr.current;return s=wu(e,s),lu(e,i),n=$v(t,e,n,r,s,i),r=Hv(),t!==null&&!oi?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,La(t,e,i)):(gn&&r&&Lv(e),e.flags|=1,Kr(t,e,n,i),e.child)}function B5(t,e,n,r,i){if(ci(n)){var s=!0;Cp(e)}else s=!1;if(lu(e,i),e.stateNode===null)ep(t,e),qx(e,n,r),o0(e,n,r,i),r=!0;else if(t===null){var a=e.stateNode,o=e.memoizedProps;a.props=o;var l=a.context,u=n.contextType;typeof u=="object"&&u!==null?u=qi(u):(u=ci(n)?ql:jr.current,u=wu(e,u));var d=n.getDerivedStateFromProps,p=typeof d=="function"||typeof a.getSnapshotBeforeUpdate=="function";p||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==r||l!==u)&&D5(e,a,r,u),bo=!1;var m=e.memoizedState;a.state=m,Dp(e,r,a,i),l=e.memoizedState,o!==r||m!==l||li.current||bo?(typeof d=="function"&&(a0(e,n,d,r),l=e.memoizedState),(o=bo||R5(e,n,o,r,m,l,u))?(p||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),a.props=r,a.state=l,a.context=u,r=o):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,xx(t,e),o=e.memoizedProps,u=e.type===e.elementType?o:os(e.type,o),a.props=u,p=e.pendingProps,m=a.context,l=n.contextType,typeof l=="object"&&l!==null?l=qi(l):(l=ci(n)?ql:jr.current,l=wu(e,l));var g=n.getDerivedStateFromProps;(d=typeof g=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==p||m!==l)&&D5(e,a,r,l),bo=!1,m=e.memoizedState,a.state=m,Dp(e,r,a,i);var x=e.memoizedState;o!==p||m!==x||li.current||bo?(typeof g=="function"&&(a0(e,n,g,r),x=e.memoizedState),(u=bo||R5(e,n,u,r,m,x,l)||!1)?(d||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,x,l),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,x,l)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=x),a.props=r,a.state=x,a.context=l,r=u):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),r=!1)}return u0(t,e,n,r,s,i)}function u0(t,e,n,r,i,s){Gx(t,e);var a=(e.flags&128)!==0;if(!r&&!a)return i&&E5(e,n,!1),La(t,e,s);r=e.stateNode,Gk.current=e;var o=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&a?(e.child=bu(e,t.child,null,s),e.child=bu(e,null,o,s)):Kr(t,e,o,s),e.memoizedState=r.state,i&&E5(e,n,!0),e.child}function Qx(t){var e=t.stateNode;e.pendingContext?A5(t,e.pendingContext,e.pendingContext!==e.context):e.context&&A5(t,e.context,!1),Bv(t,e.containerInfo)}function K5(t,e,n,r,i){return _u(),Dv(i),e.flags|=256,Kr(t,e,n,r),e.child}var h0={dehydrated:null,treeContext:null,retryLane:0};function d0(t){return{baseLanes:t,cachePool:null,transitions:null}}function Yx(t,e,n){var r=e.pendingProps,i=vn.current,s=!1,a=(e.flags&128)!==0,o;if((o=a)||(o=t!==null&&t.memoizedState===null?!1:(i&2)!==0),o?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),sn(vn,i&1),t===null)return i0(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=r.children,t=r.fallback,s?(r=e.mode,s=e.child,a={mode:"hidden",children:a},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=a):s=Tm(a,r,0,null),t=Ml(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=d0(n),e.memoizedState=h0,t):Qv(e,a));if(i=t.memoizedState,i!==null&&(o=i.dehydrated,o!==null))return Qk(t,e,a,r,o,i,n);if(s){s=r.fallback,a=e.mode,i=t.child,o=i.sibling;var l={mode:"hidden",children:r.children};return!(a&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Bo(i,l),r.subtreeFlags=i.subtreeFlags&14680064),o!==null?s=Bo(o,s):(s=Ml(s,a,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,a=t.child.memoizedState,a=a===null?d0(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},s.memoizedState=a,s.childLanes=t.childLanes&~n,e.memoizedState=h0,r}return s=t.child,t=s.sibling,r=Bo(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Qv(t,e){return e=Tm({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Pf(t,e,n,r){return r!==null&&Dv(r),bu(e,t.child,null,n),t=Qv(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Qk(t,e,n,r,i,s,a){if(n)return e.flags&256?(e.flags&=-257,r=Jg(Error(qe(422))),Pf(t,e,a,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Tm({mode:"visible",children:r.children},i,0,null),s=Ml(s,i,a,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&bu(e,t.child,null,a),e.child.memoizedState=d0(a),e.memoizedState=h0,s);if(!(e.mode&1))return Pf(t,e,a,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var o=r.dgst;return r=o,s=Error(qe(419)),r=Jg(s,r,void 0),Pf(t,e,a,r)}if(o=(a&t.childLanes)!==0,oi||o){if(r=ir,r!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|a)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,ja(t,i),ds(r,t,i,-1))}return t2(),r=Jg(Error(qe(421))),Pf(t,e,a,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=l6.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,bi=Oo(i.nextSibling),Ai=e,gn=!0,us=null,t!==null&&(Oi[Mi++]=ba,Oi[Mi++]=xa,Oi[Mi++]=zl,ba=t.id,xa=t.overflow,zl=e),e=Qv(e,r.children),e.flags|=4096,e)}function q5(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),s0(t.return,e,n)}function Xg(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Jx(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Kr(t,e,r.children,n),r=vn.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&q5(t,n,e);else if(t.tag===19)q5(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(sn(vn,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Fp(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Xg(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Fp(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Xg(e,!0,n,null,s);break;case"together":Xg(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ep(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function La(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Hl|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(qe(153));if(e.child!==null){for(t=e.child,n=Bo(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Bo(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Yk(t,e,n){switch(e.tag){case 3:Qx(e),_u();break;case 5:Sx(e);break;case 1:ci(e.type)&&Cp(e);break;case 4:Bv(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;sn(Lp,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(sn(vn,vn.current&1),e.flags|=128,null):n&e.child.childLanes?Yx(t,e,n):(sn(vn,vn.current&1),t=La(t,e,n),t!==null?t.sibling:null);sn(vn,vn.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Jx(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),sn(vn,vn.current),r)break;return null;case 22:case 23:return e.lanes=0,Wx(t,e,n)}return La(t,e,n)}var Xx,f0,Zx,e4;Xx=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};f0=function(){};Zx=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Rl(Us.current);var s=null;switch(n){case"input":i=D1(t,i),r=D1(t,r),s=[];break;case"select":i=_n({},i,{value:void 0}),r=_n({},r,{value:void 0}),s=[];break;case"textarea":i=M1(t,i),r=M1(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Tp)}U1(n,r);var a;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var o=i[u];for(a in o)o.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Xh.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var l=r[u];if(o=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==o&&(l!=null||o!=null))if(u==="style")if(o){for(a in o)!o.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in l)l.hasOwnProperty(a)&&o[a]!==l[a]&&(n||(n={}),n[a]=l[a])}else n||(s||(s=[]),s.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,o=o?o.__html:void 0,l!=null&&o!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Xh.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&cn("scroll",t),s||o===l||(s=[])):(s=s||[]).push(u,l))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};e4=function(t,e,n,r){n!==r&&(e.flags|=4)};function wh(t,e){if(!gn)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function xr(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Jk(t,e,n){var r=e.pendingProps;switch(Rv(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return xr(e),null;case 1:return ci(e.type)&&Ip(),xr(e),null;case 3:return r=e.stateNode,xu(),dn(li),dn(jr),qv(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(If(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,us!==null&&(b0(us),us=null))),f0(t,e),xr(e),null;case 5:Kv(e);var i=Rl(ud.current);if(n=e.type,t!==null&&e.stateNode!=null)Zx(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(qe(166));return xr(e),null}if(t=Rl(Us.current),If(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Fs]=e,r[ld]=s,t=(e.mode&1)!==0,n){case"dialog":cn("cancel",r),cn("close",r);break;case"iframe":case"object":case"embed":cn("load",r);break;case"video":case"audio":for(i=0;i<Ih.length;i++)cn(Ih[i],r);break;case"source":cn("error",r);break;case"img":case"image":case"link":cn("error",r),cn("load",r);break;case"details":cn("toggle",r);break;case"input":Xy(r,s),cn("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},cn("invalid",r);break;case"textarea":e5(r,s),cn("invalid",r)}U1(n,s),i=null;for(var a in s)if(s.hasOwnProperty(a)){var o=s[a];a==="children"?typeof o=="string"?r.textContent!==o&&(s.suppressHydrationWarning!==!0&&Tf(r.textContent,o,t),i=["children",o]):typeof o=="number"&&r.textContent!==""+o&&(s.suppressHydrationWarning!==!0&&Tf(r.textContent,o,t),i=["children",""+o]):Xh.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&cn("scroll",r)}switch(n){case"input":_f(r),Zy(r,s,!0);break;case"textarea":_f(r),t5(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Tp)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Tb(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=a.createElement(n,{is:r.is}):(t=a.createElement(n),n==="select"&&(a=t,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):t=a.createElementNS(t,n),t[Fs]=e,t[ld]=r,Xx(t,e,!1,!1),e.stateNode=t;e:{switch(a=B1(n,r),n){case"dialog":cn("cancel",t),cn("close",t),i=r;break;case"iframe":case"object":case"embed":cn("load",t),i=r;break;case"video":case"audio":for(i=0;i<Ih.length;i++)cn(Ih[i],t);i=r;break;case"source":cn("error",t),i=r;break;case"img":case"image":case"link":cn("error",t),cn("load",t),i=r;break;case"details":cn("toggle",t),i=r;break;case"input":Xy(t,r),i=D1(t,r),cn("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=_n({},r,{value:void 0}),cn("invalid",t);break;case"textarea":e5(t,r),i=M1(t,r),cn("invalid",t);break;default:i=r}U1(n,i),o=i;for(s in o)if(o.hasOwnProperty(s)){var l=o[s];s==="style"?Pb(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&Ib(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Zh(t,l):typeof l=="number"&&Zh(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Xh.hasOwnProperty(s)?l!=null&&s==="onScroll"&&cn("scroll",t):l!=null&&wv(t,s,l,a))}switch(n){case"input":_f(t),Zy(t,r,!1);break;case"textarea":_f(t),t5(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Wo(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?iu(t,!!r.multiple,s,!1):r.defaultValue!=null&&iu(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Tp)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return xr(e),null;case 6:if(t&&e.stateNode!=null)e4(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(qe(166));if(n=Rl(ud.current),Rl(Us.current),If(e)){if(r=e.stateNode,n=e.memoizedProps,r[Fs]=e,(s=r.nodeValue!==n)&&(t=Ai,t!==null))switch(t.tag){case 3:Tf(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Tf(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Fs]=e,e.stateNode=r}return xr(e),null;case 13:if(dn(vn),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(gn&&bi!==null&&e.mode&1&&!(e.flags&128))yx(),_u(),e.flags|=98560,s=!1;else if(s=If(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(qe(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(qe(317));s[Fs]=e}else _u(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;xr(e),s=!1}else us!==null&&(b0(us),us=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||vn.current&1?Jn===0&&(Jn=3):t2())),e.updateQueue!==null&&(e.flags|=4),xr(e),null);case 4:return xu(),f0(t,e),t===null&&ad(e.stateNode.containerInfo),xr(e),null;case 10:return Mv(e.type._context),xr(e),null;case 17:return ci(e.type)&&Ip(),xr(e),null;case 19:if(dn(vn),s=e.memoizedState,s===null)return xr(e),null;if(r=(e.flags&128)!==0,a=s.rendering,a===null)if(r)wh(s,!1);else{if(Jn!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=Fp(t),a!==null){for(e.flags|=128,wh(s,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,a=s.alternate,a===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,t=a.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return sn(vn,vn.current&1|2),e.child}t=t.sibling}s.tail!==null&&Dn()>Nu&&(e.flags|=128,r=!0,wh(s,!1),e.lanes=4194304)}else{if(!r)if(t=Fp(a),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),wh(s,!0),s.tail===null&&s.tailMode==="hidden"&&!a.alternate&&!gn)return xr(e),null}else 2*Dn()-s.renderingStartTime>Nu&&n!==1073741824&&(e.flags|=128,r=!0,wh(s,!1),e.lanes=4194304);s.isBackwards?(a.sibling=e.child,e.child=a):(n=s.last,n!==null?n.sibling=a:e.child=a,s.last=a)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Dn(),e.sibling=null,n=vn.current,sn(vn,r?n&1|2:n&1),e):(xr(e),null);case 22:case 23:return e2(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?_i&1073741824&&(xr(e),e.subtreeFlags&6&&(e.flags|=8192)):xr(e),null;case 24:return null;case 25:return null}throw Error(qe(156,e.tag))}function Xk(t,e){switch(Rv(e),e.tag){case 1:return ci(e.type)&&Ip(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return xu(),dn(li),dn(jr),qv(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Kv(e),null;case 13:if(dn(vn),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(qe(340));_u()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return dn(vn),null;case 4:return xu(),null;case 10:return Mv(e.type._context),null;case 22:case 23:return e2(),null;case 24:return null;default:return null}}var jf=!1,Ir=!1,Zk=typeof WeakSet=="function"?WeakSet:Set,rt=null;function Zc(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){In(t,e,r)}else n.current=null}function p0(t,e,n){try{n()}catch(r){In(t,e,r)}}var z5=!1;function e6(t,e){if(J1=Ap,t=sx(),jv(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var a=0,o=-1,l=-1,u=0,d=0,p=t,m=null;t:for(;;){for(var g;p!==n||i!==0&&p.nodeType!==3||(o=a+i),p!==s||r!==0&&p.nodeType!==3||(l=a+r),p.nodeType===3&&(a+=p.nodeValue.length),(g=p.firstChild)!==null;)m=p,p=g;for(;;){if(p===t)break t;if(m===n&&++u===i&&(o=a),m===s&&++d===r&&(l=a),(g=p.nextSibling)!==null)break;p=m,m=p.parentNode}p=g}n=o===-1||l===-1?null:{start:o,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(X1={focusedElem:t,selectionRange:n},Ap=!1,rt=e;rt!==null;)if(e=rt,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,rt=t;else for(;rt!==null;){e=rt;try{var x=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var b=x.memoizedProps,k=x.memoizedState,w=e.stateNode,N=w.getSnapshotBeforeUpdate(e.elementType===e.type?b:os(e.type,b),k);w.__reactInternalSnapshotBeforeUpdate=N}break;case 3:var j=e.stateNode.containerInfo;j.nodeType===1?j.textContent="":j.nodeType===9&&j.documentElement&&j.removeChild(j.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(qe(163))}}catch(O){In(e,e.return,O)}if(t=e.sibling,t!==null){t.return=e.return,rt=t;break}rt=e.return}return x=z5,z5=!1,x}function Kh(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&p0(e,n,s)}i=i.next}while(i!==r)}}function Em(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function m0(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function t4(t){var e=t.alternate;e!==null&&(t.alternate=null,t4(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Fs],delete e[ld],delete e[t0],delete e[Fk],delete e[Ok])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function n4(t){return t.tag===5||t.tag===3||t.tag===4}function $5(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||n4(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function g0(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Tp));else if(r!==4&&(t=t.child,t!==null))for(g0(t,e,n),t=t.sibling;t!==null;)g0(t,e,n),t=t.sibling}function v0(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(v0(t,e,n),t=t.sibling;t!==null;)v0(t,e,n),t=t.sibling}var ur=null,cs=!1;function go(t,e,n){for(n=n.child;n!==null;)r4(t,e,n),n=n.sibling}function r4(t,e,n){if(Vs&&typeof Vs.onCommitFiberUnmount=="function")try{Vs.onCommitFiberUnmount(ym,n)}catch{}switch(n.tag){case 5:Ir||Zc(n,e);case 6:var r=ur,i=cs;ur=null,go(t,e,n),ur=r,cs=i,ur!==null&&(cs?(t=ur,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):ur.removeChild(n.stateNode));break;case 18:ur!==null&&(cs?(t=ur,n=n.stateNode,t.nodeType===8?$g(t.parentNode,n):t.nodeType===1&&$g(t,n),rd(t)):$g(ur,n.stateNode));break;case 4:r=ur,i=cs,ur=n.stateNode.containerInfo,cs=!0,go(t,e,n),ur=r,cs=i;break;case 0:case 11:case 14:case 15:if(!Ir&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,a=s.destroy;s=s.tag,a!==void 0&&(s&2||s&4)&&p0(n,e,a),i=i.next}while(i!==r)}go(t,e,n);break;case 1:if(!Ir&&(Zc(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){In(n,e,o)}go(t,e,n);break;case 21:go(t,e,n);break;case 22:n.mode&1?(Ir=(r=Ir)||n.memoizedState!==null,go(t,e,n),Ir=r):go(t,e,n);break;default:go(t,e,n)}}function H5(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Zk),e.forEach(function(r){var i=c6.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function ns(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,a=e,o=a;e:for(;o!==null;){switch(o.tag){case 5:ur=o.stateNode,cs=!1;break e;case 3:ur=o.stateNode.containerInfo,cs=!0;break e;case 4:ur=o.stateNode.containerInfo,cs=!0;break e}o=o.return}if(ur===null)throw Error(qe(160));r4(s,a,i),ur=null,cs=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){In(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)i4(e,t),e=e.sibling}function i4(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ns(e,t),js(t),r&4){try{Kh(3,t,t.return),Em(3,t)}catch(b){In(t,t.return,b)}try{Kh(5,t,t.return)}catch(b){In(t,t.return,b)}}break;case 1:ns(e,t),js(t),r&512&&n!==null&&Zc(n,n.return);break;case 5:if(ns(e,t),js(t),r&512&&n!==null&&Zc(n,n.return),t.flags&32){var i=t.stateNode;try{Zh(i,"")}catch(b){In(t,t.return,b)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,a=n!==null?n.memoizedProps:s,o=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{o==="input"&&s.type==="radio"&&s.name!=null&&Eb(i,s),B1(o,a);var u=B1(o,s);for(a=0;a<l.length;a+=2){var d=l[a],p=l[a+1];d==="style"?Pb(i,p):d==="dangerouslySetInnerHTML"?Ib(i,p):d==="children"?Zh(i,p):wv(i,d,p,u)}switch(o){case"input":F1(i,s);break;case"textarea":kb(i,s);break;case"select":var m=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var g=s.value;g!=null?iu(i,!!s.multiple,g,!1):m!==!!s.multiple&&(s.defaultValue!=null?iu(i,!!s.multiple,s.defaultValue,!0):iu(i,!!s.multiple,s.multiple?[]:"",!1))}i[ld]=s}catch(b){In(t,t.return,b)}}break;case 6:if(ns(e,t),js(t),r&4){if(t.stateNode===null)throw Error(qe(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(b){In(t,t.return,b)}}break;case 3:if(ns(e,t),js(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{rd(e.containerInfo)}catch(b){In(t,t.return,b)}break;case 4:ns(e,t),js(t);break;case 13:ns(e,t),js(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Xv=Dn())),r&4&&H5(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(Ir=(u=Ir)||d,ns(e,t),Ir=u):ns(e,t),js(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for(rt=t,d=t.child;d!==null;){for(p=rt=d;rt!==null;){switch(m=rt,g=m.child,m.tag){case 0:case 11:case 14:case 15:Kh(4,m,m.return);break;case 1:Zc(m,m.return);var x=m.stateNode;if(typeof x.componentWillUnmount=="function"){r=m,n=m.return;try{e=r,x.props=e.memoizedProps,x.state=e.memoizedState,x.componentWillUnmount()}catch(b){In(r,n,b)}}break;case 5:Zc(m,m.return);break;case 22:if(m.memoizedState!==null){G5(p);continue}}g!==null?(g.return=m,rt=g):G5(p)}d=d.sibling}e:for(d=null,p=t;;){if(p.tag===5){if(d===null){d=p;try{i=p.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(o=p.stateNode,l=p.memoizedProps.style,a=l!=null&&l.hasOwnProperty("display")?l.display:null,o.style.display=Cb("display",a))}catch(b){In(t,t.return,b)}}}else if(p.tag===6){if(d===null)try{p.stateNode.nodeValue=u?"":p.memoizedProps}catch(b){In(t,t.return,b)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;d===p&&(d=null),p=p.return}d===p&&(d=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:ns(e,t),js(t),r&4&&H5(t);break;case 21:break;default:ns(e,t),js(t)}}function js(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(n4(n)){var r=n;break e}n=n.return}throw Error(qe(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Zh(i,""),r.flags&=-33);var s=$5(t);v0(t,s,i);break;case 3:case 4:var a=r.stateNode.containerInfo,o=$5(t);g0(t,o,a);break;default:throw Error(qe(161))}}catch(l){In(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function t6(t,e,n){rt=t,s4(t)}function s4(t,e,n){for(var r=(t.mode&1)!==0;rt!==null;){var i=rt,s=i.child;if(i.tag===22&&r){var a=i.memoizedState!==null||jf;if(!a){var o=i.alternate,l=o!==null&&o.memoizedState!==null||Ir;o=jf;var u=Ir;if(jf=a,(Ir=l)&&!u)for(rt=i;rt!==null;)a=rt,l=a.child,a.tag===22&&a.memoizedState!==null?Q5(i):l!==null?(l.return=a,rt=l):Q5(i);for(;s!==null;)rt=s,s4(s),s=s.sibling;rt=i,jf=o,Ir=u}W5(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,rt=s):W5(t)}}function W5(t){for(;rt!==null;){var e=rt;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ir||Em(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Ir)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:os(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&P5(e,s,r);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}P5(e,a,n)}break;case 5:var o=e.stateNode;if(n===null&&e.flags&4){n=o;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var p=d.dehydrated;p!==null&&rd(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(qe(163))}Ir||e.flags&512&&m0(e)}catch(m){In(e,e.return,m)}}if(e===t){rt=null;break}if(n=e.sibling,n!==null){n.return=e.return,rt=n;break}rt=e.return}}function G5(t){for(;rt!==null;){var e=rt;if(e===t){rt=null;break}var n=e.sibling;if(n!==null){n.return=e.return,rt=n;break}rt=e.return}}function Q5(t){for(;rt!==null;){var e=rt;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Em(4,e)}catch(l){In(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){In(e,i,l)}}var s=e.return;try{m0(e)}catch(l){In(e,s,l)}break;case 5:var a=e.return;try{m0(e)}catch(l){In(e,a,l)}}}catch(l){In(e,e.return,l)}if(e===t){rt=null;break}var o=e.sibling;if(o!==null){o.return=e.return,rt=o;break}rt=e.return}}var n6=Math.ceil,Vp=Ma.ReactCurrentDispatcher,Yv=Ma.ReactCurrentOwner,Bi=Ma.ReactCurrentBatchConfig,Vt=0,ir=null,$n=null,fr=0,_i=0,eu=nl(0),Jn=0,pd=null,Hl=0,km=0,Jv=0,qh=null,ii=null,Xv=0,Nu=1/0,wa=null,Up=!1,y0=null,Vo=null,Lf=!1,Co=null,Bp=0,zh=0,w0=null,tp=-1,np=0;function qr(){return Vt&6?Dn():tp!==-1?tp:tp=Dn()}function Uo(t){return t.mode&1?Vt&2&&fr!==0?fr&-fr:Vk.transition!==null?(np===0&&(np=qb()),np):(t=Qt,t!==0||(t=window.event,t=t===void 0?16:Yb(t.type)),t):1}function ds(t,e,n,r){if(50<zh)throw zh=0,w0=null,Error(qe(185));Id(t,n,r),(!(Vt&2)||t!==ir)&&(t===ir&&(!(Vt&2)&&(km|=n),Jn===4&&So(t,fr)),ui(t,r),n===1&&Vt===0&&!(e.mode&1)&&(Nu=Dn()+500,Sm&&rl()))}function ui(t,e){var n=t.callbackNode;VE(t,e);var r=Np(t,t===ir?fr:0);if(r===0)n!==null&&i5(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&i5(n),e===1)t.tag===0?Mk(Y5.bind(null,t)):mx(Y5.bind(null,t)),Rk(function(){!(Vt&6)&&rl()}),n=null;else{switch(zb(r)){case 1:n=Nv;break;case 4:n=Bb;break;case 16:n=Sp;break;case 536870912:n=Kb;break;default:n=Sp}n=f4(n,a4.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function a4(t,e){if(tp=-1,np=0,Vt&6)throw Error(qe(327));var n=t.callbackNode;if(cu()&&t.callbackNode!==n)return null;var r=Np(t,t===ir?fr:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Kp(t,r);else{e=r;var i=Vt;Vt|=2;var s=l4();(ir!==t||fr!==e)&&(wa=null,Nu=Dn()+500,Ol(t,e));do try{s6();break}catch(o){o4(t,o)}while(!0);Ov(),Vp.current=s,Vt=i,$n!==null?e=0:(ir=null,fr=0,e=Jn)}if(e!==0){if(e===2&&(i=H1(t),i!==0&&(r=i,e=_0(t,i))),e===1)throw n=pd,Ol(t,0),So(t,r),ui(t,Dn()),n;if(e===6)So(t,r);else{if(i=t.current.alternate,!(r&30)&&!r6(i)&&(e=Kp(t,r),e===2&&(s=H1(t),s!==0&&(r=s,e=_0(t,s))),e===1))throw n=pd,Ol(t,0),So(t,r),ui(t,Dn()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(qe(345));case 2:kl(t,ii,wa);break;case 3:if(So(t,r),(r&130023424)===r&&(e=Xv+500-Dn(),10<e)){if(Np(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){qr(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=e0(kl.bind(null,t,ii,wa),e);break}kl(t,ii,wa);break;case 4:if(So(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var a=31-hs(r);s=1<<a,a=e[a],a>i&&(i=a),r&=~s}if(r=i,r=Dn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*n6(r/1960))-r,10<r){t.timeoutHandle=e0(kl.bind(null,t,ii,wa),r);break}kl(t,ii,wa);break;case 5:kl(t,ii,wa);break;default:throw Error(qe(329))}}}return ui(t,Dn()),t.callbackNode===n?a4.bind(null,t):null}function _0(t,e){var n=qh;return t.current.memoizedState.isDehydrated&&(Ol(t,e).flags|=256),t=Kp(t,e),t!==2&&(e=ii,ii=n,e!==null&&b0(e)),t}function b0(t){ii===null?ii=t:ii.push.apply(ii,t)}function r6(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!fs(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function So(t,e){for(e&=~Jv,e&=~km,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-hs(e),r=1<<n;t[n]=-1,e&=~r}}function Y5(t){if(Vt&6)throw Error(qe(327));cu();var e=Np(t,0);if(!(e&1))return ui(t,Dn()),null;var n=Kp(t,e);if(t.tag!==0&&n===2){var r=H1(t);r!==0&&(e=r,n=_0(t,r))}if(n===1)throw n=pd,Ol(t,0),So(t,e),ui(t,Dn()),n;if(n===6)throw Error(qe(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,kl(t,ii,wa),ui(t,Dn()),null}function Zv(t,e){var n=Vt;Vt|=1;try{return t(e)}finally{Vt=n,Vt===0&&(Nu=Dn()+500,Sm&&rl())}}function Wl(t){Co!==null&&Co.tag===0&&!(Vt&6)&&cu();var e=Vt;Vt|=1;var n=Bi.transition,r=Qt;try{if(Bi.transition=null,Qt=1,t)return t()}finally{Qt=r,Bi.transition=n,Vt=e,!(Vt&6)&&rl()}}function e2(){_i=eu.current,dn(eu)}function Ol(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Lk(n)),$n!==null)for(n=$n.return;n!==null;){var r=n;switch(Rv(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ip();break;case 3:xu(),dn(li),dn(jr),qv();break;case 5:Kv(r);break;case 4:xu();break;case 13:dn(vn);break;case 19:dn(vn);break;case 10:Mv(r.type._context);break;case 22:case 23:e2()}n=n.return}if(ir=t,$n=t=Bo(t.current,null),fr=_i=e,Jn=0,pd=null,Jv=km=Hl=0,ii=qh=null,Ll!==null){for(e=0;e<Ll.length;e++)if(n=Ll[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var a=s.next;s.next=i,r.next=a}n.pending=r}Ll=null}return t}function o4(t,e){do{var n=$n;try{if(Ov(),Xf.current=Mp,Op){for(var r=yn.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Op=!1}if($l=0,nr=Yn=yn=null,Bh=!1,hd=0,Yv.current=null,n===null||n.return===null){Jn=1,pd=e,$n=null;break}e:{var s=t,a=n.return,o=n,l=e;if(e=fr,o.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,d=o,p=d.tag;if(!(d.mode&1)&&(p===0||p===11||p===15)){var m=d.alternate;m?(d.updateQueue=m.updateQueue,d.memoizedState=m.memoizedState,d.lanes=m.lanes):(d.updateQueue=null,d.memoizedState=null)}var g=O5(a);if(g!==null){g.flags&=-257,M5(g,a,o,s,e),g.mode&1&&F5(s,u,e),e=g,l=u;var x=e.updateQueue;if(x===null){var b=new Set;b.add(l),e.updateQueue=b}else x.add(l);break e}else{if(!(e&1)){F5(s,u,e),t2();break e}l=Error(qe(426))}}else if(gn&&o.mode&1){var k=O5(a);if(k!==null){!(k.flags&65536)&&(k.flags|=256),M5(k,a,o,s,e),Dv(Su(l,o));break e}}s=l=Su(l,o),Jn!==4&&(Jn=2),qh===null?qh=[s]:qh.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var w=zx(s,l,e);C5(s,w);break e;case 1:o=l;var N=s.type,j=s.stateNode;if(!(s.flags&128)&&(typeof N.getDerivedStateFromError=="function"||j!==null&&typeof j.componentDidCatch=="function"&&(Vo===null||!Vo.has(j)))){s.flags|=65536,e&=-e,s.lanes|=e;var O=$x(s,o,e);C5(s,O);break e}}s=s.return}while(s!==null)}u4(n)}catch(Q){e=Q,$n===n&&n!==null&&($n=n=n.return);continue}break}while(!0)}function l4(){var t=Vp.current;return Vp.current=Mp,t===null?Mp:t}function t2(){(Jn===0||Jn===3||Jn===2)&&(Jn=4),ir===null||!(Hl&268435455)&&!(km&268435455)||So(ir,fr)}function Kp(t,e){var n=Vt;Vt|=2;var r=l4();(ir!==t||fr!==e)&&(wa=null,Ol(t,e));do try{i6();break}catch(i){o4(t,i)}while(!0);if(Ov(),Vt=n,Vp.current=r,$n!==null)throw Error(qe(261));return ir=null,fr=0,Jn}function i6(){for(;$n!==null;)c4($n)}function s6(){for(;$n!==null&&!CE();)c4($n)}function c4(t){var e=d4(t.alternate,t,_i);t.memoizedProps=t.pendingProps,e===null?u4(t):$n=e,Yv.current=null}function u4(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Xk(n,e),n!==null){n.flags&=32767,$n=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Jn=6,$n=null;return}}else if(n=Jk(n,e,_i),n!==null){$n=n;return}if(e=e.sibling,e!==null){$n=e;return}$n=e=t}while(e!==null);Jn===0&&(Jn=5)}function kl(t,e,n){var r=Qt,i=Bi.transition;try{Bi.transition=null,Qt=1,a6(t,e,n,r)}finally{Bi.transition=i,Qt=r}return null}function a6(t,e,n,r){do cu();while(Co!==null);if(Vt&6)throw Error(qe(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(qe(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(UE(t,s),t===ir&&($n=ir=null,fr=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Lf||(Lf=!0,f4(Sp,function(){return cu(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Bi.transition,Bi.transition=null;var a=Qt;Qt=1;var o=Vt;Vt|=4,Yv.current=null,e6(t,n),i4(n,t),Ek(X1),Ap=!!J1,X1=J1=null,t.current=n,t6(n),PE(),Vt=o,Qt=a,Bi.transition=s}else t.current=n;if(Lf&&(Lf=!1,Co=t,Bp=i),s=t.pendingLanes,s===0&&(Vo=null),RE(n.stateNode),ui(t,Dn()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Up)throw Up=!1,t=y0,y0=null,t;return Bp&1&&t.tag!==0&&cu(),s=t.pendingLanes,s&1?t===w0?zh++:(zh=0,w0=t):zh=0,rl(),null}function cu(){if(Co!==null){var t=zb(Bp),e=Bi.transition,n=Qt;try{if(Bi.transition=null,Qt=16>t?16:t,Co===null)var r=!1;else{if(t=Co,Co=null,Bp=0,Vt&6)throw Error(qe(331));var i=Vt;for(Vt|=4,rt=t.current;rt!==null;){var s=rt,a=s.child;if(rt.flags&16){var o=s.deletions;if(o!==null){for(var l=0;l<o.length;l++){var u=o[l];for(rt=u;rt!==null;){var d=rt;switch(d.tag){case 0:case 11:case 15:Kh(8,d,s)}var p=d.child;if(p!==null)p.return=d,rt=p;else for(;rt!==null;){d=rt;var m=d.sibling,g=d.return;if(t4(d),d===u){rt=null;break}if(m!==null){m.return=g,rt=m;break}rt=g}}}var x=s.alternate;if(x!==null){var b=x.child;if(b!==null){x.child=null;do{var k=b.sibling;b.sibling=null,b=k}while(b!==null)}}rt=s}}if(s.subtreeFlags&2064&&a!==null)a.return=s,rt=a;else e:for(;rt!==null;){if(s=rt,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Kh(9,s,s.return)}var w=s.sibling;if(w!==null){w.return=s.return,rt=w;break e}rt=s.return}}var N=t.current;for(rt=N;rt!==null;){a=rt;var j=a.child;if(a.subtreeFlags&2064&&j!==null)j.return=a,rt=j;else e:for(a=N;rt!==null;){if(o=rt,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:Em(9,o)}}catch(Q){In(o,o.return,Q)}if(o===a){rt=null;break e}var O=o.sibling;if(O!==null){O.return=o.return,rt=O;break e}rt=o.return}}if(Vt=i,rl(),Vs&&typeof Vs.onPostCommitFiberRoot=="function")try{Vs.onPostCommitFiberRoot(ym,t)}catch{}r=!0}return r}finally{Qt=n,Bi.transition=e}}return!1}function J5(t,e,n){e=Su(n,e),e=zx(t,e,1),t=Mo(t,e,1),e=qr(),t!==null&&(Id(t,1,e),ui(t,e))}function In(t,e,n){if(t.tag===3)J5(t,t,n);else for(;e!==null;){if(e.tag===3){J5(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Vo===null||!Vo.has(r))){t=Su(n,t),t=$x(e,t,1),e=Mo(e,t,1),t=qr(),e!==null&&(Id(e,1,t),ui(e,t));break}}e=e.return}}function o6(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=qr(),t.pingedLanes|=t.suspendedLanes&n,ir===t&&(fr&n)===n&&(Jn===4||Jn===3&&(fr&130023424)===fr&&500>Dn()-Xv?Ol(t,0):Jv|=n),ui(t,e)}function h4(t,e){e===0&&(t.mode&1?(e=Sf,Sf<<=1,!(Sf&130023424)&&(Sf=4194304)):e=1);var n=qr();t=ja(t,e),t!==null&&(Id(t,e,n),ui(t,n))}function l6(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),h4(t,n)}function c6(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(qe(314))}r!==null&&r.delete(e),h4(t,n)}var d4;d4=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||li.current)oi=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return oi=!1,Yk(t,e,n);oi=!!(t.flags&131072)}else oi=!1,gn&&e.flags&1048576&&gx(e,jp,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;ep(t,e),t=e.pendingProps;var i=wu(e,jr.current);lu(e,n),i=$v(null,e,r,t,i,n);var s=Hv();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,ci(r)?(s=!0,Cp(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Uv(e),i.updater=Am,e.stateNode=i,i._reactInternals=e,o0(e,r,t,n),e=u0(null,e,r,!0,s,n)):(e.tag=0,gn&&s&&Lv(e),Kr(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(ep(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=h6(r),t=os(r,t),i){case 0:e=c0(null,e,r,t,n);break e;case 1:e=B5(null,e,r,t,n);break e;case 11:e=V5(null,e,r,t,n);break e;case 14:e=U5(null,e,r,os(r.type,t),n);break e}throw Error(qe(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:os(r,i),c0(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:os(r,i),B5(t,e,r,i,n);case 3:e:{if(Qx(e),t===null)throw Error(qe(387));r=e.pendingProps,s=e.memoizedState,i=s.element,xx(t,e),Dp(e,r,null,n);var a=e.memoizedState;if(r=a.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Su(Error(qe(423)),e),e=K5(t,e,r,n,i);break e}else if(r!==i){i=Su(Error(qe(424)),e),e=K5(t,e,r,n,i);break e}else for(bi=Oo(e.stateNode.containerInfo.firstChild),Ai=e,gn=!0,us=null,n=_x(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(_u(),r===i){e=La(t,e,n);break e}Kr(t,e,r,n)}e=e.child}return e;case 5:return Sx(e),t===null&&i0(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,a=i.children,Z1(r,i)?a=null:s!==null&&Z1(r,s)&&(e.flags|=32),Gx(t,e),Kr(t,e,a,n),e.child;case 6:return t===null&&i0(e),null;case 13:return Yx(t,e,n);case 4:return Bv(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=bu(e,null,r,n):Kr(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:os(r,i),V5(t,e,r,i,n);case 7:return Kr(t,e,e.pendingProps,n),e.child;case 8:return Kr(t,e,e.pendingProps.children,n),e.child;case 12:return Kr(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,a=i.value,sn(Lp,r._currentValue),r._currentValue=a,s!==null)if(fs(s.value,a)){if(s.children===i.children&&!li.current){e=La(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var o=s.dependencies;if(o!==null){a=s.child;for(var l=o.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=ka(-1,n&-n),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?l.next=l:(l.next=d.next,d.next=l),u.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),s0(s.return,n,e),o.lanes|=n;break}l=l.next}}else if(s.tag===10)a=s.type===e.type?null:s.child;else if(s.tag===18){if(a=s.return,a===null)throw Error(qe(341));a.lanes|=n,o=a.alternate,o!==null&&(o.lanes|=n),s0(a,n,e),a=s.sibling}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===e){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}Kr(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,lu(e,n),i=qi(i),r=r(i),e.flags|=1,Kr(t,e,r,n),e.child;case 14:return r=e.type,i=os(r,e.pendingProps),i=os(r.type,i),U5(t,e,r,i,n);case 15:return Hx(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:os(r,i),ep(t,e),e.tag=1,ci(r)?(t=!0,Cp(e)):t=!1,lu(e,n),qx(e,r,i),o0(e,r,i,n),u0(null,e,r,!0,t,n);case 19:return Jx(t,e,n);case 22:return Wx(t,e,n)}throw Error(qe(156,e.tag))};function f4(t,e){return Ub(t,e)}function u6(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ui(t,e,n,r){return new u6(t,e,n,r)}function n2(t){return t=t.prototype,!(!t||!t.isReactComponent)}function h6(t){if(typeof t=="function")return n2(t)?1:0;if(t!=null){if(t=t.$$typeof,t===bv)return 11;if(t===xv)return 14}return 2}function Bo(t,e){var n=t.alternate;return n===null?(n=Ui(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function rp(t,e,n,r,i,s){var a=2;if(r=t,typeof t=="function")n2(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case zc:return Ml(n.children,i,s,e);case _v:a=8,i|=8;break;case P1:return t=Ui(12,n,e,i|2),t.elementType=P1,t.lanes=s,t;case j1:return t=Ui(13,n,e,i),t.elementType=j1,t.lanes=s,t;case L1:return t=Ui(19,n,e,i),t.elementType=L1,t.lanes=s,t;case Sb:return Tm(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case bb:a=10;break e;case xb:a=9;break e;case bv:a=11;break e;case xv:a=14;break e;case _o:a=16,r=null;break e}throw Error(qe(130,t==null?t:typeof t,""))}return e=Ui(a,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Ml(t,e,n,r){return t=Ui(7,t,r,e),t.lanes=n,t}function Tm(t,e,n,r){return t=Ui(22,t,r,e),t.elementType=Sb,t.lanes=n,t.stateNode={isHidden:!1},t}function Zg(t,e,n){return t=Ui(6,t,null,e),t.lanes=n,t}function e1(t,e,n){return e=Ui(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function d6(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Rg(0),this.expirationTimes=Rg(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Rg(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function r2(t,e,n,r,i,s,a,o,l){return t=new d6(t,e,n,o,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Ui(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Uv(s),t}function f6(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:qc,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function p4(t){if(!t)return Go;t=t._reactInternals;e:{if(tc(t)!==t||t.tag!==1)throw Error(qe(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(ci(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(qe(171))}if(t.tag===1){var n=t.type;if(ci(n))return px(t,n,e)}return e}function m4(t,e,n,r,i,s,a,o,l){return t=r2(n,r,!0,t,i,s,a,o,l),t.context=p4(null),n=t.current,r=qr(),i=Uo(n),s=ka(r,i),s.callback=e??null,Mo(n,s,i),t.current.lanes=i,Id(t,i,r),ui(t,r),t}function Im(t,e,n,r){var i=e.current,s=qr(),a=Uo(i);return n=p4(n),e.context===null?e.context=n:e.pendingContext=n,e=ka(s,a),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Mo(i,e,a),t!==null&&(ds(t,i,a,s),Jf(t,i,a)),a}function qp(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function X5(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function i2(t,e){X5(t,e),(t=t.alternate)&&X5(t,e)}function p6(){return null}var g4=typeof reportError=="function"?reportError:function(t){console.error(t)};function s2(t){this._internalRoot=t}Cm.prototype.render=s2.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(qe(409));Im(t,e,null,null)};Cm.prototype.unmount=s2.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Wl(function(){Im(null,t,null,null)}),e[Pa]=null}};function Cm(t){this._internalRoot=t}Cm.prototype.unstable_scheduleHydration=function(t){if(t){var e=Wb();t={blockedOn:null,target:t,priority:e};for(var n=0;n<xo.length&&e!==0&&e<xo[n].priority;n++);xo.splice(n,0,t),n===0&&Qb(t)}};function a2(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Pm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Z5(){}function m6(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=qp(a);s.call(u)}}var a=m4(e,r,t,0,null,!1,!1,"",Z5);return t._reactRootContainer=a,t[Pa]=a.current,ad(t.nodeType===8?t.parentNode:t),Wl(),a}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var o=r;r=function(){var u=qp(l);o.call(u)}}var l=r2(t,0,!1,null,null,!1,!1,"",Z5);return t._reactRootContainer=l,t[Pa]=l.current,ad(t.nodeType===8?t.parentNode:t),Wl(function(){Im(e,l,n,r)}),l}function jm(t,e,n,r,i){var s=n._reactRootContainer;if(s){var a=s;if(typeof i=="function"){var o=i;i=function(){var l=qp(a);o.call(l)}}Im(e,a,t,i)}else a=m6(n,e,t,i,r);return qp(a)}$b=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Th(e.pendingLanes);n!==0&&(Av(e,n|1),ui(e,Dn()),!(Vt&6)&&(Nu=Dn()+500,rl()))}break;case 13:Wl(function(){var r=ja(t,1);if(r!==null){var i=qr();ds(r,t,1,i)}}),i2(t,1)}};Ev=function(t){if(t.tag===13){var e=ja(t,134217728);if(e!==null){var n=qr();ds(e,t,134217728,n)}i2(t,134217728)}};Hb=function(t){if(t.tag===13){var e=Uo(t),n=ja(t,e);if(n!==null){var r=qr();ds(n,t,e,r)}i2(t,e)}};Wb=function(){return Qt};Gb=function(t,e){var n=Qt;try{return Qt=t,e()}finally{Qt=n}};q1=function(t,e,n){switch(e){case"input":if(F1(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=xm(r);if(!i)throw Error(qe(90));Ab(r),F1(r,i)}}}break;case"textarea":kb(t,n);break;case"select":e=n.value,e!=null&&iu(t,!!n.multiple,e,!1)}};Rb=Zv;Db=Wl;var g6={usingClientEntryPoint:!1,Events:[Pd,Gc,xm,jb,Lb,Zv]},_h={findFiberByHostInstance:jl,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},v6={bundleType:_h.bundleType,version:_h.version,rendererPackageName:_h.rendererPackageName,rendererConfig:_h.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ma.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Mb(t),t===null?null:t.stateNode},findFiberByHostInstance:_h.findFiberByHostInstance||p6,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Rf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Rf.isDisabled&&Rf.supportsFiber)try{ym=Rf.inject(v6),Vs=Rf}catch{}}ki.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=g6;ki.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!a2(e))throw Error(qe(200));return f6(t,e,null,n)};ki.createRoot=function(t,e){if(!a2(t))throw Error(qe(299));var n=!1,r="",i=g4;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=r2(t,1,!1,null,null,n,!1,r,i),t[Pa]=e.current,ad(t.nodeType===8?t.parentNode:t),new s2(e)};ki.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(qe(188)):(t=Object.keys(t).join(","),Error(qe(268,t)));return t=Mb(e),t=t===null?null:t.stateNode,t};ki.flushSync=function(t){return Wl(t)};ki.hydrate=function(t,e,n){if(!Pm(e))throw Error(qe(200));return jm(null,t,e,!0,n)};ki.hydrateRoot=function(t,e,n){if(!a2(t))throw Error(qe(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",a=g4;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=m4(e,null,t,1,n??null,i,!1,s,a),t[Pa]=e.current,ad(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Cm(e)};ki.render=function(t,e,n){if(!Pm(e))throw Error(qe(200));return jm(null,t,e,!1,n)};ki.unmountComponentAtNode=function(t){if(!Pm(t))throw Error(qe(40));return t._reactRootContainer?(Wl(function(){jm(null,null,t,!1,function(){t._reactRootContainer=null,t[Pa]=null})}),!0):!1};ki.unstable_batchedUpdates=Zv;ki.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Pm(n))throw Error(qe(200));if(t==null||t._reactInternals===void 0)throw Error(qe(38));return jm(t,e,n,!1,r)};ki.version="18.3.1-next-f1338f8080-20240426";function v4(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(v4)}catch(t){console.error(t)}}v4(),vb.exports=ki;var y6=vb.exports,ew=y6;I1.createRoot=ew.createRoot,I1.hydrateRoot=ew.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function md(){return md=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},md.apply(this,arguments)}var Po;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Po||(Po={}));const tw="popstate";function w6(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:a,hash:o}=r.location;return x0("",{pathname:s,search:a,hash:o},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:zp(i)}return b6(e,n,null,t)}function wn(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function y4(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function _6(){return Math.random().toString(36).substr(2,8)}function nw(t,e){return{usr:t.state,key:t.key,idx:e}}function x0(t,e,n,r){return n===void 0&&(n=null),md({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Ou(e):e,{state:n,key:e&&e.key||r||_6()})}function zp(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Ou(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function b6(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,a=i.history,o=Po.Pop,l=null,u=d();u==null&&(u=0,a.replaceState(md({},a.state,{idx:u}),""));function d(){return(a.state||{idx:null}).idx}function p(){o=Po.Pop;let k=d(),w=k==null?null:k-u;u=k,l&&l({action:o,location:b.location,delta:w})}function m(k,w){o=Po.Push;let N=x0(b.location,k,w);u=d()+1;let j=nw(N,u),O=b.createHref(N);try{a.pushState(j,"",O)}catch(Q){if(Q instanceof DOMException&&Q.name==="DataCloneError")throw Q;i.location.assign(O)}s&&l&&l({action:o,location:b.location,delta:1})}function g(k,w){o=Po.Replace;let N=x0(b.location,k,w);u=d();let j=nw(N,u),O=b.createHref(N);a.replaceState(j,"",O),s&&l&&l({action:o,location:b.location,delta:0})}function x(k){let w=i.location.origin!=="null"?i.location.origin:i.location.href,N=typeof k=="string"?k:zp(k);return N=N.replace(/ $/,"%20"),wn(w,"No window.location.(origin|href) available to create URL for href: "+N),new URL(N,w)}let b={get action(){return o},get location(){return t(i,a)},listen(k){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(tw,p),l=k,()=>{i.removeEventListener(tw,p),l=null}},createHref(k){return e(i,k)},createURL:x,encodeLocation(k){let w=x(k);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:m,replace:g,go(k){return a.go(k)}};return b}var rw;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(rw||(rw={}));function x6(t,e,n){return n===void 0&&(n="/"),S6(t,e,n)}function S6(t,e,n,r){let i=typeof e=="string"?Ou(e):e,s=Au(i.pathname||"/",n);if(s==null)return null;let a=w4(t);N6(a);let o=null;for(let l=0;o==null&&l<a.length;++l){let u=D6(s);o=L6(a[l],u)}return o}function w4(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,a,o)=>{let l={relativePath:o===void 0?s.path||"":o,caseSensitive:s.caseSensitive===!0,childrenIndex:a,route:s};l.relativePath.startsWith("/")&&(wn(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let u=Ko([r,l.relativePath]),d=n.concat(l);s.children&&s.children.length>0&&(wn(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),w4(s.children,e,d,u)),!(s.path==null&&!s.index)&&e.push({path:u,score:P6(u,s.index),routesMeta:d})};return t.forEach((s,a)=>{var o;if(s.path===""||!((o=s.path)!=null&&o.includes("?")))i(s,a);else for(let l of _4(s.path))i(s,a,l)}),e}function _4(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let a=_4(r.join("/")),o=[];return o.push(...a.map(l=>l===""?s:[s,l].join("/"))),i&&o.push(...a),o.map(l=>t.startsWith("/")&&l===""?"/":l)}function N6(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:j6(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const A6=/^:[\w-]+$/,E6=3,k6=2,T6=1,I6=10,C6=-2,iw=t=>t==="*";function P6(t,e){let n=t.split("/"),r=n.length;return n.some(iw)&&(r+=C6),e&&(r+=k6),n.filter(i=>!iw(i)).reduce((i,s)=>i+(A6.test(s)?E6:s===""?T6:I6),r)}function j6(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function L6(t,e,n){let{routesMeta:r}=t,i={},s="/",a=[];for(let o=0;o<r.length;++o){let l=r[o],u=o===r.length-1,d=s==="/"?e:e.slice(s.length)||"/",p=S0({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},d),m=l.route;if(!p)return null;Object.assign(i,p.params),a.push({params:i,pathname:Ko([s,p.pathname]),pathnameBase:V6(Ko([s,p.pathnameBase])),route:m}),p.pathnameBase!=="/"&&(s=Ko([s,p.pathnameBase]))}return a}function S0(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=R6(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],a=s.replace(/(.)\/+$/,"$1"),o=i.slice(1);return{params:r.reduce((u,d,p)=>{let{paramName:m,isOptional:g}=d;if(m==="*"){let b=o[p]||"";a=s.slice(0,s.length-b.length).replace(/(.)\/+$/,"$1")}const x=o[p];return g&&!x?u[m]=void 0:u[m]=(x||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:a,pattern:t}}function R6(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),y4(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,o,l)=>(r.push({paramName:o,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function D6(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return y4(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Au(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function F6(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?Ou(t):t;return{pathname:n?n.startsWith("/")?n:O6(n,e):e,search:U6(r),hash:B6(i)}}function O6(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function t1(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function M6(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function o2(t,e){let n=M6(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function l2(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=Ou(t):(i=md({},t),wn(!i.pathname||!i.pathname.includes("?"),t1("?","pathname","search",i)),wn(!i.pathname||!i.pathname.includes("#"),t1("#","pathname","hash",i)),wn(!i.search||!i.search.includes("#"),t1("#","search","hash",i)));let s=t===""||i.pathname==="",a=s?"/":i.pathname,o;if(a==null)o=n;else{let p=e.length-1;if(!r&&a.startsWith("..")){let m=a.split("/");for(;m[0]==="..";)m.shift(),p-=1;i.pathname=m.join("/")}o=p>=0?e[p]:"/"}let l=F6(i,o),u=a&&a!=="/"&&a.endsWith("/"),d=(s||a===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(u||d)&&(l.pathname+="/"),l}const Ko=t=>t.join("/").replace(/\/\/+/g,"/"),V6=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),U6=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,B6=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function K6(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const b4=["post","put","patch","delete"];new Set(b4);const q6=["get",...b4];new Set(q6);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function gd(){return gd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},gd.apply(this,arguments)}const Lm=ie.createContext(null),x4=ie.createContext(null),Va=ie.createContext(null),Rm=ie.createContext(null),Qs=ie.createContext({outlet:null,matches:[],isDataRoute:!1}),S4=ie.createContext(null);function z6(t,e){let{relative:n}=e===void 0?{}:e;Mu()||wn(!1);let{basename:r,navigator:i}=ie.useContext(Va),{hash:s,pathname:a,search:o}=Dm(t,{relative:n}),l=a;return r!=="/"&&(l=a==="/"?r:Ko([r,a])),i.createHref({pathname:l,search:o,hash:s})}function Mu(){return ie.useContext(Rm)!=null}function Vu(){return Mu()||wn(!1),ie.useContext(Rm).location}function N4(t){ie.useContext(Va).static||ie.useLayoutEffect(t)}function Uu(){let{isDataRoute:t}=ie.useContext(Qs);return t?aT():$6()}function $6(){Mu()||wn(!1);let t=ie.useContext(Lm),{basename:e,future:n,navigator:r}=ie.useContext(Va),{matches:i}=ie.useContext(Qs),{pathname:s}=Vu(),a=JSON.stringify(o2(i,n.v7_relativeSplatPath)),o=ie.useRef(!1);return N4(()=>{o.current=!0}),ie.useCallback(function(u,d){if(d===void 0&&(d={}),!o.current)return;if(typeof u=="number"){r.go(u);return}let p=l2(u,JSON.parse(a),s,d.relative==="path");t==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:Ko([e,p.pathname])),(d.replace?r.replace:r.push)(p,d.state,d)},[e,r,a,s,t])}const H6=ie.createContext(null);function W6(t){let e=ie.useContext(Qs).outlet;return e&&ie.createElement(H6.Provider,{value:t},e)}function G6(){let{matches:t}=ie.useContext(Qs),e=t[t.length-1];return e?e.params:{}}function Dm(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=ie.useContext(Va),{matches:i}=ie.useContext(Qs),{pathname:s}=Vu(),a=JSON.stringify(o2(i,r.v7_relativeSplatPath));return ie.useMemo(()=>l2(t,JSON.parse(a),s,n==="path"),[t,a,s,n])}function Q6(t,e){return Y6(t,e)}function Y6(t,e,n,r){Mu()||wn(!1);let{navigator:i}=ie.useContext(Va),{matches:s}=ie.useContext(Qs),a=s[s.length-1],o=a?a.params:{};a&&a.pathname;let l=a?a.pathnameBase:"/";a&&a.route;let u=Vu(),d;if(e){var p;let k=typeof e=="string"?Ou(e):e;l==="/"||(p=k.pathname)!=null&&p.startsWith(l)||wn(!1),d=k}else d=u;let m=d.pathname||"/",g=m;if(l!=="/"){let k=l.replace(/^\//,"").split("/");g="/"+m.replace(/^\//,"").split("/").slice(k.length).join("/")}let x=x6(t,{pathname:g}),b=tT(x&&x.map(k=>Object.assign({},k,{params:Object.assign({},o,k.params),pathname:Ko([l,i.encodeLocation?i.encodeLocation(k.pathname).pathname:k.pathname]),pathnameBase:k.pathnameBase==="/"?l:Ko([l,i.encodeLocation?i.encodeLocation(k.pathnameBase).pathname:k.pathnameBase])})),s,n,r);return e&&b?ie.createElement(Rm.Provider,{value:{location:gd({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:Po.Pop}},b):b}function J6(){let t=sT(),e=K6(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return ie.createElement(ie.Fragment,null,ie.createElement("h2",null,"Unexpected Application Error!"),ie.createElement("h3",{style:{fontStyle:"italic"}},e),n?ie.createElement("pre",{style:i},n):null,null)}const X6=ie.createElement(J6,null);class Z6 extends ie.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?ie.createElement(Qs.Provider,{value:this.props.routeContext},ie.createElement(S4.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function eT(t){let{routeContext:e,match:n,children:r}=t,i=ie.useContext(Lm);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),ie.createElement(Qs.Provider,{value:e},r)}function tT(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let a=t,o=(i=n)==null?void 0:i.errors;if(o!=null){let d=a.findIndex(p=>p.route.id&&(o==null?void 0:o[p.route.id])!==void 0);d>=0||wn(!1),a=a.slice(0,Math.min(a.length,d+1))}let l=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<a.length;d++){let p=a[d];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(u=d),p.route.id){let{loaderData:m,errors:g}=n,x=p.route.loader&&m[p.route.id]===void 0&&(!g||g[p.route.id]===void 0);if(p.route.lazy||x){l=!0,u>=0?a=a.slice(0,u+1):a=[a[0]];break}}}return a.reduceRight((d,p,m)=>{let g,x=!1,b=null,k=null;n&&(g=o&&p.route.id?o[p.route.id]:void 0,b=p.route.errorElement||X6,l&&(u<0&&m===0?(oT("route-fallback"),x=!0,k=null):u===m&&(x=!0,k=p.route.hydrateFallbackElement||null)));let w=e.concat(a.slice(0,m+1)),N=()=>{let j;return g?j=b:x?j=k:p.route.Component?j=ie.createElement(p.route.Component,null):p.route.element?j=p.route.element:j=d,ie.createElement(eT,{match:p,routeContext:{outlet:d,matches:w,isDataRoute:n!=null},children:j})};return n&&(p.route.ErrorBoundary||p.route.errorElement||m===0)?ie.createElement(Z6,{location:n.location,revalidation:n.revalidation,component:b,error:g,children:N(),routeContext:{outlet:null,matches:w,isDataRoute:!0}}):N()},null)}var A4=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(A4||{}),E4=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(E4||{});function nT(t){let e=ie.useContext(Lm);return e||wn(!1),e}function rT(t){let e=ie.useContext(x4);return e||wn(!1),e}function iT(t){let e=ie.useContext(Qs);return e||wn(!1),e}function k4(t){let e=iT(),n=e.matches[e.matches.length-1];return n.route.id||wn(!1),n.route.id}function sT(){var t;let e=ie.useContext(S4),n=rT(),r=k4();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function aT(){let{router:t}=nT(A4.UseNavigateStable),e=k4(E4.UseNavigateStable),n=ie.useRef(!1);return N4(()=>{n.current=!0}),ie.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,gd({fromRouteId:e},s)))},[t,e])}const sw={};function oT(t,e,n){sw[t]||(sw[t]=!0)}function lT(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function N0(t){let{to:e,replace:n,state:r,relative:i}=t;Mu()||wn(!1);let{future:s,static:a}=ie.useContext(Va),{matches:o}=ie.useContext(Qs),{pathname:l}=Vu(),u=Uu(),d=l2(e,o2(o,s.v7_relativeSplatPath),l,i==="path"),p=JSON.stringify(d);return ie.useEffect(()=>u(JSON.parse(p),{replace:n,state:r,relative:i}),[u,p,i,n,r]),null}function cT(t){return W6(t.context)}function ss(t){wn(!1)}function uT(t){let{basename:e="/",children:n=null,location:r,navigationType:i=Po.Pop,navigator:s,static:a=!1,future:o}=t;Mu()&&wn(!1);let l=e.replace(/^\/*/,"/"),u=ie.useMemo(()=>({basename:l,navigator:s,static:a,future:gd({v7_relativeSplatPath:!1},o)}),[l,o,s,a]);typeof r=="string"&&(r=Ou(r));let{pathname:d="/",search:p="",hash:m="",state:g=null,key:x="default"}=r,b=ie.useMemo(()=>{let k=Au(d,l);return k==null?null:{location:{pathname:k,search:p,hash:m,state:g,key:x},navigationType:i}},[l,d,p,m,g,x,i]);return b==null?null:ie.createElement(Va.Provider,{value:u},ie.createElement(Rm.Provider,{children:n,value:b}))}function hT(t){let{children:e,location:n}=t;return Q6(A0(e),n)}new Promise(()=>{});function A0(t,e){e===void 0&&(e=[]);let n=[];return ie.Children.forEach(t,(r,i)=>{if(!ie.isValidElement(r))return;let s=[...e,i];if(r.type===ie.Fragment){n.push.apply(n,A0(r.props.children,s));return}r.type!==ss&&wn(!1),!r.props.index||!r.props.children||wn(!1);let a={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=A0(r.props.children,s)),n.push(a)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function $p(){return $p=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},$p.apply(this,arguments)}function T4(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function dT(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function fT(t,e){return t.button===0&&(!e||e==="_self")&&!dT(t)}const pT=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],mT=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],gT="6";try{window.__reactRouterVersion=gT}catch{}const vT=ie.createContext({isTransitioning:!1}),yT="startTransition",aw=oE[yT];function wT(t){let{basename:e,children:n,future:r,window:i}=t,s=ie.useRef();s.current==null&&(s.current=w6({window:i,v5Compat:!0}));let a=s.current,[o,l]=ie.useState({action:a.action,location:a.location}),{v7_startTransition:u}=r||{},d=ie.useCallback(p=>{u&&aw?aw(()=>l(p)):l(p)},[l,u]);return ie.useLayoutEffect(()=>a.listen(d),[a,d]),ie.useEffect(()=>lT(r),[r]),ie.createElement(uT,{basename:e,children:n,location:o.location,navigationType:o.action,navigator:a,future:r})}const _T=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",bT=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,xT=ie.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:a,state:o,target:l,to:u,preventScrollReset:d,viewTransition:p}=e,m=T4(e,pT),{basename:g}=ie.useContext(Va),x,b=!1;if(typeof u=="string"&&bT.test(u)&&(x=u,_T))try{let j=new URL(window.location.href),O=u.startsWith("//")?new URL(j.protocol+u):new URL(u),Q=Au(O.pathname,g);O.origin===j.origin&&Q!=null?u=Q+O.search+O.hash:b=!0}catch{}let k=z6(u,{relative:i}),w=NT(u,{replace:a,state:o,target:l,preventScrollReset:d,relative:i,viewTransition:p});function N(j){r&&r(j),j.defaultPrevented||w(j)}return ie.createElement("a",$p({},m,{href:x||k,onClick:b||s?r:N,ref:n,target:l}))}),bh=ie.forwardRef(function(e,n){let{"aria-current":r="page",caseSensitive:i=!1,className:s="",end:a=!1,style:o,to:l,viewTransition:u,children:d}=e,p=T4(e,mT),m=Dm(l,{relative:p.relative}),g=Vu(),x=ie.useContext(x4),{navigator:b,basename:k}=ie.useContext(Va),w=x!=null&&AT(m)&&u===!0,N=b.encodeLocation?b.encodeLocation(m).pathname:m.pathname,j=g.pathname,O=x&&x.navigation&&x.navigation.location?x.navigation.location.pathname:null;i||(j=j.toLowerCase(),O=O?O.toLowerCase():null,N=N.toLowerCase()),O&&k&&(O=Au(O,k)||O);const Q=N!=="/"&&N.endsWith("/")?N.length-1:N.length;let B=j===N||!a&&j.startsWith(N)&&j.charAt(Q)==="/",P=O!=null&&(O===N||!a&&O.startsWith(N)&&O.charAt(N.length)==="/"),y={isActive:B,isPending:P,isTransitioning:w},S=B?r:void 0,L;typeof s=="function"?L=s(y):L=[s,B?"active":null,P?"pending":null,w?"transitioning":null].filter(Boolean).join(" ");let A=typeof o=="function"?o(y):o;return ie.createElement(xT,$p({},p,{"aria-current":S,className:L,ref:n,style:A,to:l,viewTransition:u}),typeof d=="function"?d(y):d)});var E0;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(E0||(E0={}));var ow;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(ow||(ow={}));function ST(t){let e=ie.useContext(Lm);return e||wn(!1),e}function NT(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:a,viewTransition:o}=e===void 0?{}:e,l=Uu(),u=Vu(),d=Dm(t,{relative:a});return ie.useCallback(p=>{if(fT(p,n)){p.preventDefault();let m=r!==void 0?r:zp(u)===zp(d);l(t,{replace:m,state:i,preventScrollReset:s,relative:a,viewTransition:o})}},[u,l,d,r,i,n,t,s,a,o])}function AT(t,e){e===void 0&&(e={});let n=ie.useContext(vT);n==null&&wn(!1);let{basename:r}=ST(E0.useViewTransitionState),i=Dm(t,{relative:e.relative});if(!n.isTransitioning)return!1;let s=Au(n.currentLocation.pathname,r)||n.currentLocation.pathname,a=Au(n.nextLocation.pathname,r)||n.nextLocation.pathname;return S0(i.pathname,a)!=null||S0(i.pathname,s)!=null}const I4=ie.createContext(),Gr=()=>{const t=ie.useContext(I4);if(!t)throw new Error("useNotification must be used within NotificationProvider");return t},ET=({children:t})=>{const[e,n]=ie.useState([]),[r,i]=ie.useState(null),[s,a]=ie.useState(null),o=ie.useCallback((k,w="info")=>{const N=Date.now()+Math.random(),j={id:N,message:k,type:w};return n(O=>[...O,j]),setTimeout(()=>{l(N)},4e3),N},[]),l=ie.useCallback(k=>{n(w=>w.filter(N=>N.id!==k))},[]),u=ie.useCallback(k=>o(k,"success"),[o]),d=ie.useCallback(k=>o(k,"error"),[o]),p=ie.useCallback(k=>o(k,"info"),[o]),m=ie.useCallback(k=>o(k,"warning"),[o]),g=ie.useCallback(k=>new Promise(w=>{i({...k,onConfirm:()=>{i(null),w(!0)},onCancel:()=>{i(null),w(!1)}})}),[]),x=ie.useCallback(k=>new Promise(w=>{a({...k,onConfirm:()=>{a(null),w(!0)},onCancel:()=>{a(null),w(!1)}})}),[]),b={toasts:e,showToast:o,removeToast:l,showSuccess:u,showError:d,showInfo:p,showWarning:m,showConfirm:g,confirmDialog:r,showCriticalConfirm:x,criticalConfirmDialog:s};return c.jsx(I4.Provider,{value:b,children:t})},kT=t=>{switch(t){case"success":return"";case"error":return"";case"warning":return"";case"info":default:return""}},TT=t=>{switch(t){case"success":return"toast-success";case"error":return"toast-error";case"warning":return"toast-warning";case"info":default:return"toast-info"}};function IT({toast:t,onRemove:e}){return ie.useEffect(()=>{const n=setTimeout(()=>{e(t.id)},4e3);return()=>clearTimeout(n)},[t.id,e]),c.jsxs("div",{className:`toast ${TT(t.type)}`,children:[c.jsx("div",{className:"toast-icon",children:kT(t.type)}),c.jsx("div",{className:"toast-message",children:t.message}),c.jsx("button",{className:"toast-close",onClick:()=>e(t.id),"aria-label":"Luk notifikation",children:""})]})}function CT(){const{toasts:t,removeToast:e}=Gr();return c.jsx("div",{className:"toast-container",children:t.map(n=>c.jsx(IT,{toast:n,onRemove:e},n.id))})}function PT(){const{confirmDialog:t}=Gr();if(!t)return null;const{title:e="Bekrft handling",message:n,confirmText:r="Bekrft",cancelText:i="Annuller",onConfirm:s,onCancel:a,type:o="danger"}=t;return c.jsx("div",{className:"confirm-overlay",children:c.jsxs("div",{className:"confirm-dialog",children:[c.jsx("div",{className:"confirm-header",children:c.jsx("h3",{children:e})}),c.jsx("div",{className:"confirm-body",children:c.jsx("p",{children:n})}),c.jsxs("div",{className:"confirm-footer",children:[c.jsx("button",{className:"btn-secondary",onClick:a,children:i}),c.jsx("button",{className:o==="danger"?"btn-danger":"btn-primary",onClick:s,children:r})]})]})})}function jT(){const{criticalConfirmDialog:t}=Gr(),[e,n]=ie.useState(""),[r,i]=ie.useState(!1);if(ie.useEffect(()=>{n(""),i(!1)},[t]),!t)return null;const{title:s="Bekrft sletning",message:a,itemName:o,confirmText:l="Slet",cancelText:u="Annuller",onConfirm:d,onCancel:p,warningText:m}=t,g=()=>{e.toLowerCase()==="slet"?(i(!1),d()):i(!0)},x=b=>{b.key==="Enter"&&g()};return c.jsx("div",{className:"confirm-overlay",children:c.jsxs("div",{className:"critical-confirm-dialog",children:[c.jsxs("div",{className:"confirm-header critical-header",children:[c.jsx("div",{className:"critical-icon",children:""}),c.jsx("h3",{children:s})]}),c.jsxs("div",{className:"confirm-body",children:[c.jsx("p",{className:"critical-message",children:a}),o&&c.jsx("div",{className:"item-highlight",children:c.jsx("strong",{children:o})}),m&&c.jsxs("div",{className:"warning-box",children:[c.jsx("span",{className:"warning-icon",children:""}),c.jsx("span",{children:m})]}),c.jsxs("div",{className:"confirmation-input-section",children:[c.jsxs("label",{children:["Skriv ",c.jsx("strong",{children:'"Slet"'})," for at bekrfte:"]}),c.jsx("input",{type:"text",value:e,onChange:b=>{n(b.target.value),i(!1)},onKeyPress:x,placeholder:"Skriv Slet",className:r?"input-error":"",autoFocus:!0}),r&&c.jsx("span",{className:"error-text",children:'Du skal skrive "Slet" for at bekrfte'})]})]}),c.jsxs("div",{className:"confirm-footer",children:[c.jsx("button",{className:"btn-secondary",onClick:p,children:u}),c.jsx("button",{className:"btn-danger",onClick:g,disabled:!e,children:l})]})]})})}var lw={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C4=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},LT=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],a=t[n++],o=t[n++],l=((i&7)<<18|(s&63)<<12|(a&63)<<6|o&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],a=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|a&63)}}return e.join("")},P4={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],a=i+1<t.length,o=a?t[i+1]:0,l=i+2<t.length,u=l?t[i+2]:0,d=s>>2,p=(s&3)<<4|o>>4;let m=(o&15)<<2|u>>6,g=u&63;l||(g=64,a||(m=64)),r.push(n[d],n[p],n[m],n[g])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(C4(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):LT(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],o=i<t.length?n[t.charAt(i)]:0;++i;const u=i<t.length?n[t.charAt(i)]:64;++i;const p=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||o==null||u==null||p==null)throw new RT;const m=s<<2|o>>4;if(r.push(m),u!==64){const g=o<<4&240|u>>2;if(r.push(g),p!==64){const x=u<<6&192|p;r.push(x)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class RT extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const DT=function(t){const e=C4(t);return P4.encodeByteArray(e,!0)},Hp=function(t){return DT(t).replace(/\./g,"")},j4=function(t){try{return P4.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OT=()=>FT().__FIREBASE_DEFAULTS__,MT=()=>{if(typeof process>"u"||typeof lw>"u")return;const t=lw.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},VT=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&j4(t[1]);return e&&JSON.parse(e)},Fm=()=>{try{return OT()||MT()||VT()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},L4=t=>{var e,n;return(n=(e=Fm())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},R4=t=>{const e=L4(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},D4=()=>{var t;return(t=Fm())===null||t===void 0?void 0:t.config},F4=t=>{var e;return(e=Fm())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UT{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O4(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Hp(JSON.stringify(n)),Hp(JSON.stringify(a)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function BT(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Lr())}function KT(){var t;const e=(t=Fm())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function qT(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function zT(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function $T(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function HT(){const t=Lr();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function WT(){return!KT()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function GT(){try{return typeof indexedDB=="object"}catch{return!1}}function QT(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YT="FirebaseError";class Ys extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=YT,Object.setPrototypeOf(this,Ys.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ld.prototype.create)}}class Ld{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],a=s?JT(s,r):"Error",o=`${this.serviceName}: ${a} (${i}).`;return new Ys(i,o,r)}}function JT(t,e){return t.replace(XT,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const XT=/\{\$([^}]+)}/g;function ZT(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Wp(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],a=e[i];if(cw(s)&&cw(a)){if(!Wp(s,a))return!1}else if(s!==a)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function cw(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rd(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Ch(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function Ph(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function eI(t,e){const n=new tI(t,e);return n.subscribe.bind(n)}class tI{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");nI(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=n1),i.error===void 0&&(i.error=n1),i.complete===void 0&&(i.complete=n1);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function nI(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function n1(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bn(t){return t&&t._delegate?t._delegate:t}class Qo{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tl="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rI{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new UT;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(sI(e))try{this.getOrInitializeService({instanceIdentifier:Tl})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Tl){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Tl){return this.instances.has(e)}getOptions(e=Tl){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,a]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(s);r===o&&a.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const a=this.instances.get(i);return a&&e(a,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:iI(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Tl){return this.component?this.component.multipleInstances?e:Tl:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function iI(t){return t===Tl?void 0:t}function sI(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aI{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new rI(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ft;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ft||(Ft={}));const oI={debug:Ft.DEBUG,verbose:Ft.VERBOSE,info:Ft.INFO,warn:Ft.WARN,error:Ft.ERROR,silent:Ft.SILENT},lI=Ft.INFO,cI={[Ft.DEBUG]:"log",[Ft.VERBOSE]:"log",[Ft.INFO]:"info",[Ft.WARN]:"warn",[Ft.ERROR]:"error"},uI=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=cI[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class c2{constructor(e){this.name=e,this._logLevel=lI,this._logHandler=uI,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ft))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?oI[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ft.DEBUG,...e),this._logHandler(this,Ft.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ft.VERBOSE,...e),this._logHandler(this,Ft.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ft.INFO,...e),this._logHandler(this,Ft.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ft.WARN,...e),this._logHandler(this,Ft.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ft.ERROR,...e),this._logHandler(this,Ft.ERROR,...e)}}const hI=(t,e)=>e.some(n=>t instanceof n);let uw,hw;function dI(){return uw||(uw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function fI(){return hw||(hw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const M4=new WeakMap,k0=new WeakMap,V4=new WeakMap,r1=new WeakMap,u2=new WeakMap;function pI(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",a)},s=()=>{n(qo(t.result)),i()},a=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&M4.set(n,t)}).catch(()=>{}),u2.set(e,t),e}function mI(t){if(k0.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",a),t.removeEventListener("abort",a)},s=()=>{n(),i()},a=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",a),t.addEventListener("abort",a)});k0.set(t,e)}let T0={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return k0.get(t);if(e==="objectStoreNames")return t.objectStoreNames||V4.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return qo(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function gI(t){T0=t(T0)}function vI(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(i1(this),e,...n);return V4.set(r,e.sort?e.sort():[e]),qo(r)}:fI().includes(t)?function(...e){return t.apply(i1(this),e),qo(M4.get(this))}:function(...e){return qo(t.apply(i1(this),e))}}function yI(t){return typeof t=="function"?vI(t):(t instanceof IDBTransaction&&mI(t),hI(t,dI())?new Proxy(t,T0):t)}function qo(t){if(t instanceof IDBRequest)return pI(t);if(r1.has(t))return r1.get(t);const e=yI(t);return e!==t&&(r1.set(t,e),u2.set(e,t)),e}const i1=t=>u2.get(t);function wI(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const a=indexedDB.open(t,e),o=qo(a);return r&&a.addEventListener("upgradeneeded",l=>{r(qo(a.result),l.oldVersion,l.newVersion,qo(a.transaction),l)}),n&&a.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),o.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),o}const _I=["get","getKey","getAll","getAllKeys","count"],bI=["put","add","delete","clear"],s1=new Map;function dw(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(s1.get(e))return s1.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=bI.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||_I.includes(n)))return;const s=async function(a,...o){const l=this.transaction(a,i?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(o.shift())),(await Promise.all([u[n](...o),i&&l.done]))[0]};return s1.set(e,s),s}gI(t=>({...t,get:(e,n,r)=>dw(e,n)||t.get(e,n,r),has:(e,n)=>!!dw(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xI{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(SI(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function SI(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const I0="@firebase/app",fw="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ra=new c2("@firebase/app"),NI="@firebase/app-compat",AI="@firebase/analytics-compat",EI="@firebase/analytics",kI="@firebase/app-check-compat",TI="@firebase/app-check",II="@firebase/auth",CI="@firebase/auth-compat",PI="@firebase/database",jI="@firebase/data-connect",LI="@firebase/database-compat",RI="@firebase/functions",DI="@firebase/functions-compat",FI="@firebase/installations",OI="@firebase/installations-compat",MI="@firebase/messaging",VI="@firebase/messaging-compat",UI="@firebase/performance",BI="@firebase/performance-compat",KI="@firebase/remote-config",qI="@firebase/remote-config-compat",zI="@firebase/storage",$I="@firebase/storage-compat",HI="@firebase/firestore",WI="@firebase/vertexai-preview",GI="@firebase/firestore-compat",QI="firebase",YI="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C0="[DEFAULT]",JI={[I0]:"fire-core",[NI]:"fire-core-compat",[EI]:"fire-analytics",[AI]:"fire-analytics-compat",[TI]:"fire-app-check",[kI]:"fire-app-check-compat",[II]:"fire-auth",[CI]:"fire-auth-compat",[PI]:"fire-rtdb",[jI]:"fire-data-connect",[LI]:"fire-rtdb-compat",[RI]:"fire-fn",[DI]:"fire-fn-compat",[FI]:"fire-iid",[OI]:"fire-iid-compat",[MI]:"fire-fcm",[VI]:"fire-fcm-compat",[UI]:"fire-perf",[BI]:"fire-perf-compat",[KI]:"fire-rc",[qI]:"fire-rc-compat",[zI]:"fire-gcs",[$I]:"fire-gcs-compat",[HI]:"fire-fst",[GI]:"fire-fst-compat",[WI]:"fire-vertex","fire-js":"fire-js",[QI]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gp=new Map,XI=new Map,P0=new Map;function pw(t,e){try{t.container.addComponent(e)}catch(n){Ra.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Gl(t){const e=t.name;if(P0.has(e))return Ra.debug(`There were multiple attempts to register component ${e}.`),!1;P0.set(e,t);for(const n of Gp.values())pw(n,t);for(const n of XI.values())pw(n,t);return!0}function Om(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Sa(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},zo=new Ld("app","Firebase",ZI);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eC{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Qo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw zo.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nc=YI;function U4(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:C0,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw zo.create("bad-app-name",{appName:String(i)});if(n||(n=D4()),!n)throw zo.create("no-options");const s=Gp.get(i);if(s){if(Wp(n,s.options)&&Wp(r,s.config))return s;throw zo.create("duplicate-app",{appName:i})}const a=new aI(i);for(const l of P0.values())a.addComponent(l);const o=new eC(n,r,a);return Gp.set(i,o),o}function h2(t=C0){const e=Gp.get(t);if(!e&&t===C0&&D4())return U4();if(!e)throw zo.create("no-app",{appName:t});return e}function Bs(t,e,n){var r;let i=(r=JI[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),a=e.match(/\s|\//);if(s||a){const o=[`Unable to register library "${i}" with version "${e}":`];s&&o.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&a&&o.push("and"),a&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ra.warn(o.join(" "));return}Gl(new Qo(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tC="firebase-heartbeat-database",nC=1,vd="firebase-heartbeat-store";let a1=null;function B4(){return a1||(a1=wI(tC,nC,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(vd)}catch(n){console.warn(n)}}}}).catch(t=>{throw zo.create("idb-open",{originalErrorMessage:t.message})})),a1}async function rC(t){try{const n=(await B4()).transaction(vd),r=await n.objectStore(vd).get(K4(t));return await n.done,r}catch(e){if(e instanceof Ys)Ra.warn(e.message);else{const n=zo.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ra.warn(n.message)}}}async function mw(t,e){try{const r=(await B4()).transaction(vd,"readwrite");await r.objectStore(vd).put(e,K4(t)),await r.done}catch(n){if(n instanceof Ys)Ra.warn(n.message);else{const r=zo.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ra.warn(r.message)}}}function K4(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iC=1024,sC=30*24*60*60*1e3;class aC{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new lC(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=gw();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(a=>a.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(a=>{const o=new Date(a.date).valueOf();return Date.now()-o<=sC}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Ra.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=gw(),{heartbeatsToSend:r,unsentEntries:i}=oC(this._heartbeatsCache.heartbeats),s=Hp(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Ra.warn(n),""}}}function gw(){return new Date().toISOString().substring(0,10)}function oC(t,e=iC){const n=[];let r=t.slice();for(const i of t){const s=n.find(a=>a.agent===i.agent);if(s){if(s.dates.push(i.date),vw(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),vw(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class lC{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return GT()?QT().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await rC(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return mw(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return mw(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function vw(t){return Hp(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cC(t){Gl(new Qo("platform-logger",e=>new xI(e),"PRIVATE")),Gl(new Qo("heartbeat",e=>new aC(e),"PRIVATE")),Bs(I0,fw,t),Bs(I0,fw,"esm2017"),Bs("fire-js","")}cC("");function d2(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function q4(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const uC=q4,z4=new Ld("auth","Firebase",q4());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qp=new c2("@firebase/auth");function hC(t,...e){Qp.logLevel<=Ft.WARN&&Qp.warn(`Auth (${nc}): ${t}`,...e)}function ip(t,...e){Qp.logLevel<=Ft.ERROR&&Qp.error(`Auth (${nc}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ps(t,...e){throw f2(t,...e)}function Ks(t,...e){return f2(t,...e)}function $4(t,e,n){const r=Object.assign(Object.assign({},uC()),{[e]:n});return new Ld("auth","Firebase",r).create(e,{appName:t.name})}function $o(t){return $4(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function f2(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return z4.create(t,...e)}function _t(t,e,...n){if(!t)throw f2(e,...n)}function Na(t){const e="INTERNAL ASSERTION FAILED: "+t;throw ip(e),new Error(e)}function Da(t,e){t||Na(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j0(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function dC(){return yw()==="http:"||yw()==="https:"}function yw(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fC(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(dC()||zT()||"connection"in navigator)?navigator.onLine:!0}function pC(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dd{constructor(e,n){this.shortDelay=e,this.longDelay=n,Da(n>e,"Short delay should be less than long delay!"),this.isMobile=BT()||$T()}get(){return fC()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p2(t,e){Da(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H4{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Na("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Na("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Na("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mC={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gC=new Dd(3e4,6e4);function rc(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function il(t,e,n,r,i={}){return W4(t,i,async()=>{let s={},a={};r&&(e==="GET"?a=r:s={body:JSON.stringify(r)});const o=Rd(Object.assign({key:t.config.apiKey},a)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const u=Object.assign({method:e,headers:l},s);return qT()||(u.referrerPolicy="no-referrer"),H4.fetch()(G4(t,t.config.apiHost,n,o),u)})}async function W4(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},mC),e);try{const i=new yC(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const a=await s.json();if("needConfirmation"in a)throw Df(t,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{const o=s.ok?a.errorMessage:a.error.message,[l,u]=o.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Df(t,"credential-already-in-use",a);if(l==="EMAIL_EXISTS")throw Df(t,"email-already-in-use",a);if(l==="USER_DISABLED")throw Df(t,"user-disabled",a);const d=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw $4(t,d,u);ps(t,d)}}catch(i){if(i instanceof Ys)throw i;ps(t,"network-request-failed",{message:String(i)})}}async function Mm(t,e,n,r,i={}){const s=await il(t,e,n,r,i);return"mfaPendingCredential"in s&&ps(t,"multi-factor-auth-required",{_serverResponse:s}),s}function G4(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?p2(t.config,i):`${t.config.apiScheme}://${i}`}function vC(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class yC{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Ks(this.auth,"network-request-failed")),gC.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Df(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Ks(t,e,r);return i.customData._tokenResponse=n,i}function ww(t){return t!==void 0&&t.enterprise!==void 0}class wC{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return vC(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function _C(t,e){return il(t,"GET","/v2/recaptchaConfig",rc(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bC(t,e){return il(t,"POST","/v1/accounts:delete",e)}async function Q4(t,e){return il(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $h(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function xC(t,e=!1){const n=bn(t),r=await n.getIdToken(e),i=m2(r);_t(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,a=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:$h(o1(i.auth_time)),issuedAtTime:$h(o1(i.iat)),expirationTime:$h(o1(i.exp)),signInProvider:a||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function o1(t){return Number(t)*1e3}function m2(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return ip("JWT malformed, contained fewer than 3 sections"),null;try{const i=j4(n);return i?JSON.parse(i):(ip("Failed to decode base64 JWT payload"),null)}catch(i){return ip("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function _w(t){const e=m2(t);return _t(e,"internal-error"),_t(typeof e.exp<"u","internal-error"),_t(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yd(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Ys&&SC(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function SC({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NC{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L0{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=$h(this.lastLoginAt),this.creationTime=$h(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yp(t){var e;const n=t.auth,r=await t.getIdToken(),i=await yd(t,Q4(n,{idToken:r}));_t(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const a=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?Y4(s.providerUserInfo):[],o=EC(t.providerData,a),l=t.isAnonymous,u=!(t.email&&s.passwordHash)&&!(o!=null&&o.length),d=l?u:!1,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new L0(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(t,p)}async function AC(t){const e=bn(t);await Yp(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function EC(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function Y4(t){return t.map(e=>{var{providerId:n}=e,r=d2(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kC(t,e){const n=await W4(t,{},async()=>{const r=Rd({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,a=G4(t,i,"/v1/token",`key=${s}`),o=await t._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",H4.fetch()(a,{method:"POST",headers:o,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function TC(t,e){return il(t,"POST","/v2/accounts:revokeToken",rc(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uu{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){_t(e.idToken,"internal-error"),_t(typeof e.idToken<"u","internal-error"),_t(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):_w(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){_t(e.length!==0,"internal-error");const n=_w(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(_t(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await kC(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,a=new uu;return r&&(_t(typeof r=="string","internal-error",{appName:e}),a.refreshToken=r),i&&(_t(typeof i=="string","internal-error",{appName:e}),a.accessToken=i),s&&(_t(typeof s=="number","internal-error",{appName:e}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new uu,this.toJSON())}_performRefresh(){return Na("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vo(t,e){_t(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Aa{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=d2(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new NC(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new L0(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await yd(this,this.stsTokenManager.getToken(this.auth,e));return _t(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return xC(this,e)}reload(){return AC(this)}_assign(e){this!==e&&(_t(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Aa(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){_t(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Yp(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Sa(this.auth.app))return Promise.reject($o(this.auth));const e=await this.getIdToken();return await yd(this,bC(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,a,o,l,u,d;const p=(r=n.displayName)!==null&&r!==void 0?r:void 0,m=(i=n.email)!==null&&i!==void 0?i:void 0,g=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,x=(a=n.photoURL)!==null&&a!==void 0?a:void 0,b=(o=n.tenantId)!==null&&o!==void 0?o:void 0,k=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,w=(u=n.createdAt)!==null&&u!==void 0?u:void 0,N=(d=n.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:j,emailVerified:O,isAnonymous:Q,providerData:B,stsTokenManager:P}=n;_t(j&&P,e,"internal-error");const y=uu.fromJSON(this.name,P);_t(typeof j=="string",e,"internal-error"),vo(p,e.name),vo(m,e.name),_t(typeof O=="boolean",e,"internal-error"),_t(typeof Q=="boolean",e,"internal-error"),vo(g,e.name),vo(x,e.name),vo(b,e.name),vo(k,e.name),vo(w,e.name),vo(N,e.name);const S=new Aa({uid:j,auth:e,email:m,emailVerified:O,displayName:p,isAnonymous:Q,photoURL:x,phoneNumber:g,tenantId:b,stsTokenManager:y,createdAt:w,lastLoginAt:N});return B&&Array.isArray(B)&&(S.providerData=B.map(L=>Object.assign({},L))),k&&(S._redirectEventId=k),S}static async _fromIdTokenResponse(e,n,r=!1){const i=new uu;i.updateFromServerResponse(n);const s=new Aa({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Yp(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];_t(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?Y4(i.providerUserInfo):[],a=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),o=new uu;o.updateFromIdToken(r);const l=new Aa({uid:i.localId,auth:e,stsTokenManager:o,isAnonymous:a}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new L0(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,u),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bw=new Map;function Ea(t){Da(t instanceof Function,"Expected a class definition");let e=bw.get(t);return e?(Da(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,bw.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J4{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}J4.type="NONE";const xw=J4;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sp(t,e,n){return`firebase:${t}:${e}:${n}`}class hu{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=sp(this.userKey,i.apiKey,s),this.fullPersistenceKey=sp("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Aa._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new hu(Ea(xw),e,r);const i=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=i[0]||Ea(xw);const a=sp(r,e.config.apiKey,e.name);let o=null;for(const u of n)try{const d=await u._get(a);if(d){const p=Aa._fromJSON(e,d);u!==s&&(o=p),s=u;break}}catch{}const l=i.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new hu(s,e,r):(s=l[0],o&&await s._set(a,o.toJSON()),await Promise.all(n.map(async u=>{if(u!==s)try{await u._remove(a)}catch{}})),new hu(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sw(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(t3(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(X4(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(r3(e))return"Blackberry";if(i3(e))return"Webos";if(Z4(e))return"Safari";if((e.includes("chrome/")||e3(e))&&!e.includes("edge/"))return"Chrome";if(n3(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function X4(t=Lr()){return/firefox\//i.test(t)}function Z4(t=Lr()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function e3(t=Lr()){return/crios\//i.test(t)}function t3(t=Lr()){return/iemobile/i.test(t)}function n3(t=Lr()){return/android/i.test(t)}function r3(t=Lr()){return/blackberry/i.test(t)}function i3(t=Lr()){return/webos/i.test(t)}function g2(t=Lr()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function IC(t=Lr()){var e;return g2(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function CC(){return HT()&&document.documentMode===10}function s3(t=Lr()){return g2(t)||n3(t)||i3(t)||r3(t)||/windows phone/i.test(t)||t3(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a3(t,e=[]){let n;switch(t){case"Browser":n=Sw(Lr());break;case"Worker":n=`${Sw(Lr())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${nc}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PC{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((a,o)=>{try{const l=e(s);a(l)}catch(l){o(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jC(t,e={}){return il(t,"GET","/v2/passwordPolicy",rc(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LC=6;class RC{constructor(e){var n,r,i,s;const a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=a.minPasswordLength)!==null&&n!==void 0?n:LC,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,a,o;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(a=l.containsNumericCharacter)!==null&&a!==void 0?a:!0),l.isValid&&(l.isValid=(o=l.containsNonAlphanumericCharacter)!==null&&o!==void 0?o:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DC{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Nw(this),this.idTokenSubscription=new Nw(this),this.beforeStateQueue=new PC(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=z4,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Ea(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await hu.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Q4(this,{idToken:e}),r=await Aa._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Sa(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(o,o))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,o=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!a||a===o)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(a){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return _t(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Yp(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=pC()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Sa(this.app))return Promise.reject($o(this));const n=e?bn(e):null;return n&&_t(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&_t(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Sa(this.app)?Promise.reject($o(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Sa(this.app)?Promise.reject($o(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ea(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await jC(this),n=new RC(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Ld("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await TC(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Ea(e)||this._popupRedirectResolver;_t(n,this,"argument-error"),this.redirectPersistenceManager=await hu.create(this,[Ea(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let a=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(_t(o,this,"internal-error"),o.then(()=>{a||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{a=!0,l()}}else{const l=e.addObserver(n);return()=>{a=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return _t(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=a3(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&hC(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Bu(t){return bn(t)}class Nw{constructor(e){this.auth=e,this.observer=null,this.addObserver=eI(n=>this.observer=n)}get next(){return _t(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function FC(t){Vm=t}function o3(t){return Vm.loadJS(t)}function OC(){return Vm.recaptchaEnterpriseScript}function MC(){return Vm.gapiScript}function VC(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const UC="recaptcha-enterprise",BC="NO_RECAPTCHA";class KC{constructor(e){this.type=UC,this.auth=Bu(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(a,o)=>{_C(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)o(new Error("recaptcha Enterprise site key undefined"));else{const u=new wC(l);return s.tenantId==null?s._agentRecaptchaConfig=u:s._tenantRecaptchaConfigs[s.tenantId]=u,a(u.siteKey)}}).catch(l=>{o(l)})})}function i(s,a,o){const l=window.grecaptcha;ww(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(u=>{a(u)}).catch(()=>{a(BC)})}):o(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,a)=>{r(this.auth).then(o=>{if(!n&&ww(window.grecaptcha))i(o,s,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let l=OC();l.length!==0&&(l+=o),o3(l).then(()=>{i(o,s,a)}).catch(u=>{a(u)})}}).catch(o=>{a(o)})})}}async function Aw(t,e,n,r=!1){const i=new KC(t);let s;try{s=await i.verify(n)}catch{s=await i.verify(n,!0)}const a=Object.assign({},e);return r?Object.assign(a,{captchaResp:s}):Object.assign(a,{captchaResponse:s}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function Ew(t,e,n,r){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await Aw(t,e,n,n==="getOobCode");return r(t,s)}else return r(t,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await Aw(t,e,n,n==="getOobCode");return r(t,a)}else return Promise.reject(s)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qC(t,e){const n=Om(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(Wp(s,e??{}))return i;ps(i,"already-initialized")}return n.initialize({options:e})}function zC(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Ea);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function $C(t,e,n){const r=Bu(t);_t(r._canInitEmulator,r,"emulator-config-failed"),_t(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=l3(e),{host:a,port:o}=HC(e),l=o===null?"":`:${o}`;r.config.emulator={url:`${s}//${a}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:a,port:o,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),WC()}function l3(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function HC(t){const e=l3(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:kw(r.substr(s.length+1))}}else{const[s,a]=r.split(":");return{host:s,port:kw(a)}}}function kw(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function WC(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v2{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Na("not implemented")}_getIdTokenResponse(e){return Na("not implemented")}_linkToIdToken(e,n){return Na("not implemented")}_getReauthenticationResolver(e){return Na("not implemented")}}async function GC(t,e){return il(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QC(t,e){return Mm(t,"POST","/v1/accounts:signInWithPassword",rc(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YC(t,e){return Mm(t,"POST","/v1/accounts:signInWithEmailLink",rc(t,e))}async function JC(t,e){return Mm(t,"POST","/v1/accounts:signInWithEmailLink",rc(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wd extends v2{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new wd(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new wd(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ew(e,n,"signInWithPassword",QC);case"emailLink":return YC(e,{email:this._email,oobCode:this._password});default:ps(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ew(e,r,"signUpPassword",GC);case"emailLink":return JC(e,{idToken:n,email:this._email,oobCode:this._password});default:ps(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function du(t,e){return Mm(t,"POST","/v1/accounts:signInWithIdp",rc(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XC="http://localhost";class Ql extends v2{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ql(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):ps("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=d2(n,["providerId","signInMethod"]);if(!r||!i)return null;const a=new Ql(r,i);return a.idToken=s.idToken||void 0,a.accessToken=s.accessToken||void 0,a.secret=s.secret,a.nonce=s.nonce,a.pendingToken=s.pendingToken||null,a}_getIdTokenResponse(e){const n=this.buildRequest();return du(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,du(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,du(e,n)}buildRequest(){const e={requestUri:XC,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Rd(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZC(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function eP(t){const e=Ch(Ph(t)).link,n=e?Ch(Ph(e)).deep_link_id:null,r=Ch(Ph(t)).deep_link_id;return(r?Ch(Ph(r)).link:null)||r||n||e||t}class y2{constructor(e){var n,r,i,s,a,o;const l=Ch(Ph(e)),u=(n=l.apiKey)!==null&&n!==void 0?n:null,d=(r=l.oobCode)!==null&&r!==void 0?r:null,p=ZC((i=l.mode)!==null&&i!==void 0?i:null);_t(u&&d&&p,"argument-error"),this.apiKey=u,this.operation=p,this.code=d,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(a=l.languageCode)!==null&&a!==void 0?a:null,this.tenantId=(o=l.tenantId)!==null&&o!==void 0?o:null}static parseLink(e){const n=eP(e);try{return new y2(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ku{constructor(){this.providerId=Ku.PROVIDER_ID}static credential(e,n){return wd._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=y2.parseLink(n);return _t(r,"argument-error"),wd._fromEmailAndCode(e,r.code,r.tenantId)}}Ku.PROVIDER_ID="password";Ku.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ku.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c3{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fd extends c3{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class No extends Fd{constructor(){super("facebook.com")}static credential(e){return Ql._fromParams({providerId:No.PROVIDER_ID,signInMethod:No.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return No.credentialFromTaggedObject(e)}static credentialFromError(e){return No.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return No.credential(e.oauthAccessToken)}catch{return null}}}No.FACEBOOK_SIGN_IN_METHOD="facebook.com";No.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ao extends Fd{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ql._fromParams({providerId:Ao.PROVIDER_ID,signInMethod:Ao.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Ao.credentialFromTaggedObject(e)}static credentialFromError(e){return Ao.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Ao.credential(n,r)}catch{return null}}}Ao.GOOGLE_SIGN_IN_METHOD="google.com";Ao.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eo extends Fd{constructor(){super("github.com")}static credential(e){return Ql._fromParams({providerId:Eo.PROVIDER_ID,signInMethod:Eo.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Eo.credentialFromTaggedObject(e)}static credentialFromError(e){return Eo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Eo.credential(e.oauthAccessToken)}catch{return null}}}Eo.GITHUB_SIGN_IN_METHOD="github.com";Eo.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ko extends Fd{constructor(){super("twitter.com")}static credential(e,n){return Ql._fromParams({providerId:ko.PROVIDER_ID,signInMethod:ko.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ko.credentialFromTaggedObject(e)}static credentialFromError(e){return ko.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return ko.credential(n,r)}catch{return null}}}ko.TWITTER_SIGN_IN_METHOD="twitter.com";ko.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eu{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await Aa._fromIdTokenResponse(e,r,i),a=Tw(r);return new Eu({user:s,providerId:a,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=Tw(r);return new Eu({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function Tw(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jp extends Ys{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Jp.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Jp(e,n,r,i)}}function u3(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Jp._fromErrorAndOperation(t,s,e,r):s})}async function tP(t,e,n=!1){const r=await yd(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Eu._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nP(t,e,n=!1){const{auth:r}=t;if(Sa(r.app))return Promise.reject($o(r));const i="reauthenticate";try{const s=await yd(t,u3(r,i,e,t),n);_t(s.idToken,r,"internal-error");const a=m2(s.idToken);_t(a,r,"internal-error");const{sub:o}=a;return _t(t.uid===o,r,"user-mismatch"),Eu._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&ps(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function h3(t,e,n=!1){if(Sa(t.app))return Promise.reject($o(t));const r="signIn",i=await u3(t,r,e),s=await Eu._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function rP(t,e){return h3(Bu(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iP(t){const e=Bu(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function sP(t,e,n){return Sa(t.app)?Promise.reject($o(t)):rP(bn(t),Ku.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&iP(t),r})}function aP(t,e,n,r){return bn(t).onIdTokenChanged(e,n,r)}function oP(t,e,n){return bn(t).beforeAuthStateChanged(e,n)}function lP(t,e,n,r){return bn(t).onAuthStateChanged(e,n,r)}function cP(t){return bn(t).signOut()}const Xp="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d3{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Xp,"1"),this.storage.removeItem(Xp),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uP=1e3,hP=10;class f3 extends d3{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=s3(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((a,o,l)=>{this.notifyListeners(a,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const a=this.storage.getItem(r);!n&&this.localCache[r]===a||this.notifyListeners(r,a)},s=this.storage.getItem(r);CC()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,hP):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},uP)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}f3.type="LOCAL";const dP=f3;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p3 extends d3{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}p3.type="SESSION";const m3=p3;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fP(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Um{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new Um(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,a=this.handlersMap[i];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const o=Array.from(a).map(async u=>u(n.origin,s)),l=await fP(o);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Um.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w2(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pP{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,a;return new Promise((o,l)=>{const u=w2("",20);i.port1.start();const d=setTimeout(()=>{l(new Error("unsupported_event"))},r);a={messageChannel:i,onMessage(p){const m=p;if(m.data.eventId===u)switch(m.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),o(m.data.response);break;default:clearTimeout(d),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(a),i.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[i.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qs(){return window}function mP(t){qs().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g3(){return typeof qs().WorkerGlobalScope<"u"&&typeof qs().importScripts=="function"}async function gP(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function vP(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function yP(){return g3()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v3="firebaseLocalStorageDb",wP=1,Zp="firebaseLocalStorage",y3="fbase_key";class Od{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Bm(t,e){return t.transaction([Zp],e?"readwrite":"readonly").objectStore(Zp)}function _P(){const t=indexedDB.deleteDatabase(v3);return new Od(t).toPromise()}function R0(){const t=indexedDB.open(v3,wP);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Zp,{keyPath:y3})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Zp)?e(r):(r.close(),await _P(),e(await R0()))})})}async function Iw(t,e,n){const r=Bm(t,!0).put({[y3]:e,value:n});return new Od(r).toPromise()}async function bP(t,e){const n=Bm(t,!1).get(e),r=await new Od(n).toPromise();return r===void 0?null:r.value}function Cw(t,e){const n=Bm(t,!0).delete(e);return new Od(n).toPromise()}const xP=800,SP=3;class w3{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await R0(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>SP)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return g3()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Um._getInstance(yP()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await gP(),!this.activeServiceWorker)return;this.sender=new pP(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||vP()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await R0();return await Iw(e,Xp,"1"),await Cw(e,Xp),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Iw(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>bP(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Cw(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=Bm(i,!1).getAll();return new Od(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),xP)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}w3.type="LOCAL";const NP=w3;new Dd(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AP(t,e){return e?Ea(e):(_t(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _2 extends v2{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return du(e,this._buildIdpRequest())}_linkToIdToken(e,n){return du(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return du(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function EP(t){return h3(t.auth,new _2(t),t.bypassAuthState)}function kP(t){const{auth:e,user:n}=t;return _t(n,e,"internal-error"),nP(n,new _2(t),t.bypassAuthState)}async function TP(t){const{auth:e,user:n}=t;return _t(n,e,"internal-error"),tP(n,new _2(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _3{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:a,type:o}=e;if(a){this.reject(a);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return EP;case"linkViaPopup":case"linkViaRedirect":return TP;case"reauthViaPopup":case"reauthViaRedirect":return kP;default:ps(this.auth,"internal-error")}}resolve(e){Da(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Da(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IP=new Dd(2e3,1e4);class tu extends _3{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,tu.currentPopupAction&&tu.currentPopupAction.cancel(),tu.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return _t(e,this.auth,"internal-error"),e}async onExecution(){Da(this.filter.length===1,"Popup operations only handle one event");const e=w2();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Ks(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Ks(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,tu.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ks(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,IP.get())};e()}}tu.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CP="pendingRedirect",ap=new Map;class PP extends _3{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=ap.get(this.auth._key());if(!e){try{const r=await jP(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}ap.set(this.auth._key(),e)}return this.bypassAuthState||ap.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function jP(t,e){const n=DP(e),r=RP(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function LP(t,e){ap.set(t._key(),e)}function RP(t){return Ea(t._redirectPersistence)}function DP(t){return sp(CP,t.config.apiKey,t.name)}async function FP(t,e,n=!1){if(Sa(t.app))return Promise.reject($o(t));const r=Bu(t),i=AP(r,e),a=await new PP(r,i,n).execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OP=10*60*1e3;class MP{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!VP(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!b3(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Ks(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=OP&&this.cachedEventUids.clear(),this.cachedEventUids.has(Pw(e))}saveEventToCache(e){this.cachedEventUids.add(Pw(e)),this.lastProcessedEventTime=Date.now()}}function Pw(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function b3({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function VP(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return b3(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UP(t,e={}){return il(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BP=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,KP=/^https?/;async function qP(t){if(t.config.emulator)return;const{authorizedDomains:e}=await UP(t);for(const n of e)try{if(zP(n))return}catch{}ps(t,"unauthorized-domain")}function zP(t){const e=j0(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===r}if(!KP.test(n))return!1;if(BP.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $P=new Dd(3e4,6e4);function jw(){const t=qs().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function HP(t){return new Promise((e,n)=>{var r,i,s;function a(){jw(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{jw(),n(Ks(t,"network-request-failed"))},timeout:$P.get()})}if(!((i=(r=qs().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=qs().gapi)===null||s===void 0)&&s.load)a();else{const o=VC("iframefcb");return qs()[o]=()=>{gapi.load?a():n(Ks(t,"network-request-failed"))},o3(`${MC()}?onload=${o}`).catch(l=>n(l))}}).catch(e=>{throw op=null,e})}let op=null;function WP(t){return op=op||HP(t),op}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GP=new Dd(5e3,15e3),QP="__/auth/iframe",YP="emulator/auth/iframe",JP={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},XP=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ZP(t){const e=t.config;_t(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?p2(e,YP):`https://${t.config.authDomain}/${QP}`,r={apiKey:e.apiKey,appName:t.name,v:nc},i=XP.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Rd(r).slice(1)}`}async function ej(t){const e=await WP(t),n=qs().gapi;return _t(n,t,"internal-error"),e.open({where:document.body,url:ZP(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:JP,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const a=Ks(t,"network-request-failed"),o=qs().setTimeout(()=>{s(a)},GP.get());function l(){qs().clearTimeout(o),i(r)}r.ping(l).then(l,()=>{s(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tj={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},nj=500,rj=600,ij="_blank",sj="http://localhost";class Lw{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function aj(t,e,n,r=nj,i=rj){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let o="";const l=Object.assign(Object.assign({},tj),{width:r.toString(),height:i.toString(),top:s,left:a}),u=Lr().toLowerCase();n&&(o=e3(u)?ij:n),X4(u)&&(e=e||sj,l.scrollbars="yes");const d=Object.entries(l).reduce((m,[g,x])=>`${m}${g}=${x},`,"");if(IC(u)&&o!=="_self")return oj(e||"",o),new Lw(null);const p=window.open(e||"",o,d);_t(p,t,"popup-blocked");try{p.focus()}catch{}return new Lw(p)}function oj(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lj="__/auth/handler",cj="emulator/auth/handler",uj=encodeURIComponent("fac");async function Rw(t,e,n,r,i,s){_t(t.config.authDomain,t,"auth-domain-config-required"),_t(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:nc,eventId:i};if(e instanceof c3){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",ZT(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,p]of Object.entries({}))a[d]=p}if(e instanceof Fd){const d=e.getScopes().filter(p=>p!=="");d.length>0&&(a.scopes=d.join(","))}t.tenantId&&(a.tid=t.tenantId);const o=a;for(const d of Object.keys(o))o[d]===void 0&&delete o[d];const l=await t._getAppCheckToken(),u=l?`#${uj}=${encodeURIComponent(l)}`:"";return`${hj(t)}?${Rd(o).slice(1)}${u}`}function hj({config:t}){return t.emulator?p2(t,cj):`https://${t.authDomain}/${lj}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l1="webStorageSupport";class dj{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=m3,this._completeRedirectFn=FP,this._overrideRedirectResult=LP}async _openPopup(e,n,r,i){var s;Da((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const a=await Rw(e,n,r,j0(),i);return aj(e,a,w2())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await Rw(e,n,r,j0(),i);return mP(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Da(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await ej(e),r=new MP(e);return n.register("authEvent",i=>(_t(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(l1,{type:l1},i=>{var s;const a=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[l1];a!==void 0&&n(!!a),ps(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=qP(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return s3()||Z4()||g2()}}const fj=dj;var Dw="@firebase/auth",Fw="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pj{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){_t(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mj(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function gj(t){Gl(new Qo("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:o}=r.options;_t(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:a,authDomain:o,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:a3(t)},u=new DC(r,i,s,l);return zC(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Gl(new Qo("auth-internal",e=>{const n=Bu(e.getProvider("auth").getImmediate());return(r=>new pj(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Bs(Dw,Fw,mj(t)),Bs(Dw,Fw,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vj=5*60,yj=F4("authIdTokenMaxAge")||vj;let Ow=null;const wj=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>yj)return;const i=n==null?void 0:n.token;Ow!==i&&(Ow=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function _j(t=h2()){const e=Om(t,"auth");if(e.isInitialized())return e.getImmediate();const n=qC(t,{popupRedirectResolver:fj,persistence:[NP,dP,m3]}),r=F4("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const a=wj(s.toString());oP(n,a,()=>a(n.currentUser)),aP(n,o=>a(o))}}const i=L4("auth");return i&&$C(n,`http://${i}`),n}function bj(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}FC({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=Ks("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",bj().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});gj("Browser");var xj="firebase",Sj="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Bs(xj,Sj,"app");var Mw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Vl,x3;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(P,y){function S(){}S.prototype=y.prototype,P.D=y.prototype,P.prototype=new S,P.prototype.constructor=P,P.C=function(L,A,T){for(var I=Array(arguments.length-2),M=2;M<arguments.length;M++)I[M-2]=arguments[M];return y.prototype[A].apply(L,I)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(P,y,S){S||(S=0);var L=Array(16);if(typeof y=="string")for(var A=0;16>A;++A)L[A]=y.charCodeAt(S++)|y.charCodeAt(S++)<<8|y.charCodeAt(S++)<<16|y.charCodeAt(S++)<<24;else for(A=0;16>A;++A)L[A]=y[S++]|y[S++]<<8|y[S++]<<16|y[S++]<<24;y=P.g[0],S=P.g[1],A=P.g[2];var T=P.g[3],I=y+(T^S&(A^T))+L[0]+3614090360&4294967295;y=S+(I<<7&4294967295|I>>>25),I=T+(A^y&(S^A))+L[1]+3905402710&4294967295,T=y+(I<<12&4294967295|I>>>20),I=A+(S^T&(y^S))+L[2]+606105819&4294967295,A=T+(I<<17&4294967295|I>>>15),I=S+(y^A&(T^y))+L[3]+3250441966&4294967295,S=A+(I<<22&4294967295|I>>>10),I=y+(T^S&(A^T))+L[4]+4118548399&4294967295,y=S+(I<<7&4294967295|I>>>25),I=T+(A^y&(S^A))+L[5]+1200080426&4294967295,T=y+(I<<12&4294967295|I>>>20),I=A+(S^T&(y^S))+L[6]+2821735955&4294967295,A=T+(I<<17&4294967295|I>>>15),I=S+(y^A&(T^y))+L[7]+4249261313&4294967295,S=A+(I<<22&4294967295|I>>>10),I=y+(T^S&(A^T))+L[8]+1770035416&4294967295,y=S+(I<<7&4294967295|I>>>25),I=T+(A^y&(S^A))+L[9]+2336552879&4294967295,T=y+(I<<12&4294967295|I>>>20),I=A+(S^T&(y^S))+L[10]+4294925233&4294967295,A=T+(I<<17&4294967295|I>>>15),I=S+(y^A&(T^y))+L[11]+2304563134&4294967295,S=A+(I<<22&4294967295|I>>>10),I=y+(T^S&(A^T))+L[12]+1804603682&4294967295,y=S+(I<<7&4294967295|I>>>25),I=T+(A^y&(S^A))+L[13]+4254626195&4294967295,T=y+(I<<12&4294967295|I>>>20),I=A+(S^T&(y^S))+L[14]+2792965006&4294967295,A=T+(I<<17&4294967295|I>>>15),I=S+(y^A&(T^y))+L[15]+1236535329&4294967295,S=A+(I<<22&4294967295|I>>>10),I=y+(A^T&(S^A))+L[1]+4129170786&4294967295,y=S+(I<<5&4294967295|I>>>27),I=T+(S^A&(y^S))+L[6]+3225465664&4294967295,T=y+(I<<9&4294967295|I>>>23),I=A+(y^S&(T^y))+L[11]+643717713&4294967295,A=T+(I<<14&4294967295|I>>>18),I=S+(T^y&(A^T))+L[0]+3921069994&4294967295,S=A+(I<<20&4294967295|I>>>12),I=y+(A^T&(S^A))+L[5]+3593408605&4294967295,y=S+(I<<5&4294967295|I>>>27),I=T+(S^A&(y^S))+L[10]+38016083&4294967295,T=y+(I<<9&4294967295|I>>>23),I=A+(y^S&(T^y))+L[15]+3634488961&4294967295,A=T+(I<<14&4294967295|I>>>18),I=S+(T^y&(A^T))+L[4]+3889429448&4294967295,S=A+(I<<20&4294967295|I>>>12),I=y+(A^T&(S^A))+L[9]+568446438&4294967295,y=S+(I<<5&4294967295|I>>>27),I=T+(S^A&(y^S))+L[14]+3275163606&4294967295,T=y+(I<<9&4294967295|I>>>23),I=A+(y^S&(T^y))+L[3]+4107603335&4294967295,A=T+(I<<14&4294967295|I>>>18),I=S+(T^y&(A^T))+L[8]+1163531501&4294967295,S=A+(I<<20&4294967295|I>>>12),I=y+(A^T&(S^A))+L[13]+2850285829&4294967295,y=S+(I<<5&4294967295|I>>>27),I=T+(S^A&(y^S))+L[2]+4243563512&4294967295,T=y+(I<<9&4294967295|I>>>23),I=A+(y^S&(T^y))+L[7]+1735328473&4294967295,A=T+(I<<14&4294967295|I>>>18),I=S+(T^y&(A^T))+L[12]+2368359562&4294967295,S=A+(I<<20&4294967295|I>>>12),I=y+(S^A^T)+L[5]+4294588738&4294967295,y=S+(I<<4&4294967295|I>>>28),I=T+(y^S^A)+L[8]+2272392833&4294967295,T=y+(I<<11&4294967295|I>>>21),I=A+(T^y^S)+L[11]+1839030562&4294967295,A=T+(I<<16&4294967295|I>>>16),I=S+(A^T^y)+L[14]+4259657740&4294967295,S=A+(I<<23&4294967295|I>>>9),I=y+(S^A^T)+L[1]+2763975236&4294967295,y=S+(I<<4&4294967295|I>>>28),I=T+(y^S^A)+L[4]+1272893353&4294967295,T=y+(I<<11&4294967295|I>>>21),I=A+(T^y^S)+L[7]+4139469664&4294967295,A=T+(I<<16&4294967295|I>>>16),I=S+(A^T^y)+L[10]+3200236656&4294967295,S=A+(I<<23&4294967295|I>>>9),I=y+(S^A^T)+L[13]+681279174&4294967295,y=S+(I<<4&4294967295|I>>>28),I=T+(y^S^A)+L[0]+3936430074&4294967295,T=y+(I<<11&4294967295|I>>>21),I=A+(T^y^S)+L[3]+3572445317&4294967295,A=T+(I<<16&4294967295|I>>>16),I=S+(A^T^y)+L[6]+76029189&4294967295,S=A+(I<<23&4294967295|I>>>9),I=y+(S^A^T)+L[9]+3654602809&4294967295,y=S+(I<<4&4294967295|I>>>28),I=T+(y^S^A)+L[12]+3873151461&4294967295,T=y+(I<<11&4294967295|I>>>21),I=A+(T^y^S)+L[15]+530742520&4294967295,A=T+(I<<16&4294967295|I>>>16),I=S+(A^T^y)+L[2]+3299628645&4294967295,S=A+(I<<23&4294967295|I>>>9),I=y+(A^(S|~T))+L[0]+4096336452&4294967295,y=S+(I<<6&4294967295|I>>>26),I=T+(S^(y|~A))+L[7]+1126891415&4294967295,T=y+(I<<10&4294967295|I>>>22),I=A+(y^(T|~S))+L[14]+2878612391&4294967295,A=T+(I<<15&4294967295|I>>>17),I=S+(T^(A|~y))+L[5]+4237533241&4294967295,S=A+(I<<21&4294967295|I>>>11),I=y+(A^(S|~T))+L[12]+1700485571&4294967295,y=S+(I<<6&4294967295|I>>>26),I=T+(S^(y|~A))+L[3]+2399980690&4294967295,T=y+(I<<10&4294967295|I>>>22),I=A+(y^(T|~S))+L[10]+4293915773&4294967295,A=T+(I<<15&4294967295|I>>>17),I=S+(T^(A|~y))+L[1]+2240044497&4294967295,S=A+(I<<21&4294967295|I>>>11),I=y+(A^(S|~T))+L[8]+1873313359&4294967295,y=S+(I<<6&4294967295|I>>>26),I=T+(S^(y|~A))+L[15]+4264355552&4294967295,T=y+(I<<10&4294967295|I>>>22),I=A+(y^(T|~S))+L[6]+2734768916&4294967295,A=T+(I<<15&4294967295|I>>>17),I=S+(T^(A|~y))+L[13]+1309151649&4294967295,S=A+(I<<21&4294967295|I>>>11),I=y+(A^(S|~T))+L[4]+4149444226&4294967295,y=S+(I<<6&4294967295|I>>>26),I=T+(S^(y|~A))+L[11]+3174756917&4294967295,T=y+(I<<10&4294967295|I>>>22),I=A+(y^(T|~S))+L[2]+718787259&4294967295,A=T+(I<<15&4294967295|I>>>17),I=S+(T^(A|~y))+L[9]+3951481745&4294967295,P.g[0]=P.g[0]+y&4294967295,P.g[1]=P.g[1]+(A+(I<<21&4294967295|I>>>11))&4294967295,P.g[2]=P.g[2]+A&4294967295,P.g[3]=P.g[3]+T&4294967295}r.prototype.u=function(P,y){y===void 0&&(y=P.length);for(var S=y-this.blockSize,L=this.B,A=this.h,T=0;T<y;){if(A==0)for(;T<=S;)i(this,P,T),T+=this.blockSize;if(typeof P=="string"){for(;T<y;)if(L[A++]=P.charCodeAt(T++),A==this.blockSize){i(this,L),A=0;break}}else for(;T<y;)if(L[A++]=P[T++],A==this.blockSize){i(this,L),A=0;break}}this.h=A,this.o+=y},r.prototype.v=function(){var P=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);P[0]=128;for(var y=1;y<P.length-8;++y)P[y]=0;var S=8*this.o;for(y=P.length-8;y<P.length;++y)P[y]=S&255,S/=256;for(this.u(P),P=Array(16),y=S=0;4>y;++y)for(var L=0;32>L;L+=8)P[S++]=this.g[y]>>>L&255;return P};function s(P,y){var S=o;return Object.prototype.hasOwnProperty.call(S,P)?S[P]:S[P]=y(P)}function a(P,y){this.h=y;for(var S=[],L=!0,A=P.length-1;0<=A;A--){var T=P[A]|0;L&&T==y||(S[A]=T,L=!1)}this.g=S}var o={};function l(P){return-128<=P&&128>P?s(P,function(y){return new a([y|0],0>y?-1:0)}):new a([P|0],0>P?-1:0)}function u(P){if(isNaN(P)||!isFinite(P))return p;if(0>P)return k(u(-P));for(var y=[],S=1,L=0;P>=S;L++)y[L]=P/S|0,S*=4294967296;return new a(y,0)}function d(P,y){if(P.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(P.charAt(0)=="-")return k(d(P.substring(1),y));if(0<=P.indexOf("-"))throw Error('number format error: interior "-" character');for(var S=u(Math.pow(y,8)),L=p,A=0;A<P.length;A+=8){var T=Math.min(8,P.length-A),I=parseInt(P.substring(A,A+T),y);8>T?(T=u(Math.pow(y,T)),L=L.j(T).add(u(I))):(L=L.j(S),L=L.add(u(I)))}return L}var p=l(0),m=l(1),g=l(16777216);t=a.prototype,t.m=function(){if(b(this))return-k(this).m();for(var P=0,y=1,S=0;S<this.g.length;S++){var L=this.i(S);P+=(0<=L?L:4294967296+L)*y,y*=4294967296}return P},t.toString=function(P){if(P=P||10,2>P||36<P)throw Error("radix out of range: "+P);if(x(this))return"0";if(b(this))return"-"+k(this).toString(P);for(var y=u(Math.pow(P,6)),S=this,L="";;){var A=O(S,y).g;S=w(S,A.j(y));var T=((0<S.g.length?S.g[0]:S.h)>>>0).toString(P);if(S=A,x(S))return T+L;for(;6>T.length;)T="0"+T;L=T+L}},t.i=function(P){return 0>P?0:P<this.g.length?this.g[P]:this.h};function x(P){if(P.h!=0)return!1;for(var y=0;y<P.g.length;y++)if(P.g[y]!=0)return!1;return!0}function b(P){return P.h==-1}t.l=function(P){return P=w(this,P),b(P)?-1:x(P)?0:1};function k(P){for(var y=P.g.length,S=[],L=0;L<y;L++)S[L]=~P.g[L];return new a(S,~P.h).add(m)}t.abs=function(){return b(this)?k(this):this},t.add=function(P){for(var y=Math.max(this.g.length,P.g.length),S=[],L=0,A=0;A<=y;A++){var T=L+(this.i(A)&65535)+(P.i(A)&65535),I=(T>>>16)+(this.i(A)>>>16)+(P.i(A)>>>16);L=I>>>16,T&=65535,I&=65535,S[A]=I<<16|T}return new a(S,S[S.length-1]&-2147483648?-1:0)};function w(P,y){return P.add(k(y))}t.j=function(P){if(x(this)||x(P))return p;if(b(this))return b(P)?k(this).j(k(P)):k(k(this).j(P));if(b(P))return k(this.j(k(P)));if(0>this.l(g)&&0>P.l(g))return u(this.m()*P.m());for(var y=this.g.length+P.g.length,S=[],L=0;L<2*y;L++)S[L]=0;for(L=0;L<this.g.length;L++)for(var A=0;A<P.g.length;A++){var T=this.i(L)>>>16,I=this.i(L)&65535,M=P.i(A)>>>16,ne=P.i(A)&65535;S[2*L+2*A]+=I*ne,N(S,2*L+2*A),S[2*L+2*A+1]+=T*ne,N(S,2*L+2*A+1),S[2*L+2*A+1]+=I*M,N(S,2*L+2*A+1),S[2*L+2*A+2]+=T*M,N(S,2*L+2*A+2)}for(L=0;L<y;L++)S[L]=S[2*L+1]<<16|S[2*L];for(L=y;L<2*y;L++)S[L]=0;return new a(S,0)};function N(P,y){for(;(P[y]&65535)!=P[y];)P[y+1]+=P[y]>>>16,P[y]&=65535,y++}function j(P,y){this.g=P,this.h=y}function O(P,y){if(x(y))throw Error("division by zero");if(x(P))return new j(p,p);if(b(P))return y=O(k(P),y),new j(k(y.g),k(y.h));if(b(y))return y=O(P,k(y)),new j(k(y.g),y.h);if(30<P.g.length){if(b(P)||b(y))throw Error("slowDivide_ only works with positive integers.");for(var S=m,L=y;0>=L.l(P);)S=Q(S),L=Q(L);var A=B(S,1),T=B(L,1);for(L=B(L,2),S=B(S,2);!x(L);){var I=T.add(L);0>=I.l(P)&&(A=A.add(S),T=I),L=B(L,1),S=B(S,1)}return y=w(P,A.j(y)),new j(A,y)}for(A=p;0<=P.l(y);){for(S=Math.max(1,Math.floor(P.m()/y.m())),L=Math.ceil(Math.log(S)/Math.LN2),L=48>=L?1:Math.pow(2,L-48),T=u(S),I=T.j(y);b(I)||0<I.l(P);)S-=L,T=u(S),I=T.j(y);x(T)&&(T=m),A=A.add(T),P=w(P,I)}return new j(A,P)}t.A=function(P){return O(this,P).h},t.and=function(P){for(var y=Math.max(this.g.length,P.g.length),S=[],L=0;L<y;L++)S[L]=this.i(L)&P.i(L);return new a(S,this.h&P.h)},t.or=function(P){for(var y=Math.max(this.g.length,P.g.length),S=[],L=0;L<y;L++)S[L]=this.i(L)|P.i(L);return new a(S,this.h|P.h)},t.xor=function(P){for(var y=Math.max(this.g.length,P.g.length),S=[],L=0;L<y;L++)S[L]=this.i(L)^P.i(L);return new a(S,this.h^P.h)};function Q(P){for(var y=P.g.length+1,S=[],L=0;L<y;L++)S[L]=P.i(L)<<1|P.i(L-1)>>>31;return new a(S,P.h)}function B(P,y){var S=y>>5;y%=32;for(var L=P.g.length-S,A=[],T=0;T<L;T++)A[T]=0<y?P.i(T+S)>>>y|P.i(T+S+1)<<32-y:P.i(T+S);return new a(A,P.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,x3=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=u,a.fromString=d,Vl=a}).apply(typeof Mw<"u"?Mw:typeof self<"u"?self:typeof window<"u"?window:{});var Ff=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var S3,jh,N3,lp,D0,A3,E3,k3;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(f,C,F){return f==Array.prototype||f==Object.prototype||(f[C]=F.value),f};function n(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ff=="object"&&Ff];for(var C=0;C<f.length;++C){var F=f[C];if(F&&F.Math==Math)return F}throw Error("Cannot find global object")}var r=n(this);function i(f,C){if(C)e:{var F=r;f=f.split(".");for(var X=0;X<f.length-1;X++){var ve=f[X];if(!(ve in F))break e;F=F[ve]}f=f[f.length-1],X=F[f],C=C(X),C!=X&&C!=null&&e(F,f,{configurable:!0,writable:!0,value:C})}}function s(f,C){f instanceof String&&(f+="");var F=0,X=!1,ve={next:function(){if(!X&&F<f.length){var Ne=F++;return{value:C(Ne,f[Ne]),done:!1}}return X=!0,{done:!0,value:void 0}}};return ve[Symbol.iterator]=function(){return ve},ve}i("Array.prototype.values",function(f){return f||function(){return s(this,function(C,F){return F})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},o=this||self;function l(f){var C=typeof f;return C=C!="object"?C:f?Array.isArray(f)?"array":C:"null",C=="array"||C=="object"&&typeof f.length=="number"}function u(f){var C=typeof f;return C=="object"&&f!=null||C=="function"}function d(f,C,F){return f.call.apply(f.bind,arguments)}function p(f,C,F){if(!f)throw Error();if(2<arguments.length){var X=Array.prototype.slice.call(arguments,2);return function(){var ve=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(ve,X),f.apply(C,ve)}}return function(){return f.apply(C,arguments)}}function m(f,C,F){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:p,m.apply(null,arguments)}function g(f,C){var F=Array.prototype.slice.call(arguments,1);return function(){var X=F.slice();return X.push.apply(X,arguments),f.apply(this,X)}}function x(f,C){function F(){}F.prototype=C.prototype,f.aa=C.prototype,f.prototype=new F,f.prototype.constructor=f,f.Qb=function(X,ve,Ne){for(var Ue=Array(arguments.length-2),St=2;St<arguments.length;St++)Ue[St-2]=arguments[St];return C.prototype[ve].apply(X,Ue)}}function b(f){const C=f.length;if(0<C){const F=Array(C);for(let X=0;X<C;X++)F[X]=f[X];return F}return[]}function k(f,C){for(let F=1;F<arguments.length;F++){const X=arguments[F];if(l(X)){const ve=f.length||0,Ne=X.length||0;f.length=ve+Ne;for(let Ue=0;Ue<Ne;Ue++)f[ve+Ue]=X[Ue]}else f.push(X)}}class w{constructor(C,F){this.i=C,this.j=F,this.h=0,this.g=null}get(){let C;return 0<this.h?(this.h--,C=this.g,this.g=C.next,C.next=null):C=this.i(),C}}function N(f){return/^[\s\xa0]*$/.test(f)}function j(){var f=o.navigator;return f&&(f=f.userAgent)?f:""}function O(f){return O[" "](f),f}O[" "]=function(){};var Q=j().indexOf("Gecko")!=-1&&!(j().toLowerCase().indexOf("webkit")!=-1&&j().indexOf("Edge")==-1)&&!(j().indexOf("Trident")!=-1||j().indexOf("MSIE")!=-1)&&j().indexOf("Edge")==-1;function B(f,C,F){for(const X in f)C.call(F,f[X],X,f)}function P(f,C){for(const F in f)C.call(void 0,f[F],F,f)}function y(f){const C={};for(const F in f)C[F]=f[F];return C}const S="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function L(f,C){let F,X;for(let ve=1;ve<arguments.length;ve++){X=arguments[ve];for(F in X)f[F]=X[F];for(let Ne=0;Ne<S.length;Ne++)F=S[Ne],Object.prototype.hasOwnProperty.call(X,F)&&(f[F]=X[F])}}function A(f){var C=1;f=f.split(":");const F=[];for(;0<C&&f.length;)F.push(f.shift()),C--;return f.length&&F.push(f.join(":")),F}function T(f){o.setTimeout(()=>{throw f},0)}function I(){var f=H;let C=null;return f.g&&(C=f.g,f.g=f.g.next,f.g||(f.h=null),C.next=null),C}class M{constructor(){this.h=this.g=null}add(C,F){const X=ne.get();X.set(C,F),this.h?this.h.next=X:this.g=X,this.h=X}}var ne=new w(()=>new V,f=>f.reset());class V{constructor(){this.next=this.g=this.h=null}set(C,F){this.h=C,this.g=F,this.next=null}reset(){this.next=this.g=this.h=null}}let U,K=!1,H=new M,te=()=>{const f=o.Promise.resolve(void 0);U=()=>{f.then(me)}};var me=()=>{for(var f;f=I();){try{f.h.call(f.g)}catch(F){T(F)}var C=ne;C.j(f),100>C.h&&(C.h++,f.next=C.g,C.g=f)}K=!1};function R(){this.s=this.s,this.C=this.C}R.prototype.s=!1,R.prototype.ma=function(){this.s||(this.s=!0,this.N())},R.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function $(f,C){this.type=f,this.g=this.target=C,this.defaultPrevented=!1}$.prototype.h=function(){this.defaultPrevented=!0};var J=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var f=!1,C=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const F=()=>{};o.addEventListener("test",F,C),o.removeEventListener("test",F,C)}catch{}return f}();function W(f,C){if($.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f){var F=this.type=f.type,X=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;if(this.target=f.target||f.srcElement,this.g=C,C=f.relatedTarget){if(Q){e:{try{O(C.nodeName);var ve=!0;break e}catch{}ve=!1}ve||(C=null)}}else F=="mouseover"?C=f.fromElement:F=="mouseout"&&(C=f.toElement);this.relatedTarget=C,X?(this.clientX=X.clientX!==void 0?X.clientX:X.pageX,this.clientY=X.clientY!==void 0?X.clientY:X.pageY,this.screenX=X.screenX||0,this.screenY=X.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=typeof f.pointerType=="string"?f.pointerType:ae[f.pointerType]||"",this.state=f.state,this.i=f,f.defaultPrevented&&W.aa.h.call(this)}}x(W,$);var ae={2:"touch",3:"pen",4:"mouse"};W.prototype.h=function(){W.aa.h.call(this);var f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var le="closure_listenable_"+(1e6*Math.random()|0),ue=0;function de(f,C,F,X,ve){this.listener=f,this.proxy=null,this.src=C,this.type=F,this.capture=!!X,this.ha=ve,this.key=++ue,this.da=this.fa=!1}function ke(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function Ie(f){this.src=f,this.g={},this.h=0}Ie.prototype.add=function(f,C,F,X,ve){var Ne=f.toString();f=this.g[Ne],f||(f=this.g[Ne]=[],this.h++);var Ue=Le(f,C,X,ve);return-1<Ue?(C=f[Ue],F||(C.fa=!1)):(C=new de(C,this.src,Ne,!!X,ve),C.fa=F,f.push(C)),C};function De(f,C){var F=C.type;if(F in f.g){var X=f.g[F],ve=Array.prototype.indexOf.call(X,C,void 0),Ne;(Ne=0<=ve)&&Array.prototype.splice.call(X,ve,1),Ne&&(ke(C),f.g[F].length==0&&(delete f.g[F],f.h--))}}function Le(f,C,F,X){for(var ve=0;ve<f.length;++ve){var Ne=f[ve];if(!Ne.da&&Ne.listener==C&&Ne.capture==!!F&&Ne.ha==X)return ve}return-1}var Xe="closure_lm_"+(1e6*Math.random()|0),be={};function oe(f,C,F,X,ve){if(Array.isArray(C)){for(var Ne=0;Ne<C.length;Ne++)oe(f,C[Ne],F,X,ve);return null}return F=at(F),f&&f[le]?f.K(C,F,u(X)?!!X.capture:!1,ve):We(f,C,F,!1,X,ve)}function We(f,C,F,X,ve,Ne){if(!C)throw Error("Invalid event type");var Ue=u(ve)?!!ve.capture:!!ve,St=$e(f);if(St||(f[Xe]=St=new Ie(f)),F=St.add(C,F,X,Ue,Ne),F.proxy)return F;if(X=Fe(),F.proxy=X,X.src=f,X.listener=F,f.addEventListener)J||(ve=Ue),ve===void 0&&(ve=!1),f.addEventListener(C.toString(),X,ve);else if(f.attachEvent)f.attachEvent(Me(C.toString()),X);else if(f.addListener&&f.removeListener)f.addListener(X);else throw Error("addEventListener and attachEvent are unavailable.");return F}function Fe(){function f(F){return C.call(f.src,f.listener,F)}const C=Ke;return f}function he(f,C,F,X,ve){if(Array.isArray(C))for(var Ne=0;Ne<C.length;Ne++)he(f,C[Ne],F,X,ve);else X=u(X)?!!X.capture:!!X,F=at(F),f&&f[le]?(f=f.i,C=String(C).toString(),C in f.g&&(Ne=f.g[C],F=Le(Ne,F,X,ve),-1<F&&(ke(Ne[F]),Array.prototype.splice.call(Ne,F,1),Ne.length==0&&(delete f.g[C],f.h--)))):f&&(f=$e(f))&&(C=f.g[C.toString()],f=-1,C&&(f=Le(C,F,X,ve)),(F=-1<f?C[f]:null)&&Ee(F))}function Ee(f){if(typeof f!="number"&&f&&!f.da){var C=f.src;if(C&&C[le])De(C.i,f);else{var F=f.type,X=f.proxy;C.removeEventListener?C.removeEventListener(F,X,f.capture):C.detachEvent?C.detachEvent(Me(F),X):C.addListener&&C.removeListener&&C.removeListener(X),(F=$e(C))?(De(F,f),F.h==0&&(F.src=null,C[Xe]=null)):ke(f)}}}function Me(f){return f in be?be[f]:be[f]="on"+f}function Ke(f,C){if(f.da)f=!0;else{C=new W(C,this);var F=f.listener,X=f.ha||f.src;f.fa&&Ee(f),f=F.call(X,C)}return f}function $e(f){return f=f[Xe],f instanceof Ie?f:null}var Ge="__closure_events_fn_"+(1e9*Math.random()>>>0);function at(f){return typeof f=="function"?f:(f[Ge]||(f[Ge]=function(C){return f.handleEvent(C)}),f[Ge])}function tt(){R.call(this),this.i=new Ie(this),this.M=this,this.F=null}x(tt,R),tt.prototype[le]=!0,tt.prototype.removeEventListener=function(f,C,F,X){he(this,f,C,F,X)};function ut(f,C){var F,X=f.F;if(X)for(F=[];X;X=X.F)F.push(X);if(f=f.M,X=C.type||C,typeof C=="string")C=new $(C,f);else if(C instanceof $)C.target=C.target||f;else{var ve=C;C=new $(X,f),L(C,ve)}if(ve=!0,F)for(var Ne=F.length-1;0<=Ne;Ne--){var Ue=C.g=F[Ne];ve=dt(Ue,X,!0,C)&&ve}if(Ue=C.g=f,ve=dt(Ue,X,!0,C)&&ve,ve=dt(Ue,X,!1,C)&&ve,F)for(Ne=0;Ne<F.length;Ne++)Ue=C.g=F[Ne],ve=dt(Ue,X,!1,C)&&ve}tt.prototype.N=function(){if(tt.aa.N.call(this),this.i){var f=this.i,C;for(C in f.g){for(var F=f.g[C],X=0;X<F.length;X++)ke(F[X]);delete f.g[C],f.h--}}this.F=null},tt.prototype.K=function(f,C,F,X){return this.i.add(String(f),C,!1,F,X)},tt.prototype.L=function(f,C,F,X){return this.i.add(String(f),C,!0,F,X)};function dt(f,C,F,X){if(C=f.i.g[String(C)],!C)return!0;C=C.concat();for(var ve=!0,Ne=0;Ne<C.length;++Ne){var Ue=C[Ne];if(Ue&&!Ue.da&&Ue.capture==F){var St=Ue.listener,jt=Ue.ha||Ue.src;Ue.fa&&De(f.i,Ue),ve=St.call(jt,X)!==!1&&ve}}return ve&&!X.defaultPrevented}function ot(f,C,F){if(typeof f=="function")F&&(f=m(f,F));else if(f&&typeof f.handleEvent=="function")f=m(f.handleEvent,f);else throw Error("Invalid listener argument");return 2147483647<Number(C)?-1:o.setTimeout(f,C||0)}function ct(f){f.g=ot(()=>{f.g=null,f.i&&(f.i=!1,ct(f))},f.l);const C=f.h;f.h=null,f.m.apply(null,C)}class ze extends R{constructor(C,F){super(),this.m=C,this.l=F,this.h=null,this.i=!1,this.g=null}j(C){this.h=arguments,this.g?this.i=!0:ct(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function _e(f){R.call(this),this.h=f,this.g={}}x(_e,R);var He=[];function mt(f){B(f.g,function(C,F){this.g.hasOwnProperty(F)&&Ee(C)},f),f.g={}}_e.prototype.N=function(){_e.aa.N.call(this),mt(this)},_e.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ft=o.JSON.stringify,Tt=o.JSON.parse,Vn=class{stringify(f){return o.JSON.stringify(f,void 0)}parse(f){return o.JSON.parse(f,void 0)}};function xt(){}xt.prototype.h=null;function vr(f){return f.h||(f.h=f.i())}function Bt(){}var Wn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Nn(){$.call(this,"d")}x(Nn,$);function Dt(){$.call(this,"c")}x(Dt,$);var lt={},Ct=null;function Rr(){return Ct=Ct||new tt}lt.La="serverreachability";function Jt(f){$.call(this,lt.La,f)}x(Jt,$);function mn(f){const C=Rr();ut(C,new Jt(C))}lt.STAT_EVENT="statevent";function di(f,C){$.call(this,lt.STAT_EVENT,f),this.stat=C}x(di,$);function nt(f){const C=Rr();ut(C,new di(C,f))}lt.Ma="timingevent";function Qr(f,C){$.call(this,lt.Ma,f),this.size=C}x(Qr,$);function yr(f,C){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){f()},C)}function Un(){this.g=!0}Un.prototype.xa=function(){this.g=!1};function Cn(f,C,F,X,ve,Ne){f.info(function(){if(f.g)if(Ne)for(var Ue="",St=Ne.split("&"),jt=0;jt<St.length;jt++){var Nt=St[jt].split("=");if(1<Nt.length){var zt=Nt[0];Nt=Nt[1];var Zt=zt.split("_");Ue=2<=Zt.length&&Zt[1]=="type"?Ue+(zt+"="+Nt+"&"):Ue+(zt+"=redacted&")}}else Ue=null;else Ue=Ne;return"XMLHTTP REQ ("+X+") [attempt "+ve+"]: "+C+`
`+F+`
`+Ue})}function An(f,C,F,X,ve,Ne,Ue){f.info(function(){return"XMLHTTP RESP ("+X+") [ attempt "+ve+"]: "+C+`
`+F+`
`+Ne+" "+Ue})}function Bn(f,C,F,X){f.info(function(){return"XMLHTTP TEXT ("+C+"): "+$i(f,F)+(X?" "+X:"")})}function Ua(f,C){f.info(function(){return"TIMEOUT: "+C})}Un.prototype.info=function(){};function $i(f,C){if(!f.g)return C;if(!C)return null;try{var F=JSON.parse(C);if(F){for(f=0;f<F.length;f++)if(Array.isArray(F[f])){var X=F[f];if(!(2>X.length)){var ve=X[1];if(Array.isArray(ve)&&!(1>ve.length)){var Ne=ve[0];if(Ne!="noop"&&Ne!="stop"&&Ne!="close")for(var Ue=1;Ue<ve.length;Ue++)ve[Ue]=""}}}}return ft(F)}catch{return C}}var wr={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Yr={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Dr;function Fr(){}x(Fr,xt),Fr.prototype.g=function(){return new XMLHttpRequest},Fr.prototype.i=function(){return{}},Dr=new Fr;function Pn(f,C,F,X){this.j=f,this.i=C,this.l=F,this.R=X||1,this.U=new _e(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new fi}function fi(){this.i=null,this.g="",this.h=!1}var ws={},_s={};function bs(f,C,F){f.L=1,f.v=sa(Or(C)),f.m=F,f.P=!0,ea(f,null)}function ea(f,C){f.F=Date.now(),Ba(f),f.A=Or(f.v);var F=f.A,X=f.R;Array.isArray(X)||(X=[String(X)]),wt(F.i,"t",X),f.C=0,F=f.j.J,f.h=new fi,f.g=q(f.j,F?C:null,!f.m),0<f.O&&(f.M=new ze(m(f.Y,f,f.g),f.O)),C=f.U,F=f.g,X=f.ca;var ve="readystatechange";Array.isArray(ve)||(ve&&(He[0]=ve.toString()),ve=He);for(var Ne=0;Ne<ve.length;Ne++){var Ue=oe(F,ve[Ne],X||C.handleEvent,!1,C.h||C);if(!Ue)break;C.g[Ue.key]=Ue}C=f.H?y(f.H):{},f.m?(f.u||(f.u="POST"),C["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.A,f.u,f.m,C)):(f.u="GET",f.g.ea(f.A,f.u,null,C)),mn(),Cn(f.i,f.u,f.A,f.l,f.R,f.m)}Pn.prototype.ca=function(f){f=f.target;const C=this.M;C&&Gn(f)==3?C.j():this.Y(f)},Pn.prototype.Y=function(f){try{if(f==this.g)e:{const Zt=Gn(this.g);var C=this.g.Ba();const Zi=this.g.Z();if(!(3>Zt)&&(Zt!=3||this.g&&(this.h.h||this.g.oa()||wc(this.g)))){this.J||Zt!=4||C==7||(C==8||0>=Zi?mn(3):mn(2)),xs(this);var F=this.g.Z();this.X=F;t:if(ta(this)){var X=wc(this.g);f="";var ve=X.length,Ne=Gn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Hi(this),Ss(this);var Ue="";break t}this.h.i=new o.TextDecoder}for(C=0;C<ve;C++)this.h.h=!0,f+=this.h.i.decode(X[C],{stream:!(Ne&&C==ve-1)});X.length=0,this.h.g+=f,this.C=0,Ue=this.h.g}else Ue=this.g.oa();if(this.o=F==200,An(this.i,this.u,this.A,this.l,this.R,Zt,F),this.o){if(this.T&&!this.K){t:{if(this.g){var St,jt=this.g;if((St=jt.g?jt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!N(St)){var Nt=St;break t}}Nt=null}if(F=Nt)Bn(this.i,this.l,F,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,na(this,F);else{this.o=!1,this.s=3,nt(12),Hi(this),Ss(this);break e}}if(this.P){F=!0;let ar;for(;!this.J&&this.C<Ue.length;)if(ar=uc(this,Ue),ar==_s){Zt==4&&(this.s=4,nt(14),F=!1),Bn(this.i,this.l,null,"[Incomplete Response]");break}else if(ar==ws){this.s=4,nt(15),Bn(this.i,this.l,Ue,"[Invalid Chunk]"),F=!1;break}else Bn(this.i,this.l,ar,null),na(this,ar);if(ta(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Zt!=4||Ue.length!=0||this.h.h||(this.s=1,nt(16),F=!1),this.o=this.o&&F,!F)Bn(this.i,this.l,Ue,"[Invalid Chunked Response]"),Hi(this),Ss(this);else if(0<Ue.length&&!this.W){this.W=!0;var zt=this.j;zt.g==this&&zt.ba&&!zt.M&&(zt.j.info("Great, no buffering proxy detected. Bytes received: "+Ue.length),to(zt),zt.M=!0,nt(11))}}else Bn(this.i,this.l,Ue,null),na(this,Ue);Zt==4&&Hi(this),this.o&&!this.J&&(Zt==4?Ts(this.j,this):(this.o=!1,Ba(this)))}else Es(this.g),F==400&&0<Ue.indexOf("Unknown SID")?(this.s=3,nt(12)):(this.s=0,nt(13)),Hi(this),Ss(this)}}}catch{}finally{}};function ta(f){return f.g?f.u=="GET"&&f.L!=2&&f.j.Ca:!1}function uc(f,C){var F=f.C,X=C.indexOf(`
`,F);return X==-1?_s:(F=Number(C.substring(F,X)),isNaN(F)?ws:(X+=1,X+F>C.length?_s:(C=C.slice(X,X+F),f.C=X+F,C)))}Pn.prototype.cancel=function(){this.J=!0,Hi(this)};function Ba(f){f.S=Date.now()+f.I,hc(f,f.I)}function hc(f,C){if(f.B!=null)throw Error("WatchDog timer not null");f.B=yr(m(f.ba,f),C)}function xs(f){f.B&&(o.clearTimeout(f.B),f.B=null)}Pn.prototype.ba=function(){this.B=null;const f=Date.now();0<=f-this.S?(Ua(this.i,this.A),this.L!=2&&(mn(),nt(17)),Hi(this),this.s=2,Ss(this)):hc(this,this.S-f)};function Ss(f){f.j.G==0||f.J||Ts(f.j,f)}function Hi(f){xs(f);var C=f.M;C&&typeof C.ma=="function"&&C.ma(),f.M=null,mt(f.U),f.g&&(C=f.g,f.g=null,C.abort(),C.ma())}function na(f,C){try{var F=f.j;if(F.G!=0&&(F.g==f||ol(F.h,f))){if(!f.K&&ol(F.h,f)&&F.G==3){try{var X=F.Da.g.parse(C)}catch{X=null}if(Array.isArray(X)&&X.length==3){var ve=X;if(ve[0]==0){e:if(!F.u){if(F.g)if(F.g.F+3e3<f.F)Xi(F),Ja(F);else break e;ua(F),nt(18)}}else F.za=ve[1],0<F.za-F.T&&37500>ve[2]&&F.F&&F.v==0&&!F.C&&(F.C=yr(m(F.Za,F),6e3));if(1>=ra(F.h)&&F.ca){try{F.ca()}catch{}F.ca=void 0}}else _r(F,11)}else if((f.K||F.g==f)&&Xi(F),!N(C))for(ve=F.Da.g.parse(C),C=0;C<ve.length;C++){let Nt=ve[C];if(F.T=Nt[0],Nt=Nt[1],F.G==2)if(Nt[0]=="c"){F.K=Nt[1],F.ia=Nt[2];const zt=Nt[3];zt!=null&&(F.la=zt,F.j.info("VER="+F.la));const Zt=Nt[4];Zt!=null&&(F.Aa=Zt,F.j.info("SVER="+F.Aa));const Zi=Nt[5];Zi!=null&&typeof Zi=="number"&&0<Zi&&(X=1.5*Zi,F.L=X,F.j.info("backChannelRequestTimeoutMs_="+X)),X=F;const ar=f.g;if(ar){const Is=ar.g?ar.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Is){var Ne=X.h;Ne.g||Is.indexOf("spdy")==-1&&Is.indexOf("quic")==-1&&Is.indexOf("h2")==-1||(Ne.j=Ne.l,Ne.g=new Set,Ne.h&&(on(Ne,Ne.h),Ne.h=null))}if(X.D){const Cs=ar.g?ar.g.getResponseHeader("X-HTTP-Session-Id"):null;Cs&&(X.ya=Cs,$t(X.I,X.D,Cs))}}F.G=3,F.l&&F.l.ua(),F.ba&&(F.R=Date.now()-f.F,F.j.info("Handshake RTT: "+F.R+"ms")),X=F;var Ue=f;if(X.qa=_(X,X.J?X.ia:null,X.W),Ue.K){ll(X.h,Ue);var St=Ue,jt=X.L;jt&&(St.I=jt),St.B&&(xs(St),Ba(St)),X.g=Ue}else eo(X);0<F.i.length&&Xa(F)}else Nt[0]!="stop"&&Nt[0]!="close"||_r(F,7);else F.G==3&&(Nt[0]=="stop"||Nt[0]=="close"?Nt[0]=="stop"?_r(F,7):Ji(F):Nt[0]!="noop"&&F.l&&F.l.ta(Nt),F.v=0)}}mn(4)}catch{}}var Qu=class{constructor(f,C){this.g=f,this.map=C}};function al(f){this.l=f||10,o.PerformanceNavigationTiming?(f=o.performance.getEntriesByType("navigation"),f=0<f.length&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function dc(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function ra(f){return f.h?1:f.g?f.g.size:0}function ol(f,C){return f.h?f.h==C:f.g?f.g.has(C):!1}function on(f,C){f.g?f.g.add(C):f.h=C}function ll(f,C){f.h&&f.h==C?f.h=null:f.g&&f.g.has(C)&&f.g.delete(C)}al.prototype.cancel=function(){if(this.i=cl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const f of this.g.values())f.cancel();this.g.clear()}};function cl(f){if(f.h!=null)return f.i.concat(f.h.D);if(f.g!=null&&f.g.size!==0){let C=f.i;for(const F of f.g.values())C=C.concat(F.D);return C}return b(f.i)}function fc(f){if(f.V&&typeof f.V=="function")return f.V();if(typeof Map<"u"&&f instanceof Map||typeof Set<"u"&&f instanceof Set)return Array.from(f.values());if(typeof f=="string")return f.split("");if(l(f)){for(var C=[],F=f.length,X=0;X<F;X++)C.push(f[X]);return C}C=[],F=0;for(X in f)C[F++]=f[X];return C}function ul(f){if(f.na&&typeof f.na=="function")return f.na();if(!f.V||typeof f.V!="function"){if(typeof Map<"u"&&f instanceof Map)return Array.from(f.keys());if(!(typeof Set<"u"&&f instanceof Set)){if(l(f)||typeof f=="string"){var C=[];f=f.length;for(var F=0;F<f;F++)C.push(F);return C}C=[],F=0;for(const X in f)C[F++]=X;return C}}}function pc(f,C){if(f.forEach&&typeof f.forEach=="function")f.forEach(C,void 0);else if(l(f)||typeof f=="string")Array.prototype.forEach.call(f,C,void 0);else for(var F=ul(f),X=fc(f),ve=X.length,Ne=0;Ne<ve;Ne++)C.call(void 0,X[Ne],F&&F[Ne],f)}var Jr=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ka(f,C){if(f){f=f.split("&");for(var F=0;F<f.length;F++){var X=f[F].indexOf("="),ve=null;if(0<=X){var Ne=f[F].substring(0,X);ve=f[F].substring(X+1)}else Ne=f[F];C(Ne,ve?decodeURIComponent(ve.replace(/\+/g," ")):"")}}}function En(f){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,f instanceof En){this.h=f.h,ia(this,f.j),this.o=f.o,this.g=f.g,qa(this,f.s),this.l=f.l;var C=f.i,F=new Ns;F.i=C.i,C.g&&(F.g=new Map(C.g),F.h=C.h),hl(this,F),this.m=f.m}else f&&(C=String(f).match(Jr))?(this.h=!1,ia(this,C[1]||"",!0),this.o=aa(C[2]||""),this.g=aa(C[3]||"",!0),qa(this,C[4]),this.l=aa(C[5]||"",!0),hl(this,C[6]||"",!0),this.m=aa(C[7]||"")):(this.h=!1,this.i=new Ns(null,this.h))}En.prototype.toString=function(){var f=[],C=this.j;C&&f.push(Wi(C,mc,!0),":");var F=this.g;return(F||C=="file")&&(f.push("//"),(C=this.o)&&f.push(Wi(C,mc,!0),"@"),f.push(encodeURIComponent(String(F)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),F=this.s,F!=null&&f.push(":",String(F))),(F=this.l)&&(this.g&&F.charAt(0)!="/"&&f.push("/"),f.push(Wi(F,F.charAt(0)=="/"?Gi:Ju,!0))),(F=this.i.toString())&&f.push("?",F),(F=this.m)&&f.push("#",Wi(F,$a)),f.join("")};function Or(f){return new En(f)}function ia(f,C,F){f.j=F?aa(C,!0):C,f.j&&(f.j=f.j.replace(/:$/,""))}function qa(f,C){if(C){if(C=Number(C),isNaN(C)||0>C)throw Error("Bad port number "+C);f.s=C}else f.s=null}function hl(f,C,F){C instanceof Ns?(f.i=C,Xu(f.i,f.h)):(F||(C=Wi(C,za)),f.i=new Ns(C,f.h))}function $t(f,C,F){f.i.set(C,F)}function sa(f){return $t(f,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),f}function aa(f,C){return f?C?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function Wi(f,C,F){return typeof f=="string"?(f=encodeURI(f).replace(C,Yu),F&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function Yu(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var mc=/[#\/\?@]/g,Ju=/[#\?:]/g,Gi=/[#\?]/g,za=/[#\?@]/g,$a=/#/g;function Ns(f,C){this.h=this.g=null,this.i=f||null,this.j=!!C}function ln(f){f.g||(f.g=new Map,f.h=0,f.i&&Ka(f.i,function(C,F){f.add(decodeURIComponent(C.replace(/\+/g," ")),F)}))}t=Ns.prototype,t.add=function(f,C){ln(this),this.i=null,f=As(this,f);var F=this.g.get(f);return F||this.g.set(f,F=[]),F.push(C),this.h+=1,this};function gc(f,C){ln(f),C=As(f,C),f.g.has(C)&&(f.i=null,f.h-=f.g.get(C).length,f.g.delete(C))}function dl(f,C){return ln(f),C=As(f,C),f.g.has(C)}t.forEach=function(f,C){ln(this),this.g.forEach(function(F,X){F.forEach(function(ve){f.call(C,ve,X,this)},this)},this)},t.na=function(){ln(this);const f=Array.from(this.g.values()),C=Array.from(this.g.keys()),F=[];for(let X=0;X<C.length;X++){const ve=f[X];for(let Ne=0;Ne<ve.length;Ne++)F.push(C[X])}return F},t.V=function(f){ln(this);let C=[];if(typeof f=="string")dl(this,f)&&(C=C.concat(this.g.get(As(this,f))));else{f=Array.from(this.g.values());for(let F=0;F<f.length;F++)C=C.concat(f[F])}return C},t.set=function(f,C){return ln(this),this.i=null,f=As(this,f),dl(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[C]),this.h+=1,this},t.get=function(f,C){return f?(f=this.V(f),0<f.length?String(f[0]):C):C};function wt(f,C,F){gc(f,C),0<F.length&&(f.i=null,f.g.set(As(f,C),b(F)),f.h+=F.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],C=Array.from(this.g.keys());for(var F=0;F<C.length;F++){var X=C[F];const Ne=encodeURIComponent(String(X)),Ue=this.V(X);for(X=0;X<Ue.length;X++){var ve=Ne;Ue[X]!==""&&(ve+="="+encodeURIComponent(String(Ue[X]))),f.push(ve)}}return this.i=f.join("&")};function As(f,C){return C=String(C),f.j&&(C=C.toLowerCase()),C}function Xu(f,C){C&&!f.j&&(ln(f),f.i=null,f.g.forEach(function(F,X){var ve=X.toLowerCase();X!=ve&&(gc(this,X),wt(this,ve,F))},f)),f.j=C}function Ii(f,C){const F=new Un;if(o.Image){const X=new Image;X.onload=g(pi,F,"TestLoadImage: loaded",!0,C,X),X.onerror=g(pi,F,"TestLoadImage: error",!1,C,X),X.onabort=g(pi,F,"TestLoadImage: abort",!1,C,X),X.ontimeout=g(pi,F,"TestLoadImage: timeout",!1,C,X),o.setTimeout(function(){X.ontimeout&&X.ontimeout()},1e4),X.src=f}else C(!1)}function vc(f,C){const F=new Un,X=new AbortController,ve=setTimeout(()=>{X.abort(),pi(F,"TestPingServer: timeout",!1,C)},1e4);fetch(f,{signal:X.signal}).then(Ne=>{clearTimeout(ve),Ne.ok?pi(F,"TestPingServer: ok",!0,C):pi(F,"TestPingServer: server error",!1,C)}).catch(()=>{clearTimeout(ve),pi(F,"TestPingServer: error",!1,C)})}function pi(f,C,F,X,ve){try{ve&&(ve.onload=null,ve.onerror=null,ve.onabort=null,ve.ontimeout=null),X(F)}catch{}}function Ha(){this.g=new Vn}function fl(f,C,F){const X=F||"";try{pc(f,function(ve,Ne){let Ue=ve;u(ve)&&(Ue=ft(ve)),C.push(X+Ne+"="+encodeURIComponent(Ue))})}catch(ve){throw C.push(X+"type="+encodeURIComponent("_badmap")),ve}}function Wa(f){this.l=f.Ub||null,this.j=f.eb||!1}x(Wa,xt),Wa.prototype.g=function(){return new Ga(this.l,this.j)},Wa.prototype.i=function(f){return function(){return f}}({});function Ga(f,C){tt.call(this),this.D=f,this.o=C,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}x(Ga,tt),t=Ga.prototype,t.open=function(f,C){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=f,this.A=C,this.readyState=1,mi(this)},t.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const C={headers:this.u,method:this.B,credentials:this.m,cache:void 0};f&&(C.body=f),(this.D||o).fetch(new Request(this.A,C)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Qi(this)),this.readyState=0},t.Sa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,mi(this)),this.g&&(this.readyState=3,mi(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;yc(this)}else f.text().then(this.Ra.bind(this),this.ga.bind(this))};function yc(f){f.j.read().then(f.Pa.bind(f)).catch(f.ga.bind(f))}t.Pa=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var C=f.value?f.value:new Uint8Array(0);(C=this.v.decode(C,{stream:!f.done}))&&(this.response=this.responseText+=C)}f.done?Qi(this):mi(this),this.readyState==3&&yc(this)}},t.Ra=function(f){this.g&&(this.response=this.responseText=f,Qi(this))},t.Qa=function(f){this.g&&(this.response=f,Qi(this))},t.ga=function(){this.g&&Qi(this)};function Qi(f){f.readyState=4,f.l=null,f.j=null,f.v=null,mi(f)}t.setRequestHeader=function(f,C){this.u.append(f,C)},t.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],C=this.h.entries();for(var F=C.next();!F.done;)F=F.value,f.push(F[0]+": "+F[1]),F=C.next();return f.join(`\r
`)};function mi(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(Ga.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function Yi(f){let C="";return B(f,function(F,X){C+=X,C+=":",C+=F,C+=`\r
`}),C}function pl(f,C,F){e:{for(X in F){var X=!1;break e}X=!0}X||(F=Yi(F),typeof f=="string"?F!=null&&encodeURIComponent(String(F)):$t(f,C,F))}function qt(f){tt.call(this),this.headers=new Map,this.o=f||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}x(qt,tt);var ml=/^https?$/i,Qa=["POST","PUT"];t=qt.prototype,t.Ha=function(f){this.J=f},t.ea=function(f,C,F,X){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);C=C?C.toUpperCase():"GET",this.D=f,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Dr.g(),this.v=this.o?vr(this.o):vr(Dr),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(C,String(f),!0),this.B=!1}catch(Ne){gl(this,Ne);return}if(f=F||"",F=new Map(this.headers),X)if(Object.getPrototypeOf(X)===Object.prototype)for(var ve in X)F.set(ve,X[ve]);else if(typeof X.keys=="function"&&typeof X.get=="function")for(const Ne of X.keys())F.set(Ne,X.get(Ne));else throw Error("Unknown input type for opt_headers: "+String(X));X=Array.from(F.keys()).find(Ne=>Ne.toLowerCase()=="content-type"),ve=o.FormData&&f instanceof o.FormData,!(0<=Array.prototype.indexOf.call(Qa,C,void 0))||X||ve||F.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Ne,Ue]of F)this.g.setRequestHeader(Ne,Ue);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{gi(this),this.u=!0,this.g.send(f),this.u=!1}catch(Ne){gl(this,Ne)}};function gl(f,C){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=C,f.m=5,vl(f),oa(f)}function vl(f){f.A||(f.A=!0,ut(f,"complete"),ut(f,"error"))}t.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=f||7,ut(this,"complete"),ut(this,"abort"),oa(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),oa(this,!0)),qt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?yl(this):this.bb())},t.bb=function(){yl(this)};function yl(f){if(f.h&&typeof a<"u"&&(!f.v[1]||Gn(f)!=4||f.Z()!=2)){if(f.u&&Gn(f)==4)ot(f.Ea,0,f);else if(ut(f,"readystatechange"),Gn(f)==4){f.h=!1;try{const Ue=f.Z();e:switch(Ue){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var C=!0;break e;default:C=!1}var F;if(!(F=C)){var X;if(X=Ue===0){var ve=String(f.D).match(Jr)[1]||null;!ve&&o.self&&o.self.location&&(ve=o.self.location.protocol.slice(0,-1)),X=!ml.test(ve?ve.toLowerCase():"")}F=X}if(F)ut(f,"complete"),ut(f,"success");else{f.m=6;try{var Ne=2<Gn(f)?f.g.statusText:""}catch{Ne=""}f.l=Ne+" ["+f.Z()+"]",vl(f)}}finally{oa(f)}}}}function oa(f,C){if(f.g){gi(f);const F=f.g,X=f.v[0]?()=>{}:null;f.g=null,f.v=null,C||ut(f,"ready");try{F.onreadystatechange=X}catch{}}}function gi(f){f.I&&(o.clearTimeout(f.I),f.I=null)}t.isActive=function(){return!!this.g};function Gn(f){return f.g?f.g.readyState:0}t.Z=function(){try{return 2<Gn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(f){if(this.g){var C=this.g.responseText;return f&&C.indexOf(f)==0&&(C=C.substring(f.length)),Tt(C)}};function wc(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.H){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function Es(f){const C={};f=(f.g&&2<=Gn(f)&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let X=0;X<f.length;X++){if(N(f[X]))continue;var F=A(f[X]);const ve=F[0];if(F=F[1],typeof F!="string")continue;F=F.trim();const Ne=C[ve]||[];C[ve]=Ne,Ne.push(F)}P(C,function(X){return X.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function sr(f,C,F){return F&&F.internalChannelParams&&F.internalChannelParams[f]||C}function Ya(f){this.Aa=0,this.i=[],this.j=new Un,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=sr("failFast",!1,f),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=sr("baseRetryDelayMs",5e3,f),this.cb=sr("retryDelaySeedMs",1e4,f),this.Wa=sr("forwardChannelMaxRetries",2,f),this.wa=sr("forwardChannelRequestTimeoutMs",2e4,f),this.pa=f&&f.xmlHttpFactory||void 0,this.Xa=f&&f.Tb||void 0,this.Ca=f&&f.useFetchStreams||!1,this.L=void 0,this.J=f&&f.supportsCrossDomainXhr||!1,this.K="",this.h=new al(f&&f.concurrentRequestLimit),this.Da=new Ha,this.P=f&&f.fastHandshake||!1,this.O=f&&f.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=f&&f.Rb||!1,f&&f.xa&&this.j.xa(),f&&f.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&f&&f.detectBufferingProxy||!1,this.ja=void 0,f&&f.longPollingTimeout&&0<f.longPollingTimeout&&(this.ja=f.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Ya.prototype,t.la=8,t.G=1,t.connect=function(f,C,F,X){nt(0),this.W=f,this.H=C||{},F&&X!==void 0&&(this.H.OSID=F,this.H.OAID=X),this.F=this.X,this.I=_(this,null,this.W),Xa(this)};function Ji(f){if(la(f),f.G==3){var C=f.U++,F=Or(f.I);if($t(F,"SID",f.K),$t(F,"RID",C),$t(F,"TYPE","terminate"),ks(f,F),C=new Pn(f,f.j,C),C.L=2,C.v=sa(Or(F)),F=!1,o.navigator&&o.navigator.sendBeacon)try{F=o.navigator.sendBeacon(C.v.toString(),"")}catch{}!F&&o.Image&&(new Image().src=C.v,F=!0),F||(C.g=q(C.j,null),C.g.ea(C.v)),C.F=Date.now(),Ba(C)}ro(f)}function Ja(f){f.g&&(to(f),f.g.cancel(),f.g=null)}function la(f){Ja(f),f.u&&(o.clearTimeout(f.u),f.u=null),Xi(f),f.h.cancel(),f.s&&(typeof f.s=="number"&&o.clearTimeout(f.s),f.s=null)}function Xa(f){if(!dc(f.h)&&!f.s){f.s=!0;var C=f.Ga;U||te(),K||(U(),K=!0),H.add(C,f),f.B=0}}function wl(f,C){return ra(f.h)>=f.h.j-(f.s?1:0)?!1:f.s?(f.i=C.D.concat(f.i),!0):f.G==1||f.G==2||f.B>=(f.Va?0:f.Wa)?!1:(f.s=yr(m(f.Ga,f,C),no(f,f.B)),f.B++,!0)}t.Ga=function(f){if(this.s)if(this.s=null,this.G==1){if(!f){this.U=Math.floor(1e5*Math.random()),f=this.U++;const ve=new Pn(this,this.j,f);let Ne=this.o;if(this.S&&(Ne?(Ne=y(Ne),L(Ne,this.S)):Ne=this.S),this.m!==null||this.O||(ve.H=Ne,Ne=null),this.P)e:{for(var C=0,F=0;F<this.i.length;F++){t:{var X=this.i[F];if("__data__"in X.map&&(X=X.map.__data__,typeof X=="string")){X=X.length;break t}X=void 0}if(X===void 0)break;if(C+=X,4096<C){C=F;break e}if(C===4096||F===this.i.length-1){C=F+1;break e}}C=1e3}else C=1e3;C=ca(this,ve,C),F=Or(this.I),$t(F,"RID",f),$t(F,"CVER",22),this.D&&$t(F,"X-HTTP-Session-Id",this.D),ks(this,F),Ne&&(this.O?C="headers="+encodeURIComponent(String(Yi(Ne)))+"&"+C:this.m&&pl(F,this.m,Ne)),on(this.h,ve),this.Ua&&$t(F,"TYPE","init"),this.P?($t(F,"$req",C),$t(F,"SID","null"),ve.T=!0,bs(ve,F,null)):bs(ve,F,C),this.G=2}}else this.G==3&&(f?Za(this,f):this.i.length==0||dc(this.h)||Za(this))};function Za(f,C){var F;C?F=C.l:F=f.U++;const X=Or(f.I);$t(X,"SID",f.K),$t(X,"RID",F),$t(X,"AID",f.T),ks(f,X),f.m&&f.o&&pl(X,f.m,f.o),F=new Pn(f,f.j,F,f.B+1),f.m===null&&(F.H=f.o),C&&(f.i=C.D.concat(f.i)),C=ca(f,F,1e3),F.I=Math.round(.5*f.wa)+Math.round(.5*f.wa*Math.random()),on(f.h,F),bs(F,X,C)}function ks(f,C){f.H&&B(f.H,function(F,X){$t(C,X,F)}),f.l&&pc({},function(F,X){$t(C,X,F)})}function ca(f,C,F){F=Math.min(f.i.length,F);var X=f.l?m(f.l.Na,f.l,f):null;e:{var ve=f.i;let Ne=-1;for(;;){const Ue=["count="+F];Ne==-1?0<F?(Ne=ve[0].g,Ue.push("ofs="+Ne)):Ne=0:Ue.push("ofs="+Ne);let St=!0;for(let jt=0;jt<F;jt++){let Nt=ve[jt].g;const zt=ve[jt].map;if(Nt-=Ne,0>Nt)Ne=Math.max(0,ve[jt].g-100),St=!1;else try{fl(zt,Ue,"req"+Nt+"_")}catch{X&&X(zt)}}if(St){X=Ue.join("&");break e}}}return f=f.i.splice(0,F),C.D=f,X}function eo(f){if(!f.g&&!f.u){f.Y=1;var C=f.Fa;U||te(),K||(U(),K=!0),H.add(C,f),f.v=0}}function ua(f){return f.g||f.u||3<=f.v?!1:(f.Y++,f.u=yr(m(f.Fa,f),no(f,f.v)),f.v++,!0)}t.Fa=function(){if(this.u=null,_c(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var f=2*this.R;this.j.info("BP detection timer enabled: "+f),this.A=yr(m(this.ab,this),f)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,nt(10),Ja(this),_c(this))};function to(f){f.A!=null&&(o.clearTimeout(f.A),f.A=null)}function _c(f){f.g=new Pn(f,f.j,"rpc",f.Y),f.m===null&&(f.g.H=f.o),f.g.O=0;var C=Or(f.qa);$t(C,"RID","rpc"),$t(C,"SID",f.K),$t(C,"AID",f.T),$t(C,"CI",f.F?"0":"1"),!f.F&&f.ja&&$t(C,"TO",f.ja),$t(C,"TYPE","xmlhttp"),ks(f,C),f.m&&f.o&&pl(C,f.m,f.o),f.L&&(f.g.I=f.L);var F=f.g;f=f.ia,F.L=1,F.v=sa(Or(C)),F.m=null,F.P=!0,ea(F,f)}t.Za=function(){this.C!=null&&(this.C=null,Ja(this),ua(this),nt(19))};function Xi(f){f.C!=null&&(o.clearTimeout(f.C),f.C=null)}function Ts(f,C){var F=null;if(f.g==C){Xi(f),to(f),f.g=null;var X=2}else if(ol(f.h,C))F=C.D,ll(f.h,C),X=1;else return;if(f.G!=0){if(C.o)if(X==1){F=C.m?C.m.length:0,C=Date.now()-C.F;var ve=f.B;X=Rr(),ut(X,new Qr(X,F)),Xa(f)}else eo(f);else if(ve=C.s,ve==3||ve==0&&0<C.X||!(X==1&&wl(f,C)||X==2&&ua(f)))switch(F&&0<F.length&&(C=f.h,C.i=C.i.concat(F)),ve){case 1:_r(f,5);break;case 4:_r(f,10);break;case 3:_r(f,6);break;default:_r(f,2)}}}function no(f,C){let F=f.Ta+Math.floor(Math.random()*f.cb);return f.isActive()||(F*=2),F*C}function _r(f,C){if(f.j.info("Error code "+C),C==2){var F=m(f.fb,f),X=f.Xa;const ve=!X;X=new En(X||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||ia(X,"https"),sa(X),ve?Ii(X.toString(),F):vc(X.toString(),F)}else nt(2);f.G=0,f.l&&f.l.sa(C),ro(f),la(f)}t.fb=function(f){f?(this.j.info("Successfully pinged google.com"),nt(2)):(this.j.info("Failed to ping google.com"),nt(1))};function ro(f){if(f.G=0,f.ka=[],f.l){const C=cl(f.h);(C.length!=0||f.i.length!=0)&&(k(f.ka,C),k(f.ka,f.i),f.h.i.length=0,b(f.i),f.i.length=0),f.l.ra()}}function _(f,C,F){var X=F instanceof En?Or(F):new En(F);if(X.g!="")C&&(X.g=C+"."+X.g),qa(X,X.s);else{var ve=o.location;X=ve.protocol,C=C?C+"."+ve.hostname:ve.hostname,ve=+ve.port;var Ne=new En(null);X&&ia(Ne,X),C&&(Ne.g=C),ve&&qa(Ne,ve),F&&(Ne.l=F),X=Ne}return F=f.D,C=f.ya,F&&C&&$t(X,F,C),$t(X,"VER",f.la),ks(f,X),X}function q(f,C,F){if(C&&!f.J)throw Error("Can't create secondary domain capable XhrIo object.");return C=f.Ca&&!f.pa?new qt(new Wa({eb:F})):new qt(f.pa),C.Ha(f.J),C}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function se(){}t=se.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function ce(){}ce.prototype.g=function(f,C){return new ye(f,C)};function ye(f,C){tt.call(this),this.g=new Ya(C),this.l=f,this.h=C&&C.messageUrlParams||null,f=C&&C.messageHeaders||null,C&&C.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=C&&C.initMessageHeaders||null,C&&C.messageContentType&&(f?f["X-WebChannel-Content-Type"]=C.messageContentType:f={"X-WebChannel-Content-Type":C.messageContentType}),C&&C.va&&(f?f["X-WebChannel-Client-Profile"]=C.va:f={"X-WebChannel-Client-Profile":C.va}),this.g.S=f,(f=C&&C.Sb)&&!N(f)&&(this.g.m=f),this.v=C&&C.supportsCrossDomainXhr||!1,this.u=C&&C.sendRawJson||!1,(C=C&&C.httpSessionIdParam)&&!N(C)&&(this.g.D=C,f=this.h,f!==null&&C in f&&(f=this.h,C in f&&delete f[C])),this.j=new Ye(this)}x(ye,tt),ye.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},ye.prototype.close=function(){Ji(this.g)},ye.prototype.o=function(f){var C=this.g;if(typeof f=="string"){var F={};F.__data__=f,f=F}else this.u&&(F={},F.__data__=ft(f),f=F);C.i.push(new Qu(C.Ya++,f)),C.G==3&&Xa(C)},ye.prototype.N=function(){this.g.l=null,delete this.j,Ji(this.g),delete this.g,ye.aa.N.call(this)};function Te(f){Nn.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var C=f.__sm__;if(C){e:{for(const F in C){f=F;break e}f=void 0}(this.i=f)&&(f=this.i,C=C!==null&&f in C?C[f]:void 0),this.data=C}else this.data=f}x(Te,Nn);function Ve(){Dt.call(this),this.status=1}x(Ve,Dt);function Ye(f){this.g=f}x(Ye,se),Ye.prototype.ua=function(){ut(this.g,"a")},Ye.prototype.ta=function(f){ut(this.g,new Te(f))},Ye.prototype.sa=function(f){ut(this.g,new Ve)},Ye.prototype.ra=function(){ut(this.g,"b")},ce.prototype.createWebChannel=ce.prototype.g,ye.prototype.send=ye.prototype.o,ye.prototype.open=ye.prototype.m,ye.prototype.close=ye.prototype.close,k3=function(){return new ce},E3=function(){return Rr()},A3=lt,D0={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},wr.NO_ERROR=0,wr.TIMEOUT=8,wr.HTTP_ERROR=6,lp=wr,Yr.COMPLETE="complete",N3=Yr,Bt.EventType=Wn,Wn.OPEN="a",Wn.CLOSE="b",Wn.ERROR="c",Wn.MESSAGE="d",tt.prototype.listen=tt.prototype.K,jh=Bt,qt.prototype.listenOnce=qt.prototype.L,qt.prototype.getLastError=qt.prototype.Ka,qt.prototype.getLastErrorCode=qt.prototype.Ba,qt.prototype.getStatus=qt.prototype.Z,qt.prototype.getResponseJson=qt.prototype.Oa,qt.prototype.getResponseText=qt.prototype.oa,qt.prototype.send=qt.prototype.ea,qt.prototype.setWithCredentials=qt.prototype.Ha,S3=qt}).apply(typeof Ff<"u"?Ff:typeof self<"u"?self:typeof window<"u"?window:{});const Vw="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Tr.UNAUTHENTICATED=new Tr(null),Tr.GOOGLE_CREDENTIALS=new Tr("google-credentials-uid"),Tr.FIRST_PARTY=new Tr("first-party-uid"),Tr.MOCK_USER=new Tr("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qu="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yl=new c2("@firebase/firestore");function xh(){return Yl.logLevel}function st(t,...e){if(Yl.logLevel<=Ft.DEBUG){const n=e.map(b2);Yl.debug(`Firestore (${qu}): ${t}`,...n)}}function Fa(t,...e){if(Yl.logLevel<=Ft.ERROR){const n=e.map(b2);Yl.error(`Firestore (${qu}): ${t}`,...n)}}function ku(t,...e){if(Yl.logLevel<=Ft.WARN){const n=e.map(b2);Yl.warn(`Firestore (${qu}): ${t}`,...n)}}function b2(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bt(t="Unexpected state"){const e=`FIRESTORE (${qu}) INTERNAL ASSERTION FAILED: `+t;throw Fa(e),new Error(e)}function Yt(t,e){t||bt()}function kt(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Re={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class et extends Ys{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ta{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T3{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Nj{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Tr.UNAUTHENTICATED))}shutdown(){}}class Aj{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class Ej{constructor(e){this.t=e,this.currentUser=Tr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Yt(this.o===void 0);let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new Ta;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Ta,e.enqueueRetryable(()=>i(this.currentUser))};const a=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},o=l=>{st("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(l=>o(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?o(l):(st("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Ta)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(st("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Yt(typeof r.accessToken=="string"),new T3(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Yt(e===null||typeof e=="string"),new Tr(e)}}class kj{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Tr.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Tj{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new kj(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Tr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Ij{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Cj{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Yt(this.o===void 0);const r=s=>{s.error!=null&&st("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const a=s.token!==this.R;return this.R=s.token,st("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{st("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):st("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Yt(typeof n.token=="string"),this.R=n.token,new Ij(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pj(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I3{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=Pj(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function Ut(t,e){return t<e?-1:t>e?1:0}function Tu(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xn{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new et(Re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new et(Re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new et(Re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new et(Re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Xn.fromMillis(Date.now())}static fromDate(e){return Xn.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Xn(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ut(this.nanoseconds,e.nanoseconds):Ut(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Et(e)}static min(){return new Et(new Xn(0,0))}static max(){return new Et(new Xn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _d{constructor(e,n,r){n===void 0?n=0:n>e.length&&bt(),r===void 0?r=e.length-n:r>e.length-n&&bt(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return _d.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof _d?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),a=n.get(i);if(s<a)return-1;if(s>a)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class un extends _d{construct(e,n,r){return new un(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new et(Re.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new un(n)}static emptyPath(){return new un([])}}const jj=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class dr extends _d{construct(e,n,r){return new dr(e,n,r)}static isValidIdentifier(e){return jj.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),dr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new dr(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new et(Re.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let a=!1;for(;i<e.length;){const o=e[i];if(o==="\\"){if(i+1===e.length)throw new et(Re.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new et(Re.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else o==="`"?(a=!a,i++):o!=="."||a?(r+=o,i++):(s(),i++)}if(s(),a)throw new et(Re.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new dr(n)}static emptyPath(){return new dr([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ht{constructor(e){this.path=e}static fromPath(e){return new ht(un.fromString(e))}static fromName(e){return new ht(un.fromString(e).popFirst(5))}static empty(){return new ht(un.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&un.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return un.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ht(new un(e.slice()))}}function Lj(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Et.fromTimestamp(r===1e9?new Xn(n+1,0):new Xn(n,r));return new Yo(i,ht.empty(),e)}function Rj(t){return new Yo(t.readTime,t.key,-1)}class Yo{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Yo(Et.min(),ht.empty(),-1)}static max(){return new Yo(Et.max(),ht.empty(),-1)}}function Dj(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ht.comparator(t.documentKey,e.documentKey),n!==0?n:Ut(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fj="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Oj{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Md(t){if(t.code!==Re.FAILED_PRECONDITION||t.message!==Fj)throw t;st("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Be{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&bt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Be((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof Be?n:Be.resolve(n)}catch(n){return Be.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):Be.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):Be.reject(n)}static resolve(e){return new Be((n,r)=>{n(e)})}static reject(e){return new Be((n,r)=>{r(e)})}static waitFor(e){return new Be((n,r)=>{let i=0,s=0,a=!1;e.forEach(o=>{++i,o.next(()=>{++s,a&&s===i&&n()},l=>r(l))}),a=!0,s===i&&n()})}static or(e){let n=Be.resolve(!1);for(const r of e)n=n.next(i=>i?Be.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new Be((r,i)=>{const s=e.length,a=new Array(s);let o=0;for(let l=0;l<s;l++){const u=l;n(e[u]).next(d=>{a[u]=d,++o,o===s&&r(a)},d=>i(d))}})}static doWhile(e,n){return new Be((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function Mj(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Vd(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x2{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}x2.oe=-1;function Km(t){return t==null}function em(t){return t===0&&1/t==-1/0}function Vj(t){return typeof t=="number"&&Number.isInteger(t)&&!em(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uw(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ic(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function C3(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xn{constructor(e,n){this.comparator=e,this.root=n||hr.EMPTY}insert(e,n){return new xn(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,hr.BLACK,null,null))}remove(e){return new xn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,hr.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Of(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Of(this.root,e,this.comparator,!1)}getReverseIterator(){return new Of(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Of(this.root,e,this.comparator,!0)}}class Of{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class hr{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??hr.RED,this.left=i??hr.EMPTY,this.right=s??hr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new hr(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return hr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return hr.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,hr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,hr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw bt();const e=this.left.check();if(e!==this.right.check())throw bt();return e+(this.isRed()?0:1)}}hr.EMPTY=null,hr.RED=!0,hr.BLACK=!1;hr.EMPTY=new class{constructor(){this.size=0}get key(){throw bt()}get value(){throw bt()}get color(){throw bt()}get left(){throw bt()}get right(){throw bt()}copy(e,n,r,i,s){return this}insert(e,n,r){return new hr(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr{constructor(e){this.comparator=e,this.data=new xn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Bw(this.data.getIterator())}getIteratorFrom(e){return new Bw(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof pr)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new pr(this.comparator);return n.data=e,n}}class Bw{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi{constructor(e){this.fields=e,e.sort(dr.comparator)}static empty(){return new xi([])}unionWith(e){let n=new pr(dr.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new xi(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Tu(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P3 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gr{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new P3("Invalid base64 string: "+s):s}}(e);return new gr(n)}static fromUint8Array(e){const n=function(i){let s="";for(let a=0;a<i.length;++a)s+=String.fromCharCode(i[a]);return s}(e);return new gr(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ut(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}gr.EMPTY_BYTE_STRING=new gr("");const Uj=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Jo(t){if(Yt(!!t),typeof t=="string"){let e=0;const n=Uj.exec(t);if(Yt(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Rn(t.seconds),nanos:Rn(t.nanos)}}function Rn(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Jl(t){return typeof t=="string"?gr.fromBase64String(t):gr.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S2(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function N2(t){const e=t.mapValue.fields.__previous_value__;return S2(e)?N2(e):e}function bd(t){const e=Jo(t.mapValue.fields.__local_write_time__.timestampValue);return new Xn(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bj{constructor(e,n,r,i,s,a,o,l,u){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=o,this.longPollingOptions=l,this.useFetchStreams=u}}class xd{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new xd("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof xd&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mf={mapValue:{}};function Xl(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?S2(t)?4:qj(t)?9007199254740991:Kj(t)?10:11:bt()}function Ws(t,e){if(t===e)return!0;const n=Xl(t);if(n!==Xl(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return bd(t).isEqual(bd(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const a=Jo(i.timestampValue),o=Jo(s.timestampValue);return a.seconds===o.seconds&&a.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Jl(i.bytesValue).isEqual(Jl(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Rn(i.geoPointValue.latitude)===Rn(s.geoPointValue.latitude)&&Rn(i.geoPointValue.longitude)===Rn(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Rn(i.integerValue)===Rn(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const a=Rn(i.doubleValue),o=Rn(s.doubleValue);return a===o?em(a)===em(o):isNaN(a)&&isNaN(o)}return!1}(t,e);case 9:return Tu(t.arrayValue.values||[],e.arrayValue.values||[],Ws);case 10:case 11:return function(i,s){const a=i.mapValue.fields||{},o=s.mapValue.fields||{};if(Uw(a)!==Uw(o))return!1;for(const l in a)if(a.hasOwnProperty(l)&&(o[l]===void 0||!Ws(a[l],o[l])))return!1;return!0}(t,e);default:return bt()}}function Sd(t,e){return(t.values||[]).find(n=>Ws(n,e))!==void 0}function Iu(t,e){if(t===e)return 0;const n=Xl(t),r=Xl(e);if(n!==r)return Ut(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ut(t.booleanValue,e.booleanValue);case 2:return function(s,a){const o=Rn(s.integerValue||s.doubleValue),l=Rn(a.integerValue||a.doubleValue);return o<l?-1:o>l?1:o===l?0:isNaN(o)?isNaN(l)?0:-1:1}(t,e);case 3:return Kw(t.timestampValue,e.timestampValue);case 4:return Kw(bd(t),bd(e));case 5:return Ut(t.stringValue,e.stringValue);case 6:return function(s,a){const o=Jl(s),l=Jl(a);return o.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,a){const o=s.split("/"),l=a.split("/");for(let u=0;u<o.length&&u<l.length;u++){const d=Ut(o[u],l[u]);if(d!==0)return d}return Ut(o.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,a){const o=Ut(Rn(s.latitude),Rn(a.latitude));return o!==0?o:Ut(Rn(s.longitude),Rn(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return qw(t.arrayValue,e.arrayValue);case 10:return function(s,a){var o,l,u,d;const p=s.fields||{},m=a.fields||{},g=(o=p.value)===null||o===void 0?void 0:o.arrayValue,x=(l=m.value)===null||l===void 0?void 0:l.arrayValue,b=Ut(((u=g==null?void 0:g.values)===null||u===void 0?void 0:u.length)||0,((d=x==null?void 0:x.values)===null||d===void 0?void 0:d.length)||0);return b!==0?b:qw(g,x)}(t.mapValue,e.mapValue);case 11:return function(s,a){if(s===Mf.mapValue&&a===Mf.mapValue)return 0;if(s===Mf.mapValue)return 1;if(a===Mf.mapValue)return-1;const o=s.fields||{},l=Object.keys(o),u=a.fields||{},d=Object.keys(u);l.sort(),d.sort();for(let p=0;p<l.length&&p<d.length;++p){const m=Ut(l[p],d[p]);if(m!==0)return m;const g=Iu(o[l[p]],u[d[p]]);if(g!==0)return g}return Ut(l.length,d.length)}(t.mapValue,e.mapValue);default:throw bt()}}function Kw(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ut(t,e);const n=Jo(t),r=Jo(e),i=Ut(n.seconds,r.seconds);return i!==0?i:Ut(n.nanos,r.nanos)}function qw(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=Iu(n[i],r[i]);if(s)return s}return Ut(n.length,r.length)}function Cu(t){return F0(t)}function F0(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Jo(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Jl(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ht.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=F0(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const a of r)s?s=!1:i+=",",i+=`${a}:${F0(n.fields[a])}`;return i+"}"}(t.mapValue):bt()}function zw(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function O0(t){return!!t&&"integerValue"in t}function A2(t){return!!t&&"arrayValue"in t}function $w(t){return!!t&&"nullValue"in t}function Hw(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function cp(t){return!!t&&"mapValue"in t}function Kj(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Hh(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return ic(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Hh(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Hh(t.arrayValue.values[n]);return e}return Object.assign({},t)}function qj(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ai{constructor(e){this.value=e}static empty(){return new ai({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!cp(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Hh(n)}setAll(e){let n=dr.emptyPath(),r={},i=[];e.forEach((a,o)=>{if(!n.isImmediateParentOf(o)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=o.popLast()}a?r[o.lastSegment()]=Hh(a):i.push(o.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());cp(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Ws(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];cp(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){ic(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new ai(Hh(this.value))}}function j3(t){const e=[];return ic(t.fields,(n,r)=>{const i=new dr([n]);if(cp(r)){const s=j3(r.mapValue).fields;if(s.length===0)e.push(i);else for(const a of s)e.push(i.child(a))}else e.push(i)}),new xi(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cr{constructor(e,n,r,i,s,a,o){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=a,this.documentState=o}static newInvalidDocument(e){return new Cr(e,0,Et.min(),Et.min(),Et.min(),ai.empty(),0)}static newFoundDocument(e,n,r,i){return new Cr(e,1,n,Et.min(),r,i,0)}static newNoDocument(e,n){return new Cr(e,2,n,Et.min(),Et.min(),ai.empty(),0)}static newUnknownDocument(e,n){return new Cr(e,3,n,Et.min(),Et.min(),ai.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Et.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ai.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ai.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Et.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Cr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Cr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tm{constructor(e,n){this.position=e,this.inclusive=n}}function Ww(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],a=t.position[i];if(s.field.isKeyField()?r=ht.comparator(ht.fromName(a.referenceValue),n.key):r=Iu(a,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function Gw(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Ws(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nd{constructor(e,n="asc"){this.field=e,this.dir=n}}function zj(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L3{}class Hn extends L3{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new Hj(e,n,r):n==="array-contains"?new Qj(e,r):n==="in"?new Yj(e,r):n==="not-in"?new Jj(e,r):n==="array-contains-any"?new Xj(e,r):new Hn(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new Wj(e,r):new Gj(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Iu(n,this.value)):n!==null&&Xl(this.value)===Xl(n)&&this.matchesComparison(Iu(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return bt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ms extends L3{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new ms(e,n)}matches(e){return R3(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function R3(t){return t.op==="and"}function D3(t){return $j(t)&&R3(t)}function $j(t){for(const e of t.filters)if(e instanceof ms)return!1;return!0}function M0(t){if(t instanceof Hn)return t.field.canonicalString()+t.op.toString()+Cu(t.value);if(D3(t))return t.filters.map(e=>M0(e)).join(",");{const e=t.filters.map(n=>M0(n)).join(",");return`${t.op}(${e})`}}function F3(t,e){return t instanceof Hn?function(r,i){return i instanceof Hn&&r.op===i.op&&r.field.isEqual(i.field)&&Ws(r.value,i.value)}(t,e):t instanceof ms?function(r,i){return i instanceof ms&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,a,o)=>s&&F3(a,i.filters[o]),!0):!1}(t,e):void bt()}function O3(t){return t instanceof Hn?function(n){return`${n.field.canonicalString()} ${n.op} ${Cu(n.value)}`}(t):t instanceof ms?function(n){return n.op.toString()+" {"+n.getFilters().map(O3).join(" ,")+"}"}(t):"Filter"}class Hj extends Hn{constructor(e,n,r){super(e,n,r),this.key=ht.fromName(r.referenceValue)}matches(e){const n=ht.comparator(e.key,this.key);return this.matchesComparison(n)}}class Wj extends Hn{constructor(e,n){super(e,"in",n),this.keys=M3("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class Gj extends Hn{constructor(e,n){super(e,"not-in",n),this.keys=M3("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function M3(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>ht.fromName(r.referenceValue))}class Qj extends Hn{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return A2(n)&&Sd(n.arrayValue,this.value)}}class Yj extends Hn{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Sd(this.value.arrayValue,n)}}class Jj extends Hn{constructor(e,n){super(e,"not-in",n)}matches(e){if(Sd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Sd(this.value.arrayValue,n)}}class Xj extends Hn{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!A2(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Sd(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zj{constructor(e,n=null,r=[],i=[],s=null,a=null,o=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=a,this.endAt=o,this.ue=null}}function Qw(t,e=null,n=[],r=[],i=null,s=null,a=null){return new Zj(t,e,n,r,i,s,a)}function E2(t){const e=kt(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>M0(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Km(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Cu(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Cu(r)).join(",")),e.ue=n}return e.ue}function k2(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!zj(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!F3(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Gw(t.startAt,e.startAt)&&Gw(t.endAt,e.endAt)}function V0(t){return ht.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zu{constructor(e,n=null,r=[],i=[],s=null,a="F",o=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=a,this.startAt=o,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function e8(t,e,n,r,i,s,a,o){return new zu(t,e,n,r,i,s,a,o)}function T2(t){return new zu(t)}function Yw(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function V3(t){return t.collectionGroup!==null}function Wh(t){const e=kt(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let o=new pr(dr.comparator);return a.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(o=o.add(u.field))})}),o})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Nd(s,r))}),n.has(dr.keyField().canonicalString())||e.ce.push(new Nd(dr.keyField(),r))}return e.ce}function zs(t){const e=kt(t);return e.le||(e.le=t8(e,Wh(t))),e.le}function t8(t,e){if(t.limitType==="F")return Qw(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Nd(i.field,s)});const n=t.endAt?new tm(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new tm(t.startAt.position,t.startAt.inclusive):null;return Qw(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function U0(t,e){const n=t.filters.concat([e]);return new zu(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function B0(t,e,n){return new zu(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function qm(t,e){return k2(zs(t),zs(e))&&t.limitType===e.limitType}function U3(t){return`${E2(zs(t))}|lt:${t.limitType}`}function Mc(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>O3(i)).join(", ")}]`),Km(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Cu(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Cu(i)).join(",")),`Target(${r})`}(zs(t))}; limitType=${t.limitType})`}function zm(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):ht.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of Wh(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(a,o,l){const u=Ww(a,o,l);return a.inclusive?u<=0:u<0}(r.startAt,Wh(r),i)||r.endAt&&!function(a,o,l){const u=Ww(a,o,l);return a.inclusive?u>=0:u>0}(r.endAt,Wh(r),i))}(t,e)}function n8(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function B3(t){return(e,n)=>{let r=!1;for(const i of Wh(t)){const s=r8(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function r8(t,e,n){const r=t.field.isKeyField()?ht.comparator(e.key,n.key):function(s,a,o){const l=a.data.field(s),u=o.data.field(s);return l!==null&&u!==null?Iu(l,u):bt()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return bt()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $u{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ic(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return C3(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i8=new xn(ht.comparator);function Oa(){return i8}const K3=new xn(ht.comparator);function Lh(...t){let e=K3;for(const n of t)e=e.insert(n.key,n);return e}function q3(t){let e=K3;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Dl(){return Gh()}function z3(){return Gh()}function Gh(){return new $u(t=>t.toString(),(t,e)=>t.isEqual(e))}const s8=new xn(ht.comparator),a8=new pr(ht.comparator);function Rt(...t){let e=a8;for(const n of t)e=e.add(n);return e}const o8=new pr(Ut);function l8(){return o8}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I2(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:em(e)?"-0":e}}function $3(t){return{integerValue:""+t}}function c8(t,e){return Vj(e)?$3(e):I2(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $m{constructor(){this._=void 0}}function u8(t,e,n){return t instanceof nm?function(i,s){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&S2(s)&&(s=N2(s)),s&&(a.fields.__previous_value__=s),{mapValue:a}}(n,e):t instanceof Ad?W3(t,e):t instanceof Ed?G3(t,e):function(i,s){const a=H3(i,s),o=Jw(a)+Jw(i.Pe);return O0(a)&&O0(i.Pe)?$3(o):I2(i.serializer,o)}(t,e)}function h8(t,e,n){return t instanceof Ad?W3(t,e):t instanceof Ed?G3(t,e):n}function H3(t,e){return t instanceof rm?function(r){return O0(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class nm extends $m{}class Ad extends $m{constructor(e){super(),this.elements=e}}function W3(t,e){const n=Q3(e);for(const r of t.elements)n.some(i=>Ws(i,r))||n.push(r);return{arrayValue:{values:n}}}class Ed extends $m{constructor(e){super(),this.elements=e}}function G3(t,e){let n=Q3(e);for(const r of t.elements)n=n.filter(i=>!Ws(i,r));return{arrayValue:{values:n}}}class rm extends $m{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function Jw(t){return Rn(t.integerValue||t.doubleValue)}function Q3(t){return A2(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function d8(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Ad&&i instanceof Ad||r instanceof Ed&&i instanceof Ed?Tu(r.elements,i.elements,Ws):r instanceof rm&&i instanceof rm?Ws(r.Pe,i.Pe):r instanceof nm&&i instanceof nm}(t.transform,e.transform)}class f8{constructor(e,n){this.version=e,this.transformResults=n}}class Ki{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Ki}static exists(e){return new Ki(void 0,e)}static updateTime(e){return new Ki(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function up(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Hm{}function Y3(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new C2(t.key,Ki.none()):new Ud(t.key,t.data,Ki.none());{const n=t.data,r=ai.empty();let i=new pr(dr.comparator);for(let s of e.fields)if(!i.has(s)){let a=n.field(s);a===null&&s.length>1&&(s=s.popLast(),a=n.field(s)),a===null?r.delete(s):r.set(s,a),i=i.add(s)}return new sl(t.key,r,new xi(i.toArray()),Ki.none())}}function p8(t,e,n){t instanceof Ud?function(i,s,a){const o=i.value.clone(),l=Zw(i.fieldTransforms,s,a.transformResults);o.setAll(l),s.convertToFoundDocument(a.version,o).setHasCommittedMutations()}(t,e,n):t instanceof sl?function(i,s,a){if(!up(i.precondition,s))return void s.convertToUnknownDocument(a.version);const o=Zw(i.fieldTransforms,s,a.transformResults),l=s.data;l.setAll(J3(i)),l.setAll(o),s.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(t,e,n):function(i,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function Qh(t,e,n,r){return t instanceof Ud?function(s,a,o,l){if(!up(s.precondition,a))return o;const u=s.value.clone(),d=e_(s.fieldTransforms,l,a);return u.setAll(d),a.convertToFoundDocument(a.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof sl?function(s,a,o,l){if(!up(s.precondition,a))return o;const u=e_(s.fieldTransforms,l,a),d=a.data;return d.setAll(J3(s)),d.setAll(u),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),o===null?null:o.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(s,a,o){return up(s.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):o}(t,e,n)}function m8(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=H3(r.transform,i||null);s!=null&&(n===null&&(n=ai.empty()),n.set(r.field,s))}return n||null}function Xw(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Tu(r,i,(s,a)=>d8(s,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Ud extends Hm{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class sl extends Hm{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function J3(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Zw(t,e,n){const r=new Map;Yt(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],a=s.transform,o=e.data.field(s.field);r.set(s.field,h8(a,o,n[i]))}return r}function e_(t,e,n){const r=new Map;for(const i of t){const s=i.transform,a=n.data.field(i.field);r.set(i.field,u8(s,a,e))}return r}class C2 extends Hm{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class g8 extends Hm{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v8{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&p8(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Qh(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Qh(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=z3();return this.mutations.forEach(i=>{const s=e.get(i.key),a=s.overlayedDocument;let o=this.applyToLocalView(a,s.mutatedFields);o=n.has(i.key)?null:o;const l=Y3(a,o);l!==null&&r.set(i.key,l),a.isValidDocument()||a.convertToNoDocument(Et.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Rt())}isEqual(e){return this.batchId===e.batchId&&Tu(this.mutations,e.mutations,(n,r)=>Xw(n,r))&&Tu(this.baseMutations,e.baseMutations,(n,r)=>Xw(n,r))}}class P2{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Yt(e.mutations.length===r.length);let i=function(){return s8}();const s=e.mutations;for(let a=0;a<s.length;a++)i=i.insert(s[a].key,r[a].version);return new P2(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y8{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w8{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var zn,Ot;function _8(t){switch(t){default:return bt();case Re.CANCELLED:case Re.UNKNOWN:case Re.DEADLINE_EXCEEDED:case Re.RESOURCE_EXHAUSTED:case Re.INTERNAL:case Re.UNAVAILABLE:case Re.UNAUTHENTICATED:return!1;case Re.INVALID_ARGUMENT:case Re.NOT_FOUND:case Re.ALREADY_EXISTS:case Re.PERMISSION_DENIED:case Re.FAILED_PRECONDITION:case Re.ABORTED:case Re.OUT_OF_RANGE:case Re.UNIMPLEMENTED:case Re.DATA_LOSS:return!0}}function X3(t){if(t===void 0)return Fa("GRPC error has no .code"),Re.UNKNOWN;switch(t){case zn.OK:return Re.OK;case zn.CANCELLED:return Re.CANCELLED;case zn.UNKNOWN:return Re.UNKNOWN;case zn.DEADLINE_EXCEEDED:return Re.DEADLINE_EXCEEDED;case zn.RESOURCE_EXHAUSTED:return Re.RESOURCE_EXHAUSTED;case zn.INTERNAL:return Re.INTERNAL;case zn.UNAVAILABLE:return Re.UNAVAILABLE;case zn.UNAUTHENTICATED:return Re.UNAUTHENTICATED;case zn.INVALID_ARGUMENT:return Re.INVALID_ARGUMENT;case zn.NOT_FOUND:return Re.NOT_FOUND;case zn.ALREADY_EXISTS:return Re.ALREADY_EXISTS;case zn.PERMISSION_DENIED:return Re.PERMISSION_DENIED;case zn.FAILED_PRECONDITION:return Re.FAILED_PRECONDITION;case zn.ABORTED:return Re.ABORTED;case zn.OUT_OF_RANGE:return Re.OUT_OF_RANGE;case zn.UNIMPLEMENTED:return Re.UNIMPLEMENTED;case zn.DATA_LOSS:return Re.DATA_LOSS;default:return bt()}}(Ot=zn||(zn={}))[Ot.OK=0]="OK",Ot[Ot.CANCELLED=1]="CANCELLED",Ot[Ot.UNKNOWN=2]="UNKNOWN",Ot[Ot.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ot[Ot.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ot[Ot.NOT_FOUND=5]="NOT_FOUND",Ot[Ot.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ot[Ot.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ot[Ot.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ot[Ot.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ot[Ot.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ot[Ot.ABORTED=10]="ABORTED",Ot[Ot.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ot[Ot.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ot[Ot.INTERNAL=13]="INTERNAL",Ot[Ot.UNAVAILABLE=14]="UNAVAILABLE",Ot[Ot.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b8(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x8=new Vl([4294967295,4294967295],0);function t_(t){const e=b8().encode(t),n=new x3;return n.update(e),new Uint8Array(n.digest())}function n_(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Vl([n,r],0),new Vl([i,s],0)]}class j2{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Rh(`Invalid padding: ${n}`);if(r<0)throw new Rh(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Rh(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Rh(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Vl.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(Vl.fromNumber(r)));return i.compare(x8)===1&&(i=new Vl([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=t_(e),[r,i]=n_(n);for(let s=0;s<this.hashCount;s++){const a=this.Ee(r,i,s);if(!this.de(a))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),a=new j2(s,i,n);return r.forEach(o=>a.insert(o)),a}insert(e){if(this.Ie===0)return;const n=t_(e),[r,i]=n_(n);for(let s=0;s<this.hashCount;s++){const a=this.Ee(r,i,s);this.Ae(a)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Rh extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wm{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Bd.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Wm(Et.min(),i,new xn(Ut),Oa(),Rt())}}class Bd{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Bd(r,n,Rt(),Rt(),Rt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hp{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class Z3{constructor(e,n){this.targetId=e,this.me=n}}class eS{constructor(e,n,r=gr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class r_{constructor(){this.fe=0,this.ge=s_(),this.pe=gr.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Rt(),n=Rt(),r=Rt();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:bt()}}),new Bd(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=s_()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Yt(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class S8{constructor(e){this.Le=e,this.Be=new Map,this.ke=Oa(),this.qe=i_(),this.Qe=new xn(Ut)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:bt()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const s=i.target;if(V0(s))if(r===0){const a=new ht(s.path);this.Ue(n,a,Cr.newNoDocument(a,Et.min()))}else Yt(r===1);else{const a=this.Ye(n);if(a!==r){const o=this.Ze(e),l=o?this.Xe(o,e,a):1;if(l!==0){this.je(n);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,u)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let a,o;try{a=Jl(r).toUint8Array()}catch(l){if(l instanceof P3)return ku("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{o=new j2(a,i,s)}catch(l){return ku(l instanceof Rh?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return o.Ie===0?null:o}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const a=this.Le.tt(),o=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;e.mightContain(o)||(this.Ue(n,s,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((s,a)=>{const o=this.Je(a);if(o){if(s.current&&V0(o.target)){const l=new ht(o.target.path);this.ke.get(l)!==null||this.it(a,l)||this.Ue(a,l,Cr.newNoDocument(l,e))}s.be&&(n.set(a,s.ve()),s.Ce())}});let r=Rt();this.qe.forEach((s,a)=>{let o=!0;a.forEachWhile(l=>{const u=this.Je(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)}),o&&(r=r.add(s))}),this.ke.forEach((s,a)=>a.setReadTime(e));const i=new Wm(e,n,this.Qe,this.ke,r);return this.ke=Oa(),this.qe=i_(),this.Qe=new xn(Ut),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new r_,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new pr(Ut),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||st("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new r_),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function i_(){return new xn(ht.comparator)}function s_(){return new xn(ht.comparator)}const N8={asc:"ASCENDING",desc:"DESCENDING"},A8={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},E8={and:"AND",or:"OR"};class k8{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function K0(t,e){return t.useProto3Json||Km(e)?e:{value:e}}function im(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function tS(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function T8(t,e){return im(t,e.toTimestamp())}function $s(t){return Yt(!!t),Et.fromTimestamp(function(n){const r=Jo(n);return new Xn(r.seconds,r.nanos)}(t))}function L2(t,e){return q0(t,e).canonicalString()}function q0(t,e){const n=function(i){return new un(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function nS(t){const e=un.fromString(t);return Yt(oS(e)),e}function z0(t,e){return L2(t.databaseId,e.path)}function c1(t,e){const n=nS(e);if(n.get(1)!==t.databaseId.projectId)throw new et(Re.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new et(Re.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ht(iS(n))}function rS(t,e){return L2(t.databaseId,e)}function I8(t){const e=nS(t);return e.length===4?un.emptyPath():iS(e)}function $0(t){return new un(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function iS(t){return Yt(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function a_(t,e,n){return{name:z0(t,e),fields:n.value.mapValue.fields}}function C8(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:bt()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(u,d){return u.useProto3Json?(Yt(d===void 0||typeof d=="string"),gr.fromBase64String(d||"")):(Yt(d===void 0||d instanceof Buffer||d instanceof Uint8Array),gr.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,o=a&&function(u){const d=u.code===void 0?Re.UNKNOWN:X3(u.code);return new et(d,u.message||"")}(a);n=new eS(r,i,s,o||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=c1(t,r.document.name),s=$s(r.document.updateTime),a=r.document.createTime?$s(r.document.createTime):Et.min(),o=new ai({mapValue:{fields:r.document.fields}}),l=Cr.newFoundDocument(i,s,a,o),u=r.targetIds||[],d=r.removedTargetIds||[];n=new hp(u,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=c1(t,r.document),s=r.readTime?$s(r.readTime):Et.min(),a=Cr.newNoDocument(i,s),o=r.removedTargetIds||[];n=new hp([],o,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=c1(t,r.document),s=r.removedTargetIds||[];n=new hp([],s,i,null)}else{if(!("filter"in e))return bt();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,a=new w8(i,s),o=r.targetId;n=new Z3(o,a)}}return n}function P8(t,e){let n;if(e instanceof Ud)n={update:a_(t,e.key,e.value)};else if(e instanceof C2)n={delete:z0(t,e.key)};else if(e instanceof sl)n={update:a_(t,e.key,e.data),updateMask:U8(e.fieldMask)};else{if(!(e instanceof g8))return bt();n={verify:z0(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,a){const o=a.transform;if(o instanceof nm)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof Ad)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof Ed)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof rm)return{fieldPath:a.field.canonicalString(),increment:o.Pe};throw bt()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:T8(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:bt()}(t,e.precondition)),n}function j8(t,e){return t&&t.length>0?(Yt(e!==void 0),t.map(n=>function(i,s){let a=i.updateTime?$s(i.updateTime):$s(s);return a.isEqual(Et.min())&&(a=$s(s)),new f8(a,i.transformResults||[])}(n,e))):[]}function L8(t,e){return{documents:[rS(t,e.path)]}}function R8(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=rS(t,i);const s=function(u){if(u.length!==0)return aS(ms.create(u,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const a=function(u){if(u.length!==0)return u.map(d=>function(m){return{field:Vc(m.field),direction:O8(m.dir)}}(d))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const o=K0(t,e.limit);return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{_t:n,parent:i}}function D8(t){let e=I8(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Yt(r===1);const d=n.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let s=[];n.where&&(s=function(p){const m=sS(p);return m instanceof ms&&D3(m)?m.getFilters():[m]}(n.where));let a=[];n.orderBy&&(a=function(p){return p.map(m=>function(x){return new Nd(Uc(x.field),function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(x.direction))}(m))}(n.orderBy));let o=null;n.limit&&(o=function(p){let m;return m=typeof p=="object"?p.value:p,Km(m)?null:m}(n.limit));let l=null;n.startAt&&(l=function(p){const m=!!p.before,g=p.values||[];return new tm(g,m)}(n.startAt));let u=null;return n.endAt&&(u=function(p){const m=!p.before,g=p.values||[];return new tm(g,m)}(n.endAt)),e8(e,i,a,s,o,"F",l,u)}function F8(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return bt()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function sS(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Uc(n.unaryFilter.field);return Hn.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Uc(n.unaryFilter.field);return Hn.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Uc(n.unaryFilter.field);return Hn.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Uc(n.unaryFilter.field);return Hn.create(a,"!=",{nullValue:"NULL_VALUE"});default:return bt()}}(t):t.fieldFilter!==void 0?function(n){return Hn.create(Uc(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return bt()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return ms.create(n.compositeFilter.filters.map(r=>sS(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return bt()}}(n.compositeFilter.op))}(t):bt()}function O8(t){return N8[t]}function M8(t){return A8[t]}function V8(t){return E8[t]}function Vc(t){return{fieldPath:t.canonicalString()}}function Uc(t){return dr.fromServerFormat(t.fieldPath)}function aS(t){return t instanceof Hn?function(n){if(n.op==="=="){if(Hw(n.value))return{unaryFilter:{field:Vc(n.field),op:"IS_NAN"}};if($w(n.value))return{unaryFilter:{field:Vc(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Hw(n.value))return{unaryFilter:{field:Vc(n.field),op:"IS_NOT_NAN"}};if($w(n.value))return{unaryFilter:{field:Vc(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Vc(n.field),op:M8(n.op),value:n.value}}}(t):t instanceof ms?function(n){const r=n.getFilters().map(i=>aS(i));return r.length===1?r[0]:{compositeFilter:{op:V8(n.op),filters:r}}}(t):bt()}function U8(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function oS(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jo{constructor(e,n,r,i,s=Et.min(),a=Et.min(),o=gr.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=o,this.expectedCount=l}withSequenceNumber(e){return new jo(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new jo(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new jo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new jo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B8{constructor(e){this.ct=e}}function K8(t){const e=D8({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?B0(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q8{constructor(){this.un=new z8}addToCollectionParentIndex(e,n){return this.un.add(n),Be.resolve()}getCollectionParents(e,n){return Be.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return Be.resolve()}deleteFieldIndex(e,n){return Be.resolve()}deleteAllFieldIndexes(e){return Be.resolve()}createTargetIndexes(e,n){return Be.resolve()}getDocumentsMatchingTarget(e,n){return Be.resolve(null)}getIndexType(e,n){return Be.resolve(0)}getFieldIndexes(e,n){return Be.resolve([])}getNextCollectionGroupToUpdate(e){return Be.resolve(null)}getMinOffset(e,n){return Be.resolve(Yo.min())}getMinOffsetFromCollectionGroup(e,n){return Be.resolve(Yo.min())}updateCollectionGroup(e,n,r){return Be.resolve()}updateIndexEntries(e,n){return Be.resolve()}}class z8{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new pr(un.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new pr(un.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pu{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Pu(0)}static kn(){return new Pu(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $8{constructor(){this.changes=new $u(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Cr.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?Be.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H8{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W8{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Qh(r.mutation,i,xi.empty(),Xn.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Rt()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Rt()){const i=Dl();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let a=Lh();return s.forEach((o,l)=>{a=a.insert(o,l.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const r=Dl();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Rt()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((a,o)=>{n.set(a,o)})})}computeViews(e,n,r,i){let s=Oa();const a=Gh(),o=function(){return Gh()}();return n.forEach((l,u)=>{const d=r.get(u.key);i.has(u.key)&&(d===void 0||d.mutation instanceof sl)?s=s.insert(u.key,u):d!==void 0?(a.set(u.key,d.mutation.getFieldMask()),Qh(d.mutation,u,d.mutation.getFieldMask(),Xn.now())):a.set(u.key,xi.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((u,d)=>a.set(u,d)),n.forEach((u,d)=>{var p;return o.set(u,new H8(d,(p=a.get(u))!==null&&p!==void 0?p:null))}),o))}recalculateAndSaveOverlays(e,n){const r=Gh();let i=new xn((a,o)=>a-o),s=Rt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const o of a)o.keys().forEach(l=>{const u=n.get(l);if(u===null)return;let d=r.get(l)||xi.empty();d=o.applyToLocalView(u,d),r.set(l,d);const p=(i.get(o.batchId)||Rt()).add(l);i=i.insert(o.batchId,p)})}).next(()=>{const a=[],o=i.getReverseIterator();for(;o.hasNext();){const l=o.getNext(),u=l.key,d=l.value,p=z3();d.forEach(m=>{if(!s.has(m)){const g=Y3(n.get(m),r.get(m));g!==null&&p.set(m,g),s=s.add(m)}}),a.push(this.documentOverlayCache.saveOverlays(e,u,p))}return Be.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(a){return ht.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):V3(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const a=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):Be.resolve(Dl());let o=-1,l=s;return a.next(u=>Be.forEach(u,(d,p)=>(o<p.largestBatchId&&(o=p.largestBatchId),s.get(d)?Be.resolve():this.remoteDocumentCache.getEntry(e,d).next(m=>{l=l.insert(d,m)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,l,u,Rt())).next(d=>({batchId:o,changes:q3(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ht(n)).next(r=>{let i=Lh();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let a=Lh();return this.indexManager.getCollectionParents(e,s).next(o=>Be.forEach(o,l=>{const u=function(p,m){return new zu(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(d=>{d.forEach((p,m)=>{a=a.insert(p,m)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(a=>{s.forEach((l,u)=>{const d=u.getKey();a.get(d)===null&&(a=a.insert(d,Cr.newInvalidDocument(d)))});let o=Lh();return a.forEach((l,u)=>{const d=s.get(l);d!==void 0&&Qh(d.mutation,u,xi.empty(),Xn.now()),zm(n,u)&&(o=o.insert(l,u))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G8{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return Be.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:$s(i.createTime)}}(n)),Be.resolve()}getNamedQuery(e,n){return Be.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:K8(i.bundledQuery),readTime:$s(i.readTime)}}(n)),Be.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q8{constructor(){this.overlays=new xn(ht.comparator),this.Ir=new Map}getOverlay(e,n){return Be.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Dl();return Be.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),Be.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),Be.resolve()}getOverlaysForCollection(e,n,r){const i=Dl(),s=n.length+1,a=new ht(n.child("")),o=this.overlays.getIteratorFrom(a);for(;o.hasNext();){const l=o.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return Be.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new xn((u,d)=>u-d);const a=this.overlays.getIterator();for(;a.hasNext();){const u=a.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let d=s.get(u.largestBatchId);d===null&&(d=Dl(),s=s.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}const o=Dl(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,d)=>o.set(u,d)),!(o.size()>=i)););return Be.resolve(o)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const a=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new y8(n,r));let s=this.Ir.get(n);s===void 0&&(s=Rt(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y8{constructor(){this.sessionToken=gr.EMPTY_BYTE_STRING}getSessionToken(e){return Be.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,Be.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R2{constructor(){this.Tr=new pr(tr.Er),this.dr=new pr(tr.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new tr(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new tr(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new ht(new un([])),r=new tr(n,e),i=new tr(n,e+1),s=[];return this.dr.forEachInRange([r,i],a=>{this.Vr(a),s.push(a.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new ht(new un([])),r=new tr(n,e),i=new tr(n,e+1);let s=Rt();return this.dr.forEachInRange([r,i],a=>{s=s.add(a.key)}),s}containsKey(e){const n=new tr(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class tr{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return ht.comparator(e.key,n.key)||Ut(e.wr,n.wr)}static Ar(e,n){return Ut(e.wr,n.wr)||ht.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J8{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new pr(tr.Er)}checkEmpty(e){return Be.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new v8(s,n,r,i);this.mutationQueue.push(a);for(const o of i)this.br=this.br.add(new tr(o.key,s)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return Be.resolve(a)}lookupMutationBatch(e,n){return Be.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),s=i<0?0:i;return Be.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Be.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return Be.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new tr(n,0),i=new tr(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],a=>{const o=this.Dr(a.wr);s.push(o)}),Be.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new pr(Ut);return n.forEach(i=>{const s=new tr(i,0),a=new tr(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,a],o=>{r=r.add(o.wr)})}),Be.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;ht.isDocumentKey(s)||(s=s.child(""));const a=new tr(new ht(s),0);let o=new pr(Ut);return this.br.forEachWhile(l=>{const u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(o=o.add(l.wr)),!0)},a),Be.resolve(this.Cr(o))}Cr(e){const n=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Yt(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return Be.forEach(n.mutations,i=>{const s=new tr(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new tr(n,0),i=this.br.firstAfterOrEqual(r);return Be.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,Be.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X8{constructor(e){this.Mr=e,this.docs=function(){return new xn(ht.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,a=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return Be.resolve(r?r.document.mutableCopy():Cr.newInvalidDocument(n))}getEntries(e,n){let r=Oa();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Cr.newInvalidDocument(i))}),Be.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Oa();const a=n.path,o=new ht(a.child("")),l=this.docs.getIteratorFrom(o);for(;l.hasNext();){const{key:u,value:{document:d}}=l.getNext();if(!a.isPrefixOf(u.path))break;u.path.length>a.length+1||Dj(Rj(d),r)<=0||(i.has(d.key)||zm(n,d))&&(s=s.insert(d.key,d.mutableCopy()))}return Be.resolve(s)}getAllFromCollectionGroup(e,n,r,i){bt()}Or(e,n){return Be.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Z8(this)}getSize(e){return Be.resolve(this.size)}}class Z8 extends $8{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),Be.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eL{constructor(e){this.persistence=e,this.Nr=new $u(n=>E2(n),k2),this.lastRemoteSnapshotVersion=Et.min(),this.highestTargetId=0,this.Lr=0,this.Br=new R2,this.targetCount=0,this.kr=Pu.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),Be.resolve()}getLastRemoteSnapshotVersion(e){return Be.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Be.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),Be.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),Be.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Pu(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,Be.resolve()}updateTargetData(e,n){return this.Kn(n),Be.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,Be.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Nr.forEach((a,o)=>{o.sequenceNumber<=n&&r.get(o.targetId)===null&&(this.Nr.delete(a),s.push(this.removeMatchingKeysForTargetId(e,o.targetId)),i++)}),Be.waitFor(s).next(()=>i)}getTargetCount(e){return Be.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return Be.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),Be.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(a=>{s.push(i.markPotentiallyOrphaned(e,a))}),Be.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),Be.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return Be.resolve(r)}containsKey(e,n){return Be.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tL{constructor(e,n){this.qr={},this.overlays={},this.Qr=new x2(0),this.Kr=!1,this.Kr=!0,this.$r=new Y8,this.referenceDelegate=e(this),this.Ur=new eL(this),this.indexManager=new q8,this.remoteDocumentCache=function(i){return new X8(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new B8(n),this.Gr=new G8(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Q8,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new J8(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){st("MemoryPersistence","Starting transaction:",e);const i=new nL(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,n){return Be.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class nL extends Oj{constructor(e){super(),this.currentSequenceNumber=e}}class D2{constructor(e){this.persistence=e,this.Jr=new R2,this.Yr=null}static Zr(e){return new D2(e)}get Xr(){if(this.Yr)return this.Yr;throw bt()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),Be.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),Be.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),Be.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Be.forEach(this.Xr,r=>{const i=ht.fromPath(r);return this.ei(e,i).next(s=>{s||n.removeEntry(i,Et.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return Be.or([()=>Be.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F2{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=Rt(),i=Rt();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new F2(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rL{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iL{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return WT()?8:Mj(Lr())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.Yi(e,n).next(a=>{s.result=a}).next(()=>{if(!s.result)return this.Zi(e,n,i,r).next(a=>{s.result=a})}).next(()=>{if(s.result)return;const a=new rL;return this.Xi(e,n,a).next(o=>{if(s.result=o,this.zi)return this.es(e,n,a,o.size)})}).next(()=>s.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(xh()<=Ft.DEBUG&&st("QueryEngine","SDK will not create cache indexes for query:",Mc(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),Be.resolve()):(xh()<=Ft.DEBUG&&st("QueryEngine","Query:",Mc(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(xh()<=Ft.DEBUG&&st("QueryEngine","The SDK decides to create cache indexes for query:",Mc(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,zs(n))):Be.resolve())}Yi(e,n){if(Yw(n))return Be.resolve(null);let r=zs(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=B0(n,null,"F"),r=zs(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const a=Rt(...s);return this.Ji.getDocuments(e,a).next(o=>this.indexManager.getMinOffset(e,r).next(l=>{const u=this.ts(n,o);return this.ns(n,u,a,l.readTime)?this.Yi(e,B0(n,null,"F")):this.rs(e,u,n,l)}))})))}Zi(e,n,r,i){return Yw(n)||i.isEqual(Et.min())?Be.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const a=this.ts(n,s);return this.ns(n,a,r,i)?Be.resolve(null):(xh()<=Ft.DEBUG&&st("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Mc(n)),this.rs(e,a,n,Lj(i,-1)).next(o=>o))})}ts(e,n){let r=new pr(B3(e));return n.forEach((i,s)=>{zm(e,s)&&(r=r.add(s))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,n,r){return xh()<=Ft.DEBUG&&st("QueryEngine","Using full collection scan to execute query:",Mc(n)),this.Ji.getDocumentsMatchingQuery(e,n,Yo.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(a=>{s=s.insert(a.key,a)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sL{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new xn(Ut),this._s=new $u(s=>E2(s),k2),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new W8(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function aL(t,e,n,r){return new sL(t,e,n,r)}async function lS(t,e){const n=kt(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const a=[],o=[];let l=Rt();for(const u of i){a.push(u.batchId);for(const d of u.mutations)l=l.add(d.key)}for(const u of s){o.push(u.batchId);for(const d of u.mutations)l=l.add(d.key)}return n.localDocuments.getDocuments(r,l).next(u=>({hs:u,removedBatchIds:a,addedBatchIds:o}))})})}function oL(t,e){const n=kt(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(o,l,u,d){const p=u.batch,m=p.keys();let g=Be.resolve();return m.forEach(x=>{g=g.next(()=>d.getEntry(l,x)).next(b=>{const k=u.docVersions.get(x);Yt(k!==null),b.version.compareTo(k)<0&&(p.applyToRemoteDocument(b,u),b.isValidDocument()&&(b.setReadTime(u.commitVersion),d.addEntry(b)))})}),g.next(()=>o.mutationQueue.removeMutationBatch(l,p))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(o){let l=Rt();for(let u=0;u<o.mutationResults.length;++u)o.mutationResults[u].transformResults.length>0&&(l=l.add(o.batch.mutations[u].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function cS(t){const e=kt(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function lL(t,e){const n=kt(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const a=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const o=[];e.targetChanges.forEach((d,p)=>{const m=i.get(p);if(!m)return;o.push(n.Ur.removeMatchingKeys(s,d.removedDocuments,p).next(()=>n.Ur.addMatchingKeys(s,d.addedDocuments,p)));let g=m.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(p)!==null?g=g.withResumeToken(gr.EMPTY_BYTE_STRING,Et.min()).withLastLimboFreeSnapshotVersion(Et.min()):d.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(d.resumeToken,r)),i=i.insert(p,g),function(b,k,w){return b.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-b.snapshotVersion.toMicroseconds()>=3e8?!0:w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0}(m,g,d)&&o.push(n.Ur.updateTargetData(s,g))});let l=Oa(),u=Rt();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(s,d))}),o.push(cL(s,a,e.documentUpdates).next(d=>{l=d.Ps,u=d.Is})),!r.isEqual(Et.min())){const d=n.Ur.getLastRemoteSnapshotVersion(s).next(p=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));o.push(d)}return Be.waitFor(o).next(()=>a.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,u)).next(()=>l)}).then(s=>(n.os=i,s))}function cL(t,e,n){let r=Rt(),i=Rt();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let a=Oa();return n.forEach((o,l)=>{const u=s.get(o);l.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(o)),l.isNoDocument()&&l.version.isEqual(Et.min())?(e.removeEntry(o,l.readTime),a=a.insert(o,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),a=a.insert(o,l)):st("LocalStore","Ignoring outdated watch update for ",o,". Current version:",u.version," Watch version:",l.version)}),{Ps:a,Is:i}})}function uL(t,e){const n=kt(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function hL(t,e){const n=kt(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(s=>s?(i=s,Be.resolve(i)):n.Ur.allocateTargetId(r).next(a=>(i=new jo(e,a,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function H0(t,e,n){const r=kt(t),i=r.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,a=>r.persistence.referenceDelegate.removeTarget(a,i))}catch(a){if(!Vd(a))throw a;st("LocalStore",`Failed to update sequence numbers for target ${e}: ${a}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function o_(t,e,n){const r=kt(t);let i=Et.min(),s=Rt();return r.persistence.runTransaction("Execute query","readwrite",a=>function(l,u,d){const p=kt(l),m=p._s.get(d);return m!==void 0?Be.resolve(p.os.get(m)):p.Ur.getTargetData(u,d)}(r,a,zs(e)).next(o=>{if(o)return i=o.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(a,o.targetId).next(l=>{s=l})}).next(()=>r.ss.getDocumentsMatchingQuery(a,e,n?i:Et.min(),n?s:Rt())).next(o=>(dL(r,n8(e),o),{documents:o,Ts:s})))}function dL(t,e,n){let r=t.us.get(e)||Et.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.us.set(e,r)}class l_{constructor(){this.activeTargetIds=l8()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class fL{constructor(){this.so=new l_,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new l_,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pL{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c_{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){st("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){st("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vf=null;function u1(){return Vf===null?Vf=function(){return 268435456+Math.round(2147483648*Math.random())}():Vf++,"0x"+Vf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mL={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gL{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sr="WebChannelConnection";class vL extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(n,r,i,s,a){const o=u1(),l=this.xo(n,r.toUriEncodedString());st("RestConnection",`Sending RPC '${n}' ${o}:`,l,i);const u={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(u,s,a),this.No(n,l,u,i).then(d=>(st("RestConnection",`Received RPC '${n}' ${o}: `,d),d),d=>{throw ku("RestConnection",`RPC '${n}' ${o} failed with error: `,d,"url: ",l,"request:",i),d})}Lo(n,r,i,s,a,o){return this.Mo(n,r,i,s,a)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+qu}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,a)=>n[a]=s),i&&i.headers.forEach((s,a)=>n[a]=s)}xo(n,r){const i=mL[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const s=u1();return new Promise((a,o)=>{const l=new S3;l.setWithCredentials(!0),l.listenOnce(N3.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case lp.NO_ERROR:const d=l.getResponseJson();st(Sr,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(d)),a(d);break;case lp.TIMEOUT:st(Sr,`RPC '${e}' ${s} timed out`),o(new et(Re.DEADLINE_EXCEEDED,"Request time out"));break;case lp.HTTP_ERROR:const p=l.getStatus();if(st(Sr,`RPC '${e}' ${s} failed with status:`,p,"response text:",l.getResponseText()),p>0){let m=l.getResponseJson();Array.isArray(m)&&(m=m[0]);const g=m==null?void 0:m.error;if(g&&g.status&&g.message){const x=function(k){const w=k.toLowerCase().replace(/_/g,"-");return Object.values(Re).indexOf(w)>=0?w:Re.UNKNOWN}(g.status);o(new et(x,g.message))}else o(new et(Re.UNKNOWN,"Server responded with status "+l.getStatus()))}else o(new et(Re.UNAVAILABLE,"Connection failed."));break;default:bt()}}finally{st(Sr,`RPC '${e}' ${s} completed.`)}});const u=JSON.stringify(i);st(Sr,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",u,r,15)})}Bo(e,n,r){const i=u1(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=k3(),o=E3(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const d=s.join("");st(Sr,`Creating RPC '${e}' stream ${i}: ${d}`,l);const p=a.createWebChannel(d,l);let m=!1,g=!1;const x=new gL({Io:k=>{g?st(Sr,`Not sending because RPC '${e}' stream ${i} is closed:`,k):(m||(st(Sr,`Opening RPC '${e}' stream ${i} transport.`),p.open(),m=!0),st(Sr,`RPC '${e}' stream ${i} sending:`,k),p.send(k))},To:()=>p.close()}),b=(k,w,N)=>{k.listen(w,j=>{try{N(j)}catch(O){setTimeout(()=>{throw O},0)}})};return b(p,jh.EventType.OPEN,()=>{g||(st(Sr,`RPC '${e}' stream ${i} transport opened.`),x.yo())}),b(p,jh.EventType.CLOSE,()=>{g||(g=!0,st(Sr,`RPC '${e}' stream ${i} transport closed`),x.So())}),b(p,jh.EventType.ERROR,k=>{g||(g=!0,ku(Sr,`RPC '${e}' stream ${i} transport errored:`,k),x.So(new et(Re.UNAVAILABLE,"The operation could not be completed")))}),b(p,jh.EventType.MESSAGE,k=>{var w;if(!g){const N=k.data[0];Yt(!!N);const j=N,O=j.error||((w=j[0])===null||w===void 0?void 0:w.error);if(O){st(Sr,`RPC '${e}' stream ${i} received error:`,O);const Q=O.status;let B=function(S){const L=zn[S];if(L!==void 0)return X3(L)}(Q),P=O.message;B===void 0&&(B=Re.INTERNAL,P="Unknown error status: "+Q+" with message "+O.message),g=!0,x.So(new et(B,P)),p.close()}else st(Sr,`RPC '${e}' stream ${i} received:`,N),x.bo(N)}}),b(o,A3.STAT_EVENT,k=>{k.stat===D0.PROXY?st(Sr,`RPC '${e}' stream ${i} detected buffering proxy`):k.stat===D0.NOPROXY&&st(Sr,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{x.wo()},0),x}}function h1(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gm(t){return new k8(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uS{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&st("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hS{constructor(e,n,r,i,s,a,o,l){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=o,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new uS(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===Re.RESOURCE_EXHAUSTED?(Fa(n.toString()),Fa("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===Re.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{const i=new et(Re.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return st("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(st("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class yL extends hS{constructor(e,n,r,i,s,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,a),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=C8(this.serializer,e),r=function(s){if(!("targetChange"in s))return Et.min();const a=s.targetChange;return a.targetIds&&a.targetIds.length?Et.min():a.readTime?$s(a.readTime):Et.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=$0(this.serializer),n.addTarget=function(s,a){let o;const l=a.target;if(o=V0(l)?{documents:L8(s,l)}:{query:R8(s,l)._t},o.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){o.resumeToken=tS(s,a.resumeToken);const u=K0(s,a.expectedCount);u!==null&&(o.expectedCount=u)}else if(a.snapshotVersion.compareTo(Et.min())>0){o.readTime=im(s,a.snapshotVersion.toTimestamp());const u=K0(s,a.expectedCount);u!==null&&(o.expectedCount=u)}return o}(this.serializer,e);const r=F8(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=$0(this.serializer),n.removeTarget=e,this.a_(n)}}class wL extends hS{constructor(e,n,r,i,s,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,a),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Yt(!!e.streamToken),this.lastStreamToken=e.streamToken,Yt(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Yt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=j8(e.writeResults,e.commitTime),r=$s(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=$0(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>P8(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _L extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new et(Re.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Mo(e,q0(n,r),i,s,a)).catch(s=>{throw s.name==="FirebaseError"?(s.code===Re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new et(Re.UNKNOWN,s.toString())})}Lo(e,n,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,o])=>this.connection.Lo(e,q0(n,r),i,a,o,s)).catch(a=>{throw a.name==="FirebaseError"?(a.code===Re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new et(Re.UNKNOWN,a.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class bL{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Fa(n),this.D_=!1):st("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xL{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(a=>{r.enqueueAndForget(async()=>{sc(this)&&(st("RemoteStore","Restarting streams for network reachability change."),await async function(l){const u=kt(l);u.L_.add(4),await Kd(u),u.q_.set("Unknown"),u.L_.delete(4),await Qm(u)}(this))})}),this.q_=new bL(r,i)}}async function Qm(t){if(sc(t))for(const e of t.B_)await e(!0)}async function Kd(t){for(const e of t.B_)await e(!1)}function dS(t,e){const n=kt(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),U2(n)?V2(n):Hu(n).r_()&&M2(n,e))}function O2(t,e){const n=kt(t),r=Hu(n);n.N_.delete(e),r.r_()&&fS(n,e),n.N_.size===0&&(r.r_()?r.o_():sc(n)&&n.q_.set("Unknown"))}function M2(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Et.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Hu(t).A_(e)}function fS(t,e){t.Q_.xe(e),Hu(t).R_(e)}function V2(t){t.Q_=new S8({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Hu(t).start(),t.q_.v_()}function U2(t){return sc(t)&&!Hu(t).n_()&&t.N_.size>0}function sc(t){return kt(t).L_.size===0}function pS(t){t.Q_=void 0}async function SL(t){t.q_.set("Online")}async function NL(t){t.N_.forEach((e,n)=>{M2(t,e)})}async function AL(t,e){pS(t),U2(t)?(t.q_.M_(e),V2(t)):t.q_.set("Unknown")}async function EL(t,e,n){if(t.q_.set("Online"),e instanceof eS&&e.state===2&&e.cause)try{await async function(i,s){const a=s.cause;for(const o of s.targetIds)i.N_.has(o)&&(await i.remoteSyncer.rejectListen(o,a),i.N_.delete(o),i.Q_.removeTarget(o))}(t,e)}catch(r){st("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await sm(t,r)}else if(e instanceof hp?t.Q_.Ke(e):e instanceof Z3?t.Q_.He(e):t.Q_.We(e),!n.isEqual(Et.min()))try{const r=await cS(t.localStore);n.compareTo(r)>=0&&await function(s,a){const o=s.Q_.rt(a);return o.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const d=s.N_.get(u);d&&s.N_.set(u,d.withResumeToken(l.resumeToken,a))}}),o.targetMismatches.forEach((l,u)=>{const d=s.N_.get(l);if(!d)return;s.N_.set(l,d.withResumeToken(gr.EMPTY_BYTE_STRING,d.snapshotVersion)),fS(s,l);const p=new jo(d.target,l,u,d.sequenceNumber);M2(s,p)}),s.remoteSyncer.applyRemoteEvent(o)}(t,n)}catch(r){st("RemoteStore","Failed to raise snapshot:",r),await sm(t,r)}}async function sm(t,e,n){if(!Vd(e))throw e;t.L_.add(1),await Kd(t),t.q_.set("Offline"),n||(n=()=>cS(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{st("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Qm(t)})}function mS(t,e){return e().catch(n=>sm(t,n,e))}async function Ym(t){const e=kt(t),n=Xo(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;kL(e);)try{const i=await uL(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,TL(e,i)}catch(i){await sm(e,i)}gS(e)&&vS(e)}function kL(t){return sc(t)&&t.O_.length<10}function TL(t,e){t.O_.push(e);const n=Xo(t);n.r_()&&n.V_&&n.m_(e.mutations)}function gS(t){return sc(t)&&!Xo(t).n_()&&t.O_.length>0}function vS(t){Xo(t).start()}async function IL(t){Xo(t).p_()}async function CL(t){const e=Xo(t);for(const n of t.O_)e.m_(n.mutations)}async function PL(t,e,n){const r=t.O_.shift(),i=P2.from(r,e,n);await mS(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Ym(t)}async function jL(t,e){e&&Xo(t).V_&&await async function(r,i){if(function(a){return _8(a)&&a!==Re.ABORTED}(i.code)){const s=r.O_.shift();Xo(r).s_(),await mS(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Ym(r)}}(t,e),gS(t)&&vS(t)}async function u_(t,e){const n=kt(t);n.asyncQueue.verifyOperationInProgress(),st("RemoteStore","RemoteStore received new credentials");const r=sc(n);n.L_.add(3),await Kd(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Qm(n)}async function LL(t,e){const n=kt(t);e?(n.L_.delete(2),await Qm(n)):e||(n.L_.add(2),await Kd(n),n.q_.set("Unknown"))}function Hu(t){return t.K_||(t.K_=function(n,r,i){const s=kt(n);return s.w_(),new yL(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:SL.bind(null,t),Ro:NL.bind(null,t),mo:AL.bind(null,t),d_:EL.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),U2(t)?V2(t):t.q_.set("Unknown")):(await t.K_.stop(),pS(t))})),t.K_}function Xo(t){return t.U_||(t.U_=function(n,r,i){const s=kt(n);return s.w_(),new wL(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:IL.bind(null,t),mo:jL.bind(null,t),f_:CL.bind(null,t),g_:PL.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Ym(t)):(await t.U_.stop(),t.O_.length>0&&(st("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B2{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Ta,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const a=Date.now()+r,o=new B2(e,n,a,i,s);return o.start(r),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new et(Re.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function K2(t,e){if(Fa("AsyncQueue",`${e}: ${t}`),Vd(t))return new et(Re.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fu{constructor(e){this.comparator=e?(n,r)=>e(n,r)||ht.comparator(n.key,r.key):(n,r)=>ht.comparator(n.key,r.key),this.keyedMap=Lh(),this.sortedSet=new xn(this.comparator)}static emptySet(e){return new fu(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof fu)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new fu;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h_{constructor(){this.W_=new xn(ht.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):bt():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class ju{constructor(e,n,r,i,s,a,o,l,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=o,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,i,s){const a=[];return n.forEach(o=>{a.push({type:0,doc:o})}),new ju(e,n,fu.emptySet(n),a,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&qm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RL{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class DL{constructor(){this.queries=d_(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=kt(n),s=i.queries;i.queries=d_(),s.forEach((a,o)=>{for(const l of o.j_)l.onError(r)})})(this,new et(Re.ABORTED,"Firestore shutting down"))}}function d_(){return new $u(t=>U3(t),qm)}async function yS(t,e){const n=kt(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new RL,r=e.J_()?0:1);try{switch(r){case 0:s.z_=await n.onListen(i,!0);break;case 1:s.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(a){const o=K2(a,`Initialization of query '${Mc(e.query)}' failed`);return void e.onError(o)}n.queries.set(i,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&q2(n)}async function wS(t,e){const n=kt(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const a=s.j_.indexOf(e);a>=0&&(s.j_.splice(a,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function FL(t,e){const n=kt(t);let r=!1;for(const i of e){const s=i.query,a=n.queries.get(s);if(a){for(const o of a.j_)o.X_(i)&&(r=!0);a.z_=i}}r&&q2(n)}function OL(t,e,n){const r=kt(t),i=r.queries.get(e);if(i)for(const s of i.j_)s.onError(n);r.queries.delete(e)}function q2(t){t.Y_.forEach(e=>{e.next()})}var W0,f_;(f_=W0||(W0={})).ea="default",f_.Cache="cache";class _S{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new ju(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=ju.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==W0.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bS{constructor(e){this.key=e}}class xS{constructor(e){this.key=e}}class ML{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Rt(),this.mutatedKeys=Rt(),this.Aa=B3(e),this.Ra=new fu(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new h_,i=n?n.Ra:this.Ra;let s=n?n.mutatedKeys:this.mutatedKeys,a=i,o=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,p)=>{const m=i.get(d),g=zm(this.query,p)?p:null,x=!!m&&this.mutatedKeys.has(m.key),b=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let k=!1;m&&g?m.data.isEqual(g.data)?x!==b&&(r.track({type:3,doc:g}),k=!0):this.ga(m,g)||(r.track({type:2,doc:g}),k=!0,(l&&this.Aa(g,l)>0||u&&this.Aa(g,u)<0)&&(o=!0)):!m&&g?(r.track({type:0,doc:g}),k=!0):m&&!g&&(r.track({type:1,doc:m}),k=!0,(l||u)&&(o=!0)),k&&(g?(a=a.add(g),s=b?s.add(d):s.delete(d)):(a=a.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const d=this.query.limitType==="F"?a.last():a.first();a=a.delete(d.key),s=s.delete(d.key),r.track({type:1,doc:d})}return{Ra:a,fa:r,ns:o,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const a=e.fa.G_();a.sort((d,p)=>function(g,x){const b=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return bt()}};return b(g)-b(x)}(d.type,p.type)||this.Aa(d.doc,p.doc)),this.pa(r),i=i!=null&&i;const o=n&&!i?this.ya():[],l=this.da.size===0&&this.current&&!i?1:0,u=l!==this.Ea;return this.Ea=l,a.length!==0||u?{snapshot:new ju(this.query,e.Ra,s,a,e.mutatedKeys,l===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:o}:{wa:o}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new h_,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Rt(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new xS(r))}),this.da.forEach(r=>{e.has(r)||n.push(new bS(r))}),n}ba(e){this.Ta=e.Ts,this.da=Rt();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return ju.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class VL{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class UL{constructor(e){this.key=e,this.va=!1}}class BL{constructor(e,n,r,i,s,a){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.Ca={},this.Fa=new $u(o=>U3(o),qm),this.Ma=new Map,this.xa=new Set,this.Oa=new xn(ht.comparator),this.Na=new Map,this.La=new R2,this.Ba={},this.ka=new Map,this.qa=Pu.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function KL(t,e,n=!0){const r=TS(t);let i;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await SS(r,e,n,!0),i}async function qL(t,e){const n=TS(t);await SS(n,e,!0,!1)}async function SS(t,e,n,r){const i=await hL(t.localStore,zs(e)),s=i.targetId,a=t.sharedClientState.addLocalQueryTarget(s,n);let o;return r&&(o=await zL(t,e,s,a==="current",i.resumeToken)),t.isPrimaryClient&&n&&dS(t.remoteStore,i),o}async function zL(t,e,n,r,i){t.Ka=(p,m,g)=>async function(b,k,w,N){let j=k.view.ma(w);j.ns&&(j=await o_(b.localStore,k.query,!1).then(({documents:P})=>k.view.ma(P,j)));const O=N&&N.targetChanges.get(k.targetId),Q=N&&N.targetMismatches.get(k.targetId)!=null,B=k.view.applyChanges(j,b.isPrimaryClient,O,Q);return m_(b,k.targetId,B.wa),B.snapshot}(t,p,m,g);const s=await o_(t.localStore,e,!0),a=new ML(e,s.Ts),o=a.ma(s.documents),l=Bd.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),u=a.applyChanges(o,t.isPrimaryClient,l);m_(t,n,u.wa);const d=new VL(e,n,a);return t.Fa.set(e,d),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),u.snapshot}async function $L(t,e,n){const r=kt(t),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(a=>!qm(a,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await H0(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&O2(r.remoteStore,i.targetId),G0(r,i.targetId)}).catch(Md)):(G0(r,i.targetId),await H0(r.localStore,i.targetId,!0))}async function HL(t,e){const n=kt(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),O2(n.remoteStore,r.targetId))}async function WL(t,e,n){const r=eR(t);try{const i=await function(a,o){const l=kt(a),u=Xn.now(),d=o.reduce((g,x)=>g.add(x.key),Rt());let p,m;return l.persistence.runTransaction("Locally write mutations","readwrite",g=>{let x=Oa(),b=Rt();return l.cs.getEntries(g,d).next(k=>{x=k,x.forEach((w,N)=>{N.isValidDocument()||(b=b.add(w))})}).next(()=>l.localDocuments.getOverlayedDocuments(g,x)).next(k=>{p=k;const w=[];for(const N of o){const j=m8(N,p.get(N.key).overlayedDocument);j!=null&&w.push(new sl(N.key,j,j3(j.value.mapValue),Ki.exists(!0)))}return l.mutationQueue.addMutationBatch(g,u,w,o)}).next(k=>{m=k;const w=k.applyToLocalDocumentSet(p,b);return l.documentOverlayCache.saveOverlays(g,k.batchId,w)})}).then(()=>({batchId:m.batchId,changes:q3(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,o,l){let u=a.Ba[a.currentUser.toKey()];u||(u=new xn(Ut)),u=u.insert(o,l),a.Ba[a.currentUser.toKey()]=u}(r,i.batchId,n),await qd(r,i.changes),await Ym(r.remoteStore)}catch(i){const s=K2(i,"Failed to persist write");n.reject(s)}}async function NS(t,e){const n=kt(t);try{const r=await lL(n.localStore,e);e.targetChanges.forEach((i,s)=>{const a=n.Na.get(s);a&&(Yt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?a.va=!0:i.modifiedDocuments.size>0?Yt(a.va):i.removedDocuments.size>0&&(Yt(a.va),a.va=!1))}),await qd(n,r,e)}catch(r){await Md(r)}}function p_(t,e,n){const r=kt(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach((s,a)=>{const o=a.view.Z_(e);o.snapshot&&i.push(o.snapshot)}),function(a,o){const l=kt(a);l.onlineState=o;let u=!1;l.queries.forEach((d,p)=>{for(const m of p.j_)m.Z_(o)&&(u=!0)}),u&&q2(l)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function GL(t,e,n){const r=kt(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),s=i&&i.key;if(s){let a=new xn(ht.comparator);a=a.insert(s,Cr.newNoDocument(s,Et.min()));const o=Rt().add(s),l=new Wm(Et.min(),new Map,new xn(Ut),a,o);await NS(r,l),r.Oa=r.Oa.remove(s),r.Na.delete(e),z2(r)}else await H0(r.localStore,e,!1).then(()=>G0(r,e,n)).catch(Md)}async function QL(t,e){const n=kt(t),r=e.batch.batchId;try{const i=await oL(n.localStore,e);ES(n,r,null),AS(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await qd(n,i)}catch(i){await Md(i)}}async function YL(t,e,n){const r=kt(t);try{const i=await function(a,o){const l=kt(a);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let d;return l.mutationQueue.lookupMutationBatch(u,o).next(p=>(Yt(p!==null),d=p.keys(),l.mutationQueue.removeMutationBatch(u,p))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,d,o)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,d)).next(()=>l.localDocuments.getDocuments(u,d))})}(r.localStore,e);ES(r,e,n),AS(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await qd(r,i)}catch(i){await Md(i)}}function AS(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function ES(t,e,n){const r=kt(t);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function G0(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||kS(t,r)})}function kS(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(O2(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),z2(t))}function m_(t,e,n){for(const r of n)r instanceof bS?(t.La.addReference(r.key,e),JL(t,r)):r instanceof xS?(st("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||kS(t,r.key)):bt()}function JL(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(st("SyncEngine","New document in limbo: "+n),t.xa.add(r),z2(t))}function z2(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new ht(un.fromString(e)),r=t.qa.next();t.Na.set(r,new UL(n)),t.Oa=t.Oa.insert(n,r),dS(t.remoteStore,new jo(zs(T2(n.path)),r,"TargetPurposeLimboResolution",x2.oe))}}async function qd(t,e,n){const r=kt(t),i=[],s=[],a=[];r.Fa.isEmpty()||(r.Fa.forEach((o,l)=>{a.push(r.Ka(l,e,n).then(u=>{var d;if((u||n)&&r.isPrimaryClient){const p=u?!u.fromCache:(d=n==null?void 0:n.targetChanges.get(l.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(l.targetId,p?"current":"not-current")}if(u){i.push(u);const p=F2.Wi(l.targetId,u);s.push(p)}}))}),await Promise.all(a),r.Ca.d_(i),await async function(l,u){const d=kt(l);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>Be.forEach(u,m=>Be.forEach(m.$i,g=>d.persistence.referenceDelegate.addReference(p,m.targetId,g)).next(()=>Be.forEach(m.Ui,g=>d.persistence.referenceDelegate.removeReference(p,m.targetId,g)))))}catch(p){if(!Vd(p))throw p;st("LocalStore","Failed to update sequence numbers: "+p)}for(const p of u){const m=p.targetId;if(!p.fromCache){const g=d.os.get(m),x=g.snapshotVersion,b=g.withLastLimboFreeSnapshotVersion(x);d.os=d.os.insert(m,b)}}}(r.localStore,s))}async function XL(t,e){const n=kt(t);if(!n.currentUser.isEqual(e)){st("SyncEngine","User change. New user:",e.toKey());const r=await lS(n.localStore,e);n.currentUser=e,function(s,a){s.ka.forEach(o=>{o.forEach(l=>{l.reject(new et(Re.CANCELLED,a))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await qd(n,r.hs)}}function ZL(t,e){const n=kt(t),r=n.Na.get(e);if(r&&r.va)return Rt().add(r.key);{let i=Rt();const s=n.Ma.get(e);if(!s)return i;for(const a of s){const o=n.Fa.get(a);i=i.unionWith(o.view.Va)}return i}}function TS(t){const e=kt(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=NS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=ZL.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=GL.bind(null,e),e.Ca.d_=FL.bind(null,e.eventManager),e.Ca.$a=OL.bind(null,e.eventManager),e}function eR(t){const e=kt(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=QL.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=YL.bind(null,e),e}class am{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Gm(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return aL(this.persistence,new iL,e.initialUser,this.serializer)}Ga(e){return new tL(D2.Zr,this.serializer)}Wa(e){return new fL}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}am.provider={build:()=>new am};class Q0{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>p_(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=XL.bind(null,this.syncEngine),await LL(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new DL}()}createDatastore(e){const n=Gm(e.databaseInfo.databaseId),r=function(s){return new vL(s)}(e.databaseInfo);return function(s,a,o,l){return new _L(s,a,o,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,a,o){return new xL(r,i,s,a,o)}(this.localStore,this.datastore,e.asyncQueue,n=>p_(this.syncEngine,n,0),function(){return c_.D()?new c_:new pL}())}createSyncEngine(e,n){return function(i,s,a,o,l,u,d){const p=new BL(i,s,a,o,l,u);return d&&(p.Qa=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=kt(i);st("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await Kd(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Q0.provider={build:()=>new Q0};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IS{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Fa("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tR{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Tr.UNAUTHENTICATED,this.clientId=I3.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async a=>{st("FirestoreClient","Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(r,a=>(st("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ta;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=K2(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function d1(t,e){t.asyncQueue.verifyOperationInProgress(),st("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await lS(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function g_(t,e){t.asyncQueue.verifyOperationInProgress();const n=await nR(t);st("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>u_(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>u_(e.remoteStore,i)),t._onlineComponents=e}async function nR(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){st("FirestoreClient","Using user provided OfflineComponentProvider");try{await d1(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===Re.FAILED_PRECONDITION||i.code===Re.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;ku("Error using user provided cache. Falling back to memory cache: "+n),await d1(t,new am)}}else st("FirestoreClient","Using default OfflineComponentProvider"),await d1(t,new am);return t._offlineComponents}async function CS(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(st("FirestoreClient","Using user provided OnlineComponentProvider"),await g_(t,t._uninitializedComponentsProvider._online)):(st("FirestoreClient","Using default OnlineComponentProvider"),await g_(t,new Q0))),t._onlineComponents}function rR(t){return CS(t).then(e=>e.syncEngine)}async function PS(t){const e=await CS(t),n=e.eventManager;return n.onListen=KL.bind(null,e.syncEngine),n.onUnlisten=$L.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=qL.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=HL.bind(null,e.syncEngine),n}function iR(t,e,n={}){const r=new Ta;return t.asyncQueue.enqueueAndForget(async()=>function(s,a,o,l,u){const d=new IS({next:m=>{d.Za(),a.enqueueAndForget(()=>wS(s,p));const g=m.docs.has(o);!g&&m.fromCache?u.reject(new et(Re.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&m.fromCache&&l&&l.source==="server"?u.reject(new et(Re.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(m)},error:m=>u.reject(m)}),p=new _S(T2(o.path),d,{includeMetadataChanges:!0,_a:!0});return yS(s,p)}(await PS(t),t.asyncQueue,e,n,r)),r.promise}function sR(t,e,n={}){const r=new Ta;return t.asyncQueue.enqueueAndForget(async()=>function(s,a,o,l,u){const d=new IS({next:m=>{d.Za(),a.enqueueAndForget(()=>wS(s,p)),m.fromCache&&l.source==="server"?u.reject(new et(Re.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(m)},error:m=>u.reject(m)}),p=new _S(o,d,{includeMetadataChanges:!0,_a:!0});return yS(s,p)}(await PS(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jS(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v_=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LS(t,e,n){if(!n)throw new et(Re.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function aR(t,e,n,r){if(e===!0&&r===!0)throw new et(Re.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function y_(t){if(!ht.isDocumentKey(t))throw new et(Re.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function w_(t){if(ht.isDocumentKey(t))throw new et(Re.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Jm(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":bt()}function gs(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new et(Re.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Jm(t);throw new et(Re.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new et(Re.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new et(Re.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}aR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=jS((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new et(Re.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new et(Re.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new et(Re.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Xm{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new __({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new et(Re.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new et(Re.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new __(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Nj;switch(r.type){case"firstParty":return new Tj(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new et(Re.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=v_.get(n);r&&(st("ComponentProvider","Removing Datastore"),v_.delete(n),r.terminate())}(this),Promise.resolve()}}function oR(t,e,n,r={}){var i;const s=(t=gs(t,Xm))._getSettings(),a=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==a&&ku("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:a,ssl:!1})),r.mockUserToken){let o,l;if(typeof r.mockUserToken=="string")o=r.mockUserToken,l=Tr.MOCK_USER;else{o=O4(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new et(Re.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Tr(u)}t._authCredentials=new Aj(new T3(o,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ac{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ac(this.firestore,e,this._query)}}class zr{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ho(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new zr(this.firestore,e,this._key)}}class Ho extends ac{constructor(e,n,r){super(e,n,T2(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new zr(this.firestore,null,new ht(e))}withConverter(e){return new Ho(this.firestore,e,this._path)}}function fn(t,e,...n){if(t=bn(t),LS("collection","path",e),t instanceof Xm){const r=un.fromString(e,...n);return w_(r),new Ho(t,null,r)}{if(!(t instanceof zr||t instanceof Ho))throw new et(Re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(un.fromString(e,...n));return w_(r),new Ho(t.firestore,null,r)}}function an(t,e,...n){if(t=bn(t),arguments.length===1&&(e=I3.newId()),LS("doc","path",e),t instanceof Xm){const r=un.fromString(e,...n);return y_(r),new zr(t,null,new ht(r))}{if(!(t instanceof zr||t instanceof Ho))throw new et(Re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(un.fromString(e,...n));return y_(r),new zr(t.firestore,t instanceof Ho?t.converter:null,new ht(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b_{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new uS(this,"async_queue_retry"),this.Vu=()=>{const r=h1();r&&st("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=h1();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=h1();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Ta;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Vd(e))throw e;st("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(a){let o=a.message||"";return a.stack&&(o=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),o}(r);throw Fa("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const i=B2.createAndSchedule(this,e,n,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&bt()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}class oc extends Xm{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new b_,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new b_(e),this._firestoreClient=void 0,await e}}}function lR(t,e){const n=typeof t=="object"?t:h2(),r=typeof t=="string"?t:"(default)",i=Om(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=R4("firestore");s&&oR(i,...s)}return i}function $2(t){if(t._terminated)throw new et(Re.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||cR(t),t._firestoreClient}function cR(t){var e,n,r;const i=t._freezeSettings(),s=function(o,l,u,d){return new Bj(o,l,u,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,jS(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new tR(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(o){const l=o==null?void 0:o._online.build();return{_offline:o==null?void 0:o._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Lu(gr.fromBase64String(e))}catch(n){throw new et(Re.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Lu(gr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zm{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new et(Re.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new dr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H2{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W2{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new et(Re.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new et(Re.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ut(this._lat,e._lat)||Ut(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G2{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uR=/^__.*__$/;class hR{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new sl(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ud(e,this.data,n,this.fieldTransforms)}}class RS{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new sl(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function DS(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw bt()}}class Q2{constructor(e,n,r,i,s,a){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Q2(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return om(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(DS(this.Cu)&&uR.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class dR{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Gm(e)}Qu(e,n,r,i=!1){return new Q2({Cu:e,methodName:n,qu:r,path:dr.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function eg(t){const e=t._freezeSettings(),n=Gm(t._databaseId);return new dR(t._databaseId,!!e.ignoreUndefinedProperties,n)}function FS(t,e,n,r,i,s={}){const a=t.Qu(s.merge||s.mergeFields?2:0,e,n,i);Y2("Data must be an object, but it was:",a,r);const o=OS(r,a);let l,u;if(s.merge)l=new xi(a.fieldMask),u=a.fieldTransforms;else if(s.mergeFields){const d=[];for(const p of s.mergeFields){const m=Y0(e,p,n);if(!a.contains(m))throw new et(Re.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);VS(d,m)||d.push(m)}l=new xi(d),u=a.fieldTransforms.filter(p=>l.covers(p.field))}else l=null,u=a.fieldTransforms;return new hR(new ai(o),l,u)}class tg extends H2{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof tg}}function fR(t,e,n,r){const i=t.Qu(1,e,n);Y2("Data must be an object, but it was:",i,r);const s=[],a=ai.empty();ic(r,(l,u)=>{const d=J2(e,l,n);u=bn(u);const p=i.Nu(d);if(u instanceof tg)s.push(d);else{const m=zd(u,p);m!=null&&(s.push(d),a.set(d,m))}});const o=new xi(s);return new RS(a,o,i.fieldTransforms)}function pR(t,e,n,r,i,s){const a=t.Qu(1,e,n),o=[Y0(e,r,n)],l=[i];if(s.length%2!=0)throw new et(Re.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<s.length;m+=2)o.push(Y0(e,s[m])),l.push(s[m+1]);const u=[],d=ai.empty();for(let m=o.length-1;m>=0;--m)if(!VS(u,o[m])){const g=o[m];let x=l[m];x=bn(x);const b=a.Nu(g);if(x instanceof tg)u.push(g);else{const k=zd(x,b);k!=null&&(u.push(g),d.set(g,k))}}const p=new xi(u);return new RS(d,p,a.fieldTransforms)}function mR(t,e,n,r=!1){return zd(n,t.Qu(r?4:3,e))}function zd(t,e){if(MS(t=bn(t)))return Y2("Unsupported field value:",e,t),OS(t,e);if(t instanceof H2)return function(r,i){if(!DS(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const s=[];let a=0;for(const o of r){let l=zd(o,i.Lu(a));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),a++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=bn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return c8(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Xn.fromDate(r);return{timestampValue:im(i.serializer,s)}}if(r instanceof Xn){const s=new Xn(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:im(i.serializer,s)}}if(r instanceof W2)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Lu)return{bytesValue:tS(i.serializer,r._byteString)};if(r instanceof zr){const s=i.databaseId,a=r.firestore._databaseId;if(!a.isEqual(s))throw i.Bu(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:L2(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof G2)return function(a,o){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:a.toArray().map(l=>{if(typeof l!="number")throw o.Bu("VectorValues must only contain numeric values.");return I2(o.serializer,l)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${Jm(r)}`)}(t,e)}function OS(t,e){const n={};return C3(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ic(t,(r,i)=>{const s=zd(i,e.Mu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function MS(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Xn||t instanceof W2||t instanceof Lu||t instanceof zr||t instanceof H2||t instanceof G2)}function Y2(t,e,n){if(!MS(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=Jm(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function Y0(t,e,n){if((e=bn(e))instanceof Zm)return e._internalPath;if(typeof e=="string")return J2(t,e);throw om("Field path arguments must be of type string or ",t,!1,void 0,n)}const gR=new RegExp("[~\\*/\\[\\]]");function J2(t,e,n){if(e.search(gR)>=0)throw om(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Zm(...e.split("."))._internalPath}catch{throw om(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function om(t,e,n,r,i){const s=r&&!r.isEmpty(),a=i!==void 0;let o=`Function ${e}() called with invalid data`;n&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(s||a)&&(l+=" (found",s&&(l+=` in field ${r}`),a&&(l+=` in document ${i}`),l+=")"),new et(Re.INVALID_ARGUMENT,o+t+l)}function VS(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class US{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new zr(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new vR(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(ng("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class vR extends US{data(){return super.data()}}function ng(t,e){return typeof e=="string"?J2(t,e):e instanceof Zm?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yR(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new et(Re.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class X2{}class BS extends X2{}function Wu(t,e,...n){let r=[];e instanceof X2&&r.push(e),r=r.concat(n),function(s){const a=s.filter(l=>l instanceof Z2).length,o=s.filter(l=>l instanceof rg).length;if(a>1||a>0&&o>0)throw new et(Re.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class rg extends BS{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new rg(e,n,r)}_apply(e){const n=this._parse(e);return qS(e._query,n),new ac(e.firestore,e.converter,U0(e._query,n))}_parse(e){const n=eg(e.firestore);return function(s,a,o,l,u,d,p){let m;if(u.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new et(Re.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){S_(p,d);const g=[];for(const x of p)g.push(x_(l,s,x));m={arrayValue:{values:g}}}else m=x_(l,s,p)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||S_(p,d),m=mR(o,a,p,d==="in"||d==="not-in");return Hn.create(u,d,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function $d(t,e,n){const r=e,i=ng("where",t);return rg._create(i,r,n)}class Z2 extends X2{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Z2(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:ms.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let a=i;const o=s.getFlattenedFilters();for(const l of o)qS(a,l),a=U0(a,l)}(e._query,n),new ac(e.firestore,e.converter,U0(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class ey extends BS{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new ey(e,n)}_apply(e){const n=function(i,s,a){if(i.startAt!==null)throw new et(Re.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new et(Re.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Nd(s,a)}(e._query,this._field,this._direction);return new ac(e.firestore,e.converter,function(i,s){const a=i.explicitOrderBy.concat([s]);return new zu(i.path,i.collectionGroup,a,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function KS(t,e="asc"){const n=e,r=ng("orderBy",t);return ey._create(r,n)}function x_(t,e,n){if(typeof(n=bn(n))=="string"){if(n==="")throw new et(Re.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!V3(e)&&n.indexOf("/")!==-1)throw new et(Re.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(un.fromString(n));if(!ht.isDocumentKey(r))throw new et(Re.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return zw(t,new ht(r))}if(n instanceof zr)return zw(t,n._key);throw new et(Re.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Jm(n)}.`)}function S_(t,e){if(!Array.isArray(t)||t.length===0)throw new et(Re.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function qS(t,e){const n=function(i,s){for(const a of i)for(const o of a.getFlattenedFilters())if(s.indexOf(o.op)>=0)return o.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new et(Re.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new et(Re.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class wR{convertValue(e,n="none"){switch(Xl(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Rn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Jl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw bt()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return ic(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(a=>Rn(a.doubleValue));return new G2(s)}convertGeoPoint(e){return new W2(Rn(e.latitude),Rn(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=N2(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(bd(e));default:return null}}convertTimestamp(e){const n=Jo(e);return new Xn(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=un.fromString(e);Yt(oS(r));const i=new xd(r.get(1),r.get(3)),s=new ht(r.popFirst(5));return i.isEqual(n)||Fa(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zS(t,e,n){let r;return r=t?t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dh{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class $S extends US{constructor(e,n,r,i,s,a){super(e,n,r,i,a),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new dp(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(ng("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class dp extends $S{data(e={}){return super.data(e)}}class _R{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Dh(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new dp(this._firestore,this._userDataWriter,r.key,r,new Dh(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new et(Re.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let a=0;return i._snapshot.docChanges.map(o=>{const l=new dp(i._firestore,i._userDataWriter,o.doc.key,o.doc,new Dh(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);return o.doc,{type:"added",doc:l,oldIndex:-1,newIndex:a++}})}{let a=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(o=>s||o.type!==3).map(o=>{const l=new dp(i._firestore,i._userDataWriter,o.doc.key,o.doc,new Dh(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,d=-1;return o.type!==0&&(u=a.indexOf(o.doc.key),a=a.delete(o.doc.key)),o.type!==1&&(a=a.add(o.doc),d=a.indexOf(o.doc.key)),{type:bR(o.type),doc:l,oldIndex:u,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function bR(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return bt()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ig(t){t=gs(t,zr);const e=gs(t.firestore,oc);return iR($2(e),t._key).then(n=>xR(e,t,n))}class HS extends wR{constructor(e){super(),this.firestore=e}convertBytes(e){return new Lu(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new zr(this.firestore,null,n)}}function $r(t){t=gs(t,ac);const e=gs(t.firestore,oc),n=$2(e),r=new HS(e);return yR(t._query),sR(n,t._query).then(i=>new _R(e,r,t,i))}function J0(t,e,n){t=gs(t,zr);const r=gs(t.firestore,oc),i=zS(t.converter,e);return sg(r,[FS(eg(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Ki.none())])}function Gs(t,e,n,...r){t=gs(t,zr);const i=gs(t.firestore,oc),s=eg(i);let a;return a=typeof(e=bn(e))=="string"||e instanceof Zm?pR(s,"updateDoc",t._key,e,n,r):fR(s,"updateDoc",t._key,e),sg(i,[a.toMutation(t._key,Ki.exists(!0))])}function Js(t){return sg(gs(t.firestore,oc),[new C2(t._key,Ki.none())])}function Xs(t,e){const n=gs(t.firestore,oc),r=an(t),i=zS(t.converter,e);return sg(n,[FS(eg(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Ki.exists(!1))]).then(()=>r)}function sg(t,e){return function(r,i){const s=new Ta;return r.asyncQueue.enqueueAndForget(async()=>WL(await rR(r),i,s)),s.promise}($2(t),e)}function xR(t,e,n){const r=n.docs.get(e._key),i=new HS(t);return new $S(t,i,e._key,r,new Dh(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){qu=i})(nc),Gl(new Qo("firestore",(r,{instanceIdentifier:i,options:s})=>{const a=r.getProvider("app").getImmediate(),o=new oc(new Ej(r.getProvider("auth-internal")),new Cj(r.getProvider("app-check-internal")),function(u,d){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new et(Re.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new xd(u.options.projectId,d)}(a,i),a);return s=Object.assign({useFetchStreams:n},s),o._setSettings(s),o},"PUBLIC").setMultipleInstances(!0)),Bs(Vw,"4.7.3",e),Bs(Vw,"4.7.3","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WS="firebasestorage.googleapis.com",GS="storageBucket",SR=2*60*1e3,NR=10*60*1e3,AR=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sn extends Ys{constructor(e,n,r=0){super(f1(e),`Firebase Storage: ${n} (${f1(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Sn.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return f1(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var pn;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(pn||(pn={}));function f1(t){return"storage/"+t}function ty(){const t="An unknown error occurred, please check the error payload for server response.";return new Sn(pn.UNKNOWN,t)}function ER(t){return new Sn(pn.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function kR(t){return new Sn(pn.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function TR(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Sn(pn.UNAUTHENTICATED,t)}function IR(){return new Sn(pn.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function CR(t){return new Sn(pn.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function QS(){return new Sn(pn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function YS(){return new Sn(pn.CANCELED,"User canceled the upload/download.")}function PR(t){return new Sn(pn.INVALID_URL,"Invalid URL '"+t+"'.")}function jR(t){return new Sn(pn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function LR(){return new Sn(pn.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+GS+"' property when initializing the app?")}function JS(){return new Sn(pn.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function RR(){return new Sn(pn.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function DR(){return new Sn(pn.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function FR(t){return new Sn(pn.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function X0(t){return new Sn(pn.INVALID_ARGUMENT,t)}function XS(){return new Sn(pn.APP_DELETED,"The Firebase app was deleted.")}function OR(t){return new Sn(pn.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Yh(t,e){return new Sn(pn.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Sh(t){throw new Sn(pn.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Si{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Si.makeFromUrl(e,n)}catch{return new Si(e,"")}if(r.path==="")return r;throw jR(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(O){O.path.charAt(O.path.length-1)==="/"&&(O.path_=O.path_.slice(0,-1))}const a="(/(.*))?$",o=new RegExp("^gs://"+i+a,"i"),l={bucket:1,path:3};function u(O){O.path_=decodeURIComponent(O.path)}const d="v[A-Za-z0-9_]+",p=n.replace(/[.]/g,"\\."),m="(/([^?#]*).*)?$",g=new RegExp(`^https?://${p}/${d}/b/${i}/o${m}`,"i"),x={bucket:1,path:3},b=n===WS?"(?:storage.googleapis.com|storage.cloud.google.com)":n,k="([^?#]*)",w=new RegExp(`^https?://${b}/${i}/${k}`,"i"),j=[{regex:o,indices:l,postModify:s},{regex:g,indices:x,postModify:u},{regex:w,indices:{bucket:1,path:2},postModify:u}];for(let O=0;O<j.length;O++){const Q=j[O],B=Q.regex.exec(e);if(B){const P=B[Q.indices.bucket];let y=B[Q.indices.path];y||(y=""),r=new Si(P,y),Q.postModify(r);break}}if(r==null)throw PR(e);return r}}class MR{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VR(t,e,n){let r=1,i=null,s=null,a=!1,o=0;function l(){return o===2}let u=!1;function d(...k){u||(u=!0,e.apply(null,k))}function p(k){i=setTimeout(()=>{i=null,t(g,l())},k)}function m(){s&&clearTimeout(s)}function g(k,...w){if(u){m();return}if(k){m(),d.call(null,k,...w);return}if(l()||a){m(),d.call(null,k,...w);return}r<64&&(r*=2);let j;o===1?(o=2,j=0):j=(r+Math.random())*1e3,p(j)}let x=!1;function b(k){x||(x=!0,m(),!u&&(i!==null?(k||(o=2),clearTimeout(i),p(0)):k||(o=1)))}return p(0),s=setTimeout(()=>{a=!0,b(!0)},n),b}function UR(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BR(t){return t!==void 0}function KR(t){return typeof t=="function"}function qR(t){return typeof t=="object"&&!Array.isArray(t)}function ag(t){return typeof t=="string"||t instanceof String}function N_(t){return ny()&&t instanceof Blob}function ny(){return typeof Blob<"u"}function A_(t,e,n,r){if(r<e)throw X0(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw X0(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gu(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function ZS(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var Ul;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Ul||(Ul={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eN(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zR{constructor(e,n,r,i,s,a,o,l,u,d,p,m=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=a,this.callback_=o,this.errorCallback_=l,this.timeout_=u,this.progressCallback_=d,this.connectionFactory_=p,this.retry=m,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((g,x)=>{this.resolve_=g,this.reject_=x,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new Uf(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const a=o=>{const l=o.loaded,u=o.lengthComputable?o.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,u)};this.progressCallback_!==null&&s.addUploadProgressListener(a),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(a),this.pendingConnection_=null;const o=s.getErrorCode()===Ul.NO_ERROR,l=s.getStatus();if(!o||eN(l,this.additionalRetryCodes_)&&this.retry){const d=s.getErrorCode()===Ul.ABORT;r(!1,new Uf(!1,null,d));return}const u=this.successCodes_.indexOf(l)!==-1;r(!0,new Uf(u,s))})},n=(r,i)=>{const s=this.resolve_,a=this.reject_,o=i.connection;if(i.wasSuccessCode)try{const l=this.callback_(o,o.getResponse());BR(l)?s(l):s()}catch(l){a(l)}else if(o!==null){const l=ty();l.serverResponse=o.getErrorText(),this.errorCallback_?a(this.errorCallback_(o,l)):a(l)}else if(i.canceled){const l=this.appDelete_?XS():YS();a(l)}else{const l=QS();a(l)}};this.canceled_?n(!1,new Uf(!1,null,!0)):this.backoffId_=VR(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&UR(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Uf{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function $R(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function HR(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function WR(t,e){e&&(t["X-Firebase-GMPID"]=e)}function GR(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function QR(t,e,n,r,i,s,a=!0){const o=ZS(t.urlParams),l=t.url+o,u=Object.assign({},t.headers);return WR(u,e),$R(u,n),HR(u,s),GR(u,r),new zR(l,t.method,u,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YR(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function JR(...t){const e=YR();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(ny())return new Blob(t);throw new Sn(pn.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function XR(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZR(t){if(typeof atob>"u")throw FR("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Os={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class p1{constructor(e,n){this.data=e,this.contentType=n||null}}function e7(t,e){switch(t){case Os.RAW:return new p1(tN(e));case Os.BASE64:case Os.BASE64URL:return new p1(nN(t,e));case Os.DATA_URL:return new p1(n7(e),r7(e))}throw ty()}function tN(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const s=r,a=t.charCodeAt(++n);r=65536|(s&1023)<<10|a&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function t7(t){let e;try{e=decodeURIComponent(t)}catch{throw Yh(Os.DATA_URL,"Malformed data URL.")}return tN(e)}function nN(t,e){switch(t){case Os.BASE64:{const i=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(i||s)throw Yh(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Os.BASE64URL:{const i=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(i||s)throw Yh(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=ZR(e)}catch(i){throw i.message.includes("polyfill")?i:Yh(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class rN{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Yh(Os.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=i7(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function n7(t){const e=new rN(t);return e.base64?nN(Os.BASE64,e.rest):t7(e.rest)}function r7(t){return new rN(t).contentType}function i7(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class To{constructor(e,n){let r=0,i="";N_(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(N_(this.data_)){const r=this.data_,i=XR(r,e,n);return i===null?null:new To(i)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new To(r,!0)}}static getBlob(...e){if(ny()){const n=e.map(r=>r instanceof To?r.data_:r);return new To(JR.apply(null,n))}else{const n=e.map(a=>ag(a)?e7(Os.RAW,a).data:a.data_);let r=0;n.forEach(a=>{r+=a.byteLength});const i=new Uint8Array(r);let s=0;return n.forEach(a=>{for(let o=0;o<a.length;o++)i[s++]=a[o]}),new To(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iN(t){let e;try{e=JSON.parse(t)}catch{return null}return qR(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s7(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function a7(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function sN(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o7(t,e){return e}class Br{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||o7}}let Bf=null;function l7(t){return!ag(t)||t.length<2?t:sN(t)}function aN(){if(Bf)return Bf;const t=[];t.push(new Br("bucket")),t.push(new Br("generation")),t.push(new Br("metageneration")),t.push(new Br("name","fullPath",!0));function e(s,a){return l7(a)}const n=new Br("name");n.xform=e,t.push(n);function r(s,a){return a!==void 0?Number(a):a}const i=new Br("size");return i.xform=r,t.push(i),t.push(new Br("timeCreated")),t.push(new Br("updated")),t.push(new Br("md5Hash",null,!0)),t.push(new Br("cacheControl",null,!0)),t.push(new Br("contentDisposition",null,!0)),t.push(new Br("contentEncoding",null,!0)),t.push(new Br("contentLanguage",null,!0)),t.push(new Br("contentType",null,!0)),t.push(new Br("metadata","customMetadata",!0)),Bf=t,Bf}function c7(t,e){function n(){const r=t.bucket,i=t.fullPath,s=new Si(r,i);return e._makeStorageReference(s)}Object.defineProperty(t,"ref",{get:n})}function u7(t,e,n){const r={};r.type="file";const i=n.length;for(let s=0;s<i;s++){const a=n[s];r[a.local]=a.xform(r,e[a.server])}return c7(r,t),r}function oN(t,e,n){const r=iN(e);return r===null?null:u7(t,r,n)}function h7(t,e,n,r){const i=iN(e);if(i===null||!ag(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const a=encodeURIComponent;return s.split(",").map(u=>{const d=t.bucket,p=t.fullPath,m="/b/"+a(d)+"/o/"+a(p),g=Gu(m,n,r),x=ZS({alt:"media",token:u});return g+x})[0]}function lN(t,e){const n={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(n[s.server]=t[s.local])}return JSON.stringify(n)}class lc{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ia(t){if(!t)throw ty()}function ry(t,e){function n(r,i){const s=oN(t,i,e);return Ia(s!==null),s}return n}function d7(t,e){function n(r,i){const s=oN(t,i,e);return Ia(s!==null),h7(s,i,t.host,t._protocol)}return n}function Hd(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=IR():i=TR():n.getStatus()===402?i=kR(t.bucket):n.getStatus()===403?i=CR(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function iy(t){const e=Hd(t);function n(r,i){let s=e(r,i);return r.getStatus()===404&&(s=ER(t.path)),s.serverResponse=i.serverResponse,s}return n}function f7(t,e,n){const r=e.fullServerUrl(),i=Gu(r,t.host,t._protocol),s="GET",a=t.maxOperationRetryTime,o=new lc(i,s,ry(t,n),a);return o.errorHandler=iy(e),o}function p7(t,e,n){const r=e.fullServerUrl(),i=Gu(r,t.host,t._protocol),s="GET",a=t.maxOperationRetryTime,o=new lc(i,s,d7(t,n),a);return o.errorHandler=iy(e),o}function m7(t,e){const n=e.fullServerUrl(),r=Gu(n,t.host,t._protocol),i="DELETE",s=t.maxOperationRetryTime;function a(l,u){}const o=new lc(r,i,a,s);return o.successCodes=[200,204],o.errorHandler=iy(e),o}function g7(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function cN(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=g7(null,e)),r}function v7(t,e,n,r,i){const s=e.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"};function o(){let j="";for(let O=0;O<2;O++)j=j+Math.random().toString().slice(2);return j}const l=o();a["Content-Type"]="multipart/related; boundary="+l;const u=cN(e,r,i),d=lN(u,n),p="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+d+`\r
--`+l+`\r
Content-Type: `+u.contentType+`\r
\r
`,m=`\r
--`+l+"--",g=To.getBlob(p,r,m);if(g===null)throw JS();const x={name:u.fullPath},b=Gu(s,t.host,t._protocol),k="POST",w=t.maxUploadRetryTime,N=new lc(b,k,ry(t,n),w);return N.urlParams=x,N.headers=a,N.body=g.uploadData(),N.errorHandler=Hd(e),N}class lm{constructor(e,n,r,i){this.current=e,this.total=n,this.finalized=!!r,this.metadata=i||null}}function sy(t,e){let n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch{Ia(!1)}return Ia(!!n&&(e||["active"]).indexOf(n)!==-1),n}function y7(t,e,n,r,i){const s=e.bucketOnlyServerUrl(),a=cN(e,r,i),o={name:a.fullPath},l=Gu(s,t.host,t._protocol),u="POST",d={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":a.contentType,"Content-Type":"application/json; charset=utf-8"},p=lN(a,n),m=t.maxUploadRetryTime;function g(b){sy(b);let k;try{k=b.getResponseHeader("X-Goog-Upload-URL")}catch{Ia(!1)}return Ia(ag(k)),k}const x=new lc(l,u,g,m);return x.urlParams=o,x.headers=d,x.body=p,x.errorHandler=Hd(e),x}function w7(t,e,n,r){const i={"X-Goog-Upload-Command":"query"};function s(u){const d=sy(u,["active","final"]);let p=null;try{p=u.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Ia(!1)}p||Ia(!1);const m=Number(p);return Ia(!isNaN(m)),new lm(m,r.size(),d==="final")}const a="POST",o=t.maxUploadRetryTime,l=new lc(n,a,s,o);return l.headers=i,l.errorHandler=Hd(e),l}const E_=256*1024;function _7(t,e,n,r,i,s,a,o){const l=new lm(0,0);if(a?(l.current=a.current,l.total=a.total):(l.current=0,l.total=r.size()),r.size()!==l.total)throw RR();const u=l.total-l.current;let d=u;i>0&&(d=Math.min(d,i));const p=l.current,m=p+d;let g="";d===0?g="finalize":u===d?g="upload, finalize":g="upload";const x={"X-Goog-Upload-Command":g,"X-Goog-Upload-Offset":`${l.current}`},b=r.slice(p,m);if(b===null)throw JS();function k(O,Q){const B=sy(O,["active","final"]),P=l.current+d,y=r.size();let S;return B==="final"?S=ry(e,s)(O,Q):S=null,new lm(P,y,B==="final",S)}const w="POST",N=e.maxUploadRetryTime,j=new lc(n,w,k,N);return j.headers=x,j.body=b.uploadData(),j.progressCallback=o||null,j.errorHandler=Hd(t),j}const ri={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function m1(t){switch(t){case"running":case"pausing":case"canceling":return ri.RUNNING;case"paused":return ri.PAUSED;case"success":return ri.SUCCESS;case"canceled":return ri.CANCELED;case"error":return ri.ERROR;default:return ri.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b7{constructor(e,n,r){if(KR(e)||n!=null||r!=null)this.next=e,this.error=n??void 0,this.complete=r??void 0;else{const s=e;this.next=s.next,this.error=s.error,this.complete=s.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dc(t){return(...e)=>{Promise.resolve().then(()=>t(...e))}}class x7{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Ul.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Ul.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Ul.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i){if(this.sent_)throw Sh("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Sh("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Sh("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Sh("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Sh("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class S7 extends x7{initXhr(){this.xhr_.responseType="text"}}function Cl(){return new S7}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N7{constructor(e,n,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=n,this._metadata=r,this._mappings=aN(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals(pn.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const s=this.isExponentialBackoffExpired();if(eN(i.status,[]))if(s)i=QS();else{this.sleepTime=Math.max(this.sleepTime*2,AR),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals(pn.CANCELED)?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,s)=>{this._resolve=i,this._reject=s,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return n=>this._updateProgress(e+n)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,r])=>{switch(this._state){case"running":e(n,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,n)=>{const r=y7(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Cl,e,n);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((n,r)=>{const i=w7(this._ref.storage,this._ref._location,e,this._blob),s=this._ref.storage._makeRequest(i,Cl,n,r);this._request=s,s.getPromise().then(a=>{a=a,this._request=void 0,this._updateProgress(a.current),this._needToFetchStatus=!1,a.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=E_*this._chunkMultiplier,n=new lm(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,s)=>{let a;try{a=_7(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,n,this._makeProgressCallback())}catch(l){this._error=l,this._transition("error");return}const o=this._ref.storage._makeRequest(a,Cl,i,s,!1);this._request=o,o.getPromise().then(l=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(l.current),l.finalized?(this._metadata=l.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){E_*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,n)=>{const r=f7(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,Cl,e,n);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,n)=>{const r=v7(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Cl,e,n);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const n=this._transferred;this._transferred=e,this._transferred!==n&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const n=this._state==="paused";this._state=e,n&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=YS(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=m1(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,n,r,i){const s=new b7(n||void 0,r||void 0,i||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(e,n){return this._promise.then(e,n)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const n=this._observers.indexOf(e);n!==-1&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(m1(this._state)){case ri.SUCCESS:Dc(this._resolve.bind(null,this.snapshot))();break;case ri.CANCELED:case ri.ERROR:const n=this._reject;Dc(n.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(m1(this._state)){case ri.RUNNING:case ri.PAUSED:e.next&&Dc(e.next.bind(e,this.snapshot))();break;case ri.SUCCESS:e.complete&&Dc(e.complete.bind(e))();break;case ri.CANCELED:case ri.ERROR:e.error&&Dc(e.error.bind(e,this._error))();break;default:e.error&&Dc(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zl{constructor(e,n){this._service=e,n instanceof Si?this._location=n:this._location=Si.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Zl(e,n)}get root(){const e=new Si(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return sN(this._location.path)}get storage(){return this._service}get parent(){const e=s7(this._location.path);if(e===null)return null;const n=new Si(this._location.bucket,e);return new Zl(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw OR(e)}}function A7(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new N7(t,new To(e),n)}function E7(t){t._throwIfRoot("getDownloadURL");const e=p7(t.storage,t._location,aN());return t.storage.makeRequestWithTokens(e,Cl).then(n=>{if(n===null)throw DR();return n})}function k7(t){t._throwIfRoot("deleteObject");const e=m7(t.storage,t._location);return t.storage.makeRequestWithTokens(e,Cl)}function T7(t,e){const n=a7(t._location.path,e),r=new Si(t._location.bucket,n);return new Zl(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I7(t){return/^[A-Za-z]+:\/\//.test(t)}function C7(t,e){return new Zl(t,e)}function uN(t,e){if(t instanceof ay){const n=t;if(n._bucket==null)throw LR();const r=new Zl(n,n._bucket);return e!=null?uN(r,e):r}else return e!==void 0?T7(t,e):t}function P7(t,e){if(e&&I7(e)){if(t instanceof ay)return C7(t,e);throw X0("To use ref(service, url), the first argument must be a Storage instance.")}else return uN(t,e)}function k_(t,e){const n=e==null?void 0:e[GS];return n==null?null:Si.makeFromBucketSpec(n,t)}function j7(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:O4(i,t.app.options.projectId))}class ay{constructor(e,n,r,i,s){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=WS,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=SR,this._maxUploadRetryTime=NR,this._requests=new Set,i!=null?this._bucket=Si.makeFromBucketSpec(i,this._host):this._bucket=k_(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Si.makeFromBucketSpec(this._url,e):this._bucket=k_(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){A_("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){A_("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Zl(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new MR(XS());{const a=QR(e,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const T_="@firebase/storage",I_="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hN="storage";function dN(t,e,n){return t=bn(t),A7(t,e,n)}function fN(t){return t=bn(t),E7(t)}function L7(t){return t=bn(t),k7(t)}function oy(t,e){return t=bn(t),P7(t,e)}function R7(t=h2(),e){t=bn(t);const r=Om(t,hN).getImmediate({identifier:e}),i=R4("storage");return i&&D7(r,...i),r}function D7(t,e,n,r={}){j7(t,e,n,r)}function F7(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new ay(n,r,i,e,nc)}function O7(){Gl(new Qo(hN,F7,"PUBLIC").setMultipleInstances(!0)),Bs(T_,I_,""),Bs(T_,I_,"esm2017")}O7();const M7={apiKey:"AIzaSyAcdG_9cM9yzmeMOFx-fhL4QAf9_wM3Yjo",authDomain:"achandymand-145da.firebaseapp.com",projectId:"achandymand-145da",storageBucket:"achandymand-145da.firebasestorage.app",messagingSenderId:"865306374889",appId:"1:865306374889:web:be1bc2500f388596de7678"},ly=U4(M7),cy=_j(ly),vt=lR(ly),uy=R7(ly);function V7(){const[t,e]=ie.useState(""),[n,r]=ie.useState(""),[i,s]=ie.useState(""),[a,o]=ie.useState(!1),l=Uu(),u=async d=>{d.preventDefault(),s(""),o(!0);try{await sP(cy,t,n),l("/timeregistrering")}catch(p){console.error("Login error:",p);let m="Der opstod en fejl ved login. Prv igen.";p.code==="auth/user-not-found"||p.code==="auth/wrong-password"?m="Forkert brugernavn eller adgangskode.":p.code==="auth/invalid-email"?m="Ugyldig e-mailadresse.":p.code==="auth/too-many-requests"&&(m="For mange forsg. Prv igen senere."),s(m)}finally{o(!1)}};return c.jsx("div",{className:"login-container",children:c.jsxs("div",{className:"login-box",children:[c.jsxs("div",{className:"login-logo",children:[c.jsx("h1",{children:"AC Handymand"}),c.jsx("p",{children:"Timeregistrering System"})]}),c.jsxs("form",{className:"login-form",onSubmit:u,children:[i&&c.jsx("div",{className:"error-message",children:i}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{htmlFor:"email",children:"Brugernavn (E-mail)"}),c.jsx("input",{type:"email",id:"email",value:t,onChange:d=>e(d.target.value),required:!0,disabled:a,placeholder:"din@email.dk"})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{htmlFor:"password",children:"Adgangskode"}),c.jsx("input",{type:"password",id:"password",value:n,onChange:d=>r(d.target.value),required:!0,disabled:a,placeholder:""})]}),c.jsx("button",{type:"submit",className:"btn-login",disabled:a,children:a?"Logger ind...":"Log ind"})]})]})})}const U7=["Sndag","Mandag","Tirsdag","Onsdag","Torsdag","Fredag","Lrdag"],cm=["Januar","Februar","Marts","April","Maj","Juni","Juli","August","September","Oktober","November","December"];function B7(t){return U7[t.getDay()]}function K7(t){const e=t.getDay();return e===0||e===6}function q7(t,e){const n=[];let r=new Date(t,e,20);const i=e===11?0:e+1,s=e===11?t+1:t,a=new Date(s,i,19);for(;r<=a;){const o=`${String(r.getDate()).padStart(2,"0")}/${String(r.getMonth()+1).padStart(2,"0")}/${r.getFullYear()}`;n.push({date:new Date(r),dayOfMonth:r.getDate(),month:r.getMonth(),year:r.getFullYear(),weekday:B7(r),isWeekend:K7(r),formattedDate:o}),r.setDate(r.getDate()+1)}return n}function pN(t){const e=t===11?0:t+1;return`${cm[t]} / ${cm[e]}`}function mN(t,e){return e===11?`${t} / ${t+1}`:String(t)}function z7(){return cm.map((t,e)=>{const n=e===11?0:e+1;return{value:e,label:`${t} / ${cm[n]}`}})}const $7="modulepreload",H7=function(t){return"/"+t},C_={},Z0=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),o=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));i=Promise.allSettled(n.map(l=>{if(l=H7(l),l in C_)return;C_[l]=!0;const u=l.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${d}`))return;const p=document.createElement("link");if(p.rel=u?"stylesheet":$7,u||(p.as="script"),p.crossOrigin="",p.href=l,o&&p.setAttribute("nonce",o),document.head.appendChild(p),u)return new Promise((m,g)=>{p.addEventListener("load",m),p.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return i.then(a=>{for(const o of a||[])o.status==="rejected"&&s(o.reason);return e().catch(s)})};function Gt(t){"@babel/helpers - typeof";return Gt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gt(t)}var Pr=Uint8Array,Ni=Uint16Array,hy=Int32Array,og=new Pr([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),lg=new Pr([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),ev=new Pr([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),gN=function(t,e){for(var n=new Ni(31),r=0;r<31;++r)n[r]=e+=1<<t[r-1];for(var i=new hy(n[30]),r=1;r<30;++r)for(var s=n[r];s<n[r+1];++s)i[s]=s-n[r]<<5|r;return{b:n,r:i}},vN=gN(og,2),yN=vN.b,tv=vN.r;yN[28]=258,tv[258]=28;var wN=gN(lg,0),W7=wN.b,P_=wN.r,nv=new Ni(32768);for(var hn=0;hn<32768;++hn){var yo=(hn&43690)>>1|(hn&21845)<<1;yo=(yo&52428)>>2|(yo&13107)<<2,yo=(yo&61680)>>4|(yo&3855)<<4,nv[hn]=((yo&65280)>>8|(yo&255)<<8)>>1}var Hs=function(t,e,n){for(var r=t.length,i=0,s=new Ni(e);i<r;++i)t[i]&&++s[t[i]-1];var a=new Ni(e);for(i=1;i<e;++i)a[i]=a[i-1]+s[i-1]<<1;var o;if(n){o=new Ni(1<<e);var l=15-e;for(i=0;i<r;++i)if(t[i])for(var u=i<<4|t[i],d=e-t[i],p=a[t[i]-1]++<<d,m=p|(1<<d)-1;p<=m;++p)o[nv[p]>>l]=u}else for(o=new Ni(r),i=0;i<r;++i)t[i]&&(o[i]=nv[a[t[i]-1]++]>>15-t[i]);return o},Zo=new Pr(288);for(var hn=0;hn<144;++hn)Zo[hn]=8;for(var hn=144;hn<256;++hn)Zo[hn]=9;for(var hn=256;hn<280;++hn)Zo[hn]=7;for(var hn=280;hn<288;++hn)Zo[hn]=8;var kd=new Pr(32);for(var hn=0;hn<32;++hn)kd[hn]=5;var G7=Hs(Zo,9,0),Q7=Hs(Zo,9,1),Y7=Hs(kd,5,0),J7=Hs(kd,5,1),g1=function(t){for(var e=t[0],n=1;n<t.length;++n)t[n]>e&&(e=t[n]);return e},rs=function(t,e,n){var r=e/8|0;return(t[r]|t[r+1]<<8)>>(e&7)&n},v1=function(t,e){var n=e/8|0;return(t[n]|t[n+1]<<8|t[n+2]<<16)>>(e&7)},dy=function(t){return(t+7)/8|0},_N=function(t,e,n){return(n==null||n>t.length)&&(n=t.length),new Pr(t.subarray(e,n))},X7=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],ls=function(t,e,n){var r=new Error(e||X7[t]);if(r.code=t,Error.captureStackTrace&&Error.captureStackTrace(r,ls),!n)throw r;return r},Z7=function(t,e,n,r){var i=t.length,s=0;if(!i||e.f&&!e.l)return n||new Pr(0);var a=!n,o=a||e.i!=2,l=e.i;a&&(n=new Pr(i*3));var u=function(Ie){var De=n.length;if(Ie>De){var Le=new Pr(Math.max(De*2,Ie));Le.set(n),n=Le}},d=e.f||0,p=e.p||0,m=e.b||0,g=e.l,x=e.d,b=e.m,k=e.n,w=i*8;do{if(!g){d=rs(t,p,1);var N=rs(t,p+1,3);if(p+=3,N)if(N==1)g=Q7,x=J7,b=9,k=5;else if(N==2){var B=rs(t,p,31)+257,P=rs(t,p+10,15)+4,y=B+rs(t,p+5,31)+1;p+=14;for(var S=new Pr(y),L=new Pr(19),A=0;A<P;++A)L[ev[A]]=rs(t,p+A*3,7);p+=P*3;for(var T=g1(L),I=(1<<T)-1,M=Hs(L,T,1),A=0;A<y;){var ne=M[rs(t,p,I)];p+=ne&15;var j=ne>>4;if(j<16)S[A++]=j;else{var V=0,U=0;for(j==16?(U=3+rs(t,p,3),p+=2,V=S[A-1]):j==17?(U=3+rs(t,p,7),p+=3):j==18&&(U=11+rs(t,p,127),p+=7);U--;)S[A++]=V}}var K=S.subarray(0,B),H=S.subarray(B);b=g1(K),k=g1(H),g=Hs(K,b,1),x=Hs(H,k,1)}else ls(1);else{var j=dy(p)+4,O=t[j-4]|t[j-3]<<8,Q=j+O;if(Q>i){l&&ls(0);break}o&&u(m+O),n.set(t.subarray(j,Q),m),e.b=m+=O,e.p=p=Q*8,e.f=d;continue}if(p>w){l&&ls(0);break}}o&&u(m+131072);for(var te=(1<<b)-1,me=(1<<k)-1,R=p;;R=p){var V=g[v1(t,p)&te],$=V>>4;if(p+=V&15,p>w){l&&ls(0);break}if(V||ls(2),$<256)n[m++]=$;else if($==256){R=p,g=null;break}else{var J=$-254;if($>264){var A=$-257,W=og[A];J=rs(t,p,(1<<W)-1)+yN[A],p+=W}var ae=x[v1(t,p)&me],le=ae>>4;ae||ls(3),p+=ae&15;var H=W7[le];if(le>3){var W=lg[le];H+=v1(t,p)&(1<<W)-1,p+=W}if(p>w){l&&ls(0);break}o&&u(m+131072);var ue=m+J;if(m<H){var de=s-H,ke=Math.min(H,ue);for(de+m<0&&ls(3);m<ke;++m)n[m]=r[de+m]}for(;m<ue;++m)n[m]=n[m-H]}}e.l=g,e.p=R,e.b=m,e.f=d,g&&(d=1,e.m=b,e.d=x,e.n=k)}while(!d);return m!=n.length&&a?_N(n,0,m):n.subarray(0,m)},ya=function(t,e,n){n<<=e&7;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8},Nh=function(t,e,n){n<<=e&7;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8,t[r+2]|=n>>16},y1=function(t,e){for(var n=[],r=0;r<t.length;++r)t[r]&&n.push({s:r,f:t[r]});var i=n.length,s=n.slice();if(!i)return{t:xN,l:0};if(i==1){var a=new Pr(n[0].s+1);return a[n[0].s]=1,{t:a,l:1}}n.sort(function(Q,B){return Q.f-B.f}),n.push({s:-1,f:25001});var o=n[0],l=n[1],u=0,d=1,p=2;for(n[0]={s:-1,f:o.f+l.f,l:o,r:l};d!=i-1;)o=n[n[u].f<n[p].f?u++:p++],l=n[u!=d&&n[u].f<n[p].f?u++:p++],n[d++]={s:-1,f:o.f+l.f,l:o,r:l};for(var m=s[0].s,r=1;r<i;++r)s[r].s>m&&(m=s[r].s);var g=new Ni(m+1),x=rv(n[d-1],g,0);if(x>e){var r=0,b=0,k=x-e,w=1<<k;for(s.sort(function(B,P){return g[P.s]-g[B.s]||B.f-P.f});r<i;++r){var N=s[r].s;if(g[N]>e)b+=w-(1<<x-g[N]),g[N]=e;else break}for(b>>=k;b>0;){var j=s[r].s;g[j]<e?b-=1<<e-g[j]++-1:++r}for(;r>=0&&b;--r){var O=s[r].s;g[O]==e&&(--g[O],++b)}x=e}return{t:new Pr(g),l:x}},rv=function(t,e,n){return t.s==-1?Math.max(rv(t.l,e,n+1),rv(t.r,e,n+1)):e[t.s]=n},j_=function(t){for(var e=t.length;e&&!t[--e];);for(var n=new Ni(++e),r=0,i=t[0],s=1,a=function(l){n[r++]=l},o=1;o<=e;++o)if(t[o]==i&&o!=e)++s;else{if(!i&&s>2){for(;s>138;s-=138)a(32754);s>2&&(a(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(a(i),--s;s>6;s-=6)a(8304);s>2&&(a(s-3<<5|8208),s=0)}for(;s--;)a(i);s=1,i=t[o]}return{c:n.subarray(0,r),n:e}},Ah=function(t,e){for(var n=0,r=0;r<e.length;++r)n+=t[r]*e[r];return n},bN=function(t,e,n){var r=n.length,i=dy(e+2);t[i]=r&255,t[i+1]=r>>8,t[i+2]=t[i]^255,t[i+3]=t[i+1]^255;for(var s=0;s<r;++s)t[i+s+4]=n[s];return(i+4+r)*8},L_=function(t,e,n,r,i,s,a,o,l,u,d){ya(e,d++,n),++i[256];for(var p=y1(i,15),m=p.t,g=p.l,x=y1(s,15),b=x.t,k=x.l,w=j_(m),N=w.c,j=w.n,O=j_(b),Q=O.c,B=O.n,P=new Ni(19),y=0;y<N.length;++y)++P[N[y]&31];for(var y=0;y<Q.length;++y)++P[Q[y]&31];for(var S=y1(P,7),L=S.t,A=S.l,T=19;T>4&&!L[ev[T-1]];--T);var I=u+5<<3,M=Ah(i,Zo)+Ah(s,kd)+a,ne=Ah(i,m)+Ah(s,b)+a+14+3*T+Ah(P,L)+2*P[16]+3*P[17]+7*P[18];if(l>=0&&I<=M&&I<=ne)return bN(e,d,t.subarray(l,l+u));var V,U,K,H;if(ya(e,d,1+(ne<M)),d+=2,ne<M){V=Hs(m,g,0),U=m,K=Hs(b,k,0),H=b;var te=Hs(L,A,0);ya(e,d,j-257),ya(e,d+5,B-1),ya(e,d+10,T-4),d+=14;for(var y=0;y<T;++y)ya(e,d+3*y,L[ev[y]]);d+=3*T;for(var me=[N,Q],R=0;R<2;++R)for(var $=me[R],y=0;y<$.length;++y){var J=$[y]&31;ya(e,d,te[J]),d+=L[J],J>15&&(ya(e,d,$[y]>>5&127),d+=$[y]>>12)}}else V=G7,U=Zo,K=Y7,H=kd;for(var y=0;y<o;++y){var W=r[y];if(W>255){var J=W>>18&31;Nh(e,d,V[J+257]),d+=U[J+257],J>7&&(ya(e,d,W>>23&31),d+=og[J]);var ae=W&31;Nh(e,d,K[ae]),d+=H[ae],ae>3&&(Nh(e,d,W>>5&8191),d+=lg[ae])}else Nh(e,d,V[W]),d+=U[W]}return Nh(e,d,V[256]),d+U[256]},eD=new hy([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),xN=new Pr(0),tD=function(t,e,n,r,i,s){var a=s.z||t.length,o=new Pr(r+a+5*(1+Math.ceil(a/7e3))+i),l=o.subarray(r,o.length-i),u=s.l,d=(s.r||0)&7;if(e){d&&(l[0]=s.r>>3);for(var p=eD[e-1],m=p>>13,g=p&8191,x=(1<<n)-1,b=s.p||new Ni(32768),k=s.h||new Ni(x+1),w=Math.ceil(n/3),N=2*w,j=function(Xe){return(t[Xe]^t[Xe+1]<<w^t[Xe+2]<<N)&x},O=new hy(25e3),Q=new Ni(288),B=new Ni(32),P=0,y=0,S=s.i||0,L=0,A=s.w||0,T=0;S+2<a;++S){var I=j(S),M=S&32767,ne=k[I];if(b[M]=ne,k[I]=M,A<=S){var V=a-S;if((P>7e3||L>24576)&&(V>423||!u)){d=L_(t,l,0,O,Q,B,y,L,T,S-T,d),L=P=y=0,T=S;for(var U=0;U<286;++U)Q[U]=0;for(var U=0;U<30;++U)B[U]=0}var K=2,H=0,te=g,me=M-ne&32767;if(V>2&&I==j(S-me))for(var R=Math.min(m,V)-1,$=Math.min(32767,S),J=Math.min(258,V);me<=$&&--te&&M!=ne;){if(t[S+K]==t[S+K-me]){for(var W=0;W<J&&t[S+W]==t[S+W-me];++W);if(W>K){if(K=W,H=me,W>R)break;for(var ae=Math.min(me,W-2),le=0,U=0;U<ae;++U){var ue=S-me+U&32767,de=b[ue],ke=ue-de&32767;ke>le&&(le=ke,ne=ue)}}}M=ne,ne=b[M],me+=M-ne&32767}if(H){O[L++]=268435456|tv[K]<<18|P_[H];var Ie=tv[K]&31,De=P_[H]&31;y+=og[Ie]+lg[De],++Q[257+Ie],++B[De],A=S+K,++P}else O[L++]=t[S],++Q[t[S]]}}for(S=Math.max(S,A);S<a;++S)O[L++]=t[S],++Q[t[S]];d=L_(t,l,u,O,Q,B,y,L,T,S-T,d),u||(s.r=d&7|l[d/8|0]<<3,d-=7,s.h=k,s.p=b,s.i=S,s.w=A)}else{for(var S=s.w||0;S<a+u;S+=65535){var Le=S+65535;Le>=a&&(l[d/8|0]=u,Le=a),d=bN(l,d+1,t.subarray(S,Le))}s.i=a}return _N(o,0,r+dy(d)+i)},SN=function(){var t=1,e=0;return{p:function(n){for(var r=t,i=e,s=n.length|0,a=0;a!=s;){for(var o=Math.min(a+2655,s);a<o;++a)i+=r+=n[a];r=(r&65535)+15*(r>>16),i=(i&65535)+15*(i>>16)}t=r,e=i},d:function(){return t%=65521,e%=65521,(t&255)<<24|(t&65280)<<8|(e&255)<<8|e>>8}}},nD=function(t,e,n,r,i){if(!i&&(i={l:1},e.dictionary)){var s=e.dictionary.subarray(-32768),a=new Pr(s.length+t.length);a.set(s),a.set(t,s.length),t=a,i.w=s.length}return tD(t,e.level==null?6:e.level,e.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+e.mem,n,r,i)},NN=function(t,e,n){for(;n;++e)t[e]=n,n>>>=8},rD=function(t,e){var n=e.level,r=n==0?0:n<6?1:n==9?3:2;if(t[0]=120,t[1]=r<<6|(e.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,e.dictionary){var i=SN();i.p(e.dictionary),NN(t,2,i.d())}},iD=function(t,e){return((t[0]&15)!=8||t[0]>>4>7||(t[0]<<8|t[1])%31)&&ls(6,"invalid zlib data"),(t[1]>>5&1)==1&&ls(6,"invalid zlib data: "+(t[1]&32?"need":"unexpected")+" dictionary"),(t[1]>>3&4)+2};function iv(t,e){e||(e={});var n=SN();n.p(t);var r=nD(t,e,e.dictionary?6:2,4);return rD(r,e),NN(r,r.length-4,n.d()),r}function sD(t,e){return Z7(t.subarray(iD(t),-4),{i:2},e,e)}var aD=typeof TextDecoder<"u"&&new TextDecoder,oD=0;try{aD.decode(xN,{stream:!0}),oD=1}catch{}var yt=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function w1(){yt.console&&typeof yt.console.log=="function"&&yt.console.log.apply(yt.console,arguments)}var tn={log:w1,warn:function(t){yt.console&&(typeof yt.console.warn=="function"?yt.console.warn.apply(yt.console,arguments):w1.call(null,arguments))},error:function(t){yt.console&&(typeof yt.console.error=="function"?yt.console.error.apply(yt.console,arguments):w1(t))}};function _1(t,e,n){var r=new XMLHttpRequest;r.open("GET",t),r.responseType="blob",r.onload=function(){Il(r.response,e,n)},r.onerror=function(){tn.error("could not download file")},r.send()}function R_(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function Kf(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var Jh,sv,Il=yt.saveAs||((typeof window>"u"?"undefined":Gt(window))!=="object"||window!==yt?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,e,n){var r=yt.URL||yt.webkitURL,i=document.createElement("a");e=e||t.name||"download",i.download=e,i.rel="noopener",typeof t=="string"?(i.href=t,i.origin!==location.origin?R_(i.href)?_1(t,e,n):Kf(i,i.target="_blank"):Kf(i)):(i.href=r.createObjectURL(t),setTimeout(function(){r.revokeObjectURL(i.href)},4e4),setTimeout(function(){Kf(i)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,n){if(e=e||t.name||"download",typeof t=="string")if(R_(t))_1(t,e,n);else{var r=document.createElement("a");r.href=t,r.target="_blank",setTimeout(function(){Kf(r)})}else navigator.msSaveOrOpenBlob(function(i,s){return s===void 0?s={autoBom:!1}:Gt(s)!=="object"&&(tn.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i}(t,n),e)}:function(t,e,n,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof t=="string")return _1(t,e,n);var i=t.type==="application/octet-stream",s=/constructor/i.test(yt.HTMLElement)||yt.safari,a=/CriOS\/[\d]+/.test(navigator.userAgent);if((a||i&&s)&&(typeof FileReader>"u"?"undefined":Gt(FileReader))==="object"){var o=new FileReader;o.onloadend=function(){var d=o.result;d=a?d:d.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=d:location=d,r=null},o.readAsDataURL(t)}else{var l=yt.URL||yt.webkitURL,u=l.createObjectURL(t);r?r.location=u:location.href=u,r=null,setTimeout(function(){l.revokeObjectURL(u)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function AN(t){var e;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(o){return[parseInt(o[1]),parseInt(o[2]),parseInt(o[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(o){return[parseInt(o[1],16),parseInt(o[2],16),parseInt(o[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(o){return[parseInt(o[1]+o[1],16),parseInt(o[2]+o[2],16),parseInt(o[3]+o[3],16)]}}],r=0;r<n.length;r++){var i=n[r].re,s=n[r].process,a=i.exec(t);a&&(e=s(a),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var o=this.r.toString(16),l=this.g.toString(16),u=this.b.toString(16);return o.length==1&&(o="0"+o),l.length==1&&(l="0"+l),u.length==1&&(u="0"+u),"#"+o+l+u}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function b1(t,e){var n=t[0],r=t[1],i=t[2],s=t[3];n=Nr(n,r,i,s,e[0],7,-680876936),s=Nr(s,n,r,i,e[1],12,-389564586),i=Nr(i,s,n,r,e[2],17,606105819),r=Nr(r,i,s,n,e[3],22,-1044525330),n=Nr(n,r,i,s,e[4],7,-176418897),s=Nr(s,n,r,i,e[5],12,1200080426),i=Nr(i,s,n,r,e[6],17,-1473231341),r=Nr(r,i,s,n,e[7],22,-45705983),n=Nr(n,r,i,s,e[8],7,1770035416),s=Nr(s,n,r,i,e[9],12,-1958414417),i=Nr(i,s,n,r,e[10],17,-42063),r=Nr(r,i,s,n,e[11],22,-1990404162),n=Nr(n,r,i,s,e[12],7,1804603682),s=Nr(s,n,r,i,e[13],12,-40341101),i=Nr(i,s,n,r,e[14],17,-1502002290),n=Ar(n,r=Nr(r,i,s,n,e[15],22,1236535329),i,s,e[1],5,-165796510),s=Ar(s,n,r,i,e[6],9,-1069501632),i=Ar(i,s,n,r,e[11],14,643717713),r=Ar(r,i,s,n,e[0],20,-373897302),n=Ar(n,r,i,s,e[5],5,-701558691),s=Ar(s,n,r,i,e[10],9,38016083),i=Ar(i,s,n,r,e[15],14,-660478335),r=Ar(r,i,s,n,e[4],20,-405537848),n=Ar(n,r,i,s,e[9],5,568446438),s=Ar(s,n,r,i,e[14],9,-1019803690),i=Ar(i,s,n,r,e[3],14,-187363961),r=Ar(r,i,s,n,e[8],20,1163531501),n=Ar(n,r,i,s,e[13],5,-1444681467),s=Ar(s,n,r,i,e[2],9,-51403784),i=Ar(i,s,n,r,e[7],14,1735328473),n=Er(n,r=Ar(r,i,s,n,e[12],20,-1926607734),i,s,e[5],4,-378558),s=Er(s,n,r,i,e[8],11,-2022574463),i=Er(i,s,n,r,e[11],16,1839030562),r=Er(r,i,s,n,e[14],23,-35309556),n=Er(n,r,i,s,e[1],4,-1530992060),s=Er(s,n,r,i,e[4],11,1272893353),i=Er(i,s,n,r,e[7],16,-155497632),r=Er(r,i,s,n,e[10],23,-1094730640),n=Er(n,r,i,s,e[13],4,681279174),s=Er(s,n,r,i,e[0],11,-358537222),i=Er(i,s,n,r,e[3],16,-722521979),r=Er(r,i,s,n,e[6],23,76029189),n=Er(n,r,i,s,e[9],4,-640364487),s=Er(s,n,r,i,e[12],11,-421815835),i=Er(i,s,n,r,e[15],16,530742520),n=kr(n,r=Er(r,i,s,n,e[2],23,-995338651),i,s,e[0],6,-198630844),s=kr(s,n,r,i,e[7],10,1126891415),i=kr(i,s,n,r,e[14],15,-1416354905),r=kr(r,i,s,n,e[5],21,-57434055),n=kr(n,r,i,s,e[12],6,1700485571),s=kr(s,n,r,i,e[3],10,-1894986606),i=kr(i,s,n,r,e[10],15,-1051523),r=kr(r,i,s,n,e[1],21,-2054922799),n=kr(n,r,i,s,e[8],6,1873313359),s=kr(s,n,r,i,e[15],10,-30611744),i=kr(i,s,n,r,e[6],15,-1560198380),r=kr(r,i,s,n,e[13],21,1309151649),n=kr(n,r,i,s,e[4],6,-145523070),s=kr(s,n,r,i,e[11],10,-1120210379),i=kr(i,s,n,r,e[2],15,718787259),r=kr(r,i,s,n,e[9],21,-343485551),t[0]=Lo(n,t[0]),t[1]=Lo(r,t[1]),t[2]=Lo(i,t[2]),t[3]=Lo(s,t[3])}function cg(t,e,n,r,i,s){return e=Lo(Lo(e,t),Lo(r,s)),Lo(e<<i|e>>>32-i,n)}function Nr(t,e,n,r,i,s,a){return cg(e&n|~e&r,t,e,i,s,a)}function Ar(t,e,n,r,i,s,a){return cg(e&r|n&~r,t,e,i,s,a)}function Er(t,e,n,r,i,s,a){return cg(e^n^r,t,e,i,s,a)}function kr(t,e,n,r,i,s,a){return cg(n^(e|~r),t,e,i,s,a)}function EN(t){var e,n=t.length,r=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)b1(r,lD(t.substring(e-64,e)));t=t.substring(e-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)i[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(i[e>>2]|=128<<(e%4<<3),e>55)for(b1(r,i),e=0;e<16;e++)i[e]=0;return i[14]=8*n,b1(r,i),r}function lD(t){var e,n=[];for(e=0;e<64;e+=4)n[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return n}Jh=yt.atob.bind(yt),sv=yt.btoa.bind(yt);var D_="0123456789abcdef".split("");function cD(t){for(var e="",n=0;n<4;n++)e+=D_[t>>8*n+4&15]+D_[t>>8*n&15];return e}function uD(t){return String.fromCharCode((255&t)>>0,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function av(t){return EN(t).map(uD).join("")}var hD=function(t){for(var e=0;e<t.length;e++)t[e]=cD(t[e]);return t.join("")}(EN("hello"))!="5d41402abc4b2a76b9719d911017c592";function Lo(t,e){if(hD){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}return t+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function ov(t,e){var n,r,i,s;if(t!==n){for(var a=(i=t,s=1+(256/t.length>>0),new Array(s+1).join(i)),o=[],l=0;l<256;l++)o[l]=l;var u=0;for(l=0;l<256;l++){var d=o[l];u=(u+d+a.charCodeAt(l))%256,o[l]=o[u],o[u]=d}n=t,r=o}else o=r;var p=e.length,m=0,g=0,x="";for(l=0;l<p;l++)g=(g+(d=o[m=(m+1)%256]))%256,o[m]=o[g],o[g]=d,a=o[(o[m]+o[g])%256],x+=String.fromCharCode(e.charCodeAt(l)^a);return x}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var F_={print:4,modify:8,copy:16,"annot-forms":32};function Bc(t,e,n,r){this.v=1,this.r=2;var i=192;t.forEach(function(o){if(F_.perm!==void 0)throw new Error("Invalid permission: "+o);i+=F_[o]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var s=(e+this.padding).substr(0,32),a=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,a),this.P=-(1+(255^i)),this.encryptionKey=av(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=ov(this.encryptionKey,this.padding)}function Kc(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",n=t.length,r=0;r<n;r++){var i=t.charCodeAt(r);i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?e+="#"+("0"+i.toString(16)).slice(-2):e+=t[r]}return e}function O_(t){if(Gt(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(n,r,i){if(i=i||!1,typeof n!="string"||typeof r!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(n)||(e[n]={});var s=Math.random().toString(35);return e[n][s]=[r,!!i],s},this.unsubscribe=function(n){for(var r in e)if(e[r][n])return delete e[r][n],Object.keys(e[r]).length===0&&delete e[r],!0;return!1},this.publish=function(n){if(e.hasOwnProperty(n)){var r=Array.prototype.slice.call(arguments,1),i=[];for(var s in e[n]){var a=e[n][s];try{a[0].apply(t,r)}catch(o){yt.console&&tn.error("jsPDF PubSub Error",o.message,o)}a[1]&&i.push(s)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function um(t){if(!(this instanceof um))return new um(t);var e="opacity,stroke-opacity".split(",");for(var n in t)t.hasOwnProperty(n)&&e.indexOf(n)>=0&&(this[n]=t[n]);this.id="",this.objectNumber=-1}function kN(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function Pl(t,e,n,r,i){if(!(this instanceof Pl))return new Pl(t,e,n,r,i);this.type=t==="axial"?2:3,this.coords=e,this.colors=n,kN.call(this,r,i)}function nu(t,e,n,r,i){if(!(this instanceof nu))return new nu(t,e,n,r,i);this.boundingBox=t,this.xStep=e,this.yStep=n,this.stream="",this.cloneIndex=0,kN.call(this,r,i)}function gt(t){var e,n=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],i=arguments[2],s=arguments[3],a=[],o=1,l=16,u="S",d=null;Gt(t=t||{})==="object"&&(n=t.orientation,r=t.unit||r,i=t.format||i,s=t.compress||t.compressPdf||s,(d=t.encryption||null)!==null&&(d.userPassword=d.userPassword||"",d.ownerPassword=d.ownerPassword||"",d.userPermissions=d.userPermissions||[]),o=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(e=t.precision),t.floatPrecision!==void 0&&(l=t.floatPrecision),u=t.defaultPathOperation||"S"),a=t.filters||(s===!0?["FlateEncode"]:a),r=r||"mm",n=(""+(n||"P")).toLowerCase();var p=t.putOnlyUsedFonts||!1,m={},g={internal:{},__private__:{}};g.__private__.PubSub=O_;var x="1.3",b=g.__private__.getPdfVersion=function(){return x};g.__private__.setPdfVersion=function(_){x=_};var k={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};g.__private__.getPageFormats=function(){return k};var w=g.__private__.getPageFormat=function(_){return k[_]};i=i||"a4";var N={COMPAT:"compat",ADVANCED:"advanced"},j=N.COMPAT;function O(){this.saveGraphicsState(),oe(new nt(ze,0,0,-ze,0,_r()*ze).toString()+" cm"),this.setFontSize(this.getFontSize()/ze),u="n",j=N.ADVANCED}function Q(){this.restoreGraphicsState(),u="S",j=N.COMPAT}var B=g.__private__.combineFontStyleAndFontWeight=function(_,q){if(_=="bold"&&q=="normal"||_=="bold"&&q==400||_=="normal"&&q=="italic"||_=="bold"&&q=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return q&&(_=q==400||q==="normal"?_==="italic"?"italic":"normal":q!=700&&q!=="bold"||_!=="normal"?(q==700?"bold":q)+""+_:"bold"),_};g.advancedAPI=function(_){var q=j===N.COMPAT;return q&&O.call(this),typeof _!="function"||(_(this),q&&Q.call(this)),this},g.compatAPI=function(_){var q=j===N.ADVANCED;return q&&Q.call(this),typeof _!="function"||(_(this),q&&O.call(this)),this},g.isAdvancedAPI=function(){return j===N.ADVANCED};var P,y=function(_){if(j!==N.ADVANCED)throw new Error(_+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},S=g.roundToPrecision=g.__private__.roundToPrecision=function(_,q){var se=e||q;if(isNaN(_)||isNaN(se))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return _.toFixed(se).replace(/0+$/,"")};P=g.hpf=g.__private__.hpf=typeof l=="number"?function(_){if(isNaN(_))throw new Error("Invalid argument passed to jsPDF.hpf");return S(_,l)}:l==="smart"?function(_){if(isNaN(_))throw new Error("Invalid argument passed to jsPDF.hpf");return S(_,_>-1&&_<1?16:5)}:function(_){if(isNaN(_))throw new Error("Invalid argument passed to jsPDF.hpf");return S(_,16)};var L=g.f2=g.__private__.f2=function(_){if(isNaN(_))throw new Error("Invalid argument passed to jsPDF.f2");return S(_,2)},A=g.__private__.f3=function(_){if(isNaN(_))throw new Error("Invalid argument passed to jsPDF.f3");return S(_,3)},T=g.scale=g.__private__.scale=function(_){if(isNaN(_))throw new Error("Invalid argument passed to jsPDF.scale");return j===N.COMPAT?_*ze:j===N.ADVANCED?_:void 0},I=function(_){return j===N.COMPAT?_r()-_:j===N.ADVANCED?_:void 0},M=function(_){return T(I(_))};g.__private__.setPrecision=g.setPrecision=function(_){typeof parseInt(_,10)=="number"&&(e=parseInt(_,10))};var ne,V="00000000000000000000000000000000",U=g.__private__.getFileId=function(){return V},K=g.__private__.setFileId=function(_){return V=_!==void 0&&/^[a-fA-F0-9]{32}$/.test(_)?_.toUpperCase():V.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),d!==null&&(ln=new Bc(d.userPermissions,d.userPassword,d.ownerPassword,V)),V};g.setFileId=function(_){return K(_),this},g.getFileId=function(){return U()};var H=g.__private__.convertDateToPDFDate=function(_){var q=_.getTimezoneOffset(),se=q<0?"+":"-",ce=Math.floor(Math.abs(q/60)),ye=Math.abs(q%60),Te=[se,J(ce),"'",J(ye),"'"].join("");return["D:",_.getFullYear(),J(_.getMonth()+1),J(_.getDate()),J(_.getHours()),J(_.getMinutes()),J(_.getSeconds()),Te].join("")},te=g.__private__.convertPDFDateToDate=function(_){var q=parseInt(_.substr(2,4),10),se=parseInt(_.substr(6,2),10)-1,ce=parseInt(_.substr(8,2),10),ye=parseInt(_.substr(10,2),10),Te=parseInt(_.substr(12,2),10),Ve=parseInt(_.substr(14,2),10);return new Date(q,se,ce,ye,Te,Ve,0)},me=g.__private__.setCreationDate=function(_){var q;if(_===void 0&&(_=new Date),_ instanceof Date)q=H(_);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(_))throw new Error("Invalid argument passed to jsPDF.setCreationDate");q=_}return ne=q},R=g.__private__.getCreationDate=function(_){var q=ne;return _==="jsDate"&&(q=te(ne)),q};g.setCreationDate=function(_){return me(_),this},g.getCreationDate=function(_){return R(_)};var $,J=g.__private__.padd2=function(_){return("0"+parseInt(_)).slice(-2)},W=g.__private__.padd2Hex=function(_){return("00"+(_=_.toString())).substr(_.length)},ae=0,le=[],ue=[],de=0,ke=[],Ie=[],De=!1,Le=ue,Xe=function(){ae=0,de=0,ue=[],le=[],ke=[],$i=An(),wr=An()};g.__private__.setCustomOutputDestination=function(_){De=!0,Le=_};var be=function(_){De||(Le=_)};g.__private__.resetCustomOutputDestination=function(){De=!1,Le=ue};var oe=g.__private__.out=function(_){return _=_.toString(),de+=_.length+1,Le.push(_),Le},We=g.__private__.write=function(_){return oe(arguments.length===1?_.toString():Array.prototype.join.call(arguments," "))},Fe=g.__private__.getArrayBuffer=function(_){for(var q=_.length,se=new ArrayBuffer(q),ce=new Uint8Array(se);q--;)ce[q]=_.charCodeAt(q);return se},he=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];g.__private__.getStandardFonts=function(){return he};var Ee=t.fontSize||16;g.__private__.setFontSize=g.setFontSize=function(_){return Ee=j===N.ADVANCED?_/ze:_,this};var Me,Ke=g.__private__.getFontSize=g.getFontSize=function(){return j===N.COMPAT?Ee:Ee*ze},$e=t.R2L||!1;g.__private__.setR2L=g.setR2L=function(_){return $e=_,this},g.__private__.getR2L=g.getR2L=function(){return $e};var Ge,at=g.__private__.setZoomMode=function(_){var q=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(_))Me=_;else if(isNaN(_)){if(q.indexOf(_)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+_+'" is not recognized.');Me=_}else Me=parseInt(_,10)};g.__private__.getZoomMode=function(){return Me};var tt,ut=g.__private__.setPageMode=function(_){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(_)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+_+'" is not recognized.');Ge=_};g.__private__.getPageMode=function(){return Ge};var dt=g.__private__.setLayoutMode=function(_){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(_)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+_+'" is not recognized.');tt=_};g.__private__.getLayoutMode=function(){return tt},g.__private__.setDisplayMode=g.setDisplayMode=function(_,q,se){return at(_),dt(q),ut(se),this};var ot={title:"",subject:"",author:"",keywords:"",creator:""};g.__private__.getDocumentProperty=function(_){if(Object.keys(ot).indexOf(_)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return ot[_]},g.__private__.getDocumentProperties=function(){return ot},g.__private__.setDocumentProperties=g.setProperties=g.setDocumentProperties=function(_){for(var q in ot)ot.hasOwnProperty(q)&&_[q]&&(ot[q]=_[q]);return this},g.__private__.setDocumentProperty=function(_,q){if(Object.keys(ot).indexOf(_)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return ot[_]=q};var ct,ze,_e,He,mt,ft={},Tt={},Vn=[],xt={},vr={},Bt={},Wn={},Nn=null,Dt=0,lt=[],Ct=new O_(g),Rr=t.hotfixes||[],Jt={},mn={},di=[],nt=function _(q,se,ce,ye,Te,Ve){if(!(this instanceof _))return new _(q,se,ce,ye,Te,Ve);isNaN(q)&&(q=1),isNaN(se)&&(se=0),isNaN(ce)&&(ce=0),isNaN(ye)&&(ye=1),isNaN(Te)&&(Te=0),isNaN(Ve)&&(Ve=0),this._matrix=[q,se,ce,ye,Te,Ve]};Object.defineProperty(nt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(_){this._matrix[0]=_}}),Object.defineProperty(nt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(_){this._matrix[1]=_}}),Object.defineProperty(nt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(_){this._matrix[2]=_}}),Object.defineProperty(nt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(_){this._matrix[3]=_}}),Object.defineProperty(nt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(_){this._matrix[4]=_}}),Object.defineProperty(nt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(_){this._matrix[5]=_}}),Object.defineProperty(nt.prototype,"a",{get:function(){return this._matrix[0]},set:function(_){this._matrix[0]=_}}),Object.defineProperty(nt.prototype,"b",{get:function(){return this._matrix[1]},set:function(_){this._matrix[1]=_}}),Object.defineProperty(nt.prototype,"c",{get:function(){return this._matrix[2]},set:function(_){this._matrix[2]=_}}),Object.defineProperty(nt.prototype,"d",{get:function(){return this._matrix[3]},set:function(_){this._matrix[3]=_}}),Object.defineProperty(nt.prototype,"e",{get:function(){return this._matrix[4]},set:function(_){this._matrix[4]=_}}),Object.defineProperty(nt.prototype,"f",{get:function(){return this._matrix[5]},set:function(_){this._matrix[5]=_}}),Object.defineProperty(nt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(nt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(nt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(nt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),nt.prototype.join=function(_){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(P).join(_)},nt.prototype.multiply=function(_){var q=_.sx*this.sx+_.shy*this.shx,se=_.sx*this.shy+_.shy*this.sy,ce=_.shx*this.sx+_.sy*this.shx,ye=_.shx*this.shy+_.sy*this.sy,Te=_.tx*this.sx+_.ty*this.shx+this.tx,Ve=_.tx*this.shy+_.ty*this.sy+this.ty;return new nt(q,se,ce,ye,Te,Ve)},nt.prototype.decompose=function(){var _=this.sx,q=this.shy,se=this.shx,ce=this.sy,ye=this.tx,Te=this.ty,Ve=Math.sqrt(_*_+q*q),Ye=(_/=Ve)*se+(q/=Ve)*ce;se-=_*Ye,ce-=q*Ye;var f=Math.sqrt(se*se+ce*ce);return Ye/=f,_*(ce/=f)<q*(se/=f)&&(_=-_,q=-q,Ye=-Ye,Ve=-Ve),{scale:new nt(Ve,0,0,f,0,0),translate:new nt(1,0,0,1,ye,Te),rotate:new nt(_,q,-q,_,0,0),skew:new nt(1,0,Ye,1,0,0)}},nt.prototype.toString=function(_){return this.join(" ")},nt.prototype.inversed=function(){var _=this.sx,q=this.shy,se=this.shx,ce=this.sy,ye=this.tx,Te=this.ty,Ve=1/(_*ce-q*se),Ye=ce*Ve,f=-q*Ve,C=-se*Ve,F=_*Ve;return new nt(Ye,f,C,F,-Ye*ye-C*Te,-f*ye-F*Te)},nt.prototype.applyToPoint=function(_){var q=_.x*this.sx+_.y*this.shx+this.tx,se=_.x*this.shy+_.y*this.sy+this.ty;return new ca(q,se)},nt.prototype.applyToRectangle=function(_){var q=this.applyToPoint(_),se=this.applyToPoint(new ca(_.x+_.w,_.y+_.h));return new eo(q.x,q.y,se.x-q.x,se.y-q.y)},nt.prototype.clone=function(){var _=this.sx,q=this.shy,se=this.shx,ce=this.sy,ye=this.tx,Te=this.ty;return new nt(_,q,se,ce,ye,Te)},g.Matrix=nt;var Qr=g.matrixMult=function(_,q){return q.multiply(_)},yr=new nt(1,0,0,1,0,0);g.unitMatrix=g.identityMatrix=yr;var Un=function(_,q){if(!vr[_]){var se=(q instanceof Pl?"Sh":"P")+(Object.keys(xt).length+1).toString(10);q.id=se,vr[_]=se,xt[se]=q,Ct.publish("addPattern",q)}};g.ShadingPattern=Pl,g.TilingPattern=nu,g.addShadingPattern=function(_,q){return y("addShadingPattern()"),Un(_,q),this},g.beginTilingPattern=function(_){y("beginTilingPattern()"),to(_.boundingBox[0],_.boundingBox[1],_.boundingBox[2]-_.boundingBox[0],_.boundingBox[3]-_.boundingBox[1],_.matrix)},g.endTilingPattern=function(_,q){y("endTilingPattern()"),q.stream=Ie[$].join(`
`),Un(_,q),Ct.publish("endTilingPattern",q),di.pop().restore()};var Cn=g.__private__.newObject=function(){var _=An();return Bn(_,!0),_},An=g.__private__.newObjectDeferred=function(){return ae++,le[ae]=function(){return de},ae},Bn=function(_,q){return q=typeof q=="boolean"&&q,le[_]=de,q&&oe(_+" 0 obj"),_},Ua=g.__private__.newAdditionalObject=function(){var _={objId:An(),content:""};return ke.push(_),_},$i=An(),wr=An(),Yr=g.__private__.decodeColorString=function(_){var q=_.split(" ");if(q.length!==2||q[1]!=="g"&&q[1]!=="G")q.length===5&&(q[4]==="k"||q[4]==="K")&&(q=[(1-q[0])*(1-q[3]),(1-q[1])*(1-q[3]),(1-q[2])*(1-q[3]),"r"]);else{var se=parseFloat(q[0]);q=[se,se,se,"r"]}for(var ce="#",ye=0;ye<3;ye++)ce+=("0"+Math.floor(255*parseFloat(q[ye])).toString(16)).slice(-2);return ce},Dr=g.__private__.encodeColorString=function(_){var q;typeof _=="string"&&(_={ch1:_});var se=_.ch1,ce=_.ch2,ye=_.ch3,Te=_.ch4,Ve=_.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof se=="string"&&se.charAt(0)!=="#"){var Ye=new AN(se);if(Ye.ok)se=Ye.toHex();else if(!/^\d*\.?\d*$/.test(se))throw new Error('Invalid color "'+se+'" passed to jsPDF.encodeColorString.')}if(typeof se=="string"&&/^#[0-9A-Fa-f]{3}$/.test(se)&&(se="#"+se[1]+se[1]+se[2]+se[2]+se[3]+se[3]),typeof se=="string"&&/^#[0-9A-Fa-f]{6}$/.test(se)){var f=parseInt(se.substr(1),16);se=f>>16&255,ce=f>>8&255,ye=255&f}if(ce===void 0||Te===void 0&&se===ce&&ce===ye)if(typeof se=="string")q=se+" "+Ve[0];else switch(_.precision){case 2:q=L(se/255)+" "+Ve[0];break;case 3:default:q=A(se/255)+" "+Ve[0]}else if(Te===void 0||Gt(Te)==="object"){if(Te&&!isNaN(Te.a)&&Te.a===0)return q=["1.","1.","1.",Ve[1]].join(" ");if(typeof se=="string")q=[se,ce,ye,Ve[1]].join(" ");else switch(_.precision){case 2:q=[L(se/255),L(ce/255),L(ye/255),Ve[1]].join(" ");break;default:case 3:q=[A(se/255),A(ce/255),A(ye/255),Ve[1]].join(" ")}}else if(typeof se=="string")q=[se,ce,ye,Te,Ve[2]].join(" ");else switch(_.precision){case 2:q=[L(se),L(ce),L(ye),L(Te),Ve[2]].join(" ");break;case 3:default:q=[A(se),A(ce),A(ye),A(Te),Ve[2]].join(" ")}return q},Fr=g.__private__.getFilters=function(){return a},Pn=g.__private__.putStream=function(_){var q=(_=_||{}).data||"",se=_.filters||Fr(),ce=_.alreadyAppliedFilters||[],ye=_.addLength1||!1,Te=q.length,Ve=_.objectId,Ye=function(St){return St};if(d!==null&&Ve===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");d!==null&&(Ye=ln.encryptor(Ve,0));var f={};se===!0&&(se=["FlateEncode"]);var C=_.additionalKeyValues||[],F=(f=gt.API.processDataByFilters!==void 0?gt.API.processDataByFilters(q,se):{data:q,reverseChain:[]}).reverseChain+(Array.isArray(ce)?ce.join(" "):ce.toString());if(f.data.length!==0&&(C.push({key:"Length",value:f.data.length}),ye===!0&&C.push({key:"Length1",value:Te})),F.length!=0)if(F.split("/").length-1==1)C.push({key:"Filter",value:F});else{C.push({key:"Filter",value:"["+F+"]"});for(var X=0;X<C.length;X+=1)if(C[X].key==="DecodeParms"){for(var ve=[],Ne=0;Ne<f.reverseChain.split("/").length-1;Ne+=1)ve.push("null");ve.push(C[X].value),C[X].value="["+ve.join(" ")+"]"}}oe("<<");for(var Ue=0;Ue<C.length;Ue++)oe("/"+C[Ue].key+" "+C[Ue].value);oe(">>"),f.data.length!==0&&(oe("stream"),oe(Ye(f.data)),oe("endstream"))},fi=g.__private__.putPage=function(_){var q=_.number,se=_.data,ce=_.objId,ye=_.contentsObjId;Bn(ce,!0),oe("<</Type /Page"),oe("/Parent "+_.rootDictionaryObjId+" 0 R"),oe("/Resources "+_.resourceDictionaryObjId+" 0 R"),oe("/MediaBox ["+parseFloat(P(_.mediaBox.bottomLeftX))+" "+parseFloat(P(_.mediaBox.bottomLeftY))+" "+P(_.mediaBox.topRightX)+" "+P(_.mediaBox.topRightY)+"]"),_.cropBox!==null&&oe("/CropBox ["+P(_.cropBox.bottomLeftX)+" "+P(_.cropBox.bottomLeftY)+" "+P(_.cropBox.topRightX)+" "+P(_.cropBox.topRightY)+"]"),_.bleedBox!==null&&oe("/BleedBox ["+P(_.bleedBox.bottomLeftX)+" "+P(_.bleedBox.bottomLeftY)+" "+P(_.bleedBox.topRightX)+" "+P(_.bleedBox.topRightY)+"]"),_.trimBox!==null&&oe("/TrimBox ["+P(_.trimBox.bottomLeftX)+" "+P(_.trimBox.bottomLeftY)+" "+P(_.trimBox.topRightX)+" "+P(_.trimBox.topRightY)+"]"),_.artBox!==null&&oe("/ArtBox ["+P(_.artBox.bottomLeftX)+" "+P(_.artBox.bottomLeftY)+" "+P(_.artBox.topRightX)+" "+P(_.artBox.topRightY)+"]"),typeof _.userUnit=="number"&&_.userUnit!==1&&oe("/UserUnit "+_.userUnit),Ct.publish("putPage",{objId:ce,pageContext:lt[q],pageNumber:q,page:se}),oe("/Contents "+ye+" 0 R"),oe(">>"),oe("endobj");var Te=se.join(`
`);return j===N.ADVANCED&&(Te+=`
Q`),Bn(ye,!0),Pn({data:Te,filters:Fr(),objectId:ye}),oe("endobj"),ce},ws=g.__private__.putPages=function(){var _,q,se=[];for(_=1;_<=Dt;_++)lt[_].objId=An(),lt[_].contentsObjId=An();for(_=1;_<=Dt;_++)se.push(fi({number:_,data:Ie[_],objId:lt[_].objId,contentsObjId:lt[_].contentsObjId,mediaBox:lt[_].mediaBox,cropBox:lt[_].cropBox,bleedBox:lt[_].bleedBox,trimBox:lt[_].trimBox,artBox:lt[_].artBox,userUnit:lt[_].userUnit,rootDictionaryObjId:$i,resourceDictionaryObjId:wr}));Bn($i,!0),oe("<</Type /Pages");var ce="/Kids [";for(q=0;q<Dt;q++)ce+=se[q]+" 0 R ";oe(ce+"]"),oe("/Count "+Dt),oe(">>"),oe("endobj"),Ct.publish("postPutPages")},_s=function(_){Ct.publish("putFont",{font:_,out:oe,newObject:Cn,putStream:Pn}),_.isAlreadyPutted!==!0&&(_.objectNumber=Cn(),oe("<<"),oe("/Type /Font"),oe("/BaseFont /"+Kc(_.postScriptName)),oe("/Subtype /Type1"),typeof _.encoding=="string"&&oe("/Encoding /"+_.encoding),oe("/FirstChar 32"),oe("/LastChar 255"),oe(">>"),oe("endobj"))},bs=function(){for(var _ in ft)ft.hasOwnProperty(_)&&(p===!1||p===!0&&m.hasOwnProperty(_))&&_s(ft[_])},ea=function(_){_.objectNumber=Cn();var q=[];q.push({key:"Type",value:"/XObject"}),q.push({key:"Subtype",value:"/Form"}),q.push({key:"BBox",value:"["+[P(_.x),P(_.y),P(_.x+_.width),P(_.y+_.height)].join(" ")+"]"}),q.push({key:"Matrix",value:"["+_.matrix.toString()+"]"});var se=_.pages[1].join(`
`);Pn({data:se,additionalKeyValues:q,objectId:_.objectNumber}),oe("endobj")},ta=function(){for(var _ in Jt)Jt.hasOwnProperty(_)&&ea(Jt[_])},uc=function(_,q){var se,ce=[],ye=1/(q-1);for(se=0;se<1;se+=ye)ce.push(se);if(ce.push(1),_[0].offset!=0){var Te={offset:0,color:_[0].color};_.unshift(Te)}if(_[_.length-1].offset!=1){var Ve={offset:1,color:_[_.length-1].color};_.push(Ve)}for(var Ye="",f=0,C=0;C<ce.length;C++){for(se=ce[C];se>_[f+1].offset;)f++;var F=_[f].offset,X=(se-F)/(_[f+1].offset-F),ve=_[f].color,Ne=_[f+1].color;Ye+=W(Math.round((1-X)*ve[0]+X*Ne[0]).toString(16))+W(Math.round((1-X)*ve[1]+X*Ne[1]).toString(16))+W(Math.round((1-X)*ve[2]+X*Ne[2]).toString(16))}return Ye.trim()},Ba=function(_,q){q||(q=21);var se=Cn(),ce=uc(_.colors,q),ye=[];ye.push({key:"FunctionType",value:"0"}),ye.push({key:"Domain",value:"[0.0 1.0]"}),ye.push({key:"Size",value:"["+q+"]"}),ye.push({key:"BitsPerSample",value:"8"}),ye.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),ye.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Pn({data:ce,additionalKeyValues:ye,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:se}),oe("endobj"),_.objectNumber=Cn(),oe("<< /ShadingType "+_.type),oe("/ColorSpace /DeviceRGB");var Te="/Coords ["+P(parseFloat(_.coords[0]))+" "+P(parseFloat(_.coords[1]))+" ";_.type===2?Te+=P(parseFloat(_.coords[2]))+" "+P(parseFloat(_.coords[3])):Te+=P(parseFloat(_.coords[2]))+" "+P(parseFloat(_.coords[3]))+" "+P(parseFloat(_.coords[4]))+" "+P(parseFloat(_.coords[5])),oe(Te+="]"),_.matrix&&oe("/Matrix ["+_.matrix.toString()+"]"),oe("/Function "+se+" 0 R"),oe("/Extend [true true]"),oe(">>"),oe("endobj")},hc=function(_,q){var se=An(),ce=Cn();q.push({resourcesOid:se,objectOid:ce}),_.objectNumber=ce;var ye=[];ye.push({key:"Type",value:"/Pattern"}),ye.push({key:"PatternType",value:"1"}),ye.push({key:"PaintType",value:"1"}),ye.push({key:"TilingType",value:"1"}),ye.push({key:"BBox",value:"["+_.boundingBox.map(P).join(" ")+"]"}),ye.push({key:"XStep",value:P(_.xStep)}),ye.push({key:"YStep",value:P(_.yStep)}),ye.push({key:"Resources",value:se+" 0 R"}),_.matrix&&ye.push({key:"Matrix",value:"["+_.matrix.toString()+"]"}),Pn({data:_.stream,additionalKeyValues:ye,objectId:_.objectNumber}),oe("endobj")},xs=function(_){var q;for(q in xt)xt.hasOwnProperty(q)&&(xt[q]instanceof Pl?Ba(xt[q]):xt[q]instanceof nu&&hc(xt[q],_))},Ss=function(_){for(var q in _.objectNumber=Cn(),oe("<<"),_)switch(q){case"opacity":oe("/ca "+L(_[q]));break;case"stroke-opacity":oe("/CA "+L(_[q]))}oe(">>"),oe("endobj")},Hi=function(){var _;for(_ in Bt)Bt.hasOwnProperty(_)&&Ss(Bt[_])},na=function(){for(var _ in oe("/XObject <<"),Jt)Jt.hasOwnProperty(_)&&Jt[_].objectNumber>=0&&oe("/"+_+" "+Jt[_].objectNumber+" 0 R");Ct.publish("putXobjectDict"),oe(">>")},Qu=function(){ln.oid=Cn(),oe("<<"),oe("/Filter /Standard"),oe("/V "+ln.v),oe("/R "+ln.r),oe("/U <"+ln.toHexString(ln.U)+">"),oe("/O <"+ln.toHexString(ln.O)+">"),oe("/P "+ln.P),oe(">>"),oe("endobj")},al=function(){for(var _ in oe("/Font <<"),ft)ft.hasOwnProperty(_)&&(p===!1||p===!0&&m.hasOwnProperty(_))&&oe("/"+_+" "+ft[_].objectNumber+" 0 R");oe(">>")},dc=function(){if(Object.keys(xt).length>0){for(var _ in oe("/Shading <<"),xt)xt.hasOwnProperty(_)&&xt[_]instanceof Pl&&xt[_].objectNumber>=0&&oe("/"+_+" "+xt[_].objectNumber+" 0 R");Ct.publish("putShadingPatternDict"),oe(">>")}},ra=function(_){if(Object.keys(xt).length>0){for(var q in oe("/Pattern <<"),xt)xt.hasOwnProperty(q)&&xt[q]instanceof g.TilingPattern&&xt[q].objectNumber>=0&&xt[q].objectNumber<_&&oe("/"+q+" "+xt[q].objectNumber+" 0 R");Ct.publish("putTilingPatternDict"),oe(">>")}},ol=function(){if(Object.keys(Bt).length>0){var _;for(_ in oe("/ExtGState <<"),Bt)Bt.hasOwnProperty(_)&&Bt[_].objectNumber>=0&&oe("/"+_+" "+Bt[_].objectNumber+" 0 R");Ct.publish("putGStateDict"),oe(">>")}},on=function(_){Bn(_.resourcesOid,!0),oe("<<"),oe("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),al(),dc(),ra(_.objectOid),ol(),na(),oe(">>"),oe("endobj")},ll=function(){var _=[];bs(),Hi(),ta(),xs(_),Ct.publish("putResources"),_.forEach(on),on({resourcesOid:wr,objectOid:Number.MAX_SAFE_INTEGER}),Ct.publish("postPutResources")},cl=function(){Ct.publish("putAdditionalObjects");for(var _=0;_<ke.length;_++){var q=ke[_];Bn(q.objId,!0),oe(q.content),oe("endobj")}Ct.publish("postPutAdditionalObjects")},fc=function(_){Tt[_.fontName]=Tt[_.fontName]||{},Tt[_.fontName][_.fontStyle]=_.id},ul=function(_,q,se,ce,ye){var Te={id:"F"+(Object.keys(ft).length+1).toString(10),postScriptName:_,fontName:q,fontStyle:se,encoding:ce,isStandardFont:ye||!1,metadata:{}};return Ct.publish("addFont",{font:Te,instance:this}),ft[Te.id]=Te,fc(Te),Te.id},pc=function(_){for(var q=0,se=he.length;q<se;q++){var ce=ul.call(this,_[q][0],_[q][1],_[q][2],he[q][3],!0);p===!1&&(m[ce]=!0);var ye=_[q][0].split("-");fc({id:ce,fontName:ye[0],fontStyle:ye[1]||""})}Ct.publish("addFonts",{fonts:ft,dictionary:Tt})},Jr=function(_){return _.foo=function(){try{return _.apply(this,arguments)}catch(ce){var q=ce.stack||"";~q.indexOf(" at ")&&(q=q.split(" at ")[1]);var se="Error in function "+q.split(`
`)[0].split("<")[0]+": "+ce.message;if(!yt.console)throw new Error(se);yt.console.error(se,ce),yt.alert&&alert(se)}},_.foo.bar=_,_.foo},Ka=function(_,q){var se,ce,ye,Te,Ve,Ye,f,C,F;if(ye=(q=q||{}).sourceEncoding||"Unicode",Ve=q.outputEncoding,(q.autoencode||Ve)&&ft[ct].metadata&&ft[ct].metadata[ye]&&ft[ct].metadata[ye].encoding&&(Te=ft[ct].metadata[ye].encoding,!Ve&&ft[ct].encoding&&(Ve=ft[ct].encoding),!Ve&&Te.codePages&&(Ve=Te.codePages[0]),typeof Ve=="string"&&(Ve=Te[Ve]),Ve)){for(f=!1,Ye=[],se=0,ce=_.length;se<ce;se++)(C=Ve[_.charCodeAt(se)])?Ye.push(String.fromCharCode(C)):Ye.push(_[se]),Ye[se].charCodeAt(0)>>8&&(f=!0);_=Ye.join("")}for(se=_.length;f===void 0&&se!==0;)_.charCodeAt(se-1)>>8&&(f=!0),se--;if(!f)return _;for(Ye=q.noBOM?[]:[254,255],se=0,ce=_.length;se<ce;se++){if((F=(C=_.charCodeAt(se))>>8)>>8)throw new Error("Character at position "+se+" of string '"+_+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Ye.push(F),Ye.push(C-(F<<8))}return String.fromCharCode.apply(void 0,Ye)},En=g.__private__.pdfEscape=g.pdfEscape=function(_,q){return Ka(_,q).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Or=g.__private__.beginPage=function(_){Ie[++Dt]=[],lt[Dt]={objId:0,contentsObjId:0,userUnit:Number(o),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(_[0]),topRightY:Number(_[1])}},hl(Dt),be(Ie[$])},ia=function(_,q){var se,ce,ye;switch(n=q||n,typeof _=="string"&&(se=w(_.toLowerCase()),Array.isArray(se)&&(ce=se[0],ye=se[1])),Array.isArray(_)&&(ce=_[0]*ze,ye=_[1]*ze),isNaN(ce)&&(ce=i[0],ye=i[1]),(ce>14400||ye>14400)&&(tn.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),ce=Math.min(14400,ce),ye=Math.min(14400,ye)),i=[ce,ye],n.substr(0,1)){case"l":ye>ce&&(i=[ye,ce]);break;case"p":ce>ye&&(i=[ye,ce])}Or(i),gl(ml),oe(sr),wl!==0&&oe(wl+" J"),Za!==0&&oe(Za+" j"),Ct.publish("addPage",{pageNumber:Dt})},qa=function(_){_>0&&_<=Dt&&(Ie.splice(_,1),lt.splice(_,1),Dt--,$>Dt&&($=Dt),this.setPage($))},hl=function(_){_>0&&_<=Dt&&($=_)},$t=g.__private__.getNumberOfPages=g.getNumberOfPages=function(){return Ie.length-1},sa=function(_,q,se){var ce,ye=void 0;return se=se||{},_=_!==void 0?_:ft[ct].fontName,q=q!==void 0?q:ft[ct].fontStyle,ce=_.toLowerCase(),Tt[ce]!==void 0&&Tt[ce][q]!==void 0?ye=Tt[ce][q]:Tt[_]!==void 0&&Tt[_][q]!==void 0?ye=Tt[_][q]:se.disableWarning===!1&&tn.warn("Unable to look up font label for font '"+_+"', '"+q+"'. Refer to getFontList() for available fonts."),ye||se.noFallback||(ye=Tt.times[q])==null&&(ye=Tt.times.normal),ye},aa=g.__private__.putInfo=function(){var _=Cn(),q=function(ce){return ce};for(var se in d!==null&&(q=ln.encryptor(_,0)),oe("<<"),oe("/Producer ("+En(q("jsPDF "+gt.version))+")"),ot)ot.hasOwnProperty(se)&&ot[se]&&oe("/"+se.substr(0,1).toUpperCase()+se.substr(1)+" ("+En(q(ot[se]))+")");oe("/CreationDate ("+En(q(ne))+")"),oe(">>"),oe("endobj")},Wi=g.__private__.putCatalog=function(_){var q=(_=_||{}).rootDictionaryObjId||$i;switch(Cn(),oe("<<"),oe("/Type /Catalog"),oe("/Pages "+q+" 0 R"),Me||(Me="fullwidth"),Me){case"fullwidth":oe("/OpenAction [3 0 R /FitH null]");break;case"fullheight":oe("/OpenAction [3 0 R /FitV null]");break;case"fullpage":oe("/OpenAction [3 0 R /Fit]");break;case"original":oe("/OpenAction [3 0 R /XYZ null null 1]");break;default:var se=""+Me;se.substr(se.length-1)==="%"&&(Me=parseInt(Me)/100),typeof Me=="number"&&oe("/OpenAction [3 0 R /XYZ null null "+L(Me)+"]")}switch(tt||(tt="continuous"),tt){case"continuous":oe("/PageLayout /OneColumn");break;case"single":oe("/PageLayout /SinglePage");break;case"two":case"twoleft":oe("/PageLayout /TwoColumnLeft");break;case"tworight":oe("/PageLayout /TwoColumnRight")}Ge&&oe("/PageMode /"+Ge),Ct.publish("putCatalog"),oe(">>"),oe("endobj")},Yu=g.__private__.putTrailer=function(){oe("trailer"),oe("<<"),oe("/Size "+(ae+1)),oe("/Root "+ae+" 0 R"),oe("/Info "+(ae-1)+" 0 R"),d!==null&&oe("/Encrypt "+ln.oid+" 0 R"),oe("/ID [ <"+V+"> <"+V+"> ]"),oe(">>")},mc=g.__private__.putHeader=function(){oe("%PDF-"+x),oe("%")},Ju=g.__private__.putXRef=function(){var _="0000000000";oe("xref"),oe("0 "+(ae+1)),oe("0000000000 65535 f ");for(var q=1;q<=ae;q++)typeof le[q]=="function"?oe((_+le[q]()).slice(-10)+" 00000 n "):le[q]!==void 0?oe((_+le[q]).slice(-10)+" 00000 n "):oe("0000000000 00000 n ")},Gi=g.__private__.buildDocument=function(){Xe(),be(ue),Ct.publish("buildDocument"),mc(),ws(),cl(),ll(),d!==null&&Qu(),aa(),Wi();var _=de;return Ju(),Yu(),oe("startxref"),oe(""+_),oe("%%EOF"),be(Ie[$]),ue.join(`
`)},za=g.__private__.getBlob=function(_){return new Blob([Fe(_)],{type:"application/pdf"})},$a=g.output=g.__private__.output=Jr(function(_,q){switch(typeof(q=q||{})=="string"?q={filename:q}:q.filename=q.filename||"generated.pdf",_){case void 0:return Gi();case"save":g.save(q.filename);break;case"arraybuffer":return Fe(Gi());case"blob":return za(Gi());case"bloburi":case"bloburl":if(yt.URL!==void 0&&typeof yt.URL.createObjectURL=="function")return yt.URL&&yt.URL.createObjectURL(za(Gi()))||void 0;tn.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var se="",ce=Gi();try{se=sv(ce)}catch{se=sv(unescape(encodeURIComponent(ce)))}return"data:application/pdf;filename="+q.filename+";base64,"+se;case"pdfobjectnewwindow":if(Object.prototype.toString.call(yt)==="[object Window]"){var ye="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Te=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';q.pdfObjectUrl&&(ye=q.pdfObjectUrl,Te="");var Ve='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+ye+'"'+Te+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(q)+");<\/script></body></html>",Ye=yt.open();return Ye!==null&&Ye.document.write(Ve),Ye}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(yt)==="[object Window]"){var f='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(q.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+q.filename+'" width="500px" height="400px" /></body></html>',C=yt.open();if(C!==null){C.document.write(f);var F=this;C.document.documentElement.querySelector("#pdfViewer").onload=function(){C.document.title=q.filename,C.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(F.output("bloburl"))}}return C}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(yt)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var X='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",q)+'"></iframe></body></html>',ve=yt.open();if(ve!==null&&(ve.document.write(X),ve.document.title=q.filename),ve||typeof safari>"u")return ve;break;case"datauri":case"dataurl":return yt.document.location.href=this.output("datauristring",q);default:return null}}),Ns=function(_){return Array.isArray(Rr)===!0&&Rr.indexOf(_)>-1};switch(r){case"pt":ze=1;break;case"mm":ze=72/25.4;break;case"cm":ze=72/2.54;break;case"in":ze=72;break;case"px":ze=Ns("px_scaling")==1?.75:96/72;break;case"pc":case"em":ze=12;break;case"ex":ze=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);ze=r}var ln=null;me(),K();var gc=function(_){return d!==null?ln.encryptor(_,0):function(q){return q}},dl=g.__private__.getPageInfo=g.getPageInfo=function(_){if(isNaN(_)||_%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:lt[_].objId,pageNumber:_,pageContext:lt[_]}},wt=g.__private__.getPageInfoByObjId=function(_){if(isNaN(_)||_%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var q in lt)if(lt[q].objId===_)break;return dl(q)},As=g.__private__.getCurrentPageInfo=g.getCurrentPageInfo=function(){return{objId:lt[$].objId,pageNumber:$,pageContext:lt[$]}};g.addPage=function(){return ia.apply(this,arguments),this},g.setPage=function(){return hl.apply(this,arguments),be.call(this,Ie[$]),this},g.insertPage=function(_){return this.addPage(),this.movePage($,_),this},g.movePage=function(_,q){var se,ce;if(_>q){se=Ie[_],ce=lt[_];for(var ye=_;ye>q;ye--)Ie[ye]=Ie[ye-1],lt[ye]=lt[ye-1];Ie[q]=se,lt[q]=ce,this.setPage(q)}else if(_<q){se=Ie[_],ce=lt[_];for(var Te=_;Te<q;Te++)Ie[Te]=Ie[Te+1],lt[Te]=lt[Te+1];Ie[q]=se,lt[q]=ce,this.setPage(q)}return this},g.deletePage=function(){return qa.apply(this,arguments),this},g.__private__.text=g.text=function(_,q,se,ce,ye){var Te,Ve,Ye,f,C,F,X,ve,Ne,Ue=(ce=ce||{}).scope||this;if(typeof _=="number"&&typeof q=="number"&&(typeof se=="string"||Array.isArray(se))){var St=se;se=q,q=_,_=St}if(arguments[3]instanceof nt?(y("The transform parameter of text() with a Matrix value"),Ne=ye):(Ye=arguments[4],f=arguments[5],Gt(X=arguments[3])==="object"&&X!==null||(typeof Ye=="string"&&(f=Ye,Ye=null),typeof X=="string"&&(f=X,X=null),typeof X=="number"&&(Ye=X,X=null),ce={flags:X,angle:Ye,align:f})),isNaN(q)||isNaN(se)||_==null)throw new Error("Invalid arguments passed to jsPDF.text");if(_.length===0)return Ue;var jt="",Nt=!1,zt=typeof ce.lineHeightFactor=="number"?ce.lineHeightFactor:qt,Zt=Ue.internal.scaleFactor;function Zi(nn){return nn=nn.split("	").join(Array(ce.TabLen||9).join(" ")),En(nn,X)}function ar(nn){for(var rn,Ln=nn.concat(),Qn=[],pa=Ln.length;pa--;)typeof(rn=Ln.shift())=="string"?Qn.push(rn):Array.isArray(nn)&&(rn.length===1||rn[1]===void 0&&rn[2]===void 0)?Qn.push(rn[0]):Qn.push([rn[0],rn[1],rn[2]]);return Qn}function Is(nn,rn){var Ln;if(typeof nn=="string")Ln=rn(nn)[0];else if(Array.isArray(nn)){for(var Qn,pa,ah=nn.concat(),Ic=[],Jd=ah.length;Jd--;)typeof(Qn=ah.shift())=="string"?Ic.push(rn(Qn)[0]):Array.isArray(Qn)&&typeof Qn[0]=="string"&&(pa=rn(Qn[0],Qn[1],Qn[2]),Ic.push([pa[0],pa[1],pa[2]]));Ln=Ic}return Ln}var Cs=!1,Zu=!0;if(typeof _=="string")Cs=!0;else if(Array.isArray(_)){var eh=_.concat();Ve=[];for(var bc,or=eh.length;or--;)(typeof(bc=eh.shift())!="string"||Array.isArray(bc)&&typeof bc[0]!="string")&&(Zu=!1);Cs=Zu}if(Cs===!1)throw new Error('Type of text must be string or Array. "'+_+'" is not recognized.');typeof _=="string"&&(_=_.match(/[\r?\n]/)?_.split(/\r\n|\r|\n/g):[_]);var xc=Ee/Ue.internal.scaleFactor,Sc=xc*(zt-1);switch(ce.baseline){case"bottom":se-=Sc;break;case"top":se+=xc-Sc;break;case"hanging":se+=xc-2*Sc;break;case"middle":se+=xc/2-Sc}if((F=ce.maxWidth||0)>0&&(typeof _=="string"?_=Ue.splitTextToSize(_,F):Object.prototype.toString.call(_)==="[object Array]"&&(_=_.reduce(function(nn,rn){return nn.concat(Ue.splitTextToSize(rn,F))},[]))),Te={text:_,x:q,y:se,options:ce,mutex:{pdfEscape:En,activeFontKey:ct,fonts:ft,activeFontSize:Ee}},Ct.publish("preProcessText",Te),_=Te.text,Ye=(ce=Te.options).angle,!(Ne instanceof nt)&&Ye&&typeof Ye=="number"){Ye*=Math.PI/180,ce.rotationDirection===0&&(Ye=-Ye),j===N.ADVANCED&&(Ye=-Ye);var Nc=Math.cos(Ye),th=Math.sin(Ye);Ne=new nt(Nc,th,-th,Nc,0,0)}else Ye&&Ye instanceof nt&&(Ne=Ye);j!==N.ADVANCED||Ne||(Ne=yr),(C=ce.charSpace||la)!==void 0&&(jt+=P(T(C))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(ve=ce.horizontalScale)!==void 0&&(jt+=P(100*ve)+` Tz
`),ce.lang;var Xr=-1,hg=ce.renderingMode!==void 0?ce.renderingMode:ce.stroke,nh=Ue.internal.getCurrentPageInfo().pageContext;switch(hg){case 0:case!1:case"fill":Xr=0;break;case 1:case!0:case"stroke":Xr=1;break;case 2:case"fillThenStroke":Xr=2;break;case 3:case"invisible":Xr=3;break;case 4:case"fillAndAddForClipping":Xr=4;break;case 5:case"strokeAndAddPathForClipping":Xr=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Xr=6;break;case 7:case"addToPathForClipping":Xr=7}var Wd=nh.usedRenderingMode!==void 0?nh.usedRenderingMode:-1;Xr!==-1?jt+=Xr+` Tr
`:Wd!==-1&&(jt+=`0 Tr
`),Xr!==-1&&(nh.usedRenderingMode=Xr),f=ce.align||"left";var Ci,Ac=Ee*zt,Gd=Ue.internal.pageSize.getWidth(),Qd=ft[ct];C=ce.charSpace||la,F=ce.maxWidth||0,X=Object.assign({autoencode:!0,noBOM:!0},ce.flags);var io=[],_l=function(nn){return Ue.getStringUnitWidth(nn,{font:Qd,charSpace:C,fontSize:Ee,doKerning:!1})*Ee/Zt};if(Object.prototype.toString.call(_)==="[object Array]"){var Zr;Ve=ar(_),f!=="left"&&(Ci=Ve.map(_l));var Mr,so=0;if(f==="right"){q-=Ci[0],_=[],or=Ve.length;for(var ha=0;ha<or;ha++)ha===0?(Mr=gi(q),Zr=Gn(se)):(Mr=T(so-Ci[ha]),Zr=-Ac),_.push([Ve[ha],Mr,Zr]),so=Ci[ha]}else if(f==="center"){q-=Ci[0]/2,_=[],or=Ve.length;for(var da=0;da<or;da++)da===0?(Mr=gi(q),Zr=Gn(se)):(Mr=T((so-Ci[da])/2),Zr=-Ac),_.push([Ve[da],Mr,Zr]),so=Ci[da]}else if(f==="left"){_=[],or=Ve.length;for(var Ec=0;Ec<or;Ec++)_.push(Ve[Ec])}else if(f==="justify"&&Qd.encoding==="Identity-H"){_=[],or=Ve.length,F=F!==0?F:Gd;for(var fa=0,jn=0;jn<or;jn++)if(Zr=jn===0?Gn(se):-Ac,Mr=jn===0?gi(q):fa,jn<or-1){var rh=T((F-Ci[jn])/(Ve[jn].split(" ").length-1)),Vr=Ve[jn].split(" ");_.push([Vr[0]+" ",Mr,Zr]),fa=0;for(var Pi=1;Pi<Vr.length;Pi++){var kc=(_l(Vr[Pi-1]+" "+Vr[Pi])-_l(Vr[Pi]))*Zt+rh;Pi==Vr.length-1?_.push([Vr[Pi],kc,0]):_.push([Vr[Pi]+" ",kc,0]),fa-=kc}}else _.push([Ve[jn],Mr,Zr]);_.push(["",fa,0])}else{if(f!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(_=[],or=Ve.length,F=F!==0?F:Gd,jn=0;jn<or;jn++)Zr=jn===0?Gn(se):-Ac,Mr=jn===0?gi(q):0,jn<or-1?io.push(P(T((F-Ci[jn])/(Ve[jn].split(" ").length-1)))):io.push(0),_.push([Ve[jn],Mr,Zr])}}var Yd=typeof ce.R2L=="boolean"?ce.R2L:$e;Yd===!0&&(_=Is(_,function(nn,rn,Ln){return[nn.split("").reverse().join(""),rn,Ln]})),Te={text:_,x:q,y:se,options:ce,mutex:{pdfEscape:En,activeFontKey:ct,fonts:ft,activeFontSize:Ee}},Ct.publish("postProcessText",Te),_=Te.text,Nt=Te.mutex.isHex||!1;var ih=ft[ct].encoding;ih!=="WinAnsiEncoding"&&ih!=="StandardEncoding"||(_=Is(_,function(nn,rn,Ln){return[Zi(nn),rn,Ln]})),Ve=ar(_),_=[];for(var bl,xl,ao,Sl=0,Tc=1,Nl=Array.isArray(Ve[0])?Tc:Sl,oo="",sh=function(nn,rn,Ln){var Qn="";return Ln instanceof nt?(Ln=typeof ce.angle=="number"?Qr(Ln,new nt(1,0,0,1,nn,rn)):Qr(new nt(1,0,0,1,nn,rn),Ln),j===N.ADVANCED&&(Ln=Qr(new nt(1,0,0,-1,0,0),Ln)),Qn=Ln.join(" ")+` Tm
`):Qn=P(nn)+" "+P(rn)+` Td
`,Qn},ji=0;ji<Ve.length;ji++){switch(oo="",Nl){case Tc:ao=(Nt?"<":"(")+Ve[ji][0]+(Nt?">":")"),bl=parseFloat(Ve[ji][1]),xl=parseFloat(Ve[ji][2]);break;case Sl:ao=(Nt?"<":"(")+Ve[ji]+(Nt?">":")"),bl=gi(q),xl=Gn(se)}io!==void 0&&io[ji]!==void 0&&(oo=io[ji]+` Tw
`),ji===0?_.push(oo+sh(bl,xl,Ne)+ao):Nl===Sl?_.push(oo+ao):Nl===Tc&&_.push(oo+sh(bl,xl,Ne)+ao)}_=Nl===Sl?_.join(` Tj
T* `):_.join(` Tj
`),_+=` Tj
`;var Li=`BT
/`;return Li+=ct+" "+Ee+` Tf
`,Li+=P(Ee*zt)+` TL
`,Li+=Ji+`
`,Li+=jt,Li+=_,oe(Li+="ET"),m[ct]=!0,Ue};var Xu=g.__private__.clip=g.clip=function(_){return oe(_==="evenodd"?"W*":"W"),this};g.clipEvenOdd=function(){return Xu("evenodd")},g.__private__.discardPath=g.discardPath=function(){return oe("n"),this};var Ii=g.__private__.isValidStyle=function(_){var q=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(_)!==-1&&(q=!0),q};g.__private__.setDefaultPathOperation=g.setDefaultPathOperation=function(_){return Ii(_)&&(u=_),this};var vc=g.__private__.getStyle=g.getStyle=function(_){var q=u;switch(_){case"D":case"S":q="S";break;case"F":q="f";break;case"FD":case"DF":q="B";break;case"f":case"f*":case"B":case"B*":q=_}return q},pi=g.close=function(){return oe("h"),this};g.stroke=function(){return oe("S"),this},g.fill=function(_){return Ha("f",_),this},g.fillEvenOdd=function(_){return Ha("f*",_),this},g.fillStroke=function(_){return Ha("B",_),this},g.fillStrokeEvenOdd=function(_){return Ha("B*",_),this};var Ha=function(_,q){Gt(q)==="object"?Ga(q,_):oe(_)},fl=function(_){_===null||j===N.ADVANCED&&_===void 0||(_=vc(_),oe(_))};function Wa(_,q,se,ce,ye){var Te=new nu(q||this.boundingBox,se||this.xStep,ce||this.yStep,this.gState,ye||this.matrix);Te.stream=this.stream;var Ve=_+"$$"+this.cloneIndex+++"$$";return Un(Ve,Te),Te}var Ga=function(_,q){var se=vr[_.key],ce=xt[se];if(ce instanceof Pl)oe("q"),oe(yc(q)),ce.gState&&g.setGState(ce.gState),oe(_.matrix.toString()+" cm"),oe("/"+se+" sh"),oe("Q");else if(ce instanceof nu){var ye=new nt(1,0,0,-1,0,_r());_.matrix&&(ye=ye.multiply(_.matrix||yr),se=Wa.call(ce,_.key,_.boundingBox,_.xStep,_.yStep,ye).id),oe("q"),oe("/Pattern cs"),oe("/"+se+" scn"),ce.gState&&g.setGState(ce.gState),oe(q),oe("Q")}},yc=function(_){switch(_){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},Qi=g.moveTo=function(_,q){return oe(P(T(_))+" "+P(M(q))+" m"),this},mi=g.lineTo=function(_,q){return oe(P(T(_))+" "+P(M(q))+" l"),this},Yi=g.curveTo=function(_,q,se,ce,ye,Te){return oe([P(T(_)),P(M(q)),P(T(se)),P(M(ce)),P(T(ye)),P(M(Te)),"c"].join(" ")),this};g.__private__.line=g.line=function(_,q,se,ce,ye){if(isNaN(_)||isNaN(q)||isNaN(se)||isNaN(ce)||!Ii(ye))throw new Error("Invalid arguments passed to jsPDF.line");return j===N.COMPAT?this.lines([[se-_,ce-q]],_,q,[1,1],ye||"S"):this.lines([[se-_,ce-q]],_,q,[1,1]).stroke()},g.__private__.lines=g.lines=function(_,q,se,ce,ye,Te){var Ve,Ye,f,C,F,X,ve,Ne,Ue,St,jt,Nt;if(typeof _=="number"&&(Nt=se,se=q,q=_,_=Nt),ce=ce||[1,1],Te=Te||!1,isNaN(q)||isNaN(se)||!Array.isArray(_)||!Array.isArray(ce)||!Ii(ye)||typeof Te!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Qi(q,se),Ve=ce[0],Ye=ce[1],C=_.length,St=q,jt=se,f=0;f<C;f++)(F=_[f]).length===2?(St=F[0]*Ve+St,jt=F[1]*Ye+jt,mi(St,jt)):(X=F[0]*Ve+St,ve=F[1]*Ye+jt,Ne=F[2]*Ve+St,Ue=F[3]*Ye+jt,St=F[4]*Ve+St,jt=F[5]*Ye+jt,Yi(X,ve,Ne,Ue,St,jt));return Te&&pi(),fl(ye),this},g.path=function(_){for(var q=0;q<_.length;q++){var se=_[q],ce=se.c;switch(se.op){case"m":Qi(ce[0],ce[1]);break;case"l":mi(ce[0],ce[1]);break;case"c":Yi.apply(this,ce);break;case"h":pi()}}return this},g.__private__.rect=g.rect=function(_,q,se,ce,ye){if(isNaN(_)||isNaN(q)||isNaN(se)||isNaN(ce)||!Ii(ye))throw new Error("Invalid arguments passed to jsPDF.rect");return j===N.COMPAT&&(ce=-ce),oe([P(T(_)),P(M(q)),P(T(se)),P(T(ce)),"re"].join(" ")),fl(ye),this},g.__private__.triangle=g.triangle=function(_,q,se,ce,ye,Te,Ve){if(isNaN(_)||isNaN(q)||isNaN(se)||isNaN(ce)||isNaN(ye)||isNaN(Te)||!Ii(Ve))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[se-_,ce-q],[ye-se,Te-ce],[_-ye,q-Te]],_,q,[1,1],Ve,!0),this},g.__private__.roundedRect=g.roundedRect=function(_,q,se,ce,ye,Te,Ve){if(isNaN(_)||isNaN(q)||isNaN(se)||isNaN(ce)||isNaN(ye)||isNaN(Te)||!Ii(Ve))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Ye=4/3*(Math.SQRT2-1);return ye=Math.min(ye,.5*se),Te=Math.min(Te,.5*ce),this.lines([[se-2*ye,0],[ye*Ye,0,ye,Te-Te*Ye,ye,Te],[0,ce-2*Te],[0,Te*Ye,-ye*Ye,Te,-ye,Te],[2*ye-se,0],[-ye*Ye,0,-ye,-Te*Ye,-ye,-Te],[0,2*Te-ce],[0,-Te*Ye,ye*Ye,-Te,ye,-Te]],_+ye,q,[1,1],Ve,!0),this},g.__private__.ellipse=g.ellipse=function(_,q,se,ce,ye){if(isNaN(_)||isNaN(q)||isNaN(se)||isNaN(ce)||!Ii(ye))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Te=4/3*(Math.SQRT2-1)*se,Ve=4/3*(Math.SQRT2-1)*ce;return Qi(_+se,q),Yi(_+se,q-Ve,_+Te,q-ce,_,q-ce),Yi(_-Te,q-ce,_-se,q-Ve,_-se,q),Yi(_-se,q+Ve,_-Te,q+ce,_,q+ce),Yi(_+Te,q+ce,_+se,q+Ve,_+se,q),fl(ye),this},g.__private__.circle=g.circle=function(_,q,se,ce){if(isNaN(_)||isNaN(q)||isNaN(se)||!Ii(ce))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(_,q,se,se,ce)},g.setFont=function(_,q,se){return se&&(q=B(q,se)),ct=sa(_,q,{disableWarning:!1}),this};var pl=g.__private__.getFont=g.getFont=function(){return ft[sa.apply(g,arguments)]};g.__private__.getFontList=g.getFontList=function(){var _,q,se={};for(_ in Tt)if(Tt.hasOwnProperty(_))for(q in se[_]=[],Tt[_])Tt[_].hasOwnProperty(q)&&se[_].push(q);return se},g.addFont=function(_,q,se,ce,ye){var Te=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Te.indexOf(arguments[3])!==-1?ye=arguments[3]:arguments[3]&&Te.indexOf(arguments[3])==-1&&(se=B(se,ce)),ye=ye||"Identity-H",ul.call(this,_,q,se,ye)};var qt,ml=t.lineWidth||.200025,Qa=g.__private__.getLineWidth=g.getLineWidth=function(){return ml},gl=g.__private__.setLineWidth=g.setLineWidth=function(_){return ml=_,oe(P(T(_))+" w"),this};g.__private__.setLineDash=gt.API.setLineDash=gt.API.setLineDashPattern=function(_,q){if(_=_||[],q=q||0,isNaN(q)||!Array.isArray(_))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return _=_.map(function(se){return P(T(se))}).join(" "),q=P(T(q)),oe("["+_+"] "+q+" d"),this};var vl=g.__private__.getLineHeight=g.getLineHeight=function(){return Ee*qt};g.__private__.getLineHeight=g.getLineHeight=function(){return Ee*qt};var yl=g.__private__.setLineHeightFactor=g.setLineHeightFactor=function(_){return typeof(_=_||1.15)=="number"&&(qt=_),this},oa=g.__private__.getLineHeightFactor=g.getLineHeightFactor=function(){return qt};yl(t.lineHeight);var gi=g.__private__.getHorizontalCoordinate=function(_){return T(_)},Gn=g.__private__.getVerticalCoordinate=function(_){return j===N.ADVANCED?_:lt[$].mediaBox.topRightY-lt[$].mediaBox.bottomLeftY-T(_)},wc=g.__private__.getHorizontalCoordinateString=g.getHorizontalCoordinateString=function(_){return P(gi(_))},Es=g.__private__.getVerticalCoordinateString=g.getVerticalCoordinateString=function(_){return P(Gn(_))},sr=t.strokeColor||"0 G";g.__private__.getStrokeColor=g.getDrawColor=function(){return Yr(sr)},g.__private__.setStrokeColor=g.setDrawColor=function(_,q,se,ce){return sr=Dr({ch1:_,ch2:q,ch3:se,ch4:ce,pdfColorType:"draw",precision:2}),oe(sr),this};var Ya=t.fillColor||"0 g";g.__private__.getFillColor=g.getFillColor=function(){return Yr(Ya)},g.__private__.setFillColor=g.setFillColor=function(_,q,se,ce){return Ya=Dr({ch1:_,ch2:q,ch3:se,ch4:ce,pdfColorType:"fill",precision:2}),oe(Ya),this};var Ji=t.textColor||"0 g",Ja=g.__private__.getTextColor=g.getTextColor=function(){return Yr(Ji)};g.__private__.setTextColor=g.setTextColor=function(_,q,se,ce){return Ji=Dr({ch1:_,ch2:q,ch3:se,ch4:ce,pdfColorType:"text",precision:3}),this};var la=t.charSpace,Xa=g.__private__.getCharSpace=g.getCharSpace=function(){return parseFloat(la||0)};g.__private__.setCharSpace=g.setCharSpace=function(_){if(isNaN(_))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return la=_,this};var wl=0;g.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},g.__private__.setLineCap=g.setLineCap=function(_){var q=g.CapJoinStyles[_];if(q===void 0)throw new Error("Line cap style of '"+_+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return wl=q,oe(q+" J"),this};var Za=0;g.__private__.setLineJoin=g.setLineJoin=function(_){var q=g.CapJoinStyles[_];if(q===void 0)throw new Error("Line join style of '"+_+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Za=q,oe(q+" j"),this},g.__private__.setLineMiterLimit=g.__private__.setMiterLimit=g.setLineMiterLimit=g.setMiterLimit=function(_){if(_=_||0,isNaN(_))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return oe(P(T(_))+" M"),this},g.GState=um,g.setGState=function(_){(_=typeof _=="string"?Bt[Wn[_]]:ks(null,_)).equals(Nn)||(oe("/"+_.id+" gs"),Nn=_)};var ks=function(_,q){if(!_||!Wn[_]){var se=!1;for(var ce in Bt)if(Bt.hasOwnProperty(ce)&&Bt[ce].equals(q)){se=!0;break}if(se)q=Bt[ce];else{var ye="GS"+(Object.keys(Bt).length+1).toString(10);Bt[ye]=q,q.id=ye}return _&&(Wn[_]=q.id),Ct.publish("addGState",q),q}};g.addGState=function(_,q){return ks(_,q),this},g.saveGraphicsState=function(){return oe("q"),Vn.push({key:ct,size:Ee,color:Ji}),this},g.restoreGraphicsState=function(){oe("Q");var _=Vn.pop();return ct=_.key,Ee=_.size,Ji=_.color,Nn=null,this},g.setCurrentTransformationMatrix=function(_){return oe(_.toString()+" cm"),this},g.comment=function(_){return oe("#"+_),this};var ca=function(_,q){var se=_||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return se},set:function(Te){isNaN(Te)||(se=parseFloat(Te))}});var ce=q||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return ce},set:function(Te){isNaN(Te)||(ce=parseFloat(Te))}});var ye="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return ye},set:function(Te){ye=Te.toString()}}),this},eo=function(_,q,se,ce){ca.call(this,_,q),this.type="rect";var ye=se||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return ye},set:function(Ve){isNaN(Ve)||(ye=parseFloat(Ve))}});var Te=ce||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Te},set:function(Ve){isNaN(Ve)||(Te=parseFloat(Ve))}}),this},ua=function(){this.page=Dt,this.currentPage=$,this.pages=Ie.slice(0),this.pagesContext=lt.slice(0),this.x=_e,this.y=He,this.matrix=mt,this.width=Ts($),this.height=_r($),this.outputDestination=Le,this.id="",this.objectNumber=-1};ua.prototype.restore=function(){Dt=this.page,$=this.currentPage,lt=this.pagesContext,Ie=this.pages,_e=this.x,He=this.y,mt=this.matrix,no($,this.width),ro($,this.height),Le=this.outputDestination};var to=function(_,q,se,ce,ye){di.push(new ua),Dt=$=0,Ie=[],_e=_,He=q,mt=ye,Or([se,ce])},_c=function(_){if(mn[_])di.pop().restore();else{var q=new ua,se="Xo"+(Object.keys(Jt).length+1).toString(10);q.id=se,mn[_]=se,Jt[se]=q,Ct.publish("addFormObject",q),di.pop().restore()}};for(var Xi in g.beginFormObject=function(_,q,se,ce,ye){return to(_,q,se,ce,ye),this},g.endFormObject=function(_){return _c(_),this},g.doFormObject=function(_,q){var se=Jt[mn[_]];return oe("q"),oe(q.toString()+" cm"),oe("/"+se.id+" Do"),oe("Q"),this},g.getFormObject=function(_){var q=Jt[mn[_]];return{x:q.x,y:q.y,width:q.width,height:q.height,matrix:q.matrix}},g.save=function(_,q){return _=_||"generated.pdf",(q=q||{}).returnPromise=q.returnPromise||!1,q.returnPromise===!1?(Il(za(Gi()),_),typeof Il.unload=="function"&&yt.setTimeout&&setTimeout(Il.unload,911),this):new Promise(function(se,ce){try{var ye=Il(za(Gi()),_);typeof Il.unload=="function"&&yt.setTimeout&&setTimeout(Il.unload,911),se(ye)}catch(Te){ce(Te.message)}})},gt.API)gt.API.hasOwnProperty(Xi)&&(Xi==="events"&&gt.API.events.length?function(_,q){var se,ce,ye;for(ye=q.length-1;ye!==-1;ye--)se=q[ye][0],ce=q[ye][1],_.subscribe.apply(_,[se].concat(typeof ce=="function"?[ce]:ce))}(Ct,gt.API.events):g[Xi]=gt.API[Xi]);var Ts=g.getPageWidth=function(_){return(lt[_=_||$].mediaBox.topRightX-lt[_].mediaBox.bottomLeftX)/ze},no=g.setPageWidth=function(_,q){lt[_].mediaBox.topRightX=q*ze+lt[_].mediaBox.bottomLeftX},_r=g.getPageHeight=function(_){return(lt[_=_||$].mediaBox.topRightY-lt[_].mediaBox.bottomLeftY)/ze},ro=g.setPageHeight=function(_,q){lt[_].mediaBox.topRightY=q*ze+lt[_].mediaBox.bottomLeftY};return g.internal={pdfEscape:En,getStyle:vc,getFont:pl,getFontSize:Ke,getCharSpace:Xa,getTextColor:Ja,getLineHeight:vl,getLineHeightFactor:oa,getLineWidth:Qa,write:We,getHorizontalCoordinate:gi,getVerticalCoordinate:Gn,getCoordinateString:wc,getVerticalCoordinateString:Es,collections:{},newObject:Cn,newAdditionalObject:Ua,newObjectDeferred:An,newObjectDeferredBegin:Bn,getFilters:Fr,putStream:Pn,events:Ct,scaleFactor:ze,pageSize:{getWidth:function(){return Ts($)},setWidth:function(_){no($,_)},getHeight:function(){return _r($)},setHeight:function(_){ro($,_)}},encryptionOptions:d,encryption:ln,getEncryptor:gc,output:$a,getNumberOfPages:$t,pages:Ie,out:oe,f2:L,f3:A,getPageInfo:dl,getPageInfoByObjId:wt,getCurrentPageInfo:As,getPDFVersion:b,Point:ca,Rectangle:eo,Matrix:nt,hasHotfix:Ns},Object.defineProperty(g.internal.pageSize,"width",{get:function(){return Ts($)},set:function(_){no($,_)},enumerable:!0,configurable:!0}),Object.defineProperty(g.internal.pageSize,"height",{get:function(){return _r($)},set:function(_){ro($,_)},enumerable:!0,configurable:!0}),pc.call(g,he),ct="F1",ia(i,n),Ct.publish("initialized"),g}Bc.prototype.lsbFirstWord=function(t){return String.fromCharCode(t>>0&255,t>>8&255,t>>16&255,t>>24&255)},Bc.prototype.toHexString=function(t){return t.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Bc.prototype.hexToBytes=function(t){for(var e=[],n=0;n<t.length;n+=2)e.push(String.fromCharCode(parseInt(t.substr(n,2),16)));return e.join("")},Bc.prototype.processOwnerPassword=function(t,e){return ov(av(e).substr(0,5),t)},Bc.prototype.encryptor=function(t,e){var n=av(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(r){return ov(n,r)}},um.prototype.equals=function(t){var e,n="id,objectNumber,equals";if(!t||Gt(t)!==Gt(this))return!1;var r=0;for(e in this)if(!(n.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this[e]!==t[e])return!1;r++}for(e in t)t.hasOwnProperty(e)&&n.indexOf(e)<0&&r--;return r===0},gt.API={events:[]},gt.version="2.5.2";var Tn=gt.API,fy=1,cc=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Fc=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},At=function(t){return t.toFixed(2)},wo=function(t){return t.toFixed(5)};Tn.__acroform__={};var hi=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},M_=function(t){return t*fy},Ls=function(t){var e=new IN,n=it.internal.getHeight(t)||0,r=it.internal.getWidth(t)||0;return e.BBox=[0,0,Number(At(r)),Number(At(n))],e},dD=Tn.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|=1<<e},fD=Tn.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&=~(1<<e)},pD=Tn.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return t&1<<e?1:0},Fn=Tn.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return pD(t,e-1)},On=Tn.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return dD(t,e-1)},Mn=Tn.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return fD(t,e-1)},mD=Tn.__acroform__.calculateCoordinates=function(t,e){var n=e.internal.getHorizontalCoordinate,r=e.internal.getVerticalCoordinate,i=t[0],s=t[1],a=t[2],o=t[3],l={};return l.lowerLeft_X=n(i)||0,l.lowerLeft_Y=r(s+o)||0,l.upperRight_X=n(i+a)||0,l.upperRight_Y=r(s)||0,[Number(At(l.lowerLeft_X)),Number(At(l.lowerLeft_Y)),Number(At(l.upperRight_X)),Number(At(l.upperRight_Y))]},gD=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],n=t._V||t.DV,r=lv(t,n),i=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+i+" "+At(r.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(r.text),e.push("ET"),e.push("Q"),e.push("EMC");var s=Ls(t);return s.scope=t.scope,s.stream=e.join(`
`),s}},lv=function(t,e){var n=t.fontSize===0?t.maxFontSize:t.fontSize,r={text:"",fontSize:""},i=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");i=t.multiline?i.map(function(A){return A.split(`
`)}):i.map(function(A){return[A]});var s=n,a=it.internal.getHeight(t)||0;a=a<0?-a:a;var o=it.internal.getWidth(t)||0;o=o<0?-o:o;var l=function(A,T,I){if(A+1<i.length){var M=T+" "+i[A+1][0];return qf(M,t,I).width<=o-4}return!1};s++;e:for(;s>0;){e="",s--;var u,d,p=qf("3",t,s).height,m=t.multiline?a-s:(a-p)/2,g=m+=2,x=0,b=0,k=0;if(s<=0){e=`(...) Tj
`,e+="% Width of Text: "+qf(e,t,s=12).width+", FieldWidth:"+o+`
`;break}for(var w="",N=0,j=0;j<i.length;j++)if(i.hasOwnProperty(j)){var O=!1;if(i[j].length!==1&&k!==i[j].length-1){if((p+2)*(N+2)+2>a)continue e;w+=i[j][k],O=!0,b=j,j--}else{w=(w+=i[j][k]+" ").substr(w.length-1)==" "?w.substr(0,w.length-1):w;var Q=parseInt(j),B=l(Q,w,s),P=j>=i.length-1;if(B&&!P){w+=" ",k=0;continue}if(B||P){if(P)b=Q;else if(t.multiline&&(p+2)*(N+2)+2>a)continue e}else{if(!t.multiline||(p+2)*(N+2)+2>a)continue e;b=Q}}for(var y="",S=x;S<=b;S++){var L=i[S];if(t.multiline){if(S===b){y+=L[k]+" ",k=(k+1)%L.length;continue}if(S===x){y+=L[L.length-1]+" ";continue}}y+=L[0]+" "}switch(y=y.substr(y.length-1)==" "?y.substr(0,y.length-1):y,d=qf(y,t,s).width,t.textAlign){case"right":u=o-d-2;break;case"center":u=(o-d)/2;break;case"left":default:u=2}e+=At(u)+" "+At(g)+` Td
`,e+="("+cc(y)+`) Tj
`,e+=-At(u)+` 0 Td
`,g=-(s+2),d=0,x=O?b:b+1,N++,w=""}break}return r.text=e,r.fontSize=s,r},qf=function(t,e,n){var r=e.scope.internal.getFont(e.fontName,e.fontStyle),i=e.scope.getStringUnitWidth(t,{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:e.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:i}},vD={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},yD=function(t,e){var n={type:"reference",object:t};e.internal.getPageInfo(t.page).pageContext.annotations.find(function(r){return r.type===n.type&&r.object===n.object})===void 0&&e.internal.getPageInfo(t.page).pageContext.annotations.push(n)},wD=function(t,e){for(var n in t)if(t.hasOwnProperty(n)){var r=n,i=t[n];e.internal.newObjectDeferredBegin(i.objId,!0),Gt(i)==="object"&&typeof i.putStream=="function"&&i.putStream(),delete t[r]}},_D=function(t,e){if(e.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(vs.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(vD)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");fy=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new CN,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(n){n.internal.events.unsubscribe(n.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete n.internal.acroformPlugin.acroFormDictionaryRoot._eventID,n.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(n){n.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=n.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in r)if(r.hasOwnProperty(i)){var s=r[i];s.objId=void 0,s.hasAnnotation&&yD(s,n)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(n){if(n.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");n.internal.write("/AcroForm "+n.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(n){(function(r,i){var s=!r;for(var a in r||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(a)){var o=r[a],l=[],u=o.Rect;if(o.Rect&&(o.Rect=mD(o.Rect,i)),i.internal.newObjectDeferredBegin(o.objId,!0),o.DA=it.createDefaultAppearanceStream(o),Gt(o)==="object"&&typeof o.getKeyValueListForStream=="function"&&(l=o.getKeyValueListForStream()),o.Rect=u,o.hasAppearanceStream&&!o.appearanceStreamContent){var d=gD(o);l.push({key:"AP",value:"<</N "+d+">>"}),i.internal.acroformPlugin.xForms.push(d)}if(o.appearanceStreamContent){var p="";for(var m in o.appearanceStreamContent)if(o.appearanceStreamContent.hasOwnProperty(m)){var g=o.appearanceStreamContent[m];if(p+="/"+m+" ",p+="<<",Object.keys(g).length>=1||Array.isArray(g)){for(var a in g)if(g.hasOwnProperty(a)){var x=g[a];typeof x=="function"&&(x=x.call(i,o)),p+="/"+a+" "+x+" ",i.internal.acroformPlugin.xForms.indexOf(x)>=0||i.internal.acroformPlugin.xForms.push(x)}}else typeof(x=g)=="function"&&(x=x.call(i,o)),p+="/"+a+" "+x,i.internal.acroformPlugin.xForms.indexOf(x)>=0||i.internal.acroformPlugin.xForms.push(x);p+=">>"}l.push({key:"AP",value:`<<
`+p+">>"})}i.internal.putStream({additionalKeyValues:l,objectId:o.objId}),i.internal.out("endobj")}s&&wD(i.internal.acroformPlugin.xForms,i)})(n,t)}),t.internal.acroformPlugin.isInitialized=!0}},TN=Tn.__acroform__.arrayToPdfArray=function(t,e,n){var r=function(a){return a};if(Array.isArray(t)){for(var i="[",s=0;s<t.length;s++)switch(s!==0&&(i+=" "),Gt(t[s])){case"boolean":case"number":case"object":i+=t[s].toString();break;case"string":t[s].substr(0,1)!=="/"?(e!==void 0&&n&&(r=n.internal.getEncryptor(e)),i+="("+cc(r(t[s].toString()))+")"):i+=t[s].toString()}return i+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},x1=function(t,e,n){var r=function(i){return i};return e!==void 0&&n&&(r=n.internal.getEncryptor(e)),(t=t||"").toString(),t="("+cc(r(t))+")"},Ms=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Ms.prototype.toString=function(){return this.objId+" 0 R"},Ms.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},Ms.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var n in e)if(Object.getOwnPropertyDescriptor(this,e[n]).configurable===!1){var r=e[n],i=this[r];i&&(Array.isArray(i)?t.push({key:r,value:TN(i,this.objId,this.scope)}):i instanceof Ms?(i.scope=this.scope,t.push({key:r,value:i.objId+" 0 R"})):typeof i!="function"&&t.push({key:r,value:i}))}return t};var IN=function(){Ms.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(n){t=n.trim()},get:function(){return t||null}})};hi(IN,Ms);var CN=function(){Ms.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var n=function(r){return r};return this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),"("+cc(n(t))+")"}},set:function(n){t=n}})};hi(CN,Ms);var vs=function t(){Ms.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(w){if(isNaN(w))throw new Error('Invalid value "'+w+'" for attribute F supplied.');e=w}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Fn(e,3)},set:function(w){w?this.F=On(e,3):this.F=Mn(e,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(w){if(isNaN(w))throw new Error('Invalid value "'+w+'" for attribute Ff supplied.');n=w}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(w){r=w!==void 0?w:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(w){r[0]=w}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(w){r[1]=w}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(w){r[2]=w}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(w){r[3]=w}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(w){switch(w){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=w;break;default:throw new Error('Invalid value "'+w+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof hm)return;s="FieldObject"+t.FieldNum++}var w=function(N){return N};return this.scope&&(w=this.scope.internal.getEncryptor(this.objId)),"("+cc(w(s))+")"},set:function(w){s=w.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(w){s=w}});var a="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return a},set:function(w){a=w}});var o="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return o},set:function(w){o=w}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(w){l=w}});var u=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return u===void 0?50/fy:u},set:function(w){u=w}});var d="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return d},set:function(w){d=w}});var p="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!p||this instanceof hm||this instanceof Bl))return x1(p,this.objId,this.scope)},set:function(w){w=w.toString(),p=w}});var m=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(m)return this instanceof rr?m:x1(m,this.objId,this.scope)},set:function(w){w=w.toString(),m=this instanceof rr?w:w.substr(0,1)==="("?Fc(w.substr(1,w.length-2)):Fc(w)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof rr?Fc(m.substr(1,m.length-1)):m},set:function(w){w=w.toString(),m=this instanceof rr?"/"+w:w}});var g=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(g)return g},set:function(w){this.V=w}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(g)return this instanceof rr?g:x1(g,this.objId,this.scope)},set:function(w){w=w.toString(),g=this instanceof rr?w:w.substr(0,1)==="("?Fc(w.substr(1,w.length-2)):Fc(w)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof rr?Fc(g.substr(1,g.length-1)):g},set:function(w){w=w.toString(),g=this instanceof rr?"/"+w:w}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var x,b=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return b},set:function(w){w=!!w,b=w}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(x)return x},set:function(w){x=w}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Fn(this.Ff,1)},set:function(w){w?this.Ff=On(this.Ff,1):this.Ff=Mn(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Fn(this.Ff,2)},set:function(w){w?this.Ff=On(this.Ff,2):this.Ff=Mn(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Fn(this.Ff,3)},set:function(w){w?this.Ff=On(this.Ff,3):this.Ff=Mn(this.Ff,3)}});var k=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(k!==null)return k},set:function(w){if([0,1,2].indexOf(w)===-1)throw new Error('Invalid value "'+w+'" for attribute Q supplied.');k=w}}),Object.defineProperty(this,"textAlign",{get:function(){var w;switch(k){case 0:default:w="left";break;case 1:w="center";break;case 2:w="right"}return w},configurable:!0,enumerable:!0,set:function(w){switch(w){case"right":case 2:k=2;break;case"center":case 1:k=1;break;case"left":case 0:default:k=0}}})};hi(vs,Ms);var pu=function(){vs.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(n){t=n}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return TN(e,this.objId,this.scope)},set:function(n){var r,i;i=[],typeof(r=n)=="string"&&(i=function(s,a,o){o||(o=1);for(var l,u=[];l=a.exec(s);)u.push(l[o]);return u}(r,/\((.*?)\)/g)),e=i}}),this.getOptions=function(){return e},this.setOptions=function(n){e=n,this.sort&&e.sort()},this.addOption=function(n){n=(n=n||"").toString(),e.push(n),this.sort&&e.sort()},this.removeOption=function(n,r){for(r=r||!1,n=(n=n||"").toString();e.indexOf(n)!==-1&&(e.splice(e.indexOf(n),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Fn(this.Ff,18)},set:function(n){n?this.Ff=On(this.Ff,18):this.Ff=Mn(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Fn(this.Ff,19)},set:function(n){this.combo===!0&&(n?this.Ff=On(this.Ff,19):this.Ff=Mn(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Fn(this.Ff,20)},set:function(n){n?(this.Ff=On(this.Ff,20),e.sort()):this.Ff=Mn(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Fn(this.Ff,22)},set:function(n){n?this.Ff=On(this.Ff,22):this.Ff=Mn(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Fn(this.Ff,23)},set:function(n){n?this.Ff=On(this.Ff,23):this.Ff=Mn(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Fn(this.Ff,27)},set:function(n){n?this.Ff=On(this.Ff,27):this.Ff=Mn(this.Ff,27)}}),this.hasAppearanceStream=!1};hi(pu,vs);var mu=function(){pu.call(this),this.fontName="helvetica",this.combo=!1};hi(mu,pu);var gu=function(){mu.call(this),this.combo=!0};hi(gu,mu);var fp=function(){gu.call(this),this.edit=!0};hi(fp,gu);var rr=function(){vs.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Fn(this.Ff,15)},set:function(n){n?this.Ff=On(this.Ff,15):this.Ff=Mn(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Fn(this.Ff,16)},set:function(n){n?this.Ff=On(this.Ff,16):this.Ff=Mn(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Fn(this.Ff,17)},set:function(n){n?this.Ff=On(this.Ff,17):this.Ff=Mn(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Fn(this.Ff,26)},set:function(n){n?this.Ff=On(this.Ff,26):this.Ff=Mn(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var n=function(s){return s};if(this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var r,i=[];for(r in i.push("<<"),e)i.push("/"+r+" ("+cc(n(e[r]))+")");return i.push(">>"),i.join(`
`)}},set:function(n){Gt(n)==="object"&&(e=n)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(n){typeof n=="string"&&(e.CA=n)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(n){t="/"+n}})};hi(rr,vs);var pp=function(){rr.call(this),this.pushButton=!0};hi(pp,rr);var vu=function(){rr.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e!==void 0?e:[]}})};hi(vu,rr);var hm=function(){var t,e;vs.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(i){t=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(i){e=i}});var n,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(o){return o};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var s,a=[];for(s in a.push("<<"),r)a.push("/"+s+" ("+cc(i(r[s]))+")");return a.push(">>"),a.join(`
`)},set:function(i){Gt(i)==="object"&&(r=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(i){typeof i=="string"&&(r.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(i){n=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(i){n="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=it.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};hi(hm,vs),vu.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var n=this.Kids[e];n.appearanceStreamContent=t.createAppearanceStream(n.optionName),n.caption=t.getCA()}},vu.prototype.createOption=function(t){var e=new hm;return e.Parent=this,e.optionName=t,this.Kids.push(e),bD.call(this.scope,e),e};var mp=function(){rr.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=it.CheckBox.createAppearanceStream()};hi(mp,rr);var Bl=function(){vs.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Fn(this.Ff,13)},set:function(e){e?this.Ff=On(this.Ff,13):this.Ff=Mn(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Fn(this.Ff,21)},set:function(e){e?this.Ff=On(this.Ff,21):this.Ff=Mn(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Fn(this.Ff,23)},set:function(e){e?this.Ff=On(this.Ff,23):this.Ff=Mn(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Fn(this.Ff,24)},set:function(e){e?this.Ff=On(this.Ff,24):this.Ff=Mn(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Fn(this.Ff,25)},set:function(e){e?this.Ff=On(this.Ff,25):this.Ff=Mn(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Fn(this.Ff,26)},set:function(e){e?this.Ff=On(this.Ff,26):this.Ff=Mn(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};hi(Bl,vs);var gp=function(){Bl.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Fn(this.Ff,14)},set:function(t){t?this.Ff=On(this.Ff,14):this.Ff=Mn(this.Ff,14)}}),this.password=!0};hi(gp,Bl);var it={CheckBox:{createAppearanceStream:function(){return{N:{On:it.CheckBox.YesNormal},D:{On:it.CheckBox.YesPushDown,Off:it.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=Ls(t);e.scope=t.scope;var n=[],r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,i=t.scope.__private__.encodeColorString(t.color),s=lv(t,t.caption);return n.push("0.749023 g"),n.push("0 0 "+At(it.internal.getWidth(t))+" "+At(it.internal.getHeight(t))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+r+" "+At(s.fontSize)+" Tf "+i),n.push("BT"),n.push(s.text),n.push("ET"),n.push("Q"),n.push("EMC"),e.stream=n.join(`
`),e},YesNormal:function(t){var e=Ls(t);e.scope=t.scope;var n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color),i=[],s=it.internal.getHeight(t),a=it.internal.getWidth(t),o=lv(t,t.caption);return i.push("1 g"),i.push("0 0 "+At(a)+" "+At(s)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+At(a-1)+" "+At(s-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+n+" "+At(o.fontSize)+" Tf "+r),i.push(o.text),i.push("ET"),i.push("Q"),e.stream=i.join(`
`),e},OffPushDown:function(t){var e=Ls(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+At(it.internal.getWidth(t))+" "+At(it.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:it.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=it.RadioButton.Circle.YesNormal,e.D[t]=it.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=Ls(t);e.scope=t.scope;var n=[],r=it.internal.getWidth(t)<=it.internal.getHeight(t)?it.internal.getWidth(t)/4:it.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=it.internal.Bezier_C,s=Number((r*i).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+wo(it.internal.getWidth(t)/2)+" "+wo(it.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+s+" "+s+" "+r+" 0 "+r+" c"),n.push("-"+s+" "+r+" -"+r+" "+s+" -"+r+" 0 c"),n.push("-"+r+" -"+s+" -"+s+" -"+r+" 0 -"+r+" c"),n.push(s+" -"+r+" "+r+" -"+s+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=Ls(t);e.scope=t.scope;var n=[],r=it.internal.getWidth(t)<=it.internal.getHeight(t)?it.internal.getWidth(t)/4:it.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*it.internal.Bezier_C).toFixed(5)),a=Number((r*it.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+wo(it.internal.getWidth(t)/2)+" "+wo(it.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),n.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),n.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),n.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+wo(it.internal.getWidth(t)/2)+" "+wo(it.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+a+" "+a+" "+r+" 0 "+r+" c"),n.push("-"+a+" "+r+" -"+r+" "+a+" -"+r+" 0 c"),n.push("-"+r+" -"+a+" -"+a+" -"+r+" 0 -"+r+" c"),n.push(a+" -"+r+" "+r+" -"+a+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(t){var e=Ls(t);e.scope=t.scope;var n=[],r=it.internal.getWidth(t)<=it.internal.getHeight(t)?it.internal.getWidth(t)/4:it.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*it.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+wo(it.internal.getWidth(t)/2)+" "+wo(it.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),n.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),n.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),n.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:it.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=it.RadioButton.Cross.YesNormal,e.D[t]=it.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=Ls(t);e.scope=t.scope;var n=[],r=it.internal.calculateCross(t);return n.push("q"),n.push("1 1 "+At(it.internal.getWidth(t)-2)+" "+At(it.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(At(r.x1.x)+" "+At(r.x1.y)+" m"),n.push(At(r.x2.x)+" "+At(r.x2.y)+" l"),n.push(At(r.x4.x)+" "+At(r.x4.y)+" m"),n.push(At(r.x3.x)+" "+At(r.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=Ls(t);e.scope=t.scope;var n=it.internal.calculateCross(t),r=[];return r.push("0.749023 g"),r.push("0 0 "+At(it.internal.getWidth(t))+" "+At(it.internal.getHeight(t))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+At(it.internal.getWidth(t)-2)+" "+At(it.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(At(n.x1.x)+" "+At(n.x1.y)+" m"),r.push(At(n.x2.x)+" "+At(n.x2.y)+" l"),r.push(At(n.x4.x)+" "+At(n.x4.y)+" m"),r.push(At(n.x3.x)+" "+At(n.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(t){var e=Ls(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+At(it.internal.getWidth(t))+" "+At(it.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+n}};it.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=it.internal.getWidth(t),n=it.internal.getHeight(t),r=Math.min(e,n);return{x1:{x:(e-r)/2,y:(n-r)/2+r},x2:{x:(e-r)/2+r,y:(n-r)/2},x3:{x:(e-r)/2,y:(n-r)/2},x4:{x:(e-r)/2+r,y:(n-r)/2+r}}}},it.internal.getWidth=function(t){var e=0;return Gt(t)==="object"&&(e=M_(t.Rect[2])),e},it.internal.getHeight=function(t){var e=0;return Gt(t)==="object"&&(e=M_(t.Rect[3])),e};var bD=Tn.addField=function(t){if(_D(this,t),!(t instanceof vs))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};Tn.AcroFormChoiceField=pu,Tn.AcroFormListBox=mu,Tn.AcroFormComboBox=gu,Tn.AcroFormEditBox=fp,Tn.AcroFormButton=rr,Tn.AcroFormPushButton=pp,Tn.AcroFormRadioButton=vu,Tn.AcroFormCheckBox=mp,Tn.AcroFormTextField=Bl,Tn.AcroFormPasswordField=gp,Tn.AcroFormAppearance=it,Tn.AcroForm={ChoiceField:pu,ListBox:mu,ComboBox:gu,EditBox:fp,Button:rr,PushButton:pp,RadioButton:vu,CheckBox:mp,TextField:Bl,PasswordField:gp,Appearance:it},gt.AcroForm={ChoiceField:pu,ListBox:mu,ComboBox:gu,EditBox:fp,Button:rr,PushButton:pp,RadioButton:vu,CheckBox:mp,TextField:Bl,PasswordField:gp,Appearance:it};gt.AcroForm;function PN(t){return t.reduce(function(e,n,r){return e[n]=r,e},{})}(function(t){t.__addimage__={};var e="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},r=t.__addimage__.getImageFileTypeByImageData=function(A,T){var I,M,ne,V,U,K=e;if((T=T||e)==="RGBA"||A.data!==void 0&&A.data instanceof Uint8ClampedArray&&"height"in A&&"width"in A)return"RGBA";if(B(A))for(U in n)for(ne=n[U],I=0;I<ne.length;I+=1){for(V=!0,M=0;M<ne[I].length;M+=1)if(ne[I][M]!==void 0&&ne[I][M]!==A[M]){V=!1;break}if(V===!0){K=U;break}}else for(U in n)for(ne=n[U],I=0;I<ne.length;I+=1){for(V=!0,M=0;M<ne[I].length;M+=1)if(ne[I][M]!==void 0&&ne[I][M]!==A.charCodeAt(M)){V=!1;break}if(V===!0){K=U;break}}return K===e&&T!==e&&(K=T),K},i=function A(T){for(var I=this.internal.write,M=this.internal.putStream,ne=(0,this.internal.getFilters)();ne.indexOf("FlateEncode")!==-1;)ne.splice(ne.indexOf("FlateEncode"),1);T.objectId=this.internal.newObject();var V=[];if(V.push({key:"Type",value:"/XObject"}),V.push({key:"Subtype",value:"/Image"}),V.push({key:"Width",value:T.width}),V.push({key:"Height",value:T.height}),T.colorSpace===k.INDEXED?V.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(T.palette.length/3-1)+" "+("sMask"in T&&T.sMask!==void 0?T.objectId+2:T.objectId+1)+" 0 R]"}):(V.push({key:"ColorSpace",value:"/"+T.colorSpace}),T.colorSpace===k.DEVICE_CMYK&&V.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),V.push({key:"BitsPerComponent",value:T.bitsPerComponent}),"decodeParameters"in T&&T.decodeParameters!==void 0&&V.push({key:"DecodeParms",value:"<<"+T.decodeParameters+">>"}),"transparency"in T&&Array.isArray(T.transparency)){for(var U="",K=0,H=T.transparency.length;K<H;K++)U+=T.transparency[K]+" "+T.transparency[K]+" ";V.push({key:"Mask",value:"["+U+"]"})}T.sMask!==void 0&&V.push({key:"SMask",value:T.objectId+1+" 0 R"});var te=T.filter!==void 0?["/"+T.filter]:void 0;if(M({data:T.data,additionalKeyValues:V,alreadyAppliedFilters:te,objectId:T.objectId}),I("endobj"),"sMask"in T&&T.sMask!==void 0){var me="/Predictor "+T.predictor+" /Colors 1 /BitsPerComponent "+T.bitsPerComponent+" /Columns "+T.width,R={width:T.width,height:T.height,colorSpace:"DeviceGray",bitsPerComponent:T.bitsPerComponent,decodeParameters:me,data:T.sMask};"filter"in T&&(R.filter=T.filter),A.call(this,R)}if(T.colorSpace===k.INDEXED){var $=this.internal.newObject();M({data:y(new Uint8Array(T.palette)),objectId:$}),I("endobj")}},s=function(){var A=this.internal.collections.addImage_images;for(var T in A)i.call(this,A[T])},a=function(){var A,T=this.internal.collections.addImage_images,I=this.internal.write;for(var M in T)I("/I"+(A=T[M]).index,A.objectId,"0","R")},o=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",s),this.internal.events.subscribe("putXobjectDict",a))},l=function(){var A=this.internal.collections.addImage_images;return o.call(this),A},u=function(){return Object.keys(this.internal.collections.addImage_images).length},d=function(A){return typeof t["process"+A.toUpperCase()]=="function"},p=function(A){return Gt(A)==="object"&&A.nodeType===1},m=function(A,T){if(A.nodeName==="IMG"&&A.hasAttribute("src")){var I=""+A.getAttribute("src");if(I.indexOf("data:image/")===0)return Jh(unescape(I).split("base64,").pop());var M=t.loadFile(I,!0);if(M!==void 0)return M}if(A.nodeName==="CANVAS"){if(A.width===0||A.height===0)throw new Error("Given canvas must have data. Canvas width: "+A.width+", height: "+A.height);var ne;switch(T){case"PNG":ne="image/png";break;case"WEBP":ne="image/webp";break;case"JPEG":case"JPG":default:ne="image/jpeg"}return Jh(A.toDataURL(ne,1).split("base64,").pop())}},g=function(A){var T=this.internal.collections.addImage_images;if(T){for(var I in T)if(A===T[I].alias)return T[I]}},x=function(A,T,I){return A||T||(A=-96,T=-96),A<0&&(A=-1*I.width*72/A/this.internal.scaleFactor),T<0&&(T=-1*I.height*72/T/this.internal.scaleFactor),A===0&&(A=T*I.width/I.height),T===0&&(T=A*I.height/I.width),[A,T]},b=function(A,T,I,M,ne,V){var U=x.call(this,I,M,ne),K=this.internal.getCoordinateString,H=this.internal.getVerticalCoordinateString,te=l.call(this);if(I=U[0],M=U[1],te[ne.index]=ne,V){V*=Math.PI/180;var me=Math.cos(V),R=Math.sin(V),$=function(W){return W.toFixed(4)},J=[$(me),$(R),$(-1*R),$(me),0,0,"cm"]}this.internal.write("q"),V?(this.internal.write([1,"0","0",1,K(A),H(T+M),"cm"].join(" ")),this.internal.write(J.join(" ")),this.internal.write([K(I),"0","0",K(M),"0","0","cm"].join(" "))):this.internal.write([K(I),"0","0",K(M),K(A),H(T+M),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+ne.index+" Do"),this.internal.write("Q")},k=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var w=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},N=t.__addimage__.sHashCode=function(A){var T,I,M=0;if(typeof A=="string")for(I=A.length,T=0;T<I;T++)M=(M<<5)-M+A.charCodeAt(T),M|=0;else if(B(A))for(I=A.byteLength/2,T=0;T<I;T++)M=(M<<5)-M+A[T],M|=0;return M},j=t.__addimage__.validateStringAsBase64=function(A){(A=A||"").toString().trim();var T=!0;return A.length===0&&(T=!1),A.length%4!=0&&(T=!1),/^[A-Za-z0-9+/]+$/.test(A.substr(0,A.length-2))===!1&&(T=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(A.substr(-2))===!1&&(T=!1),T},O=t.__addimage__.extractImageFromDataUrl=function(A){var T=(A=A||"").split("base64,"),I=null;if(T.length===2){var M=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(T[0]);Array.isArray(M)&&(I={mimeType:M[1],charset:M[2],data:T[1]})}return I},Q=t.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};t.__addimage__.isArrayBuffer=function(A){return Q()&&A instanceof ArrayBuffer};var B=t.__addimage__.isArrayBufferView=function(A){return Q()&&typeof Uint32Array<"u"&&(A instanceof Int8Array||A instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&A instanceof Uint8ClampedArray||A instanceof Int16Array||A instanceof Uint16Array||A instanceof Int32Array||A instanceof Uint32Array||A instanceof Float32Array||A instanceof Float64Array)},P=t.__addimage__.binaryStringToUint8Array=function(A){for(var T=A.length,I=new Uint8Array(T),M=0;M<T;M++)I[M]=A.charCodeAt(M);return I},y=t.__addimage__.arrayBufferToBinaryString=function(A){for(var T="",I=B(A)?A:new Uint8Array(A),M=0;M<I.length;M+=8192)T+=String.fromCharCode.apply(null,I.subarray(M,M+8192));return T};t.addImage=function(){var A,T,I,M,ne,V,U,K,H;if(typeof arguments[1]=="number"?(T=e,I=arguments[1],M=arguments[2],ne=arguments[3],V=arguments[4],U=arguments[5],K=arguments[6],H=arguments[7]):(T=arguments[1],I=arguments[2],M=arguments[3],ne=arguments[4],V=arguments[5],U=arguments[6],K=arguments[7],H=arguments[8]),Gt(A=arguments[0])==="object"&&!p(A)&&"imageData"in A){var te=A;A=te.imageData,T=te.format||T||e,I=te.x||I||0,M=te.y||M||0,ne=te.w||te.width||ne,V=te.h||te.height||V,U=te.alias||U,K=te.compression||K,H=te.rotation||te.angle||H}var me=this.internal.getFilters();if(K===void 0&&me.indexOf("FlateEncode")!==-1&&(K="SLOW"),isNaN(I)||isNaN(M))throw new Error("Invalid coordinates passed to jsPDF.addImage");o.call(this);var R=S.call(this,A,T,U,K);return b.call(this,I,M,ne,V,R,H),this};var S=function(A,T,I,M){var ne,V,U;if(typeof A=="string"&&r(A)===e){A=unescape(A);var K=L(A,!1);(K!==""||(K=t.loadFile(A,!0))!==void 0)&&(A=K)}if(p(A)&&(A=m(A,T)),T=r(A,T),!d(T))throw new Error("addImage does not support files of type '"+T+"', please ensure that a plugin for '"+T+"' support is added.");if(((U=I)==null||U.length===0)&&(I=function(H){return typeof H=="string"||B(H)?N(H):B(H.data)?N(H.data):null}(A)),(ne=g.call(this,I))||(Q()&&(A instanceof Uint8Array||T==="RGBA"||(V=A,A=P(A))),ne=this["process"+T.toUpperCase()](A,u.call(this),I,function(H){return H&&typeof H=="string"&&(H=H.toUpperCase()),H in t.image_compression?H:w.NONE}(M),V)),!ne)throw new Error("An unknown error occurred whilst processing the image.");return ne},L=t.__addimage__.convertBase64ToBinaryString=function(A,T){var I;T=typeof T!="boolean"||T;var M,ne="";if(typeof A=="string"){M=(I=O(A))!==null?I.data:A;try{ne=Jh(M)}catch(V){if(T)throw j(M)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+V.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return ne};t.getImageProperties=function(A){var T,I,M="";if(p(A)&&(A=m(A)),typeof A=="string"&&r(A)===e&&((M=L(A,!1))===""&&(M=t.loadFile(A)||""),A=M),I=r(A),!d(I))throw new Error("addImage does not support files of type '"+I+"', please ensure that a plugin for '"+I+"' support is added.");if(!Q()||A instanceof Uint8Array||(A=P(A)),!(T=this["process"+I.toUpperCase()](A)))throw new Error("An unknown error occurred whilst processing the image");return T.fileType=I,T}})(gt.API),function(t){var e=function(n){if(n!==void 0&&n!="")return!0};gt.API.events.push(["addPage",function(n){this.internal.getPageInfo(n.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(n){for(var r,i,s,a=this.internal.getCoordinateString,o=this.internal.getVerticalCoordinateString,l=this.internal.getPageInfoByObjId(n.objId),u=n.pageContext.annotations,d=!1,p=0;p<u.length&&!d;p++)switch((r=u[p]).type){case"link":(e(r.options.url)||e(r.options.pageNumber))&&(d=!0);break;case"reference":case"text":case"freetext":d=!0}if(d!=0){this.internal.write("/Annots [");for(var m=0;m<u.length;m++){r=u[m];var g=this.internal.pdfEscape,x=this.internal.getEncryptor(n.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var b=this.internal.newAdditionalObject(),k=this.internal.newAdditionalObject(),w=this.internal.getEncryptor(b.objId),N=r.title||"Note";s="<</Type /Annot /Subtype /Text "+(i="/Rect ["+a(r.bounds.x)+" "+o(r.bounds.y+r.bounds.h)+" "+a(r.bounds.x+r.bounds.w)+" "+o(r.bounds.y)+"] ")+"/Contents ("+g(w(r.contents))+")",s+=" /Popup "+k.objId+" 0 R",s+=" /P "+l.objId+" 0 R",s+=" /T ("+g(w(N))+") >>",b.content=s;var j=b.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+a(r.bounds.x+30)+" "+o(r.bounds.y+r.bounds.h)+" "+a(r.bounds.x+r.bounds.w+30)+" "+o(r.bounds.y)+"] ")+" /Parent "+j,r.open&&(s+=" /Open true"),s+=" >>",k.content=s,this.internal.write(b.objId,"0 R",k.objId,"0 R");break;case"freetext":i="/Rect ["+a(r.bounds.x)+" "+o(r.bounds.y)+" "+a(r.bounds.x+r.bounds.w)+" "+o(r.bounds.y+r.bounds.h)+"] ";var O=r.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+g(x(r.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+O+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(r.options.name){var Q=this.annotations._nameMap[r.options.name];r.options.pageNumber=Q.page,r.options.top=Q.y}else r.options.top||(r.options.top=0);if(i="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",s="",r.options.url)s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+g(x(r.options.url))+") >>";else if(r.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,s+=" /FitV "+r.options.left+"]";break;case"XYZ":default:var B=o(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),s+=" /XYZ "+r.options.left+" "+B+" "+r.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),t.createAnnotation=function(n){var r=this.internal.getCurrentPageInfo();switch(n.type){case"link":this.link(n.bounds.x,n.bounds.y,n.bounds.w,n.bounds.h,n);break;case"text":case"freetext":r.pageContext.annotations.push(n)}},t.link=function(n,r,i,s,a){var o=this.internal.getCurrentPageInfo(),l=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString;o.pageContext.annotations.push({finalBounds:{x:l(n),y:u(r),w:l(n+i),h:u(r+s)},options:a,type:"link"})},t.textWithLink=function(n,r,i,s){var a,o,l=this.getTextWidth(n),u=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){o=s.maxWidth;var d=this.splitTextToSize(n,o).length;a=Math.ceil(u*d)}else o=l,a=u;return this.text(n,r,i,s),i+=.2*u,s.align==="center"&&(r-=l/2),s.align==="right"&&(r-=l),this.link(r,i-u,o,a,s),l},t.getTextWidth=function(n){var r=this.internal.getFontSize();return this.getStringUnitWidth(n)*r/this.internal.scaleFactor}}(gt.API),function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];t.__arabicParser__={};var s=t.__arabicParser__.isInArabicSubstitutionA=function(b){return e[b.charCodeAt(0)]!==void 0},a=t.__arabicParser__.isArabicLetter=function(b){return typeof b=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(b)},o=t.__arabicParser__.isArabicEndLetter=function(b){return a(b)&&s(b)&&e[b.charCodeAt(0)].length<=2},l=t.__arabicParser__.isArabicAlfLetter=function(b){return a(b)&&i.indexOf(b.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(b){return a(b)&&s(b)&&e[b.charCodeAt(0)].length>=1};var u=t.__arabicParser__.arabicLetterHasFinalForm=function(b){return a(b)&&s(b)&&e[b.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(b){return a(b)&&s(b)&&e[b.charCodeAt(0)].length>=3};var d=t.__arabicParser__.arabicLetterHasMedialForm=function(b){return a(b)&&s(b)&&e[b.charCodeAt(0)].length==4},p=t.__arabicParser__.resolveLigatures=function(b){var k=0,w=n,N="",j=0;for(k=0;k<b.length;k+=1)w[b.charCodeAt(k)]!==void 0?(j++,typeof(w=w[b.charCodeAt(k)])=="number"&&(N+=String.fromCharCode(w),w=n,j=0),k===b.length-1&&(w=n,N+=b.charAt(k-(j-1)),k-=j-1,j=0)):(w=n,N+=b.charAt(k-j),k-=j,j=0);return N};t.__arabicParser__.isArabicDiacritic=function(b){return b!==void 0&&r[b.charCodeAt(0)]!==void 0};var m=t.__arabicParser__.getCorrectForm=function(b,k,w){return a(b)?s(b)===!1?-1:!u(b)||!a(k)&&!a(w)||!a(w)&&o(k)||o(b)&&!a(k)||o(b)&&l(k)||o(b)&&o(k)?0:d(b)&&a(k)&&!o(k)&&a(w)&&u(w)?3:o(b)||!a(w)?1:2:-1},g=function(b){var k=0,w=0,N=0,j="",O="",Q="",B=(b=b||"").split("\\s+"),P=[];for(k=0;k<B.length;k+=1){for(P.push(""),w=0;w<B[k].length;w+=1)j=B[k][w],O=B[k][w-1],Q=B[k][w+1],a(j)?(N=m(j,O,Q),P[k]+=N!==-1?String.fromCharCode(e[j.charCodeAt(0)][N]):j):P[k]+=j;P[k]=p(P[k])}return P.join(" ")},x=t.__arabicParser__.processArabic=t.processArabic=function(){var b,k=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,w=[];if(Array.isArray(k)){var N=0;for(w=[],N=0;N<k.length;N+=1)Array.isArray(k[N])?w.push([g(k[N][0]),k[N][1],k[N][2]]):w.push([g(k[N])]);b=w}else b=g(k);return typeof arguments[0]=="string"?b:(arguments[0].text=b,arguments[0])};t.events.push(["preProcessText",x])}(gt.API),gt.API.autoPrint=function(t){var e;switch((t=t||{}).variant=t.variant||"non-conform",t.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(t){var e=function(){var n=void 0;Object.defineProperty(this,"pdf",{get:function(){return n},set:function(o){n=o}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(o){r=isNaN(o)||Number.isInteger(o)===!1||o<0?150:o,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(o){i=isNaN(o)||Number.isInteger(o)===!1||o<0?300:o,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(o){s=o}});var a={};Object.defineProperty(this,"style",{get:function(){return a},set:function(o){a=o}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(n,r){var i;if((n=n||"2d")!=="2d")return null;for(i in r)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=r[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(gt.API),function(t){var e={left:0,top:0,bottom:0,right:0},n=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var l=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return l},set:function(b){l=b}});var u=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return u},set:function(b){u=b}});var d=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return d},set:function(b){d=b}});var p=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return p},set:function(b){p=b}});var m=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return m},set:function(b){m=b}});var g=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return g},set:function(b){g=b}});var x=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return x},set:function(b){x=b}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(l){return r.call(this),this.internal.__cell__.headerFunction=typeof l=="function"?l:void 0,this},t.getTextDimensions=function(l,u){r.call(this);var d=(u=u||{}).fontSize||this.getFontSize(),p=u.font||this.getFont(),m=u.scaleFactor||this.internal.scaleFactor,g=0,x=0,b=0,k=this;if(!Array.isArray(l)&&typeof l!="string"){if(typeof l!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");l=String(l)}var w=u.maxWidth;w>0?typeof l=="string"?l=this.splitTextToSize(l,w):Object.prototype.toString.call(l)==="[object Array]"&&(l=l.reduce(function(j,O){return j.concat(k.splitTextToSize(O,w))},[])):l=Array.isArray(l)?l:[l];for(var N=0;N<l.length;N++)g<(b=this.getStringUnitWidth(l[N],{font:p})*d)&&(g=b);return g!==0&&(x=l.length),{w:g/=m,h:Math.max((x*d*this.getLineHeightFactor()-d*(this.getLineHeightFactor()-1))/m,0)}},t.cellAddPage=function(){r.call(this),this.addPage();var l=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new s(l.left,l.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var a=t.cell=function(){var l;l=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var u=this.internal.__cell__.lastCell,d=this.internal.__cell__.padding,p=this.internal.__cell__.margins||e,m=this.internal.__cell__.tableHeaderRow,g=this.internal.__cell__.printHeaders;return u.lineNumber!==void 0&&(u.lineNumber===l.lineNumber?(l.x=(u.x||0)+(u.width||0),l.y=u.y||0):u.y+u.height+l.height+p.bottom>this.getPageHeight()?(this.cellAddPage(),l.y=p.top,g&&m&&(this.printHeaderRow(l.lineNumber,!0),l.y+=m[0].height)):l.y=u.y+u.height||l.y),l.text[0]!==void 0&&(this.rect(l.x,l.y,l.width,l.height,n===!0?"FD":void 0),l.align==="right"?this.text(l.text,l.x+l.width-d,l.y+d,{align:"right",baseline:"top"}):l.align==="center"?this.text(l.text,l.x+l.width/2,l.y+d,{align:"center",baseline:"top",maxWidth:l.width-d-d}):this.text(l.text,l.x+d,l.y+d,{align:"left",baseline:"top",maxWidth:l.width-d-d})),this.internal.__cell__.lastCell=l,this};t.table=function(l,u,d,p,m){if(r.call(this),!d)throw new Error("No data for PDF table.");var g,x,b,k,w=[],N=[],j=[],O={},Q={},B=[],P=[],y=(m=m||{}).autoSize||!1,S=m.printHeaders!==!1,L=m.css&&m.css["font-size"]!==void 0?16*m.css["font-size"]:m.fontSize||12,A=m.margins||Object.assign({width:this.getPageWidth()},e),T=typeof m.padding=="number"?m.padding:3,I=m.headerBackgroundColor||"#c8c8c8",M=m.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=S,this.internal.__cell__.margins=A,this.internal.__cell__.table_font_size=L,this.internal.__cell__.padding=T,this.internal.__cell__.headerBackgroundColor=I,this.internal.__cell__.headerTextColor=M,this.setFontSize(L),p==null)N=w=Object.keys(d[0]),j=w.map(function(){return"left"});else if(Array.isArray(p)&&Gt(p[0])==="object")for(w=p.map(function(te){return te.name}),N=p.map(function(te){return te.prompt||te.name||""}),j=p.map(function(te){return te.align||"left"}),g=0;g<p.length;g+=1)Q[p[g].name]=p[g].width*(19.049976/25.4);else Array.isArray(p)&&typeof p[0]=="string"&&(N=w=p,j=w.map(function(){return"left"}));if(y||Array.isArray(p)&&typeof p[0]=="string")for(g=0;g<w.length;g+=1){for(O[k=w[g]]=d.map(function(te){return te[k]}),this.setFont(void 0,"bold"),B.push(this.getTextDimensions(N[g],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),x=O[k],this.setFont(void 0,"normal"),b=0;b<x.length;b+=1)B.push(this.getTextDimensions(x[b],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);Q[k]=Math.max.apply(null,B)+T+T,B=[]}if(S){var ne={};for(g=0;g<w.length;g+=1)ne[w[g]]={},ne[w[g]].text=N[g],ne[w[g]].align=j[g];var V=o.call(this,ne,Q);P=w.map(function(te){return new s(l,u,Q[te],V,ne[te].text,void 0,ne[te].align)}),this.setTableHeaderRow(P),this.printHeaderRow(1,!1)}var U=p.reduce(function(te,me){return te[me.name]=me.align,te},{});for(g=0;g<d.length;g+=1){"rowStart"in m&&m.rowStart instanceof Function&&m.rowStart({row:g,data:d[g]},this);var K=o.call(this,d[g],Q);for(b=0;b<w.length;b+=1){var H=d[g][w[b]];"cellStart"in m&&m.cellStart instanceof Function&&m.cellStart({row:g,col:b,data:H},this),a.call(this,new s(l,u,Q[w[b]],K,H,g+2,U[w[b]]))}}return this.internal.__cell__.table_x=l,this.internal.__cell__.table_y=u,this};var o=function(l,u){var d=this.internal.__cell__.padding,p=this.internal.__cell__.table_font_size,m=this.internal.scaleFactor;return Object.keys(l).map(function(g){var x=l[g];return this.splitTextToSize(x.hasOwnProperty("text")?x.text:x,u[g]-d-d)},this).map(function(g){return this.getLineHeightFactor()*g.length*p/m+d+d},this).reduce(function(g,x){return Math.max(g,x)},0)};t.setTableHeaderRow=function(l){r.call(this),this.internal.__cell__.tableHeaderRow=l},t.printHeaderRow=function(l,u){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var d;if(n=!0,typeof this.internal.__cell__.headerFunction=="function"){var p=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(p[0],p[1],p[2],p[3],void 0,-1)}this.setFont(void 0,"bold");for(var m=[],g=0;g<this.internal.__cell__.tableHeaderRow.length;g+=1){d=this.internal.__cell__.tableHeaderRow[g].clone(),u&&(d.y=this.internal.__cell__.margins.top||0,m.push(d)),d.lineNumber=l;var x=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),a.call(this,d),this.setTextColor(x)}m.length>0&&this.setTableHeaderRow(m),this.setFont(void 0,"normal"),n=!1}}(gt.API);var jN={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},LN=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],cv=PN(LN),RN=[100,200,300,400,500,600,700,800,900],xD=PN(RN);function uv(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),n=function(s){return jN[s=s||"normal"]?s:"normal"}(t.style),r=function(s){if(!s)return 400;if(typeof s=="number")return s>=100&&s<=900&&s%100==0?s:400;if(/^\d00$/.test(s))return parseInt(s);switch(s){case"bold":return 700;case"normal":default:return 400}}(t.weight),i=function(s){return typeof cv[s=s||"normal"]=="number"?s:"normal"}(t.stretch);return{family:e,style:n,weight:r,stretch:i,src:t.src||[],ref:t.ref||{name:e,style:[i,n,r].join(" ")}}}function V_(t,e,n,r){var i;for(i=n;i>=0&&i<e.length;i+=r)if(t[e[i]])return t[e[i]];for(i=n;i>=0&&i<e.length;i-=r)if(t[e[i]])return t[e[i]]}var SD={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},U_={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function B_(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function ND(t,e,n){for(var r=(n=n||{}).defaultFontFamily||"times",i=Object.assign({},SD,n.genericFontFamilies||{}),s=null,a=null,o=0;o<e.length;++o)if(i[(s=uv(e[o])).family]&&(s.family=i[s.family]),t.hasOwnProperty(s.family)){a=t[s.family];break}if(!(a=a||t[r]))throw new Error("Could not find a font-family for the rule '"+B_(s)+"' and default family '"+r+"'.");if(a=function(l,u){if(u[l])return u[l];var d=cv[l],p=d<=cv.normal?-1:1,m=V_(u,LN,d,p);if(!m)throw new Error("Could not find a matching font-stretch value for "+l);return m}(s.stretch,a),a=function(l,u){if(u[l])return u[l];for(var d=jN[l],p=0;p<d.length;++p)if(u[d[p]])return u[d[p]];throw new Error("Could not find a matching font-style for "+l)}(s.style,a),!(a=function(l,u){if(u[l])return u[l];if(l===400&&u[500])return u[500];if(l===500&&u[400])return u[400];var d=xD[l],p=V_(u,RN,d,l<400?-1:1);if(!p)throw new Error("Could not find a matching font-weight for value "+l);return p}(s.weight,a)))throw new Error("Failed to resolve a font for the rule '"+B_(s)+"'.");return a}function K_(t){return t.trimLeft()}function AD(t,e){for(var n=0;n<t.length;){if(t.charAt(n)===e)return[t.substring(0,n),t.substring(n+1)];n+=1}return null}function ED(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],t.substring(e[0].length)]}var zf,q_,z_,S1=["times"];(function(t){var e,n,r,i,s,a,o,l,u,d=function(R){return R=R||{},this.isStrokeTransparent=R.isStrokeTransparent||!1,this.strokeOpacity=R.strokeOpacity||1,this.strokeStyle=R.strokeStyle||"#000000",this.fillStyle=R.fillStyle||"#000000",this.isFillTransparent=R.isFillTransparent||!1,this.fillOpacity=R.fillOpacity||1,this.font=R.font||"10px sans-serif",this.textBaseline=R.textBaseline||"alphabetic",this.textAlign=R.textAlign||"left",this.lineWidth=R.lineWidth||1,this.lineJoin=R.lineJoin||"miter",this.lineCap=R.lineCap||"butt",this.path=R.path||[],this.transform=R.transform!==void 0?R.transform.clone():new l,this.globalCompositeOperation=R.globalCompositeOperation||"normal",this.globalAlpha=R.globalAlpha||1,this.clip_path=R.clip_path||[],this.currentPoint=R.currentPoint||new a,this.miterLimit=R.miterLimit||10,this.lastPoint=R.lastPoint||new a,this.lineDashOffset=R.lineDashOffset||0,this.lineDash=R.lineDash||[],this.margin=R.margin||[0,0,0,0],this.prevPageLastElemOffset=R.prevPageLastElemOffset||0,this.ignoreClearRect=typeof R.ignoreClearRect!="boolean"||R.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new p(this),e=this.internal.f2,n=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,a=this.internal.Point,o=this.internal.Rectangle,l=this.internal.Matrix,u=new d}]);var p=function(R){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var $=R;Object.defineProperty(this,"pdf",{get:function(){return $}});var J=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return J},set:function(be){J=!!be}});var W=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return W},set:function(be){W=!!be}});var ae=0;Object.defineProperty(this,"posX",{get:function(){return ae},set:function(be){isNaN(be)||(ae=be)}});var le=0;Object.defineProperty(this,"posY",{get:function(){return le},set:function(be){isNaN(be)||(le=be)}}),Object.defineProperty(this,"margin",{get:function(){return u.margin},set:function(be){var oe;typeof be=="number"?oe=[be,be,be,be]:((oe=new Array(4))[0]=be[0],oe[1]=be.length>=2?be[1]:oe[0],oe[2]=be.length>=3?be[2]:oe[0],oe[3]=be.length>=4?be[3]:oe[1]),u.margin=oe}});var ue=!1;Object.defineProperty(this,"autoPaging",{get:function(){return ue},set:function(be){ue=be}});var de=0;Object.defineProperty(this,"lastBreak",{get:function(){return de},set:function(be){de=be}});var ke=[];Object.defineProperty(this,"pageBreaks",{get:function(){return ke},set:function(be){ke=be}}),Object.defineProperty(this,"ctx",{get:function(){return u},set:function(be){be instanceof d&&(u=be)}}),Object.defineProperty(this,"path",{get:function(){return u.path},set:function(be){u.path=be}});var Ie=[];Object.defineProperty(this,"ctxStack",{get:function(){return Ie},set:function(be){Ie=be}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(be){var oe;oe=m(be),this.ctx.fillStyle=oe.style,this.ctx.isFillTransparent=oe.a===0,this.ctx.fillOpacity=oe.a,this.pdf.setFillColor(oe.r,oe.g,oe.b,{a:oe.a}),this.pdf.setTextColor(oe.r,oe.g,oe.b,{a:oe.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(be){var oe=m(be);this.ctx.strokeStyle=oe.style,this.ctx.isStrokeTransparent=oe.a===0,this.ctx.strokeOpacity=oe.a,oe.a===0?this.pdf.setDrawColor(255,255,255):(oe.a,this.pdf.setDrawColor(oe.r,oe.g,oe.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(be){["butt","round","square"].indexOf(be)!==-1&&(this.ctx.lineCap=be,this.pdf.setLineCap(be))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(be){isNaN(be)||(this.ctx.lineWidth=be,this.pdf.setLineWidth(be))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(be){["bevel","round","miter"].indexOf(be)!==-1&&(this.ctx.lineJoin=be,this.pdf.setLineJoin(be))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(be){isNaN(be)||(this.ctx.miterLimit=be,this.pdf.setMiterLimit(be))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(be){this.ctx.textBaseline=be}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(be){["right","end","center","left","start"].indexOf(be)!==-1&&(this.ctx.textAlign=be)}});var De=null;function Le(be,oe){if(De===null){var We=function(Fe){var he=[];return Object.keys(Fe).forEach(function(Ee){Fe[Ee].forEach(function(Me){var Ke=null;switch(Me){case"bold":Ke={family:Ee,weight:"bold"};break;case"italic":Ke={family:Ee,style:"italic"};break;case"bolditalic":Ke={family:Ee,weight:"bold",style:"italic"};break;case"":case"normal":Ke={family:Ee}}Ke!==null&&(Ke.ref={name:Ee,style:Me},he.push(Ke))})}),he}(be.getFontList());De=function(Fe){for(var he={},Ee=0;Ee<Fe.length;++Ee){var Me=uv(Fe[Ee]),Ke=Me.family,$e=Me.stretch,Ge=Me.style,at=Me.weight;he[Ke]=he[Ke]||{},he[Ke][$e]=he[Ke][$e]||{},he[Ke][$e][Ge]=he[Ke][$e][Ge]||{},he[Ke][$e][Ge][at]=Me}return he}(We.concat(oe))}return De}var Xe=null;Object.defineProperty(this,"fontFaces",{get:function(){return Xe},set:function(be){De=null,Xe=be}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(be){var oe;if(this.ctx.font=be,(oe=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(be))!==null){var We=oe[1],Fe=(oe[2],oe[3]),he=oe[4],Ee=(oe[5],oe[6]),Me=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(he)[2];he=Math.floor(Me==="px"?parseFloat(he)*this.pdf.internal.scaleFactor:Me==="em"?parseFloat(he)*this.pdf.getFontSize():parseFloat(he)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(he);var Ke=function(ot){var ct,ze,_e=[],He=ot.trim();if(He==="")return S1;if(He in U_)return[U_[He]];for(;He!=="";){switch(ze=null,ct=(He=K_(He)).charAt(0)){case'"':case"'":ze=AD(He.substring(1),ct);break;default:ze=ED(He)}if(ze===null||(_e.push(ze[0]),(He=K_(ze[1]))!==""&&He.charAt(0)!==","))return S1;He=He.replace(/^,/,"")}return _e}(Ee);if(this.fontFaces){var $e=ND(Le(this.pdf,this.fontFaces),Ke.map(function(ot){return{family:ot,stretch:"normal",weight:Fe,style:We}}));this.pdf.setFont($e.ref.name,$e.ref.style)}else{var Ge="";(Fe==="bold"||parseInt(Fe,10)>=700||We==="bold")&&(Ge="bold"),We==="italic"&&(Ge+="italic"),Ge.length===0&&(Ge="normal");for(var at="",tt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},ut=0;ut<Ke.length;ut++){if(this.pdf.internal.getFont(Ke[ut],Ge,{noFallback:!0,disableWarning:!0})!==void 0){at=Ke[ut];break}if(Ge==="bolditalic"&&this.pdf.internal.getFont(Ke[ut],"bold",{noFallback:!0,disableWarning:!0})!==void 0)at=Ke[ut],Ge="bold";else if(this.pdf.internal.getFont(Ke[ut],"normal",{noFallback:!0,disableWarning:!0})!==void 0){at=Ke[ut],Ge="normal";break}}if(at===""){for(var dt=0;dt<Ke.length;dt++)if(tt[Ke[dt]]){at=tt[Ke[dt]];break}}at=at===""?"Times":at,this.pdf.setFont(at,Ge)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(be){this.ctx.globalCompositeOperation=be}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(be){this.ctx.globalAlpha=be}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(be){this.ctx.lineDashOffset=be,me.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(be){this.ctx.lineDash=be,me.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(be){this.ctx.ignoreClearRect=!!be}})};p.prototype.setLineDash=function(R){this.lineDash=R},p.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},p.prototype.fill=function(){O.call(this,"fill",!1)},p.prototype.stroke=function(){O.call(this,"stroke",!1)},p.prototype.beginPath=function(){this.path=[{type:"begin"}]},p.prototype.moveTo=function(R,$){if(isNaN(R)||isNaN($))throw tn.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var J=this.ctx.transform.applyToPoint(new a(R,$));this.path.push({type:"mt",x:J.x,y:J.y}),this.ctx.lastPoint=new a(R,$)},p.prototype.closePath=function(){var R=new a(0,0),$=0;for($=this.path.length-1;$!==-1;$--)if(this.path[$].type==="begin"&&Gt(this.path[$+1])==="object"&&typeof this.path[$+1].x=="number"){R=new a(this.path[$+1].x,this.path[$+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new a(R.x,R.y)},p.prototype.lineTo=function(R,$){if(isNaN(R)||isNaN($))throw tn.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var J=this.ctx.transform.applyToPoint(new a(R,$));this.path.push({type:"lt",x:J.x,y:J.y}),this.ctx.lastPoint=new a(J.x,J.y)},p.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),O.call(this,null,!0)},p.prototype.quadraticCurveTo=function(R,$,J,W){if(isNaN(J)||isNaN(W)||isNaN(R)||isNaN($))throw tn.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var ae=this.ctx.transform.applyToPoint(new a(J,W)),le=this.ctx.transform.applyToPoint(new a(R,$));this.path.push({type:"qct",x1:le.x,y1:le.y,x:ae.x,y:ae.y}),this.ctx.lastPoint=new a(ae.x,ae.y)},p.prototype.bezierCurveTo=function(R,$,J,W,ae,le){if(isNaN(ae)||isNaN(le)||isNaN(R)||isNaN($)||isNaN(J)||isNaN(W))throw tn.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var ue=this.ctx.transform.applyToPoint(new a(ae,le)),de=this.ctx.transform.applyToPoint(new a(R,$)),ke=this.ctx.transform.applyToPoint(new a(J,W));this.path.push({type:"bct",x1:de.x,y1:de.y,x2:ke.x,y2:ke.y,x:ue.x,y:ue.y}),this.ctx.lastPoint=new a(ue.x,ue.y)},p.prototype.arc=function(R,$,J,W,ae,le){if(isNaN(R)||isNaN($)||isNaN(J)||isNaN(W)||isNaN(ae))throw tn.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(le=!!le,!this.ctx.transform.isIdentity){var ue=this.ctx.transform.applyToPoint(new a(R,$));R=ue.x,$=ue.y;var de=this.ctx.transform.applyToPoint(new a(0,J)),ke=this.ctx.transform.applyToPoint(new a(0,0));J=Math.sqrt(Math.pow(de.x-ke.x,2)+Math.pow(de.y-ke.y,2))}Math.abs(ae-W)>=2*Math.PI&&(W=0,ae=2*Math.PI),this.path.push({type:"arc",x:R,y:$,radius:J,startAngle:W,endAngle:ae,counterclockwise:le})},p.prototype.arcTo=function(R,$,J,W,ae){throw new Error("arcTo not implemented.")},p.prototype.rect=function(R,$,J,W){if(isNaN(R)||isNaN($)||isNaN(J)||isNaN(W))throw tn.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(R,$),this.lineTo(R+J,$),this.lineTo(R+J,$+W),this.lineTo(R,$+W),this.lineTo(R,$),this.lineTo(R+J,$),this.lineTo(R,$)},p.prototype.fillRect=function(R,$,J,W){if(isNaN(R)||isNaN($)||isNaN(J)||isNaN(W))throw tn.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!g.call(this)){var ae={};this.lineCap!=="butt"&&(ae.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(ae.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(R,$,J,W),this.fill(),ae.hasOwnProperty("lineCap")&&(this.lineCap=ae.lineCap),ae.hasOwnProperty("lineJoin")&&(this.lineJoin=ae.lineJoin)}},p.prototype.strokeRect=function(R,$,J,W){if(isNaN(R)||isNaN($)||isNaN(J)||isNaN(W))throw tn.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");x.call(this)||(this.beginPath(),this.rect(R,$,J,W),this.stroke())},p.prototype.clearRect=function(R,$,J,W){if(isNaN(R)||isNaN($)||isNaN(J)||isNaN(W))throw tn.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(R,$,J,W))},p.prototype.save=function(R){R=typeof R!="boolean"||R;for(var $=this.pdf.internal.getCurrentPageInfo().pageNumber,J=0;J<this.pdf.internal.getNumberOfPages();J++)this.pdf.setPage(J+1),this.pdf.internal.out("q");if(this.pdf.setPage($),R){this.ctx.fontSize=this.pdf.internal.getFontSize();var W=new d(this.ctx);this.ctxStack.push(this.ctx),this.ctx=W}},p.prototype.restore=function(R){R=typeof R!="boolean"||R;for(var $=this.pdf.internal.getCurrentPageInfo().pageNumber,J=0;J<this.pdf.internal.getNumberOfPages();J++)this.pdf.setPage(J+1),this.pdf.internal.out("Q");this.pdf.setPage($),R&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},p.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var m=function(R){var $,J,W,ae;if(R.isCanvasGradient===!0&&(R=R.getColor()),!R)return{r:0,g:0,b:0,a:0,style:R};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(R))$=0,J=0,W=0,ae=0;else{var le=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(R);if(le!==null)$=parseInt(le[1]),J=parseInt(le[2]),W=parseInt(le[3]),ae=1;else if((le=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(R))!==null)$=parseInt(le[1]),J=parseInt(le[2]),W=parseInt(le[3]),ae=parseFloat(le[4]);else{if(ae=1,typeof R=="string"&&R.charAt(0)!=="#"){var ue=new AN(R);R=ue.ok?ue.toHex():"#000000"}R.length===4?($=R.substring(1,2),$+=$,J=R.substring(2,3),J+=J,W=R.substring(3,4),W+=W):($=R.substring(1,3),J=R.substring(3,5),W=R.substring(5,7)),$=parseInt($,16),J=parseInt(J,16),W=parseInt(W,16)}}return{r:$,g:J,b:W,a:ae,style:R}},g=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},x=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};p.prototype.fillText=function(R,$,J,W){if(isNaN($)||isNaN(J)||typeof R!="string")throw tn.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(W=isNaN(W)?void 0:W,!g.call(this)){var ae=K(this.ctx.transform.rotation),le=this.ctx.transform.scaleX;T.call(this,{text:R,x:$,y:J,scale:le,angle:ae,align:this.textAlign,maxWidth:W})}},p.prototype.strokeText=function(R,$,J,W){if(isNaN($)||isNaN(J)||typeof R!="string")throw tn.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!x.call(this)){W=isNaN(W)?void 0:W;var ae=K(this.ctx.transform.rotation),le=this.ctx.transform.scaleX;T.call(this,{text:R,x:$,y:J,scale:le,renderingMode:"stroke",angle:ae,align:this.textAlign,maxWidth:W})}},p.prototype.measureText=function(R){if(typeof R!="string")throw tn.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var $=this.pdf,J=this.pdf.internal.scaleFactor,W=$.internal.getFontSize(),ae=$.getStringUnitWidth(R)*W/$.internal.scaleFactor,le=function(ue){var de=(ue=ue||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return de}}),this};return new le({width:ae*=Math.round(96*J/72*1e4)/1e4})},p.prototype.scale=function(R,$){if(isNaN(R)||isNaN($))throw tn.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var J=new l(R,0,0,$,0,0);this.ctx.transform=this.ctx.transform.multiply(J)},p.prototype.rotate=function(R){if(isNaN(R))throw tn.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var $=new l(Math.cos(R),Math.sin(R),-Math.sin(R),Math.cos(R),0,0);this.ctx.transform=this.ctx.transform.multiply($)},p.prototype.translate=function(R,$){if(isNaN(R)||isNaN($))throw tn.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var J=new l(1,0,0,1,R,$);this.ctx.transform=this.ctx.transform.multiply(J)},p.prototype.transform=function(R,$,J,W,ae,le){if(isNaN(R)||isNaN($)||isNaN(J)||isNaN(W)||isNaN(ae)||isNaN(le))throw tn.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var ue=new l(R,$,J,W,ae,le);this.ctx.transform=this.ctx.transform.multiply(ue)},p.prototype.setTransform=function(R,$,J,W,ae,le){R=isNaN(R)?1:R,$=isNaN($)?0:$,J=isNaN(J)?0:J,W=isNaN(W)?1:W,ae=isNaN(ae)?0:ae,le=isNaN(le)?0:le,this.ctx.transform=new l(R,$,J,W,ae,le)};var b=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};p.prototype.drawImage=function(R,$,J,W,ae,le,ue,de,ke){var Ie=this.pdf.getImageProperties(R),De=1,Le=1,Xe=1,be=1;W!==void 0&&de!==void 0&&(Xe=de/W,be=ke/ae,De=Ie.width/W*de/W,Le=Ie.height/ae*ke/ae),le===void 0&&(le=$,ue=J,$=0,J=0),W!==void 0&&de===void 0&&(de=W,ke=ae),W===void 0&&de===void 0&&(de=Ie.width,ke=Ie.height);for(var oe,We=this.ctx.transform.decompose(),Fe=K(We.rotate.shx),he=new l,Ee=(he=(he=(he=he.multiply(We.translate)).multiply(We.skew)).multiply(We.scale)).applyToRectangle(new o(le-$*Xe,ue-J*be,W*De,ae*Le)),Me=k.call(this,Ee),Ke=[],$e=0;$e<Me.length;$e+=1)Ke.indexOf(Me[$e])===-1&&Ke.push(Me[$e]);if(j(Ke),this.autoPaging)for(var Ge=Ke[0],at=Ke[Ke.length-1],tt=Ge;tt<at+1;tt++){this.pdf.setPage(tt);var ut=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],dt=tt===1?this.posY+this.margin[0]:this.margin[0],ot=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ct=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],ze=tt===1?0:ot+(tt-2)*ct;if(this.ctx.clip_path.length!==0){var _e=this.path;oe=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=N(oe,this.posX+this.margin[3],-ze+dt+this.ctx.prevPageLastElemOffset),Q.call(this,"fill",!0),this.path=_e}var He=JSON.parse(JSON.stringify(Ee));He=N([He],this.posX+this.margin[3],-ze+dt+this.ctx.prevPageLastElemOffset)[0];var mt=(tt>Ge||tt<at)&&b.call(this);mt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ut,ct,null).clip().discardPath()),this.pdf.addImage(R,"JPEG",He.x,He.y,He.w,He.h,null,null,Fe),mt&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(R,"JPEG",Ee.x,Ee.y,Ee.w,Ee.h,null,null,Fe)};var k=function(R,$,J){var W=[];$=$||this.pdf.internal.pageSize.width,J=J||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var ae=this.posY+this.ctx.prevPageLastElemOffset;switch(R.type){default:case"mt":case"lt":W.push(Math.floor((R.y+ae)/J)+1);break;case"arc":W.push(Math.floor((R.y+ae-R.radius)/J)+1),W.push(Math.floor((R.y+ae+R.radius)/J)+1);break;case"qct":var le=H(this.ctx.lastPoint.x,this.ctx.lastPoint.y,R.x1,R.y1,R.x,R.y);W.push(Math.floor((le.y+ae)/J)+1),W.push(Math.floor((le.y+le.h+ae)/J)+1);break;case"bct":var ue=te(this.ctx.lastPoint.x,this.ctx.lastPoint.y,R.x1,R.y1,R.x2,R.y2,R.x,R.y);W.push(Math.floor((ue.y+ae)/J)+1),W.push(Math.floor((ue.y+ue.h+ae)/J)+1);break;case"rect":W.push(Math.floor((R.y+ae)/J)+1),W.push(Math.floor((R.y+R.h+ae)/J)+1)}for(var de=0;de<W.length;de+=1)for(;this.pdf.internal.getNumberOfPages()<W[de];)w.call(this);return W},w=function(){var R=this.fillStyle,$=this.strokeStyle,J=this.font,W=this.lineCap,ae=this.lineWidth,le=this.lineJoin;this.pdf.addPage(),this.fillStyle=R,this.strokeStyle=$,this.font=J,this.lineCap=W,this.lineWidth=ae,this.lineJoin=le},N=function(R,$,J){for(var W=0;W<R.length;W++)switch(R[W].type){case"bct":R[W].x2+=$,R[W].y2+=J;case"qct":R[W].x1+=$,R[W].y1+=J;case"mt":case"lt":case"arc":default:R[W].x+=$,R[W].y+=J}return R},j=function(R){return R.sort(function($,J){return $-J})},O=function(R,$){for(var J,W,ae=this.fillStyle,le=this.strokeStyle,ue=this.lineCap,de=this.lineWidth,ke=Math.abs(de*this.ctx.transform.scaleX),Ie=this.lineJoin,De=JSON.parse(JSON.stringify(this.path)),Le=JSON.parse(JSON.stringify(this.path)),Xe=[],be=0;be<Le.length;be++)if(Le[be].x!==void 0)for(var oe=k.call(this,Le[be]),We=0;We<oe.length;We+=1)Xe.indexOf(oe[We])===-1&&Xe.push(oe[We]);for(var Fe=0;Fe<Xe.length;Fe++)for(;this.pdf.internal.getNumberOfPages()<Xe[Fe];)w.call(this);if(j(Xe),this.autoPaging)for(var he=Xe[0],Ee=Xe[Xe.length-1],Me=he;Me<Ee+1;Me++){this.pdf.setPage(Me),this.fillStyle=ae,this.strokeStyle=le,this.lineCap=ue,this.lineWidth=ke,this.lineJoin=Ie;var Ke=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],$e=Me===1?this.posY+this.margin[0]:this.margin[0],Ge=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],at=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],tt=Me===1?0:Ge+(Me-2)*at;if(this.ctx.clip_path.length!==0){var ut=this.path;J=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=N(J,this.posX+this.margin[3],-tt+$e+this.ctx.prevPageLastElemOffset),Q.call(this,R,!0),this.path=ut}if(W=JSON.parse(JSON.stringify(De)),this.path=N(W,this.posX+this.margin[3],-tt+$e+this.ctx.prevPageLastElemOffset),$===!1||Me===0){var dt=(Me>he||Me<Ee)&&b.call(this);dt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ke,at,null).clip().discardPath()),Q.call(this,R,$),dt&&this.pdf.restoreGraphicsState()}this.lineWidth=de}else this.lineWidth=ke,Q.call(this,R,$),this.lineWidth=de;this.path=De},Q=function(R,$){if((R!=="stroke"||$||!x.call(this))&&(R==="stroke"||$||!g.call(this))){for(var J,W,ae=[],le=this.path,ue=0;ue<le.length;ue++){var de=le[ue];switch(de.type){case"begin":ae.push({begin:!0});break;case"close":ae.push({close:!0});break;case"mt":ae.push({start:de,deltas:[],abs:[]});break;case"lt":var ke=ae.length;if(le[ue-1]&&!isNaN(le[ue-1].x)&&(J=[de.x-le[ue-1].x,de.y-le[ue-1].y],ke>0)){for(;ke>=0;ke--)if(ae[ke-1].close!==!0&&ae[ke-1].begin!==!0){ae[ke-1].deltas.push(J),ae[ke-1].abs.push(de);break}}break;case"bct":J=[de.x1-le[ue-1].x,de.y1-le[ue-1].y,de.x2-le[ue-1].x,de.y2-le[ue-1].y,de.x-le[ue-1].x,de.y-le[ue-1].y],ae[ae.length-1].deltas.push(J);break;case"qct":var Ie=le[ue-1].x+2/3*(de.x1-le[ue-1].x),De=le[ue-1].y+2/3*(de.y1-le[ue-1].y),Le=de.x+2/3*(de.x1-de.x),Xe=de.y+2/3*(de.y1-de.y),be=de.x,oe=de.y;J=[Ie-le[ue-1].x,De-le[ue-1].y,Le-le[ue-1].x,Xe-le[ue-1].y,be-le[ue-1].x,oe-le[ue-1].y],ae[ae.length-1].deltas.push(J);break;case"arc":ae.push({deltas:[],abs:[],arc:!0}),Array.isArray(ae[ae.length-1].abs)&&ae[ae.length-1].abs.push(de)}}W=$?null:R==="stroke"?"stroke":"fill";for(var We=!1,Fe=0;Fe<ae.length;Fe++)if(ae[Fe].arc)for(var he=ae[Fe].abs,Ee=0;Ee<he.length;Ee++){var Me=he[Ee];Me.type==="arc"?y.call(this,Me.x,Me.y,Me.radius,Me.startAngle,Me.endAngle,Me.counterclockwise,void 0,$,!We):I.call(this,Me.x,Me.y),We=!0}else if(ae[Fe].close===!0)this.pdf.internal.out("h"),We=!1;else if(ae[Fe].begin!==!0){var Ke=ae[Fe].start.x,$e=ae[Fe].start.y;M.call(this,ae[Fe].deltas,Ke,$e),We=!0}W&&S.call(this,W),$&&L.call(this)}},B=function(R){var $=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,J=$*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return R-J;case"top":return R+$-J;case"hanging":return R+$-2*J;case"middle":return R+$/2-J;case"ideographic":return R;case"alphabetic":default:return R}},P=function(R){return R+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};p.prototype.createLinearGradient=function(){var R=function(){};return R.colorStops=[],R.addColorStop=function($,J){this.colorStops.push([$,J])},R.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},R.isCanvasGradient=!0,R},p.prototype.createPattern=function(){return this.createLinearGradient()},p.prototype.createRadialGradient=function(){return this.createLinearGradient()};var y=function(R,$,J,W,ae,le,ue,de,ke){for(var Ie=V.call(this,J,W,ae,le),De=0;De<Ie.length;De++){var Le=Ie[De];De===0&&(ke?A.call(this,Le.x1+R,Le.y1+$):I.call(this,Le.x1+R,Le.y1+$)),ne.call(this,R,$,Le.x2,Le.y2,Le.x3,Le.y3,Le.x4,Le.y4)}de?L.call(this):S.call(this,ue)},S=function(R){switch(R){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},L=function(){this.pdf.clip(),this.pdf.discardPath()},A=function(R,$){this.pdf.internal.out(n(R)+" "+r($)+" m")},T=function(R){var $;switch(R.align){case"right":case"end":$="right";break;case"center":$="center";break;case"left":case"start":default:$="left"}var J=this.pdf.getTextDimensions(R.text),W=B.call(this,R.y),ae=P.call(this,W)-J.h,le=this.ctx.transform.applyToPoint(new a(R.x,W)),ue=this.ctx.transform.decompose(),de=new l;de=(de=(de=de.multiply(ue.translate)).multiply(ue.skew)).multiply(ue.scale);for(var ke,Ie,De,Le=this.ctx.transform.applyToRectangle(new o(R.x,W,J.w,J.h)),Xe=de.applyToRectangle(new o(R.x,ae,J.w,J.h)),be=k.call(this,Xe),oe=[],We=0;We<be.length;We+=1)oe.indexOf(be[We])===-1&&oe.push(be[We]);if(j(oe),this.autoPaging)for(var Fe=oe[0],he=oe[oe.length-1],Ee=Fe;Ee<he+1;Ee++){this.pdf.setPage(Ee);var Me=Ee===1?this.posY+this.margin[0]:this.margin[0],Ke=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],$e=this.pdf.internal.pageSize.height-this.margin[2],Ge=$e-this.margin[0],at=this.pdf.internal.pageSize.width-this.margin[1],tt=at-this.margin[3],ut=Ee===1?0:Ke+(Ee-2)*Ge;if(this.ctx.clip_path.length!==0){var dt=this.path;ke=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=N(ke,this.posX+this.margin[3],-1*ut+Me),Q.call(this,"fill",!0),this.path=dt}var ot=N([JSON.parse(JSON.stringify(Xe))],this.posX+this.margin[3],-ut+Me+this.ctx.prevPageLastElemOffset)[0];R.scale>=.01&&(Ie=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Ie*R.scale),De=this.lineWidth,this.lineWidth=De*R.scale);var ct=this.autoPaging!=="text";if(ct||ot.y+ot.h<=$e){if(ct||ot.y>=Me&&ot.x<=at){var ze=ct?R.text:this.pdf.splitTextToSize(R.text,R.maxWidth||at-ot.x)[0],_e=N([JSON.parse(JSON.stringify(Le))],this.posX+this.margin[3],-ut+Me+this.ctx.prevPageLastElemOffset)[0],He=ct&&(Ee>Fe||Ee<he)&&b.call(this);He&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],tt,Ge,null).clip().discardPath()),this.pdf.text(ze,_e.x,_e.y,{angle:R.angle,align:$,renderingMode:R.renderingMode}),He&&this.pdf.restoreGraphicsState()}}else ot.y<$e&&(this.ctx.prevPageLastElemOffset+=$e-ot.y);R.scale>=.01&&(this.pdf.setFontSize(Ie),this.lineWidth=De)}else R.scale>=.01&&(Ie=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Ie*R.scale),De=this.lineWidth,this.lineWidth=De*R.scale),this.pdf.text(R.text,le.x+this.posX,le.y+this.posY,{angle:R.angle,align:$,renderingMode:R.renderingMode,maxWidth:R.maxWidth}),R.scale>=.01&&(this.pdf.setFontSize(Ie),this.lineWidth=De)},I=function(R,$,J,W){J=J||0,W=W||0,this.pdf.internal.out(n(R+J)+" "+r($+W)+" l")},M=function(R,$,J){return this.pdf.lines(R,$,J,null,null)},ne=function(R,$,J,W,ae,le,ue,de){this.pdf.internal.out([e(i(J+R)),e(s(W+$)),e(i(ae+R)),e(s(le+$)),e(i(ue+R)),e(s(de+$)),"c"].join(" "))},V=function(R,$,J,W){for(var ae=2*Math.PI,le=Math.PI/2;$>J;)$-=ae;var ue=Math.abs(J-$);ue<ae&&W&&(ue=ae-ue);for(var de=[],ke=W?-1:1,Ie=$;ue>1e-5;){var De=Ie+ke*Math.min(ue,le);de.push(U.call(this,R,Ie,De)),ue-=Math.abs(De-Ie),Ie=De}return de},U=function(R,$,J){var W=(J-$)/2,ae=R*Math.cos(W),le=R*Math.sin(W),ue=ae,de=-le,ke=ue*ue+de*de,Ie=ke+ue*ae+de*le,De=4/3*(Math.sqrt(2*ke*Ie)-Ie)/(ue*le-de*ae),Le=ue-De*de,Xe=de+De*ue,be=Le,oe=-Xe,We=W+$,Fe=Math.cos(We),he=Math.sin(We);return{x1:R*Math.cos($),y1:R*Math.sin($),x2:Le*Fe-Xe*he,y2:Le*he+Xe*Fe,x3:be*Fe-oe*he,y3:be*he+oe*Fe,x4:R*Math.cos(J),y4:R*Math.sin(J)}},K=function(R){return 180*R/Math.PI},H=function(R,$,J,W,ae,le){var ue=R+.5*(J-R),de=$+.5*(W-$),ke=ae+.5*(J-ae),Ie=le+.5*(W-le),De=Math.min(R,ae,ue,ke),Le=Math.max(R,ae,ue,ke),Xe=Math.min($,le,de,Ie),be=Math.max($,le,de,Ie);return new o(De,Xe,Le-De,be-Xe)},te=function(R,$,J,W,ae,le,ue,de){var ke,Ie,De,Le,Xe,be,oe,We,Fe,he,Ee,Me,Ke,$e,Ge=J-R,at=W-$,tt=ae-J,ut=le-W,dt=ue-ae,ot=de-le;for(Ie=0;Ie<41;Ie++)Fe=(oe=(De=R+(ke=Ie/40)*Ge)+ke*((Xe=J+ke*tt)-De))+ke*(Xe+ke*(ae+ke*dt-Xe)-oe),he=(We=(Le=$+ke*at)+ke*((be=W+ke*ut)-Le))+ke*(be+ke*(le+ke*ot-be)-We),Ie==0?(Ee=Fe,Me=he,Ke=Fe,$e=he):(Ee=Math.min(Ee,Fe),Me=Math.min(Me,he),Ke=Math.max(Ke,Fe),$e=Math.max($e,he));return new o(Math.round(Ee),Math.round(Me),Math.round(Ke-Ee),Math.round($e-Me))},me=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var R,$,J=(R=this.ctx.lineDash,$=this.ctx.lineDashOffset,JSON.stringify({lineDash:R,lineDashOffset:$}));this.prevLineDash!==J&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=J)}}})(gt.API),function(t){var e=function(s){var a,o,l,u,d,p,m,g,x,b;for(o=[],l=0,u=(s+=a="\0\0\0\0".slice(s.length%4||4)).length;u>l;l+=4)(d=(s.charCodeAt(l)<<24)+(s.charCodeAt(l+1)<<16)+(s.charCodeAt(l+2)<<8)+s.charCodeAt(l+3))!==0?(p=(d=((d=((d=((d=(d-(b=d%85))/85)-(x=d%85))/85)-(g=d%85))/85)-(m=d%85))/85)%85,o.push(p+33,m+33,g+33,x+33,b+33)):o.push(122);return function(k,w){for(var N=w;N>0;N--)k.pop()}(o,a.length),String.fromCharCode.apply(String,o)+"~>"},n=function(s){var a,o,l,u,d,p=String,m="length",g=255,x="charCodeAt",b="slice",k="replace";for(s[b](-2),s=s[b](0,-2)[k](/\s/g,"")[k]("z","!!!!!"),l=[],u=0,d=(s+=a="uuuuu"[b](s[m]%5||5))[m];d>u;u+=5)o=52200625*(s[x](u)-33)+614125*(s[x](u+1)-33)+7225*(s[x](u+2)-33)+85*(s[x](u+3)-33)+(s[x](u+4)-33),l.push(g&o>>24,g&o>>16,g&o>>8,g&o);return function(w,N){for(var j=N;j>0;j--)w.pop()}(l,a[m]),p.fromCharCode.apply(p,l)},r=function(s){var a=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((s=s.replace(/\s/g,"")).indexOf(">")!==-1&&(s=s.substr(0,s.indexOf(">"))),s.length%2&&(s+="0"),a.test(s)===!1)return"";for(var o="",l=0;l<s.length;l+=2)o+=String.fromCharCode("0x"+(s[l]+s[l+1]));return o},i=function(s){for(var a=new Uint8Array(s.length),o=s.length;o--;)a[o]=s.charCodeAt(o);return s=(a=iv(a)).reduce(function(l,u){return l+String.fromCharCode(u)},"")};t.processDataByFilters=function(s,a){var o=0,l=s||"",u=[];for(typeof(a=a||[])=="string"&&(a=[a]),o=0;o<a.length;o+=1)switch(a[o]){case"ASCII85Decode":case"/ASCII85Decode":l=n(l),u.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":l=e(l),u.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":l=r(l),u.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":l=l.split("").map(function(d){return("0"+d.charCodeAt().toString(16)).slice(-2)}).join("")+">",u.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":l=i(l),u.push("/FlateDecode");break;default:throw new Error('The filter: "'+a[o]+'" is not implemented')}return{data:l,reverseChain:u.reverse().join(" ")}}}(gt.API),function(t){t.loadFile=function(e,n,r){return function(i,s,a){s=s!==!1,a=typeof a=="function"?a:function(){};var o=void 0;try{o=function(l,u,d){var p=new XMLHttpRequest,m=0,g=function(x){var b=x.length,k=[],w=String.fromCharCode;for(m=0;m<b;m+=1)k.push(w(255&x.charCodeAt(m)));return k.join("")};if(p.open("GET",l,!u),p.overrideMimeType("text/plain; charset=x-user-defined"),u===!1&&(p.onload=function(){p.status===200?d(g(this.responseText)):d(void 0)}),p.send(null),u&&p.status===200)return g(p.responseText)}(i,s,a)}catch{}return o}(e,n,r)},t.loadImageFile=t.loadFile}(gt.API),function(t){function e(){return(yt.html2canvas?Promise.resolve(yt.html2canvas):Z0(()=>import("./html2canvas.esm-CBrSDip1.js"),[])).catch(function(a){return Promise.reject(new Error("Could not load html2canvas: "+a))}).then(function(a){return a.default?a.default:a})}function n(){return(yt.DOMPurify?Promise.resolve(yt.DOMPurify):Z0(()=>import("./purify.es-C_uT9hQ1.js"),[])).catch(function(a){return Promise.reject(new Error("Could not load dompurify: "+a))}).then(function(a){return a.default?a.default:a})}var r=function(a){var o=Gt(a);return o==="undefined"?"undefined":o==="string"||a instanceof String?"string":o==="number"||a instanceof Number?"number":o==="function"||a instanceof Function?"function":a&&a.constructor===Array?"array":a&&a.nodeType===1?"element":o==="object"?"object":"unknown"},i=function(a,o){var l=document.createElement(a);for(var u in o.className&&(l.className=o.className),o.innerHTML&&o.dompurify&&(l.innerHTML=o.dompurify.sanitize(o.innerHTML)),o.style)l.style[u]=o.style[u];return l},s=function a(o){var l=Object.assign(a.convert(Promise.resolve()),JSON.parse(JSON.stringify(a.template))),u=a.convert(Promise.resolve(),l);return u=(u=u.setProgress(1,a,1,[a])).set(o)};(s.prototype=Object.create(Promise.prototype)).constructor=s,s.convert=function(a,o){return a.__proto__=o||s.prototype,a},s.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},s.prototype.from=function(a,o){return this.then(function(){switch(o=o||function(l){switch(r(l)){case"string":return"string";case"element":return l.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(a)){case"string":return this.then(n).then(function(l){return this.set({src:i("div",{innerHTML:a,dompurify:l})})});case"element":return this.set({src:a});case"canvas":return this.set({canvas:a});case"img":return this.set({img:a});default:return this.error("Unknown source type.")}})},s.prototype.to=function(a){switch(a){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},s.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var a={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},o=function l(u,d){for(var p=u.nodeType===3?document.createTextNode(u.nodeValue):u.cloneNode(!1),m=u.firstChild;m;m=m.nextSibling)d!==!0&&m.nodeType===1&&m.nodeName==="SCRIPT"||p.appendChild(l(m,d));return u.nodeType===1&&(u.nodeName==="CANVAS"?(p.width=u.width,p.height=u.height,p.getContext("2d").drawImage(u,0,0)):u.nodeName!=="TEXTAREA"&&u.nodeName!=="SELECT"||(p.value=u.value),p.addEventListener("load",function(){p.scrollTop=u.scrollTop,p.scrollLeft=u.scrollLeft},!0)),p}(this.prop.src,this.opt.html2canvas.javascriptEnabled);o.tagName==="BODY"&&(a.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:a}),this.prop.container.appendChild(o),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},s.prototype.toCanvas=function(){var a=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(a).then(e).then(function(o){var l=Object.assign({},this.opt.html2canvas);return delete l.onrendered,o(this.prop.container,l)}).then(function(o){(this.opt.html2canvas.onrendered||function(){})(o),this.prop.canvas=o,document.body.removeChild(this.prop.overlay)})},s.prototype.toContext2d=function(){var a=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(a).then(e).then(function(o){var l=this.opt.jsPDF,u=this.opt.fontFaces,d=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,p=Object.assign({async:!0,allowTaint:!0,scale:d,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete p.onrendered,l.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,l.context2d.posX=this.opt.x,l.context2d.posY=this.opt.y,l.context2d.margin=this.opt.margin,l.context2d.fontFaces=u,u)for(var m=0;m<u.length;++m){var g=u[m],x=g.src.find(function(b){return b.format==="truetype"});x&&l.addFont(x.url,g.ref.name,g.ref.style)}return p.windowHeight=p.windowHeight||0,p.windowHeight=p.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):p.windowHeight,l.context2d.save(!0),o(this.prop.container,p)}).then(function(o){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(o),this.prop.canvas=o,document.body.removeChild(this.prop.overlay)})},s.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var a=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=a})},s.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},s.prototype.output=function(a,o,l){return(l=l||"pdf").toLowerCase()==="img"||l.toLowerCase()==="image"?this.outputImg(a,o):this.outputPdf(a,o)},s.prototype.outputPdf=function(a,o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(a,o)})},s.prototype.outputImg=function(a){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(a){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+a+'" is not supported.'}})},s.prototype.save=function(a){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(a?{filename:a}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},s.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},s.prototype.set=function(a){if(r(a)!=="object")return this;var o=Object.keys(a||{}).map(function(l){if(l in s.template.prop)return function(){this.prop[l]=a[l]};switch(l){case"margin":return this.setMargin.bind(this,a.margin);case"jsPDF":return function(){return this.opt.jsPDF=a.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,a.pageSize);default:return function(){this.opt[l]=a[l]}}},this);return this.then(function(){return this.thenList(o)})},s.prototype.get=function(a,o){return this.then(function(){var l=a in s.template.prop?this.prop[a]:this.opt[a];return o?o(l):l})},s.prototype.setMargin=function(a){return this.then(function(){switch(r(a)){case"number":a=[a,a,a,a];case"array":if(a.length===2&&(a=[a[0],a[1],a[0],a[1]]),a.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=a}).then(this.setPageSize)},s.prototype.setPageSize=function(a){function o(l,u){return Math.floor(l*u/72*96)}return this.then(function(){(a=a||gt.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(a.inner={width:a.width-this.opt.margin[1]-this.opt.margin[3],height:a.height-this.opt.margin[0]-this.opt.margin[2]},a.inner.px={width:o(a.inner.width,a.k),height:o(a.inner.height,a.k)},a.inner.ratio=a.inner.height/a.inner.width),this.prop.pageSize=a})},s.prototype.setProgress=function(a,o,l,u){return a!=null&&(this.progress.val=a),o!=null&&(this.progress.state=o),l!=null&&(this.progress.n=l),u!=null&&(this.progress.stack=u),this.progress.ratio=this.progress.val/this.progress.state,this},s.prototype.updateProgress=function(a,o,l,u){return this.setProgress(a?this.progress.val+a:null,o||null,l?this.progress.n+l:null,u?this.progress.stack.concat(u):null)},s.prototype.then=function(a,o){var l=this;return this.thenCore(a,o,function(u,d){return l.updateProgress(null,null,1,[u]),Promise.prototype.then.call(this,function(p){return l.updateProgress(null,u),p}).then(u,d).then(function(p){return l.updateProgress(1),p})})},s.prototype.thenCore=function(a,o,l){l=l||Promise.prototype.then,a&&(a=a.bind(this)),o&&(o=o.bind(this));var u=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:s.convert(Object.assign({},this),Promise.prototype),d=l.call(u,a,o);return s.convert(d,this.__proto__)},s.prototype.thenExternal=function(a,o){return Promise.prototype.then.call(this,a,o)},s.prototype.thenList=function(a){var o=this;return a.forEach(function(l){o=o.thenCore(l)}),o},s.prototype.catch=function(a){a&&(a=a.bind(this));var o=Promise.prototype.catch.call(this,a);return s.convert(o,this)},s.prototype.catchExternal=function(a){return Promise.prototype.catch.call(this,a)},s.prototype.error=function(a){return this.then(function(){throw new Error(a)})},s.prototype.using=s.prototype.set,s.prototype.saveAs=s.prototype.save,s.prototype.export=s.prototype.output,s.prototype.run=s.prototype.then,gt.getPageSize=function(a,o,l){if(Gt(a)==="object"){var u=a;a=u.orientation,o=u.unit||o,l=u.format||l}o=o||"mm",l=l||"a4",a=(""+(a||"P")).toLowerCase();var d,p=(""+l).toLowerCase(),m={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(o){case"pt":d=1;break;case"mm":d=72/25.4;break;case"cm":d=72/2.54;break;case"in":d=72;break;case"px":d=.75;break;case"pc":case"em":d=12;break;case"ex":d=6;break;default:throw"Invalid unit: "+o}var g,x=0,b=0;if(m.hasOwnProperty(p))x=m[p][1]/d,b=m[p][0]/d;else try{x=l[1],b=l[0]}catch{throw new Error("Invalid format: "+l)}if(a==="p"||a==="portrait")a="p",b>x&&(g=b,b=x,x=g);else{if(a!=="l"&&a!=="landscape")throw"Invalid orientation: "+a;a="l",x>b&&(g=b,b=x,x=g)}return{width:b,height:x,unit:o,k:d,orientation:a}},t.html=function(a,o){(o=o||{}).callback=o.callback||function(){},o.html2canvas=o.html2canvas||{},o.html2canvas.canvas=o.html2canvas.canvas||this.canvas,o.jsPDF=o.jsPDF||this,o.fontFaces=o.fontFaces?o.fontFaces.map(uv):null;var l=new s(o);return o.worker?l:l.from(a).doCallback()}}(gt.API),gt.API.addJS=function(t){return z_=t,this.internal.events.subscribe("postPutResources",function(){zf=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(zf+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),q_=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+z_+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){zf!==void 0&&q_!==void 0&&this.internal.out("/Names <</JavaScript "+zf+" 0 R>>")}),this},function(t){var e;t.events.push(["postPutResources",function(){var n=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=n.outline.render().split(/\r\n/),s=0;s<i.length;s++){var a=i[s],o=r.exec(a);if(o!=null){var l=o[1];n.internal.newObjectDeferredBegin(l,!1)}n.internal.write(a)}if(this.outline.createNamedDestinations){var u=this.internal.pages.length,d=[];for(s=0;s<u;s++){var p=n.internal.newObject();d.push(p);var m=n.internal.getPageInfo(s+1);n.internal.write("<< /D["+m.objId+" 0 R /XYZ null null null]>> endobj")}var g=n.internal.newObject();for(n.internal.write("<< /Names [ "),s=0;s<d.length;s++)n.internal.write("(page_"+(s+1)+")"+d[s]+" 0 R");n.internal.write(" ] >>","endobj"),e=n.internal.newObject(),n.internal.write("<< /Dests "+g+" 0 R"),n.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var n=this;n.outline={createNamedDestinations:!1,root:{children:[]}},n.outline.add=function(r,i,s){var a={title:i,options:s,children:[]};return r==null&&(r=this.root),r.children.push(a),a},n.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=n,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},n.outline.genIds_r=function(r){r.id=n.internal.newObjectDeferred();for(var i=0;i<r.children.length;i++)this.genIds_r(r.children[i])},n.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},n.outline.renderItems=function(r){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<r.children.length;s++){var a=r.children[s];this.objStart(a),this.line("/Title "+this.makeString(a.title)),this.line("/Parent "+this.makeRef(r)),s>0&&this.line("/Prev "+this.makeRef(r.children[s-1])),s<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[s+1])),a.children.length>0&&(this.line("/First "+this.makeRef(a.children[0])),this.line("/Last "+this.makeRef(a.children[a.children.length-1])));var o=this.count=this.count_r({count:0},a);if(o>0&&this.line("/Count "+o),a.options&&a.options.pageNumber){var l=n.internal.getPageInfo(a.options.pageNumber);this.line("/Dest ["+l.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var u=0;u<r.children.length;u++)this.renderItems(r.children[u])},n.outline.line=function(r){this.ctx.val+=r+`\r
`},n.outline.makeRef=function(r){return r.id+" 0 R"},n.outline.makeString=function(r){return"("+n.internal.pdfEscape(r)+")"},n.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},n.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},n.outline.count_r=function(r,i){for(var s=0;s<i.children.length;s++)r.count++,this.count_r(r,i.children[s]);return r.count}}])}(gt.API),function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(n,r,i,s,a,o){var l,u=this.decode.DCT_DECODE,d=null;if(typeof n=="string"||this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n)){switch(n=a||n,n=this.__addimage__.isArrayBuffer(n)?new Uint8Array(n):n,(l=function(p){for(var m,g=256*p.charCodeAt(4)+p.charCodeAt(5),x=p.length,b={width:0,height:0,numcomponents:1},k=4;k<x;k+=2){if(k+=g,e.indexOf(p.charCodeAt(k+1))!==-1){m=256*p.charCodeAt(k+5)+p.charCodeAt(k+6),b={width:256*p.charCodeAt(k+7)+p.charCodeAt(k+8),height:m,numcomponents:p.charCodeAt(k+9)};break}g=256*p.charCodeAt(k+2)+p.charCodeAt(k+3)}return b}(n=this.__addimage__.isArrayBufferView(n)?this.__addimage__.arrayBufferToBinaryString(n):n)).numcomponents){case 1:o=this.color_spaces.DEVICE_GRAY;break;case 4:o=this.color_spaces.DEVICE_CMYK;break;case 3:o=this.color_spaces.DEVICE_RGB}d={data:n,width:l.width,height:l.height,colorSpace:o,bitsPerComponent:8,filter:u,index:r,alias:i}}return d}}(gt.API);var Oc,$f,$_,H_,W_,kD=function(){var t,e,n;function r(s){var a,o,l,u,d,p,m,g,x,b,k,w,N,j;for(this.data=s,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},p=null;;){switch(a=this.readUInt32(),x=(function(){var O,Q;for(Q=[],O=0;O<4;++O)Q.push(String.fromCharCode(this.data[this.pos++]));return Q}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(a);break;case"fcTL":p&&this.animation.frames.push(p),this.pos+=4,p={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},d=this.readUInt16(),u=this.readUInt16()||100,p.delay=1e3*d/u,p.disposeOp=this.data[this.pos++],p.blendOp=this.data[this.pos++],p.data=[];break;case"IDAT":case"fdAT":for(x==="fdAT"&&(this.pos+=4,a-=4),s=(p!=null?p.data:void 0)||this.imgData,w=0;0<=a?w<a:w>a;0<=a?++w:--w)s.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(l=this.palette.length/3,this.transparency.indexed=this.read(a),this.transparency.indexed.length>l)throw new Error("More transparent colors than palette size");if((b=l-this.transparency.indexed.length)>0)for(N=0;0<=b?N<b:N>b;0<=b?++N:--N)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(a)[0];break;case 2:this.transparency.rgb=this.read(a)}break;case"tEXt":m=(k=this.read(a)).indexOf(0),g=String.fromCharCode.apply(String,k.slice(0,m)),this.text[g]=String.fromCharCode.apply(String,k.slice(m+1));break;case"IEND":return p&&this.animation.frames.push(p),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(j=this.colorType)===4||j===6,o=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*o,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=a}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}r.prototype.read=function(s){var a,o;for(o=[],a=0;0<=s?a<s:a>s;0<=s?++a:--a)o.push(this.data[this.pos++]);return o},r.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.decodePixels=function(s){var a=this.pixelBitlength/8,o=new Uint8Array(this.width*this.height*a),l=0,u=this;if(s==null&&(s=this.imgData),s.length===0)return new Uint8Array(0);function d(p,m,g,x){var b,k,w,N,j,O,Q,B,P,y,S,L,A,T,I,M,ne,V,U,K,H,te=Math.ceil((u.width-p)/g),me=Math.ceil((u.height-m)/x),R=u.width==te&&u.height==me;for(T=a*te,L=R?o:new Uint8Array(T*me),O=s.length,A=0,k=0;A<me&&l<O;){switch(s[l++]){case 0:for(N=ne=0;ne<T;N=ne+=1)L[k++]=s[l++];break;case 1:for(N=V=0;V<T;N=V+=1)b=s[l++],j=N<a?0:L[k-a],L[k++]=(b+j)%256;break;case 2:for(N=U=0;U<T;N=U+=1)b=s[l++],w=(N-N%a)/a,I=A&&L[(A-1)*T+w*a+N%a],L[k++]=(I+b)%256;break;case 3:for(N=K=0;K<T;N=K+=1)b=s[l++],w=(N-N%a)/a,j=N<a?0:L[k-a],I=A&&L[(A-1)*T+w*a+N%a],L[k++]=(b+Math.floor((j+I)/2))%256;break;case 4:for(N=H=0;H<T;N=H+=1)b=s[l++],w=(N-N%a)/a,j=N<a?0:L[k-a],A===0?I=M=0:(I=L[(A-1)*T+w*a+N%a],M=w&&L[(A-1)*T+(w-1)*a+N%a]),Q=j+I-M,B=Math.abs(Q-j),y=Math.abs(Q-I),S=Math.abs(Q-M),P=B<=y&&B<=S?j:y<=S?I:M,L[k++]=(b+P)%256;break;default:throw new Error("Invalid filter algorithm: "+s[l-1])}if(!R){var $=((m+A*x)*u.width+p)*a,J=A*T;for(N=0;N<te;N+=1){for(var W=0;W<a;W+=1)o[$++]=L[J++];$+=(g-1)*a}}A++}}return s=sD(s),u.interlaceMethod==1?(d(0,0,8,8),d(4,0,8,8),d(0,4,4,8),d(2,0,4,4),d(0,2,2,4),d(1,0,2,2),d(0,1,1,2)):d(0,0,1,1),o},r.prototype.decodePalette=function(){var s,a,o,l,u,d,p,m,g;for(o=this.palette,d=this.transparency.indexed||[],u=new Uint8Array((d.length||0)+o.length),l=0,s=0,a=p=0,m=o.length;p<m;a=p+=3)u[l++]=o[a],u[l++]=o[a+1],u[l++]=o[a+2],u[l++]=(g=d[s++])!=null?g:255;return u},r.prototype.copyToImageData=function(s,a){var o,l,u,d,p,m,g,x,b,k,w;if(l=this.colors,b=null,o=this.hasAlphaChannel,this.palette.length&&(b=(w=this._decodedPalette)!=null?w:this._decodedPalette=this.decodePalette(),l=4,o=!0),x=(u=s.data||s).length,p=b||a,d=m=0,l===1)for(;d<x;)g=b?4*a[d/4]:m,k=p[g++],u[d++]=k,u[d++]=k,u[d++]=k,u[d++]=o?p[g++]:255,m=g;else for(;d<x;)g=b?4*a[d/4]:m,u[d++]=p[g++],u[d++]=p[g++],u[d++]=p[g++],u[d++]=o?p[g++]:255,m=g},r.prototype.decode=function(){var s;return s=new Uint8Array(this.width*this.height*4),this.copyToImageData(s,this.decodePixels()),s};var i=function(){if(Object.prototype.toString.call(yt)==="[object Window]"){try{e=yt.document.createElement("canvas"),n=e.getContext("2d")}catch{return!1}return!0}return!1};return i(),t=function(s){var a;if(i()===!0)return n.width=s.width,n.height=s.height,n.clearRect(0,0,s.width,s.height),n.putImageData(s,0,0),(a=new Image).src=e.toDataURL(),a;throw new Error("This method requires a Browser with Canvas-capability.")},r.prototype.decodeFrames=function(s){var a,o,l,u,d,p,m,g;if(this.animation){for(g=[],o=d=0,p=(m=this.animation.frames).length;d<p;o=++d)a=m[o],l=s.createImageData(a.width,a.height),u=this.decodePixels(new Uint8Array(a.data)),this.copyToImageData(l,u),a.imageData=l,g.push(a.image=t(l));return g}},r.prototype.renderFrame=function(s,a){var o,l,u;return o=(l=this.animation.frames)[a],u=l[a-1],a===0&&s.clearRect(0,0,this.width,this.height),(u!=null?u.disposeOp:void 0)===1?s.clearRect(u.xOffset,u.yOffset,u.width,u.height):(u!=null?u.disposeOp:void 0)===2&&s.putImageData(u.imageData,u.xOffset,u.yOffset),o.blendOp===0&&s.clearRect(o.xOffset,o.yOffset,o.width,o.height),s.drawImage(o.image,o.xOffset,o.yOffset)},r.prototype.animate=function(s){var a,o,l,u,d,p,m=this;return o=0,p=this.animation,u=p.numFrames,l=p.frames,d=p.numPlays,(a=function(){var g,x;if(g=o++%u,x=l[g],m.renderFrame(s,g),u>1&&o/u<d)return m.animation._timeout=setTimeout(a,x.delay)})()},r.prototype.stopAnimation=function(){var s;return clearTimeout((s=this.animation)!=null?s._timeout:void 0)},r.prototype.render=function(s){var a,o;return s._png&&s._png.stopAnimation(),s._png=this,s.width=this.width,s.height=this.height,a=s.getContext("2d"),this.animation?(this.decodeFrames(a),this.animate(a)):(o=a.createImageData(this.width,this.height),this.copyToImageData(o,this.decodePixels()),a.putImageData(o,0,0))},r}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function TD(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!=56||t[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var n=t[e++]|t[e++]<<8,r=t[e++]|t[e++]<<8,i=t[e++],s=i>>7,a=1<<(7&i)+1;t[e++],t[e++];var o=null,l=null;s&&(o=e,l=a,e+=3*a);var u=!0,d=[],p=0,m=null,g=0,x=null;for(this.width=n,this.height=r;u&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0)e+=14,x=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((A=t[e++])>=0))throw Error("Invalid block size");if(A===0)break;e+=A}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var b=t[e++];p=t[e++]|t[e++]<<8,m=t[e++],!(1&b)&&(m=null),g=b>>2&7,e++;break;case 254:for(;;){if(!((A=t[e++])>=0))throw Error("Invalid block size");if(A===0)break;e+=A}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var k=t[e++]|t[e++]<<8,w=t[e++]|t[e++]<<8,N=t[e++]|t[e++]<<8,j=t[e++]|t[e++]<<8,O=t[e++],Q=O>>6&1,B=1<<(7&O)+1,P=o,y=l,S=!1;O>>7&&(S=!0,P=e,y=B,e+=3*B);var L=e;for(e++;;){var A;if(!((A=t[e++])>=0))throw Error("Invalid block size");if(A===0)break;e+=A}d.push({x:k,y:w,width:N,height:j,has_local_palette:S,palette_offset:P,palette_size:y,data_offset:L,data_length:e-L,transparent_index:m,interlaced:!!Q,delay:p,disposal:g});break;case 59:u=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return d.length},this.loopCount=function(){return x},this.frameInfo=function(T){if(T<0||T>=d.length)throw new Error("Frame index out of range.");return d[T]},this.decodeAndBlitFrameBGRA=function(T,I){var M=this.frameInfo(T),ne=M.width*M.height,V=new Uint8Array(ne);G_(t,M.data_offset,V,ne);var U=M.palette_offset,K=M.transparent_index;K===null&&(K=256);var H=M.width,te=n-H,me=H,R=4*(M.y*n+M.x),$=4*((M.y+M.height)*n+M.x),J=R,W=4*te;M.interlaced===!0&&(W+=4*n*7);for(var ae=8,le=0,ue=V.length;le<ue;++le){var de=V[le];if(me===0&&(me=H,(J+=W)>=$&&(W=4*te+4*n*(ae-1),J=R+(H+te)*(ae<<1),ae>>=1)),de===K)J+=4;else{var ke=t[U+3*de],Ie=t[U+3*de+1],De=t[U+3*de+2];I[J++]=De,I[J++]=Ie,I[J++]=ke,I[J++]=255}--me}},this.decodeAndBlitFrameRGBA=function(T,I){var M=this.frameInfo(T),ne=M.width*M.height,V=new Uint8Array(ne);G_(t,M.data_offset,V,ne);var U=M.palette_offset,K=M.transparent_index;K===null&&(K=256);var H=M.width,te=n-H,me=H,R=4*(M.y*n+M.x),$=4*((M.y+M.height)*n+M.x),J=R,W=4*te;M.interlaced===!0&&(W+=4*n*7);for(var ae=8,le=0,ue=V.length;le<ue;++le){var de=V[le];if(me===0&&(me=H,(J+=W)>=$&&(W=4*te+4*n*(ae-1),J=R+(H+te)*(ae<<1),ae>>=1)),de===K)J+=4;else{var ke=t[U+3*de],Ie=t[U+3*de+1],De=t[U+3*de+2];I[J++]=ke,I[J++]=Ie,I[J++]=De,I[J++]=255}--me}}}function G_(t,e,n,r){for(var i=t[e++],s=1<<i,a=s+1,o=a+1,l=i+1,u=(1<<l)-1,d=0,p=0,m=0,g=t[e++],x=new Int32Array(4096),b=null;;){for(;d<16&&g!==0;)p|=t[e++]<<d,d+=8,g===1?g=t[e++]:--g;if(d<l)break;var k=p&u;if(p>>=l,d-=l,k!==s){if(k===a)break;for(var w=k<o?k:b,N=0,j=w;j>s;)j=x[j]>>8,++N;var O=j;if(m+N+(w!==k?1:0)>r)return void tn.log("Warning, gif stream longer than expected.");n[m++]=O;var Q=m+=N;for(w!==k&&(n[m++]=O),j=w;N--;)j=x[j],n[--Q]=255&j,j>>=8;b!==null&&o<4096&&(x[o++]=b<<8|O,o>=u+1&&l<12&&(++l,u=u<<1|1)),b=k}else o=a+1,u=(1<<(l=i+1))-1,b=null}return m!==r&&tn.log("Warning, gif stream shorter than expected."),n}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function N1(t){var e,n,r,i,s,a=Math.floor,o=new Array(64),l=new Array(64),u=new Array(64),d=new Array(64),p=new Array(65535),m=new Array(65535),g=new Array(64),x=new Array(64),b=[],k=0,w=7,N=new Array(64),j=new Array(64),O=new Array(64),Q=new Array(256),B=new Array(2048),P=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],y=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],S=[0,1,2,3,4,5,6,7,8,9,10,11],L=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],A=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],T=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],I=[0,1,2,3,4,5,6,7,8,9,10,11],M=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],ne=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function V(R,$){for(var J=0,W=0,ae=new Array,le=1;le<=16;le++){for(var ue=1;ue<=R[le];ue++)ae[$[W]]=[],ae[$[W]][0]=J,ae[$[W]][1]=le,W++,J++;J*=2}return ae}function U(R){for(var $=R[0],J=R[1]-1;J>=0;)$&1<<J&&(k|=1<<w),J--,--w<0&&(k==255?(K(255),K(0)):K(k),w=7,k=0)}function K(R){b.push(R)}function H(R){K(R>>8&255),K(255&R)}function te(R,$,J,W,ae){for(var le,ue=ae[0],de=ae[240],ke=function(he,Ee){var Me,Ke,$e,Ge,at,tt,ut,dt,ot,ct,ze=0;for(ot=0;ot<8;++ot){Me=he[ze],Ke=he[ze+1],$e=he[ze+2],Ge=he[ze+3],at=he[ze+4],tt=he[ze+5],ut=he[ze+6];var _e=Me+(dt=he[ze+7]),He=Me-dt,mt=Ke+ut,ft=Ke-ut,Tt=$e+tt,Vn=$e-tt,xt=Ge+at,vr=Ge-at,Bt=_e+xt,Wn=_e-xt,Nn=mt+Tt,Dt=mt-Tt;he[ze]=Bt+Nn,he[ze+4]=Bt-Nn;var lt=.707106781*(Dt+Wn);he[ze+2]=Wn+lt,he[ze+6]=Wn-lt;var Ct=.382683433*((Bt=vr+Vn)-(Dt=ft+He)),Rr=.5411961*Bt+Ct,Jt=1.306562965*Dt+Ct,mn=.707106781*(Nn=Vn+ft),di=He+mn,nt=He-mn;he[ze+5]=nt+Rr,he[ze+3]=nt-Rr,he[ze+1]=di+Jt,he[ze+7]=di-Jt,ze+=8}for(ze=0,ot=0;ot<8;++ot){Me=he[ze],Ke=he[ze+8],$e=he[ze+16],Ge=he[ze+24],at=he[ze+32],tt=he[ze+40],ut=he[ze+48];var Qr=Me+(dt=he[ze+56]),yr=Me-dt,Un=Ke+ut,Cn=Ke-ut,An=$e+tt,Bn=$e-tt,Ua=Ge+at,$i=Ge-at,wr=Qr+Ua,Yr=Qr-Ua,Dr=Un+An,Fr=Un-An;he[ze]=wr+Dr,he[ze+32]=wr-Dr;var Pn=.707106781*(Fr+Yr);he[ze+16]=Yr+Pn,he[ze+48]=Yr-Pn;var fi=.382683433*((wr=$i+Bn)-(Fr=Cn+yr)),ws=.5411961*wr+fi,_s=1.306562965*Fr+fi,bs=.707106781*(Dr=Bn+Cn),ea=yr+bs,ta=yr-bs;he[ze+40]=ta+ws,he[ze+24]=ta-ws,he[ze+8]=ea+_s,he[ze+56]=ea-_s,ze++}for(ot=0;ot<64;++ot)ct=he[ot]*Ee[ot],g[ot]=ct>0?ct+.5|0:ct-.5|0;return g}(R,$),Ie=0;Ie<64;++Ie)x[P[Ie]]=ke[Ie];var De=x[0]-J;J=x[0],De==0?U(W[0]):(U(W[m[le=32767+De]]),U(p[le]));for(var Le=63;Le>0&&x[Le]==0;)Le--;if(Le==0)return U(ue),J;for(var Xe,be=1;be<=Le;){for(var oe=be;x[be]==0&&be<=Le;)++be;var We=be-oe;if(We>=16){Xe=We>>4;for(var Fe=1;Fe<=Xe;++Fe)U(de);We&=15}le=32767+x[be],U(ae[(We<<4)+m[le]]),U(p[le]),be++}return Le!=63&&U(ue),J}function me(R){R=Math.min(Math.max(R,1),100),s!=R&&(function($){for(var J=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],W=0;W<64;W++){var ae=a((J[W]*$+50)/100);ae=Math.min(Math.max(ae,1),255),o[P[W]]=ae}for(var le=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],ue=0;ue<64;ue++){var de=a((le[ue]*$+50)/100);de=Math.min(Math.max(de,1),255),l[P[ue]]=de}for(var ke=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Ie=0,De=0;De<8;De++)for(var Le=0;Le<8;Le++)u[Ie]=1/(o[P[Ie]]*ke[De]*ke[Le]*8),d[Ie]=1/(l[P[Ie]]*ke[De]*ke[Le]*8),Ie++}(R<50?Math.floor(5e3/R):Math.floor(200-2*R)),s=R)}this.encode=function(R,$){$&&me($),b=new Array,k=0,w=7,H(65496),H(65504),H(16),K(74),K(70),K(73),K(70),K(0),K(1),K(1),K(0),H(1),H(1),K(0),K(0),function(){H(65499),H(132),K(0);for(var Ke=0;Ke<64;Ke++)K(o[Ke]);K(1);for(var $e=0;$e<64;$e++)K(l[$e])}(),function(Ke,$e){H(65472),H(17),K(8),H($e),H(Ke),K(3),K(1),K(17),K(0),K(2),K(17),K(1),K(3),K(17),K(1)}(R.width,R.height),function(){H(65476),H(418),K(0);for(var Ke=0;Ke<16;Ke++)K(y[Ke+1]);for(var $e=0;$e<=11;$e++)K(S[$e]);K(16);for(var Ge=0;Ge<16;Ge++)K(L[Ge+1]);for(var at=0;at<=161;at++)K(A[at]);K(1);for(var tt=0;tt<16;tt++)K(T[tt+1]);for(var ut=0;ut<=11;ut++)K(I[ut]);K(17);for(var dt=0;dt<16;dt++)K(M[dt+1]);for(var ot=0;ot<=161;ot++)K(ne[ot])}(),H(65498),H(12),K(3),K(1),K(0),K(2),K(17),K(3),K(17),K(0),K(63),K(0);var J=0,W=0,ae=0;k=0,w=7,this.encode.displayName="_encode_";for(var le,ue,de,ke,Ie,De,Le,Xe,be,oe=R.data,We=R.width,Fe=R.height,he=4*We,Ee=0;Ee<Fe;){for(le=0;le<he;){for(Ie=he*Ee+le,Le=-1,Xe=0,be=0;be<64;be++)De=Ie+(Xe=be>>3)*he+(Le=4*(7&be)),Ee+Xe>=Fe&&(De-=he*(Ee+1+Xe-Fe)),le+Le>=he&&(De-=le+Le-he+4),ue=oe[De++],de=oe[De++],ke=oe[De++],N[be]=(B[ue]+B[de+256>>0]+B[ke+512>>0]>>16)-128,j[be]=(B[ue+768>>0]+B[de+1024>>0]+B[ke+1280>>0]>>16)-128,O[be]=(B[ue+1280>>0]+B[de+1536>>0]+B[ke+1792>>0]>>16)-128;J=te(N,u,J,e,r),W=te(j,d,W,n,i),ae=te(O,d,ae,n,i),le+=32}Ee+=8}if(w>=0){var Me=[];Me[1]=w+1,Me[0]=(1<<w+1)-1,U(Me)}return H(65497),new Uint8Array(b)},t=t||50,function(){for(var R=String.fromCharCode,$=0;$<256;$++)Q[$]=R($)}(),e=V(y,S),n=V(T,I),r=V(L,A),i=V(M,ne),function(){for(var R=1,$=2,J=1;J<=15;J++){for(var W=R;W<$;W++)m[32767+W]=J,p[32767+W]=[],p[32767+W][1]=J,p[32767+W][0]=W;for(var ae=-($-1);ae<=-R;ae++)m[32767+ae]=J,p[32767+ae]=[],p[32767+ae][1]=J,p[32767+ae][0]=$-1+ae;R<<=1,$<<=1}}(),function(){for(var R=0;R<256;R++)B[R]=19595*R,B[R+256>>0]=38470*R,B[R+512>>0]=7471*R+32768,B[R+768>>0]=-11059*R,B[R+1024>>0]=-21709*R,B[R+1280>>0]=32768*R+8421375,B[R+1536>>0]=-27439*R,B[R+1792>>0]=-5329*R}(),me(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function is(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function Q_(t){function e(y){if(!y)throw Error("assert :P")}function n(y,S,L){for(var A=0;4>A;A++)if(y[S+A]!=L.charCodeAt(A))return!0;return!1}function r(y,S,L,A,T){for(var I=0;I<T;I++)y[S+I]=L[A+I]}function i(y,S,L,A){for(var T=0;T<A;T++)y[S+T]=L}function s(y){return new Int32Array(y)}function a(y,S){for(var L=[],A=0;A<y;A++)L.push(new S);return L}function o(y,S){var L=[];return function A(T,I,M){for(var ne=M[I],V=0;V<ne&&(T.push(M.length>I+1?[]:new S),!(M.length<I+1));V++)A(T[V],I+1,M)}(L,0,y),L}var l=function(){var y=this;function S(h,v){for(var E=1<<v-1>>>0;h&E;)E>>>=1;return E?(h&E-1)+E:h}function L(h,v,E,D,z){e(!(D%E));do h[v+(D-=E)]=z;while(0<D)}function A(h,v,E,D,z){if(e(2328>=z),512>=z)var G=s(512);else if((G=s(z))==null)return 0;return function(Y,Z,ee,re,fe,xe){var Se,we,je=Z,Ae=1<<ee,pe=s(16),ge=s(16);for(e(fe!=0),e(re!=null),e(Y!=null),e(0<ee),we=0;we<fe;++we){if(15<re[we])return 0;++pe[re[we]]}if(pe[0]==fe)return 0;for(ge[1]=0,Se=1;15>Se;++Se){if(pe[Se]>1<<Se)return 0;ge[Se+1]=ge[Se]+pe[Se]}for(we=0;we<fe;++we)Se=re[we],0<re[we]&&(xe[ge[Se]++]=we);if(ge[15]==1)return(re=new T).g=0,re.value=xe[0],L(Y,je,1,Ae,re),Ae;var Ce,Oe=-1,Pe=Ae-1,Ze=0,Qe=1,pt=1,Je=1<<ee;for(we=0,Se=1,fe=2;Se<=ee;++Se,fe<<=1){if(Qe+=pt<<=1,0>(pt-=pe[Se]))return 0;for(;0<pe[Se];--pe[Se])(re=new T).g=Se,re.value=xe[we++],L(Y,je+Ze,fe,Je,re),Ze=S(Ze,Se)}for(Se=ee+1,fe=2;15>=Se;++Se,fe<<=1){if(Qe+=pt<<=1,0>(pt-=pe[Se]))return 0;for(;0<pe[Se];--pe[Se]){if(re=new T,(Ze&Pe)!=Oe){for(je+=Je,Ce=1<<(Oe=Se)-ee;15>Oe&&!(0>=(Ce-=pe[Oe]));)++Oe,Ce<<=1;Ae+=Je=1<<(Ce=Oe-ee),Y[Z+(Oe=Ze&Pe)].g=Ce+ee,Y[Z+Oe].value=je-Z-Oe}re.g=Se-ee,re.value=xe[we++],L(Y,je+(Ze>>ee),fe,Je,re),Ze=S(Ze,Se)}}return Qe!=2*ge[15]-1?0:Ae}(h,v,E,D,z,G)}function T(){this.value=this.g=0}function I(){this.value=this.g=0}function M(){this.G=a(5,T),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=a(or,I)}function ne(h,v,E,D){e(h!=null),e(v!=null),e(2147483648>D),h.Ca=254,h.I=0,h.b=-8,h.Ka=0,h.oa=v,h.pa=E,h.Jd=v,h.Yc=E+D,h.Zc=4<=D?E+D-4+1:E,le(h)}function V(h,v){for(var E=0;0<v--;)E|=de(h,128)<<v;return E}function U(h,v){var E=V(h,v);return ue(h)?-E:E}function K(h,v,E,D){var z,G=0;for(e(h!=null),e(v!=null),e(4294967288>D),h.Sb=D,h.Ra=0,h.u=0,h.h=0,4<D&&(D=4),z=0;z<D;++z)G+=v[E+z]<<8*z;h.Ra=G,h.bb=D,h.oa=v,h.pa=E}function H(h){for(;8<=h.u&&h.bb<h.Sb;)h.Ra>>>=8,h.Ra+=h.oa[h.pa+h.bb]<<Nc-8>>>0,++h.bb,h.u-=8;J(h)&&(h.h=1,h.u=0)}function te(h,v){if(e(0<=v),!h.h&&v<=Sc){var E=$(h)&xc[v];return h.u+=v,H(h),E}return h.h=1,h.u=0}function me(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function R(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function $(h){return h.Ra>>>(h.u&Nc-1)>>>0}function J(h){return e(h.bb<=h.Sb),h.h||h.bb==h.Sb&&h.u>Nc}function W(h,v){h.u=v,h.h=J(h)}function ae(h){h.u>=th&&(e(h.u>=th),H(h))}function le(h){e(h!=null&&h.oa!=null),h.pa<h.Zc?(h.I=(h.oa[h.pa++]|h.I<<8)>>>0,h.b+=8):(e(h!=null&&h.oa!=null),h.pa<h.Yc?(h.b+=8,h.I=h.oa[h.pa++]|h.I<<8):h.Ka?h.b=0:(h.I<<=8,h.b+=8,h.Ka=1))}function ue(h){return V(h,1)}function de(h,v){var E=h.Ca;0>h.b&&le(h);var D=h.b,z=E*v>>>8,G=(h.I>>>D>z)+0;for(G?(E-=z,h.I-=z+1<<D>>>0):E=z+1,D=E,z=0;256<=D;)z+=8,D>>=8;return D=7^z+Xr[D],h.b-=D,h.Ca=(E<<D)-1,G}function ke(h,v,E){h[v+0]=E>>24&255,h[v+1]=E>>16&255,h[v+2]=E>>8&255,h[v+3]=E>>0&255}function Ie(h,v){return h[v+0]<<0|h[v+1]<<8}function De(h,v){return Ie(h,v)|h[v+2]<<16}function Le(h,v){return Ie(h,v)|Ie(h,v+2)<<16}function Xe(h,v){var E=1<<v;return e(h!=null),e(0<v),h.X=s(E),h.X==null?0:(h.Mb=32-v,h.Xa=v,1)}function be(h,v){e(h!=null),e(v!=null),e(h.Xa==v.Xa),r(v.X,0,h.X,0,1<<v.Xa)}function oe(){this.X=[],this.Xa=this.Mb=0}function We(h,v,E,D){e(E!=null),e(D!=null);var z=E[0],G=D[0];return z==0&&(z=(h*G+v/2)/v),G==0&&(G=(v*z+h/2)/h),0>=z||0>=G?0:(E[0]=z,D[0]=G,1)}function Fe(h,v){return h+(1<<v)-1>>>v}function he(h,v){return((4278255360&h)+(4278255360&v)>>>0&4278255360)+((16711935&h)+(16711935&v)>>>0&16711935)>>>0}function Ee(h,v){y[v]=function(E,D,z,G,Y,Z,ee){var re;for(re=0;re<Y;++re){var fe=y[h](Z[ee+re-1],z,G+re);Z[ee+re]=he(E[D+re],fe)}}}function Me(){this.ud=this.hd=this.jd=0}function Ke(h,v){return((4278124286&(h^v))>>>1)+(h&v)>>>0}function $e(h){return 0<=h&&256>h?h:0>h?0:255<h?255:void 0}function Ge(h,v){return $e(h+(h-v+.5>>1))}function at(h,v,E){return Math.abs(v-E)-Math.abs(h-E)}function tt(h,v,E,D,z,G,Y){for(D=G[Y-1],E=0;E<z;++E)G[Y+E]=D=he(h[v+E],D)}function ut(h,v,E,D,z){var G;for(G=0;G<E;++G){var Y=h[v+G],Z=Y>>8&255,ee=16711935&(ee=(ee=16711935&Y)+((Z<<16)+Z));D[z+G]=(4278255360&Y)+ee>>>0}}function dt(h,v){v.jd=h>>0&255,v.hd=h>>8&255,v.ud=h>>16&255}function ot(h,v,E,D,z,G){var Y;for(Y=0;Y<D;++Y){var Z=v[E+Y],ee=Z>>>8,re=Z,fe=255&(fe=(fe=Z>>>16)+((h.jd<<24>>24)*(ee<<24>>24)>>>5));re=255&(re=(re=re+((h.hd<<24>>24)*(ee<<24>>24)>>>5))+((h.ud<<24>>24)*(fe<<24>>24)>>>5)),z[G+Y]=(4278255360&Z)+(fe<<16)+re}}function ct(h,v,E,D,z){y[v]=function(G,Y,Z,ee,re,fe,xe,Se,we){for(ee=xe;ee<Se;++ee)for(xe=0;xe<we;++xe)re[fe++]=z(Z[D(G[Y++])])},y[h]=function(G,Y,Z,ee,re,fe,xe){var Se=8>>G.b,we=G.Ea,je=G.K[0],Ae=G.w;if(8>Se)for(G=(1<<G.b)-1,Ae=(1<<Se)-1;Y<Z;++Y){var pe,ge=0;for(pe=0;pe<we;++pe)pe&G||(ge=D(ee[re++])),fe[xe++]=z(je[ge&Ae]),ge>>=Se}else y["VP8LMapColor"+E](ee,re,je,Ae,fe,xe,Y,Z,we)}}function ze(h,v,E,D,z){for(E=v+E;v<E;){var G=h[v++];D[z++]=G>>16&255,D[z++]=G>>8&255,D[z++]=G>>0&255}}function _e(h,v,E,D,z){for(E=v+E;v<E;){var G=h[v++];D[z++]=G>>16&255,D[z++]=G>>8&255,D[z++]=G>>0&255,D[z++]=G>>24&255}}function He(h,v,E,D,z){for(E=v+E;v<E;){var G=(Y=h[v++])>>16&240|Y>>12&15,Y=Y>>0&240|Y>>28&15;D[z++]=G,D[z++]=Y}}function mt(h,v,E,D,z){for(E=v+E;v<E;){var G=(Y=h[v++])>>16&248|Y>>13&7,Y=Y>>5&224|Y>>3&31;D[z++]=G,D[z++]=Y}}function ft(h,v,E,D,z){for(E=v+E;v<E;){var G=h[v++];D[z++]=G>>0&255,D[z++]=G>>8&255,D[z++]=G>>16&255}}function Tt(h,v,E,D,z,G){if(G==0)for(E=v+E;v<E;)ke(D,((G=h[v++])[0]>>24|G[1]>>8&65280|G[2]<<8&16711680|G[3]<<24)>>>0),z+=32;else r(D,z,h,v,E)}function Vn(h,v){y[v][0]=y[h+"0"],y[v][1]=y[h+"1"],y[v][2]=y[h+"2"],y[v][3]=y[h+"3"],y[v][4]=y[h+"4"],y[v][5]=y[h+"5"],y[v][6]=y[h+"6"],y[v][7]=y[h+"7"],y[v][8]=y[h+"8"],y[v][9]=y[h+"9"],y[v][10]=y[h+"10"],y[v][11]=y[h+"11"],y[v][12]=y[h+"12"],y[v][13]=y[h+"13"],y[v][14]=y[h+"0"],y[v][15]=y[h+"0"]}function xt(h){return h==pg||h==mg||h==rf||h==gg}function vr(){this.eb=[],this.size=this.A=this.fb=0}function Bt(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Wn(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new vr,this.f.kb=new Bt,this.sd=null}function Nn(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Dt(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function lt(h){return alert("todo:WebPSamplerProcessPlane"),h.T}function Ct(h,v){var E=h.T,D=v.ba.f.RGBA,z=D.eb,G=D.fb+h.ka*D.A,Y=Di[v.ba.S],Z=h.y,ee=h.O,re=h.f,fe=h.N,xe=h.ea,Se=h.W,we=v.cc,je=v.dc,Ae=v.Mc,pe=v.Nc,ge=h.ka,Ce=h.ka+h.T,Oe=h.U,Pe=Oe+1>>1;for(ge==0?Y(Z,ee,null,null,re,fe,xe,Se,re,fe,xe,Se,z,G,null,null,Oe):(Y(v.ec,v.fc,Z,ee,we,je,Ae,pe,re,fe,xe,Se,z,G-D.A,z,G,Oe),++E);ge+2<Ce;ge+=2)we=re,je=fe,Ae=xe,pe=Se,fe+=h.Rc,Se+=h.Rc,G+=2*D.A,Y(Z,(ee+=2*h.fa)-h.fa,Z,ee,we,je,Ae,pe,re,fe,xe,Se,z,G-D.A,z,G,Oe);return ee+=h.fa,h.j+Ce<h.o?(r(v.ec,v.fc,Z,ee,Oe),r(v.cc,v.dc,re,fe,Pe),r(v.Mc,v.Nc,xe,Se,Pe),E--):1&Ce||Y(Z,ee,null,null,re,fe,xe,Se,re,fe,xe,Se,z,G+D.A,null,null,Oe),E}function Rr(h,v,E){var D=h.F,z=[h.J];if(D!=null){var G=h.U,Y=v.ba.S,Z=Y==nf||Y==rf;v=v.ba.f.RGBA;var ee=[0],re=h.ka;ee[0]=h.T,h.Kb&&(re==0?--ee[0]:(--re,z[0]-=h.width),h.j+h.ka+h.T==h.o&&(ee[0]=h.o-h.j-re));var fe=v.eb;re=v.fb+re*v.A,h=rn(D,z[0],h.width,G,ee,fe,re+(Z?0:3),v.A),e(E==ee),h&&xt(Y)&&Li(fe,re,Z,G,ee,v.A)}return 0}function Jt(h){var v=h.ma,E=v.ba.S,D=11>E,z=E==ef||E==tf||E==nf||E==fg||E==12||xt(E);if(v.memory=null,v.Ib=null,v.Jb=null,v.Nd=null,!Zu(v.Oa,h,z?11:12))return 0;if(z&&xt(E)&&Ve(),h.da)alert("todo:use_scaling");else{if(D){if(v.Ib=lt,h.Kb){if(E=h.U+1>>1,v.memory=s(h.U+2*E),v.memory==null)return 0;v.ec=v.memory,v.fc=0,v.cc=v.ec,v.dc=v.fc+h.U,v.Mc=v.cc,v.Nc=v.dc+E,v.Ib=Ct,Ve()}}else alert("todo:EmitYUV");z&&(v.Jb=Rr,D&&ye())}if(D&&!Ty){for(h=0;256>h;++h)AA[h]=89858*(h-128)+af>>sf,TA[h]=-22014*(h-128)+af,kA[h]=-45773*(h-128),EA[h]=113618*(h-128)+af>>sf;for(h=lh;h<wg;++h)v=76283*(h-16)+af>>sf,IA[h-lh]=zt(v,255),CA[h-lh]=zt(v+8>>4,15);Ty=1}return 1}function mn(h){var v=h.ma,E=h.U,D=h.T;return e(!(1&h.ka)),0>=E||0>=D?0:(E=v.Ib(h,v),v.Jb!=null&&v.Jb(h,v,E),v.Dc+=E,1)}function di(h){h.ma.memory=null}function nt(h,v,E,D){return te(h,8)!=47?0:(v[0]=te(h,14)+1,E[0]=te(h,14)+1,D[0]=te(h,1),te(h,3)!=0?0:!h.h)}function Qr(h,v){if(4>h)return h+1;var E=h-2>>1;return(2+(1&h)<<E)+te(v,E)+1}function yr(h,v){return 120<v?v-120:1<=(E=((E=hA[v-1])>>4)*h+(8-(15&E)))?E:1;var E}function Un(h,v,E){var D=$(E),z=h[v+=255&D].g-8;return 0<z&&(W(E,E.u+8),D=$(E),v+=h[v].value,v+=D&(1<<z)-1),W(E,E.u+h[v].g),h[v].value}function Cn(h,v,E){return E.g+=h.g,E.value+=h.value<<v>>>0,e(8>=E.g),h.g}function An(h,v,E){var D=h.xc;return e((v=D==0?0:h.vc[h.md*(E>>D)+(v>>D)])<h.Wb),h.Ya[v]}function Bn(h,v,E,D){var z=h.ab,G=h.c*v,Y=h.C;v=Y+v;var Z=E,ee=D;for(D=h.Ta,E=h.Ua;0<z--;){var re=h.gc[z],fe=Y,xe=v,Se=Z,we=ee,je=(ee=D,Z=E,re.Ea);switch(e(fe<xe),e(xe<=re.nc),re.hc){case 2:Wd(Se,we,(xe-fe)*je,ee,Z);break;case 0:var Ae=fe,pe=xe,ge=ee,Ce=Z,Oe=(Je=re).Ea;Ae==0&&(hg(Se,we,null,null,1,ge,Ce),tt(Se,we+1,0,0,Oe-1,ge,Ce+1),we+=Oe,Ce+=Oe,++Ae);for(var Pe=1<<Je.b,Ze=Pe-1,Qe=Fe(Oe,Je.b),pt=Je.K,Je=Je.w+(Ae>>Je.b)*Qe;Ae<pe;){var Kt=pt,Ht=Je,Mt=1;for(nh(Se,we,ge,Ce-Oe,1,ge,Ce);Mt<Oe;){var Lt=(Mt&~Ze)+Pe;Lt>Oe&&(Lt=Oe),(0,io[Kt[Ht++]>>8&15])(Se,we+ +Mt,ge,Ce+Mt-Oe,Lt-Mt,ge,Ce+Mt),Mt=Lt}we+=Oe,Ce+=Oe,++Ae&Ze||(Je+=Qe)}xe!=re.nc&&r(ee,Z-je,ee,Z+(xe-fe-1)*je,je);break;case 1:for(je=Se,pe=we,Oe=(Se=re.Ea)-(Ce=Se&~(ge=(we=1<<re.b)-1)),Ae=Fe(Se,re.b),Pe=re.K,re=re.w+(fe>>re.b)*Ae;fe<xe;){for(Ze=Pe,Qe=re,pt=new Me,Je=pe+Ce,Kt=pe+Se;pe<Je;)dt(Ze[Qe++],pt),_l(pt,je,pe,we,ee,Z),pe+=we,Z+=we;pe<Kt&&(dt(Ze[Qe++],pt),_l(pt,je,pe,Oe,ee,Z),pe+=Oe,Z+=Oe),++fe&ge||(re+=Ae)}break;case 3:if(Se==ee&&we==Z&&0<re.b){for(pe=ee,Se=je=Z+(xe-fe)*je-(Ce=(xe-fe)*Fe(re.Ea,re.b)),we=ee,ge=Z,Ae=[],Ce=(Oe=Ce)-1;0<=Ce;--Ce)Ae[Ce]=we[ge+Ce];for(Ce=Oe-1;0<=Ce;--Ce)pe[Se+Ce]=Ae[Ce];Ci(re,fe,xe,ee,je,ee,Z)}else Ci(re,fe,xe,Se,we,ee,Z)}Z=D,ee=E}ee!=E&&r(D,E,Z,ee,G)}function Ua(h,v){var E=h.V,D=h.Ba+h.c*h.C,z=v-h.C;if(e(v<=h.l.o),e(16>=z),0<z){var G=h.l,Y=h.Ta,Z=h.Ua,ee=G.width;if(Bn(h,z,E,D),z=Z=[Z],e((E=h.C)<(D=v)),e(G.v<G.va),D>G.o&&(D=G.o),E<G.j){var re=G.j-E;E=G.j,z[0]+=re*ee}if(E>=D?E=0:(z[0]+=4*G.v,G.ka=E-G.j,G.U=G.va-G.v,G.T=D-E,E=1),E){if(Z=Z[0],11>(E=h.ca).S){var fe=E.f.RGBA,xe=(D=E.S,z=G.U,G=G.T,re=fe.eb,fe.A),Se=G;for(fe=fe.fb+h.Ma*fe.A;0<Se--;){var we=Y,je=Z,Ae=z,pe=re,ge=fe;switch(D){case Zd:Zr(we,je,Ae,pe,ge);break;case ef:Mr(we,je,Ae,pe,ge);break;case pg:Mr(we,je,Ae,pe,ge),Li(pe,ge,0,Ae,1,0);break;case wy:da(we,je,Ae,pe,ge);break;case tf:Tt(we,je,Ae,pe,ge,1);break;case mg:Tt(we,je,Ae,pe,ge,1),Li(pe,ge,0,Ae,1,0);break;case nf:Tt(we,je,Ae,pe,ge,0);break;case rf:Tt(we,je,Ae,pe,ge,0),Li(pe,ge,1,Ae,1,0);break;case fg:so(we,je,Ae,pe,ge);break;case gg:so(we,je,Ae,pe,ge),nn(pe,ge,Ae,1,0);break;case _y:ha(we,je,Ae,pe,ge);break;default:e(0)}Z+=ee,fe+=xe}h.Ma+=G}else alert("todo:EmitRescaledRowsYUVA");e(h.Ma<=E.height)}}h.C=v,e(h.C<=h.i)}function $i(h){var v;if(0<h.ua)return 0;for(v=0;v<h.Wb;++v){var E=h.Ya[v].G,D=h.Ya[v].H;if(0<E[1][D[1]+0].g||0<E[2][D[2]+0].g||0<E[3][D[3]+0].g)return 0}return 1}function wr(h,v,E,D,z,G){if(h.Z!=0){var Y=h.qd,Z=h.rd;for(e(co[h.Z]!=null);v<E;++v)co[h.Z](Y,Z,D,z,D,z,G),Y=D,Z=z,z+=G;h.qd=Y,h.rd=Z}}function Yr(h,v){var E=h.l.ma,D=E.Z==0||E.Z==1?h.l.j:h.C;if(D=h.C<D?D:h.C,e(v<=h.l.o),v>D){var z=h.l.width,G=E.ca,Y=E.tb+z*D,Z=h.V,ee=h.Ba+h.c*D,re=h.gc;e(h.ab==1),e(re[0].hc==3),Gd(re[0],D,v,Z,ee,G,Y),wr(E,D,v,G,Y,z)}h.C=h.Ma=v}function Dr(h,v,E,D,z,G,Y){var Z=h.$/D,ee=h.$%D,re=h.m,fe=h.s,xe=E+h.$,Se=xe;z=E+D*z;var we=E+D*G,je=280+fe.ua,Ae=h.Pb?Z:16777216,pe=0<fe.ua?fe.Wa:null,ge=fe.wc,Ce=xe<we?An(fe,ee,Z):null;e(h.C<G),e(we<=z);var Oe=!1;e:for(;;){for(;Oe||xe<we;){var Pe=0;if(Z>=Ae){var Ze=xe-E;e((Ae=h).Pb),Ae.wd=Ae.m,Ae.xd=Ze,0<Ae.s.ua&&be(Ae.s.Wa,Ae.s.vb),Ae=Z+fA}if(ee&ge||(Ce=An(fe,ee,Z)),e(Ce!=null),Ce.Qb&&(v[xe]=Ce.qb,Oe=!0),!Oe)if(ae(re),Ce.jc){Pe=re,Ze=v;var Qe=xe,pt=Ce.pd[$(Pe)&or-1];e(Ce.jc),256>pt.g?(W(Pe,Pe.u+pt.g),Ze[Qe]=pt.value,Pe=0):(W(Pe,Pe.u+pt.g-256),e(256<=pt.value),Pe=pt.value),Pe==0&&(Oe=!0)}else Pe=Un(Ce.G[0],Ce.H[0],re);if(re.h)break;if(Oe||256>Pe){if(!Oe)if(Ce.nd)v[xe]=(Ce.qb|Pe<<8)>>>0;else{if(ae(re),Oe=Un(Ce.G[1],Ce.H[1],re),ae(re),Ze=Un(Ce.G[2],Ce.H[2],re),Qe=Un(Ce.G[3],Ce.H[3],re),re.h)break;v[xe]=(Qe<<24|Oe<<16|Pe<<8|Ze)>>>0}if(Oe=!1,++xe,++ee>=D&&(ee=0,++Z,Y!=null&&Z<=G&&!(Z%16)&&Y(h,Z),pe!=null))for(;Se<xe;)Pe=v[Se++],pe.X[(506832829*Pe&4294967295)>>>pe.Mb]=Pe}else if(280>Pe){if(Pe=Qr(Pe-256,re),Ze=Un(Ce.G[4],Ce.H[4],re),ae(re),Ze=yr(D,Ze=Qr(Ze,re)),re.h)break;if(xe-E<Ze||z-xe<Pe)break e;for(Qe=0;Qe<Pe;++Qe)v[xe+Qe]=v[xe+Qe-Ze];for(xe+=Pe,ee+=Pe;ee>=D;)ee-=D,++Z,Y!=null&&Z<=G&&!(Z%16)&&Y(h,Z);if(e(xe<=z),ee&ge&&(Ce=An(fe,ee,Z)),pe!=null)for(;Se<xe;)Pe=v[Se++],pe.X[(506832829*Pe&4294967295)>>>pe.Mb]=Pe}else{if(!(Pe<je))break e;for(Oe=Pe-280,e(pe!=null);Se<xe;)Pe=v[Se++],pe.X[(506832829*Pe&4294967295)>>>pe.Mb]=Pe;Pe=xe,e(!(Oe>>>(Ze=pe).Xa)),v[Pe]=Ze.X[Oe],Oe=!0}Oe||e(re.h==J(re))}if(h.Pb&&re.h&&xe<z)e(h.m.h),h.a=5,h.m=h.wd,h.$=h.xd,0<h.s.ua&&be(h.s.vb,h.s.Wa);else{if(re.h)break e;Y!=null&&Y(h,Z>G?G:Z),h.a=0,h.$=xe-E}return 1}return h.a=3,0}function Fr(h){e(h!=null),h.vc=null,h.yc=null,h.Ya=null;var v=h.Wa;v!=null&&(v.X=null),h.vb=null,e(h!=null)}function Pn(){var h=new _c;return h==null?null:(h.a=0,h.xb=Sy,Vn("Predictor","VP8LPredictors"),Vn("Predictor","VP8LPredictors_C"),Vn("PredictorAdd","VP8LPredictorsAdd"),Vn("PredictorAdd","VP8LPredictorsAdd_C"),Wd=ut,_l=ot,Zr=ze,Mr=_e,so=He,ha=mt,da=ft,y.VP8LMapColor32b=Ac,y.VP8LMapColor8b=Qd,h)}function fi(h,v,E,D,z){var G=1,Y=[h],Z=[v],ee=D.m,re=D.s,fe=null,xe=0;e:for(;;){if(E)for(;G&&te(ee,1);){var Se=Y,we=Z,je=D,Ae=1,pe=je.m,ge=je.gc[je.ab],Ce=te(pe,2);if(je.Oc&1<<Ce)G=0;else{switch(je.Oc|=1<<Ce,ge.hc=Ce,ge.Ea=Se[0],ge.nc=we[0],ge.K=[null],++je.ab,e(4>=je.ab),Ce){case 0:case 1:ge.b=te(pe,3)+2,Ae=fi(Fe(ge.Ea,ge.b),Fe(ge.nc,ge.b),0,je,ge.K),ge.K=ge.K[0];break;case 3:var Oe,Pe=te(pe,8)+1,Ze=16<Pe?0:4<Pe?1:2<Pe?2:3;if(Se[0]=Fe(ge.Ea,Ze),ge.b=Ze,Oe=Ae=fi(Pe,1,0,je,ge.K)){var Qe,pt=Pe,Je=ge,Kt=1<<(8>>Je.b),Ht=s(Kt);if(Ht==null)Oe=0;else{var Mt=Je.K[0],Lt=Je.w;for(Ht[0]=Je.K[0][0],Qe=1;Qe<1*pt;++Qe)Ht[Qe]=he(Mt[Lt+Qe],Ht[Qe-1]);for(;Qe<4*Kt;++Qe)Ht[Qe]=0;Je.K[0]=null,Je.K[0]=Ht,Oe=1}}Ae=Oe;break;case 2:break;default:e(0)}G=Ae}}if(Y=Y[0],Z=Z[0],G&&te(ee,1)&&!(G=1<=(xe=te(ee,4))&&11>=xe)){D.a=3;break e}var en;if(en=G)t:{var Xt,It,Kn,ei=D,qn=Y,ti=Z,Wt=xe,yi=E,wi=ei.m,Zn=ei.s,lr=[null],Ur=1,Fi=0,Ps=dA[Wt];n:for(;;){if(yi&&te(wi,1)){var er=te(wi,3)+2,ga=Fe(qn,er),Al=Fe(ti,er),Cc=ga*Al;if(!fi(ga,Al,0,ei,lr))break n;for(lr=lr[0],Zn.xc=er,Xt=0;Xt<Cc;++Xt){var uo=lr[Xt]>>8&65535;lr[Xt]=uo,uo>=Ur&&(Ur=uo+1)}}if(wi.h)break n;for(It=0;5>It;++It){var kn=by[It];!It&&0<Wt&&(kn+=1<<Wt),Fi<kn&&(Fi=kn)}var _g=a(Ur*Ps,T),Py=Ur,jy=a(Py,M);if(jy==null)var lf=null;else e(65536>=Py),lf=jy;var ch=s(Fi);if(lf==null||ch==null||_g==null){ei.a=1;break n}var cf=_g;for(Xt=Kn=0;Xt<Ur;++Xt){var ts=lf[Xt],Pc=ts.G,jc=ts.H,Ly=0,uf=1,Ry=0;for(It=0;5>It;++It){kn=by[It],Pc[It]=cf,jc[It]=Kn,!It&&0<Wt&&(kn+=1<<Wt);i:{var hf,bg=kn,df=ei,uh=ch,LA=cf,RA=Kn,xg=0,ho=df.m,DA=te(ho,1);if(i(uh,0,0,bg),DA){var FA=te(ho,1)+1,OA=te(ho,1),Dy=te(ho,OA==0?1:8);uh[Dy]=1,FA==2&&(uh[Dy=te(ho,8)]=1);var ff=1}else{var Fy=s(19),Oy=te(ho,4)+4;if(19<Oy){df.a=3;var pf=0;break i}for(hf=0;hf<Oy;++hf)Fy[uA[hf]]=te(ho,3);var Sg=void 0,hh=void 0,My=df,MA=Fy,mf=bg,Vy=uh,Ng=0,fo=My.m,Uy=8,By=a(128,T);r:for(;A(By,0,7,MA,19);){if(te(fo,1)){var VA=2+2*te(fo,3);if((Sg=2+te(fo,VA))>mf)break r}else Sg=mf;for(hh=0;hh<mf&&Sg--;){ae(fo);var Ky=By[0+(127&$(fo))];W(fo,fo.u+Ky.g);var Lc=Ky.value;if(16>Lc)Vy[hh++]=Lc,Lc!=0&&(Uy=Lc);else{var UA=Lc==16,qy=Lc-16,BA=lA[qy],zy=te(fo,oA[qy])+BA;if(hh+zy>mf)break r;for(var KA=UA?Uy:0;0<zy--;)Vy[hh++]=KA}}Ng=1;break r}Ng||(My.a=3),ff=Ng}(ff=ff&&!ho.h)&&(xg=A(LA,RA,8,uh,bg)),ff&&xg!=0?pf=xg:(df.a=3,pf=0)}if(pf==0)break n;if(uf&&cA[It]==1&&(uf=cf[Kn].g==0),Ly+=cf[Kn].g,Kn+=pf,3>=It){var dh,Ag=ch[0];for(dh=1;dh<kn;++dh)ch[dh]>Ag&&(Ag=ch[dh]);Ry+=Ag}}if(ts.nd=uf,ts.Qb=0,uf&&(ts.qb=(Pc[3][jc[3]+0].value<<24|Pc[1][jc[1]+0].value<<16|Pc[2][jc[2]+0].value)>>>0,Ly==0&&256>Pc[0][jc[0]+0].value&&(ts.Qb=1,ts.qb+=Pc[0][jc[0]+0].value<<8)),ts.jc=!ts.Qb&&6>Ry,ts.jc){var gf,va=ts;for(gf=0;gf<or;++gf){var po=gf,mo=va.pd[po],vf=va.G[0][va.H[0]+po];256<=vf.value?(mo.g=vf.g+256,mo.value=vf.value):(mo.g=0,mo.value=0,po>>=Cn(vf,8,mo),po>>=Cn(va.G[1][va.H[1]+po],16,mo),po>>=Cn(va.G[2][va.H[2]+po],0,mo),Cn(va.G[3][va.H[3]+po],24,mo))}}}Zn.vc=lr,Zn.Wb=Ur,Zn.Ya=lf,Zn.yc=_g,en=1;break t}en=0}if(!(G=en)){D.a=3;break e}if(0<xe){if(re.ua=1<<xe,!Xe(re.Wa,xe)){D.a=1,G=0;break e}}else re.ua=0;var Eg=D,$y=Y,qA=Z,kg=Eg.s,Tg=kg.xc;if(Eg.c=$y,Eg.i=qA,kg.md=Fe($y,Tg),kg.wc=Tg==0?-1:(1<<Tg)-1,E){D.xb=_A;break e}if((fe=s(Y*Z))==null){D.a=1,G=0;break e}G=(G=Dr(D,fe,0,Y,Z,Z,null))&&!ee.h;break e}return G?(z!=null?z[0]=fe:(e(fe==null),e(E)),D.$=0,E||Fr(re)):Fr(re),G}function ws(h,v){var E=h.c*h.i,D=E+v+16*v;return e(h.c<=v),h.V=s(D),h.V==null?(h.Ta=null,h.Ua=0,h.a=1,0):(h.Ta=h.V,h.Ua=h.Ba+E+v,1)}function _s(h,v){var E=h.C,D=v-E,z=h.V,G=h.Ba+h.c*E;for(e(v<=h.l.o);0<D;){var Y=16<D?16:D,Z=h.l.ma,ee=h.l.width,re=ee*Y,fe=Z.ca,xe=Z.tb+ee*E,Se=h.Ta,we=h.Ua;Bn(h,Y,z,G),Ln(Se,we,fe,xe,re),wr(Z,E,E+Y,fe,xe,ee),D-=Y,z+=Y*h.c,E+=Y}e(E==v),h.C=h.Ma=v}function bs(){this.ub=this.yd=this.td=this.Rb=0}function ea(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function ta(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function uc(){this.Yb=function(){var h=[];return function v(E,D,z){for(var G=z[D],Y=0;Y<G&&(E.push(z.length>D+1?[]:0),!(z.length<D+1));Y++)v(E[Y],D+1,z)}(h,0,[3,11]),h}()}function Ba(){this.jb=s(3),this.Wc=o([4,8],uc),this.Xc=o([4,17],uc)}function hc(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function xs(){this.ld=this.La=this.dd=this.tc=0}function Ss(){this.Na=this.la=0}function Hi(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function na(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Qu(){this.uc=this.M=this.Nb=0,this.wa=Array(new xs),this.Y=0,this.ya=Array(new na),this.aa=0,this.l=new ra}function al(){this.y=s(16),this.f=s(8),this.ea=s(8)}function dc(){this.cb=this.a=0,this.sc="",this.m=new me,this.Od=new bs,this.Kc=new ea,this.ed=new hc,this.Qa=new ta,this.Ic=this.$c=this.Aa=0,this.D=new Qu,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=a(8,me),this.ia=0,this.pb=a(4,Hi),this.Pa=new Ba,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new al),this.Hd=0,this.rb=Array(new Ss),this.sb=0,this.wa=Array(new xs),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new na),this.L=this.aa=0,this.gd=o([4,2],xs),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function ra(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function ol(){var h=new dc;return h!=null&&(h.a=0,h.sc="OK",h.cb=0,h.Xb=0,oh||(oh=fc)),h}function on(h,v,E){return h.a==0&&(h.a=v,h.sc=E,h.cb=0),0}function ll(h,v,E){return 3<=E&&h[v+0]==157&&h[v+1]==1&&h[v+2]==42}function cl(h,v){if(h==null)return 0;if(h.a=0,h.sc="OK",v==null)return on(h,2,"null VP8Io passed to VP8GetHeaders()");var E=v.data,D=v.w,z=v.ha;if(4>z)return on(h,7,"Truncated header.");var G=E[D+0]|E[D+1]<<8|E[D+2]<<16,Y=h.Od;if(Y.Rb=!(1&G),Y.td=G>>1&7,Y.yd=G>>4&1,Y.ub=G>>5,3<Y.td)return on(h,3,"Incorrect keyframe parameters.");if(!Y.yd)return on(h,4,"Frame not displayable.");D+=3,z-=3;var Z=h.Kc;if(Y.Rb){if(7>z)return on(h,7,"cannot parse picture header");if(!ll(E,D,z))return on(h,3,"Bad code word");Z.c=16383&(E[D+4]<<8|E[D+3]),Z.Td=E[D+4]>>6,Z.i=16383&(E[D+6]<<8|E[D+5]),Z.Ud=E[D+6]>>6,D+=7,z-=7,h.za=Z.c+15>>4,h.Ub=Z.i+15>>4,v.width=Z.c,v.height=Z.i,v.Da=0,v.j=0,v.v=0,v.va=v.width,v.o=v.height,v.da=0,v.ib=v.width,v.hb=v.height,v.U=v.width,v.T=v.height,i((G=h.Pa).jb,0,255,G.jb.length),e((G=h.Qa)!=null),G.Cb=0,G.Bb=0,G.Fb=1,i(G.Zb,0,0,G.Zb.length),i(G.Lb,0,0,G.Lb)}if(Y.ub>z)return on(h,7,"bad partition length");ne(G=h.m,E,D,Y.ub),D+=Y.ub,z-=Y.ub,Y.Rb&&(Z.Ld=ue(G),Z.Kd=ue(G)),Z=h.Qa;var ee,re=h.Pa;if(e(G!=null),e(Z!=null),Z.Cb=ue(G),Z.Cb){if(Z.Bb=ue(G),ue(G)){for(Z.Fb=ue(G),ee=0;4>ee;++ee)Z.Zb[ee]=ue(G)?U(G,7):0;for(ee=0;4>ee;++ee)Z.Lb[ee]=ue(G)?U(G,6):0}if(Z.Bb)for(ee=0;3>ee;++ee)re.jb[ee]=ue(G)?V(G,8):255}else Z.Bb=0;if(G.Ka)return on(h,3,"cannot parse segment header");if((Z=h.ed).zd=ue(G),Z.Tb=V(G,6),Z.wb=V(G,3),Z.Pc=ue(G),Z.Pc&&ue(G)){for(re=0;4>re;++re)ue(G)&&(Z.vd[re]=U(G,6));for(re=0;4>re;++re)ue(G)&&(Z.od[re]=U(G,6))}if(h.L=Z.Tb==0?0:Z.zd?1:2,G.Ka)return on(h,3,"cannot parse filter header");var fe=z;if(z=ee=D,D=ee+fe,Z=fe,h.Xb=(1<<V(h.m,2))-1,fe<3*(re=h.Xb))E=7;else{for(ee+=3*re,Z-=3*re,fe=0;fe<re;++fe){var xe=E[z+0]|E[z+1]<<8|E[z+2]<<16;xe>Z&&(xe=Z),ne(h.Jc[+fe],E,ee,xe),ee+=xe,Z-=xe,z+=3}ne(h.Jc[+re],E,ee,Z),E=ee<D?0:5}if(E!=0)return on(h,E,"cannot parse partitions");for(E=V(ee=h.m,7),z=ue(ee)?U(ee,4):0,D=ue(ee)?U(ee,4):0,Z=ue(ee)?U(ee,4):0,re=ue(ee)?U(ee,4):0,ee=ue(ee)?U(ee,4):0,fe=h.Qa,xe=0;4>xe;++xe){if(fe.Cb){var Se=fe.Zb[xe];fe.Fb||(Se+=E)}else{if(0<xe){h.pb[xe]=h.pb[0];continue}Se=E}var we=h.pb[xe];we.Sc[0]=vg[zt(Se+z,127)],we.Sc[1]=yg[zt(Se+0,127)],we.Eb[0]=2*vg[zt(Se+D,127)],we.Eb[1]=101581*yg[zt(Se+Z,127)]>>16,8>we.Eb[1]&&(we.Eb[1]=8),we.Qc[0]=vg[zt(Se+re,117)],we.Qc[1]=yg[zt(Se+ee,127)],we.lc=Se+ee}if(!Y.Rb)return on(h,4,"Not a key frame.");for(ue(G),Y=h.Pa,E=0;4>E;++E){for(z=0;8>z;++z)for(D=0;3>D;++D)for(Z=0;11>Z;++Z)re=de(G,yA[E][z][D][Z])?V(G,8):gA[E][z][D][Z],Y.Wc[E][z].Yb[D][Z]=re;for(z=0;17>z;++z)Y.Xc[E][z]=Y.Wc[E][wA[z]]}return h.kc=ue(G),h.kc&&(h.Bd=V(G,8)),h.cb=1}function fc(h,v,E,D,z,G,Y){var Z=v[z].Yb[E];for(E=0;16>z;++z){if(!de(h,Z[E+0]))return z;for(;!de(h,Z[E+1]);)if(Z=v[++z].Yb[0],E=0,z==16)return 16;var ee=v[z+1].Yb;if(de(h,Z[E+2])){var re=h,fe=0;if(de(re,(Se=Z)[(xe=E)+3]))if(de(re,Se[xe+6])){for(Z=0,xe=2*(fe=de(re,Se[xe+8]))+(Se=de(re,Se[xe+9+fe])),fe=0,Se=pA[xe];Se[Z];++Z)fe+=fe+de(re,Se[Z]);fe+=3+(8<<xe)}else de(re,Se[xe+7])?(fe=7+2*de(re,165),fe+=de(re,145)):fe=5+de(re,159);else fe=de(re,Se[xe+4])?3+de(re,Se[xe+5]):2;Z=ee[2]}else fe=1,Z=ee[1];ee=Y+mA[z],0>(re=h).b&&le(re);var xe,Se=re.b,we=(xe=re.Ca>>1)-(re.I>>Se)>>31;--re.b,re.Ca+=we,re.Ca|=1,re.I-=(xe+1&we)<<Se,G[ee]=((fe^we)-we)*D[(0<z)+0]}return 16}function ul(h){var v=h.rb[h.sb-1];v.la=0,v.Na=0,i(h.zc,0,0,h.zc.length),h.ja=0}function pc(h,v){if(h==null)return 0;if(v==null)return on(h,2,"NULL VP8Io parameter in VP8Decode().");if(!h.cb&&!cl(h,v))return 0;if(e(h.cb),v.ac==null||v.ac(v)){v.ob&&(h.L=0);var E=of[h.L];if(h.L==2?(h.yb=0,h.zb=0):(h.yb=v.v-E>>4,h.zb=v.j-E>>4,0>h.yb&&(h.yb=0),0>h.zb&&(h.zb=0)),h.Va=v.o+15+E>>4,h.Hb=v.va+15+E>>4,h.Hb>h.za&&(h.Hb=h.za),h.Va>h.Ub&&(h.Va=h.Ub),0<h.L){var D=h.ed;for(E=0;4>E;++E){var z;if(h.Qa.Cb){var G=h.Qa.Lb[E];h.Qa.Fb||(G+=D.Tb)}else G=D.Tb;for(z=0;1>=z;++z){var Y=h.gd[E][z],Z=G;if(D.Pc&&(Z+=D.vd[0],z&&(Z+=D.od[0])),0<(Z=0>Z?0:63<Z?63:Z)){var ee=Z;0<D.wb&&(ee=4<D.wb?ee>>2:ee>>1)>9-D.wb&&(ee=9-D.wb),1>ee&&(ee=1),Y.dd=ee,Y.tc=2*Z+ee,Y.ld=40<=Z?2:15<=Z?1:0}else Y.tc=0;Y.La=z}}}E=0}else on(h,6,"Frame setup failed"),E=h.a;if(E=E==0){if(E){h.$c=0,0<h.Aa||(h.Ic=jA);e:{E=h.Ic,D=4*(ee=h.za);var re=32*ee,fe=ee+1,xe=0<h.L?ee*(0<h.Aa?2:1):0,Se=(h.Aa==2?2:1)*ee;if((Y=D+832+(z=3*(16*E+of[h.L])/2*re)+(G=h.Fa!=null&&0<h.Fa.length?h.Kc.c*h.Kc.i:0))!=Y)E=0;else{if(Y>h.Vb){if(h.Vb=0,h.Ec=s(Y),h.Fc=0,h.Ec==null){E=on(h,1,"no memory during frame initialization.");break e}h.Vb=Y}Y=h.Ec,Z=h.Fc,h.Ac=Y,h.Bc=Z,Z+=D,h.Gd=a(re,al),h.Hd=0,h.rb=a(fe+1,Ss),h.sb=1,h.wa=xe?a(xe,xs):null,h.Y=0,h.D.Nb=0,h.D.wa=h.wa,h.D.Y=h.Y,0<h.Aa&&(h.D.Y+=ee),e(!0),h.oc=Y,h.pc=Z,Z+=832,h.ya=a(Se,na),h.aa=0,h.D.ya=h.ya,h.D.aa=h.aa,h.Aa==2&&(h.D.aa+=ee),h.R=16*ee,h.B=8*ee,ee=(re=of[h.L])*h.R,re=re/2*h.B,h.sa=Y,h.ta=Z+ee,h.qa=h.sa,h.ra=h.ta+16*E*h.R+re,h.Ha=h.qa,h.Ia=h.ra+8*E*h.B+re,h.$c=0,Z+=z,h.mb=G?Y:null,h.nb=G?Z:null,e(Z+G<=h.Fc+h.Vb),ul(h),i(h.Ac,h.Bc,0,D),E=1}}if(E){if(v.ka=0,v.y=h.sa,v.O=h.ta,v.f=h.qa,v.N=h.ra,v.ea=h.Ha,v.Vd=h.Ia,v.fa=h.R,v.Rc=h.B,v.F=null,v.J=0,!Jd){for(E=-255;255>=E;++E)Qn[255+E]=0>E?-E:E;for(E=-1020;1020>=E;++E)pa[1020+E]=-128>E?-128:127<E?127:E;for(E=-112;112>=E;++E)ah[112+E]=-16>E?-16:15<E?15:E;for(E=-255;510>=E;++E)Ic[255+E]=0>E?0:255<E?255:E;Jd=1}Ec=aa,fa=qa,rh=hl,Vr=$t,Pi=sa,jn=ia,kc=Ya,Yd=Ji,ih=Xa,bl=wl,xl=Ja,ao=la,Sl=Za,Tc=ks,Nl=oa,oo=gi,sh=Gn,ji=wc,es[0]=Ii,es[1]=Yu,es[2]=As,es[3]=Xu,es[4]=vc,es[5]=Ha,es[6]=pi,es[7]=fl,es[8]=Ga,es[9]=Wa,lo[0]=Ns,lo[1]=Ju,lo[2]=Gi,lo[3]=za,lo[4]=ln,lo[5]=gc,lo[6]=dl,ma[0]=Yi,ma[1]=mc,ma[2]=yc,ma[3]=Qi,ma[4]=qt,ma[5]=pl,ma[6]=ml,E=1}else E=0}E&&(E=function(we,je){for(we.M=0;we.M<we.Va;++we.M){var Ae,pe=we.Jc[we.M&we.Xb],ge=we.m,Ce=we;for(Ae=0;Ae<Ce.za;++Ae){var Oe=ge,Pe=Ce,Ze=Pe.Ac,Qe=Pe.Bc+4*Ae,pt=Pe.zc,Je=Pe.ya[Pe.aa+Ae];if(Pe.Qa.Bb?Je.$b=de(Oe,Pe.Pa.jb[0])?2+de(Oe,Pe.Pa.jb[2]):de(Oe,Pe.Pa.jb[1]):Je.$b=0,Pe.kc&&(Je.Ad=de(Oe,Pe.Bd)),Je.Za=!de(Oe,145)+0,Je.Za){var Kt=Je.Ob,Ht=0;for(Pe=0;4>Pe;++Pe){var Mt,Lt=pt[0+Pe];for(Mt=0;4>Mt;++Mt){Lt=vA[Ze[Qe+Mt]][Lt];for(var en=xy[de(Oe,Lt[0])];0<en;)en=xy[2*en+de(Oe,Lt[en])];Lt=-en,Ze[Qe+Mt]=Lt}r(Kt,Ht,Ze,Qe,4),Ht+=4,pt[0+Pe]=Lt}}else Lt=de(Oe,156)?de(Oe,128)?1:3:de(Oe,163)?2:0,Je.Ob[0]=Lt,i(Ze,Qe,Lt,4),i(pt,0,Lt,4);Je.Dd=de(Oe,142)?de(Oe,114)?de(Oe,183)?1:3:2:0}if(Ce.m.Ka)return on(we,7,"Premature end-of-partition0 encountered.");for(;we.ja<we.za;++we.ja){if(Ce=pe,Oe=(ge=we).rb[ge.sb-1],Ze=ge.rb[ge.sb+ge.ja],Ae=ge.ya[ge.aa+ge.ja],Qe=ge.kc?Ae.Ad:0)Oe.la=Ze.la=0,Ae.Za||(Oe.Na=Ze.Na=0),Ae.Hc=0,Ae.Gc=0,Ae.ia=0;else{var Xt,It;if(Oe=Ze,Ze=Ce,Qe=ge.Pa.Xc,pt=ge.ya[ge.aa+ge.ja],Je=ge.pb[pt.$b],Pe=pt.ad,Kt=0,Ht=ge.rb[ge.sb-1],Lt=Mt=0,i(Pe,Kt,0,384),pt.Za)var Kn=0,ei=Qe[3];else{en=s(16);var qn=Oe.Na+Ht.Na;if(qn=oh(Ze,Qe[1],qn,Je.Eb,0,en,0),Oe.Na=Ht.Na=(0<qn)+0,1<qn)Ec(en,0,Pe,Kt);else{var ti=en[0]+3>>3;for(en=0;256>en;en+=16)Pe[Kt+en]=ti}Kn=1,ei=Qe[0]}var Wt=15&Oe.la,yi=15&Ht.la;for(en=0;4>en;++en){var wi=1&yi;for(ti=It=0;4>ti;++ti)Wt=Wt>>1|(wi=(qn=oh(Ze,ei,qn=wi+(1&Wt),Je.Sc,Kn,Pe,Kt))>Kn)<<7,It=It<<2|(3<qn?3:1<qn?2:Pe[Kt+0]!=0),Kt+=16;Wt>>=4,yi=yi>>1|wi<<7,Mt=(Mt<<8|It)>>>0}for(ei=Wt,Kn=yi>>4,Xt=0;4>Xt;Xt+=2){for(It=0,Wt=Oe.la>>4+Xt,yi=Ht.la>>4+Xt,en=0;2>en;++en){for(wi=1&yi,ti=0;2>ti;++ti)qn=wi+(1&Wt),Wt=Wt>>1|(wi=0<(qn=oh(Ze,Qe[2],qn,Je.Qc,0,Pe,Kt)))<<3,It=It<<2|(3<qn?3:1<qn?2:Pe[Kt+0]!=0),Kt+=16;Wt>>=2,yi=yi>>1|wi<<5}Lt|=It<<4*Xt,ei|=Wt<<4<<Xt,Kn|=(240&yi)<<Xt}Oe.la=ei,Ht.la=Kn,pt.Hc=Mt,pt.Gc=Lt,pt.ia=43690&Lt?0:Je.ia,Qe=!(Mt|Lt)}if(0<ge.L&&(ge.wa[ge.Y+ge.ja]=ge.gd[Ae.$b][Ae.Za],ge.wa[ge.Y+ge.ja].La|=!Qe),Ce.Ka)return on(we,7,"Premature end-of-file encountered.")}if(ul(we),ge=je,Ce=1,Ae=(pe=we).D,Oe=0<pe.L&&pe.M>=pe.zb&&pe.M<=pe.Va,pe.Aa==0)e:{if(Ae.M=pe.M,Ae.uc=Oe,Is(pe,Ae),Ce=1,Ae=(It=pe.D).Nb,Oe=(Lt=of[pe.L])*pe.R,Ze=Lt/2*pe.B,en=16*Ae*pe.R,ti=8*Ae*pe.B,Qe=pe.sa,pt=pe.ta-Oe+en,Je=pe.qa,Pe=pe.ra-Ze+ti,Kt=pe.Ha,Ht=pe.Ia-Ze+ti,yi=(Wt=It.M)==0,Mt=Wt>=pe.Va-1,pe.Aa==2&&Is(pe,It),It.uc)for(wi=(qn=pe).D.M,e(qn.D.uc),It=qn.yb;It<qn.Hb;++It){Kn=It,ei=wi;var Zn=(lr=(kn=qn).D).Nb;Xt=kn.R;var lr=lr.wa[lr.Y+Kn],Ur=kn.sa,Fi=kn.ta+16*Zn*Xt+16*Kn,Ps=lr.dd,er=lr.tc;if(er!=0)if(e(3<=er),kn.L==1)0<Kn&&oo(Ur,Fi,Xt,er+4),lr.La&&ji(Ur,Fi,Xt,er),0<ei&&Nl(Ur,Fi,Xt,er+4),lr.La&&sh(Ur,Fi,Xt,er);else{var ga=kn.B,Al=kn.qa,Cc=kn.ra+8*Zn*ga+8*Kn,uo=kn.Ha,kn=kn.Ia+8*Zn*ga+8*Kn;Zn=lr.ld,0<Kn&&(Yd(Ur,Fi,Xt,er+4,Ps,Zn),bl(Al,Cc,uo,kn,ga,er+4,Ps,Zn)),lr.La&&(ao(Ur,Fi,Xt,er,Ps,Zn),Tc(Al,Cc,uo,kn,ga,er,Ps,Zn)),0<ei&&(kc(Ur,Fi,Xt,er+4,Ps,Zn),ih(Al,Cc,uo,kn,ga,er+4,Ps,Zn)),lr.La&&(xl(Ur,Fi,Xt,er,Ps,Zn),Sl(Al,Cc,uo,kn,ga,er,Ps,Zn))}}if(pe.ia&&alert("todo:DitherRow"),ge.put!=null){if(It=16*Wt,Wt=16*(Wt+1),yi?(ge.y=pe.sa,ge.O=pe.ta+en,ge.f=pe.qa,ge.N=pe.ra+ti,ge.ea=pe.Ha,ge.W=pe.Ia+ti):(It-=Lt,ge.y=Qe,ge.O=pt,ge.f=Je,ge.N=Pe,ge.ea=Kt,ge.W=Ht),Mt||(Wt-=Lt),Wt>ge.o&&(Wt=ge.o),ge.F=null,ge.J=null,pe.Fa!=null&&0<pe.Fa.length&&It<Wt&&(ge.J=ro(pe,ge,It,Wt-It),ge.F=pe.mb,ge.F==null&&ge.F.length==0)){Ce=on(pe,3,"Could not decode alpha data.");break e}It<ge.j&&(Lt=ge.j-It,It=ge.j,e(!(1&Lt)),ge.O+=pe.R*Lt,ge.N+=pe.B*(Lt>>1),ge.W+=pe.B*(Lt>>1),ge.F!=null&&(ge.J+=ge.width*Lt)),It<Wt&&(ge.O+=ge.v,ge.N+=ge.v>>1,ge.W+=ge.v>>1,ge.F!=null&&(ge.J+=ge.v),ge.ka=It-ge.j,ge.U=ge.va-ge.v,ge.T=Wt-It,Ce=ge.put(ge))}Ae+1!=pe.Ic||Mt||(r(pe.sa,pe.ta-Oe,Qe,pt+16*pe.R,Oe),r(pe.qa,pe.ra-Ze,Je,Pe+8*pe.B,Ze),r(pe.Ha,pe.Ia-Ze,Kt,Ht+8*pe.B,Ze))}if(!Ce)return on(we,6,"Output aborted.")}return 1}(h,v)),v.bc!=null&&v.bc(v),E&=1}return E?(h.cb=0,E):0}function Jr(h,v,E,D,z){z=h[v+E+32*D]+(z>>3),h[v+E+32*D]=-256&z?0>z?0:255:z}function Ka(h,v,E,D,z,G){Jr(h,v,0,E,D+z),Jr(h,v,1,E,D+G),Jr(h,v,2,E,D-G),Jr(h,v,3,E,D-z)}function En(h){return(20091*h>>16)+h}function Or(h,v,E,D){var z,G=0,Y=s(16);for(z=0;4>z;++z){var Z=h[v+0]+h[v+8],ee=h[v+0]-h[v+8],re=(35468*h[v+4]>>16)-En(h[v+12]),fe=En(h[v+4])+(35468*h[v+12]>>16);Y[G+0]=Z+fe,Y[G+1]=ee+re,Y[G+2]=ee-re,Y[G+3]=Z-fe,G+=4,v++}for(z=G=0;4>z;++z)Z=(h=Y[G+0]+4)+Y[G+8],ee=h-Y[G+8],re=(35468*Y[G+4]>>16)-En(Y[G+12]),Jr(E,D,0,0,Z+(fe=En(Y[G+4])+(35468*Y[G+12]>>16))),Jr(E,D,1,0,ee+re),Jr(E,D,2,0,ee-re),Jr(E,D,3,0,Z-fe),G++,D+=32}function ia(h,v,E,D){var z=h[v+0]+4,G=35468*h[v+4]>>16,Y=En(h[v+4]),Z=35468*h[v+1]>>16;Ka(E,D,0,z+Y,h=En(h[v+1]),Z),Ka(E,D,1,z+G,h,Z),Ka(E,D,2,z-G,h,Z),Ka(E,D,3,z-Y,h,Z)}function qa(h,v,E,D,z){Or(h,v,E,D),z&&Or(h,v+16,E,D+4)}function hl(h,v,E,D){fa(h,v+0,E,D,1),fa(h,v+32,E,D+128,1)}function $t(h,v,E,D){var z;for(h=h[v+0]+4,z=0;4>z;++z)for(v=0;4>v;++v)Jr(E,D,v,z,h)}function sa(h,v,E,D){h[v+0]&&Vr(h,v+0,E,D),h[v+16]&&Vr(h,v+16,E,D+4),h[v+32]&&Vr(h,v+32,E,D+128),h[v+48]&&Vr(h,v+48,E,D+128+4)}function aa(h,v,E,D){var z,G=s(16);for(z=0;4>z;++z){var Y=h[v+0+z]+h[v+12+z],Z=h[v+4+z]+h[v+8+z],ee=h[v+4+z]-h[v+8+z],re=h[v+0+z]-h[v+12+z];G[0+z]=Y+Z,G[8+z]=Y-Z,G[4+z]=re+ee,G[12+z]=re-ee}for(z=0;4>z;++z)Y=(h=G[0+4*z]+3)+G[3+4*z],Z=G[1+4*z]+G[2+4*z],ee=G[1+4*z]-G[2+4*z],re=h-G[3+4*z],E[D+0]=Y+Z>>3,E[D+16]=re+ee>>3,E[D+32]=Y-Z>>3,E[D+48]=re-ee>>3,D+=64}function Wi(h,v,E){var D,z=v-32,G=vi,Y=255-h[z-1];for(D=0;D<E;++D){var Z,ee=G,re=Y+h[v-1];for(Z=0;Z<E;++Z)h[v+Z]=ee[re+h[z+Z]];v+=32}}function Yu(h,v){Wi(h,v,4)}function mc(h,v){Wi(h,v,8)}function Ju(h,v){Wi(h,v,16)}function Gi(h,v){var E;for(E=0;16>E;++E)r(h,v+32*E,h,v-32,16)}function za(h,v){var E;for(E=16;0<E;--E)i(h,v,h[v-1],16),v+=32}function $a(h,v,E){var D;for(D=0;16>D;++D)i(v,E+32*D,h,16)}function Ns(h,v){var E,D=16;for(E=0;16>E;++E)D+=h[v-1+32*E]+h[v+E-32];$a(D>>5,h,v)}function ln(h,v){var E,D=8;for(E=0;16>E;++E)D+=h[v-1+32*E];$a(D>>4,h,v)}function gc(h,v){var E,D=8;for(E=0;16>E;++E)D+=h[v+E-32];$a(D>>4,h,v)}function dl(h,v){$a(128,h,v)}function wt(h,v,E){return h+2*v+E+2>>2}function As(h,v){var E,D=v-32;for(D=new Uint8Array([wt(h[D-1],h[D+0],h[D+1]),wt(h[D+0],h[D+1],h[D+2]),wt(h[D+1],h[D+2],h[D+3]),wt(h[D+2],h[D+3],h[D+4])]),E=0;4>E;++E)r(h,v+32*E,D,0,D.length)}function Xu(h,v){var E=h[v-1],D=h[v-1+32],z=h[v-1+64],G=h[v-1+96];ke(h,v+0,16843009*wt(h[v-1-32],E,D)),ke(h,v+32,16843009*wt(E,D,z)),ke(h,v+64,16843009*wt(D,z,G)),ke(h,v+96,16843009*wt(z,G,G))}function Ii(h,v){var E,D=4;for(E=0;4>E;++E)D+=h[v+E-32]+h[v-1+32*E];for(D>>=3,E=0;4>E;++E)i(h,v+32*E,D,4)}function vc(h,v){var E=h[v-1+0],D=h[v-1+32],z=h[v-1+64],G=h[v-1-32],Y=h[v+0-32],Z=h[v+1-32],ee=h[v+2-32],re=h[v+3-32];h[v+0+96]=wt(D,z,h[v-1+96]),h[v+1+96]=h[v+0+64]=wt(E,D,z),h[v+2+96]=h[v+1+64]=h[v+0+32]=wt(G,E,D),h[v+3+96]=h[v+2+64]=h[v+1+32]=h[v+0+0]=wt(Y,G,E),h[v+3+64]=h[v+2+32]=h[v+1+0]=wt(Z,Y,G),h[v+3+32]=h[v+2+0]=wt(ee,Z,Y),h[v+3+0]=wt(re,ee,Z)}function pi(h,v){var E=h[v+1-32],D=h[v+2-32],z=h[v+3-32],G=h[v+4-32],Y=h[v+5-32],Z=h[v+6-32],ee=h[v+7-32];h[v+0+0]=wt(h[v+0-32],E,D),h[v+1+0]=h[v+0+32]=wt(E,D,z),h[v+2+0]=h[v+1+32]=h[v+0+64]=wt(D,z,G),h[v+3+0]=h[v+2+32]=h[v+1+64]=h[v+0+96]=wt(z,G,Y),h[v+3+32]=h[v+2+64]=h[v+1+96]=wt(G,Y,Z),h[v+3+64]=h[v+2+96]=wt(Y,Z,ee),h[v+3+96]=wt(Z,ee,ee)}function Ha(h,v){var E=h[v-1+0],D=h[v-1+32],z=h[v-1+64],G=h[v-1-32],Y=h[v+0-32],Z=h[v+1-32],ee=h[v+2-32],re=h[v+3-32];h[v+0+0]=h[v+1+64]=G+Y+1>>1,h[v+1+0]=h[v+2+64]=Y+Z+1>>1,h[v+2+0]=h[v+3+64]=Z+ee+1>>1,h[v+3+0]=ee+re+1>>1,h[v+0+96]=wt(z,D,E),h[v+0+64]=wt(D,E,G),h[v+0+32]=h[v+1+96]=wt(E,G,Y),h[v+1+32]=h[v+2+96]=wt(G,Y,Z),h[v+2+32]=h[v+3+96]=wt(Y,Z,ee),h[v+3+32]=wt(Z,ee,re)}function fl(h,v){var E=h[v+0-32],D=h[v+1-32],z=h[v+2-32],G=h[v+3-32],Y=h[v+4-32],Z=h[v+5-32],ee=h[v+6-32],re=h[v+7-32];h[v+0+0]=E+D+1>>1,h[v+1+0]=h[v+0+64]=D+z+1>>1,h[v+2+0]=h[v+1+64]=z+G+1>>1,h[v+3+0]=h[v+2+64]=G+Y+1>>1,h[v+0+32]=wt(E,D,z),h[v+1+32]=h[v+0+96]=wt(D,z,G),h[v+2+32]=h[v+1+96]=wt(z,G,Y),h[v+3+32]=h[v+2+96]=wt(G,Y,Z),h[v+3+64]=wt(Y,Z,ee),h[v+3+96]=wt(Z,ee,re)}function Wa(h,v){var E=h[v-1+0],D=h[v-1+32],z=h[v-1+64],G=h[v-1+96];h[v+0+0]=E+D+1>>1,h[v+2+0]=h[v+0+32]=D+z+1>>1,h[v+2+32]=h[v+0+64]=z+G+1>>1,h[v+1+0]=wt(E,D,z),h[v+3+0]=h[v+1+32]=wt(D,z,G),h[v+3+32]=h[v+1+64]=wt(z,G,G),h[v+3+64]=h[v+2+64]=h[v+0+96]=h[v+1+96]=h[v+2+96]=h[v+3+96]=G}function Ga(h,v){var E=h[v-1+0],D=h[v-1+32],z=h[v-1+64],G=h[v-1+96],Y=h[v-1-32],Z=h[v+0-32],ee=h[v+1-32],re=h[v+2-32];h[v+0+0]=h[v+2+32]=E+Y+1>>1,h[v+0+32]=h[v+2+64]=D+E+1>>1,h[v+0+64]=h[v+2+96]=z+D+1>>1,h[v+0+96]=G+z+1>>1,h[v+3+0]=wt(Z,ee,re),h[v+2+0]=wt(Y,Z,ee),h[v+1+0]=h[v+3+32]=wt(E,Y,Z),h[v+1+32]=h[v+3+64]=wt(D,E,Y),h[v+1+64]=h[v+3+96]=wt(z,D,E),h[v+1+96]=wt(G,z,D)}function yc(h,v){var E;for(E=0;8>E;++E)r(h,v+32*E,h,v-32,8)}function Qi(h,v){var E;for(E=0;8>E;++E)i(h,v,h[v-1],8),v+=32}function mi(h,v,E){var D;for(D=0;8>D;++D)i(v,E+32*D,h,8)}function Yi(h,v){var E,D=8;for(E=0;8>E;++E)D+=h[v+E-32]+h[v-1+32*E];mi(D>>4,h,v)}function pl(h,v){var E,D=4;for(E=0;8>E;++E)D+=h[v+E-32];mi(D>>3,h,v)}function qt(h,v){var E,D=4;for(E=0;8>E;++E)D+=h[v-1+32*E];mi(D>>3,h,v)}function ml(h,v){mi(128,h,v)}function Qa(h,v,E){var D=h[v-E],z=h[v+0],G=3*(z-D)+dg[1020+h[v-2*E]-h[v+E]],Y=Xd[112+(G+4>>3)];h[v-E]=vi[255+D+Xd[112+(G+3>>3)]],h[v+0]=vi[255+z-Y]}function gl(h,v,E,D){var z=h[v+0],G=h[v+E];return Ri[255+h[v-2*E]-h[v-E]]>D||Ri[255+G-z]>D}function vl(h,v,E,D){return 4*Ri[255+h[v-E]-h[v+0]]+Ri[255+h[v-2*E]-h[v+E]]<=D}function yl(h,v,E,D,z){var G=h[v-3*E],Y=h[v-2*E],Z=h[v-E],ee=h[v+0],re=h[v+E],fe=h[v+2*E],xe=h[v+3*E];return 4*Ri[255+Z-ee]+Ri[255+Y-re]>D?0:Ri[255+h[v-4*E]-G]<=z&&Ri[255+G-Y]<=z&&Ri[255+Y-Z]<=z&&Ri[255+xe-fe]<=z&&Ri[255+fe-re]<=z&&Ri[255+re-ee]<=z}function oa(h,v,E,D){var z=2*D+1;for(D=0;16>D;++D)vl(h,v+D,E,z)&&Qa(h,v+D,E)}function gi(h,v,E,D){var z=2*D+1;for(D=0;16>D;++D)vl(h,v+D*E,1,z)&&Qa(h,v+D*E,1)}function Gn(h,v,E,D){var z;for(z=3;0<z;--z)oa(h,v+=4*E,E,D)}function wc(h,v,E,D){var z;for(z=3;0<z;--z)gi(h,v+=4,E,D)}function Es(h,v,E,D,z,G,Y,Z){for(G=2*G+1;0<z--;){if(yl(h,v,E,G,Y))if(gl(h,v,E,Z))Qa(h,v,E);else{var ee=h,re=v,fe=E,xe=ee[re-2*fe],Se=ee[re-fe],we=ee[re+0],je=ee[re+fe],Ae=ee[re+2*fe],pe=27*(Ce=dg[1020+3*(we-Se)+dg[1020+xe-je]])+63>>7,ge=18*Ce+63>>7,Ce=9*Ce+63>>7;ee[re-3*fe]=vi[255+ee[re-3*fe]+Ce],ee[re-2*fe]=vi[255+xe+ge],ee[re-fe]=vi[255+Se+pe],ee[re+0]=vi[255+we-pe],ee[re+fe]=vi[255+je-ge],ee[re+2*fe]=vi[255+Ae-Ce]}v+=D}}function sr(h,v,E,D,z,G,Y,Z){for(G=2*G+1;0<z--;){if(yl(h,v,E,G,Y))if(gl(h,v,E,Z))Qa(h,v,E);else{var ee=h,re=v,fe=E,xe=ee[re-fe],Se=ee[re+0],we=ee[re+fe],je=Xd[112+((Ae=3*(Se-xe))+4>>3)],Ae=Xd[112+(Ae+3>>3)],pe=je+1>>1;ee[re-2*fe]=vi[255+ee[re-2*fe]+pe],ee[re-fe]=vi[255+xe+Ae],ee[re+0]=vi[255+Se-je],ee[re+fe]=vi[255+we-pe]}v+=D}}function Ya(h,v,E,D,z,G){Es(h,v,E,1,16,D,z,G)}function Ji(h,v,E,D,z,G){Es(h,v,1,E,16,D,z,G)}function Ja(h,v,E,D,z,G){var Y;for(Y=3;0<Y;--Y)sr(h,v+=4*E,E,1,16,D,z,G)}function la(h,v,E,D,z,G){var Y;for(Y=3;0<Y;--Y)sr(h,v+=4,1,E,16,D,z,G)}function Xa(h,v,E,D,z,G,Y,Z){Es(h,v,z,1,8,G,Y,Z),Es(E,D,z,1,8,G,Y,Z)}function wl(h,v,E,D,z,G,Y,Z){Es(h,v,1,z,8,G,Y,Z),Es(E,D,1,z,8,G,Y,Z)}function Za(h,v,E,D,z,G,Y,Z){sr(h,v+4*z,z,1,8,G,Y,Z),sr(E,D+4*z,z,1,8,G,Y,Z)}function ks(h,v,E,D,z,G,Y,Z){sr(h,v+4,1,z,8,G,Y,Z),sr(E,D+4,1,z,8,G,Y,Z)}function ca(){this.ba=new Wn,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Dt,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function eo(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function ua(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function to(){this.ua=0,this.Wa=new oe,this.vb=new oe,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new M,this.yc=new T}function _c(){this.xb=this.a=0,this.l=new ra,this.ca=new Wn,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new R,this.Pb=0,this.wd=new R,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new to,this.ab=0,this.gc=a(4,ua),this.Oc=0}function Xi(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new ra,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Ts(h,v,E,D,z,G,Y){for(h=h==null?0:h[v+0],v=0;v<Y;++v)z[G+v]=h+E[D+v]&255,h=z[G+v]}function no(h,v,E,D,z,G,Y){var Z;if(h==null)Ts(null,null,E,D,z,G,Y);else for(Z=0;Z<Y;++Z)z[G+Z]=h[v+Z]+E[D+Z]&255}function _r(h,v,E,D,z,G,Y){if(h==null)Ts(null,null,E,D,z,G,Y);else{var Z,ee=h[v+0],re=ee,fe=ee;for(Z=0;Z<Y;++Z)re=fe+(ee=h[v+Z])-re,fe=E[D+Z]+(-256&re?0>re?0:255:re)&255,re=ee,z[G+Z]=fe}}function ro(h,v,E,D){var z=v.width,G=v.o;if(e(h!=null&&v!=null),0>E||0>=D||E+D>G)return null;if(!h.Cc){if(h.ga==null){var Y;if(h.ga=new Xi,(Y=h.ga==null)||(Y=v.width*v.o,e(h.Gb.length==0),h.Gb=s(Y),h.Uc=0,h.Gb==null?Y=0:(h.mb=h.Gb,h.nb=h.Uc,h.rc=null,Y=1),Y=!Y),!Y){Y=h.ga;var Z=h.Fa,ee=h.P,re=h.qc,fe=h.mb,xe=h.nb,Se=ee+1,we=re-1,je=Y.l;if(e(Z!=null&&fe!=null&&v!=null),co[0]=null,co[1]=Ts,co[2]=no,co[3]=_r,Y.ca=fe,Y.tb=xe,Y.c=v.width,Y.i=v.height,e(0<Y.c&&0<Y.i),1>=re)v=0;else if(Y.$a=Z[ee+0]>>0&3,Y.Z=Z[ee+0]>>2&3,Y.Lc=Z[ee+0]>>4&3,ee=Z[ee+0]>>6&3,0>Y.$a||1<Y.$a||4<=Y.Z||1<Y.Lc||ee)v=0;else if(je.put=mn,je.ac=Jt,je.bc=di,je.ma=Y,je.width=v.width,je.height=v.height,je.Da=v.Da,je.v=v.v,je.va=v.va,je.j=v.j,je.o=v.o,Y.$a)e:{e(Y.$a==1),v=Pn();t:for(;;){if(v==null){v=0;break e}if(e(Y!=null),Y.mc=v,v.c=Y.c,v.i=Y.i,v.l=Y.l,v.l.ma=Y,v.l.width=Y.c,v.l.height=Y.i,v.a=0,K(v.m,Z,Se,we),!fi(Y.c,Y.i,1,v,null)||(v.ab==1&&v.gc[0].hc==3&&$i(v.s)?(Y.ic=1,Z=v.c*v.i,v.Ta=null,v.Ua=0,v.V=s(Z),v.Ba=0,v.V==null?(v.a=1,v=0):v=1):(Y.ic=0,v=ws(v,Y.c)),!v))break t;v=1;break e}Y.mc=null,v=0}else v=we>=Y.c*Y.i;Y=!v}if(Y)return null;h.ga.Lc!=1?h.Ga=0:D=G-E}e(h.ga!=null),e(E+D<=G);e:{if(v=(Z=h.ga).c,G=Z.l.o,Z.$a==0){if(Se=h.rc,we=h.Vc,je=h.Fa,ee=h.P+1+E*v,re=h.mb,fe=h.nb+E*v,e(ee<=h.P+h.qc),Z.Z!=0)for(e(co[Z.Z]!=null),Y=0;Y<D;++Y)co[Z.Z](Se,we,je,ee,re,fe,v),Se=re,we=fe,fe+=v,ee+=v;else for(Y=0;Y<D;++Y)r(re,fe,je,ee,v),Se=re,we=fe,fe+=v,ee+=v;h.rc=Se,h.Vc=we}else{if(e(Z.mc!=null),v=E+D,e((Y=Z.mc)!=null),e(v<=Y.i),Y.C>=v)v=1;else if(Z.ic||ye(),Z.ic){Z=Y.V,Se=Y.Ba,we=Y.c;var Ae=Y.i,pe=(je=1,ee=Y.$/we,re=Y.$%we,fe=Y.m,xe=Y.s,Y.$),ge=we*Ae,Ce=we*v,Oe=xe.wc,Pe=pe<Ce?An(xe,re,ee):null;e(pe<=ge),e(v<=Ae),e($i(xe));t:for(;;){for(;!fe.h&&pe<Ce;){if(re&Oe||(Pe=An(xe,re,ee)),e(Pe!=null),ae(fe),256>(Ae=Un(Pe.G[0],Pe.H[0],fe)))Z[Se+pe]=Ae,++pe,++re>=we&&(re=0,++ee<=v&&!(ee%16)&&Yr(Y,ee));else{if(!(280>Ae)){je=0;break t}Ae=Qr(Ae-256,fe);var Ze,Qe=Un(Pe.G[4],Pe.H[4],fe);if(ae(fe),!(pe>=(Qe=yr(we,Qe=Qr(Qe,fe)))&&ge-pe>=Ae)){je=0;break t}for(Ze=0;Ze<Ae;++Ze)Z[Se+pe+Ze]=Z[Se+pe+Ze-Qe];for(pe+=Ae,re+=Ae;re>=we;)re-=we,++ee<=v&&!(ee%16)&&Yr(Y,ee);pe<Ce&&re&Oe&&(Pe=An(xe,re,ee))}e(fe.h==J(fe))}Yr(Y,ee>v?v:ee);break t}!je||fe.h&&pe<ge?(je=0,Y.a=fe.h?5:3):Y.$=pe,v=je}else v=Dr(Y,Y.V,Y.Ba,Y.c,Y.i,v,_s);if(!v){D=0;break e}}E+D>=G&&(h.Cc=1),D=1}if(!D)return null;if(h.Cc&&((D=h.ga)!=null&&(D.mc=null),h.ga=null,0<h.Ga))return alert("todo:WebPDequantizeLevels"),null}return h.nb+E*z}function _(h,v,E,D,z,G){for(;0<z--;){var Y,Z=h,ee=v+(E?1:0),re=h,fe=v+(E?0:3);for(Y=0;Y<D;++Y){var xe=re[fe+4*Y];xe!=255&&(xe*=32897,Z[ee+4*Y+0]=Z[ee+4*Y+0]*xe>>23,Z[ee+4*Y+1]=Z[ee+4*Y+1]*xe>>23,Z[ee+4*Y+2]=Z[ee+4*Y+2]*xe>>23)}v+=G}}function q(h,v,E,D,z){for(;0<D--;){var G;for(G=0;G<E;++G){var Y=h[v+2*G+0],Z=15&(re=h[v+2*G+1]),ee=4369*Z,re=(240&re|re>>4)*ee>>16;h[v+2*G+0]=(240&Y|Y>>4)*ee>>16&240|(15&Y|Y<<4)*ee>>16>>4&15,h[v+2*G+1]=240&re|Z}v+=z}}function se(h,v,E,D,z,G,Y,Z){var ee,re,fe=255;for(re=0;re<z;++re){for(ee=0;ee<D;++ee){var xe=h[v+ee];G[Y+4*ee]=xe,fe&=xe}v+=E,Y+=Z}return fe!=255}function ce(h,v,E,D,z){var G;for(G=0;G<z;++G)E[D+G]=h[v+G]>>8}function ye(){Li=_,nn=q,rn=se,Ln=ce}function Te(h,v,E){y[h]=function(D,z,G,Y,Z,ee,re,fe,xe,Se,we,je,Ae,pe,ge,Ce,Oe){var Pe,Ze=Oe-1>>1,Qe=Z[ee+0]|re[fe+0]<<16,pt=xe[Se+0]|we[je+0]<<16;e(D!=null);var Je=3*Qe+pt+131074>>2;for(v(D[z+0],255&Je,Je>>16,Ae,pe),G!=null&&(Je=3*pt+Qe+131074>>2,v(G[Y+0],255&Je,Je>>16,ge,Ce)),Pe=1;Pe<=Ze;++Pe){var Kt=Z[ee+Pe]|re[fe+Pe]<<16,Ht=xe[Se+Pe]|we[je+Pe]<<16,Mt=Qe+Kt+pt+Ht+524296,Lt=Mt+2*(Kt+pt)>>3;Je=Lt+Qe>>1,Qe=(Mt=Mt+2*(Qe+Ht)>>3)+Kt>>1,v(D[z+2*Pe-1],255&Je,Je>>16,Ae,pe+(2*Pe-1)*E),v(D[z+2*Pe-0],255&Qe,Qe>>16,Ae,pe+(2*Pe-0)*E),G!=null&&(Je=Mt+pt>>1,Qe=Lt+Ht>>1,v(G[Y+2*Pe-1],255&Je,Je>>16,ge,Ce+(2*Pe-1)*E),v(G[Y+2*Pe+0],255&Qe,Qe>>16,ge,Ce+(2*Pe+0)*E)),Qe=Kt,pt=Ht}1&Oe||(Je=3*Qe+pt+131074>>2,v(D[z+Oe-1],255&Je,Je>>16,Ae,pe+(Oe-1)*E),G!=null&&(Je=3*pt+Qe+131074>>2,v(G[Y+Oe-1],255&Je,Je>>16,ge,Ce+(Oe-1)*E)))}}function Ve(){Di[Zd]=bA,Di[ef]=Ny,Di[wy]=xA,Di[tf]=Ay,Di[nf]=Ey,Di[fg]=ky,Di[_y]=SA,Di[pg]=Ny,Di[mg]=Ay,Di[rf]=Ey,Di[gg]=ky}function Ye(h){return h&-16384?0>h?0:255:h>>NA}function f(h,v){return Ye((19077*h>>8)+(26149*v>>8)-14234)}function C(h,v,E){return Ye((19077*h>>8)-(6419*v>>8)-(13320*E>>8)+8708)}function F(h,v){return Ye((19077*h>>8)+(33050*v>>8)-17685)}function X(h,v,E,D,z){D[z+0]=f(h,E),D[z+1]=C(h,v,E),D[z+2]=F(h,v)}function ve(h,v,E,D,z){D[z+0]=F(h,v),D[z+1]=C(h,v,E),D[z+2]=f(h,E)}function Ne(h,v,E,D,z){var G=C(h,v,E);v=G<<3&224|F(h,v)>>3,D[z+0]=248&f(h,E)|G>>5,D[z+1]=v}function Ue(h,v,E,D,z){var G=240&F(h,v)|15;D[z+0]=240&f(h,E)|C(h,v,E)>>4,D[z+1]=G}function St(h,v,E,D,z){D[z+0]=255,X(h,v,E,D,z+1)}function jt(h,v,E,D,z){ve(h,v,E,D,z),D[z+3]=255}function Nt(h,v,E,D,z){X(h,v,E,D,z),D[z+3]=255}function zt(h,v){return 0>h?0:h>v?v:h}function Zt(h,v,E){y[h]=function(D,z,G,Y,Z,ee,re,fe,xe){for(var Se=fe+(-2&xe)*E;fe!=Se;)v(D[z+0],G[Y+0],Z[ee+0],re,fe),v(D[z+1],G[Y+0],Z[ee+0],re,fe+E),z+=2,++Y,++ee,fe+=2*E;1&xe&&v(D[z+0],G[Y+0],Z[ee+0],re,fe)}}function Zi(h,v,E){return E==0?h==0?v==0?6:5:v==0?4:0:E}function ar(h,v,E,D,z){switch(h>>>30){case 3:fa(v,E,D,z,0);break;case 2:jn(v,E,D,z);break;case 1:Vr(v,E,D,z)}}function Is(h,v){var E,D,z=v.M,G=v.Nb,Y=h.oc,Z=h.pc+40,ee=h.oc,re=h.pc+584,fe=h.oc,xe=h.pc+600;for(E=0;16>E;++E)Y[Z+32*E-1]=129;for(E=0;8>E;++E)ee[re+32*E-1]=129,fe[xe+32*E-1]=129;for(0<z?Y[Z-1-32]=ee[re-1-32]=fe[xe-1-32]=129:(i(Y,Z-32-1,127,21),i(ee,re-32-1,127,9),i(fe,xe-32-1,127,9)),D=0;D<h.za;++D){var Se=v.ya[v.aa+D];if(0<D){for(E=-1;16>E;++E)r(Y,Z+32*E-4,Y,Z+32*E+12,4);for(E=-1;8>E;++E)r(ee,re+32*E-4,ee,re+32*E+4,4),r(fe,xe+32*E-4,fe,xe+32*E+4,4)}var we=h.Gd,je=h.Hd+D,Ae=Se.ad,pe=Se.Hc;if(0<z&&(r(Y,Z-32,we[je].y,0,16),r(ee,re-32,we[je].f,0,8),r(fe,xe-32,we[je].ea,0,8)),Se.Za){var ge=Y,Ce=Z-32+16;for(0<z&&(D>=h.za-1?i(ge,Ce,we[je].y[15],4):r(ge,Ce,we[je+1].y,0,4)),E=0;4>E;E++)ge[Ce+128+E]=ge[Ce+256+E]=ge[Ce+384+E]=ge[Ce+0+E];for(E=0;16>E;++E,pe<<=2)ge=Y,Ce=Z+Iy[E],es[Se.Ob[E]](ge,Ce),ar(pe,Ae,16*+E,ge,Ce)}else if(ge=Zi(D,z,Se.Ob[0]),lo[ge](Y,Z),pe!=0)for(E=0;16>E;++E,pe<<=2)ar(pe,Ae,16*+E,Y,Z+Iy[E]);for(E=Se.Gc,ge=Zi(D,z,Se.Dd),ma[ge](ee,re),ma[ge](fe,xe),pe=Ae,ge=ee,Ce=re,255&(Se=E>>0)&&(170&Se?rh(pe,256,ge,Ce):Pi(pe,256,ge,Ce)),Se=fe,pe=xe,255&(E>>=8)&&(170&E?rh(Ae,320,Se,pe):Pi(Ae,320,Se,pe)),z<h.Ub-1&&(r(we[je].y,0,Y,Z+480,16),r(we[je].f,0,ee,re+224,8),r(we[je].ea,0,fe,xe+224,8)),E=8*G*h.B,we=h.sa,je=h.ta+16*D+16*G*h.R,Ae=h.qa,Se=h.ra+8*D+E,pe=h.Ha,ge=h.Ia+8*D+E,E=0;16>E;++E)r(we,je+E*h.R,Y,Z+32*E,16);for(E=0;8>E;++E)r(Ae,Se+E*h.B,ee,re+32*E,8),r(pe,ge+E*h.B,fe,xe+32*E,8)}}function Cs(h,v,E,D,z,G,Y,Z,ee){var re=[0],fe=[0],xe=0,Se=ee!=null?ee.kd:0,we=ee??new eo;if(h==null||12>E)return 7;we.data=h,we.w=v,we.ha=E,v=[v],E=[E],we.gb=[we.gb];e:{var je=v,Ae=E,pe=we.gb;if(e(h!=null),e(Ae!=null),e(pe!=null),pe[0]=0,12<=Ae[0]&&!n(h,je[0],"RIFF")){if(n(h,je[0]+8,"WEBP")){pe=3;break e}var ge=Le(h,je[0]+4);if(12>ge||4294967286<ge){pe=3;break e}if(Se&&ge>Ae[0]-8){pe=7;break e}pe[0]=ge,je[0]+=12,Ae[0]-=12}pe=0}if(pe!=0)return pe;for(ge=0<we.gb[0],E=E[0];;){e:{var Ce=h;Ae=v,pe=E;var Oe=re,Pe=fe,Ze=je=[0];if((Je=xe=[xe])[0]=0,8>pe[0])pe=7;else{if(!n(Ce,Ae[0],"VP8X")){if(Le(Ce,Ae[0]+4)!=10){pe=3;break e}if(18>pe[0]){pe=7;break e}var Qe=Le(Ce,Ae[0]+8),pt=1+De(Ce,Ae[0]+12);if(2147483648<=pt*(Ce=1+De(Ce,Ae[0]+15))){pe=3;break e}Ze!=null&&(Ze[0]=Qe),Oe!=null&&(Oe[0]=pt),Pe!=null&&(Pe[0]=Ce),Ae[0]+=18,pe[0]-=18,Je[0]=1}pe=0}}if(xe=xe[0],je=je[0],pe!=0)return pe;if(Ae=!!(2&je),!ge&&xe)return 3;if(G!=null&&(G[0]=!!(16&je)),Y!=null&&(Y[0]=Ae),Z!=null&&(Z[0]=0),Y=re[0],je=fe[0],xe&&Ae&&ee==null){pe=0;break}if(4>E){pe=7;break}if(ge&&xe||!ge&&!xe&&!n(h,v[0],"ALPH")){E=[E],we.na=[we.na],we.P=[we.P],we.Sa=[we.Sa];e:{Qe=h,pe=v,ge=E;var Je=we.gb;Oe=we.na,Pe=we.P,Ze=we.Sa,pt=22,e(Qe!=null),e(ge!=null),Ce=pe[0];var Kt=ge[0];for(e(Oe!=null),e(Ze!=null),Oe[0]=null,Pe[0]=null,Ze[0]=0;;){if(pe[0]=Ce,ge[0]=Kt,8>Kt){pe=7;break e}var Ht=Le(Qe,Ce+4);if(4294967286<Ht){pe=3;break e}var Mt=8+Ht+1&-2;if(pt+=Mt,0<Je&&pt>Je){pe=3;break e}if(!n(Qe,Ce,"VP8 ")||!n(Qe,Ce,"VP8L")){pe=0;break e}if(Kt[0]<Mt){pe=7;break e}n(Qe,Ce,"ALPH")||(Oe[0]=Qe,Pe[0]=Ce+8,Ze[0]=Ht),Ce+=Mt,Kt-=Mt}}if(E=E[0],we.na=we.na[0],we.P=we.P[0],we.Sa=we.Sa[0],pe!=0)break}E=[E],we.Ja=[we.Ja],we.xa=[we.xa];e:if(Je=h,pe=v,ge=E,Oe=we.gb[0],Pe=we.Ja,Ze=we.xa,Qe=pe[0],Ce=!n(Je,Qe,"VP8 "),pt=!n(Je,Qe,"VP8L"),e(Je!=null),e(ge!=null),e(Pe!=null),e(Ze!=null),8>ge[0])pe=7;else{if(Ce||pt){if(Je=Le(Je,Qe+4),12<=Oe&&Je>Oe-12){pe=3;break e}if(Se&&Je>ge[0]-8){pe=7;break e}Pe[0]=Je,pe[0]+=8,ge[0]-=8,Ze[0]=pt}else Ze[0]=5<=ge[0]&&Je[Qe+0]==47&&!(Je[Qe+4]>>5),Pe[0]=ge[0];pe=0}if(E=E[0],we.Ja=we.Ja[0],we.xa=we.xa[0],v=v[0],pe!=0)break;if(4294967286<we.Ja)return 3;if(Z==null||Ae||(Z[0]=we.xa?2:1),Y=[Y],je=[je],we.xa){if(5>E){pe=7;break}Z=Y,Se=je,Ae=G,h==null||5>E?h=0:5<=E&&h[v+0]==47&&!(h[v+4]>>5)?(ge=[0],Je=[0],Oe=[0],K(Pe=new R,h,v,E),nt(Pe,ge,Je,Oe)?(Z!=null&&(Z[0]=ge[0]),Se!=null&&(Se[0]=Je[0]),Ae!=null&&(Ae[0]=Oe[0]),h=1):h=0):h=0}else{if(10>E){pe=7;break}Z=je,h==null||10>E||!ll(h,v+3,E-3)?h=0:(Se=h[v+0]|h[v+1]<<8|h[v+2]<<16,Ae=16383&(h[v+7]<<8|h[v+6]),h=16383&(h[v+9]<<8|h[v+8]),1&Se||3<(Se>>1&7)||!(Se>>4&1)||Se>>5>=we.Ja||!Ae||!h?h=0:(Y&&(Y[0]=Ae),Z&&(Z[0]=h),h=1))}if(!h||(Y=Y[0],je=je[0],xe&&(re[0]!=Y||fe[0]!=je)))return 3;ee!=null&&(ee[0]=we,ee.offset=v-ee.w,e(4294967286>v-ee.w),e(ee.offset==ee.ha-E));break}return pe==0||pe==7&&xe&&ee==null?(G!=null&&(G[0]|=we.na!=null&&0<we.na.length),D!=null&&(D[0]=Y),z!=null&&(z[0]=je),0):pe}function Zu(h,v,E){var D=v.width,z=v.height,G=0,Y=0,Z=D,ee=z;if(v.Da=h!=null&&0<h.Da,v.Da&&(Z=h.cd,ee=h.bd,G=h.v,Y=h.j,11>E||(G&=-2,Y&=-2),0>G||0>Y||0>=Z||0>=ee||G+Z>D||Y+ee>z))return 0;if(v.v=G,v.j=Y,v.va=G+Z,v.o=Y+ee,v.U=Z,v.T=ee,v.da=h!=null&&0<h.da,v.da){if(!We(Z,ee,E=[h.ib],G=[h.hb]))return 0;v.ib=E[0],v.hb=G[0]}return v.ob=h!=null&&h.ob,v.Kb=h==null||!h.Sd,v.da&&(v.ob=v.ib<3*D/4&&v.hb<3*z/4,v.Kb=0),1}function eh(h){if(h==null)return 2;if(11>h.S){var v=h.f.RGBA;v.fb+=(h.height-1)*v.A,v.A=-v.A}else v=h.f.kb,h=h.height,v.O+=(h-1)*v.fa,v.fa=-v.fa,v.N+=(h-1>>1)*v.Ab,v.Ab=-v.Ab,v.W+=(h-1>>1)*v.Db,v.Db=-v.Db,v.F!=null&&(v.J+=(h-1)*v.lb,v.lb=-v.lb);return 0}function bc(h,v,E,D){if(D==null||0>=h||0>=v)return 2;if(E!=null){if(E.Da){var z=E.cd,G=E.bd,Y=-2&E.v,Z=-2&E.j;if(0>Y||0>Z||0>=z||0>=G||Y+z>h||Z+G>v)return 2;h=z,v=G}if(E.da){if(!We(h,v,z=[E.ib],G=[E.hb]))return 2;h=z[0],v=G[0]}}D.width=h,D.height=v;e:{var ee=D.width,re=D.height;if(h=D.S,0>=ee||0>=re||!(h>=Zd&&13>h))h=2;else{if(0>=D.Rd&&D.sd==null){Y=G=z=v=0;var fe=(Z=ee*Cy[h])*re;if(11>h||(G=(re+1)/2*(v=(ee+1)/2),h==12&&(Y=(z=ee)*re)),(re=s(fe+2*G+Y))==null){h=1;break e}D.sd=re,11>h?((ee=D.f.RGBA).eb=re,ee.fb=0,ee.A=Z,ee.size=fe):((ee=D.f.kb).y=re,ee.O=0,ee.fa=Z,ee.Fd=fe,ee.f=re,ee.N=0+fe,ee.Ab=v,ee.Cd=G,ee.ea=re,ee.W=0+fe+G,ee.Db=v,ee.Ed=G,h==12&&(ee.F=re,ee.J=0+fe+2*G),ee.Tc=Y,ee.lb=z)}if(v=1,z=D.S,G=D.width,Y=D.height,z>=Zd&&13>z)if(11>z)h=D.f.RGBA,v&=(Z=Math.abs(h.A))*(Y-1)+G<=h.size,v&=Z>=G*Cy[z],v&=h.eb!=null;else{h=D.f.kb,Z=(G+1)/2,fe=(Y+1)/2,ee=Math.abs(h.fa),re=Math.abs(h.Ab);var xe=Math.abs(h.Db),Se=Math.abs(h.lb),we=Se*(Y-1)+G;v&=ee*(Y-1)+G<=h.Fd,v&=re*(fe-1)+Z<=h.Cd,v=(v&=xe*(fe-1)+Z<=h.Ed)&ee>=G&re>=Z&xe>=Z,v&=h.y!=null,v&=h.f!=null,v&=h.ea!=null,z==12&&(v&=Se>=G,v&=we<=h.Tc,v&=h.F!=null)}else v=0;h=v?0:2}}return h!=0||E!=null&&E.fd&&(h=eh(D)),h}var or=64,xc=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Sc=24,Nc=32,th=8,Xr=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Ee("Predictor0","PredictorAdd0"),y.Predictor0=function(){return 4278190080},y.Predictor1=function(h){return h},y.Predictor2=function(h,v,E){return v[E+0]},y.Predictor3=function(h,v,E){return v[E+1]},y.Predictor4=function(h,v,E){return v[E-1]},y.Predictor5=function(h,v,E){return Ke(Ke(h,v[E+1]),v[E+0])},y.Predictor6=function(h,v,E){return Ke(h,v[E-1])},y.Predictor7=function(h,v,E){return Ke(h,v[E+0])},y.Predictor8=function(h,v,E){return Ke(v[E-1],v[E+0])},y.Predictor9=function(h,v,E){return Ke(v[E+0],v[E+1])},y.Predictor10=function(h,v,E){return Ke(Ke(h,v[E-1]),Ke(v[E+0],v[E+1]))},y.Predictor11=function(h,v,E){var D=v[E+0];return 0>=at(D>>24&255,h>>24&255,(v=v[E-1])>>24&255)+at(D>>16&255,h>>16&255,v>>16&255)+at(D>>8&255,h>>8&255,v>>8&255)+at(255&D,255&h,255&v)?D:h},y.Predictor12=function(h,v,E){var D=v[E+0];return($e((h>>24&255)+(D>>24&255)-((v=v[E-1])>>24&255))<<24|$e((h>>16&255)+(D>>16&255)-(v>>16&255))<<16|$e((h>>8&255)+(D>>8&255)-(v>>8&255))<<8|$e((255&h)+(255&D)-(255&v)))>>>0},y.Predictor13=function(h,v,E){var D=v[E-1];return(Ge((h=Ke(h,v[E+0]))>>24&255,D>>24&255)<<24|Ge(h>>16&255,D>>16&255)<<16|Ge(h>>8&255,D>>8&255)<<8|Ge(h>>0&255,D>>0&255))>>>0};var hg=y.PredictorAdd0;y.PredictorAdd1=tt,Ee("Predictor2","PredictorAdd2"),Ee("Predictor3","PredictorAdd3"),Ee("Predictor4","PredictorAdd4"),Ee("Predictor5","PredictorAdd5"),Ee("Predictor6","PredictorAdd6"),Ee("Predictor7","PredictorAdd7"),Ee("Predictor8","PredictorAdd8"),Ee("Predictor9","PredictorAdd9"),Ee("Predictor10","PredictorAdd10"),Ee("Predictor11","PredictorAdd11"),Ee("Predictor12","PredictorAdd12"),Ee("Predictor13","PredictorAdd13");var nh=y.PredictorAdd2;ct("ColorIndexInverseTransform","MapARGB","32b",function(h){return h>>8&255},function(h){return h}),ct("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(h){return h},function(h){return h>>8&255});var Wd,Ci=y.ColorIndexInverseTransform,Ac=y.MapARGB,Gd=y.VP8LColorIndexInverseTransformAlpha,Qd=y.MapAlpha,io=y.VP8LPredictorsAdd=[];io.length=16,(y.VP8LPredictors=[]).length=16,(y.VP8LPredictorsAdd_C=[]).length=16,(y.VP8LPredictors_C=[]).length=16;var _l,Zr,Mr,so,ha,da,Ec,fa,jn,rh,Vr,Pi,kc,Yd,ih,bl,xl,ao,Sl,Tc,Nl,oo,sh,ji,Li,nn,rn,Ln,Qn=s(511),pa=s(2041),ah=s(225),Ic=s(767),Jd=0,dg=pa,Xd=ah,vi=Ic,Ri=Qn,Zd=0,ef=1,wy=2,tf=3,nf=4,fg=5,_y=6,pg=7,mg=8,rf=9,gg=10,oA=[2,3,7],lA=[3,3,11],by=[280,256,256,256,40],cA=[0,1,1,1,0],uA=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],hA=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],dA=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],fA=8,vg=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],yg=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],oh=null,pA=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],mA=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],xy=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],gA=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],vA=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],yA=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],wA=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],lo=[],es=[],ma=[],_A=1,Sy=2,co=[],Di=[];Te("UpsampleRgbLinePair",X,3),Te("UpsampleBgrLinePair",ve,3),Te("UpsampleRgbaLinePair",Nt,4),Te("UpsampleBgraLinePair",jt,4),Te("UpsampleArgbLinePair",St,4),Te("UpsampleRgba4444LinePair",Ue,2),Te("UpsampleRgb565LinePair",Ne,2);var bA=y.UpsampleRgbLinePair,xA=y.UpsampleBgrLinePair,Ny=y.UpsampleRgbaLinePair,Ay=y.UpsampleBgraLinePair,Ey=y.UpsampleArgbLinePair,ky=y.UpsampleRgba4444LinePair,SA=y.UpsampleRgb565LinePair,sf=16,af=1<<sf-1,lh=-227,wg=482,NA=6,Ty=0,AA=s(256),EA=s(256),kA=s(256),TA=s(256),IA=s(wg-lh),CA=s(wg-lh);Zt("YuvToRgbRow",X,3),Zt("YuvToBgrRow",ve,3),Zt("YuvToRgbaRow",Nt,4),Zt("YuvToBgraRow",jt,4),Zt("YuvToArgbRow",St,4),Zt("YuvToRgba4444Row",Ue,2),Zt("YuvToRgb565Row",Ne,2);var Iy=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],of=[0,2,8],PA=[8,7,6,4,4,2,2,2,1,1,1,1],jA=1;this.WebPDecodeRGBA=function(h,v,E,D,z){var G=ef,Y=new ca,Z=new Wn;Y.ba=Z,Z.S=G,Z.width=[Z.width],Z.height=[Z.height];var ee=Z.width,re=Z.height,fe=new Nn;if(fe==null||h==null)var xe=2;else e(fe!=null),xe=Cs(h,v,E,fe.width,fe.height,fe.Pd,fe.Qd,fe.format,null);if(xe!=0?ee=0:(ee!=null&&(ee[0]=fe.width[0]),re!=null&&(re[0]=fe.height[0]),ee=1),ee){Z.width=Z.width[0],Z.height=Z.height[0],D!=null&&(D[0]=Z.width),z!=null&&(z[0]=Z.height);e:{if(D=new ra,(z=new eo).data=h,z.w=v,z.ha=E,z.kd=1,v=[0],e(z!=null),((h=Cs(z.data,z.w,z.ha,null,null,null,v,null,z))==0||h==7)&&v[0]&&(h=4),(v=h)==0){if(e(Y!=null),D.data=z.data,D.w=z.w+z.offset,D.ha=z.ha-z.offset,D.put=mn,D.ac=Jt,D.bc=di,D.ma=Y,z.xa){if((h=Pn())==null){Y=1;break e}if(function(Se,we){var je=[0],Ae=[0],pe=[0];t:for(;;){if(Se==null)return 0;if(we==null)return Se.a=2,0;if(Se.l=we,Se.a=0,K(Se.m,we.data,we.w,we.ha),!nt(Se.m,je,Ae,pe)){Se.a=3;break t}if(Se.xb=Sy,we.width=je[0],we.height=Ae[0],!fi(je[0],Ae[0],1,Se,null))break t;return 1}return e(Se.a!=0),0}(h,D)){if(D=(v=bc(D.width,D.height,Y.Oa,Y.ba))==0){t:{D=h;n:for(;;){if(D==null){D=0;break t}if(e(D.s.yc!=null),e(D.s.Ya!=null),e(0<D.s.Wb),e((E=D.l)!=null),e((z=E.ma)!=null),D.xb!=0){if(D.ca=z.ba,D.tb=z.tb,e(D.ca!=null),!Zu(z.Oa,E,tf)){D.a=2;break n}if(!ws(D,E.width)||E.da)break n;if((E.da||xt(D.ca.S))&&ye(),11>D.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),D.ca.f.kb.F!=null&&ye()),D.Pb&&0<D.s.ua&&D.s.vb.X==null&&!Xe(D.s.vb,D.s.Wa.Xa)){D.a=1;break n}D.xb=0}if(!Dr(D,D.V,D.Ba,D.c,D.i,E.o,Ua))break n;z.Dc=D.Ma,D=1;break t}e(D.a!=0),D=0}D=!D}D&&(v=h.a)}else v=h.a}else{if((h=new ol)==null){Y=1;break e}if(h.Fa=z.na,h.P=z.P,h.qc=z.Sa,cl(h,D)){if((v=bc(D.width,D.height,Y.Oa,Y.ba))==0){if(h.Aa=0,E=Y.Oa,e((z=h)!=null),E!=null){if(0<(ee=0>(ee=E.Md)?0:100<ee?255:255*ee/100)){for(re=fe=0;4>re;++re)12>(xe=z.pb[re]).lc&&(xe.ia=ee*PA[0>xe.lc?0:xe.lc]>>3),fe|=xe.ia;fe&&(alert("todo:VP8InitRandom"),z.ia=1)}z.Ga=E.Id,100<z.Ga?z.Ga=100:0>z.Ga&&(z.Ga=0)}pc(h,D)||(v=h.a)}}else v=h.a}v==0&&Y.Oa!=null&&Y.Oa.fd&&(v=eh(Y.ba))}Y=v}G=Y!=0?null:11>G?Z.f.RGBA.eb:Z.f.kb.y}else G=null;return G};var Cy=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function u(y,S){for(var L="",A=0;A<4;A++)L+=String.fromCharCode(y[S++]);return L}function d(y,S){return(y[S+0]<<0|y[S+1]<<8|y[S+2]<<16)>>>0}function p(y,S){return(y[S+0]<<0|y[S+1]<<8|y[S+2]<<16|y[S+3]<<24)>>>0}new l;var m=[0],g=[0],x=[],b=new l,k=t,w=function(y,S){var L={},A=0,T=!1,I=0,M=0;if(L.frames=[],!function($,J,W,ae){for(var le=0;le<ae;le++)if($[J+le]!=W.charCodeAt(le))return!0;return!1}(y,S,"RIFF",4)){var ne,V;for(p(y,S+=4),S+=8;S<y.length;){var U=u(y,S),K=p(y,S+=4);S+=4;var H=K+(1&K);switch(U){case"VP8 ":case"VP8L":L.frames[A]===void 0&&(L.frames[A]={}),(R=L.frames[A]).src_off=T?M:S-8,R.src_size=I+K+8,A++,T&&(T=!1,I=0,M=0);break;case"VP8X":(R=L.header={}).feature_flags=y[S];var te=S+4;R.canvas_width=1+d(y,te),te+=3,R.canvas_height=1+d(y,te),te+=3;break;case"ALPH":T=!0,I=H+8,M=S-8;break;case"ANIM":(R=L.header).bgcolor=p(y,S),te=S+4,R.loop_count=(ne=y)[(V=te)+0]<<0|ne[V+1]<<8,te+=2;break;case"ANMF":var me,R;(R=L.frames[A]={}).offset_x=2*d(y,S),S+=3,R.offset_y=2*d(y,S),S+=3,R.width=1+d(y,S),S+=3,R.height=1+d(y,S),S+=3,R.duration=d(y,S),S+=3,me=y[S++],R.dispose=1&me,R.blend=me>>1&1}U!="ANMF"&&(S+=H)}return L}}(k,0);w.response=k,w.rgbaoutput=!0,w.dataurl=!1;var N=w.header?w.header:null,j=w.frames?w.frames:null;if(N){N.loop_counter=N.loop_count,m=[N.canvas_height],g=[N.canvas_width];for(var O=0;O<j.length&&j[O].blend!=0;O++);}var Q=j[0],B=b.WebPDecodeRGBA(k,Q.src_off,Q.src_size,g,m);Q.rgba=B,Q.imgwidth=g[0],Q.imgheight=m[0];for(var P=0;P<g[0]*m[0]*4;P++)x[P]=B[P];return this.width=g,this.height=m,this.data=x,this}(function(t){var e=function(){return typeof iv=="function"},n=function(m,g,x,b){var k=4,w=a;switch(b){case t.image_compression.FAST:k=1,w=s;break;case t.image_compression.MEDIUM:k=6,w=o;break;case t.image_compression.SLOW:k=9,w=l}m=r(m,g,x,w);var N=iv(m,{level:k});return t.__addimage__.arrayBufferToBinaryString(N)},r=function(m,g,x,b){for(var k,w,N,j=m.length/g,O=new Uint8Array(m.length+j),Q=d(),B=0;B<j;B+=1){if(N=B*g,k=m.subarray(N,N+g),b)O.set(b(k,x,w),N+B);else{for(var P,y=Q.length,S=[];P<y;P+=1)S[P]=Q[P](k,x,w);var L=p(S.concat());O.set(S[L],N+B)}w=k}return O},i=function(m){var g=Array.apply([],m);return g.unshift(0),g},s=function(m,g){var x,b=[],k=m.length;b[0]=1;for(var w=0;w<k;w+=1)x=m[w-g]||0,b[w+1]=m[w]-x+256&255;return b},a=function(m,g,x){var b,k=[],w=m.length;k[0]=2;for(var N=0;N<w;N+=1)b=x&&x[N]||0,k[N+1]=m[N]-b+256&255;return k},o=function(m,g,x){var b,k,w=[],N=m.length;w[0]=3;for(var j=0;j<N;j+=1)b=m[j-g]||0,k=x&&x[j]||0,w[j+1]=m[j]+256-(b+k>>>1)&255;return w},l=function(m,g,x){var b,k,w,N,j=[],O=m.length;j[0]=4;for(var Q=0;Q<O;Q+=1)b=m[Q-g]||0,k=x&&x[Q]||0,w=x&&x[Q-g]||0,N=u(b,k,w),j[Q+1]=m[Q]-N+256&255;return j},u=function(m,g,x){if(m===g&&g===x)return m;var b=Math.abs(g-x),k=Math.abs(m-x),w=Math.abs(m+g-x-x);return b<=k&&b<=w?m:k<=w?g:x},d=function(){return[i,s,a,o,l]},p=function(m){var g=m.map(function(x){return x.reduce(function(b,k){return b+Math.abs(k)},0)});return g.indexOf(Math.min.apply(null,g))};t.processPNG=function(m,g,x,b){var k,w,N,j,O,Q,B,P,y,S,L,A,T,I,M,ne=this.decode.FLATE_DECODE,V="";if(this.__addimage__.isArrayBuffer(m)&&(m=new Uint8Array(m)),this.__addimage__.isArrayBufferView(m)){if(m=(N=new kD(m)).imgData,w=N.bits,k=N.colorSpace,O=N.colors,[4,6].indexOf(N.colorType)!==-1){if(N.bits===8){y=(P=N.pixelBitlength==32?new Uint32Array(N.decodePixels().buffer):N.pixelBitlength==16?new Uint16Array(N.decodePixels().buffer):new Uint8Array(N.decodePixels().buffer)).length,L=new Uint8Array(y*N.colors),S=new Uint8Array(y);var U,K=N.pixelBitlength-N.bits;for(I=0,M=0;I<y;I++){for(T=P[I],U=0;U<K;)L[M++]=T>>>U&255,U+=N.bits;S[I]=T>>>U&255}}if(N.bits===16){y=(P=new Uint32Array(N.decodePixels().buffer)).length,L=new Uint8Array(y*(32/N.pixelBitlength)*N.colors),S=new Uint8Array(y*(32/N.pixelBitlength)),A=N.colors>1,I=0,M=0;for(var H=0;I<y;)T=P[I++],L[M++]=T>>>0&255,A&&(L[M++]=T>>>16&255,T=P[I++],L[M++]=T>>>0&255),S[H++]=T>>>16&255;w=8}b!==t.image_compression.NONE&&e()?(m=n(L,N.width*N.colors,N.colors,b),B=n(S,N.width,1,b)):(m=L,B=S,ne=void 0)}if(N.colorType===3&&(k=this.color_spaces.INDEXED,Q=N.palette,N.transparency.indexed)){var te=N.transparency.indexed,me=0;for(I=0,y=te.length;I<y;++I)me+=te[I];if((me/=255)===y-1&&te.indexOf(0)!==-1)j=[te.indexOf(0)];else if(me!==y){for(P=N.decodePixels(),S=new Uint8Array(P.length),I=0,y=P.length;I<y;I++)S[I]=te[P[I]];B=n(S,N.width,1)}}var R=function($){var J;switch($){case t.image_compression.FAST:J=11;break;case t.image_compression.MEDIUM:J=13;break;case t.image_compression.SLOW:J=14;break;default:J=12}return J}(b);return ne===this.decode.FLATE_DECODE&&(V="/Predictor "+R+" "),V+="/Colors "+O+" /BitsPerComponent "+w+" /Columns "+N.width,(this.__addimage__.isArrayBuffer(m)||this.__addimage__.isArrayBufferView(m))&&(m=this.__addimage__.arrayBufferToBinaryString(m)),(B&&this.__addimage__.isArrayBuffer(B)||this.__addimage__.isArrayBufferView(B))&&(B=this.__addimage__.arrayBufferToBinaryString(B)),{alias:x,data:m,index:g,filter:ne,decodeParameters:V,transparency:j,palette:Q,sMask:B,predictor:R,width:N.width,height:N.height,bitsPerComponent:w,colorSpace:k}}}})(gt.API),function(t){t.processGIF89A=function(e,n,r,i){var s=new TD(e),a=s.width,o=s.height,l=[];s.decodeAndBlitFrameRGBA(0,l);var u={data:l,width:a,height:o},d=new N1(100).encode(u,100);return t.processJPEG.call(this,d,n,r,i)},t.processGIF87A=t.processGIF89A}(gt.API),is.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var n=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:i,green:r,blue:n,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},is.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(n){tn.log("bit decode error:"+n)}},is.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),n=e%4;for(t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<e;i++)for(var s=this.datav.getUint8(this.pos++,!0),a=r*this.width*4+8*i*4,o=0;o<8&&8*i+o<this.width;o++){var l=this.palette[s>>7-o&1];this.data[a+4*o]=l.blue,this.data[a+4*o+1]=l.green,this.data[a+4*o+2]=l.red,this.data[a+4*o+3]=255}n!==0&&(this.pos+=4-n)}},is.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<t;i++){var s=this.datav.getUint8(this.pos++,!0),a=r*this.width*4+2*i*4,o=s>>4,l=15&s,u=this.palette[o];if(this.data[a]=u.blue,this.data[a+1]=u.green,this.data[a+2]=u.red,this.data[a+3]=255,2*i+1>=this.width)break;u=this.palette[l],this.data[a+4]=u.blue,this.data[a+4+1]=u.green,this.data[a+4+2]=u.red,this.data[a+4+3]=255}e!==0&&(this.pos+=4-e)}},is.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),s=n*this.width*4+4*r;if(i<this.palette.length){var a=this.palette[i];this.data[s]=a.red,this.data[s+1]=a.green,this.data[s+2]=a.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}t!==0&&(this.pos+=4-t)}},is.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<this.width;i++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(s&e)/e*255|0,o=(s>>5&e)/e*255|0,l=(s>>10&e)/e*255|0,u=s>>15?255:0,d=r*this.width*4+4*i;this.data[d]=l,this.data[d+1]=o,this.data[d+2]=a,this.data[d+3]=u}this.pos+=t}},is.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),n=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,s=0;s<this.width;s++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(a&e)/e*255|0,l=(a>>5&n)/n*255|0,u=(a>>11)/e*255|0,d=i*this.width*4+4*s;this.data[d]=u,this.data[d+1]=l,this.data[d+2]=o,this.data[d+3]=255}this.pos+=t}},is.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=e*this.width*4+4*n;this.data[a]=s,this.data[a+1]=i,this.data[a+2]=r,this.data[a+3]=255}this.pos+=this.width%4}},is.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*n;this.data[o]=s,this.data[o+1]=i,this.data[o+2]=r,this.data[o+3]=a}},is.prototype.getData=function(){return this.data},function(t){t.processBMP=function(e,n,r,i){var s=new is(e,!1),a=s.width,o=s.height,l={data:s.getData(),width:a,height:o},u=new N1(100).encode(l,100);return t.processJPEG.call(this,u,n,r,i)}}(gt.API),Q_.prototype.getData=function(){return this.data},function(t){t.processWEBP=function(e,n,r,i){var s=new Q_(e),a=s.width,o=s.height,l={data:s.getData(),width:a,height:o},u=new N1(100).encode(l,100);return t.processJPEG.call(this,u,n,r,i)}}(gt.API),gt.API.processRGBA=function(t,e,n){for(var r=t.data,i=r.length,s=new Uint8Array(i/4*3),a=new Uint8Array(i/4),o=0,l=0,u=0;u<i;u+=4){var d=r[u],p=r[u+1],m=r[u+2],g=r[u+3];s[o++]=d,s[o++]=p,s[o++]=m,a[l++]=g}var x=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(a),data:x,index:e,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},gt.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Oc=gt.API,$f=Oc.getCharWidthsArray=function(t,e){var n,r,i=(e=e||{}).font||this.internal.getFont(),s=e.fontSize||this.internal.getFontSize(),a=e.charSpace||this.internal.getCharSpace(),o=e.widths?e.widths:i.metadata.Unicode.widths,l=o.fof?o.fof:1,u=e.kerning?e.kerning:i.metadata.Unicode.kerning,d=u.fof?u.fof:1,p=e.doKerning!==!1,m=0,g=t.length,x=0,b=o[0]||l,k=[];for(n=0;n<g;n++)r=t.charCodeAt(n),typeof i.metadata.widthOfString=="function"?k.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(r))+a*(1e3/s)||0)/1e3):(m=p&&Gt(u[r])==="object"&&!isNaN(parseInt(u[r][x],10))?u[r][x]/d:0,k.push((o[r]||b)/l+m)),x=r;return k},$_=Oc.getStringUnitWidth=function(t,e){var n=(e=e||{}).fontSize||this.internal.getFontSize(),r=e.font||this.internal.getFont(),i=e.charSpace||this.internal.getCharSpace();return Oc.processArabic&&(t=Oc.processArabic(t)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(t,n,i)/n:$f.apply(this,arguments).reduce(function(s,a){return s+a},0)},H_=function(t,e,n,r){for(var i=[],s=0,a=t.length,o=0;s!==a&&o+e[s]<n;)o+=e[s],s++;i.push(t.slice(0,s));var l=s;for(o=0;s!==a;)o+e[s]>r&&(i.push(t.slice(l,s)),o=0,l=s),o+=e[s],s++;return l!==s&&i.push(t.slice(l,s)),i},W_=function(t,e,n){n||(n={});var r,i,s,a,o,l,u,d=[],p=[d],m=n.textIndent||0,g=0,x=0,b=t.split(" "),k=$f.apply(this,[" ",n])[0];if(l=n.lineIndent===-1?b[0].length+2:n.lineIndent||0){var w=Array(l).join(" "),N=[];b.map(function(O){(O=O.split(/\s*\n/)).length>1?N=N.concat(O.map(function(Q,B){return(B&&Q.length?`
`:"")+Q})):N.push(O[0])}),b=N,l=$_.apply(this,[w,n])}for(s=0,a=b.length;s<a;s++){var j=0;if(r=b[s],l&&r[0]==`
`&&(r=r.substr(1),j=1),m+g+(x=(i=$f.apply(this,[r,n])).reduce(function(O,Q){return O+Q},0))>e||j){if(x>e){for(o=H_.apply(this,[r,i,e-(m+g),e]),d.push(o.shift()),d=[o.pop()];o.length;)p.push([o.shift()]);x=i.slice(r.length-(d[0]?d[0].length:0)).reduce(function(O,Q){return O+Q},0)}else d=[r];p.push(d),m=x+l,g=k}else d.push(r),m+=g+x,g=k}return u=l?function(O,Q){return(Q?w:"")+O.join(" ")}:function(O){return O.join(" ")},p.map(u)},Oc.splitTextToSize=function(t,e,n){var r,i=(n=n||{}).fontSize||this.internal.getFontSize(),s=(function(d){if(d.widths&&d.kerning)return{widths:d.widths,kerning:d.kerning};var p=this.internal.getFont(d.fontName,d.fontStyle);return p.metadata.Unicode?{widths:p.metadata.Unicode.widths||{0:1},kerning:p.metadata.Unicode.kerning||{}}:{font:p.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,n);r=Array.isArray(t)?t:String(t).split(/\r?\n/);var a=1*this.internal.scaleFactor*e/i;s.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/i:0,s.lineIndent=n.lineIndent;var o,l,u=[];for(o=0,l=r.length;o<l;o++)u=u.concat(W_.apply(this,[r[o],a,s]));return u},function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",n={},r={},i=0;i<e.length;i++)n[e[i]]="0123456789abcdef"[i],r["0123456789abcdef"[i]]=e[i];var s=function(p){return"0x"+parseInt(p,10).toString(16)},a=t.__fontmetrics__.compress=function(p){var m,g,x,b,k=["{"];for(var w in p){if(m=p[w],isNaN(parseInt(w,10))?g="'"+w+"'":(w=parseInt(w,10),g=(g=s(w).slice(2)).slice(0,-1)+r[g.slice(-1)]),typeof m=="number")m<0?(x=s(m).slice(3),b="-"):(x=s(m).slice(2),b=""),x=b+x.slice(0,-1)+r[x.slice(-1)];else{if(Gt(m)!=="object")throw new Error("Don't know what to do with value type "+Gt(m)+".");x=a(m)}k.push(g+x)}return k.push("}"),k.join("")},o=t.__fontmetrics__.uncompress=function(p){if(typeof p!="string")throw new Error("Invalid argument passed to uncompress.");for(var m,g,x,b,k={},w=1,N=k,j=[],O="",Q="",B=p.length-1,P=1;P<B;P+=1)(b=p[P])=="'"?m?(x=m.join(""),m=void 0):m=[]:m?m.push(b):b=="{"?(j.push([N,x]),N={},x=void 0):b=="}"?((g=j.pop())[0][g[1]]=N,x=void 0,N=g[0]):b=="-"?w=-1:x===void 0?n.hasOwnProperty(b)?(O+=n[b],x=parseInt(O,16)*w,w=1,O=""):O+=b:n.hasOwnProperty(b)?(Q+=n[b],N[x]=parseInt(Q,16)*w,w=1,x=void 0,Q=""):Q+=b;return k},l={codePages:["WinAnsiEncoding"],WinAnsiEncoding:o("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},u={Unicode:{Courier:l,"Courier-Bold":l,"Courier-BoldOblique":l,"Courier-Oblique":l,Helvetica:l,"Helvetica-Bold":l,"Helvetica-BoldOblique":l,"Helvetica-Oblique":l,"Times-Roman":l,"Times-Bold":l,"Times-BoldItalic":l,"Times-Italic":l}},d={Unicode:{"Courier-Oblique":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":o("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":o("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":o("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:o("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:o("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":o("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:o("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":o("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":o("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":o("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(p){var m=p.font,g=d.Unicode[m.postScriptName];g&&(m.metadata.Unicode={},m.metadata.Unicode.widths=g.widths,m.metadata.Unicode.kerning=g.kerning);var x=u.Unicode[m.postScriptName];x&&(m.metadata.Unicode.encoding=x,m.encoding=x.codePages[0])}])}(gt.API),function(t){var e=function(n){for(var r=n.length,i=new Uint8Array(r),s=0;s<r;s++)i[s]=n.charCodeAt(s);return i};t.API.events.push(["addFont",function(n){var r=void 0,i=n.font,s=n.instance;if(!i.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(r=s.existsFileInVFS(i.postScriptName)===!1?s.loadFile(i.postScriptName):s.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(a,o){o=/^\x00\x01\x00\x00/.test(o)?e(o):e(Jh(o)),a.metadata=t.API.TTFFont.open(o),a.metadata.Unicode=a.metadata.Unicode||{encoding:{},kerning:{},widths:[]},a.metadata.glyIdsUsed=[0]})(i,r)}}])}(gt),function(t){function e(){return(yt.canvg?Promise.resolve(yt.canvg):Z0(()=>import("./index.es-xQFFYnfO.js"),[])).catch(function(n){return Promise.reject(new Error("Could not load canvg: "+n))}).then(function(n){return n.default?n.default:n})}gt.API.addSvgAsImage=function(n,r,i,s,a,o,l,u){if(isNaN(r)||isNaN(i))throw tn.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(s)||isNaN(a))throw tn.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var d=document.createElement("canvas");d.width=s,d.height=a;var p=d.getContext("2d");p.fillStyle="#fff",p.fillRect(0,0,d.width,d.height);var m={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},g=this;return e().then(function(x){return x.fromString(p,n,m)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(x){return x.render(m)}).then(function(){g.addImage(d.toDataURL("image/jpeg",1),r,i,s,a,l,u)})}}(),gt.API.putTotalPages=function(t){var e,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),n=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var i=0;i<this.internal.pages[r].length;i++)this.internal.pages[r][i]=this.internal.pages[r][i].replace(e,n);return this},gt.API.viewerPreferences=function(t,e){var n;t=t||{},e=e||!1;var r,i,s,a={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},o=Object.keys(a),l=[],u=0,d=0,p=0;function m(x,b){var k,w=!1;for(k=0;k<x.length;k+=1)x[k]===b&&(w=!0);return w}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(a)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,t==="reset"||e===!0){var g=o.length;for(p=0;p<g;p+=1)n[o[p]].value=n[o[p]].defaultValue,n[o[p]].explicitSet=!1}if(Gt(t)==="object"){for(i in t)if(s=t[i],m(o,i)&&s!==void 0){if(n[i].type==="boolean"&&typeof s=="boolean")n[i].value=s;else if(n[i].type==="name"&&m(n[i].valueSet,s))n[i].value=s;else if(n[i].type==="integer"&&Number.isInteger(s))n[i].value=s;else if(n[i].type==="array"){for(u=0;u<s.length;u+=1)if(r=!0,s[u].length===1&&typeof s[u][0]=="number")l.push(String(s[u]-1));else if(s[u].length>1){for(d=0;d<s[u].length;d+=1)typeof s[u][d]!="number"&&(r=!1);r===!0&&l.push([s[u][0]-1,s[u][1]-1].join(" "))}n[i].value="["+l.join(" ")+"]"}else n[i].value=n[i].defaultValue;n[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var x,b=[];for(x in n)n[x].explicitSet===!0&&(n[x].type==="name"?b.push("/"+x+" /"+n[x].value):b.push("/"+x+" "+n[x].value));b.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+b.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},function(t){var e=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(r)),a=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),o=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),l=unescape(encodeURIComponent("</x:xmpmeta>")),u=s.length+a.length+o.length+i.length+l.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+u+" >>"),this.internal.write("stream"),this.internal.write(i+s+a+o+l),this.internal.write("endstream"),this.internal.write("endobj")},n=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(r,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",n),this.internal.events.subscribe("postPutResources",e)),this}}(gt.API),function(t){var e=t.API,n=e.pdfEscape16=function(s,a){for(var o,l=a.metadata.Unicode.widths,u=["","0","00","000","0000"],d=[""],p=0,m=s.length;p<m;++p){if(o=a.metadata.characterToGlyph(s.charCodeAt(p)),a.metadata.glyIdsUsed.push(o),a.metadata.toUnicode[o]=s.charCodeAt(p),l.indexOf(o)==-1&&(l.push(o),l.push([parseInt(a.metadata.widthOfGlyph(o),10)])),o=="0")return d.join("");o=o.toString(16),d.push(u[4-o.length],o)}return d.join("")},r=function(s){var a,o,l,u,d,p,m;for(d=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,l=[],p=0,m=(o=Object.keys(s).sort(function(g,x){return g-x})).length;p<m;p++)a=o[p],l.length>=100&&(d+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar`,l=[]),s[a]!==void 0&&s[a]!==null&&typeof s[a].toString=="function"&&(u=("0000"+s[a].toString(16)).slice(-4),a=("0000"+(+a).toString(16)).slice(-4),l.push("<"+a+"><"+u+">"));return l.length&&(d+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar
`),d+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(s){(function(a){var o=a.font,l=a.out,u=a.newObject,d=a.putStream;if(o.metadata instanceof t.API.TTFFont&&o.encoding==="Identity-H"){for(var p=o.metadata.Unicode.widths,m=o.metadata.subset.encode(o.metadata.glyIdsUsed,1),g="",x=0;x<m.length;x++)g+=String.fromCharCode(m[x]);var b=u();d({data:g,addLength1:!0,objectId:b}),l("endobj");var k=u();d({data:r(o.metadata.toUnicode),addLength1:!0,objectId:k}),l("endobj");var w=u();l("<<"),l("/Type /FontDescriptor"),l("/FontName /"+Kc(o.fontName)),l("/FontFile2 "+b+" 0 R"),l("/FontBBox "+t.API.PDFObject.convert(o.metadata.bbox)),l("/Flags "+o.metadata.flags),l("/StemV "+o.metadata.stemV),l("/ItalicAngle "+o.metadata.italicAngle),l("/Ascent "+o.metadata.ascender),l("/Descent "+o.metadata.decender),l("/CapHeight "+o.metadata.capHeight),l(">>"),l("endobj");var N=u();l("<<"),l("/Type /Font"),l("/BaseFont /"+Kc(o.fontName)),l("/FontDescriptor "+w+" 0 R"),l("/W "+t.API.PDFObject.convert(p)),l("/CIDToGIDMap /Identity"),l("/DW 1000"),l("/Subtype /CIDFontType2"),l("/CIDSystemInfo"),l("<<"),l("/Supplement 0"),l("/Registry (Adobe)"),l("/Ordering ("+o.encoding+")"),l(">>"),l(">>"),l("endobj"),o.objectNumber=u(),l("<<"),l("/Type /Font"),l("/Subtype /Type0"),l("/ToUnicode "+k+" 0 R"),l("/BaseFont /"+Kc(o.fontName)),l("/Encoding /"+o.encoding),l("/DescendantFonts ["+N+" 0 R]"),l(">>"),l("endobj"),o.isAlreadyPutted=!0}})(s)}]),e.events.push(["putFont",function(s){(function(a){var o=a.font,l=a.out,u=a.newObject,d=a.putStream;if(o.metadata instanceof t.API.TTFFont&&o.encoding==="WinAnsiEncoding"){for(var p=o.metadata.rawData,m="",g=0;g<p.length;g++)m+=String.fromCharCode(p[g]);var x=u();d({data:m,addLength1:!0,objectId:x}),l("endobj");var b=u();d({data:r(o.metadata.toUnicode),addLength1:!0,objectId:b}),l("endobj");var k=u();l("<<"),l("/Descent "+o.metadata.decender),l("/CapHeight "+o.metadata.capHeight),l("/StemV "+o.metadata.stemV),l("/Type /FontDescriptor"),l("/FontFile2 "+x+" 0 R"),l("/Flags 96"),l("/FontBBox "+t.API.PDFObject.convert(o.metadata.bbox)),l("/FontName /"+Kc(o.fontName)),l("/ItalicAngle "+o.metadata.italicAngle),l("/Ascent "+o.metadata.ascender),l(">>"),l("endobj"),o.objectNumber=u();for(var w=0;w<o.metadata.hmtx.widths.length;w++)o.metadata.hmtx.widths[w]=parseInt(o.metadata.hmtx.widths[w]*(1e3/o.metadata.head.unitsPerEm));l("<</Subtype/TrueType/Type/Font/ToUnicode "+b+" 0 R/BaseFont/"+Kc(o.fontName)+"/FontDescriptor "+k+" 0 R/Encoding/"+o.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(o.metadata.hmtx.widths)+">>"),l("endobj"),o.isAlreadyPutted=!0}})(s)}]);var i=function(s){var a,o=s.text||"",l=s.x,u=s.y,d=s.options||{},p=s.mutex||{},m=p.pdfEscape,g=p.activeFontKey,x=p.fonts,b=g,k="",w=0,N="",j=x[b].encoding;if(x[b].encoding!=="Identity-H")return{text:o,x:l,y:u,options:d,mutex:p};for(N=o,b=g,Array.isArray(o)&&(N=o[0]),w=0;w<N.length;w+=1)x[b].metadata.hasOwnProperty("cmap")&&(a=x[b].metadata.cmap.unicode.codeMap[N[w].charCodeAt(0)]),a||N[w].charCodeAt(0)<256&&x[b].metadata.hasOwnProperty("Unicode")?k+=N[w]:k+="";var O="";return parseInt(b.slice(1))<14||j==="WinAnsiEncoding"?O=m(k,b).split("").map(function(Q){return Q.charCodeAt(0).toString(16)}).join(""):j==="Identity-H"&&(O=n(k,x[b])),p.isHex=!0,{text:O,x:l,y:u,options:d,mutex:p}};e.events.push(["postProcessText",function(s){var a=s.text||"",o=[],l={text:a,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(a)){var u=0;for(u=0;u<a.length;u+=1)Array.isArray(a[u])&&a[u].length===3?o.push([i(Object.assign({},l,{text:a[u][0]})).text,a[u][1],a[u][2]]):o.push(i(Object.assign({},l,{text:a[u]})).text);s.text=o}else s.text=i(Object.assign({},l,{text:a})).text}])}(gt),function(t){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0},t.addFileToVFS=function(n,r){return e.call(this),this.internal.vFS[n]=r,this},t.getFileFromVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0?this.internal.vFS[n]:null}}(gt.API),function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(r){var i,s,a,o,l,u,d,p=e,m=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],g=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],x={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},b={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},k=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],w=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),N=!1,j=0;this.__bidiEngine__={};var O=function(A){var T=A.charCodeAt(),I=T>>8,M=b[I];return M!==void 0?p[256*M+(255&T)]:I===252||I===253?"AL":w.test(I)?"L":I===8?"R":"N"},Q=function(A){for(var T,I=0;I<A.length;I++){if((T=O(A.charAt(I)))==="L")return!1;if(T==="R")return!0}return!1},B=function(A,T,I,M){var ne,V,U,K,H=T[M];switch(H){case"L":case"R":N=!1;break;case"N":case"AN":break;case"EN":N&&(H="AN");break;case"AL":N=!0,H="R";break;case"WS":H="N";break;case"CS":M<1||M+1>=T.length||(ne=I[M-1])!=="EN"&&ne!=="AN"||(V=T[M+1])!=="EN"&&V!=="AN"?H="N":N&&(V="AN"),H=V===ne?V:"N";break;case"ES":H=(ne=M>0?I[M-1]:"B")==="EN"&&M+1<T.length&&T[M+1]==="EN"?"EN":"N";break;case"ET":if(M>0&&I[M-1]==="EN"){H="EN";break}if(N){H="N";break}for(U=M+1,K=T.length;U<K&&T[U]==="ET";)U++;H=U<K&&T[U]==="EN"?"EN":"N";break;case"NSM":if(a&&!o){for(K=T.length,U=M+1;U<K&&T[U]==="NSM";)U++;if(U<K){var te=A[M],me=te>=1425&&te<=2303||te===64286;if(ne=T[U],me&&(ne==="R"||ne==="AL")){H="R";break}}}H=M<1||(ne=T[M-1])==="B"?"N":I[M-1];break;case"B":N=!1,i=!0,H=j;break;case"S":s=!0,H="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":N=!1;break;case"BN":H="N"}return H},P=function(A,T,I){var M=A.split("");return I&&y(M,I,{hiLevel:j}),M.reverse(),T&&T.reverse(),M.join("")},y=function(A,T,I){var M,ne,V,U,K,H=-1,te=A.length,me=0,R=[],$=j?g:m,J=[];for(N=!1,i=!1,s=!1,ne=0;ne<te;ne++)J[ne]=O(A[ne]);for(V=0;V<te;V++){if(K=me,R[V]=B(A,J,R,V),M=240&(me=$[K][x[R[V]]]),me&=15,T[V]=U=$[me][5],M>0)if(M===16){for(ne=H;ne<V;ne++)T[ne]=1;H=-1}else H=-1;if($[me][6])H===-1&&(H=V);else if(H>-1){for(ne=H;ne<V;ne++)T[ne]=U;H=-1}J[V]==="B"&&(T[V]=0),I.hiLevel|=U}s&&function(W,ae,le){for(var ue=0;ue<le;ue++)if(W[ue]==="S"){ae[ue]=j;for(var de=ue-1;de>=0&&W[de]==="WS";de--)ae[de]=j}}(J,T,te)},S=function(A,T,I,M,ne){if(!(ne.hiLevel<A)){if(A===1&&j===1&&!i)return T.reverse(),void(I&&I.reverse());for(var V,U,K,H,te=T.length,me=0;me<te;){if(M[me]>=A){for(K=me+1;K<te&&M[K]>=A;)K++;for(H=me,U=K-1;H<U;H++,U--)V=T[H],T[H]=T[U],T[U]=V,I&&(V=I[H],I[H]=I[U],I[U]=V);me=K}me++}}},L=function(A,T,I){var M=A.split(""),ne={hiLevel:j};return I||(I=[]),y(M,I,ne),function(V,U,K){if(K.hiLevel!==0&&d)for(var H,te=0;te<V.length;te++)U[te]===1&&(H=k.indexOf(V[te]))>=0&&(V[te]=k[H+1])}(M,I,ne),S(2,M,T,I,ne),S(1,M,T,I,ne),M.join("")};return this.__bidiEngine__.doBidiReorder=function(A,T,I){if(function(ne,V){if(V)for(var U=0;U<ne.length;U++)V[U]=U;o===void 0&&(o=Q(ne)),u===void 0&&(u=Q(ne))}(A,T),a||!l||u)if(a&&l&&o^u)j=o?1:0,A=P(A,T,I);else if(!a&&l&&u)j=o?1:0,A=L(A,T,I),A=P(A,T);else if(!a||o||l||u){if(a&&!l&&o^u)A=P(A,T),o?(j=0,A=L(A,T,I)):(j=1,A=L(A,T,I),A=P(A,T));else if(a&&o&&!l&&u)j=1,A=L(A,T,I),A=P(A,T);else if(!a&&!l&&o^u){var M=d;o?(j=1,A=L(A,T,I),j=0,d=!1,A=L(A,T,I),d=M):(j=0,A=L(A,T,I),A=P(A,T),j=1,d=!1,A=L(A,T,I),d=M,A=P(A,T))}}else j=0,A=L(A,T,I);else j=o?1:0,A=L(A,T,I);return A},this.__bidiEngine__.setOptions=function(A){A&&(a=A.isInputVisual,l=A.isOutputVisual,o=A.isInputRtl,u=A.isOutputRtl,d=A.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(r){var i=r.text,s=(r.x,r.y,r.options||{}),a=(r.mutex,s.lang,[]);if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,n.setOptions(s),Object.prototype.toString.call(i)==="[object Array]"){var o=0;for(a=[],o=0;o<i.length;o+=1)Object.prototype.toString.call(i[o])==="[object Array]"?a.push([n.doBidiReorder(i[o][0]),i[o][1],i[o][2]]):a.push([n.doBidiReorder(i[o])]);r.text=a}else r.text=n.doBidiReorder(i);n.setOptions({isInputVisual:!0})}])}(gt),gt.API.TTFFont=function(){function t(e){var n;if(this.rawData=e,n=this.contents=new el(e),this.contents.pos=4,n.readString(4)==="ttcf")throw new Error("TTCF not supported.");n.pos=0,this.parse(),this.subset=new qD(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new ID(this.contents),this.head=new PD(this),this.name=new FD(this),this.cmap=new DN(this),this.toUnicode={},this.hhea=new jD(this),this.maxp=new OD(this),this.hmtx=new MD(this),this.post=new RD(this),this.os2=new LD(this),this.loca=new KD(this),this.glyf=new VD(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var e,n,r,i,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var a,o,l,u;for(u=[],a=0,o=(l=this.bbox).length;a<o;a++)e=l[a],u.push(Math.round(e*this.scaleFactor));return u}).call(this),this.stemV=0,this.post.exists?(r=255&(i=this.post.italic_angle),32768&(n=i>>16)&&(n=-(1+(65535^n))),this.italicAngle=+(n+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(e){var n;return((n=this.cmap.unicode)!=null?n.codeMap[e]:void 0)||0},t.prototype.widthOfGlyph=function(e){var n;return n=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*n},t.prototype.widthOfString=function(e,n,r){var i,s,a,o;for(a=0,s=0,o=(e=""+e).length;0<=o?s<o:s>o;s=0<=o?++s:--s)i=e.charCodeAt(s),a+=this.widthOfGlyph(this.characterToGlyph(i))+r*(1e3/n)||0;return a*(n/1e3)},t.prototype.lineHeight=function(e,n){var r;return n==null&&(n=!1),r=n?this.lineGap:0,(this.ascender+r-this.decender)/1e3*e},t}();var ys,el=function(){function t(e){this.data=e??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(e){return this.data[this.pos++]=e},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},t.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},t.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},t.prototype.readString=function(e){var n,r;for(r=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)r[n]=String.fromCharCode(this.readByte());return r.join("")},t.prototype.writeString=function(e){var n,r,i;for(i=[],n=0,r=e.length;0<=r?n<r:n>r;n=0<=r?++n:--n)i.push(this.writeByte(e.charCodeAt(n)));return i},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(e){return this.writeInt16(e)},t.prototype.readLongLong=function(){var e,n,r,i,s,a,o,l;return e=this.readByte(),n=this.readByte(),r=this.readByte(),i=this.readByte(),s=this.readByte(),a=this.readByte(),o=this.readByte(),l=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^n)+1099511627776*(255^r)+4294967296*(255^i)+16777216*(255^s)+65536*(255^a)+256*(255^o)+(255^l)+1):72057594037927940*e+281474976710656*n+1099511627776*r+4294967296*i+16777216*s+65536*a+256*o+l},t.prototype.writeLongLong=function(e){var n,r;return n=Math.floor(e/4294967296),r=4294967295&e,this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(e){return this.writeInt32(e)},t.prototype.read=function(e){var n,r;for(n=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)n.push(this.readByte());return n},t.prototype.write=function(e){var n,r,i,s;for(s=[],r=0,i=e.length;r<i;r++)n=e[r],s.push(this.writeByte(n));return s},t}(),ID=function(){var t;function e(n){var r,i,s;for(this.scalarType=n.readInt(),this.tableCount=n.readShort(),this.searchRange=n.readShort(),this.entrySelector=n.readShort(),this.rangeShift=n.readShort(),this.tables={},i=0,s=this.tableCount;0<=s?i<s:i>s;i=0<=s?++i:--i)r={tag:n.readString(4),checksum:n.readInt(),offset:n.readInt(),length:n.readInt()},this.tables[r.tag]=r}return e.prototype.encode=function(n){var r,i,s,a,o,l,u,d,p,m,g,x,b;for(b in g=Object.keys(n).length,l=Math.log(2),p=16*Math.floor(Math.log(g)/l),a=Math.floor(p/l),d=16*g-p,(i=new el).writeInt(this.scalarType),i.writeShort(g),i.writeShort(p),i.writeShort(a),i.writeShort(d),s=16*g,u=i.pos+s,o=null,x=[],n)for(m=n[b],i.writeString(b),i.writeInt(t(m)),i.writeInt(u),i.writeInt(m.length),x=x.concat(m),b==="head"&&(o=u),u+=m.length;u%4;)x.push(0),u++;return i.write(x),r=2981146554-t(i.data),i.pos=o+8,i.writeUInt32(r),i.data},t=function(n){var r,i,s,a;for(n=FN.call(n);n.length%4;)n.push(0);for(s=new el(n),i=0,r=0,a=n.length;r<a;r=r+=4)i+=s.readUInt32();return 4294967295&i},e}(),CD={}.hasOwnProperty,Zs=function(t,e){for(var n in e)CD.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};ys=function(){function t(e){var n;this.file=e,n=this.file.directory.tables[this.tag],this.exists=!!n,n&&(this.offset=n.offset,this.length=n.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t}();var PD=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Zs(e,ys),e.prototype.tag="head",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.revision=n.readInt(),this.checkSumAdjustment=n.readInt(),this.magicNumber=n.readInt(),this.flags=n.readShort(),this.unitsPerEm=n.readShort(),this.created=n.readLongLong(),this.modified=n.readLongLong(),this.xMin=n.readShort(),this.yMin=n.readShort(),this.xMax=n.readShort(),this.yMax=n.readShort(),this.macStyle=n.readShort(),this.lowestRecPPEM=n.readShort(),this.fontDirectionHint=n.readShort(),this.indexToLocFormat=n.readShort(),this.glyphDataFormat=n.readShort()},e.prototype.encode=function(n){var r;return(r=new el).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(n),r.writeShort(this.glyphDataFormat),r.data},e}(),Y_=function(){function t(e,n){var r,i,s,a,o,l,u,d,p,m,g,x,b,k,w,N,j;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=n+e.readInt(),p=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(l=0;l<256;++l)this.codeMap[l]=e.readByte();break;case 4:for(g=e.readUInt16(),m=g/2,e.pos+=6,s=function(){var O,Q;for(Q=[],l=O=0;0<=m?O<m:O>m;l=0<=m?++O:--O)Q.push(e.readUInt16());return Q}(),e.pos+=2,b=function(){var O,Q;for(Q=[],l=O=0;0<=m?O<m:O>m;l=0<=m?++O:--O)Q.push(e.readUInt16());return Q}(),u=function(){var O,Q;for(Q=[],l=O=0;0<=m?O<m:O>m;l=0<=m?++O:--O)Q.push(e.readUInt16());return Q}(),d=function(){var O,Q;for(Q=[],l=O=0;0<=m?O<m:O>m;l=0<=m?++O:--O)Q.push(e.readUInt16());return Q}(),i=(this.length-e.pos+this.offset)/2,o=function(){var O,Q;for(Q=[],l=O=0;0<=i?O<i:O>i;l=0<=i?++O:--O)Q.push(e.readUInt16());return Q}(),l=w=0,j=s.length;w<j;l=++w)for(k=s[l],r=N=x=b[l];x<=k?N<=k:N>=k;r=x<=k?++N:--N)d[l]===0?a=r+u[l]:(a=o[d[l]/2+(r-x)-(m-l)]||0)!==0&&(a+=u[l]),this.codeMap[r]=65535&a}e.pos=p}return t.encode=function(e,n){var r,i,s,a,o,l,u,d,p,m,g,x,b,k,w,N,j,O,Q,B,P,y,S,L,A,T,I,M,ne,V,U,K,H,te,me,R,$,J,W,ae,le,ue,de,ke,Ie,De;switch(M=new el,a=Object.keys(e).sort(function(Le,Xe){return Le-Xe}),n){case"macroman":for(b=0,k=function(){var Le=[];for(x=0;x<256;++x)Le.push(0);return Le}(),N={0:0},s={},ne=0,H=a.length;ne<H;ne++)N[de=e[i=a[ne]]]==null&&(N[de]=++b),s[i]={old:e[i],new:N[e[i]]},k[i]=N[e[i]];return M.writeUInt16(1),M.writeUInt16(0),M.writeUInt32(12),M.writeUInt16(0),M.writeUInt16(262),M.writeUInt16(0),M.write(k),{charMap:s,subtable:M.data,maxGlyphID:b+1};case"unicode":for(T=[],p=[],j=0,N={},r={},w=u=null,V=0,te=a.length;V<te;V++)N[Q=e[i=a[V]]]==null&&(N[Q]=++j),r[i]={old:Q,new:N[Q]},o=N[Q]-i,w!=null&&o===u||(w&&p.push(w),T.push(i),u=o),w=i;for(w&&p.push(w),p.push(65535),T.push(65535),L=2*(S=T.length),y=2*Math.pow(Math.log(S)/Math.LN2,2),m=Math.log(y/2)/Math.LN2,P=2*S-y,l=[],B=[],g=[],x=U=0,me=T.length;U<me;x=++U){if(A=T[x],d=p[x],A===65535){l.push(0),B.push(0);break}if(A-(I=r[A].new)>=32768)for(l.push(0),B.push(2*(g.length+S-x)),i=K=A;A<=d?K<=d:K>=d;i=A<=d?++K:--K)g.push(r[i].new);else l.push(I-A),B.push(0)}for(M.writeUInt16(3),M.writeUInt16(1),M.writeUInt32(12),M.writeUInt16(4),M.writeUInt16(16+8*S+2*g.length),M.writeUInt16(0),M.writeUInt16(L),M.writeUInt16(y),M.writeUInt16(m),M.writeUInt16(P),le=0,R=p.length;le<R;le++)i=p[le],M.writeUInt16(i);for(M.writeUInt16(0),ue=0,$=T.length;ue<$;ue++)i=T[ue],M.writeUInt16(i);for(ke=0,J=l.length;ke<J;ke++)o=l[ke],M.writeUInt16(o);for(Ie=0,W=B.length;Ie<W;Ie++)O=B[Ie],M.writeUInt16(O);for(De=0,ae=g.length;De<ae;De++)b=g[De],M.writeUInt16(b);return{charMap:r,subtable:M.data,maxGlyphID:j+1}}},t}(),DN=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Zs(e,ys),e.prototype.tag="cmap",e.prototype.parse=function(n){var r,i,s;for(n.pos=this.offset,this.version=n.readUInt16(),s=n.readUInt16(),this.tables=[],this.unicode=null,i=0;0<=s?i<s:i>s;i=0<=s?++i:--i)r=new Y_(n,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},e.encode=function(n,r){var i,s;return r==null&&(r="macroman"),i=Y_.encode(n,r),(s=new el).writeUInt16(0),s.writeUInt16(1),i.table=s.data.concat(i.subtable),i},e}(),jD=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Zs(e,ys),e.prototype.tag="hhea",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.ascender=n.readShort(),this.decender=n.readShort(),this.lineGap=n.readShort(),this.advanceWidthMax=n.readShort(),this.minLeftSideBearing=n.readShort(),this.minRightSideBearing=n.readShort(),this.xMaxExtent=n.readShort(),this.caretSlopeRise=n.readShort(),this.caretSlopeRun=n.readShort(),this.caretOffset=n.readShort(),n.pos+=8,this.metricDataFormat=n.readShort(),this.numberOfMetrics=n.readUInt16()},e}(),LD=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Zs(e,ys),e.prototype.tag="OS/2",e.prototype.parse=function(n){if(n.pos=this.offset,this.version=n.readUInt16(),this.averageCharWidth=n.readShort(),this.weightClass=n.readUInt16(),this.widthClass=n.readUInt16(),this.type=n.readShort(),this.ySubscriptXSize=n.readShort(),this.ySubscriptYSize=n.readShort(),this.ySubscriptXOffset=n.readShort(),this.ySubscriptYOffset=n.readShort(),this.ySuperscriptXSize=n.readShort(),this.ySuperscriptYSize=n.readShort(),this.ySuperscriptXOffset=n.readShort(),this.ySuperscriptYOffset=n.readShort(),this.yStrikeoutSize=n.readShort(),this.yStrikeoutPosition=n.readShort(),this.familyClass=n.readShort(),this.panose=function(){var r,i;for(i=[],r=0;r<10;++r)i.push(n.readByte());return i}(),this.charRange=function(){var r,i;for(i=[],r=0;r<4;++r)i.push(n.readInt());return i}(),this.vendorID=n.readString(4),this.selection=n.readShort(),this.firstCharIndex=n.readShort(),this.lastCharIndex=n.readShort(),this.version>0&&(this.ascent=n.readShort(),this.descent=n.readShort(),this.lineGap=n.readShort(),this.winAscent=n.readShort(),this.winDescent=n.readShort(),this.codePageRange=function(){var r,i;for(i=[],r=0;r<2;r=++r)i.push(n.readInt());return i}(),this.version>1))return this.xHeight=n.readShort(),this.capHeight=n.readShort(),this.defaultChar=n.readShort(),this.breakChar=n.readShort(),this.maxContext=n.readShort()},e}(),RD=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Zs(e,ys),e.prototype.tag="post",e.prototype.parse=function(n){var r,i,s;switch(n.pos=this.offset,this.format=n.readInt(),this.italicAngle=n.readInt(),this.underlinePosition=n.readShort(),this.underlineThickness=n.readShort(),this.isFixedPitch=n.readInt(),this.minMemType42=n.readInt(),this.maxMemType42=n.readInt(),this.minMemType1=n.readInt(),this.maxMemType1=n.readInt(),this.format){case 65536:break;case 131072:var a;for(i=n.readUInt16(),this.glyphNameIndex=[],a=0;0<=i?a<i:a>i;a=0<=i?++a:--a)this.glyphNameIndex.push(n.readUInt16());for(this.names=[],s=[];n.pos<this.offset+this.length;)r=n.readByte(),s.push(this.names.push(n.readString(r)));return s;case 151552:return i=n.readUInt16(),this.offsets=n.read(i);case 196608:break;case 262144:return this.map=(function(){var o,l,u;for(u=[],a=o=0,l=this.file.maxp.numGlyphs;0<=l?o<l:o>l;a=0<=l?++o:--o)u.push(n.readUInt32());return u}).call(this)}},e}(),DD=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},FD=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Zs(e,ys),e.prototype.tag="name",e.prototype.parse=function(n){var r,i,s,a,o,l,u,d,p,m,g;for(n.pos=this.offset,n.readShort(),r=n.readShort(),l=n.readShort(),i=[],a=0;0<=r?a<r:a>r;a=0<=r?++a:--a)i.push({platformID:n.readShort(),encodingID:n.readShort(),languageID:n.readShort(),nameID:n.readShort(),length:n.readShort(),offset:this.offset+l+n.readShort()});for(u={},a=p=0,m=i.length;p<m;a=++p)s=i[a],n.pos=s.offset,d=n.readString(s.length),o=new DD(d,s),u[g=s.nameID]==null&&(u[g]=[]),u[s.nameID].push(o);this.strings=u,this.copyright=u[0],this.fontFamily=u[1],this.fontSubfamily=u[2],this.uniqueSubfamily=u[3],this.fontName=u[4],this.version=u[5];try{this.postscriptName=u[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=u[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=u[7],this.manufacturer=u[8],this.designer=u[9],this.description=u[10],this.vendorUrl=u[11],this.designerUrl=u[12],this.license=u[13],this.licenseUrl=u[14],this.preferredFamily=u[15],this.preferredSubfamily=u[17],this.compatibleFull=u[18],this.sampleText=u[19]},e}(),OD=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Zs(e,ys),e.prototype.tag="maxp",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.numGlyphs=n.readUInt16(),this.maxPoints=n.readUInt16(),this.maxContours=n.readUInt16(),this.maxCompositePoints=n.readUInt16(),this.maxComponentContours=n.readUInt16(),this.maxZones=n.readUInt16(),this.maxTwilightPoints=n.readUInt16(),this.maxStorage=n.readUInt16(),this.maxFunctionDefs=n.readUInt16(),this.maxInstructionDefs=n.readUInt16(),this.maxStackElements=n.readUInt16(),this.maxSizeOfInstructions=n.readUInt16(),this.maxComponentElements=n.readUInt16(),this.maxComponentDepth=n.readUInt16()},e}(),MD=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Zs(e,ys),e.prototype.tag="hmtx",e.prototype.parse=function(n){var r,i,s,a,o,l,u;for(n.pos=this.offset,this.metrics=[],r=0,l=this.file.hhea.numberOfMetrics;0<=l?r<l:r>l;r=0<=l?++r:--r)this.metrics.push({advance:n.readUInt16(),lsb:n.readInt16()});for(s=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var d,p;for(p=[],r=d=0;0<=s?d<s:d>s;r=0<=s?++d:--d)p.push(n.readInt16());return p}(),this.widths=(function(){var d,p,m,g;for(g=[],d=0,p=(m=this.metrics).length;d<p;d++)a=m[d],g.push(a.advance);return g}).call(this),i=this.widths[this.widths.length-1],u=[],r=o=0;0<=s?o<s:o>s;r=0<=s?++o:--o)u.push(this.widths.push(i));return u},e.prototype.forGlyph=function(n){return n in this.metrics?this.metrics[n]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[n-this.metrics.length]}},e}(),FN=[].slice,VD=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Zs(e,ys),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(n){var r,i,s,a,o,l,u,d,p,m;return n in this.cache?this.cache[n]:(a=this.file.loca,r=this.file.contents,i=a.indexOf(n),(s=a.lengthOf(n))===0?this.cache[n]=null:(r.pos=this.offset+i,o=(l=new el(r.read(s))).readShort(),d=l.readShort(),m=l.readShort(),u=l.readShort(),p=l.readShort(),this.cache[n]=o===-1?new BD(l,d,m,u,p):new UD(l,o,d,m,u,p),this.cache[n]))},e.prototype.encode=function(n,r,i){var s,a,o,l,u;for(o=[],a=[],l=0,u=r.length;l<u;l++)s=n[r[l]],a.push(o.length),s&&(o=o.concat(s.encode(i)));return a.push(o.length),{table:o,offsets:a}},e}(),UD=function(){function t(e,n,r,i,s,a){this.raw=e,this.numberOfContours=n,this.xMin=r,this.yMin=i,this.xMax=s,this.yMax=a,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t}(),BD=function(){function t(e,n,r,i,s){var a,o;for(this.raw=e,this.xMin=n,this.yMin=r,this.xMax=i,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],a=this.raw;o=a.readShort(),this.glyphOffsets.push(a.pos),this.glyphIDs.push(a.readUInt16()),32&o;)a.pos+=1&o?4:2,128&o?a.pos+=8:64&o?a.pos+=4:8&o&&(a.pos+=2)}return t.prototype.encode=function(){var e,n,r;for(n=new el(FN.call(this.raw.data)),e=0,r=this.glyphIDs.length;e<r;++e)n.pos=this.glyphOffsets[e];return n.data},t}(),KD=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Zs(e,ys),e.prototype.tag="loca",e.prototype.parse=function(n){var r,i;return n.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var s,a;for(a=[],i=0,s=this.length;i<s;i+=2)a.push(2*n.readUInt16());return a}).call(this):(function(){var s,a;for(a=[],i=0,s=this.length;i<s;i+=4)a.push(n.readUInt32());return a}).call(this)},e.prototype.indexOf=function(n){return this.offsets[n]},e.prototype.lengthOf=function(n){return this.offsets[n+1]-this.offsets[n]},e.prototype.encode=function(n,r){for(var i=new Uint32Array(this.offsets.length),s=0,a=0,o=0;o<i.length;++o)if(i[o]=s,a<r.length&&r[a]==o){++a,i[o]=s;var l=this.offsets[o],u=this.offsets[o+1]-l;u>0&&(s+=u)}for(var d=new Array(4*i.length),p=0;p<i.length;++p)d[4*p+3]=255&i[p],d[4*p+2]=(65280&i[p])>>8,d[4*p+1]=(16711680&i[p])>>16,d[4*p]=(4278190080&i[p])>>24;return d},e}(),qD=function(){function t(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var e,n,r,i,s;for(n in i=this.font.cmap.tables[0].codeMap,e={},s=this.subset)r=s[n],e[n]=i[r];return e},t.prototype.glyphsFor=function(e){var n,r,i,s,a,o,l;for(i={},a=0,o=e.length;a<o;a++)i[s=e[a]]=this.font.glyf.glyphFor(s);for(s in n=[],i)(r=i[s])!=null&&r.compound&&n.push.apply(n,r.glyphIDs);if(n.length>0)for(s in l=this.glyphsFor(n))r=l[s],i[s]=r;return i},t.prototype.encode=function(e,n){var r,i,s,a,o,l,u,d,p,m,g,x,b,k,w;for(i in r=DN.encode(this.generateCmap(),"unicode"),a=this.glyphsFor(e),g={0:0},w=r.charMap)g[(l=w[i]).old]=l.new;for(x in m=r.maxGlyphID,a)x in g||(g[x]=m++);return d=function(N){var j,O;for(j in O={},N)O[N[j]]=j;return O}(g),p=Object.keys(d).sort(function(N,j){return N-j}),b=function(){var N,j,O;for(O=[],N=0,j=p.length;N<j;N++)o=p[N],O.push(d[o]);return O}(),s=this.font.glyf.encode(a,b,g),u=this.font.loca.encode(s.offsets,b),k={cmap:this.font.cmap.raw(),glyf:s.table,loca:u,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(n)},this.font.os2.exists&&(k["OS/2"]=this.font.os2.raw()),this.font.directory.encode(k)},t}();gt.API.PDFObject=function(){var t;function e(){}return t=function(n,r){return(Array(r+1).join("0")+n).slice(-r)},e.convert=function(n){var r,i,s,a;if(Array.isArray(n))return"["+function(){var o,l,u;for(u=[],o=0,l=n.length;o<l;o++)r=n[o],u.push(e.convert(r));return u}().join(" ")+"]";if(typeof n=="string")return"/"+n;if(n!=null&&n.isString)return"("+n+")";if(n instanceof Date)return"(D:"+t(n.getUTCFullYear(),4)+t(n.getUTCMonth(),2)+t(n.getUTCDate(),2)+t(n.getUTCHours(),2)+t(n.getUTCMinutes(),2)+t(n.getUTCSeconds(),2)+"Z)";if({}.toString.call(n)==="[object Object]"){for(i in s=["<<"],n)a=n[i],s.push("/"+i+" "+e.convert(a));return s.push(">>"),s.join(`
`)}return""+n},e}();function Vi(t){const[e,n,r]=t.split("/");return new Date(r,n-1,e)}function dm(t){const e=String(t.getDate()).padStart(2,"0"),n=String(t.getMonth()+1).padStart(2,"0"),r=t.getFullYear();return`${e}/${n}/${r}`}async function ON(t){try{return{success:!0,id:(await Xs(fn(vt,"absences"),{...t,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})).id}}catch(e){return console.error("Error creating absence:",e),{success:!1,error:e}}}async function zD(t,e){try{const n=an(vt,"absences",t);return await Gs(n,{...e,updatedAt:new Date().toISOString()}),{success:!0}}catch(n){return console.error("Error updating absence:",n),{success:!1,error:n}}}async function $D(t){try{return await Js(an(vt,"absences",t)),{success:!0}}catch(e){return console.error("Error deleting absence:",e),{success:!1,error:e}}}async function py(t){try{const e=Wu(fn(vt,"absences"),$d("employeeId","==",t)),n=await $r(e),r=[];return n.forEach(i=>{r.push({id:i.id,...i.data()})}),{success:!0,absences:r}}catch(e){return console.error("Error fetching employee absences:",e),{success:!1,error:e,absences:[]}}}function my(t,e){return t.find(n=>{const r=n.date;if(n.type==="extended"&&n.endDate){const i=Vi(n.date),s=Vi(n.endDate),a=Vi(e);return a>=i&&a<=s}return r===e})}async function HD(t,e){try{const n=t.map(r=>ON({...e,employeeId:r.id,employeeName:r.name}));return await Promise.all(n),{success:!0}}catch(n){return console.error("Error creating absence for all employees:",n),{success:!1,error:n}}}async function WD(t,e,n){try{const r=await py(t);if(!r.success)return{success:!1,absences:[]};const i=Vi(e),s=Vi(n);return{success:!0,absences:r.absences.filter(o=>{const l=Vi(o.date);if(o.type==="extended"&&o.endDate){const u=Vi(o.endDate);return l<=s&&u>=i}return l>=i&&l<=s})}}catch(r){return console.error("Error fetching absences for date range:",r),{success:!1,error:r,absences:[]}}}function GD(t,e,n){const r=my(n,t);return r?r.type==="partial"?{worked:r.hoursWorked||0,minusLunch:r.hoursWorked||0}:{worked:0,minusLunch:0}:e==="Fredag"?{worked:7,minusLunch:7}:{worked:7.5,minusLunch:7.5}}function QD(t,e,n){const r=my(n,t);if(!r)return"";const i=e==="Fredag"?7:7.5;let s="";switch(r.absenceReason){case"Feriefridag":s="Feriefri (FF) 1500 Kr.";break;case"Sgnehelligdag":s="Sgnehelligdag (SH) 1500 Kr.";break;case"Barn sygedag":s=`Barn sygedag: ${i.toString().replace(".",",")} timer`;break;case"Sygedag":s=`Sygedag: ${i.toString().replace(".",",")} timer`;break;default:s=r.absenceReason;break}return r.comment&&!["Feriefridag","Sgnehelligdag","Barn sygedag","Sygedag"].includes(r.absenceReason)&&(s+=` - ${r.comment}`),s}function vp(t){const[e,n,r]=t.split("/");return new Date(r,n-1,e)}function MN(t){const e=String(t.getDate()).padStart(2,"0"),n=String(t.getMonth()+1).padStart(2,"0"),r=t.getFullYear();return`${e}/${n}/${r}`}async function YD(t){try{return{success:!0,id:(await Xs(fn(vt,"overtime"),{...t,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})).id}}catch(e){return console.error("Error creating overtime:",e),{success:!1,error:e}}}async function JD(t,e){try{const n=an(vt,"overtime",t);return await Gs(n,{...e,updatedAt:new Date().toISOString()}),{success:!0}}catch(n){return console.error("Error updating overtime:",n),{success:!1,error:n}}}async function XD(t){try{return await Js(an(vt,"overtime",t)),{success:!0}}catch(e){return console.error("Error deleting overtime:",e),{success:!1,error:e}}}async function VN(t){try{const e=Wu(fn(vt,"overtime"),$d("employeeId","==",t)),n=await $r(e),r=[];return n.forEach(i=>{r.push({id:i.id,...i.data()})}),{success:!0,overtime:r}}catch(e){return console.error("Error fetching employee overtime:",e),{success:!1,error:e,overtime:[]}}}function ZD(t,e){return t.find(n=>n.date===e)}async function eF(t,e,n){try{const r=await VN(t);if(!r.success)return{success:!1,overtime:[]};const i=vp(e),s=vp(n);return{success:!0,overtime:r.overtime.filter(o=>{const l=vp(o.date);return l>=i&&l<=s})}}catch(r){return console.error("Error fetching overtime for date range:",r),{success:!1,error:r,overtime:[]}}}function tF(t,e){const n=ZD(e,t);return n?n.hours:0}async function nF(t,e,n,r,i){const s=new gt({orientation:"portrait",unit:"mm",format:"a4"}),a=r?i:i.filter(x=>n.includes(x.name)),o=q7(t,e),l=o[0].formattedDate,u=o[o.length-1].formattedDate;console.log("=== PDF GENERATION DEBUG ==="),console.log("Date range:",l,"to",u),console.log("Total dates:",o.length),console.log("First date format:",l);let d=null;try{const x=await fetch("/logo_black.png");if(x.ok){const b=await x.blob();d=await new Promise(k=>{const w=new FileReader;w.onloadend=()=>k(w.result),w.readAsDataURL(b)})}}catch(x){console.log("Could not load logo:",x)}for(let x=0;x<a.length;x++){const b=a[x];x>0&&s.addPage(),console.log(`
--- Loading absences for ${b.name} (ID: ${b.id}) ---`);const k=await WD(b.id,l,u),w=k.success?k.absences:[];console.log(`Found ${w.length} absence(s) for ${b.name}`),w.length>0&&console.log("Absences:",w.map(N=>`${N.date} (${N.absenceReason})`).join(", ")),await rF(s,t,e,o,b.name,b.id,d,w,l,u)}const p=pN(e),g=`Timeregistrering_${mN(t,e).replace(" / ","_")}_${p.replace(" / ","_")}.pdf`;console.log(`=== PDF GENERATION COMPLETE ===
`),s.save(g)}async function rF(t,e,n,r,i,s,a,o,l,u){const d=t.internal.pageSize.getWidth(),p=t.internal.pageSize.getHeight(),m=15;console.log(`Loading overtime for ${i} (ID: ${s})`);const g=await eF(s,l,u),x=g.success?g.overtime:[];console.log(`Found ${x.length} overtime entries for ${i}`);let b=m;t.setFontSize(18),t.setFont("helvetica","bold");const k=mN(e,n);if(t.text(`${k} Timeregistrering`,m,b),a)try{t.addImage(a,"PNG",d-m-40,b-5,40,20)}catch(P){console.log("Error adding logo to PDF:",P)}b+=8,t.setFontSize(12),t.setFont("helvetica","normal");const w=pN(n);t.text(w,m,b),b+=8,t.setFontSize(9),t.setFont("helvetica","normal"),t.text("AC Handymand.dk ApS",m,b),b+=4,t.text("Axel Juels All 72",m,b),b+=4,t.text("2750 Ballerup",m,b),b+=4,t.text("CVR 42397792",m,b),b+=6,t.setFont("helvetica","normal"),t.setFontSize(9),t.text("Oversigt over arbejdstimer, sygdom, BS, SH, FE, FF og overarbejde (OA).",m,b),b+=4,t.setFont("helvetica","bold"),t.setTextColor(255,0,0),t.text("Afleveres d. 19 i hver mned.",m,b),t.setTextColor(0,0,0),b+=8,iF(t,m,b,d-2*m,r,o,x);const N=p-25,j=d/3,O=(d-j)/2;t.setFont("helvetica","normal"),t.setFontSize(10),t.text("Underskrift:",O-25,N),t.line(O,N,O+j,N);const Q=t.getTextWidth(i),B=O+(j-Q)/2;t.text(i,B,N+6)}function iF(t,e,n,r,i,s,a){const o=[{header:"Dato",width:16},{header:"Ugedag",width:14},{header:"Fra kl. / Til kl.",width:22},{header:"Total timer",width:18},{header:`Total timer
minus frokost`,width:22},{header:"Afvigelse / Bemrkning",width:65},{header:"Arb. timer",width:16},{header:"OA",width:12}],l=o.reduce((k,w)=>k+w.width,0),u=r/l;o.forEach(k=>k.width*=u);const d=6,p=8;let m=e;t.setFontSize(8),t.setFont("helvetica","bold"),o.forEach(k=>{t.rect(m,n,k.width,p);const w=k.header.split(`
`),N=3,j=n+3;w.forEach((O,Q)=>{const B=m+k.width/2;t.text(O,B,j+Q*N,{align:"center"})}),m+=k.width}),n+=p;let g=0,x=0,b=0;t.setFont("helvetica","normal"),t.setFontSize(8),i.forEach(k=>{m=e;const w=my(s,k.formattedDate),N=GD(k.formattedDate,k.weekday,s),j=QD(k.formattedDate,k.weekday,s),O=tF(k.formattedDate,a);w&&(b++,console.log(` Absence matched on ${k.formattedDate}: ${w.absenceReason}`)),k.isWeekend||(g+=N.minusLunch,x+=O),o.forEach((Q,B)=>{t.rect(m,n,Q.width,d);let P="",y=[0,0,0];if(B===0)P=k.formattedDate;else if(B===1)P=k.weekday,k.isWeekend&&(y=[255,0,0]);else if(B===2&&!k.isWeekend)(!w||w.type==="partial")&&(k.weekday==="Fredag"?P="07:00-14:30":P="07:00-15:00");else if(B===3&&!k.isWeekend)w&&w.type!=="partial"?P="0":w&&w.type==="partial"?P=(w.hoursWorked||0).toString().replace(".",","):k.weekday==="Fredag"?P="7,5":P="8";else if(B===4&&!k.isWeekend){const S=N.minusLunch;S>0?P=S.toString().replace(".",","):P="0"}else if(B===5)P=j;else if(B===6&&!k.isWeekend){const S=N.worked;S>0?P=S.toString().replace(".",","):P="0"}else B===7&&!k.isWeekend&&O>0&&(P=O.toString().replace(".",","));if(P){t.setTextColor(...y);const S=m+Q.width/2;if(B===5&&P.length>40){t.setFontSize(7);const A=t.splitTextToSize(P,Q.width-2)[0];t.text(A,S,n+d/2+1.5,{align:"center"}),t.setFontSize(8)}else t.text(P,S,n+d/2+1.5,{align:"center"});t.setTextColor(0,0,0)}m+=Q.width}),n+=d}),console.log(`Total absence matches in PDF table: ${b}`),console.log(`Total overtime hours: ${x}`),m=e,o.forEach((k,w)=>{if((w===5||w===6||w===7)&&t.rect(m,n,k.width,d),w===5){t.setFont("helvetica","bold");const N="Total timer:",j=t.getTextWidth(N);t.text(N,m+k.width-j-1,n+d/2+1.5),t.setFont("helvetica","normal")}else if(w===6){t.setFont("helvetica","bold");const N=g.toString().replace(".",","),j=m+k.width/2;t.text(N,j,n+d/2+1.5,{align:"center"}),t.setFont("helvetica","normal")}else if(w===7){if(t.setFont("helvetica","bold"),x>0){const N=x.toString().replace(".",","),j=m+k.width/2;t.text(N,j,n+d/2+1.5,{align:"center"})}t.setFont("helvetica","normal")}m+=k.width})}function sF({employee:t,employees:e,onClose:n,onSuccess:r}){const{showSuccess:i,showError:s,showWarning:a}=Gr(),[o,l]=ie.useState("partial"),[u,d]=ie.useState(!1),[p,m]=ie.useState(""),[g,x]=ie.useState("Feriedag"),[b,k]=ie.useState(""),[w,N]=ie.useState(""),[j,O]=ie.useState(""),[Q,B]=ie.useState(!1),P=["Feriedag","Feriefridag","Barn sygedag","Sygedag","Sgnehelligdag","Andet"],y=async S=>{if(S.preventDefault(),!p){a("Vlg venligst en dato.");return}if(o==="partial"&&!w){a("Indtast antal arbejdstimer.");return}if(o==="extended"&&!j){a("Vlg venligst slut dato.");return}if(o==="extended"){const L=new Date(p);if(new Date(j)<L){s("Slut dato skal vre efter start dato.");return}}d(!0);try{const L=new Date(p),A=dm(L),T={employeeId:t.id,employeeName:t.name,date:A,type:o,absenceReason:g,comment:b||""};if(o==="partial"&&(T.hoursWorked=parseFloat(w)),o==="extended"){const I=new Date(j);T.endDate=dm(I)}Q&&o==="single"?(await HD(e,{date:A,type:o,absenceReason:g,comment:b||""})).success?(i("Fravr oprettet for alle medarbejdere!"),r(),n()):s("Fejl ved oprettelse af fravr for alle medarbejdere."):(await ON(T)).success?(i("Fravr oprettet!"),r(),n()):s("Fejl ved oprettelse af fravr.")}catch(L){console.error("Error creating absence:",L),s("Der opstod en fejl.")}d(!1)};return c.jsx("div",{className:"modal-overlay",onClick:n,children:c.jsxs("div",{className:"modal-content",onClick:S=>S.stopPropagation(),children:[c.jsxs("div",{className:"modal-header",children:[c.jsxs("h2",{children:["Opret fravr for ",t.name]}),c.jsx("button",{className:"modal-close",onClick:n,children:""})]}),c.jsxs("div",{className:"modal-body",children:[c.jsxs("div",{className:"tabs",children:[c.jsx("button",{className:`tab ${o==="partial"?"active":""}`,onClick:()=>l("partial"),children:"Delvis fravr"}),c.jsx("button",{className:`tab ${o==="single"?"active":""}`,onClick:()=>l("single"),children:"Hel dag"}),c.jsx("button",{className:`tab ${o==="extended"?"active":""}`,onClick:()=>l("extended"),children:"Lngere periode"})]}),c.jsxs("form",{onSubmit:y,children:[o==="partial"&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Dato *"}),c.jsx("input",{type:"date",value:p,onChange:S=>m(S.target.value),required:!0})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Type af fravr *"}),c.jsx("select",{value:g,onChange:S=>x(S.target.value),required:!0,children:P.map(S=>c.jsx("option",{value:S,children:S},S))})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Arbejdstimer (den dag) *"}),c.jsx("input",{type:"number",value:w,onChange:S=>N(S.target.value),step:"0.5",min:"0",max:"24",required:!0}),c.jsx("span",{className:"form-hint",children:"Indtast hvor mange timer der blev arbejdet"})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Kommentar (valgfri)"}),c.jsx("input",{type:"text",value:b,onChange:S=>k(S.target.value),placeholder:"f.eks. Gik hjem kl. 12"})]})]}),o==="single"&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Dato *"}),c.jsx("input",{type:"date",value:p,onChange:S=>m(S.target.value),required:!0})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Type af fravr *"}),c.jsx("select",{value:g,onChange:S=>x(S.target.value),required:!0,children:P.map(S=>c.jsx("option",{value:S,children:S},S))})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Kommentar (valgfri)"}),c.jsx("input",{type:"text",value:b,onChange:S=>k(S.target.value),placeholder:"f.eks. Lgebesg"})]}),c.jsxs("div",{className:"checkbox-group",style:{marginTop:"15px"},children:[c.jsx("input",{type:"checkbox",id:"applyToAll",checked:Q,onChange:S=>B(S.target.checked)}),c.jsx("label",{htmlFor:"applyToAll",children:"Lukkedag - Anvend til alle medarbejdere"})]})]}),o==="extended"&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Start dato *"}),c.jsx("input",{type:"date",value:p,onChange:S=>m(S.target.value),required:!0})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Slut dato *"}),c.jsx("input",{type:"date",value:j,onChange:S=>O(S.target.value),required:!0})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Type af fravr *"}),c.jsx("select",{value:g,onChange:S=>x(S.target.value),required:!0,children:P.map(S=>c.jsx("option",{value:S,children:S},S))})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Kommentar (valgfri)"}),c.jsx("input",{type:"text",value:b,onChange:S=>k(S.target.value),placeholder:"f.eks. Ferie i Spanien"})]})]}),c.jsxs("div",{className:"modal-actions",children:[c.jsx("button",{type:"button",className:"btn-secondary",onClick:n,disabled:u,children:"Annuller"}),c.jsx("button",{type:"submit",className:"btn-primary",disabled:u,children:u?"Opretter...":"Opret fravr"})]})]})]})]})})}function aF({employee:t,onClose:e,onSuccess:n}){const{showSuccess:r,showError:i,showWarning:s,showConfirm:a}=Gr(),[o,l]=ie.useState(new Date().getMonth()),[u,d]=ie.useState(new Date().getFullYear()),[p,m]=ie.useState([]),[g,x]=ie.useState(!0),[b,k]=ie.useState(null),[w,N]=ie.useState(!1),[j,O]=ie.useState(""),[Q,B]=ie.useState(""),[P,y]=ie.useState(""),[S,L]=ie.useState(""),[A,T]=ie.useState(""),I=["Feriedag","Feriefridag","Barn sygedag","Sygedag","Sgnehelligdag","Andet"],M=["Januar","Februar","Marts","April","Maj","Juni","Juli","August","September","Oktober","November","December"];ie.useEffect(()=>{ne()},[]);const ne=async()=>{x(!0);const W=await py(t.id);W.success&&m(W.absences),x(!1)},V=W=>{let ae=o+W,le=u;ae>11?(ae=0,le++):ae<0&&(ae=11,le--),l(ae),d(le)},U=(W,ae)=>new Date(ae,W+1,0).getDate(),K=(W,ae)=>{const le=new Date(ae,W,1).getDay();return le===0?6:le-1},H=W=>{const ae=`${String(W).padStart(2,"0")}/${String(o+1).padStart(2,"0")}/${u}`;return p.filter(le=>{if(le.type==="extended"&&le.endDate){const ue=Vi(le.date),de=Vi(le.endDate),ke=Vi(ae);return ke>=ue&&ke<=de}return le.date===ae})},te=W=>{const ae=H(W);ae.length>0&&(k(ae[0]),N(!1))},me=()=>{if(!b)return;const ae=Vi(b.date).toISOString().split("T")[0];if(O(ae),y(b.absenceReason),L(b.comment||""),T(b.hoursWorked||""),b.endDate){const ue=Vi(b.endDate).toISOString().split("T")[0];B(ue)}else B("");N(!0)},R=async()=>{if(!j||!P){s("Udfyld alle pkrvede felter.");return}x(!0);const W=new Date(j),le={date:dm(W),absenceReason:P,comment:S};if(b.type==="partial"&&(le.hoursWorked=parseFloat(A)),b.type==="extended"&&Q){const de=new Date(Q);le.endDate=dm(de)}(await zD(b.id,le)).success?(r("Fravr opdateret!"),await ne(),k(null),N(!1),n()):i("Fejl ved opdatering af fravr."),x(!1)},$=async()=>{if(!b||!await a({title:"Slet fravr",message:"Er du sikker p at du vil slette dette fravr?",confirmText:"Slet",cancelText:"Annuller"}))return;x(!0),(await $D(b.id)).success?(r("Fravr slettet!"),await ne(),k(null),N(!1),n()):i("Fejl ved sletning af fravr."),x(!1)},J=()=>{const W=U(o,u),ae=K(o,u),le=[];for(let ue=0;ue<ae;ue++)le.push(c.jsx("div",{className:"calendar-day empty"},`empty-${ue}`));for(let ue=1;ue<=W;ue++){const de=H(ue),ke=de.length>0;le.push(c.jsxs("div",{className:`calendar-day ${ke?"has-absence":""}`,onClick:()=>te(ue),children:[c.jsx("div",{className:"calendar-day-number",children:ue}),ke&&c.jsx("div",{className:"calendar-absence-indicator",children:de[0].absenceReason.substring(0,3)})]},ue))}return le};return c.jsx("div",{className:"modal-overlay",children:c.jsxs("div",{className:"modal-content modal-large",onClick:W=>W.stopPropagation(),children:[c.jsxs("div",{className:"modal-header",children:[c.jsxs("h2",{children:["Se / rediger fravr - ",t.name]}),c.jsx("button",{className:"modal-close",onClick:e,children:""})]}),c.jsxs("div",{className:"modal-body",children:[c.jsxs("div",{className:"calendar-navigation",children:[c.jsx("button",{className:"btn-secondary btn-small",onClick:()=>V(-1),disabled:g,children:" Forrige"}),c.jsxs("h3",{children:[M[o]," ",u]}),c.jsx("button",{className:"btn-secondary btn-small",onClick:()=>V(1),disabled:g,children:"Nste "})]}),g&&c.jsx("p",{children:"Indlser..."}),!g&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"calendar-container",children:[c.jsxs("div",{className:"calendar-header",children:[c.jsx("div",{className:"calendar-header-day",children:"Man"}),c.jsx("div",{className:"calendar-header-day",children:"Tir"}),c.jsx("div",{className:"calendar-header-day",children:"Ons"}),c.jsx("div",{className:"calendar-header-day",children:"Tor"}),c.jsx("div",{className:"calendar-header-day",children:"Fre"}),c.jsx("div",{className:"calendar-header-day",children:"Lr"}),c.jsx("div",{className:"calendar-header-day",children:"Sn"})]}),c.jsx("div",{className:"calendar-grid",children:J()})]}),b&&!w&&c.jsxs("div",{className:"absence-details",children:[c.jsx("h4",{children:"Fravrsdetaljer"}),c.jsxs("div",{className:"detail-row",children:[c.jsx("strong",{children:"Dato:"})," ",b.date,b.endDate&&` til ${b.endDate}`]}),c.jsxs("div",{className:"detail-row",children:[c.jsx("strong",{children:"Type:"})," ",b.absenceReason]}),b.hoursWorked!==void 0&&c.jsxs("div",{className:"detail-row",children:[c.jsx("strong",{children:"Arbejdstimer:"})," ",b.hoursWorked]}),b.comment&&c.jsxs("div",{className:"detail-row",children:[c.jsx("strong",{children:"Kommentar:"})," ",b.comment]}),c.jsxs("div",{className:"detail-actions",children:[c.jsx("button",{className:"btn-primary btn-small",onClick:me,children:"Rediger"}),c.jsx("button",{className:"btn-danger btn-small",onClick:$,children:"Slet"})]})]}),b&&w&&c.jsxs("div",{className:"absence-edit-form",children:[c.jsx("h4",{children:"Rediger fravr"}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Dato *"}),c.jsx("input",{type:"date",value:j,onChange:W=>O(W.target.value),required:!0})]}),b.type==="extended"&&c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Slut dato *"}),c.jsx("input",{type:"date",value:Q,onChange:W=>B(W.target.value),required:!0})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Type af fravr *"}),c.jsx("select",{value:P,onChange:W=>y(W.target.value),required:!0,children:I.map(W=>c.jsx("option",{value:W,children:W},W))})]}),b.type==="partial"&&c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Arbejdstimer *"}),c.jsx("input",{type:"number",value:A,onChange:W=>T(W.target.value),step:"0.5",min:"0",max:"24",required:!0})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Kommentar (valgfri)"}),c.jsx("input",{type:"text",value:S,onChange:W=>L(W.target.value)})]}),c.jsxs("div",{className:"detail-actions",children:[c.jsx("button",{className:"btn-secondary btn-small",onClick:()=>N(!1),children:"Annuller"}),c.jsx("button",{className:"btn-primary btn-small",onClick:R,children:"Gem ndringer"})]})]})]})]})]})})}function oF({employee:t,onClose:e,onSuccess:n}){const{showSuccess:r,showError:i,showWarning:s}=Gr(),[a,o]=ie.useState(!1),[l,u]=ie.useState(""),[d,p]=ie.useState(""),[m,g]=ie.useState(""),x=async b=>{if(b.preventDefault(),!l){s("Vlg venligst en dato.");return}if(!d||parseFloat(d)<=0){s("Indtast antal overarbejdstimer (skal vre strre end 0).");return}o(!0);try{const k=new Date(l),w=MN(k),N={employeeId:t.id,employeeName:t.name,date:w,hours:parseFloat(d),comment:m||""};(await YD(N)).success?(r("Overarbejde registreret!"),n(),e()):i("Fejl ved registrering af overarbejde.")}catch(k){console.error("Error creating overtime:",k),i("Der opstod en fejl.")}o(!1)};return c.jsx("div",{className:"modal-overlay",onClick:e,children:c.jsxs("div",{className:"modal-content",onClick:b=>b.stopPropagation(),children:[c.jsxs("div",{className:"modal-header",children:[c.jsxs("h2",{children:["Registrer overarbejde for ",t.name]}),c.jsx("button",{className:"modal-close",onClick:e,children:""})]}),c.jsx("div",{className:"modal-body",children:c.jsxs("form",{onSubmit:x,children:[c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Dato *"}),c.jsx("input",{type:"date",value:l,onChange:b=>u(b.target.value),required:!0})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Antal timer *"}),c.jsx("input",{type:"number",value:d,onChange:b=>p(b.target.value),step:"0.5",min:"0.5",max:"24",placeholder:"f.eks. 2 eller 3.5",required:!0}),c.jsx("span",{className:"form-hint",children:"Indtast antal overarbejdstimer"})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Kommentar (valgfri)"}),c.jsx("input",{type:"text",value:m,onChange:b=>g(b.target.value),placeholder:"f.eks. Akut opgave hos kunde"})]}),c.jsxs("div",{className:"modal-actions",children:[c.jsx("button",{type:"button",className:"btn-secondary",onClick:e,disabled:a,children:"Annuller"}),c.jsx("button",{type:"submit",className:"btn-primary",disabled:a,children:a?"Registrerer...":"Registrer overarbejde"})]})]})})]})})}function lF({employee:t,onClose:e,onSuccess:n}){const{showSuccess:r,showError:i,showWarning:s,showConfirm:a}=Gr(),[o,l]=ie.useState(new Date().getMonth()),[u,d]=ie.useState(new Date().getFullYear()),[p,m]=ie.useState([]),[g,x]=ie.useState(!0),[b,k]=ie.useState(null),[w,N]=ie.useState(!1),[j,O]=ie.useState(""),[Q,B]=ie.useState(""),[P,y]=ie.useState(""),S=["Januar","Februar","Marts","April","Maj","Juni","Juli","August","September","Oktober","November","December"];ie.useEffect(()=>{L()},[]);const L=async()=>{x(!0);const te=await VN(t.id);te.success&&m(te.overtime),x(!1)},A=te=>{let me=o+te,R=u;me>11?(me=0,R++):me<0&&(me=11,R--),l(me),d(R)},T=(te,me)=>new Date(me,te+1,0).getDate(),I=(te,me)=>{const R=new Date(me,te,1).getDay();return R===0?6:R-1},M=te=>{const me=`${String(te).padStart(2,"0")}/${String(o+1).padStart(2,"0")}/${u}`;return p.filter(R=>R.date===me)},ne=te=>{const me=M(te);me.length>0&&(k(me[0]),N(!1))},V=()=>{if(!b)return;const me=vp(b.date).toISOString().split("T")[0];O(me),B(b.hours.toString()),y(b.comment||""),N(!0)},U=async()=>{if(!j||!Q){s("Udfyld alle pkrvede felter.");return}if(parseFloat(Q)<=0){s("Timer skal vre strre end 0.");return}x(!0);const te=new Date(j),R={date:MN(te),hours:parseFloat(Q),comment:P};(await JD(b.id,R)).success?(r("Overarbejde opdateret!"),await L(),k(null),N(!1),n()):i("Fejl ved opdatering af overarbejde."),x(!1)},K=async()=>{if(!b||!await a({title:"Slet overarbejde",message:"Er du sikker p at du vil slette denne overarbejdsregistrering?",confirmText:"Slet",cancelText:"Annuller"}))return;x(!0),(await XD(b.id)).success?(r("Overarbejde slettet!"),await L(),k(null),N(!1),n()):i("Fejl ved sletning af overarbejde."),x(!1)},H=()=>{const te=T(o,u),me=I(o,u),R=[];for(let $=0;$<me;$++)R.push(c.jsx("div",{className:"calendar-day empty"},`empty-${$}`));for(let $=1;$<=te;$++){const J=M($),W=J.length>0;R.push(c.jsxs("div",{className:`calendar-day ${W?"has-absence":""}`,onClick:()=>ne($),children:[c.jsx("div",{className:"calendar-day-number",children:$}),W&&c.jsxs("div",{className:"calendar-absence-indicator",style:{background:"#3498db"},children:["OA: ",J[0].hours,"t"]})]},$))}return R};return c.jsx("div",{className:"modal-overlay",children:c.jsxs("div",{className:"modal-content modal-large",onClick:te=>te.stopPropagation(),children:[c.jsxs("div",{className:"modal-header",children:[c.jsxs("h2",{children:["Se / rediger overarbejde - ",t.name]}),c.jsx("button",{className:"modal-close",onClick:e,children:""})]}),c.jsxs("div",{className:"modal-body",children:[c.jsxs("div",{className:"calendar-navigation",children:[c.jsx("button",{className:"btn-secondary btn-small",onClick:()=>A(-1),disabled:g,children:" Forrige"}),c.jsxs("h3",{children:[S[o]," ",u]}),c.jsx("button",{className:"btn-secondary btn-small",onClick:()=>A(1),disabled:g,children:"Nste "})]}),g&&c.jsx("p",{children:"Indlser..."}),!g&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"calendar-container",children:[c.jsxs("div",{className:"calendar-header",children:[c.jsx("div",{className:"calendar-header-day",children:"Man"}),c.jsx("div",{className:"calendar-header-day",children:"Tir"}),c.jsx("div",{className:"calendar-header-day",children:"Ons"}),c.jsx("div",{className:"calendar-header-day",children:"Tor"}),c.jsx("div",{className:"calendar-header-day",children:"Fre"}),c.jsx("div",{className:"calendar-header-day",children:"Lr"}),c.jsx("div",{className:"calendar-header-day",children:"Sn"})]}),c.jsx("div",{className:"calendar-grid",children:H()})]}),b&&!w&&c.jsxs("div",{className:"absence-details",children:[c.jsx("h4",{children:"Overarbejde detaljer"}),c.jsxs("div",{className:"detail-row",children:[c.jsx("strong",{children:"Dato:"})," ",b.date]}),c.jsxs("div",{className:"detail-row",children:[c.jsx("strong",{children:"Timer:"})," ",b.hours," timer"]}),b.comment&&c.jsxs("div",{className:"detail-row",children:[c.jsx("strong",{children:"Kommentar:"})," ",b.comment]}),c.jsxs("div",{className:"detail-actions",children:[c.jsx("button",{className:"btn-primary btn-small",onClick:V,children:"Rediger"}),c.jsx("button",{className:"btn-danger btn-small",onClick:K,children:"Slet"})]})]}),b&&w&&c.jsxs("div",{className:"absence-edit-form",children:[c.jsx("h4",{children:"Rediger overarbejde"}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Dato *"}),c.jsx("input",{type:"date",value:j,onChange:te=>O(te.target.value),required:!0})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Antal timer *"}),c.jsx("input",{type:"number",value:Q,onChange:te=>B(te.target.value),step:"0.5",min:"0.5",max:"24",required:!0})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Kommentar (valgfri)"}),c.jsx("input",{type:"text",value:P,onChange:te=>y(te.target.value)})]}),c.jsxs("div",{className:"detail-actions",children:[c.jsx("button",{className:"btn-secondary btn-small",onClick:()=>N(!1),children:"Annuller"}),c.jsx("button",{className:"btn-primary btn-small",onClick:U,children:"Gem ndringer"})]})]})]})]})]})})}function cF(){const{showError:t,showWarning:e}=Gr(),[n,r]=ie.useState(new Date().getFullYear()),[i,s]=ie.useState(new Date().getMonth()),[a,o]=ie.useState(!1),[l,u]=ie.useState(""),[d,p]=ie.useState([]),[m,g]=ie.useState(!1),[x,b]=ie.useState(!1),[k,w]=ie.useState(!1),[N,j]=ie.useState(!1),[O,Q]=ie.useState(null),[B,P]=ie.useState(!1),[y,S]=ie.useState(!1),[L,A]=ie.useState(null),T=z7(),I=Array.from({length:10},(R,$)=>new Date().getFullYear()-2+$);ie.useEffect(()=>{M()},[]);const M=async()=>{g(!0);try{const R=await $r(fn(vt,"employees")),$=[];R.forEach(J=>{$.push({id:J.id,...J.data()})}),$.sort((J,W)=>J.name.localeCompare(W.name)),p($),$.length>0&&!l&&u($[0].name)}catch(R){console.error("Error loading employees:",R),t("Fejl ved indlsning af medarbejdere.")}finally{g(!1)}},ne=async()=>{if(!a&&!l){e("Vlg venligst en medarbejder.");return}b(!0);try{const R=a?d.map($=>$.name):[l];await nF(n,i,R,a,d)}catch(R){console.error("Error generating PDF:",R),t("Der opstod en fejl ved generering af PDF. Prv igen.")}finally{b(!1)}},V=R=>{Q(R),w(!0)},U=R=>{Q(R),j(!0)},K=()=>{},H=R=>{A(R),P(!0)},te=R=>{A(R),S(!0)},me=()=>{};return c.jsxs("div",{children:[c.jsxs("div",{className:"page-header",children:[c.jsx("h1",{children:"Timeregistrering"}),c.jsx("p",{children:"Generr timeregistreringsformularer for medarbejdere"}),c.jsx("img",{src:"/worker.png",alt:"",className:"page-header-clipart clipart-timeregistrering","aria-hidden":"true"})]}),c.jsxs("div",{className:"content-card",children:[c.jsx("h3",{style:{marginBottom:"20px"},children:"Generr PDF"}),c.jsxs("div",{className:"timesheet-form",children:[c.jsxs("div",{className:"form-section",children:[c.jsx("label",{htmlFor:"year",children:"Vlg r"}),c.jsx("select",{id:"year",value:n,onChange:R=>r(Number(R.target.value)),children:I.map(R=>c.jsx("option",{value:R,children:R},R))})]}),c.jsxs("div",{className:"form-section",children:[c.jsx("label",{htmlFor:"monthPair",children:"Vlg mneder"}),c.jsx("select",{id:"monthPair",value:i,onChange:R=>s(Number(R.target.value)),children:T.map(R=>c.jsx("option",{value:R.value,children:R.label},R.value))})]}),c.jsxs("div",{className:"form-section",children:[c.jsx("label",{children:"Ansatte"}),c.jsxs("div",{className:"checkbox-group",children:[c.jsx("input",{type:"checkbox",id:"allEmployees",checked:a,onChange:R=>o(R.target.checked)}),c.jsx("label",{htmlFor:"allEmployees",children:"Alle ansatte"})]}),m?c.jsx("p",{children:"Indlser medarbejdere..."}):c.jsx("select",{value:l,onChange:R=>u(R.target.value),disabled:a||d.length===0,children:d.length===0?c.jsx("option",{value:"",children:"Ingen medarbejdere"}):d.map(R=>c.jsx("option",{value:R.name,children:R.name},R.id))}),d.length===0&&c.jsx("p",{className:"no-employees-text",children:"Tilfj medarbejdere i Indstillinger frst"})]}),c.jsx("button",{className:"btn-generate",onClick:ne,disabled:x||d.length===0,children:x?"Genererer...":"Generr PDF"})]})]}),c.jsxs("div",{className:"content-card",style:{marginTop:"30px"},children:[c.jsx("h3",{style:{marginBottom:"20px"},children:"Timer og fravr"}),m?c.jsx("p",{children:"Indlser medarbejdere..."}):d.length===0?c.jsx("p",{className:"no-employees-text",children:"Tilfj medarbejdere i Indstillinger frst"}):c.jsx("div",{className:"absence-employee-list",children:d.map(R=>c.jsxs("div",{className:"absence-employee-row",children:[c.jsx("span",{className:"absence-employee-name",children:R.name}),c.jsxs("div",{className:"absence-employee-actions",children:[c.jsx("button",{className:"btn-primary btn-small",onClick:()=>V(R),children:"Opret fravr"}),c.jsx("button",{className:"btn-secondary btn-small",onClick:()=>U(R),children:"Se / rediger fravr"}),c.jsx("button",{className:"btn-primary btn-small",onClick:()=>H(R),children:"Registrer overarbejde"}),c.jsx("button",{className:"btn-secondary btn-small",onClick:()=>te(R),children:"Se / rediger overarbejde"})]})]},R.id))})]}),k&&O&&c.jsx(sF,{employee:O,employees:d,onClose:()=>w(!1),onSuccess:K}),N&&O&&c.jsx(aF,{employee:O,onClose:()=>j(!1),onSuccess:K}),B&&L&&c.jsx(oF,{employee:L,onClose:()=>P(!1),onSuccess:me}),y&&L&&c.jsx(lF,{employee:L,onClose:()=>S(!1),onSuccess:me})]})}function uF({employee:t,onSave:e,onClose:n,isOpen:r}){const[i,s]=ie.useState("");ie.useEffect(()=>{s(t&&t.name||"")},[t,r]);const a=o=>{if(o.preventDefault(),!i.trim()){alert("Indtast venligst et navn.");return}e({name:i.trim()})};return r?c.jsx("div",{className:"modal-overlay",onClick:n,children:c.jsxs("div",{className:"modal-content",onClick:o=>o.stopPropagation(),children:[c.jsxs("div",{className:"modal-header",children:[c.jsx("h2",{children:t?"Redigr medarbejder":"Tilfj medarbejder"}),c.jsx("button",{className:"modal-close",onClick:n,children:""})]}),c.jsxs("form",{onSubmit:a,children:[c.jsx("div",{className:"modal-body",children:c.jsxs("div",{className:"form-group",children:[c.jsx("label",{htmlFor:"employeeName",children:"Navn *"}),c.jsx("input",{type:"text",id:"employeeName",value:i,onChange:o=>s(o.target.value),placeholder:"Indtast medarbejdernavn",autoFocus:!0,required:!0})]})}),c.jsxs("div",{className:"modal-footer",children:[c.jsx("button",{type:"button",className:"btn-secondary",onClick:n,children:"Annuller"}),c.jsx("button",{type:"submit",className:"btn-primary",children:t?"Gem":"Tilfj"})]})]})]})}):null}function hF(){const{showSuccess:t,showError:e,showCriticalConfirm:n}=Gr(),[r,i]=ie.useState([]),[s,a]=ie.useState(!1),[o,l]=ie.useState(!1),[u,d]=ie.useState(null),[p,m]=ie.useState(450),[g,x]=ie.useState(!1),[b,k]=ie.useState(450);ie.useEffect(()=>{w(),N()},[]);const w=async()=>{try{const y=await ig(an(vt,"settings","hourlyRates"));if(y.exists()){const S=y.data().defaultRate||450;m(S),k(S)}}catch(y){console.error("Error loading settings:",y)}},N=async()=>{a(!0);try{const y=await $r(fn(vt,"employees")),S=[];y.forEach(L=>{S.push({id:L.id,...L.data()})}),S.sort((L,A)=>L.name.localeCompare(A.name)),i(S)}catch(y){console.error("Error loading employees:",y),e("Der opstod en fejl ved indlsning af medarbejdere.")}finally{a(!1)}},j=async()=>{try{const y=parseFloat(b);if(isNaN(y)||y<=0){e("Indtast venligst en gyldig timepris.");return}await J0(an(vt,"settings","hourlyRates"),{defaultRate:y,updatedAt:new Date().toISOString()}),m(y),x(!1),t("Timepris gemt!")}catch(y){console.error("Error saving default rate:",y),e("Der opstod en fejl ved gemning af timepris.")}},O=()=>{d(null),l(!0)},Q=y=>{d(y),l(!0)},B=async y=>{if(await n({title:"Slet medarbejder?",message:"Dette vil permanent slette medarbejderen fra systemet.",itemName:y.name,warningText:"Historiske timeregistreringer vil stadig vre synlige, men medarbejderen kan ikke vlges fremadrettet",confirmText:"Slet Permanent",cancelText:"Annuller"}))try{await Js(an(vt,"employees",y.id)),t("Medarbejder slettet!"),await N()}catch(L){console.error("Error deleting employee:",L),e("Der opstod en fejl ved sletning af medarbejder.")}},P=async y=>{try{u?(await Gs(an(vt,"employees",u.id),{name:y.name,updatedAt:new Date().toISOString()}),t("Medarbejder opdateret!")):(await Xs(fn(vt,"employees"),{name:y.name,createdAt:new Date().toISOString()}),t("Medarbejder oprettet!")),l(!1),await N()}catch(S){console.error("Error saving employee:",S),e("Der opstod en fejl ved gemning af medarbejder.")}};return c.jsxs("div",{children:[c.jsxs("div",{className:"page-header",children:[c.jsx("h1",{children:"Indstillinger"}),c.jsx("p",{children:"Administrr medarbejdere og priser"}),c.jsx("img",{src:"/admin.png",alt:"",className:"page-header-clipart clipart-indstillinger","aria-hidden":"true"})]}),c.jsxs("div",{className:"content-card",style:{marginBottom:"20px"},children:[c.jsx("h2",{style:{marginBottom:"20px",fontSize:"20px",color:"#2c3e50"},children:"Standard Timepris"}),g?c.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"15px"},children:[c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[c.jsx("input",{type:"number",value:b,onChange:y=>k(y.target.value),min:"0",step:"50",style:{padding:"10px",fontSize:"18px",width:"150px",border:"1px solid #ddd",borderRadius:"5px"},autoFocus:!0}),c.jsx("span",{style:{color:"#7f8c8d"},children:"kr/time"})]}),c.jsxs("div",{style:{display:"flex",gap:"10px"},children:[c.jsx("button",{className:"btn-secondary",onClick:()=>{k(p),x(!1)},children:"Annuller"}),c.jsx("button",{className:"btn-primary",onClick:j,children:"Gem"})]})]}):c.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[c.jsxs("div",{children:[c.jsxs("div",{style:{fontSize:"32px",fontWeight:"bold",color:"#27ae60",marginBottom:"5px"},children:[p," kr"]}),c.jsx("div",{style:{fontSize:"14px",color:"#7f8c8d"},children:"Standard timepris brugt for alle sager (kan tilpasses per sag)"})]}),c.jsx("button",{className:"btn-secondary",onClick:()=>x(!0),children:"Redigr"})]})]}),c.jsxs("div",{className:"content-card",children:[c.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[c.jsx("h2",{style:{margin:0,fontSize:"20px",color:"#2c3e50"},children:"Medarbejdere"}),c.jsx("button",{className:"btn-primary",onClick:O,children:"+ Tilfj Medarbejder"})]}),s?c.jsx("p",{children:"Indlser medarbejdere..."}):r.length===0?c.jsx("div",{style:{textAlign:"center",padding:"40px",color:"#7f8c8d"},children:c.jsx("p",{children:"Ingen medarbejdere tilfjet endnu."})}):c.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[c.jsx("thead",{children:c.jsxs("tr",{style:{borderBottom:"2px solid #ecf0f1"},children:[c.jsx("th",{style:{textAlign:"left",padding:"12px",color:"#2c3e50",fontWeight:"600"},children:"Navn"}),c.jsx("th",{style:{textAlign:"right",padding:"12px",color:"#2c3e50",fontWeight:"600"},children:"Handlinger"})]})}),c.jsx("tbody",{children:r.map(y=>c.jsxs("tr",{style:{borderBottom:"1px solid #ecf0f1"},children:[c.jsx("td",{style:{padding:"15px"},children:c.jsx("strong",{style:{fontSize:"15px",color:"#2c3e50"},children:y.name})}),c.jsxs("td",{style:{padding:"15px",textAlign:"right"},children:[c.jsx("button",{className:"btn-action btn-edit",onClick:()=>Q(y),children:"Redigr"}),c.jsx("button",{className:"btn-action btn-delete",onClick:()=>B(y),children:"Slet"})]})]},y.id))})]})]}),c.jsx(uF,{isOpen:o,onClose:()=>l(!1),onSave:P,employee:u})]})}const dF=async t=>{const e=an(vt,"projectCounter",String(t));try{const n=await ig(e);if(n.exists()){const i=(n.data().currentNumber||0)+1;return await J0(e,{currentNumber:i}),J_(t,i)}else return await J0(e,{currentNumber:1}),J_(t,1)}catch(n){throw console.error("Error getting next project number:",n),n}},J_=(t,e)=>{const n=String(e).padStart(4,"0");return`${t}-${n}`},UN=t=>!t||t.length===0?0:t.reduce((e,n)=>e+(n.duration||0),0),fF=t=>!t||t.length===0?0:t.filter(e=>e.billable).reduce((e,n)=>e+(n.duration||0),0),pF=t=>!t||t.length===0?0:t.filter(e=>e.billable).reduce((e,n)=>e+(n.duration||0)*(n.rate||0),0),BN=async t=>{try{const e=Wu(fn(vt,"timeEntries"),$d("projectId","==",t)),n=await $r(e),r=[];return n.forEach(i=>{r.push({id:i.id,...i.data()})}),r.sort((i,s)=>new Date(s.date)-new Date(i.date)),r}catch(e){throw console.error("Error getting project time entries:",e),e}},mF=t=>t?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t):!0,gF=t=>t?t.replace(/\D/g,"").length===8:!0,vF={1e3:"Kbenhavn K",1050:"Kbenhavn K",1100:"Kbenhavn K",1150:"Kbenhavn K",1151:"Kbenhavn K",1152:"Kbenhavn K",1153:"Kbenhavn K",1154:"Kbenhavn K",1155:"Kbenhavn K",1156:"Kbenhavn K",1157:"Kbenhavn K",1158:"Kbenhavn K",1159:"Kbenhavn K",1160:"Kbenhavn K",1161:"Kbenhavn K",1162:"Kbenhavn K",1163:"Kbenhavn K",1164:"Kbenhavn K",1165:"Kbenhavn K",1166:"Kbenhavn K",1167:"Kbenhavn K",1168:"Kbenhavn K",1169:"Kbenhavn K",1170:"Kbenhavn K",1171:"Kbenhavn K",1172:"Kbenhavn K",1173:"Kbenhavn K",1174:"Kbenhavn K",1175:"Kbenhavn K",1200:"Kbenhavn K",1201:"Kbenhavn K",1202:"Kbenhavn K",1203:"Kbenhavn K",1204:"Kbenhavn K",1205:"Kbenhavn K",1206:"Kbenhavn K",1207:"Kbenhavn K",1208:"Kbenhavn K",1209:"Kbenhavn K",1210:"Kbenhavn K",1211:"Kbenhavn K",1212:"Kbenhavn K",1213:"Kbenhavn K",1214:"Kbenhavn K",1215:"Kbenhavn K",1216:"Kbenhavn K",1217:"Kbenhavn K",1218:"Kbenhavn K",1219:"Kbenhavn K",1220:"Kbenhavn K",1221:"Kbenhavn K",1240:"Kbenhavn K",1250:"Kbenhavn K",1251:"Kbenhavn K",1252:"Kbenhavn K",1253:"Kbenhavn K",1254:"Kbenhavn K",1255:"Kbenhavn K",1256:"Kbenhavn K",1257:"Kbenhavn K",1258:"Kbenhavn K",1259:"Kbenhavn K",1260:"Kbenhavn K",1261:"Kbenhavn K",1263:"Kbenhavn K",1264:"Kbenhavn K",1265:"Kbenhavn K",1266:"Kbenhavn K",1267:"Kbenhavn K",1268:"Kbenhavn K",1270:"Kbenhavn K",1271:"Kbenhavn K",1300:"Kbenhavn K",1301:"Kbenhavn K",1302:"Kbenhavn K",1303:"Kbenhavn K",1304:"Kbenhavn K",1305:"Kbenhavn K",1306:"Kbenhavn K",1307:"Kbenhavn K",1308:"Kbenhavn K",1309:"Kbenhavn K",1310:"Kbenhavn K",1311:"Kbenhavn K",1312:"Kbenhavn K",1313:"Kbenhavn K",1314:"Kbenhavn K",1315:"Kbenhavn K",1316:"Kbenhavn K",1317:"Kbenhavn K",1318:"Kbenhavn K",1319:"Kbenhavn K",1320:"Kbenhavn K",1321:"Kbenhavn K",1322:"Kbenhavn K",1323:"Kbenhavn K",1324:"Kbenhavn K",1325:"Kbenhavn K",1326:"Kbenhavn K",1327:"Kbenhavn K",1328:"Kbenhavn K",1329:"Kbenhavn K",1350:"Kbenhavn K",1352:"Kbenhavn K",1353:"Kbenhavn K",1354:"Kbenhavn K",1355:"Kbenhavn K",1356:"Kbenhavn K",1357:"Kbenhavn K",1358:"Kbenhavn K",1359:"Kbenhavn K",1360:"Kbenhavn K",1361:"Kbenhavn K",1362:"Kbenhavn K",1363:"Kbenhavn K",1364:"Kbenhavn K",1365:"Kbenhavn K",1366:"Kbenhavn K",1367:"Kbenhavn K",1368:"Kbenhavn K",1369:"Kbenhavn K",1370:"Kbenhavn K",1371:"Kbenhavn K",1400:"Kbenhavn K",1401:"Kbenhavn K",1402:"Kbenhavn K",1403:"Kbenhavn K",1406:"Kbenhavn K",1407:"Kbenhavn K",1408:"Kbenhavn K",1409:"Kbenhavn K",1410:"Kbenhavn K",1411:"Kbenhavn K",1412:"Kbenhavn K",1413:"Kbenhavn K",1414:"Kbenhavn K",1415:"Kbenhavn K",1416:"Kbenhavn K",1417:"Kbenhavn K",1418:"Kbenhavn K",1419:"Kbenhavn K",1420:"Kbenhavn K",1421:"Kbenhavn K",1422:"Kbenhavn K",1423:"Kbenhavn K",1424:"Kbenhavn K",1425:"Kbenhavn K",1426:"Kbenhavn K",1427:"Kbenhavn K",1428:"Kbenhavn K",1429:"Kbenhavn K",1430:"Kbenhavn K",1431:"Kbenhavn K",1432:"Kbenhavn K",1433:"Kbenhavn K",1434:"Kbenhavn K",1435:"Kbenhavn K",1436:"Kbenhavn K",1437:"Kbenhavn K",1438:"Kbenhavn K",1439:"Kbenhavn K",1440:"Kbenhavn K",1441:"Kbenhavn K",1448:"Kbenhavn K",1450:"Kbenhavn K",1451:"Kbenhavn K",1452:"Kbenhavn K",1453:"Kbenhavn K",1454:"Kbenhavn K",1455:"Kbenhavn K",1456:"Kbenhavn K",1457:"Kbenhavn K",1458:"Kbenhavn K",1459:"Kbenhavn K",1460:"Kbenhavn K",1461:"Kbenhavn K",1462:"Kbenhavn K",1463:"Kbenhavn K",1464:"Kbenhavn K",1465:"Kbenhavn K",1466:"Kbenhavn K",1467:"Kbenhavn K",1468:"Kbenhavn K",1470:"Kbenhavn K",1471:"Kbenhavn K",1472:"Kbenhavn K",1473:"Kbenhavn K",1500:"Kbenhavn V",1501:"Kbenhavn V",1502:"Kbenhavn V",1503:"Kbenhavn V",1504:"Kbenhavn V",1505:"Kbenhavn V",1506:"Kbenhavn V",1507:"Kbenhavn V",1508:"Kbenhavn V",1509:"Kbenhavn V",1510:"Kbenhavn V",1511:"Kbenhavn V",1512:"Kbenhavn V",1513:"Kbenhavn V",1514:"Kbenhavn V",1515:"Kbenhavn V",1516:"Kbenhavn V",1517:"Kbenhavn V",1518:"Kbenhavn V",1519:"Kbenhavn V",1520:"Kbenhavn V",1521:"Kbenhavn V",1532:"Kbenhavn V",1533:"Kbenhavn V",1550:"Kbenhavn V",1551:"Kbenhavn V",1552:"Kbenhavn V",1553:"Kbenhavn V",1554:"Kbenhavn V",1555:"Kbenhavn V",1556:"Kbenhavn V",1557:"Kbenhavn V",1558:"Kbenhavn V",1559:"Kbenhavn V",1560:"Kbenhavn V",1561:"Kbenhavn V",1562:"Kbenhavn V",1563:"Kbenhavn V",1564:"Kbenhavn V",1566:"Kbenhavn V",1567:"Kbenhavn V",1568:"Kbenhavn V",1569:"Kbenhavn V",1570:"Kbenhavn V",1571:"Kbenhavn V",1572:"Kbenhavn V",1573:"Kbenhavn V",1574:"Kbenhavn V",1575:"Kbenhavn V",1576:"Kbenhavn V",1577:"Kbenhavn V",1592:"Kbenhavn V",1599:"Kbenhavn V",1600:"Kbenhavn V",1601:"Kbenhavn V",1602:"Kbenhavn V",1603:"Kbenhavn V",1604:"Kbenhavn V",1605:"Kbenhavn V",1606:"Kbenhavn V",1607:"Kbenhavn V",1608:"Kbenhavn V",1609:"Kbenhavn V",1610:"Kbenhavn V",1611:"Kbenhavn V",1612:"Kbenhavn V",1613:"Kbenhavn V",1614:"Kbenhavn V",1615:"Kbenhavn V",1616:"Kbenhavn V",1617:"Kbenhavn V",1618:"Kbenhavn V",1619:"Kbenhavn V",1620:"Kbenhavn V",1621:"Kbenhavn V",1622:"Kbenhavn V",1623:"Kbenhavn V",1624:"Kbenhavn V",1630:"Kbenhavn V",1631:"Kbenhavn V",1632:"Kbenhavn V",1633:"Kbenhavn V",1634:"Kbenhavn V",1635:"Kbenhavn V",1650:"Kbenhavn V",1651:"Kbenhavn V",1652:"Kbenhavn V",1653:"Kbenhavn V",1654:"Kbenhavn V",1655:"Kbenhavn V",1656:"Kbenhavn V",1657:"Kbenhavn V",1658:"Kbenhavn V",1659:"Kbenhavn V",1660:"Kbenhavn V",1661:"Kbenhavn V",1662:"Kbenhavn V",1663:"Kbenhavn V",1664:"Kbenhavn V",1665:"Kbenhavn V",1666:"Kbenhavn V",1667:"Kbenhavn V",1668:"Kbenhavn V",1669:"Kbenhavn V",1670:"Kbenhavn V",1671:"Kbenhavn V",1672:"Kbenhavn V",1673:"Kbenhavn V",1674:"Kbenhavn V",1675:"Kbenhavn V",1676:"Kbenhavn V",1677:"Kbenhavn V",1699:"Kbenhavn V",1700:"Kbenhavn V",1701:"Kbenhavn V",1702:"Kbenhavn V",1703:"Kbenhavn V",1704:"Kbenhavn V",1705:"Kbenhavn V",1706:"Kbenhavn V",1707:"Kbenhavn V",1708:"Kbenhavn V",1709:"Kbenhavn V",1710:"Kbenhavn V",1711:"Kbenhavn V",1712:"Kbenhavn V",1713:"Kbenhavn V",1714:"Kbenhavn V",1715:"Kbenhavn V",1716:"Kbenhavn V",1717:"Kbenhavn V",1718:"Kbenhavn V",1719:"Kbenhavn V",1720:"Kbenhavn V",1721:"Kbenhavn V",1722:"Kbenhavn V",1723:"Kbenhavn V",1724:"Kbenhavn V",1725:"Kbenhavn V",1726:"Kbenhavn V",1727:"Kbenhavn V",1728:"Kbenhavn V",1729:"Kbenhavn V",1730:"Kbenhavn V",1731:"Kbenhavn V",1732:"Kbenhavn V",1733:"Kbenhavn V",1734:"Kbenhavn V",1735:"Kbenhavn V",1736:"Kbenhavn V",1737:"Kbenhavn V",1738:"Kbenhavn V",1739:"Kbenhavn V",1749:"Kbenhavn V",1750:"Kbenhavn V",1751:"Kbenhavn V",1752:"Kbenhavn V",1753:"Kbenhavn V",1754:"Kbenhavn V",1755:"Kbenhavn V",1756:"Kbenhavn V",1757:"Kbenhavn V",1758:"Kbenhavn V",1759:"Kbenhavn V",1760:"Kbenhavn V",1761:"Kbenhavn V",1762:"Kbenhavn V",1763:"Kbenhavn V",1764:"Kbenhavn V",1765:"Kbenhavn V",1766:"Kbenhavn V",1770:"Kbenhavn V",1771:"Kbenhavn V",1772:"Kbenhavn V",1773:"Kbenhavn V",1774:"Kbenhavn V",1775:"Kbenhavn V",1777:"Kbenhavn V",1780:"Kbenhavn V",1785:"Kbenhavn V",1786:"Kbenhavn V",1787:"Kbenhavn V",1790:"Kbenhavn V",1799:"Kbenhavn V",1800:"Frederiksberg C",1801:"Frederiksberg C",1802:"Frederiksberg C",1803:"Frederiksberg C",1804:"Frederiksberg C",1805:"Frederiksberg C",1806:"Frederiksberg C",1807:"Frederiksberg C",1808:"Frederiksberg C",1809:"Frederiksberg C",1810:"Frederiksberg C",1811:"Frederiksberg C",1812:"Frederiksberg C",1813:"Frederiksberg C",1814:"Frederiksberg C",1815:"Frederiksberg C",1816:"Frederiksberg C",1817:"Frederiksberg C",1818:"Frederiksberg C",1819:"Frederiksberg C",1820:"Frederiksberg C",1822:"Frederiksberg C",1823:"Frederiksberg C",1824:"Frederiksberg C",1825:"Frederiksberg C",1826:"Frederiksberg C",1827:"Frederiksberg C",1828:"Frederiksberg C",1829:"Frederiksberg C",1850:"Frederiksberg C",1851:"Frederiksberg C",1852:"Frederiksberg C",1853:"Frederiksberg C",1854:"Frederiksberg C",1855:"Frederiksberg C",1856:"Frederiksberg C",1857:"Frederiksberg C",1860:"Frederiksberg C",1861:"Frederiksberg C",1862:"Frederiksberg C",1863:"Frederiksberg C",1864:"Frederiksberg C",1865:"Frederiksberg C",1866:"Frederiksberg C",1867:"Frederiksberg C",1868:"Frederiksberg C",1870:"Frederiksberg C",1871:"Frederiksberg C",1872:"Frederiksberg C",1873:"Frederiksberg C",1874:"Frederiksberg C",1875:"Frederiksberg C",1876:"Frederiksberg C",1877:"Frederiksberg C",1878:"Frederiksberg C",1879:"Frederiksberg C",1900:"Frederiksberg C",1901:"Frederiksberg C",1902:"Frederiksberg C",1903:"Frederiksberg C",1904:"Frederiksberg C",1905:"Frederiksberg C",1906:"Frederiksberg C",1908:"Frederiksberg C",1909:"Frederiksberg C",1910:"Frederiksberg C",1911:"Frederiksberg C",1912:"Frederiksberg C",1913:"Frederiksberg C",1914:"Frederiksberg C",1915:"Frederiksberg C",1916:"Frederiksberg C",1917:"Frederiksberg C",1920:"Frederiksberg C",1921:"Frederiksberg C",1922:"Frederiksberg C",1923:"Frederiksberg C",1924:"Frederiksberg C",1925:"Frederiksberg C",1926:"Frederiksberg C",1927:"Frederiksberg C",1928:"Frederiksberg C",1931:"Frederiksberg C",1950:"Frederiksberg C",1951:"Frederiksberg C",1952:"Frederiksberg C",1953:"Frederiksberg C",1954:"Frederiksberg C",1955:"Frederiksberg C",1956:"Frederiksberg C",1957:"Frederiksberg C",1958:"Frederiksberg C",1959:"Frederiksberg C",1960:"Frederiksberg C",1961:"Frederiksberg C",1962:"Frederiksberg C",1963:"Frederiksberg C",1964:"Frederiksberg C",1965:"Frederiksberg C",1966:"Frederiksberg C",1967:"Frederiksberg C",1970:"Frederiksberg C",1971:"Frederiksberg C",1972:"Frederiksberg C",1973:"Frederiksberg C",1974:"Frederiksberg C",2e3:"Frederiksberg",2100:"Kbenhavn ",2150:"Nordhavn",2200:"Kbenhavn N",2300:"Kbenhavn S",2400:"Kbenhavn NV",2450:"Kbenhavn SV",2500:"Valby",2600:"Glostrup",2605:"Brndby",2610:"Rdovre",2620:"Albertslund",2625:"Vallensbk",2630:"Taastrup",2635:"Ishj",2640:"Hedehusene",2650:"Hvidovre",2660:"Brndby Strand",2665:"Vallensbk Strand",2670:"Greve",2680:"Solrd Strand",2690:"Karlslunde",2700:"Brnshj",2720:"Vanlse",2730:"Herlev",2740:"Skovlunde",2750:"Ballerup",2760:"Mlv",2765:"Smrum",2770:"Kastrup",2791:"Dragr",2800:"Kongens Lyngby",2820:"Gentofte",2830:"Virum",2840:"Holte",2850:"Nrum",2860:"Sborg",2870:"Dyssegrd",2880:"Bagsvrd",2900:"Hellerup",2920:"Charlottenlund",2930:"Klampenborg",2942:"Skodsborg",2950:"Vedbk",2960:"Rungsted Kyst",2970:"Hrsholm",2980:"Kokkedal",2990:"Niv",3e3:"Helsingr",3050:"Humlebk",3060:"Espergrde",3070:"Snekkersten",3080:"Tikb",3100:"Hornbk",3120:"Dronningmlle",3140:"lsgrde",3150:"Hellebk",3200:"Helsinge",3210:"Vejby",3220:"Tisvildeleje",3230:"Grsted",3250:"Gilleleje",3300:"Frederiksvrk",3310:"lsted",3320:"Skvinge",3330:"Grlse",3360:"Liseleje",3370:"Melby",3390:"Hundested",3400:"Hillerd",3450:"Allerd",3460:"Birkerd",3480:"Fredensborg",3490:"Kvistgrd",3500:"Vrlse",3520:"Farum",3540:"Lynge",3550:"Slangerup",3600:"Frederikssund",3630:"Jgerspris",3650:"lstykke",3660:"Stenlse",3670:"Veks Sjlland",3700:"Rnne",3720:"Aakirkeby",3730:"Nex",3740:"Svaneke",3751:"stermarie",3760:"Gudhjem",3770:"Allinge",3782:"Klemensker",3790:"Hasle",4e3:"Roskilde",4030:"Tune",4040:"Jyllinge",4050:"Skibby",4060:"Kirke Sby",4070:"Kirke Hyllinge",4100:"Ringsted",4130:"Viby Sjlland",4140:"Borup",4160:"Herlufmagle",4171:"Glums",4173:"Fjenneslev",4174:"Jystrup Midtsj",4180:"Sor",4190:"Munke Bjergby",4200:"Slagelse",4220:"Korsr",4230:"Sklskr",4241:"Vemmelev",4242:"Boeslunde",4243:"Rude",4250:"Fuglebjerg",4261:"Dalmose",4262:"Sandved",4270:"Hng",4281:"Grlev",4291:"Ruds Vedby",4293:"Dianalund",4295:"Stenlille",4296:"Nyrup",4300:"Holbk",4320:"Lejre",4330:"Hvals",4340:"Tllse",4350:"Ugerlse",4360:"Kirke Eskilstrup",4370:"Store Merlse",4390:"Vipperd",4400:"Kalundborg",4420:"Regstrup",4440:"Mrkv",4450:"Jyderup",4460:"Snertinge",4470:"Sveblle",4480:"Store Fuglede",4490:"Jerslev Sjlland",4500:"Nykbing Sj",4520:"Svinninge",4532:"Gislinge",4534:"Hrve",4540:"Frevejle",4550:"Asns",4560:"Vig",4571:"Grevinge",4572:"Nrre Asmindrup",4573:"Hjby",4581:"Rrvig",4583:"Sjllands Odde",4591:"Fllenslev",4592:"Sejer",4593:"Eskebjerg",4600:"Kge",4621:"Gadstrup",4622:"Havdrup",4623:"Lille Skensved",4632:"Bjverskov",4640:"Faxe",4652:"Hrlev",4653:"Karise",4654:"Faxe Ladeplads",4660:"Store Heddinge",4671:"Strby",4672:"Klippinge",4673:"Rdvig Stevns",4681:"Herflge",4682:"Tureby",4683:"Rnnede",4684:"Holmegaard",4690:"Haslev",4700:"Nstved",4720:"Prst",4733:"Tappernje",4735:"Mern",4736:"Karrebksminde",4750:"Lundby",4760:"Vordingborg",4771:"Kalvehave",4772:"Langebk",4773:"Stensved",4780:"Stege",4791:"Borre",4792:"Askeby",4793:"Bog By",4800:"Nykbing F",4840:"Nrre Alslev",4850:"Stubbekbing",4862:"Guldborg",4863:"Eskilstrup",4871:"Horbelev",4872:"Idestrup",4873:"Vggerlse",4874:"Gedser",4880:"Nysted",4891:"Toreby L",4892:"Kettinge",4894:"ster Ulslev",4895:"Errindlev",4900:"Nakskov",4912:"Harpelunde",4913:"Horslunde",4920:"Sllested",4930:"Maribo",4941:"Bandholm",4943:"Torrig L",4944:"Fej",4951:"Nrreballe",4952:"Stokkemarke",4953:"Vesterborg",4960:"Holeby",4970:"Rdby",4983:"Dannemare",4990:"Sakskbing",5e3:"Odense C",5100:"Odense C",5200:"Odense V",5210:"Odense NV",5220:"Odense S",5230:"Odense M",5240:"Odense N",5250:"Odense SV",5260:"Odense S",5270:"Odense N",5290:"Marslev",5300:"Kerteminde",5320:"Agedrup",5330:"Munkebo",5350:"Rynkeby",5370:"Mesinge",5380:"Dalby",5390:"Martofte",5400:"Bogense",5450:"Otterup",5462:"Morud",5463:"Harndrup",5464:"Brenderup Fyn",5466:"Asperup",5471:"Snders",5474:"Veflinge",5485:"Skamby",5491:"Blommenslyst",5492:"Vissenbjerg",5500:"Middelfart",5540:"Ullerslev",5550:"Langeskov",5560:"Aarup",5580:"Nrre Aaby",5591:"Gelsted",5592:"Ejby",5600:"Faaborg",5610:"Assens",5620:"Glamsbjerg",5631:"Ebberup",5642:"Millinge",5672:"Broby",5683:"Haarby",5690:"Tommerup",5700:"Svendborg",5750:"Ringe",5762:"Vester Skerninge",5771:"Stenstrup",5772:"Kvrndrup",5792:"rslev",5800:"Nyborg",5853:"rbk",5854:"Gislev",5856:"Ryslinge",5863:"Ferritslev Fyn",5871:"Frrup",5874:"Hesselager",5881:"Skrup Fyn",5882:"Vejstrup",5883:"Oure",5884:"Gudme",5892:"Gudbjerg Sydfyn",5900:"Rudkbing",5932:"Humble",5935:"Bagenkop",5943:"Stryn",5953:"Tranekr",5960:"Marstal",5970:"rskbing",5985:"Sby r",6e3:"Kolding",6040:"Egtved",6051:"Almind",6052:"Viuf",6064:"Jordrup",6070:"Christiansfeld",6091:"Bjert",6092:"Snder Stenderup",6093:"Sjlund",6094:"Hejls",6100:"Haderslev",6200:"Aabenraa",6230:"Rdekro",6240:"Lgumkloster",6261:"Bredebro",6270:"Tnder",6280:"Hjer",6300:"Grsten",6310:"Broager",6320:"Egernsund",6330:"Padborg",6340:"Krus",6360:"Tinglev",6372:"Bylderup-Bov",6392:"Bolderslev",6400:"Snderborg",6430:"Nordborg",6440:"Augustenborg",6470:"Sydals",6500:"Vojens",6510:"Gram",6520:"Toftlund",6534:"Agerskov",6535:"Branderup J",6541:"Bevtoft",6560:"Sommersted",6580:"Vamdrup",6600:"Vejen",6621:"Gesten",6622:"Bkke",6623:"Vorbasse",6630:"Rdding",6640:"Lunderskov",6650:"Brrup",6660:"Lintrup",6670:"Holsted",6682:"Hovborg",6683:"Fvling",6690:"Grding",6700:"Esbjerg",6701:"Esbjerg",6705:"Esbjerg ",6710:"Esbjerg V",6715:"Esbjerg N",6720:"Fan",6731:"Tjreborg",6740:"Bramming",6752:"Glejbjerg",6753:"Agerbk",6760:"Ribe",6771:"Gredstedbro",6780:"Skrbk",6792:"Rm",6800:"Varde",6818:"rre",6823:"Ansager",6830:"Nrre Nebel",6840:"Oksbl",6851:"Janderup Vestj",6852:"Billum",6853:"Vejers Strand",6854:"Henne",6855:"Outrup",6857:"Blvand",6862:"Tistrup",6870:"lgod",6880:"Tarm",6893:"Hemmet",6900:"Skjern",6920:"Videbk",6933:"Kibk",6940:"Lem St",6950:"Ringkbing",6960:"Hvide Sande",6971:"Spjald",6973:"rnhj",6980:"Tim",6990:"Ulfborg",7e3:"Fredericia",7007:"Fredericia",7029:"Fredericia",7080:"Brkop",7100:"Vejle",7120:"Vejle st",7130:"Juelsminde",7140:"Stouby",7150:"Barrit",7160:"Trring",7171:"Uldum",7173:"Vonge",7182:"Bredsten",7183:"Randbl",7184:"Vandel",7190:"Billund",7200:"Grindsted",7250:"Hejnsvig",7260:"Snder Omme",7270:"Stakroge",7280:"Snder Felding",7300:"Jelling",7321:"Gadbjerg",7323:"Give",7330:"Brande",7361:"Ejstrupholm",7362:"Hampen",7400:"Herning",7430:"Ikast",7441:"Bording",7442:"Engesvang",7451:"Sunds",7470:"Karup J",7480:"Vildbjerg",7490:"Aulum",7500:"Holstebro",7540:"Haderup",7550:"Srvad",7560:"Hjerm",7570:"Vemb",7600:"Struer",7620:"Lemvig",7650:"Bvlingbjerg",7660:"Bkmarksbro",7673:"Harbore",7680:"Thyborn",7700:"Thisted",7730:"Hanstholm",7741:"Frstrup",7742:"Vesls",7752:"Snedsted",7755:"Bedsted Thy",7760:"Hurup Thy",7770:"Vestervig",7790:"Thyholm",7800:"Skive",7830:"Vinderup",7840:"Hjslev",7850:"Stoholm Jyll",7860:"Spttrup",7870:"Roslev",7884:"Fur",7900:"Nykbing M",7950:"Erslev",7960:"Karby",7970:"Redsted M",7980:"Vils",7990:"ster Assels",8e3:"Aarhus C",8100:"Aarhus C",8200:"Aarhus N",8210:"Aarhus V",8220:"Brabrand",8230:"byhj",8240:"Risskov",8245:"Risskov ",8250:"Eg",8260:"Viby J",8270:"Hjbjerg",8300:"Odder",8305:"Sams",8310:"Tranbjerg J",8320:"Mrslet",8330:"Beder",8340:"Malling",8350:"Hundslund",8355:"Solbjerg",8361:"Hasselager",8362:"Hrning",8370:"Hadsten",8380:"Trige",8381:"Tilst",8382:"Hinnerup",8400:"Ebeltoft",8410:"Rnde",8420:"Knebel",8444:"Balle",8450:"Hammel",8462:"Harlev J",8464:"Galten",8471:"Sabro",8472:"Sporup",8500:"Grenaa",8520:"Lystrup",8530:"Hjortshj",8541:"Skdstrup",8543:"Hornslet",8544:"Mrke",8550:"Ryomgrd",8560:"Kolind",8570:"Trustrup",8581:"Nimtofte",8585:"Glesborg",8586:"rum Djurs",8592:"Anholt",8600:"Silkeborg",8620:"Kjellerup",8632:"Lemming",8641:"Sorring",8643:"Ans By",8653:"Them",8654:"Bryrup",8660:"Skanderborg",8670:"Lsby",8680:"Ry",8700:"Horsens",8721:"Daugrd",8722:"Hedensted",8723:"Lsning",8732:"Hovedgrd",8740:"Brdstrup",8751:"Gedved",8752:"stbirk",8762:"Flemming",8763:"Rask Mlle",8765:"Klovborg",8766:"Nrre Snede",8781:"Stenderup",8783:"Hornsyld",8800:"Viborg",8830:"Tjele",8831:"Lgstrup",8832:"Skals",8840:"Rdkrsbro",8850:"Bjerringbro",8860:"Ulstrup",8870:"Lang",8881:"Thors",8882:"Frvang",8883:"Gjern",8900:"Randers C",8920:"Randers NV",8930:"Randers N",8940:"Randers SV",8950:"rsted",8960:"Randers S",8961:"Allingbro",8963:"Auning",8970:"Havndal",8981:"Spentrup",8983:"Gjerlev J",8990:"Frup",9e3:"Aalborg",9100:"Aalborg",9200:"Aalborg SV",9210:"Aalborg S",9220:"Aalborg st",9230:"Svenstrup J",9240:"Nibe",9260:"Gistrup",9270:"Klarup",9280:"Storvorde",9293:"Kongerslev",9300:"Sby",9310:"Vodskov",9320:"Hjallerup",9330:"Dronninglund",9340:"Asaa",9352:"Dybvad",9362:"Gandrup",9370:"Hals",9380:"Vestbjerg",9381:"Sulsted",9382:"Tylstrup",9400:"Nrresundby",9430:"Vadum",9440:"Aabybro",9460:"Brovst",9480:"Lkken",9490:"Pandrup",9492:"Blokhus",9493:"Saltum",9500:"Hobro",9510:"Arden",9520:"Skrping",9530:"Stvring",9541:"Suldrup",9550:"Mariager",9560:"Hadsund",9574:"Blum",9575:"Terndrup",9600:"Aars",9610:"Nrager",9620:"Aalestrup",9631:"Gedsted",9632:"Mldrup",9640:"Fars",9670:"Lgstr",9681:"Ranum",9690:"Fjerritslev",9700:"Brnderslev",9740:"Jerslev J",9750:"stervr",9760:"Vr",9800:"Hjrring",9830:"Trs",9850:"Hirtshals",9870:"Sindal",9881:"Bindslev",9900:"Frederikshavn",9940:"Ls",9970:"Strandby",9981:"Jerup",9982:"lbk",9990:"Skagen"};function yF(t){if(!t)return null;const e=t.replace(/\s/g,"");return e.length!==4||!/^\d{4}$/.test(e)?null:vF[e]||null}function wF(t,e,n){if(!t&&!e&&!n)return"";const r=[];if(t&&r.push(t),e||n){const i=[];e&&i.push(e),n&&i.push(n),r.push(i.join(" "))}return r.join(", ")}function KN({isOpen:t,onClose:e,onSave:n,project:r}){const[i,s]=ie.useState({name:"",description:"",customerName:"",customerPhone:"",customerEmail:"",customerAddress:"",streetAddress:"",postalCode:"",city:"",type:"fixed-price",fixedPrice:0,status:"planned"}),[a,o]=ie.useState({});ie.useEffect(()=>{if(r)if(r.streetAddress||r.postalCode||r.city)s({name:r.name||"",description:r.description||"",customerName:r.customerName||"",customerPhone:r.customerPhone||"",customerEmail:r.customerEmail||"",customerAddress:r.customerAddress||"",streetAddress:r.streetAddress||"",postalCode:r.postalCode||"",city:r.city||"",type:r.type||"fixed-price",fixedPrice:r.fixedPrice||0,status:r.status||"planned"});else if(r.customerAddress){const m=r.customerAddress.split(",").map(k=>k.trim());let g="",x="",b="";if(m.length>=2){g=m[0];const w=m[1].match(/^(\d{4})\s+(.+)$/);w&&(x=w[1],b=w[2])}else m.length===1&&(g=m[0]);s({name:r.name||"",description:r.description||"",customerName:r.customerName||"",customerPhone:r.customerPhone||"",customerEmail:r.customerEmail||"",customerAddress:r.customerAddress||"",streetAddress:g,postalCode:x,city:b,type:r.type||"fixed-price",fixedPrice:r.fixedPrice||0,status:r.status||"planned"})}else s({name:r.name||"",description:r.description||"",customerName:r.customerName||"",customerPhone:r.customerPhone||"",customerEmail:r.customerEmail||"",customerAddress:"",streetAddress:"",postalCode:"",city:"",type:r.type||"fixed-price",fixedPrice:r.fixedPrice||0,status:r.status||"planned"});else s({name:"",description:"",customerName:"",customerPhone:"",customerEmail:"",customerAddress:"",streetAddress:"",postalCode:"",city:"",type:"fixed-price",fixedPrice:0,status:"planned"});o({})},[r,t]);const l=m=>{const{name:g,value:x}=m.target;s(b=>({...b,[g]:x})),a[g]&&o(b=>({...b,[g]:null}))},u=m=>{const g=m.target.value.replace(/\D/g,"").slice(0,4);if(s(x=>({...x,postalCode:g})),g.length===4){const x=yF(g);x?(s(b=>({...b,city:x})),a.postalCode&&o(b=>({...b,postalCode:null}))):o(b=>({...b,postalCode:"Ugyldigt postnummer"}))}else a.postalCode&&o(x=>({...x,postalCode:null}))},d=()=>{const m={};return(!i.name||i.name.trim().length<3)&&(m.name="Sagsnavn skal vre mindst 3 tegn"),i.customerEmail&&!mF(i.customerEmail)&&(m.customerEmail="Ugyldig email adresse"),i.customerPhone&&!gF(i.customerPhone)&&(m.customerPhone="Telefonnummer skal vre 8 cifre"),i.postalCode&&i.postalCode.length!==4&&(m.postalCode="Postnummer skal vre 4 cifre"),i.type==="fixed-price"&&(!i.fixedPrice||i.fixedPrice<=0)&&(m.fixedPrice="Fast pris skal vre strre end 0"),o(m),Object.keys(m).length===0},p=m=>{if(m.preventDefault(),d()){const g=wF(i.streetAddress,i.postalCode,i.city);n({...i,customerAddress:g,streetAddress:i.streetAddress,postalCode:i.postalCode,city:i.city})}};return t?c.jsx("div",{className:"modal-overlay",children:c.jsxs("div",{className:"modal-content",onClick:m=>m.stopPropagation(),children:[c.jsxs("div",{className:"modal-header",children:[c.jsx("h2",{children:r?"Ret Sag":"Ny Sag"}),c.jsx("button",{className:"modal-close",onClick:e,children:""})]}),c.jsxs("form",{onSubmit:p,children:[c.jsxs("div",{className:"modal-body",children:[c.jsxs("div",{className:"form-group",children:[c.jsx("label",{htmlFor:"name",children:"Sagsnavn *"}),c.jsx("input",{type:"text",id:"name",name:"name",value:i.name,onChange:l,className:a.name?"error":"",placeholder:"F.eks. Kkkenrenovering"}),a.name&&c.jsx("span",{className:"error-message",children:a.name})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{htmlFor:"description",children:"Beskrivelse"}),c.jsx("textarea",{id:"description",name:"description",value:i.description,onChange:l,placeholder:"Kort beskrivelse af sagen...",rows:"3"})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{htmlFor:"customerName",children:"Kundenavn"}),c.jsx("input",{type:"text",id:"customerName",name:"customerName",value:i.customerName,onChange:l,placeholder:"F.eks. Peter Jensen"})]}),c.jsxs("div",{className:"form-row",children:[c.jsxs("div",{className:"form-group",children:[c.jsx("label",{htmlFor:"customerPhone",children:"Telefon"}),c.jsx("input",{type:"text",id:"customerPhone",name:"customerPhone",value:i.customerPhone,onChange:l,className:a.customerPhone?"error":"",placeholder:"12345678"}),a.customerPhone&&c.jsx("span",{className:"error-message",children:a.customerPhone})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{htmlFor:"customerEmail",children:"Email"}),c.jsx("input",{type:"email",id:"customerEmail",name:"customerEmail",value:i.customerEmail,onChange:l,className:a.customerEmail?"error":"",placeholder:"kunde@example.com"}),a.customerEmail&&c.jsx("span",{className:"error-message",children:a.customerEmail})]})]}),c.jsx("div",{className:"form-section-divider",children:c.jsx("h3",{children:"Adresse"})}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{htmlFor:"streetAddress",children:"Vejnavn og nummer"}),c.jsx("input",{type:"text",id:"streetAddress",name:"streetAddress",value:i.streetAddress,onChange:l,placeholder:"F.eks. Kongevejen 10"})]}),c.jsxs("div",{className:"form-row",children:[c.jsxs("div",{className:"form-group",children:[c.jsx("label",{htmlFor:"postalCode",children:"Postnummer"}),c.jsx("input",{type:"text",id:"postalCode",name:"postalCode",value:i.postalCode,onChange:u,className:a.postalCode?"error":"",placeholder:"2830",maxLength:"4"}),a.postalCode&&c.jsx("span",{className:"error-message",children:a.postalCode}),c.jsx("small",{className:"form-hint",children:"Byen udfyldes automatisk"})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{htmlFor:"city",children:"By"}),c.jsx("input",{type:"text",id:"city",name:"city",value:i.city,onChange:l,placeholder:"Holte",readOnly:!0,className:"autofilled-field"}),c.jsx("small",{className:"form-hint",children:"Udfyldes automatisk fra postnummer"})]})]}),c.jsx("div",{className:"form-section-divider",children:c.jsx("h3",{children:"Sagens detaljer"})}),c.jsxs("div",{className:"form-row",children:[c.jsxs("div",{className:"form-group",children:[c.jsx("label",{htmlFor:"type",children:"Type *"}),c.jsxs("select",{id:"type",name:"type",value:i.type,onChange:l,children:[c.jsx("option",{value:"fixed-price",children:"Fast Pris"}),c.jsx("option",{value:"time-material",children:"Tid & Materiale"})]})]}),i.type==="fixed-price"&&c.jsxs("div",{className:"form-group",children:[c.jsx("label",{htmlFor:"fixedPrice",children:"Fast pris (kr) *"}),c.jsx("input",{type:"number",id:"fixedPrice",name:"fixedPrice",value:i.fixedPrice,onChange:l,className:a.fixedPrice?"error":"",placeholder:"25000",min:"0"}),a.fixedPrice&&c.jsx("span",{className:"error-message",children:a.fixedPrice})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{htmlFor:"status",children:"Status *"}),c.jsxs("select",{id:"status",name:"status",value:i.status,onChange:l,children:[c.jsx("option",{value:"planned",children:"Planlagt"}),c.jsx("option",{value:"in-progress",children:"I Gang"}),c.jsx("option",{value:"ready-for-invoice",children:"Klar til Faktura"}),c.jsx("option",{value:"closed",children:"Lukket"})]})]})]})]}),c.jsxs("div",{className:"modal-footer",children:[c.jsx("button",{type:"button",className:"btn-secondary",onClick:e,children:"Annuller"}),c.jsx("button",{type:"submit",className:"btn-primary",children:r?"Gem ndringer":"Opret Sag"})]})]})]})}):null}const ni=t=>new Intl.NumberFormat("da-DK",{style:"currency",currency:"DKK",minimumFractionDigits:0,maximumFractionDigits:2}).format(t),_F=t=>{if(!t)return"";const n=t.replace(/\D/g,"").match(/^(\d{2})(\d{2})(\d{2})(\d{2})$/);return n?`${n[1]} ${n[2]} ${n[3]} ${n[4]}`:t},bF=t=>t?`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(t)}`:"#",yp=t=>{if(!t)return"";typeof t=="string"&&(t=new Date(t));const e=String(t.getDate()).padStart(2,"0"),n=String(t.getMonth()+1).padStart(2,"0"),r=t.getFullYear();return`${e}/${n}/${r}`},X_=t=>!t&&t!==0?"0":Number(t).toFixed(1).replace(".",","),A1=["#5B8DBE","#7A9D54","#CD7672","#8B7FB8","#CC8E5E","#5B9D9D","#9D6B8B","#7B8D5B","#8B6B5B","#6B7B9D","#9D7B5B","#6B9D7B"],xF=t=>{if(!t)return A1[0];let e=0;for(let r=0;r<t.length;r++)e=t.charCodeAt(r)+((e<<5)-e);const n=Math.abs(e)%A1.length;return A1[n]};function SF(){const t=Uu(),{showSuccess:e,showError:n,showCriticalConfirm:r}=Gr(),[i,s]=ie.useState([]),[a,o]=ie.useState([]),[l,u]=ie.useState(!1),[d,p]=ie.useState(!1),[m,g]=ie.useState(null),[x,b]=ie.useState(""),[k,w]=ie.useState("all"),[N,j]=ie.useState("all"),[O,Q]=ie.useState({}),[B,P]=ie.useState(!1);ie.useEffect(()=>{y()},[]),ie.useEffect(()=>{L()},[i,x,k,N]);const y=async()=>{u(!0);try{const K=await $r(fn(vt,"projects")),H=[];K.forEach(te=>{H.push({id:te.id,...te.data()})}),H.sort((te,me)=>me.projectNumber&&te.projectNumber?me.projectNumber.localeCompare(te.projectNumber):0),s(H),S(H)}catch(K){console.error("Error loading projects:",K),n("Hovsa! Kunne ikke indlse sager. Prv igen.")}finally{u(!1)}},S=async K=>{const H={};for(const te of K){const me=await BN(te.id);H[te.id]=UN(me)}Q(H)},L=()=>{let K=i;x.trim()&&(K=K.filter(H=>{var te,me,R,$,J;return((te=H.name)==null?void 0:te.toLowerCase().includes(x.toLowerCase()))||((me=H.customerName)==null?void 0:me.toLowerCase().includes(x.toLowerCase()))||((R=H.projectNumber)==null?void 0:R.toLowerCase().includes(x.toLowerCase()))||(($=H.streetAddress)==null?void 0:$.toLowerCase().includes(x.toLowerCase()))||((J=H.city)==null?void 0:J.toLowerCase().includes(x.toLowerCase()))})),k!=="all"&&(K=K.filter(H=>H.status===k)),N!=="all"&&(K=K.filter(H=>H.type===N)),o(K)},A=()=>{g(null),p(!0)},T=(K,H)=>{K.stopPropagation(),g(H),p(!0)},I=async K=>{try{if(m)await Gs(an(vt,"projects",m.id),K),e("Sag opdateret!");else{const H=new Date().getFullYear(),te=await dF(H);await Xs(fn(vt,"projects"),{...K,projectNumber:te,createdAt:new Date().toISOString()}),e("Ny sag oprettet!")}p(!1),g(null),y()}catch(H){console.error("Error saving project:",H),n("Hovsa! Kunne ikke gemme sagen. Prv igen.")}},M=async(K,H)=>{K.stopPropagation();const te=O[H.id]||0;if(await r({title:"Slet sag permanent?",message:"Dette kan ikke fortrydes. Alle data p sagen vil blive slettet.",itemName:`${H.projectNumber} - ${H.name}`,warningText:te>0?`Der er registreret ${te} timer p denne sag`:null,confirmText:"Slet Permanent",cancelText:"Annuller"}))try{await Js(an(vt,"projects",H.id)),e("Sag slettet!"),y()}catch(R){console.error("Error deleting project:",R),n("Hovsa! Kunne ikke slette sagen. Prv igen.")}},ne=K=>{t(`/sager/${K.id}`)},V=K=>K==="fixed-price"?"Fast Pris":"Tid & Materiale",U=K=>{const H={planned:{color:"#3498db",label:"Planlagt",icon:""},"in-progress":{color:"#27ae60",label:"I Gang",icon:""},"ready-for-invoice":{color:"#f39c12",label:"Klar til Faktura",icon:""},closed:{color:"#9b59b6",label:"Lukket",icon:""}};return H[K]||H.planned};return c.jsxs("div",{children:[c.jsx("div",{className:"page-header-friendly",children:c.jsxs("div",{className:"welcome-section",children:[c.jsx("h1",{children:"Hej! Her er dine sager "}),c.jsx("p",{className:"welcome-subtitle",children:"Klik p en sag for at se detaljer og timeregistreringer"}),c.jsx("img",{src:"/workers.png",alt:"",className:"page-header-clipart clipart-sager","aria-hidden":"true"})]})}),c.jsxs("div",{className:"content-card",children:[c.jsxs("div",{className:"sager-controls-new",children:[c.jsxs("div",{className:"search-section",children:[c.jsxs("div",{className:"search-box-large",children:[c.jsx("span",{className:"search-icon",children:""}),c.jsx("input",{type:"text",placeholder:"Skriv kundenavn eller sagsnavn...",value:x,onChange:K=>b(K.target.value),className:"search-input-large"})]}),c.jsxs("button",{className:"btn-filter-toggle",onClick:()=>P(!B),children:["Filtre ",B?"":""]}),c.jsxs("button",{className:"btn-create-friendly",onClick:A,children:[c.jsx("span",{className:"btn-icon-large",children:"+"})," Opret ny sag"]})]}),B&&c.jsxs("div",{className:"filter-panel",children:[c.jsxs("div",{className:"filter-group",children:[c.jsx("label",{children:"Status:"}),c.jsxs("select",{value:k,onChange:K=>w(K.target.value),className:"filter-select-friendly",children:[c.jsx("option",{value:"all",children:"Alle statusser"}),c.jsx("option",{value:"planned",children:" Planlagt"}),c.jsx("option",{value:"in-progress",children:" I Gang"}),c.jsx("option",{value:"ready-for-invoice",children:" Klar til Faktura"}),c.jsx("option",{value:"closed",children:" Lukket"})]})]}),c.jsxs("div",{className:"filter-group",children:[c.jsx("label",{children:"Type:"}),c.jsxs("select",{value:N,onChange:K=>j(K.target.value),className:"filter-select-friendly",children:[c.jsx("option",{value:"all",children:"Alle typer"}),c.jsx("option",{value:"fixed-price",children:"Fast Pris"}),c.jsx("option",{value:"time-material",children:"Tid & Materiale"})]})]})]})]}),l?c.jsxs("div",{className:"loading-friendly",children:[c.jsx("div",{className:"spinner"}),c.jsx("p",{children:"Henter dine sager..."})]}):a.length===0?c.jsxs("div",{className:"empty-state-friendly",children:[c.jsx("div",{className:"empty-icon",children:""}),c.jsx("h3",{children:i.length===0?"Ingen sager endnu":"Ingen sager matcher din sgning"}),c.jsx("p",{children:i.length===0?'Klik p "Opret ny sag" for at komme i gang!':"Prv at justere dine filtre eller sgning"}),i.length===0&&c.jsxs("button",{className:"btn-create-friendly",onClick:A,style:{marginTop:"20px"},children:[c.jsx("span",{className:"btn-icon-large",children:"+"})," Opret din frste sag"]})]}):c.jsx("div",{className:"projects-grid",children:a.map(K=>{const H=U(K.status),te=O[K.id]||0,me=xF(K.id);return c.jsxs("div",{className:"project-card-new",onClick:()=>ne(K),children:[c.jsxs("div",{className:"project-card-header-block",style:{backgroundColor:me},children:[c.jsxs("div",{className:"project-card-address-main",children:[c.jsx("div",{className:"address-street",children:K.streetAddress||"Adresse ikke angivet"}),c.jsx("div",{className:"address-postal",children:K.postalCode&&K.city?`${K.postalCode} ${K.city}`:K.customerAddress||""})]}),c.jsxs("div",{className:"project-card-actions-new",children:[c.jsx("button",{className:"card-action-btn-new edit",onClick:R=>T(R,K),title:"Ret sag",children:""}),c.jsx("button",{className:"card-action-btn-new delete",onClick:R=>M(R,K),title:"Slet sag",children:""})]})]}),c.jsx("h3",{className:"project-card-name",children:K.name}),c.jsxs("div",{className:"project-card-info",children:[c.jsxs("div",{className:"info-row-new",children:[c.jsx("span",{className:"info-label",children:"SAGSNR:"}),c.jsx("span",{className:"info-value",children:K.projectNumber})]}),c.jsxs("div",{className:"info-row-new",children:[c.jsx("span",{className:"info-label",children:"KUNDE:"}),c.jsx("span",{className:"info-value",children:K.customerName||"Ikke angivet"})]}),c.jsxs("div",{className:"info-row-new",children:[c.jsx("span",{className:"info-label",children:"TYPE:"}),c.jsx("span",{className:"info-value",children:V(K.type)})]}),c.jsxs("div",{className:"info-row-new",children:[c.jsx("span",{className:"info-label",children:"STATUS:"}),c.jsx("span",{className:"status-badge-new",style:{backgroundColor:H.color+"15",color:H.color,borderColor:H.color},children:H.label})]}),c.jsxs("div",{className:"info-row-new",children:[c.jsx("span",{className:"info-label",children:"TIMER REGISTRERET:"}),c.jsxs("span",{className:"info-value hours-value",children:[te," Timer"]})]})]})]},K.id)})})]}),c.jsx(KN,{isOpen:d,onClose:()=>p(!1),onSave:I,project:m})]})}function NF({timeEntry:t,defaultRate:e,employees:n,onSave:r,onClose:i}){const[s,a]=ie.useState({date:"",duration:"",activity:"",billable:!0,rate:e,useCustomRate:!1,employeeName:"",selectedEmployees:[]}),[o,l]=ie.useState({});ie.useEffect(()=>{if(t)a({date:t.date||"",duration:String(t.duration||t.hours||""),activity:t.activity||t.description||"",billable:t.billable!==void 0?t.billable:!0,rate:t.rate||t.hourlyRate||e,useCustomRate:t.rate!==e,employeeName:t.employeeName||"",selectedEmployees:t.employeeName?[t.employeeName]:[]});else{const b=new Date().toISOString().split("T")[0];a(k=>({...k,date:b,duration:"",activity:"",billable:!0,rate:e,useCustomRate:!1,employeeName:n.length>0?n[0].name:"",selectedEmployees:[]}))}},[t,e,n,!0]);const d=b=>{if(!b)return 0;const k=String(b).replace(",",".");return parseFloat(k)||0},p=b=>{const{name:k,value:w,type:N,checked:j}=b.target;a(N==="checkbox"?k==="billable"?O=>({...O,billable:j,rate:j?O.useCustomRate?O.rate:e:0}):k==="useCustomRate"?O=>({...O,useCustomRate:j,rate:j&&O.rate||e}):O=>({...O,[k]:j}):O=>({...O,[k]:w})),o[k]&&l(O=>({...O,[k]:null}))},m=b=>{a(k=>{const N=k.selectedEmployees.includes(b)?k.selectedEmployees.filter(j=>j!==b):[...k.selectedEmployees,b];return{...k,selectedEmployees:N,employeeName:N.length>0?N.join(", "):""}})},g=()=>{const b={};if(!s.date)b.date="Dato er pkrvet";else{const w=new Date(s.date),N=new Date;N.setHours(0,0,0,0),w>N&&(b.date="Dato kan ikke vre i fremtiden")}const k=d(s.duration);if((!s.duration||k<=0)&&(b.duration="Varighed skal vre et positivt tal"),(!s.activity||s.activity.trim().length<3)&&(b.activity="Aktivitetsbeskrivelse skal vre mindst 3 tegn"),s.billable){const w=d(s.rate);(!s.rate||w<=0)&&(b.rate="Timepris skal vre et positivt tal")}return s.selectedEmployees.length===0&&(b.employeeName="Vlg mindst n medarbejder"),l(b),Object.keys(b).length===0},x=b=>{if(b.preventDefault(),g()){const k={date:s.date,duration:d(s.duration),activity:s.activity,billable:s.billable,rate:s.billable?d(s.rate):0,employeeName:s.employeeName};r(k)}};return c.jsx("div",{className:"modal-overlay",children:c.jsxs("div",{className:"modal-content time-entry-modal",onClick:b=>b.stopPropagation(),children:[c.jsxs("div",{className:"modal-header",children:[c.jsx("h2",{children:t?"Redigr Timer":"Tilfj Timer"}),c.jsx("button",{className:"modal-close",onClick:i,children:""})]}),c.jsxs("form",{onSubmit:x,className:"modal-form",children:[c.jsxs("div",{className:"form-group",children:[c.jsx("label",{htmlFor:"date",children:"Dato *"}),c.jsx("input",{type:"date",id:"date",name:"date",value:s.date,onChange:p,className:o.date?"input-error":"",max:new Date().toISOString().split("T")[0]}),o.date&&c.jsx("span",{className:"error-text",children:o.date})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{htmlFor:"duration",children:"Varighed (timer) *"}),c.jsx("input",{type:"text",id:"duration",name:"duration",value:s.duration,onChange:p,className:o.duration?"input-error":"",placeholder:"F.eks. 4,5"}),o.duration&&c.jsx("span",{className:"error-text",children:o.duration}),c.jsx("small",{className:"form-hint",children:"Brug komma for decimaler (f.eks. 4,5 timer)"})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Medarbejder(e) *"}),c.jsx("div",{className:"employee-multi-select",children:n.length===0?c.jsx("p",{className:"no-employees-text",children:"Ingen medarbejdere tilgngelige. Tilfj medarbejdere i Indstillinger."}):n.map(b=>c.jsxs("label",{className:"checkbox-modern",children:[c.jsx("input",{type:"checkbox",checked:s.selectedEmployees.includes(b.name),onChange:()=>m(b.name)}),c.jsx("span",{className:"checkbox-label",children:b.name})]},b.id))}),o.employeeName&&c.jsx("span",{className:"error-text",children:o.employeeName})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{htmlFor:"activity",children:"Aktivitetsbeskrivelse *"}),c.jsx("textarea",{id:"activity",name:"activity",value:s.activity,onChange:p,className:o.activity?"input-error":"",rows:"3",placeholder:"Beskriv det udfrte arbejde..."}),o.activity&&c.jsx("span",{className:"error-text",children:o.activity})]}),c.jsx("div",{className:"checkbox-group-modern",children:c.jsxs("label",{className:"checkbox-modern",children:[c.jsx("input",{type:"checkbox",name:"billable",checked:s.billable,onChange:p}),c.jsx("span",{className:"checkbox-label",children:"Fakturerbar"})]})}),c.jsxs("div",{className:"rate-section",children:[c.jsx("label",{children:"Timepris (DKK) *"}),s.billable?c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:`rate-display ${s.useCustomRate?"inactive":"active"}`,children:[c.jsxs("span",{className:"rate-value",children:[e," kr"]}),c.jsx("span",{className:"rate-note",children:"Standard timepris"})]}),c.jsx("div",{className:"checkbox-group-modern",children:c.jsxs("label",{className:"checkbox-modern",children:[c.jsx("input",{type:"checkbox",name:"useCustomRate",checked:s.useCustomRate,onChange:p}),c.jsx("span",{className:"checkbox-label",children:"Brug tilpasset timepris"})]})}),s.useCustomRate&&c.jsxs("div",{className:"form-group",children:[c.jsx("input",{type:"text",name:"rate",value:s.rate,onChange:p,className:o.rate?"input-error":"",placeholder:"F.eks. 550"}),o.rate&&c.jsx("span",{className:"error-text",children:o.rate}),c.jsx("small",{className:"form-hint",children:"Brug komma for decimaler (f.eks. 550,50)"})]})]}):c.jsxs("div",{className:"rate-display disabled",children:[c.jsx("span",{className:"rate-value",children:"0 kr"}),c.jsx("span",{className:"rate-note",children:"Ikke fakturerbar"})]})]}),c.jsxs("div",{className:"modal-footer",children:[c.jsx("button",{type:"button",className:"btn-secondary",onClick:i,children:"Annuller"}),c.jsx("button",{type:"submit",className:"btn-primary",children:t?"Gem ndringer":"Tilfj timer"})]})]})]})})}function AF({purchase:t,project:e,suppliers:n,materials:r,onSave:i,onClose:s}){const[a,o]=ie.useState({date:"",materialName:"",materialId:null,sku:"",quantity:"",unit:"stk",category:"",supplierId:"",supplierName:"",purchasePrice:"",sellingPrice:"",paymentMethod:"Firmakort",notes:""}),[l,u]=ie.useState({}),[d,p]=ie.useState(!0),[m]=ie.useState(50),g=["stk","m","m","m","kg","liter","pose","rulle","palle"],x=["Tr","Gips","El-materialer","VVS","Maling","Vrktj","Diverse"],b=["Firmakort","Faktura","Kontant","MobilePay"];ie.useEffect(()=>{if(t)o({date:t.date||"",materialName:t.materialName||"",materialId:t.materialId||null,sku:t.sku||"",quantity:String(t.quantity||""),unit:t.unit||"stk",category:t.category||"",supplierId:t.supplierId||"",supplierName:t.supplierName||"",purchasePrice:String(t.purchasePrice||""),sellingPrice:String(t.sellingPrice||""),paymentMethod:t.paymentMethod||"Firmakort",notes:t.notes||""}),p(!1);else{const P=new Date().toISOString().split("T")[0];o(y=>({...y,date:P}))}},[t]);const k=P=>{if(!P)return 0;const y=String(P).replace(",",".");return parseFloat(y)||0},w=P=>String(P).replace(".",","),N=P=>{const{name:y,value:S}=P.target;o(L=>{const A={...L,[y]:S};if(y==="materialId"&&S){const T=r.find(I=>I.id===S);if(T&&(A.materialName=T.name,A.unit=T.unit,A.category=T.category,A.sku=T.sku||"",T.defaultSupplierId)){A.supplierId=T.defaultSupplierId;const I=n.find(M=>M.id===T.defaultSupplierId);I&&(A.supplierName=I.name)}}if(y==="supplierId"&&S){const T=n.find(I=>I.id===S);T&&(A.supplierName=T.name)}if(y==="purchasePrice"&&d){const T=k(S);if(T>0){const I=m/100,M=T*(1+I);A.sellingPrice=w(M.toFixed(2))}}return A}),l[y]&&u(L=>({...L,[y]:null}))},j=P=>{p(!1),N(P)},O=()=>{const P={};a.date||(P.date="Dato er pkrvet"),(!a.materialName||a.materialName.trim().length<2)&&(P.materialName="Materiale navn er pkrvet");const y=k(a.quantity);(!a.quantity||y<=0)&&(P.quantity="Antal skal vre strre end 0"),a.unit||(P.unit="Enhed er pkrvet"),a.category||(P.category="Kategori er pkrvet"),(!a.supplierName||a.supplierName.trim().length<2)&&(P.supplierName="Leverandr er pkrvet");const S=k(a.purchasePrice);(!a.purchasePrice||S<0)&&(P.purchasePrice="Indkbspris er pkrvet");const L=k(a.sellingPrice);return(!a.sellingPrice||L<0)&&(P.sellingPrice="Salgspris er pkrvet"),L<S&&(P.sellingPrice="Salgspris br vre hjere end indkbspris"),u(P),Object.keys(P).length===0},Q=P=>{if(P.preventDefault(),O()){const y={caseId:e.id,caseNumber:e.projectNumber,caseName:e.name,date:a.date,materialId:a.materialId||null,materialName:a.materialName.trim(),sku:a.sku.trim(),quantity:k(a.quantity),unit:a.unit,category:a.category,supplierId:a.supplierId||null,supplierName:a.supplierName.trim(),purchasePrice:k(a.purchasePrice),sellingPrice:k(a.sellingPrice),paymentMethod:a.paymentMethod,notes:a.notes.trim()};i(y)}},B=()=>{const P=k(a.purchasePrice),y=k(a.sellingPrice);return P>0?((y-P)/P*100).toFixed(1):"0"};return c.jsx("div",{className:"modal-overlay",children:c.jsxs("div",{className:"modal-content material-purchase-modal",onClick:P=>P.stopPropagation(),children:[c.jsxs("div",{className:"modal-header",children:[c.jsx("h2",{children:t?"Redigr Materiale":"Tilfj Materiale"}),c.jsx("button",{className:"modal-close",onClick:s,children:""})]}),c.jsxs("form",{onSubmit:Q,className:"modal-form",children:[c.jsxs("div",{className:"form-group",children:[c.jsx("label",{htmlFor:"date",children:"Dato *"}),c.jsx("input",{type:"date",id:"date",name:"date",value:a.date,onChange:N,className:l.date?"input-error":"",max:new Date().toISOString().split("T")[0]}),l.date&&c.jsx("span",{className:"error-text",children:l.date})]}),r.length>0&&c.jsxs("div",{className:"form-group",children:[c.jsx("label",{htmlFor:"materialId",children:"Vlg fra katalog (valgfrit)"}),c.jsxs("select",{id:"materialId",name:"materialId",value:a.materialId||"",onChange:N,children:[c.jsx("option",{value:"",children:"-- Skriv nyt materiale --"}),r.map(P=>c.jsxs("option",{value:P.id,children:[P.name," (",P.unit,")"]},P.id))]})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{htmlFor:"materialName",children:"Materiale *"}),c.jsx("input",{type:"text",id:"materialName",name:"materialName",value:a.materialName,onChange:N,className:l.materialName?"input-error":"",placeholder:"F.eks. Gipsplader 13mm"}),l.materialName&&c.jsx("span",{className:"error-text",children:l.materialName})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{htmlFor:"sku",children:"Artikelnummer / Varenummer"}),c.jsx("input",{type:"text",id:"sku",name:"sku",value:a.sku,onChange:N,placeholder:"F.eks. 123456"}),c.jsx("small",{className:"form-hint",children:"Leverandrens varenummer - hjlper med faktura-afstemning"})]}),c.jsxs("div",{className:"form-row",children:[c.jsxs("div",{className:"form-group",children:[c.jsx("label",{htmlFor:"quantity",children:"Antal *"}),c.jsx("input",{type:"text",id:"quantity",name:"quantity",value:a.quantity,onChange:N,className:l.quantity?"input-error":"",placeholder:"F.eks. 15"}),l.quantity&&c.jsx("span",{className:"error-text",children:l.quantity})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{htmlFor:"unit",children:"Enhed *"}),c.jsx("select",{id:"unit",name:"unit",value:a.unit,onChange:N,className:l.unit?"input-error":"",children:g.map(P=>c.jsx("option",{value:P,children:P},P))}),l.unit&&c.jsx("span",{className:"error-text",children:l.unit})]})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{htmlFor:"category",children:"Kategori *"}),c.jsxs("select",{id:"category",name:"category",value:a.category,onChange:N,className:l.category?"input-error":"",children:[c.jsx("option",{value:"",children:"-- Vlg kategori --"}),x.map(P=>c.jsx("option",{value:P,children:P},P))]}),l.category&&c.jsx("span",{className:"error-text",children:l.category})]}),n.length>0?c.jsxs("div",{className:"form-group",children:[c.jsx("label",{htmlFor:"supplierId",children:"Leverandr *"}),c.jsxs("select",{id:"supplierId",name:"supplierId",value:a.supplierId,onChange:N,className:l.supplierName?"input-error":"",children:[c.jsx("option",{value:"",children:"-- Vlg leverandr --"}),n.map(P=>c.jsx("option",{value:P.id,children:P.name},P.id))]}),l.supplierName&&c.jsx("span",{className:"error-text",children:l.supplierName})]}):c.jsxs("div",{className:"form-group",children:[c.jsx("label",{htmlFor:"supplierName",children:"Leverandr *"}),c.jsx("input",{type:"text",id:"supplierName",name:"supplierName",value:a.supplierName,onChange:N,className:l.supplierName?"input-error":"",placeholder:"F.eks. XL-BYG"}),l.supplierName&&c.jsx("span",{className:"error-text",children:l.supplierName})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{htmlFor:"purchasePrice",children:"Indkbspris (DKK) *"}),c.jsx("input",{type:"text",id:"purchasePrice",name:"purchasePrice",value:a.purchasePrice,onChange:N,className:l.purchasePrice?"input-error":"",placeholder:"F.eks. 2850"}),l.purchasePrice&&c.jsx("span",{className:"error-text",children:l.purchasePrice}),c.jsx("small",{className:"form-hint",children:"Total indkbspris for det angivne antal"})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{htmlFor:"sellingPrice",children:"Salgspris (DKK) *"}),c.jsx("input",{type:"text",id:"sellingPrice",name:"sellingPrice",value:a.sellingPrice,onChange:j,className:l.sellingPrice?"input-error":"",placeholder:"F.eks. 4275"}),l.sellingPrice&&c.jsx("span",{className:"error-text",children:l.sellingPrice}),c.jsx("small",{className:"form-hint",children:d?`Auto-beregnet med ${m}% markup`:`Margin: ${B()}%`})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{htmlFor:"paymentMethod",children:"Betalingsmetode"}),c.jsx("select",{id:"paymentMethod",name:"paymentMethod",value:a.paymentMethod,onChange:N,children:b.map(P=>c.jsx("option",{value:P,children:P},P))})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{htmlFor:"notes",children:"Noter"}),c.jsx("textarea",{id:"notes",name:"notes",value:a.notes,onChange:N,rows:"2",placeholder:"Ekstra bemrkninger..."})]}),c.jsxs("div",{className:"modal-footer",children:[c.jsx("button",{type:"button",className:"btn-secondary",onClick:s,children:"Annuller"}),c.jsx("button",{type:"submit",className:"btn-primary",children:t?"Gem ndringer":"Tilfj materiale"})]})]})]})})}const EF=async(t,e="Admin")=>{try{return{success:!0,id:(await Xs(fn(vt,"suppliers"),{...t,createdAt:new Date().toISOString(),createdBy:e,updatedAt:new Date().toISOString(),updatedBy:e})).id}}catch(n){return console.error("Error creating supplier:",n),{success:!1,error:n.message}}},qN=async()=>{try{const t=await $r(fn(vt,"suppliers")),e=[];return t.forEach(n=>{e.push({id:n.id,...n.data()})}),e.sort((n,r)=>(n.name||"").localeCompare(r.name)),{success:!0,suppliers:e}}catch(t){return console.error("Error getting suppliers:",t),{success:!1,error:t.message,suppliers:[]}}},kF=async(t,e,n="Admin")=>{try{return await Gs(an(vt,"suppliers",t),{...e,updatedAt:new Date().toISOString(),updatedBy:n}),{success:!0}}catch(r){return console.error("Error updating supplier:",r),{success:!1,error:r.message}}},TF=async t=>{try{return await Js(an(vt,"suppliers",t)),{success:!0}}catch(e){return console.error("Error deleting supplier:",e),{success:!1,error:e.message}}},IF=async(t,e="Admin")=>{try{return{success:!0,id:(await Xs(fn(vt,"materials"),{...t,createdAt:new Date().toISOString(),createdBy:e,updatedAt:new Date().toISOString(),updatedBy:e})).id}}catch(n){return console.error("Error creating material:",n),{success:!1,error:n.message}}},zN=async()=>{try{const t=await $r(fn(vt,"materials")),e=[];return t.forEach(n=>{e.push({id:n.id,...n.data()})}),e.sort((n,r)=>(n.name||"").localeCompare(r.name)),{success:!0,materials:e}}catch(t){return console.error("Error getting materials:",t),{success:!1,error:t.message,materials:[]}}},$N=async(t,e,n="Admin")=>{try{return await Gs(an(vt,"materials",t),{...e,updatedAt:new Date().toISOString(),updatedBy:n}),{success:!0}}catch(r){return console.error("Error updating material:",r),{success:!1,error:r.message}}},CF=async t=>{try{return await Js(an(vt,"materials",t)),{success:!0}}catch(e){return console.error("Error deleting material:",e),{success:!1,error:e.message}}},PF=async(t,e="Admin")=>{try{const n=t.purchasePrice,i=t.sellingPrice-n,s=n>0?i/n*100:0,a=await Xs(fn(vt,"materialPurchases"),{...t,marginKr:i,marginPercent:s,createdAt:new Date().toISOString(),createdBy:e,updatedAt:new Date().toISOString(),updatedBy:e});if(t.materialId&&t.quantity>0){const o=t.purchasePrice/t.quantity;await $N(t.materialId,{lastPurchasePrice:o,lastPurchaseDate:t.date},e)}return{success:!0,id:a.id}}catch(n){return console.error("Error creating material purchase:",n),{success:!1,error:n.message}}},jF=async t=>{try{const e=Wu(fn(vt,"materialPurchases"),$d("caseId","==",t),KS("date","desc")),n=await $r(e),r=[];return n.forEach(i=>{r.push({id:i.id,...i.data()})}),{success:!0,purchases:r}}catch(e){return console.error("Error getting case material purchases:",e),{success:!1,error:e.message,purchases:[]}}},LF=async()=>{try{const t=Wu(fn(vt,"materialPurchases"),KS("date","desc")),e=await $r(t),n=[];return e.forEach(r=>{n.push({id:r.id,...r.data()})}),{success:!0,purchases:n}}catch(t){return console.error("Error getting all material purchases:",t),{success:!1,error:t.message,purchases:[]}}},RF=async(t,e,n="Admin")=>{try{let r={...e};if(e.purchasePrice!==void 0||e.sellingPrice!==void 0){const s=(await ig(an(vt,"materialPurchases",t))).data(),a=e.purchasePrice??s.purchasePrice,l=(e.sellingPrice??s.sellingPrice)-a,u=a>0?l/a*100:0;r.marginKr=l,r.marginPercent=u}return await Gs(an(vt,"materialPurchases",t),{...r,updatedAt:new Date().toISOString(),updatedBy:n}),{success:!0}}catch(r){return console.error("Error updating material purchase:",r),{success:!1,error:r.message}}},HN=async t=>{try{return await Js(an(vt,"materialPurchases",t)),{success:!0}}catch(e){return console.error("Error deleting material purchase:",e),{success:!1,error:e.message}}},WN=t=>!t||t.length===0?0:t.reduce((e,n)=>e+(n.purchasePrice||0),0),GN=t=>!t||t.length===0?0:t.reduce((e,n)=>e+(n.sellingPrice||0),0),DF=t=>{const e=WN(t);return GN(t)-e};function FF(t,e){return e.forEach(function(n){n&&typeof n!="string"&&!Array.isArray(n)&&Object.keys(n).forEach(function(r){if(r!=="default"&&!(r in t)){var i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:function(){return n[r]}})}})}),Object.freeze(t)}function QN(t,e){return new Promise(function(n,r){let i;return OF(t).then(function(s){try{return i=s,n(new Blob([e.slice(0,2),i,e.slice(2)],{type:"image/jpeg"}))}catch(a){return r(a)}},r)})}const OF=t=>new Promise((e,n)=>{const r=new FileReader;r.addEventListener("load",({target:{result:i}})=>{const s=new DataView(i);let a=0;if(s.getUint16(a)!==65496)return n("not a valid JPEG");for(a+=2;;){const o=s.getUint16(a);if(o===65498)break;const l=s.getUint16(a+2);if(o===65505&&s.getUint32(a+4)===1165519206){const u=a+10;let d;switch(s.getUint16(u)){case 18761:d=!0;break;case 19789:d=!1;break;default:return n("TIFF header contains invalid endian")}if(s.getUint16(u+2,d)!==42)return n("TIFF header contains invalid version");const p=s.getUint32(u+4,d),m=u+p+2+12*s.getUint16(u+p,d);for(let g=u+p+2;g<m;g+=12)if(s.getUint16(g,d)==274){if(s.getUint16(g+2,d)!==3)return n("Orientation data type is invalid");if(s.getUint32(g+4,d)!==1)return n("Orientation data count is invalid");s.setUint16(g+8,1,d);break}return e(i.slice(a,a+2+l))}a+=2+l}return e(new Blob)}),r.readAsArrayBuffer(t)});var fm={},MF={get exports(){return fm},set exports(t){fm=t}};(function(t){var e,n,r={};MF.exports=r,r.parse=function(i,s){for(var a=r.bin.readUshort,o=r.bin.readUint,l=0,u={},d=new Uint8Array(i),p=d.length-4;o(d,p)!=101010256;)p--;l=p,l+=4;var m=a(d,l+=4);a(d,l+=2);var g=o(d,l+=2),x=o(d,l+=4);l+=4,l=x;for(var b=0;b<m;b++){o(d,l),l+=4,l+=4,l+=4,o(d,l+=4),g=o(d,l+=4);var k=o(d,l+=4),w=a(d,l+=4),N=a(d,l+2),j=a(d,l+4);l+=6;var O=o(d,l+=8);l+=4,l+=w+N+j,r._readLocal(d,O,u,g,k,s)}return u},r._readLocal=function(i,s,a,o,l,u){var d=r.bin.readUshort,p=r.bin.readUint;p(i,s),d(i,s+=4),d(i,s+=2);var m=d(i,s+=2);p(i,s+=2),p(i,s+=4),s+=4;var g=d(i,s+=8),x=d(i,s+=2);s+=2;var b=r.bin.readUTF8(i,s,g);if(s+=g,s+=x,u)a[b]={size:l,csize:o};else{var k=new Uint8Array(i.buffer,s);if(m==0)a[b]=new Uint8Array(k.buffer.slice(s,s+o));else{if(m!=8)throw"unknown compression method: "+m;var w=new Uint8Array(l);r.inflateRaw(k,w),a[b]=w}}},r.inflateRaw=function(i,s){return r.F.inflate(i,s)},r.inflate=function(i,s){return i[0],i[1],r.inflateRaw(new Uint8Array(i.buffer,i.byteOffset+2,i.length-6),s)},r.deflate=function(i,s){s==null&&(s={level:6});var a=0,o=new Uint8Array(50+Math.floor(1.1*i.length));o[a]=120,o[a+1]=156,a+=2,a=r.F.deflateRaw(i,o,a,s.level);var l=r.adler(i,0,i.length);return o[a+0]=l>>>24&255,o[a+1]=l>>>16&255,o[a+2]=l>>>8&255,o[a+3]=l>>>0&255,new Uint8Array(o.buffer,0,a+4)},r.deflateRaw=function(i,s){s==null&&(s={level:6});var a=new Uint8Array(50+Math.floor(1.1*i.length)),o=r.F.deflateRaw(i,a,o,s.level);return new Uint8Array(a.buffer,0,o)},r.encode=function(i,s){s==null&&(s=!1);var a=0,o=r.bin.writeUint,l=r.bin.writeUshort,u={};for(var d in i){var p=!r._noNeed(d)&&!s,m=i[d],g=r.crc.crc(m,0,m.length);u[d]={cpr:p,usize:m.length,crc:g,file:p?r.deflateRaw(m):m}}for(var d in u)a+=u[d].file.length+30+46+2*r.bin.sizeUTF8(d);a+=22;var x=new Uint8Array(a),b=0,k=[];for(var d in u){var w=u[d];k.push(b),b=r._writeHeader(x,b,d,w,0)}var N=0,j=b;for(var d in u)w=u[d],k.push(b),b=r._writeHeader(x,b,d,w,1,k[N++]);var O=b-j;return o(x,b,101010256),b+=4,l(x,b+=4,N),l(x,b+=2,N),o(x,b+=2,O),o(x,b+=4,j),b+=4,b+=2,x.buffer},r._noNeed=function(i){var s=i.split(".").pop().toLowerCase();return"png,jpg,jpeg,zip".indexOf(s)!=-1},r._writeHeader=function(i,s,a,o,l,u){var d=r.bin.writeUint,p=r.bin.writeUshort,m=o.file;return d(i,s,l==0?67324752:33639248),s+=4,l==1&&(s+=2),p(i,s,20),p(i,s+=2,0),p(i,s+=2,o.cpr?8:0),d(i,s+=2,0),d(i,s+=4,o.crc),d(i,s+=4,m.length),d(i,s+=4,o.usize),p(i,s+=4,r.bin.sizeUTF8(a)),p(i,s+=2,0),s+=2,l==1&&(s+=2,s+=2,d(i,s+=6,u),s+=4),s+=r.bin.writeUTF8(i,s,a),l==0&&(i.set(m,s),s+=m.length),s},r.crc={table:function(){for(var i=new Uint32Array(256),s=0;s<256;s++){for(var a=s,o=0;o<8;o++)1&a?a=3988292384^a>>>1:a>>>=1;i[s]=a}return i}(),update:function(i,s,a,o){for(var l=0;l<o;l++)i=r.crc.table[255&(i^s[a+l])]^i>>>8;return i},crc:function(i,s,a){return 4294967295^r.crc.update(4294967295,i,s,a)}},r.adler=function(i,s,a){for(var o=1,l=0,u=s,d=s+a;u<d;){for(var p=Math.min(u+5552,d);u<p;)l+=o+=i[u++];o%=65521,l%=65521}return l<<16|o},r.bin={readUshort:function(i,s){return i[s]|i[s+1]<<8},writeUshort:function(i,s,a){i[s]=255&a,i[s+1]=a>>8&255},readUint:function(i,s){return 16777216*i[s+3]+(i[s+2]<<16|i[s+1]<<8|i[s])},writeUint:function(i,s,a){i[s]=255&a,i[s+1]=a>>8&255,i[s+2]=a>>16&255,i[s+3]=a>>24&255},readASCII:function(i,s,a){for(var o="",l=0;l<a;l++)o+=String.fromCharCode(i[s+l]);return o},writeASCII:function(i,s,a){for(var o=0;o<a.length;o++)i[s+o]=a.charCodeAt(o)},pad:function(i){return i.length<2?"0"+i:i},readUTF8:function(i,s,a){for(var o,l="",u=0;u<a;u++)l+="%"+r.bin.pad(i[s+u].toString(16));try{o=decodeURIComponent(l)}catch{return r.bin.readASCII(i,s,a)}return o},writeUTF8:function(i,s,a){for(var o=a.length,l=0,u=0;u<o;u++){var d=a.charCodeAt(u);if(!(4294967168&d))i[s+l]=d,l++;else if(!(4294965248&d))i[s+l]=192|d>>6,i[s+l+1]=128|d>>0&63,l+=2;else if(!(4294901760&d))i[s+l]=224|d>>12,i[s+l+1]=128|d>>6&63,i[s+l+2]=128|d>>0&63,l+=3;else{if(4292870144&d)throw"e";i[s+l]=240|d>>18,i[s+l+1]=128|d>>12&63,i[s+l+2]=128|d>>6&63,i[s+l+3]=128|d>>0&63,l+=4}}return l},sizeUTF8:function(i){for(var s=i.length,a=0,o=0;o<s;o++){var l=i.charCodeAt(o);if(!(4294967168&l))a++;else if(!(4294965248&l))a+=2;else if(!(4294901760&l))a+=3;else{if(4292870144&l)throw"e";a+=4}}return a}},r.F={},r.F.deflateRaw=function(i,s,a,o){var l=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][o],u=r.F.U,d=r.F._goodIndex;r.F._hash;var p=r.F._putsE,m=0,g=a<<3,x=0,b=i.length;if(o==0){for(;m<b;)p(s,g,m+(A=Math.min(65535,b-m))==b?1:0),g=r.F._copyExact(i,m,A,s,g+8),m+=A;return g>>>3}var k=u.lits,w=u.strt,N=u.prev,j=0,O=0,Q=0,B=0,P=0,y=0;for(b>2&&(w[y=r.F._hash(i,0)]=0),m=0;m<b;m++){if(P=y,m+1<b-2){y=r.F._hash(i,m+1);var S=m+1&32767;N[S]=w[y],w[y]=S}if(x<=m){(j>14e3||O>26697)&&b-m>100&&(x<m&&(k[j]=m-x,j+=2,x=m),g=r.F._writeBlock(m==b-1||x==b?1:0,k,j,B,i,Q,m-Q,s,g),j=O=B=0,Q=m);var L=0;m<b-2&&(L=r.F._bestMatch(i,m,N,P,Math.min(l[2],b-m),l[3]));var A=L>>>16,T=65535&L;if(L!=0){T=65535&L;var I=d(A=L>>>16,u.of0);u.lhst[257+I]++;var M=d(T,u.df0);u.dhst[M]++,B+=u.exb[I]+u.dxb[M],k[j]=A<<23|m-x,k[j+1]=T<<16|I<<8|M,j+=2,x=m+A}else u.lhst[i[m]]++;O++}}for(Q==m&&i.length!=0||(x<m&&(k[j]=m-x,j+=2,x=m),g=r.F._writeBlock(1,k,j,B,i,Q,m-Q,s,g),j=0,O=0,j=O=B=0,Q=m);7&g;)g++;return g>>>3},r.F._bestMatch=function(i,s,a,o,l,u){var d=32767&s,p=a[d],m=d-p+32768&32767;if(p==d||o!=r.F._hash(i,s-m))return 0;for(var g=0,x=0,b=Math.min(32767,s);m<=b&&--u!=0&&p!=d;){if(g==0||i[s+g]==i[s+g-m]){var k=r.F._howLong(i,s,m);if(k>g){if(x=m,(g=k)>=l)break;m+2<k&&(k=m+2);for(var w=0,N=0;N<k-2;N++){var j=s-m+N+32768&32767,O=j-a[j]+32768&32767;O>w&&(w=O,p=j)}}}m+=(d=p)-(p=a[d])+32768&32767}return g<<16|x},r.F._howLong=function(i,s,a){if(i[s]!=i[s-a]||i[s+1]!=i[s+1-a]||i[s+2]!=i[s+2-a])return 0;var o=s,l=Math.min(i.length,s+258);for(s+=3;s<l&&i[s]==i[s-a];)s++;return s-o},r.F._hash=function(i,s){return(i[s]<<8|i[s+1])+(i[s+2]<<4)&65535},r.saved=0,r.F._writeBlock=function(i,s,a,o,l,u,d,p,m){var g,x,b,k,w,N,j,O,Q,B=r.F.U,P=r.F._putsF,y=r.F._putsE;B.lhst[256]++,x=(g=r.F.getTrees())[0],b=g[1],k=g[2],w=g[3],N=g[4],j=g[5],O=g[6],Q=g[7];var S=32+(m+3&7?8-(m+3&7):0)+(d<<3),L=o+r.F.contSize(B.fltree,B.lhst)+r.F.contSize(B.fdtree,B.dhst),A=o+r.F.contSize(B.ltree,B.lhst)+r.F.contSize(B.dtree,B.dhst);A+=14+3*j+r.F.contSize(B.itree,B.ihst)+(2*B.ihst[16]+3*B.ihst[17]+7*B.ihst[18]);for(var T=0;T<286;T++)B.lhst[T]=0;for(T=0;T<30;T++)B.dhst[T]=0;for(T=0;T<19;T++)B.ihst[T]=0;var I=S<L&&S<A?0:L<A?1:2;if(P(p,m,i),P(p,m+1,I),m+=3,I==0){for(;7&m;)m++;m=r.F._copyExact(l,u,d,p,m)}else{var M,ne;if(I==1&&(M=B.fltree,ne=B.fdtree),I==2){r.F.makeCodes(B.ltree,x),r.F.revCodes(B.ltree,x),r.F.makeCodes(B.dtree,b),r.F.revCodes(B.dtree,b),r.F.makeCodes(B.itree,k),r.F.revCodes(B.itree,k),M=B.ltree,ne=B.dtree,y(p,m,w-257),y(p,m+=5,N-1),y(p,m+=5,j-4),m+=4;for(var V=0;V<j;V++)y(p,m+3*V,B.itree[1+(B.ordr[V]<<1)]);m+=3*j,m=r.F._codeTiny(O,B.itree,p,m),m=r.F._codeTiny(Q,B.itree,p,m)}for(var U=u,K=0;K<a;K+=2){for(var H=s[K],te=H>>>23,me=U+(8388607&H);U<me;)m=r.F._writeLit(l[U++],M,p,m);if(te!=0){var R=s[K+1],$=R>>16,J=R>>8&255,W=255&R;y(p,m=r.F._writeLit(257+J,M,p,m),te-B.of0[J]),m+=B.exb[J],P(p,m=r.F._writeLit(W,ne,p,m),$-B.df0[W]),m+=B.dxb[W],U+=te}}m=r.F._writeLit(256,M,p,m)}return m},r.F._copyExact=function(i,s,a,o,l){var u=l>>>3;return o[u]=a,o[u+1]=a>>>8,o[u+2]=255-o[u],o[u+3]=255-o[u+1],u+=4,o.set(new Uint8Array(i.buffer,s,a),u),l+(a+4<<3)},r.F.getTrees=function(){for(var i=r.F.U,s=r.F._hufTree(i.lhst,i.ltree,15),a=r.F._hufTree(i.dhst,i.dtree,15),o=[],l=r.F._lenCodes(i.ltree,o),u=[],d=r.F._lenCodes(i.dtree,u),p=0;p<o.length;p+=2)i.ihst[o[p]]++;for(p=0;p<u.length;p+=2)i.ihst[u[p]]++;for(var m=r.F._hufTree(i.ihst,i.itree,7),g=19;g>4&&i.itree[1+(i.ordr[g-1]<<1)]==0;)g--;return[s,a,m,l,d,g,o,u]},r.F.getSecond=function(i){for(var s=[],a=0;a<i.length;a+=2)s.push(i[a+1]);return s},r.F.nonZero=function(i){for(var s="",a=0;a<i.length;a+=2)i[a+1]!=0&&(s+=(a>>1)+",");return s},r.F.contSize=function(i,s){for(var a=0,o=0;o<s.length;o++)a+=s[o]*i[1+(o<<1)];return a},r.F._codeTiny=function(i,s,a,o){for(var l=0;l<i.length;l+=2){var u=i[l],d=i[l+1];o=r.F._writeLit(u,s,a,o);var p=u==16?2:u==17?3:7;u>15&&(r.F._putsE(a,o,d,p),o+=p)}return o},r.F._lenCodes=function(i,s){for(var a=i.length;a!=2&&i[a-1]==0;)a-=2;for(var o=0;o<a;o+=2){var l=i[o+1],u=o+3<a?i[o+3]:-1,d=o+5<a?i[o+5]:-1,p=o==0?-1:i[o-1];if(l==0&&u==l&&d==l){for(var m=o+5;m+2<a&&i[m+2]==l;)m+=2;(g=Math.min(m+1-o>>>1,138))<11?s.push(17,g-3):s.push(18,g-11),o+=2*g-2}else if(l==p&&u==l&&d==l){for(m=o+5;m+2<a&&i[m+2]==l;)m+=2;var g=Math.min(m+1-o>>>1,6);s.push(16,g-3),o+=2*g-2}else s.push(l,0)}return a>>>1},r.F._hufTree=function(i,s,a){var o=[],l=i.length,u=s.length,d=0;for(d=0;d<u;d+=2)s[d]=0,s[d+1]=0;for(d=0;d<l;d++)i[d]!=0&&o.push({lit:d,f:i[d]});var p=o.length,m=o.slice(0);if(p==0)return 0;if(p==1){var g=o[0].lit;return m=g==0?1:0,s[1+(g<<1)]=1,s[1+(m<<1)]=1,1}o.sort(function(O,Q){return O.f-Q.f});var x=o[0],b=o[1],k=0,w=1,N=2;for(o[0]={lit:-1,f:x.f+b.f,l:x,r:b,d:0};w!=p-1;)x=k!=w&&(N==p||o[k].f<o[N].f)?o[k++]:o[N++],b=k!=w&&(N==p||o[k].f<o[N].f)?o[k++]:o[N++],o[w++]={lit:-1,f:x.f+b.f,l:x,r:b};var j=r.F.setDepth(o[w-1],0);for(j>a&&(r.F.restrictDepth(m,a,j),j=a),d=0;d<p;d++)s[1+(m[d].lit<<1)]=m[d].d;return j},r.F.setDepth=function(i,s){return i.lit!=-1?(i.d=s,s):Math.max(r.F.setDepth(i.l,s+1),r.F.setDepth(i.r,s+1))},r.F.restrictDepth=function(i,s,a){var o=0,l=1<<a-s,u=0;for(i.sort(function(p,m){return m.d==p.d?p.f-m.f:m.d-p.d}),o=0;o<i.length&&i[o].d>s;o++){var d=i[o].d;i[o].d=s,u+=l-(1<<a-d)}for(u>>>=a-s;u>0;)(d=i[o].d)<s?(i[o].d++,u-=1<<s-d-1):o++;for(;o>=0;o--)i[o].d==s&&u<0&&(i[o].d--,u++);u!=0&&console.log("debt left")},r.F._goodIndex=function(i,s){var a=0;return s[16|a]<=i&&(a|=16),s[8|a]<=i&&(a|=8),s[4|a]<=i&&(a|=4),s[2|a]<=i&&(a|=2),s[1|a]<=i&&(a|=1),a},r.F._writeLit=function(i,s,a,o){return r.F._putsF(a,o,s[i<<1]),o+s[1+(i<<1)]},r.F.inflate=function(i,s){var a=Uint8Array;if(i[0]==3&&i[1]==0)return s||new a(0);var o=r.F,l=o._bitsF,u=o._bitsE,d=o._decodeTiny,p=o.makeCodes,m=o.codes2map,g=o._get17,x=o.U,b=s==null;b&&(s=new a(i.length>>>2<<3));for(var k,w,N=0,j=0,O=0,Q=0,B=0,P=0,y=0,S=0,L=0;N==0;)if(N=l(i,L,1),j=l(i,L+1,2),L+=3,j!=0){if(b&&(s=r.F._check(s,S+(1<<17))),j==1&&(k=x.flmap,w=x.fdmap,P=511,y=31),j==2){O=u(i,L,5)+257,Q=u(i,L+5,5)+1,B=u(i,L+10,4)+4,L+=14;for(var A=0;A<38;A+=2)x.itree[A]=0,x.itree[A+1]=0;var T=1;for(A=0;A<B;A++){var I=u(i,L+3*A,3);x.itree[1+(x.ordr[A]<<1)]=I,I>T&&(T=I)}L+=3*B,p(x.itree,T),m(x.itree,T,x.imap),k=x.lmap,w=x.dmap,L=d(x.imap,(1<<T)-1,O+Q,i,L,x.ttree);var M=o._copyOut(x.ttree,0,O,x.ltree);P=(1<<M)-1;var ne=o._copyOut(x.ttree,O,Q,x.dtree);y=(1<<ne)-1,p(x.ltree,M),m(x.ltree,M,k),p(x.dtree,ne),m(x.dtree,ne,w)}for(;;){var V=k[g(i,L)&P];L+=15&V;var U=V>>>4;if(!(U>>>8))s[S++]=U;else{if(U==256)break;var K=S+U-254;if(U>264){var H=x.ldef[U-257];K=S+(H>>>3)+u(i,L,7&H),L+=7&H}var te=w[g(i,L)&y];L+=15&te;var me=te>>>4,R=x.ddef[me],$=(R>>>4)+l(i,L,15&R);for(L+=15&R,b&&(s=r.F._check(s,S+(1<<17)));S<K;)s[S]=s[S++-$],s[S]=s[S++-$],s[S]=s[S++-$],s[S]=s[S++-$];S=K}}}else{7&L&&(L+=8-(7&L));var J=4+(L>>>3),W=i[J-4]|i[J-3]<<8;b&&(s=r.F._check(s,S+W)),s.set(new a(i.buffer,i.byteOffset+J,W),S),L=J+W<<3,S+=W}return s.length==S?s:s.slice(0,S)},r.F._check=function(i,s){var a=i.length;if(s<=a)return i;var o=new Uint8Array(Math.max(a<<1,s));return o.set(i,0),o},r.F._decodeTiny=function(i,s,a,o,l,u){for(var d=r.F._bitsE,p=r.F._get17,m=0;m<a;){var g=i[p(o,l)&s];l+=15&g;var x=g>>>4;if(x<=15)u[m]=x,m++;else{var b=0,k=0;x==16?(k=3+d(o,l,2),l+=2,b=u[m-1]):x==17?(k=3+d(o,l,3),l+=3):x==18&&(k=11+d(o,l,7),l+=7);for(var w=m+k;m<w;)u[m]=b,m++}}return l},r.F._copyOut=function(i,s,a,o){for(var l=0,u=0,d=o.length>>>1;u<a;){var p=i[u+s];o[u<<1]=0,o[1+(u<<1)]=p,p>l&&(l=p),u++}for(;u<d;)o[u<<1]=0,o[1+(u<<1)]=0,u++;return l},r.F.makeCodes=function(i,s){for(var a,o,l,u,d=r.F.U,p=i.length,m=d.bl_count,g=0;g<=s;g++)m[g]=0;for(g=1;g<p;g+=2)m[i[g]]++;var x=d.next_code;for(a=0,m[0]=0,o=1;o<=s;o++)a=a+m[o-1]<<1,x[o]=a;for(l=0;l<p;l+=2)(u=i[l+1])!=0&&(i[l]=x[u],x[u]++)},r.F.codes2map=function(i,s,a){for(var o=i.length,l=r.F.U.rev15,u=0;u<o;u+=2)if(i[u+1]!=0)for(var d=u>>1,p=i[u+1],m=d<<4|p,g=s-p,x=i[u]<<g,b=x+(1<<g);x!=b;)a[l[x]>>>15-s]=m,x++},r.F.revCodes=function(i,s){for(var a=r.F.U.rev15,o=15-s,l=0;l<i.length;l+=2){var u=i[l]<<s-i[l+1];i[l]=a[u]>>>o}},r.F._putsE=function(i,s,a){a<<=7&s;var o=s>>>3;i[o]|=a,i[o+1]|=a>>>8},r.F._putsF=function(i,s,a){a<<=7&s;var o=s>>>3;i[o]|=a,i[o+1]|=a>>>8,i[o+2]|=a>>>16},r.F._bitsE=function(i,s,a){return(i[s>>>3]|i[1+(s>>>3)]<<8)>>>(7&s)&(1<<a)-1},r.F._bitsF=function(i,s,a){return(i[s>>>3]|i[1+(s>>>3)]<<8|i[2+(s>>>3)]<<16)>>>(7&s)&(1<<a)-1},r.F._get17=function(i,s){return(i[s>>>3]|i[1+(s>>>3)]<<8|i[2+(s>>>3)]<<16)>>>(7&s)},r.F._get25=function(i,s){return(i[s>>>3]|i[1+(s>>>3)]<<8|i[2+(s>>>3)]<<16|i[3+(s>>>3)]<<24)>>>(7&s)},r.F.U=(e=Uint16Array,n=Uint32Array,{next_code:new e(16),bl_count:new e(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new e(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new n(32),flmap:new e(512),fltree:[],fdmap:new e(32),fdtree:[],lmap:new e(32768),ltree:[],ttree:[],dmap:new e(32768),dtree:[],imap:new e(512),itree:[],rev15:new e(32768),lhst:new n(286),dhst:new n(30),ihst:new n(19),lits:new n(15e3),strt:new e(65536),prev:new e(32768)}),function(){for(var i=r.F.U,s=0;s<32768;s++){var a=s;a=(4278255360&(a=(4042322160&(a=(3435973836&(a=(2863311530&a)>>>1|(1431655765&a)<<1))>>>2|(858993459&a)<<2))>>>4|(252645135&a)<<4))>>>8|(16711935&a)<<8,i.rev15[s]=(a>>>16|a<<16)>>>17}function o(l,u,d){for(;u--!=0;)l.push(0,d)}for(s=0;s<32;s++)i.ldef[s]=i.of0[s]<<3|i.exb[s],i.ddef[s]=i.df0[s]<<4|i.dxb[s];o(i.fltree,144,8),o(i.fltree,112,9),o(i.fltree,24,7),o(i.fltree,8,8),r.F.makeCodes(i.fltree,9),r.F.codes2map(i.fltree,9,i.flmap),r.F.revCodes(i.fltree,9),o(i.fdtree,32,5),r.F.makeCodes(i.fdtree,5),r.F.codes2map(i.fdtree,5,i.fdmap),r.F.revCodes(i.fdtree,5),o(i.itree,19,0),o(i.ltree,286,0),o(i.dtree,30,0),o(i.ttree,320,0)}()})();var VF=FF({__proto__:null,default:fm},[fm]);const as=function(){var t={nextZero(d,p){for(;d[p]!=0;)p++;return p},readUshort:(d,p)=>d[p]<<8|d[p+1],writeUshort(d,p,m){d[p]=m>>8&255,d[p+1]=255&m},readUint:(d,p)=>16777216*d[p]+(d[p+1]<<16|d[p+2]<<8|d[p+3]),writeUint(d,p,m){d[p]=m>>24&255,d[p+1]=m>>16&255,d[p+2]=m>>8&255,d[p+3]=255&m},readASCII(d,p,m){let g="";for(let x=0;x<m;x++)g+=String.fromCharCode(d[p+x]);return g},writeASCII(d,p,m){for(let g=0;g<m.length;g++)d[p+g]=m.charCodeAt(g)},readBytes(d,p,m){const g=[];for(let x=0;x<m;x++)g.push(d[p+x]);return g},pad:d=>d.length<2?`0${d}`:d,readUTF8(d,p,m){let g,x="";for(let b=0;b<m;b++)x+=`%${t.pad(d[p+b].toString(16))}`;try{g=decodeURIComponent(x)}catch{return t.readASCII(d,p,m)}return g}};function e(d,p,m,g){const x=p*m,b=s(g),k=Math.ceil(p*b/8),w=new Uint8Array(4*x),N=new Uint32Array(w.buffer),{ctype:j}=g,{depth:O}=g,Q=t.readUshort;if(j==6){const H=x<<2;if(O==8)for(var B=0;B<H;B+=4)w[B]=d[B],w[B+1]=d[B+1],w[B+2]=d[B+2],w[B+3]=d[B+3];if(O==16)for(B=0;B<H;B++)w[B]=d[B<<1]}else if(j==2){const H=g.tabs.tRNS;if(H==null){if(O==8)for(B=0;B<x;B++){var P=3*B;N[B]=255<<24|d[P+2]<<16|d[P+1]<<8|d[P]}if(O==16)for(B=0;B<x;B++)P=6*B,N[B]=255<<24|d[P+4]<<16|d[P+2]<<8|d[P]}else{var y=H[0];const te=H[1],me=H[2];if(O==8)for(B=0;B<x;B++){var S=B<<2;P=3*B,N[B]=255<<24|d[P+2]<<16|d[P+1]<<8|d[P],d[P]==y&&d[P+1]==te&&d[P+2]==me&&(w[S+3]=0)}if(O==16)for(B=0;B<x;B++)S=B<<2,P=6*B,N[B]=255<<24|d[P+4]<<16|d[P+2]<<8|d[P],Q(d,P)==y&&Q(d,P+2)==te&&Q(d,P+4)==me&&(w[S+3]=0)}}else if(j==3){const H=g.tabs.PLTE,te=g.tabs.tRNS,me=te?te.length:0;if(O==1)for(var L=0;L<m;L++){var A=L*k,T=L*p;for(B=0;B<p;B++){S=T+B<<2;var I=3*(M=d[A+(B>>3)]>>7-((7&B)<<0)&1);w[S]=H[I],w[S+1]=H[I+1],w[S+2]=H[I+2],w[S+3]=M<me?te[M]:255}}if(O==2)for(L=0;L<m;L++)for(A=L*k,T=L*p,B=0;B<p;B++)S=T+B<<2,I=3*(M=d[A+(B>>2)]>>6-((3&B)<<1)&3),w[S]=H[I],w[S+1]=H[I+1],w[S+2]=H[I+2],w[S+3]=M<me?te[M]:255;if(O==4)for(L=0;L<m;L++)for(A=L*k,T=L*p,B=0;B<p;B++)S=T+B<<2,I=3*(M=d[A+(B>>1)]>>4-((1&B)<<2)&15),w[S]=H[I],w[S+1]=H[I+1],w[S+2]=H[I+2],w[S+3]=M<me?te[M]:255;if(O==8)for(B=0;B<x;B++){var M;S=B<<2,I=3*(M=d[B]),w[S]=H[I],w[S+1]=H[I+1],w[S+2]=H[I+2],w[S+3]=M<me?te[M]:255}}else if(j==4){if(O==8)for(B=0;B<x;B++){S=B<<2;var ne=d[V=B<<1];w[S]=ne,w[S+1]=ne,w[S+2]=ne,w[S+3]=d[V+1]}if(O==16)for(B=0;B<x;B++){var V;S=B<<2,ne=d[V=B<<2],w[S]=ne,w[S+1]=ne,w[S+2]=ne,w[S+3]=d[V+2]}}else if(j==0)for(y=g.tabs.tRNS?g.tabs.tRNS:-1,L=0;L<m;L++){const H=L*k,te=L*p;if(O==1)for(var U=0;U<p;U++){var K=(ne=255*(d[H+(U>>>3)]>>>7-(7&U)&1))==255*y?0:255;N[te+U]=K<<24|ne<<16|ne<<8|ne}else if(O==2)for(U=0;U<p;U++)K=(ne=85*(d[H+(U>>>2)]>>>6-((3&U)<<1)&3))==85*y?0:255,N[te+U]=K<<24|ne<<16|ne<<8|ne;else if(O==4)for(U=0;U<p;U++)K=(ne=17*(d[H+(U>>>1)]>>>4-((1&U)<<2)&15))==17*y?0:255,N[te+U]=K<<24|ne<<16|ne<<8|ne;else if(O==8)for(U=0;U<p;U++)K=(ne=d[H+U])==y?0:255,N[te+U]=K<<24|ne<<16|ne<<8|ne;else if(O==16)for(U=0;U<p;U++)ne=d[H+(U<<1)],K=Q(d,H+(U<<1))==y?0:255,N[te+U]=K<<24|ne<<16|ne<<8|ne}return w}function n(d,p,m,g){const x=s(d),b=Math.ceil(m*x/8),k=new Uint8Array((b+1+d.interlace)*g);return p=d.tabs.CgBI?i(p,k):r(p,k),d.interlace==0?p=a(p,d,0,m,g):d.interlace==1&&(p=function(N,j){const O=j.width,Q=j.height,B=s(j),P=B>>3,y=Math.ceil(O*B/8),S=new Uint8Array(Q*y);let L=0;const A=[0,0,4,0,2,0,1],T=[0,4,0,2,0,1,0],I=[8,8,8,4,4,2,2],M=[8,8,4,4,2,2,1];let ne=0;for(;ne<7;){const U=I[ne],K=M[ne];let H=0,te=0,me=A[ne];for(;me<Q;)me+=U,te++;let R=T[ne];for(;R<O;)R+=K,H++;const $=Math.ceil(H*B/8);a(N,j,L,H,te);let J=0,W=A[ne];for(;W<Q;){let ae=T[ne],le=L+J*$<<3;for(;ae<O;){var V;if(B==1&&(V=(V=N[le>>3])>>7-(7&le)&1,S[W*y+(ae>>3)]|=V<<7-((7&ae)<<0)),B==2&&(V=(V=N[le>>3])>>6-(7&le)&3,S[W*y+(ae>>2)]|=V<<6-((3&ae)<<1)),B==4&&(V=(V=N[le>>3])>>4-(7&le)&15,S[W*y+(ae>>1)]|=V<<4-((1&ae)<<2)),B>=8){const ue=W*y+ae*P;for(let de=0;de<P;de++)S[ue+de]=N[(le>>3)+de]}le+=B,ae+=K}J++,W+=U}H*te!=0&&(L+=te*(1+$)),ne+=1}return S}(p,d)),p}function r(d,p){return i(new Uint8Array(d.buffer,2,d.length-6),p)}var i=function(){const d={H:{}};return d.H.N=function(p,m){const g=Uint8Array;let x,b,k=0,w=0,N=0,j=0,O=0,Q=0,B=0,P=0,y=0;if(p[0]==3&&p[1]==0)return m||new g(0);const S=d.H,L=S.b,A=S.e,T=S.R,I=S.n,M=S.A,ne=S.Z,V=S.m,U=m==null;for(U&&(m=new g(p.length>>>2<<5));k==0;)if(k=L(p,y,1),w=L(p,y+1,2),y+=3,w!=0){if(U&&(m=d.H.W(m,P+(1<<17))),w==1&&(x=V.J,b=V.h,Q=511,B=31),w==2){N=A(p,y,5)+257,j=A(p,y+5,5)+1,O=A(p,y+10,4)+4,y+=14;let H=1;for(var K=0;K<38;K+=2)V.Q[K]=0,V.Q[K+1]=0;for(K=0;K<O;K++){const R=A(p,y+3*K,3);V.Q[1+(V.X[K]<<1)]=R,R>H&&(H=R)}y+=3*O,I(V.Q,H),M(V.Q,H,V.u),x=V.w,b=V.d,y=T(V.u,(1<<H)-1,N+j,p,y,V.v);const te=S.V(V.v,0,N,V.C);Q=(1<<te)-1;const me=S.V(V.v,N,j,V.D);B=(1<<me)-1,I(V.C,te),M(V.C,te,x),I(V.D,me),M(V.D,me,b)}for(;;){const H=x[ne(p,y)&Q];y+=15&H;const te=H>>>4;if(!(te>>>8))m[P++]=te;else{if(te==256)break;{let me=P+te-254;if(te>264){const ae=V.q[te-257];me=P+(ae>>>3)+A(p,y,7&ae),y+=7&ae}const R=b[ne(p,y)&B];y+=15&R;const $=R>>>4,J=V.c[$],W=(J>>>4)+L(p,y,15&J);for(y+=15&J;P<me;)m[P]=m[P++-W],m[P]=m[P++-W],m[P]=m[P++-W],m[P]=m[P++-W];P=me}}}}else{7&y&&(y+=8-(7&y));const H=4+(y>>>3),te=p[H-4]|p[H-3]<<8;U&&(m=d.H.W(m,P+te)),m.set(new g(p.buffer,p.byteOffset+H,te),P),y=H+te<<3,P+=te}return m.length==P?m:m.slice(0,P)},d.H.W=function(p,m){const g=p.length;if(m<=g)return p;const x=new Uint8Array(g<<1);return x.set(p,0),x},d.H.R=function(p,m,g,x,b,k){const w=d.H.e,N=d.H.Z;let j=0;for(;j<g;){const O=p[N(x,b)&m];b+=15&O;const Q=O>>>4;if(Q<=15)k[j]=Q,j++;else{let B=0,P=0;Q==16?(P=3+w(x,b,2),b+=2,B=k[j-1]):Q==17?(P=3+w(x,b,3),b+=3):Q==18&&(P=11+w(x,b,7),b+=7);const y=j+P;for(;j<y;)k[j]=B,j++}}return b},d.H.V=function(p,m,g,x){let b=0,k=0;const w=x.length>>>1;for(;k<g;){const N=p[k+m];x[k<<1]=0,x[1+(k<<1)]=N,N>b&&(b=N),k++}for(;k<w;)x[k<<1]=0,x[1+(k<<1)]=0,k++;return b},d.H.n=function(p,m){const g=d.H.m,x=p.length;let b,k,w,N;const j=g.j;for(var O=0;O<=m;O++)j[O]=0;for(O=1;O<x;O+=2)j[p[O]]++;const Q=g.K;for(b=0,j[0]=0,k=1;k<=m;k++)b=b+j[k-1]<<1,Q[k]=b;for(w=0;w<x;w+=2)N=p[w+1],N!=0&&(p[w]=Q[N],Q[N]++)},d.H.A=function(p,m,g){const x=p.length,b=d.H.m.r;for(let k=0;k<x;k+=2)if(p[k+1]!=0){const w=k>>1,N=p[k+1],j=w<<4|N,O=m-N;let Q=p[k]<<O;const B=Q+(1<<O);for(;Q!=B;)g[b[Q]>>>15-m]=j,Q++}},d.H.l=function(p,m){const g=d.H.m.r,x=15-m;for(let b=0;b<p.length;b+=2){const k=p[b]<<m-p[b+1];p[b]=g[k]>>>x}},d.H.M=function(p,m,g){g<<=7&m;const x=m>>>3;p[x]|=g,p[x+1]|=g>>>8},d.H.I=function(p,m,g){g<<=7&m;const x=m>>>3;p[x]|=g,p[x+1]|=g>>>8,p[x+2]|=g>>>16},d.H.e=function(p,m,g){return(p[m>>>3]|p[1+(m>>>3)]<<8)>>>(7&m)&(1<<g)-1},d.H.b=function(p,m,g){return(p[m>>>3]|p[1+(m>>>3)]<<8|p[2+(m>>>3)]<<16)>>>(7&m)&(1<<g)-1},d.H.Z=function(p,m){return(p[m>>>3]|p[1+(m>>>3)]<<8|p[2+(m>>>3)]<<16)>>>(7&m)},d.H.i=function(p,m){return(p[m>>>3]|p[1+(m>>>3)]<<8|p[2+(m>>>3)]<<16|p[3+(m>>>3)]<<24)>>>(7&m)},d.H.m=function(){const p=Uint16Array,m=Uint32Array;return{K:new p(16),j:new p(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new p(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new m(32),J:new p(512),_:[],h:new p(32),$:[],w:new p(32768),C:[],v:[],d:new p(32768),D:[],u:new p(512),Q:[],r:new p(32768),s:new m(286),Y:new m(30),a:new m(19),t:new m(15e3),k:new p(65536),g:new p(32768)}}(),function(){const p=d.H.m;for(var m=0;m<32768;m++){let x=m;x=(2863311530&x)>>>1|(1431655765&x)<<1,x=(3435973836&x)>>>2|(858993459&x)<<2,x=(4042322160&x)>>>4|(252645135&x)<<4,x=(4278255360&x)>>>8|(16711935&x)<<8,p.r[m]=(x>>>16|x<<16)>>>17}function g(x,b,k){for(;b--!=0;)x.push(0,k)}for(m=0;m<32;m++)p.q[m]=p.S[m]<<3|p.T[m],p.c[m]=p.p[m]<<4|p.z[m];g(p._,144,8),g(p._,112,9),g(p._,24,7),g(p._,8,8),d.H.n(p._,9),d.H.A(p._,9,p.J),d.H.l(p._,9),g(p.$,32,5),d.H.n(p.$,5),d.H.A(p.$,5,p.h),d.H.l(p.$,5),g(p.Q,19,0),g(p.C,286,0),g(p.D,30,0),g(p.v,320,0)}(),d.H.N}();function s(d){return[1,null,3,1,2,null,4][d.ctype]*d.depth}function a(d,p,m,g,x){let b=s(p);const k=Math.ceil(g*b/8);let w,N;b=Math.ceil(b/8);let j=d[m],O=0;if(j>1&&(d[m]=[0,0,1][j-2]),j==3)for(O=b;O<k;O++)d[O+1]=d[O+1]+(d[O+1-b]>>>1)&255;for(let Q=0;Q<x;Q++)if(w=m+Q*k,N=w+Q+1,j=d[N-1],O=0,j==0)for(;O<k;O++)d[w+O]=d[N+O];else if(j==1){for(;O<b;O++)d[w+O]=d[N+O];for(;O<k;O++)d[w+O]=d[N+O]+d[w+O-b]}else if(j==2)for(;O<k;O++)d[w+O]=d[N+O]+d[w+O-k];else if(j==3){for(;O<b;O++)d[w+O]=d[N+O]+(d[w+O-k]>>>1);for(;O<k;O++)d[w+O]=d[N+O]+(d[w+O-k]+d[w+O-b]>>>1)}else{for(;O<b;O++)d[w+O]=d[N+O]+o(0,d[w+O-k],0);for(;O<k;O++)d[w+O]=d[N+O]+o(d[w+O-b],d[w+O-k],d[w+O-b-k])}return d}function o(d,p,m){const g=d+p-m,x=g-d,b=g-p,k=g-m;return x*x<=b*b&&x*x<=k*k?d:b*b<=k*k?p:m}function l(d,p,m){m.width=t.readUint(d,p),p+=4,m.height=t.readUint(d,p),p+=4,m.depth=d[p],p++,m.ctype=d[p],p++,m.compress=d[p],p++,m.filter=d[p],p++,m.interlace=d[p],p++}function u(d,p,m,g,x,b,k,w,N){const j=Math.min(p,x),O=Math.min(m,b);let Q=0,B=0;for(let ne=0;ne<O;ne++)for(let V=0;V<j;V++)if(k>=0&&w>=0?(Q=ne*p+V<<2,B=(w+ne)*x+k+V<<2):(Q=(-w+ne)*p-k+V<<2,B=ne*x+V<<2),N==0)g[B]=d[Q],g[B+1]=d[Q+1],g[B+2]=d[Q+2],g[B+3]=d[Q+3];else if(N==1){var P=d[Q+3]*.00392156862745098,y=d[Q]*P,S=d[Q+1]*P,L=d[Q+2]*P,A=g[B+3]*(1/255),T=g[B]*A,I=g[B+1]*A,M=g[B+2]*A;const U=1-P,K=P+A*U,H=K==0?0:1/K;g[B+3]=255*K,g[B+0]=(y+T*U)*H,g[B+1]=(S+I*U)*H,g[B+2]=(L+M*U)*H}else if(N==2)P=d[Q+3],y=d[Q],S=d[Q+1],L=d[Q+2],A=g[B+3],T=g[B],I=g[B+1],M=g[B+2],P==A&&y==T&&S==I&&L==M?(g[B]=0,g[B+1]=0,g[B+2]=0,g[B+3]=0):(g[B]=y,g[B+1]=S,g[B+2]=L,g[B+3]=P);else if(N==3){if(P=d[Q+3],y=d[Q],S=d[Q+1],L=d[Q+2],A=g[B+3],T=g[B],I=g[B+1],M=g[B+2],P==A&&y==T&&S==I&&L==M)continue;if(P<220&&A>20)return!1}return!0}return{decode:function(p){const m=new Uint8Array(p);let g=8;const x=t,b=x.readUshort,k=x.readUint,w={tabs:{},frames:[]},N=new Uint8Array(m.length);let j,O=0,Q=0;const B=[137,80,78,71,13,10,26,10];for(var P=0;P<8;P++)if(m[P]!=B[P])throw"The input is not a PNG file!";for(;g<m.length;){const ne=x.readUint(m,g);g+=4;const V=x.readASCII(m,g,4);if(g+=4,V=="IHDR")l(m,g,w);else if(V=="iCCP"){for(var y=g;m[y]!=0;)y++;x.readASCII(m,g,y-g),m[y+1];const U=m.slice(y+2,g+ne);let K=null;try{K=r(U)}catch{K=i(U)}w.tabs[V]=K}else if(V=="CgBI")w.tabs[V]=m.slice(g,g+4);else if(V=="IDAT"){for(P=0;P<ne;P++)N[O+P]=m[g+P];O+=ne}else if(V=="acTL")w.tabs[V]={num_frames:k(m,g),num_plays:k(m,g+4)},j=new Uint8Array(m.length);else if(V=="fcTL"){Q!=0&&((M=w.frames[w.frames.length-1]).data=n(w,j.slice(0,Q),M.rect.width,M.rect.height),Q=0);const U={x:k(m,g+12),y:k(m,g+16),width:k(m,g+4),height:k(m,g+8)};let K=b(m,g+22);K=b(m,g+20)/(K==0?100:K);const H={rect:U,delay:Math.round(1e3*K),dispose:m[g+24],blend:m[g+25]};w.frames.push(H)}else if(V=="fdAT"){for(P=0;P<ne-4;P++)j[Q+P]=m[g+P+4];Q+=ne-4}else if(V=="pHYs")w.tabs[V]=[x.readUint(m,g),x.readUint(m,g+4),m[g+8]];else if(V=="cHRM")for(w.tabs[V]=[],P=0;P<8;P++)w.tabs[V].push(x.readUint(m,g+4*P));else if(V=="tEXt"||V=="zTXt"){w.tabs[V]==null&&(w.tabs[V]={});var S=x.nextZero(m,g),L=x.readASCII(m,g,S-g),A=g+ne-S-1;if(V=="tEXt")I=x.readASCII(m,S+1,A);else{var T=r(m.slice(S+2,S+2+A));I=x.readUTF8(T,0,T.length)}w.tabs[V][L]=I}else if(V=="iTXt"){w.tabs[V]==null&&(w.tabs[V]={}),S=0,y=g,S=x.nextZero(m,y),L=x.readASCII(m,y,S-y);const U=m[y=S+1];var I;m[y+1],y+=2,S=x.nextZero(m,y),x.readASCII(m,y,S-y),y=S+1,S=x.nextZero(m,y),x.readUTF8(m,y,S-y),A=ne-((y=S+1)-g),U==0?I=x.readUTF8(m,y,A):(T=r(m.slice(y,y+A)),I=x.readUTF8(T,0,T.length)),w.tabs[V][L]=I}else if(V=="PLTE")w.tabs[V]=x.readBytes(m,g,ne);else if(V=="hIST"){const U=w.tabs.PLTE.length/3;for(w.tabs[V]=[],P=0;P<U;P++)w.tabs[V].push(b(m,g+2*P))}else if(V=="tRNS")w.ctype==3?w.tabs[V]=x.readBytes(m,g,ne):w.ctype==0?w.tabs[V]=b(m,g):w.ctype==2&&(w.tabs[V]=[b(m,g),b(m,g+2),b(m,g+4)]);else if(V=="gAMA")w.tabs[V]=x.readUint(m,g)/1e5;else if(V=="sRGB")w.tabs[V]=m[g];else if(V=="bKGD")w.ctype==0||w.ctype==4?w.tabs[V]=[b(m,g)]:w.ctype==2||w.ctype==6?w.tabs[V]=[b(m,g),b(m,g+2),b(m,g+4)]:w.ctype==3&&(w.tabs[V]=m[g]);else if(V=="IEND")break;g+=ne,x.readUint(m,g),g+=4}var M;return Q!=0&&((M=w.frames[w.frames.length-1]).data=n(w,j.slice(0,Q),M.rect.width,M.rect.height)),w.data=n(w,N,w.width,w.height),delete w.compress,delete w.interlace,delete w.filter,w},toRGBA8:function(p){const m=p.width,g=p.height;if(p.tabs.acTL==null)return[e(p.data,m,g,p).buffer];const x=[];p.frames[0].data==null&&(p.frames[0].data=p.data);const b=m*g*4,k=new Uint8Array(b),w=new Uint8Array(b),N=new Uint8Array(b);for(let O=0;O<p.frames.length;O++){const Q=p.frames[O],B=Q.rect.x,P=Q.rect.y,y=Q.rect.width,S=Q.rect.height,L=e(Q.data,y,S,p);if(O!=0)for(var j=0;j<b;j++)N[j]=k[j];if(Q.blend==0?u(L,y,S,k,m,g,B,P,0):Q.blend==1&&u(L,y,S,k,m,g,B,P,1),x.push(k.buffer.slice(0)),Q.dispose!=0){if(Q.dispose==1)u(w,y,S,k,m,g,B,P,0);else if(Q.dispose==2)for(j=0;j<b;j++)k[j]=N[j]}}return x},_paeth:o,_copyTile:u,_bin:t}}();(function(){const{_copyTile:t}=as,{_bin:e}=as,n=as._paeth;var r={table:function(){const y=new Uint32Array(256);for(let S=0;S<256;S++){let L=S;for(let A=0;A<8;A++)1&L?L=3988292384^L>>>1:L>>>=1;y[S]=L}return y}(),update(y,S,L,A){for(let T=0;T<A;T++)y=r.table[255&(y^S[L+T])]^y>>>8;return y},crc:(y,S,L)=>4294967295^r.update(4294967295,y,S,L)};function i(y,S,L,A){S[L]+=y[0]*A>>4,S[L+1]+=y[1]*A>>4,S[L+2]+=y[2]*A>>4,S[L+3]+=y[3]*A>>4}function s(y){return Math.max(0,Math.min(255,y))}function a(y,S){const L=y[0]-S[0],A=y[1]-S[1],T=y[2]-S[2],I=y[3]-S[3];return L*L+A*A+T*T+I*I}function o(y,S,L,A,T,I,M){M==null&&(M=1);const ne=A.length,V=[];for(var U=0;U<ne;U++){const W=A[U];V.push([W>>>0&255,W>>>8&255,W>>>16&255,W>>>24&255])}for(U=0;U<ne;U++){let W=4294967295;for(var K=0,H=0;H<ne;H++){var te=a(V[U],V[H]);H!=U&&te<W&&(W=te,K=H)}}const me=new Uint32Array(T.buffer),R=new Int16Array(S*L*4),$=[0,8,2,10,12,4,14,6,3,11,1,9,15,7,13,5];for(U=0;U<$.length;U++)$[U]=255*(($[U]+.5)/16-.5);for(let W=0;W<L;W++)for(let ae=0;ae<S;ae++){var J;U=4*(W*S+ae),M!=2?J=[s(y[U]+R[U]),s(y[U+1]+R[U+1]),s(y[U+2]+R[U+2]),s(y[U+3]+R[U+3])]:(te=$[4*(3&W)+(3&ae)],J=[s(y[U]+te),s(y[U+1]+te),s(y[U+2]+te),s(y[U+3]+te)]),K=0;let le=16777215;for(H=0;H<ne;H++){const ke=a(J,V[H]);ke<le&&(le=ke,K=H)}const ue=V[K],de=[J[0]-ue[0],J[1]-ue[1],J[2]-ue[2],J[3]-ue[3]];M==1&&(ae!=S-1&&i(de,R,U+4,7),W!=L-1&&(ae!=0&&i(de,R,U+4*S-4,3),i(de,R,U+4*S,5),ae!=S-1&&i(de,R,U+4*S+4,1))),I[U>>2]=K,me[U>>2]=A[K]}}function l(y,S,L,A,T){T==null&&(T={});const{crc:I}=r,M=e.writeUint,ne=e.writeUshort,V=e.writeASCII;let U=8;const K=y.frames.length>1;let H,te=!1,me=33+(K?20:0);if(T.sRGB!=null&&(me+=13),T.pHYs!=null&&(me+=21),T.iCCP!=null&&(H=pako.deflate(T.iCCP),me+=21+H.length+4),y.ctype==3){for(var R=y.plte.length,$=0;$<R;$++)y.plte[$]>>>24!=255&&(te=!0);me+=8+3*R+4+(te?8+1*R+4:0)}for(var J=0;J<y.frames.length;J++)K&&(me+=38),me+=(ue=y.frames[J]).cimg.length+12,J!=0&&(me+=4);me+=12;const W=new Uint8Array(me),ae=[137,80,78,71,13,10,26,10];for($=0;$<8;$++)W[$]=ae[$];if(M(W,U,13),U+=4,V(W,U,"IHDR"),U+=4,M(W,U,S),U+=4,M(W,U,L),U+=4,W[U]=y.depth,U++,W[U]=y.ctype,U++,W[U]=0,U++,W[U]=0,U++,W[U]=0,U++,M(W,U,I(W,U-17,17)),U+=4,T.sRGB!=null&&(M(W,U,1),U+=4,V(W,U,"sRGB"),U+=4,W[U]=T.sRGB,U++,M(W,U,I(W,U-5,5)),U+=4),T.iCCP!=null){const de=13+H.length;M(W,U,de),U+=4,V(W,U,"iCCP"),U+=4,V(W,U,"ICC profile"),U+=11,U+=2,W.set(H,U),U+=H.length,M(W,U,I(W,U-(de+4),de+4)),U+=4}if(T.pHYs!=null&&(M(W,U,9),U+=4,V(W,U,"pHYs"),U+=4,M(W,U,T.pHYs[0]),U+=4,M(W,U,T.pHYs[1]),U+=4,W[U]=T.pHYs[2],U++,M(W,U,I(W,U-13,13)),U+=4),K&&(M(W,U,8),U+=4,V(W,U,"acTL"),U+=4,M(W,U,y.frames.length),U+=4,M(W,U,T.loop!=null?T.loop:0),U+=4,M(W,U,I(W,U-12,12)),U+=4),y.ctype==3){for(M(W,U,3*(R=y.plte.length)),U+=4,V(W,U,"PLTE"),U+=4,$=0;$<R;$++){const de=3*$,ke=y.plte[$],Ie=255&ke,De=ke>>>8&255,Le=ke>>>16&255;W[U+de+0]=Ie,W[U+de+1]=De,W[U+de+2]=Le}if(U+=3*R,M(W,U,I(W,U-3*R-4,3*R+4)),U+=4,te){for(M(W,U,R),U+=4,V(W,U,"tRNS"),U+=4,$=0;$<R;$++)W[U+$]=y.plte[$]>>>24&255;U+=R,M(W,U,I(W,U-R-4,R+4)),U+=4}}let le=0;for(J=0;J<y.frames.length;J++){var ue=y.frames[J];K&&(M(W,U,26),U+=4,V(W,U,"fcTL"),U+=4,M(W,U,le++),U+=4,M(W,U,ue.rect.width),U+=4,M(W,U,ue.rect.height),U+=4,M(W,U,ue.rect.x),U+=4,M(W,U,ue.rect.y),U+=4,ne(W,U,A[J]),U+=2,ne(W,U,1e3),U+=2,W[U]=ue.dispose,U++,W[U]=ue.blend,U++,M(W,U,I(W,U-30,30)),U+=4);const de=ue.cimg;M(W,U,(R=de.length)+(J==0?0:4)),U+=4;const ke=U;V(W,U,J==0?"IDAT":"fdAT"),U+=4,J!=0&&(M(W,U,le++),U+=4),W.set(de,U),U+=R,M(W,U,I(W,ke,U-ke)),U+=4}return M(W,U,0),U+=4,V(W,U,"IEND"),U+=4,M(W,U,I(W,U-4,4)),U+=4,W.buffer}function u(y,S,L){for(let A=0;A<y.frames.length;A++){const T=y.frames[A];T.rect.width;const I=T.rect.height,M=new Uint8Array(I*T.bpl+I);T.cimg=g(T.img,I,T.bpp,T.bpl,M,S,L)}}function d(y,S,L,A,T){const I=T[0],M=T[1],ne=T[2],V=T[3],U=T[4],K=T[5];let H=6,te=8,me=255;for(var R=0;R<y.length;R++){const oe=new Uint8Array(y[R]);for(var $=oe.length,J=0;J<$;J+=4)me&=oe[J+3]}const W=me!=255,ae=function(We,Fe,he,Ee,Me,Ke){const $e=[];for(var Ge=0;Ge<We.length;Ge++){const ct=new Uint8Array(We[Ge]),ze=new Uint32Array(ct.buffer);var at;let _e=0,He=0,mt=Fe,ft=he,Tt=Ee?1:0;if(Ge!=0){const Vn=Ke||Ee||Ge==1||$e[Ge-2].dispose!=0?1:2;let xt=0,vr=1e9;for(let Bt=0;Bt<Vn;Bt++){var tt=new Uint8Array(We[Ge-1-Bt]);const Wn=new Uint32Array(We[Ge-1-Bt]);let Nn=Fe,Dt=he,lt=-1,Ct=-1;for(let Jt=0;Jt<he;Jt++)for(let mn=0;mn<Fe;mn++)ze[dt=Jt*Fe+mn]!=Wn[dt]&&(mn<Nn&&(Nn=mn),mn>lt&&(lt=mn),Jt<Dt&&(Dt=Jt),Jt>Ct&&(Ct=Jt));lt==-1&&(Nn=Dt=lt=Ct=0),Me&&((1&Nn)==1&&Nn--,(1&Dt)==1&&Dt--);const Rr=(lt-Nn+1)*(Ct-Dt+1);Rr<vr&&(vr=Rr,xt=Bt,_e=Nn,He=Dt,mt=lt-Nn+1,ft=Ct-Dt+1)}tt=new Uint8Array(We[Ge-1-xt]),xt==1&&($e[Ge-1].dispose=2),at=new Uint8Array(mt*ft*4),t(tt,Fe,he,at,mt,ft,-_e,-He,0),Tt=t(ct,Fe,he,at,mt,ft,-_e,-He,3)?1:0,Tt==1?m(ct,Fe,he,at,{x:_e,y:He,width:mt,height:ft}):t(ct,Fe,he,at,mt,ft,-_e,-He,0)}else at=ct.slice(0);$e.push({rect:{x:_e,y:He,width:mt,height:ft},img:at,blend:Tt,dispose:0})}if(Ee)for(Ge=0;Ge<$e.length;Ge++){if((ot=$e[Ge]).blend==1)continue;const ct=ot.rect,ze=$e[Ge-1].rect,_e=Math.min(ct.x,ze.x),He=Math.min(ct.y,ze.y),mt={x:_e,y:He,width:Math.max(ct.x+ct.width,ze.x+ze.width)-_e,height:Math.max(ct.y+ct.height,ze.y+ze.height)-He};$e[Ge-1].dispose=1,Ge-1!=0&&p(We,Fe,he,$e,Ge-1,mt,Me),p(We,Fe,he,$e,Ge,mt,Me)}let ut=0;if(We.length!=1)for(var dt=0;dt<$e.length;dt++){var ot;ut+=(ot=$e[dt]).rect.width*ot.rect.height}return $e}(y,S,L,I,M,ne),le={},ue=[],de=[];if(A!=0){const oe=[];for(J=0;J<ae.length;J++)oe.push(ae[J].img.buffer);const We=function(Me){let Ke=0;for(var $e=0;$e<Me.length;$e++)Ke+=Me[$e].byteLength;const Ge=new Uint8Array(Ke);let at=0;for($e=0;$e<Me.length;$e++){const tt=new Uint8Array(Me[$e]),ut=tt.length;for(let dt=0;dt<ut;dt+=4){let ot=tt[dt],ct=tt[dt+1],ze=tt[dt+2];const _e=tt[dt+3];_e==0&&(ot=ct=ze=0),Ge[at+dt]=ot,Ge[at+dt+1]=ct,Ge[at+dt+2]=ze,Ge[at+dt+3]=_e}at+=ut}return Ge.buffer}(oe),Fe=b(We,A);for(J=0;J<Fe.plte.length;J++)ue.push(Fe.plte[J].est.rgba);let he=0;for(J=0;J<ae.length;J++){const Ee=(Ie=ae[J]).img.length;var ke=new Uint8Array(Fe.inds.buffer,he>>2,Ee>>2);de.push(ke);const Me=new Uint8Array(Fe.abuf,he,Ee);K&&o(Ie.img,Ie.rect.width,Ie.rect.height,ue,Me,ke),Ie.img.set(Me),he+=Ee}}else for(R=0;R<ae.length;R++){var Ie=ae[R];const oe=new Uint32Array(Ie.img.buffer);var De=Ie.rect.width;for($=oe.length,ke=new Uint8Array($),de.push(ke),J=0;J<$;J++){const We=oe[J];if(J!=0&&We==oe[J-1])ke[J]=ke[J-1];else if(J>De&&We==oe[J-De])ke[J]=ke[J-De];else{let Fe=le[We];if(Fe==null&&(le[We]=Fe=ue.length,ue.push(We),ue.length>=300))break;ke[J]=Fe}}}const Le=ue.length;for(Le<=256&&U==0&&(te=Le<=2?1:Le<=4?2:Le<=16?4:8,te=Math.max(te,V)),R=0;R<ae.length;R++){(Ie=ae[R]).rect.x,Ie.rect.y,De=Ie.rect.width;const oe=Ie.rect.height;let We=Ie.img;new Uint32Array(We.buffer);let Fe=4*De,he=4;if(Le<=256&&U==0){Fe=Math.ceil(te*De/8);var Xe=new Uint8Array(Fe*oe);const Ee=de[R];for(let Me=0;Me<oe;Me++){J=Me*Fe;const Ke=Me*De;if(te==8)for(var be=0;be<De;be++)Xe[J+be]=Ee[Ke+be];else if(te==4)for(be=0;be<De;be++)Xe[J+(be>>1)]|=Ee[Ke+be]<<4-4*(1&be);else if(te==2)for(be=0;be<De;be++)Xe[J+(be>>2)]|=Ee[Ke+be]<<6-2*(3&be);else if(te==1)for(be=0;be<De;be++)Xe[J+(be>>3)]|=Ee[Ke+be]<<7-1*(7&be)}We=Xe,H=3,he=1}else if(W==0&&ae.length==1){Xe=new Uint8Array(De*oe*3);const Ee=De*oe;for(J=0;J<Ee;J++){const Me=3*J,Ke=4*J;Xe[Me]=We[Ke],Xe[Me+1]=We[Ke+1],Xe[Me+2]=We[Ke+2]}We=Xe,H=2,he=3,Fe=3*De}Ie.img=We,Ie.bpl=Fe,Ie.bpp=he}return{ctype:H,depth:te,plte:ue,frames:ae}}function p(y,S,L,A,T,I,M){const ne=Uint8Array,V=Uint32Array,U=new ne(y[T-1]),K=new V(y[T-1]),H=T+1<y.length?new ne(y[T+1]):null,te=new ne(y[T]),me=new V(te.buffer);let R=S,$=L,J=-1,W=-1;for(let le=0;le<I.height;le++)for(let ue=0;ue<I.width;ue++){const de=I.x+ue,ke=I.y+le,Ie=ke*S+de,De=me[Ie];De==0||A[T-1].dispose==0&&K[Ie]==De&&(H==null||H[4*Ie+3]!=0)||(de<R&&(R=de),de>J&&(J=de),ke<$&&($=ke),ke>W&&(W=ke))}J==-1&&(R=$=J=W=0),M&&((1&R)==1&&R--,(1&$)==1&&$--),I={x:R,y:$,width:J-R+1,height:W-$+1};const ae=A[T];ae.rect=I,ae.blend=1,ae.img=new Uint8Array(I.width*I.height*4),A[T-1].dispose==0?(t(U,S,L,ae.img,I.width,I.height,-I.x,-I.y,0),m(te,S,L,ae.img,I)):t(te,S,L,ae.img,I.width,I.height,-I.x,-I.y,0)}function m(y,S,L,A,T){t(y,S,L,A,T.width,T.height,-T.x,-T.y,2)}function g(y,S,L,A,T,I,M){const ne=[];let V,U=[0,1,2,3,4];I!=-1?U=[I]:(S*A>5e5||L==1)&&(U=[0]),M&&(V={level:0});const K=VF;for(var H=0;H<U.length;H++){for(let R=0;R<S;R++)x(T,y,R,A,L,U[H]);ne.push(K.deflate(T,V))}let te,me=1e9;for(H=0;H<ne.length;H++)ne[H].length<me&&(te=H,me=ne[H].length);return ne[te]}function x(y,S,L,A,T,I){const M=L*A;let ne=M+L;if(y[ne]=I,ne++,I==0)if(A<500)for(var V=0;V<A;V++)y[ne+V]=S[M+V];else y.set(new Uint8Array(S.buffer,M,A),ne);else if(I==1){for(V=0;V<T;V++)y[ne+V]=S[M+V];for(V=T;V<A;V++)y[ne+V]=S[M+V]-S[M+V-T]+256&255}else if(L==0){for(V=0;V<T;V++)y[ne+V]=S[M+V];if(I==2)for(V=T;V<A;V++)y[ne+V]=S[M+V];if(I==3)for(V=T;V<A;V++)y[ne+V]=S[M+V]-(S[M+V-T]>>1)+256&255;if(I==4)for(V=T;V<A;V++)y[ne+V]=S[M+V]-n(S[M+V-T],0,0)+256&255}else{if(I==2)for(V=0;V<A;V++)y[ne+V]=S[M+V]+256-S[M+V-A]&255;if(I==3){for(V=0;V<T;V++)y[ne+V]=S[M+V]+256-(S[M+V-A]>>1)&255;for(V=T;V<A;V++)y[ne+V]=S[M+V]+256-(S[M+V-A]+S[M+V-T]>>1)&255}if(I==4){for(V=0;V<T;V++)y[ne+V]=S[M+V]+256-n(0,S[M+V-A],0)&255;for(V=T;V<A;V++)y[ne+V]=S[M+V]+256-n(S[M+V-T],S[M+V-A],S[M+V-T-A])&255}}}function b(y,S){const L=new Uint8Array(y),A=L.slice(0),T=new Uint32Array(A.buffer),I=k(A,S),M=I[0],ne=I[1],V=L.length,U=new Uint8Array(V>>2);let K;if(L.length<2e7)for(var H=0;H<V;H+=4)K=w(M,te=L[H]*(1/255),me=L[H+1]*(1/255),R=L[H+2]*(1/255),$=L[H+3]*(1/255)),U[H>>2]=K.ind,T[H>>2]=K.est.rgba;else for(H=0;H<V;H+=4){var te=L[H]*.00392156862745098,me=L[H+1]*(1/255),R=L[H+2]*(1/255),$=L[H+3]*(1/255);for(K=M;K.left;)K=N(K.est,te,me,R,$)<=0?K.left:K.right;U[H>>2]=K.ind,T[H>>2]=K.est.rgba}return{abuf:A.buffer,inds:U,plte:ne}}function k(y,S,L){L==null&&(L=1e-4);const A=new Uint32Array(y.buffer),T={i0:0,i1:y.length,bst:null,est:null,tdst:0,left:null,right:null};T.bst=Q(y,T.i0,T.i1),T.est=B(T.bst);const I=[T];for(;I.length<S;){let ne=0,V=0;for(var M=0;M<I.length;M++)I[M].est.L>ne&&(ne=I[M].est.L,V=M);if(ne<L)break;const U=I[V],K=j(y,A,U.i0,U.i1,U.est.e,U.est.eMq255);if(U.i0>=K||U.i1<=K){U.est.L=0;continue}const H={i0:U.i0,i1:K,bst:null,est:null,tdst:0,left:null,right:null};H.bst=Q(y,H.i0,H.i1),H.est=B(H.bst);const te={i0:K,i1:U.i1,bst:null,est:null,tdst:0,left:null,right:null};for(te.bst={R:[],m:[],N:U.bst.N-H.bst.N},M=0;M<16;M++)te.bst.R[M]=U.bst.R[M]-H.bst.R[M];for(M=0;M<4;M++)te.bst.m[M]=U.bst.m[M]-H.bst.m[M];te.est=B(te.bst),U.left=H,U.right=te,I[V]=H,I.push(te)}for(I.sort((ne,V)=>V.bst.N-ne.bst.N),M=0;M<I.length;M++)I[M].ind=M;return[T,I]}function w(y,S,L,A,T){if(y.left==null)return y.tdst=function(H,te,me,R,$){const J=te-H[0],W=me-H[1],ae=R-H[2],le=$-H[3];return J*J+W*W+ae*ae+le*le}(y.est.q,S,L,A,T),y;const I=N(y.est,S,L,A,T);let M=y.left,ne=y.right;I>0&&(M=y.right,ne=y.left);const V=w(M,S,L,A,T);if(V.tdst<=I*I)return V;const U=w(ne,S,L,A,T);return U.tdst<V.tdst?U:V}function N(y,S,L,A,T){const{e:I}=y;return I[0]*S+I[1]*L+I[2]*A+I[3]*T-y.eMq}function j(y,S,L,A,T,I){for(A-=4;L<A;){for(;O(y,L,T)<=I;)L+=4;for(;O(y,A,T)>I;)A-=4;if(L>=A)break;const M=S[L>>2];S[L>>2]=S[A>>2],S[A>>2]=M,L+=4,A-=4}for(;O(y,L,T)>I;)L-=4;return L+4}function O(y,S,L){return y[S]*L[0]+y[S+1]*L[1]+y[S+2]*L[2]+y[S+3]*L[3]}function Q(y,S,L){const A=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],T=[0,0,0,0],I=L-S>>2;for(let M=S;M<L;M+=4){const ne=y[M]*.00392156862745098,V=y[M+1]*(1/255),U=y[M+2]*(1/255),K=y[M+3]*(1/255);T[0]+=ne,T[1]+=V,T[2]+=U,T[3]+=K,A[0]+=ne*ne,A[1]+=ne*V,A[2]+=ne*U,A[3]+=ne*K,A[5]+=V*V,A[6]+=V*U,A[7]+=V*K,A[10]+=U*U,A[11]+=U*K,A[15]+=K*K}return A[4]=A[1],A[8]=A[2],A[9]=A[6],A[12]=A[3],A[13]=A[7],A[14]=A[11],{R:A,m:T,N:I}}function B(y){const{R:S}=y,{m:L}=y,{N:A}=y,T=L[0],I=L[1],M=L[2],ne=L[3],V=A==0?0:1/A,U=[S[0]-T*T*V,S[1]-T*I*V,S[2]-T*M*V,S[3]-T*ne*V,S[4]-I*T*V,S[5]-I*I*V,S[6]-I*M*V,S[7]-I*ne*V,S[8]-M*T*V,S[9]-M*I*V,S[10]-M*M*V,S[11]-M*ne*V,S[12]-ne*T*V,S[13]-ne*I*V,S[14]-ne*M*V,S[15]-ne*ne*V],K=U,H=P;let te=[Math.random(),Math.random(),Math.random(),Math.random()],me=0,R=0;if(A!=0)for(let J=0;J<16&&(te=H.multVec(K,te),R=Math.sqrt(H.dot(te,te)),te=H.sml(1/R,te),!(J!=0&&Math.abs(R-me)<1e-9));J++)me=R;const $=[T*V,I*V,M*V,ne*V];return{Cov:U,q:$,e:te,L:me,eMq255:H.dot(H.sml(255,$),te),eMq:H.dot(te,$),rgba:(Math.round(255*$[3])<<24|Math.round(255*$[2])<<16|Math.round(255*$[1])<<8|Math.round(255*$[0])<<0)>>>0}}var P={multVec:(y,S)=>[y[0]*S[0]+y[1]*S[1]+y[2]*S[2]+y[3]*S[3],y[4]*S[0]+y[5]*S[1]+y[6]*S[2]+y[7]*S[3],y[8]*S[0]+y[9]*S[1]+y[10]*S[2]+y[11]*S[3],y[12]*S[0]+y[13]*S[1]+y[14]*S[2]+y[15]*S[3]],dot:(y,S)=>y[0]*S[0]+y[1]*S[1]+y[2]*S[2]+y[3]*S[3],sml:(y,S)=>[y*S[0],y*S[1],y*S[2],y*S[3]]};as.encode=function(S,L,A,T,I,M,ne){T==null&&(T=0),ne==null&&(ne=!1);const V=d(S,L,A,T,[!1,!1,!1,0,ne,!1]);return u(V,-1),l(V,L,A,I,M)},as.encodeLL=function(S,L,A,T,I,M,ne,V){const U={ctype:0+(T==1?0:2)+(I==0?0:4),depth:M,frames:[]},K=(T+I)*M,H=K*L;for(let te=0;te<S.length;te++)U.frames.push({rect:{x:0,y:0,width:L,height:A},img:new Uint8Array(S[te]),blend:0,dispose:1,bpp:Math.ceil(K/8),bpl:Math.ceil(H/8)});return u(U,0,!0),l(U,L,A,ne,V)},as.encode.compress=d,as.encode.dither=o,as.quantize=b,as.quantize.getKDtree=k,as.quantize.getNearest=w})();const YN={toArrayBuffer(t,e){const n=t.width,r=t.height,i=n<<2,s=t.getContext("2d").getImageData(0,0,n,r),a=new Uint32Array(s.data.buffer),o=(32*n+31)/32<<2,l=o*r,u=122+l,d=new ArrayBuffer(u),p=new DataView(d),m=1<<20;let g,x,b,k,w=m,N=0,j=0,O=0;function Q(y){p.setUint16(j,y,!0),j+=2}function B(y){p.setUint32(j,y,!0),j+=4}function P(y){j+=y}Q(19778),B(u),P(4),B(122),B(108),B(n),B(-r>>>0),Q(1),Q(32),B(3),B(l),B(2835),B(2835),P(8),B(16711680),B(65280),B(255),B(4278190080),B(1466527264),function y(){for(;N<r&&w>0;){for(k=122+N*o,g=0;g<i;)w--,x=a[O++],b=x>>>24,p.setUint32(k+g,x<<8|b),g+=4;N++}O<a.length?(w=m,setTimeout(y,YN._dly)):e(d)}()},toBlob(t,e){this.toArrayBuffer(t,n=>{e(new Blob([n],{type:"image/bmp"}))})},_dly:9};var si={CHROME:"CHROME",FIREFOX:"FIREFOX",DESKTOP_SAFARI:"DESKTOP_SAFARI",IE:"IE",IOS:"IOS",ETC:"ETC"},UF={[si.CHROME]:16384,[si.FIREFOX]:11180,[si.DESKTOP_SAFARI]:16384,[si.IE]:8192,[si.IOS]:4096,[si.ETC]:8192};const gy=typeof window<"u",JN=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,pm=gy&&window.cordova&&window.cordova.require&&window.cordova.require("cordova/modulemapper"),BF=(gy||JN)&&(pm&&pm.getOriginalSymbol(window,"File")||typeof File<"u"&&File),XN=(gy||JN)&&(pm&&pm.getOriginalSymbol(window,"FileReader")||typeof FileReader<"u"&&FileReader);function vy(t,e,n=Date.now()){return new Promise(r=>{const i=t.split(","),s=i[0].match(/:(.*?);/)[1],a=globalThis.atob(i[1]);let o=a.length;const l=new Uint8Array(o);for(;o--;)l[o]=a.charCodeAt(o);const u=new Blob([l],{type:s});u.name=e,u.lastModified=n,r(u)})}function ZN(t){return new Promise((e,n)=>{const r=new XN;r.onload=()=>e(r.result),r.onerror=i=>n(i),r.readAsDataURL(t)})}function eA(t){return new Promise((e,n)=>{const r=new Image;r.onload=()=>e(r),r.onerror=i=>n(i),r.src=t})}function Fl(){if(Fl.cachedResult!==void 0)return Fl.cachedResult;let t=si.ETC;const{userAgent:e}=navigator;return/Chrom(e|ium)/i.test(e)?t=si.CHROME:/iP(ad|od|hone)/i.test(e)&&/WebKit/i.test(e)?t=si.IOS:/Safari/i.test(e)?t=si.DESKTOP_SAFARI:/Firefox/i.test(e)?t=si.FIREFOX:(/MSIE/i.test(e)||document.documentMode)&&(t=si.IE),Fl.cachedResult=t,Fl.cachedResult}function tA(t,e){const n=Fl(),r=UF[n];let i=t,s=e,a=i*s;const o=i>s?s/i:i/s;for(;a>r*r;){const l=(r+i)/2,u=(r+s)/2;l<u?(s=u,i=u*o):(s=l*o,i=l),a=i*s}return{width:i,height:s}}function ug(t,e){let n,r;try{if(n=new OffscreenCanvas(t,e),r=n.getContext("2d"),r===null)throw new Error("getContext of OffscreenCanvas returns null")}catch{n=document.createElement("canvas"),r=n.getContext("2d")}return n.width=t,n.height=e,[n,r]}function nA(t,e){const{width:n,height:r}=tA(t.width,t.height),[i,s]=ug(n,r);return e&&/jpe?g/.test(e)&&(s.fillStyle="white",s.fillRect(0,0,i.width,i.height)),s.drawImage(t,0,0,i.width,i.height),i}function wp(){return wp.cachedResult!==void 0||(wp.cachedResult=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&typeof document<"u"&&"ontouchend"in document),wp.cachedResult}function mm(t,e={}){return new Promise(function(n,r){let i,s;var a=function(){try{return s=nA(i,e.fileType||t.type),n([i,s])}catch(l){return r(l)}},o=function(l){try{var u=function(d){try{throw d}catch(p){return r(p)}};try{let d;return ZN(t).then(function(p){try{return d=p,eA(d).then(function(m){try{return i=m,function(){try{return a()}catch(g){return r(g)}}()}catch(g){return u(g)}},u)}catch(m){return u(m)}},u)}catch(d){u(d)}}catch(d){return r(d)}};try{if(wp()||[si.DESKTOP_SAFARI,si.MOBILE_SAFARI].includes(Fl()))throw new Error("Skip createImageBitmap on IOS and Safari");return createImageBitmap(t).then(function(l){try{return i=l,a()}catch{return o()}},o)}catch{o()}})}function gm(t,e,n,r,i=1){return new Promise(function(s,a){let o;if(e==="image/png"){let u,d,p;return u=t.getContext("2d"),{data:d}=u.getImageData(0,0,t.width,t.height),p=as.encode([d.buffer],t.width,t.height,4096*i),o=new Blob([p],{type:e}),o.name=n,o.lastModified=r,l.call(this)}{let u=function(){return l.call(this)};if(e==="image/bmp")return new Promise(d=>YN.toBlob(t,d)).then((function(d){try{return o=d,o.name=n,o.lastModified=r,u.call(this)}catch(p){return a(p)}}).bind(this),a);{let d=function(){return u.call(this)};if(typeof OffscreenCanvas=="function"&&t instanceof OffscreenCanvas)return t.convertToBlob({type:e,quality:i}).then((function(p){try{return o=p,o.name=n,o.lastModified=r,d.call(this)}catch(m){return a(m)}}).bind(this),a);{let p;return p=t.toDataURL(e,i),vy(p,n,r).then((function(m){try{return o=m,d.call(this)}catch(g){return a(g)}}).bind(this),a)}}}function l(){return s(o)}})}function Ds(t){t.width=0,t.height=0}function ru(){return new Promise(function(t,e){let n,r,i,s;return ru.cachedResult!==void 0?t(ru.cachedResult):vy("data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==","test.jpg",Date.now()).then(function(a){try{return n=a,mm(n).then(function(o){try{return r=o[1],gm(r,n.type,n.name,n.lastModified).then(function(l){try{return i=l,Ds(r),mm(i).then(function(u){try{return s=u[0],ru.cachedResult=s.width===1&&s.height===2,t(ru.cachedResult)}catch(d){return e(d)}},e)}catch(u){return e(u)}},e)}catch(l){return e(l)}},e)}catch(o){return e(o)}},e)})}function rA(t){return new Promise((e,n)=>{const r=new XN;r.onload=i=>{const s=new DataView(i.target.result);if(s.getUint16(0,!1)!=65496)return e(-2);const a=s.byteLength;let o=2;for(;o<a;){if(s.getUint16(o+2,!1)<=8)return e(-1);const l=s.getUint16(o,!1);if(o+=2,l==65505){if(s.getUint32(o+=2,!1)!=1165519206)return e(-1);const u=s.getUint16(o+=6,!1)==18761;o+=s.getUint32(o+4,u);const d=s.getUint16(o,u);o+=2;for(let p=0;p<d;p++)if(s.getUint16(o+12*p,u)==274)return e(s.getUint16(o+12*p+8,u))}else{if((65280&l)!=65280)break;o+=s.getUint16(o,!1)}}return e(-1)},r.onerror=i=>n(i),r.readAsArrayBuffer(t)})}function iA(t,e){const{width:n}=t,{height:r}=t,{maxWidthOrHeight:i}=e;let s,a=t;return isFinite(i)&&(n>i||r>i)&&([a,s]=ug(n,r),n>r?(a.width=i,a.height=r/n*i):(a.width=n/r*i,a.height=i),s.drawImage(t,0,0,a.width,a.height),Ds(t)),a}function sA(t,e){const{width:n}=t,{height:r}=t,[i,s]=ug(n,r);switch(e>4&&e<9?(i.width=r,i.height=n):(i.width=n,i.height=r),e){case 2:s.transform(-1,0,0,1,n,0);break;case 3:s.transform(-1,0,0,-1,n,r);break;case 4:s.transform(1,0,0,-1,0,r);break;case 5:s.transform(0,1,1,0,0,0);break;case 6:s.transform(0,1,-1,0,r,0);break;case 7:s.transform(0,-1,-1,0,r,n);break;case 8:s.transform(0,-1,1,0,0,n)}return s.drawImage(t,0,0,n,r),Ds(t),i}function Z_(t,e,n=0){return new Promise(function(r,i){let s,a,o,l,u,d,p,m,g,x,b,k,w,N,j,O,Q,B,P,y;function S(A=5){if(e.signal&&e.signal.aborted)throw e.signal.reason;s+=A,e.onProgress(Math.min(s,100))}function L(A){if(e.signal&&e.signal.aborted)throw e.signal.reason;s=Math.min(Math.max(A,s),100),e.onProgress(s)}return s=n,a=e.maxIteration||10,o=1024*e.maxSizeMB*1024,S(),mm(t,e).then((function(A){try{return[,l]=A,S(),u=iA(l,e),S(),new Promise(function(T,I){var M;if(!(M=e.exifOrientation))return rA(t).then((function(V){try{return M=V,ne.call(this)}catch(U){return I(U)}}).bind(this),I);function ne(){return T(M)}return ne.call(this)}).then((function(T){try{return d=T,S(),ru().then((function(I){try{return p=I?u:sA(u,d),S(),m=e.initialQuality||1,g=e.fileType||t.type,gm(p,g,t.name,t.lastModified,m).then((function(M){try{{let V=function(){if(a--&&(j>o||j>w)){let K,H;return K=y?.95*P.width:P.width,H=y?.95*P.height:P.height,[Q,B]=ug(K,H),B.drawImage(P,0,0,K,H),m*=g==="image/png"?.85:.95,gm(Q,g,t.name,t.lastModified,m).then(function(te){try{return O=te,Ds(P),P=Q,j=O.size,L(Math.min(99,Math.floor((N-j)/(N-o)*100))),V}catch(me){return i(me)}},i)}return[1]},U=function(){return Ds(P),Ds(Q),Ds(u),Ds(p),Ds(l),L(100),r(O)};if(x=M,S(),b=x.size>o,k=x.size>t.size,!b&&!k)return L(100),r(x);var ne;return w=t.size,N=x.size,j=N,P=p,y=!e.alwaysKeepResolution&&b,(ne=(function(K){for(;K;){if(K.then)return void K.then(ne,i);try{if(K.pop){if(K.length)return K.pop()?U.call(this):K;K=V}else K=K.call(this)}catch(H){return i(H)}}}).bind(this))(V)}}catch(V){return i(V)}}).bind(this),i)}catch(M){return i(M)}}).bind(this),i)}catch(I){return i(I)}}).bind(this),i)}catch(T){return i(T)}}).bind(this),i)})}const KF=`
let scriptImported = false
self.addEventListener('message', async (e) => {
  const { file, id, imageCompressionLibUrl, options } = e.data
  options.onProgress = (progress) => self.postMessage({ progress, id })
  try {
    if (!scriptImported) {
      // console.log('[worker] importScripts', imageCompressionLibUrl)
      self.importScripts(imageCompressionLibUrl)
      scriptImported = true
    }
    // console.log('[worker] self', self)
    const compressedFile = await imageCompression(file, options)
    self.postMessage({ file: compressedFile, id })
  } catch (e) {
    // console.error('[worker] error', e)
    self.postMessage({ error: e.message + '\\n' + e.stack, id })
  }
})
`;let E1;function qF(t,e){return new Promise((n,r)=>{E1||(E1=function(a){const o=[];return o.push(a),URL.createObjectURL(new Blob(o))}(KF));const i=new Worker(E1);i.addEventListener("message",function(a){if(e.signal&&e.signal.aborted)i.terminate();else if(a.data.progress===void 0){if(a.data.error)return r(new Error(a.data.error)),void i.terminate();n(a.data.file),i.terminate()}else e.onProgress(a.data.progress)}),i.addEventListener("error",r),e.signal&&e.signal.addEventListener("abort",()=>{r(e.signal.reason),i.terminate()}),i.postMessage({file:t,imageCompressionLibUrl:e.libURL,options:{...e,onProgress:void 0,signal:void 0}})})}function cr(t,e){return new Promise(function(n,r){let i,s,a,o,l,u;if(i={...e},a=0,{onProgress:o}=i,i.maxSizeMB=i.maxSizeMB||Number.POSITIVE_INFINITY,l=typeof i.useWebWorker!="boolean"||i.useWebWorker,delete i.useWebWorker,i.onProgress=g=>{a=g,typeof o=="function"&&o(a)},!(t instanceof Blob||t instanceof BF))return r(new Error("The file given is not an instance of Blob or File"));if(!/^image/.test(t.type))return r(new Error("The file given is not an image"));if(u=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,!l||typeof Worker!="function"||u)return Z_(t,i).then((function(g){try{return s=g,m.call(this)}catch(x){return r(x)}}).bind(this),r);var d=(function(){try{return m.call(this)}catch(g){return r(g)}}).bind(this),p=function(g){try{return Z_(t,i).then(function(x){try{return s=x,d()}catch(b){return r(b)}},r)}catch(x){return r(x)}};try{return i.libURL=i.libURL||"https://cdn.jsdelivr.net/npm/browser-image-compression@2.0.2/dist/browser-image-compression.js",qF(t,i).then(function(g){try{return s=g,d()}catch{return p()}},p)}catch{p()}function m(){try{s.name=t.name,s.lastModified=t.lastModified}catch{}try{i.preserveExif&&t.type==="image/jpeg"&&(!i.fileType||i.fileType&&i.fileType===t.type)&&(s=QN(t,s))}catch{}return n(s)}})}cr.getDataUrlFromFile=ZN,cr.getFilefromDataUrl=vy,cr.loadImage=eA,cr.drawImageInCanvas=nA,cr.drawFileInCanvas=mm,cr.canvasToFile=gm,cr.getExifOrientation=rA,cr.handleMaxWidthOrHeight=iA,cr.followExifOrientation=sA,cr.cleanupCanvasMemory=Ds,cr.isAutoOrientationInBrowser=ru,cr.approximateBelowMaximumCanvasSizeOfBrowser=tA,cr.copyExifWithoutOrientation=QN,cr.getBrowserName=Fl,cr.version="2.0.2";const zF={"image/jpeg":".jpg","image/jpg":".jpg","image/png":".png","application/pdf":".pdf","application/msword":".doc","application/vnd.openxmlformats-officedocument.wordprocessingml.document":".docx","application/vnd.ms-excel":".xls","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":".xlsx","text/plain":".txt","text/csv":".csv"},$F=t=>{if(t===0)return"0 Bytes";const e=1024,n=["Bytes","KB","MB","GB"],r=Math.floor(Math.log(t)/Math.log(e));return Math.round(t/Math.pow(e,r)*100)/100+" "+n[r]},yy=t=>zF[t]||"",HF=()=>`file_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,WF=t=>t.replace(/[^a-zA-Z0-9._-]/g,"_").replace(/_{2,}/g,"_").toLowerCase(),GF=(t,e,n,r)=>{const i=WF(t.name);yy(t.type)||`${t.name.split(".").pop()}`;const s=`${r}_${i}`,a=`projects/${e}/${n}/${s}`,o=oy(uy,a);return{uploadTask:dN(o,t,{contentType:t.type}),storagePath:a,filename:s}},QF=async(t,e,n,r)=>{if(!t)return null;const i="thumbnail",s=yy(t.type),a=`${r}_${i}${s}`,o=`projects/${e}/${n}/${a}`,l=oy(uy,o);try{return await dN(l,t),{thumbnailURL:await fN(l),thumbnailPath:o}}catch(u){return console.error("Thumbnail upload error:",u),null}},eb=async t=>{try{const e=oy(uy,t);return await L7(e),{success:!0}}catch(e){return console.error("Storage delete error:",e),{success:!1,error:e.message}}},YF=async t=>{try{return{success:!0,fileId:(await Xs(fn(vt,"files"),{...t,uploadedAt:new Date().toISOString(),createdAt:new Date().toISOString()})).id}}catch(e){return console.error("Firestore save error:",e),{success:!1,error:e.message}}},JF=async t=>{try{const e=Wu(fn(vt,"files"),$d("sagsnummer","==",t)),n=await $r(e),r=[];return n.forEach(i=>{r.push({id:i.id,...i.data()})}),{success:!0,files:r}}catch(e){return console.error("Firestore get files error:",e),{success:!1,error:e.message,files:[]}}},XF=(t,e)=>t.filter(n=>n.fileCategory===e),ZF=async t=>{try{return await Js(an(vt,"files",t)),{success:!0}}catch(e){return console.error("Firestore delete error:",e),{success:!1,error:e.message}}},e9=async({file:t,thumbnail:e,sagsnummer:n,projectId:r,projectName:i,category:s,uploadedBy:a,uploadedByUID:o,originalSize:l,compressedSize:u,isCompressed:d,description:p="",onProgress:m})=>{const g=HF();try{const{uploadTask:x,storagePath:b,filename:k}=GF(t,n,s,g);return new Promise((w,N)=>{x.on("state_changed",j=>{const O=j.bytesTransferred/j.totalBytes*100;m&&m(O)},j=>{console.error("Upload error:",j),N({success:!1,error:j.message})},async()=>{try{const j=await fN(x.snapshot.ref);let O=null;e&&(O=await QF(e,n,s,g));const Q={fileId:g,fileName:t.name,originalFileName:t.name,fileType:t.type,fileExtension:yy(t.type),fileCategory:s,fileSizeOriginal:l,fileSizeCompressed:u,isCompressed:d,compressionRatio:d?Math.round((1-u/l)*100)+"%":null,sagsnummer:n,projectId:r,projectName:i,fileURL:j,storagePath:b,thumbnailURL:(O==null?void 0:O.thumbnailURL)||null,thumbnailPath:(O==null?void 0:O.thumbnailPath)||null,uploadedBy:a,uploadedByUID:o,description:p.trim(),tags:[]},B=await YF(Q);B.success?w({success:!0,fileId:B.fileId,fileData:{...Q,id:B.fileId}}):N(B)}catch(j){N({success:!1,error:j.message})}})})}catch(x){return console.error("Upload process error:",x),{success:!1,error:x.message}}},t9=async t=>{try{return await eb(t.storagePath),t.thumbnailPath&&await eb(t.thumbnailPath),await ZF(t.id),{success:!0}}catch(e){return console.error("Delete file error:",e),{success:!1,error:e.message}}};function n9({sagsnummer:t,projectId:e,projectName:n,uploadedBy:r,uploadedByUID:i,onUploadComplete:s}){const[a,o]=ie.useState(!1),[l,u]=ie.useState(0),[d,p]=ie.useState(0),[m,g]=ie.useState(!1),[x,b]=ie.useState(null),[k,w]=ie.useState(""),[N,j]=ie.useState(""),O=ie.useRef(null),{showSuccess:Q,showError:B}=Gr(),P=M=>{var V;const ne=(V=M.target.files)==null?void 0:V[0];ne&&(b(ne),j(""),g(!0))},y=M=>{var V;M.preventDefault();const ne=(V=M.dataTransfer.files)==null?void 0:V[0];ne&&(b(ne),j(""),g(!0))},S=M=>{M.preventDefault()},L=M=>{w(M)},A=async()=>{if(!k){B("Vlg venligst en kategori");return}g(!1),x&&(await I(x,k,N),b(null),w(""),j(""))},T=async(M,ne)=>{try{const U=await cr(M,{maxSizeMB:1,maxWidthOrHeight:1920,useWebWorker:!0,onProgress:ne}),H=await cr(M,{maxSizeMB:.1,maxWidthOrHeight:200,useWebWorker:!0});return{compressed:U,thumbnail:H}}catch(V){return console.error("Image compression error:",V),{compressed:M,thumbnail:null}}},I=async(M,ne,V)=>{if(M.size>10485760){B("Filen er for stor. Maksimum 10MB tilladt.");return}o(!0),u(0),p(0);try{let K=M,H=M.size,te=M.size,me=!1,R=null;if(M.type.startsWith("image/")){const J=await T(M,W=>{p(W)});J.compressed&&(K=J.compressed,te=J.compressed.size,me=!0),J.thumbnail&&(R=J.thumbnail),p(100)}const $=await e9({file:K,thumbnail:R,sagsnummer:t,projectId:e,projectName:n,category:ne,uploadedBy:r,uploadedByUID:i,originalSize:H,compressedSize:te,isCompressed:me,description:V,onProgress:J=>{u(Math.round(J))}});$.success?(Q("Fil uploaded!"),s($.fileData),O.current&&(O.current.value="")):B("Upload fejlede")}catch(K){console.error("Upload error:",K),B("Upload fejlede - prv igen")}finally{o(!1),p(0),u(0)}};return c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"file-upload-area-compact",children:[c.jsxs("div",{className:"upload-dropzone-compact",onDrop:y,onDragOver:S,onClick:()=>{var M;return(M=O.current)==null?void 0:M.click()},children:[c.jsx("span",{className:"upload-icon-compact",children:""}),c.jsx("span",{className:"upload-text-compact",children:"Drag & drop eller klik for at uploade fil"})]}),c.jsx("input",{ref:O,type:"file",onChange:P,style:{display:"none"}}),a&&c.jsxs("div",{className:"upload-progress-compact",children:[d>0&&d<100&&c.jsxs(c.Fragment,{children:[c.jsxs("span",{className:"progress-text-compact",children:["Komprimerer... ",d,"%"]}),c.jsx("div",{className:"progress-bar-container",children:c.jsx("div",{className:"progress-bar",style:{width:`${d}%`}})})]}),l>0&&c.jsxs(c.Fragment,{children:[c.jsxs("span",{className:"progress-text-compact",children:["Uploader... ",l,"%"]}),c.jsx("div",{className:"progress-bar-container",children:c.jsx("div",{className:"progress-bar",style:{width:`${l}%`}})})]})]})]}),m&&c.jsx("div",{className:"confirm-overlay",children:c.jsxs("div",{className:"confirm-dialog file-upload-dialog",children:[c.jsxs("div",{className:"confirm-header",children:[c.jsx("h3",{children:"Upload fil"}),c.jsx("button",{className:"modal-close",onClick:()=>{g(!1),b(null),w(""),j("")},children:""})]}),c.jsxs("div",{className:"confirm-body",children:[c.jsx("div",{className:"file-info",children:c.jsxs("p",{className:"file-name",children:[" ",x==null?void 0:x.name]})}),c.jsxs("div",{className:"form-group",style:{marginTop:"16px"},children:[c.jsx("label",{children:"Vlg kategori *"}),c.jsxs("div",{className:"category-selection-compact",children:[c.jsxs("button",{type:"button",className:`category-btn-compact ${k==="bilag"?"selected":""}`,onClick:()=>L("bilag"),children:[c.jsx("span",{className:"category-icon",children:""}),c.jsx("span",{children:"Bilag"})]}),c.jsxs("button",{type:"button",className:`category-btn-compact ${k==="billeder"?"selected":""}`,onClick:()=>L("billeder"),children:[c.jsx("span",{className:"category-icon",children:""}),c.jsx("span",{children:"Billeder"})]}),c.jsxs("button",{type:"button",className:`category-btn-compact ${k==="dokumenter"?"selected":""}`,onClick:()=>L("dokumenter"),children:[c.jsx("span",{className:"category-icon",children:""}),c.jsx("span",{children:"Dokumenter"})]})]})]}),c.jsxs("div",{className:"form-group",style:{marginTop:"16px"},children:[c.jsx("label",{htmlFor:"fileNote",children:"Kommentar/Note (valgfri)"}),c.jsx("textarea",{id:"fileNote",value:N,onChange:M=>j(M.target.value),placeholder:"Tilfj en note eller kommentar til filen...",rows:"3",maxLength:"500",style:{width:"100%",padding:"10px",border:"1px solid #ddd",borderRadius:"6px",fontSize:"14px",fontFamily:"inherit",resize:"vertical"}}),c.jsxs("small",{className:"form-hint",children:[N.length,"/500 tegn"]})]})]}),c.jsxs("div",{className:"confirm-footer",children:[c.jsx("button",{className:"btn-secondary",onClick:()=>{g(!1),b(null),w(""),j("")},children:"Annuller"}),c.jsx("button",{className:"btn-primary",onClick:A,disabled:!k,children:"Upload fil"})]})]})})]})}function k1({category:t,files:e,onPreview:n,onDelete:r,onDownload:i}){const a=(()=>{switch(t){case"bilag":return{icon:"",title:"Bilag",emptyText:"Ingen bilag endnu"};case"billeder":return{icon:"",title:"Billeder",emptyText:"Ingen billeder endnu"};case"dokumenter":return{icon:"",title:"Dokumenter",emptyText:"Ingen dokumenter endnu"};default:return{icon:"",title:"Filer",emptyText:"Ingen filer endnu"}}})();return c.jsxs("div",{className:"file-category-column",children:[c.jsxs("div",{className:"category-header",children:[c.jsx("span",{className:"category-icon",children:a.icon}),c.jsx("h3",{children:a.title}),c.jsx("span",{className:"category-count",children:e.length})]}),c.jsx("div",{className:"files-list",children:e.length===0?c.jsxs("div",{className:"empty-state-file",children:[c.jsx("div",{className:"empty-icon",children:a.icon}),c.jsx("p",{children:a.emptyText})]}):e.map(o=>{var l;return c.jsxs("div",{className:"file-item",children:[c.jsx("div",{className:"file-preview",onClick:()=>n(o),children:o.thumbnailURL?c.jsx("img",{src:o.thumbnailURL,alt:o.fileName}):c.jsx("div",{className:"file-icon",children:(l=o.fileType)!=null&&l.startsWith("image/")?"":""})}),c.jsxs("div",{className:"file-details",children:[c.jsx("div",{className:"file-name",title:o.fileName,children:o.fileName}),o.description&&c.jsxs("div",{className:"file-note",title:o.description,children:[" ",o.description]}),c.jsxs("div",{className:"file-meta",children:[c.jsx("span",{className:"file-date",children:yp(o.uploadedAt)}),o.fileSizeCompressed&&c.jsx("span",{className:"file-size",children:$F(o.fileSizeCompressed)})]}),o.uploadedBy&&c.jsxs("div",{className:"file-uploader",children:[" ",o.uploadedBy]})]}),c.jsxs("div",{className:"file-actions",children:[c.jsx("button",{className:"action-btn",onClick:()=>n(o),title:"Vis",children:""}),c.jsx("button",{className:"action-btn",onClick:()=>i(o),title:"Download",children:""}),c.jsx("button",{className:"action-btn danger",onClick:()=>r(o),title:"Slet",children:""})]})]},o.id)})})]})}function r9({file:t,onClose:e,onNext:n,onPrev:r,hasNext:i,hasPrev:s}){return ie.useEffect(()=>{const o=l=>{l.key==="Escape"&&e(),l.key==="ArrowLeft"&&s&&r(),l.key==="ArrowRight"&&i&&n()};return window.addEventListener("keydown",o),()=>window.removeEventListener("keydown",o)},[e,n,r,i,s]),ie.useEffect(()=>{if(!t)return;const o=t.fileType==="application/pdf",l=t.fileType.startsWith("image/");if(o){window.open(t.fileURL,"_blank"),e();return}l||e()},[t,e]),!t||!t.fileType.startsWith("image/")?null:c.jsx("div",{className:"preview-overlay",onClick:e,children:c.jsxs("div",{className:"preview-modal",onClick:o=>o.stopPropagation(),children:[c.jsxs("div",{className:"preview-header",children:[c.jsx("span",{className:"preview-filename",children:t.fileName}),c.jsx("button",{className:"preview-close",onClick:e,"aria-label":"Luk",children:""})]}),c.jsx("div",{className:"preview-content",children:c.jsx("img",{src:t.fileURL,alt:t.fileName,className:"preview-image"})}),c.jsxs("div",{className:"preview-navigation",children:[s&&c.jsx("button",{className:"preview-nav-btn preview-prev",onClick:r,"aria-label":"Forrige",children:""}),i&&c.jsx("button",{className:"preview-nav-btn preview-next",onClick:n,"aria-label":"Nste",children:""})]})]})})}function i9({project:t,currentUser:e}){const[n,r]=ie.useState([]),[i,s]=ie.useState(!0),[a,o]=ie.useState(""),[l,u]=ie.useState("newest"),[d,p]=ie.useState(null),[m,g]=ie.useState(0),[x,b]=ie.useState(""),{showSuccess:k,showError:w,showConfirm:N}=Gr();ie.useEffect(()=>{j()},[t.projectNumber]);const j=async()=>{s(!0);try{const V=await JF(t.projectNumber);V.success?r(V.files):w("Kunne ikke indlse filer")}catch(V){console.error("Error loading files:",V),w("Kunne ikke indlse filer")}finally{s(!1)}},O=V=>{r(U=>[...U,V])},Q=async V=>{if(await N({title:"Slet fil?",message:`Er du sikker p at du vil slette "${V.fileName}"? Denne handling kan ikke fortrydes.`,confirmText:"Slet fil",cancelText:"Annuller",type:"danger"}))try{(await t9(V)).success?(r(H=>H.filter(te=>te.id!==V.id)),k("Fil slettet")):w("Kunne ikke slette fil")}catch(K){console.error("Delete error:",K),w("Kunne ikke slette fil")}},B=V=>{window.open(V.fileURL,"_blank")},P=V=>{const U=V.fileCategory,H=A(U).findIndex(te=>te.id===V.id);p(V),g(H),b(U)},y=()=>{const V=A(x);if(m<V.length-1){const U=m+1;p(V[U]),g(U)}},S=()=>{if(m>0){const V=A(x),U=m-1;p(V[U]),g(U)}},L=()=>{let V=[...n];if(a.trim()){const U=a.toLowerCase();V=V.filter(K=>{var H;return K.fileName.toLowerCase().includes(U)||((H=K.description)==null?void 0:H.toLowerCase().includes(U))})}return V.sort((U,K)=>l==="newest"?new Date(K.uploadedAt)-new Date(U.uploadedAt):l==="oldest"?new Date(U.uploadedAt)-new Date(K.uploadedAt):l==="name"?U.fileName.localeCompare(K.fileName):0),V},A=V=>{const U=L();return XF(U,V)};if(i)return c.jsxs("div",{className:"loading-text",children:[c.jsx("span",{className:"loading-spinner-dark"}),"Indlser filer..."]});const T=A("bilag"),I=A("billeder"),M=A("dokumenter"),ne=x?A(x):[];return c.jsxs("div",{className:"files-tab",children:[c.jsx(n9,{sagsnummer:t.projectNumber,projectId:t.id,projectName:t.name,uploadedBy:e,uploadedByUID:"user123",onUploadComplete:O}),c.jsxs("div",{className:"files-controls",children:[c.jsx("input",{type:"text",placeholder:"Sg efter filnavn...",value:a,onChange:V=>o(V.target.value),className:"search-input"}),c.jsxs("select",{value:l,onChange:V=>u(V.target.value),className:"filter-select",children:[c.jsx("option",{value:"newest",children:"Nyeste frst"}),c.jsx("option",{value:"oldest",children:"ldste frst"}),c.jsx("option",{value:"name",children:"Navn (A-Z)"})]})]}),c.jsxs("div",{className:"files-columns",children:[c.jsx(k1,{category:"bilag",files:T,onPreview:P,onDelete:Q,onDownload:B}),c.jsx(k1,{category:"billeder",files:I,onPreview:P,onDelete:Q,onDownload:B}),c.jsx(k1,{category:"dokumenter",files:M,onPreview:P,onDelete:Q,onDownload:B})]}),c.jsx(r9,{file:d,onClose:()=>p(null),onNext:y,onPrev:S,hasNext:m<ne.length-1,hasPrev:m>0})]})}function s9(){const{id:t}=G6(),e=Uu(),[n,r]=ie.useState(null),[i,s]=ie.useState([]),[a,o]=ie.useState([]),[l,u]=ie.useState([]),[d,p]=ie.useState([]),[m,g]=ie.useState([]),[x,b]=ie.useState(!0),[k,w]=ie.useState(!1),[N,j]=ie.useState(!1),[O,Q]=ie.useState(!1),[B,P]=ie.useState(null),[y,S]=ie.useState(null),[L,A]=ie.useState(450),[T,I]=ie.useState("oversigt");ie.useEffect(()=>{M(),ne(),V(),U(),K(),H()},[t]);const M=async()=>{try{const he=await ig(an(vt,"projects",t));he.exists()?r({id:he.id,...he.data()}):(alert("Sag ikke fundet"),e("/sager"))}catch(he){console.error("Error loading project:",he),alert("Der opstod en fejl ved indlsning af sag.")}finally{b(!1)}},ne=async()=>{try{const he=await BN(t);s(he)}catch(he){console.error("Error loading time entries:",he)}},V=async()=>{try{const he=await jF(t);he.success&&o(he.purchases)}catch(he){console.error("Error loading material purchases:",he)}},U=async()=>{try{const he=await qN();he.success&&u(he.suppliers)}catch(he){console.error("Error loading suppliers:",he)}},K=async()=>{try{const he=await zN();he.success&&p(he.materials)}catch(he){console.error("Error loading materials:",he)}},H=async()=>{try{const he=await $r(fn(vt,"employees")),Ee=[];he.forEach(Me=>{Ee.push({id:Me.id,...Me.data()})}),Ee.sort((Me,Ke)=>Me.name.localeCompare(Ke.name)),g(Ee)}catch(he){console.error("Error loading employees:",he)}},te=()=>{w(!0)},me=async he=>{try{await Gs(an(vt,"projects",t),{...he,updatedAt:new Date().toISOString(),updatedBy:"Admin"}),w(!1),await M()}catch(Ee){console.error("Error updating project:",Ee),alert("Der opstod en fejl ved opdatering af sag.")}},R=()=>{P(null),j(!0)},$=he=>{P(he),j(!0)},J=async he=>{if(window.confirm("Er du sikker p, at du vil slette denne timeregistrering?"))try{await Js(an(vt,"timeEntries",he.id)),await ne()}catch(Ee){console.error("Error deleting time entry:",Ee),alert("Der opstod en fejl ved sletning af timeregistrering.")}},W=async he=>{try{const Ee={...he,projectId:t,duration:he.duration,hours:he.duration,hourlyRate:he.rate||0,employeeName:he.employeeName||"Ikke angivet",activity:he.activity,billable:he.billable,rate:he.rate||0};B?await Gs(an(vt,"timeEntries",B.id),{...Ee,updatedAt:new Date().toISOString()}):await Xs(fn(vt,"timeEntries"),{...Ee,createdAt:new Date().toISOString(),createdBy:"Admin"}),j(!1),await ne()}catch(Ee){console.error("Error saving time entry:",Ee),alert("Der opstod en fejl ved gemning af timeregistrering.")}},ae=()=>{S(null),Q(!0)},le=he=>{S(he),Q(!0)},ue=async he=>{if(window.confirm("Er du sikker p, at du vil slette dette materiale?"))try{(await HN(he.id)).success?await V():alert("Der opstod en fejl ved sletning af materiale.")}catch(Ee){console.error("Error deleting material:",Ee),alert("Der opstod en fejl ved sletning af materiale.")}},de=async he=>{try{y?(await RF(y.id,he)).success?(Q(!1),await V()):alert("Der opstod en fejl ved opdatering af materiale."):(await PF(he)).success?(Q(!1),await V()):alert("Der opstod en fejl ved tilfjelse af materiale.")}catch(Ee){console.error("Error saving material:",Ee),alert("Der opstod en fejl ved gemning af materiale.")}},ke=he=>he==="fixed-price"?"Fast Pris":"Tid & Materiale",Ie=he=>{const Ee={planned:{color:"#3498db",label:"Planlagt"},"in-progress":{color:"#27ae60",label:"I Gang"},"ready-for-invoice":{color:"#f39c12",label:"Klar til Faktura"},closed:{color:"#9b59b6",label:"Lukket"}};return Ee[he]||Ee.planned};if(x)return c.jsx("div",{children:c.jsx("div",{className:"page-header-friendly",children:c.jsxs("div",{className:"loading-friendly",children:[c.jsx("div",{className:"spinner"}),c.jsx("p",{children:"Henter sag..."})]})})});if(!n)return null;const De=UN(i),Le=fF(i),Xe=pF(i),be=WN(a),oe=GN(a),We=DF(a),Fe=Ie(n.status);return c.jsxs("div",{children:[c.jsxs("div",{className:"sag-details-header",children:[c.jsx("button",{className:"btn-back-friendly",onClick:()=>e("/sager"),children:" Tilbage til alle sager"}),c.jsxs("div",{className:"sag-details-title-section",children:[c.jsx("h1",{className:"sag-details-customer",children:n.customerName||"Kunde ikke angivet"}),c.jsx("p",{className:"sag-details-name",children:n.name}),c.jsxs("div",{className:"sag-details-meta",children:[c.jsxs("span",{className:"sag-meta-number",children:["Sagsnr. ",n.projectNumber]}),c.jsx("span",{className:"sag-meta-divider",children:""}),c.jsx("span",{className:"sag-meta-status",style:{backgroundColor:Fe.color+"20",color:Fe.color,border:`2px solid ${Fe.color}`},children:Fe.label})]})]})]}),c.jsxs("div",{className:"sag-tabs-colorful",children:[c.jsxs("button",{className:`sag-tab-colorful tab-blue ${T==="oversigt"?"active":""}`,onClick:()=>I("oversigt"),children:[c.jsx("span",{className:"tab-icon",children:""}),c.jsx("span",{className:"tab-text",children:"Oversigt"})]}),c.jsxs("button",{className:`sag-tab-colorful tab-green ${T==="timer"?"active":""}`,onClick:()=>I("timer"),children:[c.jsx("span",{className:"tab-icon",children:""}),c.jsx("span",{className:"tab-text",children:"Timer"})]}),c.jsxs("button",{className:`sag-tab-colorful tab-orange ${T==="materialer"?"active":""}`,onClick:()=>I("materialer"),children:[c.jsx("span",{className:"tab-icon",children:""}),c.jsx("span",{className:"tab-text",children:"Materialer"})]}),c.jsxs("button",{className:`sag-tab-colorful tab-purple ${T==="dokumenter"?"active":""}`,onClick:()=>I("dokumenter"),children:[c.jsx("span",{className:"tab-icon",children:""}),c.jsx("span",{className:"tab-text",children:"Dokumenter"})]})]}),c.jsxs("div",{className:"sag-tab-content-colorful",children:[T==="oversigt"&&c.jsx("div",{className:"oversigt-tab-new",children:c.jsxs("div",{className:"sag-sections-grid",children:[c.jsx("img",{src:"/house.png",alt:"",className:"page-header-clipart clipart-sagdetails","aria-hidden":"true"}),c.jsxs("div",{className:"sag-section-card section-blue",children:[c.jsxs("div",{className:"section-header header-blue",children:[c.jsxs("div",{className:"section-header-left",children:[c.jsx("span",{className:"section-icon",children:""}),c.jsx("h2",{children:"Sagsoplysninger"})]}),c.jsx("button",{className:"btn-section-action",onClick:te,children:" Ret"})]}),c.jsxs("div",{className:"section-body",children:[c.jsxs("div",{className:"info-row",children:[c.jsx("span",{className:"info-label-new",children:"Status:"}),c.jsx("span",{className:"info-badge",style:{backgroundColor:Fe.color+"20",color:Fe.color,border:`2px solid ${Fe.color}`},children:Fe.label})]}),c.jsxs("div",{className:"info-row",children:[c.jsx("span",{className:"info-label-new",children:"Type:"}),c.jsx("span",{className:"info-value-new",children:ke(n.type)})]}),n.type==="fixed-price"&&c.jsxs("div",{className:"info-row",children:[c.jsx("span",{className:"info-label-new",children:"Fast pris:"}),c.jsx("span",{className:"info-value-new highlight-green",children:ni(n.fixedPrice)})]}),c.jsxs("div",{className:"info-row",children:[c.jsx("span",{className:"info-label-new",children:"Oprettet:"}),c.jsx("span",{className:"info-value-new",children:yp(n.createdAt)})]}),n.description&&c.jsxs("div",{className:"info-row full",children:[c.jsx("span",{className:"info-label-new",children:"Beskrivelse:"}),c.jsx("p",{className:"info-description-new",children:n.description})]})]})]}),c.jsxs("div",{className:"sag-section-card section-blue",children:[c.jsx("div",{className:"section-header header-blue",children:c.jsxs("div",{className:"section-header-left",children:[c.jsx("span",{className:"section-icon",children:""}),c.jsx("h2",{children:"Kundeoplysninger"})]})}),c.jsxs("div",{className:"section-body",children:[c.jsxs("div",{className:"info-row",children:[c.jsx("span",{className:"info-label-new",children:"Navn:"}),c.jsx("span",{className:"info-value-new",children:n.customerName||"Ikke angivet"})]}),n.customerPhone&&c.jsxs("div",{className:"info-row",children:[c.jsx("span",{className:"info-label-new",children:"Telefon:"}),c.jsxs("a",{href:`tel:${n.customerPhone}`,className:"info-link-new",children:[" ",_F(n.customerPhone)]})]}),n.customerEmail&&c.jsxs("div",{className:"info-row",children:[c.jsx("span",{className:"info-label-new",children:"Email:"}),c.jsxs("a",{href:`mailto:${n.customerEmail}`,className:"info-link-new",children:[" ",n.customerEmail]})]}),n.customerAddress&&c.jsxs("div",{className:"info-row full",children:[c.jsx("span",{className:"info-label-new",children:"Adresse:"}),c.jsxs("a",{href:bF(n.customerAddress),target:"_blank",rel:"noopener noreferrer",className:"info-link-new",children:[" ",n.customerAddress]})]})]})]}),c.jsxs("div",{className:"sag-section-card section-green",children:[c.jsx("div",{className:"section-header header-green",children:c.jsxs("div",{className:"section-header-left",children:[c.jsx("span",{className:"section-icon",children:""}),c.jsx("h2",{children:"Timer Status"})]})}),c.jsxs("div",{className:"section-body",children:[c.jsxs("div",{className:"stats-compact",children:[c.jsxs("div",{className:"stat-compact",children:[c.jsx("div",{className:"stat-value-compact",children:De.toFixed(1)}),c.jsx("div",{className:"stat-label-compact",children:"I alt arbejdet"})]}),c.jsxs("div",{className:"stat-compact",children:[c.jsx("div",{className:"stat-value-compact highlight-green",children:Le.toFixed(1)}),c.jsx("div",{className:"stat-label-compact",children:"Kan faktureres"})]}),c.jsxs("div",{className:"stat-compact",children:[c.jsx("div",{className:"stat-value-compact highlight-green",children:ni(Xe)}),c.jsx("div",{className:"stat-label-compact",children:"Vrdi"})]})]}),i.length>0&&c.jsxs("div",{className:"recent-activity",children:[c.jsx("p",{className:"recent-label",children:"Seneste registreringer:"}),i.slice(0,3).map((he,Ee)=>c.jsxs("div",{className:"recent-item-compact",children:[c.jsx("span",{className:"recent-date",children:yp(he.date)}),c.jsx("span",{className:"recent-name",children:he.employeeName}),c.jsx("span",{className:"recent-hours",children:X_(he.duration||he.hours||0)})]},Ee))]})]})]}),c.jsxs("div",{className:"sag-section-card section-orange",children:[c.jsx("div",{className:"section-header header-orange",children:c.jsxs("div",{className:"section-header-left",children:[c.jsx("span",{className:"section-icon",children:""}),c.jsx("h2",{children:"Materialer Status"})]})}),c.jsx("div",{className:"section-body",children:c.jsxs("div",{className:"stats-compact",children:[c.jsxs("div",{className:"stat-compact",children:[c.jsx("div",{className:"stat-value-compact",children:a.length}),c.jsx("div",{className:"stat-label-compact",children:"Indkb"})]}),c.jsxs("div",{className:"stat-compact",children:[c.jsx("div",{className:"stat-value-compact",children:ni(be)}),c.jsx("div",{className:"stat-label-compact",children:"Indkbspris"})]}),c.jsxs("div",{className:"stat-compact",children:[c.jsx("div",{className:"stat-value-compact",children:ni(oe)}),c.jsx("div",{className:"stat-label-compact",children:"Salgspris"})]}),c.jsxs("div",{className:"stat-compact",children:[c.jsx("div",{className:"stat-value-compact",style:{color:We>=0?"#27ae60":"#e74c3c"},children:ni(We)}),c.jsx("div",{className:"stat-label-compact",children:"Avance"})]})]})})]})]})}),T==="timer"&&c.jsxs("div",{className:"timer-tab-new",children:[c.jsxs("div",{className:"tab-header-section",children:[c.jsxs("div",{className:"tab-summary-boxes",children:[c.jsxs("div",{className:"summary-box box-green",children:[c.jsx("div",{className:"summary-icon",children:""}),c.jsxs("div",{className:"summary-content",children:[c.jsxs("div",{className:"summary-value",children:[De.toFixed(1)," timer"]}),c.jsx("div",{className:"summary-label",children:"I alt arbejdet"})]})]}),c.jsxs("div",{className:"summary-box box-green",children:[c.jsx("div",{className:"summary-icon",children:""}),c.jsxs("div",{className:"summary-content",children:[c.jsxs("div",{className:"summary-value",children:[Le.toFixed(1)," timer"]}),c.jsx("div",{className:"summary-label",children:"Kan faktureres"})]})]}),c.jsxs("div",{className:"summary-box box-green",children:[c.jsx("div",{className:"summary-icon",children:""}),c.jsxs("div",{className:"summary-content",children:[c.jsx("div",{className:"summary-value",children:ni(Xe)}),c.jsx("div",{className:"summary-label",children:"Total vrdi"})]})]})]}),c.jsxs("button",{className:"btn-add-friendly btn-green",onClick:R,children:[c.jsx("span",{className:"btn-icon-large",children:"+"})," Registrer nye timer"]})]}),c.jsx("div",{className:"content-table-wrapper",children:i.length===0?c.jsxs("div",{className:"empty-state-friendly",children:[c.jsx("div",{className:"empty-icon",children:""}),c.jsx("h3",{children:"Ingen timer registreret endnu"}),c.jsx("p",{children:'Klik p "Registrer nye timer" for at komme i gang'})]}):c.jsxs("table",{className:"friendly-table",children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{children:"Dato"}),c.jsx("th",{children:"Medarbejder"}),c.jsx("th",{children:"Timer"}),c.jsx("th",{children:"Timepris"}),c.jsx("th",{children:"Fakturerbar"}),c.jsx("th",{children:"Vrdi"}),c.jsx("th",{children:"Aktivitet"}),c.jsx("th",{})]})}),c.jsx("tbody",{children:i.map(he=>c.jsxs("tr",{children:[c.jsx("td",{children:yp(he.date)}),c.jsx("td",{className:"employee-cell",children:he.employeeName||"Ikke angivet"}),c.jsx("td",{className:"hours-cell",children:X_(he.duration||he.hours||0)}),c.jsx("td",{children:ni(he.rate||he.hourlyRate||0)}),c.jsx("td",{children:he.billable?"":""}),c.jsx("td",{className:"value-cell",children:he.billable?ni((he.duration||he.hours||0)*(he.rate||he.hourlyRate||0)):"-"}),c.jsx("td",{className:"activity-cell",children:he.activity||he.description||"-"}),c.jsxs("td",{className:"actions-cell",children:[c.jsx("button",{className:"btn-icon-action",onClick:()=>$(he),title:"Ret",children:""}),c.jsx("button",{className:"btn-icon-action",onClick:()=>J(he),title:"Slet",children:""})]})]},he.id))})]})})]}),T==="materialer"&&c.jsxs("div",{className:"materialer-tab-new",children:[c.jsxs("div",{className:"tab-header-section",children:[c.jsxs("div",{className:"tab-summary-boxes",children:[c.jsxs("div",{className:"summary-box box-orange",children:[c.jsx("div",{className:"summary-icon",children:""}),c.jsxs("div",{className:"summary-content",children:[c.jsx("div",{className:"summary-value",children:a.length}),c.jsx("div",{className:"summary-label",children:"Indkb"})]})]}),c.jsxs("div",{className:"summary-box box-orange",children:[c.jsx("div",{className:"summary-icon",children:""}),c.jsxs("div",{className:"summary-content",children:[c.jsx("div",{className:"summary-value",children:ni(be)}),c.jsx("div",{className:"summary-label",children:"Indkbspris"})]})]}),c.jsxs("div",{className:"summary-box box-orange",children:[c.jsx("div",{className:"summary-icon",children:""}),c.jsxs("div",{className:"summary-content",children:[c.jsx("div",{className:"summary-value",children:ni(oe)}),c.jsx("div",{className:"summary-label",children:"Salgspris"})]})]}),c.jsxs("div",{className:`summary-box ${We>=0?"box-green":"box-red"}`,children:[c.jsx("div",{className:"summary-icon",children:We>=0?"":""}),c.jsxs("div",{className:"summary-content",children:[c.jsx("div",{className:"summary-value",children:ni(We)}),c.jsx("div",{className:"summary-label",children:"Avance"})]})]})]}),c.jsxs("button",{className:"btn-add-friendly btn-orange",onClick:ae,children:[c.jsx("span",{className:"btn-icon-large",children:"+"})," Tilfj materiale"]})]}),c.jsx("div",{className:"content-table-wrapper",children:a.length===0?c.jsxs("div",{className:"empty-state-friendly",children:[c.jsx("div",{className:"empty-icon",children:""}),c.jsx("h3",{children:"Ingen materialer endnu"}),c.jsx("p",{children:'Klik p "Tilfj materiale" for at registrere indkb'})]}):c.jsxs("table",{className:"friendly-table",children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{children:"Materiale"}),c.jsx("th",{children:"Leverandr"}),c.jsx("th",{children:"Antal"}),c.jsx("th",{children:"Indkbspris"}),c.jsx("th",{children:"Salgspris"}),c.jsx("th",{children:"Avance"}),c.jsx("th",{})]})}),c.jsx("tbody",{children:a.map(he=>c.jsxs("tr",{children:[c.jsx("td",{className:"material-cell",children:he.materialName||"Ikke angivet"}),c.jsx("td",{children:he.supplierName||"-"}),c.jsxs("td",{children:[he.quantity," ",he.unit]}),c.jsx("td",{children:ni(he.purchasePrice)}),c.jsx("td",{children:ni(he.sellingPrice)}),c.jsx("td",{className:"margin-cell",style:{color:(he.marginKr||0)>=0?"#27ae60":"#e74c3c"},children:ni(he.marginKr)}),c.jsxs("td",{className:"actions-cell",children:[c.jsx("button",{className:"btn-icon-action",onClick:()=>le(he),title:"Ret",children:""}),c.jsx("button",{className:"btn-icon-action",onClick:()=>ue(he),title:"Slet",children:""})]})]},he.id))})]})})]}),T==="dokumenter"&&c.jsx("div",{className:"dokumenter-tab-new",children:c.jsx(i9,{project:n,currentUser:"Admin"})})]}),k&&c.jsx(KN,{isOpen:k,project:n,onClose:()=>w(!1),onSave:me}),N&&c.jsx(NF,{timeEntry:B,defaultRate:L,employees:m,onClose:()=>j(!1),onSave:W}),O&&c.jsx(AF,{purchase:y,project:n,suppliers:l,materials:d,onClose:()=>Q(!1),onSave:de})]})}function a9({supplier:t,onSave:e,onClose:n}){const[r,i]=ie.useState({name:"",cvr:"",contactPerson:"",phone:"",email:"",address:"",customerNumber:"",type:"",preferredPaymentMethod:"",notes:""}),[s,a]=ie.useState({}),o=["Byggemarked","Grossist","Specialforhandler","Tmmerhandel","El-grossist","VVS-grossist","Malerforretning","Vrktjsforhandler","Andet"],l=["Faktura","Kontant","Kort","Firmakort","MobilePay","Konto"];ie.useEffect(()=>{t&&i({name:t.name||"",cvr:t.cvr||"",contactPerson:t.contactPerson||"",phone:t.phone||"",email:t.email||"",address:t.address||"",customerNumber:t.customerNumber||"",type:t.type||"",preferredPaymentMethod:t.preferredPaymentMethod||"",notes:t.notes||""})},[t]);const u=k=>{const{name:w,value:N}=k.target;i(j=>({...j,[w]:N})),s[w]&&a(j=>({...j,[w]:null}))},d=k=>k.replace(/\D/g,"").slice(0,8),p=k=>{const w=d(k.target.value);i(N=>({...N,cvr:w})),s.cvr&&a(N=>({...N,cvr:null}))},m=k=>k.replace(/\D/g,"").slice(0,8),g=k=>{const w=m(k.target.value);i(N=>({...N,phone:w})),s.phone&&a(N=>({...N,phone:null}))},x=()=>{const k={};return(!r.name||r.name.trim().length<2)&&(k.name="Leverandrnavn er pkrvet (min. 2 tegn)"),(!r.cvr||r.cvr.length!==8)&&(k.cvr="CVR skal vre 8 cifre"),r.email&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r.email)&&(k.email="Ugyldig email-adresse"),r.phone&&r.phone.length!==8&&(k.phone="Telefonnummer skal vre 8 cifre"),a(k),Object.keys(k).length===0},b=k=>{if(k.preventDefault(),x()){const w={name:r.name.trim(),cvr:r.cvr,contactPerson:r.contactPerson.trim(),phone:r.phone,email:r.email.trim().toLowerCase(),address:r.address.trim(),customerNumber:r.customerNumber.trim(),type:r.type,preferredPaymentMethod:r.preferredPaymentMethod,notes:r.notes.trim()};e(w)}};return c.jsx("div",{className:"modal-overlay",children:c.jsxs("div",{className:"modal-content supplier-modal",onClick:k=>k.stopPropagation(),children:[c.jsxs("div",{className:"modal-header",children:[c.jsx("h2",{children:t?"Redigr Leverandr":"Tilfj Leverandr"}),c.jsx("button",{className:"modal-close",onClick:n,children:""})]}),c.jsxs("form",{onSubmit:b,className:"modal-form",children:[c.jsxs("div",{className:"form-section",children:[c.jsx("h3",{className:"form-section-title",children:"Grundoplysninger"}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{htmlFor:"name",children:"Leverandrnavn *"}),c.jsx("input",{type:"text",id:"name",name:"name",value:r.name,onChange:u,className:s.name?"input-error":"",placeholder:"F.eks. XL-BYG Slagelse",autoFocus:!0}),s.name&&c.jsx("span",{className:"error-text",children:s.name})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{htmlFor:"cvr",children:"CVR-nummer *"}),c.jsx("input",{type:"text",id:"cvr",name:"cvr",value:r.cvr,onChange:p,className:s.cvr?"input-error":"",placeholder:"12345678",maxLength:"8"}),s.cvr&&c.jsx("span",{className:"error-text",children:s.cvr}),c.jsx("small",{className:"form-hint",children:"8 cifre uden mellemrum"})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{htmlFor:"customerNumber",children:"Kundenummer"}),c.jsx("input",{type:"text",id:"customerNumber",name:"customerNumber",value:r.customerNumber,onChange:u,placeholder:"Vores kundenummer hos leverandren"}),c.jsx("small",{className:"form-hint",children:"Jeres kontonummer eller kundenummer hos denne leverandr"})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{htmlFor:"type",children:"Type"}),c.jsxs("select",{id:"type",name:"type",value:r.type,onChange:u,children:[c.jsx("option",{value:"",children:"-- Vlg type --"}),o.map(k=>c.jsx("option",{value:k,children:k},k))]})]})]}),c.jsxs("div",{className:"form-section",children:[c.jsx("h3",{className:"form-section-title",children:"Kontaktoplysninger"}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{htmlFor:"contactPerson",children:"Kontaktperson"}),c.jsx("input",{type:"text",id:"contactPerson",name:"contactPerson",value:r.contactPerson,onChange:u,placeholder:"F.eks. Hans Jensen"})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{htmlFor:"phone",children:"Telefon"}),c.jsx("input",{type:"text",id:"phone",name:"phone",value:r.phone,onChange:g,className:s.phone?"input-error":"",placeholder:"12345678",maxLength:"8"}),s.phone&&c.jsx("span",{className:"error-text",children:s.phone}),c.jsx("small",{className:"form-hint",children:"8 cifre uden mellemrum"})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{htmlFor:"email",children:"Email"}),c.jsx("input",{type:"email",id:"email",name:"email",value:r.email,onChange:u,className:s.email?"input-error":"",placeholder:"kontakt@leverandoer.dk"}),s.email&&c.jsx("span",{className:"error-text",children:s.email})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{htmlFor:"address",children:"Adresse"}),c.jsx("textarea",{id:"address",name:"address",value:r.address,onChange:u,rows:"2",placeholder:`Gadenavn 123
1234 By`})]})]}),c.jsxs("div",{className:"form-section",children:[c.jsx("h3",{className:"form-section-title",children:"Betaling"}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{htmlFor:"preferredPaymentMethod",children:"Foretrukken betalingsmetode"}),c.jsxs("select",{id:"preferredPaymentMethod",name:"preferredPaymentMethod",value:r.preferredPaymentMethod,onChange:u,children:[c.jsx("option",{value:"",children:"-- Vlg betalingsmetode --"}),l.map(k=>c.jsx("option",{value:k,children:k},k))]})]})]}),c.jsxs("div",{className:"form-section",children:[c.jsx("h3",{className:"form-section-title",children:"Noter"}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{htmlFor:"notes",children:"Interne bemrkninger"}),c.jsx("textarea",{id:"notes",name:"notes",value:r.notes,onChange:u,rows:"3",placeholder:"Ekstra noter om leverandren..."})]})]}),c.jsxs("div",{className:"modal-footer",children:[c.jsx("button",{type:"button",className:"btn-secondary",onClick:n,children:"Annuller"}),c.jsx("button",{type:"submit",className:"btn-primary",children:t?"Gem ndringer":"Tilfj leverandr"})]})]})]})})}function o9({material:t,suppliers:e,onSave:n,onClose:r}){const[i,s]=ie.useState({name:"",sku:"",unit:"stk",category:"",defaultSupplierId:"",defaultSupplierName:"",standardMarkup:"50"}),[a,o]=ie.useState({}),l=["stk","m","m","m","kg","liter","pose","rulle","palle"],u=["Tr","Gips","El-materialer","VVS","Maling","Vrktj","Diverse"];ie.useEffect(()=>{t&&s({name:t.name||"",sku:t.sku||"",unit:t.unit||"stk",category:t.category||"",defaultSupplierId:t.defaultSupplierId||"",defaultSupplierName:t.defaultSupplierName||"",standardMarkup:String(t.standardMarkup||50)})},[t]);const d=g=>{const{name:x,value:b}=g.target;s(k=>{const w={...k,[x]:b};if(x==="defaultSupplierId"&&b){const N=e.find(j=>j.id===b);N&&(w.defaultSupplierName=N.name)}else x==="defaultSupplierId"&&!b&&(w.defaultSupplierName="");return w}),a[x]&&o(k=>({...k,[x]:null}))},p=()=>{const g={};(!i.name||i.name.trim().length<2)&&(g.name="Materiale navn er pkrvet (min. 2 tegn)"),i.unit||(g.unit="Enhed er pkrvet"),i.category||(g.category="Kategori er pkrvet");const x=parseFloat(i.standardMarkup);return(isNaN(x)||x<0||x>500)&&(g.standardMarkup="Avance skal vre mellem 0 og 500%"),o(g),Object.keys(g).length===0},m=g=>{if(g.preventDefault(),p()){const x={name:i.name.trim(),sku:i.sku.trim(),unit:i.unit,category:i.category,defaultSupplierId:i.defaultSupplierId||null,defaultSupplierName:i.defaultSupplierName,standardMarkup:parseFloat(i.standardMarkup)};n(x)}};return c.jsx("div",{className:"modal-overlay",children:c.jsxs("div",{className:"modal-content material-modal",onClick:g=>g.stopPropagation(),children:[c.jsxs("div",{className:"modal-header",children:[c.jsx("h2",{children:t?"Redigr Materiale":"Tilfj Materiale"}),c.jsx("button",{className:"modal-close",onClick:r,children:""})]}),c.jsxs("form",{onSubmit:m,className:"modal-form",children:[c.jsxs("div",{className:"form-section",children:[c.jsx("h3",{className:"form-section-title",children:"Grundoplysninger"}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{htmlFor:"name",children:"Materiale navn *"}),c.jsx("input",{type:"text",id:"name",name:"name",value:i.name,onChange:d,className:a.name?"input-error":"",placeholder:"F.eks. Gipsplader 13mm",autoFocus:!0}),a.name&&c.jsx("span",{className:"error-text",children:a.name})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{htmlFor:"sku",children:"Artikelnummer / Varenummer"}),c.jsx("input",{type:"text",id:"sku",name:"sku",value:i.sku,onChange:d,placeholder:"F.eks. GP13-001"}),c.jsx("small",{className:"form-hint",children:"Leverandrens varenummer"})]}),c.jsxs("div",{className:"form-row",children:[c.jsxs("div",{className:"form-group",children:[c.jsx("label",{htmlFor:"unit",children:"Enhed *"}),c.jsx("select",{id:"unit",name:"unit",value:i.unit,onChange:d,className:a.unit?"input-error":"",children:l.map(g=>c.jsx("option",{value:g,children:g},g))}),a.unit&&c.jsx("span",{className:"error-text",children:a.unit})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{htmlFor:"category",children:"Kategori *"}),c.jsxs("select",{id:"category",name:"category",value:i.category,onChange:d,className:a.category?"input-error":"",children:[c.jsx("option",{value:"",children:"-- Vlg --"}),u.map(g=>c.jsx("option",{value:g,children:g},g))]}),a.category&&c.jsx("span",{className:"error-text",children:a.category})]})]})]}),c.jsxs("div",{className:"form-section",children:[c.jsx("h3",{className:"form-section-title",children:"Standard leverandr & prisstning"}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{htmlFor:"defaultSupplierId",children:"Standard leverandr"}),c.jsxs("select",{id:"defaultSupplierId",name:"defaultSupplierId",value:i.defaultSupplierId,onChange:d,children:[c.jsx("option",{value:"",children:"-- Ingen standard --"}),e.map(g=>c.jsx("option",{value:g.id,children:g.name},g.id))]}),c.jsx("small",{className:"form-hint",children:"Vlges automatisk nr du tilfjer dette materiale til en sag"})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{htmlFor:"standardMarkup",children:"Standard avance (%) *"}),c.jsx("input",{type:"text",id:"standardMarkup",name:"standardMarkup",value:i.standardMarkup,onChange:d,className:a.standardMarkup?"input-error":"",placeholder:"F.eks. 50"}),a.standardMarkup&&c.jsx("span",{className:"error-text",children:a.standardMarkup}),c.jsx("small",{className:"form-hint",children:"Bruges til at beregne salgspris automatisk (f.eks. 50% = indkb * 1.5)"})]}),t&&t.lastPurchasePrice&&c.jsxs("div",{className:"info-box",children:[c.jsx("div",{className:"info-box-title",children:"Seneste indkb"}),c.jsxs("div",{className:"info-box-content",children:[c.jsx("strong",{children:"Pris pr. enhed:"})," ",t.lastPurchasePrice.toFixed(2)," kr",c.jsx("br",{}),c.jsx("strong",{children:"Dato:"})," ",new Date(t.lastPurchaseDate).toLocaleDateString("da-DK")]})]})]}),c.jsxs("div",{className:"modal-footer",children:[c.jsx("button",{type:"button",className:"btn-secondary",onClick:r,children:"Annuller"}),c.jsx("button",{type:"submit",className:"btn-primary",children:t?"Gem ndringer":"Tilfj materiale"})]})]})]})})}function l9(){const{showSuccess:t,showError:e,showCriticalConfirm:n}=Gr(),[r,i]=ie.useState("leverandoerer"),[s,a]=ie.useState([]),[o,l]=ie.useState([]),[u,d]=ie.useState([]),[p,m]=ie.useState([]),[g,x]=ie.useState([]),[b,k]=ie.useState([]),[w,N]=ie.useState(!1),[j,O]=ie.useState(!1),[Q,B]=ie.useState(!1),[P,y]=ie.useState(null),[S,L]=ie.useState(null),[A,T]=ie.useState(""),[I,M]=ie.useState("all"),[ne,V]=ie.useState(""),[U,K]=ie.useState("all"),[H,te]=ie.useState(""),[me,R]=ie.useState("all"),[$,J]=ie.useState("all"),[W,ae]=ie.useState(!1),[le,ue]=ie.useState(!1),[de,ke]=ie.useState(!1);ie.useEffect(()=>{r==="leverandoerer"?Ie():r==="katalog"?(De(),Ie()):r==="indkoeb"&&(Le(),Ie())},[r]),ie.useEffect(()=>{Xe()},[s,A,I]),ie.useEffect(()=>{be()},[o,ne,U]),ie.useEffect(()=>{oe()},[u,H,me,$]);const Ie=async()=>{N(!0);try{const _e=await qN();_e.success&&a(_e.suppliers)}catch(_e){console.error("Error loading suppliers:",_e)}finally{N(!1)}},De=async()=>{N(!0);try{const _e=await zN();_e.success&&l(_e.materials)}catch(_e){console.error("Error loading materials:",_e)}finally{N(!1)}},Le=async()=>{N(!0);try{const _e=await LF();_e.success&&d(_e.purchases)}catch(_e){console.error("Error loading purchases:",_e)}finally{N(!1)}},Xe=()=>{let _e=[...s];if(A.trim()){const He=A.toLowerCase();_e=_e.filter(mt=>{var ft,Tt,Vn,xt,vr;return((ft=mt.name)==null?void 0:ft.toLowerCase().includes(He))||((Tt=mt.contactPerson)==null?void 0:Tt.toLowerCase().includes(He))||((Vn=mt.phone)==null?void 0:Vn.toLowerCase().includes(He))||((xt=mt.email)==null?void 0:xt.toLowerCase().includes(He))||((vr=mt.cvr)==null?void 0:vr.toLowerCase().includes(He))})}I!=="all"&&(_e=_e.filter(He=>He.type===I)),m(_e)},be=()=>{let _e=[...o];if(ne.trim()){const He=ne.toLowerCase();_e=_e.filter(mt=>{var ft,Tt;return((ft=mt.name)==null?void 0:ft.toLowerCase().includes(He))||((Tt=mt.sku)==null?void 0:Tt.toLowerCase().includes(He))})}U!=="all"&&(_e=_e.filter(He=>He.category===U)),x(_e)},oe=()=>{let _e=[...u];if(H.trim()){const He=H.toLowerCase();_e=_e.filter(mt=>{var ft,Tt,Vn,xt;return((ft=mt.materialName)==null?void 0:ft.toLowerCase().includes(He))||((Tt=mt.supplierName)==null?void 0:Tt.toLowerCase().includes(He))||((Vn=mt.caseName)==null?void 0:Vn.toLowerCase().includes(He))||((xt=mt.caseNumber)==null?void 0:xt.toLowerCase().includes(He))})}me!=="all"&&(_e=_e.filter(He=>He.supplierId===me)),$!=="all"&&(_e=_e.filter(He=>He.category===$)),k(_e)},We=()=>{const _e=b.reduce((ft,Tt)=>ft+(Tt.purchasePrice||0),0),He=b.reduce((ft,Tt)=>ft+(Tt.sellingPrice||0),0),mt=He-_e;return{totalPurchaseCost:_e,totalSellingPrice:He,totalMargin:mt}},Fe=_e=>`${_e.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,".")} kr`,he=()=>{y(null),O(!0)},Ee=_e=>{y(_e),O(!0)},Me=async _e=>{if(await n({title:"Slet leverandr?",message:"Dette vil permanent slette leverandren.",itemName:_e.name,warningText:null,confirmText:"Slet Permanent",cancelText:"Annuller"}))try{(await TF(_e.id)).success?(t("Leverandr slettet!"),await Ie()):e("Der opstod en fejl ved sletning af leverandr.")}catch(mt){console.error("Error deleting supplier:",mt),e("Der opstod en fejl ved sletning af leverandr.")}},Ke=async _e=>{try{P?(await kF(P.id,_e)).success?(O(!1),t("Leverandr opdateret!"),await Ie()):e("Der opstod en fejl ved opdatering af leverandr."):(await EF(_e)).success?(O(!1),t("Leverandr oprettet!"),await Ie()):e("Der opstod en fejl ved tilfjelse af leverandr.")}catch(He){console.error("Error saving supplier:",He),e("Der opstod en fejl ved gemning af leverandr.")}},$e=()=>{L(null),B(!0)},Ge=_e=>{L(_e),B(!0)},at=async _e=>{if(await n({title:"Slet materiale?",message:"Dette vil permanent slette materialet fra kataloget.",itemName:_e.name,warningText:_e.lastPurchaseDate?"Dette materiale har historiske indkb knyttet til sig":null,confirmText:"Slet Permanent",cancelText:"Annuller"}))try{(await CF(_e.id)).success?(t("Materiale slettet!"),await De()):e("Der opstod en fejl ved sletning af materiale.")}catch(mt){console.error("Error deleting material:",mt),e("Der opstod en fejl ved sletning af materiale.")}},tt=async _e=>{try{S?(await $N(S.id,_e)).success?(B(!1),t("Materiale opdateret!"),await De()):e("Der opstod en fejl ved opdatering af materiale."):(await IF(_e)).success?(B(!1),t("Materiale oprettet!"),await De()):e("Der opstod en fejl ved tilfjelse af materiale.")}catch(He){console.error("Error saving material:",He),e("Der opstod en fejl ved gemning af materiale.")}},ut=async _e=>{if(await n({title:"Slet indkb?",message:"Dette vil permanent slette indkbet.",itemName:_e.materialName,warningText:`Fra sag: ${_e.caseName||"Ukendt sag"}`,confirmText:"Slet Permanent",cancelText:"Annuller"}))try{(await HN(_e.id)).success?(t("Indkb slettet!"),await Le()):e("Der opstod en fejl ved sletning af indkb.")}catch(mt){console.error("Error deleting purchase:",mt),e("Der opstod en fejl ved sletning af indkb.")}},dt=()=>{const _e=new Set;return o.forEach(He=>He.category&&_e.add(He.category)),Array.from(_e).sort()},{totalPurchaseCost:ot,totalSellingPrice:ct,totalMargin:ze}=We();return c.jsxs("div",{children:[c.jsxs("div",{className:"welcome-section",children:[c.jsx("h1",{children:"Hej! Her er dine materialer"}),c.jsx("p",{className:"helper-text",children:"Administrer leverandrer, materialer og hold styr p alle indkb"}),c.jsx("img",{src:"/planks.png",alt:"",className:"page-header-clipart clipart-materialer","aria-hidden":"true"})]}),c.jsxs("div",{className:"sag-tabs-colorful material-tabs",children:[c.jsxs("button",{className:`sag-tab-colorful tab-blue ${r==="leverandoerer"?"active":""}`,onClick:()=>i("leverandoerer"),children:[c.jsx("span",{className:"tab-icon",children:""}),c.jsx("span",{className:"tab-text",children:"Leverandrer"})]}),c.jsxs("button",{className:`sag-tab-colorful tab-green ${r==="katalog"?"active":""}`,onClick:()=>i("katalog"),children:[c.jsx("span",{className:"tab-icon",children:""}),c.jsx("span",{className:"tab-text",children:"Materiale Katalog"})]}),c.jsxs("button",{className:`sag-tab-colorful tab-orange ${r==="indkoeb"?"active":""}`,onClick:()=>i("indkoeb"),children:[c.jsx("span",{className:"tab-icon",children:""}),c.jsx("span",{className:"tab-text",children:"Alle Indkb"})]})]}),c.jsxs("div",{className:"tab-content-area",children:[r==="leverandoerer"&&c.jsxs("div",{className:"tab-section",children:[c.jsxs("div",{className:"tab-header-section",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"tab-title",children:"Dine leverandrer"}),c.jsx("p",{className:"tab-subtitle",children:"Hold styr p kontaktinfo og leverandrdetaljer"})]}),c.jsxs("button",{className:"btn-add-friendly btn-blue",onClick:he,children:[c.jsx("span",{className:"btn-icon-large",children:"+"})," Ny leverandr"]})]}),c.jsxs("div",{className:"search-section",children:[c.jsxs("div",{className:"search-box-large",children:[c.jsx("span",{className:"search-icon",children:""}),c.jsx("input",{type:"text",placeholder:"Sg efter navn, kontakt, telefon, email eller CVR...",value:A,onChange:_e=>T(_e.target.value),className:"search-input-large"})]}),c.jsxs("button",{className:`btn-filter-toggle ${W?"active":""}`,onClick:()=>ae(!W),children:["Filtre ",W?"":""]})]}),W&&c.jsx("div",{className:"filter-panel",children:c.jsxs("div",{className:"filter-group",children:[c.jsx("label",{children:"Type"}),c.jsxs("select",{value:I,onChange:_e=>M(_e.target.value),className:"filter-select-friendly",children:[c.jsx("option",{value:"all",children:"Alle typer"}),c.jsx("option",{value:"Byggemarked",children:"Byggemarked"}),c.jsx("option",{value:"Grossist",children:"Grossist"}),c.jsx("option",{value:"Specialforhandler",children:"Specialforhandler"}),c.jsx("option",{value:"Andet",children:"Andet"})]})]})}),c.jsx("div",{className:"content-table-wrapper",children:w?c.jsxs("div",{className:"empty-state-friendly",children:[c.jsx("div",{className:"empty-icon",children:""}),c.jsx("h3",{children:"Henter leverandrer..."})]}):p.length===0?c.jsxs("div",{className:"empty-state-friendly",children:[c.jsx("div",{className:"empty-icon",children:""}),c.jsxs("h3",{children:["Ingen leverandrer ",A||I!=="all"?"matcher din sgning":"endnu"]}),c.jsx("p",{children:A||I!=="all"?"Prv en anden sgning":'Klik p "Ny leverandr" for at komme i gang'})]}):c.jsxs("table",{className:"friendly-table",children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{children:"Navn"}),c.jsx("th",{children:"Type"}),c.jsx("th",{children:"Kontaktperson"}),c.jsx("th",{children:"Telefon"}),c.jsx("th",{children:"Email"}),c.jsx("th",{children:"CVR"}),c.jsx("th",{})]})}),c.jsx("tbody",{children:p.map(_e=>c.jsxs("tr",{children:[c.jsx("td",{className:"supplier-name-cell",children:c.jsx("strong",{children:_e.name})}),c.jsx("td",{children:c.jsx("span",{className:"badge-neutral",children:_e.type||"-"})}),c.jsx("td",{children:_e.contactPerson||"-"}),c.jsx("td",{children:_e.phone||"-"}),c.jsx("td",{children:_e.email||"-"}),c.jsx("td",{children:_e.cvr||"-"}),c.jsxs("td",{className:"actions-cell",children:[c.jsx("button",{className:"btn-icon-friendly btn-edit",onClick:()=>Ee(_e),title:"Ret",children:""}),c.jsx("button",{className:"btn-icon-friendly btn-delete",onClick:()=>Me(_e),title:"Slet",children:""})]})]},_e.id))})]})})]}),r==="katalog"&&c.jsxs("div",{className:"tab-section",children:[c.jsxs("div",{className:"tab-header-section",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"tab-title",children:"Materiale katalog"}),c.jsx("p",{className:"tab-subtitle",children:"Opret genbrugelige materialer med standardpriser"})]}),c.jsxs("button",{className:"btn-add-friendly btn-green",onClick:$e,children:[c.jsx("span",{className:"btn-icon-large",children:"+"})," Nyt materiale"]})]}),c.jsxs("div",{className:"search-section",children:[c.jsxs("div",{className:"search-box-large",children:[c.jsx("span",{className:"search-icon",children:""}),c.jsx("input",{type:"text",placeholder:"Sg efter materiale navn eller varenummer...",value:ne,onChange:_e=>V(_e.target.value),className:"search-input-large"})]}),c.jsxs("button",{className:`btn-filter-toggle ${le?"active":""}`,onClick:()=>ue(!le),children:["Filtre ",le?"":""]})]}),le&&c.jsx("div",{className:"filter-panel",children:c.jsxs("div",{className:"filter-group",children:[c.jsx("label",{children:"Kategori"}),c.jsxs("select",{value:U,onChange:_e=>K(_e.target.value),className:"filter-select-friendly",children:[c.jsx("option",{value:"all",children:"Alle kategorier"}),dt().map(_e=>c.jsx("option",{value:_e,children:_e},_e))]})]})}),c.jsx("div",{className:"content-table-wrapper",children:w?c.jsxs("div",{className:"empty-state-friendly",children:[c.jsx("div",{className:"empty-icon",children:""}),c.jsx("h3",{children:"Henter materialer..."})]}):g.length===0?c.jsxs("div",{className:"empty-state-friendly",children:[c.jsx("div",{className:"empty-icon",children:""}),c.jsxs("h3",{children:["Ingen materialer ",ne||U!=="all"?"matcher din sgning":"endnu"]}),c.jsx("p",{children:ne||U!=="all"?"Prv en anden sgning":'Klik p "Nyt materiale" for at tilfje til kataloget'})]}):c.jsxs("table",{className:"friendly-table",children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{children:"Materiale"}),c.jsx("th",{children:"Varenr."}),c.jsx("th",{children:"Kategori"}),c.jsx("th",{children:"Enhed"}),c.jsx("th",{children:"Standard avance"}),c.jsx("th",{children:"Seneste pris"}),c.jsx("th",{})]})}),c.jsx("tbody",{children:g.map(_e=>c.jsxs("tr",{children:[c.jsx("td",{className:"material-name-cell",children:c.jsx("strong",{children:_e.name})}),c.jsx("td",{children:_e.sku||"-"}),c.jsx("td",{children:c.jsx("span",{className:"badge-neutral",children:_e.category})}),c.jsx("td",{children:_e.unit}),c.jsxs("td",{children:[_e.standardMarkup,"%"]}),c.jsx("td",{children:_e.lastPurchasePrice?c.jsxs(c.Fragment,{children:[Fe(_e.lastPurchasePrice),_e.lastPurchaseDate&&c.jsx("div",{style:{fontSize:"11px",color:"#7f8c8d"},children:new Date(_e.lastPurchaseDate).toLocaleDateString("da-DK")})]}):"-"}),c.jsxs("td",{className:"actions-cell",children:[c.jsx("button",{className:"btn-icon-friendly btn-edit",onClick:()=>Ge(_e),title:"Ret",children:""}),c.jsx("button",{className:"btn-icon-friendly btn-delete",onClick:()=>at(_e),title:"Slet",children:""})]})]},_e.id))})]})})]}),r==="indkoeb"&&c.jsxs("div",{className:"tab-section",children:[c.jsx("div",{className:"tab-header-section",children:c.jsxs("div",{children:[c.jsx("h2",{className:"tab-title",children:"Alle indkb"}),c.jsx("p",{className:"tab-subtitle",children:"Oversigt over alle materialeindkb p tvrs af sager"})]})}),c.jsxs("div",{className:"tab-summary-boxes",children:[c.jsxs("div",{className:"summary-box box-blue",children:[c.jsx("div",{className:"summary-icon",children:""}),c.jsxs("div",{className:"summary-content",children:[c.jsx("div",{className:"summary-value",children:Fe(ot)}),c.jsx("div",{className:"summary-label",children:"Indkbt for"})]})]}),c.jsxs("div",{className:"summary-box box-orange",children:[c.jsx("div",{className:"summary-icon",children:""}),c.jsxs("div",{className:"summary-content",children:[c.jsx("div",{className:"summary-value",children:Fe(ct)}),c.jsx("div",{className:"summary-label",children:"Slges for"})]})]}),c.jsxs("div",{className:`summary-box ${ze>=0?"box-green":"box-red"}`,children:[c.jsx("div",{className:"summary-icon",children:ze>=0?"":""}),c.jsxs("div",{className:"summary-content",children:[c.jsx("div",{className:"summary-value",children:Fe(ze)}),c.jsx("div",{className:"summary-label",children:"Total avance"})]})]})]}),c.jsxs("div",{className:"search-section",children:[c.jsxs("div",{className:"search-box-large",children:[c.jsx("span",{className:"search-icon",children:""}),c.jsx("input",{type:"text",placeholder:"Sg efter materiale, leverandr, sag...",value:H,onChange:_e=>te(_e.target.value),className:"search-input-large"})]}),c.jsxs("button",{className:`btn-filter-toggle ${de?"active":""}`,onClick:()=>ke(!de),children:["Filtre ",de?"":""]})]}),de&&c.jsxs("div",{className:"filter-panel",children:[c.jsxs("div",{className:"filter-group",children:[c.jsx("label",{children:"Leverandr"}),c.jsxs("select",{value:me,onChange:_e=>R(_e.target.value),className:"filter-select-friendly",children:[c.jsx("option",{value:"all",children:"Alle leverandrer"}),s.map(_e=>c.jsx("option",{value:_e.id,children:_e.name},_e.id))]})]}),c.jsxs("div",{className:"filter-group",children:[c.jsx("label",{children:"Kategori"}),c.jsxs("select",{value:$,onChange:_e=>J(_e.target.value),className:"filter-select-friendly",children:[c.jsx("option",{value:"all",children:"Alle kategorier"}),dt().map(_e=>c.jsx("option",{value:_e,children:_e},_e))]})]})]}),c.jsx("div",{className:"content-table-wrapper",children:w?c.jsxs("div",{className:"empty-state-friendly",children:[c.jsx("div",{className:"empty-icon",children:""}),c.jsx("h3",{children:"Henter indkb..."})]}):b.length===0?c.jsxs("div",{className:"empty-state-friendly",children:[c.jsx("div",{className:"empty-icon",children:""}),c.jsxs("h3",{children:["Ingen indkb ",H||me!=="all"||$!=="all"?"matcher din sgning":"endnu"]}),c.jsx("p",{children:H||me!=="all"||$!=="all"?"Prv en anden sgning":"Indkb vises her nr du tilfjer materialer til sager"})]}):c.jsxs("table",{className:"friendly-table",children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{children:"Dato"}),c.jsx("th",{children:"Materiale"}),c.jsx("th",{children:"Sag"}),c.jsx("th",{children:"Leverandr"}),c.jsx("th",{children:"Antal"}),c.jsx("th",{children:"Indkbspris"}),c.jsx("th",{children:"Salgspris"}),c.jsx("th",{children:"Avance"}),c.jsx("th",{})]})}),c.jsx("tbody",{children:b.map(_e=>c.jsxs("tr",{children:[c.jsx("td",{children:new Date(_e.date).toLocaleDateString("da-DK")}),c.jsxs("td",{className:"material-name-cell",children:[c.jsx("strong",{children:_e.materialName}),_e.sku&&c.jsx("div",{style:{fontSize:"11px",color:"#7f8c8d"},children:_e.sku})]}),c.jsxs("td",{children:[c.jsx("div",{children:_e.caseName||"Ukendt"}),c.jsx("div",{style:{fontSize:"11px",color:"#7f8c8d"},children:_e.caseNumber})]}),c.jsx("td",{children:_e.supplierName||"-"}),c.jsxs("td",{children:[_e.quantity," ",_e.unit]}),c.jsx("td",{children:Fe(_e.purchasePrice)}),c.jsx("td",{children:Fe(_e.sellingPrice)}),c.jsxs("td",{className:"margin-cell",style:{color:(_e.marginKr||0)>=0?"#27ae60":"#e74c3c"},children:[c.jsx("div",{children:Fe(_e.marginKr||0)}),c.jsxs("div",{style:{fontSize:"11px"},children:["(",(_e.marginPercent||0).toFixed(1),"%)"]})]}),c.jsx("td",{className:"actions-cell",children:c.jsx("button",{className:"btn-icon-friendly btn-delete",onClick:()=>ut(_e),title:"Slet",children:""})})]},_e.id))})]})})]})]}),j&&c.jsx(a9,{supplier:P,onClose:()=>O(!1),onSave:Ke}),Q&&c.jsx(o9,{material:S,suppliers:s,onClose:()=>B(!1),onSave:tt})]})}const c9=["Januar","Februar","Marts","April","Maj","Juni","Juli","August","September","Oktober","November","December"],u9=["Man","Tir","Ons","Tor","Fre","Lr","Sn"];function hv(t){const e=new Date(t),n=String(e.getDate()).padStart(2,"0"),r=String(e.getMonth()+1).padStart(2,"0"),i=e.getFullYear();return`${n}/${r}/${i}`}function Kl(t){const[e,n,r]=t.split("/");return new Date(r,n-1,e)}function h9(t,e){const n=new Date(t,e,1).getDay();return n===0?6:n-1}function dv(t,e){return new Date(t,e+1,0).getDate()}function d9(t,e,n){const r=new Date;return r.getFullYear()===t&&r.getMonth()===e&&r.getDate()===n}function tb(t){return t?t.substring(0,5):""}const T1=["#5B8DBE","#7A9D54","#CD7672","#8B7FB8","#CC8E5E","#5B9D9D","#9D6B8B","#7B8D5B","#8B6B5B","#6B7B9D","#9D7B5B","#6B9D7B"];function aA(t){if(!t)return T1[0];let e=0;for(let r=0;r<t.length;r++)e=t.charCodeAt(r)+((e<<5)-e);const n=Math.abs(e)%T1.length;return T1[n]}function nb(t,e=.2){const n=t.replace("#",""),r=parseInt(n.substring(0,2),16),i=parseInt(n.substring(2,4),16),s=parseInt(n.substring(4,6),16);return`rgba(${r}, ${i}, ${s}, ${e})`}async function f9(t){try{return{success:!0,id:(await Xs(fn(vt,"calendar_events"),{...t,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})).id}}catch(e){return console.error("Error creating calendar event:",e),{success:!1,error:e}}}async function p9(t,e){try{return await Gs(an(vt,"calendar_events",t),{...e,updatedAt:new Date().toISOString()}),{success:!0}}catch(n){return console.error("Error updating calendar event:",n),{success:!1,error:n}}}async function m9(t){try{return await Js(an(vt,"calendar_events",t)),{success:!0}}catch(e){return console.error("Error deleting calendar event:",e),{success:!1,error:e}}}async function g9(t,e){try{const n=`01/${String(e+1).padStart(2,"0")}/${t}`,r=`${dv(t,e)}/${String(e+1).padStart(2,"0")}/${t}`,i=await $r(fn(vt,"calendar_events")),s=[];return i.forEach(a=>{const o=a.data(),l=Kl(o.date),u=Kl(n),d=Kl(r);l>=u&&l<=d&&s.push({id:a.id,...o})}),{success:!0,events:s}}catch(n){return console.error("Error loading month events:",n),{success:!1,error:n,events:[]}}}function rb(t,e){return t.filter(n=>n.date===e)}async function v9(t,e,n){try{const r=[],i=new Date(e,n,1),s=new Date(e,n+1,0);for(const a of t){const o=await py(a.id);o.success&&o.absences&&o.absences.filter(u=>{const d=Kl(u.date);return d>=i&&d<=s}).forEach(u=>{r.push({...u,employeeName:a.name,employeeId:a.id,type:"absence"})})}return{success:!0,absences:r}}catch(r){return console.error("Error loading month absences:",r),{success:!1,error:r,absences:[]}}}function ib(t,e){return t.filter(n=>{if(n.type==="extended"&&n.endDate){const r=Kl(n.date),i=Kl(n.endDate),s=Kl(e);return s>=r&&s<=i}return n.date===e})}function y9(t,e){const n=e.map(r=>({id:`absence-${r.id}`,title:`${r.employeeName} - ${r.absenceReason}`,date:r.date,type:"absence",employeeId:r.employeeId,employeeName:r.employeeName,absenceReason:r.absenceReason,isAbsence:!0,originalData:r}));return[...t,...n]}function w9({isOpen:t,onClose:e,onSave:n,editEvent:r=null,selectedDate:i=null,employees:s=[],projects:a=[]}){const{showWarning:o}=Gr(),[l,u]=ie.useState(""),[d,p]=ie.useState(""),[m,g]=ie.useState(""),[x,b]=ie.useState(""),[k,w]=ie.useState([]),[N,j]=ie.useState(""),[O,Q]=ie.useState(""),[B,P]=ie.useState("work"),[y,S]=ie.useState(!1);ie.useEffect(()=>{if(r){if(u(r.title||""),r.date){const[I,M,ne]=r.date.split("/");p(`${ne}-${M}-${I}`)}g(r.startTime||""),b(r.endTime||""),w(r.employeeIds||[]),j(r.sagsnummer||""),Q(r.description||""),P(r.eventType||"work")}else if(i){const[I,M,ne]=i.split("/");p(`${ne}-${M}-${I}`),u(""),g(""),b(""),w([]),j(""),Q(""),P("work")}else u(""),p(""),g(""),b(""),w([]),j(""),Q(""),P("work")},[r,i,t]);const L=I=>{k.includes(I)?w(k.filter(M=>M!==I)):w([...k,I])},A=async I=>{if(I.preventDefault(),!l.trim()){o("Indtast venligst en titel.");return}if(!d){o("Vlg venligst en dato.");return}if(k.length===0){o("Vlg mindst n medarbejder.");return}S(!0);try{const M=new Date(d),ne=hv(M),V={title:l.trim(),date:ne,startTime:m||null,endTime:x||null,employeeIds:k,employeeNames:k.map(U=>{const K=s.find(H=>H.id===U);return K?K.name:""}),sagsnummer:N||null,description:O.trim()||null,eventType:B};await n(V),e()}catch(M){console.error("Error saving event:",M)}finally{S(!1)}},T=I=>{const M=[];return I.sagsnummer&&M.push(`#${I.sagsnummer}`),I.customerName&&M.push(I.customerName),I.address&&M.push(I.address),M.join(" - ")||`Sag #${I.sagsnummer}`};return t?c.jsx("div",{className:"modal-overlay",onClick:e,children:c.jsxs("div",{className:"modal-content calendar-event-modal",onClick:I=>I.stopPropagation(),children:[c.jsxs("div",{className:"modal-header",children:[c.jsx("h2",{children:r?"Redigr begivenhed":"Opret ny begivenhed"}),c.jsx("button",{className:"modal-close",onClick:e,children:""})]}),c.jsxs("form",{onSubmit:A,children:[c.jsxs("div",{className:"modal-body",children:[c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Titel *"}),c.jsx("input",{type:"text",value:l,onChange:I=>u(I.target.value),placeholder:"F.eks. Badevrelse renovering",required:!0})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Type"}),c.jsxs("select",{value:B,onChange:I=>P(I.target.value),children:[c.jsx("option",{value:"work",children:"Arbejde"}),c.jsx("option",{value:"meeting",children:"Mde"}),c.jsx("option",{value:"call",children:"Telefonmde"}),c.jsx("option",{value:"other",children:"Andet"})]})]}),c.jsxs("div",{className:"form-row",children:[c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Dato *"}),c.jsx("input",{type:"date",value:d,onChange:I=>p(I.target.value),required:!0})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Start tid (valgfri)"}),c.jsx("input",{type:"time",value:m,onChange:I=>g(I.target.value)})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Slut tid (valgfri)"}),c.jsx("input",{type:"time",value:x,onChange:I=>b(I.target.value)})]})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Medarbejdere *"}),c.jsxs("div",{className:"employee-checkbox-list",children:[s.map(I=>c.jsxs("label",{className:"employee-checkbox-item",children:[c.jsx("input",{type:"checkbox",checked:k.includes(I.id),onChange:()=>L(I.id)}),c.jsx("span",{children:I.name})]},I.id)),s.length===0&&c.jsx("p",{className:"no-data-text",children:"Ingen medarbejdere tilgngelige"})]})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Tilknyttet sag (valgfri)"}),c.jsxs("select",{value:N,onChange:I=>j(I.target.value),children:[c.jsx("option",{value:"",children:"-- Ingen sag --"}),a.filter(I=>I.status!=="completed").map(I=>c.jsx("option",{value:I.sagsnummer,children:T(I)},I.id))]})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Beskrivelse (valgfri)"}),c.jsx("textarea",{value:O,onChange:I=>Q(I.target.value),placeholder:"Tilfj detaljer om begivenheden...",rows:"3"})]})]}),c.jsxs("div",{className:"modal-footer",children:[c.jsx("button",{type:"button",className:"btn-secondary",onClick:e,disabled:y,children:"Annuller"}),c.jsx("button",{type:"submit",className:"btn-primary",disabled:y,children:y?"Gemmer...":r?"Gem ndringer":"Opret begivenhed"})]})]})]})}):null}function _9({isOpen:t,onClose:e,selectedDate:n,events:r,absences:i,onEditEvent:s,onDeleteEvent:a}){if(!t)return null;const o=[];r.forEach(u=>{o.push({...u,isAbsence:!1})}),i.forEach(u=>{o.push({...u,title:`${u.employeeName} - ${u.absenceReason}`,isAbsence:!0,originalData:u})});const l=u=>{switch(u){case"work":return"Arbejde";case"meeting":return"Mde";case"call":return"Telefonmde";case"other":return"Andet";default:return"Arbejde"}};return c.jsx("div",{className:"modal-overlay",onClick:e,children:c.jsxs("div",{className:"modal-content event-details-modal-popup",onClick:u=>u.stopPropagation(),children:[c.jsxs("div",{className:"modal-header",children:[c.jsxs("h2",{children:[" Begivenheder for ",n]}),c.jsx("button",{className:"modal-close",onClick:e,children:""})]}),c.jsx("div",{className:"modal-body",children:o.length===0?c.jsx("div",{className:"no-data-text",children:c.jsx("p",{children:"Ingen begivenheder denne dag"})}):c.jsx("div",{className:"event-details-list-modal",children:o.map((u,d)=>{var p;if(u.isAbsence){const m="#f57c00";return c.jsxs("div",{className:"event-detail-item-modal absence-item",style:{borderLeftColor:m},children:[c.jsxs("div",{className:"event-item-header-modal",children:[c.jsx("span",{className:"event-badge-modal",style:{backgroundColor:nb(m,.3),color:m},children:"Fravr"}),c.jsx("div",{className:"event-item-title-modal",children:u.title})]}),u.originalData.hoursWorked&&c.jsxs("div",{className:"event-item-meta-modal",children:[" Arbejdede ",u.originalData.hoursWorked," timer"]}),u.originalData.comment&&c.jsxs("div",{className:"event-item-description-modal",children:[" ",u.originalData.comment]}),c.jsx("div",{className:"event-item-footer-modal",children:c.jsx("span",{className:"event-footer-note",children:"Fravr kan redigeres i Timeregistrering"})})]},d)}else{const m=u.employeeIds&&u.employeeIds.length>0?aA(u.employeeIds[0]):"#7f8c8d";return c.jsxs("div",{className:"event-detail-item-modal",style:{borderLeftColor:m},children:[c.jsxs("div",{className:"event-item-header-modal",children:[c.jsx("span",{className:"event-badge-modal",style:{backgroundColor:nb(m,.3),color:m},children:l(u.eventType)}),c.jsx("div",{className:"event-item-title-modal",children:u.title})]}),(u.startTime||u.endTime)&&c.jsxs("div",{className:"event-item-time-modal",children:[" ",tb(u.startTime)," ",u.endTime&&`- ${tb(u.endTime)}`]}),c.jsxs("div",{className:"event-item-employees-modal",children:[" ",(p=u.employeeNames)==null?void 0:p.join(", ")]}),u.sagsnummer&&c.jsxs("div",{className:"event-item-meta-modal",children:[" Sag #",u.sagsnummer]}),u.description&&c.jsxs("div",{className:"event-item-description-modal",children:[" ",u.description]}),c.jsxs("div",{className:"event-item-actions-modal",children:[c.jsx("button",{className:"btn-small btn-secondary",onClick:()=>{s(u),e()},children:" Redigr"}),c.jsx("button",{className:"btn-small btn-danger",onClick:()=>{a(u),e()},children:" Slet"})]})]},d)}})})}),c.jsx("div",{className:"modal-footer",children:c.jsx("button",{className:"btn-secondary",onClick:e,children:"Luk"})})]})})}function b9(){const{showSuccess:t,showError:e,showConfirm:n}=Gr(),[r,i]=ie.useState(new Date().getFullYear()),[s,a]=ie.useState(new Date().getMonth()),[o,l]=ie.useState([]),[u,d]=ie.useState([]),[p,m]=ie.useState([]),[g,x]=ie.useState([]),[b,k]=ie.useState(!1),[w,N]=ie.useState(!1),[j,O]=ie.useState(!1),[Q,B]=ie.useState(null),[P,y]=ie.useState([]),[S,L]=ie.useState([]),[A,T]=ie.useState(null);ie.useEffect(()=>{I()},[r,s]),ie.useEffect(()=>{V(),U()},[]);const I=async()=>{k(!0),await Promise.all([M(),ne()]),k(!1)},M=async()=>{const le=await g9(r,s);le.success?l(le.events):e("Fejl ved indlsning af begivenheder.")},ne=async()=>{if(p.length===0)return;const le=await v9(p,r,s);le.success?d(le.absences):console.error("Error loading absences")},V=async()=>{try{const le=await $r(fn(vt,"employees")),ue=[];le.forEach(de=>{ue.push({id:de.id,...de.data()})}),m(ue)}catch(le){console.error("Error loading employees:",le)}},U=async()=>{try{const le=await $r(fn(vt,"projects")),ue=[];le.forEach(de=>{ue.push({id:de.id,...de.data()})}),x(ue)}catch(le){console.error("Error loading projects:",le)}};ie.useEffect(()=>{p.length>0&&ne()},[p]);const K=()=>{s===0?(a(11),i(r-1)):a(s-1)},H=()=>{s===11?(a(0),i(r+1)):a(s+1)},te=()=>{const le=new Date;i(le.getFullYear()),a(le.getMonth())},me=le=>{const ue=hv(new Date(r,s,le));B(ue);const de=rb(o,ue),ke=ib(u,ue);de.length>0||ke.length>0?(y(de),L(ke),O(!0)):(T(null),N(!0))},R=()=>{B(null),T(null),N(!0)},$=le=>{T(le),N(!0)},J=async le=>{A?(await p9(A.id,le)).success?(t("Begivenhed opdateret!"),M()):e("Fejl ved opdatering af begivenhed."):(await f9(le)).success?(t("Begivenhed oprettet!"),M()):e("Fejl ved oprettelse af begivenhed.")},W=async le=>{if(!await n({title:"Slet begivenhed",message:"Er du sikker p at du vil slette denne begivenhed?",confirmText:"Slet",cancelText:"Annuller"}))return;(await m9(le.id)).success?(t("Begivenhed slettet!"),M(),O(!1)):e("Fejl ved sletning af begivenhed.")},ae=()=>{const le=h9(r,s),ue=dv(r,s),de=[],ke=dv(s===0?r-1:r,s===0?11:s-1);for(let Le=le-1;Le>=0;Le--){const Xe=ke-Le;de.push(c.jsx("div",{className:"calendar-day empty",children:c.jsx("div",{className:"calendar-day-number",children:Xe})},`prev-${Xe}`))}for(let Le=1;Le<=ue;Le++){const Xe=hv(new Date(r,s,Le)),be=rb(o,Xe),oe=ib(u,Xe),We=y9(be,oe),Fe=We.length>0,he=d9(r,s,Le);de.push(c.jsxs("div",{className:`calendar-day ${Fe?"has-events":""} ${he?"today":""}`,onClick:()=>me(Le),children:[c.jsx("div",{className:"calendar-day-number",children:Le}),Fe&&c.jsxs("div",{className:"calendar-day-indicators",children:[We.slice(0,3).map((Ee,Me)=>{var Ge;const Ke=Ee.isAbsence?"#f57c00":aA(((Ge=Ee.employeeIds)==null?void 0:Ge[0])||Ee.employeeId),$e=Ee.sagsnummer?`${Ee.sagsnummer} - ${Ee.title}`:Ee.title;return c.jsx("div",{className:"calendar-event-bar",style:{backgroundColor:Ke},title:$e,children:$e},Me)}),We.length>3&&c.jsxs("div",{className:"calendar-more-indicator",children:["+",We.length-3," mere"]})]})]},Le))}const Ie=de.length,De=Ie%7===0?0:7-Ie%7;for(let Le=1;Le<=De;Le++)de.push(c.jsx("div",{className:"calendar-day empty",children:c.jsx("div",{className:"calendar-day-number",children:Le})},`next-${Le}`));return de};return c.jsxs("div",{children:[c.jsx("div",{className:"page-header-friendly",children:c.jsxs("div",{className:"welcome-section",children:[c.jsx("h1",{children:" Kalender"}),c.jsx("p",{className:"welcome-subtitle",children:"Plan og oversigt over arbejde og fravr"})]})}),c.jsxs("div",{className:"content-card",children:[c.jsxs("div",{className:"calendar-header-controls",children:[c.jsx("button",{className:"btn-secondary",onClick:K,children:" Forrige"}),c.jsx("div",{className:"calendar-title",children:c.jsxs("h2",{children:[c9[s]," ",r]})}),c.jsx("button",{className:"btn-secondary",onClick:H,children:"Nste "})]}),c.jsxs("div",{className:"calendar-quick-actions",children:[c.jsx("button",{className:"btn-secondary btn-small",onClick:te,children:"I dag"}),c.jsx("button",{className:"btn-primary",onClick:R,children:"+ Opret begivenhed"})]}),b?c.jsx("div",{className:"loading-container",children:c.jsx("p",{children:"Indlser kalender..."})}):c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"calendar-weekdays",children:u9.map(le=>c.jsx("div",{className:"calendar-weekday",children:le},le))}),c.jsx("div",{className:"calendar-grid",children:ae()})]})]}),w&&c.jsx(w9,{isOpen:w,onClose:()=>N(!1),onSave:J,editEvent:A,selectedDate:Q,employees:p,projects:g}),j&&c.jsx(_9,{isOpen:j,onClose:()=>O(!1),selectedDate:Q,events:P,absences:S,onEditEvent:$,onDeleteEvent:W})]})}function x9(){const t=Uu(),e=async()=>{try{await cP(cy),t("/login")}catch(n){console.error("Error logging out:",n),alert("Der opstod en fejl ved logud.")}};return c.jsxs("div",{className:"app-layout",children:[c.jsxs("aside",{className:"sidebar",children:[c.jsxs("div",{className:"sidebar-header",children:[c.jsx("img",{src:"/logo_white.png",alt:"Piblo Logo",className:"sidebar-logo",onError:n=>{n.target.style.display="none",n.target.nextElementSibling.style.display="block"}}),c.jsx("div",{style:{width:"80px",height:"80px",margin:"0 auto 15px",display:"none",alignItems:"center",justifyContent:"center",fontSize:"40px"},children:""}),c.jsx("div",{className:"sidebar-title",children:"Piblo"})]}),c.jsxs("nav",{className:"sidebar-nav",children:[c.jsx(bh,{to:"/sager",className:({isActive:n})=>`nav-item ${n?"active":""}`,children:"Sager"}),c.jsx(bh,{to:"/materialer",className:({isActive:n})=>`nav-item ${n?"active":""}`,children:"Materialer"}),c.jsx(bh,{to:"/kalender",className:({isActive:n})=>`nav-item ${n?"active":""}`,children:"Kalender"}),c.jsx(bh,{to:"/timeregistrering",className:({isActive:n})=>`nav-item ${n?"active":""}`,children:"Timeregistrering"}),c.jsx(bh,{to:"/indstillinger",className:({isActive:n})=>`nav-item ${n?"active":""}`,children:"Indstillinger"})]}),c.jsx("div",{className:"sidebar-footer",children:c.jsx("button",{className:"btn-logout",onClick:e,children:"Log ud"})})]}),c.jsx("main",{className:"main-content",children:c.jsx(cT,{})})]})}function S9(){const[t,e]=ie.useState(null),[n,r]=ie.useState(!0);return ie.useEffect(()=>{const i=lP(cy,s=>{e(s),r(!1)});return()=>i()},[]),{user:t,loading:n}}function N9({children:t}){const{user:e,loading:n}=S9();return n?c.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"100vh",fontSize:"18px",color:"#7f8c8d"},children:"Indlser..."}):e?t:c.jsx(N0,{to:"/login",replace:!0})}function A9(){return c.jsxs(ET,{children:[c.jsx(wT,{children:c.jsxs(hT,{children:[c.jsx(ss,{path:"/login",element:c.jsx(V7,{})}),c.jsxs(ss,{path:"/",element:c.jsx(N9,{children:c.jsx(x9,{})}),children:[c.jsx(ss,{index:!0,element:c.jsx(N0,{to:"/sager",replace:!0})}),c.jsx(ss,{path:"sager",element:c.jsx(SF,{})}),c.jsx(ss,{path:"sager/:id",element:c.jsx(s9,{})}),c.jsx(ss,{path:"materialer",element:c.jsx(l9,{})}),c.jsx(ss,{path:"kalender",element:c.jsx(b9,{})}),c.jsx(ss,{path:"timeregistrering",element:c.jsx(cF,{})}),c.jsx(ss,{path:"indstillinger",element:c.jsx(hF,{})})]}),c.jsx(ss,{path:"*",element:c.jsx(N0,{to:"/",replace:!0})})]})}),c.jsx(CT,{}),c.jsx(PT,{}),c.jsx(jT,{})]})}I1.createRoot(document.getElementById("root")).render(c.jsx(mb.StrictMode,{children:c.jsx(A9,{})}));export{Gt as _,E9 as c,$A as g};

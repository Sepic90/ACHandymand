function CE(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var qO=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function LE(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Kw={exports:{}},pm={},Qw={exports:{}},Tt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Id=Symbol.for("react.element"),RE=Symbol.for("react.portal"),jE=Symbol.for("react.fragment"),DE=Symbol.for("react.strict_mode"),OE=Symbol.for("react.profiler"),FE=Symbol.for("react.provider"),ME=Symbol.for("react.context"),UE=Symbol.for("react.forward_ref"),VE=Symbol.for("react.suspense"),BE=Symbol.for("react.memo"),qE=Symbol.for("react.lazy"),Vy=Symbol.iterator;function zE(t){return t===null||typeof t!="object"?null:(t=Vy&&t[Vy]||t["@@iterator"],typeof t=="function"?t:null)}var Yw={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Xw=Object.assign,Jw={};function jc(t,e,n){this.props=t,this.context=e,this.refs=Jw,this.updater=n||Yw}jc.prototype.isReactComponent={};jc.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};jc.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Zw(){}Zw.prototype=jc.prototype;function l2(t,e,n){this.props=t,this.context=e,this.refs=Jw,this.updater=n||Yw}var u2=l2.prototype=new Zw;u2.constructor=l2;Xw(u2,jc.prototype);u2.isPureReactComponent=!0;var By=Array.isArray,eb=Object.prototype.hasOwnProperty,c2={current:null},tb={key:!0,ref:!0,__self:!0,__source:!0};function nb(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)eb.call(e,r)&&!tb.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Id,type:t,key:s,ref:o,props:i,_owner:c2.current}}function $E(t,e){return{$$typeof:Id,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function h2(t){return typeof t=="object"&&t!==null&&t.$$typeof===Id}function HE(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var qy=/\/+/g;function Tg(t,e){return typeof t=="object"&&t!==null&&t.key!=null?HE(""+t.key):e.toString(36)}function Hf(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Id:case RE:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+Tg(o,0):r,By(i)?(n="",t!=null&&(n=t.replace(qy,"$&/")+"/"),Hf(i,e,n,"",function(u){return u})):i!=null&&(h2(i)&&(i=$E(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(qy,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",By(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+Tg(s,a);o+=Hf(s,e,n,l,i)}else if(l=zE(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+Tg(s,a++),o+=Hf(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function gf(t,e,n){if(t==null)return t;var r=[],i=0;return Hf(t,r,"","",function(s){return e.call(n,s,i++)}),r}function WE(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var zr={current:null},Wf={transition:null},GE={ReactCurrentDispatcher:zr,ReactCurrentBatchConfig:Wf,ReactCurrentOwner:c2};function rb(){throw Error("act(...) is not supported in production builds of React.")}Tt.Children={map:gf,forEach:function(t,e,n){gf(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return gf(t,function(){e++}),e},toArray:function(t){return gf(t,function(e){return e})||[]},only:function(t){if(!h2(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Tt.Component=jc;Tt.Fragment=jE;Tt.Profiler=OE;Tt.PureComponent=l2;Tt.StrictMode=DE;Tt.Suspense=VE;Tt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=GE;Tt.act=rb;Tt.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Xw({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=c2.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)eb.call(e,l)&&!tb.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:Id,type:t.type,key:i,ref:s,props:r,_owner:o}};Tt.createContext=function(t){return t={$$typeof:ME,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:FE,_context:t},t.Consumer=t};Tt.createElement=nb;Tt.createFactory=function(t){var e=nb.bind(null,t);return e.type=t,e};Tt.createRef=function(){return{current:null}};Tt.forwardRef=function(t){return{$$typeof:UE,render:t}};Tt.isValidElement=h2;Tt.lazy=function(t){return{$$typeof:qE,_payload:{_status:-1,_result:t},_init:WE}};Tt.memo=function(t,e){return{$$typeof:BE,type:t,compare:e===void 0?null:e}};Tt.startTransition=function(t){var e=Wf.transition;Wf.transition={};try{t()}finally{Wf.transition=e}};Tt.unstable_act=rb;Tt.useCallback=function(t,e){return zr.current.useCallback(t,e)};Tt.useContext=function(t){return zr.current.useContext(t)};Tt.useDebugValue=function(){};Tt.useDeferredValue=function(t){return zr.current.useDeferredValue(t)};Tt.useEffect=function(t,e){return zr.current.useEffect(t,e)};Tt.useId=function(){return zr.current.useId()};Tt.useImperativeHandle=function(t,e,n){return zr.current.useImperativeHandle(t,e,n)};Tt.useInsertionEffect=function(t,e){return zr.current.useInsertionEffect(t,e)};Tt.useLayoutEffect=function(t,e){return zr.current.useLayoutEffect(t,e)};Tt.useMemo=function(t,e){return zr.current.useMemo(t,e)};Tt.useReducer=function(t,e,n){return zr.current.useReducer(t,e,n)};Tt.useRef=function(t){return zr.current.useRef(t)};Tt.useState=function(t){return zr.current.useState(t)};Tt.useSyncExternalStore=function(t,e,n){return zr.current.useSyncExternalStore(t,e,n)};Tt.useTransition=function(){return zr.current.useTransition()};Tt.version="18.3.1";Qw.exports=Tt;var le=Qw.exports;const ib=LE(le),KE=CE({__proto__:null,default:ib},[le]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var QE=le,YE=Symbol.for("react.element"),XE=Symbol.for("react.fragment"),JE=Object.prototype.hasOwnProperty,ZE=QE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,eN={key:!0,ref:!0,__self:!0,__source:!0};function sb(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)JE.call(e,r)&&!eN.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:YE,type:t,key:s,ref:o,props:i,_owner:ZE.current}}pm.Fragment=XE;pm.jsx=sb;pm.jsxs=sb;Kw.exports=pm;var g=Kw.exports,N1={},ob={exports:{}},Ei={},ab={exports:{}},lb={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(G,ee){var ie=G.length;G.push(ee);e:for(;0<ie;){var be=ie-1>>>1,M=G[be];if(0<i(M,ee))G[be]=ee,G[ie]=M,ie=be;else break e}}function n(G){return G.length===0?null:G[0]}function r(G){if(G.length===0)return null;var ee=G[0],ie=G.pop();if(ie!==ee){G[0]=ie;e:for(var be=0,M=G.length,Y=M>>>1;be<Y;){var X=2*(be+1)-1,H=G[X],oe=X+1,ne=G[oe];if(0>i(H,ie))oe<M&&0>i(ne,H)?(G[be]=ne,G[oe]=ie,be=oe):(G[be]=H,G[X]=ie,be=X);else if(oe<M&&0>i(ne,ie))G[be]=ne,G[oe]=ie,be=oe;else break e}}return ee}function i(G,ee){var ie=G.sortIndex-ee.sortIndex;return ie!==0?ie:G.id-ee.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],h=1,f=null,m=3,p=!1,b=!1,x=!1,I=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(G){for(var ee=n(u);ee!==null;){if(ee.callback===null)r(u);else if(ee.startTime<=G)r(u),ee.sortIndex=ee.expirationTime,e(l,ee);else break;ee=n(u)}}function O(G){if(x=!1,C(G),!b)if(n(l)!==null)b=!0,F(K);else{var ee=n(u);ee!==null&&V(O,ee.startTime-G)}}function K(G,ee){b=!1,x&&(x=!1,_(y),y=-1),p=!0;var ie=m;try{for(C(ee),f=n(l);f!==null&&(!(f.expirationTime>ee)||G&&!N());){var be=f.callback;if(typeof be=="function"){f.callback=null,m=f.priorityLevel;var M=be(f.expirationTime<=ee);ee=t.unstable_now(),typeof M=="function"?f.callback=M:f===n(l)&&r(l),C(ee)}else r(l);f=n(l)}if(f!==null)var Y=!0;else{var X=n(u);X!==null&&V(O,X.startTime-ee),Y=!1}return Y}finally{f=null,m=ie,p=!1}}var B=!1,L=null,y=-1,S=5,R=-1;function N(){return!(t.unstable_now()-R<S)}function T(){if(L!==null){var G=t.unstable_now();R=G;var ee=!0;try{ee=L(!0,G)}finally{ee?P():(B=!1,L=null)}}else B=!1}var P;if(typeof E=="function")P=function(){E(T)};else if(typeof MessageChannel<"u"){var U=new MessageChannel,Q=U.port2;U.port1.onmessage=T,P=function(){Q.postMessage(null)}}else P=function(){I(T,0)};function F(G){L=G,B||(B=!0,P())}function V(G,ee){y=I(function(){G(t.unstable_now())},ee)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(G){G.callback=null},t.unstable_continueExecution=function(){b||p||(b=!0,F(K))},t.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<G?Math.floor(1e3/G):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(G){switch(m){case 1:case 2:case 3:var ee=3;break;default:ee=m}var ie=m;m=ee;try{return G()}finally{m=ie}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(G,ee){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var ie=m;m=G;try{return ee()}finally{m=ie}},t.unstable_scheduleCallback=function(G,ee,ie){var be=t.unstable_now();switch(typeof ie=="object"&&ie!==null?(ie=ie.delay,ie=typeof ie=="number"&&0<ie?be+ie:be):ie=be,G){case 1:var M=-1;break;case 2:M=250;break;case 5:M=1073741823;break;case 4:M=1e4;break;default:M=5e3}return M=ie+M,G={id:h++,callback:ee,priorityLevel:G,startTime:ie,expirationTime:M,sortIndex:-1},ie>be?(G.sortIndex=ie,e(u,G),n(l)===null&&G===n(u)&&(x?(_(y),y=-1):x=!0,V(O,ie-be))):(G.sortIndex=M,e(l,G),b||p||(b=!0,F(K))),G},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(G){var ee=m;return function(){var ie=m;m=ee;try{return G.apply(this,arguments)}finally{m=ie}}}})(lb);ab.exports=lb;var tN=ab.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nN=le,Ai=tN;function qe(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var ub=new Set,Xh={};function Zl(t,e){yc(t,e),yc(t+"Capture",e)}function yc(t,e){for(Xh[t]=e,t=0;t<e.length;t++)ub.add(e[t])}var To=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),I1=Object.prototype.hasOwnProperty,rN=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,zy={},$y={};function iN(t){return I1.call($y,t)?!0:I1.call(zy,t)?!1:rN.test(t)?$y[t]=!0:(zy[t]=!0,!1)}function sN(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function oN(t,e,n,r){if(e===null||typeof e>"u"||sN(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function $r(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var pr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){pr[t]=new $r(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];pr[e]=new $r(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){pr[t]=new $r(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){pr[t]=new $r(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){pr[t]=new $r(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){pr[t]=new $r(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){pr[t]=new $r(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){pr[t]=new $r(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){pr[t]=new $r(t,5,!1,t.toLowerCase(),null,!1,!1)});var d2=/[\-:]([a-z])/g;function f2(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(d2,f2);pr[e]=new $r(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(d2,f2);pr[e]=new $r(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(d2,f2);pr[e]=new $r(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){pr[t]=new $r(t,1,!1,t.toLowerCase(),null,!1,!1)});pr.xlinkHref=new $r("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){pr[t]=new $r(t,1,!1,t.toLowerCase(),null,!0,!0)});function p2(t,e,n,r){var i=pr.hasOwnProperty(e)?pr[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(oN(e,n,i,r)&&(n=null),r||i===null?iN(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Oo=nN.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,vf=Symbol.for("react.element"),zu=Symbol.for("react.portal"),$u=Symbol.for("react.fragment"),m2=Symbol.for("react.strict_mode"),T1=Symbol.for("react.profiler"),cb=Symbol.for("react.provider"),hb=Symbol.for("react.context"),g2=Symbol.for("react.forward_ref"),k1=Symbol.for("react.suspense"),P1=Symbol.for("react.suspense_list"),v2=Symbol.for("react.memo"),va=Symbol.for("react.lazy"),db=Symbol.for("react.offscreen"),Hy=Symbol.iterator;function dh(t){return t===null||typeof t!="object"?null:(t=Hy&&t[Hy]||t["@@iterator"],typeof t=="function"?t:null)}var yn=Object.assign,kg;function Ah(t){if(kg===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);kg=e&&e[1]||""}return`
`+kg+t}var Pg=!1;function Cg(t,e){if(!t||Pg)return"";Pg=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Pg=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ah(t):""}function aN(t){switch(t.tag){case 5:return Ah(t.type);case 16:return Ah("Lazy");case 13:return Ah("Suspense");case 19:return Ah("SuspenseList");case 0:case 2:case 15:return t=Cg(t.type,!1),t;case 11:return t=Cg(t.type.render,!1),t;case 1:return t=Cg(t.type,!0),t;default:return""}}function C1(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case $u:return"Fragment";case zu:return"Portal";case T1:return"Profiler";case m2:return"StrictMode";case k1:return"Suspense";case P1:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case hb:return(t.displayName||"Context")+".Consumer";case cb:return(t._context.displayName||"Context")+".Provider";case g2:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case v2:return e=t.displayName||null,e!==null?e:C1(t.type)||"Memo";case va:e=t._payload,t=t._init;try{return C1(t(e))}catch{}}return null}function lN(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return C1(e);case 8:return e===m2?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function $a(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function fb(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function uN(t){var e=fb(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function yf(t){t._valueTracker||(t._valueTracker=uN(t))}function pb(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=fb(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function vp(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function L1(t,e){var n=e.checked;return yn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Wy(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=$a(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function mb(t,e){e=e.checked,e!=null&&p2(t,"checked",e,!1)}function R1(t,e){mb(t,e);var n=$a(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?j1(t,e.type,n):e.hasOwnProperty("defaultValue")&&j1(t,e.type,$a(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Gy(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function j1(t,e,n){(e!=="number"||vp(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Eh=Array.isArray;function ic(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+$a(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function D1(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(qe(91));return yn({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Ky(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(qe(92));if(Eh(n)){if(1<n.length)throw Error(qe(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:$a(n)}}function gb(t,e){var n=$a(e.value),r=$a(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Qy(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function vb(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function O1(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?vb(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var _f,yb=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(_f=_f||document.createElement("div"),_f.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=_f.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Jh(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Dh={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},cN=["Webkit","ms","Moz","O"];Object.keys(Dh).forEach(function(t){cN.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Dh[e]=Dh[t]})});function _b(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Dh.hasOwnProperty(t)&&Dh[t]?(""+e).trim():e+"px"}function wb(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=_b(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var hN=yn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function F1(t,e){if(e){if(hN[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(qe(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(qe(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(qe(61))}if(e.style!=null&&typeof e.style!="object")throw Error(qe(62))}}function M1(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var U1=null;function y2(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var V1=null,sc=null,oc=null;function Yy(t){if(t=Pd(t)){if(typeof V1!="function")throw Error(qe(280));var e=t.stateNode;e&&(e=_m(e),V1(t.stateNode,t.type,e))}}function bb(t){sc?oc?oc.push(t):oc=[t]:sc=t}function xb(){if(sc){var t=sc,e=oc;if(oc=sc=null,Yy(t),e)for(t=0;t<e.length;t++)Yy(e[t])}}function Sb(t,e){return t(e)}function Ab(){}var Lg=!1;function Eb(t,e,n){if(Lg)return t(e,n);Lg=!0;try{return Sb(t,e,n)}finally{Lg=!1,(sc!==null||oc!==null)&&(Ab(),xb())}}function Zh(t,e){var n=t.stateNode;if(n===null)return null;var r=_m(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(qe(231,e,typeof n));return n}var B1=!1;if(To)try{var fh={};Object.defineProperty(fh,"passive",{get:function(){B1=!0}}),window.addEventListener("test",fh,fh),window.removeEventListener("test",fh,fh)}catch{B1=!1}function dN(t,e,n,r,i,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(h){this.onError(h)}}var Oh=!1,yp=null,_p=!1,q1=null,fN={onError:function(t){Oh=!0,yp=t}};function pN(t,e,n,r,i,s,o,a,l){Oh=!1,yp=null,dN.apply(fN,arguments)}function mN(t,e,n,r,i,s,o,a,l){if(pN.apply(this,arguments),Oh){if(Oh){var u=yp;Oh=!1,yp=null}else throw Error(qe(198));_p||(_p=!0,q1=u)}}function eu(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Nb(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Xy(t){if(eu(t)!==t)throw Error(qe(188))}function gN(t){var e=t.alternate;if(!e){if(e=eu(t),e===null)throw Error(qe(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Xy(i),t;if(s===r)return Xy(i),e;s=s.sibling}throw Error(qe(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(qe(189))}}if(n.alternate!==r)throw Error(qe(190))}if(n.tag!==3)throw Error(qe(188));return n.stateNode.current===n?t:e}function Ib(t){return t=gN(t),t!==null?Tb(t):null}function Tb(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Tb(t);if(e!==null)return e;t=t.sibling}return null}var kb=Ai.unstable_scheduleCallback,Jy=Ai.unstable_cancelCallback,vN=Ai.unstable_shouldYield,yN=Ai.unstable_requestPaint,jn=Ai.unstable_now,_N=Ai.unstable_getCurrentPriorityLevel,_2=Ai.unstable_ImmediatePriority,Pb=Ai.unstable_UserBlockingPriority,wp=Ai.unstable_NormalPriority,wN=Ai.unstable_LowPriority,Cb=Ai.unstable_IdlePriority,mm=null,Ms=null;function bN(t){if(Ms&&typeof Ms.onCommitFiberRoot=="function")try{Ms.onCommitFiberRoot(mm,t,void 0,(t.current.flags&128)===128)}catch{}}var ls=Math.clz32?Math.clz32:AN,xN=Math.log,SN=Math.LN2;function AN(t){return t>>>=0,t===0?32:31-(xN(t)/SN|0)|0}var wf=64,bf=4194304;function Nh(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function bp(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=Nh(a):(s&=o,s!==0&&(r=Nh(s)))}else o=n&~i,o!==0?r=Nh(o):s!==0&&(r=Nh(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-ls(e),i=1<<n,r|=t[n],e&=~i;return r}function EN(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function NN(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-ls(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=EN(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function z1(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Lb(){var t=wf;return wf<<=1,!(wf&4194240)&&(wf=64),t}function Rg(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Td(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-ls(e),t[e]=n}function IN(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-ls(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function w2(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-ls(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Kt=0;function Rb(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var jb,b2,Db,Ob,Fb,$1=!1,xf=[],Ca=null,La=null,Ra=null,ed=new Map,td=new Map,_a=[],TN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Zy(t,e){switch(t){case"focusin":case"focusout":Ca=null;break;case"dragenter":case"dragleave":La=null;break;case"mouseover":case"mouseout":Ra=null;break;case"pointerover":case"pointerout":ed.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":td.delete(e.pointerId)}}function ph(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Pd(e),e!==null&&b2(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function kN(t,e,n,r,i){switch(e){case"focusin":return Ca=ph(Ca,t,e,n,r,i),!0;case"dragenter":return La=ph(La,t,e,n,r,i),!0;case"mouseover":return Ra=ph(Ra,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return ed.set(s,ph(ed.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,td.set(s,ph(td.get(s)||null,t,e,n,r,i)),!0}return!1}function Mb(t){var e=Ll(t.target);if(e!==null){var n=eu(e);if(n!==null){if(e=n.tag,e===13){if(e=Nb(n),e!==null){t.blockedOn=e,Fb(t.priority,function(){Db(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Gf(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=H1(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);U1=r,n.target.dispatchEvent(r),U1=null}else return e=Pd(n),e!==null&&b2(e),t.blockedOn=n,!1;e.shift()}return!0}function e5(t,e,n){Gf(t)&&n.delete(e)}function PN(){$1=!1,Ca!==null&&Gf(Ca)&&(Ca=null),La!==null&&Gf(La)&&(La=null),Ra!==null&&Gf(Ra)&&(Ra=null),ed.forEach(e5),td.forEach(e5)}function mh(t,e){t.blockedOn===e&&(t.blockedOn=null,$1||($1=!0,Ai.unstable_scheduleCallback(Ai.unstable_NormalPriority,PN)))}function nd(t){function e(i){return mh(i,t)}if(0<xf.length){mh(xf[0],t);for(var n=1;n<xf.length;n++){var r=xf[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Ca!==null&&mh(Ca,t),La!==null&&mh(La,t),Ra!==null&&mh(Ra,t),ed.forEach(e),td.forEach(e),n=0;n<_a.length;n++)r=_a[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<_a.length&&(n=_a[0],n.blockedOn===null);)Mb(n),n.blockedOn===null&&_a.shift()}var ac=Oo.ReactCurrentBatchConfig,xp=!0;function CN(t,e,n,r){var i=Kt,s=ac.transition;ac.transition=null;try{Kt=1,x2(t,e,n,r)}finally{Kt=i,ac.transition=s}}function LN(t,e,n,r){var i=Kt,s=ac.transition;ac.transition=null;try{Kt=4,x2(t,e,n,r)}finally{Kt=i,ac.transition=s}}function x2(t,e,n,r){if(xp){var i=H1(t,e,n,r);if(i===null)zg(t,e,r,Sp,n),Zy(t,r);else if(kN(i,t,e,n,r))r.stopPropagation();else if(Zy(t,r),e&4&&-1<TN.indexOf(t)){for(;i!==null;){var s=Pd(i);if(s!==null&&jb(s),s=H1(t,e,n,r),s===null&&zg(t,e,r,Sp,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else zg(t,e,r,null,n)}}var Sp=null;function H1(t,e,n,r){if(Sp=null,t=y2(r),t=Ll(t),t!==null)if(e=eu(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Nb(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Sp=t,null}function Ub(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(_N()){case _2:return 1;case Pb:return 4;case wp:case wN:return 16;case Cb:return 536870912;default:return 16}default:return 16}}var Na=null,S2=null,Kf=null;function Vb(){if(Kf)return Kf;var t,e=S2,n=e.length,r,i="value"in Na?Na.value:Na.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Kf=i.slice(t,1<r?1-r:void 0)}function Qf(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Sf(){return!0}function t5(){return!1}function Ni(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Sf:t5,this.isPropagationStopped=t5,this}return yn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Sf)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Sf)},persist:function(){},isPersistent:Sf}),e}var Dc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},A2=Ni(Dc),kd=yn({},Dc,{view:0,detail:0}),RN=Ni(kd),jg,Dg,gh,gm=yn({},kd,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:E2,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==gh&&(gh&&t.type==="mousemove"?(jg=t.screenX-gh.screenX,Dg=t.screenY-gh.screenY):Dg=jg=0,gh=t),jg)},movementY:function(t){return"movementY"in t?t.movementY:Dg}}),n5=Ni(gm),jN=yn({},gm,{dataTransfer:0}),DN=Ni(jN),ON=yn({},kd,{relatedTarget:0}),Og=Ni(ON),FN=yn({},Dc,{animationName:0,elapsedTime:0,pseudoElement:0}),MN=Ni(FN),UN=yn({},Dc,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),VN=Ni(UN),BN=yn({},Dc,{data:0}),r5=Ni(BN),qN={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},zN={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},$N={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function HN(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=$N[t])?!!e[t]:!1}function E2(){return HN}var WN=yn({},kd,{key:function(t){if(t.key){var e=qN[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Qf(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?zN[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:E2,charCode:function(t){return t.type==="keypress"?Qf(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Qf(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),GN=Ni(WN),KN=yn({},gm,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),i5=Ni(KN),QN=yn({},kd,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:E2}),YN=Ni(QN),XN=yn({},Dc,{propertyName:0,elapsedTime:0,pseudoElement:0}),JN=Ni(XN),ZN=yn({},gm,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),eI=Ni(ZN),tI=[9,13,27,32],N2=To&&"CompositionEvent"in window,Fh=null;To&&"documentMode"in document&&(Fh=document.documentMode);var nI=To&&"TextEvent"in window&&!Fh,Bb=To&&(!N2||Fh&&8<Fh&&11>=Fh),s5=" ",o5=!1;function qb(t,e){switch(t){case"keyup":return tI.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zb(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Hu=!1;function rI(t,e){switch(t){case"compositionend":return zb(e);case"keypress":return e.which!==32?null:(o5=!0,s5);case"textInput":return t=e.data,t===s5&&o5?null:t;default:return null}}function iI(t,e){if(Hu)return t==="compositionend"||!N2&&qb(t,e)?(t=Vb(),Kf=S2=Na=null,Hu=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Bb&&e.locale!=="ko"?null:e.data;default:return null}}var sI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function a5(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!sI[t.type]:e==="textarea"}function $b(t,e,n,r){bb(r),e=Ap(e,"onChange"),0<e.length&&(n=new A2("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Mh=null,rd=null;function oI(t){tx(t,0)}function vm(t){var e=Ku(t);if(pb(e))return t}function aI(t,e){if(t==="change")return e}var Hb=!1;if(To){var Fg;if(To){var Mg="oninput"in document;if(!Mg){var l5=document.createElement("div");l5.setAttribute("oninput","return;"),Mg=typeof l5.oninput=="function"}Fg=Mg}else Fg=!1;Hb=Fg&&(!document.documentMode||9<document.documentMode)}function u5(){Mh&&(Mh.detachEvent("onpropertychange",Wb),rd=Mh=null)}function Wb(t){if(t.propertyName==="value"&&vm(rd)){var e=[];$b(e,rd,t,y2(t)),Eb(oI,e)}}function lI(t,e,n){t==="focusin"?(u5(),Mh=e,rd=n,Mh.attachEvent("onpropertychange",Wb)):t==="focusout"&&u5()}function uI(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return vm(rd)}function cI(t,e){if(t==="click")return vm(e)}function hI(t,e){if(t==="input"||t==="change")return vm(e)}function dI(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var cs=typeof Object.is=="function"?Object.is:dI;function id(t,e){if(cs(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!I1.call(e,i)||!cs(t[i],e[i]))return!1}return!0}function c5(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function h5(t,e){var n=c5(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=c5(n)}}function Gb(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Gb(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Kb(){for(var t=window,e=vp();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=vp(t.document)}return e}function I2(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function fI(t){var e=Kb(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Gb(n.ownerDocument.documentElement,n)){if(r!==null&&I2(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=h5(n,s);var o=h5(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var pI=To&&"documentMode"in document&&11>=document.documentMode,Wu=null,W1=null,Uh=null,G1=!1;function d5(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;G1||Wu==null||Wu!==vp(r)||(r=Wu,"selectionStart"in r&&I2(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Uh&&id(Uh,r)||(Uh=r,r=Ap(W1,"onSelect"),0<r.length&&(e=new A2("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Wu)))}function Af(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Gu={animationend:Af("Animation","AnimationEnd"),animationiteration:Af("Animation","AnimationIteration"),animationstart:Af("Animation","AnimationStart"),transitionend:Af("Transition","TransitionEnd")},Ug={},Qb={};To&&(Qb=document.createElement("div").style,"AnimationEvent"in window||(delete Gu.animationend.animation,delete Gu.animationiteration.animation,delete Gu.animationstart.animation),"TransitionEvent"in window||delete Gu.transitionend.transition);function ym(t){if(Ug[t])return Ug[t];if(!Gu[t])return t;var e=Gu[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Qb)return Ug[t]=e[n];return t}var Yb=ym("animationend"),Xb=ym("animationiteration"),Jb=ym("animationstart"),Zb=ym("transitionend"),ex=new Map,f5="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Za(t,e){ex.set(t,e),Zl(e,[t])}for(var Vg=0;Vg<f5.length;Vg++){var Bg=f5[Vg],mI=Bg.toLowerCase(),gI=Bg[0].toUpperCase()+Bg.slice(1);Za(mI,"on"+gI)}Za(Yb,"onAnimationEnd");Za(Xb,"onAnimationIteration");Za(Jb,"onAnimationStart");Za("dblclick","onDoubleClick");Za("focusin","onFocus");Za("focusout","onBlur");Za(Zb,"onTransitionEnd");yc("onMouseEnter",["mouseout","mouseover"]);yc("onMouseLeave",["mouseout","mouseover"]);yc("onPointerEnter",["pointerout","pointerover"]);yc("onPointerLeave",["pointerout","pointerover"]);Zl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Zl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Zl("onBeforeInput",["compositionend","keypress","textInput","paste"]);Zl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Zl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Zl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ih="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),vI=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ih));function p5(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,mN(r,e,void 0,t),t.currentTarget=null}function tx(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;p5(i,a,u),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;p5(i,a,u),s=l}}}if(_p)throw t=q1,_p=!1,q1=null,t}function ln(t,e){var n=e[J1];n===void 0&&(n=e[J1]=new Set);var r=t+"__bubble";n.has(r)||(nx(e,t,2,!1),n.add(r))}function qg(t,e,n){var r=0;e&&(r|=4),nx(n,t,r,e)}var Ef="_reactListening"+Math.random().toString(36).slice(2);function sd(t){if(!t[Ef]){t[Ef]=!0,ub.forEach(function(n){n!=="selectionchange"&&(vI.has(n)||qg(n,!1,t),qg(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Ef]||(e[Ef]=!0,qg("selectionchange",!1,e))}}function nx(t,e,n,r){switch(Ub(e)){case 1:var i=CN;break;case 4:i=LN;break;default:i=x2}n=i.bind(null,e,n,t),i=void 0,!B1||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function zg(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Ll(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}Eb(function(){var u=s,h=y2(n),f=[];e:{var m=ex.get(t);if(m!==void 0){var p=A2,b=t;switch(t){case"keypress":if(Qf(n)===0)break e;case"keydown":case"keyup":p=GN;break;case"focusin":b="focus",p=Og;break;case"focusout":b="blur",p=Og;break;case"beforeblur":case"afterblur":p=Og;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=n5;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=DN;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=YN;break;case Yb:case Xb:case Jb:p=MN;break;case Zb:p=JN;break;case"scroll":p=RN;break;case"wheel":p=eI;break;case"copy":case"cut":case"paste":p=VN;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=i5}var x=(e&4)!==0,I=!x&&t==="scroll",_=x?m!==null?m+"Capture":null:m;x=[];for(var E=u,C;E!==null;){C=E;var O=C.stateNode;if(C.tag===5&&O!==null&&(C=O,_!==null&&(O=Zh(E,_),O!=null&&x.push(od(E,O,C)))),I)break;E=E.return}0<x.length&&(m=new p(m,b,null,n,h),f.push({event:m,listeners:x}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",m&&n!==U1&&(b=n.relatedTarget||n.fromElement)&&(Ll(b)||b[ko]))break e;if((p||m)&&(m=h.window===h?h:(m=h.ownerDocument)?m.defaultView||m.parentWindow:window,p?(b=n.relatedTarget||n.toElement,p=u,b=b?Ll(b):null,b!==null&&(I=eu(b),b!==I||b.tag!==5&&b.tag!==6)&&(b=null)):(p=null,b=u),p!==b)){if(x=n5,O="onMouseLeave",_="onMouseEnter",E="mouse",(t==="pointerout"||t==="pointerover")&&(x=i5,O="onPointerLeave",_="onPointerEnter",E="pointer"),I=p==null?m:Ku(p),C=b==null?m:Ku(b),m=new x(O,E+"leave",p,n,h),m.target=I,m.relatedTarget=C,O=null,Ll(h)===u&&(x=new x(_,E+"enter",b,n,h),x.target=C,x.relatedTarget=I,O=x),I=O,p&&b)t:{for(x=p,_=b,E=0,C=x;C;C=Ru(C))E++;for(C=0,O=_;O;O=Ru(O))C++;for(;0<E-C;)x=Ru(x),E--;for(;0<C-E;)_=Ru(_),C--;for(;E--;){if(x===_||_!==null&&x===_.alternate)break t;x=Ru(x),_=Ru(_)}x=null}else x=null;p!==null&&m5(f,m,p,x,!1),b!==null&&I!==null&&m5(f,I,b,x,!0)}}e:{if(m=u?Ku(u):window,p=m.nodeName&&m.nodeName.toLowerCase(),p==="select"||p==="input"&&m.type==="file")var K=aI;else if(a5(m))if(Hb)K=hI;else{K=uI;var B=lI}else(p=m.nodeName)&&p.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(K=cI);if(K&&(K=K(t,u))){$b(f,K,n,h);break e}B&&B(t,m,u),t==="focusout"&&(B=m._wrapperState)&&B.controlled&&m.type==="number"&&j1(m,"number",m.value)}switch(B=u?Ku(u):window,t){case"focusin":(a5(B)||B.contentEditable==="true")&&(Wu=B,W1=u,Uh=null);break;case"focusout":Uh=W1=Wu=null;break;case"mousedown":G1=!0;break;case"contextmenu":case"mouseup":case"dragend":G1=!1,d5(f,n,h);break;case"selectionchange":if(pI)break;case"keydown":case"keyup":d5(f,n,h)}var L;if(N2)e:{switch(t){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else Hu?qb(t,n)&&(y="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(y="onCompositionStart");y&&(Bb&&n.locale!=="ko"&&(Hu||y!=="onCompositionStart"?y==="onCompositionEnd"&&Hu&&(L=Vb()):(Na=h,S2="value"in Na?Na.value:Na.textContent,Hu=!0)),B=Ap(u,y),0<B.length&&(y=new r5(y,t,null,n,h),f.push({event:y,listeners:B}),L?y.data=L:(L=zb(n),L!==null&&(y.data=L)))),(L=nI?rI(t,n):iI(t,n))&&(u=Ap(u,"onBeforeInput"),0<u.length&&(h=new r5("onBeforeInput","beforeinput",null,n,h),f.push({event:h,listeners:u}),h.data=L))}tx(f,e)})}function od(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Ap(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Zh(t,n),s!=null&&r.unshift(od(t,s,i)),s=Zh(t,e),s!=null&&r.push(od(t,s,i))),t=t.return}return r}function Ru(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function m5(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,i?(l=Zh(n,s),l!=null&&o.unshift(od(n,l,a))):i||(l=Zh(n,s),l!=null&&o.push(od(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var yI=/\r\n?/g,_I=/\u0000|\uFFFD/g;function g5(t){return(typeof t=="string"?t:""+t).replace(yI,`
`).replace(_I,"")}function Nf(t,e,n){if(e=g5(e),g5(t)!==e&&n)throw Error(qe(425))}function Ep(){}var K1=null,Q1=null;function Y1(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var X1=typeof setTimeout=="function"?setTimeout:void 0,wI=typeof clearTimeout=="function"?clearTimeout:void 0,v5=typeof Promise=="function"?Promise:void 0,bI=typeof queueMicrotask=="function"?queueMicrotask:typeof v5<"u"?function(t){return v5.resolve(null).then(t).catch(xI)}:X1;function xI(t){setTimeout(function(){throw t})}function $g(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),nd(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);nd(e)}function ja(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function y5(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Oc=Math.random().toString(36).slice(2),Ds="__reactFiber$"+Oc,ad="__reactProps$"+Oc,ko="__reactContainer$"+Oc,J1="__reactEvents$"+Oc,SI="__reactListeners$"+Oc,AI="__reactHandles$"+Oc;function Ll(t){var e=t[Ds];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ko]||n[Ds]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=y5(t);t!==null;){if(n=t[Ds])return n;t=y5(t)}return e}t=n,n=t.parentNode}return null}function Pd(t){return t=t[Ds]||t[ko],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ku(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(qe(33))}function _m(t){return t[ad]||null}var Z1=[],Qu=-1;function el(t){return{current:t}}function hn(t){0>Qu||(t.current=Z1[Qu],Z1[Qu]=null,Qu--)}function rn(t,e){Qu++,Z1[Qu]=t.current,t.current=e}var Ha={},Pr=el(Ha),si=el(!1),ql=Ha;function _c(t,e){var n=t.type.contextTypes;if(!n)return Ha;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function oi(t){return t=t.childContextTypes,t!=null}function Np(){hn(si),hn(Pr)}function _5(t,e,n){if(Pr.current!==Ha)throw Error(qe(168));rn(Pr,e),rn(si,n)}function rx(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(qe(108,lN(t)||"Unknown",i));return yn({},n,r)}function Ip(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ha,ql=Pr.current,rn(Pr,t),rn(si,si.current),!0}function w5(t,e,n){var r=t.stateNode;if(!r)throw Error(qe(169));n?(t=rx(t,e,ql),r.__reactInternalMemoizedMergedChildContext=t,hn(si),hn(Pr),rn(Pr,t)):hn(si),rn(si,n)}var yo=null,wm=!1,Hg=!1;function ix(t){yo===null?yo=[t]:yo.push(t)}function EI(t){wm=!0,ix(t)}function tl(){if(!Hg&&yo!==null){Hg=!0;var t=0,e=Kt;try{var n=yo;for(Kt=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}yo=null,wm=!1}catch(i){throw yo!==null&&(yo=yo.slice(t+1)),kb(_2,tl),i}finally{Kt=e,Hg=!1}}return null}var Yu=[],Xu=0,Tp=null,kp=0,Di=[],Oi=0,zl=null,_o=1,wo="";function Nl(t,e){Yu[Xu++]=kp,Yu[Xu++]=Tp,Tp=t,kp=e}function sx(t,e,n){Di[Oi++]=_o,Di[Oi++]=wo,Di[Oi++]=zl,zl=t;var r=_o;t=wo;var i=32-ls(r)-1;r&=~(1<<i),n+=1;var s=32-ls(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,_o=1<<32-ls(e)+i|n<<i|r,wo=s+t}else _o=1<<s|n<<i|r,wo=t}function T2(t){t.return!==null&&(Nl(t,1),sx(t,1,0))}function k2(t){for(;t===Tp;)Tp=Yu[--Xu],Yu[Xu]=null,kp=Yu[--Xu],Yu[Xu]=null;for(;t===zl;)zl=Di[--Oi],Di[Oi]=null,wo=Di[--Oi],Di[Oi]=null,_o=Di[--Oi],Di[Oi]=null}var Si=null,_i=null,pn=!1,as=null;function ox(t,e){var n=Mi(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function b5(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Si=t,_i=ja(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Si=t,_i=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=zl!==null?{id:_o,overflow:wo}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Mi(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Si=t,_i=null,!0):!1;default:return!1}}function e0(t){return(t.mode&1)!==0&&(t.flags&128)===0}function t0(t){if(pn){var e=_i;if(e){var n=e;if(!b5(t,e)){if(e0(t))throw Error(qe(418));e=ja(n.nextSibling);var r=Si;e&&b5(t,e)?ox(r,n):(t.flags=t.flags&-4097|2,pn=!1,Si=t)}}else{if(e0(t))throw Error(qe(418));t.flags=t.flags&-4097|2,pn=!1,Si=t}}}function x5(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Si=t}function If(t){if(t!==Si)return!1;if(!pn)return x5(t),pn=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Y1(t.type,t.memoizedProps)),e&&(e=_i)){if(e0(t))throw ax(),Error(qe(418));for(;e;)ox(t,e),e=ja(e.nextSibling)}if(x5(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(qe(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){_i=ja(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}_i=null}}else _i=Si?ja(t.stateNode.nextSibling):null;return!0}function ax(){for(var t=_i;t;)t=ja(t.nextSibling)}function wc(){_i=Si=null,pn=!1}function P2(t){as===null?as=[t]:as.push(t)}var NI=Oo.ReactCurrentBatchConfig;function vh(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(qe(309));var r=n.stateNode}if(!r)throw Error(qe(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(qe(284));if(!n._owner)throw Error(qe(290,t))}return t}function Tf(t,e){throw t=Object.prototype.toString.call(e),Error(qe(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function S5(t){var e=t._init;return e(t._payload)}function lx(t){function e(_,E){if(t){var C=_.deletions;C===null?(_.deletions=[E],_.flags|=16):C.push(E)}}function n(_,E){if(!t)return null;for(;E!==null;)e(_,E),E=E.sibling;return null}function r(_,E){for(_=new Map;E!==null;)E.key!==null?_.set(E.key,E):_.set(E.index,E),E=E.sibling;return _}function i(_,E){return _=Ma(_,E),_.index=0,_.sibling=null,_}function s(_,E,C){return _.index=C,t?(C=_.alternate,C!==null?(C=C.index,C<E?(_.flags|=2,E):C):(_.flags|=2,E)):(_.flags|=1048576,E)}function o(_){return t&&_.alternate===null&&(_.flags|=2),_}function a(_,E,C,O){return E===null||E.tag!==6?(E=Jg(C,_.mode,O),E.return=_,E):(E=i(E,C),E.return=_,E)}function l(_,E,C,O){var K=C.type;return K===$u?h(_,E,C.props.children,O,C.key):E!==null&&(E.elementType===K||typeof K=="object"&&K!==null&&K.$$typeof===va&&S5(K)===E.type)?(O=i(E,C.props),O.ref=vh(_,E,C),O.return=_,O):(O=np(C.type,C.key,C.props,null,_.mode,O),O.ref=vh(_,E,C),O.return=_,O)}function u(_,E,C,O){return E===null||E.tag!==4||E.stateNode.containerInfo!==C.containerInfo||E.stateNode.implementation!==C.implementation?(E=Zg(C,_.mode,O),E.return=_,E):(E=i(E,C.children||[]),E.return=_,E)}function h(_,E,C,O,K){return E===null||E.tag!==7?(E=Ml(C,_.mode,O,K),E.return=_,E):(E=i(E,C),E.return=_,E)}function f(_,E,C){if(typeof E=="string"&&E!==""||typeof E=="number")return E=Jg(""+E,_.mode,C),E.return=_,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case vf:return C=np(E.type,E.key,E.props,null,_.mode,C),C.ref=vh(_,null,E),C.return=_,C;case zu:return E=Zg(E,_.mode,C),E.return=_,E;case va:var O=E._init;return f(_,O(E._payload),C)}if(Eh(E)||dh(E))return E=Ml(E,_.mode,C,null),E.return=_,E;Tf(_,E)}return null}function m(_,E,C,O){var K=E!==null?E.key:null;if(typeof C=="string"&&C!==""||typeof C=="number")return K!==null?null:a(_,E,""+C,O);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case vf:return C.key===K?l(_,E,C,O):null;case zu:return C.key===K?u(_,E,C,O):null;case va:return K=C._init,m(_,E,K(C._payload),O)}if(Eh(C)||dh(C))return K!==null?null:h(_,E,C,O,null);Tf(_,C)}return null}function p(_,E,C,O,K){if(typeof O=="string"&&O!==""||typeof O=="number")return _=_.get(C)||null,a(E,_,""+O,K);if(typeof O=="object"&&O!==null){switch(O.$$typeof){case vf:return _=_.get(O.key===null?C:O.key)||null,l(E,_,O,K);case zu:return _=_.get(O.key===null?C:O.key)||null,u(E,_,O,K);case va:var B=O._init;return p(_,E,C,B(O._payload),K)}if(Eh(O)||dh(O))return _=_.get(C)||null,h(E,_,O,K,null);Tf(E,O)}return null}function b(_,E,C,O){for(var K=null,B=null,L=E,y=E=0,S=null;L!==null&&y<C.length;y++){L.index>y?(S=L,L=null):S=L.sibling;var R=m(_,L,C[y],O);if(R===null){L===null&&(L=S);break}t&&L&&R.alternate===null&&e(_,L),E=s(R,E,y),B===null?K=R:B.sibling=R,B=R,L=S}if(y===C.length)return n(_,L),pn&&Nl(_,y),K;if(L===null){for(;y<C.length;y++)L=f(_,C[y],O),L!==null&&(E=s(L,E,y),B===null?K=L:B.sibling=L,B=L);return pn&&Nl(_,y),K}for(L=r(_,L);y<C.length;y++)S=p(L,_,y,C[y],O),S!==null&&(t&&S.alternate!==null&&L.delete(S.key===null?y:S.key),E=s(S,E,y),B===null?K=S:B.sibling=S,B=S);return t&&L.forEach(function(N){return e(_,N)}),pn&&Nl(_,y),K}function x(_,E,C,O){var K=dh(C);if(typeof K!="function")throw Error(qe(150));if(C=K.call(C),C==null)throw Error(qe(151));for(var B=K=null,L=E,y=E=0,S=null,R=C.next();L!==null&&!R.done;y++,R=C.next()){L.index>y?(S=L,L=null):S=L.sibling;var N=m(_,L,R.value,O);if(N===null){L===null&&(L=S);break}t&&L&&N.alternate===null&&e(_,L),E=s(N,E,y),B===null?K=N:B.sibling=N,B=N,L=S}if(R.done)return n(_,L),pn&&Nl(_,y),K;if(L===null){for(;!R.done;y++,R=C.next())R=f(_,R.value,O),R!==null&&(E=s(R,E,y),B===null?K=R:B.sibling=R,B=R);return pn&&Nl(_,y),K}for(L=r(_,L);!R.done;y++,R=C.next())R=p(L,_,y,R.value,O),R!==null&&(t&&R.alternate!==null&&L.delete(R.key===null?y:R.key),E=s(R,E,y),B===null?K=R:B.sibling=R,B=R);return t&&L.forEach(function(T){return e(_,T)}),pn&&Nl(_,y),K}function I(_,E,C,O){if(typeof C=="object"&&C!==null&&C.type===$u&&C.key===null&&(C=C.props.children),typeof C=="object"&&C!==null){switch(C.$$typeof){case vf:e:{for(var K=C.key,B=E;B!==null;){if(B.key===K){if(K=C.type,K===$u){if(B.tag===7){n(_,B.sibling),E=i(B,C.props.children),E.return=_,_=E;break e}}else if(B.elementType===K||typeof K=="object"&&K!==null&&K.$$typeof===va&&S5(K)===B.type){n(_,B.sibling),E=i(B,C.props),E.ref=vh(_,B,C),E.return=_,_=E;break e}n(_,B);break}else e(_,B);B=B.sibling}C.type===$u?(E=Ml(C.props.children,_.mode,O,C.key),E.return=_,_=E):(O=np(C.type,C.key,C.props,null,_.mode,O),O.ref=vh(_,E,C),O.return=_,_=O)}return o(_);case zu:e:{for(B=C.key;E!==null;){if(E.key===B)if(E.tag===4&&E.stateNode.containerInfo===C.containerInfo&&E.stateNode.implementation===C.implementation){n(_,E.sibling),E=i(E,C.children||[]),E.return=_,_=E;break e}else{n(_,E);break}else e(_,E);E=E.sibling}E=Zg(C,_.mode,O),E.return=_,_=E}return o(_);case va:return B=C._init,I(_,E,B(C._payload),O)}if(Eh(C))return b(_,E,C,O);if(dh(C))return x(_,E,C,O);Tf(_,C)}return typeof C=="string"&&C!==""||typeof C=="number"?(C=""+C,E!==null&&E.tag===6?(n(_,E.sibling),E=i(E,C),E.return=_,_=E):(n(_,E),E=Jg(C,_.mode,O),E.return=_,_=E),o(_)):n(_,E)}return I}var bc=lx(!0),ux=lx(!1),Pp=el(null),Cp=null,Ju=null,C2=null;function L2(){C2=Ju=Cp=null}function R2(t){var e=Pp.current;hn(Pp),t._currentValue=e}function n0(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function lc(t,e){Cp=t,C2=Ju=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(ii=!0),t.firstContext=null)}function Bi(t){var e=t._currentValue;if(C2!==t)if(t={context:t,memoizedValue:e,next:null},Ju===null){if(Cp===null)throw Error(qe(308));Ju=t,Cp.dependencies={lanes:0,firstContext:t}}else Ju=Ju.next=t;return e}var Rl=null;function j2(t){Rl===null?Rl=[t]:Rl.push(t)}function cx(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,j2(e)):(n.next=i.next,i.next=n),e.interleaved=n,Po(t,r)}function Po(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var ya=!1;function D2(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function hx(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Eo(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Da(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Ft&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Po(t,n)}return i=r.interleaved,i===null?(e.next=e,j2(r)):(e.next=i.next,i.next=e),r.interleaved=e,Po(t,n)}function Yf(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,w2(t,n)}}function A5(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Lp(t,e,n,r){var i=t.updateQueue;ya=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=u:a.next=u,h.lastBaseUpdate=l))}if(s!==null){var f=i.baseState;o=0,h=u=l=null,a=s;do{var m=a.lane,p=a.eventTime;if((r&m)===m){h!==null&&(h=h.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var b=t,x=a;switch(m=e,p=n,x.tag){case 1:if(b=x.payload,typeof b=="function"){f=b.call(p,f,m);break e}f=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=x.payload,m=typeof b=="function"?b.call(p,f,m):b,m==null)break e;f=yn({},f,m);break e;case 2:ya=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,m=i.effects,m===null?i.effects=[a]:m.push(a))}else p={eventTime:p,lane:m,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(u=h=p,l=f):h=h.next=p,o|=m;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;m=a,a=m.next,m.next=null,i.lastBaseUpdate=m,i.shared.pending=null}}while(!0);if(h===null&&(l=f),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Hl|=o,t.lanes=o,t.memoizedState=f}}function E5(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(qe(191,i));i.call(r)}}}var Cd={},Us=el(Cd),ld=el(Cd),ud=el(Cd);function jl(t){if(t===Cd)throw Error(qe(174));return t}function O2(t,e){switch(rn(ud,e),rn(ld,t),rn(Us,Cd),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:O1(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=O1(e,t)}hn(Us),rn(Us,e)}function xc(){hn(Us),hn(ld),hn(ud)}function dx(t){jl(ud.current);var e=jl(Us.current),n=O1(e,t.type);e!==n&&(rn(ld,t),rn(Us,n))}function F2(t){ld.current===t&&(hn(Us),hn(ld))}var mn=el(0);function Rp(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Wg=[];function M2(){for(var t=0;t<Wg.length;t++)Wg[t]._workInProgressVersionPrimary=null;Wg.length=0}var Xf=Oo.ReactCurrentDispatcher,Gg=Oo.ReactCurrentBatchConfig,$l=0,gn=null,Kn=null,er=null,jp=!1,Vh=!1,cd=0,II=0;function _r(){throw Error(qe(321))}function U2(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!cs(t[n],e[n]))return!1;return!0}function V2(t,e,n,r,i,s){if($l=s,gn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Xf.current=t===null||t.memoizedState===null?CI:LI,t=n(r,i),Vh){s=0;do{if(Vh=!1,cd=0,25<=s)throw Error(qe(301));s+=1,er=Kn=null,e.updateQueue=null,Xf.current=RI,t=n(r,i)}while(Vh)}if(Xf.current=Dp,e=Kn!==null&&Kn.next!==null,$l=0,er=Kn=gn=null,jp=!1,e)throw Error(qe(300));return t}function B2(){var t=cd!==0;return cd=0,t}function Rs(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return er===null?gn.memoizedState=er=t:er=er.next=t,er}function qi(){if(Kn===null){var t=gn.alternate;t=t!==null?t.memoizedState:null}else t=Kn.next;var e=er===null?gn.memoizedState:er.next;if(e!==null)er=e,Kn=t;else{if(t===null)throw Error(qe(310));Kn=t,t={memoizedState:Kn.memoizedState,baseState:Kn.baseState,baseQueue:Kn.baseQueue,queue:Kn.queue,next:null},er===null?gn.memoizedState=er=t:er=er.next=t}return er}function hd(t,e){return typeof e=="function"?e(t):e}function Kg(t){var e=qi(),n=e.queue;if(n===null)throw Error(qe(311));n.lastRenderedReducer=t;var r=Kn,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,u=s;do{var h=u.lane;if(($l&h)===h)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var f={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=f,o=r):l=l.next=f,gn.lanes|=h,Hl|=h}u=u.next}while(u!==null&&u!==s);l===null?o=r:l.next=a,cs(r,e.memoizedState)||(ii=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,gn.lanes|=s,Hl|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Qg(t){var e=qi(),n=e.queue;if(n===null)throw Error(qe(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);cs(s,e.memoizedState)||(ii=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function fx(){}function px(t,e){var n=gn,r=qi(),i=e(),s=!cs(r.memoizedState,i);if(s&&(r.memoizedState=i,ii=!0),r=r.queue,q2(vx.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||er!==null&&er.memoizedState.tag&1){if(n.flags|=2048,dd(9,gx.bind(null,n,r,i,e),void 0,null),nr===null)throw Error(qe(349));$l&30||mx(n,e,i)}return i}function mx(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=gn.updateQueue,e===null?(e={lastEffect:null,stores:null},gn.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function gx(t,e,n,r){e.value=n,e.getSnapshot=r,yx(e)&&_x(t)}function vx(t,e,n){return n(function(){yx(e)&&_x(t)})}function yx(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!cs(t,n)}catch{return!0}}function _x(t){var e=Po(t,1);e!==null&&us(e,t,1,-1)}function N5(t){var e=Rs();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:hd,lastRenderedState:t},e.queue=t,t=t.dispatch=PI.bind(null,gn,t),[e.memoizedState,t]}function dd(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=gn.updateQueue,e===null?(e={lastEffect:null,stores:null},gn.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function wx(){return qi().memoizedState}function Jf(t,e,n,r){var i=Rs();gn.flags|=t,i.memoizedState=dd(1|e,n,void 0,r===void 0?null:r)}function bm(t,e,n,r){var i=qi();r=r===void 0?null:r;var s=void 0;if(Kn!==null){var o=Kn.memoizedState;if(s=o.destroy,r!==null&&U2(r,o.deps)){i.memoizedState=dd(e,n,s,r);return}}gn.flags|=t,i.memoizedState=dd(1|e,n,s,r)}function I5(t,e){return Jf(8390656,8,t,e)}function q2(t,e){return bm(2048,8,t,e)}function bx(t,e){return bm(4,2,t,e)}function xx(t,e){return bm(4,4,t,e)}function Sx(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Ax(t,e,n){return n=n!=null?n.concat([t]):null,bm(4,4,Sx.bind(null,e,t),n)}function z2(){}function Ex(t,e){var n=qi();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&U2(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Nx(t,e){var n=qi();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&U2(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Ix(t,e,n){return $l&21?(cs(n,e)||(n=Lb(),gn.lanes|=n,Hl|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,ii=!0),t.memoizedState=n)}function TI(t,e){var n=Kt;Kt=n!==0&&4>n?n:4,t(!0);var r=Gg.transition;Gg.transition={};try{t(!1),e()}finally{Kt=n,Gg.transition=r}}function Tx(){return qi().memoizedState}function kI(t,e,n){var r=Fa(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},kx(t))Px(e,n);else if(n=cx(t,e,n,r),n!==null){var i=Br();us(n,t,r,i),Cx(n,e,r)}}function PI(t,e,n){var r=Fa(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(kx(t))Px(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,cs(a,o)){var l=e.interleaved;l===null?(i.next=i,j2(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=cx(t,e,i,r),n!==null&&(i=Br(),us(n,t,r,i),Cx(n,e,r))}}function kx(t){var e=t.alternate;return t===gn||e!==null&&e===gn}function Px(t,e){Vh=jp=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Cx(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,w2(t,n)}}var Dp={readContext:Bi,useCallback:_r,useContext:_r,useEffect:_r,useImperativeHandle:_r,useInsertionEffect:_r,useLayoutEffect:_r,useMemo:_r,useReducer:_r,useRef:_r,useState:_r,useDebugValue:_r,useDeferredValue:_r,useTransition:_r,useMutableSource:_r,useSyncExternalStore:_r,useId:_r,unstable_isNewReconciler:!1},CI={readContext:Bi,useCallback:function(t,e){return Rs().memoizedState=[t,e===void 0?null:e],t},useContext:Bi,useEffect:I5,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Jf(4194308,4,Sx.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Jf(4194308,4,t,e)},useInsertionEffect:function(t,e){return Jf(4,2,t,e)},useMemo:function(t,e){var n=Rs();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Rs();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=kI.bind(null,gn,t),[r.memoizedState,t]},useRef:function(t){var e=Rs();return t={current:t},e.memoizedState=t},useState:N5,useDebugValue:z2,useDeferredValue:function(t){return Rs().memoizedState=t},useTransition:function(){var t=N5(!1),e=t[0];return t=TI.bind(null,t[1]),Rs().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=gn,i=Rs();if(pn){if(n===void 0)throw Error(qe(407));n=n()}else{if(n=e(),nr===null)throw Error(qe(349));$l&30||mx(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,I5(vx.bind(null,r,s,t),[t]),r.flags|=2048,dd(9,gx.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Rs(),e=nr.identifierPrefix;if(pn){var n=wo,r=_o;n=(r&~(1<<32-ls(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=cd++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=II++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},LI={readContext:Bi,useCallback:Ex,useContext:Bi,useEffect:q2,useImperativeHandle:Ax,useInsertionEffect:bx,useLayoutEffect:xx,useMemo:Nx,useReducer:Kg,useRef:wx,useState:function(){return Kg(hd)},useDebugValue:z2,useDeferredValue:function(t){var e=qi();return Ix(e,Kn.memoizedState,t)},useTransition:function(){var t=Kg(hd)[0],e=qi().memoizedState;return[t,e]},useMutableSource:fx,useSyncExternalStore:px,useId:Tx,unstable_isNewReconciler:!1},RI={readContext:Bi,useCallback:Ex,useContext:Bi,useEffect:q2,useImperativeHandle:Ax,useInsertionEffect:bx,useLayoutEffect:xx,useMemo:Nx,useReducer:Qg,useRef:wx,useState:function(){return Qg(hd)},useDebugValue:z2,useDeferredValue:function(t){var e=qi();return Kn===null?e.memoizedState=t:Ix(e,Kn.memoizedState,t)},useTransition:function(){var t=Qg(hd)[0],e=qi().memoizedState;return[t,e]},useMutableSource:fx,useSyncExternalStore:px,useId:Tx,unstable_isNewReconciler:!1};function is(t,e){if(t&&t.defaultProps){e=yn({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function r0(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:yn({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var xm={isMounted:function(t){return(t=t._reactInternals)?eu(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Br(),i=Fa(t),s=Eo(r,i);s.payload=e,n!=null&&(s.callback=n),e=Da(t,s,i),e!==null&&(us(e,t,i,r),Yf(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Br(),i=Fa(t),s=Eo(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Da(t,s,i),e!==null&&(us(e,t,i,r),Yf(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Br(),r=Fa(t),i=Eo(n,r);i.tag=2,e!=null&&(i.callback=e),e=Da(t,i,r),e!==null&&(us(e,t,r,n),Yf(e,t,r))}};function T5(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!id(n,r)||!id(i,s):!0}function Lx(t,e,n){var r=!1,i=Ha,s=e.contextType;return typeof s=="object"&&s!==null?s=Bi(s):(i=oi(e)?ql:Pr.current,r=e.contextTypes,s=(r=r!=null)?_c(t,i):Ha),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=xm,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function k5(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&xm.enqueueReplaceState(e,e.state,null)}function i0(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},D2(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Bi(s):(s=oi(e)?ql:Pr.current,i.context=_c(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(r0(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&xm.enqueueReplaceState(i,i.state,null),Lp(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Sc(t,e){try{var n="",r=e;do n+=aN(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Yg(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function s0(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var jI=typeof WeakMap=="function"?WeakMap:Map;function Rx(t,e,n){n=Eo(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Fp||(Fp=!0,m0=r),s0(t,e)},n}function jx(t,e,n){n=Eo(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){s0(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){s0(t,e),typeof r!="function"&&(Oa===null?Oa=new Set([this]):Oa.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function P5(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new jI;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=KI.bind(null,t,e,n),e.then(t,t))}function C5(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function L5(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Eo(-1,1),e.tag=2,Da(n,e,1))),n.lanes|=1),t)}var DI=Oo.ReactCurrentOwner,ii=!1;function Vr(t,e,n,r){e.child=t===null?ux(e,null,n,r):bc(e,t.child,n,r)}function R5(t,e,n,r,i){n=n.render;var s=e.ref;return lc(e,i),r=V2(t,e,n,r,s,i),n=B2(),t!==null&&!ii?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Co(t,e,i)):(pn&&n&&T2(e),e.flags|=1,Vr(t,e,r,i),e.child)}function j5(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!X2(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,Dx(t,e,s,r,i)):(t=np(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:id,n(o,r)&&t.ref===e.ref)return Co(t,e,i)}return e.flags|=1,t=Ma(s,r),t.ref=e.ref,t.return=e,e.child=t}function Dx(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(id(s,r)&&t.ref===e.ref)if(ii=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(ii=!0);else return e.lanes=t.lanes,Co(t,e,i)}return o0(t,e,n,r,i)}function Ox(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},rn(ec,yi),yi|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,rn(ec,yi),yi|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,rn(ec,yi),yi|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,rn(ec,yi),yi|=r;return Vr(t,e,i,n),e.child}function Fx(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function o0(t,e,n,r,i){var s=oi(n)?ql:Pr.current;return s=_c(e,s),lc(e,i),n=V2(t,e,n,r,s,i),r=B2(),t!==null&&!ii?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Co(t,e,i)):(pn&&r&&T2(e),e.flags|=1,Vr(t,e,n,i),e.child)}function D5(t,e,n,r,i){if(oi(n)){var s=!0;Ip(e)}else s=!1;if(lc(e,i),e.stateNode===null)Zf(t,e),Lx(e,n,r),i0(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=Bi(u):(u=oi(n)?ql:Pr.current,u=_c(e,u));var h=n.getDerivedStateFromProps,f=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==u)&&k5(e,o,r,u),ya=!1;var m=e.memoizedState;o.state=m,Lp(e,r,o,i),l=e.memoizedState,a!==r||m!==l||si.current||ya?(typeof h=="function"&&(r0(e,n,h,r),l=e.memoizedState),(a=ya||T5(e,n,a,r,m,l,u))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,hx(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:is(e.type,a),o.props=u,f=e.pendingProps,m=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Bi(l):(l=oi(n)?ql:Pr.current,l=_c(e,l));var p=n.getDerivedStateFromProps;(h=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||m!==l)&&k5(e,o,r,l),ya=!1,m=e.memoizedState,o.state=m,Lp(e,r,o,i);var b=e.memoizedState;a!==f||m!==b||si.current||ya?(typeof p=="function"&&(r0(e,n,p,r),b=e.memoizedState),(u=ya||T5(e,n,u,r,m,b,l)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,b,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,b,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=b),o.props=r,o.state=b,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),r=!1)}return a0(t,e,n,r,s,i)}function a0(t,e,n,r,i,s){Fx(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&w5(e,n,!1),Co(t,e,s);r=e.stateNode,DI.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=bc(e,t.child,null,s),e.child=bc(e,null,a,s)):Vr(t,e,a,s),e.memoizedState=r.state,i&&w5(e,n,!0),e.child}function Mx(t){var e=t.stateNode;e.pendingContext?_5(t,e.pendingContext,e.pendingContext!==e.context):e.context&&_5(t,e.context,!1),O2(t,e.containerInfo)}function O5(t,e,n,r,i){return wc(),P2(i),e.flags|=256,Vr(t,e,n,r),e.child}var l0={dehydrated:null,treeContext:null,retryLane:0};function u0(t){return{baseLanes:t,cachePool:null,transitions:null}}function Ux(t,e,n){var r=e.pendingProps,i=mn.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),rn(mn,i&1),t===null)return t0(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Em(o,r,0,null),t=Ml(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=u0(n),e.memoizedState=l0,t):$2(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return OI(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Ma(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Ma(a,s):(s=Ml(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?u0(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=l0,r}return s=t.child,t=s.sibling,r=Ma(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function $2(t,e){return e=Em({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function kf(t,e,n,r){return r!==null&&P2(r),bc(e,t.child,null,n),t=$2(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function OI(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Yg(Error(qe(422))),kf(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Em({mode:"visible",children:r.children},i,0,null),s=Ml(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&bc(e,t.child,null,o),e.child.memoizedState=u0(o),e.memoizedState=l0,s);if(!(e.mode&1))return kf(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(qe(419)),r=Yg(s,r,void 0),kf(t,e,o,r)}if(a=(o&t.childLanes)!==0,ii||a){if(r=nr,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Po(t,i),us(r,t,i,-1))}return Y2(),r=Yg(Error(qe(421))),kf(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=QI.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,_i=ja(i.nextSibling),Si=e,pn=!0,as=null,t!==null&&(Di[Oi++]=_o,Di[Oi++]=wo,Di[Oi++]=zl,_o=t.id,wo=t.overflow,zl=e),e=$2(e,r.children),e.flags|=4096,e)}function F5(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),n0(t.return,e,n)}function Xg(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Vx(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Vr(t,e,r.children,n),r=mn.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&F5(t,n,e);else if(t.tag===19)F5(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(rn(mn,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Rp(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Xg(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Rp(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Xg(e,!0,n,null,s);break;case"together":Xg(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Zf(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Co(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Hl|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(qe(153));if(e.child!==null){for(t=e.child,n=Ma(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Ma(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function FI(t,e,n){switch(e.tag){case 3:Mx(e),wc();break;case 5:dx(e);break;case 1:oi(e.type)&&Ip(e);break;case 4:O2(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;rn(Pp,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(rn(mn,mn.current&1),e.flags|=128,null):n&e.child.childLanes?Ux(t,e,n):(rn(mn,mn.current&1),t=Co(t,e,n),t!==null?t.sibling:null);rn(mn,mn.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Vx(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),rn(mn,mn.current),r)break;return null;case 22:case 23:return e.lanes=0,Ox(t,e,n)}return Co(t,e,n)}var Bx,c0,qx,zx;Bx=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};c0=function(){};qx=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,jl(Us.current);var s=null;switch(n){case"input":i=L1(t,i),r=L1(t,r),s=[];break;case"select":i=yn({},i,{value:void 0}),r=yn({},r,{value:void 0}),s=[];break;case"textarea":i=D1(t,i),r=D1(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Ep)}F1(n,r);var o;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Xh.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var l=r[u];if(a=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Xh.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&ln("scroll",t),s||a===l||(s=[])):(s=s||[]).push(u,l))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};zx=function(t,e,n,r){n!==r&&(e.flags|=4)};function yh(t,e){if(!pn)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function wr(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function MI(t,e,n){var r=e.pendingProps;switch(k2(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return wr(e),null;case 1:return oi(e.type)&&Np(),wr(e),null;case 3:return r=e.stateNode,xc(),hn(si),hn(Pr),M2(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(If(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,as!==null&&(y0(as),as=null))),c0(t,e),wr(e),null;case 5:F2(e);var i=jl(ud.current);if(n=e.type,t!==null&&e.stateNode!=null)qx(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(qe(166));return wr(e),null}if(t=jl(Us.current),If(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Ds]=e,r[ad]=s,t=(e.mode&1)!==0,n){case"dialog":ln("cancel",r),ln("close",r);break;case"iframe":case"object":case"embed":ln("load",r);break;case"video":case"audio":for(i=0;i<Ih.length;i++)ln(Ih[i],r);break;case"source":ln("error",r);break;case"img":case"image":case"link":ln("error",r),ln("load",r);break;case"details":ln("toggle",r);break;case"input":Wy(r,s),ln("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},ln("invalid",r);break;case"textarea":Ky(r,s),ln("invalid",r)}F1(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Nf(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Nf(r.textContent,a,t),i=["children",""+a]):Xh.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&ln("scroll",r)}switch(n){case"input":yf(r),Gy(r,s,!0);break;case"textarea":yf(r),Qy(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Ep)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=vb(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Ds]=e,t[ad]=r,Bx(t,e,!1,!1),e.stateNode=t;e:{switch(o=M1(n,r),n){case"dialog":ln("cancel",t),ln("close",t),i=r;break;case"iframe":case"object":case"embed":ln("load",t),i=r;break;case"video":case"audio":for(i=0;i<Ih.length;i++)ln(Ih[i],t);i=r;break;case"source":ln("error",t),i=r;break;case"img":case"image":case"link":ln("error",t),ln("load",t),i=r;break;case"details":ln("toggle",t),i=r;break;case"input":Wy(t,r),i=L1(t,r),ln("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=yn({},r,{value:void 0}),ln("invalid",t);break;case"textarea":Ky(t,r),i=D1(t,r),ln("invalid",t);break;default:i=r}F1(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?wb(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&yb(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Jh(t,l):typeof l=="number"&&Jh(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Xh.hasOwnProperty(s)?l!=null&&s==="onScroll"&&ln("scroll",t):l!=null&&p2(t,s,l,o))}switch(n){case"input":yf(t),Gy(t,r,!1);break;case"textarea":yf(t),Qy(t);break;case"option":r.value!=null&&t.setAttribute("value",""+$a(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?ic(t,!!r.multiple,s,!1):r.defaultValue!=null&&ic(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Ep)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return wr(e),null;case 6:if(t&&e.stateNode!=null)zx(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(qe(166));if(n=jl(ud.current),jl(Us.current),If(e)){if(r=e.stateNode,n=e.memoizedProps,r[Ds]=e,(s=r.nodeValue!==n)&&(t=Si,t!==null))switch(t.tag){case 3:Nf(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Nf(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Ds]=e,e.stateNode=r}return wr(e),null;case 13:if(hn(mn),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(pn&&_i!==null&&e.mode&1&&!(e.flags&128))ax(),wc(),e.flags|=98560,s=!1;else if(s=If(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(qe(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(qe(317));s[Ds]=e}else wc(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;wr(e),s=!1}else as!==null&&(y0(as),as=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||mn.current&1?Qn===0&&(Qn=3):Y2())),e.updateQueue!==null&&(e.flags|=4),wr(e),null);case 4:return xc(),c0(t,e),t===null&&sd(e.stateNode.containerInfo),wr(e),null;case 10:return R2(e.type._context),wr(e),null;case 17:return oi(e.type)&&Np(),wr(e),null;case 19:if(hn(mn),s=e.memoizedState,s===null)return wr(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)yh(s,!1);else{if(Qn!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Rp(t),o!==null){for(e.flags|=128,yh(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return rn(mn,mn.current&1|2),e.child}t=t.sibling}s.tail!==null&&jn()>Ac&&(e.flags|=128,r=!0,yh(s,!1),e.lanes=4194304)}else{if(!r)if(t=Rp(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),yh(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!pn)return wr(e),null}else 2*jn()-s.renderingStartTime>Ac&&n!==1073741824&&(e.flags|=128,r=!0,yh(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=jn(),e.sibling=null,n=mn.current,rn(mn,r?n&1|2:n&1),e):(wr(e),null);case 22:case 23:return Q2(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?yi&1073741824&&(wr(e),e.subtreeFlags&6&&(e.flags|=8192)):wr(e),null;case 24:return null;case 25:return null}throw Error(qe(156,e.tag))}function UI(t,e){switch(k2(e),e.tag){case 1:return oi(e.type)&&Np(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return xc(),hn(si),hn(Pr),M2(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return F2(e),null;case 13:if(hn(mn),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(qe(340));wc()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return hn(mn),null;case 4:return xc(),null;case 10:return R2(e.type._context),null;case 22:case 23:return Q2(),null;case 24:return null;default:return null}}var Pf=!1,Ir=!1,VI=typeof WeakSet=="function"?WeakSet:Set,et=null;function Zu(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){In(t,e,r)}else n.current=null}function h0(t,e,n){try{n()}catch(r){In(t,e,r)}}var M5=!1;function BI(t,e){if(K1=xp,t=Kb(),I2(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,h=0,f=t,m=null;t:for(;;){for(var p;f!==n||i!==0&&f.nodeType!==3||(a=o+i),f!==s||r!==0&&f.nodeType!==3||(l=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(p=f.firstChild)!==null;)m=f,f=p;for(;;){if(f===t)break t;if(m===n&&++u===i&&(a=o),m===s&&++h===r&&(l=o),(p=f.nextSibling)!==null)break;f=m,m=f.parentNode}f=p}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Q1={focusedElem:t,selectionRange:n},xp=!1,et=e;et!==null;)if(e=et,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,et=t;else for(;et!==null;){e=et;try{var b=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var x=b.memoizedProps,I=b.memoizedState,_=e.stateNode,E=_.getSnapshotBeforeUpdate(e.elementType===e.type?x:is(e.type,x),I);_.__reactInternalSnapshotBeforeUpdate=E}break;case 3:var C=e.stateNode.containerInfo;C.nodeType===1?C.textContent="":C.nodeType===9&&C.documentElement&&C.removeChild(C.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(qe(163))}}catch(O){In(e,e.return,O)}if(t=e.sibling,t!==null){t.return=e.return,et=t;break}et=e.return}return b=M5,M5=!1,b}function Bh(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&h0(e,n,s)}i=i.next}while(i!==r)}}function Sm(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function d0(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function $x(t){var e=t.alternate;e!==null&&(t.alternate=null,$x(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Ds],delete e[ad],delete e[J1],delete e[SI],delete e[AI])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Hx(t){return t.tag===5||t.tag===3||t.tag===4}function U5(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Hx(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function f0(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Ep));else if(r!==4&&(t=t.child,t!==null))for(f0(t,e,n),t=t.sibling;t!==null;)f0(t,e,n),t=t.sibling}function p0(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(p0(t,e,n),t=t.sibling;t!==null;)p0(t,e,n),t=t.sibling}var ur=null,os=!1;function fa(t,e,n){for(n=n.child;n!==null;)Wx(t,e,n),n=n.sibling}function Wx(t,e,n){if(Ms&&typeof Ms.onCommitFiberUnmount=="function")try{Ms.onCommitFiberUnmount(mm,n)}catch{}switch(n.tag){case 5:Ir||Zu(n,e);case 6:var r=ur,i=os;ur=null,fa(t,e,n),ur=r,os=i,ur!==null&&(os?(t=ur,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):ur.removeChild(n.stateNode));break;case 18:ur!==null&&(os?(t=ur,n=n.stateNode,t.nodeType===8?$g(t.parentNode,n):t.nodeType===1&&$g(t,n),nd(t)):$g(ur,n.stateNode));break;case 4:r=ur,i=os,ur=n.stateNode.containerInfo,os=!0,fa(t,e,n),ur=r,os=i;break;case 0:case 11:case 14:case 15:if(!Ir&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&h0(n,e,o),i=i.next}while(i!==r)}fa(t,e,n);break;case 1:if(!Ir&&(Zu(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){In(n,e,a)}fa(t,e,n);break;case 21:fa(t,e,n);break;case 22:n.mode&1?(Ir=(r=Ir)||n.memoizedState!==null,fa(t,e,n),Ir=r):fa(t,e,n);break;default:fa(t,e,n)}}function V5(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new VI),e.forEach(function(r){var i=YI.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function es(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:ur=a.stateNode,os=!1;break e;case 3:ur=a.stateNode.containerInfo,os=!0;break e;case 4:ur=a.stateNode.containerInfo,os=!0;break e}a=a.return}if(ur===null)throw Error(qe(160));Wx(s,o,i),ur=null,os=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){In(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Gx(e,t),e=e.sibling}function Gx(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(es(e,t),Ps(t),r&4){try{Bh(3,t,t.return),Sm(3,t)}catch(x){In(t,t.return,x)}try{Bh(5,t,t.return)}catch(x){In(t,t.return,x)}}break;case 1:es(e,t),Ps(t),r&512&&n!==null&&Zu(n,n.return);break;case 5:if(es(e,t),Ps(t),r&512&&n!==null&&Zu(n,n.return),t.flags&32){var i=t.stateNode;try{Jh(i,"")}catch(x){In(t,t.return,x)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&mb(i,s),M1(a,o);var u=M1(a,s);for(o=0;o<l.length;o+=2){var h=l[o],f=l[o+1];h==="style"?wb(i,f):h==="dangerouslySetInnerHTML"?yb(i,f):h==="children"?Jh(i,f):p2(i,h,f,u)}switch(a){case"input":R1(i,s);break;case"textarea":gb(i,s);break;case"select":var m=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var p=s.value;p!=null?ic(i,!!s.multiple,p,!1):m!==!!s.multiple&&(s.defaultValue!=null?ic(i,!!s.multiple,s.defaultValue,!0):ic(i,!!s.multiple,s.multiple?[]:"",!1))}i[ad]=s}catch(x){In(t,t.return,x)}}break;case 6:if(es(e,t),Ps(t),r&4){if(t.stateNode===null)throw Error(qe(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(x){In(t,t.return,x)}}break;case 3:if(es(e,t),Ps(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{nd(e.containerInfo)}catch(x){In(t,t.return,x)}break;case 4:es(e,t),Ps(t);break;case 13:es(e,t),Ps(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(G2=jn())),r&4&&V5(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(Ir=(u=Ir)||h,es(e,t),Ir=u):es(e,t),Ps(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!h&&t.mode&1)for(et=t,h=t.child;h!==null;){for(f=et=h;et!==null;){switch(m=et,p=m.child,m.tag){case 0:case 11:case 14:case 15:Bh(4,m,m.return);break;case 1:Zu(m,m.return);var b=m.stateNode;if(typeof b.componentWillUnmount=="function"){r=m,n=m.return;try{e=r,b.props=e.memoizedProps,b.state=e.memoizedState,b.componentWillUnmount()}catch(x){In(r,n,x)}}break;case 5:Zu(m,m.return);break;case 22:if(m.memoizedState!==null){q5(f);continue}}p!==null?(p.return=m,et=p):q5(f)}h=h.sibling}e:for(h=null,f=t;;){if(f.tag===5){if(h===null){h=f;try{i=f.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=f.stateNode,l=f.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=_b("display",o))}catch(x){In(t,t.return,x)}}}else if(f.tag===6){if(h===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(x){In(t,t.return,x)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:es(e,t),Ps(t),r&4&&V5(t);break;case 21:break;default:es(e,t),Ps(t)}}function Ps(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Hx(n)){var r=n;break e}n=n.return}throw Error(qe(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Jh(i,""),r.flags&=-33);var s=U5(t);p0(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=U5(t);f0(t,a,o);break;default:throw Error(qe(161))}}catch(l){In(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function qI(t,e,n){et=t,Kx(t)}function Kx(t,e,n){for(var r=(t.mode&1)!==0;et!==null;){var i=et,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Pf;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Ir;a=Pf;var u=Ir;if(Pf=o,(Ir=l)&&!u)for(et=i;et!==null;)o=et,l=o.child,o.tag===22&&o.memoizedState!==null?z5(i):l!==null?(l.return=o,et=l):z5(i);for(;s!==null;)et=s,Kx(s),s=s.sibling;et=i,Pf=a,Ir=u}B5(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,et=s):B5(t)}}function B5(t){for(;et!==null;){var e=et;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ir||Sm(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Ir)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:is(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&E5(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}E5(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var f=h.dehydrated;f!==null&&nd(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(qe(163))}Ir||e.flags&512&&d0(e)}catch(m){In(e,e.return,m)}}if(e===t){et=null;break}if(n=e.sibling,n!==null){n.return=e.return,et=n;break}et=e.return}}function q5(t){for(;et!==null;){var e=et;if(e===t){et=null;break}var n=e.sibling;if(n!==null){n.return=e.return,et=n;break}et=e.return}}function z5(t){for(;et!==null;){var e=et;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Sm(4,e)}catch(l){In(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){In(e,i,l)}}var s=e.return;try{d0(e)}catch(l){In(e,s,l)}break;case 5:var o=e.return;try{d0(e)}catch(l){In(e,o,l)}}}catch(l){In(e,e.return,l)}if(e===t){et=null;break}var a=e.sibling;if(a!==null){a.return=e.return,et=a;break}et=e.return}}var zI=Math.ceil,Op=Oo.ReactCurrentDispatcher,H2=Oo.ReactCurrentOwner,Ui=Oo.ReactCurrentBatchConfig,Ft=0,nr=null,zn=null,dr=0,yi=0,ec=el(0),Qn=0,fd=null,Hl=0,Am=0,W2=0,qh=null,ti=null,G2=0,Ac=1/0,vo=null,Fp=!1,m0=null,Oa=null,Cf=!1,Ia=null,Mp=0,zh=0,g0=null,ep=-1,tp=0;function Br(){return Ft&6?jn():ep!==-1?ep:ep=jn()}function Fa(t){return t.mode&1?Ft&2&&dr!==0?dr&-dr:NI.transition!==null?(tp===0&&(tp=Lb()),tp):(t=Kt,t!==0||(t=window.event,t=t===void 0?16:Ub(t.type)),t):1}function us(t,e,n,r){if(50<zh)throw zh=0,g0=null,Error(qe(185));Td(t,n,r),(!(Ft&2)||t!==nr)&&(t===nr&&(!(Ft&2)&&(Am|=n),Qn===4&&wa(t,dr)),ai(t,r),n===1&&Ft===0&&!(e.mode&1)&&(Ac=jn()+500,wm&&tl()))}function ai(t,e){var n=t.callbackNode;NN(t,e);var r=bp(t,t===nr?dr:0);if(r===0)n!==null&&Jy(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Jy(n),e===1)t.tag===0?EI($5.bind(null,t)):ix($5.bind(null,t)),bI(function(){!(Ft&6)&&tl()}),n=null;else{switch(Rb(r)){case 1:n=_2;break;case 4:n=Pb;break;case 16:n=wp;break;case 536870912:n=Cb;break;default:n=wp}n=n4(n,Qx.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Qx(t,e){if(ep=-1,tp=0,Ft&6)throw Error(qe(327));var n=t.callbackNode;if(uc()&&t.callbackNode!==n)return null;var r=bp(t,t===nr?dr:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Up(t,r);else{e=r;var i=Ft;Ft|=2;var s=Xx();(nr!==t||dr!==e)&&(vo=null,Ac=jn()+500,Fl(t,e));do try{WI();break}catch(a){Yx(t,a)}while(!0);L2(),Op.current=s,Ft=i,zn!==null?e=0:(nr=null,dr=0,e=Qn)}if(e!==0){if(e===2&&(i=z1(t),i!==0&&(r=i,e=v0(t,i))),e===1)throw n=fd,Fl(t,0),wa(t,r),ai(t,jn()),n;if(e===6)wa(t,r);else{if(i=t.current.alternate,!(r&30)&&!$I(i)&&(e=Up(t,r),e===2&&(s=z1(t),s!==0&&(r=s,e=v0(t,s))),e===1))throw n=fd,Fl(t,0),wa(t,r),ai(t,jn()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(qe(345));case 2:Il(t,ti,vo);break;case 3:if(wa(t,r),(r&130023424)===r&&(e=G2+500-jn(),10<e)){if(bp(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Br(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=X1(Il.bind(null,t,ti,vo),e);break}Il(t,ti,vo);break;case 4:if(wa(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-ls(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=jn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*zI(r/1960))-r,10<r){t.timeoutHandle=X1(Il.bind(null,t,ti,vo),r);break}Il(t,ti,vo);break;case 5:Il(t,ti,vo);break;default:throw Error(qe(329))}}}return ai(t,jn()),t.callbackNode===n?Qx.bind(null,t):null}function v0(t,e){var n=qh;return t.current.memoizedState.isDehydrated&&(Fl(t,e).flags|=256),t=Up(t,e),t!==2&&(e=ti,ti=n,e!==null&&y0(e)),t}function y0(t){ti===null?ti=t:ti.push.apply(ti,t)}function $I(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!cs(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function wa(t,e){for(e&=~W2,e&=~Am,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-ls(e),r=1<<n;t[n]=-1,e&=~r}}function $5(t){if(Ft&6)throw Error(qe(327));uc();var e=bp(t,0);if(!(e&1))return ai(t,jn()),null;var n=Up(t,e);if(t.tag!==0&&n===2){var r=z1(t);r!==0&&(e=r,n=v0(t,r))}if(n===1)throw n=fd,Fl(t,0),wa(t,e),ai(t,jn()),n;if(n===6)throw Error(qe(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Il(t,ti,vo),ai(t,jn()),null}function K2(t,e){var n=Ft;Ft|=1;try{return t(e)}finally{Ft=n,Ft===0&&(Ac=jn()+500,wm&&tl())}}function Wl(t){Ia!==null&&Ia.tag===0&&!(Ft&6)&&uc();var e=Ft;Ft|=1;var n=Ui.transition,r=Kt;try{if(Ui.transition=null,Kt=1,t)return t()}finally{Kt=r,Ui.transition=n,Ft=e,!(Ft&6)&&tl()}}function Q2(){yi=ec.current,hn(ec)}function Fl(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,wI(n)),zn!==null)for(n=zn.return;n!==null;){var r=n;switch(k2(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Np();break;case 3:xc(),hn(si),hn(Pr),M2();break;case 5:F2(r);break;case 4:xc();break;case 13:hn(mn);break;case 19:hn(mn);break;case 10:R2(r.type._context);break;case 22:case 23:Q2()}n=n.return}if(nr=t,zn=t=Ma(t.current,null),dr=yi=e,Qn=0,fd=null,W2=Am=Hl=0,ti=qh=null,Rl!==null){for(e=0;e<Rl.length;e++)if(n=Rl[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Rl=null}return t}function Yx(t,e){do{var n=zn;try{if(L2(),Xf.current=Dp,jp){for(var r=gn.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}jp=!1}if($l=0,er=Kn=gn=null,Vh=!1,cd=0,H2.current=null,n===null||n.return===null){Qn=1,fd=e,zn=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=dr,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,h=a,f=h.tag;if(!(h.mode&1)&&(f===0||f===11||f===15)){var m=h.alternate;m?(h.updateQueue=m.updateQueue,h.memoizedState=m.memoizedState,h.lanes=m.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=C5(o);if(p!==null){p.flags&=-257,L5(p,o,a,s,e),p.mode&1&&P5(s,u,e),e=p,l=u;var b=e.updateQueue;if(b===null){var x=new Set;x.add(l),e.updateQueue=x}else b.add(l);break e}else{if(!(e&1)){P5(s,u,e),Y2();break e}l=Error(qe(426))}}else if(pn&&a.mode&1){var I=C5(o);if(I!==null){!(I.flags&65536)&&(I.flags|=256),L5(I,o,a,s,e),P2(Sc(l,a));break e}}s=l=Sc(l,a),Qn!==4&&(Qn=2),qh===null?qh=[s]:qh.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var _=Rx(s,l,e);A5(s,_);break e;case 1:a=l;var E=s.type,C=s.stateNode;if(!(s.flags&128)&&(typeof E.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(Oa===null||!Oa.has(C)))){s.flags|=65536,e&=-e,s.lanes|=e;var O=jx(s,a,e);A5(s,O);break e}}s=s.return}while(s!==null)}Zx(n)}catch(K){e=K,zn===n&&n!==null&&(zn=n=n.return);continue}break}while(!0)}function Xx(){var t=Op.current;return Op.current=Dp,t===null?Dp:t}function Y2(){(Qn===0||Qn===3||Qn===2)&&(Qn=4),nr===null||!(Hl&268435455)&&!(Am&268435455)||wa(nr,dr)}function Up(t,e){var n=Ft;Ft|=2;var r=Xx();(nr!==t||dr!==e)&&(vo=null,Fl(t,e));do try{HI();break}catch(i){Yx(t,i)}while(!0);if(L2(),Ft=n,Op.current=r,zn!==null)throw Error(qe(261));return nr=null,dr=0,Qn}function HI(){for(;zn!==null;)Jx(zn)}function WI(){for(;zn!==null&&!vN();)Jx(zn)}function Jx(t){var e=t4(t.alternate,t,yi);t.memoizedProps=t.pendingProps,e===null?Zx(t):zn=e,H2.current=null}function Zx(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=UI(n,e),n!==null){n.flags&=32767,zn=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Qn=6,zn=null;return}}else if(n=MI(n,e,yi),n!==null){zn=n;return}if(e=e.sibling,e!==null){zn=e;return}zn=e=t}while(e!==null);Qn===0&&(Qn=5)}function Il(t,e,n){var r=Kt,i=Ui.transition;try{Ui.transition=null,Kt=1,GI(t,e,n,r)}finally{Ui.transition=i,Kt=r}return null}function GI(t,e,n,r){do uc();while(Ia!==null);if(Ft&6)throw Error(qe(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(qe(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(IN(t,s),t===nr&&(zn=nr=null,dr=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Cf||(Cf=!0,n4(wp,function(){return uc(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Ui.transition,Ui.transition=null;var o=Kt;Kt=1;var a=Ft;Ft|=4,H2.current=null,BI(t,n),Gx(n,t),fI(Q1),xp=!!K1,Q1=K1=null,t.current=n,qI(n),yN(),Ft=a,Kt=o,Ui.transition=s}else t.current=n;if(Cf&&(Cf=!1,Ia=t,Mp=i),s=t.pendingLanes,s===0&&(Oa=null),bN(n.stateNode),ai(t,jn()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Fp)throw Fp=!1,t=m0,m0=null,t;return Mp&1&&t.tag!==0&&uc(),s=t.pendingLanes,s&1?t===g0?zh++:(zh=0,g0=t):zh=0,tl(),null}function uc(){if(Ia!==null){var t=Rb(Mp),e=Ui.transition,n=Kt;try{if(Ui.transition=null,Kt=16>t?16:t,Ia===null)var r=!1;else{if(t=Ia,Ia=null,Mp=0,Ft&6)throw Error(qe(331));var i=Ft;for(Ft|=4,et=t.current;et!==null;){var s=et,o=s.child;if(et.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(et=u;et!==null;){var h=et;switch(h.tag){case 0:case 11:case 15:Bh(8,h,s)}var f=h.child;if(f!==null)f.return=h,et=f;else for(;et!==null;){h=et;var m=h.sibling,p=h.return;if($x(h),h===u){et=null;break}if(m!==null){m.return=p,et=m;break}et=p}}}var b=s.alternate;if(b!==null){var x=b.child;if(x!==null){b.child=null;do{var I=x.sibling;x.sibling=null,x=I}while(x!==null)}}et=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,et=o;else e:for(;et!==null;){if(s=et,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Bh(9,s,s.return)}var _=s.sibling;if(_!==null){_.return=s.return,et=_;break e}et=s.return}}var E=t.current;for(et=E;et!==null;){o=et;var C=o.child;if(o.subtreeFlags&2064&&C!==null)C.return=o,et=C;else e:for(o=E;et!==null;){if(a=et,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Sm(9,a)}}catch(K){In(a,a.return,K)}if(a===o){et=null;break e}var O=a.sibling;if(O!==null){O.return=a.return,et=O;break e}et=a.return}}if(Ft=i,tl(),Ms&&typeof Ms.onPostCommitFiberRoot=="function")try{Ms.onPostCommitFiberRoot(mm,t)}catch{}r=!0}return r}finally{Kt=n,Ui.transition=e}}return!1}function H5(t,e,n){e=Sc(n,e),e=Rx(t,e,1),t=Da(t,e,1),e=Br(),t!==null&&(Td(t,1,e),ai(t,e))}function In(t,e,n){if(t.tag===3)H5(t,t,n);else for(;e!==null;){if(e.tag===3){H5(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Oa===null||!Oa.has(r))){t=Sc(n,t),t=jx(e,t,1),e=Da(e,t,1),t=Br(),e!==null&&(Td(e,1,t),ai(e,t));break}}e=e.return}}function KI(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Br(),t.pingedLanes|=t.suspendedLanes&n,nr===t&&(dr&n)===n&&(Qn===4||Qn===3&&(dr&130023424)===dr&&500>jn()-G2?Fl(t,0):W2|=n),ai(t,e)}function e4(t,e){e===0&&(t.mode&1?(e=bf,bf<<=1,!(bf&130023424)&&(bf=4194304)):e=1);var n=Br();t=Po(t,e),t!==null&&(Td(t,e,n),ai(t,n))}function QI(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),e4(t,n)}function YI(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(qe(314))}r!==null&&r.delete(e),e4(t,n)}var t4;t4=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||si.current)ii=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return ii=!1,FI(t,e,n);ii=!!(t.flags&131072)}else ii=!1,pn&&e.flags&1048576&&sx(e,kp,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Zf(t,e),t=e.pendingProps;var i=_c(e,Pr.current);lc(e,n),i=V2(null,e,r,t,i,n);var s=B2();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,oi(r)?(s=!0,Ip(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,D2(e),i.updater=xm,e.stateNode=i,i._reactInternals=e,i0(e,r,t,n),e=a0(null,e,r,!0,s,n)):(e.tag=0,pn&&s&&T2(e),Vr(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Zf(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=JI(r),t=is(r,t),i){case 0:e=o0(null,e,r,t,n);break e;case 1:e=D5(null,e,r,t,n);break e;case 11:e=R5(null,e,r,t,n);break e;case 14:e=j5(null,e,r,is(r.type,t),n);break e}throw Error(qe(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:is(r,i),o0(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:is(r,i),D5(t,e,r,i,n);case 3:e:{if(Mx(e),t===null)throw Error(qe(387));r=e.pendingProps,s=e.memoizedState,i=s.element,hx(t,e),Lp(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Sc(Error(qe(423)),e),e=O5(t,e,r,n,i);break e}else if(r!==i){i=Sc(Error(qe(424)),e),e=O5(t,e,r,n,i);break e}else for(_i=ja(e.stateNode.containerInfo.firstChild),Si=e,pn=!0,as=null,n=ux(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(wc(),r===i){e=Co(t,e,n);break e}Vr(t,e,r,n)}e=e.child}return e;case 5:return dx(e),t===null&&t0(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,Y1(r,i)?o=null:s!==null&&Y1(r,s)&&(e.flags|=32),Fx(t,e),Vr(t,e,o,n),e.child;case 6:return t===null&&t0(e),null;case 13:return Ux(t,e,n);case 4:return O2(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=bc(e,null,r,n):Vr(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:is(r,i),R5(t,e,r,i,n);case 7:return Vr(t,e,e.pendingProps,n),e.child;case 8:return Vr(t,e,e.pendingProps.children,n),e.child;case 12:return Vr(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,rn(Pp,r._currentValue),r._currentValue=o,s!==null)if(cs(s.value,o)){if(s.children===i.children&&!si.current){e=Co(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=Eo(-1,n&-n),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?l.next=l:(l.next=h.next,h.next=l),u.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),n0(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(qe(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),n0(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Vr(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,lc(e,n),i=Bi(i),r=r(i),e.flags|=1,Vr(t,e,r,n),e.child;case 14:return r=e.type,i=is(r,e.pendingProps),i=is(r.type,i),j5(t,e,r,i,n);case 15:return Dx(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:is(r,i),Zf(t,e),e.tag=1,oi(r)?(t=!0,Ip(e)):t=!1,lc(e,n),Lx(e,r,i),i0(e,r,i,n),a0(null,e,r,!0,t,n);case 19:return Vx(t,e,n);case 22:return Ox(t,e,n)}throw Error(qe(156,e.tag))};function n4(t,e){return kb(t,e)}function XI(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mi(t,e,n,r){return new XI(t,e,n,r)}function X2(t){return t=t.prototype,!(!t||!t.isReactComponent)}function JI(t){if(typeof t=="function")return X2(t)?1:0;if(t!=null){if(t=t.$$typeof,t===g2)return 11;if(t===v2)return 14}return 2}function Ma(t,e){var n=t.alternate;return n===null?(n=Mi(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function np(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")X2(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case $u:return Ml(n.children,i,s,e);case m2:o=8,i|=8;break;case T1:return t=Mi(12,n,e,i|2),t.elementType=T1,t.lanes=s,t;case k1:return t=Mi(13,n,e,i),t.elementType=k1,t.lanes=s,t;case P1:return t=Mi(19,n,e,i),t.elementType=P1,t.lanes=s,t;case db:return Em(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case cb:o=10;break e;case hb:o=9;break e;case g2:o=11;break e;case v2:o=14;break e;case va:o=16,r=null;break e}throw Error(qe(130,t==null?t:typeof t,""))}return e=Mi(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Ml(t,e,n,r){return t=Mi(7,t,r,e),t.lanes=n,t}function Em(t,e,n,r){return t=Mi(22,t,r,e),t.elementType=db,t.lanes=n,t.stateNode={isHidden:!1},t}function Jg(t,e,n){return t=Mi(6,t,null,e),t.lanes=n,t}function Zg(t,e,n){return e=Mi(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function ZI(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Rg(0),this.expirationTimes=Rg(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Rg(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function J2(t,e,n,r,i,s,o,a,l){return t=new ZI(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Mi(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},D2(s),t}function eT(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:zu,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function r4(t){if(!t)return Ha;t=t._reactInternals;e:{if(eu(t)!==t||t.tag!==1)throw Error(qe(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(oi(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(qe(171))}if(t.tag===1){var n=t.type;if(oi(n))return rx(t,n,e)}return e}function i4(t,e,n,r,i,s,o,a,l){return t=J2(n,r,!0,t,i,s,o,a,l),t.context=r4(null),n=t.current,r=Br(),i=Fa(n),s=Eo(r,i),s.callback=e??null,Da(n,s,i),t.current.lanes=i,Td(t,i,r),ai(t,r),t}function Nm(t,e,n,r){var i=e.current,s=Br(),o=Fa(i);return n=r4(n),e.context===null?e.context=n:e.pendingContext=n,e=Eo(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Da(i,e,o),t!==null&&(us(t,i,o,s),Yf(t,i,o)),o}function Vp(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function W5(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Z2(t,e){W5(t,e),(t=t.alternate)&&W5(t,e)}function tT(){return null}var s4=typeof reportError=="function"?reportError:function(t){console.error(t)};function ev(t){this._internalRoot=t}Im.prototype.render=ev.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(qe(409));Nm(t,e,null,null)};Im.prototype.unmount=ev.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Wl(function(){Nm(null,t,null,null)}),e[ko]=null}};function Im(t){this._internalRoot=t}Im.prototype.unstable_scheduleHydration=function(t){if(t){var e=Ob();t={blockedOn:null,target:t,priority:e};for(var n=0;n<_a.length&&e!==0&&e<_a[n].priority;n++);_a.splice(n,0,t),n===0&&Mb(t)}};function tv(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Tm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function G5(){}function nT(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=Vp(o);s.call(u)}}var o=i4(e,r,t,0,null,!1,!1,"",G5);return t._reactRootContainer=o,t[ko]=o.current,sd(t.nodeType===8?t.parentNode:t),Wl(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var u=Vp(l);a.call(u)}}var l=J2(t,0,!1,null,null,!1,!1,"",G5);return t._reactRootContainer=l,t[ko]=l.current,sd(t.nodeType===8?t.parentNode:t),Wl(function(){Nm(e,l,n,r)}),l}function km(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=Vp(o);a.call(l)}}Nm(e,o,t,i)}else o=nT(n,e,t,i,r);return Vp(o)}jb=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Nh(e.pendingLanes);n!==0&&(w2(e,n|1),ai(e,jn()),!(Ft&6)&&(Ac=jn()+500,tl()))}break;case 13:Wl(function(){var r=Po(t,1);if(r!==null){var i=Br();us(r,t,1,i)}}),Z2(t,1)}};b2=function(t){if(t.tag===13){var e=Po(t,134217728);if(e!==null){var n=Br();us(e,t,134217728,n)}Z2(t,134217728)}};Db=function(t){if(t.tag===13){var e=Fa(t),n=Po(t,e);if(n!==null){var r=Br();us(n,t,e,r)}Z2(t,e)}};Ob=function(){return Kt};Fb=function(t,e){var n=Kt;try{return Kt=t,e()}finally{Kt=n}};V1=function(t,e,n){switch(e){case"input":if(R1(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=_m(r);if(!i)throw Error(qe(90));pb(r),R1(r,i)}}}break;case"textarea":gb(t,n);break;case"select":e=n.value,e!=null&&ic(t,!!n.multiple,e,!1)}};Sb=K2;Ab=Wl;var rT={usingClientEntryPoint:!1,Events:[Pd,Ku,_m,bb,xb,K2]},_h={findFiberByHostInstance:Ll,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},iT={bundleType:_h.bundleType,version:_h.version,rendererPackageName:_h.rendererPackageName,rendererConfig:_h.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Oo.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Ib(t),t===null?null:t.stateNode},findFiberByHostInstance:_h.findFiberByHostInstance||tT,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Lf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Lf.isDisabled&&Lf.supportsFiber)try{mm=Lf.inject(iT),Ms=Lf}catch{}}Ei.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=rT;Ei.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!tv(e))throw Error(qe(200));return eT(t,e,null,n)};Ei.createRoot=function(t,e){if(!tv(t))throw Error(qe(299));var n=!1,r="",i=s4;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=J2(t,1,!1,null,null,n,!1,r,i),t[ko]=e.current,sd(t.nodeType===8?t.parentNode:t),new ev(e)};Ei.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(qe(188)):(t=Object.keys(t).join(","),Error(qe(268,t)));return t=Ib(e),t=t===null?null:t.stateNode,t};Ei.flushSync=function(t){return Wl(t)};Ei.hydrate=function(t,e,n){if(!Tm(e))throw Error(qe(200));return km(null,t,e,!0,n)};Ei.hydrateRoot=function(t,e,n){if(!tv(t))throw Error(qe(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=s4;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=i4(e,null,t,1,n??null,i,!1,s,o),t[ko]=e.current,sd(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Im(e)};Ei.render=function(t,e,n){if(!Tm(e))throw Error(qe(200));return km(null,t,e,!1,n)};Ei.unmountComponentAtNode=function(t){if(!Tm(t))throw Error(qe(40));return t._reactRootContainer?(Wl(function(){km(null,null,t,!1,function(){t._reactRootContainer=null,t[ko]=null})}),!0):!1};Ei.unstable_batchedUpdates=K2;Ei.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Tm(n))throw Error(qe(200));if(t==null||t._reactInternals===void 0)throw Error(qe(38));return km(t,e,n,!1,r)};Ei.version="18.3.1-next-f1338f8080-20240426";function o4(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(o4)}catch(t){console.error(t)}}o4(),ob.exports=Ei;var sT=ob.exports,K5=sT;N1.createRoot=K5.createRoot,N1.hydrateRoot=K5.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function pd(){return pd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},pd.apply(this,arguments)}var Ta;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Ta||(Ta={}));const Q5="popstate";function oT(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return _0("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:Bp(i)}return lT(e,n,null,t)}function vn(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function a4(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function aT(){return Math.random().toString(36).substr(2,8)}function Y5(t,e){return{usr:t.state,key:t.key,idx:e}}function _0(t,e,n,r){return n===void 0&&(n=null),pd({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Fc(e):e,{state:n,key:e&&e.key||r||aT()})}function Bp(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Fc(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function lT(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=Ta.Pop,l=null,u=h();u==null&&(u=0,o.replaceState(pd({},o.state,{idx:u}),""));function h(){return(o.state||{idx:null}).idx}function f(){a=Ta.Pop;let I=h(),_=I==null?null:I-u;u=I,l&&l({action:a,location:x.location,delta:_})}function m(I,_){a=Ta.Push;let E=_0(x.location,I,_);u=h()+1;let C=Y5(E,u),O=x.createHref(E);try{o.pushState(C,"",O)}catch(K){if(K instanceof DOMException&&K.name==="DataCloneError")throw K;i.location.assign(O)}s&&l&&l({action:a,location:x.location,delta:1})}function p(I,_){a=Ta.Replace;let E=_0(x.location,I,_);u=h();let C=Y5(E,u),O=x.createHref(E);o.replaceState(C,"",O),s&&l&&l({action:a,location:x.location,delta:0})}function b(I){let _=i.location.origin!=="null"?i.location.origin:i.location.href,E=typeof I=="string"?I:Bp(I);return E=E.replace(/ $/,"%20"),vn(_,"No window.location.(origin|href) available to create URL for href: "+E),new URL(E,_)}let x={get action(){return a},get location(){return t(i,o)},listen(I){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(Q5,f),l=I,()=>{i.removeEventListener(Q5,f),l=null}},createHref(I){return e(i,I)},createURL:b,encodeLocation(I){let _=b(I);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:m,replace:p,go(I){return o.go(I)}};return x}var X5;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(X5||(X5={}));function uT(t,e,n){return n===void 0&&(n="/"),cT(t,e,n)}function cT(t,e,n,r){let i=typeof e=="string"?Fc(e):e,s=Ec(i.pathname||"/",n);if(s==null)return null;let o=l4(t);hT(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let u=xT(s);a=wT(o[l],u)}return a}function l4(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(vn(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let u=Ua([r,l.relativePath]),h=n.concat(l);s.children&&s.children.length>0&&(vn(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),l4(s.children,e,h,u)),!(s.path==null&&!s.index)&&e.push({path:u,score:yT(u,s.index),routesMeta:h})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of u4(s.path))i(s,o,l)}),e}function u4(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=u4(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function hT(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:_T(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const dT=/^:[\w-]+$/,fT=3,pT=2,mT=1,gT=10,vT=-2,J5=t=>t==="*";function yT(t,e){let n=t.split("/"),r=n.length;return n.some(J5)&&(r+=vT),e&&(r+=pT),n.filter(i=>!J5(i)).reduce((i,s)=>i+(dT.test(s)?fT:s===""?mT:gT),r)}function _T(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function wT(t,e,n){let{routesMeta:r}=t,i={},s="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],u=a===r.length-1,h=s==="/"?e:e.slice(s.length)||"/",f=w0({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},h),m=l.route;if(!f)return null;Object.assign(i,f.params),o.push({params:i,pathname:Ua([s,f.pathname]),pathnameBase:NT(Ua([s,f.pathnameBase])),route:m}),f.pathnameBase!=="/"&&(s=Ua([s,f.pathnameBase]))}return o}function w0(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=bT(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((u,h,f)=>{let{paramName:m,isOptional:p}=h;if(m==="*"){let x=a[f]||"";o=s.slice(0,s.length-x.length).replace(/(.)\/+$/,"$1")}const b=a[f];return p&&!b?u[m]=void 0:u[m]=(b||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:o,pattern:t}}function bT(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),a4(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function xT(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return a4(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Ec(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function ST(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?Fc(t):t;return{pathname:n?n.startsWith("/")?n:AT(n,e):e,search:IT(r),hash:TT(i)}}function AT(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function e1(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function ET(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function nv(t,e){let n=ET(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function rv(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=Fc(t):(i=pd({},t),vn(!i.pathname||!i.pathname.includes("?"),e1("?","pathname","search",i)),vn(!i.pathname||!i.pathname.includes("#"),e1("#","pathname","hash",i)),vn(!i.search||!i.search.includes("#"),e1("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let f=e.length-1;if(!r&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),f-=1;i.pathname=m.join("/")}a=f>=0?e[f]:"/"}let l=ST(i,a),u=o&&o!=="/"&&o.endsWith("/"),h=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(u||h)&&(l.pathname+="/"),l}const Ua=t=>t.join("/").replace(/\/\/+/g,"/"),NT=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),IT=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,TT=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function kT(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const c4=["post","put","patch","delete"];new Set(c4);const PT=["get",...c4];new Set(PT);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function md(){return md=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},md.apply(this,arguments)}const Pm=le.createContext(null),h4=le.createContext(null),Fo=le.createContext(null),Cm=le.createContext(null),Gs=le.createContext({outlet:null,matches:[],isDataRoute:!1}),d4=le.createContext(null);function CT(t,e){let{relative:n}=e===void 0?{}:e;Mc()||vn(!1);let{basename:r,navigator:i}=le.useContext(Fo),{hash:s,pathname:o,search:a}=Lm(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:Ua([r,o])),i.createHref({pathname:l,search:a,hash:s})}function Mc(){return le.useContext(Cm)!=null}function Uc(){return Mc()||vn(!1),le.useContext(Cm).location}function f4(t){le.useContext(Fo).static||le.useLayoutEffect(t)}function Vc(){let{isDataRoute:t}=le.useContext(Gs);return t?GT():LT()}function LT(){Mc()||vn(!1);let t=le.useContext(Pm),{basename:e,future:n,navigator:r}=le.useContext(Fo),{matches:i}=le.useContext(Gs),{pathname:s}=Uc(),o=JSON.stringify(nv(i,n.v7_relativeSplatPath)),a=le.useRef(!1);return f4(()=>{a.current=!0}),le.useCallback(function(u,h){if(h===void 0&&(h={}),!a.current)return;if(typeof u=="number"){r.go(u);return}let f=rv(u,JSON.parse(o),s,h.relative==="path");t==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:Ua([e,f.pathname])),(h.replace?r.replace:r.push)(f,h.state,h)},[e,r,o,s,t])}const RT=le.createContext(null);function jT(t){let e=le.useContext(Gs).outlet;return e&&le.createElement(RT.Provider,{value:t},e)}function DT(){let{matches:t}=le.useContext(Gs),e=t[t.length-1];return e?e.params:{}}function Lm(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=le.useContext(Fo),{matches:i}=le.useContext(Gs),{pathname:s}=Uc(),o=JSON.stringify(nv(i,r.v7_relativeSplatPath));return le.useMemo(()=>rv(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function OT(t,e){return FT(t,e)}function FT(t,e,n,r){Mc()||vn(!1);let{navigator:i}=le.useContext(Fo),{matches:s}=le.useContext(Gs),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let u=Uc(),h;if(e){var f;let I=typeof e=="string"?Fc(e):e;l==="/"||(f=I.pathname)!=null&&f.startsWith(l)||vn(!1),h=I}else h=u;let m=h.pathname||"/",p=m;if(l!=="/"){let I=l.replace(/^\//,"").split("/");p="/"+m.replace(/^\//,"").split("/").slice(I.length).join("/")}let b=uT(t,{pathname:p}),x=qT(b&&b.map(I=>Object.assign({},I,{params:Object.assign({},a,I.params),pathname:Ua([l,i.encodeLocation?i.encodeLocation(I.pathname).pathname:I.pathname]),pathnameBase:I.pathnameBase==="/"?l:Ua([l,i.encodeLocation?i.encodeLocation(I.pathnameBase).pathname:I.pathnameBase])})),s,n,r);return e&&x?le.createElement(Cm.Provider,{value:{location:md({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:Ta.Pop}},x):x}function MT(){let t=WT(),e=kT(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return le.createElement(le.Fragment,null,le.createElement("h2",null,"Unexpected Application Error!"),le.createElement("h3",{style:{fontStyle:"italic"}},e),n?le.createElement("pre",{style:i},n):null,null)}const UT=le.createElement(MT,null);class VT extends le.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?le.createElement(Gs.Provider,{value:this.props.routeContext},le.createElement(d4.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function BT(t){let{routeContext:e,match:n,children:r}=t,i=le.useContext(Pm);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),le.createElement(Gs.Provider,{value:e},r)}function qT(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(i=n)==null?void 0:i.errors;if(a!=null){let h=o.findIndex(f=>f.route.id&&(a==null?void 0:a[f.route.id])!==void 0);h>=0||vn(!1),o=o.slice(0,Math.min(o.length,h+1))}let l=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let h=0;h<o.length;h++){let f=o[h];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=h),f.route.id){let{loaderData:m,errors:p}=n,b=f.route.loader&&m[f.route.id]===void 0&&(!p||p[f.route.id]===void 0);if(f.route.lazy||b){l=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((h,f,m)=>{let p,b=!1,x=null,I=null;n&&(p=a&&f.route.id?a[f.route.id]:void 0,x=f.route.errorElement||UT,l&&(u<0&&m===0?(KT("route-fallback"),b=!0,I=null):u===m&&(b=!0,I=f.route.hydrateFallbackElement||null)));let _=e.concat(o.slice(0,m+1)),E=()=>{let C;return p?C=x:b?C=I:f.route.Component?C=le.createElement(f.route.Component,null):f.route.element?C=f.route.element:C=h,le.createElement(BT,{match:f,routeContext:{outlet:h,matches:_,isDataRoute:n!=null},children:C})};return n&&(f.route.ErrorBoundary||f.route.errorElement||m===0)?le.createElement(VT,{location:n.location,revalidation:n.revalidation,component:x,error:p,children:E(),routeContext:{outlet:null,matches:_,isDataRoute:!0}}):E()},null)}var p4=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(p4||{}),m4=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(m4||{});function zT(t){let e=le.useContext(Pm);return e||vn(!1),e}function $T(t){let e=le.useContext(h4);return e||vn(!1),e}function HT(t){let e=le.useContext(Gs);return e||vn(!1),e}function g4(t){let e=HT(),n=e.matches[e.matches.length-1];return n.route.id||vn(!1),n.route.id}function WT(){var t;let e=le.useContext(d4),n=$T(),r=g4();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function GT(){let{router:t}=zT(p4.UseNavigateStable),e=g4(m4.UseNavigateStable),n=le.useRef(!1);return f4(()=>{n.current=!0}),le.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,md({fromRouteId:e},s)))},[t,e])}const Z5={};function KT(t,e,n){Z5[t]||(Z5[t]=!0)}function QT(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function b0(t){let{to:e,replace:n,state:r,relative:i}=t;Mc()||vn(!1);let{future:s,static:o}=le.useContext(Fo),{matches:a}=le.useContext(Gs),{pathname:l}=Uc(),u=Vc(),h=rv(e,nv(a,s.v7_relativeSplatPath),l,i==="path"),f=JSON.stringify(h);return le.useEffect(()=>u(JSON.parse(f),{replace:n,state:r,relative:i}),[u,f,i,n,r]),null}function YT(t){return jT(t.context)}function Cs(t){vn(!1)}function XT(t){let{basename:e="/",children:n=null,location:r,navigationType:i=Ta.Pop,navigator:s,static:o=!1,future:a}=t;Mc()&&vn(!1);let l=e.replace(/^\/*/,"/"),u=le.useMemo(()=>({basename:l,navigator:s,static:o,future:md({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof r=="string"&&(r=Fc(r));let{pathname:h="/",search:f="",hash:m="",state:p=null,key:b="default"}=r,x=le.useMemo(()=>{let I=Ec(h,l);return I==null?null:{location:{pathname:I,search:f,hash:m,state:p,key:b},navigationType:i}},[l,h,f,m,p,b,i]);return x==null?null:le.createElement(Fo.Provider,{value:u},le.createElement(Cm.Provider,{children:n,value:x}))}function JT(t){let{children:e,location:n}=t;return OT(x0(e),n)}new Promise(()=>{});function x0(t,e){e===void 0&&(e=[]);let n=[];return le.Children.forEach(t,(r,i)=>{if(!le.isValidElement(r))return;let s=[...e,i];if(r.type===le.Fragment){n.push.apply(n,x0(r.props.children,s));return}r.type!==Cs&&vn(!1),!r.props.index||!r.props.children||vn(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=x0(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function qp(){return qp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},qp.apply(this,arguments)}function v4(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function ZT(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function ek(t,e){return t.button===0&&(!e||e==="_self")&&!ZT(t)}const tk=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],nk=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],rk="6";try{window.__reactRouterVersion=rk}catch{}const ik=le.createContext({isTransitioning:!1}),sk="startTransition",e_=KE[sk];function ok(t){let{basename:e,children:n,future:r,window:i}=t,s=le.useRef();s.current==null&&(s.current=oT({window:i,v5Compat:!0}));let o=s.current,[a,l]=le.useState({action:o.action,location:o.location}),{v7_startTransition:u}=r||{},h=le.useCallback(f=>{u&&e_?e_(()=>l(f)):l(f)},[l,u]);return le.useLayoutEffect(()=>o.listen(h),[o,h]),le.useEffect(()=>QT(r),[r]),le.createElement(XT,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const ak=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",lk=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,uk=le.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:a,target:l,to:u,preventScrollReset:h,viewTransition:f}=e,m=v4(e,tk),{basename:p}=le.useContext(Fo),b,x=!1;if(typeof u=="string"&&lk.test(u)&&(b=u,ak))try{let C=new URL(window.location.href),O=u.startsWith("//")?new URL(C.protocol+u):new URL(u),K=Ec(O.pathname,p);O.origin===C.origin&&K!=null?u=K+O.search+O.hash:x=!0}catch{}let I=CT(u,{relative:i}),_=hk(u,{replace:o,state:a,target:l,preventScrollReset:h,relative:i,viewTransition:f});function E(C){r&&r(C),C.defaultPrevented||_(C)}return le.createElement("a",qp({},m,{href:b||I,onClick:x||s?r:E,ref:n,target:l}))}),Rf=le.forwardRef(function(e,n){let{"aria-current":r="page",caseSensitive:i=!1,className:s="",end:o=!1,style:a,to:l,viewTransition:u,children:h}=e,f=v4(e,nk),m=Lm(l,{relative:f.relative}),p=Uc(),b=le.useContext(h4),{navigator:x,basename:I}=le.useContext(Fo),_=b!=null&&dk(m)&&u===!0,E=x.encodeLocation?x.encodeLocation(m).pathname:m.pathname,C=p.pathname,O=b&&b.navigation&&b.navigation.location?b.navigation.location.pathname:null;i||(C=C.toLowerCase(),O=O?O.toLowerCase():null,E=E.toLowerCase()),O&&I&&(O=Ec(O,I)||O);const K=E!=="/"&&E.endsWith("/")?E.length-1:E.length;let B=C===E||!o&&C.startsWith(E)&&C.charAt(K)==="/",L=O!=null&&(O===E||!o&&O.startsWith(E)&&O.charAt(E.length)==="/"),y={isActive:B,isPending:L,isTransitioning:_},S=B?r:void 0,R;typeof s=="function"?R=s(y):R=[s,B?"active":null,L?"pending":null,_?"transitioning":null].filter(Boolean).join(" ");let N=typeof a=="function"?a(y):a;return le.createElement(uk,qp({},f,{"aria-current":S,className:R,ref:n,style:N,to:l,viewTransition:u}),typeof h=="function"?h(y):h)});var S0;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(S0||(S0={}));var t_;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(t_||(t_={}));function ck(t){let e=le.useContext(Pm);return e||vn(!1),e}function hk(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o,viewTransition:a}=e===void 0?{}:e,l=Vc(),u=Uc(),h=Lm(t,{relative:o});return le.useCallback(f=>{if(ek(f,n)){f.preventDefault();let m=r!==void 0?r:Bp(u)===Bp(h);l(t,{replace:m,state:i,preventScrollReset:s,relative:o,viewTransition:a})}},[u,l,h,r,i,n,t,s,o,a])}function dk(t,e){e===void 0&&(e={});let n=le.useContext(ik);n==null&&vn(!1);let{basename:r}=ck(S0.useViewTransitionState),i=Lm(t,{relative:e.relative});if(!n.isTransitioning)return!1;let s=Ec(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=Ec(n.nextLocation.pathname,r)||n.nextLocation.pathname;return w0(i.pathname,o)!=null||w0(i.pathname,s)!=null}const y4=le.createContext(),ps=()=>{const t=le.useContext(y4);if(!t)throw new Error("useNotification must be used within NotificationProvider");return t},fk=({children:t})=>{const[e,n]=le.useState([]),[r,i]=le.useState(null),[s,o]=le.useState(null),a=le.useCallback((I,_="info")=>{const E=Date.now()+Math.random(),C={id:E,message:I,type:_};return n(O=>[...O,C]),setTimeout(()=>{l(E)},4e3),E},[]),l=le.useCallback(I=>{n(_=>_.filter(E=>E.id!==I))},[]),u=le.useCallback(I=>a(I,"success"),[a]),h=le.useCallback(I=>a(I,"error"),[a]),f=le.useCallback(I=>a(I,"info"),[a]),m=le.useCallback(I=>a(I,"warning"),[a]),p=le.useCallback(I=>new Promise(_=>{i({...I,onConfirm:()=>{i(null),_(!0)},onCancel:()=>{i(null),_(!1)}})}),[]),b=le.useCallback(I=>new Promise(_=>{o({...I,onConfirm:()=>{o(null),_(!0)},onCancel:()=>{o(null),_(!1)}})}),[]),x={toasts:e,showToast:a,removeToast:l,showSuccess:u,showError:h,showInfo:f,showWarning:m,showConfirm:p,confirmDialog:r,showCriticalConfirm:b,criticalConfirmDialog:s};return g.jsx(y4.Provider,{value:x,children:t})},pk=t=>{switch(t){case"success":return"";case"error":return"";case"warning":return"";case"info":default:return""}},mk=t=>{switch(t){case"success":return"toast-success";case"error":return"toast-error";case"warning":return"toast-warning";case"info":default:return"toast-info"}};function gk({toast:t,onRemove:e}){return le.useEffect(()=>{const n=setTimeout(()=>{e(t.id)},4e3);return()=>clearTimeout(n)},[t.id,e]),g.jsxs("div",{className:`toast ${mk(t.type)}`,children:[g.jsx("div",{className:"toast-icon",children:pk(t.type)}),g.jsx("div",{className:"toast-message",children:t.message}),g.jsx("button",{className:"toast-close",onClick:()=>e(t.id),"aria-label":"Luk notifikation",children:""})]})}function vk(){const{toasts:t,removeToast:e}=ps();return g.jsx("div",{className:"toast-container",children:t.map(n=>g.jsx(gk,{toast:n,onRemove:e},n.id))})}function yk(){const{confirmDialog:t}=ps();if(!t)return null;const{title:e="Bekrft handling",message:n,confirmText:r="Bekrft",cancelText:i="Annuller",onConfirm:s,onCancel:o,type:a="danger"}=t;return g.jsx("div",{className:"confirm-overlay",children:g.jsxs("div",{className:"confirm-dialog",children:[g.jsx("div",{className:"confirm-header",children:g.jsx("h3",{children:e})}),g.jsx("div",{className:"confirm-body",children:g.jsx("p",{children:n})}),g.jsxs("div",{className:"confirm-footer",children:[g.jsx("button",{className:"btn-secondary",onClick:o,children:i}),g.jsx("button",{className:a==="danger"?"btn-danger":"btn-primary",onClick:s,children:r})]})]})})}function _k(){const{criticalConfirmDialog:t}=ps(),[e,n]=le.useState(""),[r,i]=le.useState(!1);if(le.useEffect(()=>{n(""),i(!1)},[t]),!t)return null;const{title:s="Bekrft sletning",message:o,itemName:a,confirmText:l="Slet",cancelText:u="Annuller",onConfirm:h,onCancel:f,warningText:m}=t,p=()=>{e.toLowerCase()==="slet"?(i(!1),h()):i(!0)},b=x=>{x.key==="Enter"&&p()};return g.jsx("div",{className:"confirm-overlay",children:g.jsxs("div",{className:"critical-confirm-dialog",children:[g.jsxs("div",{className:"confirm-header critical-header",children:[g.jsx("div",{className:"critical-icon",children:""}),g.jsx("h3",{children:s})]}),g.jsxs("div",{className:"confirm-body",children:[g.jsx("p",{className:"critical-message",children:o}),a&&g.jsx("div",{className:"item-highlight",children:g.jsx("strong",{children:a})}),m&&g.jsxs("div",{className:"warning-box",children:[g.jsx("span",{className:"warning-icon",children:""}),g.jsx("span",{children:m})]}),g.jsxs("div",{className:"confirmation-input-section",children:[g.jsxs("label",{children:["Skriv ",g.jsx("strong",{children:'"Slet"'})," for at bekrfte:"]}),g.jsx("input",{type:"text",value:e,onChange:x=>{n(x.target.value),i(!1)},onKeyPress:b,placeholder:"Skriv Slet",className:r?"input-error":"",autoFocus:!0}),r&&g.jsx("span",{className:"error-text",children:'Du skal skrive "Slet" for at bekrfte'})]})]}),g.jsxs("div",{className:"confirm-footer",children:[g.jsx("button",{className:"btn-secondary",onClick:f,children:u}),g.jsx("button",{className:"btn-danger",onClick:p,disabled:!e,children:l})]})]})})}var n_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _4=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},wk=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},w4={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,u=l?t[i+2]:0,h=s>>2,f=(s&3)<<4|a>>4;let m=(a&15)<<2|u>>6,p=u&63;l||(p=64,o||(m=64)),r.push(n[h],n[f],n[m],n[p])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(_4(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):wk(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const u=i<t.length?n[t.charAt(i)]:64;++i;const f=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||u==null||f==null)throw new bk;const m=s<<2|a>>4;if(r.push(m),u!==64){const p=a<<4&240|u>>2;if(r.push(p),f!==64){const b=u<<6&192|f;r.push(b)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class bk extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const xk=function(t){const e=_4(t);return w4.encodeByteArray(e,!0)},zp=function(t){return xk(t).replace(/\./g,"")},b4=function(t){try{return w4.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sk(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ak=()=>Sk().__FIREBASE_DEFAULTS__,Ek=()=>{if(typeof process>"u"||typeof n_>"u")return;const t=n_.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Nk=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&b4(t[1]);return e&&JSON.parse(e)},Rm=()=>{try{return Ak()||Ek()||Nk()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},x4=t=>{var e,n;return(n=(e=Rm())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},S4=t=>{const e=x4(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},A4=()=>{var t;return(t=Rm())===null||t===void 0?void 0:t.config},E4=t=>{var e;return(e=Rm())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ik{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N4(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[zp(JSON.stringify(n)),zp(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Tk(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Cr())}function kk(){var t;const e=(t=Rm())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Pk(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Ck(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Lk(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Rk(){const t=Cr();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function jk(){return!kk()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Dk(){try{return typeof indexedDB=="object"}catch{return!1}}function Ok(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fk="FirebaseError";class Ks extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=Fk,Object.setPrototypeOf(this,Ks.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ld.prototype.create)}}class Ld{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?Mk(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Ks(i,a,r)}}function Mk(t,e){return t.replace(Uk,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const Uk=/\{\$([^}]+)}/g;function Vk(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function $p(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(r_(s)&&r_(o)){if(!$p(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function r_(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rd(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Th(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function kh(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function Bk(t,e){const n=new qk(t,e);return n.subscribe.bind(n)}class qk{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");zk(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=t1),i.error===void 0&&(i.error=t1),i.complete===void 0&&(i.complete=t1);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function zk(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function t1(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _n(t){return t&&t._delegate?t._delegate:t}class Wa{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tl="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $k{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Ik;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Wk(e))try{this.getOrInitializeService({instanceIdentifier:Tl})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Tl){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Tl){return this.instances.has(e)}getOptions(e=Tl){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Hk(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Tl){return this.component?this.component.multipleInstances?e:Tl:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Hk(t){return t===Tl?void 0:t}function Wk(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gk{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new $k(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var jt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(jt||(jt={}));const Kk={debug:jt.DEBUG,verbose:jt.VERBOSE,info:jt.INFO,warn:jt.WARN,error:jt.ERROR,silent:jt.SILENT},Qk=jt.INFO,Yk={[jt.DEBUG]:"log",[jt.VERBOSE]:"log",[jt.INFO]:"info",[jt.WARN]:"warn",[jt.ERROR]:"error"},Xk=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=Yk[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class iv{constructor(e){this.name=e,this._logLevel=Qk,this._logHandler=Xk,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in jt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Kk[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,jt.DEBUG,...e),this._logHandler(this,jt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,jt.VERBOSE,...e),this._logHandler(this,jt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,jt.INFO,...e),this._logHandler(this,jt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,jt.WARN,...e),this._logHandler(this,jt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,jt.ERROR,...e),this._logHandler(this,jt.ERROR,...e)}}const Jk=(t,e)=>e.some(n=>t instanceof n);let i_,s_;function Zk(){return i_||(i_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function eP(){return s_||(s_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const I4=new WeakMap,A0=new WeakMap,T4=new WeakMap,n1=new WeakMap,sv=new WeakMap;function tP(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Va(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&I4.set(n,t)}).catch(()=>{}),sv.set(e,t),e}function nP(t){if(A0.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});A0.set(t,e)}let E0={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return A0.get(t);if(e==="objectStoreNames")return t.objectStoreNames||T4.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Va(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function rP(t){E0=t(E0)}function iP(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(r1(this),e,...n);return T4.set(r,e.sort?e.sort():[e]),Va(r)}:eP().includes(t)?function(...e){return t.apply(r1(this),e),Va(I4.get(this))}:function(...e){return Va(t.apply(r1(this),e))}}function sP(t){return typeof t=="function"?iP(t):(t instanceof IDBTransaction&&nP(t),Jk(t,Zk())?new Proxy(t,E0):t)}function Va(t){if(t instanceof IDBRequest)return tP(t);if(n1.has(t))return n1.get(t);const e=sP(t);return e!==t&&(n1.set(t,e),sv.set(e,t)),e}const r1=t=>sv.get(t);function oP(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=Va(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Va(o.result),l.oldVersion,l.newVersion,Va(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const aP=["get","getKey","getAll","getAllKeys","count"],lP=["put","add","delete","clear"],i1=new Map;function o_(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(i1.get(e))return i1.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=lP.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||aP.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),i&&l.done]))[0]};return i1.set(e,s),s}rP(t=>({...t,get:(e,n,r)=>o_(e,n)||t.get(e,n,r),has:(e,n)=>!!o_(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uP{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(cP(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function cP(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const N0="@firebase/app",a_="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lo=new iv("@firebase/app"),hP="@firebase/app-compat",dP="@firebase/analytics-compat",fP="@firebase/analytics",pP="@firebase/app-check-compat",mP="@firebase/app-check",gP="@firebase/auth",vP="@firebase/auth-compat",yP="@firebase/database",_P="@firebase/data-connect",wP="@firebase/database-compat",bP="@firebase/functions",xP="@firebase/functions-compat",SP="@firebase/installations",AP="@firebase/installations-compat",EP="@firebase/messaging",NP="@firebase/messaging-compat",IP="@firebase/performance",TP="@firebase/performance-compat",kP="@firebase/remote-config",PP="@firebase/remote-config-compat",CP="@firebase/storage",LP="@firebase/storage-compat",RP="@firebase/firestore",jP="@firebase/vertexai-preview",DP="@firebase/firestore-compat",OP="firebase",FP="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I0="[DEFAULT]",MP={[N0]:"fire-core",[hP]:"fire-core-compat",[fP]:"fire-analytics",[dP]:"fire-analytics-compat",[mP]:"fire-app-check",[pP]:"fire-app-check-compat",[gP]:"fire-auth",[vP]:"fire-auth-compat",[yP]:"fire-rtdb",[_P]:"fire-data-connect",[wP]:"fire-rtdb-compat",[bP]:"fire-fn",[xP]:"fire-fn-compat",[SP]:"fire-iid",[AP]:"fire-iid-compat",[EP]:"fire-fcm",[NP]:"fire-fcm-compat",[IP]:"fire-perf",[TP]:"fire-perf-compat",[kP]:"fire-rc",[PP]:"fire-rc-compat",[CP]:"fire-gcs",[LP]:"fire-gcs-compat",[RP]:"fire-fst",[DP]:"fire-fst-compat",[jP]:"fire-vertex","fire-js":"fire-js",[OP]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hp=new Map,UP=new Map,T0=new Map;function l_(t,e){try{t.container.addComponent(e)}catch(n){Lo.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Gl(t){const e=t.name;if(T0.has(e))return Lo.debug(`There were multiple attempts to register component ${e}.`),!1;T0.set(e,t);for(const n of Hp.values())l_(n,t);for(const n of UP.values())l_(n,t);return!0}function jm(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function bo(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VP={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ba=new Ld("app","Firebase",VP);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BP{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Wa("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ba.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tu=FP;function k4(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:I0,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Ba.create("bad-app-name",{appName:String(i)});if(n||(n=A4()),!n)throw Ba.create("no-options");const s=Hp.get(i);if(s){if($p(n,s.options)&&$p(r,s.config))return s;throw Ba.create("duplicate-app",{appName:i})}const o=new Gk(i);for(const l of T0.values())o.addComponent(l);const a=new BP(n,r,o);return Hp.set(i,a),a}function ov(t=I0){const e=Hp.get(t);if(!e&&t===I0&&A4())return k4();if(!e)throw Ba.create("no-app",{appName:t});return e}function Vs(t,e,n){var r;let i=(r=MP[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Lo.warn(a.join(" "));return}Gl(new Wa(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qP="firebase-heartbeat-database",zP=1,gd="firebase-heartbeat-store";let s1=null;function P4(){return s1||(s1=oP(qP,zP,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(gd)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ba.create("idb-open",{originalErrorMessage:t.message})})),s1}async function $P(t){try{const n=(await P4()).transaction(gd),r=await n.objectStore(gd).get(C4(t));return await n.done,r}catch(e){if(e instanceof Ks)Lo.warn(e.message);else{const n=Ba.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Lo.warn(n.message)}}}async function u_(t,e){try{const r=(await P4()).transaction(gd,"readwrite");await r.objectStore(gd).put(e,C4(t)),await r.done}catch(n){if(n instanceof Ks)Lo.warn(n.message);else{const r=Ba.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Lo.warn(r.message)}}}function C4(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HP=1024,WP=30*24*60*60*1e3;class GP{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new QP(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=c_();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=WP}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Lo.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=c_(),{heartbeatsToSend:r,unsentEntries:i}=KP(this._heartbeatsCache.heartbeats),s=zp(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Lo.warn(n),""}}}function c_(){return new Date().toISOString().substring(0,10)}function KP(t,e=HP){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),h_(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),h_(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class QP{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Dk()?Ok().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await $P(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return u_(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return u_(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function h_(t){return zp(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YP(t){Gl(new Wa("platform-logger",e=>new uP(e),"PRIVATE")),Gl(new Wa("heartbeat",e=>new GP(e),"PRIVATE")),Vs(N0,a_,t),Vs(N0,a_,"esm2017"),Vs("fire-js","")}YP("");function av(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function L4(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const XP=L4,R4=new Ld("auth","Firebase",L4());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wp=new iv("@firebase/auth");function JP(t,...e){Wp.logLevel<=jt.WARN&&Wp.warn(`Auth (${tu}): ${t}`,...e)}function rp(t,...e){Wp.logLevel<=jt.ERROR&&Wp.error(`Auth (${tu}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hs(t,...e){throw lv(t,...e)}function Bs(t,...e){return lv(t,...e)}function j4(t,e,n){const r=Object.assign(Object.assign({},XP()),{[e]:n});return new Ld("auth","Firebase",r).create(e,{appName:t.name})}function qa(t){return j4(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function lv(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return R4.create(t,...e)}function mt(t,e,...n){if(!t)throw lv(e,...n)}function xo(t){const e="INTERNAL ASSERTION FAILED: "+t;throw rp(e),new Error(e)}function Ro(t,e){t||xo(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k0(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function ZP(){return d_()==="http:"||d_()==="https:"}function d_(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e6(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(ZP()||Ck()||"connection"in navigator)?navigator.onLine:!0}function t6(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jd{constructor(e,n){this.shortDelay=e,this.longDelay=n,Ro(n>e,"Short delay should be less than long delay!"),this.isMobile=Tk()||Lk()}get(){return e6()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uv(t,e){Ro(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D4{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;xo("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;xo("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;xo("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n6={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r6=new jd(3e4,6e4);function nu(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function nl(t,e,n,r,i={}){return O4(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=Rd(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const u=Object.assign({method:e,headers:l},s);return Pk()||(u.referrerPolicy="no-referrer"),D4.fetch()(F4(t,t.config.apiHost,n,a),u)})}async function O4(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},n6),e);try{const i=new s6(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw jf(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw jf(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw jf(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw jf(t,"user-disabled",o);const h=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw j4(t,h,u);hs(t,h)}}catch(i){if(i instanceof Ks)throw i;hs(t,"network-request-failed",{message:String(i)})}}async function Dm(t,e,n,r,i={}){const s=await nl(t,e,n,r,i);return"mfaPendingCredential"in s&&hs(t,"multi-factor-auth-required",{_serverResponse:s}),s}function F4(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?uv(t.config,i):`${t.config.apiScheme}://${i}`}function i6(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class s6{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Bs(this.auth,"network-request-failed")),r6.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function jf(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Bs(t,e,r);return i.customData._tokenResponse=n,i}function f_(t){return t!==void 0&&t.enterprise!==void 0}class o6{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return i6(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function a6(t,e){return nl(t,"GET","/v2/recaptchaConfig",nu(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function l6(t,e){return nl(t,"POST","/v1/accounts:delete",e)}async function M4(t,e){return nl(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $h(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function u6(t,e=!1){const n=_n(t),r=await n.getIdToken(e),i=cv(r);mt(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:$h(o1(i.auth_time)),issuedAtTime:$h(o1(i.iat)),expirationTime:$h(o1(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function o1(t){return Number(t)*1e3}function cv(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return rp("JWT malformed, contained fewer than 3 sections"),null;try{const i=b4(n);return i?JSON.parse(i):(rp("Failed to decode base64 JWT payload"),null)}catch(i){return rp("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function p_(t){const e=cv(t);return mt(e,"internal-error"),mt(typeof e.exp<"u","internal-error"),mt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vd(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Ks&&c6(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function c6({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h6{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P0{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=$h(this.lastLoginAt),this.creationTime=$h(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gp(t){var e;const n=t.auth,r=await t.getIdToken(),i=await vd(t,M4(n,{idToken:r}));mt(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?U4(s.providerUserInfo):[],a=f6(t.providerData,o),l=t.isAnonymous,u=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),h=l?u:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new P0(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(t,f)}async function d6(t){const e=_n(t);await Gp(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function f6(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function U4(t){return t.map(e=>{var{providerId:n}=e,r=av(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function p6(t,e){const n=await O4(t,{},async()=>{const r=Rd({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=F4(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",D4.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function m6(t,e){return nl(t,"POST","/v2/accounts:revokeToken",nu(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cc{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){mt(e.idToken,"internal-error"),mt(typeof e.idToken<"u","internal-error"),mt(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):p_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){mt(e.length!==0,"internal-error");const n=p_(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(mt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await p6(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new cc;return r&&(mt(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(mt(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(mt(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new cc,this.toJSON())}_performRefresh(){return xo("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pa(t,e){mt(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class So{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=av(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new h6(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new P0(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await vd(this,this.stsTokenManager.getToken(this.auth,e));return mt(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return u6(this,e)}reload(){return d6(this)}_assign(e){this!==e&&(mt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new So(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){mt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Gp(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(bo(this.auth.app))return Promise.reject(qa(this.auth));const e=await this.getIdToken();return await vd(this,l6(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,l,u,h;const f=(r=n.displayName)!==null&&r!==void 0?r:void 0,m=(i=n.email)!==null&&i!==void 0?i:void 0,p=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,b=(o=n.photoURL)!==null&&o!==void 0?o:void 0,x=(a=n.tenantId)!==null&&a!==void 0?a:void 0,I=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,_=(u=n.createdAt)!==null&&u!==void 0?u:void 0,E=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:C,emailVerified:O,isAnonymous:K,providerData:B,stsTokenManager:L}=n;mt(C&&L,e,"internal-error");const y=cc.fromJSON(this.name,L);mt(typeof C=="string",e,"internal-error"),pa(f,e.name),pa(m,e.name),mt(typeof O=="boolean",e,"internal-error"),mt(typeof K=="boolean",e,"internal-error"),pa(p,e.name),pa(b,e.name),pa(x,e.name),pa(I,e.name),pa(_,e.name),pa(E,e.name);const S=new So({uid:C,auth:e,email:m,emailVerified:O,displayName:f,isAnonymous:K,photoURL:b,phoneNumber:p,tenantId:x,stsTokenManager:y,createdAt:_,lastLoginAt:E});return B&&Array.isArray(B)&&(S.providerData=B.map(R=>Object.assign({},R))),I&&(S._redirectEventId=I),S}static async _fromIdTokenResponse(e,n,r=!1){const i=new cc;i.updateFromServerResponse(n);const s=new So({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Gp(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];mt(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?U4(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new cc;a.updateFromIdToken(r);const l=new So({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new P0(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,u),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m_=new Map;function Ao(t){Ro(t instanceof Function,"Expected a class definition");let e=m_.get(t);return e?(Ro(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,m_.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V4{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}V4.type="NONE";const g_=V4;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ip(t,e,n){return`firebase:${t}:${e}:${n}`}class hc{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=ip(this.userKey,i.apiKey,s),this.fullPersistenceKey=ip("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?So._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new hc(Ao(g_),e,r);const i=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=i[0]||Ao(g_);const o=ip(r,e.config.apiKey,e.name);let a=null;for(const u of n)try{const h=await u._get(o);if(h){const f=So._fromJSON(e,h);u!==s&&(a=f),s=u;break}}catch{}const l=i.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new hc(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==s)try{await u._remove(o)}catch{}})),new hc(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v_(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if($4(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(B4(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(W4(e))return"Blackberry";if(G4(e))return"Webos";if(q4(e))return"Safari";if((e.includes("chrome/")||z4(e))&&!e.includes("edge/"))return"Chrome";if(H4(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function B4(t=Cr()){return/firefox\//i.test(t)}function q4(t=Cr()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function z4(t=Cr()){return/crios\//i.test(t)}function $4(t=Cr()){return/iemobile/i.test(t)}function H4(t=Cr()){return/android/i.test(t)}function W4(t=Cr()){return/blackberry/i.test(t)}function G4(t=Cr()){return/webos/i.test(t)}function hv(t=Cr()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function g6(t=Cr()){var e;return hv(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function v6(){return Rk()&&document.documentMode===10}function K4(t=Cr()){return hv(t)||H4(t)||G4(t)||W4(t)||/windows phone/i.test(t)||$4(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q4(t,e=[]){let n;switch(t){case"Browser":n=v_(Cr());break;case"Worker":n=`${v_(Cr())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${tu}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y6{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _6(t,e={}){return nl(t,"GET","/v2/passwordPolicy",nu(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w6=6;class b6{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:w6,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x6{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new y_(this),this.idTokenSubscription=new y_(this),this.beforeStateQueue=new y6(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=R4,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Ao(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await hc.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await M4(this,{idToken:e}),r=await So._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(bo(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return mt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Gp(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=t6()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(bo(this.app))return Promise.reject(qa(this));const n=e?_n(e):null;return n&&mt(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&mt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return bo(this.app)?Promise.reject(qa(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return bo(this.app)?Promise.reject(qa(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ao(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await _6(this),n=new b6(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Ld("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await m6(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Ao(e)||this._popupRedirectResolver;mt(n,this,"argument-error"),this.redirectPersistenceManager=await hc.create(this,[Ao(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(mt(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return mt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Q4(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&JP(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Bc(t){return _n(t)}class y_{constructor(e){this.auth=e,this.observer=null,this.addObserver=Bk(n=>this.observer=n)}get next(){return mt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Om={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function S6(t){Om=t}function Y4(t){return Om.loadJS(t)}function A6(){return Om.recaptchaEnterpriseScript}function E6(){return Om.gapiScript}function N6(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const I6="recaptcha-enterprise",T6="NO_RECAPTCHA";class k6{constructor(e){this.type=I6,this.auth=Bc(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{a6(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const u=new o6(l);return s.tenantId==null?s._agentRecaptchaConfig=u:s._tenantRecaptchaConfigs[s.tenantId]=u,o(u.siteKey)}}).catch(l=>{a(l)})})}function i(s,o,a){const l=window.grecaptcha;f_(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(u=>{o(u)}).catch(()=>{o(T6)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&f_(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=A6();l.length!==0&&(l+=a),Y4(l).then(()=>{i(a,s,o)}).catch(u=>{o(u)})}}).catch(a=>{o(a)})})}}async function __(t,e,n,r=!1){const i=new k6(t);let s;try{s=await i.verify(n)}catch{s=await i.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function w_(t,e,n,r){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await __(t,e,n,n==="getOobCode");return r(t,s)}else return r(t,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await __(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(s)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P6(t,e){const n=jm(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if($p(s,e??{}))return i;hs(i,"already-initialized")}return n.initialize({options:e})}function C6(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Ao);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function L6(t,e,n){const r=Bc(t);mt(r._canInitEmulator,r,"emulator-config-failed"),mt(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=X4(e),{host:o,port:a}=R6(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),j6()}function X4(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function R6(t){const e=X4(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:b_(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:b_(o)}}}function b_(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function j6(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dv{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return xo("not implemented")}_getIdTokenResponse(e){return xo("not implemented")}_linkToIdToken(e,n){return xo("not implemented")}_getReauthenticationResolver(e){return xo("not implemented")}}async function D6(t,e){return nl(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function O6(t,e){return Dm(t,"POST","/v1/accounts:signInWithPassword",nu(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function F6(t,e){return Dm(t,"POST","/v1/accounts:signInWithEmailLink",nu(t,e))}async function M6(t,e){return Dm(t,"POST","/v1/accounts:signInWithEmailLink",nu(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yd extends dv{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new yd(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new yd(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return w_(e,n,"signInWithPassword",O6);case"emailLink":return F6(e,{email:this._email,oobCode:this._password});default:hs(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return w_(e,r,"signUpPassword",D6);case"emailLink":return M6(e,{idToken:n,email:this._email,oobCode:this._password});default:hs(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dc(t,e){return Dm(t,"POST","/v1/accounts:signInWithIdp",nu(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U6="http://localhost";class Kl extends dv{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Kl(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):hs("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=av(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new Kl(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return dc(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,dc(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,dc(e,n)}buildRequest(){const e={requestUri:U6,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Rd(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V6(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function B6(t){const e=Th(kh(t)).link,n=e?Th(kh(e)).deep_link_id:null,r=Th(kh(t)).deep_link_id;return(r?Th(kh(r)).link:null)||r||n||e||t}class fv{constructor(e){var n,r,i,s,o,a;const l=Th(kh(e)),u=(n=l.apiKey)!==null&&n!==void 0?n:null,h=(r=l.oobCode)!==null&&r!==void 0?r:null,f=V6((i=l.mode)!==null&&i!==void 0?i:null);mt(u&&h&&f,"argument-error"),this.apiKey=u,this.operation=f,this.code=h,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=B6(e);try{return new fv(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qc{constructor(){this.providerId=qc.PROVIDER_ID}static credential(e,n){return yd._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=fv.parseLink(n);return mt(r,"argument-error"),yd._fromEmailAndCode(e,r.code,r.tenantId)}}qc.PROVIDER_ID="password";qc.EMAIL_PASSWORD_SIGN_IN_METHOD="password";qc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J4{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dd extends J4{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ba extends Dd{constructor(){super("facebook.com")}static credential(e){return Kl._fromParams({providerId:ba.PROVIDER_ID,signInMethod:ba.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ba.credentialFromTaggedObject(e)}static credentialFromError(e){return ba.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ba.credential(e.oauthAccessToken)}catch{return null}}}ba.FACEBOOK_SIGN_IN_METHOD="facebook.com";ba.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xa extends Dd{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Kl._fromParams({providerId:xa.PROVIDER_ID,signInMethod:xa.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return xa.credentialFromTaggedObject(e)}static credentialFromError(e){return xa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return xa.credential(n,r)}catch{return null}}}xa.GOOGLE_SIGN_IN_METHOD="google.com";xa.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sa extends Dd{constructor(){super("github.com")}static credential(e){return Kl._fromParams({providerId:Sa.PROVIDER_ID,signInMethod:Sa.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Sa.credentialFromTaggedObject(e)}static credentialFromError(e){return Sa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Sa.credential(e.oauthAccessToken)}catch{return null}}}Sa.GITHUB_SIGN_IN_METHOD="github.com";Sa.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aa extends Dd{constructor(){super("twitter.com")}static credential(e,n){return Kl._fromParams({providerId:Aa.PROVIDER_ID,signInMethod:Aa.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Aa.credentialFromTaggedObject(e)}static credentialFromError(e){return Aa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Aa.credential(n,r)}catch{return null}}}Aa.TWITTER_SIGN_IN_METHOD="twitter.com";Aa.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nc{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await So._fromIdTokenResponse(e,r,i),o=x_(r);return new Nc({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=x_(r);return new Nc({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function x_(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kp extends Ks{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Kp.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Kp(e,n,r,i)}}function Z4(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Kp._fromErrorAndOperation(t,s,e,r):s})}async function q6(t,e,n=!1){const r=await vd(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Nc._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function z6(t,e,n=!1){const{auth:r}=t;if(bo(r.app))return Promise.reject(qa(r));const i="reauthenticate";try{const s=await vd(t,Z4(r,i,e,t),n);mt(s.idToken,r,"internal-error");const o=cv(s.idToken);mt(o,r,"internal-error");const{sub:a}=o;return mt(t.uid===a,r,"user-mismatch"),Nc._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&hs(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function e3(t,e,n=!1){if(bo(t.app))return Promise.reject(qa(t));const r="signIn",i=await Z4(t,r,e),s=await Nc._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function $6(t,e){return e3(Bc(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function H6(t){const e=Bc(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function W6(t,e,n){return bo(t.app)?Promise.reject(qa(t)):$6(_n(t),qc.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&H6(t),r})}function G6(t,e,n,r){return _n(t).onIdTokenChanged(e,n,r)}function K6(t,e,n){return _n(t).beforeAuthStateChanged(e,n)}function Q6(t,e,n,r){return _n(t).onAuthStateChanged(e,n,r)}function Y6(t){return _n(t).signOut()}const Qp="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t3{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Qp,"1"),this.storage.removeItem(Qp),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X6=1e3,J6=10;class n3 extends t3{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=K4(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);v6()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,J6):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},X6)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}n3.type="LOCAL";const Z6=n3;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r3 extends t3{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}r3.type="SESSION";const i3=r3;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eC(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fm{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new Fm(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async u=>u(n.origin,s)),l=await eC(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Fm.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pv(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tC{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const u=pv("",20);i.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(f){const m=f;if(m.data.eventId===u)switch(m.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(m.data.response);break;default:clearTimeout(h),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qs(){return window}function nC(t){qs().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s3(){return typeof qs().WorkerGlobalScope<"u"&&typeof qs().importScripts=="function"}async function rC(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function iC(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function sC(){return s3()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o3="firebaseLocalStorageDb",oC=1,Yp="firebaseLocalStorage",a3="fbase_key";class Od{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Mm(t,e){return t.transaction([Yp],e?"readwrite":"readonly").objectStore(Yp)}function aC(){const t=indexedDB.deleteDatabase(o3);return new Od(t).toPromise()}function C0(){const t=indexedDB.open(o3,oC);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Yp,{keyPath:a3})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Yp)?e(r):(r.close(),await aC(),e(await C0()))})})}async function S_(t,e,n){const r=Mm(t,!0).put({[a3]:e,value:n});return new Od(r).toPromise()}async function lC(t,e){const n=Mm(t,!1).get(e),r=await new Od(n).toPromise();return r===void 0?null:r.value}function A_(t,e){const n=Mm(t,!0).delete(e);return new Od(n).toPromise()}const uC=800,cC=3;class l3{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await C0(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>cC)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return s3()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Fm._getInstance(sC()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await rC(),!this.activeServiceWorker)return;this.sender=new tC(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||iC()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await C0();return await S_(e,Qp,"1"),await A_(e,Qp),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>S_(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>lC(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>A_(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=Mm(i,!1).getAll();return new Od(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),uC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}l3.type="LOCAL";const hC=l3;new jd(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dC(t,e){return e?Ao(e):(mt(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mv extends dv{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return dc(e,this._buildIdpRequest())}_linkToIdToken(e,n){return dc(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return dc(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function fC(t){return e3(t.auth,new mv(t),t.bypassAuthState)}function pC(t){const{auth:e,user:n}=t;return mt(n,e,"internal-error"),z6(n,new mv(t),t.bypassAuthState)}async function mC(t){const{auth:e,user:n}=t;return mt(n,e,"internal-error"),q6(n,new mv(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u3{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return fC;case"linkViaPopup":case"linkViaRedirect":return mC;case"reauthViaPopup":case"reauthViaRedirect":return pC;default:hs(this.auth,"internal-error")}}resolve(e){Ro(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ro(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gC=new jd(2e3,1e4);class tc extends u3{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,tc.currentPopupAction&&tc.currentPopupAction.cancel(),tc.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return mt(e,this.auth,"internal-error"),e}async onExecution(){Ro(this.filter.length===1,"Popup operations only handle one event");const e=pv();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Bs(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Bs(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,tc.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Bs(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,gC.get())};e()}}tc.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vC="pendingRedirect",sp=new Map;class yC extends u3{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=sp.get(this.auth._key());if(!e){try{const r=await _C(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}sp.set(this.auth._key(),e)}return this.bypassAuthState||sp.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function _C(t,e){const n=xC(e),r=bC(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function wC(t,e){sp.set(t._key(),e)}function bC(t){return Ao(t._redirectPersistence)}function xC(t){return ip(vC,t.config.apiKey,t.name)}async function SC(t,e,n=!1){if(bo(t.app))return Promise.reject(qa(t));const r=Bc(t),i=dC(r,e),o=await new yC(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AC=10*60*1e3;class EC{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!NC(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!c3(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Bs(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=AC&&this.cachedEventUids.clear(),this.cachedEventUids.has(E_(e))}saveEventToCache(e){this.cachedEventUids.add(E_(e)),this.lastProcessedEventTime=Date.now()}}function E_(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function c3({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function NC(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return c3(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IC(t,e={}){return nl(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,kC=/^https?/;async function PC(t){if(t.config.emulator)return;const{authorizedDomains:e}=await IC(t);for(const n of e)try{if(CC(n))return}catch{}hs(t,"unauthorized-domain")}function CC(t){const e=k0(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!kC.test(n))return!1;if(TC.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LC=new jd(3e4,6e4);function N_(){const t=qs().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function RC(t){return new Promise((e,n)=>{var r,i,s;function o(){N_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{N_(),n(Bs(t,"network-request-failed"))},timeout:LC.get()})}if(!((i=(r=qs().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=qs().gapi)===null||s===void 0)&&s.load)o();else{const a=N6("iframefcb");return qs()[a]=()=>{gapi.load?o():n(Bs(t,"network-request-failed"))},Y4(`${E6()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw op=null,e})}let op=null;function jC(t){return op=op||RC(t),op}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DC=new jd(5e3,15e3),OC="__/auth/iframe",FC="emulator/auth/iframe",MC={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},UC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function VC(t){const e=t.config;mt(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?uv(e,FC):`https://${t.config.authDomain}/${OC}`,r={apiKey:e.apiKey,appName:t.name,v:tu},i=UC.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Rd(r).slice(1)}`}async function BC(t){const e=await jC(t),n=qs().gapi;return mt(n,t,"internal-error"),e.open({where:document.body,url:VC(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:MC,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=Bs(t,"network-request-failed"),a=qs().setTimeout(()=>{s(o)},DC.get());function l(){qs().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qC={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},zC=500,$C=600,HC="_blank",WC="http://localhost";class I_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function GC(t,e,n,r=zC,i=$C){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},qC),{width:r.toString(),height:i.toString(),top:s,left:o}),u=Cr().toLowerCase();n&&(a=z4(u)?HC:n),B4(u)&&(e=e||WC,l.scrollbars="yes");const h=Object.entries(l).reduce((m,[p,b])=>`${m}${p}=${b},`,"");if(g6(u)&&a!=="_self")return KC(e||"",a),new I_(null);const f=window.open(e||"",a,h);mt(f,t,"popup-blocked");try{f.focus()}catch{}return new I_(f)}function KC(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QC="__/auth/handler",YC="emulator/auth/handler",XC=encodeURIComponent("fac");async function T_(t,e,n,r,i,s){mt(t.config.authDomain,t,"auth-domain-config-required"),mt(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:tu,eventId:i};if(e instanceof J4){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",Vk(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,f]of Object.entries({}))o[h]=f}if(e instanceof Dd){const h=e.getScopes().filter(f=>f!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const l=await t._getAppCheckToken(),u=l?`#${XC}=${encodeURIComponent(l)}`:"";return`${JC(t)}?${Rd(a).slice(1)}${u}`}function JC({config:t}){return t.emulator?uv(t,YC):`https://${t.authDomain}/${QC}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a1="webStorageSupport";class ZC{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=i3,this._completeRedirectFn=SC,this._overrideRedirectResult=wC}async _openPopup(e,n,r,i){var s;Ro((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await T_(e,n,r,k0(),i);return GC(e,o,pv())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await T_(e,n,r,k0(),i);return nC(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Ro(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await BC(e),r=new EC(e);return n.register("authEvent",i=>(mt(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(a1,{type:a1},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[a1];o!==void 0&&n(!!o),hs(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=PC(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return K4()||q4()||hv()}}const eL=ZC;var k_="@firebase/auth",P_="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tL{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){mt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nL(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function rL(t){Gl(new Wa("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;mt(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Q4(t)},u=new x6(r,i,s,l);return C6(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Gl(new Wa("auth-internal",e=>{const n=Bc(e.getProvider("auth").getImmediate());return(r=>new tL(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Vs(k_,P_,nL(t)),Vs(k_,P_,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iL=5*60,sL=E4("authIdTokenMaxAge")||iL;let C_=null;const oL=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>sL)return;const i=n==null?void 0:n.token;C_!==i&&(C_=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function aL(t=ov()){const e=jm(t,"auth");if(e.isInitialized())return e.getImmediate();const n=P6(t,{popupRedirectResolver:eL,persistence:[hC,Z6,i3]}),r=E4("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=oL(s.toString());K6(n,o,()=>o(n.currentUser)),G6(n,a=>o(a))}}const i=x4("auth");return i&&L6(n,`http://${i}`),n}function lL(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}S6({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=Bs("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",lL().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});rL("Browser");var uL="firebase",cL="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Vs(uL,cL,"app");var L_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ul,h3;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(L,y){function S(){}S.prototype=y.prototype,L.D=y.prototype,L.prototype=new S,L.prototype.constructor=L,L.C=function(R,N,T){for(var P=Array(arguments.length-2),U=2;U<arguments.length;U++)P[U-2]=arguments[U];return y.prototype[N].apply(R,P)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(L,y,S){S||(S=0);var R=Array(16);if(typeof y=="string")for(var N=0;16>N;++N)R[N]=y.charCodeAt(S++)|y.charCodeAt(S++)<<8|y.charCodeAt(S++)<<16|y.charCodeAt(S++)<<24;else for(N=0;16>N;++N)R[N]=y[S++]|y[S++]<<8|y[S++]<<16|y[S++]<<24;y=L.g[0],S=L.g[1],N=L.g[2];var T=L.g[3],P=y+(T^S&(N^T))+R[0]+3614090360&4294967295;y=S+(P<<7&4294967295|P>>>25),P=T+(N^y&(S^N))+R[1]+3905402710&4294967295,T=y+(P<<12&4294967295|P>>>20),P=N+(S^T&(y^S))+R[2]+606105819&4294967295,N=T+(P<<17&4294967295|P>>>15),P=S+(y^N&(T^y))+R[3]+3250441966&4294967295,S=N+(P<<22&4294967295|P>>>10),P=y+(T^S&(N^T))+R[4]+4118548399&4294967295,y=S+(P<<7&4294967295|P>>>25),P=T+(N^y&(S^N))+R[5]+1200080426&4294967295,T=y+(P<<12&4294967295|P>>>20),P=N+(S^T&(y^S))+R[6]+2821735955&4294967295,N=T+(P<<17&4294967295|P>>>15),P=S+(y^N&(T^y))+R[7]+4249261313&4294967295,S=N+(P<<22&4294967295|P>>>10),P=y+(T^S&(N^T))+R[8]+1770035416&4294967295,y=S+(P<<7&4294967295|P>>>25),P=T+(N^y&(S^N))+R[9]+2336552879&4294967295,T=y+(P<<12&4294967295|P>>>20),P=N+(S^T&(y^S))+R[10]+4294925233&4294967295,N=T+(P<<17&4294967295|P>>>15),P=S+(y^N&(T^y))+R[11]+2304563134&4294967295,S=N+(P<<22&4294967295|P>>>10),P=y+(T^S&(N^T))+R[12]+1804603682&4294967295,y=S+(P<<7&4294967295|P>>>25),P=T+(N^y&(S^N))+R[13]+4254626195&4294967295,T=y+(P<<12&4294967295|P>>>20),P=N+(S^T&(y^S))+R[14]+2792965006&4294967295,N=T+(P<<17&4294967295|P>>>15),P=S+(y^N&(T^y))+R[15]+1236535329&4294967295,S=N+(P<<22&4294967295|P>>>10),P=y+(N^T&(S^N))+R[1]+4129170786&4294967295,y=S+(P<<5&4294967295|P>>>27),P=T+(S^N&(y^S))+R[6]+3225465664&4294967295,T=y+(P<<9&4294967295|P>>>23),P=N+(y^S&(T^y))+R[11]+643717713&4294967295,N=T+(P<<14&4294967295|P>>>18),P=S+(T^y&(N^T))+R[0]+3921069994&4294967295,S=N+(P<<20&4294967295|P>>>12),P=y+(N^T&(S^N))+R[5]+3593408605&4294967295,y=S+(P<<5&4294967295|P>>>27),P=T+(S^N&(y^S))+R[10]+38016083&4294967295,T=y+(P<<9&4294967295|P>>>23),P=N+(y^S&(T^y))+R[15]+3634488961&4294967295,N=T+(P<<14&4294967295|P>>>18),P=S+(T^y&(N^T))+R[4]+3889429448&4294967295,S=N+(P<<20&4294967295|P>>>12),P=y+(N^T&(S^N))+R[9]+568446438&4294967295,y=S+(P<<5&4294967295|P>>>27),P=T+(S^N&(y^S))+R[14]+3275163606&4294967295,T=y+(P<<9&4294967295|P>>>23),P=N+(y^S&(T^y))+R[3]+4107603335&4294967295,N=T+(P<<14&4294967295|P>>>18),P=S+(T^y&(N^T))+R[8]+1163531501&4294967295,S=N+(P<<20&4294967295|P>>>12),P=y+(N^T&(S^N))+R[13]+2850285829&4294967295,y=S+(P<<5&4294967295|P>>>27),P=T+(S^N&(y^S))+R[2]+4243563512&4294967295,T=y+(P<<9&4294967295|P>>>23),P=N+(y^S&(T^y))+R[7]+1735328473&4294967295,N=T+(P<<14&4294967295|P>>>18),P=S+(T^y&(N^T))+R[12]+2368359562&4294967295,S=N+(P<<20&4294967295|P>>>12),P=y+(S^N^T)+R[5]+4294588738&4294967295,y=S+(P<<4&4294967295|P>>>28),P=T+(y^S^N)+R[8]+2272392833&4294967295,T=y+(P<<11&4294967295|P>>>21),P=N+(T^y^S)+R[11]+1839030562&4294967295,N=T+(P<<16&4294967295|P>>>16),P=S+(N^T^y)+R[14]+4259657740&4294967295,S=N+(P<<23&4294967295|P>>>9),P=y+(S^N^T)+R[1]+2763975236&4294967295,y=S+(P<<4&4294967295|P>>>28),P=T+(y^S^N)+R[4]+1272893353&4294967295,T=y+(P<<11&4294967295|P>>>21),P=N+(T^y^S)+R[7]+4139469664&4294967295,N=T+(P<<16&4294967295|P>>>16),P=S+(N^T^y)+R[10]+3200236656&4294967295,S=N+(P<<23&4294967295|P>>>9),P=y+(S^N^T)+R[13]+681279174&4294967295,y=S+(P<<4&4294967295|P>>>28),P=T+(y^S^N)+R[0]+3936430074&4294967295,T=y+(P<<11&4294967295|P>>>21),P=N+(T^y^S)+R[3]+3572445317&4294967295,N=T+(P<<16&4294967295|P>>>16),P=S+(N^T^y)+R[6]+76029189&4294967295,S=N+(P<<23&4294967295|P>>>9),P=y+(S^N^T)+R[9]+3654602809&4294967295,y=S+(P<<4&4294967295|P>>>28),P=T+(y^S^N)+R[12]+3873151461&4294967295,T=y+(P<<11&4294967295|P>>>21),P=N+(T^y^S)+R[15]+530742520&4294967295,N=T+(P<<16&4294967295|P>>>16),P=S+(N^T^y)+R[2]+3299628645&4294967295,S=N+(P<<23&4294967295|P>>>9),P=y+(N^(S|~T))+R[0]+4096336452&4294967295,y=S+(P<<6&4294967295|P>>>26),P=T+(S^(y|~N))+R[7]+1126891415&4294967295,T=y+(P<<10&4294967295|P>>>22),P=N+(y^(T|~S))+R[14]+2878612391&4294967295,N=T+(P<<15&4294967295|P>>>17),P=S+(T^(N|~y))+R[5]+4237533241&4294967295,S=N+(P<<21&4294967295|P>>>11),P=y+(N^(S|~T))+R[12]+1700485571&4294967295,y=S+(P<<6&4294967295|P>>>26),P=T+(S^(y|~N))+R[3]+2399980690&4294967295,T=y+(P<<10&4294967295|P>>>22),P=N+(y^(T|~S))+R[10]+4293915773&4294967295,N=T+(P<<15&4294967295|P>>>17),P=S+(T^(N|~y))+R[1]+2240044497&4294967295,S=N+(P<<21&4294967295|P>>>11),P=y+(N^(S|~T))+R[8]+1873313359&4294967295,y=S+(P<<6&4294967295|P>>>26),P=T+(S^(y|~N))+R[15]+4264355552&4294967295,T=y+(P<<10&4294967295|P>>>22),P=N+(y^(T|~S))+R[6]+2734768916&4294967295,N=T+(P<<15&4294967295|P>>>17),P=S+(T^(N|~y))+R[13]+1309151649&4294967295,S=N+(P<<21&4294967295|P>>>11),P=y+(N^(S|~T))+R[4]+4149444226&4294967295,y=S+(P<<6&4294967295|P>>>26),P=T+(S^(y|~N))+R[11]+3174756917&4294967295,T=y+(P<<10&4294967295|P>>>22),P=N+(y^(T|~S))+R[2]+718787259&4294967295,N=T+(P<<15&4294967295|P>>>17),P=S+(T^(N|~y))+R[9]+3951481745&4294967295,L.g[0]=L.g[0]+y&4294967295,L.g[1]=L.g[1]+(N+(P<<21&4294967295|P>>>11))&4294967295,L.g[2]=L.g[2]+N&4294967295,L.g[3]=L.g[3]+T&4294967295}r.prototype.u=function(L,y){y===void 0&&(y=L.length);for(var S=y-this.blockSize,R=this.B,N=this.h,T=0;T<y;){if(N==0)for(;T<=S;)i(this,L,T),T+=this.blockSize;if(typeof L=="string"){for(;T<y;)if(R[N++]=L.charCodeAt(T++),N==this.blockSize){i(this,R),N=0;break}}else for(;T<y;)if(R[N++]=L[T++],N==this.blockSize){i(this,R),N=0;break}}this.h=N,this.o+=y},r.prototype.v=function(){var L=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);L[0]=128;for(var y=1;y<L.length-8;++y)L[y]=0;var S=8*this.o;for(y=L.length-8;y<L.length;++y)L[y]=S&255,S/=256;for(this.u(L),L=Array(16),y=S=0;4>y;++y)for(var R=0;32>R;R+=8)L[S++]=this.g[y]>>>R&255;return L};function s(L,y){var S=a;return Object.prototype.hasOwnProperty.call(S,L)?S[L]:S[L]=y(L)}function o(L,y){this.h=y;for(var S=[],R=!0,N=L.length-1;0<=N;N--){var T=L[N]|0;R&&T==y||(S[N]=T,R=!1)}this.g=S}var a={};function l(L){return-128<=L&&128>L?s(L,function(y){return new o([y|0],0>y?-1:0)}):new o([L|0],0>L?-1:0)}function u(L){if(isNaN(L)||!isFinite(L))return f;if(0>L)return I(u(-L));for(var y=[],S=1,R=0;L>=S;R++)y[R]=L/S|0,S*=4294967296;return new o(y,0)}function h(L,y){if(L.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(L.charAt(0)=="-")return I(h(L.substring(1),y));if(0<=L.indexOf("-"))throw Error('number format error: interior "-" character');for(var S=u(Math.pow(y,8)),R=f,N=0;N<L.length;N+=8){var T=Math.min(8,L.length-N),P=parseInt(L.substring(N,N+T),y);8>T?(T=u(Math.pow(y,T)),R=R.j(T).add(u(P))):(R=R.j(S),R=R.add(u(P)))}return R}var f=l(0),m=l(1),p=l(16777216);t=o.prototype,t.m=function(){if(x(this))return-I(this).m();for(var L=0,y=1,S=0;S<this.g.length;S++){var R=this.i(S);L+=(0<=R?R:4294967296+R)*y,y*=4294967296}return L},t.toString=function(L){if(L=L||10,2>L||36<L)throw Error("radix out of range: "+L);if(b(this))return"0";if(x(this))return"-"+I(this).toString(L);for(var y=u(Math.pow(L,6)),S=this,R="";;){var N=O(S,y).g;S=_(S,N.j(y));var T=((0<S.g.length?S.g[0]:S.h)>>>0).toString(L);if(S=N,b(S))return T+R;for(;6>T.length;)T="0"+T;R=T+R}},t.i=function(L){return 0>L?0:L<this.g.length?this.g[L]:this.h};function b(L){if(L.h!=0)return!1;for(var y=0;y<L.g.length;y++)if(L.g[y]!=0)return!1;return!0}function x(L){return L.h==-1}t.l=function(L){return L=_(this,L),x(L)?-1:b(L)?0:1};function I(L){for(var y=L.g.length,S=[],R=0;R<y;R++)S[R]=~L.g[R];return new o(S,~L.h).add(m)}t.abs=function(){return x(this)?I(this):this},t.add=function(L){for(var y=Math.max(this.g.length,L.g.length),S=[],R=0,N=0;N<=y;N++){var T=R+(this.i(N)&65535)+(L.i(N)&65535),P=(T>>>16)+(this.i(N)>>>16)+(L.i(N)>>>16);R=P>>>16,T&=65535,P&=65535,S[N]=P<<16|T}return new o(S,S[S.length-1]&-2147483648?-1:0)};function _(L,y){return L.add(I(y))}t.j=function(L){if(b(this)||b(L))return f;if(x(this))return x(L)?I(this).j(I(L)):I(I(this).j(L));if(x(L))return I(this.j(I(L)));if(0>this.l(p)&&0>L.l(p))return u(this.m()*L.m());for(var y=this.g.length+L.g.length,S=[],R=0;R<2*y;R++)S[R]=0;for(R=0;R<this.g.length;R++)for(var N=0;N<L.g.length;N++){var T=this.i(R)>>>16,P=this.i(R)&65535,U=L.i(N)>>>16,Q=L.i(N)&65535;S[2*R+2*N]+=P*Q,E(S,2*R+2*N),S[2*R+2*N+1]+=T*Q,E(S,2*R+2*N+1),S[2*R+2*N+1]+=P*U,E(S,2*R+2*N+1),S[2*R+2*N+2]+=T*U,E(S,2*R+2*N+2)}for(R=0;R<y;R++)S[R]=S[2*R+1]<<16|S[2*R];for(R=y;R<2*y;R++)S[R]=0;return new o(S,0)};function E(L,y){for(;(L[y]&65535)!=L[y];)L[y+1]+=L[y]>>>16,L[y]&=65535,y++}function C(L,y){this.g=L,this.h=y}function O(L,y){if(b(y))throw Error("division by zero");if(b(L))return new C(f,f);if(x(L))return y=O(I(L),y),new C(I(y.g),I(y.h));if(x(y))return y=O(L,I(y)),new C(I(y.g),y.h);if(30<L.g.length){if(x(L)||x(y))throw Error("slowDivide_ only works with positive integers.");for(var S=m,R=y;0>=R.l(L);)S=K(S),R=K(R);var N=B(S,1),T=B(R,1);for(R=B(R,2),S=B(S,2);!b(R);){var P=T.add(R);0>=P.l(L)&&(N=N.add(S),T=P),R=B(R,1),S=B(S,1)}return y=_(L,N.j(y)),new C(N,y)}for(N=f;0<=L.l(y);){for(S=Math.max(1,Math.floor(L.m()/y.m())),R=Math.ceil(Math.log(S)/Math.LN2),R=48>=R?1:Math.pow(2,R-48),T=u(S),P=T.j(y);x(P)||0<P.l(L);)S-=R,T=u(S),P=T.j(y);b(T)&&(T=m),N=N.add(T),L=_(L,P)}return new C(N,L)}t.A=function(L){return O(this,L).h},t.and=function(L){for(var y=Math.max(this.g.length,L.g.length),S=[],R=0;R<y;R++)S[R]=this.i(R)&L.i(R);return new o(S,this.h&L.h)},t.or=function(L){for(var y=Math.max(this.g.length,L.g.length),S=[],R=0;R<y;R++)S[R]=this.i(R)|L.i(R);return new o(S,this.h|L.h)},t.xor=function(L){for(var y=Math.max(this.g.length,L.g.length),S=[],R=0;R<y;R++)S[R]=this.i(R)^L.i(R);return new o(S,this.h^L.h)};function K(L){for(var y=L.g.length+1,S=[],R=0;R<y;R++)S[R]=L.i(R)<<1|L.i(R-1)>>>31;return new o(S,L.h)}function B(L,y){var S=y>>5;y%=32;for(var R=L.g.length-S,N=[],T=0;T<R;T++)N[T]=0<y?L.i(T+S)>>>y|L.i(T+S+1)<<32-y:L.i(T+S);return new o(N,L.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,h3=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=h,Ul=o}).apply(typeof L_<"u"?L_:typeof self<"u"?self:typeof window<"u"?window:{});var Df=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var d3,Ph,f3,ap,L0,p3,m3,g3;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(d,k,D){return d==Array.prototype||d==Object.prototype||(d[k]=D.value),d};function n(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof Df=="object"&&Df];for(var k=0;k<d.length;++k){var D=d[k];if(D&&D.Math==Math)return D}throw Error("Cannot find global object")}var r=n(this);function i(d,k){if(k)e:{var D=r;d=d.split(".");for(var J=0;J<d.length-1;J++){var me=d[J];if(!(me in D))break e;D=D[me]}d=d[d.length-1],J=D[d],k=k(J),k!=J&&k!=null&&e(D,d,{configurable:!0,writable:!0,value:k})}}function s(d,k){d instanceof String&&(d+="");var D=0,J=!1,me={next:function(){if(!J&&D<d.length){var xe=D++;return{value:k(xe,d[xe]),done:!1}}return J=!0,{done:!0,value:void 0}}};return me[Symbol.iterator]=function(){return me},me}i("Array.prototype.values",function(d){return d||function(){return s(this,function(k,D){return D})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(d){var k=typeof d;return k=k!="object"?k:d?Array.isArray(d)?"array":k:"null",k=="array"||k=="object"&&typeof d.length=="number"}function u(d){var k=typeof d;return k=="object"&&d!=null||k=="function"}function h(d,k,D){return d.call.apply(d.bind,arguments)}function f(d,k,D){if(!d)throw Error();if(2<arguments.length){var J=Array.prototype.slice.call(arguments,2);return function(){var me=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(me,J),d.apply(k,me)}}return function(){return d.apply(k,arguments)}}function m(d,k,D){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:f,m.apply(null,arguments)}function p(d,k){var D=Array.prototype.slice.call(arguments,1);return function(){var J=D.slice();return J.push.apply(J,arguments),d.apply(this,J)}}function b(d,k){function D(){}D.prototype=k.prototype,d.aa=k.prototype,d.prototype=new D,d.prototype.constructor=d,d.Qb=function(J,me,xe){for(var Fe=Array(arguments.length-2),yt=2;yt<arguments.length;yt++)Fe[yt-2]=arguments[yt];return k.prototype[me].apply(J,Fe)}}function x(d){const k=d.length;if(0<k){const D=Array(k);for(let J=0;J<k;J++)D[J]=d[J];return D}return[]}function I(d,k){for(let D=1;D<arguments.length;D++){const J=arguments[D];if(l(J)){const me=d.length||0,xe=J.length||0;d.length=me+xe;for(let Fe=0;Fe<xe;Fe++)d[me+Fe]=J[Fe]}else d.push(J)}}class _{constructor(k,D){this.i=k,this.j=D,this.h=0,this.g=null}get(){let k;return 0<this.h?(this.h--,k=this.g,this.g=k.next,k.next=null):k=this.i(),k}}function E(d){return/^[\s\xa0]*$/.test(d)}function C(){var d=a.navigator;return d&&(d=d.userAgent)?d:""}function O(d){return O[" "](d),d}O[" "]=function(){};var K=C().indexOf("Gecko")!=-1&&!(C().toLowerCase().indexOf("webkit")!=-1&&C().indexOf("Edge")==-1)&&!(C().indexOf("Trident")!=-1||C().indexOf("MSIE")!=-1)&&C().indexOf("Edge")==-1;function B(d,k,D){for(const J in d)k.call(D,d[J],J,d)}function L(d,k){for(const D in d)k.call(void 0,d[D],D,d)}function y(d){const k={};for(const D in d)k[D]=d[D];return k}const S="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function R(d,k){let D,J;for(let me=1;me<arguments.length;me++){J=arguments[me];for(D in J)d[D]=J[D];for(let xe=0;xe<S.length;xe++)D=S[xe],Object.prototype.hasOwnProperty.call(J,D)&&(d[D]=J[D])}}function N(d){var k=1;d=d.split(":");const D=[];for(;0<k&&d.length;)D.push(d.shift()),k--;return d.length&&D.push(d.join(":")),D}function T(d){a.setTimeout(()=>{throw d},0)}function P(){var d=ee;let k=null;return d.g&&(k=d.g,d.g=d.g.next,d.g||(d.h=null),k.next=null),k}class U{constructor(){this.h=this.g=null}add(k,D){const J=Q.get();J.set(k,D),this.h?this.h.next=J:this.g=J,this.h=J}}var Q=new _(()=>new F,d=>d.reset());class F{constructor(){this.next=this.g=this.h=null}set(k,D){this.h=k,this.g=D,this.next=null}reset(){this.next=this.g=this.h=null}}let V,G=!1,ee=new U,ie=()=>{const d=a.Promise.resolve(void 0);V=()=>{d.then(be)}};var be=()=>{for(var d;d=P();){try{d.h.call(d.g)}catch(D){T(D)}var k=Q;k.j(d),100>k.h&&(k.h++,d.next=k.g,k.g=d)}G=!1};function M(){this.s=this.s,this.C=this.C}M.prototype.s=!1,M.prototype.ma=function(){this.s||(this.s=!0,this.N())},M.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Y(d,k){this.type=d,this.g=this.target=k,this.defaultPrevented=!1}Y.prototype.h=function(){this.defaultPrevented=!0};var X=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var d=!1,k=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const D=()=>{};a.addEventListener("test",D,k),a.removeEventListener("test",D,k)}catch{}return d}();function H(d,k){if(Y.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d){var D=this.type=d.type,J=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;if(this.target=d.target||d.srcElement,this.g=k,k=d.relatedTarget){if(K){e:{try{O(k.nodeName);var me=!0;break e}catch{}me=!1}me||(k=null)}}else D=="mouseover"?k=d.fromElement:D=="mouseout"&&(k=d.toElement);this.relatedTarget=k,J?(this.clientX=J.clientX!==void 0?J.clientX:J.pageX,this.clientY=J.clientY!==void 0?J.clientY:J.pageY,this.screenX=J.screenX||0,this.screenY=J.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=typeof d.pointerType=="string"?d.pointerType:oe[d.pointerType]||"",this.state=d.state,this.i=d,d.defaultPrevented&&H.aa.h.call(this)}}b(H,Y);var oe={2:"touch",3:"pen",4:"mouse"};H.prototype.h=function(){H.aa.h.call(this);var d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var ne="closure_listenable_"+(1e6*Math.random()|0),ue=0;function he(d,k,D,J,me){this.listener=d,this.proxy=null,this.src=k,this.type=D,this.capture=!!J,this.ha=me,this.key=++ue,this.da=this.fa=!1}function Ee(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function Ne(d){this.src=d,this.g={},this.h=0}Ne.prototype.add=function(d,k,D,J,me){var xe=d.toString();d=this.g[xe],d||(d=this.g[xe]=[],this.h++);var Fe=Ue(d,k,J,me);return-1<Fe?(k=d[Fe],D||(k.fa=!1)):(k=new he(k,this.src,xe,!!J,me),k.fa=D,d.push(k)),k};function je(d,k){var D=k.type;if(D in d.g){var J=d.g[D],me=Array.prototype.indexOf.call(J,k,void 0),xe;(xe=0<=me)&&Array.prototype.splice.call(J,me,1),xe&&(Ee(k),d.g[D].length==0&&(delete d.g[D],d.h--))}}function Ue(d,k,D,J){for(var me=0;me<d.length;++me){var xe=d[me];if(!xe.da&&xe.listener==k&&xe.capture==!!D&&xe.ha==J)return me}return-1}var Ye="closure_lm_"+(1e6*Math.random()|0),Se={};function ae(d,k,D,J,me){if(Array.isArray(k)){for(var xe=0;xe<k.length;xe++)ae(d,k[xe],D,J,me);return null}return D=st(D),d&&d[ne]?d.K(k,D,u(J)?!!J.capture:!1,me):ye(d,k,D,!1,J,me)}function ye(d,k,D,J,me,xe){if(!k)throw Error("Invalid event type");var Fe=u(me)?!!me.capture:!!me,yt=He(d);if(yt||(d[Ye]=yt=new Ne(d)),D=yt.add(k,D,J,Fe,xe),D.proxy)return D;if(J=Re(),D.proxy=J,J.src=d,J.listener=D,d.addEventListener)X||(me=Fe),me===void 0&&(me=!1),d.addEventListener(k.toString(),J,me);else if(d.attachEvent)d.attachEvent(Be(k.toString()),J);else if(d.addListener&&d.removeListener)d.addListener(J);else throw Error("addEventListener and attachEvent are unavailable.");return D}function Re(){function d(D){return k.call(d.src,d.listener,D)}const k=ze;return d}function Te(d,k,D,J,me){if(Array.isArray(k))for(var xe=0;xe<k.length;xe++)Te(d,k[xe],D,J,me);else J=u(J)?!!J.capture:!!J,D=st(D),d&&d[ne]?(d=d.i,k=String(k).toString(),k in d.g&&(xe=d.g[k],D=Ue(xe,D,J,me),-1<D&&(Ee(xe[D]),Array.prototype.splice.call(xe,D,1),xe.length==0&&(delete d.g[k],d.h--)))):d&&(d=He(d))&&(k=d.g[k.toString()],d=-1,k&&(d=Ue(k,D,J,me)),(D=-1<d?k[d]:null)&&Me(D))}function Me(d){if(typeof d!="number"&&d&&!d.da){var k=d.src;if(k&&k[ne])je(k.i,d);else{var D=d.type,J=d.proxy;k.removeEventListener?k.removeEventListener(D,J,d.capture):k.detachEvent?k.detachEvent(Be(D),J):k.addListener&&k.removeListener&&k.removeListener(J),(D=He(k))?(je(D,d),D.h==0&&(D.src=null,k[Ye]=null)):Ee(d)}}}function Be(d){return d in Se?Se[d]:Se[d]="on"+d}function ze(d,k){if(d.da)d=!0;else{k=new H(k,this);var D=d.listener,J=d.ha||d.src;d.fa&&Me(d),d=D.call(J,k)}return d}function He(d){return d=d[Ye],d instanceof Ne?d:null}var Qe="__closure_events_fn_"+(1e9*Math.random()>>>0);function st(d){return typeof d=="function"?d:(d[Qe]||(d[Qe]=function(k){return d.handleEvent(k)}),d[Qe])}function tt(){M.call(this),this.i=new Ne(this),this.M=this,this.F=null}b(tt,M),tt.prototype[ne]=!0,tt.prototype.removeEventListener=function(d,k,D,J){Te(this,d,k,D,J)};function lt(d,k){var D,J=d.F;if(J)for(D=[];J;J=J.F)D.push(J);if(d=d.M,J=k.type||k,typeof k=="string")k=new Y(k,d);else if(k instanceof Y)k.target=k.target||d;else{var me=k;k=new Y(J,d),R(k,me)}if(me=!0,D)for(var xe=D.length-1;0<=xe;xe--){var Fe=k.g=D[xe];me=ht(Fe,J,!0,k)&&me}if(Fe=k.g=d,me=ht(Fe,J,!0,k)&&me,me=ht(Fe,J,!1,k)&&me,D)for(xe=0;xe<D.length;xe++)Fe=k.g=D[xe],me=ht(Fe,J,!1,k)&&me}tt.prototype.N=function(){if(tt.aa.N.call(this),this.i){var d=this.i,k;for(k in d.g){for(var D=d.g[k],J=0;J<D.length;J++)Ee(D[J]);delete d.g[k],d.h--}}this.F=null},tt.prototype.K=function(d,k,D,J){return this.i.add(String(d),k,!1,D,J)},tt.prototype.L=function(d,k,D,J){return this.i.add(String(d),k,!0,D,J)};function ht(d,k,D,J){if(k=d.i.g[String(k)],!k)return!0;k=k.concat();for(var me=!0,xe=0;xe<k.length;++xe){var Fe=k[xe];if(Fe&&!Fe.da&&Fe.capture==D){var yt=Fe.listener,kt=Fe.ha||Fe.src;Fe.fa&&je(d.i,Fe),me=yt.call(kt,J)!==!1&&me}}return me&&!J.defaultPrevented}function ot(d,k,D){if(typeof d=="function")D&&(d=m(d,D));else if(d&&typeof d.handleEvent=="function")d=m(d.handleEvent,d);else throw Error("Invalid listener argument");return 2147483647<Number(k)?-1:a.setTimeout(d,k||0)}function at(d){d.g=ot(()=>{d.g=null,d.i&&(d.i=!1,at(d))},d.l);const k=d.h;d.h=null,d.m.apply(null,k)}class $e extends M{constructor(k,D){super(),this.m=k,this.l=D,this.h=null,this.i=!1,this.g=null}j(k){this.h=arguments,this.g?this.i=!0:at(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Lt(d){M.call(this),this.h=d,this.g={}}b(Lt,M);var vt=[];function sn(d){B(d.g,function(k,D){this.g.hasOwnProperty(D)&&Me(k)},d),d.g={}}Lt.prototype.N=function(){Lt.aa.N.call(this),sn(this)},Lt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var At=a.JSON.stringify,Bt=a.JSON.parse,Hr=class{stringify(d){return a.JSON.stringify(d,void 0)}parse(d){return a.JSON.parse(d,void 0)}};function It(){}It.prototype.h=null;function ui(d){return d.h||(d.h=d.i())}function Ut(){}var Hn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function xn(){Y.call(this,"d")}b(xn,Y);function Rt(){Y.call(this,"c")}b(Rt,Y);var it={},Et=null;function Lr(){return Et=Et||new tt}it.La="serverreachability";function Yt(d){Y.call(this,it.La,d)}b(Yt,Y);function fn(d){const k=Lr();lt(k,new Yt(k))}it.STAT_EVENT="statevent";function ci(d,k){Y.call(this,it.STAT_EVENT,d),this.stat=k}b(ci,Y);function Ze(d){const k=Lr();lt(k,new ci(k,d))}it.Ma="timingevent";function Wr(d,k){Y.call(this,it.Ma,d),this.size=k}b(Wr,Y);function gr(d,k){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){d()},k)}function Mn(){this.g=!0}Mn.prototype.xa=function(){this.g=!1};function kn(d,k,D,J,me,xe){d.info(function(){if(d.g)if(xe)for(var Fe="",yt=xe.split("&"),kt=0;kt<yt.length;kt++){var _t=yt[kt].split("=");if(1<_t.length){var zt=_t[0];_t=_t[1];var Jt=zt.split("_");Fe=2<=Jt.length&&Jt[1]=="type"?Fe+(zt+"="+_t+"&"):Fe+(zt+"=redacted&")}}else Fe=null;else Fe=xe;return"XMLHTTP REQ ("+J+") [attempt "+me+"]: "+k+`
`+D+`
`+Fe})}function Sn(d,k,D,J,me,xe,Fe){d.info(function(){return"XMLHTTP RESP ("+J+") [ attempt "+me+"]: "+k+`
`+D+`
`+xe+" "+Fe})}function Un(d,k,D,J){d.info(function(){return"XMLHTTP TEXT ("+k+"): "+zi(d,D)+(J?" "+J:"")})}function Mo(d,k){d.info(function(){return"TIMEOUT: "+k})}Mn.prototype.info=function(){};function zi(d,k){if(!d.g)return k;if(!k)return null;try{var D=JSON.parse(k);if(D){for(d=0;d<D.length;d++)if(Array.isArray(D[d])){var J=D[d];if(!(2>J.length)){var me=J[1];if(Array.isArray(me)&&!(1>me.length)){var xe=me[0];if(xe!="noop"&&xe!="stop"&&xe!="close")for(var Fe=1;Fe<me.length;Fe++)me[Fe]=""}}}}return At(D)}catch{return k}}var vr={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Gr={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Rr;function jr(){}b(jr,It),jr.prototype.g=function(){return new XMLHttpRequest},jr.prototype.i=function(){return{}},Rr=new jr;function Pn(d,k,D,J){this.j=d,this.i=k,this.l=D,this.R=J||1,this.U=new Lt(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new hi}function hi(){this.i=null,this.g="",this.h=!1}var vs={},ys={};function _s(d,k,D){d.L=1,d.v=no(Dr(k)),d.m=D,d.P=!0,Xs(d,null)}function Xs(d,k){d.F=Date.now(),Uo(d),d.A=Dr(d.v);var D=d.A,J=d.R;Array.isArray(J)||(J=[String(J)]),pt(D.i,"t",J),d.C=0,D=d.j.J,d.h=new hi,d.g=q(d.j,D?k:null,!d.m),0<d.O&&(d.M=new $e(m(d.Y,d,d.g),d.O)),k=d.U,D=d.g,J=d.ca;var me="readystatechange";Array.isArray(me)||(me&&(vt[0]=me.toString()),me=vt);for(var xe=0;xe<me.length;xe++){var Fe=ae(D,me[xe],J||k.handleEvent,!1,k.h||k);if(!Fe)break;k.g[Fe.key]=Fe}k=d.H?y(d.H):{},d.m?(d.u||(d.u="POST"),k["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.A,d.u,d.m,k)):(d.u="GET",d.g.ea(d.A,d.u,null,k)),fn(),kn(d.i,d.u,d.A,d.l,d.R,d.m)}Pn.prototype.ca=function(d){d=d.target;const k=this.M;k&&Wn(d)==3?k.j():this.Y(d)},Pn.prototype.Y=function(d){try{if(d==this.g)e:{const Jt=Wn(this.g);var k=this.g.Ba();const Xi=this.g.Z();if(!(3>Jt)&&(Jt!=3||this.g&&(this.h.h||this.g.oa()||yu(this.g)))){this.J||Jt!=4||k==7||(k==8||0>=Xi?fn(3):fn(2)),ws(this);var D=this.g.Z();this.X=D;t:if(Js(this)){var J=yu(this.g);d="";var me=J.length,xe=Wn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){$i(this),bs(this);var Fe="";break t}this.h.i=new a.TextDecoder}for(k=0;k<me;k++)this.h.h=!0,d+=this.h.i.decode(J[k],{stream:!(xe&&k==me-1)});J.length=0,this.h.g+=d,this.C=0,Fe=this.h.g}else Fe=this.g.oa();if(this.o=D==200,Sn(this.i,this.u,this.A,this.l,this.R,Jt,D),this.o){if(this.T&&!this.K){t:{if(this.g){var yt,kt=this.g;if((yt=kt.g?kt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!E(yt)){var _t=yt;break t}}_t=null}if(D=_t)Un(this.i,this.l,D,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Zs(this,D);else{this.o=!1,this.s=3,Ze(12),$i(this),bs(this);break e}}if(this.P){D=!0;let sr;for(;!this.J&&this.C<Fe.length;)if(sr=uu(this,Fe),sr==ys){Jt==4&&(this.s=4,Ze(14),D=!1),Un(this.i,this.l,null,"[Incomplete Response]");break}else if(sr==vs){this.s=4,Ze(15),Un(this.i,this.l,Fe,"[Invalid Chunk]"),D=!1;break}else Un(this.i,this.l,sr,null),Zs(this,sr);if(Js(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Jt!=4||Fe.length!=0||this.h.h||(this.s=1,Ze(16),D=!1),this.o=this.o&&D,!D)Un(this.i,this.l,Fe,"[Invalid Chunked Response]"),$i(this),bs(this);else if(0<Fe.length&&!this.W){this.W=!0;var zt=this.j;zt.g==this&&zt.ba&&!zt.M&&(zt.j.info("Great, no buffering proxy detected. Bytes received: "+Fe.length),Zo(zt),zt.M=!0,Ze(11))}}else Un(this.i,this.l,Fe,null),Zs(this,Fe);Jt==4&&$i(this),this.o&&!this.J&&(Jt==4?Ns(this.j,this):(this.o=!1,Uo(this)))}else As(this.g),D==400&&0<Fe.indexOf("Unknown SID")?(this.s=3,Ze(12)):(this.s=0,Ze(13)),$i(this),bs(this)}}}catch{}finally{}};function Js(d){return d.g?d.u=="GET"&&d.L!=2&&d.j.Ca:!1}function uu(d,k){var D=d.C,J=k.indexOf(`
`,D);return J==-1?ys:(D=Number(k.substring(D,J)),isNaN(D)?vs:(J+=1,J+D>k.length?ys:(k=k.slice(J,J+D),d.C=J+D,k)))}Pn.prototype.cancel=function(){this.J=!0,$i(this)};function Uo(d){d.S=Date.now()+d.I,cu(d,d.I)}function cu(d,k){if(d.B!=null)throw Error("WatchDog timer not null");d.B=gr(m(d.ba,d),k)}function ws(d){d.B&&(a.clearTimeout(d.B),d.B=null)}Pn.prototype.ba=function(){this.B=null;const d=Date.now();0<=d-this.S?(Mo(this.i,this.A),this.L!=2&&(fn(),Ze(17)),$i(this),this.s=2,bs(this)):cu(this,this.S-d)};function bs(d){d.j.G==0||d.J||Ns(d.j,d)}function $i(d){ws(d);var k=d.M;k&&typeof k.ma=="function"&&k.ma(),d.M=null,sn(d.U),d.g&&(k=d.g,d.g=null,k.abort(),k.ma())}function Zs(d,k){try{var D=d.j;if(D.G!=0&&(D.g==d||al(D.h,d))){if(!d.K&&al(D.h,d)&&D.G==3){try{var J=D.Da.g.parse(k)}catch{J=null}if(Array.isArray(J)&&J.length==3){var me=J;if(me[0]==0){e:if(!D.u){if(D.g)if(D.g.F+3e3<d.F)Yi(D),Qo(D);else break e;ao(D),Ze(18)}}else D.za=me[1],0<D.za-D.T&&37500>me[2]&&D.F&&D.v==0&&!D.C&&(D.C=gr(m(D.Za,D),6e3));if(1>=eo(D.h)&&D.ca){try{D.ca()}catch{}D.ca=void 0}}else yr(D,11)}else if((d.K||D.g==d)&&Yi(D),!E(k))for(me=D.Da.g.parse(k),k=0;k<me.length;k++){let _t=me[k];if(D.T=_t[0],_t=_t[1],D.G==2)if(_t[0]=="c"){D.K=_t[1],D.ia=_t[2];const zt=_t[3];zt!=null&&(D.la=zt,D.j.info("VER="+D.la));const Jt=_t[4];Jt!=null&&(D.Aa=Jt,D.j.info("SVER="+D.Aa));const Xi=_t[5];Xi!=null&&typeof Xi=="number"&&0<Xi&&(J=1.5*Xi,D.L=J,D.j.info("backChannelRequestTimeoutMs_="+J)),J=D;const sr=d.g;if(sr){const Is=sr.g?sr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Is){var xe=J.h;xe.g||Is.indexOf("spdy")==-1&&Is.indexOf("quic")==-1&&Is.indexOf("h2")==-1||(xe.j=xe.l,xe.g=new Set,xe.h&&(on(xe,xe.h),xe.h=null))}if(J.D){const Ts=sr.g?sr.g.getResponseHeader("X-HTTP-Session-Id"):null;Ts&&(J.ya=Ts,$t(J.I,J.D,Ts))}}D.G=3,D.l&&D.l.ua(),D.ba&&(D.R=Date.now()-d.F,D.j.info("Handshake RTT: "+D.R+"ms")),J=D;var Fe=d;if(J.qa=w(J,J.J?J.ia:null,J.W),Fe.K){ll(J.h,Fe);var yt=Fe,kt=J.L;kt&&(yt.I=kt),yt.B&&(ws(yt),Uo(yt)),J.g=Fe}else Jo(J);0<D.i.length&&Yo(D)}else _t[0]!="stop"&&_t[0]!="close"||yr(D,7);else D.G==3&&(_t[0]=="stop"||_t[0]=="close"?_t[0]=="stop"?yr(D,7):Qi(D):_t[0]!="noop"&&D.l&&D.l.ta(_t),D.v=0)}}fn(4)}catch{}}var Kc=class{constructor(d,k){this.g=d,this.map=k}};function ol(d){this.l=d||10,a.PerformanceNavigationTiming?(d=a.performance.getEntriesByType("navigation"),d=0<d.length&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function hu(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function eo(d){return d.h?1:d.g?d.g.size:0}function al(d,k){return d.h?d.h==k:d.g?d.g.has(k):!1}function on(d,k){d.g?d.g.add(k):d.h=k}function ll(d,k){d.h&&d.h==k?d.h=null:d.g&&d.g.has(k)&&d.g.delete(k)}ol.prototype.cancel=function(){if(this.i=ul(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function ul(d){if(d.h!=null)return d.i.concat(d.h.D);if(d.g!=null&&d.g.size!==0){let k=d.i;for(const D of d.g.values())k=k.concat(D.D);return k}return x(d.i)}function du(d){if(d.V&&typeof d.V=="function")return d.V();if(typeof Map<"u"&&d instanceof Map||typeof Set<"u"&&d instanceof Set)return Array.from(d.values());if(typeof d=="string")return d.split("");if(l(d)){for(var k=[],D=d.length,J=0;J<D;J++)k.push(d[J]);return k}k=[],D=0;for(J in d)k[D++]=d[J];return k}function cl(d){if(d.na&&typeof d.na=="function")return d.na();if(!d.V||typeof d.V!="function"){if(typeof Map<"u"&&d instanceof Map)return Array.from(d.keys());if(!(typeof Set<"u"&&d instanceof Set)){if(l(d)||typeof d=="string"){var k=[];d=d.length;for(var D=0;D<d;D++)k.push(D);return k}k=[],D=0;for(const J in d)k[D++]=J;return k}}}function fu(d,k){if(d.forEach&&typeof d.forEach=="function")d.forEach(k,void 0);else if(l(d)||typeof d=="string")Array.prototype.forEach.call(d,k,void 0);else for(var D=cl(d),J=du(d),me=J.length,xe=0;xe<me;xe++)k.call(void 0,J[xe],D&&D[xe],d)}var Kr=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Vo(d,k){if(d){d=d.split("&");for(var D=0;D<d.length;D++){var J=d[D].indexOf("="),me=null;if(0<=J){var xe=d[D].substring(0,J);me=d[D].substring(J+1)}else xe=d[D];k(xe,me?decodeURIComponent(me.replace(/\+/g," ")):"")}}}function An(d){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,d instanceof An){this.h=d.h,to(this,d.j),this.o=d.o,this.g=d.g,Bo(this,d.s),this.l=d.l;var k=d.i,D=new xs;D.i=k.i,k.g&&(D.g=new Map(k.g),D.h=k.h),hl(this,D),this.m=d.m}else d&&(k=String(d).match(Kr))?(this.h=!1,to(this,k[1]||"",!0),this.o=ro(k[2]||""),this.g=ro(k[3]||"",!0),Bo(this,k[4]),this.l=ro(k[5]||"",!0),hl(this,k[6]||"",!0),this.m=ro(k[7]||"")):(this.h=!1,this.i=new xs(null,this.h))}An.prototype.toString=function(){var d=[],k=this.j;k&&d.push(Hi(k,pu,!0),":");var D=this.g;return(D||k=="file")&&(d.push("//"),(k=this.o)&&d.push(Hi(k,pu,!0),"@"),d.push(encodeURIComponent(String(D)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),D=this.s,D!=null&&d.push(":",String(D))),(D=this.l)&&(this.g&&D.charAt(0)!="/"&&d.push("/"),d.push(Hi(D,D.charAt(0)=="/"?Wi:Yc,!0))),(D=this.i.toString())&&d.push("?",D),(D=this.m)&&d.push("#",Hi(D,zo)),d.join("")};function Dr(d){return new An(d)}function to(d,k,D){d.j=D?ro(k,!0):k,d.j&&(d.j=d.j.replace(/:$/,""))}function Bo(d,k){if(k){if(k=Number(k),isNaN(k)||0>k)throw Error("Bad port number "+k);d.s=k}else d.s=null}function hl(d,k,D){k instanceof xs?(d.i=k,Xc(d.i,d.h)):(D||(k=Hi(k,qo)),d.i=new xs(k,d.h))}function $t(d,k,D){d.i.set(k,D)}function no(d){return $t(d,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),d}function ro(d,k){return d?k?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function Hi(d,k,D){return typeof d=="string"?(d=encodeURI(d).replace(k,Qc),D&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function Qc(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var pu=/[#\/\?@]/g,Yc=/[#\?:]/g,Wi=/[#\?]/g,qo=/[#\?@]/g,zo=/#/g;function xs(d,k){this.h=this.g=null,this.i=d||null,this.j=!!k}function an(d){d.g||(d.g=new Map,d.h=0,d.i&&Vo(d.i,function(k,D){d.add(decodeURIComponent(k.replace(/\+/g," ")),D)}))}t=xs.prototype,t.add=function(d,k){an(this),this.i=null,d=Ss(this,d);var D=this.g.get(d);return D||this.g.set(d,D=[]),D.push(k),this.h+=1,this};function mu(d,k){an(d),k=Ss(d,k),d.g.has(k)&&(d.i=null,d.h-=d.g.get(k).length,d.g.delete(k))}function dl(d,k){return an(d),k=Ss(d,k),d.g.has(k)}t.forEach=function(d,k){an(this),this.g.forEach(function(D,J){D.forEach(function(me){d.call(k,me,J,this)},this)},this)},t.na=function(){an(this);const d=Array.from(this.g.values()),k=Array.from(this.g.keys()),D=[];for(let J=0;J<k.length;J++){const me=d[J];for(let xe=0;xe<me.length;xe++)D.push(k[J])}return D},t.V=function(d){an(this);let k=[];if(typeof d=="string")dl(this,d)&&(k=k.concat(this.g.get(Ss(this,d))));else{d=Array.from(this.g.values());for(let D=0;D<d.length;D++)k=k.concat(d[D])}return k},t.set=function(d,k){return an(this),this.i=null,d=Ss(this,d),dl(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[k]),this.h+=1,this},t.get=function(d,k){return d?(d=this.V(d),0<d.length?String(d[0]):k):k};function pt(d,k,D){mu(d,k),0<D.length&&(d.i=null,d.g.set(Ss(d,k),x(D)),d.h+=D.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],k=Array.from(this.g.keys());for(var D=0;D<k.length;D++){var J=k[D];const xe=encodeURIComponent(String(J)),Fe=this.V(J);for(J=0;J<Fe.length;J++){var me=xe;Fe[J]!==""&&(me+="="+encodeURIComponent(String(Fe[J]))),d.push(me)}}return this.i=d.join("&")};function Ss(d,k){return k=String(k),d.j&&(k=k.toLowerCase()),k}function Xc(d,k){k&&!d.j&&(an(d),d.i=null,d.g.forEach(function(D,J){var me=J.toLowerCase();J!=me&&(mu(this,J),pt(this,me,D))},d)),d.j=k}function Ii(d,k){const D=new Mn;if(a.Image){const J=new Image;J.onload=p(di,D,"TestLoadImage: loaded",!0,k,J),J.onerror=p(di,D,"TestLoadImage: error",!1,k,J),J.onabort=p(di,D,"TestLoadImage: abort",!1,k,J),J.ontimeout=p(di,D,"TestLoadImage: timeout",!1,k,J),a.setTimeout(function(){J.ontimeout&&J.ontimeout()},1e4),J.src=d}else k(!1)}function gu(d,k){const D=new Mn,J=new AbortController,me=setTimeout(()=>{J.abort(),di(D,"TestPingServer: timeout",!1,k)},1e4);fetch(d,{signal:J.signal}).then(xe=>{clearTimeout(me),xe.ok?di(D,"TestPingServer: ok",!0,k):di(D,"TestPingServer: server error",!1,k)}).catch(()=>{clearTimeout(me),di(D,"TestPingServer: error",!1,k)})}function di(d,k,D,J,me){try{me&&(me.onload=null,me.onerror=null,me.onabort=null,me.ontimeout=null),J(D)}catch{}}function $o(){this.g=new Hr}function fl(d,k,D){const J=D||"";try{fu(d,function(me,xe){let Fe=me;u(me)&&(Fe=At(me)),k.push(J+xe+"="+encodeURIComponent(Fe))})}catch(me){throw k.push(J+"type="+encodeURIComponent("_badmap")),me}}function Ho(d){this.l=d.Ub||null,this.j=d.eb||!1}b(Ho,It),Ho.prototype.g=function(){return new Wo(this.l,this.j)},Ho.prototype.i=function(d){return function(){return d}}({});function Wo(d,k){tt.call(this),this.D=d,this.o=k,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}b(Wo,tt),t=Wo.prototype,t.open=function(d,k){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=d,this.A=k,this.readyState=1,fi(this)},t.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const k={headers:this.u,method:this.B,credentials:this.m,cache:void 0};d&&(k.body=d),(this.D||a).fetch(new Request(this.A,k)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Gi(this)),this.readyState=0},t.Sa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,fi(this)),this.g&&(this.readyState=3,fi(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;vu(this)}else d.text().then(this.Ra.bind(this),this.ga.bind(this))};function vu(d){d.j.read().then(d.Pa.bind(d)).catch(d.ga.bind(d))}t.Pa=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var k=d.value?d.value:new Uint8Array(0);(k=this.v.decode(k,{stream:!d.done}))&&(this.response=this.responseText+=k)}d.done?Gi(this):fi(this),this.readyState==3&&vu(this)}},t.Ra=function(d){this.g&&(this.response=this.responseText=d,Gi(this))},t.Qa=function(d){this.g&&(this.response=d,Gi(this))},t.ga=function(){this.g&&Gi(this)};function Gi(d){d.readyState=4,d.l=null,d.j=null,d.v=null,fi(d)}t.setRequestHeader=function(d,k){this.u.append(d,k)},t.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],k=this.h.entries();for(var D=k.next();!D.done;)D=D.value,d.push(D[0]+": "+D[1]),D=k.next();return d.join(`\r
`)};function fi(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(Wo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function Ki(d){let k="";return B(d,function(D,J){k+=J,k+=":",k+=D,k+=`\r
`}),k}function pl(d,k,D){e:{for(J in D){var J=!1;break e}J=!0}J||(D=Ki(D),typeof d=="string"?D!=null&&encodeURIComponent(String(D)):$t(d,k,D))}function qt(d){tt.call(this),this.headers=new Map,this.o=d||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}b(qt,tt);var ml=/^https?$/i,Go=["POST","PUT"];t=qt.prototype,t.Ha=function(d){this.J=d},t.ea=function(d,k,D,J){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);k=k?k.toUpperCase():"GET",this.D=d,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Rr.g(),this.v=this.o?ui(this.o):ui(Rr),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(k,String(d),!0),this.B=!1}catch(xe){gl(this,xe);return}if(d=D||"",D=new Map(this.headers),J)if(Object.getPrototypeOf(J)===Object.prototype)for(var me in J)D.set(me,J[me]);else if(typeof J.keys=="function"&&typeof J.get=="function")for(const xe of J.keys())D.set(xe,J.get(xe));else throw Error("Unknown input type for opt_headers: "+String(J));J=Array.from(D.keys()).find(xe=>xe.toLowerCase()=="content-type"),me=a.FormData&&d instanceof a.FormData,!(0<=Array.prototype.indexOf.call(Go,k,void 0))||J||me||D.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[xe,Fe]of D)this.g.setRequestHeader(xe,Fe);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{pi(this),this.u=!0,this.g.send(d),this.u=!1}catch(xe){gl(this,xe)}};function gl(d,k){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=k,d.m=5,vl(d),io(d)}function vl(d){d.A||(d.A=!0,lt(d,"complete"),lt(d,"error"))}t.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=d||7,lt(this,"complete"),lt(this,"abort"),io(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),io(this,!0)),qt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?yl(this):this.bb())},t.bb=function(){yl(this)};function yl(d){if(d.h&&typeof o<"u"&&(!d.v[1]||Wn(d)!=4||d.Z()!=2)){if(d.u&&Wn(d)==4)ot(d.Ea,0,d);else if(lt(d,"readystatechange"),Wn(d)==4){d.h=!1;try{const Fe=d.Z();e:switch(Fe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var k=!0;break e;default:k=!1}var D;if(!(D=k)){var J;if(J=Fe===0){var me=String(d.D).match(Kr)[1]||null;!me&&a.self&&a.self.location&&(me=a.self.location.protocol.slice(0,-1)),J=!ml.test(me?me.toLowerCase():"")}D=J}if(D)lt(d,"complete"),lt(d,"success");else{d.m=6;try{var xe=2<Wn(d)?d.g.statusText:""}catch{xe=""}d.l=xe+" ["+d.Z()+"]",vl(d)}}finally{io(d)}}}}function io(d,k){if(d.g){pi(d);const D=d.g,J=d.v[0]?()=>{}:null;d.g=null,d.v=null,k||lt(d,"ready");try{D.onreadystatechange=J}catch{}}}function pi(d){d.I&&(a.clearTimeout(d.I),d.I=null)}t.isActive=function(){return!!this.g};function Wn(d){return d.g?d.g.readyState:0}t.Z=function(){try{return 2<Wn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(d){if(this.g){var k=this.g.responseText;return d&&k.indexOf(d)==0&&(k=k.substring(d.length)),Bt(k)}};function yu(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.H){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function As(d){const k={};d=(d.g&&2<=Wn(d)&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let J=0;J<d.length;J++){if(E(d[J]))continue;var D=N(d[J]);const me=D[0];if(D=D[1],typeof D!="string")continue;D=D.trim();const xe=k[me]||[];k[me]=xe,xe.push(D)}L(k,function(J){return J.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ir(d,k,D){return D&&D.internalChannelParams&&D.internalChannelParams[d]||k}function Ko(d){this.Aa=0,this.i=[],this.j=new Mn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ir("failFast",!1,d),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ir("baseRetryDelayMs",5e3,d),this.cb=ir("retryDelaySeedMs",1e4,d),this.Wa=ir("forwardChannelMaxRetries",2,d),this.wa=ir("forwardChannelRequestTimeoutMs",2e4,d),this.pa=d&&d.xmlHttpFactory||void 0,this.Xa=d&&d.Tb||void 0,this.Ca=d&&d.useFetchStreams||!1,this.L=void 0,this.J=d&&d.supportsCrossDomainXhr||!1,this.K="",this.h=new ol(d&&d.concurrentRequestLimit),this.Da=new $o,this.P=d&&d.fastHandshake||!1,this.O=d&&d.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=d&&d.Rb||!1,d&&d.xa&&this.j.xa(),d&&d.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&d&&d.detectBufferingProxy||!1,this.ja=void 0,d&&d.longPollingTimeout&&0<d.longPollingTimeout&&(this.ja=d.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Ko.prototype,t.la=8,t.G=1,t.connect=function(d,k,D,J){Ze(0),this.W=d,this.H=k||{},D&&J!==void 0&&(this.H.OSID=D,this.H.OAID=J),this.F=this.X,this.I=w(this,null,this.W),Yo(this)};function Qi(d){if(so(d),d.G==3){var k=d.U++,D=Dr(d.I);if($t(D,"SID",d.K),$t(D,"RID",k),$t(D,"TYPE","terminate"),Es(d,D),k=new Pn(d,d.j,k),k.L=2,k.v=no(Dr(D)),D=!1,a.navigator&&a.navigator.sendBeacon)try{D=a.navigator.sendBeacon(k.v.toString(),"")}catch{}!D&&a.Image&&(new Image().src=k.v,D=!0),D||(k.g=q(k.j,null),k.g.ea(k.v)),k.F=Date.now(),Uo(k)}ta(d)}function Qo(d){d.g&&(Zo(d),d.g.cancel(),d.g=null)}function so(d){Qo(d),d.u&&(a.clearTimeout(d.u),d.u=null),Yi(d),d.h.cancel(),d.s&&(typeof d.s=="number"&&a.clearTimeout(d.s),d.s=null)}function Yo(d){if(!hu(d.h)&&!d.s){d.s=!0;var k=d.Ga;V||ie(),G||(V(),G=!0),ee.add(k,d),d.B=0}}function _l(d,k){return eo(d.h)>=d.h.j-(d.s?1:0)?!1:d.s?(d.i=k.D.concat(d.i),!0):d.G==1||d.G==2||d.B>=(d.Va?0:d.Wa)?!1:(d.s=gr(m(d.Ga,d,k),ea(d,d.B)),d.B++,!0)}t.Ga=function(d){if(this.s)if(this.s=null,this.G==1){if(!d){this.U=Math.floor(1e5*Math.random()),d=this.U++;const me=new Pn(this,this.j,d);let xe=this.o;if(this.S&&(xe?(xe=y(xe),R(xe,this.S)):xe=this.S),this.m!==null||this.O||(me.H=xe,xe=null),this.P)e:{for(var k=0,D=0;D<this.i.length;D++){t:{var J=this.i[D];if("__data__"in J.map&&(J=J.map.__data__,typeof J=="string")){J=J.length;break t}J=void 0}if(J===void 0)break;if(k+=J,4096<k){k=D;break e}if(k===4096||D===this.i.length-1){k=D+1;break e}}k=1e3}else k=1e3;k=oo(this,me,k),D=Dr(this.I),$t(D,"RID",d),$t(D,"CVER",22),this.D&&$t(D,"X-HTTP-Session-Id",this.D),Es(this,D),xe&&(this.O?k="headers="+encodeURIComponent(String(Ki(xe)))+"&"+k:this.m&&pl(D,this.m,xe)),on(this.h,me),this.Ua&&$t(D,"TYPE","init"),this.P?($t(D,"$req",k),$t(D,"SID","null"),me.T=!0,_s(me,D,null)):_s(me,D,k),this.G=2}}else this.G==3&&(d?Xo(this,d):this.i.length==0||hu(this.h)||Xo(this))};function Xo(d,k){var D;k?D=k.l:D=d.U++;const J=Dr(d.I);$t(J,"SID",d.K),$t(J,"RID",D),$t(J,"AID",d.T),Es(d,J),d.m&&d.o&&pl(J,d.m,d.o),D=new Pn(d,d.j,D,d.B+1),d.m===null&&(D.H=d.o),k&&(d.i=k.D.concat(d.i)),k=oo(d,D,1e3),D.I=Math.round(.5*d.wa)+Math.round(.5*d.wa*Math.random()),on(d.h,D),_s(D,J,k)}function Es(d,k){d.H&&B(d.H,function(D,J){$t(k,J,D)}),d.l&&fu({},function(D,J){$t(k,J,D)})}function oo(d,k,D){D=Math.min(d.i.length,D);var J=d.l?m(d.l.Na,d.l,d):null;e:{var me=d.i;let xe=-1;for(;;){const Fe=["count="+D];xe==-1?0<D?(xe=me[0].g,Fe.push("ofs="+xe)):xe=0:Fe.push("ofs="+xe);let yt=!0;for(let kt=0;kt<D;kt++){let _t=me[kt].g;const zt=me[kt].map;if(_t-=xe,0>_t)xe=Math.max(0,me[kt].g-100),yt=!1;else try{fl(zt,Fe,"req"+_t+"_")}catch{J&&J(zt)}}if(yt){J=Fe.join("&");break e}}}return d=d.i.splice(0,D),k.D=d,J}function Jo(d){if(!d.g&&!d.u){d.Y=1;var k=d.Fa;V||ie(),G||(V(),G=!0),ee.add(k,d),d.v=0}}function ao(d){return d.g||d.u||3<=d.v?!1:(d.Y++,d.u=gr(m(d.Fa,d),ea(d,d.v)),d.v++,!0)}t.Fa=function(){if(this.u=null,_u(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var d=2*this.R;this.j.info("BP detection timer enabled: "+d),this.A=gr(m(this.ab,this),d)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ze(10),Qo(this),_u(this))};function Zo(d){d.A!=null&&(a.clearTimeout(d.A),d.A=null)}function _u(d){d.g=new Pn(d,d.j,"rpc",d.Y),d.m===null&&(d.g.H=d.o),d.g.O=0;var k=Dr(d.qa);$t(k,"RID","rpc"),$t(k,"SID",d.K),$t(k,"AID",d.T),$t(k,"CI",d.F?"0":"1"),!d.F&&d.ja&&$t(k,"TO",d.ja),$t(k,"TYPE","xmlhttp"),Es(d,k),d.m&&d.o&&pl(k,d.m,d.o),d.L&&(d.g.I=d.L);var D=d.g;d=d.ia,D.L=1,D.v=no(Dr(k)),D.m=null,D.P=!0,Xs(D,d)}t.Za=function(){this.C!=null&&(this.C=null,Qo(this),ao(this),Ze(19))};function Yi(d){d.C!=null&&(a.clearTimeout(d.C),d.C=null)}function Ns(d,k){var D=null;if(d.g==k){Yi(d),Zo(d),d.g=null;var J=2}else if(al(d.h,k))D=k.D,ll(d.h,k),J=1;else return;if(d.G!=0){if(k.o)if(J==1){D=k.m?k.m.length:0,k=Date.now()-k.F;var me=d.B;J=Lr(),lt(J,new Wr(J,D)),Yo(d)}else Jo(d);else if(me=k.s,me==3||me==0&&0<k.X||!(J==1&&_l(d,k)||J==2&&ao(d)))switch(D&&0<D.length&&(k=d.h,k.i=k.i.concat(D)),me){case 1:yr(d,5);break;case 4:yr(d,10);break;case 3:yr(d,6);break;default:yr(d,2)}}}function ea(d,k){let D=d.Ta+Math.floor(Math.random()*d.cb);return d.isActive()||(D*=2),D*k}function yr(d,k){if(d.j.info("Error code "+k),k==2){var D=m(d.fb,d),J=d.Xa;const me=!J;J=new An(J||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||to(J,"https"),no(J),me?Ii(J.toString(),D):gu(J.toString(),D)}else Ze(2);d.G=0,d.l&&d.l.sa(k),ta(d),so(d)}t.fb=function(d){d?(this.j.info("Successfully pinged google.com"),Ze(2)):(this.j.info("Failed to ping google.com"),Ze(1))};function ta(d){if(d.G=0,d.ka=[],d.l){const k=ul(d.h);(k.length!=0||d.i.length!=0)&&(I(d.ka,k),I(d.ka,d.i),d.h.i.length=0,x(d.i),d.i.length=0),d.l.ra()}}function w(d,k,D){var J=D instanceof An?Dr(D):new An(D);if(J.g!="")k&&(J.g=k+"."+J.g),Bo(J,J.s);else{var me=a.location;J=me.protocol,k=k?k+"."+me.hostname:me.hostname,me=+me.port;var xe=new An(null);J&&to(xe,J),k&&(xe.g=k),me&&Bo(xe,me),D&&(xe.l=D),J=xe}return D=d.D,k=d.ya,D&&k&&$t(J,D,k),$t(J,"VER",d.la),Es(d,J),J}function q(d,k,D){if(k&&!d.J)throw Error("Can't create secondary domain capable XhrIo object.");return k=d.Ca&&!d.pa?new qt(new Ho({eb:D})):new qt(d.pa),k.Ha(d.J),k}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function se(){}t=se.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function ce(){}ce.prototype.g=function(d,k){return new ge(d,k)};function ge(d,k){tt.call(this),this.g=new Ko(k),this.l=d,this.h=k&&k.messageUrlParams||null,d=k&&k.messageHeaders||null,k&&k.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=k&&k.initMessageHeaders||null,k&&k.messageContentType&&(d?d["X-WebChannel-Content-Type"]=k.messageContentType:d={"X-WebChannel-Content-Type":k.messageContentType}),k&&k.va&&(d?d["X-WebChannel-Client-Profile"]=k.va:d={"X-WebChannel-Client-Profile":k.va}),this.g.S=d,(d=k&&k.Sb)&&!E(d)&&(this.g.m=d),this.v=k&&k.supportsCrossDomainXhr||!1,this.u=k&&k.sendRawJson||!1,(k=k&&k.httpSessionIdParam)&&!E(k)&&(this.g.D=k,d=this.h,d!==null&&k in d&&(d=this.h,k in d&&delete d[k])),this.j=new Ge(this)}b(ge,tt),ge.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},ge.prototype.close=function(){Qi(this.g)},ge.prototype.o=function(d){var k=this.g;if(typeof d=="string"){var D={};D.__data__=d,d=D}else this.u&&(D={},D.__data__=At(d),d=D);k.i.push(new Kc(k.Ya++,d)),k.G==3&&Yo(k)},ge.prototype.N=function(){this.g.l=null,delete this.j,Qi(this.g),delete this.g,ge.aa.N.call(this)};function Ie(d){xn.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var k=d.__sm__;if(k){e:{for(const D in k){d=D;break e}d=void 0}(this.i=d)&&(d=this.i,k=k!==null&&d in k?k[d]:void 0),this.data=k}else this.data=d}b(Ie,xn);function Oe(){Rt.call(this),this.status=1}b(Oe,Rt);function Ge(d){this.g=d}b(Ge,se),Ge.prototype.ua=function(){lt(this.g,"a")},Ge.prototype.ta=function(d){lt(this.g,new Ie(d))},Ge.prototype.sa=function(d){lt(this.g,new Oe)},Ge.prototype.ra=function(){lt(this.g,"b")},ce.prototype.createWebChannel=ce.prototype.g,ge.prototype.send=ge.prototype.o,ge.prototype.open=ge.prototype.m,ge.prototype.close=ge.prototype.close,g3=function(){return new ce},m3=function(){return Lr()},p3=it,L0={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},vr.NO_ERROR=0,vr.TIMEOUT=8,vr.HTTP_ERROR=6,ap=vr,Gr.COMPLETE="complete",f3=Gr,Ut.EventType=Hn,Hn.OPEN="a",Hn.CLOSE="b",Hn.ERROR="c",Hn.MESSAGE="d",tt.prototype.listen=tt.prototype.K,Ph=Ut,qt.prototype.listenOnce=qt.prototype.L,qt.prototype.getLastError=qt.prototype.Ka,qt.prototype.getLastErrorCode=qt.prototype.Ba,qt.prototype.getStatus=qt.prototype.Z,qt.prototype.getResponseJson=qt.prototype.Oa,qt.prototype.getResponseText=qt.prototype.oa,qt.prototype.send=qt.prototype.ea,qt.prototype.setWithCredentials=qt.prototype.Ha,d3=qt}).apply(typeof Df<"u"?Df:typeof self<"u"?self:typeof window<"u"?window:{});const R_="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nr{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Nr.UNAUTHENTICATED=new Nr(null),Nr.GOOGLE_CREDENTIALS=new Nr("google-credentials-uid"),Nr.FIRST_PARTY=new Nr("first-party-uid"),Nr.MOCK_USER=new Nr("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zc="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ql=new iv("@firebase/firestore");function wh(){return Ql.logLevel}function rt(t,...e){if(Ql.logLevel<=jt.DEBUG){const n=e.map(gv);Ql.debug(`Firestore (${zc}): ${t}`,...n)}}function jo(t,...e){if(Ql.logLevel<=jt.ERROR){const n=e.map(gv);Ql.error(`Firestore (${zc}): ${t}`,...n)}}function Ic(t,...e){if(Ql.logLevel<=jt.WARN){const n=e.map(gv);Ql.warn(`Firestore (${zc}): ${t}`,...n)}}function gv(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gt(t="Unexpected state"){const e=`FIRESTORE (${zc}) INTERNAL ASSERTION FAILED: `+t;throw jo(e),new Error(e)}function Qt(t,e){t||gt()}function xt(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Le={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Je extends Ks{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class No{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v3{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class hL{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Nr.UNAUTHENTICATED))}shutdown(){}}class dL{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class fL{constructor(e){this.t=e,this.currentUser=Nr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Qt(this.o===void 0);let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new No;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new No,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{rt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(rt("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new No)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(rt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Qt(typeof r.accessToken=="string"),new v3(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Qt(e===null||typeof e=="string"),new Nr(e)}}class pL{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Nr.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class mL{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new pL(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Nr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class gL{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class vL{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Qt(this.o===void 0);const r=s=>{s.error!=null&&rt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,rt("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{rt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):rt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Qt(typeof n.token=="string"),this.R=n.token,new gL(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yL(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y3{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=yL(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function Mt(t,e){return t<e?-1:t>e?1:0}function Tc(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yn{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Je(Le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Je(Le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new Je(Le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Je(Le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Yn.fromMillis(Date.now())}static fromDate(e){return Yn.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Yn(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Mt(this.nanoseconds,e.nanoseconds):Mt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new bt(e)}static min(){return new bt(new Yn(0,0))}static max(){return new bt(new Yn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _d{constructor(e,n,r){n===void 0?n=0:n>e.length&&gt(),r===void 0?r=e.length-n:r>e.length-n&&gt(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return _d.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof _d?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class un extends _d{construct(e,n,r){return new un(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Je(Le.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new un(n)}static emptyPath(){return new un([])}}const _L=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class hr extends _d{construct(e,n,r){return new hr(e,n,r)}static isValidIdentifier(e){return _L.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),hr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new hr(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new Je(Le.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new Je(Le.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new Je(Le.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new Je(Le.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new hr(n)}static emptyPath(){return new hr([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ut{constructor(e){this.path=e}static fromPath(e){return new ut(un.fromString(e))}static fromName(e){return new ut(un.fromString(e).popFirst(5))}static empty(){return new ut(un.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&un.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return un.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ut(new un(e.slice()))}}function wL(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=bt.fromTimestamp(r===1e9?new Yn(n+1,0):new Yn(n,r));return new Ga(i,ut.empty(),e)}function bL(t){return new Ga(t.readTime,t.key,-1)}class Ga{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Ga(bt.min(),ut.empty(),-1)}static max(){return new Ga(bt.max(),ut.empty(),-1)}}function xL(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ut.comparator(t.documentKey,e.documentKey),n!==0?n:Mt(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SL="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class AL{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fd(t){if(t.code!==Le.FAILED_PRECONDITION||t.message!==SL)throw t;rt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ve{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&gt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Ve((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof Ve?n:Ve.resolve(n)}catch(n){return Ve.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):Ve.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):Ve.reject(n)}static resolve(e){return new Ve((n,r)=>{n(e)})}static reject(e){return new Ve((n,r)=>{r(e)})}static waitFor(e){return new Ve((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(e){let n=Ve.resolve(!1);for(const r of e)n=n.next(i=>i?Ve.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new Ve((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const u=l;n(e[u]).next(h=>{o[u]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,n){return new Ve((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function EL(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Md(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vv{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}vv.oe=-1;function Um(t){return t==null}function Xp(t){return t===0&&1/t==-1/0}function NL(t){return typeof t=="number"&&Number.isInteger(t)&&!Xp(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j_(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ru(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function _3(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(e,n){this.comparator=e,this.root=n||cr.EMPTY}insert(e,n){return new wn(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,cr.BLACK,null,null))}remove(e){return new wn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,cr.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Of(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Of(this.root,e,this.comparator,!1)}getReverseIterator(){return new Of(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Of(this.root,e,this.comparator,!0)}}class Of{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class cr{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??cr.RED,this.left=i??cr.EMPTY,this.right=s??cr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new cr(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return cr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return cr.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,cr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,cr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw gt();const e=this.left.check();if(e!==this.right.check())throw gt();return e+(this.isRed()?0:1)}}cr.EMPTY=null,cr.RED=!0,cr.BLACK=!1;cr.EMPTY=new class{constructor(){this.size=0}get key(){throw gt()}get value(){throw gt()}get color(){throw gt()}get left(){throw gt()}get right(){throw gt()}copy(e,n,r,i,s){return this}insert(e,n,r){return new cr(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr{constructor(e){this.comparator=e,this.data=new wn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new D_(this.data.getIterator())}getIteratorFrom(e){return new D_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof fr)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new fr(this.comparator);return n.data=e,n}}class D_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wi{constructor(e){this.fields=e,e.sort(hr.comparator)}static empty(){return new wi([])}unionWith(e){let n=new fr(hr.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new wi(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Tc(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w3 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new w3("Invalid base64 string: "+s):s}}(e);return new mr(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new mr(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Mt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}mr.EMPTY_BYTE_STRING=new mr("");const IL=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ka(t){if(Qt(!!t),typeof t=="string"){let e=0;const n=IL.exec(t);if(Qt(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Rn(t.seconds),nanos:Rn(t.nanos)}}function Rn(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Yl(t){return typeof t=="string"?mr.fromBase64String(t):mr.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yv(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function _v(t){const e=t.mapValue.fields.__previous_value__;return yv(e)?_v(e):e}function wd(t){const e=Ka(t.mapValue.fields.__local_write_time__.timestampValue);return new Yn(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TL{constructor(e,n,r,i,s,o,a,l,u){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u}}class bd{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new bd("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof bd&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ff={mapValue:{}};function Xl(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?yv(t)?4:PL(t)?9007199254740991:kL(t)?10:11:gt()}function Ws(t,e){if(t===e)return!0;const n=Xl(t);if(n!==Xl(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return wd(t).isEqual(wd(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Ka(i.timestampValue),a=Ka(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Yl(i.bytesValue).isEqual(Yl(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Rn(i.geoPointValue.latitude)===Rn(s.geoPointValue.latitude)&&Rn(i.geoPointValue.longitude)===Rn(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Rn(i.integerValue)===Rn(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Rn(i.doubleValue),a=Rn(s.doubleValue);return o===a?Xp(o)===Xp(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Tc(t.arrayValue.values||[],e.arrayValue.values||[],Ws);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(j_(o)!==j_(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Ws(o[l],a[l])))return!1;return!0}(t,e);default:return gt()}}function xd(t,e){return(t.values||[]).find(n=>Ws(n,e))!==void 0}function kc(t,e){if(t===e)return 0;const n=Xl(t),r=Xl(e);if(n!==r)return Mt(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Mt(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=Rn(s.integerValue||s.doubleValue),l=Rn(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return O_(t.timestampValue,e.timestampValue);case 4:return O_(wd(t),wd(e));case 5:return Mt(t.stringValue,e.stringValue);case 6:return function(s,o){const a=Yl(s),l=Yl(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let u=0;u<a.length&&u<l.length;u++){const h=Mt(a[u],l[u]);if(h!==0)return h}return Mt(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=Mt(Rn(s.latitude),Rn(o.latitude));return a!==0?a:Mt(Rn(s.longitude),Rn(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return F_(t.arrayValue,e.arrayValue);case 10:return function(s,o){var a,l,u,h;const f=s.fields||{},m=o.fields||{},p=(a=f.value)===null||a===void 0?void 0:a.arrayValue,b=(l=m.value)===null||l===void 0?void 0:l.arrayValue,x=Mt(((u=p==null?void 0:p.values)===null||u===void 0?void 0:u.length)||0,((h=b==null?void 0:b.values)===null||h===void 0?void 0:h.length)||0);return x!==0?x:F_(p,b)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===Ff.mapValue&&o===Ff.mapValue)return 0;if(s===Ff.mapValue)return 1;if(o===Ff.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),u=o.fields||{},h=Object.keys(u);l.sort(),h.sort();for(let f=0;f<l.length&&f<h.length;++f){const m=Mt(l[f],h[f]);if(m!==0)return m;const p=kc(a[l[f]],u[h[f]]);if(p!==0)return p}return Mt(l.length,h.length)}(t.mapValue,e.mapValue);default:throw gt()}}function O_(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Mt(t,e);const n=Ka(t),r=Ka(e),i=Mt(n.seconds,r.seconds);return i!==0?i:Mt(n.nanos,r.nanos)}function F_(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=kc(n[i],r[i]);if(s)return s}return Mt(n.length,r.length)}function Pc(t){return R0(t)}function R0(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Ka(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Yl(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ut.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=R0(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${R0(n.fields[o])}`;return i+"}"}(t.mapValue):gt()}function M_(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function j0(t){return!!t&&"integerValue"in t}function wv(t){return!!t&&"arrayValue"in t}function U_(t){return!!t&&"nullValue"in t}function V_(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function lp(t){return!!t&&"mapValue"in t}function kL(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Hh(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return ru(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Hh(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Hh(t.arrayValue.values[n]);return e}return Object.assign({},t)}function PL(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ri{constructor(e){this.value=e}static empty(){return new ri({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!lp(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Hh(n)}setAll(e){let n=hr.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=Hh(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());lp(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Ws(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];lp(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){ru(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new ri(Hh(this.value))}}function b3(t){const e=[];return ru(t.fields,(n,r)=>{const i=new hr([n]);if(lp(r)){const s=b3(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new wi(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Tr(e,0,bt.min(),bt.min(),bt.min(),ri.empty(),0)}static newFoundDocument(e,n,r,i){return new Tr(e,1,n,bt.min(),r,i,0)}static newNoDocument(e,n){return new Tr(e,2,n,bt.min(),bt.min(),ri.empty(),0)}static newUnknownDocument(e,n){return new Tr(e,3,n,bt.min(),bt.min(),ri.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(bt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ri.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ri.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=bt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Tr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Tr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jp{constructor(e,n){this.position=e,this.inclusive=n}}function B_(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=ut.comparator(ut.fromName(o.referenceValue),n.key):r=kc(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function q_(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Ws(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sd{constructor(e,n="asc"){this.field=e,this.dir=n}}function CL(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x3{}class $n extends x3{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new RL(e,n,r):n==="array-contains"?new OL(e,r):n==="in"?new FL(e,r):n==="not-in"?new ML(e,r):n==="array-contains-any"?new UL(e,r):new $n(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new jL(e,r):new DL(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(kc(n,this.value)):n!==null&&Xl(this.value)===Xl(n)&&this.matchesComparison(kc(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return gt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ds extends x3{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new ds(e,n)}matches(e){return S3(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function S3(t){return t.op==="and"}function A3(t){return LL(t)&&S3(t)}function LL(t){for(const e of t.filters)if(e instanceof ds)return!1;return!0}function D0(t){if(t instanceof $n)return t.field.canonicalString()+t.op.toString()+Pc(t.value);if(A3(t))return t.filters.map(e=>D0(e)).join(",");{const e=t.filters.map(n=>D0(n)).join(",");return`${t.op}(${e})`}}function E3(t,e){return t instanceof $n?function(r,i){return i instanceof $n&&r.op===i.op&&r.field.isEqual(i.field)&&Ws(r.value,i.value)}(t,e):t instanceof ds?function(r,i){return i instanceof ds&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&E3(o,i.filters[a]),!0):!1}(t,e):void gt()}function N3(t){return t instanceof $n?function(n){return`${n.field.canonicalString()} ${n.op} ${Pc(n.value)}`}(t):t instanceof ds?function(n){return n.op.toString()+" {"+n.getFilters().map(N3).join(" ,")+"}"}(t):"Filter"}class RL extends $n{constructor(e,n,r){super(e,n,r),this.key=ut.fromName(r.referenceValue)}matches(e){const n=ut.comparator(e.key,this.key);return this.matchesComparison(n)}}class jL extends $n{constructor(e,n){super(e,"in",n),this.keys=I3("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class DL extends $n{constructor(e,n){super(e,"not-in",n),this.keys=I3("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function I3(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>ut.fromName(r.referenceValue))}class OL extends $n{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return wv(n)&&xd(n.arrayValue,this.value)}}class FL extends $n{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&xd(this.value.arrayValue,n)}}class ML extends $n{constructor(e,n){super(e,"not-in",n)}matches(e){if(xd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!xd(this.value.arrayValue,n)}}class UL extends $n{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!wv(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>xd(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VL{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function z_(t,e=null,n=[],r=[],i=null,s=null,o=null){return new VL(t,e,n,r,i,s,o)}function bv(t){const e=xt(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>D0(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Um(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Pc(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Pc(r)).join(",")),e.ue=n}return e.ue}function xv(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!CL(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!E3(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!q_(t.startAt,e.startAt)&&q_(t.endAt,e.endAt)}function O0(t){return ut.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $c{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function BL(t,e,n,r,i,s,o,a){return new $c(t,e,n,r,i,s,o,a)}function Sv(t){return new $c(t)}function $_(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function T3(t){return t.collectionGroup!==null}function Wh(t){const e=xt(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new fr(hr.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Sd(s,r))}),n.has(hr.keyField().canonicalString())||e.ce.push(new Sd(hr.keyField(),r))}return e.ce}function zs(t){const e=xt(t);return e.le||(e.le=qL(e,Wh(t))),e.le}function qL(t,e){if(t.limitType==="F")return z_(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Sd(i.field,s)});const n=t.endAt?new Jp(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Jp(t.startAt.position,t.startAt.inclusive):null;return z_(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function F0(t,e){const n=t.filters.concat([e]);return new $c(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function M0(t,e,n){return new $c(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Vm(t,e){return xv(zs(t),zs(e))&&t.limitType===e.limitType}function k3(t){return`${bv(zs(t))}|lt:${t.limitType}`}function Mu(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>N3(i)).join(", ")}]`),Um(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Pc(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Pc(i)).join(",")),`Target(${r})`}(zs(t))}; limitType=${t.limitType})`}function Bm(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):ut.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of Wh(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const u=B_(o,a,l);return o.inclusive?u<=0:u<0}(r.startAt,Wh(r),i)||r.endAt&&!function(o,a,l){const u=B_(o,a,l);return o.inclusive?u>=0:u>0}(r.endAt,Wh(r),i))}(t,e)}function zL(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function P3(t){return(e,n)=>{let r=!1;for(const i of Wh(t)){const s=$L(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function $L(t,e,n){const r=t.field.isKeyField()?ut.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),u=a.data.field(s);return l!==null&&u!==null?kc(l,u):gt()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return gt()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hc{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ru(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return _3(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HL=new wn(ut.comparator);function Do(){return HL}const C3=new wn(ut.comparator);function Ch(...t){let e=C3;for(const n of t)e=e.insert(n.key,n);return e}function L3(t){let e=C3;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Dl(){return Gh()}function R3(){return Gh()}function Gh(){return new Hc(t=>t.toString(),(t,e)=>t.isEqual(e))}const WL=new wn(ut.comparator),GL=new fr(ut.comparator);function Ct(...t){let e=GL;for(const n of t)e=e.add(n);return e}const KL=new fr(Mt);function QL(){return KL}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Av(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Xp(e)?"-0":e}}function j3(t){return{integerValue:""+t}}function YL(t,e){return NL(e)?j3(e):Av(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qm{constructor(){this._=void 0}}function XL(t,e,n){return t instanceof Zp?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&yv(s)&&(s=_v(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof Ad?O3(t,e):t instanceof Ed?F3(t,e):function(i,s){const o=D3(i,s),a=H_(o)+H_(i.Pe);return j0(o)&&j0(i.Pe)?j3(a):Av(i.serializer,a)}(t,e)}function JL(t,e,n){return t instanceof Ad?O3(t,e):t instanceof Ed?F3(t,e):n}function D3(t,e){return t instanceof em?function(r){return j0(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Zp extends qm{}class Ad extends qm{constructor(e){super(),this.elements=e}}function O3(t,e){const n=M3(e);for(const r of t.elements)n.some(i=>Ws(i,r))||n.push(r);return{arrayValue:{values:n}}}class Ed extends qm{constructor(e){super(),this.elements=e}}function F3(t,e){let n=M3(e);for(const r of t.elements)n=n.filter(i=>!Ws(i,r));return{arrayValue:{values:n}}}class em extends qm{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function H_(t){return Rn(t.integerValue||t.doubleValue)}function M3(t){return wv(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function ZL(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Ad&&i instanceof Ad||r instanceof Ed&&i instanceof Ed?Tc(r.elements,i.elements,Ws):r instanceof em&&i instanceof em?Ws(r.Pe,i.Pe):r instanceof Zp&&i instanceof Zp}(t.transform,e.transform)}class eR{constructor(e,n){this.version=e,this.transformResults=n}}class Vi{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Vi}static exists(e){return new Vi(void 0,e)}static updateTime(e){return new Vi(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function up(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class zm{}function U3(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Ev(t.key,Vi.none()):new Ud(t.key,t.data,Vi.none());{const n=t.data,r=ri.empty();let i=new fr(hr.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new rl(t.key,r,new wi(i.toArray()),Vi.none())}}function tR(t,e,n){t instanceof Ud?function(i,s,o){const a=i.value.clone(),l=G_(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof rl?function(i,s,o){if(!up(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=G_(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(V3(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Kh(t,e,n,r){return t instanceof Ud?function(s,o,a,l){if(!up(s.precondition,o))return a;const u=s.value.clone(),h=K_(s.fieldTransforms,l,o);return u.setAll(h),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof rl?function(s,o,a,l){if(!up(s.precondition,o))return a;const u=K_(s.fieldTransforms,l,o),h=o.data;return h.setAll(V3(s)),h.setAll(u),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(s,o,a){return up(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function nR(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=D3(r.transform,i||null);s!=null&&(n===null&&(n=ri.empty()),n.set(r.field,s))}return n||null}function W_(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Tc(r,i,(s,o)=>ZL(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Ud extends zm{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class rl extends zm{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function V3(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function G_(t,e,n){const r=new Map;Qt(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,JL(o,a,n[i]))}return r}function K_(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,XL(s,o,e))}return r}class Ev extends zm{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class rR extends zm{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iR{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&tR(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Kh(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Kh(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=R3();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=U3(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(bt.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ct())}isEqual(e){return this.batchId===e.batchId&&Tc(this.mutations,e.mutations,(n,r)=>W_(n,r))&&Tc(this.baseMutations,e.baseMutations,(n,r)=>W_(n,r))}}class Nv{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Qt(e.mutations.length===r.length);let i=function(){return WL}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new Nv(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sR{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oR{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qn,Dt;function aR(t){switch(t){default:return gt();case Le.CANCELLED:case Le.UNKNOWN:case Le.DEADLINE_EXCEEDED:case Le.RESOURCE_EXHAUSTED:case Le.INTERNAL:case Le.UNAVAILABLE:case Le.UNAUTHENTICATED:return!1;case Le.INVALID_ARGUMENT:case Le.NOT_FOUND:case Le.ALREADY_EXISTS:case Le.PERMISSION_DENIED:case Le.FAILED_PRECONDITION:case Le.ABORTED:case Le.OUT_OF_RANGE:case Le.UNIMPLEMENTED:case Le.DATA_LOSS:return!0}}function B3(t){if(t===void 0)return jo("GRPC error has no .code"),Le.UNKNOWN;switch(t){case qn.OK:return Le.OK;case qn.CANCELLED:return Le.CANCELLED;case qn.UNKNOWN:return Le.UNKNOWN;case qn.DEADLINE_EXCEEDED:return Le.DEADLINE_EXCEEDED;case qn.RESOURCE_EXHAUSTED:return Le.RESOURCE_EXHAUSTED;case qn.INTERNAL:return Le.INTERNAL;case qn.UNAVAILABLE:return Le.UNAVAILABLE;case qn.UNAUTHENTICATED:return Le.UNAUTHENTICATED;case qn.INVALID_ARGUMENT:return Le.INVALID_ARGUMENT;case qn.NOT_FOUND:return Le.NOT_FOUND;case qn.ALREADY_EXISTS:return Le.ALREADY_EXISTS;case qn.PERMISSION_DENIED:return Le.PERMISSION_DENIED;case qn.FAILED_PRECONDITION:return Le.FAILED_PRECONDITION;case qn.ABORTED:return Le.ABORTED;case qn.OUT_OF_RANGE:return Le.OUT_OF_RANGE;case qn.UNIMPLEMENTED:return Le.UNIMPLEMENTED;case qn.DATA_LOSS:return Le.DATA_LOSS;default:return gt()}}(Dt=qn||(qn={}))[Dt.OK=0]="OK",Dt[Dt.CANCELLED=1]="CANCELLED",Dt[Dt.UNKNOWN=2]="UNKNOWN",Dt[Dt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Dt[Dt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Dt[Dt.NOT_FOUND=5]="NOT_FOUND",Dt[Dt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Dt[Dt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Dt[Dt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Dt[Dt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Dt[Dt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Dt[Dt.ABORTED=10]="ABORTED",Dt[Dt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Dt[Dt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Dt[Dt.INTERNAL=13]="INTERNAL",Dt[Dt.UNAVAILABLE=14]="UNAVAILABLE",Dt[Dt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lR(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uR=new Ul([4294967295,4294967295],0);function Q_(t){const e=lR().encode(t),n=new h3;return n.update(e),new Uint8Array(n.digest())}function Y_(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Ul([n,r],0),new Ul([i,s],0)]}class Iv{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Lh(`Invalid padding: ${n}`);if(r<0)throw new Lh(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Lh(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Lh(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Ul.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(Ul.fromNumber(r)));return i.compare(uR)===1&&(i=new Ul([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=Q_(e),[r,i]=Y_(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new Iv(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=Q_(e),[r,i]=Y_(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Lh extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $m{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Vd.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new $m(bt.min(),i,new wn(Mt),Do(),Ct())}}class Vd{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Vd(r,n,Ct(),Ct(),Ct())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cp{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class q3{constructor(e,n){this.targetId=e,this.me=n}}class z3{constructor(e,n,r=mr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class X_{constructor(){this.fe=0,this.ge=Z_(),this.pe=mr.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Ct(),n=Ct(),r=Ct();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:gt()}}),new Vd(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=Z_()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Qt(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class cR{constructor(e){this.Le=e,this.Be=new Map,this.ke=Do(),this.qe=J_(),this.Qe=new wn(Mt)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:gt()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const s=i.target;if(O0(s))if(r===0){const o=new ut(s.path);this.Ue(n,o,Tr.newNoDocument(o,bt.min()))}else Qt(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(e),l=a?this.Xe(a,e,o):1;if(l!==0){this.je(n);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,u)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=Yl(r).toUint8Array()}catch(l){if(l instanceof w3)return Ic("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new Iv(o,i,s)}catch(l){return Ic(l instanceof Lh?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&O0(a.target)){const l=new ut(a.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,Tr.newNoDocument(l,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let r=Ct();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const u=this.Je(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new $m(e,n,this.Qe,this.ke,r);return this.ke=Do(),this.qe=J_(),this.Qe=new wn(Mt),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new X_,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new fr(Mt),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||rt("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new X_),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function J_(){return new wn(ut.comparator)}function Z_(){return new wn(ut.comparator)}const hR={asc:"ASCENDING",desc:"DESCENDING"},dR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},fR={and:"AND",or:"OR"};class pR{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function U0(t,e){return t.useProto3Json||Um(e)?e:{value:e}}function tm(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function $3(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function mR(t,e){return tm(t,e.toTimestamp())}function $s(t){return Qt(!!t),bt.fromTimestamp(function(n){const r=Ka(n);return new Yn(r.seconds,r.nanos)}(t))}function Tv(t,e){return V0(t,e).canonicalString()}function V0(t,e){const n=function(i){return new un(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function H3(t){const e=un.fromString(t);return Qt(Y3(e)),e}function B0(t,e){return Tv(t.databaseId,e.path)}function l1(t,e){const n=H3(e);if(n.get(1)!==t.databaseId.projectId)throw new Je(Le.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Je(Le.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ut(G3(n))}function W3(t,e){return Tv(t.databaseId,e)}function gR(t){const e=H3(t);return e.length===4?un.emptyPath():G3(e)}function q0(t){return new un(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function G3(t){return Qt(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function ew(t,e,n){return{name:B0(t,e),fields:n.value.mapValue.fields}}function vR(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:gt()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(u,h){return u.useProto3Json?(Qt(h===void 0||typeof h=="string"),mr.fromBase64String(h||"")):(Qt(h===void 0||h instanceof Buffer||h instanceof Uint8Array),mr.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){const h=u.code===void 0?Le.UNKNOWN:B3(u.code);return new Je(h,u.message||"")}(o);n=new z3(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=l1(t,r.document.name),s=$s(r.document.updateTime),o=r.document.createTime?$s(r.document.createTime):bt.min(),a=new ri({mapValue:{fields:r.document.fields}}),l=Tr.newFoundDocument(i,s,o,a),u=r.targetIds||[],h=r.removedTargetIds||[];n=new cp(u,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=l1(t,r.document),s=r.readTime?$s(r.readTime):bt.min(),o=Tr.newNoDocument(i,s),a=r.removedTargetIds||[];n=new cp([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=l1(t,r.document),s=r.removedTargetIds||[];n=new cp([],s,i,null)}else{if(!("filter"in e))return gt();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new oR(i,s),a=r.targetId;n=new q3(a,o)}}return n}function yR(t,e){let n;if(e instanceof Ud)n={update:ew(t,e.key,e.value)};else if(e instanceof Ev)n={delete:B0(t,e.key)};else if(e instanceof rl)n={update:ew(t,e.key,e.data),updateMask:IR(e.fieldMask)};else{if(!(e instanceof rR))return gt();n={verify:B0(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof Zp)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Ad)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Ed)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof em)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw gt()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:mR(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:gt()}(t,e.precondition)),n}function _R(t,e){return t&&t.length>0?(Qt(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?$s(i.updateTime):$s(s);return o.isEqual(bt.min())&&(o=$s(s)),new eR(o,i.transformResults||[])}(n,e))):[]}function wR(t,e){return{documents:[W3(t,e.path)]}}function bR(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=W3(t,i);const s=function(u){if(u.length!==0)return Q3(ds.create(u,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(u){if(u.length!==0)return u.map(h=>function(m){return{field:Uu(m.field),direction:AR(m.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=U0(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{_t:n,parent:i}}function xR(t){let e=gR(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Qt(r===1);const h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];n.where&&(s=function(f){const m=K3(f);return m instanceof ds&&A3(m)?m.getFilters():[m]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(m=>function(b){return new Sd(Vu(b.field),function(I){switch(I){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction))}(m))}(n.orderBy));let a=null;n.limit&&(a=function(f){let m;return m=typeof f=="object"?f.value:f,Um(m)?null:m}(n.limit));let l=null;n.startAt&&(l=function(f){const m=!!f.before,p=f.values||[];return new Jp(p,m)}(n.startAt));let u=null;return n.endAt&&(u=function(f){const m=!f.before,p=f.values||[];return new Jp(p,m)}(n.endAt)),BL(e,i,o,s,a,"F",l,u)}function SR(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return gt()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function K3(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Vu(n.unaryFilter.field);return $n.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Vu(n.unaryFilter.field);return $n.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Vu(n.unaryFilter.field);return $n.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Vu(n.unaryFilter.field);return $n.create(o,"!=",{nullValue:"NULL_VALUE"});default:return gt()}}(t):t.fieldFilter!==void 0?function(n){return $n.create(Vu(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return gt()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return ds.create(n.compositeFilter.filters.map(r=>K3(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return gt()}}(n.compositeFilter.op))}(t):gt()}function AR(t){return hR[t]}function ER(t){return dR[t]}function NR(t){return fR[t]}function Uu(t){return{fieldPath:t.canonicalString()}}function Vu(t){return hr.fromServerFormat(t.fieldPath)}function Q3(t){return t instanceof $n?function(n){if(n.op==="=="){if(V_(n.value))return{unaryFilter:{field:Uu(n.field),op:"IS_NAN"}};if(U_(n.value))return{unaryFilter:{field:Uu(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(V_(n.value))return{unaryFilter:{field:Uu(n.field),op:"IS_NOT_NAN"}};if(U_(n.value))return{unaryFilter:{field:Uu(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Uu(n.field),op:ER(n.op),value:n.value}}}(t):t instanceof ds?function(n){const r=n.getFilters().map(i=>Q3(i));return r.length===1?r[0]:{compositeFilter:{op:NR(n.op),filters:r}}}(t):gt()}function IR(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Y3(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ka{constructor(e,n,r,i,s=bt.min(),o=bt.min(),a=mr.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new ka(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ka(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ka(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ka(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TR{constructor(e){this.ct=e}}function kR(t){const e=xR({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?M0(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PR{constructor(){this.un=new CR}addToCollectionParentIndex(e,n){return this.un.add(n),Ve.resolve()}getCollectionParents(e,n){return Ve.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return Ve.resolve()}deleteFieldIndex(e,n){return Ve.resolve()}deleteAllFieldIndexes(e){return Ve.resolve()}createTargetIndexes(e,n){return Ve.resolve()}getDocumentsMatchingTarget(e,n){return Ve.resolve(null)}getIndexType(e,n){return Ve.resolve(0)}getFieldIndexes(e,n){return Ve.resolve([])}getNextCollectionGroupToUpdate(e){return Ve.resolve(null)}getMinOffset(e,n){return Ve.resolve(Ga.min())}getMinOffsetFromCollectionGroup(e,n){return Ve.resolve(Ga.min())}updateCollectionGroup(e,n,r){return Ve.resolve()}updateIndexEntries(e,n){return Ve.resolve()}}class CR{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new fr(un.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new fr(un.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cc{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Cc(0)}static kn(){return new Cc(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LR{constructor(){this.changes=new Hc(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Tr.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?Ve.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RR{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jR{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Kh(r.mutation,i,wi.empty(),Yn.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Ct()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Ct()){const i=Dl();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Ch();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Dl();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Ct()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=Do();const o=Gh(),a=function(){return Gh()}();return n.forEach((l,u)=>{const h=r.get(u.key);i.has(u.key)&&(h===void 0||h.mutation instanceof rl)?s=s.insert(u.key,u):h!==void 0?(o.set(u.key,h.mutation.getFieldMask()),Kh(h.mutation,u,h.mutation.getFieldMask(),Yn.now())):o.set(u.key,wi.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((u,h)=>o.set(u,h)),n.forEach((u,h)=>{var f;return a.set(u,new RR(h,(f=o.get(u))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,n){const r=Gh();let i=new wn((o,a)=>o-a),s=Ct();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const u=n.get(l);if(u===null)return;let h=r.get(l)||wi.empty();h=a.applyToLocalView(u,h),r.set(l,h);const f=(i.get(a.batchId)||Ct()).add(l);i=i.insert(a.batchId,f)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,h=l.value,f=R3();h.forEach(m=>{if(!s.has(m)){const p=U3(n.get(m),r.get(m));p!==null&&f.set(m,p),s=s.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,f))}return Ve.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return ut.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):T3(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):Ve.resolve(Dl());let a=-1,l=s;return o.next(u=>Ve.forEach(u,(h,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),s.get(h)?Ve.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{l=l.insert(h,m)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,l,u,Ct())).next(h=>({batchId:a,changes:L3(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ut(n)).next(r=>{let i=Ch();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=Ch();return this.indexManager.getCollectionParents(e,s).next(a=>Ve.forEach(a,l=>{const u=function(f,m){return new $c(m,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(h=>{h.forEach((f,m)=>{o=o.insert(f,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((l,u)=>{const h=u.getKey();o.get(h)===null&&(o=o.insert(h,Tr.newInvalidDocument(h)))});let a=Ch();return o.forEach((l,u)=>{const h=s.get(l);h!==void 0&&Kh(h.mutation,u,wi.empty(),Yn.now()),Bm(n,u)&&(a=a.insert(l,u))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DR{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return Ve.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:$s(i.createTime)}}(n)),Ve.resolve()}getNamedQuery(e,n){return Ve.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:kR(i.bundledQuery),readTime:$s(i.readTime)}}(n)),Ve.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OR{constructor(){this.overlays=new wn(ut.comparator),this.Ir=new Map}getOverlay(e,n){return Ve.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Dl();return Ve.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),Ve.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),Ve.resolve()}getOverlaysForCollection(e,n,r){const i=Dl(),s=n.length+1,o=new ut(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return Ve.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new wn((u,h)=>u-h);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let h=s.get(u.largestBatchId);h===null&&(h=Dl(),s=s.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}const a=Dl(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,h)=>a.set(u,h)),!(a.size()>=i)););return Ve.resolve(a)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new sR(n,r));let s=this.Ir.get(n);s===void 0&&(s=Ct(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FR{constructor(){this.sessionToken=mr.EMPTY_BYTE_STRING}getSessionToken(e){return Ve.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,Ve.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kv{constructor(){this.Tr=new fr(Zn.Er),this.dr=new fr(Zn.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new Zn(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new Zn(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new ut(new un([])),r=new Zn(n,e),i=new Zn(n,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new ut(new un([])),r=new Zn(n,e),i=new Zn(n,e+1);let s=Ct();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new Zn(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Zn{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return ut.comparator(e.key,n.key)||Mt(e.wr,n.wr)}static Ar(e,n){return Mt(e.wr,n.wr)||ut.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MR{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new fr(Zn.Er)}checkEmpty(e){return Ve.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new iR(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.br=this.br.add(new Zn(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return Ve.resolve(o)}lookupMutationBatch(e,n){return Ve.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),s=i<0?0:i;return Ve.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Ve.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return Ve.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Zn(n,0),i=new Zn(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{const a=this.Dr(o.wr);s.push(a)}),Ve.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new fr(Mt);return n.forEach(i=>{const s=new Zn(i,0),o=new Zn(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{r=r.add(a.wr)})}),Ve.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;ut.isDocumentKey(s)||(s=s.child(""));const o=new Zn(new ut(s),0);let a=new fr(Mt);return this.br.forEachWhile(l=>{const u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(l.wr)),!0)},o),Ve.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Qt(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return Ve.forEach(n.mutations,i=>{const s=new Zn(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new Zn(n,0),i=this.br.firstAfterOrEqual(r);return Ve.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,Ve.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UR{constructor(e){this.Mr=e,this.docs=function(){return new wn(ut.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return Ve.resolve(r?r.document.mutableCopy():Tr.newInvalidDocument(n))}getEntries(e,n){let r=Do();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Tr.newInvalidDocument(i))}),Ve.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Do();const o=n.path,a=new ut(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:u,value:{document:h}}=l.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||xL(bL(h),r)<=0||(i.has(h.key)||Bm(n,h))&&(s=s.insert(h.key,h.mutableCopy()))}return Ve.resolve(s)}getAllFromCollectionGroup(e,n,r,i){gt()}Or(e,n){return Ve.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new VR(this)}getSize(e){return Ve.resolve(this.size)}}class VR extends LR{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),Ve.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BR{constructor(e){this.persistence=e,this.Nr=new Hc(n=>bv(n),xv),this.lastRemoteSnapshotVersion=bt.min(),this.highestTargetId=0,this.Lr=0,this.Br=new kv,this.targetCount=0,this.kr=Cc.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),Ve.resolve()}getLastRemoteSnapshotVersion(e){return Ve.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ve.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),Ve.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),Ve.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Cc(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,Ve.resolve()}updateTargetData(e,n){return this.Kn(n),Ve.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,Ve.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),Ve.waitFor(s).next(()=>i)}getTargetCount(e){return Ve.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return Ve.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),Ve.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),Ve.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),Ve.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return Ve.resolve(r)}containsKey(e,n){return Ve.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qR{constructor(e,n){this.qr={},this.overlays={},this.Qr=new vv(0),this.Kr=!1,this.Kr=!0,this.$r=new FR,this.referenceDelegate=e(this),this.Ur=new BR(this),this.indexManager=new PR,this.remoteDocumentCache=function(i){return new UR(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new TR(n),this.Gr=new DR(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new OR,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new MR(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){rt("MemoryPersistence","Starting transaction:",e);const i=new zR(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,n){return Ve.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class zR extends AL{constructor(e){super(),this.currentSequenceNumber=e}}class Pv{constructor(e){this.persistence=e,this.Jr=new kv,this.Yr=null}static Zr(e){return new Pv(e)}get Xr(){if(this.Yr)return this.Yr;throw gt()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),Ve.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),Ve.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),Ve.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ve.forEach(this.Xr,r=>{const i=ut.fromPath(r);return this.ei(e,i).next(s=>{s||n.removeEntry(i,bt.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return Ve.or([()=>Ve.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cv{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=Ct(),i=Ct();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new Cv(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $R{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HR{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return jk()?8:EL(Cr())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.Yi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new $R;return this.Xi(e,n,o).next(a=>{if(s.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>s.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(wh()<=jt.DEBUG&&rt("QueryEngine","SDK will not create cache indexes for query:",Mu(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),Ve.resolve()):(wh()<=jt.DEBUG&&rt("QueryEngine","Query:",Mu(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(wh()<=jt.DEBUG&&rt("QueryEngine","The SDK decides to create cache indexes for query:",Mu(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,zs(n))):Ve.resolve())}Yi(e,n){if($_(n))return Ve.resolve(null);let r=zs(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=M0(n,null,"F"),r=zs(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=Ct(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const u=this.ts(n,a);return this.ns(n,u,o,l.readTime)?this.Yi(e,M0(n,null,"F")):this.rs(e,u,n,l)}))})))}Zi(e,n,r,i){return $_(n)||i.isEqual(bt.min())?Ve.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const o=this.ts(n,s);return this.ns(n,o,r,i)?Ve.resolve(null):(wh()<=jt.DEBUG&&rt("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Mu(n)),this.rs(e,o,n,wL(i,-1)).next(a=>a))})}ts(e,n){let r=new fr(P3(e));return n.forEach((i,s)=>{Bm(e,s)&&(r=r.add(s))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,n,r){return wh()<=jt.DEBUG&&rt("QueryEngine","Using full collection scan to execute query:",Mu(n)),this.Ji.getDocumentsMatchingQuery(e,n,Ga.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WR{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new wn(Mt),this._s=new Hc(s=>bv(s),xv),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new jR(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function GR(t,e,n,r){return new WR(t,e,n,r)}async function X3(t,e){const n=xt(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=Ct();for(const u of i){o.push(u.batchId);for(const h of u.mutations)l=l.add(h.key)}for(const u of s){a.push(u.batchId);for(const h of u.mutations)l=l.add(h.key)}return n.localDocuments.getDocuments(r,l).next(u=>({hs:u,removedBatchIds:o,addedBatchIds:a}))})})}function KR(t,e){const n=xt(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,l,u,h){const f=u.batch,m=f.keys();let p=Ve.resolve();return m.forEach(b=>{p=p.next(()=>h.getEntry(l,b)).next(x=>{const I=u.docVersions.get(b);Qt(I!==null),x.version.compareTo(I)<0&&(f.applyToRemoteDocument(x,u),x.isValidDocument()&&(x.setReadTime(u.commitVersion),h.addEntry(x)))})}),p.next(()=>a.mutationQueue.removeMutationBatch(l,f))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=Ct();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(l=l.add(a.batch.mutations[u].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function J3(t){const e=xt(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function QR(t,e){const n=xt(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const a=[];e.targetChanges.forEach((h,f)=>{const m=i.get(f);if(!m)return;a.push(n.Ur.removeMatchingKeys(s,h.removedDocuments,f).next(()=>n.Ur.addMatchingKeys(s,h.addedDocuments,f)));let p=m.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(f)!==null?p=p.withResumeToken(mr.EMPTY_BYTE_STRING,bt.min()).withLastLimboFreeSnapshotVersion(bt.min()):h.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(h.resumeToken,r)),i=i.insert(f,p),function(x,I,_){return x.resumeToken.approximateByteSize()===0||I.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=3e8?!0:_.addedDocuments.size+_.modifiedDocuments.size+_.removedDocuments.size>0}(m,p,h)&&a.push(n.Ur.updateTargetData(s,p))});let l=Do(),u=Ct();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(YR(s,o,e.documentUpdates).next(h=>{l=h.Ps,u=h.Is})),!r.isEqual(bt.min())){const h=n.Ur.getLastRemoteSnapshotVersion(s).next(f=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(h)}return Ve.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,u)).next(()=>l)}).then(s=>(n.os=i,s))}function YR(t,e,n){let r=Ct(),i=Ct();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=Do();return n.forEach((a,l)=>{const u=s.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(bt.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):rt("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{Ps:o,Is:i}})}function XR(t,e){const n=xt(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function JR(t,e){const n=xt(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(s=>s?(i=s,Ve.resolve(i)):n.Ur.allocateTargetId(r).next(o=>(i=new ka(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function z0(t,e,n){const r=xt(t),i=r.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Md(o))throw o;rt("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function tw(t,e,n){const r=xt(t);let i=bt.min(),s=Ct();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,u,h){const f=xt(l),m=f._s.get(h);return m!==void 0?Ve.resolve(f.os.get(m)):f.Ur.getTargetData(u,h)}(r,o,zs(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?i:bt.min(),n?s:Ct())).next(a=>(ZR(r,zL(e),a),{documents:a,Ts:s})))}function ZR(t,e,n){let r=t.us.get(e)||bt.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.us.set(e,r)}class nw{constructor(){this.activeTargetIds=QL()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class ej{constructor(){this.so=new nw,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new nw,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tj{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rw{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){rt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){rt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Mf=null;function u1(){return Mf===null?Mf=function(){return 268435456+Math.round(2147483648*Math.random())}():Mf++,"0x"+Mf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nj={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rj{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const br="WebChannelConnection";class ij extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(n,r,i,s,o){const a=u1(),l=this.xo(n,r.toUriEncodedString());rt("RestConnection",`Sending RPC '${n}' ${a}:`,l,i);const u={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(u,s,o),this.No(n,l,u,i).then(h=>(rt("RestConnection",`Received RPC '${n}' ${a}: `,h),h),h=>{throw Ic("RestConnection",`RPC '${n}' ${a} failed with error: `,h,"url: ",l,"request:",i),h})}Lo(n,r,i,s,o,a){return this.Mo(n,r,i,s,o)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+zc}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}xo(n,r){const i=nj[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const s=u1();return new Promise((o,a)=>{const l=new d3;l.setWithCredentials(!0),l.listenOnce(f3.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case ap.NO_ERROR:const h=l.getResponseJson();rt(br,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),o(h);break;case ap.TIMEOUT:rt(br,`RPC '${e}' ${s} timed out`),a(new Je(Le.DEADLINE_EXCEEDED,"Request time out"));break;case ap.HTTP_ERROR:const f=l.getStatus();if(rt(br,`RPC '${e}' ${s} failed with status:`,f,"response text:",l.getResponseText()),f>0){let m=l.getResponseJson();Array.isArray(m)&&(m=m[0]);const p=m==null?void 0:m.error;if(p&&p.status&&p.message){const b=function(I){const _=I.toLowerCase().replace(/_/g,"-");return Object.values(Le).indexOf(_)>=0?_:Le.UNKNOWN}(p.status);a(new Je(b,p.message))}else a(new Je(Le.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new Je(Le.UNAVAILABLE,"Connection failed."));break;default:gt()}}finally{rt(br,`RPC '${e}' ${s} completed.`)}});const u=JSON.stringify(i);rt(br,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",u,r,15)})}Bo(e,n,r){const i=u1(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=g3(),a=m3(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const h=s.join("");rt(br,`Creating RPC '${e}' stream ${i}: ${h}`,l);const f=o.createWebChannel(h,l);let m=!1,p=!1;const b=new rj({Io:I=>{p?rt(br,`Not sending because RPC '${e}' stream ${i} is closed:`,I):(m||(rt(br,`Opening RPC '${e}' stream ${i} transport.`),f.open(),m=!0),rt(br,`RPC '${e}' stream ${i} sending:`,I),f.send(I))},To:()=>f.close()}),x=(I,_,E)=>{I.listen(_,C=>{try{E(C)}catch(O){setTimeout(()=>{throw O},0)}})};return x(f,Ph.EventType.OPEN,()=>{p||(rt(br,`RPC '${e}' stream ${i} transport opened.`),b.yo())}),x(f,Ph.EventType.CLOSE,()=>{p||(p=!0,rt(br,`RPC '${e}' stream ${i} transport closed`),b.So())}),x(f,Ph.EventType.ERROR,I=>{p||(p=!0,Ic(br,`RPC '${e}' stream ${i} transport errored:`,I),b.So(new Je(Le.UNAVAILABLE,"The operation could not be completed")))}),x(f,Ph.EventType.MESSAGE,I=>{var _;if(!p){const E=I.data[0];Qt(!!E);const C=E,O=C.error||((_=C[0])===null||_===void 0?void 0:_.error);if(O){rt(br,`RPC '${e}' stream ${i} received error:`,O);const K=O.status;let B=function(S){const R=qn[S];if(R!==void 0)return B3(R)}(K),L=O.message;B===void 0&&(B=Le.INTERNAL,L="Unknown error status: "+K+" with message "+O.message),p=!0,b.So(new Je(B,L)),f.close()}else rt(br,`RPC '${e}' stream ${i} received:`,E),b.bo(E)}}),x(a,p3.STAT_EVENT,I=>{I.stat===L0.PROXY?rt(br,`RPC '${e}' stream ${i} detected buffering proxy`):I.stat===L0.NOPROXY&&rt(br,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{b.wo()},0),b}}function c1(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hm(t){return new pR(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z3{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&rt("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eS{constructor(e,n,r,i,s,o,a,l){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Z3(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===Le.RESOURCE_EXHAUSTED?(jo(n.toString()),jo("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===Le.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{const i=new Je(Le.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return rt("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(rt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class sj extends eS{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=vR(this.serializer,e),r=function(s){if(!("targetChange"in s))return bt.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?bt.min():o.readTime?$s(o.readTime):bt.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=q0(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=O0(l)?{documents:wR(s,l)}:{query:bR(s,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=$3(s,o.resumeToken);const u=U0(s,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(bt.min())>0){a.readTime=tm(s,o.snapshotVersion.toTimestamp());const u=U0(s,o.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);const r=SR(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=q0(this.serializer),n.removeTarget=e,this.a_(n)}}class oj extends eS{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Qt(!!e.streamToken),this.lastStreamToken=e.streamToken,Qt(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Qt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=_R(e.writeResults,e.commitTime),r=$s(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=q0(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>yR(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aj extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new Je(Le.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,V0(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===Le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Je(Le.UNKNOWN,s.toString())})}Lo(e,n,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,V0(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Je(Le.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class lj{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(jo(n),this.D_=!1):rt("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uj{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(async()=>{iu(this)&&(rt("RemoteStore","Restarting streams for network reachability change."),await async function(l){const u=xt(l);u.L_.add(4),await Bd(u),u.q_.set("Unknown"),u.L_.delete(4),await Wm(u)}(this))})}),this.q_=new lj(r,i)}}async function Wm(t){if(iu(t))for(const e of t.B_)await e(!0)}async function Bd(t){for(const e of t.B_)await e(!1)}function tS(t,e){const n=xt(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Dv(n)?jv(n):Wc(n).r_()&&Rv(n,e))}function Lv(t,e){const n=xt(t),r=Wc(n);n.N_.delete(e),r.r_()&&nS(n,e),n.N_.size===0&&(r.r_()?r.o_():iu(n)&&n.q_.set("Unknown"))}function Rv(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(bt.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Wc(t).A_(e)}function nS(t,e){t.Q_.xe(e),Wc(t).R_(e)}function jv(t){t.Q_=new cR({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Wc(t).start(),t.q_.v_()}function Dv(t){return iu(t)&&!Wc(t).n_()&&t.N_.size>0}function iu(t){return xt(t).L_.size===0}function rS(t){t.Q_=void 0}async function cj(t){t.q_.set("Online")}async function hj(t){t.N_.forEach((e,n)=>{Rv(t,e)})}async function dj(t,e){rS(t),Dv(t)?(t.q_.M_(e),jv(t)):t.q_.set("Unknown")}async function fj(t,e,n){if(t.q_.set("Online"),e instanceof z3&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.N_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.N_.delete(a),i.Q_.removeTarget(a))}(t,e)}catch(r){rt("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await nm(t,r)}else if(e instanceof cp?t.Q_.Ke(e):e instanceof q3?t.Q_.He(e):t.Q_.We(e),!n.isEqual(bt.min()))try{const r=await J3(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.Q_.rt(o);return a.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const h=s.N_.get(u);h&&s.N_.set(u,h.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,u)=>{const h=s.N_.get(l);if(!h)return;s.N_.set(l,h.withResumeToken(mr.EMPTY_BYTE_STRING,h.snapshotVersion)),nS(s,l);const f=new ka(h.target,l,u,h.sequenceNumber);Rv(s,f)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){rt("RemoteStore","Failed to raise snapshot:",r),await nm(t,r)}}async function nm(t,e,n){if(!Md(e))throw e;t.L_.add(1),await Bd(t),t.q_.set("Offline"),n||(n=()=>J3(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{rt("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Wm(t)})}function iS(t,e){return e().catch(n=>nm(t,n,e))}async function Gm(t){const e=xt(t),n=Qa(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;pj(e);)try{const i=await XR(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,mj(e,i)}catch(i){await nm(e,i)}sS(e)&&oS(e)}function pj(t){return iu(t)&&t.O_.length<10}function mj(t,e){t.O_.push(e);const n=Qa(t);n.r_()&&n.V_&&n.m_(e.mutations)}function sS(t){return iu(t)&&!Qa(t).n_()&&t.O_.length>0}function oS(t){Qa(t).start()}async function gj(t){Qa(t).p_()}async function vj(t){const e=Qa(t);for(const n of t.O_)e.m_(n.mutations)}async function yj(t,e,n){const r=t.O_.shift(),i=Nv.from(r,e,n);await iS(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Gm(t)}async function _j(t,e){e&&Qa(t).V_&&await async function(r,i){if(function(o){return aR(o)&&o!==Le.ABORTED}(i.code)){const s=r.O_.shift();Qa(r).s_(),await iS(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Gm(r)}}(t,e),sS(t)&&oS(t)}async function iw(t,e){const n=xt(t);n.asyncQueue.verifyOperationInProgress(),rt("RemoteStore","RemoteStore received new credentials");const r=iu(n);n.L_.add(3),await Bd(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Wm(n)}async function wj(t,e){const n=xt(t);e?(n.L_.delete(2),await Wm(n)):e||(n.L_.add(2),await Bd(n),n.q_.set("Unknown"))}function Wc(t){return t.K_||(t.K_=function(n,r,i){const s=xt(n);return s.w_(),new sj(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:cj.bind(null,t),Ro:hj.bind(null,t),mo:dj.bind(null,t),d_:fj.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),Dv(t)?jv(t):t.q_.set("Unknown")):(await t.K_.stop(),rS(t))})),t.K_}function Qa(t){return t.U_||(t.U_=function(n,r,i){const s=xt(n);return s.w_(),new oj(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:gj.bind(null,t),mo:_j.bind(null,t),f_:vj.bind(null,t),g_:yj.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Gm(t)):(await t.U_.stop(),t.O_.length>0&&(rt("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ov{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new No,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new Ov(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Je(Le.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Fv(t,e){if(jo("AsyncQueue",`${e}: ${t}`),Md(t))return new Je(Le.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fc{constructor(e){this.comparator=e?(n,r)=>e(n,r)||ut.comparator(n.key,r.key):(n,r)=>ut.comparator(n.key,r.key),this.keyedMap=Ch(),this.sortedSet=new wn(this.comparator)}static emptySet(e){return new fc(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof fc)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new fc;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sw{constructor(){this.W_=new wn(ut.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):gt():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Lc{constructor(e,n,r,i,s,o,a,l,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Lc(e,n,fc.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Vm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bj{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class xj{constructor(){this.queries=ow(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=xt(n),s=i.queries;i.queries=ow(),s.forEach((o,a)=>{for(const l of a.j_)l.onError(r)})})(this,new Je(Le.ABORTED,"Firestore shutting down"))}}function ow(){return new Hc(t=>k3(t),Vm)}async function aS(t,e){const n=xt(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new bj,r=e.J_()?0:1);try{switch(r){case 0:s.z_=await n.onListen(i,!0);break;case 1:s.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=Fv(o,`Initialization of query '${Mu(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&Mv(n)}async function lS(t,e){const n=xt(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Sj(t,e){const n=xt(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.j_)a.X_(i)&&(r=!0);o.z_=i}}r&&Mv(n)}function Aj(t,e,n){const r=xt(t),i=r.queries.get(e);if(i)for(const s of i.j_)s.onError(n);r.queries.delete(e)}function Mv(t){t.Y_.forEach(e=>{e.next()})}var $0,aw;(aw=$0||($0={})).ea="default",aw.Cache="cache";class uS{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Lc(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Lc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==$0.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cS{constructor(e){this.key=e}}class hS{constructor(e){this.key=e}}class Ej{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Ct(),this.mutatedKeys=Ct(),this.Aa=P3(e),this.Ra=new fc(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new sw,i=n?n.Ra:this.Ra;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,f)=>{const m=i.get(h),p=Bm(this.query,f)?f:null,b=!!m&&this.mutatedKeys.has(m.key),x=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations);let I=!1;m&&p?m.data.isEqual(p.data)?b!==x&&(r.track({type:3,doc:p}),I=!0):this.ga(m,p)||(r.track({type:2,doc:p}),I=!0,(l&&this.Aa(p,l)>0||u&&this.Aa(p,u)<0)&&(a=!0)):!m&&p?(r.track({type:0,doc:p}),I=!0):m&&!p&&(r.track({type:1,doc:m}),I=!0,(l||u)&&(a=!0)),I&&(p?(o=o.add(p),s=x?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{Ra:o,fa:r,ns:a,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((h,f)=>function(p,b){const x=I=>{switch(I){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return gt()}};return x(p)-x(b)}(h.type,f.type)||this.Aa(h.doc,f.doc)),this.pa(r),i=i!=null&&i;const a=n&&!i?this.ya():[],l=this.da.size===0&&this.current&&!i?1:0,u=l!==this.Ea;return this.Ea=l,o.length!==0||u?{snapshot:new Lc(this.query,e.Ra,s,o,e.mutatedKeys,l===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new sw,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Ct(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new hS(r))}),this.da.forEach(r=>{e.has(r)||n.push(new cS(r))}),n}ba(e){this.Ta=e.Ts,this.da=Ct();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Lc.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class Nj{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class Ij{constructor(e){this.key=e,this.va=!1}}class Tj{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Hc(a=>k3(a),Vm),this.Ma=new Map,this.xa=new Set,this.Oa=new wn(ut.comparator),this.Na=new Map,this.La=new kv,this.Ba={},this.ka=new Map,this.qa=Cc.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function kj(t,e,n=!0){const r=vS(t);let i;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await dS(r,e,n,!0),i}async function Pj(t,e){const n=vS(t);await dS(n,e,!0,!1)}async function dS(t,e,n,r){const i=await JR(t.localStore,zs(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await Cj(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&tS(t.remoteStore,i),a}async function Cj(t,e,n,r,i){t.Ka=(f,m,p)=>async function(x,I,_,E){let C=I.view.ma(_);C.ns&&(C=await tw(x.localStore,I.query,!1).then(({documents:L})=>I.view.ma(L,C)));const O=E&&E.targetChanges.get(I.targetId),K=E&&E.targetMismatches.get(I.targetId)!=null,B=I.view.applyChanges(C,x.isPrimaryClient,O,K);return uw(x,I.targetId,B.wa),B.snapshot}(t,f,m,p);const s=await tw(t.localStore,e,!0),o=new Ej(e,s.Ts),a=o.ma(s.documents),l=Vd.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),u=o.applyChanges(a,t.isPrimaryClient,l);uw(t,n,u.wa);const h=new Nj(e,n,o);return t.Fa.set(e,h),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),u.snapshot}async function Lj(t,e,n){const r=xt(t),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!Vm(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await z0(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Lv(r.remoteStore,i.targetId),H0(r,i.targetId)}).catch(Fd)):(H0(r,i.targetId),await z0(r.localStore,i.targetId,!0))}async function Rj(t,e){const n=xt(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Lv(n.remoteStore,r.targetId))}async function jj(t,e,n){const r=Bj(t);try{const i=await function(o,a){const l=xt(o),u=Yn.now(),h=a.reduce((p,b)=>p.add(b.key),Ct());let f,m;return l.persistence.runTransaction("Locally write mutations","readwrite",p=>{let b=Do(),x=Ct();return l.cs.getEntries(p,h).next(I=>{b=I,b.forEach((_,E)=>{E.isValidDocument()||(x=x.add(_))})}).next(()=>l.localDocuments.getOverlayedDocuments(p,b)).next(I=>{f=I;const _=[];for(const E of a){const C=nR(E,f.get(E.key).overlayedDocument);C!=null&&_.push(new rl(E.key,C,b3(C.value.mapValue),Vi.exists(!0)))}return l.mutationQueue.addMutationBatch(p,u,_,a)}).next(I=>{m=I;const _=I.applyToLocalDocumentSet(f,x);return l.documentOverlayCache.saveOverlays(p,I.batchId,_)})}).then(()=>({batchId:m.batchId,changes:L3(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let u=o.Ba[o.currentUser.toKey()];u||(u=new wn(Mt)),u=u.insert(a,l),o.Ba[o.currentUser.toKey()]=u}(r,i.batchId,n),await qd(r,i.changes),await Gm(r.remoteStore)}catch(i){const s=Fv(i,"Failed to persist write");n.reject(s)}}async function fS(t,e){const n=xt(t);try{const r=await QR(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Na.get(s);o&&(Qt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?Qt(o.va):i.removedDocuments.size>0&&(Qt(o.va),o.va=!1))}),await qd(n,r,e)}catch(r){await Fd(r)}}function lw(t,e,n){const r=xt(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach((s,o)=>{const a=o.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=xt(o);l.onlineState=a;let u=!1;l.queries.forEach((h,f)=>{for(const m of f.j_)m.Z_(a)&&(u=!0)}),u&&Mv(l)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function Dj(t,e,n){const r=xt(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),s=i&&i.key;if(s){let o=new wn(ut.comparator);o=o.insert(s,Tr.newNoDocument(s,bt.min()));const a=Ct().add(s),l=new $m(bt.min(),new Map,new wn(Mt),o,a);await fS(r,l),r.Oa=r.Oa.remove(s),r.Na.delete(e),Uv(r)}else await z0(r.localStore,e,!1).then(()=>H0(r,e,n)).catch(Fd)}async function Oj(t,e){const n=xt(t),r=e.batch.batchId;try{const i=await KR(n.localStore,e);mS(n,r,null),pS(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await qd(n,i)}catch(i){await Fd(i)}}async function Fj(t,e,n){const r=xt(t);try{const i=await function(o,a){const l=xt(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let h;return l.mutationQueue.lookupMutationBatch(u,a).next(f=>(Qt(f!==null),h=f.keys(),l.mutationQueue.removeMutationBatch(u,f))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,h,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,h)).next(()=>l.localDocuments.getDocuments(u,h))})}(r.localStore,e);mS(r,e,n),pS(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await qd(r,i)}catch(i){await Fd(i)}}function pS(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function mS(t,e,n){const r=xt(t);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function H0(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||gS(t,r)})}function gS(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(Lv(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Uv(t))}function uw(t,e,n){for(const r of n)r instanceof cS?(t.La.addReference(r.key,e),Mj(t,r)):r instanceof hS?(rt("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||gS(t,r.key)):gt()}function Mj(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(rt("SyncEngine","New document in limbo: "+n),t.xa.add(r),Uv(t))}function Uv(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new ut(un.fromString(e)),r=t.qa.next();t.Na.set(r,new Ij(n)),t.Oa=t.Oa.insert(n,r),tS(t.remoteStore,new ka(zs(Sv(n.path)),r,"TargetPurposeLimboResolution",vv.oe))}}async function qd(t,e,n){const r=xt(t),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,l)=>{o.push(r.Ka(l,e,n).then(u=>{var h;if((u||n)&&r.isPrimaryClient){const f=u?!u.fromCache:(h=n==null?void 0:n.targetChanges.get(l.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(l.targetId,f?"current":"not-current")}if(u){i.push(u);const f=Cv.Wi(l.targetId,u);s.push(f)}}))}),await Promise.all(o),r.Ca.d_(i),await async function(l,u){const h=xt(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>Ve.forEach(u,m=>Ve.forEach(m.$i,p=>h.persistence.referenceDelegate.addReference(f,m.targetId,p)).next(()=>Ve.forEach(m.Ui,p=>h.persistence.referenceDelegate.removeReference(f,m.targetId,p)))))}catch(f){if(!Md(f))throw f;rt("LocalStore","Failed to update sequence numbers: "+f)}for(const f of u){const m=f.targetId;if(!f.fromCache){const p=h.os.get(m),b=p.snapshotVersion,x=p.withLastLimboFreeSnapshotVersion(b);h.os=h.os.insert(m,x)}}}(r.localStore,s))}async function Uj(t,e){const n=xt(t);if(!n.currentUser.isEqual(e)){rt("SyncEngine","User change. New user:",e.toKey());const r=await X3(n.localStore,e);n.currentUser=e,function(s,o){s.ka.forEach(a=>{a.forEach(l=>{l.reject(new Je(Le.CANCELLED,o))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await qd(n,r.hs)}}function Vj(t,e){const n=xt(t),r=n.Na.get(e);if(r&&r.va)return Ct().add(r.key);{let i=Ct();const s=n.Ma.get(e);if(!s)return i;for(const o of s){const a=n.Fa.get(o);i=i.unionWith(a.view.Va)}return i}}function vS(t){const e=xt(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=fS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Vj.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Dj.bind(null,e),e.Ca.d_=Sj.bind(null,e.eventManager),e.Ca.$a=Aj.bind(null,e.eventManager),e}function Bj(t){const e=xt(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Oj.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Fj.bind(null,e),e}class rm{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Hm(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return GR(this.persistence,new HR,e.initialUser,this.serializer)}Ga(e){return new qR(Pv.Zr,this.serializer)}Wa(e){return new ej}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}rm.provider={build:()=>new rm};class W0{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>lw(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Uj.bind(null,this.syncEngine),await wj(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new xj}()}createDatastore(e){const n=Hm(e.databaseInfo.databaseId),r=function(s){return new ij(s)}(e.databaseInfo);return function(s,o,a,l){return new aj(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new uj(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>lw(this.syncEngine,n,0),function(){return rw.D()?new rw:new tj}())}createSyncEngine(e,n){return function(i,s,o,a,l,u,h){const f=new Tj(i,s,o,a,l,u);return h&&(f.Qa=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=xt(i);rt("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await Bd(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}W0.provider={build:()=>new W0};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yS{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):jo("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qj{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Nr.UNAUTHENTICATED,this.clientId=y3.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{rt("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(rt("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new No;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Fv(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function h1(t,e){t.asyncQueue.verifyOperationInProgress(),rt("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await X3(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function cw(t,e){t.asyncQueue.verifyOperationInProgress();const n=await zj(t);rt("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>iw(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>iw(e.remoteStore,i)),t._onlineComponents=e}async function zj(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){rt("FirestoreClient","Using user provided OfflineComponentProvider");try{await h1(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===Le.FAILED_PRECONDITION||i.code===Le.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Ic("Error using user provided cache. Falling back to memory cache: "+n),await h1(t,new rm)}}else rt("FirestoreClient","Using default OfflineComponentProvider"),await h1(t,new rm);return t._offlineComponents}async function _S(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(rt("FirestoreClient","Using user provided OnlineComponentProvider"),await cw(t,t._uninitializedComponentsProvider._online)):(rt("FirestoreClient","Using default OnlineComponentProvider"),await cw(t,new W0))),t._onlineComponents}function $j(t){return _S(t).then(e=>e.syncEngine)}async function wS(t){const e=await _S(t),n=e.eventManager;return n.onListen=kj.bind(null,e.syncEngine),n.onUnlisten=Lj.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Pj.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=Rj.bind(null,e.syncEngine),n}function Hj(t,e,n={}){const r=new No;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,u){const h=new yS({next:m=>{h.Za(),o.enqueueAndForget(()=>lS(s,f));const p=m.docs.has(a);!p&&m.fromCache?u.reject(new Je(Le.UNAVAILABLE,"Failed to get document because the client is offline.")):p&&m.fromCache&&l&&l.source==="server"?u.reject(new Je(Le.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(m)},error:m=>u.reject(m)}),f=new uS(Sv(a.path),h,{includeMetadataChanges:!0,_a:!0});return aS(s,f)}(await wS(t),t.asyncQueue,e,n,r)),r.promise}function Wj(t,e,n={}){const r=new No;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,u){const h=new yS({next:m=>{h.Za(),o.enqueueAndForget(()=>lS(s,f)),m.fromCache&&l.source==="server"?u.reject(new Je(Le.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(m)},error:m=>u.reject(m)}),f=new uS(a,h,{includeMetadataChanges:!0,_a:!0});return aS(s,f)}(await wS(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bS(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hw=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xS(t,e,n){if(!n)throw new Je(Le.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Gj(t,e,n,r){if(e===!0&&r===!0)throw new Je(Le.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function dw(t){if(!ut.isDocumentKey(t))throw new Je(Le.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function fw(t){if(ut.isDocumentKey(t))throw new Je(Le.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Km(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":gt()}function fs(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Je(Le.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Km(t);throw new Je(Le.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pw{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Je(Le.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Je(Le.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Gj("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=bS((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Je(Le.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Je(Le.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Je(Le.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Qm{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new pw({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Je(Le.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Je(Le.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new pw(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new hL;switch(r.type){case"firstParty":return new mL(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Je(Le.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=hw.get(n);r&&(rt("ComponentProvider","Removing Datastore"),hw.delete(n),r.terminate())}(this),Promise.resolve()}}function Kj(t,e,n,r={}){var i;const s=(t=fs(t,Qm))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Ic("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=Nr.MOCK_USER;else{a=N4(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new Je(Le.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Nr(u)}t._authCredentials=new dL(new v3(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class su{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new su(this.firestore,e,this._query)}}class qr{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new za(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new qr(this.firestore,e,this._key)}}class za extends su{constructor(e,n,r){super(e,n,Sv(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new qr(this.firestore,null,new ut(e))}withConverter(e){return new za(this.firestore,e,this._path)}}function rr(t,e,...n){if(t=_n(t),xS("collection","path",e),t instanceof Qm){const r=un.fromString(e,...n);return fw(r),new za(t,null,r)}{if(!(t instanceof qr||t instanceof za))throw new Je(Le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(un.fromString(e,...n));return fw(r),new za(t.firestore,null,r)}}function Tn(t,e,...n){if(t=_n(t),arguments.length===1&&(e=y3.newId()),xS("doc","path",e),t instanceof Qm){const r=un.fromString(e,...n);return dw(r),new qr(t,null,new ut(r))}{if(!(t instanceof qr||t instanceof za))throw new Je(Le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(un.fromString(e,...n));return dw(r),new qr(t.firestore,t instanceof za?t.converter:null,new ut(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mw{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Z3(this,"async_queue_retry"),this.Vu=()=>{const r=c1();r&&rt("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=c1();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=c1();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new No;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Md(e))throw e;rt("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw jo("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const i=Ov.createAndSchedule(this,e,n,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&gt()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}class ou extends Qm{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new mw,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new mw(e),this._firestoreClient=void 0,await e}}}function Qj(t,e){const n=typeof t=="object"?t:ov(),r=typeof t=="string"?t:"(default)",i=jm(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=S4("firestore");s&&Kj(i,...s)}return i}function Vv(t){if(t._terminated)throw new Je(Le.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||Yj(t),t._firestoreClient}function Yj(t){var e,n,r;const i=t._freezeSettings(),s=function(a,l,u,h){return new TL(a,l,u,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,bS(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new qj(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Rc(mr.fromBase64String(e))}catch(n){throw new Je(Le.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Rc(mr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ym{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Je(Le.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new hr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bv{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qv{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Je(Le.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Je(Le.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Mt(this._lat,e._lat)||Mt(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zv{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xj=/^__.*__$/;class Jj{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new rl(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ud(e,this.data,n,this.fieldTransforms)}}class SS{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new rl(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function AS(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw gt()}}class $v{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new $v(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return im(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(AS(this.Cu)&&Xj.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class Zj{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Hm(e)}Qu(e,n,r,i=!1){return new $v({Cu:e,methodName:n,qu:r,path:hr.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Xm(t){const e=t._freezeSettings(),n=Hm(t._databaseId);return new Zj(t._databaseId,!!e.ignoreUndefinedProperties,n)}function ES(t,e,n,r,i,s={}){const o=t.Qu(s.merge||s.mergeFields?2:0,e,n,i);Hv("Data must be an object, but it was:",o,r);const a=NS(r,o);let l,u;if(s.merge)l=new wi(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const h=[];for(const f of s.mergeFields){const m=G0(e,f,n);if(!o.contains(m))throw new Je(Le.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);TS(h,m)||h.push(m)}l=new wi(h),u=o.fieldTransforms.filter(f=>l.covers(f.field))}else l=null,u=o.fieldTransforms;return new Jj(new ri(a),l,u)}class Jm extends Bv{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Jm}}function e8(t,e,n,r){const i=t.Qu(1,e,n);Hv("Data must be an object, but it was:",i,r);const s=[],o=ri.empty();ru(r,(l,u)=>{const h=Wv(e,l,n);u=_n(u);const f=i.Nu(h);if(u instanceof Jm)s.push(h);else{const m=zd(u,f);m!=null&&(s.push(h),o.set(h,m))}});const a=new wi(s);return new SS(o,a,i.fieldTransforms)}function t8(t,e,n,r,i,s){const o=t.Qu(1,e,n),a=[G0(e,r,n)],l=[i];if(s.length%2!=0)throw new Je(Le.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<s.length;m+=2)a.push(G0(e,s[m])),l.push(s[m+1]);const u=[],h=ri.empty();for(let m=a.length-1;m>=0;--m)if(!TS(u,a[m])){const p=a[m];let b=l[m];b=_n(b);const x=o.Nu(p);if(b instanceof Jm)u.push(p);else{const I=zd(b,x);I!=null&&(u.push(p),h.set(p,I))}}const f=new wi(u);return new SS(h,f,o.fieldTransforms)}function n8(t,e,n,r=!1){return zd(n,t.Qu(r?4:3,e))}function zd(t,e){if(IS(t=_n(t)))return Hv("Unsupported field value:",e,t),NS(t,e);if(t instanceof Bv)return function(r,i){if(!AS(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=zd(a,i.Lu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=_n(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return YL(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Yn.fromDate(r);return{timestampValue:tm(i.serializer,s)}}if(r instanceof Yn){const s=new Yn(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:tm(i.serializer,s)}}if(r instanceof qv)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Rc)return{bytesValue:$3(i.serializer,r._byteString)};if(r instanceof qr){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Tv(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof zv)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.Bu("VectorValues must only contain numeric values.");return Av(a.serializer,l)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${Km(r)}`)}(t,e)}function NS(t,e){const n={};return _3(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ru(t,(r,i)=>{const s=zd(i,e.Mu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function IS(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Yn||t instanceof qv||t instanceof Rc||t instanceof qr||t instanceof Bv||t instanceof zv)}function Hv(t,e,n){if(!IS(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=Km(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function G0(t,e,n){if((e=_n(e))instanceof Ym)return e._internalPath;if(typeof e=="string")return Wv(t,e);throw im("Field path arguments must be of type string or ",t,!1,void 0,n)}const r8=new RegExp("[~\\*/\\[\\]]");function Wv(t,e,n){if(e.search(r8)>=0)throw im(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Ym(...e.split("."))._internalPath}catch{throw im(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function im(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new Je(Le.INVALID_ARGUMENT,a+t+l)}function TS(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kS{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new qr(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new i8(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Zm("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class i8 extends kS{data(){return super.data()}}function Zm(t,e){return typeof e=="string"?Wv(t,e):e instanceof Ym?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s8(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Je(Le.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Gv{}class PS extends Gv{}function eg(t,e,...n){let r=[];e instanceof Gv&&r.push(e),r=r.concat(n),function(s){const o=s.filter(l=>l instanceof Kv).length,a=s.filter(l=>l instanceof tg).length;if(o>1||o>0&&a>0)throw new Je(Le.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class tg extends PS{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new tg(e,n,r)}_apply(e){const n=this._parse(e);return LS(e._query,n),new su(e.firestore,e.converter,F0(e._query,n))}_parse(e){const n=Xm(e.firestore);return function(s,o,a,l,u,h,f){let m;if(u.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new Je(Le.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){vw(f,h);const p=[];for(const b of f)p.push(gw(l,s,b));m={arrayValue:{values:p}}}else m=gw(l,s,f)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||vw(f,h),m=n8(a,o,f,h==="in"||h==="not-in");return $n.create(u,h,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function ng(t,e,n){const r=e,i=Zm("where",t);return tg._create(i,r,n)}class Kv extends Gv{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Kv(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:ds.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const l of a)LS(o,l),o=F0(o,l)}(e._query,n),new su(e.firestore,e.converter,F0(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Qv extends PS{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Qv(e,n)}_apply(e){const n=function(i,s,o){if(i.startAt!==null)throw new Je(Le.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new Je(Le.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Sd(s,o)}(e._query,this._field,this._direction);return new su(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new $c(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function CS(t,e="asc"){const n=e,r=Zm("orderBy",t);return Qv._create(r,n)}function gw(t,e,n){if(typeof(n=_n(n))=="string"){if(n==="")throw new Je(Le.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!T3(e)&&n.indexOf("/")!==-1)throw new Je(Le.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(un.fromString(n));if(!ut.isDocumentKey(r))throw new Je(Le.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return M_(t,new ut(r))}if(n instanceof qr)return M_(t,n._key);throw new Je(Le.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Km(n)}.`)}function vw(t,e){if(!Array.isArray(t)||t.length===0)throw new Je(Le.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function LS(t,e){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new Je(Le.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Je(Le.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class o8{convertValue(e,n="none"){switch(Xl(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Rn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Yl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw gt()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return ru(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>Rn(o.doubleValue));return new zv(s)}convertGeoPoint(e){return new qv(Rn(e.latitude),Rn(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=_v(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(wd(e));default:return null}}convertTimestamp(e){const n=Ka(e);return new Yn(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=un.fromString(e);Qt(Y3(r));const i=new bd(r.get(1),r.get(3)),s=new ut(r.popFirst(5));return i.isEqual(n)||jo(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RS(t,e,n){let r;return r=t?t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rh{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class jS extends kS{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new hp(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Zm("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class hp extends jS{data(e={}){return super.data(e)}}class a8{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Rh(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new hp(this._firestore,this._userDataWriter,r.key,r,new Rh(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Je(Le.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new hp(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Rh(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new hp(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Rh(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,h=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:l8(a.type),doc:l,oldIndex:u,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function l8(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return gt()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rg(t){t=fs(t,qr);const e=fs(t.firestore,ou);return Hj(Vv(e),t._key).then(n=>u8(e,t,n))}class DS extends o8{constructor(e){super(),this.firestore=e}convertBytes(e){return new Rc(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new qr(this.firestore,null,n)}}function Qs(t){t=fs(t,su);const e=fs(t.firestore,ou),n=Vv(e),r=new DS(e);return s8(t._query),Wj(n,t._query).then(i=>new a8(e,r,t,i))}function K0(t,e,n){t=fs(t,qr);const r=fs(t.firestore,ou),i=RS(t.converter,e);return ig(r,[ES(Xm(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Vi.none())])}function Ya(t,e,n,...r){t=fs(t,qr);const i=fs(t.firestore,ou),s=Xm(i);let o;return o=typeof(e=_n(e))=="string"||e instanceof Ym?t8(s,"updateDoc",t._key,e,n,r):e8(s,"updateDoc",t._key,e),ig(i,[o.toMutation(t._key,Vi.exists(!0))])}function il(t){return ig(fs(t.firestore,ou),[new Ev(t._key,Vi.none())])}function sl(t,e){const n=fs(t.firestore,ou),r=Tn(t),i=RS(t.converter,e);return ig(n,[ES(Xm(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Vi.exists(!1))]).then(()=>r)}function ig(t,e){return function(r,i){const s=new No;return r.asyncQueue.enqueueAndForget(async()=>jj(await $j(r),i,s)),s.promise}(Vv(t),e)}function u8(t,e,n){const r=n.docs.get(e._key),i=new DS(t);return new jS(t,i,e._key,r,new Rh(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){zc=i})(tu),Gl(new Wa("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new ou(new fL(r.getProvider("auth-internal")),new vL(r.getProvider("app-check-internal")),function(u,h){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new Je(Le.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new bd(u.options.projectId,h)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Vs(R_,"4.7.3",e),Vs(R_,"4.7.3","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OS="firebasestorage.googleapis.com",FS="storageBucket",c8=2*60*1e3,h8=10*60*1e3,d8=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn extends Ks{constructor(e,n,r=0){super(d1(e),`Firebase Storage: ${n} (${d1(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,bn.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return d1(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var dn;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(dn||(dn={}));function d1(t){return"storage/"+t}function Yv(){const t="An unknown error occurred, please check the error payload for server response.";return new bn(dn.UNKNOWN,t)}function f8(t){return new bn(dn.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function p8(t){return new bn(dn.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function m8(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new bn(dn.UNAUTHENTICATED,t)}function g8(){return new bn(dn.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function v8(t){return new bn(dn.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function MS(){return new bn(dn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function US(){return new bn(dn.CANCELED,"User canceled the upload/download.")}function y8(t){return new bn(dn.INVALID_URL,"Invalid URL '"+t+"'.")}function _8(t){return new bn(dn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function w8(){return new bn(dn.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+FS+"' property when initializing the app?")}function VS(){return new bn(dn.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function b8(){return new bn(dn.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function x8(){return new bn(dn.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function S8(t){return new bn(dn.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Q0(t){return new bn(dn.INVALID_ARGUMENT,t)}function BS(){return new bn(dn.APP_DELETED,"The Firebase app was deleted.")}function A8(t){return new bn(dn.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Qh(t,e){return new bn(dn.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function bh(t){throw new bn(dn.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bi{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=bi.makeFromUrl(e,n)}catch{return new bi(e,"")}if(r.path==="")return r;throw _8(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(O){O.path.charAt(O.path.length-1)==="/"&&(O.path_=O.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),l={bucket:1,path:3};function u(O){O.path_=decodeURIComponent(O.path)}const h="v[A-Za-z0-9_]+",f=n.replace(/[.]/g,"\\."),m="(/([^?#]*).*)?$",p=new RegExp(`^https?://${f}/${h}/b/${i}/o${m}`,"i"),b={bucket:1,path:3},x=n===OS?"(?:storage.googleapis.com|storage.cloud.google.com)":n,I="([^?#]*)",_=new RegExp(`^https?://${x}/${i}/${I}`,"i"),C=[{regex:a,indices:l,postModify:s},{regex:p,indices:b,postModify:u},{regex:_,indices:{bucket:1,path:2},postModify:u}];for(let O=0;O<C.length;O++){const K=C[O],B=K.regex.exec(e);if(B){const L=B[K.indices.bucket];let y=B[K.indices.path];y||(y=""),r=new bi(L,y),K.postModify(r);break}}if(r==null)throw y8(e);return r}}class E8{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N8(t,e,n){let r=1,i=null,s=null,o=!1,a=0;function l(){return a===2}let u=!1;function h(...I){u||(u=!0,e.apply(null,I))}function f(I){i=setTimeout(()=>{i=null,t(p,l())},I)}function m(){s&&clearTimeout(s)}function p(I,..._){if(u){m();return}if(I){m(),h.call(null,I,..._);return}if(l()||o){m(),h.call(null,I,..._);return}r<64&&(r*=2);let C;a===1?(a=2,C=0):C=(r+Math.random())*1e3,f(C)}let b=!1;function x(I){b||(b=!0,m(),!u&&(i!==null?(I||(a=2),clearTimeout(i),f(0)):I||(a=1)))}return f(0),s=setTimeout(()=>{o=!0,x(!0)},n),x}function I8(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T8(t){return t!==void 0}function k8(t){return typeof t=="function"}function P8(t){return typeof t=="object"&&!Array.isArray(t)}function sg(t){return typeof t=="string"||t instanceof String}function yw(t){return Xv()&&t instanceof Blob}function Xv(){return typeof Blob<"u"}function _w(t,e,n,r){if(r<e)throw Q0(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Q0(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gc(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function qS(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var Vl;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Vl||(Vl={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zS(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C8{constructor(e,n,r,i,s,o,a,l,u,h,f,m=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=u,this.progressCallback_=h,this.connectionFactory_=f,this.retry=m,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((p,b)=>{this.resolve_=p,this.reject_=b,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new Uf(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const l=a.loaded,u=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,u)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===Vl.NO_ERROR,l=s.getStatus();if(!a||zS(l,this.additionalRetryCodes_)&&this.retry){const h=s.getErrorCode()===Vl.ABORT;r(!1,new Uf(!1,null,h));return}const u=this.successCodes_.indexOf(l)!==-1;r(!0,new Uf(u,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());T8(l)?s(l):s()}catch(l){o(l)}else if(a!==null){const l=Yv();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(i.canceled){const l=this.appDelete_?BS():US();o(l)}else{const l=MS();o(l)}};this.canceled_?n(!1,new Uf(!1,null,!0)):this.backoffId_=N8(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&I8(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Uf{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function L8(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function R8(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function j8(t,e){e&&(t["X-Firebase-GMPID"]=e)}function D8(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function O8(t,e,n,r,i,s,o=!0){const a=qS(t.urlParams),l=t.url+a,u=Object.assign({},t.headers);return j8(u,e),L8(u,n),R8(u,s),D8(u,r),new C8(l,t.method,u,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F8(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function M8(...t){const e=F8();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(Xv())return new Blob(t);throw new bn(dn.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function U8(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V8(t){if(typeof atob>"u")throw S8("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Os={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class f1{constructor(e,n){this.data=e,this.contentType=n||null}}function B8(t,e){switch(t){case Os.RAW:return new f1($S(e));case Os.BASE64:case Os.BASE64URL:return new f1(HS(t,e));case Os.DATA_URL:return new f1(z8(e),$8(e))}throw Yv()}function $S(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const s=r,o=t.charCodeAt(++n);r=65536|(s&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function q8(t){let e;try{e=decodeURIComponent(t)}catch{throw Qh(Os.DATA_URL,"Malformed data URL.")}return $S(e)}function HS(t,e){switch(t){case Os.BASE64:{const i=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(i||s)throw Qh(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Os.BASE64URL:{const i=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(i||s)throw Qh(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=V8(e)}catch(i){throw i.message.includes("polyfill")?i:Qh(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class WS{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Qh(Os.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=H8(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function z8(t){const e=new WS(t);return e.base64?HS(Os.BASE64,e.rest):q8(e.rest)}function $8(t){return new WS(t).contentType}function H8(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ea{constructor(e,n){let r=0,i="";yw(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(yw(this.data_)){const r=this.data_,i=U8(r,e,n);return i===null?null:new Ea(i)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new Ea(r,!0)}}static getBlob(...e){if(Xv()){const n=e.map(r=>r instanceof Ea?r.data_:r);return new Ea(M8.apply(null,n))}else{const n=e.map(o=>sg(o)?B8(Os.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new Ea(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GS(t){let e;try{e=JSON.parse(t)}catch{return null}return P8(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W8(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function G8(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function KS(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K8(t,e){return e}class Ur{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||K8}}let Vf=null;function Q8(t){return!sg(t)||t.length<2?t:KS(t)}function QS(){if(Vf)return Vf;const t=[];t.push(new Ur("bucket")),t.push(new Ur("generation")),t.push(new Ur("metageneration")),t.push(new Ur("name","fullPath",!0));function e(s,o){return Q8(o)}const n=new Ur("name");n.xform=e,t.push(n);function r(s,o){return o!==void 0?Number(o):o}const i=new Ur("size");return i.xform=r,t.push(i),t.push(new Ur("timeCreated")),t.push(new Ur("updated")),t.push(new Ur("md5Hash",null,!0)),t.push(new Ur("cacheControl",null,!0)),t.push(new Ur("contentDisposition",null,!0)),t.push(new Ur("contentEncoding",null,!0)),t.push(new Ur("contentLanguage",null,!0)),t.push(new Ur("contentType",null,!0)),t.push(new Ur("metadata","customMetadata",!0)),Vf=t,Vf}function Y8(t,e){function n(){const r=t.bucket,i=t.fullPath,s=new bi(r,i);return e._makeStorageReference(s)}Object.defineProperty(t,"ref",{get:n})}function X8(t,e,n){const r={};r.type="file";const i=n.length;for(let s=0;s<i;s++){const o=n[s];r[o.local]=o.xform(r,e[o.server])}return Y8(r,t),r}function YS(t,e,n){const r=GS(e);return r===null?null:X8(t,r,n)}function J8(t,e,n,r){const i=GS(e);if(i===null||!sg(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(u=>{const h=t.bucket,f=t.fullPath,m="/b/"+o(h)+"/o/"+o(f),p=Gc(m,n,r),b=qS({alt:"media",token:u});return p+b})[0]}function XS(t,e){const n={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(n[s.server]=t[s.local])}return JSON.stringify(n)}class au{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Io(t){if(!t)throw Yv()}function Jv(t,e){function n(r,i){const s=YS(t,i,e);return Io(s!==null),s}return n}function Z8(t,e){function n(r,i){const s=YS(t,i,e);return Io(s!==null),J8(s,i,t.host,t._protocol)}return n}function $d(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=g8():i=m8():n.getStatus()===402?i=p8(t.bucket):n.getStatus()===403?i=v8(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function Zv(t){const e=$d(t);function n(r,i){let s=e(r,i);return r.getStatus()===404&&(s=f8(t.path)),s.serverResponse=i.serverResponse,s}return n}function e7(t,e,n){const r=e.fullServerUrl(),i=Gc(r,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,a=new au(i,s,Jv(t,n),o);return a.errorHandler=Zv(e),a}function t7(t,e,n){const r=e.fullServerUrl(),i=Gc(r,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,a=new au(i,s,Z8(t,n),o);return a.errorHandler=Zv(e),a}function n7(t,e){const n=e.fullServerUrl(),r=Gc(n,t.host,t._protocol),i="DELETE",s=t.maxOperationRetryTime;function o(l,u){}const a=new au(r,i,o,s);return a.successCodes=[200,204],a.errorHandler=Zv(e),a}function r7(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function JS(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=r7(null,e)),r}function i7(t,e,n,r,i){const s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let C="";for(let O=0;O<2;O++)C=C+Math.random().toString().slice(2);return C}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const u=JS(e,r,i),h=XS(u,n),f="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+h+`\r
--`+l+`\r
Content-Type: `+u.contentType+`\r
\r
`,m=`\r
--`+l+"--",p=Ea.getBlob(f,r,m);if(p===null)throw VS();const b={name:u.fullPath},x=Gc(s,t.host,t._protocol),I="POST",_=t.maxUploadRetryTime,E=new au(x,I,Jv(t,n),_);return E.urlParams=b,E.headers=o,E.body=p.uploadData(),E.errorHandler=$d(e),E}class sm{constructor(e,n,r,i){this.current=e,this.total=n,this.finalized=!!r,this.metadata=i||null}}function ey(t,e){let n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch{Io(!1)}return Io(!!n&&(e||["active"]).indexOf(n)!==-1),n}function s7(t,e,n,r,i){const s=e.bucketOnlyServerUrl(),o=JS(e,r,i),a={name:o.fullPath},l=Gc(s,t.host,t._protocol),u="POST",h={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},f=XS(o,n),m=t.maxUploadRetryTime;function p(x){ey(x);let I;try{I=x.getResponseHeader("X-Goog-Upload-URL")}catch{Io(!1)}return Io(sg(I)),I}const b=new au(l,u,p,m);return b.urlParams=a,b.headers=h,b.body=f,b.errorHandler=$d(e),b}function o7(t,e,n,r){const i={"X-Goog-Upload-Command":"query"};function s(u){const h=ey(u,["active","final"]);let f=null;try{f=u.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Io(!1)}f||Io(!1);const m=Number(f);return Io(!isNaN(m)),new sm(m,r.size(),h==="final")}const o="POST",a=t.maxUploadRetryTime,l=new au(n,o,s,a);return l.headers=i,l.errorHandler=$d(e),l}const ww=256*1024;function a7(t,e,n,r,i,s,o,a){const l=new sm(0,0);if(o?(l.current=o.current,l.total=o.total):(l.current=0,l.total=r.size()),r.size()!==l.total)throw b8();const u=l.total-l.current;let h=u;i>0&&(h=Math.min(h,i));const f=l.current,m=f+h;let p="";h===0?p="finalize":u===h?p="upload, finalize":p="upload";const b={"X-Goog-Upload-Command":p,"X-Goog-Upload-Offset":`${l.current}`},x=r.slice(f,m);if(x===null)throw VS();function I(O,K){const B=ey(O,["active","final"]),L=l.current+h,y=r.size();let S;return B==="final"?S=Jv(e,s)(O,K):S=null,new sm(L,y,B==="final",S)}const _="POST",E=e.maxUploadRetryTime,C=new au(n,_,I,E);return C.headers=b,C.body=x.uploadData(),C.progressCallback=a||null,C.errorHandler=$d(t),C}const ei={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function p1(t){switch(t){case"running":case"pausing":case"canceling":return ei.RUNNING;case"paused":return ei.PAUSED;case"success":return ei.SUCCESS;case"canceled":return ei.CANCELED;case"error":return ei.ERROR;default:return ei.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l7{constructor(e,n,r){if(k8(e)||n!=null||r!=null)this.next=e,this.error=n??void 0,this.complete=r??void 0;else{const s=e;this.next=s.next,this.error=s.error,this.complete=s.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ju(t){return(...e)=>{Promise.resolve().then(()=>t(...e))}}class u7{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Vl.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Vl.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Vl.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i){if(this.sent_)throw bh("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw bh("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw bh("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw bh("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw bh("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class c7 extends u7{initXhr(){this.xhr_.responseType="text"}}function Pl(){return new c7}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h7{constructor(e,n,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=n,this._metadata=r,this._mappings=QS(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals(dn.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const s=this.isExponentialBackoffExpired();if(zS(i.status,[]))if(s)i=MS();else{this.sleepTime=Math.max(this.sleepTime*2,d8),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals(dn.CANCELED)?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,s)=>{this._resolve=i,this._reject=s,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return n=>this._updateProgress(e+n)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,r])=>{switch(this._state){case"running":e(n,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,n)=>{const r=s7(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Pl,e,n);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((n,r)=>{const i=o7(this._ref.storage,this._ref._location,e,this._blob),s=this._ref.storage._makeRequest(i,Pl,n,r);this._request=s,s.getPromise().then(o=>{o=o,this._request=void 0,this._updateProgress(o.current),this._needToFetchStatus=!1,o.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=ww*this._chunkMultiplier,n=new sm(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,s)=>{let o;try{o=a7(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,n,this._makeProgressCallback())}catch(l){this._error=l,this._transition("error");return}const a=this._ref.storage._makeRequest(o,Pl,i,s,!1);this._request=a,a.getPromise().then(l=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(l.current),l.finalized?(this._metadata=l.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){ww*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,n)=>{const r=e7(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,Pl,e,n);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,n)=>{const r=i7(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Pl,e,n);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const n=this._transferred;this._transferred=e,this._transferred!==n&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const n=this._state==="paused";this._state=e,n&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=US(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=p1(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,n,r,i){const s=new l7(n||void 0,r||void 0,i||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(e,n){return this._promise.then(e,n)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const n=this._observers.indexOf(e);n!==-1&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(p1(this._state)){case ei.SUCCESS:ju(this._resolve.bind(null,this.snapshot))();break;case ei.CANCELED:case ei.ERROR:const n=this._reject;ju(n.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(p1(this._state)){case ei.RUNNING:case ei.PAUSED:e.next&&ju(e.next.bind(e,this.snapshot))();break;case ei.SUCCESS:e.complete&&ju(e.complete.bind(e))();break;case ei.CANCELED:case ei.ERROR:e.error&&ju(e.error.bind(e,this._error))();break;default:e.error&&ju(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jl{constructor(e,n){this._service=e,n instanceof bi?this._location=n:this._location=bi.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Jl(e,n)}get root(){const e=new bi(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return KS(this._location.path)}get storage(){return this._service}get parent(){const e=W8(this._location.path);if(e===null)return null;const n=new bi(this._location.bucket,e);return new Jl(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw A8(e)}}function d7(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new h7(t,new Ea(e),n)}function f7(t){t._throwIfRoot("getDownloadURL");const e=t7(t.storage,t._location,QS());return t.storage.makeRequestWithTokens(e,Pl).then(n=>{if(n===null)throw x8();return n})}function p7(t){t._throwIfRoot("deleteObject");const e=n7(t.storage,t._location);return t.storage.makeRequestWithTokens(e,Pl)}function m7(t,e){const n=G8(t._location.path,e),r=new bi(t._location.bucket,n);return new Jl(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g7(t){return/^[A-Za-z]+:\/\//.test(t)}function v7(t,e){return new Jl(t,e)}function ZS(t,e){if(t instanceof ty){const n=t;if(n._bucket==null)throw w8();const r=new Jl(n,n._bucket);return e!=null?ZS(r,e):r}else return e!==void 0?m7(t,e):t}function y7(t,e){if(e&&g7(e)){if(t instanceof ty)return v7(t,e);throw Q0("To use ref(service, url), the first argument must be a Storage instance.")}else return ZS(t,e)}function bw(t,e){const n=e==null?void 0:e[FS];return n==null?null:bi.makeFromBucketSpec(n,t)}function _7(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:N4(i,t.app.options.projectId))}class ty{constructor(e,n,r,i,s){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=OS,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=c8,this._maxUploadRetryTime=h8,this._requests=new Set,i!=null?this._bucket=bi.makeFromBucketSpec(i,this._host):this._bucket=bw(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=bi.makeFromBucketSpec(this._url,e):this._bucket=bw(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){_w("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){_w("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Jl(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new E8(BS());{const o=O8(e,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const xw="@firebase/storage",Sw="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eA="storage";function tA(t,e,n){return t=_n(t),d7(t,e,n)}function nA(t){return t=_n(t),f7(t)}function w7(t){return t=_n(t),p7(t)}function ny(t,e){return t=_n(t),y7(t,e)}function b7(t=ov(),e){t=_n(t);const r=jm(t,eA).getImmediate({identifier:e}),i=S4("storage");return i&&x7(r,...i),r}function x7(t,e,n,r={}){_7(t,e,n,r)}function S7(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new ty(n,r,i,e,tu)}function A7(){Gl(new Wa(eA,S7,"PUBLIC").setMultipleInstances(!0)),Vs(xw,Sw,""),Vs(xw,Sw,"esm2017")}A7();const E7={apiKey:"AIzaSyAcdG_9cM9yzmeMOFx-fhL4QAf9_wM3Yjo",authDomain:"achandymand-145da.firebaseapp.com",projectId:"achandymand-145da",storageBucket:"achandymand-145da.firebasestorage.app",messagingSenderId:"865306374889",appId:"1:865306374889:web:be1bc2500f388596de7678"},ry=k4(E7),iy=aL(ry),Nt=Qj(ry),sy=b7(ry);function N7(){const[t,e]=le.useState(""),[n,r]=le.useState(""),[i,s]=le.useState(""),[o,a]=le.useState(!1),l=Vc(),u=async h=>{h.preventDefault(),s(""),a(!0);try{await W6(iy,t,n),l("/timeregistrering")}catch(f){console.error("Login error:",f);let m="Der opstod en fejl ved login. Prv igen.";f.code==="auth/user-not-found"||f.code==="auth/wrong-password"?m="Forkert brugernavn eller adgangskode.":f.code==="auth/invalid-email"?m="Ugyldig e-mailadresse.":f.code==="auth/too-many-requests"&&(m="For mange forsg. Prv igen senere."),s(m)}finally{a(!1)}};return g.jsx("div",{className:"login-container",children:g.jsxs("div",{className:"login-box",children:[g.jsxs("div",{className:"login-logo",children:[g.jsx("h1",{children:"AC Handymand"}),g.jsx("p",{children:"Timeregistrering System"})]}),g.jsxs("form",{className:"login-form",onSubmit:u,children:[i&&g.jsx("div",{className:"error-message",children:i}),g.jsxs("div",{className:"form-group",children:[g.jsx("label",{htmlFor:"email",children:"Brugernavn (E-mail)"}),g.jsx("input",{type:"email",id:"email",value:t,onChange:h=>e(h.target.value),required:!0,disabled:o,placeholder:"din@email.dk"})]}),g.jsxs("div",{className:"form-group",children:[g.jsx("label",{htmlFor:"password",children:"Adgangskode"}),g.jsx("input",{type:"password",id:"password",value:n,onChange:h=>r(h.target.value),required:!0,disabled:o,placeholder:""})]}),g.jsx("button",{type:"submit",className:"btn-login",disabled:o,children:o?"Logger ind...":"Log ind"})]})]})})}const I7=["Sndag","Mandag","Tirsdag","Onsdag","Torsdag","Fredag","Lrdag"],om=["Januar","Februar","Marts","April","Maj","Juni","Juli","August","September","Oktober","November","December"];function T7(t){return I7[t.getDay()]}function k7(t){const e=t.getDay();return e===0||e===6}function P7(t,e){const n=[];let r=new Date(t,e,20);const i=e===11?0:e+1,s=e===11?t+1:t,o=new Date(s,i,19);for(;r<=o;){const a=`${String(r.getDate()).padStart(2,"0")}/${String(r.getMonth()+1).padStart(2,"0")}/${r.getFullYear()}`;n.push({date:new Date(r),dayOfMonth:r.getDate(),month:r.getMonth(),year:r.getFullYear(),weekday:T7(r),isWeekend:k7(r),formattedDate:a}),r.setDate(r.getDate()+1)}return n}function rA(t){const e=t===11?0:t+1;return`${om[t]} / ${om[e]}`}function iA(t,e){return e===11?`${t} / ${t+1}`:String(t)}function C7(){return om.map((t,e)=>{const n=e===11?0:e+1;return{value:e,label:`${t} / ${om[n]}`}})}const L7="modulepreload",R7=function(t){return"/"+t},Aw={},Y0=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(n.map(l=>{if(l=R7(l),l in Aw)return;Aw[l]=!0;const u=l.endsWith(".css"),h=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${h}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":L7,u||(f.as="script"),f.crossOrigin="",f.href=l,a&&f.setAttribute("nonce",a),document.head.appendChild(f),u)return new Promise((m,p)=>{f.addEventListener("load",m),f.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})};function Gt(t){"@babel/helpers - typeof";return Gt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gt(t)}var kr=Uint8Array,xi=Uint16Array,oy=Int32Array,og=new kr([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),ag=new kr([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),X0=new kr([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),sA=function(t,e){for(var n=new xi(31),r=0;r<31;++r)n[r]=e+=1<<t[r-1];for(var i=new oy(n[30]),r=1;r<30;++r)for(var s=n[r];s<n[r+1];++s)i[s]=s-n[r]<<5|r;return{b:n,r:i}},oA=sA(og,2),aA=oA.b,J0=oA.r;aA[28]=258,J0[258]=28;var lA=sA(ag,0),j7=lA.b,Ew=lA.r,Z0=new xi(32768);for(var cn=0;cn<32768;++cn){var ma=(cn&43690)>>1|(cn&21845)<<1;ma=(ma&52428)>>2|(ma&13107)<<2,ma=(ma&61680)>>4|(ma&3855)<<4,Z0[cn]=((ma&65280)>>8|(ma&255)<<8)>>1}var Hs=function(t,e,n){for(var r=t.length,i=0,s=new xi(e);i<r;++i)t[i]&&++s[t[i]-1];var o=new xi(e);for(i=1;i<e;++i)o[i]=o[i-1]+s[i-1]<<1;var a;if(n){a=new xi(1<<e);var l=15-e;for(i=0;i<r;++i)if(t[i])for(var u=i<<4|t[i],h=e-t[i],f=o[t[i]-1]++<<h,m=f|(1<<h)-1;f<=m;++f)a[Z0[f]>>l]=u}else for(a=new xi(r),i=0;i<r;++i)t[i]&&(a[i]=Z0[o[t[i]-1]++]>>15-t[i]);return a},Xa=new kr(288);for(var cn=0;cn<144;++cn)Xa[cn]=8;for(var cn=144;cn<256;++cn)Xa[cn]=9;for(var cn=256;cn<280;++cn)Xa[cn]=7;for(var cn=280;cn<288;++cn)Xa[cn]=8;var Nd=new kr(32);for(var cn=0;cn<32;++cn)Nd[cn]=5;var D7=Hs(Xa,9,0),O7=Hs(Xa,9,1),F7=Hs(Nd,5,0),M7=Hs(Nd,5,1),m1=function(t){for(var e=t[0],n=1;n<t.length;++n)t[n]>e&&(e=t[n]);return e},ts=function(t,e,n){var r=e/8|0;return(t[r]|t[r+1]<<8)>>(e&7)&n},g1=function(t,e){var n=e/8|0;return(t[n]|t[n+1]<<8|t[n+2]<<16)>>(e&7)},ay=function(t){return(t+7)/8|0},uA=function(t,e,n){return(n==null||n>t.length)&&(n=t.length),new kr(t.subarray(e,n))},U7=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],ss=function(t,e,n){var r=new Error(e||U7[t]);if(r.code=t,Error.captureStackTrace&&Error.captureStackTrace(r,ss),!n)throw r;return r},V7=function(t,e,n,r){var i=t.length,s=0;if(!i||e.f&&!e.l)return n||new kr(0);var o=!n,a=o||e.i!=2,l=e.i;o&&(n=new kr(i*3));var u=function(Ne){var je=n.length;if(Ne>je){var Ue=new kr(Math.max(je*2,Ne));Ue.set(n),n=Ue}},h=e.f||0,f=e.p||0,m=e.b||0,p=e.l,b=e.d,x=e.m,I=e.n,_=i*8;do{if(!p){h=ts(t,f,1);var E=ts(t,f+1,3);if(f+=3,E)if(E==1)p=O7,b=M7,x=9,I=5;else if(E==2){var B=ts(t,f,31)+257,L=ts(t,f+10,15)+4,y=B+ts(t,f+5,31)+1;f+=14;for(var S=new kr(y),R=new kr(19),N=0;N<L;++N)R[X0[N]]=ts(t,f+N*3,7);f+=L*3;for(var T=m1(R),P=(1<<T)-1,U=Hs(R,T,1),N=0;N<y;){var Q=U[ts(t,f,P)];f+=Q&15;var C=Q>>4;if(C<16)S[N++]=C;else{var F=0,V=0;for(C==16?(V=3+ts(t,f,3),f+=2,F=S[N-1]):C==17?(V=3+ts(t,f,7),f+=3):C==18&&(V=11+ts(t,f,127),f+=7);V--;)S[N++]=F}}var G=S.subarray(0,B),ee=S.subarray(B);x=m1(G),I=m1(ee),p=Hs(G,x,1),b=Hs(ee,I,1)}else ss(1);else{var C=ay(f)+4,O=t[C-4]|t[C-3]<<8,K=C+O;if(K>i){l&&ss(0);break}a&&u(m+O),n.set(t.subarray(C,K),m),e.b=m+=O,e.p=f=K*8,e.f=h;continue}if(f>_){l&&ss(0);break}}a&&u(m+131072);for(var ie=(1<<x)-1,be=(1<<I)-1,M=f;;M=f){var F=p[g1(t,f)&ie],Y=F>>4;if(f+=F&15,f>_){l&&ss(0);break}if(F||ss(2),Y<256)n[m++]=Y;else if(Y==256){M=f,p=null;break}else{var X=Y-254;if(Y>264){var N=Y-257,H=og[N];X=ts(t,f,(1<<H)-1)+aA[N],f+=H}var oe=b[g1(t,f)&be],ne=oe>>4;oe||ss(3),f+=oe&15;var ee=j7[ne];if(ne>3){var H=ag[ne];ee+=g1(t,f)&(1<<H)-1,f+=H}if(f>_){l&&ss(0);break}a&&u(m+131072);var ue=m+X;if(m<ee){var he=s-ee,Ee=Math.min(ee,ue);for(he+m<0&&ss(3);m<Ee;++m)n[m]=r[he+m]}for(;m<ue;++m)n[m]=n[m-ee]}}e.l=p,e.p=M,e.b=m,e.f=h,p&&(h=1,e.m=x,e.d=b,e.n=I)}while(!h);return m!=n.length&&o?uA(n,0,m):n.subarray(0,m)},go=function(t,e,n){n<<=e&7;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8},xh=function(t,e,n){n<<=e&7;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8,t[r+2]|=n>>16},v1=function(t,e){for(var n=[],r=0;r<t.length;++r)t[r]&&n.push({s:r,f:t[r]});var i=n.length,s=n.slice();if(!i)return{t:hA,l:0};if(i==1){var o=new kr(n[0].s+1);return o[n[0].s]=1,{t:o,l:1}}n.sort(function(K,B){return K.f-B.f}),n.push({s:-1,f:25001});var a=n[0],l=n[1],u=0,h=1,f=2;for(n[0]={s:-1,f:a.f+l.f,l:a,r:l};h!=i-1;)a=n[n[u].f<n[f].f?u++:f++],l=n[u!=h&&n[u].f<n[f].f?u++:f++],n[h++]={s:-1,f:a.f+l.f,l:a,r:l};for(var m=s[0].s,r=1;r<i;++r)s[r].s>m&&(m=s[r].s);var p=new xi(m+1),b=e2(n[h-1],p,0);if(b>e){var r=0,x=0,I=b-e,_=1<<I;for(s.sort(function(B,L){return p[L.s]-p[B.s]||B.f-L.f});r<i;++r){var E=s[r].s;if(p[E]>e)x+=_-(1<<b-p[E]),p[E]=e;else break}for(x>>=I;x>0;){var C=s[r].s;p[C]<e?x-=1<<e-p[C]++-1:++r}for(;r>=0&&x;--r){var O=s[r].s;p[O]==e&&(--p[O],++x)}b=e}return{t:new kr(p),l:b}},e2=function(t,e,n){return t.s==-1?Math.max(e2(t.l,e,n+1),e2(t.r,e,n+1)):e[t.s]=n},Nw=function(t){for(var e=t.length;e&&!t[--e];);for(var n=new xi(++e),r=0,i=t[0],s=1,o=function(l){n[r++]=l},a=1;a<=e;++a)if(t[a]==i&&a!=e)++s;else{if(!i&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(i),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(i);s=1,i=t[a]}return{c:n.subarray(0,r),n:e}},Sh=function(t,e){for(var n=0,r=0;r<e.length;++r)n+=t[r]*e[r];return n},cA=function(t,e,n){var r=n.length,i=ay(e+2);t[i]=r&255,t[i+1]=r>>8,t[i+2]=t[i]^255,t[i+3]=t[i+1]^255;for(var s=0;s<r;++s)t[i+s+4]=n[s];return(i+4+r)*8},Iw=function(t,e,n,r,i,s,o,a,l,u,h){go(e,h++,n),++i[256];for(var f=v1(i,15),m=f.t,p=f.l,b=v1(s,15),x=b.t,I=b.l,_=Nw(m),E=_.c,C=_.n,O=Nw(x),K=O.c,B=O.n,L=new xi(19),y=0;y<E.length;++y)++L[E[y]&31];for(var y=0;y<K.length;++y)++L[K[y]&31];for(var S=v1(L,7),R=S.t,N=S.l,T=19;T>4&&!R[X0[T-1]];--T);var P=u+5<<3,U=Sh(i,Xa)+Sh(s,Nd)+o,Q=Sh(i,m)+Sh(s,x)+o+14+3*T+Sh(L,R)+2*L[16]+3*L[17]+7*L[18];if(l>=0&&P<=U&&P<=Q)return cA(e,h,t.subarray(l,l+u));var F,V,G,ee;if(go(e,h,1+(Q<U)),h+=2,Q<U){F=Hs(m,p,0),V=m,G=Hs(x,I,0),ee=x;var ie=Hs(R,N,0);go(e,h,C-257),go(e,h+5,B-1),go(e,h+10,T-4),h+=14;for(var y=0;y<T;++y)go(e,h+3*y,R[X0[y]]);h+=3*T;for(var be=[E,K],M=0;M<2;++M)for(var Y=be[M],y=0;y<Y.length;++y){var X=Y[y]&31;go(e,h,ie[X]),h+=R[X],X>15&&(go(e,h,Y[y]>>5&127),h+=Y[y]>>12)}}else F=D7,V=Xa,G=F7,ee=Nd;for(var y=0;y<a;++y){var H=r[y];if(H>255){var X=H>>18&31;xh(e,h,F[X+257]),h+=V[X+257],X>7&&(go(e,h,H>>23&31),h+=og[X]);var oe=H&31;xh(e,h,G[oe]),h+=ee[oe],oe>3&&(xh(e,h,H>>5&8191),h+=ag[oe])}else xh(e,h,F[H]),h+=V[H]}return xh(e,h,F[256]),h+V[256]},B7=new oy([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),hA=new kr(0),q7=function(t,e,n,r,i,s){var o=s.z||t.length,a=new kr(r+o+5*(1+Math.ceil(o/7e3))+i),l=a.subarray(r,a.length-i),u=s.l,h=(s.r||0)&7;if(e){h&&(l[0]=s.r>>3);for(var f=B7[e-1],m=f>>13,p=f&8191,b=(1<<n)-1,x=s.p||new xi(32768),I=s.h||new xi(b+1),_=Math.ceil(n/3),E=2*_,C=function(Ye){return(t[Ye]^t[Ye+1]<<_^t[Ye+2]<<E)&b},O=new oy(25e3),K=new xi(288),B=new xi(32),L=0,y=0,S=s.i||0,R=0,N=s.w||0,T=0;S+2<o;++S){var P=C(S),U=S&32767,Q=I[P];if(x[U]=Q,I[P]=U,N<=S){var F=o-S;if((L>7e3||R>24576)&&(F>423||!u)){h=Iw(t,l,0,O,K,B,y,R,T,S-T,h),R=L=y=0,T=S;for(var V=0;V<286;++V)K[V]=0;for(var V=0;V<30;++V)B[V]=0}var G=2,ee=0,ie=p,be=U-Q&32767;if(F>2&&P==C(S-be))for(var M=Math.min(m,F)-1,Y=Math.min(32767,S),X=Math.min(258,F);be<=Y&&--ie&&U!=Q;){if(t[S+G]==t[S+G-be]){for(var H=0;H<X&&t[S+H]==t[S+H-be];++H);if(H>G){if(G=H,ee=be,H>M)break;for(var oe=Math.min(be,H-2),ne=0,V=0;V<oe;++V){var ue=S-be+V&32767,he=x[ue],Ee=ue-he&32767;Ee>ne&&(ne=Ee,Q=ue)}}}U=Q,Q=x[U],be+=U-Q&32767}if(ee){O[R++]=268435456|J0[G]<<18|Ew[ee];var Ne=J0[G]&31,je=Ew[ee]&31;y+=og[Ne]+ag[je],++K[257+Ne],++B[je],N=S+G,++L}else O[R++]=t[S],++K[t[S]]}}for(S=Math.max(S,N);S<o;++S)O[R++]=t[S],++K[t[S]];h=Iw(t,l,u,O,K,B,y,R,T,S-T,h),u||(s.r=h&7|l[h/8|0]<<3,h-=7,s.h=I,s.p=x,s.i=S,s.w=N)}else{for(var S=s.w||0;S<o+u;S+=65535){var Ue=S+65535;Ue>=o&&(l[h/8|0]=u,Ue=o),h=cA(l,h+1,t.subarray(S,Ue))}s.i=o}return uA(a,0,r+ay(h)+i)},dA=function(){var t=1,e=0;return{p:function(n){for(var r=t,i=e,s=n.length|0,o=0;o!=s;){for(var a=Math.min(o+2655,s);o<a;++o)i+=r+=n[o];r=(r&65535)+15*(r>>16),i=(i&65535)+15*(i>>16)}t=r,e=i},d:function(){return t%=65521,e%=65521,(t&255)<<24|(t&65280)<<8|(e&255)<<8|e>>8}}},z7=function(t,e,n,r,i){if(!i&&(i={l:1},e.dictionary)){var s=e.dictionary.subarray(-32768),o=new kr(s.length+t.length);o.set(s),o.set(t,s.length),t=o,i.w=s.length}return q7(t,e.level==null?6:e.level,e.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+e.mem,n,r,i)},fA=function(t,e,n){for(;n;++e)t[e]=n,n>>>=8},$7=function(t,e){var n=e.level,r=n==0?0:n<6?1:n==9?3:2;if(t[0]=120,t[1]=r<<6|(e.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,e.dictionary){var i=dA();i.p(e.dictionary),fA(t,2,i.d())}},H7=function(t,e){return((t[0]&15)!=8||t[0]>>4>7||(t[0]<<8|t[1])%31)&&ss(6,"invalid zlib data"),(t[1]>>5&1)==1&&ss(6,"invalid zlib data: "+(t[1]&32?"need":"unexpected")+" dictionary"),(t[1]>>3&4)+2};function t2(t,e){e||(e={});var n=dA();n.p(t);var r=z7(t,e,e.dictionary?6:2,4);return $7(r,e),fA(r,r.length-4,n.d()),r}function W7(t,e){return V7(t.subarray(H7(t),-4),{i:2},e,e)}var G7=typeof TextDecoder<"u"&&new TextDecoder,K7=0;try{G7.decode(hA,{stream:!0}),K7=1}catch{}var ft=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function y1(){ft.console&&typeof ft.console.log=="function"&&ft.console.log.apply(ft.console,arguments)}var en={log:y1,warn:function(t){ft.console&&(typeof ft.console.warn=="function"?ft.console.warn.apply(ft.console,arguments):y1.call(null,arguments))},error:function(t){ft.console&&(typeof ft.console.error=="function"?ft.console.error.apply(ft.console,arguments):y1(t))}};function _1(t,e,n){var r=new XMLHttpRequest;r.open("GET",t),r.responseType="blob",r.onload=function(){kl(r.response,e,n)},r.onerror=function(){en.error("could not download file")},r.send()}function Tw(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function Bf(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var Yh,n2,kl=ft.saveAs||((typeof window>"u"?"undefined":Gt(window))!=="object"||window!==ft?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,e,n){var r=ft.URL||ft.webkitURL,i=document.createElement("a");e=e||t.name||"download",i.download=e,i.rel="noopener",typeof t=="string"?(i.href=t,i.origin!==location.origin?Tw(i.href)?_1(t,e,n):Bf(i,i.target="_blank"):Bf(i)):(i.href=r.createObjectURL(t),setTimeout(function(){r.revokeObjectURL(i.href)},4e4),setTimeout(function(){Bf(i)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,n){if(e=e||t.name||"download",typeof t=="string")if(Tw(t))_1(t,e,n);else{var r=document.createElement("a");r.href=t,r.target="_blank",setTimeout(function(){Bf(r)})}else navigator.msSaveOrOpenBlob(function(i,s){return s===void 0?s={autoBom:!1}:Gt(s)!=="object"&&(en.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i}(t,n),e)}:function(t,e,n,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof t=="string")return _1(t,e,n);var i=t.type==="application/octet-stream",s=/constructor/i.test(ft.HTMLElement)||ft.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||i&&s)&&(typeof FileReader>"u"?"undefined":Gt(FileReader))==="object"){var a=new FileReader;a.onloadend=function(){var h=a.result;h=o?h:h.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=h:location=h,r=null},a.readAsDataURL(t)}else{var l=ft.URL||ft.webkitURL,u=l.createObjectURL(t);r?r.location=u:location.href=u,r=null,setTimeout(function(){l.revokeObjectURL(u)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function pA(t){var e;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(a){return[parseInt(a[1]),parseInt(a[2]),parseInt(a[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}}],r=0;r<n.length;r++){var i=n[r].re,s=n[r].process,o=i.exec(t);o&&(e=s(o),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var a=this.r.toString(16),l=this.g.toString(16),u=this.b.toString(16);return a.length==1&&(a="0"+a),l.length==1&&(l="0"+l),u.length==1&&(u="0"+u),"#"+a+l+u}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function w1(t,e){var n=t[0],r=t[1],i=t[2],s=t[3];n=xr(n,r,i,s,e[0],7,-680876936),s=xr(s,n,r,i,e[1],12,-389564586),i=xr(i,s,n,r,e[2],17,606105819),r=xr(r,i,s,n,e[3],22,-1044525330),n=xr(n,r,i,s,e[4],7,-176418897),s=xr(s,n,r,i,e[5],12,1200080426),i=xr(i,s,n,r,e[6],17,-1473231341),r=xr(r,i,s,n,e[7],22,-45705983),n=xr(n,r,i,s,e[8],7,1770035416),s=xr(s,n,r,i,e[9],12,-1958414417),i=xr(i,s,n,r,e[10],17,-42063),r=xr(r,i,s,n,e[11],22,-1990404162),n=xr(n,r,i,s,e[12],7,1804603682),s=xr(s,n,r,i,e[13],12,-40341101),i=xr(i,s,n,r,e[14],17,-1502002290),n=Sr(n,r=xr(r,i,s,n,e[15],22,1236535329),i,s,e[1],5,-165796510),s=Sr(s,n,r,i,e[6],9,-1069501632),i=Sr(i,s,n,r,e[11],14,643717713),r=Sr(r,i,s,n,e[0],20,-373897302),n=Sr(n,r,i,s,e[5],5,-701558691),s=Sr(s,n,r,i,e[10],9,38016083),i=Sr(i,s,n,r,e[15],14,-660478335),r=Sr(r,i,s,n,e[4],20,-405537848),n=Sr(n,r,i,s,e[9],5,568446438),s=Sr(s,n,r,i,e[14],9,-1019803690),i=Sr(i,s,n,r,e[3],14,-187363961),r=Sr(r,i,s,n,e[8],20,1163531501),n=Sr(n,r,i,s,e[13],5,-1444681467),s=Sr(s,n,r,i,e[2],9,-51403784),i=Sr(i,s,n,r,e[7],14,1735328473),n=Ar(n,r=Sr(r,i,s,n,e[12],20,-1926607734),i,s,e[5],4,-378558),s=Ar(s,n,r,i,e[8],11,-2022574463),i=Ar(i,s,n,r,e[11],16,1839030562),r=Ar(r,i,s,n,e[14],23,-35309556),n=Ar(n,r,i,s,e[1],4,-1530992060),s=Ar(s,n,r,i,e[4],11,1272893353),i=Ar(i,s,n,r,e[7],16,-155497632),r=Ar(r,i,s,n,e[10],23,-1094730640),n=Ar(n,r,i,s,e[13],4,681279174),s=Ar(s,n,r,i,e[0],11,-358537222),i=Ar(i,s,n,r,e[3],16,-722521979),r=Ar(r,i,s,n,e[6],23,76029189),n=Ar(n,r,i,s,e[9],4,-640364487),s=Ar(s,n,r,i,e[12],11,-421815835),i=Ar(i,s,n,r,e[15],16,530742520),n=Er(n,r=Ar(r,i,s,n,e[2],23,-995338651),i,s,e[0],6,-198630844),s=Er(s,n,r,i,e[7],10,1126891415),i=Er(i,s,n,r,e[14],15,-1416354905),r=Er(r,i,s,n,e[5],21,-57434055),n=Er(n,r,i,s,e[12],6,1700485571),s=Er(s,n,r,i,e[3],10,-1894986606),i=Er(i,s,n,r,e[10],15,-1051523),r=Er(r,i,s,n,e[1],21,-2054922799),n=Er(n,r,i,s,e[8],6,1873313359),s=Er(s,n,r,i,e[15],10,-30611744),i=Er(i,s,n,r,e[6],15,-1560198380),r=Er(r,i,s,n,e[13],21,1309151649),n=Er(n,r,i,s,e[4],6,-145523070),s=Er(s,n,r,i,e[11],10,-1120210379),i=Er(i,s,n,r,e[2],15,718787259),r=Er(r,i,s,n,e[9],21,-343485551),t[0]=Pa(n,t[0]),t[1]=Pa(r,t[1]),t[2]=Pa(i,t[2]),t[3]=Pa(s,t[3])}function lg(t,e,n,r,i,s){return e=Pa(Pa(e,t),Pa(r,s)),Pa(e<<i|e>>>32-i,n)}function xr(t,e,n,r,i,s,o){return lg(e&n|~e&r,t,e,i,s,o)}function Sr(t,e,n,r,i,s,o){return lg(e&r|n&~r,t,e,i,s,o)}function Ar(t,e,n,r,i,s,o){return lg(e^n^r,t,e,i,s,o)}function Er(t,e,n,r,i,s,o){return lg(n^(e|~r),t,e,i,s,o)}function mA(t){var e,n=t.length,r=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)w1(r,Q7(t.substring(e-64,e)));t=t.substring(e-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)i[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(i[e>>2]|=128<<(e%4<<3),e>55)for(w1(r,i),e=0;e<16;e++)i[e]=0;return i[14]=8*n,w1(r,i),r}function Q7(t){var e,n=[];for(e=0;e<64;e+=4)n[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return n}Yh=ft.atob.bind(ft),n2=ft.btoa.bind(ft);var kw="0123456789abcdef".split("");function Y7(t){for(var e="",n=0;n<4;n++)e+=kw[t>>8*n+4&15]+kw[t>>8*n&15];return e}function X7(t){return String.fromCharCode((255&t)>>0,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function r2(t){return mA(t).map(X7).join("")}var J7=function(t){for(var e=0;e<t.length;e++)t[e]=Y7(t[e]);return t.join("")}(mA("hello"))!="5d41402abc4b2a76b9719d911017c592";function Pa(t,e){if(J7){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}return t+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function i2(t,e){var n,r,i,s;if(t!==n){for(var o=(i=t,s=1+(256/t.length>>0),new Array(s+1).join(i)),a=[],l=0;l<256;l++)a[l]=l;var u=0;for(l=0;l<256;l++){var h=a[l];u=(u+h+o.charCodeAt(l))%256,a[l]=a[u],a[u]=h}n=t,r=a}else a=r;var f=e.length,m=0,p=0,b="";for(l=0;l<f;l++)p=(p+(h=a[m=(m+1)%256]))%256,a[m]=a[p],a[p]=h,o=a[(a[m]+a[p])%256],b+=String.fromCharCode(e.charCodeAt(l)^o);return b}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var Pw={print:4,modify:8,copy:16,"annot-forms":32};function Bu(t,e,n,r){this.v=1,this.r=2;var i=192;t.forEach(function(a){if(Pw.perm!==void 0)throw new Error("Invalid permission: "+a);i+=Pw[a]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var s=(e+this.padding).substr(0,32),o=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,o),this.P=-(1+(255^i)),this.encryptionKey=r2(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=i2(this.encryptionKey,this.padding)}function qu(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",n=t.length,r=0;r<n;r++){var i=t.charCodeAt(r);i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?e+="#"+("0"+i.toString(16)).slice(-2):e+=t[r]}return e}function Cw(t){if(Gt(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(n,r,i){if(i=i||!1,typeof n!="string"||typeof r!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(n)||(e[n]={});var s=Math.random().toString(35);return e[n][s]=[r,!!i],s},this.unsubscribe=function(n){for(var r in e)if(e[r][n])return delete e[r][n],Object.keys(e[r]).length===0&&delete e[r],!0;return!1},this.publish=function(n){if(e.hasOwnProperty(n)){var r=Array.prototype.slice.call(arguments,1),i=[];for(var s in e[n]){var o=e[n][s];try{o[0].apply(t,r)}catch(a){ft.console&&en.error("jsPDF PubSub Error",a.message,a)}o[1]&&i.push(s)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function am(t){if(!(this instanceof am))return new am(t);var e="opacity,stroke-opacity".split(",");for(var n in t)t.hasOwnProperty(n)&&e.indexOf(n)>=0&&(this[n]=t[n]);this.id="",this.objectNumber=-1}function gA(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function Cl(t,e,n,r,i){if(!(this instanceof Cl))return new Cl(t,e,n,r,i);this.type=t==="axial"?2:3,this.coords=e,this.colors=n,gA.call(this,r,i)}function nc(t,e,n,r,i){if(!(this instanceof nc))return new nc(t,e,n,r,i);this.boundingBox=t,this.xStep=e,this.yStep=n,this.stream="",this.cloneIndex=0,gA.call(this,r,i)}function dt(t){var e,n=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],i=arguments[2],s=arguments[3],o=[],a=1,l=16,u="S",h=null;Gt(t=t||{})==="object"&&(n=t.orientation,r=t.unit||r,i=t.format||i,s=t.compress||t.compressPdf||s,(h=t.encryption||null)!==null&&(h.userPassword=h.userPassword||"",h.ownerPassword=h.ownerPassword||"",h.userPermissions=h.userPermissions||[]),a=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(e=t.precision),t.floatPrecision!==void 0&&(l=t.floatPrecision),u=t.defaultPathOperation||"S"),o=t.filters||(s===!0?["FlateEncode"]:o),r=r||"mm",n=(""+(n||"P")).toLowerCase();var f=t.putOnlyUsedFonts||!1,m={},p={internal:{},__private__:{}};p.__private__.PubSub=Cw;var b="1.3",x=p.__private__.getPdfVersion=function(){return b};p.__private__.setPdfVersion=function(w){b=w};var I={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};p.__private__.getPageFormats=function(){return I};var _=p.__private__.getPageFormat=function(w){return I[w]};i=i||"a4";var E={COMPAT:"compat",ADVANCED:"advanced"},C=E.COMPAT;function O(){this.saveGraphicsState(),ae(new Ze($e,0,0,-$e,0,yr()*$e).toString()+" cm"),this.setFontSize(this.getFontSize()/$e),u="n",C=E.ADVANCED}function K(){this.restoreGraphicsState(),u="S",C=E.COMPAT}var B=p.__private__.combineFontStyleAndFontWeight=function(w,q){if(w=="bold"&&q=="normal"||w=="bold"&&q==400||w=="normal"&&q=="italic"||w=="bold"&&q=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return q&&(w=q==400||q==="normal"?w==="italic"?"italic":"normal":q!=700&&q!=="bold"||w!=="normal"?(q==700?"bold":q)+""+w:"bold"),w};p.advancedAPI=function(w){var q=C===E.COMPAT;return q&&O.call(this),typeof w!="function"||(w(this),q&&K.call(this)),this},p.compatAPI=function(w){var q=C===E.ADVANCED;return q&&K.call(this),typeof w!="function"||(w(this),q&&O.call(this)),this},p.isAdvancedAPI=function(){return C===E.ADVANCED};var L,y=function(w){if(C!==E.ADVANCED)throw new Error(w+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},S=p.roundToPrecision=p.__private__.roundToPrecision=function(w,q){var se=e||q;if(isNaN(w)||isNaN(se))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return w.toFixed(se).replace(/0+$/,"")};L=p.hpf=p.__private__.hpf=typeof l=="number"?function(w){if(isNaN(w))throw new Error("Invalid argument passed to jsPDF.hpf");return S(w,l)}:l==="smart"?function(w){if(isNaN(w))throw new Error("Invalid argument passed to jsPDF.hpf");return S(w,w>-1&&w<1?16:5)}:function(w){if(isNaN(w))throw new Error("Invalid argument passed to jsPDF.hpf");return S(w,16)};var R=p.f2=p.__private__.f2=function(w){if(isNaN(w))throw new Error("Invalid argument passed to jsPDF.f2");return S(w,2)},N=p.__private__.f3=function(w){if(isNaN(w))throw new Error("Invalid argument passed to jsPDF.f3");return S(w,3)},T=p.scale=p.__private__.scale=function(w){if(isNaN(w))throw new Error("Invalid argument passed to jsPDF.scale");return C===E.COMPAT?w*$e:C===E.ADVANCED?w:void 0},P=function(w){return C===E.COMPAT?yr()-w:C===E.ADVANCED?w:void 0},U=function(w){return T(P(w))};p.__private__.setPrecision=p.setPrecision=function(w){typeof parseInt(w,10)=="number"&&(e=parseInt(w,10))};var Q,F="00000000000000000000000000000000",V=p.__private__.getFileId=function(){return F},G=p.__private__.setFileId=function(w){return F=w!==void 0&&/^[a-fA-F0-9]{32}$/.test(w)?w.toUpperCase():F.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),h!==null&&(an=new Bu(h.userPermissions,h.userPassword,h.ownerPassword,F)),F};p.setFileId=function(w){return G(w),this},p.getFileId=function(){return V()};var ee=p.__private__.convertDateToPDFDate=function(w){var q=w.getTimezoneOffset(),se=q<0?"+":"-",ce=Math.floor(Math.abs(q/60)),ge=Math.abs(q%60),Ie=[se,X(ce),"'",X(ge),"'"].join("");return["D:",w.getFullYear(),X(w.getMonth()+1),X(w.getDate()),X(w.getHours()),X(w.getMinutes()),X(w.getSeconds()),Ie].join("")},ie=p.__private__.convertPDFDateToDate=function(w){var q=parseInt(w.substr(2,4),10),se=parseInt(w.substr(6,2),10)-1,ce=parseInt(w.substr(8,2),10),ge=parseInt(w.substr(10,2),10),Ie=parseInt(w.substr(12,2),10),Oe=parseInt(w.substr(14,2),10);return new Date(q,se,ce,ge,Ie,Oe,0)},be=p.__private__.setCreationDate=function(w){var q;if(w===void 0&&(w=new Date),w instanceof Date)q=ee(w);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(w))throw new Error("Invalid argument passed to jsPDF.setCreationDate");q=w}return Q=q},M=p.__private__.getCreationDate=function(w){var q=Q;return w==="jsDate"&&(q=ie(Q)),q};p.setCreationDate=function(w){return be(w),this},p.getCreationDate=function(w){return M(w)};var Y,X=p.__private__.padd2=function(w){return("0"+parseInt(w)).slice(-2)},H=p.__private__.padd2Hex=function(w){return("00"+(w=w.toString())).substr(w.length)},oe=0,ne=[],ue=[],he=0,Ee=[],Ne=[],je=!1,Ue=ue,Ye=function(){oe=0,he=0,ue=[],ne=[],Ee=[],zi=Sn(),vr=Sn()};p.__private__.setCustomOutputDestination=function(w){je=!0,Ue=w};var Se=function(w){je||(Ue=w)};p.__private__.resetCustomOutputDestination=function(){je=!1,Ue=ue};var ae=p.__private__.out=function(w){return w=w.toString(),he+=w.length+1,Ue.push(w),Ue},ye=p.__private__.write=function(w){return ae(arguments.length===1?w.toString():Array.prototype.join.call(arguments," "))},Re=p.__private__.getArrayBuffer=function(w){for(var q=w.length,se=new ArrayBuffer(q),ce=new Uint8Array(se);q--;)ce[q]=w.charCodeAt(q);return se},Te=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];p.__private__.getStandardFonts=function(){return Te};var Me=t.fontSize||16;p.__private__.setFontSize=p.setFontSize=function(w){return Me=C===E.ADVANCED?w/$e:w,this};var Be,ze=p.__private__.getFontSize=p.getFontSize=function(){return C===E.COMPAT?Me:Me*$e},He=t.R2L||!1;p.__private__.setR2L=p.setR2L=function(w){return He=w,this},p.__private__.getR2L=p.getR2L=function(){return He};var Qe,st=p.__private__.setZoomMode=function(w){var q=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(w))Be=w;else if(isNaN(w)){if(q.indexOf(w)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+w+'" is not recognized.');Be=w}else Be=parseInt(w,10)};p.__private__.getZoomMode=function(){return Be};var tt,lt=p.__private__.setPageMode=function(w){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(w)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+w+'" is not recognized.');Qe=w};p.__private__.getPageMode=function(){return Qe};var ht=p.__private__.setLayoutMode=function(w){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(w)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+w+'" is not recognized.');tt=w};p.__private__.getLayoutMode=function(){return tt},p.__private__.setDisplayMode=p.setDisplayMode=function(w,q,se){return st(w),ht(q),lt(se),this};var ot={title:"",subject:"",author:"",keywords:"",creator:""};p.__private__.getDocumentProperty=function(w){if(Object.keys(ot).indexOf(w)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return ot[w]},p.__private__.getDocumentProperties=function(){return ot},p.__private__.setDocumentProperties=p.setProperties=p.setDocumentProperties=function(w){for(var q in ot)ot.hasOwnProperty(q)&&w[q]&&(ot[q]=w[q]);return this},p.__private__.setDocumentProperty=function(w,q){if(Object.keys(ot).indexOf(w)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return ot[w]=q};var at,$e,Lt,vt,sn,At={},Bt={},Hr=[],It={},ui={},Ut={},Hn={},xn=null,Rt=0,it=[],Et=new Cw(p),Lr=t.hotfixes||[],Yt={},fn={},ci=[],Ze=function w(q,se,ce,ge,Ie,Oe){if(!(this instanceof w))return new w(q,se,ce,ge,Ie,Oe);isNaN(q)&&(q=1),isNaN(se)&&(se=0),isNaN(ce)&&(ce=0),isNaN(ge)&&(ge=1),isNaN(Ie)&&(Ie=0),isNaN(Oe)&&(Oe=0),this._matrix=[q,se,ce,ge,Ie,Oe]};Object.defineProperty(Ze.prototype,"sx",{get:function(){return this._matrix[0]},set:function(w){this._matrix[0]=w}}),Object.defineProperty(Ze.prototype,"shy",{get:function(){return this._matrix[1]},set:function(w){this._matrix[1]=w}}),Object.defineProperty(Ze.prototype,"shx",{get:function(){return this._matrix[2]},set:function(w){this._matrix[2]=w}}),Object.defineProperty(Ze.prototype,"sy",{get:function(){return this._matrix[3]},set:function(w){this._matrix[3]=w}}),Object.defineProperty(Ze.prototype,"tx",{get:function(){return this._matrix[4]},set:function(w){this._matrix[4]=w}}),Object.defineProperty(Ze.prototype,"ty",{get:function(){return this._matrix[5]},set:function(w){this._matrix[5]=w}}),Object.defineProperty(Ze.prototype,"a",{get:function(){return this._matrix[0]},set:function(w){this._matrix[0]=w}}),Object.defineProperty(Ze.prototype,"b",{get:function(){return this._matrix[1]},set:function(w){this._matrix[1]=w}}),Object.defineProperty(Ze.prototype,"c",{get:function(){return this._matrix[2]},set:function(w){this._matrix[2]=w}}),Object.defineProperty(Ze.prototype,"d",{get:function(){return this._matrix[3]},set:function(w){this._matrix[3]=w}}),Object.defineProperty(Ze.prototype,"e",{get:function(){return this._matrix[4]},set:function(w){this._matrix[4]=w}}),Object.defineProperty(Ze.prototype,"f",{get:function(){return this._matrix[5]},set:function(w){this._matrix[5]=w}}),Object.defineProperty(Ze.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Ze.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Ze.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Ze.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Ze.prototype.join=function(w){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(L).join(w)},Ze.prototype.multiply=function(w){var q=w.sx*this.sx+w.shy*this.shx,se=w.sx*this.shy+w.shy*this.sy,ce=w.shx*this.sx+w.sy*this.shx,ge=w.shx*this.shy+w.sy*this.sy,Ie=w.tx*this.sx+w.ty*this.shx+this.tx,Oe=w.tx*this.shy+w.ty*this.sy+this.ty;return new Ze(q,se,ce,ge,Ie,Oe)},Ze.prototype.decompose=function(){var w=this.sx,q=this.shy,se=this.shx,ce=this.sy,ge=this.tx,Ie=this.ty,Oe=Math.sqrt(w*w+q*q),Ge=(w/=Oe)*se+(q/=Oe)*ce;se-=w*Ge,ce-=q*Ge;var d=Math.sqrt(se*se+ce*ce);return Ge/=d,w*(ce/=d)<q*(se/=d)&&(w=-w,q=-q,Ge=-Ge,Oe=-Oe),{scale:new Ze(Oe,0,0,d,0,0),translate:new Ze(1,0,0,1,ge,Ie),rotate:new Ze(w,q,-q,w,0,0),skew:new Ze(1,0,Ge,1,0,0)}},Ze.prototype.toString=function(w){return this.join(" ")},Ze.prototype.inversed=function(){var w=this.sx,q=this.shy,se=this.shx,ce=this.sy,ge=this.tx,Ie=this.ty,Oe=1/(w*ce-q*se),Ge=ce*Oe,d=-q*Oe,k=-se*Oe,D=w*Oe;return new Ze(Ge,d,k,D,-Ge*ge-k*Ie,-d*ge-D*Ie)},Ze.prototype.applyToPoint=function(w){var q=w.x*this.sx+w.y*this.shx+this.tx,se=w.x*this.shy+w.y*this.sy+this.ty;return new oo(q,se)},Ze.prototype.applyToRectangle=function(w){var q=this.applyToPoint(w),se=this.applyToPoint(new oo(w.x+w.w,w.y+w.h));return new Jo(q.x,q.y,se.x-q.x,se.y-q.y)},Ze.prototype.clone=function(){var w=this.sx,q=this.shy,se=this.shx,ce=this.sy,ge=this.tx,Ie=this.ty;return new Ze(w,q,se,ce,ge,Ie)},p.Matrix=Ze;var Wr=p.matrixMult=function(w,q){return q.multiply(w)},gr=new Ze(1,0,0,1,0,0);p.unitMatrix=p.identityMatrix=gr;var Mn=function(w,q){if(!ui[w]){var se=(q instanceof Cl?"Sh":"P")+(Object.keys(It).length+1).toString(10);q.id=se,ui[w]=se,It[se]=q,Et.publish("addPattern",q)}};p.ShadingPattern=Cl,p.TilingPattern=nc,p.addShadingPattern=function(w,q){return y("addShadingPattern()"),Mn(w,q),this},p.beginTilingPattern=function(w){y("beginTilingPattern()"),Zo(w.boundingBox[0],w.boundingBox[1],w.boundingBox[2]-w.boundingBox[0],w.boundingBox[3]-w.boundingBox[1],w.matrix)},p.endTilingPattern=function(w,q){y("endTilingPattern()"),q.stream=Ne[Y].join(`
`),Mn(w,q),Et.publish("endTilingPattern",q),ci.pop().restore()};var kn=p.__private__.newObject=function(){var w=Sn();return Un(w,!0),w},Sn=p.__private__.newObjectDeferred=function(){return oe++,ne[oe]=function(){return he},oe},Un=function(w,q){return q=typeof q=="boolean"&&q,ne[w]=he,q&&ae(w+" 0 obj"),w},Mo=p.__private__.newAdditionalObject=function(){var w={objId:Sn(),content:""};return Ee.push(w),w},zi=Sn(),vr=Sn(),Gr=p.__private__.decodeColorString=function(w){var q=w.split(" ");if(q.length!==2||q[1]!=="g"&&q[1]!=="G")q.length===5&&(q[4]==="k"||q[4]==="K")&&(q=[(1-q[0])*(1-q[3]),(1-q[1])*(1-q[3]),(1-q[2])*(1-q[3]),"r"]);else{var se=parseFloat(q[0]);q=[se,se,se,"r"]}for(var ce="#",ge=0;ge<3;ge++)ce+=("0"+Math.floor(255*parseFloat(q[ge])).toString(16)).slice(-2);return ce},Rr=p.__private__.encodeColorString=function(w){var q;typeof w=="string"&&(w={ch1:w});var se=w.ch1,ce=w.ch2,ge=w.ch3,Ie=w.ch4,Oe=w.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof se=="string"&&se.charAt(0)!=="#"){var Ge=new pA(se);if(Ge.ok)se=Ge.toHex();else if(!/^\d*\.?\d*$/.test(se))throw new Error('Invalid color "'+se+'" passed to jsPDF.encodeColorString.')}if(typeof se=="string"&&/^#[0-9A-Fa-f]{3}$/.test(se)&&(se="#"+se[1]+se[1]+se[2]+se[2]+se[3]+se[3]),typeof se=="string"&&/^#[0-9A-Fa-f]{6}$/.test(se)){var d=parseInt(se.substr(1),16);se=d>>16&255,ce=d>>8&255,ge=255&d}if(ce===void 0||Ie===void 0&&se===ce&&ce===ge)if(typeof se=="string")q=se+" "+Oe[0];else switch(w.precision){case 2:q=R(se/255)+" "+Oe[0];break;case 3:default:q=N(se/255)+" "+Oe[0]}else if(Ie===void 0||Gt(Ie)==="object"){if(Ie&&!isNaN(Ie.a)&&Ie.a===0)return q=["1.","1.","1.",Oe[1]].join(" ");if(typeof se=="string")q=[se,ce,ge,Oe[1]].join(" ");else switch(w.precision){case 2:q=[R(se/255),R(ce/255),R(ge/255),Oe[1]].join(" ");break;default:case 3:q=[N(se/255),N(ce/255),N(ge/255),Oe[1]].join(" ")}}else if(typeof se=="string")q=[se,ce,ge,Ie,Oe[2]].join(" ");else switch(w.precision){case 2:q=[R(se),R(ce),R(ge),R(Ie),Oe[2]].join(" ");break;case 3:default:q=[N(se),N(ce),N(ge),N(Ie),Oe[2]].join(" ")}return q},jr=p.__private__.getFilters=function(){return o},Pn=p.__private__.putStream=function(w){var q=(w=w||{}).data||"",se=w.filters||jr(),ce=w.alreadyAppliedFilters||[],ge=w.addLength1||!1,Ie=q.length,Oe=w.objectId,Ge=function(yt){return yt};if(h!==null&&Oe===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");h!==null&&(Ge=an.encryptor(Oe,0));var d={};se===!0&&(se=["FlateEncode"]);var k=w.additionalKeyValues||[],D=(d=dt.API.processDataByFilters!==void 0?dt.API.processDataByFilters(q,se):{data:q,reverseChain:[]}).reverseChain+(Array.isArray(ce)?ce.join(" "):ce.toString());if(d.data.length!==0&&(k.push({key:"Length",value:d.data.length}),ge===!0&&k.push({key:"Length1",value:Ie})),D.length!=0)if(D.split("/").length-1==1)k.push({key:"Filter",value:D});else{k.push({key:"Filter",value:"["+D+"]"});for(var J=0;J<k.length;J+=1)if(k[J].key==="DecodeParms"){for(var me=[],xe=0;xe<d.reverseChain.split("/").length-1;xe+=1)me.push("null");me.push(k[J].value),k[J].value="["+me.join(" ")+"]"}}ae("<<");for(var Fe=0;Fe<k.length;Fe++)ae("/"+k[Fe].key+" "+k[Fe].value);ae(">>"),d.data.length!==0&&(ae("stream"),ae(Ge(d.data)),ae("endstream"))},hi=p.__private__.putPage=function(w){var q=w.number,se=w.data,ce=w.objId,ge=w.contentsObjId;Un(ce,!0),ae("<</Type /Page"),ae("/Parent "+w.rootDictionaryObjId+" 0 R"),ae("/Resources "+w.resourceDictionaryObjId+" 0 R"),ae("/MediaBox ["+parseFloat(L(w.mediaBox.bottomLeftX))+" "+parseFloat(L(w.mediaBox.bottomLeftY))+" "+L(w.mediaBox.topRightX)+" "+L(w.mediaBox.topRightY)+"]"),w.cropBox!==null&&ae("/CropBox ["+L(w.cropBox.bottomLeftX)+" "+L(w.cropBox.bottomLeftY)+" "+L(w.cropBox.topRightX)+" "+L(w.cropBox.topRightY)+"]"),w.bleedBox!==null&&ae("/BleedBox ["+L(w.bleedBox.bottomLeftX)+" "+L(w.bleedBox.bottomLeftY)+" "+L(w.bleedBox.topRightX)+" "+L(w.bleedBox.topRightY)+"]"),w.trimBox!==null&&ae("/TrimBox ["+L(w.trimBox.bottomLeftX)+" "+L(w.trimBox.bottomLeftY)+" "+L(w.trimBox.topRightX)+" "+L(w.trimBox.topRightY)+"]"),w.artBox!==null&&ae("/ArtBox ["+L(w.artBox.bottomLeftX)+" "+L(w.artBox.bottomLeftY)+" "+L(w.artBox.topRightX)+" "+L(w.artBox.topRightY)+"]"),typeof w.userUnit=="number"&&w.userUnit!==1&&ae("/UserUnit "+w.userUnit),Et.publish("putPage",{objId:ce,pageContext:it[q],pageNumber:q,page:se}),ae("/Contents "+ge+" 0 R"),ae(">>"),ae("endobj");var Ie=se.join(`
`);return C===E.ADVANCED&&(Ie+=`
Q`),Un(ge,!0),Pn({data:Ie,filters:jr(),objectId:ge}),ae("endobj"),ce},vs=p.__private__.putPages=function(){var w,q,se=[];for(w=1;w<=Rt;w++)it[w].objId=Sn(),it[w].contentsObjId=Sn();for(w=1;w<=Rt;w++)se.push(hi({number:w,data:Ne[w],objId:it[w].objId,contentsObjId:it[w].contentsObjId,mediaBox:it[w].mediaBox,cropBox:it[w].cropBox,bleedBox:it[w].bleedBox,trimBox:it[w].trimBox,artBox:it[w].artBox,userUnit:it[w].userUnit,rootDictionaryObjId:zi,resourceDictionaryObjId:vr}));Un(zi,!0),ae("<</Type /Pages");var ce="/Kids [";for(q=0;q<Rt;q++)ce+=se[q]+" 0 R ";ae(ce+"]"),ae("/Count "+Rt),ae(">>"),ae("endobj"),Et.publish("postPutPages")},ys=function(w){Et.publish("putFont",{font:w,out:ae,newObject:kn,putStream:Pn}),w.isAlreadyPutted!==!0&&(w.objectNumber=kn(),ae("<<"),ae("/Type /Font"),ae("/BaseFont /"+qu(w.postScriptName)),ae("/Subtype /Type1"),typeof w.encoding=="string"&&ae("/Encoding /"+w.encoding),ae("/FirstChar 32"),ae("/LastChar 255"),ae(">>"),ae("endobj"))},_s=function(){for(var w in At)At.hasOwnProperty(w)&&(f===!1||f===!0&&m.hasOwnProperty(w))&&ys(At[w])},Xs=function(w){w.objectNumber=kn();var q=[];q.push({key:"Type",value:"/XObject"}),q.push({key:"Subtype",value:"/Form"}),q.push({key:"BBox",value:"["+[L(w.x),L(w.y),L(w.x+w.width),L(w.y+w.height)].join(" ")+"]"}),q.push({key:"Matrix",value:"["+w.matrix.toString()+"]"});var se=w.pages[1].join(`
`);Pn({data:se,additionalKeyValues:q,objectId:w.objectNumber}),ae("endobj")},Js=function(){for(var w in Yt)Yt.hasOwnProperty(w)&&Xs(Yt[w])},uu=function(w,q){var se,ce=[],ge=1/(q-1);for(se=0;se<1;se+=ge)ce.push(se);if(ce.push(1),w[0].offset!=0){var Ie={offset:0,color:w[0].color};w.unshift(Ie)}if(w[w.length-1].offset!=1){var Oe={offset:1,color:w[w.length-1].color};w.push(Oe)}for(var Ge="",d=0,k=0;k<ce.length;k++){for(se=ce[k];se>w[d+1].offset;)d++;var D=w[d].offset,J=(se-D)/(w[d+1].offset-D),me=w[d].color,xe=w[d+1].color;Ge+=H(Math.round((1-J)*me[0]+J*xe[0]).toString(16))+H(Math.round((1-J)*me[1]+J*xe[1]).toString(16))+H(Math.round((1-J)*me[2]+J*xe[2]).toString(16))}return Ge.trim()},Uo=function(w,q){q||(q=21);var se=kn(),ce=uu(w.colors,q),ge=[];ge.push({key:"FunctionType",value:"0"}),ge.push({key:"Domain",value:"[0.0 1.0]"}),ge.push({key:"Size",value:"["+q+"]"}),ge.push({key:"BitsPerSample",value:"8"}),ge.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),ge.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Pn({data:ce,additionalKeyValues:ge,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:se}),ae("endobj"),w.objectNumber=kn(),ae("<< /ShadingType "+w.type),ae("/ColorSpace /DeviceRGB");var Ie="/Coords ["+L(parseFloat(w.coords[0]))+" "+L(parseFloat(w.coords[1]))+" ";w.type===2?Ie+=L(parseFloat(w.coords[2]))+" "+L(parseFloat(w.coords[3])):Ie+=L(parseFloat(w.coords[2]))+" "+L(parseFloat(w.coords[3]))+" "+L(parseFloat(w.coords[4]))+" "+L(parseFloat(w.coords[5])),ae(Ie+="]"),w.matrix&&ae("/Matrix ["+w.matrix.toString()+"]"),ae("/Function "+se+" 0 R"),ae("/Extend [true true]"),ae(">>"),ae("endobj")},cu=function(w,q){var se=Sn(),ce=kn();q.push({resourcesOid:se,objectOid:ce}),w.objectNumber=ce;var ge=[];ge.push({key:"Type",value:"/Pattern"}),ge.push({key:"PatternType",value:"1"}),ge.push({key:"PaintType",value:"1"}),ge.push({key:"TilingType",value:"1"}),ge.push({key:"BBox",value:"["+w.boundingBox.map(L).join(" ")+"]"}),ge.push({key:"XStep",value:L(w.xStep)}),ge.push({key:"YStep",value:L(w.yStep)}),ge.push({key:"Resources",value:se+" 0 R"}),w.matrix&&ge.push({key:"Matrix",value:"["+w.matrix.toString()+"]"}),Pn({data:w.stream,additionalKeyValues:ge,objectId:w.objectNumber}),ae("endobj")},ws=function(w){var q;for(q in It)It.hasOwnProperty(q)&&(It[q]instanceof Cl?Uo(It[q]):It[q]instanceof nc&&cu(It[q],w))},bs=function(w){for(var q in w.objectNumber=kn(),ae("<<"),w)switch(q){case"opacity":ae("/ca "+R(w[q]));break;case"stroke-opacity":ae("/CA "+R(w[q]))}ae(">>"),ae("endobj")},$i=function(){var w;for(w in Ut)Ut.hasOwnProperty(w)&&bs(Ut[w])},Zs=function(){for(var w in ae("/XObject <<"),Yt)Yt.hasOwnProperty(w)&&Yt[w].objectNumber>=0&&ae("/"+w+" "+Yt[w].objectNumber+" 0 R");Et.publish("putXobjectDict"),ae(">>")},Kc=function(){an.oid=kn(),ae("<<"),ae("/Filter /Standard"),ae("/V "+an.v),ae("/R "+an.r),ae("/U <"+an.toHexString(an.U)+">"),ae("/O <"+an.toHexString(an.O)+">"),ae("/P "+an.P),ae(">>"),ae("endobj")},ol=function(){for(var w in ae("/Font <<"),At)At.hasOwnProperty(w)&&(f===!1||f===!0&&m.hasOwnProperty(w))&&ae("/"+w+" "+At[w].objectNumber+" 0 R");ae(">>")},hu=function(){if(Object.keys(It).length>0){for(var w in ae("/Shading <<"),It)It.hasOwnProperty(w)&&It[w]instanceof Cl&&It[w].objectNumber>=0&&ae("/"+w+" "+It[w].objectNumber+" 0 R");Et.publish("putShadingPatternDict"),ae(">>")}},eo=function(w){if(Object.keys(It).length>0){for(var q in ae("/Pattern <<"),It)It.hasOwnProperty(q)&&It[q]instanceof p.TilingPattern&&It[q].objectNumber>=0&&It[q].objectNumber<w&&ae("/"+q+" "+It[q].objectNumber+" 0 R");Et.publish("putTilingPatternDict"),ae(">>")}},al=function(){if(Object.keys(Ut).length>0){var w;for(w in ae("/ExtGState <<"),Ut)Ut.hasOwnProperty(w)&&Ut[w].objectNumber>=0&&ae("/"+w+" "+Ut[w].objectNumber+" 0 R");Et.publish("putGStateDict"),ae(">>")}},on=function(w){Un(w.resourcesOid,!0),ae("<<"),ae("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),ol(),hu(),eo(w.objectOid),al(),Zs(),ae(">>"),ae("endobj")},ll=function(){var w=[];_s(),$i(),Js(),ws(w),Et.publish("putResources"),w.forEach(on),on({resourcesOid:vr,objectOid:Number.MAX_SAFE_INTEGER}),Et.publish("postPutResources")},ul=function(){Et.publish("putAdditionalObjects");for(var w=0;w<Ee.length;w++){var q=Ee[w];Un(q.objId,!0),ae(q.content),ae("endobj")}Et.publish("postPutAdditionalObjects")},du=function(w){Bt[w.fontName]=Bt[w.fontName]||{},Bt[w.fontName][w.fontStyle]=w.id},cl=function(w,q,se,ce,ge){var Ie={id:"F"+(Object.keys(At).length+1).toString(10),postScriptName:w,fontName:q,fontStyle:se,encoding:ce,isStandardFont:ge||!1,metadata:{}};return Et.publish("addFont",{font:Ie,instance:this}),At[Ie.id]=Ie,du(Ie),Ie.id},fu=function(w){for(var q=0,se=Te.length;q<se;q++){var ce=cl.call(this,w[q][0],w[q][1],w[q][2],Te[q][3],!0);f===!1&&(m[ce]=!0);var ge=w[q][0].split("-");du({id:ce,fontName:ge[0],fontStyle:ge[1]||""})}Et.publish("addFonts",{fonts:At,dictionary:Bt})},Kr=function(w){return w.foo=function(){try{return w.apply(this,arguments)}catch(ce){var q=ce.stack||"";~q.indexOf(" at ")&&(q=q.split(" at ")[1]);var se="Error in function "+q.split(`
`)[0].split("<")[0]+": "+ce.message;if(!ft.console)throw new Error(se);ft.console.error(se,ce),ft.alert&&alert(se)}},w.foo.bar=w,w.foo},Vo=function(w,q){var se,ce,ge,Ie,Oe,Ge,d,k,D;if(ge=(q=q||{}).sourceEncoding||"Unicode",Oe=q.outputEncoding,(q.autoencode||Oe)&&At[at].metadata&&At[at].metadata[ge]&&At[at].metadata[ge].encoding&&(Ie=At[at].metadata[ge].encoding,!Oe&&At[at].encoding&&(Oe=At[at].encoding),!Oe&&Ie.codePages&&(Oe=Ie.codePages[0]),typeof Oe=="string"&&(Oe=Ie[Oe]),Oe)){for(d=!1,Ge=[],se=0,ce=w.length;se<ce;se++)(k=Oe[w.charCodeAt(se)])?Ge.push(String.fromCharCode(k)):Ge.push(w[se]),Ge[se].charCodeAt(0)>>8&&(d=!0);w=Ge.join("")}for(se=w.length;d===void 0&&se!==0;)w.charCodeAt(se-1)>>8&&(d=!0),se--;if(!d)return w;for(Ge=q.noBOM?[]:[254,255],se=0,ce=w.length;se<ce;se++){if((D=(k=w.charCodeAt(se))>>8)>>8)throw new Error("Character at position "+se+" of string '"+w+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Ge.push(D),Ge.push(k-(D<<8))}return String.fromCharCode.apply(void 0,Ge)},An=p.__private__.pdfEscape=p.pdfEscape=function(w,q){return Vo(w,q).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Dr=p.__private__.beginPage=function(w){Ne[++Rt]=[],it[Rt]={objId:0,contentsObjId:0,userUnit:Number(a),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(w[0]),topRightY:Number(w[1])}},hl(Rt),Se(Ne[Y])},to=function(w,q){var se,ce,ge;switch(n=q||n,typeof w=="string"&&(se=_(w.toLowerCase()),Array.isArray(se)&&(ce=se[0],ge=se[1])),Array.isArray(w)&&(ce=w[0]*$e,ge=w[1]*$e),isNaN(ce)&&(ce=i[0],ge=i[1]),(ce>14400||ge>14400)&&(en.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),ce=Math.min(14400,ce),ge=Math.min(14400,ge)),i=[ce,ge],n.substr(0,1)){case"l":ge>ce&&(i=[ge,ce]);break;case"p":ce>ge&&(i=[ge,ce])}Dr(i),gl(ml),ae(ir),_l!==0&&ae(_l+" J"),Xo!==0&&ae(Xo+" j"),Et.publish("addPage",{pageNumber:Rt})},Bo=function(w){w>0&&w<=Rt&&(Ne.splice(w,1),it.splice(w,1),Rt--,Y>Rt&&(Y=Rt),this.setPage(Y))},hl=function(w){w>0&&w<=Rt&&(Y=w)},$t=p.__private__.getNumberOfPages=p.getNumberOfPages=function(){return Ne.length-1},no=function(w,q,se){var ce,ge=void 0;return se=se||{},w=w!==void 0?w:At[at].fontName,q=q!==void 0?q:At[at].fontStyle,ce=w.toLowerCase(),Bt[ce]!==void 0&&Bt[ce][q]!==void 0?ge=Bt[ce][q]:Bt[w]!==void 0&&Bt[w][q]!==void 0?ge=Bt[w][q]:se.disableWarning===!1&&en.warn("Unable to look up font label for font '"+w+"', '"+q+"'. Refer to getFontList() for available fonts."),ge||se.noFallback||(ge=Bt.times[q])==null&&(ge=Bt.times.normal),ge},ro=p.__private__.putInfo=function(){var w=kn(),q=function(ce){return ce};for(var se in h!==null&&(q=an.encryptor(w,0)),ae("<<"),ae("/Producer ("+An(q("jsPDF "+dt.version))+")"),ot)ot.hasOwnProperty(se)&&ot[se]&&ae("/"+se.substr(0,1).toUpperCase()+se.substr(1)+" ("+An(q(ot[se]))+")");ae("/CreationDate ("+An(q(Q))+")"),ae(">>"),ae("endobj")},Hi=p.__private__.putCatalog=function(w){var q=(w=w||{}).rootDictionaryObjId||zi;switch(kn(),ae("<<"),ae("/Type /Catalog"),ae("/Pages "+q+" 0 R"),Be||(Be="fullwidth"),Be){case"fullwidth":ae("/OpenAction [3 0 R /FitH null]");break;case"fullheight":ae("/OpenAction [3 0 R /FitV null]");break;case"fullpage":ae("/OpenAction [3 0 R /Fit]");break;case"original":ae("/OpenAction [3 0 R /XYZ null null 1]");break;default:var se=""+Be;se.substr(se.length-1)==="%"&&(Be=parseInt(Be)/100),typeof Be=="number"&&ae("/OpenAction [3 0 R /XYZ null null "+R(Be)+"]")}switch(tt||(tt="continuous"),tt){case"continuous":ae("/PageLayout /OneColumn");break;case"single":ae("/PageLayout /SinglePage");break;case"two":case"twoleft":ae("/PageLayout /TwoColumnLeft");break;case"tworight":ae("/PageLayout /TwoColumnRight")}Qe&&ae("/PageMode /"+Qe),Et.publish("putCatalog"),ae(">>"),ae("endobj")},Qc=p.__private__.putTrailer=function(){ae("trailer"),ae("<<"),ae("/Size "+(oe+1)),ae("/Root "+oe+" 0 R"),ae("/Info "+(oe-1)+" 0 R"),h!==null&&ae("/Encrypt "+an.oid+" 0 R"),ae("/ID [ <"+F+"> <"+F+"> ]"),ae(">>")},pu=p.__private__.putHeader=function(){ae("%PDF-"+b),ae("%")},Yc=p.__private__.putXRef=function(){var w="0000000000";ae("xref"),ae("0 "+(oe+1)),ae("0000000000 65535 f ");for(var q=1;q<=oe;q++)typeof ne[q]=="function"?ae((w+ne[q]()).slice(-10)+" 00000 n "):ne[q]!==void 0?ae((w+ne[q]).slice(-10)+" 00000 n "):ae("0000000000 00000 n ")},Wi=p.__private__.buildDocument=function(){Ye(),Se(ue),Et.publish("buildDocument"),pu(),vs(),ul(),ll(),h!==null&&Kc(),ro(),Hi();var w=he;return Yc(),Qc(),ae("startxref"),ae(""+w),ae("%%EOF"),Se(Ne[Y]),ue.join(`
`)},qo=p.__private__.getBlob=function(w){return new Blob([Re(w)],{type:"application/pdf"})},zo=p.output=p.__private__.output=Kr(function(w,q){switch(typeof(q=q||{})=="string"?q={filename:q}:q.filename=q.filename||"generated.pdf",w){case void 0:return Wi();case"save":p.save(q.filename);break;case"arraybuffer":return Re(Wi());case"blob":return qo(Wi());case"bloburi":case"bloburl":if(ft.URL!==void 0&&typeof ft.URL.createObjectURL=="function")return ft.URL&&ft.URL.createObjectURL(qo(Wi()))||void 0;en.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var se="",ce=Wi();try{se=n2(ce)}catch{se=n2(unescape(encodeURIComponent(ce)))}return"data:application/pdf;filename="+q.filename+";base64,"+se;case"pdfobjectnewwindow":if(Object.prototype.toString.call(ft)==="[object Window]"){var ge="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Ie=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';q.pdfObjectUrl&&(ge=q.pdfObjectUrl,Ie="");var Oe='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+ge+'"'+Ie+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(q)+");<\/script></body></html>",Ge=ft.open();return Ge!==null&&Ge.document.write(Oe),Ge}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(ft)==="[object Window]"){var d='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(q.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+q.filename+'" width="500px" height="400px" /></body></html>',k=ft.open();if(k!==null){k.document.write(d);var D=this;k.document.documentElement.querySelector("#pdfViewer").onload=function(){k.document.title=q.filename,k.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(D.output("bloburl"))}}return k}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(ft)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var J='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",q)+'"></iframe></body></html>',me=ft.open();if(me!==null&&(me.document.write(J),me.document.title=q.filename),me||typeof safari>"u")return me;break;case"datauri":case"dataurl":return ft.document.location.href=this.output("datauristring",q);default:return null}}),xs=function(w){return Array.isArray(Lr)===!0&&Lr.indexOf(w)>-1};switch(r){case"pt":$e=1;break;case"mm":$e=72/25.4;break;case"cm":$e=72/2.54;break;case"in":$e=72;break;case"px":$e=xs("px_scaling")==1?.75:96/72;break;case"pc":case"em":$e=12;break;case"ex":$e=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);$e=r}var an=null;be(),G();var mu=function(w){return h!==null?an.encryptor(w,0):function(q){return q}},dl=p.__private__.getPageInfo=p.getPageInfo=function(w){if(isNaN(w)||w%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:it[w].objId,pageNumber:w,pageContext:it[w]}},pt=p.__private__.getPageInfoByObjId=function(w){if(isNaN(w)||w%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var q in it)if(it[q].objId===w)break;return dl(q)},Ss=p.__private__.getCurrentPageInfo=p.getCurrentPageInfo=function(){return{objId:it[Y].objId,pageNumber:Y,pageContext:it[Y]}};p.addPage=function(){return to.apply(this,arguments),this},p.setPage=function(){return hl.apply(this,arguments),Se.call(this,Ne[Y]),this},p.insertPage=function(w){return this.addPage(),this.movePage(Y,w),this},p.movePage=function(w,q){var se,ce;if(w>q){se=Ne[w],ce=it[w];for(var ge=w;ge>q;ge--)Ne[ge]=Ne[ge-1],it[ge]=it[ge-1];Ne[q]=se,it[q]=ce,this.setPage(q)}else if(w<q){se=Ne[w],ce=it[w];for(var Ie=w;Ie<q;Ie++)Ne[Ie]=Ne[Ie+1],it[Ie]=it[Ie+1];Ne[q]=se,it[q]=ce,this.setPage(q)}return this},p.deletePage=function(){return Bo.apply(this,arguments),this},p.__private__.text=p.text=function(w,q,se,ce,ge){var Ie,Oe,Ge,d,k,D,J,me,xe,Fe=(ce=ce||{}).scope||this;if(typeof w=="number"&&typeof q=="number"&&(typeof se=="string"||Array.isArray(se))){var yt=se;se=q,q=w,w=yt}if(arguments[3]instanceof Ze?(y("The transform parameter of text() with a Matrix value"),xe=ge):(Ge=arguments[4],d=arguments[5],Gt(J=arguments[3])==="object"&&J!==null||(typeof Ge=="string"&&(d=Ge,Ge=null),typeof J=="string"&&(d=J,J=null),typeof J=="number"&&(Ge=J,J=null),ce={flags:J,angle:Ge,align:d})),isNaN(q)||isNaN(se)||w==null)throw new Error("Invalid arguments passed to jsPDF.text");if(w.length===0)return Fe;var kt="",_t=!1,zt=typeof ce.lineHeightFactor=="number"?ce.lineHeightFactor:qt,Jt=Fe.internal.scaleFactor;function Xi(tn){return tn=tn.split("	").join(Array(ce.TabLen||9).join(" ")),An(tn,J)}function sr(tn){for(var nn,Ln=tn.concat(),Gn=[],ho=Ln.length;ho--;)typeof(nn=Ln.shift())=="string"?Gn.push(nn):Array.isArray(tn)&&(nn.length===1||nn[1]===void 0&&nn[2]===void 0)?Gn.push(nn[0]):Gn.push([nn[0],nn[1],nn[2]]);return Gn}function Is(tn,nn){var Ln;if(typeof tn=="string")Ln=nn(tn)[0];else if(Array.isArray(tn)){for(var Gn,ho,sh=tn.concat(),Tu=[],Qd=sh.length;Qd--;)typeof(Gn=sh.shift())=="string"?Tu.push(nn(Gn)[0]):Array.isArray(Gn)&&typeof Gn[0]=="string"&&(ho=nn(Gn[0],Gn[1],Gn[2]),Tu.push([ho[0],ho[1],ho[2]]));Ln=Tu}return Ln}var Ts=!1,Jc=!0;if(typeof w=="string")Ts=!0;else if(Array.isArray(w)){var Zc=w.concat();Oe=[];for(var wu,or=Zc.length;or--;)(typeof(wu=Zc.shift())!="string"||Array.isArray(wu)&&typeof wu[0]!="string")&&(Jc=!1);Ts=Jc}if(Ts===!1)throw new Error('Type of text must be string or Array. "'+w+'" is not recognized.');typeof w=="string"&&(w=w.match(/[\r?\n]/)?w.split(/\r\n|\r|\n/g):[w]);var bu=Me/Fe.internal.scaleFactor,xu=bu*(zt-1);switch(ce.baseline){case"bottom":se-=xu;break;case"top":se+=bu-xu;break;case"hanging":se+=bu-2*xu;break;case"middle":se+=bu/2-xu}if((D=ce.maxWidth||0)>0&&(typeof w=="string"?w=Fe.splitTextToSize(w,D):Object.prototype.toString.call(w)==="[object Array]"&&(w=w.reduce(function(tn,nn){return tn.concat(Fe.splitTextToSize(nn,D))},[]))),Ie={text:w,x:q,y:se,options:ce,mutex:{pdfEscape:An,activeFontKey:at,fonts:At,activeFontSize:Me}},Et.publish("preProcessText",Ie),w=Ie.text,Ge=(ce=Ie.options).angle,!(xe instanceof Ze)&&Ge&&typeof Ge=="number"){Ge*=Math.PI/180,ce.rotationDirection===0&&(Ge=-Ge),C===E.ADVANCED&&(Ge=-Ge);var Su=Math.cos(Ge),eh=Math.sin(Ge);xe=new Ze(Su,eh,-eh,Su,0,0)}else Ge&&Ge instanceof Ze&&(xe=Ge);C!==E.ADVANCED||xe||(xe=gr),(k=ce.charSpace||so)!==void 0&&(kt+=L(T(k))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(me=ce.horizontalScale)!==void 0&&(kt+=L(100*me)+` Tz
`),ce.lang;var Qr=-1,cg=ce.renderingMode!==void 0?ce.renderingMode:ce.stroke,th=Fe.internal.getCurrentPageInfo().pageContext;switch(cg){case 0:case!1:case"fill":Qr=0;break;case 1:case!0:case"stroke":Qr=1;break;case 2:case"fillThenStroke":Qr=2;break;case 3:case"invisible":Qr=3;break;case 4:case"fillAndAddForClipping":Qr=4;break;case 5:case"strokeAndAddPathForClipping":Qr=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Qr=6;break;case 7:case"addToPathForClipping":Qr=7}var Hd=th.usedRenderingMode!==void 0?th.usedRenderingMode:-1;Qr!==-1?kt+=Qr+` Tr
`:Hd!==-1&&(kt+=`0 Tr
`),Qr!==-1&&(th.usedRenderingMode=Qr),d=ce.align||"left";var Ti,Au=Me*zt,Wd=Fe.internal.pageSize.getWidth(),Gd=At[at];k=ce.charSpace||so,D=ce.maxWidth||0,J=Object.assign({autoencode:!0,noBOM:!0},ce.flags);var na=[],wl=function(tn){return Fe.getStringUnitWidth(tn,{font:Gd,charSpace:k,fontSize:Me,doKerning:!1})*Me/Jt};if(Object.prototype.toString.call(w)==="[object Array]"){var Yr;Oe=sr(w),d!=="left"&&(Ti=Oe.map(wl));var Or,ra=0;if(d==="right"){q-=Ti[0],w=[],or=Oe.length;for(var lo=0;lo<or;lo++)lo===0?(Or=pi(q),Yr=Wn(se)):(Or=T(ra-Ti[lo]),Yr=-Au),w.push([Oe[lo],Or,Yr]),ra=Ti[lo]}else if(d==="center"){q-=Ti[0]/2,w=[],or=Oe.length;for(var uo=0;uo<or;uo++)uo===0?(Or=pi(q),Yr=Wn(se)):(Or=T((ra-Ti[uo])/2),Yr=-Au),w.push([Oe[uo],Or,Yr]),ra=Ti[uo]}else if(d==="left"){w=[],or=Oe.length;for(var Eu=0;Eu<or;Eu++)w.push(Oe[Eu])}else if(d==="justify"&&Gd.encoding==="Identity-H"){w=[],or=Oe.length,D=D!==0?D:Wd;for(var co=0,Cn=0;Cn<or;Cn++)if(Yr=Cn===0?Wn(se):-Au,Or=Cn===0?pi(q):co,Cn<or-1){var nh=T((D-Ti[Cn])/(Oe[Cn].split(" ").length-1)),Fr=Oe[Cn].split(" ");w.push([Fr[0]+" ",Or,Yr]),co=0;for(var ki=1;ki<Fr.length;ki++){var Nu=(wl(Fr[ki-1]+" "+Fr[ki])-wl(Fr[ki]))*Jt+nh;ki==Fr.length-1?w.push([Fr[ki],Nu,0]):w.push([Fr[ki]+" ",Nu,0]),co-=Nu}}else w.push([Oe[Cn],Or,Yr]);w.push(["",co,0])}else{if(d!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(w=[],or=Oe.length,D=D!==0?D:Wd,Cn=0;Cn<or;Cn++)Yr=Cn===0?Wn(se):-Au,Or=Cn===0?pi(q):0,Cn<or-1?na.push(L(T((D-Ti[Cn])/(Oe[Cn].split(" ").length-1)))):na.push(0),w.push([Oe[Cn],Or,Yr])}}var Kd=typeof ce.R2L=="boolean"?ce.R2L:He;Kd===!0&&(w=Is(w,function(tn,nn,Ln){return[tn.split("").reverse().join(""),nn,Ln]})),Ie={text:w,x:q,y:se,options:ce,mutex:{pdfEscape:An,activeFontKey:at,fonts:At,activeFontSize:Me}},Et.publish("postProcessText",Ie),w=Ie.text,_t=Ie.mutex.isHex||!1;var rh=At[at].encoding;rh!=="WinAnsiEncoding"&&rh!=="StandardEncoding"||(w=Is(w,function(tn,nn,Ln){return[Xi(tn),nn,Ln]})),Oe=sr(w),w=[];for(var bl,xl,ia,Sl=0,Iu=1,Al=Array.isArray(Oe[0])?Iu:Sl,sa="",ih=function(tn,nn,Ln){var Gn="";return Ln instanceof Ze?(Ln=typeof ce.angle=="number"?Wr(Ln,new Ze(1,0,0,1,tn,nn)):Wr(new Ze(1,0,0,1,tn,nn),Ln),C===E.ADVANCED&&(Ln=Wr(new Ze(1,0,0,-1,0,0),Ln)),Gn=Ln.join(" ")+` Tm
`):Gn=L(tn)+" "+L(nn)+` Td
`,Gn},Pi=0;Pi<Oe.length;Pi++){switch(sa="",Al){case Iu:ia=(_t?"<":"(")+Oe[Pi][0]+(_t?">":")"),bl=parseFloat(Oe[Pi][1]),xl=parseFloat(Oe[Pi][2]);break;case Sl:ia=(_t?"<":"(")+Oe[Pi]+(_t?">":")"),bl=pi(q),xl=Wn(se)}na!==void 0&&na[Pi]!==void 0&&(sa=na[Pi]+` Tw
`),Pi===0?w.push(sa+ih(bl,xl,xe)+ia):Al===Sl?w.push(sa+ia):Al===Iu&&w.push(sa+ih(bl,xl,xe)+ia)}w=Al===Sl?w.join(` Tj
T* `):w.join(` Tj
`),w+=` Tj
`;var Ci=`BT
/`;return Ci+=at+" "+Me+` Tf
`,Ci+=L(Me*zt)+` TL
`,Ci+=Qi+`
`,Ci+=kt,Ci+=w,ae(Ci+="ET"),m[at]=!0,Fe};var Xc=p.__private__.clip=p.clip=function(w){return ae(w==="evenodd"?"W*":"W"),this};p.clipEvenOdd=function(){return Xc("evenodd")},p.__private__.discardPath=p.discardPath=function(){return ae("n"),this};var Ii=p.__private__.isValidStyle=function(w){var q=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(w)!==-1&&(q=!0),q};p.__private__.setDefaultPathOperation=p.setDefaultPathOperation=function(w){return Ii(w)&&(u=w),this};var gu=p.__private__.getStyle=p.getStyle=function(w){var q=u;switch(w){case"D":case"S":q="S";break;case"F":q="f";break;case"FD":case"DF":q="B";break;case"f":case"f*":case"B":case"B*":q=w}return q},di=p.close=function(){return ae("h"),this};p.stroke=function(){return ae("S"),this},p.fill=function(w){return $o("f",w),this},p.fillEvenOdd=function(w){return $o("f*",w),this},p.fillStroke=function(w){return $o("B",w),this},p.fillStrokeEvenOdd=function(w){return $o("B*",w),this};var $o=function(w,q){Gt(q)==="object"?Wo(q,w):ae(w)},fl=function(w){w===null||C===E.ADVANCED&&w===void 0||(w=gu(w),ae(w))};function Ho(w,q,se,ce,ge){var Ie=new nc(q||this.boundingBox,se||this.xStep,ce||this.yStep,this.gState,ge||this.matrix);Ie.stream=this.stream;var Oe=w+"$$"+this.cloneIndex+++"$$";return Mn(Oe,Ie),Ie}var Wo=function(w,q){var se=ui[w.key],ce=It[se];if(ce instanceof Cl)ae("q"),ae(vu(q)),ce.gState&&p.setGState(ce.gState),ae(w.matrix.toString()+" cm"),ae("/"+se+" sh"),ae("Q");else if(ce instanceof nc){var ge=new Ze(1,0,0,-1,0,yr());w.matrix&&(ge=ge.multiply(w.matrix||gr),se=Ho.call(ce,w.key,w.boundingBox,w.xStep,w.yStep,ge).id),ae("q"),ae("/Pattern cs"),ae("/"+se+" scn"),ce.gState&&p.setGState(ce.gState),ae(q),ae("Q")}},vu=function(w){switch(w){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},Gi=p.moveTo=function(w,q){return ae(L(T(w))+" "+L(U(q))+" m"),this},fi=p.lineTo=function(w,q){return ae(L(T(w))+" "+L(U(q))+" l"),this},Ki=p.curveTo=function(w,q,se,ce,ge,Ie){return ae([L(T(w)),L(U(q)),L(T(se)),L(U(ce)),L(T(ge)),L(U(Ie)),"c"].join(" ")),this};p.__private__.line=p.line=function(w,q,se,ce,ge){if(isNaN(w)||isNaN(q)||isNaN(se)||isNaN(ce)||!Ii(ge))throw new Error("Invalid arguments passed to jsPDF.line");return C===E.COMPAT?this.lines([[se-w,ce-q]],w,q,[1,1],ge||"S"):this.lines([[se-w,ce-q]],w,q,[1,1]).stroke()},p.__private__.lines=p.lines=function(w,q,se,ce,ge,Ie){var Oe,Ge,d,k,D,J,me,xe,Fe,yt,kt,_t;if(typeof w=="number"&&(_t=se,se=q,q=w,w=_t),ce=ce||[1,1],Ie=Ie||!1,isNaN(q)||isNaN(se)||!Array.isArray(w)||!Array.isArray(ce)||!Ii(ge)||typeof Ie!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Gi(q,se),Oe=ce[0],Ge=ce[1],k=w.length,yt=q,kt=se,d=0;d<k;d++)(D=w[d]).length===2?(yt=D[0]*Oe+yt,kt=D[1]*Ge+kt,fi(yt,kt)):(J=D[0]*Oe+yt,me=D[1]*Ge+kt,xe=D[2]*Oe+yt,Fe=D[3]*Ge+kt,yt=D[4]*Oe+yt,kt=D[5]*Ge+kt,Ki(J,me,xe,Fe,yt,kt));return Ie&&di(),fl(ge),this},p.path=function(w){for(var q=0;q<w.length;q++){var se=w[q],ce=se.c;switch(se.op){case"m":Gi(ce[0],ce[1]);break;case"l":fi(ce[0],ce[1]);break;case"c":Ki.apply(this,ce);break;case"h":di()}}return this},p.__private__.rect=p.rect=function(w,q,se,ce,ge){if(isNaN(w)||isNaN(q)||isNaN(se)||isNaN(ce)||!Ii(ge))throw new Error("Invalid arguments passed to jsPDF.rect");return C===E.COMPAT&&(ce=-ce),ae([L(T(w)),L(U(q)),L(T(se)),L(T(ce)),"re"].join(" ")),fl(ge),this},p.__private__.triangle=p.triangle=function(w,q,se,ce,ge,Ie,Oe){if(isNaN(w)||isNaN(q)||isNaN(se)||isNaN(ce)||isNaN(ge)||isNaN(Ie)||!Ii(Oe))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[se-w,ce-q],[ge-se,Ie-ce],[w-ge,q-Ie]],w,q,[1,1],Oe,!0),this},p.__private__.roundedRect=p.roundedRect=function(w,q,se,ce,ge,Ie,Oe){if(isNaN(w)||isNaN(q)||isNaN(se)||isNaN(ce)||isNaN(ge)||isNaN(Ie)||!Ii(Oe))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Ge=4/3*(Math.SQRT2-1);return ge=Math.min(ge,.5*se),Ie=Math.min(Ie,.5*ce),this.lines([[se-2*ge,0],[ge*Ge,0,ge,Ie-Ie*Ge,ge,Ie],[0,ce-2*Ie],[0,Ie*Ge,-ge*Ge,Ie,-ge,Ie],[2*ge-se,0],[-ge*Ge,0,-ge,-Ie*Ge,-ge,-Ie],[0,2*Ie-ce],[0,-Ie*Ge,ge*Ge,-Ie,ge,-Ie]],w+ge,q,[1,1],Oe,!0),this},p.__private__.ellipse=p.ellipse=function(w,q,se,ce,ge){if(isNaN(w)||isNaN(q)||isNaN(se)||isNaN(ce)||!Ii(ge))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Ie=4/3*(Math.SQRT2-1)*se,Oe=4/3*(Math.SQRT2-1)*ce;return Gi(w+se,q),Ki(w+se,q-Oe,w+Ie,q-ce,w,q-ce),Ki(w-Ie,q-ce,w-se,q-Oe,w-se,q),Ki(w-se,q+Oe,w-Ie,q+ce,w,q+ce),Ki(w+Ie,q+ce,w+se,q+Oe,w+se,q),fl(ge),this},p.__private__.circle=p.circle=function(w,q,se,ce){if(isNaN(w)||isNaN(q)||isNaN(se)||!Ii(ce))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(w,q,se,se,ce)},p.setFont=function(w,q,se){return se&&(q=B(q,se)),at=no(w,q,{disableWarning:!1}),this};var pl=p.__private__.getFont=p.getFont=function(){return At[no.apply(p,arguments)]};p.__private__.getFontList=p.getFontList=function(){var w,q,se={};for(w in Bt)if(Bt.hasOwnProperty(w))for(q in se[w]=[],Bt[w])Bt[w].hasOwnProperty(q)&&se[w].push(q);return se},p.addFont=function(w,q,se,ce,ge){var Ie=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Ie.indexOf(arguments[3])!==-1?ge=arguments[3]:arguments[3]&&Ie.indexOf(arguments[3])==-1&&(se=B(se,ce)),ge=ge||"Identity-H",cl.call(this,w,q,se,ge)};var qt,ml=t.lineWidth||.200025,Go=p.__private__.getLineWidth=p.getLineWidth=function(){return ml},gl=p.__private__.setLineWidth=p.setLineWidth=function(w){return ml=w,ae(L(T(w))+" w"),this};p.__private__.setLineDash=dt.API.setLineDash=dt.API.setLineDashPattern=function(w,q){if(w=w||[],q=q||0,isNaN(q)||!Array.isArray(w))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return w=w.map(function(se){return L(T(se))}).join(" "),q=L(T(q)),ae("["+w+"] "+q+" d"),this};var vl=p.__private__.getLineHeight=p.getLineHeight=function(){return Me*qt};p.__private__.getLineHeight=p.getLineHeight=function(){return Me*qt};var yl=p.__private__.setLineHeightFactor=p.setLineHeightFactor=function(w){return typeof(w=w||1.15)=="number"&&(qt=w),this},io=p.__private__.getLineHeightFactor=p.getLineHeightFactor=function(){return qt};yl(t.lineHeight);var pi=p.__private__.getHorizontalCoordinate=function(w){return T(w)},Wn=p.__private__.getVerticalCoordinate=function(w){return C===E.ADVANCED?w:it[Y].mediaBox.topRightY-it[Y].mediaBox.bottomLeftY-T(w)},yu=p.__private__.getHorizontalCoordinateString=p.getHorizontalCoordinateString=function(w){return L(pi(w))},As=p.__private__.getVerticalCoordinateString=p.getVerticalCoordinateString=function(w){return L(Wn(w))},ir=t.strokeColor||"0 G";p.__private__.getStrokeColor=p.getDrawColor=function(){return Gr(ir)},p.__private__.setStrokeColor=p.setDrawColor=function(w,q,se,ce){return ir=Rr({ch1:w,ch2:q,ch3:se,ch4:ce,pdfColorType:"draw",precision:2}),ae(ir),this};var Ko=t.fillColor||"0 g";p.__private__.getFillColor=p.getFillColor=function(){return Gr(Ko)},p.__private__.setFillColor=p.setFillColor=function(w,q,se,ce){return Ko=Rr({ch1:w,ch2:q,ch3:se,ch4:ce,pdfColorType:"fill",precision:2}),ae(Ko),this};var Qi=t.textColor||"0 g",Qo=p.__private__.getTextColor=p.getTextColor=function(){return Gr(Qi)};p.__private__.setTextColor=p.setTextColor=function(w,q,se,ce){return Qi=Rr({ch1:w,ch2:q,ch3:se,ch4:ce,pdfColorType:"text",precision:3}),this};var so=t.charSpace,Yo=p.__private__.getCharSpace=p.getCharSpace=function(){return parseFloat(so||0)};p.__private__.setCharSpace=p.setCharSpace=function(w){if(isNaN(w))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return so=w,this};var _l=0;p.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},p.__private__.setLineCap=p.setLineCap=function(w){var q=p.CapJoinStyles[w];if(q===void 0)throw new Error("Line cap style of '"+w+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return _l=q,ae(q+" J"),this};var Xo=0;p.__private__.setLineJoin=p.setLineJoin=function(w){var q=p.CapJoinStyles[w];if(q===void 0)throw new Error("Line join style of '"+w+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Xo=q,ae(q+" j"),this},p.__private__.setLineMiterLimit=p.__private__.setMiterLimit=p.setLineMiterLimit=p.setMiterLimit=function(w){if(w=w||0,isNaN(w))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return ae(L(T(w))+" M"),this},p.GState=am,p.setGState=function(w){(w=typeof w=="string"?Ut[Hn[w]]:Es(null,w)).equals(xn)||(ae("/"+w.id+" gs"),xn=w)};var Es=function(w,q){if(!w||!Hn[w]){var se=!1;for(var ce in Ut)if(Ut.hasOwnProperty(ce)&&Ut[ce].equals(q)){se=!0;break}if(se)q=Ut[ce];else{var ge="GS"+(Object.keys(Ut).length+1).toString(10);Ut[ge]=q,q.id=ge}return w&&(Hn[w]=q.id),Et.publish("addGState",q),q}};p.addGState=function(w,q){return Es(w,q),this},p.saveGraphicsState=function(){return ae("q"),Hr.push({key:at,size:Me,color:Qi}),this},p.restoreGraphicsState=function(){ae("Q");var w=Hr.pop();return at=w.key,Me=w.size,Qi=w.color,xn=null,this},p.setCurrentTransformationMatrix=function(w){return ae(w.toString()+" cm"),this},p.comment=function(w){return ae("#"+w),this};var oo=function(w,q){var se=w||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return se},set:function(Ie){isNaN(Ie)||(se=parseFloat(Ie))}});var ce=q||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return ce},set:function(Ie){isNaN(Ie)||(ce=parseFloat(Ie))}});var ge="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return ge},set:function(Ie){ge=Ie.toString()}}),this},Jo=function(w,q,se,ce){oo.call(this,w,q),this.type="rect";var ge=se||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return ge},set:function(Oe){isNaN(Oe)||(ge=parseFloat(Oe))}});var Ie=ce||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Ie},set:function(Oe){isNaN(Oe)||(Ie=parseFloat(Oe))}}),this},ao=function(){this.page=Rt,this.currentPage=Y,this.pages=Ne.slice(0),this.pagesContext=it.slice(0),this.x=Lt,this.y=vt,this.matrix=sn,this.width=Ns(Y),this.height=yr(Y),this.outputDestination=Ue,this.id="",this.objectNumber=-1};ao.prototype.restore=function(){Rt=this.page,Y=this.currentPage,it=this.pagesContext,Ne=this.pages,Lt=this.x,vt=this.y,sn=this.matrix,ea(Y,this.width),ta(Y,this.height),Ue=this.outputDestination};var Zo=function(w,q,se,ce,ge){ci.push(new ao),Rt=Y=0,Ne=[],Lt=w,vt=q,sn=ge,Dr([se,ce])},_u=function(w){if(fn[w])ci.pop().restore();else{var q=new ao,se="Xo"+(Object.keys(Yt).length+1).toString(10);q.id=se,fn[w]=se,Yt[se]=q,Et.publish("addFormObject",q),ci.pop().restore()}};for(var Yi in p.beginFormObject=function(w,q,se,ce,ge){return Zo(w,q,se,ce,ge),this},p.endFormObject=function(w){return _u(w),this},p.doFormObject=function(w,q){var se=Yt[fn[w]];return ae("q"),ae(q.toString()+" cm"),ae("/"+se.id+" Do"),ae("Q"),this},p.getFormObject=function(w){var q=Yt[fn[w]];return{x:q.x,y:q.y,width:q.width,height:q.height,matrix:q.matrix}},p.save=function(w,q){return w=w||"generated.pdf",(q=q||{}).returnPromise=q.returnPromise||!1,q.returnPromise===!1?(kl(qo(Wi()),w),typeof kl.unload=="function"&&ft.setTimeout&&setTimeout(kl.unload,911),this):new Promise(function(se,ce){try{var ge=kl(qo(Wi()),w);typeof kl.unload=="function"&&ft.setTimeout&&setTimeout(kl.unload,911),se(ge)}catch(Ie){ce(Ie.message)}})},dt.API)dt.API.hasOwnProperty(Yi)&&(Yi==="events"&&dt.API.events.length?function(w,q){var se,ce,ge;for(ge=q.length-1;ge!==-1;ge--)se=q[ge][0],ce=q[ge][1],w.subscribe.apply(w,[se].concat(typeof ce=="function"?[ce]:ce))}(Et,dt.API.events):p[Yi]=dt.API[Yi]);var Ns=p.getPageWidth=function(w){return(it[w=w||Y].mediaBox.topRightX-it[w].mediaBox.bottomLeftX)/$e},ea=p.setPageWidth=function(w,q){it[w].mediaBox.topRightX=q*$e+it[w].mediaBox.bottomLeftX},yr=p.getPageHeight=function(w){return(it[w=w||Y].mediaBox.topRightY-it[w].mediaBox.bottomLeftY)/$e},ta=p.setPageHeight=function(w,q){it[w].mediaBox.topRightY=q*$e+it[w].mediaBox.bottomLeftY};return p.internal={pdfEscape:An,getStyle:gu,getFont:pl,getFontSize:ze,getCharSpace:Yo,getTextColor:Qo,getLineHeight:vl,getLineHeightFactor:io,getLineWidth:Go,write:ye,getHorizontalCoordinate:pi,getVerticalCoordinate:Wn,getCoordinateString:yu,getVerticalCoordinateString:As,collections:{},newObject:kn,newAdditionalObject:Mo,newObjectDeferred:Sn,newObjectDeferredBegin:Un,getFilters:jr,putStream:Pn,events:Et,scaleFactor:$e,pageSize:{getWidth:function(){return Ns(Y)},setWidth:function(w){ea(Y,w)},getHeight:function(){return yr(Y)},setHeight:function(w){ta(Y,w)}},encryptionOptions:h,encryption:an,getEncryptor:mu,output:zo,getNumberOfPages:$t,pages:Ne,out:ae,f2:R,f3:N,getPageInfo:dl,getPageInfoByObjId:pt,getCurrentPageInfo:Ss,getPDFVersion:x,Point:oo,Rectangle:Jo,Matrix:Ze,hasHotfix:xs},Object.defineProperty(p.internal.pageSize,"width",{get:function(){return Ns(Y)},set:function(w){ea(Y,w)},enumerable:!0,configurable:!0}),Object.defineProperty(p.internal.pageSize,"height",{get:function(){return yr(Y)},set:function(w){ta(Y,w)},enumerable:!0,configurable:!0}),fu.call(p,Te),at="F1",to(i,n),Et.publish("initialized"),p}Bu.prototype.lsbFirstWord=function(t){return String.fromCharCode(t>>0&255,t>>8&255,t>>16&255,t>>24&255)},Bu.prototype.toHexString=function(t){return t.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Bu.prototype.hexToBytes=function(t){for(var e=[],n=0;n<t.length;n+=2)e.push(String.fromCharCode(parseInt(t.substr(n,2),16)));return e.join("")},Bu.prototype.processOwnerPassword=function(t,e){return i2(r2(e).substr(0,5),t)},Bu.prototype.encryptor=function(t,e){var n=r2(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(r){return i2(n,r)}},am.prototype.equals=function(t){var e,n="id,objectNumber,equals";if(!t||Gt(t)!==Gt(this))return!1;var r=0;for(e in this)if(!(n.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this[e]!==t[e])return!1;r++}for(e in t)t.hasOwnProperty(e)&&n.indexOf(e)<0&&r--;return r===0},dt.API={events:[]},dt.version="2.5.2";var Nn=dt.API,ly=1,lu=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Du=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},wt=function(t){return t.toFixed(2)},ga=function(t){return t.toFixed(5)};Nn.__acroform__={};var li=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},Lw=function(t){return t*ly},Ls=function(t){var e=new yA,n=nt.internal.getHeight(t)||0,r=nt.internal.getWidth(t)||0;return e.BBox=[0,0,Number(wt(r)),Number(wt(n))],e},Z7=Nn.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|=1<<e},eD=Nn.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&=~(1<<e)},tD=Nn.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return t&1<<e?1:0},Dn=Nn.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return tD(t,e-1)},On=Nn.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return Z7(t,e-1)},Fn=Nn.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return eD(t,e-1)},nD=Nn.__acroform__.calculateCoordinates=function(t,e){var n=e.internal.getHorizontalCoordinate,r=e.internal.getVerticalCoordinate,i=t[0],s=t[1],o=t[2],a=t[3],l={};return l.lowerLeft_X=n(i)||0,l.lowerLeft_Y=r(s+a)||0,l.upperRight_X=n(i+o)||0,l.upperRight_Y=r(s)||0,[Number(wt(l.lowerLeft_X)),Number(wt(l.lowerLeft_Y)),Number(wt(l.upperRight_X)),Number(wt(l.upperRight_Y))]},rD=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],n=t._V||t.DV,r=s2(t,n),i=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+i+" "+wt(r.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(r.text),e.push("ET"),e.push("Q"),e.push("EMC");var s=Ls(t);return s.scope=t.scope,s.stream=e.join(`
`),s}},s2=function(t,e){var n=t.fontSize===0?t.maxFontSize:t.fontSize,r={text:"",fontSize:""},i=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");i=t.multiline?i.map(function(N){return N.split(`
`)}):i.map(function(N){return[N]});var s=n,o=nt.internal.getHeight(t)||0;o=o<0?-o:o;var a=nt.internal.getWidth(t)||0;a=a<0?-a:a;var l=function(N,T,P){if(N+1<i.length){var U=T+" "+i[N+1][0];return qf(U,t,P).width<=a-4}return!1};s++;e:for(;s>0;){e="",s--;var u,h,f=qf("3",t,s).height,m=t.multiline?o-s:(o-f)/2,p=m+=2,b=0,x=0,I=0;if(s<=0){e=`(...) Tj
`,e+="% Width of Text: "+qf(e,t,s=12).width+", FieldWidth:"+a+`
`;break}for(var _="",E=0,C=0;C<i.length;C++)if(i.hasOwnProperty(C)){var O=!1;if(i[C].length!==1&&I!==i[C].length-1){if((f+2)*(E+2)+2>o)continue e;_+=i[C][I],O=!0,x=C,C--}else{_=(_+=i[C][I]+" ").substr(_.length-1)==" "?_.substr(0,_.length-1):_;var K=parseInt(C),B=l(K,_,s),L=C>=i.length-1;if(B&&!L){_+=" ",I=0;continue}if(B||L){if(L)x=K;else if(t.multiline&&(f+2)*(E+2)+2>o)continue e}else{if(!t.multiline||(f+2)*(E+2)+2>o)continue e;x=K}}for(var y="",S=b;S<=x;S++){var R=i[S];if(t.multiline){if(S===x){y+=R[I]+" ",I=(I+1)%R.length;continue}if(S===b){y+=R[R.length-1]+" ";continue}}y+=R[0]+" "}switch(y=y.substr(y.length-1)==" "?y.substr(0,y.length-1):y,h=qf(y,t,s).width,t.textAlign){case"right":u=a-h-2;break;case"center":u=(a-h)/2;break;case"left":default:u=2}e+=wt(u)+" "+wt(p)+` Td
`,e+="("+lu(y)+`) Tj
`,e+=-wt(u)+` 0 Td
`,p=-(s+2),h=0,b=O?x:x+1,E++,_=""}break}return r.text=e,r.fontSize=s,r},qf=function(t,e,n){var r=e.scope.internal.getFont(e.fontName,e.fontStyle),i=e.scope.getStringUnitWidth(t,{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:e.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:i}},iD={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},sD=function(t,e){var n={type:"reference",object:t};e.internal.getPageInfo(t.page).pageContext.annotations.find(function(r){return r.type===n.type&&r.object===n.object})===void 0&&e.internal.getPageInfo(t.page).pageContext.annotations.push(n)},oD=function(t,e){for(var n in t)if(t.hasOwnProperty(n)){var r=n,i=t[n];e.internal.newObjectDeferredBegin(i.objId,!0),Gt(i)==="object"&&typeof i.putStream=="function"&&i.putStream(),delete t[r]}},aD=function(t,e){if(e.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(ms.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(iD)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");ly=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new _A,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(n){n.internal.events.unsubscribe(n.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete n.internal.acroformPlugin.acroFormDictionaryRoot._eventID,n.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(n){n.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=n.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in r)if(r.hasOwnProperty(i)){var s=r[i];s.objId=void 0,s.hasAnnotation&&sD(s,n)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(n){if(n.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");n.internal.write("/AcroForm "+n.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(n){(function(r,i){var s=!r;for(var o in r||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(o)){var a=r[o],l=[],u=a.Rect;if(a.Rect&&(a.Rect=nD(a.Rect,i)),i.internal.newObjectDeferredBegin(a.objId,!0),a.DA=nt.createDefaultAppearanceStream(a),Gt(a)==="object"&&typeof a.getKeyValueListForStream=="function"&&(l=a.getKeyValueListForStream()),a.Rect=u,a.hasAppearanceStream&&!a.appearanceStreamContent){var h=rD(a);l.push({key:"AP",value:"<</N "+h+">>"}),i.internal.acroformPlugin.xForms.push(h)}if(a.appearanceStreamContent){var f="";for(var m in a.appearanceStreamContent)if(a.appearanceStreamContent.hasOwnProperty(m)){var p=a.appearanceStreamContent[m];if(f+="/"+m+" ",f+="<<",Object.keys(p).length>=1||Array.isArray(p)){for(var o in p)if(p.hasOwnProperty(o)){var b=p[o];typeof b=="function"&&(b=b.call(i,a)),f+="/"+o+" "+b+" ",i.internal.acroformPlugin.xForms.indexOf(b)>=0||i.internal.acroformPlugin.xForms.push(b)}}else typeof(b=p)=="function"&&(b=b.call(i,a)),f+="/"+o+" "+b,i.internal.acroformPlugin.xForms.indexOf(b)>=0||i.internal.acroformPlugin.xForms.push(b);f+=">>"}l.push({key:"AP",value:`<<
`+f+">>"})}i.internal.putStream({additionalKeyValues:l,objectId:a.objId}),i.internal.out("endobj")}s&&oD(i.internal.acroformPlugin.xForms,i)})(n,t)}),t.internal.acroformPlugin.isInitialized=!0}},vA=Nn.__acroform__.arrayToPdfArray=function(t,e,n){var r=function(o){return o};if(Array.isArray(t)){for(var i="[",s=0;s<t.length;s++)switch(s!==0&&(i+=" "),Gt(t[s])){case"boolean":case"number":case"object":i+=t[s].toString();break;case"string":t[s].substr(0,1)!=="/"?(e!==void 0&&n&&(r=n.internal.getEncryptor(e)),i+="("+lu(r(t[s].toString()))+")"):i+=t[s].toString()}return i+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},b1=function(t,e,n){var r=function(i){return i};return e!==void 0&&n&&(r=n.internal.getEncryptor(e)),(t=t||"").toString(),t="("+lu(r(t))+")"},Fs=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Fs.prototype.toString=function(){return this.objId+" 0 R"},Fs.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},Fs.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var n in e)if(Object.getOwnPropertyDescriptor(this,e[n]).configurable===!1){var r=e[n],i=this[r];i&&(Array.isArray(i)?t.push({key:r,value:vA(i,this.objId,this.scope)}):i instanceof Fs?(i.scope=this.scope,t.push({key:r,value:i.objId+" 0 R"})):typeof i!="function"&&t.push({key:r,value:i}))}return t};var yA=function(){Fs.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(n){t=n.trim()},get:function(){return t||null}})};li(yA,Fs);var _A=function(){Fs.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var n=function(r){return r};return this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),"("+lu(n(t))+")"}},set:function(n){t=n}})};li(_A,Fs);var ms=function t(){Fs.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(_){if(isNaN(_))throw new Error('Invalid value "'+_+'" for attribute F supplied.');e=_}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Dn(e,3)},set:function(_){_?this.F=On(e,3):this.F=Fn(e,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(_){if(isNaN(_))throw new Error('Invalid value "'+_+'" for attribute Ff supplied.');n=_}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(_){r=_!==void 0?_:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(_){r[0]=_}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(_){r[1]=_}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(_){r[2]=_}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(_){r[3]=_}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(_){switch(_){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=_;break;default:throw new Error('Invalid value "'+_+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof lm)return;s="FieldObject"+t.FieldNum++}var _=function(E){return E};return this.scope&&(_=this.scope.internal.getEncryptor(this.objId)),"("+lu(_(s))+")"},set:function(_){s=_.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(_){s=_}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(_){o=_}});var a="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return a},set:function(_){a=_}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(_){l=_}});var u=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return u===void 0?50/ly:u},set:function(_){u=_}});var h="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return h},set:function(_){h=_}});var f="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!f||this instanceof lm||this instanceof Bl))return b1(f,this.objId,this.scope)},set:function(_){_=_.toString(),f=_}});var m=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(m)return this instanceof tr?m:b1(m,this.objId,this.scope)},set:function(_){_=_.toString(),m=this instanceof tr?_:_.substr(0,1)==="("?Du(_.substr(1,_.length-2)):Du(_)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof tr?Du(m.substr(1,m.length-1)):m},set:function(_){_=_.toString(),m=this instanceof tr?"/"+_:_}});var p=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(p)return p},set:function(_){this.V=_}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(p)return this instanceof tr?p:b1(p,this.objId,this.scope)},set:function(_){_=_.toString(),p=this instanceof tr?_:_.substr(0,1)==="("?Du(_.substr(1,_.length-2)):Du(_)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof tr?Du(p.substr(1,p.length-1)):p},set:function(_){_=_.toString(),p=this instanceof tr?"/"+_:_}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var b,x=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return x},set:function(_){_=!!_,x=_}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(b)return b},set:function(_){b=_}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Dn(this.Ff,1)},set:function(_){_?this.Ff=On(this.Ff,1):this.Ff=Fn(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Dn(this.Ff,2)},set:function(_){_?this.Ff=On(this.Ff,2):this.Ff=Fn(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Dn(this.Ff,3)},set:function(_){_?this.Ff=On(this.Ff,3):this.Ff=Fn(this.Ff,3)}});var I=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(I!==null)return I},set:function(_){if([0,1,2].indexOf(_)===-1)throw new Error('Invalid value "'+_+'" for attribute Q supplied.');I=_}}),Object.defineProperty(this,"textAlign",{get:function(){var _;switch(I){case 0:default:_="left";break;case 1:_="center";break;case 2:_="right"}return _},configurable:!0,enumerable:!0,set:function(_){switch(_){case"right":case 2:I=2;break;case"center":case 1:I=1;break;case"left":case 0:default:I=0}}})};li(ms,Fs);var pc=function(){ms.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(n){t=n}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return vA(e,this.objId,this.scope)},set:function(n){var r,i;i=[],typeof(r=n)=="string"&&(i=function(s,o,a){a||(a=1);for(var l,u=[];l=o.exec(s);)u.push(l[a]);return u}(r,/\((.*?)\)/g)),e=i}}),this.getOptions=function(){return e},this.setOptions=function(n){e=n,this.sort&&e.sort()},this.addOption=function(n){n=(n=n||"").toString(),e.push(n),this.sort&&e.sort()},this.removeOption=function(n,r){for(r=r||!1,n=(n=n||"").toString();e.indexOf(n)!==-1&&(e.splice(e.indexOf(n),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Dn(this.Ff,18)},set:function(n){n?this.Ff=On(this.Ff,18):this.Ff=Fn(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Dn(this.Ff,19)},set:function(n){this.combo===!0&&(n?this.Ff=On(this.Ff,19):this.Ff=Fn(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Dn(this.Ff,20)},set:function(n){n?(this.Ff=On(this.Ff,20),e.sort()):this.Ff=Fn(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Dn(this.Ff,22)},set:function(n){n?this.Ff=On(this.Ff,22):this.Ff=Fn(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Dn(this.Ff,23)},set:function(n){n?this.Ff=On(this.Ff,23):this.Ff=Fn(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Dn(this.Ff,27)},set:function(n){n?this.Ff=On(this.Ff,27):this.Ff=Fn(this.Ff,27)}}),this.hasAppearanceStream=!1};li(pc,ms);var mc=function(){pc.call(this),this.fontName="helvetica",this.combo=!1};li(mc,pc);var gc=function(){mc.call(this),this.combo=!0};li(gc,mc);var dp=function(){gc.call(this),this.edit=!0};li(dp,gc);var tr=function(){ms.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Dn(this.Ff,15)},set:function(n){n?this.Ff=On(this.Ff,15):this.Ff=Fn(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Dn(this.Ff,16)},set:function(n){n?this.Ff=On(this.Ff,16):this.Ff=Fn(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Dn(this.Ff,17)},set:function(n){n?this.Ff=On(this.Ff,17):this.Ff=Fn(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Dn(this.Ff,26)},set:function(n){n?this.Ff=On(this.Ff,26):this.Ff=Fn(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var n=function(s){return s};if(this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var r,i=[];for(r in i.push("<<"),e)i.push("/"+r+" ("+lu(n(e[r]))+")");return i.push(">>"),i.join(`
`)}},set:function(n){Gt(n)==="object"&&(e=n)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(n){typeof n=="string"&&(e.CA=n)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(n){t="/"+n}})};li(tr,ms);var fp=function(){tr.call(this),this.pushButton=!0};li(fp,tr);var vc=function(){tr.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e!==void 0?e:[]}})};li(vc,tr);var lm=function(){var t,e;ms.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(i){t=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(i){e=i}});var n,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(a){return a};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var s,o=[];for(s in o.push("<<"),r)o.push("/"+s+" ("+lu(i(r[s]))+")");return o.push(">>"),o.join(`
`)},set:function(i){Gt(i)==="object"&&(r=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(i){typeof i=="string"&&(r.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(i){n=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(i){n="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=nt.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};li(lm,ms),vc.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var n=this.Kids[e];n.appearanceStreamContent=t.createAppearanceStream(n.optionName),n.caption=t.getCA()}},vc.prototype.createOption=function(t){var e=new lm;return e.Parent=this,e.optionName=t,this.Kids.push(e),lD.call(this.scope,e),e};var pp=function(){tr.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=nt.CheckBox.createAppearanceStream()};li(pp,tr);var Bl=function(){ms.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Dn(this.Ff,13)},set:function(e){e?this.Ff=On(this.Ff,13):this.Ff=Fn(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Dn(this.Ff,21)},set:function(e){e?this.Ff=On(this.Ff,21):this.Ff=Fn(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Dn(this.Ff,23)},set:function(e){e?this.Ff=On(this.Ff,23):this.Ff=Fn(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Dn(this.Ff,24)},set:function(e){e?this.Ff=On(this.Ff,24):this.Ff=Fn(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Dn(this.Ff,25)},set:function(e){e?this.Ff=On(this.Ff,25):this.Ff=Fn(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Dn(this.Ff,26)},set:function(e){e?this.Ff=On(this.Ff,26):this.Ff=Fn(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};li(Bl,ms);var mp=function(){Bl.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Dn(this.Ff,14)},set:function(t){t?this.Ff=On(this.Ff,14):this.Ff=Fn(this.Ff,14)}}),this.password=!0};li(mp,Bl);var nt={CheckBox:{createAppearanceStream:function(){return{N:{On:nt.CheckBox.YesNormal},D:{On:nt.CheckBox.YesPushDown,Off:nt.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=Ls(t);e.scope=t.scope;var n=[],r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,i=t.scope.__private__.encodeColorString(t.color),s=s2(t,t.caption);return n.push("0.749023 g"),n.push("0 0 "+wt(nt.internal.getWidth(t))+" "+wt(nt.internal.getHeight(t))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+r+" "+wt(s.fontSize)+" Tf "+i),n.push("BT"),n.push(s.text),n.push("ET"),n.push("Q"),n.push("EMC"),e.stream=n.join(`
`),e},YesNormal:function(t){var e=Ls(t);e.scope=t.scope;var n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color),i=[],s=nt.internal.getHeight(t),o=nt.internal.getWidth(t),a=s2(t,t.caption);return i.push("1 g"),i.push("0 0 "+wt(o)+" "+wt(s)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+wt(o-1)+" "+wt(s-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+n+" "+wt(a.fontSize)+" Tf "+r),i.push(a.text),i.push("ET"),i.push("Q"),e.stream=i.join(`
`),e},OffPushDown:function(t){var e=Ls(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+wt(nt.internal.getWidth(t))+" "+wt(nt.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:nt.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=nt.RadioButton.Circle.YesNormal,e.D[t]=nt.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=Ls(t);e.scope=t.scope;var n=[],r=nt.internal.getWidth(t)<=nt.internal.getHeight(t)?nt.internal.getWidth(t)/4:nt.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=nt.internal.Bezier_C,s=Number((r*i).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+ga(nt.internal.getWidth(t)/2)+" "+ga(nt.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+s+" "+s+" "+r+" 0 "+r+" c"),n.push("-"+s+" "+r+" -"+r+" "+s+" -"+r+" 0 c"),n.push("-"+r+" -"+s+" -"+s+" -"+r+" 0 -"+r+" c"),n.push(s+" -"+r+" "+r+" -"+s+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=Ls(t);e.scope=t.scope;var n=[],r=nt.internal.getWidth(t)<=nt.internal.getHeight(t)?nt.internal.getWidth(t)/4:nt.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*nt.internal.Bezier_C).toFixed(5)),o=Number((r*nt.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+ga(nt.internal.getWidth(t)/2)+" "+ga(nt.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),n.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),n.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),n.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+ga(nt.internal.getWidth(t)/2)+" "+ga(nt.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+o+" "+o+" "+r+" 0 "+r+" c"),n.push("-"+o+" "+r+" -"+r+" "+o+" -"+r+" 0 c"),n.push("-"+r+" -"+o+" -"+o+" -"+r+" 0 -"+r+" c"),n.push(o+" -"+r+" "+r+" -"+o+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(t){var e=Ls(t);e.scope=t.scope;var n=[],r=nt.internal.getWidth(t)<=nt.internal.getHeight(t)?nt.internal.getWidth(t)/4:nt.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*nt.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+ga(nt.internal.getWidth(t)/2)+" "+ga(nt.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),n.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),n.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),n.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:nt.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=nt.RadioButton.Cross.YesNormal,e.D[t]=nt.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=Ls(t);e.scope=t.scope;var n=[],r=nt.internal.calculateCross(t);return n.push("q"),n.push("1 1 "+wt(nt.internal.getWidth(t)-2)+" "+wt(nt.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(wt(r.x1.x)+" "+wt(r.x1.y)+" m"),n.push(wt(r.x2.x)+" "+wt(r.x2.y)+" l"),n.push(wt(r.x4.x)+" "+wt(r.x4.y)+" m"),n.push(wt(r.x3.x)+" "+wt(r.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=Ls(t);e.scope=t.scope;var n=nt.internal.calculateCross(t),r=[];return r.push("0.749023 g"),r.push("0 0 "+wt(nt.internal.getWidth(t))+" "+wt(nt.internal.getHeight(t))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+wt(nt.internal.getWidth(t)-2)+" "+wt(nt.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(wt(n.x1.x)+" "+wt(n.x1.y)+" m"),r.push(wt(n.x2.x)+" "+wt(n.x2.y)+" l"),r.push(wt(n.x4.x)+" "+wt(n.x4.y)+" m"),r.push(wt(n.x3.x)+" "+wt(n.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(t){var e=Ls(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+wt(nt.internal.getWidth(t))+" "+wt(nt.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+n}};nt.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=nt.internal.getWidth(t),n=nt.internal.getHeight(t),r=Math.min(e,n);return{x1:{x:(e-r)/2,y:(n-r)/2+r},x2:{x:(e-r)/2+r,y:(n-r)/2},x3:{x:(e-r)/2,y:(n-r)/2},x4:{x:(e-r)/2+r,y:(n-r)/2+r}}}},nt.internal.getWidth=function(t){var e=0;return Gt(t)==="object"&&(e=Lw(t.Rect[2])),e},nt.internal.getHeight=function(t){var e=0;return Gt(t)==="object"&&(e=Lw(t.Rect[3])),e};var lD=Nn.addField=function(t){if(aD(this,t),!(t instanceof ms))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};Nn.AcroFormChoiceField=pc,Nn.AcroFormListBox=mc,Nn.AcroFormComboBox=gc,Nn.AcroFormEditBox=dp,Nn.AcroFormButton=tr,Nn.AcroFormPushButton=fp,Nn.AcroFormRadioButton=vc,Nn.AcroFormCheckBox=pp,Nn.AcroFormTextField=Bl,Nn.AcroFormPasswordField=mp,Nn.AcroFormAppearance=nt,Nn.AcroForm={ChoiceField:pc,ListBox:mc,ComboBox:gc,EditBox:dp,Button:tr,PushButton:fp,RadioButton:vc,CheckBox:pp,TextField:Bl,PasswordField:mp,Appearance:nt},dt.AcroForm={ChoiceField:pc,ListBox:mc,ComboBox:gc,EditBox:dp,Button:tr,PushButton:fp,RadioButton:vc,CheckBox:pp,TextField:Bl,PasswordField:mp,Appearance:nt};dt.AcroForm;function wA(t){return t.reduce(function(e,n,r){return e[n]=r,e},{})}(function(t){t.__addimage__={};var e="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},r=t.__addimage__.getImageFileTypeByImageData=function(N,T){var P,U,Q,F,V,G=e;if((T=T||e)==="RGBA"||N.data!==void 0&&N.data instanceof Uint8ClampedArray&&"height"in N&&"width"in N)return"RGBA";if(B(N))for(V in n)for(Q=n[V],P=0;P<Q.length;P+=1){for(F=!0,U=0;U<Q[P].length;U+=1)if(Q[P][U]!==void 0&&Q[P][U]!==N[U]){F=!1;break}if(F===!0){G=V;break}}else for(V in n)for(Q=n[V],P=0;P<Q.length;P+=1){for(F=!0,U=0;U<Q[P].length;U+=1)if(Q[P][U]!==void 0&&Q[P][U]!==N.charCodeAt(U)){F=!1;break}if(F===!0){G=V;break}}return G===e&&T!==e&&(G=T),G},i=function N(T){for(var P=this.internal.write,U=this.internal.putStream,Q=(0,this.internal.getFilters)();Q.indexOf("FlateEncode")!==-1;)Q.splice(Q.indexOf("FlateEncode"),1);T.objectId=this.internal.newObject();var F=[];if(F.push({key:"Type",value:"/XObject"}),F.push({key:"Subtype",value:"/Image"}),F.push({key:"Width",value:T.width}),F.push({key:"Height",value:T.height}),T.colorSpace===I.INDEXED?F.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(T.palette.length/3-1)+" "+("sMask"in T&&T.sMask!==void 0?T.objectId+2:T.objectId+1)+" 0 R]"}):(F.push({key:"ColorSpace",value:"/"+T.colorSpace}),T.colorSpace===I.DEVICE_CMYK&&F.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),F.push({key:"BitsPerComponent",value:T.bitsPerComponent}),"decodeParameters"in T&&T.decodeParameters!==void 0&&F.push({key:"DecodeParms",value:"<<"+T.decodeParameters+">>"}),"transparency"in T&&Array.isArray(T.transparency)){for(var V="",G=0,ee=T.transparency.length;G<ee;G++)V+=T.transparency[G]+" "+T.transparency[G]+" ";F.push({key:"Mask",value:"["+V+"]"})}T.sMask!==void 0&&F.push({key:"SMask",value:T.objectId+1+" 0 R"});var ie=T.filter!==void 0?["/"+T.filter]:void 0;if(U({data:T.data,additionalKeyValues:F,alreadyAppliedFilters:ie,objectId:T.objectId}),P("endobj"),"sMask"in T&&T.sMask!==void 0){var be="/Predictor "+T.predictor+" /Colors 1 /BitsPerComponent "+T.bitsPerComponent+" /Columns "+T.width,M={width:T.width,height:T.height,colorSpace:"DeviceGray",bitsPerComponent:T.bitsPerComponent,decodeParameters:be,data:T.sMask};"filter"in T&&(M.filter=T.filter),N.call(this,M)}if(T.colorSpace===I.INDEXED){var Y=this.internal.newObject();U({data:y(new Uint8Array(T.palette)),objectId:Y}),P("endobj")}},s=function(){var N=this.internal.collections.addImage_images;for(var T in N)i.call(this,N[T])},o=function(){var N,T=this.internal.collections.addImage_images,P=this.internal.write;for(var U in T)P("/I"+(N=T[U]).index,N.objectId,"0","R")},a=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",s),this.internal.events.subscribe("putXobjectDict",o))},l=function(){var N=this.internal.collections.addImage_images;return a.call(this),N},u=function(){return Object.keys(this.internal.collections.addImage_images).length},h=function(N){return typeof t["process"+N.toUpperCase()]=="function"},f=function(N){return Gt(N)==="object"&&N.nodeType===1},m=function(N,T){if(N.nodeName==="IMG"&&N.hasAttribute("src")){var P=""+N.getAttribute("src");if(P.indexOf("data:image/")===0)return Yh(unescape(P).split("base64,").pop());var U=t.loadFile(P,!0);if(U!==void 0)return U}if(N.nodeName==="CANVAS"){if(N.width===0||N.height===0)throw new Error("Given canvas must have data. Canvas width: "+N.width+", height: "+N.height);var Q;switch(T){case"PNG":Q="image/png";break;case"WEBP":Q="image/webp";break;case"JPEG":case"JPG":default:Q="image/jpeg"}return Yh(N.toDataURL(Q,1).split("base64,").pop())}},p=function(N){var T=this.internal.collections.addImage_images;if(T){for(var P in T)if(N===T[P].alias)return T[P]}},b=function(N,T,P){return N||T||(N=-96,T=-96),N<0&&(N=-1*P.width*72/N/this.internal.scaleFactor),T<0&&(T=-1*P.height*72/T/this.internal.scaleFactor),N===0&&(N=T*P.width/P.height),T===0&&(T=N*P.height/P.width),[N,T]},x=function(N,T,P,U,Q,F){var V=b.call(this,P,U,Q),G=this.internal.getCoordinateString,ee=this.internal.getVerticalCoordinateString,ie=l.call(this);if(P=V[0],U=V[1],ie[Q.index]=Q,F){F*=Math.PI/180;var be=Math.cos(F),M=Math.sin(F),Y=function(H){return H.toFixed(4)},X=[Y(be),Y(M),Y(-1*M),Y(be),0,0,"cm"]}this.internal.write("q"),F?(this.internal.write([1,"0","0",1,G(N),ee(T+U),"cm"].join(" ")),this.internal.write(X.join(" ")),this.internal.write([G(P),"0","0",G(U),"0","0","cm"].join(" "))):this.internal.write([G(P),"0","0",G(U),G(N),ee(T+U),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+Q.index+" Do"),this.internal.write("Q")},I=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var _=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},E=t.__addimage__.sHashCode=function(N){var T,P,U=0;if(typeof N=="string")for(P=N.length,T=0;T<P;T++)U=(U<<5)-U+N.charCodeAt(T),U|=0;else if(B(N))for(P=N.byteLength/2,T=0;T<P;T++)U=(U<<5)-U+N[T],U|=0;return U},C=t.__addimage__.validateStringAsBase64=function(N){(N=N||"").toString().trim();var T=!0;return N.length===0&&(T=!1),N.length%4!=0&&(T=!1),/^[A-Za-z0-9+/]+$/.test(N.substr(0,N.length-2))===!1&&(T=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(N.substr(-2))===!1&&(T=!1),T},O=t.__addimage__.extractImageFromDataUrl=function(N){var T=(N=N||"").split("base64,"),P=null;if(T.length===2){var U=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(T[0]);Array.isArray(U)&&(P={mimeType:U[1],charset:U[2],data:T[1]})}return P},K=t.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};t.__addimage__.isArrayBuffer=function(N){return K()&&N instanceof ArrayBuffer};var B=t.__addimage__.isArrayBufferView=function(N){return K()&&typeof Uint32Array<"u"&&(N instanceof Int8Array||N instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&N instanceof Uint8ClampedArray||N instanceof Int16Array||N instanceof Uint16Array||N instanceof Int32Array||N instanceof Uint32Array||N instanceof Float32Array||N instanceof Float64Array)},L=t.__addimage__.binaryStringToUint8Array=function(N){for(var T=N.length,P=new Uint8Array(T),U=0;U<T;U++)P[U]=N.charCodeAt(U);return P},y=t.__addimage__.arrayBufferToBinaryString=function(N){for(var T="",P=B(N)?N:new Uint8Array(N),U=0;U<P.length;U+=8192)T+=String.fromCharCode.apply(null,P.subarray(U,U+8192));return T};t.addImage=function(){var N,T,P,U,Q,F,V,G,ee;if(typeof arguments[1]=="number"?(T=e,P=arguments[1],U=arguments[2],Q=arguments[3],F=arguments[4],V=arguments[5],G=arguments[6],ee=arguments[7]):(T=arguments[1],P=arguments[2],U=arguments[3],Q=arguments[4],F=arguments[5],V=arguments[6],G=arguments[7],ee=arguments[8]),Gt(N=arguments[0])==="object"&&!f(N)&&"imageData"in N){var ie=N;N=ie.imageData,T=ie.format||T||e,P=ie.x||P||0,U=ie.y||U||0,Q=ie.w||ie.width||Q,F=ie.h||ie.height||F,V=ie.alias||V,G=ie.compression||G,ee=ie.rotation||ie.angle||ee}var be=this.internal.getFilters();if(G===void 0&&be.indexOf("FlateEncode")!==-1&&(G="SLOW"),isNaN(P)||isNaN(U))throw new Error("Invalid coordinates passed to jsPDF.addImage");a.call(this);var M=S.call(this,N,T,V,G);return x.call(this,P,U,Q,F,M,ee),this};var S=function(N,T,P,U){var Q,F,V;if(typeof N=="string"&&r(N)===e){N=unescape(N);var G=R(N,!1);(G!==""||(G=t.loadFile(N,!0))!==void 0)&&(N=G)}if(f(N)&&(N=m(N,T)),T=r(N,T),!h(T))throw new Error("addImage does not support files of type '"+T+"', please ensure that a plugin for '"+T+"' support is added.");if(((V=P)==null||V.length===0)&&(P=function(ee){return typeof ee=="string"||B(ee)?E(ee):B(ee.data)?E(ee.data):null}(N)),(Q=p.call(this,P))||(K()&&(N instanceof Uint8Array||T==="RGBA"||(F=N,N=L(N))),Q=this["process"+T.toUpperCase()](N,u.call(this),P,function(ee){return ee&&typeof ee=="string"&&(ee=ee.toUpperCase()),ee in t.image_compression?ee:_.NONE}(U),F)),!Q)throw new Error("An unknown error occurred whilst processing the image.");return Q},R=t.__addimage__.convertBase64ToBinaryString=function(N,T){var P;T=typeof T!="boolean"||T;var U,Q="";if(typeof N=="string"){U=(P=O(N))!==null?P.data:N;try{Q=Yh(U)}catch(F){if(T)throw C(U)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+F.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return Q};t.getImageProperties=function(N){var T,P,U="";if(f(N)&&(N=m(N)),typeof N=="string"&&r(N)===e&&((U=R(N,!1))===""&&(U=t.loadFile(N)||""),N=U),P=r(N),!h(P))throw new Error("addImage does not support files of type '"+P+"', please ensure that a plugin for '"+P+"' support is added.");if(!K()||N instanceof Uint8Array||(N=L(N)),!(T=this["process"+P.toUpperCase()](N)))throw new Error("An unknown error occurred whilst processing the image");return T.fileType=P,T}})(dt.API),function(t){var e=function(n){if(n!==void 0&&n!="")return!0};dt.API.events.push(["addPage",function(n){this.internal.getPageInfo(n.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(n){for(var r,i,s,o=this.internal.getCoordinateString,a=this.internal.getVerticalCoordinateString,l=this.internal.getPageInfoByObjId(n.objId),u=n.pageContext.annotations,h=!1,f=0;f<u.length&&!h;f++)switch((r=u[f]).type){case"link":(e(r.options.url)||e(r.options.pageNumber))&&(h=!0);break;case"reference":case"text":case"freetext":h=!0}if(h!=0){this.internal.write("/Annots [");for(var m=0;m<u.length;m++){r=u[m];var p=this.internal.pdfEscape,b=this.internal.getEncryptor(n.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var x=this.internal.newAdditionalObject(),I=this.internal.newAdditionalObject(),_=this.internal.getEncryptor(x.objId),E=r.title||"Note";s="<</Type /Annot /Subtype /Text "+(i="/Rect ["+o(r.bounds.x)+" "+a(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w)+" "+a(r.bounds.y)+"] ")+"/Contents ("+p(_(r.contents))+")",s+=" /Popup "+I.objId+" 0 R",s+=" /P "+l.objId+" 0 R",s+=" /T ("+p(_(E))+") >>",x.content=s;var C=x.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+o(r.bounds.x+30)+" "+a(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w+30)+" "+a(r.bounds.y)+"] ")+" /Parent "+C,r.open&&(s+=" /Open true"),s+=" >>",I.content=s,this.internal.write(x.objId,"0 R",I.objId,"0 R");break;case"freetext":i="/Rect ["+o(r.bounds.x)+" "+a(r.bounds.y)+" "+o(r.bounds.x+r.bounds.w)+" "+a(r.bounds.y+r.bounds.h)+"] ";var O=r.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+p(b(r.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+O+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(r.options.name){var K=this.annotations._nameMap[r.options.name];r.options.pageNumber=K.page,r.options.top=K.y}else r.options.top||(r.options.top=0);if(i="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",s="",r.options.url)s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+p(b(r.options.url))+") >>";else if(r.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,s+=" /FitV "+r.options.left+"]";break;case"XYZ":default:var B=a(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),s+=" /XYZ "+r.options.left+" "+B+" "+r.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),t.createAnnotation=function(n){var r=this.internal.getCurrentPageInfo();switch(n.type){case"link":this.link(n.bounds.x,n.bounds.y,n.bounds.w,n.bounds.h,n);break;case"text":case"freetext":r.pageContext.annotations.push(n)}},t.link=function(n,r,i,s,o){var a=this.internal.getCurrentPageInfo(),l=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString;a.pageContext.annotations.push({finalBounds:{x:l(n),y:u(r),w:l(n+i),h:u(r+s)},options:o,type:"link"})},t.textWithLink=function(n,r,i,s){var o,a,l=this.getTextWidth(n),u=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){a=s.maxWidth;var h=this.splitTextToSize(n,a).length;o=Math.ceil(u*h)}else a=l,o=u;return this.text(n,r,i,s),i+=.2*u,s.align==="center"&&(r-=l/2),s.align==="right"&&(r-=l),this.link(r,i-u,a,o,s),l},t.getTextWidth=function(n){var r=this.internal.getFontSize();return this.getStringUnitWidth(n)*r/this.internal.scaleFactor}}(dt.API),function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];t.__arabicParser__={};var s=t.__arabicParser__.isInArabicSubstitutionA=function(x){return e[x.charCodeAt(0)]!==void 0},o=t.__arabicParser__.isArabicLetter=function(x){return typeof x=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(x)},a=t.__arabicParser__.isArabicEndLetter=function(x){return o(x)&&s(x)&&e[x.charCodeAt(0)].length<=2},l=t.__arabicParser__.isArabicAlfLetter=function(x){return o(x)&&i.indexOf(x.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(x){return o(x)&&s(x)&&e[x.charCodeAt(0)].length>=1};var u=t.__arabicParser__.arabicLetterHasFinalForm=function(x){return o(x)&&s(x)&&e[x.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(x){return o(x)&&s(x)&&e[x.charCodeAt(0)].length>=3};var h=t.__arabicParser__.arabicLetterHasMedialForm=function(x){return o(x)&&s(x)&&e[x.charCodeAt(0)].length==4},f=t.__arabicParser__.resolveLigatures=function(x){var I=0,_=n,E="",C=0;for(I=0;I<x.length;I+=1)_[x.charCodeAt(I)]!==void 0?(C++,typeof(_=_[x.charCodeAt(I)])=="number"&&(E+=String.fromCharCode(_),_=n,C=0),I===x.length-1&&(_=n,E+=x.charAt(I-(C-1)),I-=C-1,C=0)):(_=n,E+=x.charAt(I-C),I-=C,C=0);return E};t.__arabicParser__.isArabicDiacritic=function(x){return x!==void 0&&r[x.charCodeAt(0)]!==void 0};var m=t.__arabicParser__.getCorrectForm=function(x,I,_){return o(x)?s(x)===!1?-1:!u(x)||!o(I)&&!o(_)||!o(_)&&a(I)||a(x)&&!o(I)||a(x)&&l(I)||a(x)&&a(I)?0:h(x)&&o(I)&&!a(I)&&o(_)&&u(_)?3:a(x)||!o(_)?1:2:-1},p=function(x){var I=0,_=0,E=0,C="",O="",K="",B=(x=x||"").split("\\s+"),L=[];for(I=0;I<B.length;I+=1){for(L.push(""),_=0;_<B[I].length;_+=1)C=B[I][_],O=B[I][_-1],K=B[I][_+1],o(C)?(E=m(C,O,K),L[I]+=E!==-1?String.fromCharCode(e[C.charCodeAt(0)][E]):C):L[I]+=C;L[I]=f(L[I])}return L.join(" ")},b=t.__arabicParser__.processArabic=t.processArabic=function(){var x,I=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,_=[];if(Array.isArray(I)){var E=0;for(_=[],E=0;E<I.length;E+=1)Array.isArray(I[E])?_.push([p(I[E][0]),I[E][1],I[E][2]]):_.push([p(I[E])]);x=_}else x=p(I);return typeof arguments[0]=="string"?x:(arguments[0].text=x,arguments[0])};t.events.push(["preProcessText",b])}(dt.API),dt.API.autoPrint=function(t){var e;switch((t=t||{}).variant=t.variant||"non-conform",t.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(t){var e=function(){var n=void 0;Object.defineProperty(this,"pdf",{get:function(){return n},set:function(a){n=a}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(a){r=isNaN(a)||Number.isInteger(a)===!1||a<0?150:a,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(a){i=isNaN(a)||Number.isInteger(a)===!1||a<0?300:a,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(a){s=a}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(a){o=a}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(n,r){var i;if((n=n||"2d")!=="2d")return null;for(i in r)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=r[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(dt.API),function(t){var e={left:0,top:0,bottom:0,right:0},n=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var l=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return l},set:function(x){l=x}});var u=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return u},set:function(x){u=x}});var h=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return h},set:function(x){h=x}});var f=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return f},set:function(x){f=x}});var m=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return m},set:function(x){m=x}});var p=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return p},set:function(x){p=x}});var b=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return b},set:function(x){b=x}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(l){return r.call(this),this.internal.__cell__.headerFunction=typeof l=="function"?l:void 0,this},t.getTextDimensions=function(l,u){r.call(this);var h=(u=u||{}).fontSize||this.getFontSize(),f=u.font||this.getFont(),m=u.scaleFactor||this.internal.scaleFactor,p=0,b=0,x=0,I=this;if(!Array.isArray(l)&&typeof l!="string"){if(typeof l!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");l=String(l)}var _=u.maxWidth;_>0?typeof l=="string"?l=this.splitTextToSize(l,_):Object.prototype.toString.call(l)==="[object Array]"&&(l=l.reduce(function(C,O){return C.concat(I.splitTextToSize(O,_))},[])):l=Array.isArray(l)?l:[l];for(var E=0;E<l.length;E++)p<(x=this.getStringUnitWidth(l[E],{font:f})*h)&&(p=x);return p!==0&&(b=l.length),{w:p/=m,h:Math.max((b*h*this.getLineHeightFactor()-h*(this.getLineHeightFactor()-1))/m,0)}},t.cellAddPage=function(){r.call(this),this.addPage();var l=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new s(l.left,l.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=t.cell=function(){var l;l=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var u=this.internal.__cell__.lastCell,h=this.internal.__cell__.padding,f=this.internal.__cell__.margins||e,m=this.internal.__cell__.tableHeaderRow,p=this.internal.__cell__.printHeaders;return u.lineNumber!==void 0&&(u.lineNumber===l.lineNumber?(l.x=(u.x||0)+(u.width||0),l.y=u.y||0):u.y+u.height+l.height+f.bottom>this.getPageHeight()?(this.cellAddPage(),l.y=f.top,p&&m&&(this.printHeaderRow(l.lineNumber,!0),l.y+=m[0].height)):l.y=u.y+u.height||l.y),l.text[0]!==void 0&&(this.rect(l.x,l.y,l.width,l.height,n===!0?"FD":void 0),l.align==="right"?this.text(l.text,l.x+l.width-h,l.y+h,{align:"right",baseline:"top"}):l.align==="center"?this.text(l.text,l.x+l.width/2,l.y+h,{align:"center",baseline:"top",maxWidth:l.width-h-h}):this.text(l.text,l.x+h,l.y+h,{align:"left",baseline:"top",maxWidth:l.width-h-h})),this.internal.__cell__.lastCell=l,this};t.table=function(l,u,h,f,m){if(r.call(this),!h)throw new Error("No data for PDF table.");var p,b,x,I,_=[],E=[],C=[],O={},K={},B=[],L=[],y=(m=m||{}).autoSize||!1,S=m.printHeaders!==!1,R=m.css&&m.css["font-size"]!==void 0?16*m.css["font-size"]:m.fontSize||12,N=m.margins||Object.assign({width:this.getPageWidth()},e),T=typeof m.padding=="number"?m.padding:3,P=m.headerBackgroundColor||"#c8c8c8",U=m.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=S,this.internal.__cell__.margins=N,this.internal.__cell__.table_font_size=R,this.internal.__cell__.padding=T,this.internal.__cell__.headerBackgroundColor=P,this.internal.__cell__.headerTextColor=U,this.setFontSize(R),f==null)E=_=Object.keys(h[0]),C=_.map(function(){return"left"});else if(Array.isArray(f)&&Gt(f[0])==="object")for(_=f.map(function(ie){return ie.name}),E=f.map(function(ie){return ie.prompt||ie.name||""}),C=f.map(function(ie){return ie.align||"left"}),p=0;p<f.length;p+=1)K[f[p].name]=f[p].width*(19.049976/25.4);else Array.isArray(f)&&typeof f[0]=="string"&&(E=_=f,C=_.map(function(){return"left"}));if(y||Array.isArray(f)&&typeof f[0]=="string")for(p=0;p<_.length;p+=1){for(O[I=_[p]]=h.map(function(ie){return ie[I]}),this.setFont(void 0,"bold"),B.push(this.getTextDimensions(E[p],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),b=O[I],this.setFont(void 0,"normal"),x=0;x<b.length;x+=1)B.push(this.getTextDimensions(b[x],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);K[I]=Math.max.apply(null,B)+T+T,B=[]}if(S){var Q={};for(p=0;p<_.length;p+=1)Q[_[p]]={},Q[_[p]].text=E[p],Q[_[p]].align=C[p];var F=a.call(this,Q,K);L=_.map(function(ie){return new s(l,u,K[ie],F,Q[ie].text,void 0,Q[ie].align)}),this.setTableHeaderRow(L),this.printHeaderRow(1,!1)}var V=f.reduce(function(ie,be){return ie[be.name]=be.align,ie},{});for(p=0;p<h.length;p+=1){"rowStart"in m&&m.rowStart instanceof Function&&m.rowStart({row:p,data:h[p]},this);var G=a.call(this,h[p],K);for(x=0;x<_.length;x+=1){var ee=h[p][_[x]];"cellStart"in m&&m.cellStart instanceof Function&&m.cellStart({row:p,col:x,data:ee},this),o.call(this,new s(l,u,K[_[x]],G,ee,p+2,V[_[x]]))}}return this.internal.__cell__.table_x=l,this.internal.__cell__.table_y=u,this};var a=function(l,u){var h=this.internal.__cell__.padding,f=this.internal.__cell__.table_font_size,m=this.internal.scaleFactor;return Object.keys(l).map(function(p){var b=l[p];return this.splitTextToSize(b.hasOwnProperty("text")?b.text:b,u[p]-h-h)},this).map(function(p){return this.getLineHeightFactor()*p.length*f/m+h+h},this).reduce(function(p,b){return Math.max(p,b)},0)};t.setTableHeaderRow=function(l){r.call(this),this.internal.__cell__.tableHeaderRow=l},t.printHeaderRow=function(l,u){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var h;if(n=!0,typeof this.internal.__cell__.headerFunction=="function"){var f=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(f[0],f[1],f[2],f[3],void 0,-1)}this.setFont(void 0,"bold");for(var m=[],p=0;p<this.internal.__cell__.tableHeaderRow.length;p+=1){h=this.internal.__cell__.tableHeaderRow[p].clone(),u&&(h.y=this.internal.__cell__.margins.top||0,m.push(h)),h.lineNumber=l;var b=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,h),this.setTextColor(b)}m.length>0&&this.setTableHeaderRow(m),this.setFont(void 0,"normal"),n=!1}}(dt.API);var bA={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},xA=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],o2=wA(xA),SA=[100,200,300,400,500,600,700,800,900],uD=wA(SA);function a2(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),n=function(s){return bA[s=s||"normal"]?s:"normal"}(t.style),r=function(s){if(!s)return 400;if(typeof s=="number")return s>=100&&s<=900&&s%100==0?s:400;if(/^\d00$/.test(s))return parseInt(s);switch(s){case"bold":return 700;case"normal":default:return 400}}(t.weight),i=function(s){return typeof o2[s=s||"normal"]=="number"?s:"normal"}(t.stretch);return{family:e,style:n,weight:r,stretch:i,src:t.src||[],ref:t.ref||{name:e,style:[i,n,r].join(" ")}}}function Rw(t,e,n,r){var i;for(i=n;i>=0&&i<e.length;i+=r)if(t[e[i]])return t[e[i]];for(i=n;i>=0&&i<e.length;i-=r)if(t[e[i]])return t[e[i]]}var cD={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},jw={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function Dw(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function hD(t,e,n){for(var r=(n=n||{}).defaultFontFamily||"times",i=Object.assign({},cD,n.genericFontFamilies||{}),s=null,o=null,a=0;a<e.length;++a)if(i[(s=a2(e[a])).family]&&(s.family=i[s.family]),t.hasOwnProperty(s.family)){o=t[s.family];break}if(!(o=o||t[r]))throw new Error("Could not find a font-family for the rule '"+Dw(s)+"' and default family '"+r+"'.");if(o=function(l,u){if(u[l])return u[l];var h=o2[l],f=h<=o2.normal?-1:1,m=Rw(u,xA,h,f);if(!m)throw new Error("Could not find a matching font-stretch value for "+l);return m}(s.stretch,o),o=function(l,u){if(u[l])return u[l];for(var h=bA[l],f=0;f<h.length;++f)if(u[h[f]])return u[h[f]];throw new Error("Could not find a matching font-style for "+l)}(s.style,o),!(o=function(l,u){if(u[l])return u[l];if(l===400&&u[500])return u[500];if(l===500&&u[400])return u[400];var h=uD[l],f=Rw(u,SA,h,l<400?-1:1);if(!f)throw new Error("Could not find a matching font-weight for value "+l);return f}(s.weight,o)))throw new Error("Failed to resolve a font for the rule '"+Dw(s)+"'.");return o}function Ow(t){return t.trimLeft()}function dD(t,e){for(var n=0;n<t.length;){if(t.charAt(n)===e)return[t.substring(0,n),t.substring(n+1)];n+=1}return null}function fD(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],t.substring(e[0].length)]}var zf,Fw,Mw,x1=["times"];(function(t){var e,n,r,i,s,o,a,l,u,h=function(M){return M=M||{},this.isStrokeTransparent=M.isStrokeTransparent||!1,this.strokeOpacity=M.strokeOpacity||1,this.strokeStyle=M.strokeStyle||"#000000",this.fillStyle=M.fillStyle||"#000000",this.isFillTransparent=M.isFillTransparent||!1,this.fillOpacity=M.fillOpacity||1,this.font=M.font||"10px sans-serif",this.textBaseline=M.textBaseline||"alphabetic",this.textAlign=M.textAlign||"left",this.lineWidth=M.lineWidth||1,this.lineJoin=M.lineJoin||"miter",this.lineCap=M.lineCap||"butt",this.path=M.path||[],this.transform=M.transform!==void 0?M.transform.clone():new l,this.globalCompositeOperation=M.globalCompositeOperation||"normal",this.globalAlpha=M.globalAlpha||1,this.clip_path=M.clip_path||[],this.currentPoint=M.currentPoint||new o,this.miterLimit=M.miterLimit||10,this.lastPoint=M.lastPoint||new o,this.lineDashOffset=M.lineDashOffset||0,this.lineDash=M.lineDash||[],this.margin=M.margin||[0,0,0,0],this.prevPageLastElemOffset=M.prevPageLastElemOffset||0,this.ignoreClearRect=typeof M.ignoreClearRect!="boolean"||M.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new f(this),e=this.internal.f2,n=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,o=this.internal.Point,a=this.internal.Rectangle,l=this.internal.Matrix,u=new h}]);var f=function(M){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var Y=M;Object.defineProperty(this,"pdf",{get:function(){return Y}});var X=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return X},set:function(Se){X=!!Se}});var H=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return H},set:function(Se){H=!!Se}});var oe=0;Object.defineProperty(this,"posX",{get:function(){return oe},set:function(Se){isNaN(Se)||(oe=Se)}});var ne=0;Object.defineProperty(this,"posY",{get:function(){return ne},set:function(Se){isNaN(Se)||(ne=Se)}}),Object.defineProperty(this,"margin",{get:function(){return u.margin},set:function(Se){var ae;typeof Se=="number"?ae=[Se,Se,Se,Se]:((ae=new Array(4))[0]=Se[0],ae[1]=Se.length>=2?Se[1]:ae[0],ae[2]=Se.length>=3?Se[2]:ae[0],ae[3]=Se.length>=4?Se[3]:ae[1]),u.margin=ae}});var ue=!1;Object.defineProperty(this,"autoPaging",{get:function(){return ue},set:function(Se){ue=Se}});var he=0;Object.defineProperty(this,"lastBreak",{get:function(){return he},set:function(Se){he=Se}});var Ee=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Ee},set:function(Se){Ee=Se}}),Object.defineProperty(this,"ctx",{get:function(){return u},set:function(Se){Se instanceof h&&(u=Se)}}),Object.defineProperty(this,"path",{get:function(){return u.path},set:function(Se){u.path=Se}});var Ne=[];Object.defineProperty(this,"ctxStack",{get:function(){return Ne},set:function(Se){Ne=Se}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Se){var ae;ae=m(Se),this.ctx.fillStyle=ae.style,this.ctx.isFillTransparent=ae.a===0,this.ctx.fillOpacity=ae.a,this.pdf.setFillColor(ae.r,ae.g,ae.b,{a:ae.a}),this.pdf.setTextColor(ae.r,ae.g,ae.b,{a:ae.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Se){var ae=m(Se);this.ctx.strokeStyle=ae.style,this.ctx.isStrokeTransparent=ae.a===0,this.ctx.strokeOpacity=ae.a,ae.a===0?this.pdf.setDrawColor(255,255,255):(ae.a,this.pdf.setDrawColor(ae.r,ae.g,ae.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Se){["butt","round","square"].indexOf(Se)!==-1&&(this.ctx.lineCap=Se,this.pdf.setLineCap(Se))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Se){isNaN(Se)||(this.ctx.lineWidth=Se,this.pdf.setLineWidth(Se))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Se){["bevel","round","miter"].indexOf(Se)!==-1&&(this.ctx.lineJoin=Se,this.pdf.setLineJoin(Se))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Se){isNaN(Se)||(this.ctx.miterLimit=Se,this.pdf.setMiterLimit(Se))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Se){this.ctx.textBaseline=Se}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Se){["right","end","center","left","start"].indexOf(Se)!==-1&&(this.ctx.textAlign=Se)}});var je=null;function Ue(Se,ae){if(je===null){var ye=function(Re){var Te=[];return Object.keys(Re).forEach(function(Me){Re[Me].forEach(function(Be){var ze=null;switch(Be){case"bold":ze={family:Me,weight:"bold"};break;case"italic":ze={family:Me,style:"italic"};break;case"bolditalic":ze={family:Me,weight:"bold",style:"italic"};break;case"":case"normal":ze={family:Me}}ze!==null&&(ze.ref={name:Me,style:Be},Te.push(ze))})}),Te}(Se.getFontList());je=function(Re){for(var Te={},Me=0;Me<Re.length;++Me){var Be=a2(Re[Me]),ze=Be.family,He=Be.stretch,Qe=Be.style,st=Be.weight;Te[ze]=Te[ze]||{},Te[ze][He]=Te[ze][He]||{},Te[ze][He][Qe]=Te[ze][He][Qe]||{},Te[ze][He][Qe][st]=Be}return Te}(ye.concat(ae))}return je}var Ye=null;Object.defineProperty(this,"fontFaces",{get:function(){return Ye},set:function(Se){je=null,Ye=Se}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Se){var ae;if(this.ctx.font=Se,(ae=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(Se))!==null){var ye=ae[1],Re=(ae[2],ae[3]),Te=ae[4],Me=(ae[5],ae[6]),Be=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Te)[2];Te=Math.floor(Be==="px"?parseFloat(Te)*this.pdf.internal.scaleFactor:Be==="em"?parseFloat(Te)*this.pdf.getFontSize():parseFloat(Te)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Te);var ze=function(ot){var at,$e,Lt=[],vt=ot.trim();if(vt==="")return x1;if(vt in jw)return[jw[vt]];for(;vt!=="";){switch($e=null,at=(vt=Ow(vt)).charAt(0)){case'"':case"'":$e=dD(vt.substring(1),at);break;default:$e=fD(vt)}if($e===null||(Lt.push($e[0]),(vt=Ow($e[1]))!==""&&vt.charAt(0)!==","))return x1;vt=vt.replace(/^,/,"")}return Lt}(Me);if(this.fontFaces){var He=hD(Ue(this.pdf,this.fontFaces),ze.map(function(ot){return{family:ot,stretch:"normal",weight:Re,style:ye}}));this.pdf.setFont(He.ref.name,He.ref.style)}else{var Qe="";(Re==="bold"||parseInt(Re,10)>=700||ye==="bold")&&(Qe="bold"),ye==="italic"&&(Qe+="italic"),Qe.length===0&&(Qe="normal");for(var st="",tt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},lt=0;lt<ze.length;lt++){if(this.pdf.internal.getFont(ze[lt],Qe,{noFallback:!0,disableWarning:!0})!==void 0){st=ze[lt];break}if(Qe==="bolditalic"&&this.pdf.internal.getFont(ze[lt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)st=ze[lt],Qe="bold";else if(this.pdf.internal.getFont(ze[lt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){st=ze[lt],Qe="normal";break}}if(st===""){for(var ht=0;ht<ze.length;ht++)if(tt[ze[ht]]){st=tt[ze[ht]];break}}st=st===""?"Times":st,this.pdf.setFont(st,Qe)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Se){this.ctx.globalCompositeOperation=Se}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Se){this.ctx.globalAlpha=Se}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Se){this.ctx.lineDashOffset=Se,be.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Se){this.ctx.lineDash=Se,be.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Se){this.ctx.ignoreClearRect=!!Se}})};f.prototype.setLineDash=function(M){this.lineDash=M},f.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},f.prototype.fill=function(){O.call(this,"fill",!1)},f.prototype.stroke=function(){O.call(this,"stroke",!1)},f.prototype.beginPath=function(){this.path=[{type:"begin"}]},f.prototype.moveTo=function(M,Y){if(isNaN(M)||isNaN(Y))throw en.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var X=this.ctx.transform.applyToPoint(new o(M,Y));this.path.push({type:"mt",x:X.x,y:X.y}),this.ctx.lastPoint=new o(M,Y)},f.prototype.closePath=function(){var M=new o(0,0),Y=0;for(Y=this.path.length-1;Y!==-1;Y--)if(this.path[Y].type==="begin"&&Gt(this.path[Y+1])==="object"&&typeof this.path[Y+1].x=="number"){M=new o(this.path[Y+1].x,this.path[Y+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(M.x,M.y)},f.prototype.lineTo=function(M,Y){if(isNaN(M)||isNaN(Y))throw en.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var X=this.ctx.transform.applyToPoint(new o(M,Y));this.path.push({type:"lt",x:X.x,y:X.y}),this.ctx.lastPoint=new o(X.x,X.y)},f.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),O.call(this,null,!0)},f.prototype.quadraticCurveTo=function(M,Y,X,H){if(isNaN(X)||isNaN(H)||isNaN(M)||isNaN(Y))throw en.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var oe=this.ctx.transform.applyToPoint(new o(X,H)),ne=this.ctx.transform.applyToPoint(new o(M,Y));this.path.push({type:"qct",x1:ne.x,y1:ne.y,x:oe.x,y:oe.y}),this.ctx.lastPoint=new o(oe.x,oe.y)},f.prototype.bezierCurveTo=function(M,Y,X,H,oe,ne){if(isNaN(oe)||isNaN(ne)||isNaN(M)||isNaN(Y)||isNaN(X)||isNaN(H))throw en.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var ue=this.ctx.transform.applyToPoint(new o(oe,ne)),he=this.ctx.transform.applyToPoint(new o(M,Y)),Ee=this.ctx.transform.applyToPoint(new o(X,H));this.path.push({type:"bct",x1:he.x,y1:he.y,x2:Ee.x,y2:Ee.y,x:ue.x,y:ue.y}),this.ctx.lastPoint=new o(ue.x,ue.y)},f.prototype.arc=function(M,Y,X,H,oe,ne){if(isNaN(M)||isNaN(Y)||isNaN(X)||isNaN(H)||isNaN(oe))throw en.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(ne=!!ne,!this.ctx.transform.isIdentity){var ue=this.ctx.transform.applyToPoint(new o(M,Y));M=ue.x,Y=ue.y;var he=this.ctx.transform.applyToPoint(new o(0,X)),Ee=this.ctx.transform.applyToPoint(new o(0,0));X=Math.sqrt(Math.pow(he.x-Ee.x,2)+Math.pow(he.y-Ee.y,2))}Math.abs(oe-H)>=2*Math.PI&&(H=0,oe=2*Math.PI),this.path.push({type:"arc",x:M,y:Y,radius:X,startAngle:H,endAngle:oe,counterclockwise:ne})},f.prototype.arcTo=function(M,Y,X,H,oe){throw new Error("arcTo not implemented.")},f.prototype.rect=function(M,Y,X,H){if(isNaN(M)||isNaN(Y)||isNaN(X)||isNaN(H))throw en.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(M,Y),this.lineTo(M+X,Y),this.lineTo(M+X,Y+H),this.lineTo(M,Y+H),this.lineTo(M,Y),this.lineTo(M+X,Y),this.lineTo(M,Y)},f.prototype.fillRect=function(M,Y,X,H){if(isNaN(M)||isNaN(Y)||isNaN(X)||isNaN(H))throw en.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!p.call(this)){var oe={};this.lineCap!=="butt"&&(oe.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(oe.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(M,Y,X,H),this.fill(),oe.hasOwnProperty("lineCap")&&(this.lineCap=oe.lineCap),oe.hasOwnProperty("lineJoin")&&(this.lineJoin=oe.lineJoin)}},f.prototype.strokeRect=function(M,Y,X,H){if(isNaN(M)||isNaN(Y)||isNaN(X)||isNaN(H))throw en.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");b.call(this)||(this.beginPath(),this.rect(M,Y,X,H),this.stroke())},f.prototype.clearRect=function(M,Y,X,H){if(isNaN(M)||isNaN(Y)||isNaN(X)||isNaN(H))throw en.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(M,Y,X,H))},f.prototype.save=function(M){M=typeof M!="boolean"||M;for(var Y=this.pdf.internal.getCurrentPageInfo().pageNumber,X=0;X<this.pdf.internal.getNumberOfPages();X++)this.pdf.setPage(X+1),this.pdf.internal.out("q");if(this.pdf.setPage(Y),M){this.ctx.fontSize=this.pdf.internal.getFontSize();var H=new h(this.ctx);this.ctxStack.push(this.ctx),this.ctx=H}},f.prototype.restore=function(M){M=typeof M!="boolean"||M;for(var Y=this.pdf.internal.getCurrentPageInfo().pageNumber,X=0;X<this.pdf.internal.getNumberOfPages();X++)this.pdf.setPage(X+1),this.pdf.internal.out("Q");this.pdf.setPage(Y),M&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},f.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var m=function(M){var Y,X,H,oe;if(M.isCanvasGradient===!0&&(M=M.getColor()),!M)return{r:0,g:0,b:0,a:0,style:M};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(M))Y=0,X=0,H=0,oe=0;else{var ne=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(M);if(ne!==null)Y=parseInt(ne[1]),X=parseInt(ne[2]),H=parseInt(ne[3]),oe=1;else if((ne=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(M))!==null)Y=parseInt(ne[1]),X=parseInt(ne[2]),H=parseInt(ne[3]),oe=parseFloat(ne[4]);else{if(oe=1,typeof M=="string"&&M.charAt(0)!=="#"){var ue=new pA(M);M=ue.ok?ue.toHex():"#000000"}M.length===4?(Y=M.substring(1,2),Y+=Y,X=M.substring(2,3),X+=X,H=M.substring(3,4),H+=H):(Y=M.substring(1,3),X=M.substring(3,5),H=M.substring(5,7)),Y=parseInt(Y,16),X=parseInt(X,16),H=parseInt(H,16)}}return{r:Y,g:X,b:H,a:oe,style:M}},p=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},b=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};f.prototype.fillText=function(M,Y,X,H){if(isNaN(Y)||isNaN(X)||typeof M!="string")throw en.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(H=isNaN(H)?void 0:H,!p.call(this)){var oe=G(this.ctx.transform.rotation),ne=this.ctx.transform.scaleX;T.call(this,{text:M,x:Y,y:X,scale:ne,angle:oe,align:this.textAlign,maxWidth:H})}},f.prototype.strokeText=function(M,Y,X,H){if(isNaN(Y)||isNaN(X)||typeof M!="string")throw en.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!b.call(this)){H=isNaN(H)?void 0:H;var oe=G(this.ctx.transform.rotation),ne=this.ctx.transform.scaleX;T.call(this,{text:M,x:Y,y:X,scale:ne,renderingMode:"stroke",angle:oe,align:this.textAlign,maxWidth:H})}},f.prototype.measureText=function(M){if(typeof M!="string")throw en.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var Y=this.pdf,X=this.pdf.internal.scaleFactor,H=Y.internal.getFontSize(),oe=Y.getStringUnitWidth(M)*H/Y.internal.scaleFactor,ne=function(ue){var he=(ue=ue||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return he}}),this};return new ne({width:oe*=Math.round(96*X/72*1e4)/1e4})},f.prototype.scale=function(M,Y){if(isNaN(M)||isNaN(Y))throw en.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var X=new l(M,0,0,Y,0,0);this.ctx.transform=this.ctx.transform.multiply(X)},f.prototype.rotate=function(M){if(isNaN(M))throw en.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var Y=new l(Math.cos(M),Math.sin(M),-Math.sin(M),Math.cos(M),0,0);this.ctx.transform=this.ctx.transform.multiply(Y)},f.prototype.translate=function(M,Y){if(isNaN(M)||isNaN(Y))throw en.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var X=new l(1,0,0,1,M,Y);this.ctx.transform=this.ctx.transform.multiply(X)},f.prototype.transform=function(M,Y,X,H,oe,ne){if(isNaN(M)||isNaN(Y)||isNaN(X)||isNaN(H)||isNaN(oe)||isNaN(ne))throw en.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var ue=new l(M,Y,X,H,oe,ne);this.ctx.transform=this.ctx.transform.multiply(ue)},f.prototype.setTransform=function(M,Y,X,H,oe,ne){M=isNaN(M)?1:M,Y=isNaN(Y)?0:Y,X=isNaN(X)?0:X,H=isNaN(H)?1:H,oe=isNaN(oe)?0:oe,ne=isNaN(ne)?0:ne,this.ctx.transform=new l(M,Y,X,H,oe,ne)};var x=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};f.prototype.drawImage=function(M,Y,X,H,oe,ne,ue,he,Ee){var Ne=this.pdf.getImageProperties(M),je=1,Ue=1,Ye=1,Se=1;H!==void 0&&he!==void 0&&(Ye=he/H,Se=Ee/oe,je=Ne.width/H*he/H,Ue=Ne.height/oe*Ee/oe),ne===void 0&&(ne=Y,ue=X,Y=0,X=0),H!==void 0&&he===void 0&&(he=H,Ee=oe),H===void 0&&he===void 0&&(he=Ne.width,Ee=Ne.height);for(var ae,ye=this.ctx.transform.decompose(),Re=G(ye.rotate.shx),Te=new l,Me=(Te=(Te=(Te=Te.multiply(ye.translate)).multiply(ye.skew)).multiply(ye.scale)).applyToRectangle(new a(ne-Y*Ye,ue-X*Se,H*je,oe*Ue)),Be=I.call(this,Me),ze=[],He=0;He<Be.length;He+=1)ze.indexOf(Be[He])===-1&&ze.push(Be[He]);if(C(ze),this.autoPaging)for(var Qe=ze[0],st=ze[ze.length-1],tt=Qe;tt<st+1;tt++){this.pdf.setPage(tt);var lt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],ht=tt===1?this.posY+this.margin[0]:this.margin[0],ot=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],at=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],$e=tt===1?0:ot+(tt-2)*at;if(this.ctx.clip_path.length!==0){var Lt=this.path;ae=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=E(ae,this.posX+this.margin[3],-$e+ht+this.ctx.prevPageLastElemOffset),K.call(this,"fill",!0),this.path=Lt}var vt=JSON.parse(JSON.stringify(Me));vt=E([vt],this.posX+this.margin[3],-$e+ht+this.ctx.prevPageLastElemOffset)[0];var sn=(tt>Qe||tt<st)&&x.call(this);sn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],lt,at,null).clip().discardPath()),this.pdf.addImage(M,"JPEG",vt.x,vt.y,vt.w,vt.h,null,null,Re),sn&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(M,"JPEG",Me.x,Me.y,Me.w,Me.h,null,null,Re)};var I=function(M,Y,X){var H=[];Y=Y||this.pdf.internal.pageSize.width,X=X||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var oe=this.posY+this.ctx.prevPageLastElemOffset;switch(M.type){default:case"mt":case"lt":H.push(Math.floor((M.y+oe)/X)+1);break;case"arc":H.push(Math.floor((M.y+oe-M.radius)/X)+1),H.push(Math.floor((M.y+oe+M.radius)/X)+1);break;case"qct":var ne=ee(this.ctx.lastPoint.x,this.ctx.lastPoint.y,M.x1,M.y1,M.x,M.y);H.push(Math.floor((ne.y+oe)/X)+1),H.push(Math.floor((ne.y+ne.h+oe)/X)+1);break;case"bct":var ue=ie(this.ctx.lastPoint.x,this.ctx.lastPoint.y,M.x1,M.y1,M.x2,M.y2,M.x,M.y);H.push(Math.floor((ue.y+oe)/X)+1),H.push(Math.floor((ue.y+ue.h+oe)/X)+1);break;case"rect":H.push(Math.floor((M.y+oe)/X)+1),H.push(Math.floor((M.y+M.h+oe)/X)+1)}for(var he=0;he<H.length;he+=1)for(;this.pdf.internal.getNumberOfPages()<H[he];)_.call(this);return H},_=function(){var M=this.fillStyle,Y=this.strokeStyle,X=this.font,H=this.lineCap,oe=this.lineWidth,ne=this.lineJoin;this.pdf.addPage(),this.fillStyle=M,this.strokeStyle=Y,this.font=X,this.lineCap=H,this.lineWidth=oe,this.lineJoin=ne},E=function(M,Y,X){for(var H=0;H<M.length;H++)switch(M[H].type){case"bct":M[H].x2+=Y,M[H].y2+=X;case"qct":M[H].x1+=Y,M[H].y1+=X;case"mt":case"lt":case"arc":default:M[H].x+=Y,M[H].y+=X}return M},C=function(M){return M.sort(function(Y,X){return Y-X})},O=function(M,Y){for(var X,H,oe=this.fillStyle,ne=this.strokeStyle,ue=this.lineCap,he=this.lineWidth,Ee=Math.abs(he*this.ctx.transform.scaleX),Ne=this.lineJoin,je=JSON.parse(JSON.stringify(this.path)),Ue=JSON.parse(JSON.stringify(this.path)),Ye=[],Se=0;Se<Ue.length;Se++)if(Ue[Se].x!==void 0)for(var ae=I.call(this,Ue[Se]),ye=0;ye<ae.length;ye+=1)Ye.indexOf(ae[ye])===-1&&Ye.push(ae[ye]);for(var Re=0;Re<Ye.length;Re++)for(;this.pdf.internal.getNumberOfPages()<Ye[Re];)_.call(this);if(C(Ye),this.autoPaging)for(var Te=Ye[0],Me=Ye[Ye.length-1],Be=Te;Be<Me+1;Be++){this.pdf.setPage(Be),this.fillStyle=oe,this.strokeStyle=ne,this.lineCap=ue,this.lineWidth=Ee,this.lineJoin=Ne;var ze=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],He=Be===1?this.posY+this.margin[0]:this.margin[0],Qe=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],st=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],tt=Be===1?0:Qe+(Be-2)*st;if(this.ctx.clip_path.length!==0){var lt=this.path;X=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=E(X,this.posX+this.margin[3],-tt+He+this.ctx.prevPageLastElemOffset),K.call(this,M,!0),this.path=lt}if(H=JSON.parse(JSON.stringify(je)),this.path=E(H,this.posX+this.margin[3],-tt+He+this.ctx.prevPageLastElemOffset),Y===!1||Be===0){var ht=(Be>Te||Be<Me)&&x.call(this);ht&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ze,st,null).clip().discardPath()),K.call(this,M,Y),ht&&this.pdf.restoreGraphicsState()}this.lineWidth=he}else this.lineWidth=Ee,K.call(this,M,Y),this.lineWidth=he;this.path=je},K=function(M,Y){if((M!=="stroke"||Y||!b.call(this))&&(M==="stroke"||Y||!p.call(this))){for(var X,H,oe=[],ne=this.path,ue=0;ue<ne.length;ue++){var he=ne[ue];switch(he.type){case"begin":oe.push({begin:!0});break;case"close":oe.push({close:!0});break;case"mt":oe.push({start:he,deltas:[],abs:[]});break;case"lt":var Ee=oe.length;if(ne[ue-1]&&!isNaN(ne[ue-1].x)&&(X=[he.x-ne[ue-1].x,he.y-ne[ue-1].y],Ee>0)){for(;Ee>=0;Ee--)if(oe[Ee-1].close!==!0&&oe[Ee-1].begin!==!0){oe[Ee-1].deltas.push(X),oe[Ee-1].abs.push(he);break}}break;case"bct":X=[he.x1-ne[ue-1].x,he.y1-ne[ue-1].y,he.x2-ne[ue-1].x,he.y2-ne[ue-1].y,he.x-ne[ue-1].x,he.y-ne[ue-1].y],oe[oe.length-1].deltas.push(X);break;case"qct":var Ne=ne[ue-1].x+2/3*(he.x1-ne[ue-1].x),je=ne[ue-1].y+2/3*(he.y1-ne[ue-1].y),Ue=he.x+2/3*(he.x1-he.x),Ye=he.y+2/3*(he.y1-he.y),Se=he.x,ae=he.y;X=[Ne-ne[ue-1].x,je-ne[ue-1].y,Ue-ne[ue-1].x,Ye-ne[ue-1].y,Se-ne[ue-1].x,ae-ne[ue-1].y],oe[oe.length-1].deltas.push(X);break;case"arc":oe.push({deltas:[],abs:[],arc:!0}),Array.isArray(oe[oe.length-1].abs)&&oe[oe.length-1].abs.push(he)}}H=Y?null:M==="stroke"?"stroke":"fill";for(var ye=!1,Re=0;Re<oe.length;Re++)if(oe[Re].arc)for(var Te=oe[Re].abs,Me=0;Me<Te.length;Me++){var Be=Te[Me];Be.type==="arc"?y.call(this,Be.x,Be.y,Be.radius,Be.startAngle,Be.endAngle,Be.counterclockwise,void 0,Y,!ye):P.call(this,Be.x,Be.y),ye=!0}else if(oe[Re].close===!0)this.pdf.internal.out("h"),ye=!1;else if(oe[Re].begin!==!0){var ze=oe[Re].start.x,He=oe[Re].start.y;U.call(this,oe[Re].deltas,ze,He),ye=!0}H&&S.call(this,H),Y&&R.call(this)}},B=function(M){var Y=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,X=Y*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return M-X;case"top":return M+Y-X;case"hanging":return M+Y-2*X;case"middle":return M+Y/2-X;case"ideographic":return M;case"alphabetic":default:return M}},L=function(M){return M+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};f.prototype.createLinearGradient=function(){var M=function(){};return M.colorStops=[],M.addColorStop=function(Y,X){this.colorStops.push([Y,X])},M.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},M.isCanvasGradient=!0,M},f.prototype.createPattern=function(){return this.createLinearGradient()},f.prototype.createRadialGradient=function(){return this.createLinearGradient()};var y=function(M,Y,X,H,oe,ne,ue,he,Ee){for(var Ne=F.call(this,X,H,oe,ne),je=0;je<Ne.length;je++){var Ue=Ne[je];je===0&&(Ee?N.call(this,Ue.x1+M,Ue.y1+Y):P.call(this,Ue.x1+M,Ue.y1+Y)),Q.call(this,M,Y,Ue.x2,Ue.y2,Ue.x3,Ue.y3,Ue.x4,Ue.y4)}he?R.call(this):S.call(this,ue)},S=function(M){switch(M){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},R=function(){this.pdf.clip(),this.pdf.discardPath()},N=function(M,Y){this.pdf.internal.out(n(M)+" "+r(Y)+" m")},T=function(M){var Y;switch(M.align){case"right":case"end":Y="right";break;case"center":Y="center";break;case"left":case"start":default:Y="left"}var X=this.pdf.getTextDimensions(M.text),H=B.call(this,M.y),oe=L.call(this,H)-X.h,ne=this.ctx.transform.applyToPoint(new o(M.x,H)),ue=this.ctx.transform.decompose(),he=new l;he=(he=(he=he.multiply(ue.translate)).multiply(ue.skew)).multiply(ue.scale);for(var Ee,Ne,je,Ue=this.ctx.transform.applyToRectangle(new a(M.x,H,X.w,X.h)),Ye=he.applyToRectangle(new a(M.x,oe,X.w,X.h)),Se=I.call(this,Ye),ae=[],ye=0;ye<Se.length;ye+=1)ae.indexOf(Se[ye])===-1&&ae.push(Se[ye]);if(C(ae),this.autoPaging)for(var Re=ae[0],Te=ae[ae.length-1],Me=Re;Me<Te+1;Me++){this.pdf.setPage(Me);var Be=Me===1?this.posY+this.margin[0]:this.margin[0],ze=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],He=this.pdf.internal.pageSize.height-this.margin[2],Qe=He-this.margin[0],st=this.pdf.internal.pageSize.width-this.margin[1],tt=st-this.margin[3],lt=Me===1?0:ze+(Me-2)*Qe;if(this.ctx.clip_path.length!==0){var ht=this.path;Ee=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=E(Ee,this.posX+this.margin[3],-1*lt+Be),K.call(this,"fill",!0),this.path=ht}var ot=E([JSON.parse(JSON.stringify(Ye))],this.posX+this.margin[3],-lt+Be+this.ctx.prevPageLastElemOffset)[0];M.scale>=.01&&(Ne=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Ne*M.scale),je=this.lineWidth,this.lineWidth=je*M.scale);var at=this.autoPaging!=="text";if(at||ot.y+ot.h<=He){if(at||ot.y>=Be&&ot.x<=st){var $e=at?M.text:this.pdf.splitTextToSize(M.text,M.maxWidth||st-ot.x)[0],Lt=E([JSON.parse(JSON.stringify(Ue))],this.posX+this.margin[3],-lt+Be+this.ctx.prevPageLastElemOffset)[0],vt=at&&(Me>Re||Me<Te)&&x.call(this);vt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],tt,Qe,null).clip().discardPath()),this.pdf.text($e,Lt.x,Lt.y,{angle:M.angle,align:Y,renderingMode:M.renderingMode}),vt&&this.pdf.restoreGraphicsState()}}else ot.y<He&&(this.ctx.prevPageLastElemOffset+=He-ot.y);M.scale>=.01&&(this.pdf.setFontSize(Ne),this.lineWidth=je)}else M.scale>=.01&&(Ne=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Ne*M.scale),je=this.lineWidth,this.lineWidth=je*M.scale),this.pdf.text(M.text,ne.x+this.posX,ne.y+this.posY,{angle:M.angle,align:Y,renderingMode:M.renderingMode,maxWidth:M.maxWidth}),M.scale>=.01&&(this.pdf.setFontSize(Ne),this.lineWidth=je)},P=function(M,Y,X,H){X=X||0,H=H||0,this.pdf.internal.out(n(M+X)+" "+r(Y+H)+" l")},U=function(M,Y,X){return this.pdf.lines(M,Y,X,null,null)},Q=function(M,Y,X,H,oe,ne,ue,he){this.pdf.internal.out([e(i(X+M)),e(s(H+Y)),e(i(oe+M)),e(s(ne+Y)),e(i(ue+M)),e(s(he+Y)),"c"].join(" "))},F=function(M,Y,X,H){for(var oe=2*Math.PI,ne=Math.PI/2;Y>X;)Y-=oe;var ue=Math.abs(X-Y);ue<oe&&H&&(ue=oe-ue);for(var he=[],Ee=H?-1:1,Ne=Y;ue>1e-5;){var je=Ne+Ee*Math.min(ue,ne);he.push(V.call(this,M,Ne,je)),ue-=Math.abs(je-Ne),Ne=je}return he},V=function(M,Y,X){var H=(X-Y)/2,oe=M*Math.cos(H),ne=M*Math.sin(H),ue=oe,he=-ne,Ee=ue*ue+he*he,Ne=Ee+ue*oe+he*ne,je=4/3*(Math.sqrt(2*Ee*Ne)-Ne)/(ue*ne-he*oe),Ue=ue-je*he,Ye=he+je*ue,Se=Ue,ae=-Ye,ye=H+Y,Re=Math.cos(ye),Te=Math.sin(ye);return{x1:M*Math.cos(Y),y1:M*Math.sin(Y),x2:Ue*Re-Ye*Te,y2:Ue*Te+Ye*Re,x3:Se*Re-ae*Te,y3:Se*Te+ae*Re,x4:M*Math.cos(X),y4:M*Math.sin(X)}},G=function(M){return 180*M/Math.PI},ee=function(M,Y,X,H,oe,ne){var ue=M+.5*(X-M),he=Y+.5*(H-Y),Ee=oe+.5*(X-oe),Ne=ne+.5*(H-ne),je=Math.min(M,oe,ue,Ee),Ue=Math.max(M,oe,ue,Ee),Ye=Math.min(Y,ne,he,Ne),Se=Math.max(Y,ne,he,Ne);return new a(je,Ye,Ue-je,Se-Ye)},ie=function(M,Y,X,H,oe,ne,ue,he){var Ee,Ne,je,Ue,Ye,Se,ae,ye,Re,Te,Me,Be,ze,He,Qe=X-M,st=H-Y,tt=oe-X,lt=ne-H,ht=ue-oe,ot=he-ne;for(Ne=0;Ne<41;Ne++)Re=(ae=(je=M+(Ee=Ne/40)*Qe)+Ee*((Ye=X+Ee*tt)-je))+Ee*(Ye+Ee*(oe+Ee*ht-Ye)-ae),Te=(ye=(Ue=Y+Ee*st)+Ee*((Se=H+Ee*lt)-Ue))+Ee*(Se+Ee*(ne+Ee*ot-Se)-ye),Ne==0?(Me=Re,Be=Te,ze=Re,He=Te):(Me=Math.min(Me,Re),Be=Math.min(Be,Te),ze=Math.max(ze,Re),He=Math.max(He,Te));return new a(Math.round(Me),Math.round(Be),Math.round(ze-Me),Math.round(He-Be))},be=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var M,Y,X=(M=this.ctx.lineDash,Y=this.ctx.lineDashOffset,JSON.stringify({lineDash:M,lineDashOffset:Y}));this.prevLineDash!==X&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=X)}}})(dt.API),function(t){var e=function(s){var o,a,l,u,h,f,m,p,b,x;for(a=[],l=0,u=(s+=o="\0\0\0\0".slice(s.length%4||4)).length;u>l;l+=4)(h=(s.charCodeAt(l)<<24)+(s.charCodeAt(l+1)<<16)+(s.charCodeAt(l+2)<<8)+s.charCodeAt(l+3))!==0?(f=(h=((h=((h=((h=(h-(x=h%85))/85)-(b=h%85))/85)-(p=h%85))/85)-(m=h%85))/85)%85,a.push(f+33,m+33,p+33,b+33,x+33)):a.push(122);return function(I,_){for(var E=_;E>0;E--)I.pop()}(a,o.length),String.fromCharCode.apply(String,a)+"~>"},n=function(s){var o,a,l,u,h,f=String,m="length",p=255,b="charCodeAt",x="slice",I="replace";for(s[x](-2),s=s[x](0,-2)[I](/\s/g,"")[I]("z","!!!!!"),l=[],u=0,h=(s+=o="uuuuu"[x](s[m]%5||5))[m];h>u;u+=5)a=52200625*(s[b](u)-33)+614125*(s[b](u+1)-33)+7225*(s[b](u+2)-33)+85*(s[b](u+3)-33)+(s[b](u+4)-33),l.push(p&a>>24,p&a>>16,p&a>>8,p&a);return function(_,E){for(var C=E;C>0;C--)_.pop()}(l,o[m]),f.fromCharCode.apply(f,l)},r=function(s){var o=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((s=s.replace(/\s/g,"")).indexOf(">")!==-1&&(s=s.substr(0,s.indexOf(">"))),s.length%2&&(s+="0"),o.test(s)===!1)return"";for(var a="",l=0;l<s.length;l+=2)a+=String.fromCharCode("0x"+(s[l]+s[l+1]));return a},i=function(s){for(var o=new Uint8Array(s.length),a=s.length;a--;)o[a]=s.charCodeAt(a);return s=(o=t2(o)).reduce(function(l,u){return l+String.fromCharCode(u)},"")};t.processDataByFilters=function(s,o){var a=0,l=s||"",u=[];for(typeof(o=o||[])=="string"&&(o=[o]),a=0;a<o.length;a+=1)switch(o[a]){case"ASCII85Decode":case"/ASCII85Decode":l=n(l),u.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":l=e(l),u.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":l=r(l),u.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":l=l.split("").map(function(h){return("0"+h.charCodeAt().toString(16)).slice(-2)}).join("")+">",u.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":l=i(l),u.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[a]+'" is not implemented')}return{data:l,reverseChain:u.reverse().join(" ")}}}(dt.API),function(t){t.loadFile=function(e,n,r){return function(i,s,o){s=s!==!1,o=typeof o=="function"?o:function(){};var a=void 0;try{a=function(l,u,h){var f=new XMLHttpRequest,m=0,p=function(b){var x=b.length,I=[],_=String.fromCharCode;for(m=0;m<x;m+=1)I.push(_(255&b.charCodeAt(m)));return I.join("")};if(f.open("GET",l,!u),f.overrideMimeType("text/plain; charset=x-user-defined"),u===!1&&(f.onload=function(){f.status===200?h(p(this.responseText)):h(void 0)}),f.send(null),u&&f.status===200)return p(f.responseText)}(i,s,o)}catch{}return a}(e,n,r)},t.loadImageFile=t.loadFile}(dt.API),function(t){function e(){return(ft.html2canvas?Promise.resolve(ft.html2canvas):Y0(()=>import("./html2canvas.esm-CBrSDip1.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load html2canvas: "+o))}).then(function(o){return o.default?o.default:o})}function n(){return(ft.DOMPurify?Promise.resolve(ft.DOMPurify):Y0(()=>import("./purify.es-C_uT9hQ1.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load dompurify: "+o))}).then(function(o){return o.default?o.default:o})}var r=function(o){var a=Gt(o);return a==="undefined"?"undefined":a==="string"||o instanceof String?"string":a==="number"||o instanceof Number?"number":a==="function"||o instanceof Function?"function":o&&o.constructor===Array?"array":o&&o.nodeType===1?"element":a==="object"?"object":"unknown"},i=function(o,a){var l=document.createElement(o);for(var u in a.className&&(l.className=a.className),a.innerHTML&&a.dompurify&&(l.innerHTML=a.dompurify.sanitize(a.innerHTML)),a.style)l.style[u]=a.style[u];return l},s=function o(a){var l=Object.assign(o.convert(Promise.resolve()),JSON.parse(JSON.stringify(o.template))),u=o.convert(Promise.resolve(),l);return u=(u=u.setProgress(1,o,1,[o])).set(a)};(s.prototype=Object.create(Promise.prototype)).constructor=s,s.convert=function(o,a){return o.__proto__=a||s.prototype,o},s.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},s.prototype.from=function(o,a){return this.then(function(){switch(a=a||function(l){switch(r(l)){case"string":return"string";case"element":return l.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(o)){case"string":return this.then(n).then(function(l){return this.set({src:i("div",{innerHTML:o,dompurify:l})})});case"element":return this.set({src:o});case"canvas":return this.set({canvas:o});case"img":return this.set({img:o});default:return this.error("Unknown source type.")}})},s.prototype.to=function(o){switch(o){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},s.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var o={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},a=function l(u,h){for(var f=u.nodeType===3?document.createTextNode(u.nodeValue):u.cloneNode(!1),m=u.firstChild;m;m=m.nextSibling)h!==!0&&m.nodeType===1&&m.nodeName==="SCRIPT"||f.appendChild(l(m,h));return u.nodeType===1&&(u.nodeName==="CANVAS"?(f.width=u.width,f.height=u.height,f.getContext("2d").drawImage(u,0,0)):u.nodeName!=="TEXTAREA"&&u.nodeName!=="SELECT"||(f.value=u.value),f.addEventListener("load",function(){f.scrollTop=u.scrollTop,f.scrollLeft=u.scrollLeft},!0)),f}(this.prop.src,this.opt.html2canvas.javascriptEnabled);a.tagName==="BODY"&&(o.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:o}),this.prop.container.appendChild(a),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},s.prototype.toCanvas=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(a){var l=Object.assign({},this.opt.html2canvas);return delete l.onrendered,a(this.prop.container,l)}).then(function(a){(this.opt.html2canvas.onrendered||function(){})(a),this.prop.canvas=a,document.body.removeChild(this.prop.overlay)})},s.prototype.toContext2d=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(a){var l=this.opt.jsPDF,u=this.opt.fontFaces,h=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,f=Object.assign({async:!0,allowTaint:!0,scale:h,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete f.onrendered,l.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,l.context2d.posX=this.opt.x,l.context2d.posY=this.opt.y,l.context2d.margin=this.opt.margin,l.context2d.fontFaces=u,u)for(var m=0;m<u.length;++m){var p=u[m],b=p.src.find(function(x){return x.format==="truetype"});b&&l.addFont(b.url,p.ref.name,p.ref.style)}return f.windowHeight=f.windowHeight||0,f.windowHeight=f.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):f.windowHeight,l.context2d.save(!0),a(this.prop.container,f)}).then(function(a){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(a),this.prop.canvas=a,document.body.removeChild(this.prop.overlay)})},s.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var o=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=o})},s.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},s.prototype.output=function(o,a,l){return(l=l||"pdf").toLowerCase()==="img"||l.toLowerCase()==="image"?this.outputImg(o,a):this.outputPdf(o,a)},s.prototype.outputPdf=function(o,a){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(o,a)})},s.prototype.outputImg=function(o){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(o){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+o+'" is not supported.'}})},s.prototype.save=function(o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(o?{filename:o}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},s.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},s.prototype.set=function(o){if(r(o)!=="object")return this;var a=Object.keys(o||{}).map(function(l){if(l in s.template.prop)return function(){this.prop[l]=o[l]};switch(l){case"margin":return this.setMargin.bind(this,o.margin);case"jsPDF":return function(){return this.opt.jsPDF=o.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,o.pageSize);default:return function(){this.opt[l]=o[l]}}},this);return this.then(function(){return this.thenList(a)})},s.prototype.get=function(o,a){return this.then(function(){var l=o in s.template.prop?this.prop[o]:this.opt[o];return a?a(l):l})},s.prototype.setMargin=function(o){return this.then(function(){switch(r(o)){case"number":o=[o,o,o,o];case"array":if(o.length===2&&(o=[o[0],o[1],o[0],o[1]]),o.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=o}).then(this.setPageSize)},s.prototype.setPageSize=function(o){function a(l,u){return Math.floor(l*u/72*96)}return this.then(function(){(o=o||dt.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(o.inner={width:o.width-this.opt.margin[1]-this.opt.margin[3],height:o.height-this.opt.margin[0]-this.opt.margin[2]},o.inner.px={width:a(o.inner.width,o.k),height:a(o.inner.height,o.k)},o.inner.ratio=o.inner.height/o.inner.width),this.prop.pageSize=o})},s.prototype.setProgress=function(o,a,l,u){return o!=null&&(this.progress.val=o),a!=null&&(this.progress.state=a),l!=null&&(this.progress.n=l),u!=null&&(this.progress.stack=u),this.progress.ratio=this.progress.val/this.progress.state,this},s.prototype.updateProgress=function(o,a,l,u){return this.setProgress(o?this.progress.val+o:null,a||null,l?this.progress.n+l:null,u?this.progress.stack.concat(u):null)},s.prototype.then=function(o,a){var l=this;return this.thenCore(o,a,function(u,h){return l.updateProgress(null,null,1,[u]),Promise.prototype.then.call(this,function(f){return l.updateProgress(null,u),f}).then(u,h).then(function(f){return l.updateProgress(1),f})})},s.prototype.thenCore=function(o,a,l){l=l||Promise.prototype.then,o&&(o=o.bind(this)),a&&(a=a.bind(this));var u=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:s.convert(Object.assign({},this),Promise.prototype),h=l.call(u,o,a);return s.convert(h,this.__proto__)},s.prototype.thenExternal=function(o,a){return Promise.prototype.then.call(this,o,a)},s.prototype.thenList=function(o){var a=this;return o.forEach(function(l){a=a.thenCore(l)}),a},s.prototype.catch=function(o){o&&(o=o.bind(this));var a=Promise.prototype.catch.call(this,o);return s.convert(a,this)},s.prototype.catchExternal=function(o){return Promise.prototype.catch.call(this,o)},s.prototype.error=function(o){return this.then(function(){throw new Error(o)})},s.prototype.using=s.prototype.set,s.prototype.saveAs=s.prototype.save,s.prototype.export=s.prototype.output,s.prototype.run=s.prototype.then,dt.getPageSize=function(o,a,l){if(Gt(o)==="object"){var u=o;o=u.orientation,a=u.unit||a,l=u.format||l}a=a||"mm",l=l||"a4",o=(""+(o||"P")).toLowerCase();var h,f=(""+l).toLowerCase(),m={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(a){case"pt":h=1;break;case"mm":h=72/25.4;break;case"cm":h=72/2.54;break;case"in":h=72;break;case"px":h=.75;break;case"pc":case"em":h=12;break;case"ex":h=6;break;default:throw"Invalid unit: "+a}var p,b=0,x=0;if(m.hasOwnProperty(f))b=m[f][1]/h,x=m[f][0]/h;else try{b=l[1],x=l[0]}catch{throw new Error("Invalid format: "+l)}if(o==="p"||o==="portrait")o="p",x>b&&(p=x,x=b,b=p);else{if(o!=="l"&&o!=="landscape")throw"Invalid orientation: "+o;o="l",b>x&&(p=x,x=b,b=p)}return{width:x,height:b,unit:a,k:h,orientation:o}},t.html=function(o,a){(a=a||{}).callback=a.callback||function(){},a.html2canvas=a.html2canvas||{},a.html2canvas.canvas=a.html2canvas.canvas||this.canvas,a.jsPDF=a.jsPDF||this,a.fontFaces=a.fontFaces?a.fontFaces.map(a2):null;var l=new s(a);return a.worker?l:l.from(o).doCallback()}}(dt.API),dt.API.addJS=function(t){return Mw=t,this.internal.events.subscribe("postPutResources",function(){zf=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(zf+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),Fw=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+Mw+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){zf!==void 0&&Fw!==void 0&&this.internal.out("/Names <</JavaScript "+zf+" 0 R>>")}),this},function(t){var e;t.events.push(["postPutResources",function(){var n=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=n.outline.render().split(/\r\n/),s=0;s<i.length;s++){var o=i[s],a=r.exec(o);if(a!=null){var l=a[1];n.internal.newObjectDeferredBegin(l,!1)}n.internal.write(o)}if(this.outline.createNamedDestinations){var u=this.internal.pages.length,h=[];for(s=0;s<u;s++){var f=n.internal.newObject();h.push(f);var m=n.internal.getPageInfo(s+1);n.internal.write("<< /D["+m.objId+" 0 R /XYZ null null null]>> endobj")}var p=n.internal.newObject();for(n.internal.write("<< /Names [ "),s=0;s<h.length;s++)n.internal.write("(page_"+(s+1)+")"+h[s]+" 0 R");n.internal.write(" ] >>","endobj"),e=n.internal.newObject(),n.internal.write("<< /Dests "+p+" 0 R"),n.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var n=this;n.outline={createNamedDestinations:!1,root:{children:[]}},n.outline.add=function(r,i,s){var o={title:i,options:s,children:[]};return r==null&&(r=this.root),r.children.push(o),o},n.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=n,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},n.outline.genIds_r=function(r){r.id=n.internal.newObjectDeferred();for(var i=0;i<r.children.length;i++)this.genIds_r(r.children[i])},n.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},n.outline.renderItems=function(r){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<r.children.length;s++){var o=r.children[s];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(r)),s>0&&this.line("/Prev "+this.makeRef(r.children[s-1])),s<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[s+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var a=this.count=this.count_r({count:0},o);if(a>0&&this.line("/Count "+a),o.options&&o.options.pageNumber){var l=n.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+l.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var u=0;u<r.children.length;u++)this.renderItems(r.children[u])},n.outline.line=function(r){this.ctx.val+=r+`\r
`},n.outline.makeRef=function(r){return r.id+" 0 R"},n.outline.makeString=function(r){return"("+n.internal.pdfEscape(r)+")"},n.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},n.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},n.outline.count_r=function(r,i){for(var s=0;s<i.children.length;s++)r.count++,this.count_r(r,i.children[s]);return r.count}}])}(dt.API),function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(n,r,i,s,o,a){var l,u=this.decode.DCT_DECODE,h=null;if(typeof n=="string"||this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n)){switch(n=o||n,n=this.__addimage__.isArrayBuffer(n)?new Uint8Array(n):n,(l=function(f){for(var m,p=256*f.charCodeAt(4)+f.charCodeAt(5),b=f.length,x={width:0,height:0,numcomponents:1},I=4;I<b;I+=2){if(I+=p,e.indexOf(f.charCodeAt(I+1))!==-1){m=256*f.charCodeAt(I+5)+f.charCodeAt(I+6),x={width:256*f.charCodeAt(I+7)+f.charCodeAt(I+8),height:m,numcomponents:f.charCodeAt(I+9)};break}p=256*f.charCodeAt(I+2)+f.charCodeAt(I+3)}return x}(n=this.__addimage__.isArrayBufferView(n)?this.__addimage__.arrayBufferToBinaryString(n):n)).numcomponents){case 1:a=this.color_spaces.DEVICE_GRAY;break;case 4:a=this.color_spaces.DEVICE_CMYK;break;case 3:a=this.color_spaces.DEVICE_RGB}h={data:n,width:l.width,height:l.height,colorSpace:a,bitsPerComponent:8,filter:u,index:r,alias:i}}return h}}(dt.API);var Ou,$f,Uw,Vw,Bw,pD=function(){var t,e,n;function r(s){var o,a,l,u,h,f,m,p,b,x,I,_,E,C;for(this.data=s,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},f=null;;){switch(o=this.readUInt32(),b=(function(){var O,K;for(K=[],O=0;O<4;++O)K.push(String.fromCharCode(this.data[this.pos++]));return K}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(o);break;case"fcTL":f&&this.animation.frames.push(f),this.pos+=4,f={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},h=this.readUInt16(),u=this.readUInt16()||100,f.delay=1e3*h/u,f.disposeOp=this.data[this.pos++],f.blendOp=this.data[this.pos++],f.data=[];break;case"IDAT":case"fdAT":for(b==="fdAT"&&(this.pos+=4,o-=4),s=(f!=null?f.data:void 0)||this.imgData,_=0;0<=o?_<o:_>o;0<=o?++_:--_)s.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(l=this.palette.length/3,this.transparency.indexed=this.read(o),this.transparency.indexed.length>l)throw new Error("More transparent colors than palette size");if((x=l-this.transparency.indexed.length)>0)for(E=0;0<=x?E<x:E>x;0<=x?++E:--E)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(o)[0];break;case 2:this.transparency.rgb=this.read(o)}break;case"tEXt":m=(I=this.read(o)).indexOf(0),p=String.fromCharCode.apply(String,I.slice(0,m)),this.text[p]=String.fromCharCode.apply(String,I.slice(m+1));break;case"IEND":return f&&this.animation.frames.push(f),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(C=this.colorType)===4||C===6,a=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*a,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=o}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}r.prototype.read=function(s){var o,a;for(a=[],o=0;0<=s?o<s:o>s;0<=s?++o:--o)a.push(this.data[this.pos++]);return a},r.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.decodePixels=function(s){var o=this.pixelBitlength/8,a=new Uint8Array(this.width*this.height*o),l=0,u=this;if(s==null&&(s=this.imgData),s.length===0)return new Uint8Array(0);function h(f,m,p,b){var x,I,_,E,C,O,K,B,L,y,S,R,N,T,P,U,Q,F,V,G,ee,ie=Math.ceil((u.width-f)/p),be=Math.ceil((u.height-m)/b),M=u.width==ie&&u.height==be;for(T=o*ie,R=M?a:new Uint8Array(T*be),O=s.length,N=0,I=0;N<be&&l<O;){switch(s[l++]){case 0:for(E=Q=0;Q<T;E=Q+=1)R[I++]=s[l++];break;case 1:for(E=F=0;F<T;E=F+=1)x=s[l++],C=E<o?0:R[I-o],R[I++]=(x+C)%256;break;case 2:for(E=V=0;V<T;E=V+=1)x=s[l++],_=(E-E%o)/o,P=N&&R[(N-1)*T+_*o+E%o],R[I++]=(P+x)%256;break;case 3:for(E=G=0;G<T;E=G+=1)x=s[l++],_=(E-E%o)/o,C=E<o?0:R[I-o],P=N&&R[(N-1)*T+_*o+E%o],R[I++]=(x+Math.floor((C+P)/2))%256;break;case 4:for(E=ee=0;ee<T;E=ee+=1)x=s[l++],_=(E-E%o)/o,C=E<o?0:R[I-o],N===0?P=U=0:(P=R[(N-1)*T+_*o+E%o],U=_&&R[(N-1)*T+(_-1)*o+E%o]),K=C+P-U,B=Math.abs(K-C),y=Math.abs(K-P),S=Math.abs(K-U),L=B<=y&&B<=S?C:y<=S?P:U,R[I++]=(x+L)%256;break;default:throw new Error("Invalid filter algorithm: "+s[l-1])}if(!M){var Y=((m+N*b)*u.width+f)*o,X=N*T;for(E=0;E<ie;E+=1){for(var H=0;H<o;H+=1)a[Y++]=R[X++];Y+=(p-1)*o}}N++}}return s=W7(s),u.interlaceMethod==1?(h(0,0,8,8),h(4,0,8,8),h(0,4,4,8),h(2,0,4,4),h(0,2,2,4),h(1,0,2,2),h(0,1,1,2)):h(0,0,1,1),a},r.prototype.decodePalette=function(){var s,o,a,l,u,h,f,m,p;for(a=this.palette,h=this.transparency.indexed||[],u=new Uint8Array((h.length||0)+a.length),l=0,s=0,o=f=0,m=a.length;f<m;o=f+=3)u[l++]=a[o],u[l++]=a[o+1],u[l++]=a[o+2],u[l++]=(p=h[s++])!=null?p:255;return u},r.prototype.copyToImageData=function(s,o){var a,l,u,h,f,m,p,b,x,I,_;if(l=this.colors,x=null,a=this.hasAlphaChannel,this.palette.length&&(x=(_=this._decodedPalette)!=null?_:this._decodedPalette=this.decodePalette(),l=4,a=!0),b=(u=s.data||s).length,f=x||o,h=m=0,l===1)for(;h<b;)p=x?4*o[h/4]:m,I=f[p++],u[h++]=I,u[h++]=I,u[h++]=I,u[h++]=a?f[p++]:255,m=p;else for(;h<b;)p=x?4*o[h/4]:m,u[h++]=f[p++],u[h++]=f[p++],u[h++]=f[p++],u[h++]=a?f[p++]:255,m=p},r.prototype.decode=function(){var s;return s=new Uint8Array(this.width*this.height*4),this.copyToImageData(s,this.decodePixels()),s};var i=function(){if(Object.prototype.toString.call(ft)==="[object Window]"){try{e=ft.document.createElement("canvas"),n=e.getContext("2d")}catch{return!1}return!0}return!1};return i(),t=function(s){var o;if(i()===!0)return n.width=s.width,n.height=s.height,n.clearRect(0,0,s.width,s.height),n.putImageData(s,0,0),(o=new Image).src=e.toDataURL(),o;throw new Error("This method requires a Browser with Canvas-capability.")},r.prototype.decodeFrames=function(s){var o,a,l,u,h,f,m,p;if(this.animation){for(p=[],a=h=0,f=(m=this.animation.frames).length;h<f;a=++h)o=m[a],l=s.createImageData(o.width,o.height),u=this.decodePixels(new Uint8Array(o.data)),this.copyToImageData(l,u),o.imageData=l,p.push(o.image=t(l));return p}},r.prototype.renderFrame=function(s,o){var a,l,u;return a=(l=this.animation.frames)[o],u=l[o-1],o===0&&s.clearRect(0,0,this.width,this.height),(u!=null?u.disposeOp:void 0)===1?s.clearRect(u.xOffset,u.yOffset,u.width,u.height):(u!=null?u.disposeOp:void 0)===2&&s.putImageData(u.imageData,u.xOffset,u.yOffset),a.blendOp===0&&s.clearRect(a.xOffset,a.yOffset,a.width,a.height),s.drawImage(a.image,a.xOffset,a.yOffset)},r.prototype.animate=function(s){var o,a,l,u,h,f,m=this;return a=0,f=this.animation,u=f.numFrames,l=f.frames,h=f.numPlays,(o=function(){var p,b;if(p=a++%u,b=l[p],m.renderFrame(s,p),u>1&&a/u<h)return m.animation._timeout=setTimeout(o,b.delay)})()},r.prototype.stopAnimation=function(){var s;return clearTimeout((s=this.animation)!=null?s._timeout:void 0)},r.prototype.render=function(s){var o,a;return s._png&&s._png.stopAnimation(),s._png=this,s.width=this.width,s.height=this.height,o=s.getContext("2d"),this.animation?(this.decodeFrames(o),this.animate(o)):(a=o.createImageData(this.width,this.height),this.copyToImageData(a,this.decodePixels()),o.putImageData(a,0,0))},r}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function mD(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!=56||t[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var n=t[e++]|t[e++]<<8,r=t[e++]|t[e++]<<8,i=t[e++],s=i>>7,o=1<<(7&i)+1;t[e++],t[e++];var a=null,l=null;s&&(a=e,l=o,e+=3*o);var u=!0,h=[],f=0,m=null,p=0,b=null;for(this.width=n,this.height=r;u&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0)e+=14,b=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((N=t[e++])>=0))throw Error("Invalid block size");if(N===0)break;e+=N}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var x=t[e++];f=t[e++]|t[e++]<<8,m=t[e++],!(1&x)&&(m=null),p=x>>2&7,e++;break;case 254:for(;;){if(!((N=t[e++])>=0))throw Error("Invalid block size");if(N===0)break;e+=N}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var I=t[e++]|t[e++]<<8,_=t[e++]|t[e++]<<8,E=t[e++]|t[e++]<<8,C=t[e++]|t[e++]<<8,O=t[e++],K=O>>6&1,B=1<<(7&O)+1,L=a,y=l,S=!1;O>>7&&(S=!0,L=e,y=B,e+=3*B);var R=e;for(e++;;){var N;if(!((N=t[e++])>=0))throw Error("Invalid block size");if(N===0)break;e+=N}h.push({x:I,y:_,width:E,height:C,has_local_palette:S,palette_offset:L,palette_size:y,data_offset:R,data_length:e-R,transparent_index:m,interlaced:!!K,delay:f,disposal:p});break;case 59:u=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return h.length},this.loopCount=function(){return b},this.frameInfo=function(T){if(T<0||T>=h.length)throw new Error("Frame index out of range.");return h[T]},this.decodeAndBlitFrameBGRA=function(T,P){var U=this.frameInfo(T),Q=U.width*U.height,F=new Uint8Array(Q);qw(t,U.data_offset,F,Q);var V=U.palette_offset,G=U.transparent_index;G===null&&(G=256);var ee=U.width,ie=n-ee,be=ee,M=4*(U.y*n+U.x),Y=4*((U.y+U.height)*n+U.x),X=M,H=4*ie;U.interlaced===!0&&(H+=4*n*7);for(var oe=8,ne=0,ue=F.length;ne<ue;++ne){var he=F[ne];if(be===0&&(be=ee,(X+=H)>=Y&&(H=4*ie+4*n*(oe-1),X=M+(ee+ie)*(oe<<1),oe>>=1)),he===G)X+=4;else{var Ee=t[V+3*he],Ne=t[V+3*he+1],je=t[V+3*he+2];P[X++]=je,P[X++]=Ne,P[X++]=Ee,P[X++]=255}--be}},this.decodeAndBlitFrameRGBA=function(T,P){var U=this.frameInfo(T),Q=U.width*U.height,F=new Uint8Array(Q);qw(t,U.data_offset,F,Q);var V=U.palette_offset,G=U.transparent_index;G===null&&(G=256);var ee=U.width,ie=n-ee,be=ee,M=4*(U.y*n+U.x),Y=4*((U.y+U.height)*n+U.x),X=M,H=4*ie;U.interlaced===!0&&(H+=4*n*7);for(var oe=8,ne=0,ue=F.length;ne<ue;++ne){var he=F[ne];if(be===0&&(be=ee,(X+=H)>=Y&&(H=4*ie+4*n*(oe-1),X=M+(ee+ie)*(oe<<1),oe>>=1)),he===G)X+=4;else{var Ee=t[V+3*he],Ne=t[V+3*he+1],je=t[V+3*he+2];P[X++]=Ee,P[X++]=Ne,P[X++]=je,P[X++]=255}--be}}}function qw(t,e,n,r){for(var i=t[e++],s=1<<i,o=s+1,a=o+1,l=i+1,u=(1<<l)-1,h=0,f=0,m=0,p=t[e++],b=new Int32Array(4096),x=null;;){for(;h<16&&p!==0;)f|=t[e++]<<h,h+=8,p===1?p=t[e++]:--p;if(h<l)break;var I=f&u;if(f>>=l,h-=l,I!==s){if(I===o)break;for(var _=I<a?I:x,E=0,C=_;C>s;)C=b[C]>>8,++E;var O=C;if(m+E+(_!==I?1:0)>r)return void en.log("Warning, gif stream longer than expected.");n[m++]=O;var K=m+=E;for(_!==I&&(n[m++]=O),C=_;E--;)C=b[C],n[--K]=255&C,C>>=8;x!==null&&a<4096&&(b[a++]=x<<8|O,a>=u+1&&l<12&&(++l,u=u<<1|1)),x=I}else a=o+1,u=(1<<(l=i+1))-1,x=null}return m!==r&&en.log("Warning, gif stream shorter than expected."),n}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function S1(t){var e,n,r,i,s,o=Math.floor,a=new Array(64),l=new Array(64),u=new Array(64),h=new Array(64),f=new Array(65535),m=new Array(65535),p=new Array(64),b=new Array(64),x=[],I=0,_=7,E=new Array(64),C=new Array(64),O=new Array(64),K=new Array(256),B=new Array(2048),L=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],y=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],S=[0,1,2,3,4,5,6,7,8,9,10,11],R=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],N=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],T=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],P=[0,1,2,3,4,5,6,7,8,9,10,11],U=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],Q=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function F(M,Y){for(var X=0,H=0,oe=new Array,ne=1;ne<=16;ne++){for(var ue=1;ue<=M[ne];ue++)oe[Y[H]]=[],oe[Y[H]][0]=X,oe[Y[H]][1]=ne,H++,X++;X*=2}return oe}function V(M){for(var Y=M[0],X=M[1]-1;X>=0;)Y&1<<X&&(I|=1<<_),X--,--_<0&&(I==255?(G(255),G(0)):G(I),_=7,I=0)}function G(M){x.push(M)}function ee(M){G(M>>8&255),G(255&M)}function ie(M,Y,X,H,oe){for(var ne,ue=oe[0],he=oe[240],Ee=function(Te,Me){var Be,ze,He,Qe,st,tt,lt,ht,ot,at,$e=0;for(ot=0;ot<8;++ot){Be=Te[$e],ze=Te[$e+1],He=Te[$e+2],Qe=Te[$e+3],st=Te[$e+4],tt=Te[$e+5],lt=Te[$e+6];var Lt=Be+(ht=Te[$e+7]),vt=Be-ht,sn=ze+lt,At=ze-lt,Bt=He+tt,Hr=He-tt,It=Qe+st,ui=Qe-st,Ut=Lt+It,Hn=Lt-It,xn=sn+Bt,Rt=sn-Bt;Te[$e]=Ut+xn,Te[$e+4]=Ut-xn;var it=.707106781*(Rt+Hn);Te[$e+2]=Hn+it,Te[$e+6]=Hn-it;var Et=.382683433*((Ut=ui+Hr)-(Rt=At+vt)),Lr=.5411961*Ut+Et,Yt=1.306562965*Rt+Et,fn=.707106781*(xn=Hr+At),ci=vt+fn,Ze=vt-fn;Te[$e+5]=Ze+Lr,Te[$e+3]=Ze-Lr,Te[$e+1]=ci+Yt,Te[$e+7]=ci-Yt,$e+=8}for($e=0,ot=0;ot<8;++ot){Be=Te[$e],ze=Te[$e+8],He=Te[$e+16],Qe=Te[$e+24],st=Te[$e+32],tt=Te[$e+40],lt=Te[$e+48];var Wr=Be+(ht=Te[$e+56]),gr=Be-ht,Mn=ze+lt,kn=ze-lt,Sn=He+tt,Un=He-tt,Mo=Qe+st,zi=Qe-st,vr=Wr+Mo,Gr=Wr-Mo,Rr=Mn+Sn,jr=Mn-Sn;Te[$e]=vr+Rr,Te[$e+32]=vr-Rr;var Pn=.707106781*(jr+Gr);Te[$e+16]=Gr+Pn,Te[$e+48]=Gr-Pn;var hi=.382683433*((vr=zi+Un)-(jr=kn+gr)),vs=.5411961*vr+hi,ys=1.306562965*jr+hi,_s=.707106781*(Rr=Un+kn),Xs=gr+_s,Js=gr-_s;Te[$e+40]=Js+vs,Te[$e+24]=Js-vs,Te[$e+8]=Xs+ys,Te[$e+56]=Xs-ys,$e++}for(ot=0;ot<64;++ot)at=Te[ot]*Me[ot],p[ot]=at>0?at+.5|0:at-.5|0;return p}(M,Y),Ne=0;Ne<64;++Ne)b[L[Ne]]=Ee[Ne];var je=b[0]-X;X=b[0],je==0?V(H[0]):(V(H[m[ne=32767+je]]),V(f[ne]));for(var Ue=63;Ue>0&&b[Ue]==0;)Ue--;if(Ue==0)return V(ue),X;for(var Ye,Se=1;Se<=Ue;){for(var ae=Se;b[Se]==0&&Se<=Ue;)++Se;var ye=Se-ae;if(ye>=16){Ye=ye>>4;for(var Re=1;Re<=Ye;++Re)V(he);ye&=15}ne=32767+b[Se],V(oe[(ye<<4)+m[ne]]),V(f[ne]),Se++}return Ue!=63&&V(ue),X}function be(M){M=Math.min(Math.max(M,1),100),s!=M&&(function(Y){for(var X=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],H=0;H<64;H++){var oe=o((X[H]*Y+50)/100);oe=Math.min(Math.max(oe,1),255),a[L[H]]=oe}for(var ne=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],ue=0;ue<64;ue++){var he=o((ne[ue]*Y+50)/100);he=Math.min(Math.max(he,1),255),l[L[ue]]=he}for(var Ee=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Ne=0,je=0;je<8;je++)for(var Ue=0;Ue<8;Ue++)u[Ne]=1/(a[L[Ne]]*Ee[je]*Ee[Ue]*8),h[Ne]=1/(l[L[Ne]]*Ee[je]*Ee[Ue]*8),Ne++}(M<50?Math.floor(5e3/M):Math.floor(200-2*M)),s=M)}this.encode=function(M,Y){Y&&be(Y),x=new Array,I=0,_=7,ee(65496),ee(65504),ee(16),G(74),G(70),G(73),G(70),G(0),G(1),G(1),G(0),ee(1),ee(1),G(0),G(0),function(){ee(65499),ee(132),G(0);for(var ze=0;ze<64;ze++)G(a[ze]);G(1);for(var He=0;He<64;He++)G(l[He])}(),function(ze,He){ee(65472),ee(17),G(8),ee(He),ee(ze),G(3),G(1),G(17),G(0),G(2),G(17),G(1),G(3),G(17),G(1)}(M.width,M.height),function(){ee(65476),ee(418),G(0);for(var ze=0;ze<16;ze++)G(y[ze+1]);for(var He=0;He<=11;He++)G(S[He]);G(16);for(var Qe=0;Qe<16;Qe++)G(R[Qe+1]);for(var st=0;st<=161;st++)G(N[st]);G(1);for(var tt=0;tt<16;tt++)G(T[tt+1]);for(var lt=0;lt<=11;lt++)G(P[lt]);G(17);for(var ht=0;ht<16;ht++)G(U[ht+1]);for(var ot=0;ot<=161;ot++)G(Q[ot])}(),ee(65498),ee(12),G(3),G(1),G(0),G(2),G(17),G(3),G(17),G(0),G(63),G(0);var X=0,H=0,oe=0;I=0,_=7,this.encode.displayName="_encode_";for(var ne,ue,he,Ee,Ne,je,Ue,Ye,Se,ae=M.data,ye=M.width,Re=M.height,Te=4*ye,Me=0;Me<Re;){for(ne=0;ne<Te;){for(Ne=Te*Me+ne,Ue=-1,Ye=0,Se=0;Se<64;Se++)je=Ne+(Ye=Se>>3)*Te+(Ue=4*(7&Se)),Me+Ye>=Re&&(je-=Te*(Me+1+Ye-Re)),ne+Ue>=Te&&(je-=ne+Ue-Te+4),ue=ae[je++],he=ae[je++],Ee=ae[je++],E[Se]=(B[ue]+B[he+256>>0]+B[Ee+512>>0]>>16)-128,C[Se]=(B[ue+768>>0]+B[he+1024>>0]+B[Ee+1280>>0]>>16)-128,O[Se]=(B[ue+1280>>0]+B[he+1536>>0]+B[Ee+1792>>0]>>16)-128;X=ie(E,u,X,e,r),H=ie(C,h,H,n,i),oe=ie(O,h,oe,n,i),ne+=32}Me+=8}if(_>=0){var Be=[];Be[1]=_+1,Be[0]=(1<<_+1)-1,V(Be)}return ee(65497),new Uint8Array(x)},t=t||50,function(){for(var M=String.fromCharCode,Y=0;Y<256;Y++)K[Y]=M(Y)}(),e=F(y,S),n=F(T,P),r=F(R,N),i=F(U,Q),function(){for(var M=1,Y=2,X=1;X<=15;X++){for(var H=M;H<Y;H++)m[32767+H]=X,f[32767+H]=[],f[32767+H][1]=X,f[32767+H][0]=H;for(var oe=-(Y-1);oe<=-M;oe++)m[32767+oe]=X,f[32767+oe]=[],f[32767+oe][1]=X,f[32767+oe][0]=Y-1+oe;M<<=1,Y<<=1}}(),function(){for(var M=0;M<256;M++)B[M]=19595*M,B[M+256>>0]=38470*M,B[M+512>>0]=7471*M+32768,B[M+768>>0]=-11059*M,B[M+1024>>0]=-21709*M,B[M+1280>>0]=32768*M+8421375,B[M+1536>>0]=-27439*M,B[M+1792>>0]=-5329*M}(),be(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function ns(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function zw(t){function e(y){if(!y)throw Error("assert :P")}function n(y,S,R){for(var N=0;4>N;N++)if(y[S+N]!=R.charCodeAt(N))return!0;return!1}function r(y,S,R,N,T){for(var P=0;P<T;P++)y[S+P]=R[N+P]}function i(y,S,R,N){for(var T=0;T<N;T++)y[S+T]=R}function s(y){return new Int32Array(y)}function o(y,S){for(var R=[],N=0;N<y;N++)R.push(new S);return R}function a(y,S){var R=[];return function N(T,P,U){for(var Q=U[P],F=0;F<Q&&(T.push(U.length>P+1?[]:new S),!(U.length<P+1));F++)N(T[F],P+1,U)}(R,0,y),R}var l=function(){var y=this;function S(c,v){for(var A=1<<v-1>>>0;c&A;)A>>>=1;return A?(c&A-1)+A:c}function R(c,v,A,j,z){e(!(j%A));do c[v+(j-=A)]=z;while(0<j)}function N(c,v,A,j,z){if(e(2328>=z),512>=z)var $=s(512);else if(($=s(z))==null)return 0;return function(W,Z,te,re,de,_e){var we,ve,Ce=Z,Ae=1<<te,fe=s(16),pe=s(16);for(e(de!=0),e(re!=null),e(W!=null),e(0<te),ve=0;ve<de;++ve){if(15<re[ve])return 0;++fe[re[ve]]}if(fe[0]==de)return 0;for(pe[1]=0,we=1;15>we;++we){if(fe[we]>1<<we)return 0;pe[we+1]=pe[we]+fe[we]}for(ve=0;ve<de;++ve)we=re[ve],0<re[ve]&&(_e[pe[we]++]=ve);if(pe[15]==1)return(re=new T).g=0,re.value=_e[0],R(W,Ce,1,Ae,re),Ae;var ke,De=-1,Pe=Ae-1,Xe=0,We=1,ct=1,Ke=1<<te;for(ve=0,we=1,de=2;we<=te;++we,de<<=1){if(We+=ct<<=1,0>(ct-=fe[we]))return 0;for(;0<fe[we];--fe[we])(re=new T).g=we,re.value=_e[ve++],R(W,Ce+Xe,de,Ke,re),Xe=S(Xe,we)}for(we=te+1,de=2;15>=we;++we,de<<=1){if(We+=ct<<=1,0>(ct-=fe[we]))return 0;for(;0<fe[we];--fe[we]){if(re=new T,(Xe&Pe)!=De){for(Ce+=Ke,ke=1<<(De=we)-te;15>De&&!(0>=(ke-=fe[De]));)++De,ke<<=1;Ae+=Ke=1<<(ke=De-te),W[Z+(De=Xe&Pe)].g=ke+te,W[Z+De].value=Ce-Z-De}re.g=we-te,re.value=_e[ve++],R(W,Ce+(Xe>>te),de,Ke,re),Xe=S(Xe,we)}}return We!=2*pe[15]-1?0:Ae}(c,v,A,j,z,$)}function T(){this.value=this.g=0}function P(){this.value=this.g=0}function U(){this.G=o(5,T),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(or,P)}function Q(c,v,A,j){e(c!=null),e(v!=null),e(2147483648>j),c.Ca=254,c.I=0,c.b=-8,c.Ka=0,c.oa=v,c.pa=A,c.Jd=v,c.Yc=A+j,c.Zc=4<=j?A+j-4+1:A,ne(c)}function F(c,v){for(var A=0;0<v--;)A|=he(c,128)<<v;return A}function V(c,v){var A=F(c,v);return ue(c)?-A:A}function G(c,v,A,j){var z,$=0;for(e(c!=null),e(v!=null),e(4294967288>j),c.Sb=j,c.Ra=0,c.u=0,c.h=0,4<j&&(j=4),z=0;z<j;++z)$+=v[A+z]<<8*z;c.Ra=$,c.bb=j,c.oa=v,c.pa=A}function ee(c){for(;8<=c.u&&c.bb<c.Sb;)c.Ra>>>=8,c.Ra+=c.oa[c.pa+c.bb]<<Su-8>>>0,++c.bb,c.u-=8;X(c)&&(c.h=1,c.u=0)}function ie(c,v){if(e(0<=v),!c.h&&v<=xu){var A=Y(c)&bu[v];return c.u+=v,ee(c),A}return c.h=1,c.u=0}function be(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function M(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function Y(c){return c.Ra>>>(c.u&Su-1)>>>0}function X(c){return e(c.bb<=c.Sb),c.h||c.bb==c.Sb&&c.u>Su}function H(c,v){c.u=v,c.h=X(c)}function oe(c){c.u>=eh&&(e(c.u>=eh),ee(c))}function ne(c){e(c!=null&&c.oa!=null),c.pa<c.Zc?(c.I=(c.oa[c.pa++]|c.I<<8)>>>0,c.b+=8):(e(c!=null&&c.oa!=null),c.pa<c.Yc?(c.b+=8,c.I=c.oa[c.pa++]|c.I<<8):c.Ka?c.b=0:(c.I<<=8,c.b+=8,c.Ka=1))}function ue(c){return F(c,1)}function he(c,v){var A=c.Ca;0>c.b&&ne(c);var j=c.b,z=A*v>>>8,$=(c.I>>>j>z)+0;for($?(A-=z,c.I-=z+1<<j>>>0):A=z+1,j=A,z=0;256<=j;)z+=8,j>>=8;return j=7^z+Qr[j],c.b-=j,c.Ca=(A<<j)-1,$}function Ee(c,v,A){c[v+0]=A>>24&255,c[v+1]=A>>16&255,c[v+2]=A>>8&255,c[v+3]=A>>0&255}function Ne(c,v){return c[v+0]<<0|c[v+1]<<8}function je(c,v){return Ne(c,v)|c[v+2]<<16}function Ue(c,v){return Ne(c,v)|Ne(c,v+2)<<16}function Ye(c,v){var A=1<<v;return e(c!=null),e(0<v),c.X=s(A),c.X==null?0:(c.Mb=32-v,c.Xa=v,1)}function Se(c,v){e(c!=null),e(v!=null),e(c.Xa==v.Xa),r(v.X,0,c.X,0,1<<v.Xa)}function ae(){this.X=[],this.Xa=this.Mb=0}function ye(c,v,A,j){e(A!=null),e(j!=null);var z=A[0],$=j[0];return z==0&&(z=(c*$+v/2)/v),$==0&&($=(v*z+c/2)/c),0>=z||0>=$?0:(A[0]=z,j[0]=$,1)}function Re(c,v){return c+(1<<v)-1>>>v}function Te(c,v){return((4278255360&c)+(4278255360&v)>>>0&4278255360)+((16711935&c)+(16711935&v)>>>0&16711935)>>>0}function Me(c,v){y[v]=function(A,j,z,$,W,Z,te){var re;for(re=0;re<W;++re){var de=y[c](Z[te+re-1],z,$+re);Z[te+re]=Te(A[j+re],de)}}}function Be(){this.ud=this.hd=this.jd=0}function ze(c,v){return((4278124286&(c^v))>>>1)+(c&v)>>>0}function He(c){return 0<=c&&256>c?c:0>c?0:255<c?255:void 0}function Qe(c,v){return He(c+(c-v+.5>>1))}function st(c,v,A){return Math.abs(v-A)-Math.abs(c-A)}function tt(c,v,A,j,z,$,W){for(j=$[W-1],A=0;A<z;++A)$[W+A]=j=Te(c[v+A],j)}function lt(c,v,A,j,z){var $;for($=0;$<A;++$){var W=c[v+$],Z=W>>8&255,te=16711935&(te=(te=16711935&W)+((Z<<16)+Z));j[z+$]=(4278255360&W)+te>>>0}}function ht(c,v){v.jd=c>>0&255,v.hd=c>>8&255,v.ud=c>>16&255}function ot(c,v,A,j,z,$){var W;for(W=0;W<j;++W){var Z=v[A+W],te=Z>>>8,re=Z,de=255&(de=(de=Z>>>16)+((c.jd<<24>>24)*(te<<24>>24)>>>5));re=255&(re=(re=re+((c.hd<<24>>24)*(te<<24>>24)>>>5))+((c.ud<<24>>24)*(de<<24>>24)>>>5)),z[$+W]=(4278255360&Z)+(de<<16)+re}}function at(c,v,A,j,z){y[v]=function($,W,Z,te,re,de,_e,we,ve){for(te=_e;te<we;++te)for(_e=0;_e<ve;++_e)re[de++]=z(Z[j($[W++])])},y[c]=function($,W,Z,te,re,de,_e){var we=8>>$.b,ve=$.Ea,Ce=$.K[0],Ae=$.w;if(8>we)for($=(1<<$.b)-1,Ae=(1<<we)-1;W<Z;++W){var fe,pe=0;for(fe=0;fe<ve;++fe)fe&$||(pe=j(te[re++])),de[_e++]=z(Ce[pe&Ae]),pe>>=we}else y["VP8LMapColor"+A](te,re,Ce,Ae,de,_e,W,Z,ve)}}function $e(c,v,A,j,z){for(A=v+A;v<A;){var $=c[v++];j[z++]=$>>16&255,j[z++]=$>>8&255,j[z++]=$>>0&255}}function Lt(c,v,A,j,z){for(A=v+A;v<A;){var $=c[v++];j[z++]=$>>16&255,j[z++]=$>>8&255,j[z++]=$>>0&255,j[z++]=$>>24&255}}function vt(c,v,A,j,z){for(A=v+A;v<A;){var $=(W=c[v++])>>16&240|W>>12&15,W=W>>0&240|W>>28&15;j[z++]=$,j[z++]=W}}function sn(c,v,A,j,z){for(A=v+A;v<A;){var $=(W=c[v++])>>16&248|W>>13&7,W=W>>5&224|W>>3&31;j[z++]=$,j[z++]=W}}function At(c,v,A,j,z){for(A=v+A;v<A;){var $=c[v++];j[z++]=$>>0&255,j[z++]=$>>8&255,j[z++]=$>>16&255}}function Bt(c,v,A,j,z,$){if($==0)for(A=v+A;v<A;)Ee(j,(($=c[v++])[0]>>24|$[1]>>8&65280|$[2]<<8&16711680|$[3]<<24)>>>0),z+=32;else r(j,z,c,v,A)}function Hr(c,v){y[v][0]=y[c+"0"],y[v][1]=y[c+"1"],y[v][2]=y[c+"2"],y[v][3]=y[c+"3"],y[v][4]=y[c+"4"],y[v][5]=y[c+"5"],y[v][6]=y[c+"6"],y[v][7]=y[c+"7"],y[v][8]=y[c+"8"],y[v][9]=y[c+"9"],y[v][10]=y[c+"10"],y[v][11]=y[c+"11"],y[v][12]=y[c+"12"],y[v][13]=y[c+"13"],y[v][14]=y[c+"0"],y[v][15]=y[c+"0"]}function It(c){return c==fg||c==pg||c==tf||c==mg}function ui(){this.eb=[],this.size=this.A=this.fb=0}function Ut(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Hn(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new ui,this.f.kb=new Ut,this.sd=null}function xn(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Rt(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function it(c){return alert("todo:WebPSamplerProcessPlane"),c.T}function Et(c,v){var A=c.T,j=v.ba.f.RGBA,z=j.eb,$=j.fb+c.ka*j.A,W=Ri[v.ba.S],Z=c.y,te=c.O,re=c.f,de=c.N,_e=c.ea,we=c.W,ve=v.cc,Ce=v.dc,Ae=v.Mc,fe=v.Nc,pe=c.ka,ke=c.ka+c.T,De=c.U,Pe=De+1>>1;for(pe==0?W(Z,te,null,null,re,de,_e,we,re,de,_e,we,z,$,null,null,De):(W(v.ec,v.fc,Z,te,ve,Ce,Ae,fe,re,de,_e,we,z,$-j.A,z,$,De),++A);pe+2<ke;pe+=2)ve=re,Ce=de,Ae=_e,fe=we,de+=c.Rc,we+=c.Rc,$+=2*j.A,W(Z,(te+=2*c.fa)-c.fa,Z,te,ve,Ce,Ae,fe,re,de,_e,we,z,$-j.A,z,$,De);return te+=c.fa,c.j+ke<c.o?(r(v.ec,v.fc,Z,te,De),r(v.cc,v.dc,re,de,Pe),r(v.Mc,v.Nc,_e,we,Pe),A--):1&ke||W(Z,te,null,null,re,de,_e,we,re,de,_e,we,z,$+j.A,null,null,De),A}function Lr(c,v,A){var j=c.F,z=[c.J];if(j!=null){var $=c.U,W=v.ba.S,Z=W==ef||W==tf;v=v.ba.f.RGBA;var te=[0],re=c.ka;te[0]=c.T,c.Kb&&(re==0?--te[0]:(--re,z[0]-=c.width),c.j+c.ka+c.T==c.o&&(te[0]=c.o-c.j-re));var de=v.eb;re=v.fb+re*v.A,c=nn(j,z[0],c.width,$,te,de,re+(Z?0:3),v.A),e(A==te),c&&It(W)&&Ci(de,re,Z,$,te,v.A)}return 0}function Yt(c){var v=c.ma,A=v.ba.S,j=11>A,z=A==Jd||A==Zd||A==ef||A==dg||A==12||It(A);if(v.memory=null,v.Ib=null,v.Jb=null,v.Nd=null,!Jc(v.Oa,c,z?11:12))return 0;if(z&&It(A)&&Oe(),c.da)alert("todo:use_scaling");else{if(j){if(v.Ib=it,c.Kb){if(A=c.U+1>>1,v.memory=s(c.U+2*A),v.memory==null)return 0;v.ec=v.memory,v.fc=0,v.cc=v.ec,v.dc=v.fc+c.U,v.Mc=v.cc,v.Nc=v.dc+A,v.Ib=Et,Oe()}}else alert("todo:EmitYUV");z&&(v.Jb=Lr,j&&ge())}if(j&&!xy){for(c=0;256>c;++c)dE[c]=89858*(c-128)+rf>>nf,mE[c]=-22014*(c-128)+rf,pE[c]=-45773*(c-128),fE[c]=113618*(c-128)+rf>>nf;for(c=ah;c<yg;++c)v=76283*(c-16)+rf>>nf,gE[c-ah]=zt(v,255),vE[c-ah]=zt(v+8>>4,15);xy=1}return 1}function fn(c){var v=c.ma,A=c.U,j=c.T;return e(!(1&c.ka)),0>=A||0>=j?0:(A=v.Ib(c,v),v.Jb!=null&&v.Jb(c,v,A),v.Dc+=A,1)}function ci(c){c.ma.memory=null}function Ze(c,v,A,j){return ie(c,8)!=47?0:(v[0]=ie(c,14)+1,A[0]=ie(c,14)+1,j[0]=ie(c,1),ie(c,3)!=0?0:!c.h)}function Wr(c,v){if(4>c)return c+1;var A=c-2>>1;return(2+(1&c)<<A)+ie(v,A)+1}function gr(c,v){return 120<v?v-120:1<=(A=((A=JA[v-1])>>4)*c+(8-(15&A)))?A:1;var A}function Mn(c,v,A){var j=Y(A),z=c[v+=255&j].g-8;return 0<z&&(H(A,A.u+8),j=Y(A),v+=c[v].value,v+=j&(1<<z)-1),H(A,A.u+c[v].g),c[v].value}function kn(c,v,A){return A.g+=c.g,A.value+=c.value<<v>>>0,e(8>=A.g),c.g}function Sn(c,v,A){var j=c.xc;return e((v=j==0?0:c.vc[c.md*(A>>j)+(v>>j)])<c.Wb),c.Ya[v]}function Un(c,v,A,j){var z=c.ab,$=c.c*v,W=c.C;v=W+v;var Z=A,te=j;for(j=c.Ta,A=c.Ua;0<z--;){var re=c.gc[z],de=W,_e=v,we=Z,ve=te,Ce=(te=j,Z=A,re.Ea);switch(e(de<_e),e(_e<=re.nc),re.hc){case 2:Hd(we,ve,(_e-de)*Ce,te,Z);break;case 0:var Ae=de,fe=_e,pe=te,ke=Z,De=(Ke=re).Ea;Ae==0&&(cg(we,ve,null,null,1,pe,ke),tt(we,ve+1,0,0,De-1,pe,ke+1),ve+=De,ke+=De,++Ae);for(var Pe=1<<Ke.b,Xe=Pe-1,We=Re(De,Ke.b),ct=Ke.K,Ke=Ke.w+(Ae>>Ke.b)*We;Ae<fe;){var Vt=ct,Ht=Ke,Ot=1;for(th(we,ve,pe,ke-De,1,pe,ke);Ot<De;){var Pt=(Ot&~Xe)+Pe;Pt>De&&(Pt=De),(0,na[Vt[Ht++]>>8&15])(we,ve+ +Ot,pe,ke+Ot-De,Pt-Ot,pe,ke+Ot),Ot=Pt}ve+=De,ke+=De,++Ae&Xe||(Ke+=We)}_e!=re.nc&&r(te,Z-Ce,te,Z+(_e-de-1)*Ce,Ce);break;case 1:for(Ce=we,fe=ve,De=(we=re.Ea)-(ke=we&~(pe=(ve=1<<re.b)-1)),Ae=Re(we,re.b),Pe=re.K,re=re.w+(de>>re.b)*Ae;de<_e;){for(Xe=Pe,We=re,ct=new Be,Ke=fe+ke,Vt=fe+we;fe<Ke;)ht(Xe[We++],ct),wl(ct,Ce,fe,ve,te,Z),fe+=ve,Z+=ve;fe<Vt&&(ht(Xe[We++],ct),wl(ct,Ce,fe,De,te,Z),fe+=De,Z+=De),++de&pe||(re+=Ae)}break;case 3:if(we==te&&ve==Z&&0<re.b){for(fe=te,we=Ce=Z+(_e-de)*Ce-(ke=(_e-de)*Re(re.Ea,re.b)),ve=te,pe=Z,Ae=[],ke=(De=ke)-1;0<=ke;--ke)Ae[ke]=ve[pe+ke];for(ke=De-1;0<=ke;--ke)fe[we+ke]=Ae[ke];Ti(re,de,_e,te,Ce,te,Z)}else Ti(re,de,_e,we,ve,te,Z)}Z=j,te=A}te!=A&&r(j,A,Z,te,$)}function Mo(c,v){var A=c.V,j=c.Ba+c.c*c.C,z=v-c.C;if(e(v<=c.l.o),e(16>=z),0<z){var $=c.l,W=c.Ta,Z=c.Ua,te=$.width;if(Un(c,z,A,j),z=Z=[Z],e((A=c.C)<(j=v)),e($.v<$.va),j>$.o&&(j=$.o),A<$.j){var re=$.j-A;A=$.j,z[0]+=re*te}if(A>=j?A=0:(z[0]+=4*$.v,$.ka=A-$.j,$.U=$.va-$.v,$.T=j-A,A=1),A){if(Z=Z[0],11>(A=c.ca).S){var de=A.f.RGBA,_e=(j=A.S,z=$.U,$=$.T,re=de.eb,de.A),we=$;for(de=de.fb+c.Ma*de.A;0<we--;){var ve=W,Ce=Z,Ae=z,fe=re,pe=de;switch(j){case Xd:Yr(ve,Ce,Ae,fe,pe);break;case Jd:Or(ve,Ce,Ae,fe,pe);break;case fg:Or(ve,Ce,Ae,fe,pe),Ci(fe,pe,0,Ae,1,0);break;case fy:uo(ve,Ce,Ae,fe,pe);break;case Zd:Bt(ve,Ce,Ae,fe,pe,1);break;case pg:Bt(ve,Ce,Ae,fe,pe,1),Ci(fe,pe,0,Ae,1,0);break;case ef:Bt(ve,Ce,Ae,fe,pe,0);break;case tf:Bt(ve,Ce,Ae,fe,pe,0),Ci(fe,pe,1,Ae,1,0);break;case dg:ra(ve,Ce,Ae,fe,pe);break;case mg:ra(ve,Ce,Ae,fe,pe),tn(fe,pe,Ae,1,0);break;case py:lo(ve,Ce,Ae,fe,pe);break;default:e(0)}Z+=te,de+=_e}c.Ma+=$}else alert("todo:EmitRescaledRowsYUVA");e(c.Ma<=A.height)}}c.C=v,e(c.C<=c.i)}function zi(c){var v;if(0<c.ua)return 0;for(v=0;v<c.Wb;++v){var A=c.Ya[v].G,j=c.Ya[v].H;if(0<A[1][j[1]+0].g||0<A[2][j[2]+0].g||0<A[3][j[3]+0].g)return 0}return 1}function vr(c,v,A,j,z,$){if(c.Z!=0){var W=c.qd,Z=c.rd;for(e(aa[c.Z]!=null);v<A;++v)aa[c.Z](W,Z,j,z,j,z,$),W=j,Z=z,z+=$;c.qd=W,c.rd=Z}}function Gr(c,v){var A=c.l.ma,j=A.Z==0||A.Z==1?c.l.j:c.C;if(j=c.C<j?j:c.C,e(v<=c.l.o),v>j){var z=c.l.width,$=A.ca,W=A.tb+z*j,Z=c.V,te=c.Ba+c.c*j,re=c.gc;e(c.ab==1),e(re[0].hc==3),Wd(re[0],j,v,Z,te,$,W),vr(A,j,v,$,W,z)}c.C=c.Ma=v}function Rr(c,v,A,j,z,$,W){var Z=c.$/j,te=c.$%j,re=c.m,de=c.s,_e=A+c.$,we=_e;z=A+j*z;var ve=A+j*$,Ce=280+de.ua,Ae=c.Pb?Z:16777216,fe=0<de.ua?de.Wa:null,pe=de.wc,ke=_e<ve?Sn(de,te,Z):null;e(c.C<$),e(ve<=z);var De=!1;e:for(;;){for(;De||_e<ve;){var Pe=0;if(Z>=Ae){var Xe=_e-A;e((Ae=c).Pb),Ae.wd=Ae.m,Ae.xd=Xe,0<Ae.s.ua&&Se(Ae.s.Wa,Ae.s.vb),Ae=Z+eE}if(te&pe||(ke=Sn(de,te,Z)),e(ke!=null),ke.Qb&&(v[_e]=ke.qb,De=!0),!De)if(oe(re),ke.jc){Pe=re,Xe=v;var We=_e,ct=ke.pd[Y(Pe)&or-1];e(ke.jc),256>ct.g?(H(Pe,Pe.u+ct.g),Xe[We]=ct.value,Pe=0):(H(Pe,Pe.u+ct.g-256),e(256<=ct.value),Pe=ct.value),Pe==0&&(De=!0)}else Pe=Mn(ke.G[0],ke.H[0],re);if(re.h)break;if(De||256>Pe){if(!De)if(ke.nd)v[_e]=(ke.qb|Pe<<8)>>>0;else{if(oe(re),De=Mn(ke.G[1],ke.H[1],re),oe(re),Xe=Mn(ke.G[2],ke.H[2],re),We=Mn(ke.G[3],ke.H[3],re),re.h)break;v[_e]=(We<<24|De<<16|Pe<<8|Xe)>>>0}if(De=!1,++_e,++te>=j&&(te=0,++Z,W!=null&&Z<=$&&!(Z%16)&&W(c,Z),fe!=null))for(;we<_e;)Pe=v[we++],fe.X[(506832829*Pe&4294967295)>>>fe.Mb]=Pe}else if(280>Pe){if(Pe=Wr(Pe-256,re),Xe=Mn(ke.G[4],ke.H[4],re),oe(re),Xe=gr(j,Xe=Wr(Xe,re)),re.h)break;if(_e-A<Xe||z-_e<Pe)break e;for(We=0;We<Pe;++We)v[_e+We]=v[_e+We-Xe];for(_e+=Pe,te+=Pe;te>=j;)te-=j,++Z,W!=null&&Z<=$&&!(Z%16)&&W(c,Z);if(e(_e<=z),te&pe&&(ke=Sn(de,te,Z)),fe!=null)for(;we<_e;)Pe=v[we++],fe.X[(506832829*Pe&4294967295)>>>fe.Mb]=Pe}else{if(!(Pe<Ce))break e;for(De=Pe-280,e(fe!=null);we<_e;)Pe=v[we++],fe.X[(506832829*Pe&4294967295)>>>fe.Mb]=Pe;Pe=_e,e(!(De>>>(Xe=fe).Xa)),v[Pe]=Xe.X[De],De=!0}De||e(re.h==X(re))}if(c.Pb&&re.h&&_e<z)e(c.m.h),c.a=5,c.m=c.wd,c.$=c.xd,0<c.s.ua&&Se(c.s.vb,c.s.Wa);else{if(re.h)break e;W!=null&&W(c,Z>$?$:Z),c.a=0,c.$=_e-A}return 1}return c.a=3,0}function jr(c){e(c!=null),c.vc=null,c.yc=null,c.Ya=null;var v=c.Wa;v!=null&&(v.X=null),c.vb=null,e(c!=null)}function Pn(){var c=new _u;return c==null?null:(c.a=0,c.xb=vy,Hr("Predictor","VP8LPredictors"),Hr("Predictor","VP8LPredictors_C"),Hr("PredictorAdd","VP8LPredictorsAdd"),Hr("PredictorAdd","VP8LPredictorsAdd_C"),Hd=lt,wl=ot,Yr=$e,Or=Lt,ra=vt,lo=sn,uo=At,y.VP8LMapColor32b=Au,y.VP8LMapColor8b=Gd,c)}function hi(c,v,A,j,z){var $=1,W=[c],Z=[v],te=j.m,re=j.s,de=null,_e=0;e:for(;;){if(A)for(;$&&ie(te,1);){var we=W,ve=Z,Ce=j,Ae=1,fe=Ce.m,pe=Ce.gc[Ce.ab],ke=ie(fe,2);if(Ce.Oc&1<<ke)$=0;else{switch(Ce.Oc|=1<<ke,pe.hc=ke,pe.Ea=we[0],pe.nc=ve[0],pe.K=[null],++Ce.ab,e(4>=Ce.ab),ke){case 0:case 1:pe.b=ie(fe,3)+2,Ae=hi(Re(pe.Ea,pe.b),Re(pe.nc,pe.b),0,Ce,pe.K),pe.K=pe.K[0];break;case 3:var De,Pe=ie(fe,8)+1,Xe=16<Pe?0:4<Pe?1:2<Pe?2:3;if(we[0]=Re(pe.Ea,Xe),pe.b=Xe,De=Ae=hi(Pe,1,0,Ce,pe.K)){var We,ct=Pe,Ke=pe,Vt=1<<(8>>Ke.b),Ht=s(Vt);if(Ht==null)De=0;else{var Ot=Ke.K[0],Pt=Ke.w;for(Ht[0]=Ke.K[0][0],We=1;We<1*ct;++We)Ht[We]=Te(Ot[Pt+We],Ht[We-1]);for(;We<4*Vt;++We)Ht[We]=0;Ke.K[0]=null,Ke.K[0]=Ht,De=1}}Ae=De;break;case 2:break;default:e(0)}$=Ae}}if(W=W[0],Z=Z[0],$&&ie(te,1)&&!($=1<=(_e=ie(te,4))&&11>=_e)){j.a=3;break e}var Zt;if(Zt=$)t:{var Xt,St,Vn,Xr=j,Bn=W,Jr=Z,Wt=_e,gi=A,vi=Xr.m,Xn=Xr.s,ar=[null],Mr=1,ji=0,ks=ZA[Wt];n:for(;;){if(gi&&ie(vi,1)){var Jn=ie(vi,3)+2,po=Re(Bn,Jn),El=Re(Jr,Jn),ku=po*El;if(!hi(po,El,0,Xr,ar))break n;for(ar=ar[0],Xn.xc=Jn,Xt=0;Xt<ku;++Xt){var la=ar[Xt]>>8&65535;ar[Xt]=la,la>=Mr&&(Mr=la+1)}}if(vi.h)break n;for(St=0;5>St;++St){var En=my[St];!St&&0<Wt&&(En+=1<<Wt),ji<En&&(ji=En)}var _g=o(Mr*ks,T),Ey=Mr,Ny=o(Ey,U);if(Ny==null)var of=null;else e(65536>=Ey),of=Ny;var lh=s(ji);if(of==null||lh==null||_g==null){Xr.a=1;break n}var af=_g;for(Xt=Vn=0;Xt<Mr;++Xt){var Zi=of[Xt],Pu=Zi.G,Cu=Zi.H,Iy=0,lf=1,Ty=0;for(St=0;5>St;++St){En=my[St],Pu[St]=af,Cu[St]=Vn,!St&&0<Wt&&(En+=1<<Wt);i:{var uf,wg=En,cf=Xr,uh=lh,wE=af,bE=Vn,bg=0,ua=cf.m,xE=ie(ua,1);if(i(uh,0,0,wg),xE){var SE=ie(ua,1)+1,AE=ie(ua,1),ky=ie(ua,AE==0?1:8);uh[ky]=1,SE==2&&(uh[ky=ie(ua,8)]=1);var hf=1}else{var Py=s(19),Cy=ie(ua,4)+4;if(19<Cy){cf.a=3;var df=0;break i}for(uf=0;uf<Cy;++uf)Py[XA[uf]]=ie(ua,3);var xg=void 0,ch=void 0,Ly=cf,EE=Py,ff=wg,Ry=uh,Sg=0,ca=Ly.m,jy=8,Dy=o(128,T);r:for(;N(Dy,0,7,EE,19);){if(ie(ca,1)){var NE=2+2*ie(ca,3);if((xg=2+ie(ca,NE))>ff)break r}else xg=ff;for(ch=0;ch<ff&&xg--;){oe(ca);var Oy=Dy[0+(127&Y(ca))];H(ca,ca.u+Oy.g);var Lu=Oy.value;if(16>Lu)Ry[ch++]=Lu,Lu!=0&&(jy=Lu);else{var IE=Lu==16,Fy=Lu-16,TE=QA[Fy],My=ie(ca,KA[Fy])+TE;if(ch+My>ff)break r;for(var kE=IE?jy:0;0<My--;)Ry[ch++]=kE}}Sg=1;break r}Sg||(Ly.a=3),hf=Sg}(hf=hf&&!ua.h)&&(bg=N(wE,bE,8,uh,wg)),hf&&bg!=0?df=bg:(cf.a=3,df=0)}if(df==0)break n;if(lf&&YA[St]==1&&(lf=af[Vn].g==0),Iy+=af[Vn].g,Vn+=df,3>=St){var hh,Ag=lh[0];for(hh=1;hh<En;++hh)lh[hh]>Ag&&(Ag=lh[hh]);Ty+=Ag}}if(Zi.nd=lf,Zi.Qb=0,lf&&(Zi.qb=(Pu[3][Cu[3]+0].value<<24|Pu[1][Cu[1]+0].value<<16|Pu[2][Cu[2]+0].value)>>>0,Iy==0&&256>Pu[0][Cu[0]+0].value&&(Zi.Qb=1,Zi.qb+=Pu[0][Cu[0]+0].value<<8)),Zi.jc=!Zi.Qb&&6>Ty,Zi.jc){var pf,mo=Zi;for(pf=0;pf<or;++pf){var ha=pf,da=mo.pd[ha],mf=mo.G[0][mo.H[0]+ha];256<=mf.value?(da.g=mf.g+256,da.value=mf.value):(da.g=0,da.value=0,ha>>=kn(mf,8,da),ha>>=kn(mo.G[1][mo.H[1]+ha],16,da),ha>>=kn(mo.G[2][mo.H[2]+ha],0,da),kn(mo.G[3][mo.H[3]+ha],24,da))}}}Xn.vc=ar,Xn.Wb=Mr,Xn.Ya=of,Xn.yc=_g,Zt=1;break t}Zt=0}if(!($=Zt)){j.a=3;break e}if(0<_e){if(re.ua=1<<_e,!Ye(re.Wa,_e)){j.a=1,$=0;break e}}else re.ua=0;var Eg=j,Uy=W,PE=Z,Ng=Eg.s,Ig=Ng.xc;if(Eg.c=Uy,Eg.i=PE,Ng.md=Re(Uy,Ig),Ng.wc=Ig==0?-1:(1<<Ig)-1,A){j.xb=aE;break e}if((de=s(W*Z))==null){j.a=1,$=0;break e}$=($=Rr(j,de,0,W,Z,Z,null))&&!te.h;break e}return $?(z!=null?z[0]=de:(e(de==null),e(A)),j.$=0,A||jr(re)):jr(re),$}function vs(c,v){var A=c.c*c.i,j=A+v+16*v;return e(c.c<=v),c.V=s(j),c.V==null?(c.Ta=null,c.Ua=0,c.a=1,0):(c.Ta=c.V,c.Ua=c.Ba+A+v,1)}function ys(c,v){var A=c.C,j=v-A,z=c.V,$=c.Ba+c.c*A;for(e(v<=c.l.o);0<j;){var W=16<j?16:j,Z=c.l.ma,te=c.l.width,re=te*W,de=Z.ca,_e=Z.tb+te*A,we=c.Ta,ve=c.Ua;Un(c,W,z,$),Ln(we,ve,de,_e,re),vr(Z,A,A+W,de,_e,te),j-=W,z+=W*c.c,A+=W}e(A==v),c.C=c.Ma=v}function _s(){this.ub=this.yd=this.td=this.Rb=0}function Xs(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Js(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function uu(){this.Yb=function(){var c=[];return function v(A,j,z){for(var $=z[j],W=0;W<$&&(A.push(z.length>j+1?[]:0),!(z.length<j+1));W++)v(A[W],j+1,z)}(c,0,[3,11]),c}()}function Uo(){this.jb=s(3),this.Wc=a([4,8],uu),this.Xc=a([4,17],uu)}function cu(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function ws(){this.ld=this.La=this.dd=this.tc=0}function bs(){this.Na=this.la=0}function $i(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Zs(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Kc(){this.uc=this.M=this.Nb=0,this.wa=Array(new ws),this.Y=0,this.ya=Array(new Zs),this.aa=0,this.l=new eo}function ol(){this.y=s(16),this.f=s(8),this.ea=s(8)}function hu(){this.cb=this.a=0,this.sc="",this.m=new be,this.Od=new _s,this.Kc=new Xs,this.ed=new cu,this.Qa=new Js,this.Ic=this.$c=this.Aa=0,this.D=new Kc,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,be),this.ia=0,this.pb=o(4,$i),this.Pa=new Uo,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new ol),this.Hd=0,this.rb=Array(new bs),this.sb=0,this.wa=Array(new ws),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Zs),this.L=this.aa=0,this.gd=a([4,2],ws),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function eo(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function al(){var c=new hu;return c!=null&&(c.a=0,c.sc="OK",c.cb=0,c.Xb=0,oh||(oh=du)),c}function on(c,v,A){return c.a==0&&(c.a=v,c.sc=A,c.cb=0),0}function ll(c,v,A){return 3<=A&&c[v+0]==157&&c[v+1]==1&&c[v+2]==42}function ul(c,v){if(c==null)return 0;if(c.a=0,c.sc="OK",v==null)return on(c,2,"null VP8Io passed to VP8GetHeaders()");var A=v.data,j=v.w,z=v.ha;if(4>z)return on(c,7,"Truncated header.");var $=A[j+0]|A[j+1]<<8|A[j+2]<<16,W=c.Od;if(W.Rb=!(1&$),W.td=$>>1&7,W.yd=$>>4&1,W.ub=$>>5,3<W.td)return on(c,3,"Incorrect keyframe parameters.");if(!W.yd)return on(c,4,"Frame not displayable.");j+=3,z-=3;var Z=c.Kc;if(W.Rb){if(7>z)return on(c,7,"cannot parse picture header");if(!ll(A,j,z))return on(c,3,"Bad code word");Z.c=16383&(A[j+4]<<8|A[j+3]),Z.Td=A[j+4]>>6,Z.i=16383&(A[j+6]<<8|A[j+5]),Z.Ud=A[j+6]>>6,j+=7,z-=7,c.za=Z.c+15>>4,c.Ub=Z.i+15>>4,v.width=Z.c,v.height=Z.i,v.Da=0,v.j=0,v.v=0,v.va=v.width,v.o=v.height,v.da=0,v.ib=v.width,v.hb=v.height,v.U=v.width,v.T=v.height,i(($=c.Pa).jb,0,255,$.jb.length),e(($=c.Qa)!=null),$.Cb=0,$.Bb=0,$.Fb=1,i($.Zb,0,0,$.Zb.length),i($.Lb,0,0,$.Lb)}if(W.ub>z)return on(c,7,"bad partition length");Q($=c.m,A,j,W.ub),j+=W.ub,z-=W.ub,W.Rb&&(Z.Ld=ue($),Z.Kd=ue($)),Z=c.Qa;var te,re=c.Pa;if(e($!=null),e(Z!=null),Z.Cb=ue($),Z.Cb){if(Z.Bb=ue($),ue($)){for(Z.Fb=ue($),te=0;4>te;++te)Z.Zb[te]=ue($)?V($,7):0;for(te=0;4>te;++te)Z.Lb[te]=ue($)?V($,6):0}if(Z.Bb)for(te=0;3>te;++te)re.jb[te]=ue($)?F($,8):255}else Z.Bb=0;if($.Ka)return on(c,3,"cannot parse segment header");if((Z=c.ed).zd=ue($),Z.Tb=F($,6),Z.wb=F($,3),Z.Pc=ue($),Z.Pc&&ue($)){for(re=0;4>re;++re)ue($)&&(Z.vd[re]=V($,6));for(re=0;4>re;++re)ue($)&&(Z.od[re]=V($,6))}if(c.L=Z.Tb==0?0:Z.zd?1:2,$.Ka)return on(c,3,"cannot parse filter header");var de=z;if(z=te=j,j=te+de,Z=de,c.Xb=(1<<F(c.m,2))-1,de<3*(re=c.Xb))A=7;else{for(te+=3*re,Z-=3*re,de=0;de<re;++de){var _e=A[z+0]|A[z+1]<<8|A[z+2]<<16;_e>Z&&(_e=Z),Q(c.Jc[+de],A,te,_e),te+=_e,Z-=_e,z+=3}Q(c.Jc[+re],A,te,Z),A=te<j?0:5}if(A!=0)return on(c,A,"cannot parse partitions");for(A=F(te=c.m,7),z=ue(te)?V(te,4):0,j=ue(te)?V(te,4):0,Z=ue(te)?V(te,4):0,re=ue(te)?V(te,4):0,te=ue(te)?V(te,4):0,de=c.Qa,_e=0;4>_e;++_e){if(de.Cb){var we=de.Zb[_e];de.Fb||(we+=A)}else{if(0<_e){c.pb[_e]=c.pb[0];continue}we=A}var ve=c.pb[_e];ve.Sc[0]=gg[zt(we+z,127)],ve.Sc[1]=vg[zt(we+0,127)],ve.Eb[0]=2*gg[zt(we+j,127)],ve.Eb[1]=101581*vg[zt(we+Z,127)]>>16,8>ve.Eb[1]&&(ve.Eb[1]=8),ve.Qc[0]=gg[zt(we+re,117)],ve.Qc[1]=vg[zt(we+te,127)],ve.lc=we+te}if(!W.Rb)return on(c,4,"Not a key frame.");for(ue($),W=c.Pa,A=0;4>A;++A){for(z=0;8>z;++z)for(j=0;3>j;++j)for(Z=0;11>Z;++Z)re=he($,sE[A][z][j][Z])?F($,8):rE[A][z][j][Z],W.Wc[A][z].Yb[j][Z]=re;for(z=0;17>z;++z)W.Xc[A][z]=W.Wc[A][oE[z]]}return c.kc=ue($),c.kc&&(c.Bd=F($,8)),c.cb=1}function du(c,v,A,j,z,$,W){var Z=v[z].Yb[A];for(A=0;16>z;++z){if(!he(c,Z[A+0]))return z;for(;!he(c,Z[A+1]);)if(Z=v[++z].Yb[0],A=0,z==16)return 16;var te=v[z+1].Yb;if(he(c,Z[A+2])){var re=c,de=0;if(he(re,(we=Z)[(_e=A)+3]))if(he(re,we[_e+6])){for(Z=0,_e=2*(de=he(re,we[_e+8]))+(we=he(re,we[_e+9+de])),de=0,we=tE[_e];we[Z];++Z)de+=de+he(re,we[Z]);de+=3+(8<<_e)}else he(re,we[_e+7])?(de=7+2*he(re,165),de+=he(re,145)):de=5+he(re,159);else de=he(re,we[_e+4])?3+he(re,we[_e+5]):2;Z=te[2]}else de=1,Z=te[1];te=W+nE[z],0>(re=c).b&&ne(re);var _e,we=re.b,ve=(_e=re.Ca>>1)-(re.I>>we)>>31;--re.b,re.Ca+=ve,re.Ca|=1,re.I-=(_e+1&ve)<<we,$[te]=((de^ve)-ve)*j[(0<z)+0]}return 16}function cl(c){var v=c.rb[c.sb-1];v.la=0,v.Na=0,i(c.zc,0,0,c.zc.length),c.ja=0}function fu(c,v){if(c==null)return 0;if(v==null)return on(c,2,"NULL VP8Io parameter in VP8Decode().");if(!c.cb&&!ul(c,v))return 0;if(e(c.cb),v.ac==null||v.ac(v)){v.ob&&(c.L=0);var A=sf[c.L];if(c.L==2?(c.yb=0,c.zb=0):(c.yb=v.v-A>>4,c.zb=v.j-A>>4,0>c.yb&&(c.yb=0),0>c.zb&&(c.zb=0)),c.Va=v.o+15+A>>4,c.Hb=v.va+15+A>>4,c.Hb>c.za&&(c.Hb=c.za),c.Va>c.Ub&&(c.Va=c.Ub),0<c.L){var j=c.ed;for(A=0;4>A;++A){var z;if(c.Qa.Cb){var $=c.Qa.Lb[A];c.Qa.Fb||($+=j.Tb)}else $=j.Tb;for(z=0;1>=z;++z){var W=c.gd[A][z],Z=$;if(j.Pc&&(Z+=j.vd[0],z&&(Z+=j.od[0])),0<(Z=0>Z?0:63<Z?63:Z)){var te=Z;0<j.wb&&(te=4<j.wb?te>>2:te>>1)>9-j.wb&&(te=9-j.wb),1>te&&(te=1),W.dd=te,W.tc=2*Z+te,W.ld=40<=Z?2:15<=Z?1:0}else W.tc=0;W.La=z}}}A=0}else on(c,6,"Frame setup failed"),A=c.a;if(A=A==0){if(A){c.$c=0,0<c.Aa||(c.Ic=_E);e:{A=c.Ic,j=4*(te=c.za);var re=32*te,de=te+1,_e=0<c.L?te*(0<c.Aa?2:1):0,we=(c.Aa==2?2:1)*te;if((W=j+832+(z=3*(16*A+sf[c.L])/2*re)+($=c.Fa!=null&&0<c.Fa.length?c.Kc.c*c.Kc.i:0))!=W)A=0;else{if(W>c.Vb){if(c.Vb=0,c.Ec=s(W),c.Fc=0,c.Ec==null){A=on(c,1,"no memory during frame initialization.");break e}c.Vb=W}W=c.Ec,Z=c.Fc,c.Ac=W,c.Bc=Z,Z+=j,c.Gd=o(re,ol),c.Hd=0,c.rb=o(de+1,bs),c.sb=1,c.wa=_e?o(_e,ws):null,c.Y=0,c.D.Nb=0,c.D.wa=c.wa,c.D.Y=c.Y,0<c.Aa&&(c.D.Y+=te),e(!0),c.oc=W,c.pc=Z,Z+=832,c.ya=o(we,Zs),c.aa=0,c.D.ya=c.ya,c.D.aa=c.aa,c.Aa==2&&(c.D.aa+=te),c.R=16*te,c.B=8*te,te=(re=sf[c.L])*c.R,re=re/2*c.B,c.sa=W,c.ta=Z+te,c.qa=c.sa,c.ra=c.ta+16*A*c.R+re,c.Ha=c.qa,c.Ia=c.ra+8*A*c.B+re,c.$c=0,Z+=z,c.mb=$?W:null,c.nb=$?Z:null,e(Z+$<=c.Fc+c.Vb),cl(c),i(c.Ac,c.Bc,0,j),A=1}}if(A){if(v.ka=0,v.y=c.sa,v.O=c.ta,v.f=c.qa,v.N=c.ra,v.ea=c.Ha,v.Vd=c.Ia,v.fa=c.R,v.Rc=c.B,v.F=null,v.J=0,!Qd){for(A=-255;255>=A;++A)Gn[255+A]=0>A?-A:A;for(A=-1020;1020>=A;++A)ho[1020+A]=-128>A?-128:127<A?127:A;for(A=-112;112>=A;++A)sh[112+A]=-16>A?-16:15<A?15:A;for(A=-255;510>=A;++A)Tu[255+A]=0>A?0:255<A?255:A;Qd=1}Eu=ro,co=Bo,nh=hl,Fr=$t,ki=no,Cn=to,Nu=Ko,Kd=Qi,rh=Yo,bl=_l,xl=Qo,ia=so,Sl=Xo,Iu=Es,Al=io,sa=pi,ih=Wn,Pi=yu,Ji[0]=Ii,Ji[1]=Qc,Ji[2]=Ss,Ji[3]=Xc,Ji[4]=gu,Ji[5]=$o,Ji[6]=di,Ji[7]=fl,Ji[8]=Wo,Ji[9]=Ho,oa[0]=xs,oa[1]=Yc,oa[2]=Wi,oa[3]=qo,oa[4]=an,oa[5]=mu,oa[6]=dl,fo[0]=Ki,fo[1]=pu,fo[2]=vu,fo[3]=Gi,fo[4]=qt,fo[5]=pl,fo[6]=ml,A=1}else A=0}A&&(A=function(ve,Ce){for(ve.M=0;ve.M<ve.Va;++ve.M){var Ae,fe=ve.Jc[ve.M&ve.Xb],pe=ve.m,ke=ve;for(Ae=0;Ae<ke.za;++Ae){var De=pe,Pe=ke,Xe=Pe.Ac,We=Pe.Bc+4*Ae,ct=Pe.zc,Ke=Pe.ya[Pe.aa+Ae];if(Pe.Qa.Bb?Ke.$b=he(De,Pe.Pa.jb[0])?2+he(De,Pe.Pa.jb[2]):he(De,Pe.Pa.jb[1]):Ke.$b=0,Pe.kc&&(Ke.Ad=he(De,Pe.Bd)),Ke.Za=!he(De,145)+0,Ke.Za){var Vt=Ke.Ob,Ht=0;for(Pe=0;4>Pe;++Pe){var Ot,Pt=ct[0+Pe];for(Ot=0;4>Ot;++Ot){Pt=iE[Xe[We+Ot]][Pt];for(var Zt=gy[he(De,Pt[0])];0<Zt;)Zt=gy[2*Zt+he(De,Pt[Zt])];Pt=-Zt,Xe[We+Ot]=Pt}r(Vt,Ht,Xe,We,4),Ht+=4,ct[0+Pe]=Pt}}else Pt=he(De,156)?he(De,128)?1:3:he(De,163)?2:0,Ke.Ob[0]=Pt,i(Xe,We,Pt,4),i(ct,0,Pt,4);Ke.Dd=he(De,142)?he(De,114)?he(De,183)?1:3:2:0}if(ke.m.Ka)return on(ve,7,"Premature end-of-partition0 encountered.");for(;ve.ja<ve.za;++ve.ja){if(ke=fe,De=(pe=ve).rb[pe.sb-1],Xe=pe.rb[pe.sb+pe.ja],Ae=pe.ya[pe.aa+pe.ja],We=pe.kc?Ae.Ad:0)De.la=Xe.la=0,Ae.Za||(De.Na=Xe.Na=0),Ae.Hc=0,Ae.Gc=0,Ae.ia=0;else{var Xt,St;if(De=Xe,Xe=ke,We=pe.Pa.Xc,ct=pe.ya[pe.aa+pe.ja],Ke=pe.pb[ct.$b],Pe=ct.ad,Vt=0,Ht=pe.rb[pe.sb-1],Pt=Ot=0,i(Pe,Vt,0,384),ct.Za)var Vn=0,Xr=We[3];else{Zt=s(16);var Bn=De.Na+Ht.Na;if(Bn=oh(Xe,We[1],Bn,Ke.Eb,0,Zt,0),De.Na=Ht.Na=(0<Bn)+0,1<Bn)Eu(Zt,0,Pe,Vt);else{var Jr=Zt[0]+3>>3;for(Zt=0;256>Zt;Zt+=16)Pe[Vt+Zt]=Jr}Vn=1,Xr=We[0]}var Wt=15&De.la,gi=15&Ht.la;for(Zt=0;4>Zt;++Zt){var vi=1&gi;for(Jr=St=0;4>Jr;++Jr)Wt=Wt>>1|(vi=(Bn=oh(Xe,Xr,Bn=vi+(1&Wt),Ke.Sc,Vn,Pe,Vt))>Vn)<<7,St=St<<2|(3<Bn?3:1<Bn?2:Pe[Vt+0]!=0),Vt+=16;Wt>>=4,gi=gi>>1|vi<<7,Ot=(Ot<<8|St)>>>0}for(Xr=Wt,Vn=gi>>4,Xt=0;4>Xt;Xt+=2){for(St=0,Wt=De.la>>4+Xt,gi=Ht.la>>4+Xt,Zt=0;2>Zt;++Zt){for(vi=1&gi,Jr=0;2>Jr;++Jr)Bn=vi+(1&Wt),Wt=Wt>>1|(vi=0<(Bn=oh(Xe,We[2],Bn,Ke.Qc,0,Pe,Vt)))<<3,St=St<<2|(3<Bn?3:1<Bn?2:Pe[Vt+0]!=0),Vt+=16;Wt>>=2,gi=gi>>1|vi<<5}Pt|=St<<4*Xt,Xr|=Wt<<4<<Xt,Vn|=(240&gi)<<Xt}De.la=Xr,Ht.la=Vn,ct.Hc=Ot,ct.Gc=Pt,ct.ia=43690&Pt?0:Ke.ia,We=!(Ot|Pt)}if(0<pe.L&&(pe.wa[pe.Y+pe.ja]=pe.gd[Ae.$b][Ae.Za],pe.wa[pe.Y+pe.ja].La|=!We),ke.Ka)return on(ve,7,"Premature end-of-file encountered.")}if(cl(ve),pe=Ce,ke=1,Ae=(fe=ve).D,De=0<fe.L&&fe.M>=fe.zb&&fe.M<=fe.Va,fe.Aa==0)e:{if(Ae.M=fe.M,Ae.uc=De,Is(fe,Ae),ke=1,Ae=(St=fe.D).Nb,De=(Pt=sf[fe.L])*fe.R,Xe=Pt/2*fe.B,Zt=16*Ae*fe.R,Jr=8*Ae*fe.B,We=fe.sa,ct=fe.ta-De+Zt,Ke=fe.qa,Pe=fe.ra-Xe+Jr,Vt=fe.Ha,Ht=fe.Ia-Xe+Jr,gi=(Wt=St.M)==0,Ot=Wt>=fe.Va-1,fe.Aa==2&&Is(fe,St),St.uc)for(vi=(Bn=fe).D.M,e(Bn.D.uc),St=Bn.yb;St<Bn.Hb;++St){Vn=St,Xr=vi;var Xn=(ar=(En=Bn).D).Nb;Xt=En.R;var ar=ar.wa[ar.Y+Vn],Mr=En.sa,ji=En.ta+16*Xn*Xt+16*Vn,ks=ar.dd,Jn=ar.tc;if(Jn!=0)if(e(3<=Jn),En.L==1)0<Vn&&sa(Mr,ji,Xt,Jn+4),ar.La&&Pi(Mr,ji,Xt,Jn),0<Xr&&Al(Mr,ji,Xt,Jn+4),ar.La&&ih(Mr,ji,Xt,Jn);else{var po=En.B,El=En.qa,ku=En.ra+8*Xn*po+8*Vn,la=En.Ha,En=En.Ia+8*Xn*po+8*Vn;Xn=ar.ld,0<Vn&&(Kd(Mr,ji,Xt,Jn+4,ks,Xn),bl(El,ku,la,En,po,Jn+4,ks,Xn)),ar.La&&(ia(Mr,ji,Xt,Jn,ks,Xn),Iu(El,ku,la,En,po,Jn,ks,Xn)),0<Xr&&(Nu(Mr,ji,Xt,Jn+4,ks,Xn),rh(El,ku,la,En,po,Jn+4,ks,Xn)),ar.La&&(xl(Mr,ji,Xt,Jn,ks,Xn),Sl(El,ku,la,En,po,Jn,ks,Xn))}}if(fe.ia&&alert("todo:DitherRow"),pe.put!=null){if(St=16*Wt,Wt=16*(Wt+1),gi?(pe.y=fe.sa,pe.O=fe.ta+Zt,pe.f=fe.qa,pe.N=fe.ra+Jr,pe.ea=fe.Ha,pe.W=fe.Ia+Jr):(St-=Pt,pe.y=We,pe.O=ct,pe.f=Ke,pe.N=Pe,pe.ea=Vt,pe.W=Ht),Ot||(Wt-=Pt),Wt>pe.o&&(Wt=pe.o),pe.F=null,pe.J=null,fe.Fa!=null&&0<fe.Fa.length&&St<Wt&&(pe.J=ta(fe,pe,St,Wt-St),pe.F=fe.mb,pe.F==null&&pe.F.length==0)){ke=on(fe,3,"Could not decode alpha data.");break e}St<pe.j&&(Pt=pe.j-St,St=pe.j,e(!(1&Pt)),pe.O+=fe.R*Pt,pe.N+=fe.B*(Pt>>1),pe.W+=fe.B*(Pt>>1),pe.F!=null&&(pe.J+=pe.width*Pt)),St<Wt&&(pe.O+=pe.v,pe.N+=pe.v>>1,pe.W+=pe.v>>1,pe.F!=null&&(pe.J+=pe.v),pe.ka=St-pe.j,pe.U=pe.va-pe.v,pe.T=Wt-St,ke=pe.put(pe))}Ae+1!=fe.Ic||Ot||(r(fe.sa,fe.ta-De,We,ct+16*fe.R,De),r(fe.qa,fe.ra-Xe,Ke,Pe+8*fe.B,Xe),r(fe.Ha,fe.Ia-Xe,Vt,Ht+8*fe.B,Xe))}if(!ke)return on(ve,6,"Output aborted.")}return 1}(c,v)),v.bc!=null&&v.bc(v),A&=1}return A?(c.cb=0,A):0}function Kr(c,v,A,j,z){z=c[v+A+32*j]+(z>>3),c[v+A+32*j]=-256&z?0>z?0:255:z}function Vo(c,v,A,j,z,$){Kr(c,v,0,A,j+z),Kr(c,v,1,A,j+$),Kr(c,v,2,A,j-$),Kr(c,v,3,A,j-z)}function An(c){return(20091*c>>16)+c}function Dr(c,v,A,j){var z,$=0,W=s(16);for(z=0;4>z;++z){var Z=c[v+0]+c[v+8],te=c[v+0]-c[v+8],re=(35468*c[v+4]>>16)-An(c[v+12]),de=An(c[v+4])+(35468*c[v+12]>>16);W[$+0]=Z+de,W[$+1]=te+re,W[$+2]=te-re,W[$+3]=Z-de,$+=4,v++}for(z=$=0;4>z;++z)Z=(c=W[$+0]+4)+W[$+8],te=c-W[$+8],re=(35468*W[$+4]>>16)-An(W[$+12]),Kr(A,j,0,0,Z+(de=An(W[$+4])+(35468*W[$+12]>>16))),Kr(A,j,1,0,te+re),Kr(A,j,2,0,te-re),Kr(A,j,3,0,Z-de),$++,j+=32}function to(c,v,A,j){var z=c[v+0]+4,$=35468*c[v+4]>>16,W=An(c[v+4]),Z=35468*c[v+1]>>16;Vo(A,j,0,z+W,c=An(c[v+1]),Z),Vo(A,j,1,z+$,c,Z),Vo(A,j,2,z-$,c,Z),Vo(A,j,3,z-W,c,Z)}function Bo(c,v,A,j,z){Dr(c,v,A,j),z&&Dr(c,v+16,A,j+4)}function hl(c,v,A,j){co(c,v+0,A,j,1),co(c,v+32,A,j+128,1)}function $t(c,v,A,j){var z;for(c=c[v+0]+4,z=0;4>z;++z)for(v=0;4>v;++v)Kr(A,j,v,z,c)}function no(c,v,A,j){c[v+0]&&Fr(c,v+0,A,j),c[v+16]&&Fr(c,v+16,A,j+4),c[v+32]&&Fr(c,v+32,A,j+128),c[v+48]&&Fr(c,v+48,A,j+128+4)}function ro(c,v,A,j){var z,$=s(16);for(z=0;4>z;++z){var W=c[v+0+z]+c[v+12+z],Z=c[v+4+z]+c[v+8+z],te=c[v+4+z]-c[v+8+z],re=c[v+0+z]-c[v+12+z];$[0+z]=W+Z,$[8+z]=W-Z,$[4+z]=re+te,$[12+z]=re-te}for(z=0;4>z;++z)W=(c=$[0+4*z]+3)+$[3+4*z],Z=$[1+4*z]+$[2+4*z],te=$[1+4*z]-$[2+4*z],re=c-$[3+4*z],A[j+0]=W+Z>>3,A[j+16]=re+te>>3,A[j+32]=W-Z>>3,A[j+48]=re-te>>3,j+=64}function Hi(c,v,A){var j,z=v-32,$=mi,W=255-c[z-1];for(j=0;j<A;++j){var Z,te=$,re=W+c[v-1];for(Z=0;Z<A;++Z)c[v+Z]=te[re+c[z+Z]];v+=32}}function Qc(c,v){Hi(c,v,4)}function pu(c,v){Hi(c,v,8)}function Yc(c,v){Hi(c,v,16)}function Wi(c,v){var A;for(A=0;16>A;++A)r(c,v+32*A,c,v-32,16)}function qo(c,v){var A;for(A=16;0<A;--A)i(c,v,c[v-1],16),v+=32}function zo(c,v,A){var j;for(j=0;16>j;++j)i(v,A+32*j,c,16)}function xs(c,v){var A,j=16;for(A=0;16>A;++A)j+=c[v-1+32*A]+c[v+A-32];zo(j>>5,c,v)}function an(c,v){var A,j=8;for(A=0;16>A;++A)j+=c[v-1+32*A];zo(j>>4,c,v)}function mu(c,v){var A,j=8;for(A=0;16>A;++A)j+=c[v+A-32];zo(j>>4,c,v)}function dl(c,v){zo(128,c,v)}function pt(c,v,A){return c+2*v+A+2>>2}function Ss(c,v){var A,j=v-32;for(j=new Uint8Array([pt(c[j-1],c[j+0],c[j+1]),pt(c[j+0],c[j+1],c[j+2]),pt(c[j+1],c[j+2],c[j+3]),pt(c[j+2],c[j+3],c[j+4])]),A=0;4>A;++A)r(c,v+32*A,j,0,j.length)}function Xc(c,v){var A=c[v-1],j=c[v-1+32],z=c[v-1+64],$=c[v-1+96];Ee(c,v+0,16843009*pt(c[v-1-32],A,j)),Ee(c,v+32,16843009*pt(A,j,z)),Ee(c,v+64,16843009*pt(j,z,$)),Ee(c,v+96,16843009*pt(z,$,$))}function Ii(c,v){var A,j=4;for(A=0;4>A;++A)j+=c[v+A-32]+c[v-1+32*A];for(j>>=3,A=0;4>A;++A)i(c,v+32*A,j,4)}function gu(c,v){var A=c[v-1+0],j=c[v-1+32],z=c[v-1+64],$=c[v-1-32],W=c[v+0-32],Z=c[v+1-32],te=c[v+2-32],re=c[v+3-32];c[v+0+96]=pt(j,z,c[v-1+96]),c[v+1+96]=c[v+0+64]=pt(A,j,z),c[v+2+96]=c[v+1+64]=c[v+0+32]=pt($,A,j),c[v+3+96]=c[v+2+64]=c[v+1+32]=c[v+0+0]=pt(W,$,A),c[v+3+64]=c[v+2+32]=c[v+1+0]=pt(Z,W,$),c[v+3+32]=c[v+2+0]=pt(te,Z,W),c[v+3+0]=pt(re,te,Z)}function di(c,v){var A=c[v+1-32],j=c[v+2-32],z=c[v+3-32],$=c[v+4-32],W=c[v+5-32],Z=c[v+6-32],te=c[v+7-32];c[v+0+0]=pt(c[v+0-32],A,j),c[v+1+0]=c[v+0+32]=pt(A,j,z),c[v+2+0]=c[v+1+32]=c[v+0+64]=pt(j,z,$),c[v+3+0]=c[v+2+32]=c[v+1+64]=c[v+0+96]=pt(z,$,W),c[v+3+32]=c[v+2+64]=c[v+1+96]=pt($,W,Z),c[v+3+64]=c[v+2+96]=pt(W,Z,te),c[v+3+96]=pt(Z,te,te)}function $o(c,v){var A=c[v-1+0],j=c[v-1+32],z=c[v-1+64],$=c[v-1-32],W=c[v+0-32],Z=c[v+1-32],te=c[v+2-32],re=c[v+3-32];c[v+0+0]=c[v+1+64]=$+W+1>>1,c[v+1+0]=c[v+2+64]=W+Z+1>>1,c[v+2+0]=c[v+3+64]=Z+te+1>>1,c[v+3+0]=te+re+1>>1,c[v+0+96]=pt(z,j,A),c[v+0+64]=pt(j,A,$),c[v+0+32]=c[v+1+96]=pt(A,$,W),c[v+1+32]=c[v+2+96]=pt($,W,Z),c[v+2+32]=c[v+3+96]=pt(W,Z,te),c[v+3+32]=pt(Z,te,re)}function fl(c,v){var A=c[v+0-32],j=c[v+1-32],z=c[v+2-32],$=c[v+3-32],W=c[v+4-32],Z=c[v+5-32],te=c[v+6-32],re=c[v+7-32];c[v+0+0]=A+j+1>>1,c[v+1+0]=c[v+0+64]=j+z+1>>1,c[v+2+0]=c[v+1+64]=z+$+1>>1,c[v+3+0]=c[v+2+64]=$+W+1>>1,c[v+0+32]=pt(A,j,z),c[v+1+32]=c[v+0+96]=pt(j,z,$),c[v+2+32]=c[v+1+96]=pt(z,$,W),c[v+3+32]=c[v+2+96]=pt($,W,Z),c[v+3+64]=pt(W,Z,te),c[v+3+96]=pt(Z,te,re)}function Ho(c,v){var A=c[v-1+0],j=c[v-1+32],z=c[v-1+64],$=c[v-1+96];c[v+0+0]=A+j+1>>1,c[v+2+0]=c[v+0+32]=j+z+1>>1,c[v+2+32]=c[v+0+64]=z+$+1>>1,c[v+1+0]=pt(A,j,z),c[v+3+0]=c[v+1+32]=pt(j,z,$),c[v+3+32]=c[v+1+64]=pt(z,$,$),c[v+3+64]=c[v+2+64]=c[v+0+96]=c[v+1+96]=c[v+2+96]=c[v+3+96]=$}function Wo(c,v){var A=c[v-1+0],j=c[v-1+32],z=c[v-1+64],$=c[v-1+96],W=c[v-1-32],Z=c[v+0-32],te=c[v+1-32],re=c[v+2-32];c[v+0+0]=c[v+2+32]=A+W+1>>1,c[v+0+32]=c[v+2+64]=j+A+1>>1,c[v+0+64]=c[v+2+96]=z+j+1>>1,c[v+0+96]=$+z+1>>1,c[v+3+0]=pt(Z,te,re),c[v+2+0]=pt(W,Z,te),c[v+1+0]=c[v+3+32]=pt(A,W,Z),c[v+1+32]=c[v+3+64]=pt(j,A,W),c[v+1+64]=c[v+3+96]=pt(z,j,A),c[v+1+96]=pt($,z,j)}function vu(c,v){var A;for(A=0;8>A;++A)r(c,v+32*A,c,v-32,8)}function Gi(c,v){var A;for(A=0;8>A;++A)i(c,v,c[v-1],8),v+=32}function fi(c,v,A){var j;for(j=0;8>j;++j)i(v,A+32*j,c,8)}function Ki(c,v){var A,j=8;for(A=0;8>A;++A)j+=c[v+A-32]+c[v-1+32*A];fi(j>>4,c,v)}function pl(c,v){var A,j=4;for(A=0;8>A;++A)j+=c[v+A-32];fi(j>>3,c,v)}function qt(c,v){var A,j=4;for(A=0;8>A;++A)j+=c[v-1+32*A];fi(j>>3,c,v)}function ml(c,v){fi(128,c,v)}function Go(c,v,A){var j=c[v-A],z=c[v+0],$=3*(z-j)+hg[1020+c[v-2*A]-c[v+A]],W=Yd[112+($+4>>3)];c[v-A]=mi[255+j+Yd[112+($+3>>3)]],c[v+0]=mi[255+z-W]}function gl(c,v,A,j){var z=c[v+0],$=c[v+A];return Li[255+c[v-2*A]-c[v-A]]>j||Li[255+$-z]>j}function vl(c,v,A,j){return 4*Li[255+c[v-A]-c[v+0]]+Li[255+c[v-2*A]-c[v+A]]<=j}function yl(c,v,A,j,z){var $=c[v-3*A],W=c[v-2*A],Z=c[v-A],te=c[v+0],re=c[v+A],de=c[v+2*A],_e=c[v+3*A];return 4*Li[255+Z-te]+Li[255+W-re]>j?0:Li[255+c[v-4*A]-$]<=z&&Li[255+$-W]<=z&&Li[255+W-Z]<=z&&Li[255+_e-de]<=z&&Li[255+de-re]<=z&&Li[255+re-te]<=z}function io(c,v,A,j){var z=2*j+1;for(j=0;16>j;++j)vl(c,v+j,A,z)&&Go(c,v+j,A)}function pi(c,v,A,j){var z=2*j+1;for(j=0;16>j;++j)vl(c,v+j*A,1,z)&&Go(c,v+j*A,1)}function Wn(c,v,A,j){var z;for(z=3;0<z;--z)io(c,v+=4*A,A,j)}function yu(c,v,A,j){var z;for(z=3;0<z;--z)pi(c,v+=4,A,j)}function As(c,v,A,j,z,$,W,Z){for($=2*$+1;0<z--;){if(yl(c,v,A,$,W))if(gl(c,v,A,Z))Go(c,v,A);else{var te=c,re=v,de=A,_e=te[re-2*de],we=te[re-de],ve=te[re+0],Ce=te[re+de],Ae=te[re+2*de],fe=27*(ke=hg[1020+3*(ve-we)+hg[1020+_e-Ce]])+63>>7,pe=18*ke+63>>7,ke=9*ke+63>>7;te[re-3*de]=mi[255+te[re-3*de]+ke],te[re-2*de]=mi[255+_e+pe],te[re-de]=mi[255+we+fe],te[re+0]=mi[255+ve-fe],te[re+de]=mi[255+Ce-pe],te[re+2*de]=mi[255+Ae-ke]}v+=j}}function ir(c,v,A,j,z,$,W,Z){for($=2*$+1;0<z--;){if(yl(c,v,A,$,W))if(gl(c,v,A,Z))Go(c,v,A);else{var te=c,re=v,de=A,_e=te[re-de],we=te[re+0],ve=te[re+de],Ce=Yd[112+((Ae=3*(we-_e))+4>>3)],Ae=Yd[112+(Ae+3>>3)],fe=Ce+1>>1;te[re-2*de]=mi[255+te[re-2*de]+fe],te[re-de]=mi[255+_e+Ae],te[re+0]=mi[255+we-Ce],te[re+de]=mi[255+ve-fe]}v+=j}}function Ko(c,v,A,j,z,$){As(c,v,A,1,16,j,z,$)}function Qi(c,v,A,j,z,$){As(c,v,1,A,16,j,z,$)}function Qo(c,v,A,j,z,$){var W;for(W=3;0<W;--W)ir(c,v+=4*A,A,1,16,j,z,$)}function so(c,v,A,j,z,$){var W;for(W=3;0<W;--W)ir(c,v+=4,1,A,16,j,z,$)}function Yo(c,v,A,j,z,$,W,Z){As(c,v,z,1,8,$,W,Z),As(A,j,z,1,8,$,W,Z)}function _l(c,v,A,j,z,$,W,Z){As(c,v,1,z,8,$,W,Z),As(A,j,1,z,8,$,W,Z)}function Xo(c,v,A,j,z,$,W,Z){ir(c,v+4*z,z,1,8,$,W,Z),ir(A,j+4*z,z,1,8,$,W,Z)}function Es(c,v,A,j,z,$,W,Z){ir(c,v+4,1,z,8,$,W,Z),ir(A,j+4,1,z,8,$,W,Z)}function oo(){this.ba=new Hn,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Rt,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Jo(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function ao(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Zo(){this.ua=0,this.Wa=new ae,this.vb=new ae,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new U,this.yc=new T}function _u(){this.xb=this.a=0,this.l=new eo,this.ca=new Hn,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new M,this.Pb=0,this.wd=new M,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Zo,this.ab=0,this.gc=o(4,ao),this.Oc=0}function Yi(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new eo,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Ns(c,v,A,j,z,$,W){for(c=c==null?0:c[v+0],v=0;v<W;++v)z[$+v]=c+A[j+v]&255,c=z[$+v]}function ea(c,v,A,j,z,$,W){var Z;if(c==null)Ns(null,null,A,j,z,$,W);else for(Z=0;Z<W;++Z)z[$+Z]=c[v+Z]+A[j+Z]&255}function yr(c,v,A,j,z,$,W){if(c==null)Ns(null,null,A,j,z,$,W);else{var Z,te=c[v+0],re=te,de=te;for(Z=0;Z<W;++Z)re=de+(te=c[v+Z])-re,de=A[j+Z]+(-256&re?0>re?0:255:re)&255,re=te,z[$+Z]=de}}function ta(c,v,A,j){var z=v.width,$=v.o;if(e(c!=null&&v!=null),0>A||0>=j||A+j>$)return null;if(!c.Cc){if(c.ga==null){var W;if(c.ga=new Yi,(W=c.ga==null)||(W=v.width*v.o,e(c.Gb.length==0),c.Gb=s(W),c.Uc=0,c.Gb==null?W=0:(c.mb=c.Gb,c.nb=c.Uc,c.rc=null,W=1),W=!W),!W){W=c.ga;var Z=c.Fa,te=c.P,re=c.qc,de=c.mb,_e=c.nb,we=te+1,ve=re-1,Ce=W.l;if(e(Z!=null&&de!=null&&v!=null),aa[0]=null,aa[1]=Ns,aa[2]=ea,aa[3]=yr,W.ca=de,W.tb=_e,W.c=v.width,W.i=v.height,e(0<W.c&&0<W.i),1>=re)v=0;else if(W.$a=Z[te+0]>>0&3,W.Z=Z[te+0]>>2&3,W.Lc=Z[te+0]>>4&3,te=Z[te+0]>>6&3,0>W.$a||1<W.$a||4<=W.Z||1<W.Lc||te)v=0;else if(Ce.put=fn,Ce.ac=Yt,Ce.bc=ci,Ce.ma=W,Ce.width=v.width,Ce.height=v.height,Ce.Da=v.Da,Ce.v=v.v,Ce.va=v.va,Ce.j=v.j,Ce.o=v.o,W.$a)e:{e(W.$a==1),v=Pn();t:for(;;){if(v==null){v=0;break e}if(e(W!=null),W.mc=v,v.c=W.c,v.i=W.i,v.l=W.l,v.l.ma=W,v.l.width=W.c,v.l.height=W.i,v.a=0,G(v.m,Z,we,ve),!hi(W.c,W.i,1,v,null)||(v.ab==1&&v.gc[0].hc==3&&zi(v.s)?(W.ic=1,Z=v.c*v.i,v.Ta=null,v.Ua=0,v.V=s(Z),v.Ba=0,v.V==null?(v.a=1,v=0):v=1):(W.ic=0,v=vs(v,W.c)),!v))break t;v=1;break e}W.mc=null,v=0}else v=ve>=W.c*W.i;W=!v}if(W)return null;c.ga.Lc!=1?c.Ga=0:j=$-A}e(c.ga!=null),e(A+j<=$);e:{if(v=(Z=c.ga).c,$=Z.l.o,Z.$a==0){if(we=c.rc,ve=c.Vc,Ce=c.Fa,te=c.P+1+A*v,re=c.mb,de=c.nb+A*v,e(te<=c.P+c.qc),Z.Z!=0)for(e(aa[Z.Z]!=null),W=0;W<j;++W)aa[Z.Z](we,ve,Ce,te,re,de,v),we=re,ve=de,de+=v,te+=v;else for(W=0;W<j;++W)r(re,de,Ce,te,v),we=re,ve=de,de+=v,te+=v;c.rc=we,c.Vc=ve}else{if(e(Z.mc!=null),v=A+j,e((W=Z.mc)!=null),e(v<=W.i),W.C>=v)v=1;else if(Z.ic||ge(),Z.ic){Z=W.V,we=W.Ba,ve=W.c;var Ae=W.i,fe=(Ce=1,te=W.$/ve,re=W.$%ve,de=W.m,_e=W.s,W.$),pe=ve*Ae,ke=ve*v,De=_e.wc,Pe=fe<ke?Sn(_e,re,te):null;e(fe<=pe),e(v<=Ae),e(zi(_e));t:for(;;){for(;!de.h&&fe<ke;){if(re&De||(Pe=Sn(_e,re,te)),e(Pe!=null),oe(de),256>(Ae=Mn(Pe.G[0],Pe.H[0],de)))Z[we+fe]=Ae,++fe,++re>=ve&&(re=0,++te<=v&&!(te%16)&&Gr(W,te));else{if(!(280>Ae)){Ce=0;break t}Ae=Wr(Ae-256,de);var Xe,We=Mn(Pe.G[4],Pe.H[4],de);if(oe(de),!(fe>=(We=gr(ve,We=Wr(We,de)))&&pe-fe>=Ae)){Ce=0;break t}for(Xe=0;Xe<Ae;++Xe)Z[we+fe+Xe]=Z[we+fe+Xe-We];for(fe+=Ae,re+=Ae;re>=ve;)re-=ve,++te<=v&&!(te%16)&&Gr(W,te);fe<ke&&re&De&&(Pe=Sn(_e,re,te))}e(de.h==X(de))}Gr(W,te>v?v:te);break t}!Ce||de.h&&fe<pe?(Ce=0,W.a=de.h?5:3):W.$=fe,v=Ce}else v=Rr(W,W.V,W.Ba,W.c,W.i,v,ys);if(!v){j=0;break e}}A+j>=$&&(c.Cc=1),j=1}if(!j)return null;if(c.Cc&&((j=c.ga)!=null&&(j.mc=null),c.ga=null,0<c.Ga))return alert("todo:WebPDequantizeLevels"),null}return c.nb+A*z}function w(c,v,A,j,z,$){for(;0<z--;){var W,Z=c,te=v+(A?1:0),re=c,de=v+(A?0:3);for(W=0;W<j;++W){var _e=re[de+4*W];_e!=255&&(_e*=32897,Z[te+4*W+0]=Z[te+4*W+0]*_e>>23,Z[te+4*W+1]=Z[te+4*W+1]*_e>>23,Z[te+4*W+2]=Z[te+4*W+2]*_e>>23)}v+=$}}function q(c,v,A,j,z){for(;0<j--;){var $;for($=0;$<A;++$){var W=c[v+2*$+0],Z=15&(re=c[v+2*$+1]),te=4369*Z,re=(240&re|re>>4)*te>>16;c[v+2*$+0]=(240&W|W>>4)*te>>16&240|(15&W|W<<4)*te>>16>>4&15,c[v+2*$+1]=240&re|Z}v+=z}}function se(c,v,A,j,z,$,W,Z){var te,re,de=255;for(re=0;re<z;++re){for(te=0;te<j;++te){var _e=c[v+te];$[W+4*te]=_e,de&=_e}v+=A,W+=Z}return de!=255}function ce(c,v,A,j,z){var $;for($=0;$<z;++$)A[j+$]=c[v+$]>>8}function ge(){Ci=w,tn=q,nn=se,Ln=ce}function Ie(c,v,A){y[c]=function(j,z,$,W,Z,te,re,de,_e,we,ve,Ce,Ae,fe,pe,ke,De){var Pe,Xe=De-1>>1,We=Z[te+0]|re[de+0]<<16,ct=_e[we+0]|ve[Ce+0]<<16;e(j!=null);var Ke=3*We+ct+131074>>2;for(v(j[z+0],255&Ke,Ke>>16,Ae,fe),$!=null&&(Ke=3*ct+We+131074>>2,v($[W+0],255&Ke,Ke>>16,pe,ke)),Pe=1;Pe<=Xe;++Pe){var Vt=Z[te+Pe]|re[de+Pe]<<16,Ht=_e[we+Pe]|ve[Ce+Pe]<<16,Ot=We+Vt+ct+Ht+524296,Pt=Ot+2*(Vt+ct)>>3;Ke=Pt+We>>1,We=(Ot=Ot+2*(We+Ht)>>3)+Vt>>1,v(j[z+2*Pe-1],255&Ke,Ke>>16,Ae,fe+(2*Pe-1)*A),v(j[z+2*Pe-0],255&We,We>>16,Ae,fe+(2*Pe-0)*A),$!=null&&(Ke=Ot+ct>>1,We=Pt+Ht>>1,v($[W+2*Pe-1],255&Ke,Ke>>16,pe,ke+(2*Pe-1)*A),v($[W+2*Pe+0],255&We,We>>16,pe,ke+(2*Pe+0)*A)),We=Vt,ct=Ht}1&De||(Ke=3*We+ct+131074>>2,v(j[z+De-1],255&Ke,Ke>>16,Ae,fe+(De-1)*A),$!=null&&(Ke=3*ct+We+131074>>2,v($[W+De-1],255&Ke,Ke>>16,pe,ke+(De-1)*A)))}}function Oe(){Ri[Xd]=lE,Ri[Jd]=yy,Ri[fy]=uE,Ri[Zd]=_y,Ri[ef]=wy,Ri[dg]=by,Ri[py]=cE,Ri[fg]=yy,Ri[pg]=_y,Ri[tf]=wy,Ri[mg]=by}function Ge(c){return c&-16384?0>c?0:255:c>>hE}function d(c,v){return Ge((19077*c>>8)+(26149*v>>8)-14234)}function k(c,v,A){return Ge((19077*c>>8)-(6419*v>>8)-(13320*A>>8)+8708)}function D(c,v){return Ge((19077*c>>8)+(33050*v>>8)-17685)}function J(c,v,A,j,z){j[z+0]=d(c,A),j[z+1]=k(c,v,A),j[z+2]=D(c,v)}function me(c,v,A,j,z){j[z+0]=D(c,v),j[z+1]=k(c,v,A),j[z+2]=d(c,A)}function xe(c,v,A,j,z){var $=k(c,v,A);v=$<<3&224|D(c,v)>>3,j[z+0]=248&d(c,A)|$>>5,j[z+1]=v}function Fe(c,v,A,j,z){var $=240&D(c,v)|15;j[z+0]=240&d(c,A)|k(c,v,A)>>4,j[z+1]=$}function yt(c,v,A,j,z){j[z+0]=255,J(c,v,A,j,z+1)}function kt(c,v,A,j,z){me(c,v,A,j,z),j[z+3]=255}function _t(c,v,A,j,z){J(c,v,A,j,z),j[z+3]=255}function zt(c,v){return 0>c?0:c>v?v:c}function Jt(c,v,A){y[c]=function(j,z,$,W,Z,te,re,de,_e){for(var we=de+(-2&_e)*A;de!=we;)v(j[z+0],$[W+0],Z[te+0],re,de),v(j[z+1],$[W+0],Z[te+0],re,de+A),z+=2,++W,++te,de+=2*A;1&_e&&v(j[z+0],$[W+0],Z[te+0],re,de)}}function Xi(c,v,A){return A==0?c==0?v==0?6:5:v==0?4:0:A}function sr(c,v,A,j,z){switch(c>>>30){case 3:co(v,A,j,z,0);break;case 2:Cn(v,A,j,z);break;case 1:Fr(v,A,j,z)}}function Is(c,v){var A,j,z=v.M,$=v.Nb,W=c.oc,Z=c.pc+40,te=c.oc,re=c.pc+584,de=c.oc,_e=c.pc+600;for(A=0;16>A;++A)W[Z+32*A-1]=129;for(A=0;8>A;++A)te[re+32*A-1]=129,de[_e+32*A-1]=129;for(0<z?W[Z-1-32]=te[re-1-32]=de[_e-1-32]=129:(i(W,Z-32-1,127,21),i(te,re-32-1,127,9),i(de,_e-32-1,127,9)),j=0;j<c.za;++j){var we=v.ya[v.aa+j];if(0<j){for(A=-1;16>A;++A)r(W,Z+32*A-4,W,Z+32*A+12,4);for(A=-1;8>A;++A)r(te,re+32*A-4,te,re+32*A+4,4),r(de,_e+32*A-4,de,_e+32*A+4,4)}var ve=c.Gd,Ce=c.Hd+j,Ae=we.ad,fe=we.Hc;if(0<z&&(r(W,Z-32,ve[Ce].y,0,16),r(te,re-32,ve[Ce].f,0,8),r(de,_e-32,ve[Ce].ea,0,8)),we.Za){var pe=W,ke=Z-32+16;for(0<z&&(j>=c.za-1?i(pe,ke,ve[Ce].y[15],4):r(pe,ke,ve[Ce+1].y,0,4)),A=0;4>A;A++)pe[ke+128+A]=pe[ke+256+A]=pe[ke+384+A]=pe[ke+0+A];for(A=0;16>A;++A,fe<<=2)pe=W,ke=Z+Sy[A],Ji[we.Ob[A]](pe,ke),sr(fe,Ae,16*+A,pe,ke)}else if(pe=Xi(j,z,we.Ob[0]),oa[pe](W,Z),fe!=0)for(A=0;16>A;++A,fe<<=2)sr(fe,Ae,16*+A,W,Z+Sy[A]);for(A=we.Gc,pe=Xi(j,z,we.Dd),fo[pe](te,re),fo[pe](de,_e),fe=Ae,pe=te,ke=re,255&(we=A>>0)&&(170&we?nh(fe,256,pe,ke):ki(fe,256,pe,ke)),we=de,fe=_e,255&(A>>=8)&&(170&A?nh(Ae,320,we,fe):ki(Ae,320,we,fe)),z<c.Ub-1&&(r(ve[Ce].y,0,W,Z+480,16),r(ve[Ce].f,0,te,re+224,8),r(ve[Ce].ea,0,de,_e+224,8)),A=8*$*c.B,ve=c.sa,Ce=c.ta+16*j+16*$*c.R,Ae=c.qa,we=c.ra+8*j+A,fe=c.Ha,pe=c.Ia+8*j+A,A=0;16>A;++A)r(ve,Ce+A*c.R,W,Z+32*A,16);for(A=0;8>A;++A)r(Ae,we+A*c.B,te,re+32*A,8),r(fe,pe+A*c.B,de,_e+32*A,8)}}function Ts(c,v,A,j,z,$,W,Z,te){var re=[0],de=[0],_e=0,we=te!=null?te.kd:0,ve=te??new Jo;if(c==null||12>A)return 7;ve.data=c,ve.w=v,ve.ha=A,v=[v],A=[A],ve.gb=[ve.gb];e:{var Ce=v,Ae=A,fe=ve.gb;if(e(c!=null),e(Ae!=null),e(fe!=null),fe[0]=0,12<=Ae[0]&&!n(c,Ce[0],"RIFF")){if(n(c,Ce[0]+8,"WEBP")){fe=3;break e}var pe=Ue(c,Ce[0]+4);if(12>pe||4294967286<pe){fe=3;break e}if(we&&pe>Ae[0]-8){fe=7;break e}fe[0]=pe,Ce[0]+=12,Ae[0]-=12}fe=0}if(fe!=0)return fe;for(pe=0<ve.gb[0],A=A[0];;){e:{var ke=c;Ae=v,fe=A;var De=re,Pe=de,Xe=Ce=[0];if((Ke=_e=[_e])[0]=0,8>fe[0])fe=7;else{if(!n(ke,Ae[0],"VP8X")){if(Ue(ke,Ae[0]+4)!=10){fe=3;break e}if(18>fe[0]){fe=7;break e}var We=Ue(ke,Ae[0]+8),ct=1+je(ke,Ae[0]+12);if(2147483648<=ct*(ke=1+je(ke,Ae[0]+15))){fe=3;break e}Xe!=null&&(Xe[0]=We),De!=null&&(De[0]=ct),Pe!=null&&(Pe[0]=ke),Ae[0]+=18,fe[0]-=18,Ke[0]=1}fe=0}}if(_e=_e[0],Ce=Ce[0],fe!=0)return fe;if(Ae=!!(2&Ce),!pe&&_e)return 3;if($!=null&&($[0]=!!(16&Ce)),W!=null&&(W[0]=Ae),Z!=null&&(Z[0]=0),W=re[0],Ce=de[0],_e&&Ae&&te==null){fe=0;break}if(4>A){fe=7;break}if(pe&&_e||!pe&&!_e&&!n(c,v[0],"ALPH")){A=[A],ve.na=[ve.na],ve.P=[ve.P],ve.Sa=[ve.Sa];e:{We=c,fe=v,pe=A;var Ke=ve.gb;De=ve.na,Pe=ve.P,Xe=ve.Sa,ct=22,e(We!=null),e(pe!=null),ke=fe[0];var Vt=pe[0];for(e(De!=null),e(Xe!=null),De[0]=null,Pe[0]=null,Xe[0]=0;;){if(fe[0]=ke,pe[0]=Vt,8>Vt){fe=7;break e}var Ht=Ue(We,ke+4);if(4294967286<Ht){fe=3;break e}var Ot=8+Ht+1&-2;if(ct+=Ot,0<Ke&&ct>Ke){fe=3;break e}if(!n(We,ke,"VP8 ")||!n(We,ke,"VP8L")){fe=0;break e}if(Vt[0]<Ot){fe=7;break e}n(We,ke,"ALPH")||(De[0]=We,Pe[0]=ke+8,Xe[0]=Ht),ke+=Ot,Vt-=Ot}}if(A=A[0],ve.na=ve.na[0],ve.P=ve.P[0],ve.Sa=ve.Sa[0],fe!=0)break}A=[A],ve.Ja=[ve.Ja],ve.xa=[ve.xa];e:if(Ke=c,fe=v,pe=A,De=ve.gb[0],Pe=ve.Ja,Xe=ve.xa,We=fe[0],ke=!n(Ke,We,"VP8 "),ct=!n(Ke,We,"VP8L"),e(Ke!=null),e(pe!=null),e(Pe!=null),e(Xe!=null),8>pe[0])fe=7;else{if(ke||ct){if(Ke=Ue(Ke,We+4),12<=De&&Ke>De-12){fe=3;break e}if(we&&Ke>pe[0]-8){fe=7;break e}Pe[0]=Ke,fe[0]+=8,pe[0]-=8,Xe[0]=ct}else Xe[0]=5<=pe[0]&&Ke[We+0]==47&&!(Ke[We+4]>>5),Pe[0]=pe[0];fe=0}if(A=A[0],ve.Ja=ve.Ja[0],ve.xa=ve.xa[0],v=v[0],fe!=0)break;if(4294967286<ve.Ja)return 3;if(Z==null||Ae||(Z[0]=ve.xa?2:1),W=[W],Ce=[Ce],ve.xa){if(5>A){fe=7;break}Z=W,we=Ce,Ae=$,c==null||5>A?c=0:5<=A&&c[v+0]==47&&!(c[v+4]>>5)?(pe=[0],Ke=[0],De=[0],G(Pe=new M,c,v,A),Ze(Pe,pe,Ke,De)?(Z!=null&&(Z[0]=pe[0]),we!=null&&(we[0]=Ke[0]),Ae!=null&&(Ae[0]=De[0]),c=1):c=0):c=0}else{if(10>A){fe=7;break}Z=Ce,c==null||10>A||!ll(c,v+3,A-3)?c=0:(we=c[v+0]|c[v+1]<<8|c[v+2]<<16,Ae=16383&(c[v+7]<<8|c[v+6]),c=16383&(c[v+9]<<8|c[v+8]),1&we||3<(we>>1&7)||!(we>>4&1)||we>>5>=ve.Ja||!Ae||!c?c=0:(W&&(W[0]=Ae),Z&&(Z[0]=c),c=1))}if(!c||(W=W[0],Ce=Ce[0],_e&&(re[0]!=W||de[0]!=Ce)))return 3;te!=null&&(te[0]=ve,te.offset=v-te.w,e(4294967286>v-te.w),e(te.offset==te.ha-A));break}return fe==0||fe==7&&_e&&te==null?($!=null&&($[0]|=ve.na!=null&&0<ve.na.length),j!=null&&(j[0]=W),z!=null&&(z[0]=Ce),0):fe}function Jc(c,v,A){var j=v.width,z=v.height,$=0,W=0,Z=j,te=z;if(v.Da=c!=null&&0<c.Da,v.Da&&(Z=c.cd,te=c.bd,$=c.v,W=c.j,11>A||($&=-2,W&=-2),0>$||0>W||0>=Z||0>=te||$+Z>j||W+te>z))return 0;if(v.v=$,v.j=W,v.va=$+Z,v.o=W+te,v.U=Z,v.T=te,v.da=c!=null&&0<c.da,v.da){if(!ye(Z,te,A=[c.ib],$=[c.hb]))return 0;v.ib=A[0],v.hb=$[0]}return v.ob=c!=null&&c.ob,v.Kb=c==null||!c.Sd,v.da&&(v.ob=v.ib<3*j/4&&v.hb<3*z/4,v.Kb=0),1}function Zc(c){if(c==null)return 2;if(11>c.S){var v=c.f.RGBA;v.fb+=(c.height-1)*v.A,v.A=-v.A}else v=c.f.kb,c=c.height,v.O+=(c-1)*v.fa,v.fa=-v.fa,v.N+=(c-1>>1)*v.Ab,v.Ab=-v.Ab,v.W+=(c-1>>1)*v.Db,v.Db=-v.Db,v.F!=null&&(v.J+=(c-1)*v.lb,v.lb=-v.lb);return 0}function wu(c,v,A,j){if(j==null||0>=c||0>=v)return 2;if(A!=null){if(A.Da){var z=A.cd,$=A.bd,W=-2&A.v,Z=-2&A.j;if(0>W||0>Z||0>=z||0>=$||W+z>c||Z+$>v)return 2;c=z,v=$}if(A.da){if(!ye(c,v,z=[A.ib],$=[A.hb]))return 2;c=z[0],v=$[0]}}j.width=c,j.height=v;e:{var te=j.width,re=j.height;if(c=j.S,0>=te||0>=re||!(c>=Xd&&13>c))c=2;else{if(0>=j.Rd&&j.sd==null){W=$=z=v=0;var de=(Z=te*Ay[c])*re;if(11>c||($=(re+1)/2*(v=(te+1)/2),c==12&&(W=(z=te)*re)),(re=s(de+2*$+W))==null){c=1;break e}j.sd=re,11>c?((te=j.f.RGBA).eb=re,te.fb=0,te.A=Z,te.size=de):((te=j.f.kb).y=re,te.O=0,te.fa=Z,te.Fd=de,te.f=re,te.N=0+de,te.Ab=v,te.Cd=$,te.ea=re,te.W=0+de+$,te.Db=v,te.Ed=$,c==12&&(te.F=re,te.J=0+de+2*$),te.Tc=W,te.lb=z)}if(v=1,z=j.S,$=j.width,W=j.height,z>=Xd&&13>z)if(11>z)c=j.f.RGBA,v&=(Z=Math.abs(c.A))*(W-1)+$<=c.size,v&=Z>=$*Ay[z],v&=c.eb!=null;else{c=j.f.kb,Z=($+1)/2,de=(W+1)/2,te=Math.abs(c.fa),re=Math.abs(c.Ab);var _e=Math.abs(c.Db),we=Math.abs(c.lb),ve=we*(W-1)+$;v&=te*(W-1)+$<=c.Fd,v&=re*(de-1)+Z<=c.Cd,v=(v&=_e*(de-1)+Z<=c.Ed)&te>=$&re>=Z&_e>=Z,v&=c.y!=null,v&=c.f!=null,v&=c.ea!=null,z==12&&(v&=we>=$,v&=ve<=c.Tc,v&=c.F!=null)}else v=0;c=v?0:2}}return c!=0||A!=null&&A.fd&&(c=Zc(j)),c}var or=64,bu=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],xu=24,Su=32,eh=8,Qr=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Me("Predictor0","PredictorAdd0"),y.Predictor0=function(){return 4278190080},y.Predictor1=function(c){return c},y.Predictor2=function(c,v,A){return v[A+0]},y.Predictor3=function(c,v,A){return v[A+1]},y.Predictor4=function(c,v,A){return v[A-1]},y.Predictor5=function(c,v,A){return ze(ze(c,v[A+1]),v[A+0])},y.Predictor6=function(c,v,A){return ze(c,v[A-1])},y.Predictor7=function(c,v,A){return ze(c,v[A+0])},y.Predictor8=function(c,v,A){return ze(v[A-1],v[A+0])},y.Predictor9=function(c,v,A){return ze(v[A+0],v[A+1])},y.Predictor10=function(c,v,A){return ze(ze(c,v[A-1]),ze(v[A+0],v[A+1]))},y.Predictor11=function(c,v,A){var j=v[A+0];return 0>=st(j>>24&255,c>>24&255,(v=v[A-1])>>24&255)+st(j>>16&255,c>>16&255,v>>16&255)+st(j>>8&255,c>>8&255,v>>8&255)+st(255&j,255&c,255&v)?j:c},y.Predictor12=function(c,v,A){var j=v[A+0];return(He((c>>24&255)+(j>>24&255)-((v=v[A-1])>>24&255))<<24|He((c>>16&255)+(j>>16&255)-(v>>16&255))<<16|He((c>>8&255)+(j>>8&255)-(v>>8&255))<<8|He((255&c)+(255&j)-(255&v)))>>>0},y.Predictor13=function(c,v,A){var j=v[A-1];return(Qe((c=ze(c,v[A+0]))>>24&255,j>>24&255)<<24|Qe(c>>16&255,j>>16&255)<<16|Qe(c>>8&255,j>>8&255)<<8|Qe(c>>0&255,j>>0&255))>>>0};var cg=y.PredictorAdd0;y.PredictorAdd1=tt,Me("Predictor2","PredictorAdd2"),Me("Predictor3","PredictorAdd3"),Me("Predictor4","PredictorAdd4"),Me("Predictor5","PredictorAdd5"),Me("Predictor6","PredictorAdd6"),Me("Predictor7","PredictorAdd7"),Me("Predictor8","PredictorAdd8"),Me("Predictor9","PredictorAdd9"),Me("Predictor10","PredictorAdd10"),Me("Predictor11","PredictorAdd11"),Me("Predictor12","PredictorAdd12"),Me("Predictor13","PredictorAdd13");var th=y.PredictorAdd2;at("ColorIndexInverseTransform","MapARGB","32b",function(c){return c>>8&255},function(c){return c}),at("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(c){return c},function(c){return c>>8&255});var Hd,Ti=y.ColorIndexInverseTransform,Au=y.MapARGB,Wd=y.VP8LColorIndexInverseTransformAlpha,Gd=y.MapAlpha,na=y.VP8LPredictorsAdd=[];na.length=16,(y.VP8LPredictors=[]).length=16,(y.VP8LPredictorsAdd_C=[]).length=16,(y.VP8LPredictors_C=[]).length=16;var wl,Yr,Or,ra,lo,uo,Eu,co,Cn,nh,Fr,ki,Nu,Kd,rh,bl,xl,ia,Sl,Iu,Al,sa,ih,Pi,Ci,tn,nn,Ln,Gn=s(511),ho=s(2041),sh=s(225),Tu=s(767),Qd=0,hg=ho,Yd=sh,mi=Tu,Li=Gn,Xd=0,Jd=1,fy=2,Zd=3,ef=4,dg=5,py=6,fg=7,pg=8,tf=9,mg=10,KA=[2,3,7],QA=[3,3,11],my=[280,256,256,256,40],YA=[0,1,1,1,0],XA=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],JA=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],ZA=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],eE=8,gg=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],vg=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],oh=null,tE=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],nE=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],gy=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],rE=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],iE=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],sE=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],oE=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],oa=[],Ji=[],fo=[],aE=1,vy=2,aa=[],Ri=[];Ie("UpsampleRgbLinePair",J,3),Ie("UpsampleBgrLinePair",me,3),Ie("UpsampleRgbaLinePair",_t,4),Ie("UpsampleBgraLinePair",kt,4),Ie("UpsampleArgbLinePair",yt,4),Ie("UpsampleRgba4444LinePair",Fe,2),Ie("UpsampleRgb565LinePair",xe,2);var lE=y.UpsampleRgbLinePair,uE=y.UpsampleBgrLinePair,yy=y.UpsampleRgbaLinePair,_y=y.UpsampleBgraLinePair,wy=y.UpsampleArgbLinePair,by=y.UpsampleRgba4444LinePair,cE=y.UpsampleRgb565LinePair,nf=16,rf=1<<nf-1,ah=-227,yg=482,hE=6,xy=0,dE=s(256),fE=s(256),pE=s(256),mE=s(256),gE=s(yg-ah),vE=s(yg-ah);Jt("YuvToRgbRow",J,3),Jt("YuvToBgrRow",me,3),Jt("YuvToRgbaRow",_t,4),Jt("YuvToBgraRow",kt,4),Jt("YuvToArgbRow",yt,4),Jt("YuvToRgba4444Row",Fe,2),Jt("YuvToRgb565Row",xe,2);var Sy=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],sf=[0,2,8],yE=[8,7,6,4,4,2,2,2,1,1,1,1],_E=1;this.WebPDecodeRGBA=function(c,v,A,j,z){var $=Jd,W=new oo,Z=new Hn;W.ba=Z,Z.S=$,Z.width=[Z.width],Z.height=[Z.height];var te=Z.width,re=Z.height,de=new xn;if(de==null||c==null)var _e=2;else e(de!=null),_e=Ts(c,v,A,de.width,de.height,de.Pd,de.Qd,de.format,null);if(_e!=0?te=0:(te!=null&&(te[0]=de.width[0]),re!=null&&(re[0]=de.height[0]),te=1),te){Z.width=Z.width[0],Z.height=Z.height[0],j!=null&&(j[0]=Z.width),z!=null&&(z[0]=Z.height);e:{if(j=new eo,(z=new Jo).data=c,z.w=v,z.ha=A,z.kd=1,v=[0],e(z!=null),((c=Ts(z.data,z.w,z.ha,null,null,null,v,null,z))==0||c==7)&&v[0]&&(c=4),(v=c)==0){if(e(W!=null),j.data=z.data,j.w=z.w+z.offset,j.ha=z.ha-z.offset,j.put=fn,j.ac=Yt,j.bc=ci,j.ma=W,z.xa){if((c=Pn())==null){W=1;break e}if(function(we,ve){var Ce=[0],Ae=[0],fe=[0];t:for(;;){if(we==null)return 0;if(ve==null)return we.a=2,0;if(we.l=ve,we.a=0,G(we.m,ve.data,ve.w,ve.ha),!Ze(we.m,Ce,Ae,fe)){we.a=3;break t}if(we.xb=vy,ve.width=Ce[0],ve.height=Ae[0],!hi(Ce[0],Ae[0],1,we,null))break t;return 1}return e(we.a!=0),0}(c,j)){if(j=(v=wu(j.width,j.height,W.Oa,W.ba))==0){t:{j=c;n:for(;;){if(j==null){j=0;break t}if(e(j.s.yc!=null),e(j.s.Ya!=null),e(0<j.s.Wb),e((A=j.l)!=null),e((z=A.ma)!=null),j.xb!=0){if(j.ca=z.ba,j.tb=z.tb,e(j.ca!=null),!Jc(z.Oa,A,Zd)){j.a=2;break n}if(!vs(j,A.width)||A.da)break n;if((A.da||It(j.ca.S))&&ge(),11>j.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),j.ca.f.kb.F!=null&&ge()),j.Pb&&0<j.s.ua&&j.s.vb.X==null&&!Ye(j.s.vb,j.s.Wa.Xa)){j.a=1;break n}j.xb=0}if(!Rr(j,j.V,j.Ba,j.c,j.i,A.o,Mo))break n;z.Dc=j.Ma,j=1;break t}e(j.a!=0),j=0}j=!j}j&&(v=c.a)}else v=c.a}else{if((c=new al)==null){W=1;break e}if(c.Fa=z.na,c.P=z.P,c.qc=z.Sa,ul(c,j)){if((v=wu(j.width,j.height,W.Oa,W.ba))==0){if(c.Aa=0,A=W.Oa,e((z=c)!=null),A!=null){if(0<(te=0>(te=A.Md)?0:100<te?255:255*te/100)){for(re=de=0;4>re;++re)12>(_e=z.pb[re]).lc&&(_e.ia=te*yE[0>_e.lc?0:_e.lc]>>3),de|=_e.ia;de&&(alert("todo:VP8InitRandom"),z.ia=1)}z.Ga=A.Id,100<z.Ga?z.Ga=100:0>z.Ga&&(z.Ga=0)}fu(c,j)||(v=c.a)}}else v=c.a}v==0&&W.Oa!=null&&W.Oa.fd&&(v=Zc(W.ba))}W=v}$=W!=0?null:11>$?Z.f.RGBA.eb:Z.f.kb.y}else $=null;return $};var Ay=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function u(y,S){for(var R="",N=0;N<4;N++)R+=String.fromCharCode(y[S++]);return R}function h(y,S){return(y[S+0]<<0|y[S+1]<<8|y[S+2]<<16)>>>0}function f(y,S){return(y[S+0]<<0|y[S+1]<<8|y[S+2]<<16|y[S+3]<<24)>>>0}new l;var m=[0],p=[0],b=[],x=new l,I=t,_=function(y,S){var R={},N=0,T=!1,P=0,U=0;if(R.frames=[],!function(Y,X,H,oe){for(var ne=0;ne<oe;ne++)if(Y[X+ne]!=H.charCodeAt(ne))return!0;return!1}(y,S,"RIFF",4)){var Q,F;for(f(y,S+=4),S+=8;S<y.length;){var V=u(y,S),G=f(y,S+=4);S+=4;var ee=G+(1&G);switch(V){case"VP8 ":case"VP8L":R.frames[N]===void 0&&(R.frames[N]={}),(M=R.frames[N]).src_off=T?U:S-8,M.src_size=P+G+8,N++,T&&(T=!1,P=0,U=0);break;case"VP8X":(M=R.header={}).feature_flags=y[S];var ie=S+4;M.canvas_width=1+h(y,ie),ie+=3,M.canvas_height=1+h(y,ie),ie+=3;break;case"ALPH":T=!0,P=ee+8,U=S-8;break;case"ANIM":(M=R.header).bgcolor=f(y,S),ie=S+4,M.loop_count=(Q=y)[(F=ie)+0]<<0|Q[F+1]<<8,ie+=2;break;case"ANMF":var be,M;(M=R.frames[N]={}).offset_x=2*h(y,S),S+=3,M.offset_y=2*h(y,S),S+=3,M.width=1+h(y,S),S+=3,M.height=1+h(y,S),S+=3,M.duration=h(y,S),S+=3,be=y[S++],M.dispose=1&be,M.blend=be>>1&1}V!="ANMF"&&(S+=ee)}return R}}(I,0);_.response=I,_.rgbaoutput=!0,_.dataurl=!1;var E=_.header?_.header:null,C=_.frames?_.frames:null;if(E){E.loop_counter=E.loop_count,m=[E.canvas_height],p=[E.canvas_width];for(var O=0;O<C.length&&C[O].blend!=0;O++);}var K=C[0],B=x.WebPDecodeRGBA(I,K.src_off,K.src_size,p,m);K.rgba=B,K.imgwidth=p[0],K.imgheight=m[0];for(var L=0;L<p[0]*m[0]*4;L++)b[L]=B[L];return this.width=p,this.height=m,this.data=b,this}(function(t){var e=function(){return typeof t2=="function"},n=function(m,p,b,x){var I=4,_=o;switch(x){case t.image_compression.FAST:I=1,_=s;break;case t.image_compression.MEDIUM:I=6,_=a;break;case t.image_compression.SLOW:I=9,_=l}m=r(m,p,b,_);var E=t2(m,{level:I});return t.__addimage__.arrayBufferToBinaryString(E)},r=function(m,p,b,x){for(var I,_,E,C=m.length/p,O=new Uint8Array(m.length+C),K=h(),B=0;B<C;B+=1){if(E=B*p,I=m.subarray(E,E+p),x)O.set(x(I,b,_),E+B);else{for(var L,y=K.length,S=[];L<y;L+=1)S[L]=K[L](I,b,_);var R=f(S.concat());O.set(S[R],E+B)}_=I}return O},i=function(m){var p=Array.apply([],m);return p.unshift(0),p},s=function(m,p){var b,x=[],I=m.length;x[0]=1;for(var _=0;_<I;_+=1)b=m[_-p]||0,x[_+1]=m[_]-b+256&255;return x},o=function(m,p,b){var x,I=[],_=m.length;I[0]=2;for(var E=0;E<_;E+=1)x=b&&b[E]||0,I[E+1]=m[E]-x+256&255;return I},a=function(m,p,b){var x,I,_=[],E=m.length;_[0]=3;for(var C=0;C<E;C+=1)x=m[C-p]||0,I=b&&b[C]||0,_[C+1]=m[C]+256-(x+I>>>1)&255;return _},l=function(m,p,b){var x,I,_,E,C=[],O=m.length;C[0]=4;for(var K=0;K<O;K+=1)x=m[K-p]||0,I=b&&b[K]||0,_=b&&b[K-p]||0,E=u(x,I,_),C[K+1]=m[K]-E+256&255;return C},u=function(m,p,b){if(m===p&&p===b)return m;var x=Math.abs(p-b),I=Math.abs(m-b),_=Math.abs(m+p-b-b);return x<=I&&x<=_?m:I<=_?p:b},h=function(){return[i,s,o,a,l]},f=function(m){var p=m.map(function(b){return b.reduce(function(x,I){return x+Math.abs(I)},0)});return p.indexOf(Math.min.apply(null,p))};t.processPNG=function(m,p,b,x){var I,_,E,C,O,K,B,L,y,S,R,N,T,P,U,Q=this.decode.FLATE_DECODE,F="";if(this.__addimage__.isArrayBuffer(m)&&(m=new Uint8Array(m)),this.__addimage__.isArrayBufferView(m)){if(m=(E=new pD(m)).imgData,_=E.bits,I=E.colorSpace,O=E.colors,[4,6].indexOf(E.colorType)!==-1){if(E.bits===8){y=(L=E.pixelBitlength==32?new Uint32Array(E.decodePixels().buffer):E.pixelBitlength==16?new Uint16Array(E.decodePixels().buffer):new Uint8Array(E.decodePixels().buffer)).length,R=new Uint8Array(y*E.colors),S=new Uint8Array(y);var V,G=E.pixelBitlength-E.bits;for(P=0,U=0;P<y;P++){for(T=L[P],V=0;V<G;)R[U++]=T>>>V&255,V+=E.bits;S[P]=T>>>V&255}}if(E.bits===16){y=(L=new Uint32Array(E.decodePixels().buffer)).length,R=new Uint8Array(y*(32/E.pixelBitlength)*E.colors),S=new Uint8Array(y*(32/E.pixelBitlength)),N=E.colors>1,P=0,U=0;for(var ee=0;P<y;)T=L[P++],R[U++]=T>>>0&255,N&&(R[U++]=T>>>16&255,T=L[P++],R[U++]=T>>>0&255),S[ee++]=T>>>16&255;_=8}x!==t.image_compression.NONE&&e()?(m=n(R,E.width*E.colors,E.colors,x),B=n(S,E.width,1,x)):(m=R,B=S,Q=void 0)}if(E.colorType===3&&(I=this.color_spaces.INDEXED,K=E.palette,E.transparency.indexed)){var ie=E.transparency.indexed,be=0;for(P=0,y=ie.length;P<y;++P)be+=ie[P];if((be/=255)===y-1&&ie.indexOf(0)!==-1)C=[ie.indexOf(0)];else if(be!==y){for(L=E.decodePixels(),S=new Uint8Array(L.length),P=0,y=L.length;P<y;P++)S[P]=ie[L[P]];B=n(S,E.width,1)}}var M=function(Y){var X;switch(Y){case t.image_compression.FAST:X=11;break;case t.image_compression.MEDIUM:X=13;break;case t.image_compression.SLOW:X=14;break;default:X=12}return X}(x);return Q===this.decode.FLATE_DECODE&&(F="/Predictor "+M+" "),F+="/Colors "+O+" /BitsPerComponent "+_+" /Columns "+E.width,(this.__addimage__.isArrayBuffer(m)||this.__addimage__.isArrayBufferView(m))&&(m=this.__addimage__.arrayBufferToBinaryString(m)),(B&&this.__addimage__.isArrayBuffer(B)||this.__addimage__.isArrayBufferView(B))&&(B=this.__addimage__.arrayBufferToBinaryString(B)),{alias:b,data:m,index:p,filter:Q,decodeParameters:F,transparency:C,palette:K,sMask:B,predictor:M,width:E.width,height:E.height,bitsPerComponent:_,colorSpace:I}}}})(dt.API),function(t){t.processGIF89A=function(e,n,r,i){var s=new mD(e),o=s.width,a=s.height,l=[];s.decodeAndBlitFrameRGBA(0,l);var u={data:l,width:o,height:a},h=new S1(100).encode(u,100);return t.processJPEG.call(this,h,n,r,i)},t.processGIF87A=t.processGIF89A}(dt.API),ns.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var n=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:i,green:r,blue:n,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},ns.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(n){en.log("bit decode error:"+n)}},ns.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),n=e%4;for(t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<e;i++)for(var s=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+8*i*4,a=0;a<8&&8*i+a<this.width;a++){var l=this.palette[s>>7-a&1];this.data[o+4*a]=l.blue,this.data[o+4*a+1]=l.green,this.data[o+4*a+2]=l.red,this.data[o+4*a+3]=255}n!==0&&(this.pos+=4-n)}},ns.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<t;i++){var s=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+2*i*4,a=s>>4,l=15&s,u=this.palette[a];if(this.data[o]=u.blue,this.data[o+1]=u.green,this.data[o+2]=u.red,this.data[o+3]=255,2*i+1>=this.width)break;u=this.palette[l],this.data[o+4]=u.blue,this.data[o+4+1]=u.green,this.data[o+4+2]=u.red,this.data[o+4+3]=255}e!==0&&(this.pos+=4-e)}},ns.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),s=n*this.width*4+4*r;if(i<this.palette.length){var o=this.palette[i];this.data[s]=o.red,this.data[s+1]=o.green,this.data[s+2]=o.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}t!==0&&(this.pos+=4-t)}},ns.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<this.width;i++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(s&e)/e*255|0,a=(s>>5&e)/e*255|0,l=(s>>10&e)/e*255|0,u=s>>15?255:0,h=r*this.width*4+4*i;this.data[h]=l,this.data[h+1]=a,this.data[h+2]=o,this.data[h+3]=u}this.pos+=t}},ns.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),n=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,s=0;s<this.width;s++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(o&e)/e*255|0,l=(o>>5&n)/n*255|0,u=(o>>11)/e*255|0,h=i*this.width*4+4*s;this.data[h]=u,this.data[h+1]=l,this.data[h+2]=a,this.data[h+3]=255}this.pos+=t}},ns.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*n;this.data[o]=s,this.data[o+1]=i,this.data[o+2]=r,this.data[o+3]=255}this.pos+=this.width%4}},ns.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),a=e*this.width*4+4*n;this.data[a]=s,this.data[a+1]=i,this.data[a+2]=r,this.data[a+3]=o}},ns.prototype.getData=function(){return this.data},function(t){t.processBMP=function(e,n,r,i){var s=new ns(e,!1),o=s.width,a=s.height,l={data:s.getData(),width:o,height:a},u=new S1(100).encode(l,100);return t.processJPEG.call(this,u,n,r,i)}}(dt.API),zw.prototype.getData=function(){return this.data},function(t){t.processWEBP=function(e,n,r,i){var s=new zw(e),o=s.width,a=s.height,l={data:s.getData(),width:o,height:a},u=new S1(100).encode(l,100);return t.processJPEG.call(this,u,n,r,i)}}(dt.API),dt.API.processRGBA=function(t,e,n){for(var r=t.data,i=r.length,s=new Uint8Array(i/4*3),o=new Uint8Array(i/4),a=0,l=0,u=0;u<i;u+=4){var h=r[u],f=r[u+1],m=r[u+2],p=r[u+3];s[a++]=h,s[a++]=f,s[a++]=m,o[l++]=p}var b=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:b,index:e,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},dt.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Ou=dt.API,$f=Ou.getCharWidthsArray=function(t,e){var n,r,i=(e=e||{}).font||this.internal.getFont(),s=e.fontSize||this.internal.getFontSize(),o=e.charSpace||this.internal.getCharSpace(),a=e.widths?e.widths:i.metadata.Unicode.widths,l=a.fof?a.fof:1,u=e.kerning?e.kerning:i.metadata.Unicode.kerning,h=u.fof?u.fof:1,f=e.doKerning!==!1,m=0,p=t.length,b=0,x=a[0]||l,I=[];for(n=0;n<p;n++)r=t.charCodeAt(n),typeof i.metadata.widthOfString=="function"?I.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(r))+o*(1e3/s)||0)/1e3):(m=f&&Gt(u[r])==="object"&&!isNaN(parseInt(u[r][b],10))?u[r][b]/h:0,I.push((a[r]||x)/l+m)),b=r;return I},Uw=Ou.getStringUnitWidth=function(t,e){var n=(e=e||{}).fontSize||this.internal.getFontSize(),r=e.font||this.internal.getFont(),i=e.charSpace||this.internal.getCharSpace();return Ou.processArabic&&(t=Ou.processArabic(t)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(t,n,i)/n:$f.apply(this,arguments).reduce(function(s,o){return s+o},0)},Vw=function(t,e,n,r){for(var i=[],s=0,o=t.length,a=0;s!==o&&a+e[s]<n;)a+=e[s],s++;i.push(t.slice(0,s));var l=s;for(a=0;s!==o;)a+e[s]>r&&(i.push(t.slice(l,s)),a=0,l=s),a+=e[s],s++;return l!==s&&i.push(t.slice(l,s)),i},Bw=function(t,e,n){n||(n={});var r,i,s,o,a,l,u,h=[],f=[h],m=n.textIndent||0,p=0,b=0,x=t.split(" "),I=$f.apply(this,[" ",n])[0];if(l=n.lineIndent===-1?x[0].length+2:n.lineIndent||0){var _=Array(l).join(" "),E=[];x.map(function(O){(O=O.split(/\s*\n/)).length>1?E=E.concat(O.map(function(K,B){return(B&&K.length?`
`:"")+K})):E.push(O[0])}),x=E,l=Uw.apply(this,[_,n])}for(s=0,o=x.length;s<o;s++){var C=0;if(r=x[s],l&&r[0]==`
`&&(r=r.substr(1),C=1),m+p+(b=(i=$f.apply(this,[r,n])).reduce(function(O,K){return O+K},0))>e||C){if(b>e){for(a=Vw.apply(this,[r,i,e-(m+p),e]),h.push(a.shift()),h=[a.pop()];a.length;)f.push([a.shift()]);b=i.slice(r.length-(h[0]?h[0].length:0)).reduce(function(O,K){return O+K},0)}else h=[r];f.push(h),m=b+l,p=I}else h.push(r),m+=p+b,p=I}return u=l?function(O,K){return(K?_:"")+O.join(" ")}:function(O){return O.join(" ")},f.map(u)},Ou.splitTextToSize=function(t,e,n){var r,i=(n=n||{}).fontSize||this.internal.getFontSize(),s=(function(h){if(h.widths&&h.kerning)return{widths:h.widths,kerning:h.kerning};var f=this.internal.getFont(h.fontName,h.fontStyle);return f.metadata.Unicode?{widths:f.metadata.Unicode.widths||{0:1},kerning:f.metadata.Unicode.kerning||{}}:{font:f.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,n);r=Array.isArray(t)?t:String(t).split(/\r?\n/);var o=1*this.internal.scaleFactor*e/i;s.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/i:0,s.lineIndent=n.lineIndent;var a,l,u=[];for(a=0,l=r.length;a<l;a++)u=u.concat(Bw.apply(this,[r[a],o,s]));return u},function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",n={},r={},i=0;i<e.length;i++)n[e[i]]="0123456789abcdef"[i],r["0123456789abcdef"[i]]=e[i];var s=function(f){return"0x"+parseInt(f,10).toString(16)},o=t.__fontmetrics__.compress=function(f){var m,p,b,x,I=["{"];for(var _ in f){if(m=f[_],isNaN(parseInt(_,10))?p="'"+_+"'":(_=parseInt(_,10),p=(p=s(_).slice(2)).slice(0,-1)+r[p.slice(-1)]),typeof m=="number")m<0?(b=s(m).slice(3),x="-"):(b=s(m).slice(2),x=""),b=x+b.slice(0,-1)+r[b.slice(-1)];else{if(Gt(m)!=="object")throw new Error("Don't know what to do with value type "+Gt(m)+".");b=o(m)}I.push(p+b)}return I.push("}"),I.join("")},a=t.__fontmetrics__.uncompress=function(f){if(typeof f!="string")throw new Error("Invalid argument passed to uncompress.");for(var m,p,b,x,I={},_=1,E=I,C=[],O="",K="",B=f.length-1,L=1;L<B;L+=1)(x=f[L])=="'"?m?(b=m.join(""),m=void 0):m=[]:m?m.push(x):x=="{"?(C.push([E,b]),E={},b=void 0):x=="}"?((p=C.pop())[0][p[1]]=E,b=void 0,E=p[0]):x=="-"?_=-1:b===void 0?n.hasOwnProperty(x)?(O+=n[x],b=parseInt(O,16)*_,_=1,O=""):O+=x:n.hasOwnProperty(x)?(K+=n[x],E[b]=parseInt(K,16)*_,_=1,b=void 0,K=""):K+=x;return I},l={codePages:["WinAnsiEncoding"],WinAnsiEncoding:a("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},u={Unicode:{Courier:l,"Courier-Bold":l,"Courier-BoldOblique":l,"Courier-Oblique":l,Helvetica:l,"Helvetica-Bold":l,"Helvetica-BoldOblique":l,"Helvetica-Oblique":l,"Times-Roman":l,"Times-Bold":l,"Times-BoldItalic":l,"Times-Italic":l}},h={Unicode:{"Courier-Oblique":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":a("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":a("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":a("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:a("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:a("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":a("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:a("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":a("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":a("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":a("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(f){var m=f.font,p=h.Unicode[m.postScriptName];p&&(m.metadata.Unicode={},m.metadata.Unicode.widths=p.widths,m.metadata.Unicode.kerning=p.kerning);var b=u.Unicode[m.postScriptName];b&&(m.metadata.Unicode.encoding=b,m.encoding=b.codePages[0])}])}(dt.API),function(t){var e=function(n){for(var r=n.length,i=new Uint8Array(r),s=0;s<r;s++)i[s]=n.charCodeAt(s);return i};t.API.events.push(["addFont",function(n){var r=void 0,i=n.font,s=n.instance;if(!i.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(r=s.existsFileInVFS(i.postScriptName)===!1?s.loadFile(i.postScriptName):s.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(o,a){a=/^\x00\x01\x00\x00/.test(a)?e(a):e(Yh(a)),o.metadata=t.API.TTFFont.open(a),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(i,r)}}])}(dt),function(t){function e(){return(ft.canvg?Promise.resolve(ft.canvg):Y0(()=>import("./index.es-W4t6g5AM.js"),[])).catch(function(n){return Promise.reject(new Error("Could not load canvg: "+n))}).then(function(n){return n.default?n.default:n})}dt.API.addSvgAsImage=function(n,r,i,s,o,a,l,u){if(isNaN(r)||isNaN(i))throw en.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(s)||isNaN(o))throw en.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var h=document.createElement("canvas");h.width=s,h.height=o;var f=h.getContext("2d");f.fillStyle="#fff",f.fillRect(0,0,h.width,h.height);var m={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},p=this;return e().then(function(b){return b.fromString(f,n,m)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(b){return b.render(m)}).then(function(){p.addImage(h.toDataURL("image/jpeg",1),r,i,s,o,l,u)})}}(),dt.API.putTotalPages=function(t){var e,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),n=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var i=0;i<this.internal.pages[r].length;i++)this.internal.pages[r][i]=this.internal.pages[r][i].replace(e,n);return this},dt.API.viewerPreferences=function(t,e){var n;t=t||{},e=e||!1;var r,i,s,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},a=Object.keys(o),l=[],u=0,h=0,f=0;function m(b,x){var I,_=!1;for(I=0;I<b.length;I+=1)b[I]===x&&(_=!0);return _}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,t==="reset"||e===!0){var p=a.length;for(f=0;f<p;f+=1)n[a[f]].value=n[a[f]].defaultValue,n[a[f]].explicitSet=!1}if(Gt(t)==="object"){for(i in t)if(s=t[i],m(a,i)&&s!==void 0){if(n[i].type==="boolean"&&typeof s=="boolean")n[i].value=s;else if(n[i].type==="name"&&m(n[i].valueSet,s))n[i].value=s;else if(n[i].type==="integer"&&Number.isInteger(s))n[i].value=s;else if(n[i].type==="array"){for(u=0;u<s.length;u+=1)if(r=!0,s[u].length===1&&typeof s[u][0]=="number")l.push(String(s[u]-1));else if(s[u].length>1){for(h=0;h<s[u].length;h+=1)typeof s[u][h]!="number"&&(r=!1);r===!0&&l.push([s[u][0]-1,s[u][1]-1].join(" "))}n[i].value="["+l.join(" ")+"]"}else n[i].value=n[i].defaultValue;n[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var b,x=[];for(b in n)n[b].explicitSet===!0&&(n[b].type==="name"?x.push("/"+b+" /"+n[b].value):x.push("/"+b+" "+n[b].value));x.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+x.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},function(t){var e=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(r)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),a=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),l=unescape(encodeURIComponent("</x:xmpmeta>")),u=s.length+o.length+a.length+i.length+l.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+u+" >>"),this.internal.write("stream"),this.internal.write(i+s+o+a+l),this.internal.write("endstream"),this.internal.write("endobj")},n=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(r,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",n),this.internal.events.subscribe("postPutResources",e)),this}}(dt.API),function(t){var e=t.API,n=e.pdfEscape16=function(s,o){for(var a,l=o.metadata.Unicode.widths,u=["","0","00","000","0000"],h=[""],f=0,m=s.length;f<m;++f){if(a=o.metadata.characterToGlyph(s.charCodeAt(f)),o.metadata.glyIdsUsed.push(a),o.metadata.toUnicode[a]=s.charCodeAt(f),l.indexOf(a)==-1&&(l.push(a),l.push([parseInt(o.metadata.widthOfGlyph(a),10)])),a=="0")return h.join("");a=a.toString(16),h.push(u[4-a.length],a)}return h.join("")},r=function(s){var o,a,l,u,h,f,m;for(h=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,l=[],f=0,m=(a=Object.keys(s).sort(function(p,b){return p-b})).length;f<m;f++)o=a[f],l.length>=100&&(h+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar`,l=[]),s[o]!==void 0&&s[o]!==null&&typeof s[o].toString=="function"&&(u=("0000"+s[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),l.push("<"+o+"><"+u+">"));return l.length&&(h+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar
`),h+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(s){(function(o){var a=o.font,l=o.out,u=o.newObject,h=o.putStream;if(a.metadata instanceof t.API.TTFFont&&a.encoding==="Identity-H"){for(var f=a.metadata.Unicode.widths,m=a.metadata.subset.encode(a.metadata.glyIdsUsed,1),p="",b=0;b<m.length;b++)p+=String.fromCharCode(m[b]);var x=u();h({data:p,addLength1:!0,objectId:x}),l("endobj");var I=u();h({data:r(a.metadata.toUnicode),addLength1:!0,objectId:I}),l("endobj");var _=u();l("<<"),l("/Type /FontDescriptor"),l("/FontName /"+qu(a.fontName)),l("/FontFile2 "+x+" 0 R"),l("/FontBBox "+t.API.PDFObject.convert(a.metadata.bbox)),l("/Flags "+a.metadata.flags),l("/StemV "+a.metadata.stemV),l("/ItalicAngle "+a.metadata.italicAngle),l("/Ascent "+a.metadata.ascender),l("/Descent "+a.metadata.decender),l("/CapHeight "+a.metadata.capHeight),l(">>"),l("endobj");var E=u();l("<<"),l("/Type /Font"),l("/BaseFont /"+qu(a.fontName)),l("/FontDescriptor "+_+" 0 R"),l("/W "+t.API.PDFObject.convert(f)),l("/CIDToGIDMap /Identity"),l("/DW 1000"),l("/Subtype /CIDFontType2"),l("/CIDSystemInfo"),l("<<"),l("/Supplement 0"),l("/Registry (Adobe)"),l("/Ordering ("+a.encoding+")"),l(">>"),l(">>"),l("endobj"),a.objectNumber=u(),l("<<"),l("/Type /Font"),l("/Subtype /Type0"),l("/ToUnicode "+I+" 0 R"),l("/BaseFont /"+qu(a.fontName)),l("/Encoding /"+a.encoding),l("/DescendantFonts ["+E+" 0 R]"),l(">>"),l("endobj"),a.isAlreadyPutted=!0}})(s)}]),e.events.push(["putFont",function(s){(function(o){var a=o.font,l=o.out,u=o.newObject,h=o.putStream;if(a.metadata instanceof t.API.TTFFont&&a.encoding==="WinAnsiEncoding"){for(var f=a.metadata.rawData,m="",p=0;p<f.length;p++)m+=String.fromCharCode(f[p]);var b=u();h({data:m,addLength1:!0,objectId:b}),l("endobj");var x=u();h({data:r(a.metadata.toUnicode),addLength1:!0,objectId:x}),l("endobj");var I=u();l("<<"),l("/Descent "+a.metadata.decender),l("/CapHeight "+a.metadata.capHeight),l("/StemV "+a.metadata.stemV),l("/Type /FontDescriptor"),l("/FontFile2 "+b+" 0 R"),l("/Flags 96"),l("/FontBBox "+t.API.PDFObject.convert(a.metadata.bbox)),l("/FontName /"+qu(a.fontName)),l("/ItalicAngle "+a.metadata.italicAngle),l("/Ascent "+a.metadata.ascender),l(">>"),l("endobj"),a.objectNumber=u();for(var _=0;_<a.metadata.hmtx.widths.length;_++)a.metadata.hmtx.widths[_]=parseInt(a.metadata.hmtx.widths[_]*(1e3/a.metadata.head.unitsPerEm));l("<</Subtype/TrueType/Type/Font/ToUnicode "+x+" 0 R/BaseFont/"+qu(a.fontName)+"/FontDescriptor "+I+" 0 R/Encoding/"+a.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(a.metadata.hmtx.widths)+">>"),l("endobj"),a.isAlreadyPutted=!0}})(s)}]);var i=function(s){var o,a=s.text||"",l=s.x,u=s.y,h=s.options||{},f=s.mutex||{},m=f.pdfEscape,p=f.activeFontKey,b=f.fonts,x=p,I="",_=0,E="",C=b[x].encoding;if(b[x].encoding!=="Identity-H")return{text:a,x:l,y:u,options:h,mutex:f};for(E=a,x=p,Array.isArray(a)&&(E=a[0]),_=0;_<E.length;_+=1)b[x].metadata.hasOwnProperty("cmap")&&(o=b[x].metadata.cmap.unicode.codeMap[E[_].charCodeAt(0)]),o||E[_].charCodeAt(0)<256&&b[x].metadata.hasOwnProperty("Unicode")?I+=E[_]:I+="";var O="";return parseInt(x.slice(1))<14||C==="WinAnsiEncoding"?O=m(I,x).split("").map(function(K){return K.charCodeAt(0).toString(16)}).join(""):C==="Identity-H"&&(O=n(I,b[x])),f.isHex=!0,{text:O,x:l,y:u,options:h,mutex:f}};e.events.push(["postProcessText",function(s){var o=s.text||"",a=[],l={text:o,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(o)){var u=0;for(u=0;u<o.length;u+=1)Array.isArray(o[u])&&o[u].length===3?a.push([i(Object.assign({},l,{text:o[u][0]})).text,o[u][1],o[u][2]]):a.push(i(Object.assign({},l,{text:o[u]})).text);s.text=a}else s.text=i(Object.assign({},l,{text:o})).text}])}(dt),function(t){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0},t.addFileToVFS=function(n,r){return e.call(this),this.internal.vFS[n]=r,this},t.getFileFromVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0?this.internal.vFS[n]:null}}(dt.API),function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(r){var i,s,o,a,l,u,h,f=e,m=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],p=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],b={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},x={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},I=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],_=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),E=!1,C=0;this.__bidiEngine__={};var O=function(N){var T=N.charCodeAt(),P=T>>8,U=x[P];return U!==void 0?f[256*U+(255&T)]:P===252||P===253?"AL":_.test(P)?"L":P===8?"R":"N"},K=function(N){for(var T,P=0;P<N.length;P++){if((T=O(N.charAt(P)))==="L")return!1;if(T==="R")return!0}return!1},B=function(N,T,P,U){var Q,F,V,G,ee=T[U];switch(ee){case"L":case"R":E=!1;break;case"N":case"AN":break;case"EN":E&&(ee="AN");break;case"AL":E=!0,ee="R";break;case"WS":ee="N";break;case"CS":U<1||U+1>=T.length||(Q=P[U-1])!=="EN"&&Q!=="AN"||(F=T[U+1])!=="EN"&&F!=="AN"?ee="N":E&&(F="AN"),ee=F===Q?F:"N";break;case"ES":ee=(Q=U>0?P[U-1]:"B")==="EN"&&U+1<T.length&&T[U+1]==="EN"?"EN":"N";break;case"ET":if(U>0&&P[U-1]==="EN"){ee="EN";break}if(E){ee="N";break}for(V=U+1,G=T.length;V<G&&T[V]==="ET";)V++;ee=V<G&&T[V]==="EN"?"EN":"N";break;case"NSM":if(o&&!a){for(G=T.length,V=U+1;V<G&&T[V]==="NSM";)V++;if(V<G){var ie=N[U],be=ie>=1425&&ie<=2303||ie===64286;if(Q=T[V],be&&(Q==="R"||Q==="AL")){ee="R";break}}}ee=U<1||(Q=T[U-1])==="B"?"N":P[U-1];break;case"B":E=!1,i=!0,ee=C;break;case"S":s=!0,ee="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":E=!1;break;case"BN":ee="N"}return ee},L=function(N,T,P){var U=N.split("");return P&&y(U,P,{hiLevel:C}),U.reverse(),T&&T.reverse(),U.join("")},y=function(N,T,P){var U,Q,F,V,G,ee=-1,ie=N.length,be=0,M=[],Y=C?p:m,X=[];for(E=!1,i=!1,s=!1,Q=0;Q<ie;Q++)X[Q]=O(N[Q]);for(F=0;F<ie;F++){if(G=be,M[F]=B(N,X,M,F),U=240&(be=Y[G][b[M[F]]]),be&=15,T[F]=V=Y[be][5],U>0)if(U===16){for(Q=ee;Q<F;Q++)T[Q]=1;ee=-1}else ee=-1;if(Y[be][6])ee===-1&&(ee=F);else if(ee>-1){for(Q=ee;Q<F;Q++)T[Q]=V;ee=-1}X[F]==="B"&&(T[F]=0),P.hiLevel|=V}s&&function(H,oe,ne){for(var ue=0;ue<ne;ue++)if(H[ue]==="S"){oe[ue]=C;for(var he=ue-1;he>=0&&H[he]==="WS";he--)oe[he]=C}}(X,T,ie)},S=function(N,T,P,U,Q){if(!(Q.hiLevel<N)){if(N===1&&C===1&&!i)return T.reverse(),void(P&&P.reverse());for(var F,V,G,ee,ie=T.length,be=0;be<ie;){if(U[be]>=N){for(G=be+1;G<ie&&U[G]>=N;)G++;for(ee=be,V=G-1;ee<V;ee++,V--)F=T[ee],T[ee]=T[V],T[V]=F,P&&(F=P[ee],P[ee]=P[V],P[V]=F);be=G}be++}}},R=function(N,T,P){var U=N.split(""),Q={hiLevel:C};return P||(P=[]),y(U,P,Q),function(F,V,G){if(G.hiLevel!==0&&h)for(var ee,ie=0;ie<F.length;ie++)V[ie]===1&&(ee=I.indexOf(F[ie]))>=0&&(F[ie]=I[ee+1])}(U,P,Q),S(2,U,T,P,Q),S(1,U,T,P,Q),U.join("")};return this.__bidiEngine__.doBidiReorder=function(N,T,P){if(function(Q,F){if(F)for(var V=0;V<Q.length;V++)F[V]=V;a===void 0&&(a=K(Q)),u===void 0&&(u=K(Q))}(N,T),o||!l||u)if(o&&l&&a^u)C=a?1:0,N=L(N,T,P);else if(!o&&l&&u)C=a?1:0,N=R(N,T,P),N=L(N,T);else if(!o||a||l||u){if(o&&!l&&a^u)N=L(N,T),a?(C=0,N=R(N,T,P)):(C=1,N=R(N,T,P),N=L(N,T));else if(o&&a&&!l&&u)C=1,N=R(N,T,P),N=L(N,T);else if(!o&&!l&&a^u){var U=h;a?(C=1,N=R(N,T,P),C=0,h=!1,N=R(N,T,P),h=U):(C=0,N=R(N,T,P),N=L(N,T),C=1,h=!1,N=R(N,T,P),h=U,N=L(N,T))}}else C=0,N=R(N,T,P);else C=a?1:0,N=R(N,T,P);return N},this.__bidiEngine__.setOptions=function(N){N&&(o=N.isInputVisual,l=N.isOutputVisual,a=N.isInputRtl,u=N.isOutputRtl,h=N.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(r){var i=r.text,s=(r.x,r.y,r.options||{}),o=(r.mutex,s.lang,[]);if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,n.setOptions(s),Object.prototype.toString.call(i)==="[object Array]"){var a=0;for(o=[],a=0;a<i.length;a+=1)Object.prototype.toString.call(i[a])==="[object Array]"?o.push([n.doBidiReorder(i[a][0]),i[a][1],i[a][2]]):o.push([n.doBidiReorder(i[a])]);r.text=o}else r.text=n.doBidiReorder(i);n.setOptions({isInputVisual:!0})}])}(dt),dt.API.TTFFont=function(){function t(e){var n;if(this.rawData=e,n=this.contents=new Ja(e),this.contents.pos=4,n.readString(4)==="ttcf")throw new Error("TTCF not supported.");n.pos=0,this.parse(),this.subset=new PD(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new gD(this.contents),this.head=new yD(this),this.name=new SD(this),this.cmap=new AA(this),this.toUnicode={},this.hhea=new _D(this),this.maxp=new AD(this),this.hmtx=new ED(this),this.post=new bD(this),this.os2=new wD(this),this.loca=new kD(this),this.glyf=new ND(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var e,n,r,i,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var o,a,l,u;for(u=[],o=0,a=(l=this.bbox).length;o<a;o++)e=l[o],u.push(Math.round(e*this.scaleFactor));return u}).call(this),this.stemV=0,this.post.exists?(r=255&(i=this.post.italic_angle),32768&(n=i>>16)&&(n=-(1+(65535^n))),this.italicAngle=+(n+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(e){var n;return((n=this.cmap.unicode)!=null?n.codeMap[e]:void 0)||0},t.prototype.widthOfGlyph=function(e){var n;return n=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*n},t.prototype.widthOfString=function(e,n,r){var i,s,o,a;for(o=0,s=0,a=(e=""+e).length;0<=a?s<a:s>a;s=0<=a?++s:--s)i=e.charCodeAt(s),o+=this.widthOfGlyph(this.characterToGlyph(i))+r*(1e3/n)||0;return o*(n/1e3)},t.prototype.lineHeight=function(e,n){var r;return n==null&&(n=!1),r=n?this.lineGap:0,(this.ascender+r-this.decender)/1e3*e},t}();var gs,Ja=function(){function t(e){this.data=e??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(e){return this.data[this.pos++]=e},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},t.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},t.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},t.prototype.readString=function(e){var n,r;for(r=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)r[n]=String.fromCharCode(this.readByte());return r.join("")},t.prototype.writeString=function(e){var n,r,i;for(i=[],n=0,r=e.length;0<=r?n<r:n>r;n=0<=r?++n:--n)i.push(this.writeByte(e.charCodeAt(n)));return i},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(e){return this.writeInt16(e)},t.prototype.readLongLong=function(){var e,n,r,i,s,o,a,l;return e=this.readByte(),n=this.readByte(),r=this.readByte(),i=this.readByte(),s=this.readByte(),o=this.readByte(),a=this.readByte(),l=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^n)+1099511627776*(255^r)+4294967296*(255^i)+16777216*(255^s)+65536*(255^o)+256*(255^a)+(255^l)+1):72057594037927940*e+281474976710656*n+1099511627776*r+4294967296*i+16777216*s+65536*o+256*a+l},t.prototype.writeLongLong=function(e){var n,r;return n=Math.floor(e/4294967296),r=4294967295&e,this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(e){return this.writeInt32(e)},t.prototype.read=function(e){var n,r;for(n=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)n.push(this.readByte());return n},t.prototype.write=function(e){var n,r,i,s;for(s=[],r=0,i=e.length;r<i;r++)n=e[r],s.push(this.writeByte(n));return s},t}(),gD=function(){var t;function e(n){var r,i,s;for(this.scalarType=n.readInt(),this.tableCount=n.readShort(),this.searchRange=n.readShort(),this.entrySelector=n.readShort(),this.rangeShift=n.readShort(),this.tables={},i=0,s=this.tableCount;0<=s?i<s:i>s;i=0<=s?++i:--i)r={tag:n.readString(4),checksum:n.readInt(),offset:n.readInt(),length:n.readInt()},this.tables[r.tag]=r}return e.prototype.encode=function(n){var r,i,s,o,a,l,u,h,f,m,p,b,x;for(x in p=Object.keys(n).length,l=Math.log(2),f=16*Math.floor(Math.log(p)/l),o=Math.floor(f/l),h=16*p-f,(i=new Ja).writeInt(this.scalarType),i.writeShort(p),i.writeShort(f),i.writeShort(o),i.writeShort(h),s=16*p,u=i.pos+s,a=null,b=[],n)for(m=n[x],i.writeString(x),i.writeInt(t(m)),i.writeInt(u),i.writeInt(m.length),b=b.concat(m),x==="head"&&(a=u),u+=m.length;u%4;)b.push(0),u++;return i.write(b),r=2981146554-t(i.data),i.pos=a+8,i.writeUInt32(r),i.data},t=function(n){var r,i,s,o;for(n=EA.call(n);n.length%4;)n.push(0);for(s=new Ja(n),i=0,r=0,o=n.length;r<o;r=r+=4)i+=s.readUInt32();return 4294967295&i},e}(),vD={}.hasOwnProperty,Ys=function(t,e){for(var n in e)vD.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};gs=function(){function t(e){var n;this.file=e,n=this.file.directory.tables[this.tag],this.exists=!!n,n&&(this.offset=n.offset,this.length=n.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t}();var yD=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Ys(e,gs),e.prototype.tag="head",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.revision=n.readInt(),this.checkSumAdjustment=n.readInt(),this.magicNumber=n.readInt(),this.flags=n.readShort(),this.unitsPerEm=n.readShort(),this.created=n.readLongLong(),this.modified=n.readLongLong(),this.xMin=n.readShort(),this.yMin=n.readShort(),this.xMax=n.readShort(),this.yMax=n.readShort(),this.macStyle=n.readShort(),this.lowestRecPPEM=n.readShort(),this.fontDirectionHint=n.readShort(),this.indexToLocFormat=n.readShort(),this.glyphDataFormat=n.readShort()},e.prototype.encode=function(n){var r;return(r=new Ja).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(n),r.writeShort(this.glyphDataFormat),r.data},e}(),$w=function(){function t(e,n){var r,i,s,o,a,l,u,h,f,m,p,b,x,I,_,E,C;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=n+e.readInt(),f=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(l=0;l<256;++l)this.codeMap[l]=e.readByte();break;case 4:for(p=e.readUInt16(),m=p/2,e.pos+=6,s=function(){var O,K;for(K=[],l=O=0;0<=m?O<m:O>m;l=0<=m?++O:--O)K.push(e.readUInt16());return K}(),e.pos+=2,x=function(){var O,K;for(K=[],l=O=0;0<=m?O<m:O>m;l=0<=m?++O:--O)K.push(e.readUInt16());return K}(),u=function(){var O,K;for(K=[],l=O=0;0<=m?O<m:O>m;l=0<=m?++O:--O)K.push(e.readUInt16());return K}(),h=function(){var O,K;for(K=[],l=O=0;0<=m?O<m:O>m;l=0<=m?++O:--O)K.push(e.readUInt16());return K}(),i=(this.length-e.pos+this.offset)/2,a=function(){var O,K;for(K=[],l=O=0;0<=i?O<i:O>i;l=0<=i?++O:--O)K.push(e.readUInt16());return K}(),l=_=0,C=s.length;_<C;l=++_)for(I=s[l],r=E=b=x[l];b<=I?E<=I:E>=I;r=b<=I?++E:--E)h[l]===0?o=r+u[l]:(o=a[h[l]/2+(r-b)-(m-l)]||0)!==0&&(o+=u[l]),this.codeMap[r]=65535&o}e.pos=f}return t.encode=function(e,n){var r,i,s,o,a,l,u,h,f,m,p,b,x,I,_,E,C,O,K,B,L,y,S,R,N,T,P,U,Q,F,V,G,ee,ie,be,M,Y,X,H,oe,ne,ue,he,Ee,Ne,je;switch(U=new Ja,o=Object.keys(e).sort(function(Ue,Ye){return Ue-Ye}),n){case"macroman":for(x=0,I=function(){var Ue=[];for(b=0;b<256;++b)Ue.push(0);return Ue}(),E={0:0},s={},Q=0,ee=o.length;Q<ee;Q++)E[he=e[i=o[Q]]]==null&&(E[he]=++x),s[i]={old:e[i],new:E[e[i]]},I[i]=E[e[i]];return U.writeUInt16(1),U.writeUInt16(0),U.writeUInt32(12),U.writeUInt16(0),U.writeUInt16(262),U.writeUInt16(0),U.write(I),{charMap:s,subtable:U.data,maxGlyphID:x+1};case"unicode":for(T=[],f=[],C=0,E={},r={},_=u=null,F=0,ie=o.length;F<ie;F++)E[K=e[i=o[F]]]==null&&(E[K]=++C),r[i]={old:K,new:E[K]},a=E[K]-i,_!=null&&a===u||(_&&f.push(_),T.push(i),u=a),_=i;for(_&&f.push(_),f.push(65535),T.push(65535),R=2*(S=T.length),y=2*Math.pow(Math.log(S)/Math.LN2,2),m=Math.log(y/2)/Math.LN2,L=2*S-y,l=[],B=[],p=[],b=V=0,be=T.length;V<be;b=++V){if(N=T[b],h=f[b],N===65535){l.push(0),B.push(0);break}if(N-(P=r[N].new)>=32768)for(l.push(0),B.push(2*(p.length+S-b)),i=G=N;N<=h?G<=h:G>=h;i=N<=h?++G:--G)p.push(r[i].new);else l.push(P-N),B.push(0)}for(U.writeUInt16(3),U.writeUInt16(1),U.writeUInt32(12),U.writeUInt16(4),U.writeUInt16(16+8*S+2*p.length),U.writeUInt16(0),U.writeUInt16(R),U.writeUInt16(y),U.writeUInt16(m),U.writeUInt16(L),ne=0,M=f.length;ne<M;ne++)i=f[ne],U.writeUInt16(i);for(U.writeUInt16(0),ue=0,Y=T.length;ue<Y;ue++)i=T[ue],U.writeUInt16(i);for(Ee=0,X=l.length;Ee<X;Ee++)a=l[Ee],U.writeUInt16(a);for(Ne=0,H=B.length;Ne<H;Ne++)O=B[Ne],U.writeUInt16(O);for(je=0,oe=p.length;je<oe;je++)x=p[je],U.writeUInt16(x);return{charMap:r,subtable:U.data,maxGlyphID:C+1}}},t}(),AA=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Ys(e,gs),e.prototype.tag="cmap",e.prototype.parse=function(n){var r,i,s;for(n.pos=this.offset,this.version=n.readUInt16(),s=n.readUInt16(),this.tables=[],this.unicode=null,i=0;0<=s?i<s:i>s;i=0<=s?++i:--i)r=new $w(n,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},e.encode=function(n,r){var i,s;return r==null&&(r="macroman"),i=$w.encode(n,r),(s=new Ja).writeUInt16(0),s.writeUInt16(1),i.table=s.data.concat(i.subtable),i},e}(),_D=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Ys(e,gs),e.prototype.tag="hhea",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.ascender=n.readShort(),this.decender=n.readShort(),this.lineGap=n.readShort(),this.advanceWidthMax=n.readShort(),this.minLeftSideBearing=n.readShort(),this.minRightSideBearing=n.readShort(),this.xMaxExtent=n.readShort(),this.caretSlopeRise=n.readShort(),this.caretSlopeRun=n.readShort(),this.caretOffset=n.readShort(),n.pos+=8,this.metricDataFormat=n.readShort(),this.numberOfMetrics=n.readUInt16()},e}(),wD=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Ys(e,gs),e.prototype.tag="OS/2",e.prototype.parse=function(n){if(n.pos=this.offset,this.version=n.readUInt16(),this.averageCharWidth=n.readShort(),this.weightClass=n.readUInt16(),this.widthClass=n.readUInt16(),this.type=n.readShort(),this.ySubscriptXSize=n.readShort(),this.ySubscriptYSize=n.readShort(),this.ySubscriptXOffset=n.readShort(),this.ySubscriptYOffset=n.readShort(),this.ySuperscriptXSize=n.readShort(),this.ySuperscriptYSize=n.readShort(),this.ySuperscriptXOffset=n.readShort(),this.ySuperscriptYOffset=n.readShort(),this.yStrikeoutSize=n.readShort(),this.yStrikeoutPosition=n.readShort(),this.familyClass=n.readShort(),this.panose=function(){var r,i;for(i=[],r=0;r<10;++r)i.push(n.readByte());return i}(),this.charRange=function(){var r,i;for(i=[],r=0;r<4;++r)i.push(n.readInt());return i}(),this.vendorID=n.readString(4),this.selection=n.readShort(),this.firstCharIndex=n.readShort(),this.lastCharIndex=n.readShort(),this.version>0&&(this.ascent=n.readShort(),this.descent=n.readShort(),this.lineGap=n.readShort(),this.winAscent=n.readShort(),this.winDescent=n.readShort(),this.codePageRange=function(){var r,i;for(i=[],r=0;r<2;r=++r)i.push(n.readInt());return i}(),this.version>1))return this.xHeight=n.readShort(),this.capHeight=n.readShort(),this.defaultChar=n.readShort(),this.breakChar=n.readShort(),this.maxContext=n.readShort()},e}(),bD=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Ys(e,gs),e.prototype.tag="post",e.prototype.parse=function(n){var r,i,s;switch(n.pos=this.offset,this.format=n.readInt(),this.italicAngle=n.readInt(),this.underlinePosition=n.readShort(),this.underlineThickness=n.readShort(),this.isFixedPitch=n.readInt(),this.minMemType42=n.readInt(),this.maxMemType42=n.readInt(),this.minMemType1=n.readInt(),this.maxMemType1=n.readInt(),this.format){case 65536:break;case 131072:var o;for(i=n.readUInt16(),this.glyphNameIndex=[],o=0;0<=i?o<i:o>i;o=0<=i?++o:--o)this.glyphNameIndex.push(n.readUInt16());for(this.names=[],s=[];n.pos<this.offset+this.length;)r=n.readByte(),s.push(this.names.push(n.readString(r)));return s;case 151552:return i=n.readUInt16(),this.offsets=n.read(i);case 196608:break;case 262144:return this.map=(function(){var a,l,u;for(u=[],o=a=0,l=this.file.maxp.numGlyphs;0<=l?a<l:a>l;o=0<=l?++a:--a)u.push(n.readUInt32());return u}).call(this)}},e}(),xD=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},SD=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Ys(e,gs),e.prototype.tag="name",e.prototype.parse=function(n){var r,i,s,o,a,l,u,h,f,m,p;for(n.pos=this.offset,n.readShort(),r=n.readShort(),l=n.readShort(),i=[],o=0;0<=r?o<r:o>r;o=0<=r?++o:--o)i.push({platformID:n.readShort(),encodingID:n.readShort(),languageID:n.readShort(),nameID:n.readShort(),length:n.readShort(),offset:this.offset+l+n.readShort()});for(u={},o=f=0,m=i.length;f<m;o=++f)s=i[o],n.pos=s.offset,h=n.readString(s.length),a=new xD(h,s),u[p=s.nameID]==null&&(u[p]=[]),u[s.nameID].push(a);this.strings=u,this.copyright=u[0],this.fontFamily=u[1],this.fontSubfamily=u[2],this.uniqueSubfamily=u[3],this.fontName=u[4],this.version=u[5];try{this.postscriptName=u[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=u[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=u[7],this.manufacturer=u[8],this.designer=u[9],this.description=u[10],this.vendorUrl=u[11],this.designerUrl=u[12],this.license=u[13],this.licenseUrl=u[14],this.preferredFamily=u[15],this.preferredSubfamily=u[17],this.compatibleFull=u[18],this.sampleText=u[19]},e}(),AD=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Ys(e,gs),e.prototype.tag="maxp",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.numGlyphs=n.readUInt16(),this.maxPoints=n.readUInt16(),this.maxContours=n.readUInt16(),this.maxCompositePoints=n.readUInt16(),this.maxComponentContours=n.readUInt16(),this.maxZones=n.readUInt16(),this.maxTwilightPoints=n.readUInt16(),this.maxStorage=n.readUInt16(),this.maxFunctionDefs=n.readUInt16(),this.maxInstructionDefs=n.readUInt16(),this.maxStackElements=n.readUInt16(),this.maxSizeOfInstructions=n.readUInt16(),this.maxComponentElements=n.readUInt16(),this.maxComponentDepth=n.readUInt16()},e}(),ED=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Ys(e,gs),e.prototype.tag="hmtx",e.prototype.parse=function(n){var r,i,s,o,a,l,u;for(n.pos=this.offset,this.metrics=[],r=0,l=this.file.hhea.numberOfMetrics;0<=l?r<l:r>l;r=0<=l?++r:--r)this.metrics.push({advance:n.readUInt16(),lsb:n.readInt16()});for(s=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var h,f;for(f=[],r=h=0;0<=s?h<s:h>s;r=0<=s?++h:--h)f.push(n.readInt16());return f}(),this.widths=(function(){var h,f,m,p;for(p=[],h=0,f=(m=this.metrics).length;h<f;h++)o=m[h],p.push(o.advance);return p}).call(this),i=this.widths[this.widths.length-1],u=[],r=a=0;0<=s?a<s:a>s;r=0<=s?++a:--a)u.push(this.widths.push(i));return u},e.prototype.forGlyph=function(n){return n in this.metrics?this.metrics[n]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[n-this.metrics.length]}},e}(),EA=[].slice,ND=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Ys(e,gs),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(n){var r,i,s,o,a,l,u,h,f,m;return n in this.cache?this.cache[n]:(o=this.file.loca,r=this.file.contents,i=o.indexOf(n),(s=o.lengthOf(n))===0?this.cache[n]=null:(r.pos=this.offset+i,a=(l=new Ja(r.read(s))).readShort(),h=l.readShort(),m=l.readShort(),u=l.readShort(),f=l.readShort(),this.cache[n]=a===-1?new TD(l,h,m,u,f):new ID(l,a,h,m,u,f),this.cache[n]))},e.prototype.encode=function(n,r,i){var s,o,a,l,u;for(a=[],o=[],l=0,u=r.length;l<u;l++)s=n[r[l]],o.push(a.length),s&&(a=a.concat(s.encode(i)));return o.push(a.length),{table:a,offsets:o}},e}(),ID=function(){function t(e,n,r,i,s,o){this.raw=e,this.numberOfContours=n,this.xMin=r,this.yMin=i,this.xMax=s,this.yMax=o,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t}(),TD=function(){function t(e,n,r,i,s){var o,a;for(this.raw=e,this.xMin=n,this.yMin=r,this.xMax=i,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;a=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&a;)o.pos+=1&a?4:2,128&a?o.pos+=8:64&a?o.pos+=4:8&a&&(o.pos+=2)}return t.prototype.encode=function(){var e,n,r;for(n=new Ja(EA.call(this.raw.data)),e=0,r=this.glyphIDs.length;e<r;++e)n.pos=this.glyphOffsets[e];return n.data},t}(),kD=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Ys(e,gs),e.prototype.tag="loca",e.prototype.parse=function(n){var r,i;return n.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var s,o;for(o=[],i=0,s=this.length;i<s;i+=2)o.push(2*n.readUInt16());return o}).call(this):(function(){var s,o;for(o=[],i=0,s=this.length;i<s;i+=4)o.push(n.readUInt32());return o}).call(this)},e.prototype.indexOf=function(n){return this.offsets[n]},e.prototype.lengthOf=function(n){return this.offsets[n+1]-this.offsets[n]},e.prototype.encode=function(n,r){for(var i=new Uint32Array(this.offsets.length),s=0,o=0,a=0;a<i.length;++a)if(i[a]=s,o<r.length&&r[o]==a){++o,i[a]=s;var l=this.offsets[a],u=this.offsets[a+1]-l;u>0&&(s+=u)}for(var h=new Array(4*i.length),f=0;f<i.length;++f)h[4*f+3]=255&i[f],h[4*f+2]=(65280&i[f])>>8,h[4*f+1]=(16711680&i[f])>>16,h[4*f]=(4278190080&i[f])>>24;return h},e}(),PD=function(){function t(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var e,n,r,i,s;for(n in i=this.font.cmap.tables[0].codeMap,e={},s=this.subset)r=s[n],e[n]=i[r];return e},t.prototype.glyphsFor=function(e){var n,r,i,s,o,a,l;for(i={},o=0,a=e.length;o<a;o++)i[s=e[o]]=this.font.glyf.glyphFor(s);for(s in n=[],i)(r=i[s])!=null&&r.compound&&n.push.apply(n,r.glyphIDs);if(n.length>0)for(s in l=this.glyphsFor(n))r=l[s],i[s]=r;return i},t.prototype.encode=function(e,n){var r,i,s,o,a,l,u,h,f,m,p,b,x,I,_;for(i in r=AA.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(e),p={0:0},_=r.charMap)p[(l=_[i]).old]=l.new;for(b in m=r.maxGlyphID,o)b in p||(p[b]=m++);return h=function(E){var C,O;for(C in O={},E)O[E[C]]=C;return O}(p),f=Object.keys(h).sort(function(E,C){return E-C}),x=function(){var E,C,O;for(O=[],E=0,C=f.length;E<C;E++)a=f[E],O.push(h[a]);return O}(),s=this.font.glyf.encode(o,x,p),u=this.font.loca.encode(s.offsets,x),I={cmap:this.font.cmap.raw(),glyf:s.table,loca:u,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(n)},this.font.os2.exists&&(I["OS/2"]=this.font.os2.raw()),this.font.directory.encode(I)},t}();dt.API.PDFObject=function(){var t;function e(){}return t=function(n,r){return(Array(r+1).join("0")+n).slice(-r)},e.convert=function(n){var r,i,s,o;if(Array.isArray(n))return"["+function(){var a,l,u;for(u=[],a=0,l=n.length;a<l;a++)r=n[a],u.push(e.convert(r));return u}().join(" ")+"]";if(typeof n=="string")return"/"+n;if(n!=null&&n.isString)return"("+n+")";if(n instanceof Date)return"(D:"+t(n.getUTCFullYear(),4)+t(n.getUTCMonth(),2)+t(n.getUTCDate(),2)+t(n.getUTCHours(),2)+t(n.getUTCMinutes(),2)+t(n.getUTCSeconds(),2)+"Z)";if({}.toString.call(n)==="[object Object]"){for(i in s=["<<"],n)o=n[i],s.push("/"+i+" "+e.convert(o));return s.push(">>"),s.join(`
`)}return""+n},e}();function Fi(t){const[e,n,r]=t.split("/");return new Date(r,n-1,e)}function um(t){const e=String(t.getDate()).padStart(2,"0"),n=String(t.getMonth()+1).padStart(2,"0"),r=t.getFullYear();return`${e}/${n}/${r}`}async function NA(t){try{return{success:!0,id:(await sl(rr(Nt,"absences"),{...t,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})).id}}catch(e){return console.error("Error creating absence:",e),{success:!1,error:e}}}async function CD(t,e){try{const n=Tn(Nt,"absences",t);return await Ya(n,{...e,updatedAt:new Date().toISOString()}),{success:!0}}catch(n){return console.error("Error updating absence:",n),{success:!1,error:n}}}async function LD(t){try{return await il(Tn(Nt,"absences",t)),{success:!0}}catch(e){return console.error("Error deleting absence:",e),{success:!1,error:e}}}async function IA(t){try{const e=eg(rr(Nt,"absences"),ng("employeeId","==",t),CS("date","asc")),n=await Qs(e),r=[];return n.forEach(i=>{r.push({id:i.id,...i.data()})}),{success:!0,absences:r}}catch(e){return console.error("Error fetching employee absences:",e),{success:!1,error:e,absences:[]}}}function uy(t,e){return t.find(n=>{const r=n.date;if(n.type==="extended"&&n.endDate){const i=Fi(n.date),s=Fi(n.endDate),o=Fi(e);return o>=i&&o<=s}return r===e})}async function RD(t,e){try{const n=t.map(r=>NA({...e,employeeId:r.id,employeeName:r.name}));return await Promise.all(n),{success:!0}}catch(n){return console.error("Error creating absence for all employees:",n),{success:!1,error:n}}}async function jD(t,e,n){try{const r=await IA(t);if(!r.success)return{success:!1,absences:[]};const i=Fi(e),s=Fi(n);return{success:!0,absences:r.absences.filter(a=>{const l=Fi(a.date);if(a.type==="extended"&&a.endDate){const u=Fi(a.endDate);return l<=s&&u>=i}return l>=i&&l<=s})}}catch(r){return console.error("Error fetching absences for date range:",r),{success:!1,error:r,absences:[]}}}function DD(t,e,n){const r=uy(n,t);return r?r.type==="partial"?{worked:r.hoursWorked||0,minusLunch:r.hoursWorked||0}:{worked:0,minusLunch:0}:e==="Fredag"?{worked:7,minusLunch:7}:{worked:7.5,minusLunch:7.5}}function OD(t,e){const n=uy(e,t);if(!n)return"";let r=n.absenceReason;return n.comment&&(r+=` - ${n.comment}`),r}async function FD(t,e,n,r,i){const s=new dt({orientation:"portrait",unit:"mm",format:"a4"}),o=r?i:i.filter(b=>n.includes(b.name)),a=P7(t,e),l=a[0].formattedDate,u=a[a.length-1].formattedDate;console.log("=== PDF GENERATION DEBUG ==="),console.log("Date range:",l,"to",u),console.log("Total dates:",a.length),console.log("First date format:",l);let h=null;try{const b=await fetch("/logo_black.png");if(b.ok){const x=await b.blob();h=await new Promise(I=>{const _=new FileReader;_.onloadend=()=>I(_.result),_.readAsDataURL(x)})}}catch(b){console.log("Could not load logo:",b)}for(let b=0;b<o.length;b++){const x=o[b];b>0&&s.addPage(),console.log(`
--- Loading absences for ${x.name} (ID: ${x.id}) ---`);const I=await jD(x.id,l,u),_=I.success?I.absences:[];console.log(`Found ${_.length} absence(s) for ${x.name}`),_.length>0&&console.log("Absences:",_.map(E=>`${E.date} (${E.absenceReason})`).join(", ")),MD(s,t,e,a,x.name,h,_)}const f=rA(e),p=`Timeregistrering_${iA(t,e).replace(" / ","_")}_${f.replace(" / ","_")}.pdf`;console.log(`=== PDF GENERATION COMPLETE ===
`),s.save(p)}function MD(t,e,n,r,i,s,o){const a=t.internal.pageSize.getWidth(),l=t.internal.pageSize.getHeight(),u=15;let h=u;t.setFontSize(18),t.setFont("helvetica","bold");const f=iA(e,n);if(t.text(`${f} Timeregistrering`,u,h),s)try{t.addImage(s,"PNG",a-u-40,h-5,40,20)}catch(E){console.log("Error adding logo to PDF:",E)}h+=8,t.setFontSize(12),t.setFont("helvetica","normal");const m=rA(n);t.text(m,u,h),h+=8,t.setFontSize(9),t.setFont("helvetica","normal"),t.text("AC Handymand.dk ApS",u,h),h+=4,t.text("Axel Juels All 72",u,h),h+=4,t.text("2750 Ballerup",u,h),h+=4,t.text("CVR 42397792",u,h),h+=6,t.setFont("helvetica","normal"),t.setFontSize(9),t.text("Oversigt over arbejdstimer, sygdom, SH, FE, FF og overarbejde (OA).",u,h),h+=4,t.setFont("helvetica","bold"),t.setTextColor(255,0,0),t.text("Afleveres d. 19 i hver mned.",u,h),t.setTextColor(0,0,0),h+=8,UD(t,u,h,a-2*u,r,o);const p=l-25,b=a/3,x=(a-b)/2;t.setFont("helvetica","normal"),t.setFontSize(10),t.text("Underskrift:",x-25,p),t.line(x,p,x+b,p);const I=t.getTextWidth(i),_=x+(b-I)/2;t.text(i,_,p+6)}function UD(t,e,n,r,i,s){const o=[{header:"Dato",width:16},{header:"Ugedag",width:14},{header:"Fra kl. / Til kl.",width:22},{header:"Total timer",width:18},{header:`Total timer
minus frokost`,width:22},{header:"Afvigelse / Bemrkning",width:65},{header:"Arb. timer",width:16},{header:"OA",width:12}],a=o.reduce((b,x)=>b+x.width,0),l=r/a;o.forEach(b=>b.width*=l);const u=6,h=8;let f=e;t.setFontSize(8),t.setFont("helvetica","bold"),o.forEach(b=>{t.rect(f,n,b.width,h);const x=b.header.split(`
`),I=3,_=n+3;x.forEach((E,C)=>{const O=f+b.width/2;t.text(E,O,_+C*I,{align:"center"})}),f+=b.width}),n+=h;let m=0,p=0;t.setFont("helvetica","normal"),t.setFontSize(8),i.forEach(b=>{f=e;const x=uy(s,b.formattedDate),I=DD(b.formattedDate,b.weekday,s),_=OD(b.formattedDate,s);x&&(p++,console.log(` Absence matched on ${b.formattedDate}: ${x.absenceReason}`)),b.isWeekend||(m+=I.minusLunch),o.forEach((E,C)=>{t.rect(f,n,E.width,u);let O="",K=[0,0,0];if(C===0)O=b.formattedDate;else if(C===1)O=b.weekday,b.isWeekend&&(K=[255,0,0]);else if(C===2&&!b.isWeekend)(!x||x.type==="partial")&&(b.weekday==="Fredag"?O="07:00-14:30":O="07:00-15:00");else if(C===3&&!b.isWeekend)x&&x.type!=="partial"?O="0":x&&x.type==="partial"?O=(x.hoursWorked||0).toString().replace(".",","):b.weekday==="Fredag"?O="7,5":O="8";else if(C===4&&!b.isWeekend){const B=I.minusLunch;B>0?O=B.toString().replace(".",","):O="0"}else if(C===5)O=_;else if(C===6&&!b.isWeekend){const B=I.worked;B>0?O=B.toString().replace(".",","):O="0"}if(O){t.setTextColor(...K);const B=f+E.width/2;if(C===5&&O.length>40){t.setFontSize(7);const y=t.splitTextToSize(O,E.width-2)[0];t.text(y,B,n+u/2+1.5,{align:"center"}),t.setFontSize(8)}else t.text(O,B,n+u/2+1.5,{align:"center"});t.setTextColor(0,0,0)}f+=E.width}),n+=u}),console.log(`Total absence matches in PDF table: ${p}`),f=e,o.forEach((b,x)=>{if((x===5||x===6)&&t.rect(f,n,b.width,u),x===5){t.setFont("helvetica","bold");const I="Total timer:",_=t.getTextWidth(I);t.text(I,f+b.width-_-1,n+u/2+1.5),t.setFont("helvetica","normal")}else if(x===6){t.setFont("helvetica","bold");const I=m.toString().replace(".",","),_=f+b.width/2;t.text(I,_,n+u/2+1.5,{align:"center"}),t.setFont("helvetica","normal")}f+=b.width})}function VD({employee:t,employees:e,onClose:n,onSuccess:r}){const{showSuccess:i,showError:s,showWarning:o}=ps(),[a,l]=le.useState("partial"),[u,h]=le.useState(!1),[f,m]=le.useState(""),[p,b]=le.useState("Feriedag"),[x,I]=le.useState(""),[_,E]=le.useState(""),[C,O]=le.useState(""),[K,B]=le.useState(!1),L=["Feriedag","Feriefridag","Syg","Helligdag","Andet"],y=async S=>{if(S.preventDefault(),!f){o("Vlg venligst en dato.");return}if(a==="partial"&&!_){o("Indtast antal arbejdstimer.");return}if(a==="extended"&&!C){o("Vlg venligst slut dato.");return}if(a==="extended"){const R=new Date(f);if(new Date(C)<R){s("Slut dato skal vre efter start dato.");return}}h(!0);try{const R=new Date(f),N=um(R),T={employeeId:t.id,employeeName:t.name,date:N,type:a,absenceReason:p,comment:x||""};if(a==="partial"&&(T.hoursWorked=parseFloat(_)),a==="extended"){const P=new Date(C);T.endDate=um(P)}K&&a==="single"?(await RD(e,{date:N,type:a,absenceReason:p,comment:x||""})).success?(i("Fravr oprettet for alle medarbejdere!"),r(),n()):s("Fejl ved oprettelse af fravr for alle medarbejdere."):(await NA(T)).success?(i("Fravr oprettet!"),r(),n()):s("Fejl ved oprettelse af fravr.")}catch(R){console.error("Error creating absence:",R),s("Der opstod en fejl.")}finally{h(!1)}};return g.jsx("div",{className:"modal-overlay",onClick:n,children:g.jsxs("div",{className:"modal-content",onClick:S=>S.stopPropagation(),children:[g.jsxs("div",{className:"modal-header",children:[g.jsxs("h2",{children:["Opret fravr - ",t.name]}),g.jsx("button",{className:"modal-close",onClick:n,children:""})]}),g.jsxs("div",{className:"absence-tabs",children:[g.jsx("button",{className:`absence-tab ${a==="partial"?"active":""}`,onClick:()=>l("partial"),children:"Delvist fravr"}),g.jsx("button",{className:`absence-tab ${a==="single"?"active":""}`,onClick:()=>l("single"),children:"Enkelte fravrsdage"}),g.jsx("button",{className:`absence-tab ${a==="extended"?"active":""}`,onClick:()=>l("extended"),children:"Lngere fravr"})]}),g.jsxs("form",{onSubmit:y,children:[g.jsxs("div",{className:"modal-body",children:[a==="partial"&&g.jsxs(g.Fragment,{children:[g.jsxs("div",{className:"form-group",children:[g.jsx("label",{children:"Dato *"}),g.jsx("input",{type:"date",value:f,onChange:S=>m(S.target.value),required:!0})]}),g.jsxs("div",{className:"form-group",children:[g.jsx("label",{children:"Antal arbejdstimer *"}),g.jsx("input",{type:"number",step:"0.5",min:"0",max:"12",value:_,onChange:S=>E(S.target.value),placeholder:"f.eks. 4",required:!0}),g.jsx("span",{className:"form-hint",children:"Indtast hvor mange timer der blev arbejdet"})]}),g.jsxs("div",{className:"form-group",children:[g.jsx("label",{children:"Kommentar (valgfri)"}),g.jsx("input",{type:"text",value:x,onChange:S=>I(S.target.value),placeholder:"f.eks. Gik hjem kl. 12"})]})]}),a==="single"&&g.jsxs(g.Fragment,{children:[g.jsxs("div",{className:"form-group",children:[g.jsx("label",{children:"Dato *"}),g.jsx("input",{type:"date",value:f,onChange:S=>m(S.target.value),required:!0})]}),g.jsxs("div",{className:"form-group",children:[g.jsx("label",{children:"Type af fravr *"}),g.jsx("select",{value:p,onChange:S=>b(S.target.value),required:!0,children:L.map(S=>g.jsx("option",{value:S,children:S},S))})]}),g.jsxs("div",{className:"form-group",children:[g.jsx("label",{children:"Kommentar (valgfri)"}),g.jsx("input",{type:"text",value:x,onChange:S=>I(S.target.value),placeholder:"f.eks. Betalt ferie"})]}),g.jsxs("div",{className:"checkbox-group",children:[g.jsx("input",{type:"checkbox",id:"applyToAll",checked:K,onChange:S=>B(S.target.checked)}),g.jsx("label",{htmlFor:"applyToAll",className:"checkbox-label",children:"Lukkedag - tilfj fravr p alle medarbejdere"})]})]}),a==="extended"&&g.jsxs(g.Fragment,{children:[g.jsxs("div",{className:"form-group",children:[g.jsx("label",{children:"Start dato *"}),g.jsx("input",{type:"date",value:f,onChange:S=>m(S.target.value),required:!0})]}),g.jsxs("div",{className:"form-group",children:[g.jsx("label",{children:"Slut dato *"}),g.jsx("input",{type:"date",value:C,onChange:S=>O(S.target.value),required:!0})]}),g.jsxs("div",{className:"form-group",children:[g.jsx("label",{children:"Type af fravr *"}),g.jsx("select",{value:p,onChange:S=>b(S.target.value),required:!0,children:L.map(S=>g.jsx("option",{value:S,children:S},S))})]}),g.jsxs("div",{className:"form-group",children:[g.jsx("label",{children:"Kommentar (valgfri)"}),g.jsx("input",{type:"text",value:x,onChange:S=>I(S.target.value),placeholder:"f.eks. Sommerferie"})]})]})]}),g.jsxs("div",{className:"modal-footer",children:[g.jsx("button",{type:"button",className:"btn-secondary",onClick:n,disabled:u,children:"Annuller"}),g.jsx("button",{type:"submit",className:"btn-primary",disabled:u,children:u?"Gemmer...":"Gem fravr"})]})]})]})})}function BD({employee:t,onClose:e,onSuccess:n}){const{showSuccess:r,showError:i,showWarning:s,showConfirm:o}=ps(),[a,l]=le.useState(new Date().getMonth()),[u,h]=le.useState(new Date().getFullYear()),[f,m]=le.useState([]),[p,b]=le.useState(!0),[x,I]=le.useState(null),[_,E]=le.useState(!1),[C,O]=le.useState(""),[K,B]=le.useState(""),[L,y]=le.useState(""),[S,R]=le.useState(""),[N,T]=le.useState(""),P=["Feriedag","Feriefridag","Syg","Helligdag","Andet"],U=["Januar","Februar","Marts","April","Maj","Juni","Juli","August","September","Oktober","November","December"];le.useEffect(()=>{Q()},[]);const Q=async()=>{b(!0);const H=await IA(t.id);H.success&&m(H.absences),b(!1)},F=H=>{let oe=a+H,ne=u;oe>11?(oe=0,ne++):oe<0&&(oe=11,ne--),l(oe),h(ne)},V=(H,oe)=>new Date(oe,H+1,0).getDate(),G=(H,oe)=>{const ne=new Date(oe,H,1).getDay();return ne===0?6:ne-1},ee=H=>{const oe=`${String(H).padStart(2,"0")}/${String(a+1).padStart(2,"0")}/${u}`;return f.filter(ne=>{if(ne.type==="extended"&&ne.endDate){const ue=Fi(ne.date),he=Fi(ne.endDate),Ee=Fi(oe);return Ee>=ue&&Ee<=he}return ne.date===oe})},ie=H=>{const oe=ee(H);oe.length>0&&(I(oe[0]),E(!1))},be=()=>{if(!x)return;const oe=Fi(x.date).toISOString().split("T")[0];if(O(oe),y(x.absenceReason),R(x.comment||""),T(x.hoursWorked||""),x.endDate){const ue=Fi(x.endDate).toISOString().split("T")[0];B(ue)}else B("");E(!0)},M=async()=>{if(!C||!L){s("Udfyld alle pkrvede felter.");return}b(!0);const H=new Date(C),ne={date:um(H),absenceReason:L,comment:S};if(x.type==="partial"&&(ne.hoursWorked=parseFloat(N)),x.type==="extended"&&K){const he=new Date(K);ne.endDate=um(he)}(await CD(x.id,ne)).success?(r("Fravr opdateret!"),await Q(),I(null),E(!1),n()):i("Fejl ved opdatering af fravr."),b(!1)},Y=async()=>{if(!x||!await o({title:"Slet fravr",message:"Er du sikker p at du vil slette dette fravr?",confirmText:"Slet",cancelText:"Annuller"}))return;b(!0),(await LD(x.id)).success?(r("Fravr slettet!"),await Q(),I(null),E(!1),n()):i("Fejl ved sletning af fravr."),b(!1)},X=()=>{const H=V(a,u),oe=G(a,u),ne=[];for(let ue=0;ue<oe;ue++)ne.push(g.jsx("div",{className:"calendar-day empty"},`empty-${ue}`));for(let ue=1;ue<=H;ue++){const he=ee(ue),Ee=he.length>0;ne.push(g.jsxs("div",{className:`calendar-day ${Ee?"has-absence":""}`,onClick:()=>ie(ue),children:[g.jsx("div",{className:"calendar-day-number",children:ue}),Ee&&g.jsx("div",{className:"calendar-absence-indicator",children:he[0].absenceReason.substring(0,3)})]},ue))}return ne};return g.jsx("div",{className:"modal-overlay",onClick:e,children:g.jsxs("div",{className:"modal-content modal-large",onClick:H=>H.stopPropagation(),children:[g.jsxs("div",{className:"modal-header",children:[g.jsxs("h2",{children:["Se / rediger fravr - ",t.name]}),g.jsx("button",{className:"modal-close",onClick:e,children:""})]}),g.jsxs("div",{className:"modal-body",children:[g.jsxs("div",{className:"calendar-navigation",children:[g.jsx("button",{className:"btn-secondary btn-small",onClick:()=>F(-1),disabled:p,children:" Forrige"}),g.jsxs("h3",{children:[U[a]," ",u]}),g.jsx("button",{className:"btn-secondary btn-small",onClick:()=>F(1),disabled:p,children:"Nste "})]}),p&&g.jsx("p",{children:"Indlser..."}),!p&&g.jsxs(g.Fragment,{children:[g.jsxs("div",{className:"calendar-container",children:[g.jsxs("div",{className:"calendar-header",children:[g.jsx("div",{className:"calendar-header-day",children:"Man"}),g.jsx("div",{className:"calendar-header-day",children:"Tir"}),g.jsx("div",{className:"calendar-header-day",children:"Ons"}),g.jsx("div",{className:"calendar-header-day",children:"Tor"}),g.jsx("div",{className:"calendar-header-day",children:"Fre"}),g.jsx("div",{className:"calendar-header-day",children:"Lr"}),g.jsx("div",{className:"calendar-header-day",children:"Sn"})]}),g.jsx("div",{className:"calendar-grid",children:X()})]}),x&&!_&&g.jsxs("div",{className:"absence-details",children:[g.jsx("h4",{children:"Fravrsdetaljer"}),g.jsxs("div",{className:"detail-row",children:[g.jsx("strong",{children:"Dato:"})," ",x.date,x.endDate&&` til ${x.endDate}`]}),g.jsxs("div",{className:"detail-row",children:[g.jsx("strong",{children:"Type:"})," ",x.absenceReason]}),x.hoursWorked!==void 0&&g.jsxs("div",{className:"detail-row",children:[g.jsx("strong",{children:"Arbejdstimer:"})," ",x.hoursWorked]}),x.comment&&g.jsxs("div",{className:"detail-row",children:[g.jsx("strong",{children:"Kommentar:"})," ",x.comment]}),g.jsxs("div",{className:"detail-actions",children:[g.jsx("button",{className:"btn-primary btn-small",onClick:be,children:"Rediger"}),g.jsx("button",{className:"btn-small btn-danger",onClick:Y,children:"Slet"}),g.jsx("button",{className:"btn-secondary btn-small",onClick:()=>I(null),children:"Luk"})]})]}),x&&_&&g.jsxs("div",{className:"absence-details",children:[g.jsx("h4",{children:"Rediger fravr"}),g.jsxs("div",{className:"form-group",children:[g.jsx("label",{children:"Dato *"}),g.jsx("input",{type:"date",value:C,onChange:H=>O(H.target.value)})]}),x.type==="extended"&&g.jsxs("div",{className:"form-group",children:[g.jsx("label",{children:"Slut dato *"}),g.jsx("input",{type:"date",value:K,onChange:H=>B(H.target.value)})]}),g.jsxs("div",{className:"form-group",children:[g.jsx("label",{children:"Type af fravr *"}),g.jsx("select",{value:L,onChange:H=>y(H.target.value),children:P.map(H=>g.jsx("option",{value:H,children:H},H))})]}),x.type==="partial"&&g.jsxs("div",{className:"form-group",children:[g.jsx("label",{children:"Arbejdstimer *"}),g.jsx("input",{type:"number",step:"0.5",min:"0",max:"12",value:N,onChange:H=>T(H.target.value)})]}),g.jsxs("div",{className:"form-group",children:[g.jsx("label",{children:"Kommentar"}),g.jsx("input",{type:"text",value:S,onChange:H=>R(H.target.value)})]}),g.jsxs("div",{className:"detail-actions",children:[g.jsx("button",{className:"btn-primary btn-small",onClick:M,children:"Gem ndringer"}),g.jsx("button",{className:"btn-secondary btn-small",onClick:()=>E(!1),children:"Annuller"})]})]})]})]}),g.jsx("div",{className:"modal-footer",children:g.jsx("button",{className:"btn-secondary",onClick:e,children:"Luk"})})]})})}function qD(){const{showError:t,showWarning:e}=ps(),[n,r]=le.useState(new Date().getFullYear()),[i,s]=le.useState(new Date().getMonth()),[o,a]=le.useState(!1),[l,u]=le.useState(""),[h,f]=le.useState([]),[m,p]=le.useState(!1),[b,x]=le.useState(!1),[I,_]=le.useState(!1),[E,C]=le.useState(!1),[O,K]=le.useState(null),B=C7(),L=Array.from({length:10},(P,U)=>new Date().getFullYear()-2+U);le.useEffect(()=>{y()},[]);const y=async()=>{p(!0);try{const P=await Qs(rr(Nt,"employees")),U=[];P.forEach(Q=>{U.push({id:Q.id,...Q.data()})}),U.sort((Q,F)=>Q.name.localeCompare(F.name)),f(U),U.length>0&&!l&&u(U[0].name)}catch(P){console.error("Error loading employees:",P),t("Fejl ved indlsning af medarbejdere.")}finally{p(!1)}},S=async()=>{if(!o&&!l){e("Vlg venligst en medarbejder.");return}x(!0);try{const P=o?h.map(U=>U.name):[l];await FD(n,i,P,o,h)}catch(P){console.error("Error generating PDF:",P),t("Der opstod en fejl ved generering af PDF. Prv igen.")}finally{x(!1)}},R=P=>{K(P),_(!0)},N=P=>{K(P),C(!0)},T=()=>{};return g.jsxs("div",{children:[g.jsxs("div",{className:"page-header",children:[g.jsx("h1",{children:"Timeregistrering"}),g.jsx("p",{children:"Generr timeregistreringsformularer til medarbejdere"})]}),g.jsxs("div",{className:"content-card",children:[g.jsx("h3",{style:{marginBottom:"20px"},children:"Generr PDF"}),g.jsxs("div",{className:"timesheet-form",children:[g.jsxs("div",{className:"form-section",children:[g.jsx("label",{htmlFor:"year",children:"Vlg r"}),g.jsx("select",{id:"year",value:n,onChange:P=>r(Number(P.target.value)),children:L.map(P=>g.jsx("option",{value:P,children:P},P))})]}),g.jsxs("div",{className:"form-section",children:[g.jsx("label",{htmlFor:"monthPair",children:"Vlg mneder"}),g.jsx("select",{id:"monthPair",value:i,onChange:P=>s(Number(P.target.value)),children:B.map(P=>g.jsx("option",{value:P.value,children:P.label},P.value))})]}),g.jsxs("div",{className:"form-section",children:[g.jsx("label",{children:"Ansatte"}),g.jsxs("div",{className:"checkbox-group",children:[g.jsx("input",{type:"checkbox",id:"allEmployees",checked:o,onChange:P=>a(P.target.checked)}),g.jsx("label",{htmlFor:"allEmployees",children:"Alle ansatte"})]}),m?g.jsx("p",{children:"Indlser medarbejdere..."}):g.jsx("select",{value:l,onChange:P=>u(P.target.value),disabled:o||h.length===0,children:h.length===0?g.jsx("option",{value:"",children:"Ingen medarbejdere"}):h.map(P=>g.jsx("option",{value:P.name,children:P.name},P.id))}),h.length===0&&g.jsx("p",{className:"no-employees-text",children:"Tilfj medarbejdere i Indstillinger frst"})]}),g.jsx("button",{className:"btn-generate",onClick:S,disabled:b||h.length===0,children:b?"Genererer...":"Generr PDF"})]})]}),g.jsxs("div",{className:"content-card",style:{marginTop:"30px"},children:[g.jsx("h3",{style:{marginBottom:"20px"},children:"Fravr og sygdom"}),m?g.jsx("p",{children:"Indlser medarbejdere..."}):h.length===0?g.jsx("p",{className:"no-employees-text",children:"Tilfj medarbejdere i Indstillinger frst"}):g.jsx("div",{className:"absence-employee-list",children:h.map(P=>g.jsxs("div",{className:"absence-employee-row",children:[g.jsx("span",{className:"absence-employee-name",children:P.name}),g.jsxs("div",{className:"absence-employee-actions",children:[g.jsx("button",{className:"btn-primary btn-small",onClick:()=>R(P),children:"Opret fravr"}),g.jsx("button",{className:"btn-secondary btn-small",onClick:()=>N(P),children:"Se / rediger fravr"})]})]},P.id))})]}),I&&O&&g.jsx(VD,{employee:O,employees:h,onClose:()=>_(!1),onSuccess:T}),E&&O&&g.jsx(BD,{employee:O,onClose:()=>C(!1),onSuccess:T})]})}function zD({employee:t,onSave:e,onClose:n,isOpen:r}){const[i,s]=le.useState("");le.useEffect(()=>{s(t&&t.name||"")},[t,r]);const o=a=>{if(a.preventDefault(),!i.trim()){alert("Indtast venligst et navn.");return}e({name:i.trim()})};return r?g.jsx("div",{className:"modal-overlay",onClick:n,children:g.jsxs("div",{className:"modal-content",onClick:a=>a.stopPropagation(),children:[g.jsxs("div",{className:"modal-header",children:[g.jsx("h2",{children:t?"Redigr medarbejder":"Tilfj medarbejder"}),g.jsx("button",{className:"modal-close",onClick:n,children:""})]}),g.jsxs("form",{onSubmit:o,children:[g.jsx("div",{className:"modal-body",children:g.jsxs("div",{className:"form-group",children:[g.jsx("label",{htmlFor:"employeeName",children:"Navn *"}),g.jsx("input",{type:"text",id:"employeeName",value:i,onChange:a=>s(a.target.value),placeholder:"Indtast medarbejdernavn",autoFocus:!0,required:!0})]})}),g.jsxs("div",{className:"modal-footer",children:[g.jsx("button",{type:"button",className:"btn-secondary",onClick:n,children:"Annuller"}),g.jsx("button",{type:"submit",className:"btn-primary",children:t?"Gem":"Tilfj"})]})]})]})}):null}function $D(){const{showSuccess:t,showError:e,showCriticalConfirm:n}=ps(),[r,i]=le.useState([]),[s,o]=le.useState(!1),[a,l]=le.useState(!1),[u,h]=le.useState(null),[f,m]=le.useState(450),[p,b]=le.useState(!1),[x,I]=le.useState(450);le.useEffect(()=>{_(),E()},[]);const _=async()=>{try{const y=await rg(Tn(Nt,"settings","hourlyRates"));if(y.exists()){const S=y.data().defaultRate||450;m(S),I(S)}}catch(y){console.error("Error loading settings:",y)}},E=async()=>{o(!0);try{const y=await Qs(rr(Nt,"employees")),S=[];y.forEach(R=>{S.push({id:R.id,...R.data()})}),S.sort((R,N)=>R.name.localeCompare(N.name)),i(S)}catch(y){console.error("Error loading employees:",y),e("Der opstod en fejl ved indlsning af medarbejdere.")}finally{o(!1)}},C=async()=>{try{const y=parseFloat(x);if(isNaN(y)||y<=0){e("Indtast venligst en gyldig timepris.");return}await K0(Tn(Nt,"settings","hourlyRates"),{defaultRate:y,updatedAt:new Date().toISOString()}),m(y),b(!1),t("Timepris gemt!")}catch(y){console.error("Error saving default rate:",y),e("Der opstod en fejl ved gemning af timepris.")}},O=()=>{h(null),l(!0)},K=y=>{h(y),l(!0)},B=async y=>{if(await n({title:"Slet medarbejder?",message:"Dette vil permanent slette medarbejderen fra systemet.",itemName:y.name,warningText:"Historiske timeregistreringer vil stadig vre synlige, men medarbejderen kan ikke vlges fremadrettet",confirmText:"Slet Permanent",cancelText:"Annuller"}))try{await il(Tn(Nt,"employees",y.id)),t("Medarbejder slettet!"),await E()}catch(R){console.error("Error deleting employee:",R),e("Der opstod en fejl ved sletning af medarbejder.")}},L=async y=>{try{u?(await Ya(Tn(Nt,"employees",u.id),{name:y.name,updatedAt:new Date().toISOString()}),t("Medarbejder opdateret!")):(await sl(rr(Nt,"employees"),{name:y.name,createdAt:new Date().toISOString()}),t("Medarbejder oprettet!")),l(!1),await E()}catch(S){console.error("Error saving employee:",S),e("Der opstod en fejl ved gemning af medarbejder.")}};return g.jsxs("div",{children:[g.jsxs("div",{className:"page-header",children:[g.jsx("h1",{children:"Indstillinger"}),g.jsx("p",{children:"Administrr medarbejdere og priser"})]}),g.jsxs("div",{className:"content-card",style:{marginBottom:"20px"},children:[g.jsx("h2",{style:{marginBottom:"20px",fontSize:"20px",color:"#2c3e50"},children:"Standard Timepris"}),p?g.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"15px"},children:[g.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[g.jsx("input",{type:"number",value:x,onChange:y=>I(y.target.value),min:"0",step:"50",style:{padding:"10px",fontSize:"18px",width:"150px",border:"1px solid #ddd",borderRadius:"5px"},autoFocus:!0}),g.jsx("span",{style:{color:"#7f8c8d"},children:"kr/time"})]}),g.jsxs("div",{style:{display:"flex",gap:"10px"},children:[g.jsx("button",{className:"btn-secondary",onClick:()=>{I(f),b(!1)},children:"Annuller"}),g.jsx("button",{className:"btn-primary",onClick:C,children:"Gem"})]})]}):g.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[g.jsxs("div",{children:[g.jsxs("div",{style:{fontSize:"32px",fontWeight:"bold",color:"#27ae60",marginBottom:"5px"},children:[f," kr"]}),g.jsx("div",{style:{fontSize:"14px",color:"#7f8c8d"},children:"Standard timepris brugt for alle sager (kan tilpasses per sag)"})]}),g.jsx("button",{className:"btn-secondary",onClick:()=>b(!0),children:"Redigr"})]})]}),g.jsxs("div",{className:"content-card",children:[g.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[g.jsx("h2",{style:{margin:0,fontSize:"20px",color:"#2c3e50"},children:"Medarbejdere"}),g.jsx("button",{className:"btn-primary",onClick:O,children:"+ Tilfj Medarbejder"})]}),s?g.jsx("p",{children:"Indlser medarbejdere..."}):r.length===0?g.jsx("div",{style:{textAlign:"center",padding:"40px",color:"#7f8c8d"},children:g.jsx("p",{children:"Ingen medarbejdere tilfjet endnu."})}):g.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[g.jsx("thead",{children:g.jsxs("tr",{style:{borderBottom:"2px solid #ecf0f1"},children:[g.jsx("th",{style:{textAlign:"left",padding:"12px",color:"#2c3e50",fontWeight:"600"},children:"Navn"}),g.jsx("th",{style:{textAlign:"right",padding:"12px",color:"#2c3e50",fontWeight:"600"},children:"Handlinger"})]})}),g.jsx("tbody",{children:r.map(y=>g.jsxs("tr",{style:{borderBottom:"1px solid #ecf0f1"},children:[g.jsx("td",{style:{padding:"15px"},children:g.jsx("strong",{style:{fontSize:"15px",color:"#2c3e50"},children:y.name})}),g.jsxs("td",{style:{padding:"15px",textAlign:"right"},children:[g.jsx("button",{className:"btn-action btn-edit",onClick:()=>K(y),children:"Redigr"}),g.jsx("button",{className:"btn-action btn-delete",onClick:()=>B(y),children:"Slet"})]})]},y.id))})]})]}),g.jsx(zD,{isOpen:a,onClose:()=>l(!1),onSave:L,employee:u})]})}const HD=async t=>{const e=Tn(Nt,"projectCounter",String(t));try{const n=await rg(e);if(n.exists()){const i=(n.data().currentNumber||0)+1;return await K0(e,{currentNumber:i}),Hw(t,i)}else return await K0(e,{currentNumber:1}),Hw(t,1)}catch(n){throw console.error("Error getting next project number:",n),n}},Hw=(t,e)=>{const n=String(e).padStart(4,"0");return`${t}-${n}`},TA=t=>!t||t.length===0?0:t.reduce((e,n)=>e+(n.duration||0),0),WD=t=>!t||t.length===0?0:t.filter(e=>e.billable).reduce((e,n)=>e+(n.duration||0),0),GD=t=>!t||t.length===0?0:t.filter(e=>e.billable).reduce((e,n)=>e+(n.duration||0)*(n.rate||0),0),kA=async t=>{try{const e=eg(rr(Nt,"timeEntries"),ng("projectId","==",t)),n=await Qs(e),r=[];return n.forEach(i=>{r.push({id:i.id,...i.data()})}),r.sort((i,s)=>new Date(s.date)-new Date(i.date)),r}catch(e){throw console.error("Error getting project time entries:",e),e}},KD=t=>t?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t):!0,QD=t=>t?t.replace(/\D/g,"").length===8:!0;function PA({isOpen:t,onClose:e,onSave:n,project:r}){const[i,s]=le.useState({name:"",customerName:"",customerPhone:"",customerEmail:"",address:"",type:"fixed-price",status:"planned"}),[o,a]=le.useState({});le.useEffect(()=>{s(r?{name:r.name||"",customerName:r.customerName||"",customerPhone:r.customerPhone||"",customerEmail:r.customerEmail||"",address:r.address||"",type:r.type||"fixed-price",status:r.status||"planned"}:{name:"",customerName:"",customerPhone:"",customerEmail:"",address:"",type:"fixed-price",status:"planned"}),a({})},[r,t]);const l=f=>{const{name:m,value:p}=f.target;s(b=>({...b,[m]:p})),o[m]&&a(b=>({...b,[m]:null}))},u=()=>{const f={};return(!i.name||i.name.trim().length<3)&&(f.name="Sagsnavn skal vre mindst 3 tegn"),i.customerEmail&&!KD(i.customerEmail)&&(f.customerEmail="Ugyldig email adresse"),i.customerPhone&&!QD(i.customerPhone)&&(f.customerPhone="Telefonnummer skal vre 8 cifre"),a(f),Object.keys(f).length===0},h=f=>{f.preventDefault(),u()&&n(i)};return t?g.jsx("div",{className:"modal-overlay",onClick:e,children:g.jsxs("div",{className:"modal-content",onClick:f=>f.stopPropagation(),children:[g.jsxs("div",{className:"modal-header",children:[g.jsx("h2",{children:r?"Redigr Sag":"Ny Sag"}),g.jsx("button",{className:"modal-close",onClick:e,children:""})]}),g.jsxs("form",{onSubmit:h,children:[g.jsxs("div",{className:"modal-body",children:[g.jsxs("div",{className:"form-group",children:[g.jsx("label",{htmlFor:"name",children:"Sagsnavn *"}),g.jsx("input",{type:"text",id:"name",name:"name",value:i.name,onChange:l,className:o.name?"error":"",placeholder:"F.eks. Kkkenrenovering"}),o.name&&g.jsx("span",{className:"error-message",children:o.name})]}),g.jsxs("div",{className:"form-group",children:[g.jsx("label",{htmlFor:"customerName",children:"Kundenavn"}),g.jsx("input",{type:"text",id:"customerName",name:"customerName",value:i.customerName,onChange:l,placeholder:"F.eks. Peter Jensen"})]}),g.jsxs("div",{className:"form-row",children:[g.jsxs("div",{className:"form-group",children:[g.jsx("label",{htmlFor:"customerPhone",children:"Telefon"}),g.jsx("input",{type:"text",id:"customerPhone",name:"customerPhone",value:i.customerPhone,onChange:l,className:o.customerPhone?"error":"",placeholder:"12345678"}),o.customerPhone&&g.jsx("span",{className:"error-message",children:o.customerPhone})]}),g.jsxs("div",{className:"form-group",children:[g.jsx("label",{htmlFor:"customerEmail",children:"Email"}),g.jsx("input",{type:"email",id:"customerEmail",name:"customerEmail",value:i.customerEmail,onChange:l,className:o.customerEmail?"error":"",placeholder:"kunde@example.com"}),o.customerEmail&&g.jsx("span",{className:"error-message",children:o.customerEmail})]})]}),g.jsxs("div",{className:"form-group",children:[g.jsx("label",{htmlFor:"address",children:"Adresse"}),g.jsx("input",{type:"text",id:"address",name:"address",value:i.address,onChange:l,placeholder:"F.eks. Hovedgaden 123, 1234 Kbenhavn"})]}),g.jsxs("div",{className:"form-row",children:[g.jsxs("div",{className:"form-group",children:[g.jsx("label",{htmlFor:"type",children:"Type *"}),g.jsxs("select",{id:"type",name:"type",value:i.type,onChange:l,children:[g.jsx("option",{value:"fixed-price",children:"Fast Pris"}),g.jsx("option",{value:"time-material",children:"Tid & Materiale"})]})]}),g.jsxs("div",{className:"form-group",children:[g.jsx("label",{htmlFor:"status",children:"Status *"}),g.jsxs("select",{id:"status",name:"status",value:i.status,onChange:l,children:[g.jsx("option",{value:"planned",children:"Planlagt"}),g.jsx("option",{value:"in-progress",children:"I Gang"}),g.jsx("option",{value:"ready-for-invoice",children:"Klar til Faktura"}),g.jsx("option",{value:"closed",children:"Lukket"})]})]})]})]}),g.jsxs("div",{className:"modal-footer",children:[g.jsx("button",{type:"button",className:"btn-secondary",onClick:e,children:"Annuller"}),g.jsx("button",{type:"submit",className:"btn-primary",children:r?"Gem ndringer":"Opret Sag"})]})]})]})}):null}function CA({status:t}){const e=r=>{switch(r){case"planned":return"#3498db";case"in-progress":return"#e67e22";case"ready-for-invoice":return"#27ae60";case"closed":return"#95a5a6";default:return"#95a5a6"}},n=r=>{switch(r){case"planned":return"Planlagt";case"in-progress":return"I Gang";case"ready-for-invoice":return"Klar til Faktura";case"closed":return"Lukket";default:return r}};return g.jsx("span",{className:"status-badge",style:{backgroundColor:e(t),color:"white",padding:"4px 12px",borderRadius:"12px",fontSize:"13px",fontWeight:"500",display:"inline-block"},children:n(t)})}const Zr=t=>new Intl.NumberFormat("da-DK",{style:"currency",currency:"DKK",minimumFractionDigits:0,maximumFractionDigits:2}).format(t),YD=t=>{if(!t)return"";const n=t.replace(/\D/g,"").match(/^(\d{2})(\d{2})(\d{2})(\d{2})$/);return n?`${n[1]} ${n[2]} ${n[3]} ${n[4]}`:t},XD=t=>t?`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(t)}`:"#",jh=t=>{if(!t)return"";typeof t=="string"&&(t=new Date(t));const e=String(t.getDate()).padStart(2,"0"),n=String(t.getMonth()+1).padStart(2,"0"),r=t.getFullYear();return`${e}/${n}/${r}`},Fu=t=>!t&&t!==0?"0":Number(t).toFixed(1).replace(".",",");function JD(){const t=Vc(),{showSuccess:e,showError:n,showCriticalConfirm:r}=ps(),[i,s]=le.useState([]),[o,a]=le.useState([]),[l,u]=le.useState(!1),[h,f]=le.useState(!1),[m,p]=le.useState(null),[b,x]=le.useState(""),[I,_]=le.useState("all"),[E,C]=le.useState("all"),[O,K]=le.useState({});le.useEffect(()=>{B()},[]),le.useEffect(()=>{y()},[i,b,I,E]);const B=async()=>{u(!0);try{const Q=await Qs(rr(Nt,"projects")),F=[];Q.forEach(V=>{F.push({id:V.id,...V.data()})}),F.sort((V,G)=>G.projectNumber&&V.projectNumber?G.projectNumber.localeCompare(V.projectNumber):0),s(F),L(F)}catch(Q){console.error("Error loading projects:",Q),n("Der opstod en fejl ved indlsning af sager.")}finally{u(!1)}},L=async Q=>{const F={};for(const V of Q){const G=await kA(V.id);F[V.id]=TA(G)}K(F)},y=()=>{let Q=[...i];b.trim()&&(Q=Q.filter(F=>{var V,G,ee;return((V=F.name)==null?void 0:V.toLowerCase().includes(b.toLowerCase()))||((G=F.customerName)==null?void 0:G.toLowerCase().includes(b.toLowerCase()))||((ee=F.projectNumber)==null?void 0:ee.toLowerCase().includes(b.toLowerCase()))})),I!=="all"&&(Q=Q.filter(F=>F.status===I)),E!=="all"&&(Q=Q.filter(F=>F.type===E)),a(Q)},S=()=>{p(null),f(!0)},R=(Q,F)=>{Q.stopPropagation(),p(F),f(!0)},N=async Q=>{try{if(m)await Ya(Tn(Nt,"projects",m.id),Q),e("Sag opdateret!");else{const F=await HD();await sl(rr(Nt,"projects"),{...Q,projectNumber:F,createdAt:new Date().toISOString()}),e("Sag oprettet!")}f(!1),B()}catch(F){console.error("Error saving project:",F),n("Der opstod en fejl ved gemning af sag.")}},T=async(Q,F)=>{Q.stopPropagation();const V=O[F.id]||0;if(await r({title:"Slet sag?",message:"Dette vil permanent slette sagen og alle tilknyttede data (timer, materialer, filer).",itemName:`${F.projectNumber} - ${F.name}`,warningText:V>0?`Der er registreret ${V} timer p denne sag`:null,confirmText:"Slet Permanent",cancelText:"Annuller"}))try{await il(Tn(Nt,"projects",F.id)),e("Sag slettet!"),B()}catch(ee){console.error("Error deleting project:",ee),n("Der opstod en fejl ved sletning af sag.")}},P=Q=>{t(`/sager/${Q.id}`)},U=Q=>Q==="fixed-price"?"Fast Pris":"Tid & Materiale";return g.jsxs("div",{children:[g.jsxs("div",{className:"page-header",children:[g.jsx("h1",{children:"Sager"}),g.jsx("p",{children:"Administrr projekter og timeregistrering"})]}),g.jsxs("div",{className:"content-card",children:[g.jsxs("div",{className:"sager-controls",children:[g.jsx("div",{className:"search-box",children:g.jsx("input",{type:"text",placeholder:"Sg efter sagsnavn, kunde eller sagsnummer...",value:b,onChange:Q=>x(Q.target.value),className:"search-input"})}),g.jsxs("div",{className:"filter-row",children:[g.jsxs("select",{value:I,onChange:Q=>_(Q.target.value),className:"filter-select",children:[g.jsx("option",{value:"all",children:"Alle statusser"}),g.jsx("option",{value:"planned",children:"Planlagt"}),g.jsx("option",{value:"in-progress",children:"I Gang"}),g.jsx("option",{value:"ready-for-invoice",children:"Klar til Faktura"}),g.jsx("option",{value:"closed",children:"Lukket"})]}),g.jsxs("select",{value:E,onChange:Q=>C(Q.target.value),className:"filter-select",children:[g.jsx("option",{value:"all",children:"Alle typer"}),g.jsx("option",{value:"fixed-price",children:"Fast Pris"}),g.jsx("option",{value:"time-material",children:"Tid & Materiale"})]})]}),g.jsx("button",{className:"btn-create-new-compact",onClick:S,children:"+ Opret sag"})]}),l?g.jsx("p",{children:"Indlser sager..."}):o.length===0?g.jsx("div",{className:"empty-state",children:g.jsx("p",{children:i.length===0?"Ingen sager endnu. Opret din frste sag for at komme i gang.":"Ingen sager matcher din sgning eller filtre."})}):g.jsx("div",{className:"table-container",children:g.jsxs("table",{className:"sager-table",children:[g.jsx("thead",{children:g.jsxs("tr",{children:[g.jsx("th",{children:"Sagsnr."}),g.jsx("th",{children:"Navn"}),g.jsx("th",{children:"Kunde"}),g.jsx("th",{children:"Type"}),g.jsx("th",{children:"Status"}),g.jsx("th",{children:"Timer"}),g.jsx("th",{children:"Handlinger"})]})}),g.jsx("tbody",{children:o.map(Q=>g.jsxs("tr",{onClick:()=>P(Q),className:"clickable-row",children:[g.jsx("td",{className:"project-number",children:Q.projectNumber}),g.jsx("td",{className:"project-name",children:Q.name}),g.jsx("td",{children:Q.customerName||"-"}),g.jsx("td",{children:U(Q.type)}),g.jsx("td",{children:g.jsx(CA,{status:Q.status})}),g.jsxs("td",{children:[O[Q.id]||0," timer"]}),g.jsxs("td",{className:"actions-cell",children:[g.jsx("button",{className:"btn-icon btn-edit",onClick:F=>R(F,Q),title:"Redigr",children:""}),g.jsx("button",{className:"btn-icon btn-delete",onClick:F=>T(F,Q),title:"Slet",children:""})]})]},Q.id))})]})})]}),g.jsx(PA,{isOpen:h,onClose:()=>f(!1),onSave:N,project:m})]})}function ZD({timeEntry:t,defaultRate:e,employees:n,onSave:r,onClose:i}){const[s,o]=le.useState({date:"",duration:"",activity:"",billable:!0,rate:e,useCustomRate:!1,employeeName:"",selectedEmployees:[]}),[a,l]=le.useState({});le.useEffect(()=>{if(t)o({date:t.date||"",duration:String(t.duration||t.hours||""),activity:t.activity||t.description||"",billable:t.billable!==void 0?t.billable:!0,rate:t.rate||t.hourlyRate||e,useCustomRate:t.rate!==e,employeeName:t.employeeName||"",selectedEmployees:t.employeeName?[t.employeeName]:[]});else{const x=new Date().toISOString().split("T")[0];o(I=>({...I,date:x,duration:"",activity:"",billable:!0,rate:e,useCustomRate:!1,employeeName:n.length>0?n[0].name:"",selectedEmployees:[]}))}},[t,e,n,!0]);const h=x=>{if(!x)return 0;const I=String(x).replace(",",".");return parseFloat(I)||0},f=x=>{const{name:I,value:_,type:E,checked:C}=x.target;o(E==="checkbox"?I==="billable"?O=>({...O,billable:C,rate:C?O.useCustomRate?O.rate:e:0}):I==="useCustomRate"?O=>({...O,useCustomRate:C,rate:C&&O.rate||e}):O=>({...O,[I]:C}):O=>({...O,[I]:_})),a[I]&&l(O=>({...O,[I]:null}))},m=x=>{o(I=>{const E=I.selectedEmployees.includes(x)?I.selectedEmployees.filter(C=>C!==x):[...I.selectedEmployees,x];return{...I,selectedEmployees:E,employeeName:E.length>0?E.join(", "):""}})},p=()=>{const x={};if(!s.date)x.date="Dato er pkrvet";else{const _=new Date(s.date),E=new Date;E.setHours(0,0,0,0),_>E&&(x.date="Dato kan ikke vre i fremtiden")}const I=h(s.duration);if((!s.duration||I<=0)&&(x.duration="Varighed skal vre et positivt tal"),(!s.activity||s.activity.trim().length<3)&&(x.activity="Aktivitetsbeskrivelse skal vre mindst 3 tegn"),s.billable){const _=h(s.rate);(!s.rate||_<=0)&&(x.rate="Timepris skal vre et positivt tal")}return s.selectedEmployees.length===0&&(x.employeeName="Vlg mindst n medarbejder"),l(x),Object.keys(x).length===0},b=x=>{if(x.preventDefault(),p()){const I={date:s.date,duration:h(s.duration),activity:s.activity,billable:s.billable,rate:s.billable?h(s.rate):0,employeeName:s.employeeName};r(I)}};return g.jsx("div",{className:"modal-overlay",onClick:i,children:g.jsxs("div",{className:"modal-content time-entry-modal",onClick:x=>x.stopPropagation(),children:[g.jsxs("div",{className:"modal-header",children:[g.jsx("h2",{children:t?"Redigr Timer":"Tilfj Timer"}),g.jsx("button",{className:"modal-close",onClick:i,children:""})]}),g.jsxs("form",{onSubmit:b,className:"modal-form",children:[g.jsxs("div",{className:"form-group",children:[g.jsx("label",{htmlFor:"date",children:"Dato *"}),g.jsx("input",{type:"date",id:"date",name:"date",value:s.date,onChange:f,className:a.date?"input-error":"",max:new Date().toISOString().split("T")[0]}),a.date&&g.jsx("span",{className:"error-text",children:a.date})]}),g.jsxs("div",{className:"form-group",children:[g.jsx("label",{htmlFor:"duration",children:"Varighed (timer) *"}),g.jsx("input",{type:"text",id:"duration",name:"duration",value:s.duration,onChange:f,className:a.duration?"input-error":"",placeholder:"F.eks. 4,5"}),a.duration&&g.jsx("span",{className:"error-text",children:a.duration}),g.jsx("small",{className:"form-hint",children:"Brug komma for decimaler (f.eks. 4,5 timer)"})]}),g.jsxs("div",{className:"form-group",children:[g.jsx("label",{children:"Medarbejder(e) *"}),g.jsx("div",{className:"employee-multi-select",children:n.length===0?g.jsx("p",{className:"no-employees-text",children:"Ingen medarbejdere tilgngelige. Tilfj medarbejdere i Indstillinger."}):n.map(x=>g.jsxs("label",{className:"checkbox-modern",children:[g.jsx("input",{type:"checkbox",checked:s.selectedEmployees.includes(x.name),onChange:()=>m(x.name)}),g.jsx("span",{className:"checkbox-label",children:x.name})]},x.id))}),a.employeeName&&g.jsx("span",{className:"error-text",children:a.employeeName})]}),g.jsxs("div",{className:"form-group",children:[g.jsx("label",{htmlFor:"activity",children:"Aktivitetsbeskrivelse *"}),g.jsx("textarea",{id:"activity",name:"activity",value:s.activity,onChange:f,className:a.activity?"input-error":"",rows:"3",placeholder:"Beskriv det udfrte arbejde..."}),a.activity&&g.jsx("span",{className:"error-text",children:a.activity})]}),g.jsx("div",{className:"checkbox-group-modern",children:g.jsxs("label",{className:"checkbox-modern",children:[g.jsx("input",{type:"checkbox",name:"billable",checked:s.billable,onChange:f}),g.jsx("span",{className:"checkbox-label",children:"Fakturerbar"})]})}),g.jsxs("div",{className:"rate-section",children:[g.jsx("label",{children:"Timepris (DKK) *"}),s.billable?g.jsxs(g.Fragment,{children:[g.jsxs("div",{className:`rate-display ${s.useCustomRate?"inactive":"active"}`,children:[g.jsxs("span",{className:"rate-value",children:[e," kr"]}),g.jsx("span",{className:"rate-note",children:"Standard timepris"})]}),g.jsx("div",{className:"checkbox-group-modern",children:g.jsxs("label",{className:"checkbox-modern",children:[g.jsx("input",{type:"checkbox",name:"useCustomRate",checked:s.useCustomRate,onChange:f}),g.jsx("span",{className:"checkbox-label",children:"Brug tilpasset timepris"})]})}),s.useCustomRate&&g.jsxs("div",{className:"form-group",children:[g.jsx("input",{type:"text",name:"rate",value:s.rate,onChange:f,className:a.rate?"input-error":"",placeholder:"F.eks. 550"}),a.rate&&g.jsx("span",{className:"error-text",children:a.rate}),g.jsx("small",{className:"form-hint",children:"Brug komma for decimaler (f.eks. 550,50)"})]})]}):g.jsxs("div",{className:"rate-display disabled",children:[g.jsx("span",{className:"rate-value",children:"0 kr"}),g.jsx("span",{className:"rate-note",children:"Ikke fakturerbar"})]})]}),g.jsxs("div",{className:"modal-footer",children:[g.jsx("button",{type:"button",className:"btn-secondary",onClick:i,children:"Annuller"}),g.jsx("button",{type:"submit",className:"btn-primary",children:t?"Gem ndringer":"Tilfj timer"})]})]})]})})}function eO({purchase:t,project:e,suppliers:n,materials:r,onSave:i,onClose:s}){const[o,a]=le.useState({date:"",materialName:"",materialId:null,sku:"",quantity:"",unit:"stk",category:"",supplierId:"",supplierName:"",purchasePrice:"",sellingPrice:"",paymentMethod:"Firmakort",notes:""}),[l,u]=le.useState({}),[h,f]=le.useState(!0),[m]=le.useState(50),p=["stk","m","m","m","kg","liter","pose","rulle","palle"],b=["Tr","Gips","El-materialer","VVS","Maling","Vrktj","Diverse"],x=["Firmakort","Faktura","Kontant","MobilePay"];le.useEffect(()=>{if(t)a({date:t.date||"",materialName:t.materialName||"",materialId:t.materialId||null,sku:t.sku||"",quantity:String(t.quantity||""),unit:t.unit||"stk",category:t.category||"",supplierId:t.supplierId||"",supplierName:t.supplierName||"",purchasePrice:String(t.purchasePrice||""),sellingPrice:String(t.sellingPrice||""),paymentMethod:t.paymentMethod||"Firmakort",notes:t.notes||""}),f(!1);else{const L=new Date().toISOString().split("T")[0];a(y=>({...y,date:L}))}},[t]);const I=L=>{if(!L)return 0;const y=String(L).replace(",",".");return parseFloat(y)||0},_=L=>String(L).replace(".",","),E=L=>{const{name:y,value:S}=L.target;a(R=>{const N={...R,[y]:S};if(y==="materialId"&&S){const T=r.find(P=>P.id===S);if(T&&(N.materialName=T.name,N.unit=T.unit,N.category=T.category,N.sku=T.sku||"",T.defaultSupplierId)){N.supplierId=T.defaultSupplierId;const P=n.find(U=>U.id===T.defaultSupplierId);P&&(N.supplierName=P.name)}}if(y==="supplierId"&&S){const T=n.find(P=>P.id===S);T&&(N.supplierName=T.name)}if(y==="purchasePrice"&&h){const T=I(S);if(T>0){const P=m/100,U=T*(1+P);N.sellingPrice=_(U.toFixed(2))}}return N}),l[y]&&u(R=>({...R,[y]:null}))},C=L=>{f(!1),E(L)},O=()=>{const L={};o.date||(L.date="Dato er pkrvet"),(!o.materialName||o.materialName.trim().length<2)&&(L.materialName="Materiale navn er pkrvet");const y=I(o.quantity);(!o.quantity||y<=0)&&(L.quantity="Antal skal vre strre end 0"),o.unit||(L.unit="Enhed er pkrvet"),o.category||(L.category="Kategori er pkrvet"),(!o.supplierName||o.supplierName.trim().length<2)&&(L.supplierName="Leverandr er pkrvet");const S=I(o.purchasePrice);(!o.purchasePrice||S<0)&&(L.purchasePrice="Indkbspris er pkrvet");const R=I(o.sellingPrice);return(!o.sellingPrice||R<0)&&(L.sellingPrice="Salgspris er pkrvet"),R<S&&(L.sellingPrice="Salgspris br vre hjere end indkbspris"),u(L),Object.keys(L).length===0},K=L=>{if(L.preventDefault(),O()){const y={caseId:e.id,caseNumber:e.projectNumber,caseName:e.name,date:o.date,materialId:o.materialId||null,materialName:o.materialName.trim(),sku:o.sku.trim(),quantity:I(o.quantity),unit:o.unit,category:o.category,supplierId:o.supplierId||null,supplierName:o.supplierName.trim(),purchasePrice:I(o.purchasePrice),sellingPrice:I(o.sellingPrice),paymentMethod:o.paymentMethod,notes:o.notes.trim()};i(y)}},B=()=>{const L=I(o.purchasePrice),y=I(o.sellingPrice);return L>0?((y-L)/L*100).toFixed(1):"0"};return g.jsx("div",{className:"modal-overlay",onClick:s,children:g.jsxs("div",{className:"modal-content material-purchase-modal",onClick:L=>L.stopPropagation(),children:[g.jsxs("div",{className:"modal-header",children:[g.jsx("h2",{children:t?"Redigr Materiale":"Tilfj Materiale"}),g.jsx("button",{className:"modal-close",onClick:s,children:""})]}),g.jsxs("form",{onSubmit:K,className:"modal-form",children:[g.jsxs("div",{className:"form-group",children:[g.jsx("label",{htmlFor:"date",children:"Dato *"}),g.jsx("input",{type:"date",id:"date",name:"date",value:o.date,onChange:E,className:l.date?"input-error":"",max:new Date().toISOString().split("T")[0]}),l.date&&g.jsx("span",{className:"error-text",children:l.date})]}),r.length>0&&g.jsxs("div",{className:"form-group",children:[g.jsx("label",{htmlFor:"materialId",children:"Vlg fra katalog (valgfrit)"}),g.jsxs("select",{id:"materialId",name:"materialId",value:o.materialId||"",onChange:E,children:[g.jsx("option",{value:"",children:"-- Skriv nyt materiale --"}),r.map(L=>g.jsxs("option",{value:L.id,children:[L.name," (",L.unit,")"]},L.id))]})]}),g.jsxs("div",{className:"form-group",children:[g.jsx("label",{htmlFor:"materialName",children:"Materiale *"}),g.jsx("input",{type:"text",id:"materialName",name:"materialName",value:o.materialName,onChange:E,className:l.materialName?"input-error":"",placeholder:"F.eks. Gipsplader 13mm"}),l.materialName&&g.jsx("span",{className:"error-text",children:l.materialName})]}),g.jsxs("div",{className:"form-group",children:[g.jsx("label",{htmlFor:"sku",children:"Artikelnummer / Varenummer"}),g.jsx("input",{type:"text",id:"sku",name:"sku",value:o.sku,onChange:E,placeholder:"F.eks. 123456"}),g.jsx("small",{className:"form-hint",children:"Leverandrens varenummer - hjlper med faktura-afstemning"})]}),g.jsxs("div",{className:"form-row",children:[g.jsxs("div",{className:"form-group",children:[g.jsx("label",{htmlFor:"quantity",children:"Antal *"}),g.jsx("input",{type:"text",id:"quantity",name:"quantity",value:o.quantity,onChange:E,className:l.quantity?"input-error":"",placeholder:"F.eks. 15"}),l.quantity&&g.jsx("span",{className:"error-text",children:l.quantity})]}),g.jsxs("div",{className:"form-group",children:[g.jsx("label",{htmlFor:"unit",children:"Enhed *"}),g.jsx("select",{id:"unit",name:"unit",value:o.unit,onChange:E,className:l.unit?"input-error":"",children:p.map(L=>g.jsx("option",{value:L,children:L},L))}),l.unit&&g.jsx("span",{className:"error-text",children:l.unit})]})]}),g.jsxs("div",{className:"form-group",children:[g.jsx("label",{htmlFor:"category",children:"Kategori *"}),g.jsxs("select",{id:"category",name:"category",value:o.category,onChange:E,className:l.category?"input-error":"",children:[g.jsx("option",{value:"",children:"-- Vlg kategori --"}),b.map(L=>g.jsx("option",{value:L,children:L},L))]}),l.category&&g.jsx("span",{className:"error-text",children:l.category})]}),n.length>0?g.jsxs("div",{className:"form-group",children:[g.jsx("label",{htmlFor:"supplierId",children:"Leverandr *"}),g.jsxs("select",{id:"supplierId",name:"supplierId",value:o.supplierId,onChange:E,className:l.supplierName?"input-error":"",children:[g.jsx("option",{value:"",children:"-- Vlg leverandr --"}),n.map(L=>g.jsx("option",{value:L.id,children:L.name},L.id))]}),l.supplierName&&g.jsx("span",{className:"error-text",children:l.supplierName})]}):g.jsxs("div",{className:"form-group",children:[g.jsx("label",{htmlFor:"supplierName",children:"Leverandr *"}),g.jsx("input",{type:"text",id:"supplierName",name:"supplierName",value:o.supplierName,onChange:E,className:l.supplierName?"input-error":"",placeholder:"F.eks. XL-BYG"}),l.supplierName&&g.jsx("span",{className:"error-text",children:l.supplierName})]}),g.jsxs("div",{className:"form-group",children:[g.jsx("label",{htmlFor:"purchasePrice",children:"Indkbspris (DKK) *"}),g.jsx("input",{type:"text",id:"purchasePrice",name:"purchasePrice",value:o.purchasePrice,onChange:E,className:l.purchasePrice?"input-error":"",placeholder:"F.eks. 2850"}),l.purchasePrice&&g.jsx("span",{className:"error-text",children:l.purchasePrice}),g.jsx("small",{className:"form-hint",children:"Total indkbspris for det angivne antal"})]}),g.jsxs("div",{className:"form-group",children:[g.jsx("label",{htmlFor:"sellingPrice",children:"Salgspris (DKK) *"}),g.jsx("input",{type:"text",id:"sellingPrice",name:"sellingPrice",value:o.sellingPrice,onChange:C,className:l.sellingPrice?"input-error":"",placeholder:"F.eks. 4275"}),l.sellingPrice&&g.jsx("span",{className:"error-text",children:l.sellingPrice}),g.jsx("small",{className:"form-hint",children:h?`Auto-beregnet med ${m}% markup`:`Margin: ${B()}%`})]}),g.jsxs("div",{className:"form-group",children:[g.jsx("label",{htmlFor:"paymentMethod",children:"Betalingsmetode"}),g.jsx("select",{id:"paymentMethod",name:"paymentMethod",value:o.paymentMethod,onChange:E,children:x.map(L=>g.jsx("option",{value:L,children:L},L))})]}),g.jsxs("div",{className:"form-group",children:[g.jsx("label",{htmlFor:"notes",children:"Noter"}),g.jsx("textarea",{id:"notes",name:"notes",value:o.notes,onChange:E,rows:"2",placeholder:"Ekstra bemrkninger..."})]}),g.jsxs("div",{className:"modal-footer",children:[g.jsx("button",{type:"button",className:"btn-secondary",onClick:s,children:"Annuller"}),g.jsx("button",{type:"submit",className:"btn-primary",children:t?"Gem ndringer":"Tilfj materiale"})]})]})]})})}const tO=async(t,e="Admin")=>{try{return{success:!0,id:(await sl(rr(Nt,"suppliers"),{...t,createdAt:new Date().toISOString(),createdBy:e,updatedAt:new Date().toISOString(),updatedBy:e})).id}}catch(n){return console.error("Error creating supplier:",n),{success:!1,error:n.message}}},LA=async()=>{try{const t=await Qs(rr(Nt,"suppliers")),e=[];return t.forEach(n=>{e.push({id:n.id,...n.data()})}),e.sort((n,r)=>n.name.localeCompare(r.name)),{success:!0,suppliers:e}}catch(t){return console.error("Error getting suppliers:",t),{success:!1,error:t.message,suppliers:[]}}},nO=async(t,e,n="Admin")=>{try{return await Ya(Tn(Nt,"suppliers",t),{...e,updatedAt:new Date().toISOString(),updatedBy:n}),{success:!0}}catch(r){return console.error("Error updating supplier:",r),{success:!1,error:r.message}}},rO=async t=>{try{return await il(Tn(Nt,"suppliers",t)),{success:!0}}catch(e){return console.error("Error deleting supplier:",e),{success:!1,error:e.message}}},iO=async(t,e="Admin")=>{try{return{success:!0,id:(await sl(rr(Nt,"materials"),{...t,lastPurchasePrice:null,lastPurchaseDate:null,createdAt:new Date().toISOString(),createdBy:e,updatedAt:new Date().toISOString(),updatedBy:e})).id}}catch(n){return console.error("Error creating material:",n),{success:!1,error:n.message}}},RA=async()=>{try{const t=await Qs(rr(Nt,"materials")),e=[];return t.forEach(n=>{e.push({id:n.id,...n.data()})}),e.sort((n,r)=>n.name.localeCompare(r.name)),{success:!0,materials:e}}catch(t){return console.error("Error getting materials:",t),{success:!1,error:t.message,materials:[]}}},jA=async(t,e,n="Admin")=>{try{return await Ya(Tn(Nt,"materials",t),{...e,updatedAt:new Date().toISOString(),updatedBy:n}),{success:!0}}catch(r){return console.error("Error updating material:",r),{success:!1,error:r.message}}},sO=async t=>{try{return await il(Tn(Nt,"materials",t)),{success:!0}}catch(e){return console.error("Error deleting material:",e),{success:!1,error:e.message}}},oO=async(t,e="Admin")=>{try{const n=t.sellingPrice-t.purchasePrice,r=n/t.purchasePrice*100,i=await sl(rr(Nt,"materialPurchases"),{...t,marginKr:n,marginPercent:r,createdAt:new Date().toISOString(),createdBy:e,updatedAt:new Date().toISOString(),updatedBy:e});return t.materialId&&await jA(t.materialId,{lastPurchasePrice:t.purchasePrice/t.quantity,lastPurchaseDate:t.date},e),{success:!0,id:i.id}}catch(n){return console.error("Error creating material purchase:",n),{success:!1,error:n.message}}},aO=async t=>{try{const e=eg(rr(Nt,"materialPurchases"),ng("caseId","==",t),CS("date","desc")),n=await Qs(e),r=[];return n.forEach(i=>{r.push({id:i.id,...i.data()})}),{success:!0,purchases:r}}catch(e){return console.error("Error getting case material purchases:",e),{success:!1,error:e.message,purchases:[]}}},lO=async(t,e,n="Admin")=>{try{let r={...e};if(e.purchasePrice!==void 0||e.sellingPrice!==void 0){const s=(await rg(Tn(Nt,"materialPurchases",t))).data(),o=e.purchasePrice??s.purchasePrice,l=(e.sellingPrice??s.sellingPrice)-o,u=l/o*100;r.marginKr=l,r.marginPercent=u}return await Ya(Tn(Nt,"materialPurchases",t),{...r,updatedAt:new Date().toISOString(),updatedBy:n}),{success:!0}}catch(r){return console.error("Error updating material purchase:",r),{success:!1,error:r.message}}},uO=async t=>{try{return await il(Tn(Nt,"materialPurchases",t)),{success:!0}}catch(e){return console.error("Error deleting material purchase:",e),{success:!1,error:e.message}}},DA=t=>!t||t.length===0?0:t.reduce((e,n)=>e+(n.purchasePrice||0),0),OA=t=>!t||t.length===0?0:t.reduce((e,n)=>e+(n.sellingPrice||0),0),cO=t=>{const e=DA(t);return OA(t)-e};function hO(t,e){return e.forEach(function(n){n&&typeof n!="string"&&!Array.isArray(n)&&Object.keys(n).forEach(function(r){if(r!=="default"&&!(r in t)){var i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:function(){return n[r]}})}})}),Object.freeze(t)}function FA(t,e){return new Promise(function(n,r){let i;return dO(t).then(function(s){try{return i=s,n(new Blob([e.slice(0,2),i,e.slice(2)],{type:"image/jpeg"}))}catch(o){return r(o)}},r)})}const dO=t=>new Promise((e,n)=>{const r=new FileReader;r.addEventListener("load",({target:{result:i}})=>{const s=new DataView(i);let o=0;if(s.getUint16(o)!==65496)return n("not a valid JPEG");for(o+=2;;){const a=s.getUint16(o);if(a===65498)break;const l=s.getUint16(o+2);if(a===65505&&s.getUint32(o+4)===1165519206){const u=o+10;let h;switch(s.getUint16(u)){case 18761:h=!0;break;case 19789:h=!1;break;default:return n("TIFF header contains invalid endian")}if(s.getUint16(u+2,h)!==42)return n("TIFF header contains invalid version");const f=s.getUint32(u+4,h),m=u+f+2+12*s.getUint16(u+f,h);for(let p=u+f+2;p<m;p+=12)if(s.getUint16(p,h)==274){if(s.getUint16(p+2,h)!==3)return n("Orientation data type is invalid");if(s.getUint32(p+4,h)!==1)return n("Orientation data count is invalid");s.setUint16(p+8,1,h);break}return e(i.slice(o,o+2+l))}o+=2+l}return e(new Blob)}),r.readAsArrayBuffer(t)});var cm={},fO={get exports(){return cm},set exports(t){cm=t}};(function(t){var e,n,r={};fO.exports=r,r.parse=function(i,s){for(var o=r.bin.readUshort,a=r.bin.readUint,l=0,u={},h=new Uint8Array(i),f=h.length-4;a(h,f)!=101010256;)f--;l=f,l+=4;var m=o(h,l+=4);o(h,l+=2);var p=a(h,l+=2),b=a(h,l+=4);l+=4,l=b;for(var x=0;x<m;x++){a(h,l),l+=4,l+=4,l+=4,a(h,l+=4),p=a(h,l+=4);var I=a(h,l+=4),_=o(h,l+=4),E=o(h,l+2),C=o(h,l+4);l+=6;var O=a(h,l+=8);l+=4,l+=_+E+C,r._readLocal(h,O,u,p,I,s)}return u},r._readLocal=function(i,s,o,a,l,u){var h=r.bin.readUshort,f=r.bin.readUint;f(i,s),h(i,s+=4),h(i,s+=2);var m=h(i,s+=2);f(i,s+=2),f(i,s+=4),s+=4;var p=h(i,s+=8),b=h(i,s+=2);s+=2;var x=r.bin.readUTF8(i,s,p);if(s+=p,s+=b,u)o[x]={size:l,csize:a};else{var I=new Uint8Array(i.buffer,s);if(m==0)o[x]=new Uint8Array(I.buffer.slice(s,s+a));else{if(m!=8)throw"unknown compression method: "+m;var _=new Uint8Array(l);r.inflateRaw(I,_),o[x]=_}}},r.inflateRaw=function(i,s){return r.F.inflate(i,s)},r.inflate=function(i,s){return i[0],i[1],r.inflateRaw(new Uint8Array(i.buffer,i.byteOffset+2,i.length-6),s)},r.deflate=function(i,s){s==null&&(s={level:6});var o=0,a=new Uint8Array(50+Math.floor(1.1*i.length));a[o]=120,a[o+1]=156,o+=2,o=r.F.deflateRaw(i,a,o,s.level);var l=r.adler(i,0,i.length);return a[o+0]=l>>>24&255,a[o+1]=l>>>16&255,a[o+2]=l>>>8&255,a[o+3]=l>>>0&255,new Uint8Array(a.buffer,0,o+4)},r.deflateRaw=function(i,s){s==null&&(s={level:6});var o=new Uint8Array(50+Math.floor(1.1*i.length)),a=r.F.deflateRaw(i,o,a,s.level);return new Uint8Array(o.buffer,0,a)},r.encode=function(i,s){s==null&&(s=!1);var o=0,a=r.bin.writeUint,l=r.bin.writeUshort,u={};for(var h in i){var f=!r._noNeed(h)&&!s,m=i[h],p=r.crc.crc(m,0,m.length);u[h]={cpr:f,usize:m.length,crc:p,file:f?r.deflateRaw(m):m}}for(var h in u)o+=u[h].file.length+30+46+2*r.bin.sizeUTF8(h);o+=22;var b=new Uint8Array(o),x=0,I=[];for(var h in u){var _=u[h];I.push(x),x=r._writeHeader(b,x,h,_,0)}var E=0,C=x;for(var h in u)_=u[h],I.push(x),x=r._writeHeader(b,x,h,_,1,I[E++]);var O=x-C;return a(b,x,101010256),x+=4,l(b,x+=4,E),l(b,x+=2,E),a(b,x+=2,O),a(b,x+=4,C),x+=4,x+=2,b.buffer},r._noNeed=function(i){var s=i.split(".").pop().toLowerCase();return"png,jpg,jpeg,zip".indexOf(s)!=-1},r._writeHeader=function(i,s,o,a,l,u){var h=r.bin.writeUint,f=r.bin.writeUshort,m=a.file;return h(i,s,l==0?67324752:33639248),s+=4,l==1&&(s+=2),f(i,s,20),f(i,s+=2,0),f(i,s+=2,a.cpr?8:0),h(i,s+=2,0),h(i,s+=4,a.crc),h(i,s+=4,m.length),h(i,s+=4,a.usize),f(i,s+=4,r.bin.sizeUTF8(o)),f(i,s+=2,0),s+=2,l==1&&(s+=2,s+=2,h(i,s+=6,u),s+=4),s+=r.bin.writeUTF8(i,s,o),l==0&&(i.set(m,s),s+=m.length),s},r.crc={table:function(){for(var i=new Uint32Array(256),s=0;s<256;s++){for(var o=s,a=0;a<8;a++)1&o?o=3988292384^o>>>1:o>>>=1;i[s]=o}return i}(),update:function(i,s,o,a){for(var l=0;l<a;l++)i=r.crc.table[255&(i^s[o+l])]^i>>>8;return i},crc:function(i,s,o){return 4294967295^r.crc.update(4294967295,i,s,o)}},r.adler=function(i,s,o){for(var a=1,l=0,u=s,h=s+o;u<h;){for(var f=Math.min(u+5552,h);u<f;)l+=a+=i[u++];a%=65521,l%=65521}return l<<16|a},r.bin={readUshort:function(i,s){return i[s]|i[s+1]<<8},writeUshort:function(i,s,o){i[s]=255&o,i[s+1]=o>>8&255},readUint:function(i,s){return 16777216*i[s+3]+(i[s+2]<<16|i[s+1]<<8|i[s])},writeUint:function(i,s,o){i[s]=255&o,i[s+1]=o>>8&255,i[s+2]=o>>16&255,i[s+3]=o>>24&255},readASCII:function(i,s,o){for(var a="",l=0;l<o;l++)a+=String.fromCharCode(i[s+l]);return a},writeASCII:function(i,s,o){for(var a=0;a<o.length;a++)i[s+a]=o.charCodeAt(a)},pad:function(i){return i.length<2?"0"+i:i},readUTF8:function(i,s,o){for(var a,l="",u=0;u<o;u++)l+="%"+r.bin.pad(i[s+u].toString(16));try{a=decodeURIComponent(l)}catch{return r.bin.readASCII(i,s,o)}return a},writeUTF8:function(i,s,o){for(var a=o.length,l=0,u=0;u<a;u++){var h=o.charCodeAt(u);if(!(4294967168&h))i[s+l]=h,l++;else if(!(4294965248&h))i[s+l]=192|h>>6,i[s+l+1]=128|h>>0&63,l+=2;else if(!(4294901760&h))i[s+l]=224|h>>12,i[s+l+1]=128|h>>6&63,i[s+l+2]=128|h>>0&63,l+=3;else{if(4292870144&h)throw"e";i[s+l]=240|h>>18,i[s+l+1]=128|h>>12&63,i[s+l+2]=128|h>>6&63,i[s+l+3]=128|h>>0&63,l+=4}}return l},sizeUTF8:function(i){for(var s=i.length,o=0,a=0;a<s;a++){var l=i.charCodeAt(a);if(!(4294967168&l))o++;else if(!(4294965248&l))o+=2;else if(!(4294901760&l))o+=3;else{if(4292870144&l)throw"e";o+=4}}return o}},r.F={},r.F.deflateRaw=function(i,s,o,a){var l=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][a],u=r.F.U,h=r.F._goodIndex;r.F._hash;var f=r.F._putsE,m=0,p=o<<3,b=0,x=i.length;if(a==0){for(;m<x;)f(s,p,m+(N=Math.min(65535,x-m))==x?1:0),p=r.F._copyExact(i,m,N,s,p+8),m+=N;return p>>>3}var I=u.lits,_=u.strt,E=u.prev,C=0,O=0,K=0,B=0,L=0,y=0;for(x>2&&(_[y=r.F._hash(i,0)]=0),m=0;m<x;m++){if(L=y,m+1<x-2){y=r.F._hash(i,m+1);var S=m+1&32767;E[S]=_[y],_[y]=S}if(b<=m){(C>14e3||O>26697)&&x-m>100&&(b<m&&(I[C]=m-b,C+=2,b=m),p=r.F._writeBlock(m==x-1||b==x?1:0,I,C,B,i,K,m-K,s,p),C=O=B=0,K=m);var R=0;m<x-2&&(R=r.F._bestMatch(i,m,E,L,Math.min(l[2],x-m),l[3]));var N=R>>>16,T=65535&R;if(R!=0){T=65535&R;var P=h(N=R>>>16,u.of0);u.lhst[257+P]++;var U=h(T,u.df0);u.dhst[U]++,B+=u.exb[P]+u.dxb[U],I[C]=N<<23|m-b,I[C+1]=T<<16|P<<8|U,C+=2,b=m+N}else u.lhst[i[m]]++;O++}}for(K==m&&i.length!=0||(b<m&&(I[C]=m-b,C+=2,b=m),p=r.F._writeBlock(1,I,C,B,i,K,m-K,s,p),C=0,O=0,C=O=B=0,K=m);7&p;)p++;return p>>>3},r.F._bestMatch=function(i,s,o,a,l,u){var h=32767&s,f=o[h],m=h-f+32768&32767;if(f==h||a!=r.F._hash(i,s-m))return 0;for(var p=0,b=0,x=Math.min(32767,s);m<=x&&--u!=0&&f!=h;){if(p==0||i[s+p]==i[s+p-m]){var I=r.F._howLong(i,s,m);if(I>p){if(b=m,(p=I)>=l)break;m+2<I&&(I=m+2);for(var _=0,E=0;E<I-2;E++){var C=s-m+E+32768&32767,O=C-o[C]+32768&32767;O>_&&(_=O,f=C)}}}m+=(h=f)-(f=o[h])+32768&32767}return p<<16|b},r.F._howLong=function(i,s,o){if(i[s]!=i[s-o]||i[s+1]!=i[s+1-o]||i[s+2]!=i[s+2-o])return 0;var a=s,l=Math.min(i.length,s+258);for(s+=3;s<l&&i[s]==i[s-o];)s++;return s-a},r.F._hash=function(i,s){return(i[s]<<8|i[s+1])+(i[s+2]<<4)&65535},r.saved=0,r.F._writeBlock=function(i,s,o,a,l,u,h,f,m){var p,b,x,I,_,E,C,O,K,B=r.F.U,L=r.F._putsF,y=r.F._putsE;B.lhst[256]++,b=(p=r.F.getTrees())[0],x=p[1],I=p[2],_=p[3],E=p[4],C=p[5],O=p[6],K=p[7];var S=32+(m+3&7?8-(m+3&7):0)+(h<<3),R=a+r.F.contSize(B.fltree,B.lhst)+r.F.contSize(B.fdtree,B.dhst),N=a+r.F.contSize(B.ltree,B.lhst)+r.F.contSize(B.dtree,B.dhst);N+=14+3*C+r.F.contSize(B.itree,B.ihst)+(2*B.ihst[16]+3*B.ihst[17]+7*B.ihst[18]);for(var T=0;T<286;T++)B.lhst[T]=0;for(T=0;T<30;T++)B.dhst[T]=0;for(T=0;T<19;T++)B.ihst[T]=0;var P=S<R&&S<N?0:R<N?1:2;if(L(f,m,i),L(f,m+1,P),m+=3,P==0){for(;7&m;)m++;m=r.F._copyExact(l,u,h,f,m)}else{var U,Q;if(P==1&&(U=B.fltree,Q=B.fdtree),P==2){r.F.makeCodes(B.ltree,b),r.F.revCodes(B.ltree,b),r.F.makeCodes(B.dtree,x),r.F.revCodes(B.dtree,x),r.F.makeCodes(B.itree,I),r.F.revCodes(B.itree,I),U=B.ltree,Q=B.dtree,y(f,m,_-257),y(f,m+=5,E-1),y(f,m+=5,C-4),m+=4;for(var F=0;F<C;F++)y(f,m+3*F,B.itree[1+(B.ordr[F]<<1)]);m+=3*C,m=r.F._codeTiny(O,B.itree,f,m),m=r.F._codeTiny(K,B.itree,f,m)}for(var V=u,G=0;G<o;G+=2){for(var ee=s[G],ie=ee>>>23,be=V+(8388607&ee);V<be;)m=r.F._writeLit(l[V++],U,f,m);if(ie!=0){var M=s[G+1],Y=M>>16,X=M>>8&255,H=255&M;y(f,m=r.F._writeLit(257+X,U,f,m),ie-B.of0[X]),m+=B.exb[X],L(f,m=r.F._writeLit(H,Q,f,m),Y-B.df0[H]),m+=B.dxb[H],V+=ie}}m=r.F._writeLit(256,U,f,m)}return m},r.F._copyExact=function(i,s,o,a,l){var u=l>>>3;return a[u]=o,a[u+1]=o>>>8,a[u+2]=255-a[u],a[u+3]=255-a[u+1],u+=4,a.set(new Uint8Array(i.buffer,s,o),u),l+(o+4<<3)},r.F.getTrees=function(){for(var i=r.F.U,s=r.F._hufTree(i.lhst,i.ltree,15),o=r.F._hufTree(i.dhst,i.dtree,15),a=[],l=r.F._lenCodes(i.ltree,a),u=[],h=r.F._lenCodes(i.dtree,u),f=0;f<a.length;f+=2)i.ihst[a[f]]++;for(f=0;f<u.length;f+=2)i.ihst[u[f]]++;for(var m=r.F._hufTree(i.ihst,i.itree,7),p=19;p>4&&i.itree[1+(i.ordr[p-1]<<1)]==0;)p--;return[s,o,m,l,h,p,a,u]},r.F.getSecond=function(i){for(var s=[],o=0;o<i.length;o+=2)s.push(i[o+1]);return s},r.F.nonZero=function(i){for(var s="",o=0;o<i.length;o+=2)i[o+1]!=0&&(s+=(o>>1)+",");return s},r.F.contSize=function(i,s){for(var o=0,a=0;a<s.length;a++)o+=s[a]*i[1+(a<<1)];return o},r.F._codeTiny=function(i,s,o,a){for(var l=0;l<i.length;l+=2){var u=i[l],h=i[l+1];a=r.F._writeLit(u,s,o,a);var f=u==16?2:u==17?3:7;u>15&&(r.F._putsE(o,a,h,f),a+=f)}return a},r.F._lenCodes=function(i,s){for(var o=i.length;o!=2&&i[o-1]==0;)o-=2;for(var a=0;a<o;a+=2){var l=i[a+1],u=a+3<o?i[a+3]:-1,h=a+5<o?i[a+5]:-1,f=a==0?-1:i[a-1];if(l==0&&u==l&&h==l){for(var m=a+5;m+2<o&&i[m+2]==l;)m+=2;(p=Math.min(m+1-a>>>1,138))<11?s.push(17,p-3):s.push(18,p-11),a+=2*p-2}else if(l==f&&u==l&&h==l){for(m=a+5;m+2<o&&i[m+2]==l;)m+=2;var p=Math.min(m+1-a>>>1,6);s.push(16,p-3),a+=2*p-2}else s.push(l,0)}return o>>>1},r.F._hufTree=function(i,s,o){var a=[],l=i.length,u=s.length,h=0;for(h=0;h<u;h+=2)s[h]=0,s[h+1]=0;for(h=0;h<l;h++)i[h]!=0&&a.push({lit:h,f:i[h]});var f=a.length,m=a.slice(0);if(f==0)return 0;if(f==1){var p=a[0].lit;return m=p==0?1:0,s[1+(p<<1)]=1,s[1+(m<<1)]=1,1}a.sort(function(O,K){return O.f-K.f});var b=a[0],x=a[1],I=0,_=1,E=2;for(a[0]={lit:-1,f:b.f+x.f,l:b,r:x,d:0};_!=f-1;)b=I!=_&&(E==f||a[I].f<a[E].f)?a[I++]:a[E++],x=I!=_&&(E==f||a[I].f<a[E].f)?a[I++]:a[E++],a[_++]={lit:-1,f:b.f+x.f,l:b,r:x};var C=r.F.setDepth(a[_-1],0);for(C>o&&(r.F.restrictDepth(m,o,C),C=o),h=0;h<f;h++)s[1+(m[h].lit<<1)]=m[h].d;return C},r.F.setDepth=function(i,s){return i.lit!=-1?(i.d=s,s):Math.max(r.F.setDepth(i.l,s+1),r.F.setDepth(i.r,s+1))},r.F.restrictDepth=function(i,s,o){var a=0,l=1<<o-s,u=0;for(i.sort(function(f,m){return m.d==f.d?f.f-m.f:m.d-f.d}),a=0;a<i.length&&i[a].d>s;a++){var h=i[a].d;i[a].d=s,u+=l-(1<<o-h)}for(u>>>=o-s;u>0;)(h=i[a].d)<s?(i[a].d++,u-=1<<s-h-1):a++;for(;a>=0;a--)i[a].d==s&&u<0&&(i[a].d--,u++);u!=0&&console.log("debt left")},r.F._goodIndex=function(i,s){var o=0;return s[16|o]<=i&&(o|=16),s[8|o]<=i&&(o|=8),s[4|o]<=i&&(o|=4),s[2|o]<=i&&(o|=2),s[1|o]<=i&&(o|=1),o},r.F._writeLit=function(i,s,o,a){return r.F._putsF(o,a,s[i<<1]),a+s[1+(i<<1)]},r.F.inflate=function(i,s){var o=Uint8Array;if(i[0]==3&&i[1]==0)return s||new o(0);var a=r.F,l=a._bitsF,u=a._bitsE,h=a._decodeTiny,f=a.makeCodes,m=a.codes2map,p=a._get17,b=a.U,x=s==null;x&&(s=new o(i.length>>>2<<3));for(var I,_,E=0,C=0,O=0,K=0,B=0,L=0,y=0,S=0,R=0;E==0;)if(E=l(i,R,1),C=l(i,R+1,2),R+=3,C!=0){if(x&&(s=r.F._check(s,S+(1<<17))),C==1&&(I=b.flmap,_=b.fdmap,L=511,y=31),C==2){O=u(i,R,5)+257,K=u(i,R+5,5)+1,B=u(i,R+10,4)+4,R+=14;for(var N=0;N<38;N+=2)b.itree[N]=0,b.itree[N+1]=0;var T=1;for(N=0;N<B;N++){var P=u(i,R+3*N,3);b.itree[1+(b.ordr[N]<<1)]=P,P>T&&(T=P)}R+=3*B,f(b.itree,T),m(b.itree,T,b.imap),I=b.lmap,_=b.dmap,R=h(b.imap,(1<<T)-1,O+K,i,R,b.ttree);var U=a._copyOut(b.ttree,0,O,b.ltree);L=(1<<U)-1;var Q=a._copyOut(b.ttree,O,K,b.dtree);y=(1<<Q)-1,f(b.ltree,U),m(b.ltree,U,I),f(b.dtree,Q),m(b.dtree,Q,_)}for(;;){var F=I[p(i,R)&L];R+=15&F;var V=F>>>4;if(!(V>>>8))s[S++]=V;else{if(V==256)break;var G=S+V-254;if(V>264){var ee=b.ldef[V-257];G=S+(ee>>>3)+u(i,R,7&ee),R+=7&ee}var ie=_[p(i,R)&y];R+=15&ie;var be=ie>>>4,M=b.ddef[be],Y=(M>>>4)+l(i,R,15&M);for(R+=15&M,x&&(s=r.F._check(s,S+(1<<17)));S<G;)s[S]=s[S++-Y],s[S]=s[S++-Y],s[S]=s[S++-Y],s[S]=s[S++-Y];S=G}}}else{7&R&&(R+=8-(7&R));var X=4+(R>>>3),H=i[X-4]|i[X-3]<<8;x&&(s=r.F._check(s,S+H)),s.set(new o(i.buffer,i.byteOffset+X,H),S),R=X+H<<3,S+=H}return s.length==S?s:s.slice(0,S)},r.F._check=function(i,s){var o=i.length;if(s<=o)return i;var a=new Uint8Array(Math.max(o<<1,s));return a.set(i,0),a},r.F._decodeTiny=function(i,s,o,a,l,u){for(var h=r.F._bitsE,f=r.F._get17,m=0;m<o;){var p=i[f(a,l)&s];l+=15&p;var b=p>>>4;if(b<=15)u[m]=b,m++;else{var x=0,I=0;b==16?(I=3+h(a,l,2),l+=2,x=u[m-1]):b==17?(I=3+h(a,l,3),l+=3):b==18&&(I=11+h(a,l,7),l+=7);for(var _=m+I;m<_;)u[m]=x,m++}}return l},r.F._copyOut=function(i,s,o,a){for(var l=0,u=0,h=a.length>>>1;u<o;){var f=i[u+s];a[u<<1]=0,a[1+(u<<1)]=f,f>l&&(l=f),u++}for(;u<h;)a[u<<1]=0,a[1+(u<<1)]=0,u++;return l},r.F.makeCodes=function(i,s){for(var o,a,l,u,h=r.F.U,f=i.length,m=h.bl_count,p=0;p<=s;p++)m[p]=0;for(p=1;p<f;p+=2)m[i[p]]++;var b=h.next_code;for(o=0,m[0]=0,a=1;a<=s;a++)o=o+m[a-1]<<1,b[a]=o;for(l=0;l<f;l+=2)(u=i[l+1])!=0&&(i[l]=b[u],b[u]++)},r.F.codes2map=function(i,s,o){for(var a=i.length,l=r.F.U.rev15,u=0;u<a;u+=2)if(i[u+1]!=0)for(var h=u>>1,f=i[u+1],m=h<<4|f,p=s-f,b=i[u]<<p,x=b+(1<<p);b!=x;)o[l[b]>>>15-s]=m,b++},r.F.revCodes=function(i,s){for(var o=r.F.U.rev15,a=15-s,l=0;l<i.length;l+=2){var u=i[l]<<s-i[l+1];i[l]=o[u]>>>a}},r.F._putsE=function(i,s,o){o<<=7&s;var a=s>>>3;i[a]|=o,i[a+1]|=o>>>8},r.F._putsF=function(i,s,o){o<<=7&s;var a=s>>>3;i[a]|=o,i[a+1]|=o>>>8,i[a+2]|=o>>>16},r.F._bitsE=function(i,s,o){return(i[s>>>3]|i[1+(s>>>3)]<<8)>>>(7&s)&(1<<o)-1},r.F._bitsF=function(i,s,o){return(i[s>>>3]|i[1+(s>>>3)]<<8|i[2+(s>>>3)]<<16)>>>(7&s)&(1<<o)-1},r.F._get17=function(i,s){return(i[s>>>3]|i[1+(s>>>3)]<<8|i[2+(s>>>3)]<<16)>>>(7&s)},r.F._get25=function(i,s){return(i[s>>>3]|i[1+(s>>>3)]<<8|i[2+(s>>>3)]<<16|i[3+(s>>>3)]<<24)>>>(7&s)},r.F.U=(e=Uint16Array,n=Uint32Array,{next_code:new e(16),bl_count:new e(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new e(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new n(32),flmap:new e(512),fltree:[],fdmap:new e(32),fdtree:[],lmap:new e(32768),ltree:[],ttree:[],dmap:new e(32768),dtree:[],imap:new e(512),itree:[],rev15:new e(32768),lhst:new n(286),dhst:new n(30),ihst:new n(19),lits:new n(15e3),strt:new e(65536),prev:new e(32768)}),function(){for(var i=r.F.U,s=0;s<32768;s++){var o=s;o=(4278255360&(o=(4042322160&(o=(3435973836&(o=(2863311530&o)>>>1|(1431655765&o)<<1))>>>2|(858993459&o)<<2))>>>4|(252645135&o)<<4))>>>8|(16711935&o)<<8,i.rev15[s]=(o>>>16|o<<16)>>>17}function a(l,u,h){for(;u--!=0;)l.push(0,h)}for(s=0;s<32;s++)i.ldef[s]=i.of0[s]<<3|i.exb[s],i.ddef[s]=i.df0[s]<<4|i.dxb[s];a(i.fltree,144,8),a(i.fltree,112,9),a(i.fltree,24,7),a(i.fltree,8,8),r.F.makeCodes(i.fltree,9),r.F.codes2map(i.fltree,9,i.flmap),r.F.revCodes(i.fltree,9),a(i.fdtree,32,5),r.F.makeCodes(i.fdtree,5),r.F.codes2map(i.fdtree,5,i.fdmap),r.F.revCodes(i.fdtree,5),a(i.itree,19,0),a(i.ltree,286,0),a(i.dtree,30,0),a(i.ttree,320,0)}()})();var pO=hO({__proto__:null,default:cm},[cm]);const rs=function(){var t={nextZero(h,f){for(;h[f]!=0;)f++;return f},readUshort:(h,f)=>h[f]<<8|h[f+1],writeUshort(h,f,m){h[f]=m>>8&255,h[f+1]=255&m},readUint:(h,f)=>16777216*h[f]+(h[f+1]<<16|h[f+2]<<8|h[f+3]),writeUint(h,f,m){h[f]=m>>24&255,h[f+1]=m>>16&255,h[f+2]=m>>8&255,h[f+3]=255&m},readASCII(h,f,m){let p="";for(let b=0;b<m;b++)p+=String.fromCharCode(h[f+b]);return p},writeASCII(h,f,m){for(let p=0;p<m.length;p++)h[f+p]=m.charCodeAt(p)},readBytes(h,f,m){const p=[];for(let b=0;b<m;b++)p.push(h[f+b]);return p},pad:h=>h.length<2?`0${h}`:h,readUTF8(h,f,m){let p,b="";for(let x=0;x<m;x++)b+=`%${t.pad(h[f+x].toString(16))}`;try{p=decodeURIComponent(b)}catch{return t.readASCII(h,f,m)}return p}};function e(h,f,m,p){const b=f*m,x=s(p),I=Math.ceil(f*x/8),_=new Uint8Array(4*b),E=new Uint32Array(_.buffer),{ctype:C}=p,{depth:O}=p,K=t.readUshort;if(C==6){const ee=b<<2;if(O==8)for(var B=0;B<ee;B+=4)_[B]=h[B],_[B+1]=h[B+1],_[B+2]=h[B+2],_[B+3]=h[B+3];if(O==16)for(B=0;B<ee;B++)_[B]=h[B<<1]}else if(C==2){const ee=p.tabs.tRNS;if(ee==null){if(O==8)for(B=0;B<b;B++){var L=3*B;E[B]=255<<24|h[L+2]<<16|h[L+1]<<8|h[L]}if(O==16)for(B=0;B<b;B++)L=6*B,E[B]=255<<24|h[L+4]<<16|h[L+2]<<8|h[L]}else{var y=ee[0];const ie=ee[1],be=ee[2];if(O==8)for(B=0;B<b;B++){var S=B<<2;L=3*B,E[B]=255<<24|h[L+2]<<16|h[L+1]<<8|h[L],h[L]==y&&h[L+1]==ie&&h[L+2]==be&&(_[S+3]=0)}if(O==16)for(B=0;B<b;B++)S=B<<2,L=6*B,E[B]=255<<24|h[L+4]<<16|h[L+2]<<8|h[L],K(h,L)==y&&K(h,L+2)==ie&&K(h,L+4)==be&&(_[S+3]=0)}}else if(C==3){const ee=p.tabs.PLTE,ie=p.tabs.tRNS,be=ie?ie.length:0;if(O==1)for(var R=0;R<m;R++){var N=R*I,T=R*f;for(B=0;B<f;B++){S=T+B<<2;var P=3*(U=h[N+(B>>3)]>>7-((7&B)<<0)&1);_[S]=ee[P],_[S+1]=ee[P+1],_[S+2]=ee[P+2],_[S+3]=U<be?ie[U]:255}}if(O==2)for(R=0;R<m;R++)for(N=R*I,T=R*f,B=0;B<f;B++)S=T+B<<2,P=3*(U=h[N+(B>>2)]>>6-((3&B)<<1)&3),_[S]=ee[P],_[S+1]=ee[P+1],_[S+2]=ee[P+2],_[S+3]=U<be?ie[U]:255;if(O==4)for(R=0;R<m;R++)for(N=R*I,T=R*f,B=0;B<f;B++)S=T+B<<2,P=3*(U=h[N+(B>>1)]>>4-((1&B)<<2)&15),_[S]=ee[P],_[S+1]=ee[P+1],_[S+2]=ee[P+2],_[S+3]=U<be?ie[U]:255;if(O==8)for(B=0;B<b;B++){var U;S=B<<2,P=3*(U=h[B]),_[S]=ee[P],_[S+1]=ee[P+1],_[S+2]=ee[P+2],_[S+3]=U<be?ie[U]:255}}else if(C==4){if(O==8)for(B=0;B<b;B++){S=B<<2;var Q=h[F=B<<1];_[S]=Q,_[S+1]=Q,_[S+2]=Q,_[S+3]=h[F+1]}if(O==16)for(B=0;B<b;B++){var F;S=B<<2,Q=h[F=B<<2],_[S]=Q,_[S+1]=Q,_[S+2]=Q,_[S+3]=h[F+2]}}else if(C==0)for(y=p.tabs.tRNS?p.tabs.tRNS:-1,R=0;R<m;R++){const ee=R*I,ie=R*f;if(O==1)for(var V=0;V<f;V++){var G=(Q=255*(h[ee+(V>>>3)]>>>7-(7&V)&1))==255*y?0:255;E[ie+V]=G<<24|Q<<16|Q<<8|Q}else if(O==2)for(V=0;V<f;V++)G=(Q=85*(h[ee+(V>>>2)]>>>6-((3&V)<<1)&3))==85*y?0:255,E[ie+V]=G<<24|Q<<16|Q<<8|Q;else if(O==4)for(V=0;V<f;V++)G=(Q=17*(h[ee+(V>>>1)]>>>4-((1&V)<<2)&15))==17*y?0:255,E[ie+V]=G<<24|Q<<16|Q<<8|Q;else if(O==8)for(V=0;V<f;V++)G=(Q=h[ee+V])==y?0:255,E[ie+V]=G<<24|Q<<16|Q<<8|Q;else if(O==16)for(V=0;V<f;V++)Q=h[ee+(V<<1)],G=K(h,ee+(V<<1))==y?0:255,E[ie+V]=G<<24|Q<<16|Q<<8|Q}return _}function n(h,f,m,p){const b=s(h),x=Math.ceil(m*b/8),I=new Uint8Array((x+1+h.interlace)*p);return f=h.tabs.CgBI?i(f,I):r(f,I),h.interlace==0?f=o(f,h,0,m,p):h.interlace==1&&(f=function(E,C){const O=C.width,K=C.height,B=s(C),L=B>>3,y=Math.ceil(O*B/8),S=new Uint8Array(K*y);let R=0;const N=[0,0,4,0,2,0,1],T=[0,4,0,2,0,1,0],P=[8,8,8,4,4,2,2],U=[8,8,4,4,2,2,1];let Q=0;for(;Q<7;){const V=P[Q],G=U[Q];let ee=0,ie=0,be=N[Q];for(;be<K;)be+=V,ie++;let M=T[Q];for(;M<O;)M+=G,ee++;const Y=Math.ceil(ee*B/8);o(E,C,R,ee,ie);let X=0,H=N[Q];for(;H<K;){let oe=T[Q],ne=R+X*Y<<3;for(;oe<O;){var F;if(B==1&&(F=(F=E[ne>>3])>>7-(7&ne)&1,S[H*y+(oe>>3)]|=F<<7-((7&oe)<<0)),B==2&&(F=(F=E[ne>>3])>>6-(7&ne)&3,S[H*y+(oe>>2)]|=F<<6-((3&oe)<<1)),B==4&&(F=(F=E[ne>>3])>>4-(7&ne)&15,S[H*y+(oe>>1)]|=F<<4-((1&oe)<<2)),B>=8){const ue=H*y+oe*L;for(let he=0;he<L;he++)S[ue+he]=E[(ne>>3)+he]}ne+=B,oe+=G}X++,H+=V}ee*ie!=0&&(R+=ie*(1+Y)),Q+=1}return S}(f,h)),f}function r(h,f){return i(new Uint8Array(h.buffer,2,h.length-6),f)}var i=function(){const h={H:{}};return h.H.N=function(f,m){const p=Uint8Array;let b,x,I=0,_=0,E=0,C=0,O=0,K=0,B=0,L=0,y=0;if(f[0]==3&&f[1]==0)return m||new p(0);const S=h.H,R=S.b,N=S.e,T=S.R,P=S.n,U=S.A,Q=S.Z,F=S.m,V=m==null;for(V&&(m=new p(f.length>>>2<<5));I==0;)if(I=R(f,y,1),_=R(f,y+1,2),y+=3,_!=0){if(V&&(m=h.H.W(m,L+(1<<17))),_==1&&(b=F.J,x=F.h,K=511,B=31),_==2){E=N(f,y,5)+257,C=N(f,y+5,5)+1,O=N(f,y+10,4)+4,y+=14;let ee=1;for(var G=0;G<38;G+=2)F.Q[G]=0,F.Q[G+1]=0;for(G=0;G<O;G++){const M=N(f,y+3*G,3);F.Q[1+(F.X[G]<<1)]=M,M>ee&&(ee=M)}y+=3*O,P(F.Q,ee),U(F.Q,ee,F.u),b=F.w,x=F.d,y=T(F.u,(1<<ee)-1,E+C,f,y,F.v);const ie=S.V(F.v,0,E,F.C);K=(1<<ie)-1;const be=S.V(F.v,E,C,F.D);B=(1<<be)-1,P(F.C,ie),U(F.C,ie,b),P(F.D,be),U(F.D,be,x)}for(;;){const ee=b[Q(f,y)&K];y+=15&ee;const ie=ee>>>4;if(!(ie>>>8))m[L++]=ie;else{if(ie==256)break;{let be=L+ie-254;if(ie>264){const oe=F.q[ie-257];be=L+(oe>>>3)+N(f,y,7&oe),y+=7&oe}const M=x[Q(f,y)&B];y+=15&M;const Y=M>>>4,X=F.c[Y],H=(X>>>4)+R(f,y,15&X);for(y+=15&X;L<be;)m[L]=m[L++-H],m[L]=m[L++-H],m[L]=m[L++-H],m[L]=m[L++-H];L=be}}}}else{7&y&&(y+=8-(7&y));const ee=4+(y>>>3),ie=f[ee-4]|f[ee-3]<<8;V&&(m=h.H.W(m,L+ie)),m.set(new p(f.buffer,f.byteOffset+ee,ie),L),y=ee+ie<<3,L+=ie}return m.length==L?m:m.slice(0,L)},h.H.W=function(f,m){const p=f.length;if(m<=p)return f;const b=new Uint8Array(p<<1);return b.set(f,0),b},h.H.R=function(f,m,p,b,x,I){const _=h.H.e,E=h.H.Z;let C=0;for(;C<p;){const O=f[E(b,x)&m];x+=15&O;const K=O>>>4;if(K<=15)I[C]=K,C++;else{let B=0,L=0;K==16?(L=3+_(b,x,2),x+=2,B=I[C-1]):K==17?(L=3+_(b,x,3),x+=3):K==18&&(L=11+_(b,x,7),x+=7);const y=C+L;for(;C<y;)I[C]=B,C++}}return x},h.H.V=function(f,m,p,b){let x=0,I=0;const _=b.length>>>1;for(;I<p;){const E=f[I+m];b[I<<1]=0,b[1+(I<<1)]=E,E>x&&(x=E),I++}for(;I<_;)b[I<<1]=0,b[1+(I<<1)]=0,I++;return x},h.H.n=function(f,m){const p=h.H.m,b=f.length;let x,I,_,E;const C=p.j;for(var O=0;O<=m;O++)C[O]=0;for(O=1;O<b;O+=2)C[f[O]]++;const K=p.K;for(x=0,C[0]=0,I=1;I<=m;I++)x=x+C[I-1]<<1,K[I]=x;for(_=0;_<b;_+=2)E=f[_+1],E!=0&&(f[_]=K[E],K[E]++)},h.H.A=function(f,m,p){const b=f.length,x=h.H.m.r;for(let I=0;I<b;I+=2)if(f[I+1]!=0){const _=I>>1,E=f[I+1],C=_<<4|E,O=m-E;let K=f[I]<<O;const B=K+(1<<O);for(;K!=B;)p[x[K]>>>15-m]=C,K++}},h.H.l=function(f,m){const p=h.H.m.r,b=15-m;for(let x=0;x<f.length;x+=2){const I=f[x]<<m-f[x+1];f[x]=p[I]>>>b}},h.H.M=function(f,m,p){p<<=7&m;const b=m>>>3;f[b]|=p,f[b+1]|=p>>>8},h.H.I=function(f,m,p){p<<=7&m;const b=m>>>3;f[b]|=p,f[b+1]|=p>>>8,f[b+2]|=p>>>16},h.H.e=function(f,m,p){return(f[m>>>3]|f[1+(m>>>3)]<<8)>>>(7&m)&(1<<p)-1},h.H.b=function(f,m,p){return(f[m>>>3]|f[1+(m>>>3)]<<8|f[2+(m>>>3)]<<16)>>>(7&m)&(1<<p)-1},h.H.Z=function(f,m){return(f[m>>>3]|f[1+(m>>>3)]<<8|f[2+(m>>>3)]<<16)>>>(7&m)},h.H.i=function(f,m){return(f[m>>>3]|f[1+(m>>>3)]<<8|f[2+(m>>>3)]<<16|f[3+(m>>>3)]<<24)>>>(7&m)},h.H.m=function(){const f=Uint16Array,m=Uint32Array;return{K:new f(16),j:new f(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new f(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new m(32),J:new f(512),_:[],h:new f(32),$:[],w:new f(32768),C:[],v:[],d:new f(32768),D:[],u:new f(512),Q:[],r:new f(32768),s:new m(286),Y:new m(30),a:new m(19),t:new m(15e3),k:new f(65536),g:new f(32768)}}(),function(){const f=h.H.m;for(var m=0;m<32768;m++){let b=m;b=(2863311530&b)>>>1|(1431655765&b)<<1,b=(3435973836&b)>>>2|(858993459&b)<<2,b=(4042322160&b)>>>4|(252645135&b)<<4,b=(4278255360&b)>>>8|(16711935&b)<<8,f.r[m]=(b>>>16|b<<16)>>>17}function p(b,x,I){for(;x--!=0;)b.push(0,I)}for(m=0;m<32;m++)f.q[m]=f.S[m]<<3|f.T[m],f.c[m]=f.p[m]<<4|f.z[m];p(f._,144,8),p(f._,112,9),p(f._,24,7),p(f._,8,8),h.H.n(f._,9),h.H.A(f._,9,f.J),h.H.l(f._,9),p(f.$,32,5),h.H.n(f.$,5),h.H.A(f.$,5,f.h),h.H.l(f.$,5),p(f.Q,19,0),p(f.C,286,0),p(f.D,30,0),p(f.v,320,0)}(),h.H.N}();function s(h){return[1,null,3,1,2,null,4][h.ctype]*h.depth}function o(h,f,m,p,b){let x=s(f);const I=Math.ceil(p*x/8);let _,E;x=Math.ceil(x/8);let C=h[m],O=0;if(C>1&&(h[m]=[0,0,1][C-2]),C==3)for(O=x;O<I;O++)h[O+1]=h[O+1]+(h[O+1-x]>>>1)&255;for(let K=0;K<b;K++)if(_=m+K*I,E=_+K+1,C=h[E-1],O=0,C==0)for(;O<I;O++)h[_+O]=h[E+O];else if(C==1){for(;O<x;O++)h[_+O]=h[E+O];for(;O<I;O++)h[_+O]=h[E+O]+h[_+O-x]}else if(C==2)for(;O<I;O++)h[_+O]=h[E+O]+h[_+O-I];else if(C==3){for(;O<x;O++)h[_+O]=h[E+O]+(h[_+O-I]>>>1);for(;O<I;O++)h[_+O]=h[E+O]+(h[_+O-I]+h[_+O-x]>>>1)}else{for(;O<x;O++)h[_+O]=h[E+O]+a(0,h[_+O-I],0);for(;O<I;O++)h[_+O]=h[E+O]+a(h[_+O-x],h[_+O-I],h[_+O-x-I])}return h}function a(h,f,m){const p=h+f-m,b=p-h,x=p-f,I=p-m;return b*b<=x*x&&b*b<=I*I?h:x*x<=I*I?f:m}function l(h,f,m){m.width=t.readUint(h,f),f+=4,m.height=t.readUint(h,f),f+=4,m.depth=h[f],f++,m.ctype=h[f],f++,m.compress=h[f],f++,m.filter=h[f],f++,m.interlace=h[f],f++}function u(h,f,m,p,b,x,I,_,E){const C=Math.min(f,b),O=Math.min(m,x);let K=0,B=0;for(let Q=0;Q<O;Q++)for(let F=0;F<C;F++)if(I>=0&&_>=0?(K=Q*f+F<<2,B=(_+Q)*b+I+F<<2):(K=(-_+Q)*f-I+F<<2,B=Q*b+F<<2),E==0)p[B]=h[K],p[B+1]=h[K+1],p[B+2]=h[K+2],p[B+3]=h[K+3];else if(E==1){var L=h[K+3]*.00392156862745098,y=h[K]*L,S=h[K+1]*L,R=h[K+2]*L,N=p[B+3]*(1/255),T=p[B]*N,P=p[B+1]*N,U=p[B+2]*N;const V=1-L,G=L+N*V,ee=G==0?0:1/G;p[B+3]=255*G,p[B+0]=(y+T*V)*ee,p[B+1]=(S+P*V)*ee,p[B+2]=(R+U*V)*ee}else if(E==2)L=h[K+3],y=h[K],S=h[K+1],R=h[K+2],N=p[B+3],T=p[B],P=p[B+1],U=p[B+2],L==N&&y==T&&S==P&&R==U?(p[B]=0,p[B+1]=0,p[B+2]=0,p[B+3]=0):(p[B]=y,p[B+1]=S,p[B+2]=R,p[B+3]=L);else if(E==3){if(L=h[K+3],y=h[K],S=h[K+1],R=h[K+2],N=p[B+3],T=p[B],P=p[B+1],U=p[B+2],L==N&&y==T&&S==P&&R==U)continue;if(L<220&&N>20)return!1}return!0}return{decode:function(f){const m=new Uint8Array(f);let p=8;const b=t,x=b.readUshort,I=b.readUint,_={tabs:{},frames:[]},E=new Uint8Array(m.length);let C,O=0,K=0;const B=[137,80,78,71,13,10,26,10];for(var L=0;L<8;L++)if(m[L]!=B[L])throw"The input is not a PNG file!";for(;p<m.length;){const Q=b.readUint(m,p);p+=4;const F=b.readASCII(m,p,4);if(p+=4,F=="IHDR")l(m,p,_);else if(F=="iCCP"){for(var y=p;m[y]!=0;)y++;b.readASCII(m,p,y-p),m[y+1];const V=m.slice(y+2,p+Q);let G=null;try{G=r(V)}catch{G=i(V)}_.tabs[F]=G}else if(F=="CgBI")_.tabs[F]=m.slice(p,p+4);else if(F=="IDAT"){for(L=0;L<Q;L++)E[O+L]=m[p+L];O+=Q}else if(F=="acTL")_.tabs[F]={num_frames:I(m,p),num_plays:I(m,p+4)},C=new Uint8Array(m.length);else if(F=="fcTL"){K!=0&&((U=_.frames[_.frames.length-1]).data=n(_,C.slice(0,K),U.rect.width,U.rect.height),K=0);const V={x:I(m,p+12),y:I(m,p+16),width:I(m,p+4),height:I(m,p+8)};let G=x(m,p+22);G=x(m,p+20)/(G==0?100:G);const ee={rect:V,delay:Math.round(1e3*G),dispose:m[p+24],blend:m[p+25]};_.frames.push(ee)}else if(F=="fdAT"){for(L=0;L<Q-4;L++)C[K+L]=m[p+L+4];K+=Q-4}else if(F=="pHYs")_.tabs[F]=[b.readUint(m,p),b.readUint(m,p+4),m[p+8]];else if(F=="cHRM")for(_.tabs[F]=[],L=0;L<8;L++)_.tabs[F].push(b.readUint(m,p+4*L));else if(F=="tEXt"||F=="zTXt"){_.tabs[F]==null&&(_.tabs[F]={});var S=b.nextZero(m,p),R=b.readASCII(m,p,S-p),N=p+Q-S-1;if(F=="tEXt")P=b.readASCII(m,S+1,N);else{var T=r(m.slice(S+2,S+2+N));P=b.readUTF8(T,0,T.length)}_.tabs[F][R]=P}else if(F=="iTXt"){_.tabs[F]==null&&(_.tabs[F]={}),S=0,y=p,S=b.nextZero(m,y),R=b.readASCII(m,y,S-y);const V=m[y=S+1];var P;m[y+1],y+=2,S=b.nextZero(m,y),b.readASCII(m,y,S-y),y=S+1,S=b.nextZero(m,y),b.readUTF8(m,y,S-y),N=Q-((y=S+1)-p),V==0?P=b.readUTF8(m,y,N):(T=r(m.slice(y,y+N)),P=b.readUTF8(T,0,T.length)),_.tabs[F][R]=P}else if(F=="PLTE")_.tabs[F]=b.readBytes(m,p,Q);else if(F=="hIST"){const V=_.tabs.PLTE.length/3;for(_.tabs[F]=[],L=0;L<V;L++)_.tabs[F].push(x(m,p+2*L))}else if(F=="tRNS")_.ctype==3?_.tabs[F]=b.readBytes(m,p,Q):_.ctype==0?_.tabs[F]=x(m,p):_.ctype==2&&(_.tabs[F]=[x(m,p),x(m,p+2),x(m,p+4)]);else if(F=="gAMA")_.tabs[F]=b.readUint(m,p)/1e5;else if(F=="sRGB")_.tabs[F]=m[p];else if(F=="bKGD")_.ctype==0||_.ctype==4?_.tabs[F]=[x(m,p)]:_.ctype==2||_.ctype==6?_.tabs[F]=[x(m,p),x(m,p+2),x(m,p+4)]:_.ctype==3&&(_.tabs[F]=m[p]);else if(F=="IEND")break;p+=Q,b.readUint(m,p),p+=4}var U;return K!=0&&((U=_.frames[_.frames.length-1]).data=n(_,C.slice(0,K),U.rect.width,U.rect.height)),_.data=n(_,E,_.width,_.height),delete _.compress,delete _.interlace,delete _.filter,_},toRGBA8:function(f){const m=f.width,p=f.height;if(f.tabs.acTL==null)return[e(f.data,m,p,f).buffer];const b=[];f.frames[0].data==null&&(f.frames[0].data=f.data);const x=m*p*4,I=new Uint8Array(x),_=new Uint8Array(x),E=new Uint8Array(x);for(let O=0;O<f.frames.length;O++){const K=f.frames[O],B=K.rect.x,L=K.rect.y,y=K.rect.width,S=K.rect.height,R=e(K.data,y,S,f);if(O!=0)for(var C=0;C<x;C++)E[C]=I[C];if(K.blend==0?u(R,y,S,I,m,p,B,L,0):K.blend==1&&u(R,y,S,I,m,p,B,L,1),b.push(I.buffer.slice(0)),K.dispose!=0){if(K.dispose==1)u(_,y,S,I,m,p,B,L,0);else if(K.dispose==2)for(C=0;C<x;C++)I[C]=E[C]}}return b},_paeth:a,_copyTile:u,_bin:t}}();(function(){const{_copyTile:t}=rs,{_bin:e}=rs,n=rs._paeth;var r={table:function(){const y=new Uint32Array(256);for(let S=0;S<256;S++){let R=S;for(let N=0;N<8;N++)1&R?R=3988292384^R>>>1:R>>>=1;y[S]=R}return y}(),update(y,S,R,N){for(let T=0;T<N;T++)y=r.table[255&(y^S[R+T])]^y>>>8;return y},crc:(y,S,R)=>4294967295^r.update(4294967295,y,S,R)};function i(y,S,R,N){S[R]+=y[0]*N>>4,S[R+1]+=y[1]*N>>4,S[R+2]+=y[2]*N>>4,S[R+3]+=y[3]*N>>4}function s(y){return Math.max(0,Math.min(255,y))}function o(y,S){const R=y[0]-S[0],N=y[1]-S[1],T=y[2]-S[2],P=y[3]-S[3];return R*R+N*N+T*T+P*P}function a(y,S,R,N,T,P,U){U==null&&(U=1);const Q=N.length,F=[];for(var V=0;V<Q;V++){const H=N[V];F.push([H>>>0&255,H>>>8&255,H>>>16&255,H>>>24&255])}for(V=0;V<Q;V++){let H=4294967295;for(var G=0,ee=0;ee<Q;ee++){var ie=o(F[V],F[ee]);ee!=V&&ie<H&&(H=ie,G=ee)}}const be=new Uint32Array(T.buffer),M=new Int16Array(S*R*4),Y=[0,8,2,10,12,4,14,6,3,11,1,9,15,7,13,5];for(V=0;V<Y.length;V++)Y[V]=255*((Y[V]+.5)/16-.5);for(let H=0;H<R;H++)for(let oe=0;oe<S;oe++){var X;V=4*(H*S+oe),U!=2?X=[s(y[V]+M[V]),s(y[V+1]+M[V+1]),s(y[V+2]+M[V+2]),s(y[V+3]+M[V+3])]:(ie=Y[4*(3&H)+(3&oe)],X=[s(y[V]+ie),s(y[V+1]+ie),s(y[V+2]+ie),s(y[V+3]+ie)]),G=0;let ne=16777215;for(ee=0;ee<Q;ee++){const Ee=o(X,F[ee]);Ee<ne&&(ne=Ee,G=ee)}const ue=F[G],he=[X[0]-ue[0],X[1]-ue[1],X[2]-ue[2],X[3]-ue[3]];U==1&&(oe!=S-1&&i(he,M,V+4,7),H!=R-1&&(oe!=0&&i(he,M,V+4*S-4,3),i(he,M,V+4*S,5),oe!=S-1&&i(he,M,V+4*S+4,1))),P[V>>2]=G,be[V>>2]=N[G]}}function l(y,S,R,N,T){T==null&&(T={});const{crc:P}=r,U=e.writeUint,Q=e.writeUshort,F=e.writeASCII;let V=8;const G=y.frames.length>1;let ee,ie=!1,be=33+(G?20:0);if(T.sRGB!=null&&(be+=13),T.pHYs!=null&&(be+=21),T.iCCP!=null&&(ee=pako.deflate(T.iCCP),be+=21+ee.length+4),y.ctype==3){for(var M=y.plte.length,Y=0;Y<M;Y++)y.plte[Y]>>>24!=255&&(ie=!0);be+=8+3*M+4+(ie?8+1*M+4:0)}for(var X=0;X<y.frames.length;X++)G&&(be+=38),be+=(ue=y.frames[X]).cimg.length+12,X!=0&&(be+=4);be+=12;const H=new Uint8Array(be),oe=[137,80,78,71,13,10,26,10];for(Y=0;Y<8;Y++)H[Y]=oe[Y];if(U(H,V,13),V+=4,F(H,V,"IHDR"),V+=4,U(H,V,S),V+=4,U(H,V,R),V+=4,H[V]=y.depth,V++,H[V]=y.ctype,V++,H[V]=0,V++,H[V]=0,V++,H[V]=0,V++,U(H,V,P(H,V-17,17)),V+=4,T.sRGB!=null&&(U(H,V,1),V+=4,F(H,V,"sRGB"),V+=4,H[V]=T.sRGB,V++,U(H,V,P(H,V-5,5)),V+=4),T.iCCP!=null){const he=13+ee.length;U(H,V,he),V+=4,F(H,V,"iCCP"),V+=4,F(H,V,"ICC profile"),V+=11,V+=2,H.set(ee,V),V+=ee.length,U(H,V,P(H,V-(he+4),he+4)),V+=4}if(T.pHYs!=null&&(U(H,V,9),V+=4,F(H,V,"pHYs"),V+=4,U(H,V,T.pHYs[0]),V+=4,U(H,V,T.pHYs[1]),V+=4,H[V]=T.pHYs[2],V++,U(H,V,P(H,V-13,13)),V+=4),G&&(U(H,V,8),V+=4,F(H,V,"acTL"),V+=4,U(H,V,y.frames.length),V+=4,U(H,V,T.loop!=null?T.loop:0),V+=4,U(H,V,P(H,V-12,12)),V+=4),y.ctype==3){for(U(H,V,3*(M=y.plte.length)),V+=4,F(H,V,"PLTE"),V+=4,Y=0;Y<M;Y++){const he=3*Y,Ee=y.plte[Y],Ne=255&Ee,je=Ee>>>8&255,Ue=Ee>>>16&255;H[V+he+0]=Ne,H[V+he+1]=je,H[V+he+2]=Ue}if(V+=3*M,U(H,V,P(H,V-3*M-4,3*M+4)),V+=4,ie){for(U(H,V,M),V+=4,F(H,V,"tRNS"),V+=4,Y=0;Y<M;Y++)H[V+Y]=y.plte[Y]>>>24&255;V+=M,U(H,V,P(H,V-M-4,M+4)),V+=4}}let ne=0;for(X=0;X<y.frames.length;X++){var ue=y.frames[X];G&&(U(H,V,26),V+=4,F(H,V,"fcTL"),V+=4,U(H,V,ne++),V+=4,U(H,V,ue.rect.width),V+=4,U(H,V,ue.rect.height),V+=4,U(H,V,ue.rect.x),V+=4,U(H,V,ue.rect.y),V+=4,Q(H,V,N[X]),V+=2,Q(H,V,1e3),V+=2,H[V]=ue.dispose,V++,H[V]=ue.blend,V++,U(H,V,P(H,V-30,30)),V+=4);const he=ue.cimg;U(H,V,(M=he.length)+(X==0?0:4)),V+=4;const Ee=V;F(H,V,X==0?"IDAT":"fdAT"),V+=4,X!=0&&(U(H,V,ne++),V+=4),H.set(he,V),V+=M,U(H,V,P(H,Ee,V-Ee)),V+=4}return U(H,V,0),V+=4,F(H,V,"IEND"),V+=4,U(H,V,P(H,V-4,4)),V+=4,H.buffer}function u(y,S,R){for(let N=0;N<y.frames.length;N++){const T=y.frames[N];T.rect.width;const P=T.rect.height,U=new Uint8Array(P*T.bpl+P);T.cimg=p(T.img,P,T.bpp,T.bpl,U,S,R)}}function h(y,S,R,N,T){const P=T[0],U=T[1],Q=T[2],F=T[3],V=T[4],G=T[5];let ee=6,ie=8,be=255;for(var M=0;M<y.length;M++){const ae=new Uint8Array(y[M]);for(var Y=ae.length,X=0;X<Y;X+=4)be&=ae[X+3]}const H=be!=255,oe=function(ye,Re,Te,Me,Be,ze){const He=[];for(var Qe=0;Qe<ye.length;Qe++){const at=new Uint8Array(ye[Qe]),$e=new Uint32Array(at.buffer);var st;let Lt=0,vt=0,sn=Re,At=Te,Bt=Me?1:0;if(Qe!=0){const Hr=ze||Me||Qe==1||He[Qe-2].dispose!=0?1:2;let It=0,ui=1e9;for(let Ut=0;Ut<Hr;Ut++){var tt=new Uint8Array(ye[Qe-1-Ut]);const Hn=new Uint32Array(ye[Qe-1-Ut]);let xn=Re,Rt=Te,it=-1,Et=-1;for(let Yt=0;Yt<Te;Yt++)for(let fn=0;fn<Re;fn++)$e[ht=Yt*Re+fn]!=Hn[ht]&&(fn<xn&&(xn=fn),fn>it&&(it=fn),Yt<Rt&&(Rt=Yt),Yt>Et&&(Et=Yt));it==-1&&(xn=Rt=it=Et=0),Be&&((1&xn)==1&&xn--,(1&Rt)==1&&Rt--);const Lr=(it-xn+1)*(Et-Rt+1);Lr<ui&&(ui=Lr,It=Ut,Lt=xn,vt=Rt,sn=it-xn+1,At=Et-Rt+1)}tt=new Uint8Array(ye[Qe-1-It]),It==1&&(He[Qe-1].dispose=2),st=new Uint8Array(sn*At*4),t(tt,Re,Te,st,sn,At,-Lt,-vt,0),Bt=t(at,Re,Te,st,sn,At,-Lt,-vt,3)?1:0,Bt==1?m(at,Re,Te,st,{x:Lt,y:vt,width:sn,height:At}):t(at,Re,Te,st,sn,At,-Lt,-vt,0)}else st=at.slice(0);He.push({rect:{x:Lt,y:vt,width:sn,height:At},img:st,blend:Bt,dispose:0})}if(Me)for(Qe=0;Qe<He.length;Qe++){if((ot=He[Qe]).blend==1)continue;const at=ot.rect,$e=He[Qe-1].rect,Lt=Math.min(at.x,$e.x),vt=Math.min(at.y,$e.y),sn={x:Lt,y:vt,width:Math.max(at.x+at.width,$e.x+$e.width)-Lt,height:Math.max(at.y+at.height,$e.y+$e.height)-vt};He[Qe-1].dispose=1,Qe-1!=0&&f(ye,Re,Te,He,Qe-1,sn,Be),f(ye,Re,Te,He,Qe,sn,Be)}let lt=0;if(ye.length!=1)for(var ht=0;ht<He.length;ht++){var ot;lt+=(ot=He[ht]).rect.width*ot.rect.height}return He}(y,S,R,P,U,Q),ne={},ue=[],he=[];if(N!=0){const ae=[];for(X=0;X<oe.length;X++)ae.push(oe[X].img.buffer);const ye=function(Be){let ze=0;for(var He=0;He<Be.length;He++)ze+=Be[He].byteLength;const Qe=new Uint8Array(ze);let st=0;for(He=0;He<Be.length;He++){const tt=new Uint8Array(Be[He]),lt=tt.length;for(let ht=0;ht<lt;ht+=4){let ot=tt[ht],at=tt[ht+1],$e=tt[ht+2];const Lt=tt[ht+3];Lt==0&&(ot=at=$e=0),Qe[st+ht]=ot,Qe[st+ht+1]=at,Qe[st+ht+2]=$e,Qe[st+ht+3]=Lt}st+=lt}return Qe.buffer}(ae),Re=x(ye,N);for(X=0;X<Re.plte.length;X++)ue.push(Re.plte[X].est.rgba);let Te=0;for(X=0;X<oe.length;X++){const Me=(Ne=oe[X]).img.length;var Ee=new Uint8Array(Re.inds.buffer,Te>>2,Me>>2);he.push(Ee);const Be=new Uint8Array(Re.abuf,Te,Me);G&&a(Ne.img,Ne.rect.width,Ne.rect.height,ue,Be,Ee),Ne.img.set(Be),Te+=Me}}else for(M=0;M<oe.length;M++){var Ne=oe[M];const ae=new Uint32Array(Ne.img.buffer);var je=Ne.rect.width;for(Y=ae.length,Ee=new Uint8Array(Y),he.push(Ee),X=0;X<Y;X++){const ye=ae[X];if(X!=0&&ye==ae[X-1])Ee[X]=Ee[X-1];else if(X>je&&ye==ae[X-je])Ee[X]=Ee[X-je];else{let Re=ne[ye];if(Re==null&&(ne[ye]=Re=ue.length,ue.push(ye),ue.length>=300))break;Ee[X]=Re}}}const Ue=ue.length;for(Ue<=256&&V==0&&(ie=Ue<=2?1:Ue<=4?2:Ue<=16?4:8,ie=Math.max(ie,F)),M=0;M<oe.length;M++){(Ne=oe[M]).rect.x,Ne.rect.y,je=Ne.rect.width;const ae=Ne.rect.height;let ye=Ne.img;new Uint32Array(ye.buffer);let Re=4*je,Te=4;if(Ue<=256&&V==0){Re=Math.ceil(ie*je/8);var Ye=new Uint8Array(Re*ae);const Me=he[M];for(let Be=0;Be<ae;Be++){X=Be*Re;const ze=Be*je;if(ie==8)for(var Se=0;Se<je;Se++)Ye[X+Se]=Me[ze+Se];else if(ie==4)for(Se=0;Se<je;Se++)Ye[X+(Se>>1)]|=Me[ze+Se]<<4-4*(1&Se);else if(ie==2)for(Se=0;Se<je;Se++)Ye[X+(Se>>2)]|=Me[ze+Se]<<6-2*(3&Se);else if(ie==1)for(Se=0;Se<je;Se++)Ye[X+(Se>>3)]|=Me[ze+Se]<<7-1*(7&Se)}ye=Ye,ee=3,Te=1}else if(H==0&&oe.length==1){Ye=new Uint8Array(je*ae*3);const Me=je*ae;for(X=0;X<Me;X++){const Be=3*X,ze=4*X;Ye[Be]=ye[ze],Ye[Be+1]=ye[ze+1],Ye[Be+2]=ye[ze+2]}ye=Ye,ee=2,Te=3,Re=3*je}Ne.img=ye,Ne.bpl=Re,Ne.bpp=Te}return{ctype:ee,depth:ie,plte:ue,frames:oe}}function f(y,S,R,N,T,P,U){const Q=Uint8Array,F=Uint32Array,V=new Q(y[T-1]),G=new F(y[T-1]),ee=T+1<y.length?new Q(y[T+1]):null,ie=new Q(y[T]),be=new F(ie.buffer);let M=S,Y=R,X=-1,H=-1;for(let ne=0;ne<P.height;ne++)for(let ue=0;ue<P.width;ue++){const he=P.x+ue,Ee=P.y+ne,Ne=Ee*S+he,je=be[Ne];je==0||N[T-1].dispose==0&&G[Ne]==je&&(ee==null||ee[4*Ne+3]!=0)||(he<M&&(M=he),he>X&&(X=he),Ee<Y&&(Y=Ee),Ee>H&&(H=Ee))}X==-1&&(M=Y=X=H=0),U&&((1&M)==1&&M--,(1&Y)==1&&Y--),P={x:M,y:Y,width:X-M+1,height:H-Y+1};const oe=N[T];oe.rect=P,oe.blend=1,oe.img=new Uint8Array(P.width*P.height*4),N[T-1].dispose==0?(t(V,S,R,oe.img,P.width,P.height,-P.x,-P.y,0),m(ie,S,R,oe.img,P)):t(ie,S,R,oe.img,P.width,P.height,-P.x,-P.y,0)}function m(y,S,R,N,T){t(y,S,R,N,T.width,T.height,-T.x,-T.y,2)}function p(y,S,R,N,T,P,U){const Q=[];let F,V=[0,1,2,3,4];P!=-1?V=[P]:(S*N>5e5||R==1)&&(V=[0]),U&&(F={level:0});const G=pO;for(var ee=0;ee<V.length;ee++){for(let M=0;M<S;M++)b(T,y,M,N,R,V[ee]);Q.push(G.deflate(T,F))}let ie,be=1e9;for(ee=0;ee<Q.length;ee++)Q[ee].length<be&&(ie=ee,be=Q[ee].length);return Q[ie]}function b(y,S,R,N,T,P){const U=R*N;let Q=U+R;if(y[Q]=P,Q++,P==0)if(N<500)for(var F=0;F<N;F++)y[Q+F]=S[U+F];else y.set(new Uint8Array(S.buffer,U,N),Q);else if(P==1){for(F=0;F<T;F++)y[Q+F]=S[U+F];for(F=T;F<N;F++)y[Q+F]=S[U+F]-S[U+F-T]+256&255}else if(R==0){for(F=0;F<T;F++)y[Q+F]=S[U+F];if(P==2)for(F=T;F<N;F++)y[Q+F]=S[U+F];if(P==3)for(F=T;F<N;F++)y[Q+F]=S[U+F]-(S[U+F-T]>>1)+256&255;if(P==4)for(F=T;F<N;F++)y[Q+F]=S[U+F]-n(S[U+F-T],0,0)+256&255}else{if(P==2)for(F=0;F<N;F++)y[Q+F]=S[U+F]+256-S[U+F-N]&255;if(P==3){for(F=0;F<T;F++)y[Q+F]=S[U+F]+256-(S[U+F-N]>>1)&255;for(F=T;F<N;F++)y[Q+F]=S[U+F]+256-(S[U+F-N]+S[U+F-T]>>1)&255}if(P==4){for(F=0;F<T;F++)y[Q+F]=S[U+F]+256-n(0,S[U+F-N],0)&255;for(F=T;F<N;F++)y[Q+F]=S[U+F]+256-n(S[U+F-T],S[U+F-N],S[U+F-T-N])&255}}}function x(y,S){const R=new Uint8Array(y),N=R.slice(0),T=new Uint32Array(N.buffer),P=I(N,S),U=P[0],Q=P[1],F=R.length,V=new Uint8Array(F>>2);let G;if(R.length<2e7)for(var ee=0;ee<F;ee+=4)G=_(U,ie=R[ee]*(1/255),be=R[ee+1]*(1/255),M=R[ee+2]*(1/255),Y=R[ee+3]*(1/255)),V[ee>>2]=G.ind,T[ee>>2]=G.est.rgba;else for(ee=0;ee<F;ee+=4){var ie=R[ee]*.00392156862745098,be=R[ee+1]*(1/255),M=R[ee+2]*(1/255),Y=R[ee+3]*(1/255);for(G=U;G.left;)G=E(G.est,ie,be,M,Y)<=0?G.left:G.right;V[ee>>2]=G.ind,T[ee>>2]=G.est.rgba}return{abuf:N.buffer,inds:V,plte:Q}}function I(y,S,R){R==null&&(R=1e-4);const N=new Uint32Array(y.buffer),T={i0:0,i1:y.length,bst:null,est:null,tdst:0,left:null,right:null};T.bst=K(y,T.i0,T.i1),T.est=B(T.bst);const P=[T];for(;P.length<S;){let Q=0,F=0;for(var U=0;U<P.length;U++)P[U].est.L>Q&&(Q=P[U].est.L,F=U);if(Q<R)break;const V=P[F],G=C(y,N,V.i0,V.i1,V.est.e,V.est.eMq255);if(V.i0>=G||V.i1<=G){V.est.L=0;continue}const ee={i0:V.i0,i1:G,bst:null,est:null,tdst:0,left:null,right:null};ee.bst=K(y,ee.i0,ee.i1),ee.est=B(ee.bst);const ie={i0:G,i1:V.i1,bst:null,est:null,tdst:0,left:null,right:null};for(ie.bst={R:[],m:[],N:V.bst.N-ee.bst.N},U=0;U<16;U++)ie.bst.R[U]=V.bst.R[U]-ee.bst.R[U];for(U=0;U<4;U++)ie.bst.m[U]=V.bst.m[U]-ee.bst.m[U];ie.est=B(ie.bst),V.left=ee,V.right=ie,P[F]=ee,P.push(ie)}for(P.sort((Q,F)=>F.bst.N-Q.bst.N),U=0;U<P.length;U++)P[U].ind=U;return[T,P]}function _(y,S,R,N,T){if(y.left==null)return y.tdst=function(ee,ie,be,M,Y){const X=ie-ee[0],H=be-ee[1],oe=M-ee[2],ne=Y-ee[3];return X*X+H*H+oe*oe+ne*ne}(y.est.q,S,R,N,T),y;const P=E(y.est,S,R,N,T);let U=y.left,Q=y.right;P>0&&(U=y.right,Q=y.left);const F=_(U,S,R,N,T);if(F.tdst<=P*P)return F;const V=_(Q,S,R,N,T);return V.tdst<F.tdst?V:F}function E(y,S,R,N,T){const{e:P}=y;return P[0]*S+P[1]*R+P[2]*N+P[3]*T-y.eMq}function C(y,S,R,N,T,P){for(N-=4;R<N;){for(;O(y,R,T)<=P;)R+=4;for(;O(y,N,T)>P;)N-=4;if(R>=N)break;const U=S[R>>2];S[R>>2]=S[N>>2],S[N>>2]=U,R+=4,N-=4}for(;O(y,R,T)>P;)R-=4;return R+4}function O(y,S,R){return y[S]*R[0]+y[S+1]*R[1]+y[S+2]*R[2]+y[S+3]*R[3]}function K(y,S,R){const N=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],T=[0,0,0,0],P=R-S>>2;for(let U=S;U<R;U+=4){const Q=y[U]*.00392156862745098,F=y[U+1]*(1/255),V=y[U+2]*(1/255),G=y[U+3]*(1/255);T[0]+=Q,T[1]+=F,T[2]+=V,T[3]+=G,N[0]+=Q*Q,N[1]+=Q*F,N[2]+=Q*V,N[3]+=Q*G,N[5]+=F*F,N[6]+=F*V,N[7]+=F*G,N[10]+=V*V,N[11]+=V*G,N[15]+=G*G}return N[4]=N[1],N[8]=N[2],N[9]=N[6],N[12]=N[3],N[13]=N[7],N[14]=N[11],{R:N,m:T,N:P}}function B(y){const{R:S}=y,{m:R}=y,{N}=y,T=R[0],P=R[1],U=R[2],Q=R[3],F=N==0?0:1/N,V=[S[0]-T*T*F,S[1]-T*P*F,S[2]-T*U*F,S[3]-T*Q*F,S[4]-P*T*F,S[5]-P*P*F,S[6]-P*U*F,S[7]-P*Q*F,S[8]-U*T*F,S[9]-U*P*F,S[10]-U*U*F,S[11]-U*Q*F,S[12]-Q*T*F,S[13]-Q*P*F,S[14]-Q*U*F,S[15]-Q*Q*F],G=V,ee=L;let ie=[Math.random(),Math.random(),Math.random(),Math.random()],be=0,M=0;if(N!=0)for(let X=0;X<16&&(ie=ee.multVec(G,ie),M=Math.sqrt(ee.dot(ie,ie)),ie=ee.sml(1/M,ie),!(X!=0&&Math.abs(M-be)<1e-9));X++)be=M;const Y=[T*F,P*F,U*F,Q*F];return{Cov:V,q:Y,e:ie,L:be,eMq255:ee.dot(ee.sml(255,Y),ie),eMq:ee.dot(ie,Y),rgba:(Math.round(255*Y[3])<<24|Math.round(255*Y[2])<<16|Math.round(255*Y[1])<<8|Math.round(255*Y[0])<<0)>>>0}}var L={multVec:(y,S)=>[y[0]*S[0]+y[1]*S[1]+y[2]*S[2]+y[3]*S[3],y[4]*S[0]+y[5]*S[1]+y[6]*S[2]+y[7]*S[3],y[8]*S[0]+y[9]*S[1]+y[10]*S[2]+y[11]*S[3],y[12]*S[0]+y[13]*S[1]+y[14]*S[2]+y[15]*S[3]],dot:(y,S)=>y[0]*S[0]+y[1]*S[1]+y[2]*S[2]+y[3]*S[3],sml:(y,S)=>[y*S[0],y*S[1],y*S[2],y*S[3]]};rs.encode=function(S,R,N,T,P,U,Q){T==null&&(T=0),Q==null&&(Q=!1);const F=h(S,R,N,T,[!1,!1,!1,0,Q,!1]);return u(F,-1),l(F,R,N,P,U)},rs.encodeLL=function(S,R,N,T,P,U,Q,F){const V={ctype:0+(T==1?0:2)+(P==0?0:4),depth:U,frames:[]},G=(T+P)*U,ee=G*R;for(let ie=0;ie<S.length;ie++)V.frames.push({rect:{x:0,y:0,width:R,height:N},img:new Uint8Array(S[ie]),blend:0,dispose:1,bpp:Math.ceil(G/8),bpl:Math.ceil(ee/8)});return u(V,0,!0),l(V,R,N,Q,F)},rs.encode.compress=h,rs.encode.dither=a,rs.quantize=x,rs.quantize.getKDtree=I,rs.quantize.getNearest=_})();const MA={toArrayBuffer(t,e){const n=t.width,r=t.height,i=n<<2,s=t.getContext("2d").getImageData(0,0,n,r),o=new Uint32Array(s.data.buffer),a=(32*n+31)/32<<2,l=a*r,u=122+l,h=new ArrayBuffer(u),f=new DataView(h),m=1<<20;let p,b,x,I,_=m,E=0,C=0,O=0;function K(y){f.setUint16(C,y,!0),C+=2}function B(y){f.setUint32(C,y,!0),C+=4}function L(y){C+=y}K(19778),B(u),L(4),B(122),B(108),B(n),B(-r>>>0),K(1),K(32),B(3),B(l),B(2835),B(2835),L(8),B(16711680),B(65280),B(255),B(4278190080),B(1466527264),function y(){for(;E<r&&_>0;){for(I=122+E*a,p=0;p<i;)_--,b=o[O++],x=b>>>24,f.setUint32(I+p,b<<8|x),p+=4;E++}O<o.length?(_=m,setTimeout(y,MA._dly)):e(h)}()},toBlob(t,e){this.toArrayBuffer(t,n=>{e(new Blob([n],{type:"image/bmp"}))})},_dly:9};var ni={CHROME:"CHROME",FIREFOX:"FIREFOX",DESKTOP_SAFARI:"DESKTOP_SAFARI",IE:"IE",IOS:"IOS",ETC:"ETC"},mO={[ni.CHROME]:16384,[ni.FIREFOX]:11180,[ni.DESKTOP_SAFARI]:16384,[ni.IE]:8192,[ni.IOS]:4096,[ni.ETC]:8192};const cy=typeof window<"u",UA=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,hm=cy&&window.cordova&&window.cordova.require&&window.cordova.require("cordova/modulemapper"),gO=(cy||UA)&&(hm&&hm.getOriginalSymbol(window,"File")||typeof File<"u"&&File),VA=(cy||UA)&&(hm&&hm.getOriginalSymbol(window,"FileReader")||typeof FileReader<"u"&&FileReader);function hy(t,e,n=Date.now()){return new Promise(r=>{const i=t.split(","),s=i[0].match(/:(.*?);/)[1],o=globalThis.atob(i[1]);let a=o.length;const l=new Uint8Array(a);for(;a--;)l[a]=o.charCodeAt(a);const u=new Blob([l],{type:s});u.name=e,u.lastModified=n,r(u)})}function BA(t){return new Promise((e,n)=>{const r=new VA;r.onload=()=>e(r.result),r.onerror=i=>n(i),r.readAsDataURL(t)})}function qA(t){return new Promise((e,n)=>{const r=new Image;r.onload=()=>e(r),r.onerror=i=>n(i),r.src=t})}function Ol(){if(Ol.cachedResult!==void 0)return Ol.cachedResult;let t=ni.ETC;const{userAgent:e}=navigator;return/Chrom(e|ium)/i.test(e)?t=ni.CHROME:/iP(ad|od|hone)/i.test(e)&&/WebKit/i.test(e)?t=ni.IOS:/Safari/i.test(e)?t=ni.DESKTOP_SAFARI:/Firefox/i.test(e)?t=ni.FIREFOX:(/MSIE/i.test(e)||document.documentMode)&&(t=ni.IE),Ol.cachedResult=t,Ol.cachedResult}function zA(t,e){const n=Ol(),r=mO[n];let i=t,s=e,o=i*s;const a=i>s?s/i:i/s;for(;o>r*r;){const l=(r+i)/2,u=(r+s)/2;l<u?(s=u,i=u*a):(s=l*a,i=l),o=i*s}return{width:i,height:s}}function ug(t,e){let n,r;try{if(n=new OffscreenCanvas(t,e),r=n.getContext("2d"),r===null)throw new Error("getContext of OffscreenCanvas returns null")}catch{n=document.createElement("canvas"),r=n.getContext("2d")}return n.width=t,n.height=e,[n,r]}function $A(t,e){const{width:n,height:r}=zA(t.width,t.height),[i,s]=ug(n,r);return e&&/jpe?g/.test(e)&&(s.fillStyle="white",s.fillRect(0,0,i.width,i.height)),s.drawImage(t,0,0,i.width,i.height),i}function gp(){return gp.cachedResult!==void 0||(gp.cachedResult=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&typeof document<"u"&&"ontouchend"in document),gp.cachedResult}function dm(t,e={}){return new Promise(function(n,r){let i,s;var o=function(){try{return s=$A(i,e.fileType||t.type),n([i,s])}catch(l){return r(l)}},a=function(l){try{var u=function(h){try{throw h}catch(f){return r(f)}};try{let h;return BA(t).then(function(f){try{return h=f,qA(h).then(function(m){try{return i=m,function(){try{return o()}catch(p){return r(p)}}()}catch(p){return u(p)}},u)}catch(m){return u(m)}},u)}catch(h){u(h)}}catch(h){return r(h)}};try{if(gp()||[ni.DESKTOP_SAFARI,ni.MOBILE_SAFARI].includes(Ol()))throw new Error("Skip createImageBitmap on IOS and Safari");return createImageBitmap(t).then(function(l){try{return i=l,o()}catch{return a()}},a)}catch{a()}})}function fm(t,e,n,r,i=1){return new Promise(function(s,o){let a;if(e==="image/png"){let u,h,f;return u=t.getContext("2d"),{data:h}=u.getImageData(0,0,t.width,t.height),f=rs.encode([h.buffer],t.width,t.height,4096*i),a=new Blob([f],{type:e}),a.name=n,a.lastModified=r,l.call(this)}{let u=function(){return l.call(this)};if(e==="image/bmp")return new Promise(h=>MA.toBlob(t,h)).then((function(h){try{return a=h,a.name=n,a.lastModified=r,u.call(this)}catch(f){return o(f)}}).bind(this),o);{let h=function(){return u.call(this)};if(typeof OffscreenCanvas=="function"&&t instanceof OffscreenCanvas)return t.convertToBlob({type:e,quality:i}).then((function(f){try{return a=f,a.name=n,a.lastModified=r,h.call(this)}catch(m){return o(m)}}).bind(this),o);{let f;return f=t.toDataURL(e,i),hy(f,n,r).then((function(m){try{return a=m,h.call(this)}catch(p){return o(p)}}).bind(this),o)}}}function l(){return s(a)}})}function js(t){t.width=0,t.height=0}function rc(){return new Promise(function(t,e){let n,r,i,s;return rc.cachedResult!==void 0?t(rc.cachedResult):hy("data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==","test.jpg",Date.now()).then(function(o){try{return n=o,dm(n).then(function(a){try{return r=a[1],fm(r,n.type,n.name,n.lastModified).then(function(l){try{return i=l,js(r),dm(i).then(function(u){try{return s=u[0],rc.cachedResult=s.width===1&&s.height===2,t(rc.cachedResult)}catch(h){return e(h)}},e)}catch(u){return e(u)}},e)}catch(l){return e(l)}},e)}catch(a){return e(a)}},e)})}function HA(t){return new Promise((e,n)=>{const r=new VA;r.onload=i=>{const s=new DataView(i.target.result);if(s.getUint16(0,!1)!=65496)return e(-2);const o=s.byteLength;let a=2;for(;a<o;){if(s.getUint16(a+2,!1)<=8)return e(-1);const l=s.getUint16(a,!1);if(a+=2,l==65505){if(s.getUint32(a+=2,!1)!=1165519206)return e(-1);const u=s.getUint16(a+=6,!1)==18761;a+=s.getUint32(a+4,u);const h=s.getUint16(a,u);a+=2;for(let f=0;f<h;f++)if(s.getUint16(a+12*f,u)==274)return e(s.getUint16(a+12*f+8,u))}else{if((65280&l)!=65280)break;a+=s.getUint16(a,!1)}}return e(-1)},r.onerror=i=>n(i),r.readAsArrayBuffer(t)})}function WA(t,e){const{width:n}=t,{height:r}=t,{maxWidthOrHeight:i}=e;let s,o=t;return isFinite(i)&&(n>i||r>i)&&([o,s]=ug(n,r),n>r?(o.width=i,o.height=r/n*i):(o.width=n/r*i,o.height=i),s.drawImage(t,0,0,o.width,o.height),js(t)),o}function GA(t,e){const{width:n}=t,{height:r}=t,[i,s]=ug(n,r);switch(e>4&&e<9?(i.width=r,i.height=n):(i.width=n,i.height=r),e){case 2:s.transform(-1,0,0,1,n,0);break;case 3:s.transform(-1,0,0,-1,n,r);break;case 4:s.transform(1,0,0,-1,0,r);break;case 5:s.transform(0,1,1,0,0,0);break;case 6:s.transform(0,1,-1,0,r,0);break;case 7:s.transform(0,-1,-1,0,r,n);break;case 8:s.transform(0,-1,1,0,0,n)}return s.drawImage(t,0,0,n,r),js(t),i}function Ww(t,e,n=0){return new Promise(function(r,i){let s,o,a,l,u,h,f,m,p,b,x,I,_,E,C,O,K,B,L,y;function S(N=5){if(e.signal&&e.signal.aborted)throw e.signal.reason;s+=N,e.onProgress(Math.min(s,100))}function R(N){if(e.signal&&e.signal.aborted)throw e.signal.reason;s=Math.min(Math.max(N,s),100),e.onProgress(s)}return s=n,o=e.maxIteration||10,a=1024*e.maxSizeMB*1024,S(),dm(t,e).then((function(N){try{return[,l]=N,S(),u=WA(l,e),S(),new Promise(function(T,P){var U;if(!(U=e.exifOrientation))return HA(t).then((function(F){try{return U=F,Q.call(this)}catch(V){return P(V)}}).bind(this),P);function Q(){return T(U)}return Q.call(this)}).then((function(T){try{return h=T,S(),rc().then((function(P){try{return f=P?u:GA(u,h),S(),m=e.initialQuality||1,p=e.fileType||t.type,fm(f,p,t.name,t.lastModified,m).then((function(U){try{{let F=function(){if(o--&&(C>a||C>_)){let G,ee;return G=y?.95*L.width:L.width,ee=y?.95*L.height:L.height,[K,B]=ug(G,ee),B.drawImage(L,0,0,G,ee),m*=p==="image/png"?.85:.95,fm(K,p,t.name,t.lastModified,m).then(function(ie){try{return O=ie,js(L),L=K,C=O.size,R(Math.min(99,Math.floor((E-C)/(E-a)*100))),F}catch(be){return i(be)}},i)}return[1]},V=function(){return js(L),js(K),js(u),js(f),js(l),R(100),r(O)};if(b=U,S(),x=b.size>a,I=b.size>t.size,!x&&!I)return R(100),r(b);var Q;return _=t.size,E=b.size,C=E,L=f,y=!e.alwaysKeepResolution&&x,(Q=(function(G){for(;G;){if(G.then)return void G.then(Q,i);try{if(G.pop){if(G.length)return G.pop()?V.call(this):G;G=F}else G=G.call(this)}catch(ee){return i(ee)}}}).bind(this))(F)}}catch(F){return i(F)}}).bind(this),i)}catch(U){return i(U)}}).bind(this),i)}catch(P){return i(P)}}).bind(this),i)}catch(T){return i(T)}}).bind(this),i)})}const vO=`
let scriptImported = false
self.addEventListener('message', async (e) => {
  const { file, id, imageCompressionLibUrl, options } = e.data
  options.onProgress = (progress) => self.postMessage({ progress, id })
  try {
    if (!scriptImported) {
      // console.log('[worker] importScripts', imageCompressionLibUrl)
      self.importScripts(imageCompressionLibUrl)
      scriptImported = true
    }
    // console.log('[worker] self', self)
    const compressedFile = await imageCompression(file, options)
    self.postMessage({ file: compressedFile, id })
  } catch (e) {
    // console.error('[worker] error', e)
    self.postMessage({ error: e.message + '\\n' + e.stack, id })
  }
})
`;let A1;function yO(t,e){return new Promise((n,r)=>{A1||(A1=function(o){const a=[];return a.push(o),URL.createObjectURL(new Blob(a))}(vO));const i=new Worker(A1);i.addEventListener("message",function(o){if(e.signal&&e.signal.aborted)i.terminate();else if(o.data.progress===void 0){if(o.data.error)return r(new Error(o.data.error)),void i.terminate();n(o.data.file),i.terminate()}else e.onProgress(o.data.progress)}),i.addEventListener("error",r),e.signal&&e.signal.addEventListener("abort",()=>{r(e.signal.reason),i.terminate()}),i.postMessage({file:t,imageCompressionLibUrl:e.libURL,options:{...e,onProgress:void 0,signal:void 0}})})}function lr(t,e){return new Promise(function(n,r){let i,s,o,a,l,u;if(i={...e},o=0,{onProgress:a}=i,i.maxSizeMB=i.maxSizeMB||Number.POSITIVE_INFINITY,l=typeof i.useWebWorker!="boolean"||i.useWebWorker,delete i.useWebWorker,i.onProgress=p=>{o=p,typeof a=="function"&&a(o)},!(t instanceof Blob||t instanceof gO))return r(new Error("The file given is not an instance of Blob or File"));if(!/^image/.test(t.type))return r(new Error("The file given is not an image"));if(u=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,!l||typeof Worker!="function"||u)return Ww(t,i).then((function(p){try{return s=p,m.call(this)}catch(b){return r(b)}}).bind(this),r);var h=(function(){try{return m.call(this)}catch(p){return r(p)}}).bind(this),f=function(p){try{return Ww(t,i).then(function(b){try{return s=b,h()}catch(x){return r(x)}},r)}catch(b){return r(b)}};try{return i.libURL=i.libURL||"https://cdn.jsdelivr.net/npm/browser-image-compression@2.0.2/dist/browser-image-compression.js",yO(t,i).then(function(p){try{return s=p,h()}catch{return f()}},f)}catch{f()}function m(){try{s.name=t.name,s.lastModified=t.lastModified}catch{}try{i.preserveExif&&t.type==="image/jpeg"&&(!i.fileType||i.fileType&&i.fileType===t.type)&&(s=FA(t,s))}catch{}return n(s)}})}lr.getDataUrlFromFile=BA,lr.getFilefromDataUrl=hy,lr.loadImage=qA,lr.drawImageInCanvas=$A,lr.drawFileInCanvas=dm,lr.canvasToFile=fm,lr.getExifOrientation=HA,lr.handleMaxWidthOrHeight=WA,lr.followExifOrientation=GA,lr.cleanupCanvasMemory=js,lr.isAutoOrientationInBrowser=rc,lr.approximateBelowMaximumCanvasSizeOfBrowser=zA,lr.copyExifWithoutOrientation=FA,lr.getBrowserName=Ol,lr.version="2.0.2";const _O={"image/jpeg":".jpg","image/jpg":".jpg","image/png":".png","application/pdf":".pdf","application/msword":".doc","application/vnd.openxmlformats-officedocument.wordprocessingml.document":".docx","application/vnd.ms-excel":".xls","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":".xlsx","text/plain":".txt","text/csv":".csv"},wO=t=>{if(t===0)return"0 Bytes";const e=1024,n=["Bytes","KB","MB","GB"],r=Math.floor(Math.log(t)/Math.log(e));return Math.round(t/Math.pow(e,r)*100)/100+" "+n[r]},dy=t=>_O[t]||"",bO=()=>`file_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,xO=t=>t.replace(/[^a-zA-Z0-9._-]/g,"_").replace(/_{2,}/g,"_").toLowerCase(),SO=(t,e,n,r)=>{const i=xO(t.name);dy(t.type)||`${t.name.split(".").pop()}`;const s=`${r}_${i}`,o=`projects/${e}/${n}/${s}`,a=ny(sy,o);return{uploadTask:tA(a,t,{contentType:t.type}),storagePath:o,filename:s}},AO=async(t,e,n,r)=>{if(!t)return null;const i="thumbnail",s=dy(t.type),o=`${r}_${i}${s}`,a=`projects/${e}/${n}/${o}`,l=ny(sy,a);try{return await tA(l,t),{thumbnailURL:await nA(l),thumbnailPath:a}}catch(u){return console.error("Thumbnail upload error:",u),null}},Gw=async t=>{try{const e=ny(sy,t);return await w7(e),{success:!0}}catch(e){return console.error("Storage delete error:",e),{success:!1,error:e.message}}},EO=async t=>{try{return{success:!0,fileId:(await sl(rr(Nt,"files"),{...t,uploadedAt:new Date().toISOString(),createdAt:new Date().toISOString()})).id}}catch(e){return console.error("Firestore save error:",e),{success:!1,error:e.message}}},NO=async t=>{try{const e=eg(rr(Nt,"files"),ng("sagsnummer","==",t)),n=await Qs(e),r=[];return n.forEach(i=>{r.push({id:i.id,...i.data()})}),{success:!0,files:r}}catch(e){return console.error("Firestore get files error:",e),{success:!1,error:e.message,files:[]}}},IO=(t,e)=>t.filter(n=>n.fileCategory===e),TO=async t=>{try{return await il(Tn(Nt,"files",t)),{success:!0}}catch(e){return console.error("Firestore delete error:",e),{success:!1,error:e.message}}},kO=async({file:t,thumbnail:e,sagsnummer:n,projectId:r,projectName:i,category:s,uploadedBy:o,uploadedByUID:a,originalSize:l,compressedSize:u,isCompressed:h,description:f="",onProgress:m})=>{const p=bO();try{const{uploadTask:b,storagePath:x,filename:I}=SO(t,n,s,p);return new Promise((_,E)=>{b.on("state_changed",C=>{const O=C.bytesTransferred/C.totalBytes*100;m&&m(O)},C=>{console.error("Upload error:",C),E({success:!1,error:C.message})},async()=>{try{const C=await nA(b.snapshot.ref);let O=null;e&&(O=await AO(e,n,s,p));const K={fileId:p,fileName:t.name,originalFileName:t.name,fileType:t.type,fileExtension:dy(t.type),fileCategory:s,fileSizeOriginal:l,fileSizeCompressed:u,isCompressed:h,compressionRatio:h?Math.round((1-u/l)*100)+"%":null,sagsnummer:n,projectId:r,projectName:i,fileURL:C,storagePath:x,thumbnailURL:(O==null?void 0:O.thumbnailURL)||null,thumbnailPath:(O==null?void 0:O.thumbnailPath)||null,uploadedBy:o,uploadedByUID:a,description:f.trim(),tags:[]},B=await EO(K);B.success?_({success:!0,fileId:B.fileId,fileData:{...K,id:B.fileId}}):E(B)}catch(C){E({success:!1,error:C.message})}})})}catch(b){return console.error("Upload process error:",b),{success:!1,error:b.message}}},PO=async t=>{try{return await Gw(t.storagePath),t.thumbnailPath&&await Gw(t.thumbnailPath),await TO(t.id),{success:!0}}catch(e){return console.error("Delete file error:",e),{success:!1,error:e.message}}};function CO({sagsnummer:t,projectId:e,projectName:n,uploadedBy:r,uploadedByUID:i,onUploadComplete:s}){const[o,a]=le.useState(!1),[l,u]=le.useState(0),[h,f]=le.useState(0),[m,p]=le.useState(!1),[b,x]=le.useState(null),[I,_]=le.useState(""),[E,C]=le.useState(""),O=le.useRef(null),{showSuccess:K,showError:B}=ps(),L=U=>{var F;const Q=(F=U.target.files)==null?void 0:F[0];Q&&(x(Q),C(""),p(!0))},y=U=>{var F;U.preventDefault();const Q=(F=U.dataTransfer.files)==null?void 0:F[0];Q&&(x(Q),C(""),p(!0))},S=U=>{U.preventDefault()},R=U=>{_(U)},N=async()=>{if(!I){B("Vlg venligst en kategori");return}p(!1),b&&(await P(b,I,E),x(null),_(""),C(""))},T=async(U,Q)=>{try{const V=await lr(U,{maxSizeMB:1,maxWidthOrHeight:1920,useWebWorker:!0,onProgress:Q}),ee=await lr(U,{maxSizeMB:.1,maxWidthOrHeight:200,useWebWorker:!0});return{compressed:V,thumbnail:ee}}catch(F){return console.error("Image compression error:",F),{compressed:U,thumbnail:null}}},P=async(U,Q,F)=>{if(U.size>10485760){B("Filen er for stor. Maksimum 10MB tilladt.");return}a(!0),u(0),f(0);try{let G=U,ee=U.size,ie=U.size,be=!1,M=null;if(U.type.startsWith("image/")){const X=await T(U,H=>{f(H)});X.compressed&&(G=X.compressed,ie=X.compressed.size,be=!0),X.thumbnail&&(M=X.thumbnail),f(100)}const Y=await kO({file:G,thumbnail:M,sagsnummer:t,projectId:e,projectName:n,category:Q,uploadedBy:r,uploadedByUID:i,originalSize:ee,compressedSize:ie,isCompressed:be,description:F,onProgress:X=>{u(Math.round(X))}});Y.success?(K("Fil uploaded!"),s(Y.fileData),O.current&&(O.current.value="")):B("Upload fejlede")}catch(G){console.error("Upload error:",G),B("Upload fejlede - prv igen")}finally{a(!1),f(0),u(0)}};return g.jsxs(g.Fragment,{children:[g.jsxs("div",{className:"file-upload-area-compact",children:[g.jsxs("div",{className:"upload-dropzone-compact",onDrop:y,onDragOver:S,onClick:()=>{var U;return(U=O.current)==null?void 0:U.click()},children:[g.jsx("span",{className:"upload-icon-compact",children:""}),g.jsx("span",{className:"upload-text-compact",children:"Drag & drop eller klik for at uploade fil"})]}),g.jsx("input",{ref:O,type:"file",onChange:L,style:{display:"none"}}),o&&g.jsxs("div",{className:"upload-progress-compact",children:[h>0&&h<100&&g.jsxs(g.Fragment,{children:[g.jsxs("span",{className:"progress-text-compact",children:["Komprimerer... ",h,"%"]}),g.jsx("div",{className:"progress-bar-container",children:g.jsx("div",{className:"progress-bar",style:{width:`${h}%`}})})]}),l>0&&g.jsxs(g.Fragment,{children:[g.jsxs("span",{className:"progress-text-compact",children:["Uploader... ",l,"%"]}),g.jsx("div",{className:"progress-bar-container",children:g.jsx("div",{className:"progress-bar",style:{width:`${l}%`}})})]})]})]}),m&&g.jsx("div",{className:"confirm-overlay",children:g.jsxs("div",{className:"confirm-dialog file-upload-dialog",children:[g.jsxs("div",{className:"confirm-header",children:[g.jsx("h3",{children:"Upload fil"}),g.jsx("button",{className:"modal-close",onClick:()=>{p(!1),x(null),_(""),C("")},children:""})]}),g.jsxs("div",{className:"confirm-body",children:[g.jsx("div",{className:"file-info",children:g.jsxs("p",{className:"file-name",children:[" ",b==null?void 0:b.name]})}),g.jsxs("div",{className:"form-group",style:{marginTop:"16px"},children:[g.jsx("label",{children:"Vlg kategori *"}),g.jsxs("div",{className:"category-selection-compact",children:[g.jsxs("button",{type:"button",className:`category-btn-compact ${I==="bilag"?"selected":""}`,onClick:()=>R("bilag"),children:[g.jsx("span",{className:"category-icon",children:""}),g.jsx("span",{children:"Bilag"})]}),g.jsxs("button",{type:"button",className:`category-btn-compact ${I==="billeder"?"selected":""}`,onClick:()=>R("billeder"),children:[g.jsx("span",{className:"category-icon",children:""}),g.jsx("span",{children:"Billeder"})]}),g.jsxs("button",{type:"button",className:`category-btn-compact ${I==="dokumenter"?"selected":""}`,onClick:()=>R("dokumenter"),children:[g.jsx("span",{className:"category-icon",children:""}),g.jsx("span",{children:"Dokumenter"})]})]})]}),g.jsxs("div",{className:"form-group",style:{marginTop:"16px"},children:[g.jsx("label",{htmlFor:"fileNote",children:"Kommentar/Note (valgfri)"}),g.jsx("textarea",{id:"fileNote",value:E,onChange:U=>C(U.target.value),placeholder:"Tilfj en note eller kommentar til filen...",rows:"3",maxLength:"500",style:{width:"100%",padding:"10px",border:"1px solid #ddd",borderRadius:"6px",fontSize:"14px",fontFamily:"inherit",resize:"vertical"}}),g.jsxs("small",{className:"form-hint",children:[E.length,"/500 tegn"]})]})]}),g.jsxs("div",{className:"confirm-footer",children:[g.jsx("button",{className:"btn-secondary",onClick:()=>{p(!1),x(null),_(""),C("")},children:"Annuller"}),g.jsx("button",{className:"btn-primary",onClick:N,disabled:!I,children:"Upload fil"})]})]})})]})}function E1({category:t,files:e,onPreview:n,onDelete:r,onDownload:i}){const o=(()=>{switch(t){case"bilag":return{icon:"",title:"Bilag",emptyText:"Ingen bilag endnu"};case"billeder":return{icon:"",title:"Billeder",emptyText:"Ingen billeder endnu"};case"dokumenter":return{icon:"",title:"Dokumenter",emptyText:"Ingen dokumenter endnu"};default:return{icon:"",title:"Filer",emptyText:"Ingen filer endnu"}}})();return g.jsxs("div",{className:"file-category-column",children:[g.jsxs("div",{className:"category-header",children:[g.jsx("span",{className:"category-icon",children:o.icon}),g.jsx("h3",{children:o.title}),g.jsx("span",{className:"category-count",children:e.length})]}),g.jsx("div",{className:"files-list",children:e.length===0?g.jsxs("div",{className:"empty-state-file",children:[g.jsx("div",{className:"empty-icon",children:o.icon}),g.jsx("p",{children:o.emptyText})]}):e.map(a=>{var l;return g.jsxs("div",{className:"file-item",children:[g.jsx("div",{className:"file-preview",onClick:()=>n(a),children:a.thumbnailURL?g.jsx("img",{src:a.thumbnailURL,alt:a.fileName}):g.jsx("div",{className:"file-icon",children:(l=a.fileType)!=null&&l.startsWith("image/")?"":""})}),g.jsxs("div",{className:"file-details",children:[g.jsx("div",{className:"file-name",title:a.fileName,children:a.fileName}),a.description&&g.jsxs("div",{className:"file-note",title:a.description,children:[" ",a.description]}),g.jsxs("div",{className:"file-meta",children:[g.jsx("span",{className:"file-date",children:jh(a.uploadedAt)}),a.fileSizeCompressed&&g.jsx("span",{className:"file-size",children:wO(a.fileSizeCompressed)})]}),a.uploadedBy&&g.jsxs("div",{className:"file-uploader",children:[" ",a.uploadedBy]})]}),g.jsxs("div",{className:"file-actions",children:[g.jsx("button",{className:"action-btn",onClick:()=>n(a),title:"Vis",children:""}),g.jsx("button",{className:"action-btn",onClick:()=>i(a),title:"Download",children:""}),g.jsx("button",{className:"action-btn danger",onClick:()=>r(a),title:"Slet",children:""})]})]},a.id)})})]})}function LO({file:t,onClose:e,onNext:n,onPrev:r,hasNext:i,hasPrev:s}){return le.useEffect(()=>{const a=l=>{l.key==="Escape"&&e(),l.key==="ArrowLeft"&&s&&r(),l.key==="ArrowRight"&&i&&n()};return window.addEventListener("keydown",a),()=>window.removeEventListener("keydown",a)},[e,n,r,i,s]),le.useEffect(()=>{if(!t)return;const a=t.fileType==="application/pdf",l=t.fileType.startsWith("image/");if(a){window.open(t.fileURL,"_blank"),e();return}l||e()},[t,e]),!t||!t.fileType.startsWith("image/")?null:g.jsx("div",{className:"preview-overlay",onClick:e,children:g.jsxs("div",{className:"preview-modal",onClick:a=>a.stopPropagation(),children:[g.jsxs("div",{className:"preview-header",children:[g.jsx("span",{className:"preview-filename",children:t.fileName}),g.jsx("button",{className:"preview-close",onClick:e,"aria-label":"Luk",children:""})]}),g.jsx("div",{className:"preview-content",children:g.jsx("img",{src:t.fileURL,alt:t.fileName,className:"preview-image"})}),g.jsxs("div",{className:"preview-navigation",children:[s&&g.jsx("button",{className:"preview-nav-btn preview-prev",onClick:r,"aria-label":"Forrige",children:""}),i&&g.jsx("button",{className:"preview-nav-btn preview-next",onClick:n,"aria-label":"Nste",children:""})]})]})})}function RO({project:t,currentUser:e}){const[n,r]=le.useState([]),[i,s]=le.useState(!0),[o,a]=le.useState(""),[l,u]=le.useState("newest"),[h,f]=le.useState(null),[m,p]=le.useState(0),[b,x]=le.useState(""),{showSuccess:I,showError:_,showConfirm:E}=ps();le.useEffect(()=>{C()},[t.projectNumber]);const C=async()=>{s(!0);try{const F=await NO(t.projectNumber);F.success?r(F.files):_("Kunne ikke indlse filer")}catch(F){console.error("Error loading files:",F),_("Kunne ikke indlse filer")}finally{s(!1)}},O=F=>{r(V=>[...V,F])},K=async F=>{if(await E({title:"Slet fil?",message:`Er du sikker p at du vil slette "${F.fileName}"? Denne handling kan ikke fortrydes.`,confirmText:"Slet fil",cancelText:"Annuller",type:"danger"}))try{(await PO(F)).success?(r(ee=>ee.filter(ie=>ie.id!==F.id)),I("Fil slettet")):_("Kunne ikke slette fil")}catch(G){console.error("Delete error:",G),_("Kunne ikke slette fil")}},B=F=>{window.open(F.fileURL,"_blank")},L=F=>{const V=F.fileCategory,ee=N(V).findIndex(ie=>ie.id===F.id);f(F),p(ee),x(V)},y=()=>{const F=N(b);if(m<F.length-1){const V=m+1;f(F[V]),p(V)}},S=()=>{if(m>0){const F=N(b),V=m-1;f(F[V]),p(V)}},R=()=>{let F=[...n];if(o.trim()){const V=o.toLowerCase();F=F.filter(G=>{var ee;return G.fileName.toLowerCase().includes(V)||((ee=G.description)==null?void 0:ee.toLowerCase().includes(V))})}return F.sort((V,G)=>l==="newest"?new Date(G.uploadedAt)-new Date(V.uploadedAt):l==="oldest"?new Date(V.uploadedAt)-new Date(G.uploadedAt):l==="name"?V.fileName.localeCompare(G.fileName):0),F},N=F=>{const V=R();return IO(V,F)};if(i)return g.jsxs("div",{className:"loading-text",children:[g.jsx("span",{className:"loading-spinner-dark"}),"Indlser filer..."]});const T=N("bilag"),P=N("billeder"),U=N("dokumenter"),Q=b?N(b):[];return g.jsxs("div",{className:"files-tab",children:[g.jsx(CO,{sagsnummer:t.projectNumber,projectId:t.id,projectName:t.name,uploadedBy:e,uploadedByUID:"user123",onUploadComplete:O}),g.jsxs("div",{className:"files-controls",children:[g.jsx("input",{type:"text",placeholder:"Sg efter filnavn...",value:o,onChange:F=>a(F.target.value),className:"search-input"}),g.jsxs("select",{value:l,onChange:F=>u(F.target.value),className:"filter-select",children:[g.jsx("option",{value:"newest",children:"Nyeste frst"}),g.jsx("option",{value:"oldest",children:"ldste frst"}),g.jsx("option",{value:"name",children:"Navn (A-Z)"})]})]}),g.jsxs("div",{className:"files-columns",children:[g.jsx(E1,{category:"bilag",files:T,onPreview:L,onDelete:K,onDownload:B}),g.jsx(E1,{category:"billeder",files:P,onPreview:L,onDelete:K,onDownload:B}),g.jsx(E1,{category:"dokumenter",files:U,onPreview:L,onDelete:K,onDownload:B})]}),g.jsx(LO,{file:h,onClose:()=>f(null),onNext:y,onPrev:S,hasNext:m<Q.length-1,hasPrev:m>0})]})}function jO(){const{id:t}=DT(),e=Vc(),[n,r]=le.useState(null),[i,s]=le.useState([]),[o,a]=le.useState([]),[l,u]=le.useState([]),[h,f]=le.useState([]),[m,p]=le.useState([]),[b,x]=le.useState(!0),[I,_]=le.useState(!1),[E,C]=le.useState(!1),[O,K]=le.useState(!1),[B,L]=le.useState(null),[y,S]=le.useState(null),[R,N]=le.useState(450),[T,P]=le.useState("overblik");le.useEffect(()=>{U(),Q(),F(),V(),G(),ee()},[t]);const U=async()=>{try{const ye=await rg(Tn(Nt,"projects",t));ye.exists()?r({id:ye.id,...ye.data()}):(alert("Sag ikke fundet"),e("/sager"))}catch(ye){console.error("Error loading project:",ye),alert("Der opstod en fejl ved indlsning af sag.")}finally{x(!1)}},Q=async()=>{try{const ye=await kA(t);s(ye)}catch(ye){console.error("Error loading time entries:",ye)}},F=async()=>{try{const ye=await aO(t);ye.success&&a(ye.purchases)}catch(ye){console.error("Error loading material purchases:",ye)}},V=async()=>{try{const ye=await LA();ye.success&&u(ye.suppliers)}catch(ye){console.error("Error loading suppliers:",ye)}},G=async()=>{try{const ye=await RA();ye.success&&f(ye.materials)}catch(ye){console.error("Error loading materials:",ye)}},ee=async()=>{try{const ye=await Qs(rr(Nt,"employees")),Re=[];ye.forEach(Te=>{Re.push({id:Te.id,...Te.data()})}),Re.sort((Te,Me)=>Te.name.localeCompare(Me.name)),p(Re)}catch(ye){console.error("Error loading employees:",ye)}},ie=()=>{_(!0)},be=async ye=>{try{await Ya(Tn(Nt,"projects",t),{...ye,updatedAt:new Date().toISOString(),updatedBy:"Admin"}),_(!1),await U()}catch(Re){console.error("Error updating project:",Re),alert("Der opstod en fejl ved opdatering af sag.")}},M=()=>{L(null),C(!0)},Y=ye=>{L(ye),C(!0)},X=async ye=>{if(window.confirm("Er du sikker p, at du vil slette denne timeregistrering?"))try{await il(Tn(Nt,"timeEntries",ye.id)),await Q()}catch(Re){console.error("Error deleting time entry:",Re),alert("Der opstod en fejl ved sletning af timeregistrering.")}},H=async ye=>{try{const Re={...ye,projectId:t,duration:ye.duration,hours:ye.duration,hourlyRate:ye.rate||0,employeeName:ye.employeeName||"Ikke angivet",activity:ye.activity,billable:ye.billable,rate:ye.rate||0};B?await Ya(Tn(Nt,"timeEntries",B.id),{...Re,updatedAt:new Date().toISOString()}):await sl(rr(Nt,"timeEntries"),{...Re,createdAt:new Date().toISOString(),createdBy:"Admin"}),C(!1),await Q()}catch(Re){console.error("Error saving time entry:",Re),alert("Der opstod en fejl ved gemning af timeregistrering.")}},oe=()=>{S(null),K(!0)},ne=ye=>{S(ye),K(!0)},ue=async ye=>{if(window.confirm("Er du sikker p, at du vil slette dette materiale?"))try{(await uO(ye.id)).success?await F():alert("Der opstod en fejl ved sletning af materiale.")}catch(Re){console.error("Error deleting material:",Re),alert("Der opstod en fejl ved sletning af materiale.")}},he=async ye=>{try{y?(await lO(y.id,ye)).success?(K(!1),await F()):alert("Der opstod en fejl ved opdatering af materiale."):(await oO(ye)).success?(K(!1),await F()):alert("Der opstod en fejl ved tilfjelse af materiale.")}catch(Re){console.error("Error saving material:",Re),alert("Der opstod en fejl ved gemning af materiale.")}},Ee=ye=>ye==="fixed-price"?"Fast Pris":"Tid & Materiale";if(b)return g.jsx("div",{children:g.jsx("div",{className:"page-header",children:g.jsx("h1",{children:"Indlser..."})})});if(!n)return null;const Ne=TA(i),je=WD(i),Ue=GD(i),Ye=DA(o),Se=OA(o),ae=cO(o);return g.jsxs("div",{children:[g.jsxs("div",{className:"page-header",children:[g.jsx("button",{className:"btn-back",onClick:()=>e("/sager"),children:" Tilbage til oversigt"}),g.jsx("h1",{children:n.name}),g.jsxs("p",{children:["Sagsnr. ",n.projectNumber]})]}),g.jsxs("div",{className:"sag-tabs",children:[g.jsx("button",{className:`sag-tab ${T==="overblik"?"active":""}`,onClick:()=>P("overblik"),children:"Overblik"}),g.jsx("button",{className:`sag-tab ${T==="timeregistrering"?"active":""}`,onClick:()=>P("timeregistrering"),children:"Timeregistrering"}),g.jsx("button",{className:`sag-tab ${T==="materialer"?"active":""}`,onClick:()=>P("materialer"),children:"Materialer"}),g.jsx("button",{className:`sag-tab ${T==="filer"?"active":""}`,onClick:()=>P("filer"),children:"Filer"})]}),g.jsxs("div",{className:"sag-tab-content",children:[T==="overblik"&&g.jsx("div",{className:"overblik-tab",children:g.jsxs("div",{className:"sag-grid",children:[g.jsxs("div",{className:"sag-card",children:[g.jsxs("div",{className:"card-header",children:[g.jsx("h2",{children:"Sagsoplysninger"}),g.jsx("button",{className:"btn-secondary btn-small",onClick:ie,children:"Redigr sag"})]}),g.jsx("div",{className:"card-body",children:g.jsxs("div",{className:"info-grid",children:[g.jsxs("div",{className:"info-item",children:[g.jsx("span",{className:"info-label",children:"Status:"}),g.jsx(CA,{status:n.status})]}),g.jsxs("div",{className:"info-item",children:[g.jsx("span",{className:"info-label",children:"Type:"}),g.jsx("span",{className:"info-value",children:Ee(n.type)})]}),n.type==="fixed-price"&&g.jsxs("div",{className:"info-item",children:[g.jsx("span",{className:"info-label",children:"Fast pris:"}),g.jsx("span",{className:"info-value",children:Zr(n.fixedPrice)})]}),g.jsxs("div",{className:"info-item",children:[g.jsx("span",{className:"info-label",children:"Oprettet:"}),g.jsx("span",{className:"info-value",children:jh(n.createdAt)})]}),g.jsxs("div",{className:"info-item full-width",children:[g.jsx("span",{className:"info-label",children:"Beskrivelse:"}),g.jsx("p",{className:"info-description",children:n.description||"Ingen beskrivelse"})]})]})})]}),g.jsxs("div",{className:"sag-card",children:[g.jsx("div",{className:"card-header",children:g.jsx("h2",{children:"Kundeoplysninger"})}),g.jsx("div",{className:"card-body",children:g.jsxs("div",{className:"info-grid",children:[g.jsxs("div",{className:"info-item full-width",children:[g.jsx("span",{className:"info-label",children:"Navn:"}),g.jsx("span",{className:"info-value",children:n.customerName||"Ikke angivet"})]}),n.customerPhone&&g.jsxs("div",{className:"info-item",children:[g.jsx("span",{className:"info-label",children:"Telefon:"}),g.jsx("a",{href:`tel:${n.customerPhone}`,className:"info-link",children:YD(n.customerPhone)})]}),n.customerEmail&&g.jsxs("div",{className:"info-item",children:[g.jsx("span",{className:"info-label",children:"Email:"}),g.jsx("a",{href:`mailto:${n.customerEmail}`,className:"info-link",children:n.customerEmail})]}),n.customerAddress&&g.jsxs("div",{className:"info-item full-width",children:[g.jsx("span",{className:"info-label",children:"Adresse:"}),g.jsx("a",{href:XD(n.customerAddress),target:"_blank",rel:"noopener noreferrer",className:"info-link",children:n.customerAddress})]})]})})]}),g.jsxs("div",{className:"sag-card",children:[g.jsx("div",{className:"card-header",children:g.jsx("h2",{children:"Timer & konomi"})}),g.jsxs("div",{className:"card-body",children:[g.jsxs("div",{className:"stats-grid",children:[g.jsxs("div",{className:"stat-item",children:[g.jsx("div",{className:"stat-value",children:Fu(Ne)}),g.jsx("div",{className:"stat-label",children:"Totale timer"})]}),g.jsxs("div",{className:"stat-item",children:[g.jsx("div",{className:"stat-value",children:Fu(je)}),g.jsx("div",{className:"stat-label",children:"Fakturerbare"})]}),g.jsxs("div",{className:"stat-item",children:[g.jsx("div",{className:"stat-value",children:Zr(Ue)}),g.jsx("div",{className:"stat-label",children:"Vrdi (timer)"})]})]}),n.type==="fixed-price"&&n.fixedPrice&&g.jsxs("div",{className:"progress-section",children:[g.jsxs("div",{className:"progress-label",children:[g.jsx("span",{children:"Forbrug af fast pris"}),g.jsxs("span",{children:[Math.round(Ue/n.fixedPrice*100),"%"]})]}),g.jsx("div",{className:"progress-bar",children:g.jsx("div",{className:"progress-fill",style:{width:`${Math.min(Ue/n.fixedPrice*100,100)}%`,background:Ue>n.fixedPrice?"#e74c3c":"#27ae60"}})})]})]})]}),g.jsxs("div",{className:"sag-card",children:[g.jsx("div",{className:"card-header",children:g.jsx("h2",{children:"Materialer"})}),g.jsx("div",{className:"card-body",children:g.jsxs("div",{className:"stats-grid",children:[g.jsxs("div",{className:"stat-item",children:[g.jsx("div",{className:"stat-value",children:o.length}),g.jsx("div",{className:"stat-label",children:"Indkb"})]}),g.jsxs("div",{className:"stat-item",children:[g.jsx("div",{className:"stat-value",children:Zr(Ye)}),g.jsx("div",{className:"stat-label",children:"Indkbspris"})]}),g.jsxs("div",{className:"stat-item",children:[g.jsx("div",{className:"stat-value",children:Zr(Se)}),g.jsx("div",{className:"stat-label",children:"Salgspris"})]}),g.jsxs("div",{className:"stat-item",children:[g.jsx("div",{className:"stat-value",style:{color:ae>=0?"#27ae60":"#e74c3c"},children:Zr(ae)}),g.jsx("div",{className:"stat-label",children:"Avance"})]})]})})]}),g.jsxs("div",{className:"sag-card",children:[g.jsx("div",{className:"card-header",children:g.jsx("h2",{children:"Seneste timer"})}),g.jsx("div",{className:"card-body",children:i.length===0?g.jsx("div",{className:"empty-state-small",children:g.jsx("p",{children:"Ingen timeregistreringer"})}):g.jsx("div",{className:"recent-entries-list",children:i.slice(0,5).map(ye=>g.jsxs("div",{className:"recent-entry-item",children:[g.jsx("div",{className:"recent-entry-date",children:jh(ye.date)}),g.jsx("div",{className:"recent-entry-name",children:ye.employeeName||"Ikke angivet"}),g.jsx("div",{className:"recent-entry-hours",children:Fu(ye.duration||ye.hours||0)})]},ye.id))})})]})]})}),T==="timeregistrering"&&g.jsx("div",{className:"timeregistrering-tab",children:g.jsxs("div",{className:"sag-card",children:[g.jsxs("div",{className:"card-header",children:[g.jsx("h2",{children:"Timeregistreringer"}),g.jsx("button",{className:"btn-primary",onClick:M,children:"+ Tilfj timer"})]}),g.jsx("div",{className:"card-body",children:i.length===0?g.jsxs("div",{className:"empty-state",children:[g.jsx("p",{children:"Ingen timeregistreringer endnu"}),g.jsx("button",{className:"btn-primary",onClick:M,children:"+ Tilfj frste timeregistrering"})]}):g.jsxs(g.Fragment,{children:[g.jsxs("div",{className:"time-summary",children:[g.jsxs("div",{className:"summary-item",children:[g.jsx("span",{className:"summary-label",children:"Totale timer:"}),g.jsx("span",{className:"summary-value",children:Fu(Ne)})]}),g.jsxs("div",{className:"summary-item",children:[g.jsx("span",{className:"summary-label",children:"Fakturerbare timer:"}),g.jsx("span",{className:"summary-value",children:Fu(je)})]}),g.jsxs("div",{className:"summary-item",children:[g.jsx("span",{className:"summary-label",children:"Total vrdi:"}),g.jsx("span",{className:"summary-value",children:Zr(Ue)})]})]}),g.jsxs("table",{className:"time-entries-table",children:[g.jsx("thead",{children:g.jsxs("tr",{children:[g.jsx("th",{children:"Dato"}),g.jsx("th",{children:"Medarbejder"}),g.jsx("th",{children:"Timer"}),g.jsx("th",{children:"Timesats"}),g.jsx("th",{children:"Fakt."}),g.jsx("th",{children:"Vrdi"}),g.jsx("th",{children:"Aktivitet"}),g.jsx("th",{children:"Handlinger"})]})}),g.jsx("tbody",{children:i.map(ye=>g.jsxs("tr",{children:[g.jsx("td",{children:jh(ye.date)}),g.jsx("td",{children:ye.employeeName||"Ikke angivet"}),g.jsx("td",{children:Fu(ye.duration||ye.hours||0)}),g.jsx("td",{children:Zr(ye.rate||ye.hourlyRate||0)}),g.jsx("td",{children:ye.billable?"":""}),g.jsx("td",{children:ye.billable?Zr((ye.duration||ye.hours||0)*(ye.rate||ye.hourlyRate||0)):"-"}),g.jsx("td",{children:ye.activity||ye.description||"-"}),g.jsxs("td",{children:[g.jsx("button",{className:"btn-icon",onClick:()=>Y(ye),title:"Redigr",children:""}),g.jsx("button",{className:"btn-icon",onClick:()=>X(ye),title:"Slet",children:""})]})]},ye.id))})]})]})})]})}),T==="materialer"&&g.jsx("div",{className:"materialer-tab",children:g.jsxs("div",{className:"sag-card",children:[g.jsxs("div",{className:"card-header",children:[g.jsx("h2",{children:"Materialer"}),g.jsx("button",{className:"btn-primary",onClick:oe,children:"+ Tilfj materiale"})]}),g.jsx("div",{className:"card-body",children:o.length===0?g.jsxs("div",{className:"empty-state",children:[g.jsx("p",{children:"Ingen materialer registreret endnu"}),g.jsx("button",{className:"btn-primary",onClick:oe,children:"+ Tilfj frste materiale"})]}):g.jsxs(g.Fragment,{children:[g.jsxs("div",{className:"time-summary",children:[g.jsxs("div",{className:"summary-item",children:[g.jsx("span",{className:"summary-label",children:"Antal indkb:"}),g.jsx("span",{className:"summary-value",children:o.length})]}),g.jsxs("div",{className:"summary-item",children:[g.jsx("span",{className:"summary-label",children:"Total indkbspris:"}),g.jsx("span",{className:"summary-value",children:Zr(Ye)})]}),g.jsxs("div",{className:"summary-item",children:[g.jsx("span",{className:"summary-label",children:"Total salgspris:"}),g.jsx("span",{className:"summary-value",children:Zr(Se)})]}),g.jsxs("div",{className:"summary-item",children:[g.jsx("span",{className:"summary-label",children:"Total avance:"}),g.jsx("span",{className:"summary-value",style:{color:ae>=0?"#27ae60":"#e74c3c"},children:Zr(ae)})]})]}),g.jsxs("table",{className:"time-entries-table",children:[g.jsx("thead",{children:g.jsxs("tr",{children:[g.jsx("th",{children:"Dato"}),g.jsx("th",{children:"Materiale"}),g.jsx("th",{children:"Antal"}),g.jsx("th",{children:"Kategori"}),g.jsx("th",{children:"Leverandr"}),g.jsx("th",{children:"Indkbspris"}),g.jsx("th",{children:"Salgspris"}),g.jsx("th",{children:"Avance"}),g.jsx("th",{children:"Handlinger"})]})}),g.jsx("tbody",{children:o.map(ye=>g.jsxs("tr",{children:[g.jsx("td",{children:jh(ye.date)}),g.jsx("td",{children:ye.materialName}),g.jsxs("td",{children:[ye.quantity," ",ye.unit]}),g.jsx("td",{children:ye.category}),g.jsx("td",{children:ye.supplierName}),g.jsx("td",{children:Zr(ye.purchasePrice)}),g.jsx("td",{children:Zr(ye.sellingPrice)}),g.jsx("td",{style:{color:ye.marginKr>=0?"#27ae60":"#e74c3c"},children:Zr(ye.marginKr)}),g.jsxs("td",{children:[g.jsx("button",{className:"btn-icon",onClick:()=>ne(ye),title:"Redigr",children:""}),g.jsx("button",{className:"btn-icon",onClick:()=>ue(ye),title:"Slet",children:""})]})]},ye.id))})]})]})})]})}),T==="filer"&&g.jsx(RO,{project:n,currentUser:"Admin"})]}),I&&g.jsx(PA,{isOpen:I,project:n,onClose:()=>_(!1),onSave:be}),E&&g.jsx(ZD,{timeEntry:B,defaultRate:R,employees:m,onClose:()=>C(!1),onSave:H}),O&&g.jsx(eO,{purchase:y,project:n,suppliers:l,materials:h,onClose:()=>K(!1),onSave:he})]})}function DO({supplier:t,onSave:e,onClose:n}){const[r,i]=le.useState({name:"",cvr:"",contactPerson:"",phone:"",email:"",address:"",customerNumber:"",type:"",preferredPaymentMethod:"",notes:""}),[s,o]=le.useState({}),a=["Byggemarked","Grossist","Specialforhandler","Tmmerhandel","El-grossist","VVS-grossist","Malerforretning","Vrktjsforhandler","Andet"],l=["Faktura","Kontant","Kort","Firmakort","MobilePay","Konto"];le.useEffect(()=>{t&&i({name:t.name||"",cvr:t.cvr||"",contactPerson:t.contactPerson||"",phone:t.phone||"",email:t.email||"",address:t.address||"",customerNumber:t.customerNumber||"",type:t.type||"",preferredPaymentMethod:t.preferredPaymentMethod||"",notes:t.notes||""})},[t]);const u=I=>{const{name:_,value:E}=I.target;i(C=>({...C,[_]:E})),s[_]&&o(C=>({...C,[_]:null}))},h=I=>I.replace(/\D/g,"").slice(0,8),f=I=>{const _=h(I.target.value);i(E=>({...E,cvr:_})),s.cvr&&o(E=>({...E,cvr:null}))},m=I=>I.replace(/\D/g,"").slice(0,8),p=I=>{const _=m(I.target.value);i(E=>({...E,phone:_})),s.phone&&o(E=>({...E,phone:null}))},b=()=>{const I={};return(!r.name||r.name.trim().length<2)&&(I.name="Leverandrnavn er pkrvet (min. 2 tegn)"),(!r.cvr||r.cvr.length!==8)&&(I.cvr="CVR skal vre 8 cifre"),r.email&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r.email)&&(I.email="Ugyldig email-adresse"),r.phone&&r.phone.length!==8&&(I.phone="Telefonnummer skal vre 8 cifre"),o(I),Object.keys(I).length===0},x=I=>{if(I.preventDefault(),b()){const _={name:r.name.trim(),cvr:r.cvr,contactPerson:r.contactPerson.trim(),phone:r.phone,email:r.email.trim().toLowerCase(),address:r.address.trim(),customerNumber:r.customerNumber.trim(),type:r.type,preferredPaymentMethod:r.preferredPaymentMethod,notes:r.notes.trim()};e(_)}};return g.jsx("div",{className:"modal-overlay",onClick:n,children:g.jsxs("div",{className:"modal-content supplier-modal",onClick:I=>I.stopPropagation(),children:[g.jsxs("div",{className:"modal-header",children:[g.jsx("h2",{children:t?"Redigr Leverandr":"Tilfj Leverandr"}),g.jsx("button",{className:"modal-close",onClick:n,children:""})]}),g.jsxs("form",{onSubmit:x,className:"modal-form",children:[g.jsxs("div",{className:"form-section",children:[g.jsx("h3",{className:"form-section-title",children:"Grundoplysninger"}),g.jsxs("div",{className:"form-group",children:[g.jsx("label",{htmlFor:"name",children:"Leverandrnavn *"}),g.jsx("input",{type:"text",id:"name",name:"name",value:r.name,onChange:u,className:s.name?"input-error":"",placeholder:"F.eks. XL-BYG Slagelse",autoFocus:!0}),s.name&&g.jsx("span",{className:"error-text",children:s.name})]}),g.jsxs("div",{className:"form-group",children:[g.jsx("label",{htmlFor:"cvr",children:"CVR-nummer *"}),g.jsx("input",{type:"text",id:"cvr",name:"cvr",value:r.cvr,onChange:f,className:s.cvr?"input-error":"",placeholder:"12345678",maxLength:"8"}),s.cvr&&g.jsx("span",{className:"error-text",children:s.cvr}),g.jsx("small",{className:"form-hint",children:"8 cifre uden mellemrum"})]}),g.jsxs("div",{className:"form-group",children:[g.jsx("label",{htmlFor:"customerNumber",children:"Kundenummer"}),g.jsx("input",{type:"text",id:"customerNumber",name:"customerNumber",value:r.customerNumber,onChange:u,placeholder:"Vores kundenummer hos leverandren"}),g.jsx("small",{className:"form-hint",children:"Jeres kontonummer eller kundenummer hos denne leverandr"})]}),g.jsxs("div",{className:"form-group",children:[g.jsx("label",{htmlFor:"type",children:"Type"}),g.jsxs("select",{id:"type",name:"type",value:r.type,onChange:u,children:[g.jsx("option",{value:"",children:"-- Vlg type --"}),a.map(I=>g.jsx("option",{value:I,children:I},I))]})]})]}),g.jsxs("div",{className:"form-section",children:[g.jsx("h3",{className:"form-section-title",children:"Kontaktoplysninger"}),g.jsxs("div",{className:"form-group",children:[g.jsx("label",{htmlFor:"contactPerson",children:"Kontaktperson"}),g.jsx("input",{type:"text",id:"contactPerson",name:"contactPerson",value:r.contactPerson,onChange:u,placeholder:"F.eks. Hans Jensen"})]}),g.jsxs("div",{className:"form-group",children:[g.jsx("label",{htmlFor:"phone",children:"Telefon"}),g.jsx("input",{type:"text",id:"phone",name:"phone",value:r.phone,onChange:p,className:s.phone?"input-error":"",placeholder:"12345678",maxLength:"8"}),s.phone&&g.jsx("span",{className:"error-text",children:s.phone}),g.jsx("small",{className:"form-hint",children:"8 cifre uden mellemrum"})]}),g.jsxs("div",{className:"form-group",children:[g.jsx("label",{htmlFor:"email",children:"Email"}),g.jsx("input",{type:"email",id:"email",name:"email",value:r.email,onChange:u,className:s.email?"input-error":"",placeholder:"kontakt@leverandoer.dk"}),s.email&&g.jsx("span",{className:"error-text",children:s.email})]}),g.jsxs("div",{className:"form-group",children:[g.jsx("label",{htmlFor:"address",children:"Adresse"}),g.jsx("textarea",{id:"address",name:"address",value:r.address,onChange:u,rows:"2",placeholder:`Gadenavn 123
1234 By`})]})]}),g.jsxs("div",{className:"form-section",children:[g.jsx("h3",{className:"form-section-title",children:"Betaling"}),g.jsxs("div",{className:"form-group",children:[g.jsx("label",{htmlFor:"preferredPaymentMethod",children:"Foretrukken betalingsmetode"}),g.jsxs("select",{id:"preferredPaymentMethod",name:"preferredPaymentMethod",value:r.preferredPaymentMethod,onChange:u,children:[g.jsx("option",{value:"",children:"-- Vlg betalingsmetode --"}),l.map(I=>g.jsx("option",{value:I,children:I},I))]})]})]}),g.jsxs("div",{className:"form-section",children:[g.jsx("h3",{className:"form-section-title",children:"Noter"}),g.jsxs("div",{className:"form-group",children:[g.jsx("label",{htmlFor:"notes",children:"Interne bemrkninger"}),g.jsx("textarea",{id:"notes",name:"notes",value:r.notes,onChange:u,rows:"3",placeholder:"Ekstra noter om leverandren..."})]})]}),g.jsxs("div",{className:"modal-footer",children:[g.jsx("button",{type:"button",className:"btn-secondary",onClick:n,children:"Annuller"}),g.jsx("button",{type:"submit",className:"btn-primary",children:t?"Gem ndringer":"Tilfj leverandr"})]})]})]})})}function OO({material:t,suppliers:e,onSave:n,onClose:r}){const[i,s]=le.useState({name:"",sku:"",unit:"stk",category:"",defaultSupplierId:"",defaultSupplierName:"",standardMarkup:"50"}),[o,a]=le.useState({}),l=["stk","m","m","m","kg","liter","pose","rulle","palle"],u=["Tr","Gips","El-materialer","VVS","Maling","Vrktj","Diverse"];le.useEffect(()=>{t&&s({name:t.name||"",sku:t.sku||"",unit:t.unit||"stk",category:t.category||"",defaultSupplierId:t.defaultSupplierId||"",defaultSupplierName:t.defaultSupplierName||"",standardMarkup:String(t.standardMarkup||50)})},[t]);const h=p=>{const{name:b,value:x}=p.target;s(I=>{const _={...I,[b]:x};if(b==="defaultSupplierId"&&x){const E=e.find(C=>C.id===x);E&&(_.defaultSupplierName=E.name)}else b==="defaultSupplierId"&&!x&&(_.defaultSupplierName="");return _}),o[b]&&a(I=>({...I,[b]:null}))},f=()=>{const p={};(!i.name||i.name.trim().length<2)&&(p.name="Materiale navn er pkrvet (min. 2 tegn)"),i.unit||(p.unit="Enhed er pkrvet"),i.category||(p.category="Kategori er pkrvet");const b=parseFloat(i.standardMarkup);return(isNaN(b)||b<0||b>500)&&(p.standardMarkup="Avance skal vre mellem 0 og 500%"),a(p),Object.keys(p).length===0},m=p=>{if(p.preventDefault(),f()){const b={name:i.name.trim(),sku:i.sku.trim(),unit:i.unit,category:i.category,defaultSupplierId:i.defaultSupplierId||null,defaultSupplierName:i.defaultSupplierName,standardMarkup:parseFloat(i.standardMarkup)};n(b)}};return g.jsx("div",{className:"modal-overlay",onClick:r,children:g.jsxs("div",{className:"modal-content material-modal",onClick:p=>p.stopPropagation(),children:[g.jsxs("div",{className:"modal-header",children:[g.jsx("h2",{children:t?"Redigr Materiale":"Tilfj Materiale"}),g.jsx("button",{className:"modal-close",onClick:r,children:""})]}),g.jsxs("form",{onSubmit:m,className:"modal-form",children:[g.jsxs("div",{className:"form-section",children:[g.jsx("h3",{className:"form-section-title",children:"Grundoplysninger"}),g.jsxs("div",{className:"form-group",children:[g.jsx("label",{htmlFor:"name",children:"Materiale navn *"}),g.jsx("input",{type:"text",id:"name",name:"name",value:i.name,onChange:h,className:o.name?"input-error":"",placeholder:"F.eks. Gipsplader 13mm",autoFocus:!0}),o.name&&g.jsx("span",{className:"error-text",children:o.name})]}),g.jsxs("div",{className:"form-group",children:[g.jsx("label",{htmlFor:"sku",children:"Artikelnummer / Varenummer"}),g.jsx("input",{type:"text",id:"sku",name:"sku",value:i.sku,onChange:h,placeholder:"F.eks. GP13-001"}),g.jsx("small",{className:"form-hint",children:"Leverandrens varenummer"})]}),g.jsxs("div",{className:"form-row",children:[g.jsxs("div",{className:"form-group",children:[g.jsx("label",{htmlFor:"unit",children:"Enhed *"}),g.jsx("select",{id:"unit",name:"unit",value:i.unit,onChange:h,className:o.unit?"input-error":"",children:l.map(p=>g.jsx("option",{value:p,children:p},p))}),o.unit&&g.jsx("span",{className:"error-text",children:o.unit})]}),g.jsxs("div",{className:"form-group",children:[g.jsx("label",{htmlFor:"category",children:"Kategori *"}),g.jsxs("select",{id:"category",name:"category",value:i.category,onChange:h,className:o.category?"input-error":"",children:[g.jsx("option",{value:"",children:"-- Vlg --"}),u.map(p=>g.jsx("option",{value:p,children:p},p))]}),o.category&&g.jsx("span",{className:"error-text",children:o.category})]})]})]}),g.jsxs("div",{className:"form-section",children:[g.jsx("h3",{className:"form-section-title",children:"Standard leverandr & prisstning"}),g.jsxs("div",{className:"form-group",children:[g.jsx("label",{htmlFor:"defaultSupplierId",children:"Standard leverandr"}),g.jsxs("select",{id:"defaultSupplierId",name:"defaultSupplierId",value:i.defaultSupplierId,onChange:h,children:[g.jsx("option",{value:"",children:"-- Ingen standard --"}),e.map(p=>g.jsx("option",{value:p.id,children:p.name},p.id))]}),g.jsx("small",{className:"form-hint",children:"Vlges automatisk nr du tilfjer dette materiale til en sag"})]}),g.jsxs("div",{className:"form-group",children:[g.jsx("label",{htmlFor:"standardMarkup",children:"Standard avance (%) *"}),g.jsx("input",{type:"text",id:"standardMarkup",name:"standardMarkup",value:i.standardMarkup,onChange:h,className:o.standardMarkup?"input-error":"",placeholder:"F.eks. 50"}),o.standardMarkup&&g.jsx("span",{className:"error-text",children:o.standardMarkup}),g.jsx("small",{className:"form-hint",children:"Bruges til at beregne salgspris automatisk (f.eks. 50% = indkb * 1.5)"})]}),t&&t.lastPurchasePrice&&g.jsxs("div",{className:"info-box",children:[g.jsx("div",{className:"info-box-title",children:"Seneste indkb"}),g.jsxs("div",{className:"info-box-content",children:[g.jsx("strong",{children:"Pris pr. enhed:"})," ",t.lastPurchasePrice.toFixed(2)," kr",g.jsx("br",{}),g.jsx("strong",{children:"Dato:"})," ",new Date(t.lastPurchaseDate).toLocaleDateString("da-DK")]})]})]}),g.jsxs("div",{className:"modal-footer",children:[g.jsx("button",{type:"button",className:"btn-secondary",onClick:r,children:"Annuller"}),g.jsx("button",{type:"submit",className:"btn-primary",children:t?"Gem ndringer":"Tilfj materiale"})]})]})]})})}function FO(){const{showSuccess:t,showError:e,showCriticalConfirm:n}=ps(),[r,i]=le.useState("leverandoerer"),[s,o]=le.useState([]),[a,l]=le.useState([]),[u,h]=le.useState([]),[f,m]=le.useState([]),[p,b]=le.useState(!1),[x,I]=le.useState(!1),[_,E]=le.useState(!1),[C,O]=le.useState(null),[K,B]=le.useState(null),[L,y]=le.useState(""),[S,R]=le.useState("all"),[N,T]=le.useState(""),[P,U]=le.useState("all");le.useEffect(()=>{r==="leverandoerer"?Q():r==="katalog"&&(F(),Q())},[r]),le.useEffect(()=>{V()},[s,L,S]),le.useEffect(()=>{G()},[a,N,P]);const Q=async()=>{b(!0);try{const ne=await LA();ne.success&&o(ne.suppliers)}catch(ne){console.error("Error loading suppliers:",ne)}finally{b(!1)}},F=async()=>{b(!0);try{const ne=await RA();ne.success&&l(ne.materials)}catch(ne){console.error("Error loading materials:",ne)}finally{b(!1)}},V=()=>{let ne=[...s];if(L.trim()){const ue=L.toLowerCase();ne=ne.filter(he=>{var Ee,Ne,je,Ue,Ye;return((Ee=he.name)==null?void 0:Ee.toLowerCase().includes(ue))||((Ne=he.contactPerson)==null?void 0:Ne.toLowerCase().includes(ue))||((je=he.phone)==null?void 0:je.toLowerCase().includes(ue))||((Ue=he.email)==null?void 0:Ue.toLowerCase().includes(ue))||((Ye=he.cvr)==null?void 0:Ye.toLowerCase().includes(ue))})}S!=="all"&&(ne=ne.filter(ue=>ue.type===S)),h(ne)},G=()=>{let ne=[...a];if(N.trim()){const ue=N.toLowerCase();ne=ne.filter(he=>{var Ee,Ne,je,Ue;return((Ee=he.name)==null?void 0:Ee.toLowerCase().includes(ue))||((Ne=he.sku)==null?void 0:Ne.toLowerCase().includes(ue))||((je=he.category)==null?void 0:je.toLowerCase().includes(ue))||((Ue=he.defaultSupplierName)==null?void 0:Ue.toLowerCase().includes(ue))})}P!=="all"&&(ne=ne.filter(ue=>ue.category===P)),m(ne)},ee=()=>{O(null),I(!0)},ie=ne=>{O(ne),I(!0)},be=async ne=>{const he=a.filter(Ne=>Ne.defaultSupplierId===ne.id).length;if(await n({title:"Slet leverandr?",message:"Dette vil permanent slette leverandren fra systemet.",itemName:ne.name,warningText:he>0?`${he} materiale${he>1?"r":""} er knyttet til denne leverandr`:null,confirmText:"Slet Permanent",cancelText:"Annuller"}))try{(await rO(ne.id)).success?(t("Leverandr slettet!"),await Q()):e("Der opstod en fejl ved sletning af leverandr.")}catch(Ne){console.error("Error deleting supplier:",Ne),e("Der opstod en fejl ved sletning af leverandr.")}},M=async ne=>{try{C?(await nO(C.id,ne)).success?(I(!1),t("Leverandr opdateret!"),await Q()):e("Der opstod en fejl ved opdatering af leverandr."):(await tO(ne)).success?(I(!1),t("Leverandr oprettet!"),await Q()):e("Der opstod en fejl ved tilfjelse af leverandr.")}catch(ue){console.error("Error saving supplier:",ue),e("Der opstod en fejl ved gemning af leverandr.")}},Y=()=>{B(null),E(!0)},X=ne=>{B(ne),E(!0)},H=async ne=>{if(await n({title:"Slet materiale?",message:"Dette vil permanent slette materialet fra kataloget.",itemName:ne.name,warningText:ne.lastPurchaseDate?"Dette materiale har historiske indkb knyttet til sig":null,confirmText:"Slet Permanent",cancelText:"Annuller"}))try{(await sO(ne.id)).success?(t("Materiale slettet!"),await F()):e("Der opstod en fejl ved sletning af materiale.")}catch(he){console.error("Error deleting material:",he),e("Der opstod en fejl ved sletning af materiale.")}},oe=async ne=>{try{K?(await jA(K.id,ne)).success?(E(!1),t("Materiale opdateret!"),await F()):e("Der opstod en fejl ved opdatering af materiale."):(await iO(ne)).success?(E(!1),t("Materiale oprettet!"),await F()):e("Der opstod en fejl ved tilfjelse af materiale.")}catch(ue){console.error("Error saving material:",ue),e("Der opstod en fejl ved gemning af materiale.")}};return g.jsxs("div",{children:[g.jsxs("div",{className:"page-header",children:[g.jsx("h1",{children:"Materialer"}),g.jsx("p",{children:"Administrer leverandrer, materiale-katalog og se indkbsoversigt"})]}),g.jsxs("div",{className:"sag-tabs",children:[g.jsx("button",{className:`sag-tab ${r==="leverandoerer"?"active":""}`,onClick:()=>i("leverandoerer"),children:"Leverandrer"}),g.jsx("button",{className:`sag-tab ${r==="katalog"?"active":""}`,onClick:()=>i("katalog"),children:"Materiale Katalog"}),g.jsx("button",{className:`sag-tab ${r==="indkoeb"?"active":""}`,onClick:()=>i("indkoeb"),children:"Alle Indkb"})]}),g.jsxs("div",{className:"sag-tab-content",children:[r==="leverandoerer"&&g.jsx("div",{className:"leverandoerer-tab",children:g.jsxs("div",{className:"sag-card",children:[g.jsxs("div",{className:"card-header",children:[g.jsx("h2",{children:"Leverandrer"}),g.jsx("button",{className:"btn-primary",onClick:ee,children:"+ Tilfj leverandr"})]}),g.jsxs("div",{className:"card-body",children:[g.jsxs("div",{className:"sager-controls",children:[g.jsx("div",{className:"search-box",children:g.jsx("input",{type:"text",placeholder:"Sg efter leverandr, kontakt, telefon, email eller CVR...",value:L,onChange:ne=>y(ne.target.value),className:"search-input"})}),g.jsx("div",{className:"filter-row",children:g.jsxs("select",{value:S,onChange:ne=>R(ne.target.value),className:"filter-select",children:[g.jsx("option",{value:"all",children:"Alle typer"}),g.jsx("option",{value:"Byggemarked",children:"Byggemarked"}),g.jsx("option",{value:"Grossist",children:"Grossist"}),g.jsx("option",{value:"Specialforhandler",children:"Specialforhandler"}),g.jsx("option",{value:"Andet",children:"Andet"})]})})]}),p?g.jsx("div",{className:"empty-state",children:g.jsx("p",{children:"Indlser leverandrer..."})}):u.length===0?g.jsx("div",{className:"empty-state",children:g.jsx("p",{children:s.length===0?"Ingen leverandrer endnu. Tilfj din frste leverandr for at komme i gang.":"Ingen leverandrer matcher din sgning eller filtre."})}):g.jsx("div",{className:"table-container",children:g.jsxs("table",{className:"sager-table",children:[g.jsx("thead",{children:g.jsxs("tr",{children:[g.jsx("th",{children:"Navn"}),g.jsx("th",{children:"Type"}),g.jsx("th",{children:"Kontaktperson"}),g.jsx("th",{children:"Telefon"}),g.jsx("th",{children:"Email"}),g.jsx("th",{children:"Handlinger"})]})}),g.jsx("tbody",{children:u.map(ne=>g.jsxs("tr",{children:[g.jsxs("td",{children:[g.jsx("strong",{children:ne.name}),ne.cvr&&g.jsxs("div",{style:{fontSize:"12px",color:"#7f8c8d"},children:["CVR: ",ne.cvr]})]}),g.jsx("td",{children:ne.type||"-"}),g.jsx("td",{children:ne.contactPerson||"-"}),g.jsx("td",{children:ne.phone?g.jsx("a",{href:`tel:${ne.phone}`,style:{color:"#3498db",textDecoration:"none"},children:ne.phone}):"-"}),g.jsx("td",{children:ne.email?g.jsx("a",{href:`mailto:${ne.email}`,style:{color:"#3498db",textDecoration:"none"},children:ne.email}):"-"}),g.jsxs("td",{className:"actions-cell",children:[g.jsx("button",{className:"btn-icon btn-edit",onClick:()=>ie(ne),title:"Redigr",children:""}),g.jsx("button",{className:"btn-icon btn-delete",onClick:()=>be(ne),title:"Slet",children:""})]})]},ne.id))})]})})]})]})}),r==="katalog"&&g.jsx("div",{className:"katalog-tab",children:g.jsxs("div",{className:"sag-card",children:[g.jsxs("div",{className:"card-header",children:[g.jsx("h2",{children:"Materiale Katalog"}),g.jsx("button",{className:"btn-primary",onClick:Y,children:"+ Tilfj materiale"})]}),g.jsxs("div",{className:"card-body",children:[g.jsxs("div",{className:"sager-controls",children:[g.jsx("div",{className:"search-box",children:g.jsx("input",{type:"text",placeholder:"Sg efter materiale, kategori, SKU eller leverandr...",value:N,onChange:ne=>T(ne.target.value),className:"search-input"})}),g.jsx("div",{className:"filter-row",children:g.jsxs("select",{value:P,onChange:ne=>U(ne.target.value),className:"filter-select",children:[g.jsx("option",{value:"all",children:"Alle kategorier"}),g.jsx("option",{value:"Tr",children:"Tr"}),g.jsx("option",{value:"Gips",children:"Gips"}),g.jsx("option",{value:"El-materialer",children:"El-materialer"}),g.jsx("option",{value:"VVS",children:"VVS"}),g.jsx("option",{value:"Maling",children:"Maling"}),g.jsx("option",{value:"Vrktj",children:"Vrktj"}),g.jsx("option",{value:"Diverse",children:"Diverse"})]})})]}),p?g.jsx("div",{className:"empty-state",children:g.jsx("p",{children:"Indlser materialer..."})}):f.length===0?g.jsx("div",{className:"empty-state",children:g.jsx("p",{children:a.length===0?"Ingen materialer endnu. Tilfj dit frste materiale for at komme i gang.":"Ingen materialer matcher din sgning eller filtre."})}):g.jsx("div",{className:"table-container",children:g.jsxs("table",{className:"sager-table",children:[g.jsx("thead",{children:g.jsxs("tr",{children:[g.jsx("th",{children:"Navn"}),g.jsx("th",{children:"Kategori"}),g.jsx("th",{children:"Enhed"}),g.jsx("th",{children:"Standard leverandr"}),g.jsx("th",{children:"Seneste pris"}),g.jsx("th",{children:"Handlinger"})]})}),g.jsx("tbody",{children:f.map(ne=>g.jsxs("tr",{children:[g.jsxs("td",{children:[g.jsx("strong",{children:ne.name}),ne.sku&&g.jsxs("div",{style:{fontSize:"12px",color:"#7f8c8d"},children:["SKU: ",ne.sku]})]}),g.jsx("td",{children:ne.category}),g.jsx("td",{children:ne.unit}),g.jsx("td",{children:ne.defaultSupplierName||"-"}),g.jsx("td",{children:ne.lastPurchasePrice?g.jsxs(g.Fragment,{children:[ne.lastPurchasePrice," kr",ne.lastPurchaseDate&&g.jsx("div",{style:{fontSize:"11px",color:"#7f8c8d"},children:new Date(ne.lastPurchaseDate).toLocaleDateString("da-DK")})]}):"-"}),g.jsxs("td",{className:"actions-cell",children:[g.jsx("button",{className:"btn-icon btn-edit",onClick:()=>X(ne),title:"Redigr",children:""}),g.jsx("button",{className:"btn-icon btn-delete",onClick:()=>H(ne),title:"Slet",children:""})]})]},ne.id))})]})})]})]})}),r==="indkoeb"&&g.jsx("div",{className:"indkoeb-tab",children:g.jsxs("div",{className:"sag-card",children:[g.jsx("div",{className:"card-header",children:g.jsx("h2",{children:"Alle Indkb"})}),g.jsx("div",{className:"card-body",children:g.jsx("div",{className:"empty-state",children:g.jsx("p",{children:"Indkb vises her nr du tilfjer materialer til sager"})})})]})})]}),x&&g.jsx(DO,{supplier:C,onClose:()=>I(!1),onSave:M}),_&&g.jsx(OO,{material:K,suppliers:s,onClose:()=>E(!1),onSave:oe})]})}function MO(){const t=Vc(),e=async()=>{try{await Y6(iy),t("/login")}catch(n){console.error("Error logging out:",n),alert("Der opstod en fejl ved logud.")}};return g.jsxs("div",{className:"app-layout",children:[g.jsxs("aside",{className:"sidebar",children:[g.jsxs("div",{className:"sidebar-header",children:[g.jsx("img",{src:"/logo_white.png",alt:"Piblo Logo",className:"sidebar-logo",onError:n=>{n.target.style.display="none",n.target.nextElementSibling.style.display="block"}}),g.jsx("div",{style:{width:"80px",height:"80px",margin:"0 auto 15px",display:"none",alignItems:"center",justifyContent:"center",fontSize:"40px"},children:""}),g.jsx("div",{className:"sidebar-title",children:"Piblo"})]}),g.jsxs("nav",{className:"sidebar-nav",children:[g.jsx(Rf,{to:"/sager",className:({isActive:n})=>`nav-item ${n?"active":""}`,children:"Sager"}),g.jsx(Rf,{to:"/materialer",className:({isActive:n})=>`nav-item ${n?"active":""}`,children:"Materialer"}),g.jsx(Rf,{to:"/timeregistrering",className:({isActive:n})=>`nav-item ${n?"active":""}`,children:"Timeregistrering"}),g.jsx(Rf,{to:"/indstillinger",className:({isActive:n})=>`nav-item ${n?"active":""}`,children:"Indstillinger"})]}),g.jsx("div",{className:"sidebar-footer",children:g.jsx("button",{className:"btn-logout",onClick:e,children:"Log ud"})})]}),g.jsx("main",{className:"main-content",children:g.jsx(YT,{})})]})}function UO(){const[t,e]=le.useState(null),[n,r]=le.useState(!0);return le.useEffect(()=>{const i=Q6(iy,s=>{e(s),r(!1)});return()=>i()},[]),{user:t,loading:n}}function VO({children:t}){const{user:e,loading:n}=UO();return n?g.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"100vh",fontSize:"18px",color:"#7f8c8d"},children:"Indlser..."}):e?t:g.jsx(b0,{to:"/login",replace:!0})}function BO(){return g.jsxs(fk,{children:[g.jsx(ok,{children:g.jsxs(JT,{children:[g.jsx(Cs,{path:"/login",element:g.jsx(N7,{})}),g.jsxs(Cs,{path:"/",element:g.jsx(VO,{children:g.jsx(MO,{})}),children:[g.jsx(Cs,{index:!0,element:g.jsx(b0,{to:"/sager",replace:!0})}),g.jsx(Cs,{path:"sager",element:g.jsx(JD,{})}),g.jsx(Cs,{path:"sager/:id",element:g.jsx(jO,{})}),g.jsx(Cs,{path:"materialer",element:g.jsx(FO,{})}),g.jsx(Cs,{path:"timeregistrering",element:g.jsx(qD,{})}),g.jsx(Cs,{path:"indstillinger",element:g.jsx($D,{})})]}),g.jsx(Cs,{path:"*",element:g.jsx(b0,{to:"/",replace:!0})})]})}),g.jsx(vk,{}),g.jsx(yk,{}),g.jsx(_k,{})]})}N1.createRoot(document.getElementById("root")).render(g.jsx(ib.StrictMode,{children:g.jsx(BO,{})}));export{Gt as _,qO as c,LE as g};

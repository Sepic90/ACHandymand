function BA(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var m9=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function KA(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var ib={exports:{}},mm={},sb={exports:{}},Ct={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kd=Symbol.for("react.element"),qA=Symbol.for("react.portal"),zA=Symbol.for("react.fragment"),$A=Symbol.for("react.strict_mode"),HA=Symbol.for("react.profiler"),WA=Symbol.for("react.provider"),GA=Symbol.for("react.context"),QA=Symbol.for("react.forward_ref"),YA=Symbol.for("react.suspense"),JA=Symbol.for("react.memo"),XA=Symbol.for("react.lazy"),$y=Symbol.iterator;function ZA(t){return t===null||typeof t!="object"?null:(t=$y&&t[$y]||t["@@iterator"],typeof t=="function"?t:null)}var ab={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ob=Object.assign,lb={};function Ru(t,e,n){this.props=t,this.context=e,this.refs=lb,this.updater=n||ab}Ru.prototype.isReactComponent={};Ru.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ru.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function cb(){}cb.prototype=Ru.prototype;function hv(t,e,n){this.props=t,this.context=e,this.refs=lb,this.updater=n||ab}var dv=hv.prototype=new cb;dv.constructor=hv;ob(dv,Ru.prototype);dv.isPureReactComponent=!0;var Hy=Array.isArray,ub=Object.prototype.hasOwnProperty,fv={current:null},hb={key:!0,ref:!0,__self:!0,__source:!0};function db(t,e,n){var r,i={},s=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(s=""+e.key),e)ub.call(e,r)&&!hb.hasOwnProperty(r)&&(i[r]=e[r]);var o=arguments.length-2;if(o===1)i.children=n;else if(1<o){for(var l=Array(o),c=0;c<o;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(r in o=t.defaultProps,o)i[r]===void 0&&(i[r]=o[r]);return{$$typeof:kd,type:t,key:s,ref:a,props:i,_owner:fv.current}}function eE(t,e){return{$$typeof:kd,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function pv(t){return typeof t=="object"&&t!==null&&t.$$typeof===kd}function tE(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Wy=/\/+/g;function Tg(t,e){return typeof t=="object"&&t!==null&&t.key!=null?tE(""+t.key):e.toString(36)}function $f(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case kd:case qA:a=!0}}if(a)return a=t,i=i(a),t=r===""?"."+Tg(a,0):r,Hy(i)?(n="",t!=null&&(n=t.replace(Wy,"$&/")+"/"),$f(i,e,n,"",function(c){return c})):i!=null&&(pv(i)&&(i=eE(i,n+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(Wy,"$&/")+"/")+t)),e.push(i)),1;if(a=0,r=r===""?".":r+":",Hy(t))for(var o=0;o<t.length;o++){s=t[o];var l=r+Tg(s,o);a+=$f(s,e,n,l,i)}else if(l=ZA(t),typeof l=="function")for(t=l.call(t),o=0;!(s=t.next()).done;)s=s.value,l=r+Tg(s,o++),a+=$f(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function vf(t,e,n){if(t==null)return t;var r=[],i=0;return $f(t,r,"","",function(s){return e.call(n,s,i++)}),r}function nE(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var $r={current:null},Hf={transition:null},rE={ReactCurrentDispatcher:$r,ReactCurrentBatchConfig:Hf,ReactCurrentOwner:fv};function fb(){throw Error("act(...) is not supported in production builds of React.")}Ct.Children={map:vf,forEach:function(t,e,n){vf(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return vf(t,function(){e++}),e},toArray:function(t){return vf(t,function(e){return e})||[]},only:function(t){if(!pv(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ct.Component=Ru;Ct.Fragment=zA;Ct.Profiler=HA;Ct.PureComponent=hv;Ct.StrictMode=$A;Ct.Suspense=YA;Ct.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=rE;Ct.act=fb;Ct.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=ob({},t.props),i=t.key,s=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,a=fv.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var o=t.type.defaultProps;for(l in e)ub.call(e,l)&&!hb.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&o!==void 0?o[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){o=Array(l);for(var c=0;c<l;c++)o[c]=arguments[c+2];r.children=o}return{$$typeof:kd,type:t.type,key:i,ref:s,props:r,_owner:a}};Ct.createContext=function(t){return t={$$typeof:GA,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:WA,_context:t},t.Consumer=t};Ct.createElement=db;Ct.createFactory=function(t){var e=db.bind(null,t);return e.type=t,e};Ct.createRef=function(){return{current:null}};Ct.forwardRef=function(t){return{$$typeof:QA,render:t}};Ct.isValidElement=pv;Ct.lazy=function(t){return{$$typeof:XA,_payload:{_status:-1,_result:t},_init:nE}};Ct.memo=function(t,e){return{$$typeof:JA,type:t,compare:e===void 0?null:e}};Ct.startTransition=function(t){var e=Hf.transition;Hf.transition={};try{t()}finally{Hf.transition=e}};Ct.unstable_act=fb;Ct.useCallback=function(t,e){return $r.current.useCallback(t,e)};Ct.useContext=function(t){return $r.current.useContext(t)};Ct.useDebugValue=function(){};Ct.useDeferredValue=function(t){return $r.current.useDeferredValue(t)};Ct.useEffect=function(t,e){return $r.current.useEffect(t,e)};Ct.useId=function(){return $r.current.useId()};Ct.useImperativeHandle=function(t,e,n){return $r.current.useImperativeHandle(t,e,n)};Ct.useInsertionEffect=function(t,e){return $r.current.useInsertionEffect(t,e)};Ct.useLayoutEffect=function(t,e){return $r.current.useLayoutEffect(t,e)};Ct.useMemo=function(t,e){return $r.current.useMemo(t,e)};Ct.useReducer=function(t,e,n){return $r.current.useReducer(t,e,n)};Ct.useRef=function(t){return $r.current.useRef(t)};Ct.useState=function(t){return $r.current.useState(t)};Ct.useSyncExternalStore=function(t,e,n){return $r.current.useSyncExternalStore(t,e,n)};Ct.useTransition=function(){return $r.current.useTransition()};Ct.version="18.3.1";sb.exports=Ct;var oe=sb.exports;const pb=KA(oe),iE=BA({__proto__:null,default:pb},[oe]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sE=oe,aE=Symbol.for("react.element"),oE=Symbol.for("react.fragment"),lE=Object.prototype.hasOwnProperty,cE=sE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,uE={key:!0,ref:!0,__self:!0,__source:!0};function mb(t,e,n){var r,i={},s=null,a=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)lE.call(e,r)&&!uE.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:aE,type:t,key:s,ref:a,props:i,_owner:cE.current}}mm.Fragment=oE;mm.jsx=mb;mm.jsxs=mb;ib.exports=mm;var u=ib.exports,T1={},gb={exports:{}},Ei={},vb={exports:{}},yb={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(z,$){var ne=z.length;z.push($);e:for(;0<ne;){var we=ne-1>>>1,O=z[we];if(0<i(O,$))z[we]=$,z[ne]=O,ne=we;else break e}}function n(z){return z.length===0?null:z[0]}function r(z){if(z.length===0)return null;var $=z[0],ne=z.pop();if(ne!==$){z[0]=ne;e:for(var we=0,O=z.length,Y=O>>>1;we<Y;){var J=2*(we+1)-1,H=z[J],se=J+1,le=z[se];if(0>i(H,ne))se<O&&0>i(le,H)?(z[we]=le,z[se]=ne,we=se):(z[we]=H,z[J]=ne,we=J);else if(se<O&&0>i(le,ne))z[we]=le,z[se]=ne,we=se;else break e}}return $}function i(z,$){var ne=z.sortIndex-$.sortIndex;return ne!==0?ne:z.id-$.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();t.unstable_now=function(){return a.now()-o}}var l=[],c=[],d=1,p=null,g=3,m=!1,b=!1,x=!1,T=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(z){for(var $=n(c);$!==null;){if($.callback===null)r(c);else if($.startTime<=z)r(c),$.sortIndex=$.expirationTime,e(l,$);else break;$=n(c)}}function F(z){if(x=!1,C(z),!b)if(n(l)!==null)b=!0,V(Q);else{var $=n(c);$!==null&&U(F,$.startTime-z)}}function Q(z,$){b=!1,x&&(x=!1,w(y),y=-1),m=!0;var ne=g;try{for(C($),p=n(l);p!==null&&(!(p.expirationTime>$)||z&&!E());){var we=p.callback;if(typeof we=="function"){p.callback=null,g=p.priorityLevel;var O=we(p.expirationTime<=$);$=t.unstable_now(),typeof O=="function"?p.callback=O:p===n(l)&&r(l),C($)}else r(l);p=n(l)}if(p!==null)var Y=!0;else{var J=n(c);J!==null&&U(F,J.startTime-$),Y=!1}return Y}finally{p=null,g=ne,m=!1}}var B=!1,j=null,y=-1,S=5,L=-1;function E(){return!(t.unstable_now()-L<S)}function I(){if(j!==null){var z=t.unstable_now();L=z;var $=!0;try{$=j(!0,z)}finally{$?k():(B=!1,j=null)}}else B=!1}var k;if(typeof N=="function")k=function(){N(I)};else if(typeof MessageChannel<"u"){var M=new MessageChannel,te=M.port2;M.port1.onmessage=I,k=function(){te.postMessage(null)}}else k=function(){T(I,0)};function V(z){j=z,B||(B=!0,k())}function U(z,$){y=T(function(){z(t.unstable_now())},$)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(z){z.callback=null},t.unstable_continueExecution=function(){b||m||(b=!0,V(Q))},t.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<z?Math.floor(1e3/z):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(z){switch(g){case 1:case 2:case 3:var $=3;break;default:$=g}var ne=g;g=$;try{return z()}finally{g=ne}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(z,$){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var ne=g;g=z;try{return $()}finally{g=ne}},t.unstable_scheduleCallback=function(z,$,ne){var we=t.unstable_now();switch(typeof ne=="object"&&ne!==null?(ne=ne.delay,ne=typeof ne=="number"&&0<ne?we+ne:we):ne=we,z){case 1:var O=-1;break;case 2:O=250;break;case 5:O=1073741823;break;case 4:O=1e4;break;default:O=5e3}return O=ne+O,z={id:d++,callback:$,priorityLevel:z,startTime:ne,expirationTime:O,sortIndex:-1},ne>we?(z.sortIndex=ne,e(c,z),n(l)===null&&z===n(c)&&(x?(w(y),y=-1):x=!0,U(F,ne-we))):(z.sortIndex=O,e(l,z),b||m||(b=!0,V(Q))),z},t.unstable_shouldYield=E,t.unstable_wrapCallback=function(z){var $=g;return function(){var ne=g;g=$;try{return z.apply(this,arguments)}finally{g=ne}}}})(yb);vb.exports=yb;var hE=vb.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dE=oe,Ai=hE;function qe(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var wb=new Set,Jh={};function ec(t,e){yu(t,e),yu(t+"Capture",e)}function yu(t,e){for(Jh[t]=e,t=0;t<e.length;t++)wb.add(e[t])}var ka=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),I1=Object.prototype.hasOwnProperty,fE=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Gy={},Qy={};function pE(t){return I1.call(Qy,t)?!0:I1.call(Gy,t)?!1:fE.test(t)?Qy[t]=!0:(Gy[t]=!0,!1)}function mE(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function gE(t,e,n,r){if(e===null||typeof e>"u"||mE(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Hr(t,e,n,r,i,s,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=a}var mr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){mr[t]=new Hr(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];mr[e]=new Hr(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){mr[t]=new Hr(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){mr[t]=new Hr(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){mr[t]=new Hr(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){mr[t]=new Hr(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){mr[t]=new Hr(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){mr[t]=new Hr(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){mr[t]=new Hr(t,5,!1,t.toLowerCase(),null,!1,!1)});var mv=/[\-:]([a-z])/g;function gv(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(mv,gv);mr[e]=new Hr(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(mv,gv);mr[e]=new Hr(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(mv,gv);mr[e]=new Hr(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){mr[t]=new Hr(t,1,!1,t.toLowerCase(),null,!1,!1)});mr.xlinkHref=new Hr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){mr[t]=new Hr(t,1,!1,t.toLowerCase(),null,!0,!0)});function vv(t,e,n,r){var i=mr.hasOwnProperty(e)?mr[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(gE(e,n,i,r)&&(n=null),r||i===null?pE(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Fa=dE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,yf=Symbol.for("react.element"),qc=Symbol.for("react.portal"),zc=Symbol.for("react.fragment"),yv=Symbol.for("react.strict_mode"),P1=Symbol.for("react.profiler"),_b=Symbol.for("react.provider"),bb=Symbol.for("react.context"),wv=Symbol.for("react.forward_ref"),C1=Symbol.for("react.suspense"),j1=Symbol.for("react.suspense_list"),_v=Symbol.for("react.memo"),_o=Symbol.for("react.lazy"),xb=Symbol.for("react.offscreen"),Yy=Symbol.iterator;function dh(t){return t===null||typeof t!="object"?null:(t=Yy&&t[Yy]||t["@@iterator"],typeof t=="function"?t:null)}var wn=Object.assign,Ig;function Ah(t){if(Ig===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Ig=e&&e[1]||""}return`
`+Ig+t}var Pg=!1;function Cg(t,e){if(!t||Pg)return"";Pg=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),a=i.length-1,o=s.length-1;1<=a&&0<=o&&i[a]!==s[o];)o--;for(;1<=a&&0<=o;a--,o--)if(i[a]!==s[o]){if(a!==1||o!==1)do if(a--,o--,0>o||i[a]!==s[o]){var l=`
`+i[a].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=a&&0<=o);break}}}finally{Pg=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ah(t):""}function vE(t){switch(t.tag){case 5:return Ah(t.type);case 16:return Ah("Lazy");case 13:return Ah("Suspense");case 19:return Ah("SuspenseList");case 0:case 2:case 15:return t=Cg(t.type,!1),t;case 11:return t=Cg(t.type.render,!1),t;case 1:return t=Cg(t.type,!0),t;default:return""}}function L1(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case zc:return"Fragment";case qc:return"Portal";case P1:return"Profiler";case yv:return"StrictMode";case C1:return"Suspense";case j1:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case bb:return(t.displayName||"Context")+".Consumer";case _b:return(t._context.displayName||"Context")+".Provider";case wv:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case _v:return e=t.displayName||null,e!==null?e:L1(t.type)||"Memo";case _o:e=t._payload,t=t._init;try{return L1(t(e))}catch{}}return null}function yE(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return L1(e);case 8:return e===yv?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Wo(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Sb(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function wE(t){var e=Sb(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(a){r=""+a,s.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function wf(t){t._valueTracker||(t._valueTracker=wE(t))}function Nb(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Sb(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function yp(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function R1(t,e){var n=e.checked;return wn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Jy(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Wo(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Ab(t,e){e=e.checked,e!=null&&vv(t,"checked",e,!1)}function D1(t,e){Ab(t,e);var n=Wo(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?F1(t,e.type,n):e.hasOwnProperty("defaultValue")&&F1(t,e.type,Wo(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Xy(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function F1(t,e,n){(e!=="number"||yp(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Eh=Array.isArray;function iu(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Wo(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function O1(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(qe(91));return wn({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Zy(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(qe(92));if(Eh(n)){if(1<n.length)throw Error(qe(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Wo(n)}}function Eb(t,e){var n=Wo(e.value),r=Wo(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function e5(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function kb(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function M1(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?kb(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var _f,Tb=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(_f=_f||document.createElement("div"),_f.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=_f.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Xh(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Dh={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},_E=["Webkit","ms","Moz","O"];Object.keys(Dh).forEach(function(t){_E.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Dh[e]=Dh[t]})});function Ib(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Dh.hasOwnProperty(t)&&Dh[t]?(""+e).trim():e+"px"}function Pb(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Ib(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var bE=wn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function V1(t,e){if(e){if(bE[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(qe(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(qe(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(qe(61))}if(e.style!=null&&typeof e.style!="object")throw Error(qe(62))}}function U1(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var B1=null;function bv(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var K1=null,su=null,au=null;function t5(t){if(t=Pd(t)){if(typeof K1!="function")throw Error(qe(280));var e=t.stateNode;e&&(e=_m(e),K1(t.stateNode,t.type,e))}}function Cb(t){su?au?au.push(t):au=[t]:su=t}function jb(){if(su){var t=su,e=au;if(au=su=null,t5(t),e)for(t=0;t<e.length;t++)t5(e[t])}}function Lb(t,e){return t(e)}function Rb(){}var jg=!1;function Db(t,e,n){if(jg)return t(e,n);jg=!0;try{return Lb(t,e,n)}finally{jg=!1,(su!==null||au!==null)&&(Rb(),jb())}}function Zh(t,e){var n=t.stateNode;if(n===null)return null;var r=_m(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(qe(231,e,typeof n));return n}var q1=!1;if(ka)try{var fh={};Object.defineProperty(fh,"passive",{get:function(){q1=!0}}),window.addEventListener("test",fh,fh),window.removeEventListener("test",fh,fh)}catch{q1=!1}function xE(t,e,n,r,i,s,a,o,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(d){this.onError(d)}}var Fh=!1,wp=null,_p=!1,z1=null,SE={onError:function(t){Fh=!0,wp=t}};function NE(t,e,n,r,i,s,a,o,l){Fh=!1,wp=null,xE.apply(SE,arguments)}function AE(t,e,n,r,i,s,a,o,l){if(NE.apply(this,arguments),Fh){if(Fh){var c=wp;Fh=!1,wp=null}else throw Error(qe(198));_p||(_p=!0,z1=c)}}function tc(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Fb(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function n5(t){if(tc(t)!==t)throw Error(qe(188))}function EE(t){var e=t.alternate;if(!e){if(e=tc(t),e===null)throw Error(qe(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return n5(i),t;if(s===r)return n5(i),e;s=s.sibling}throw Error(qe(188))}if(n.return!==r.return)n=i,r=s;else{for(var a=!1,o=i.child;o;){if(o===n){a=!0,n=i,r=s;break}if(o===r){a=!0,r=i,n=s;break}o=o.sibling}if(!a){for(o=s.child;o;){if(o===n){a=!0,n=s,r=i;break}if(o===r){a=!0,r=s,n=i;break}o=o.sibling}if(!a)throw Error(qe(189))}}if(n.alternate!==r)throw Error(qe(190))}if(n.tag!==3)throw Error(qe(188));return n.stateNode.current===n?t:e}function Ob(t){return t=EE(t),t!==null?Mb(t):null}function Mb(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Mb(t);if(e!==null)return e;t=t.sibling}return null}var Vb=Ai.unstable_scheduleCallback,r5=Ai.unstable_cancelCallback,kE=Ai.unstable_shouldYield,TE=Ai.unstable_requestPaint,Dn=Ai.unstable_now,IE=Ai.unstable_getCurrentPriorityLevel,xv=Ai.unstable_ImmediatePriority,Ub=Ai.unstable_UserBlockingPriority,bp=Ai.unstable_NormalPriority,PE=Ai.unstable_LowPriority,Bb=Ai.unstable_IdlePriority,gm=null,Vs=null;function CE(t){if(Vs&&typeof Vs.onCommitFiberRoot=="function")try{Vs.onCommitFiberRoot(gm,t,void 0,(t.current.flags&128)===128)}catch{}}var hs=Math.clz32?Math.clz32:RE,jE=Math.log,LE=Math.LN2;function RE(t){return t>>>=0,t===0?32:31-(jE(t)/LE|0)|0}var bf=64,xf=4194304;function kh(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function xp(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,a=n&268435455;if(a!==0){var o=a&~i;o!==0?r=kh(o):(s&=a,s!==0&&(r=kh(s)))}else a=n&~i,a!==0?r=kh(a):s!==0&&(r=kh(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-hs(e),i=1<<n,r|=t[n],e&=~i;return r}function DE(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function FE(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var a=31-hs(s),o=1<<a,l=i[a];l===-1?(!(o&n)||o&r)&&(i[a]=DE(o,e)):l<=e&&(t.expiredLanes|=o),s&=~o}}function $1(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Kb(){var t=bf;return bf<<=1,!(bf&4194240)&&(bf=64),t}function Lg(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Td(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-hs(e),t[e]=n}function OE(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-hs(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function Sv(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-hs(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Qt=0;function qb(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var zb,Nv,$b,Hb,Wb,H1=!1,Sf=[],Ro=null,Do=null,Fo=null,ed=new Map,td=new Map,xo=[],ME="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function i5(t,e){switch(t){case"focusin":case"focusout":Ro=null;break;case"dragenter":case"dragleave":Do=null;break;case"mouseover":case"mouseout":Fo=null;break;case"pointerover":case"pointerout":ed.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":td.delete(e.pointerId)}}function ph(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Pd(e),e!==null&&Nv(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function VE(t,e,n,r,i){switch(e){case"focusin":return Ro=ph(Ro,t,e,n,r,i),!0;case"dragenter":return Do=ph(Do,t,e,n,r,i),!0;case"mouseover":return Fo=ph(Fo,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return ed.set(s,ph(ed.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,td.set(s,ph(td.get(s)||null,t,e,n,r,i)),!0}return!1}function Gb(t){var e=jl(t.target);if(e!==null){var n=tc(e);if(n!==null){if(e=n.tag,e===13){if(e=Fb(n),e!==null){t.blockedOn=e,Wb(t.priority,function(){$b(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Wf(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=W1(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);B1=r,n.target.dispatchEvent(r),B1=null}else return e=Pd(n),e!==null&&Nv(e),t.blockedOn=n,!1;e.shift()}return!0}function s5(t,e,n){Wf(t)&&n.delete(e)}function UE(){H1=!1,Ro!==null&&Wf(Ro)&&(Ro=null),Do!==null&&Wf(Do)&&(Do=null),Fo!==null&&Wf(Fo)&&(Fo=null),ed.forEach(s5),td.forEach(s5)}function mh(t,e){t.blockedOn===e&&(t.blockedOn=null,H1||(H1=!0,Ai.unstable_scheduleCallback(Ai.unstable_NormalPriority,UE)))}function nd(t){function e(i){return mh(i,t)}if(0<Sf.length){mh(Sf[0],t);for(var n=1;n<Sf.length;n++){var r=Sf[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Ro!==null&&mh(Ro,t),Do!==null&&mh(Do,t),Fo!==null&&mh(Fo,t),ed.forEach(e),td.forEach(e),n=0;n<xo.length;n++)r=xo[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<xo.length&&(n=xo[0],n.blockedOn===null);)Gb(n),n.blockedOn===null&&xo.shift()}var ou=Fa.ReactCurrentBatchConfig,Sp=!0;function BE(t,e,n,r){var i=Qt,s=ou.transition;ou.transition=null;try{Qt=1,Av(t,e,n,r)}finally{Qt=i,ou.transition=s}}function KE(t,e,n,r){var i=Qt,s=ou.transition;ou.transition=null;try{Qt=4,Av(t,e,n,r)}finally{Qt=i,ou.transition=s}}function Av(t,e,n,r){if(Sp){var i=W1(t,e,n,r);if(i===null)qg(t,e,r,Np,n),i5(t,r);else if(VE(i,t,e,n,r))r.stopPropagation();else if(i5(t,r),e&4&&-1<ME.indexOf(t)){for(;i!==null;){var s=Pd(i);if(s!==null&&zb(s),s=W1(t,e,n,r),s===null&&qg(t,e,r,Np,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else qg(t,e,r,null,n)}}var Np=null;function W1(t,e,n,r){if(Np=null,t=bv(r),t=jl(t),t!==null)if(e=tc(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Fb(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Np=t,null}function Qb(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(IE()){case xv:return 1;case Ub:return 4;case bp:case PE:return 16;case Bb:return 536870912;default:return 16}default:return 16}}var Io=null,Ev=null,Gf=null;function Yb(){if(Gf)return Gf;var t,e=Ev,n=e.length,r,i="value"in Io?Io.value:Io.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var a=n-t;for(r=1;r<=a&&e[n-r]===i[s-r];r++);return Gf=i.slice(t,1<r?1-r:void 0)}function Qf(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Nf(){return!0}function a5(){return!1}function ki(t){function e(n,r,i,s,a){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(n=t[o],this[o]=n?n(s):s[o]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Nf:a5,this.isPropagationStopped=a5,this}return wn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Nf)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Nf)},persist:function(){},isPersistent:Nf}),e}var Du={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},kv=ki(Du),Id=wn({},Du,{view:0,detail:0}),qE=ki(Id),Rg,Dg,gh,vm=wn({},Id,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Tv,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==gh&&(gh&&t.type==="mousemove"?(Rg=t.screenX-gh.screenX,Dg=t.screenY-gh.screenY):Dg=Rg=0,gh=t),Rg)},movementY:function(t){return"movementY"in t?t.movementY:Dg}}),o5=ki(vm),zE=wn({},vm,{dataTransfer:0}),$E=ki(zE),HE=wn({},Id,{relatedTarget:0}),Fg=ki(HE),WE=wn({},Du,{animationName:0,elapsedTime:0,pseudoElement:0}),GE=ki(WE),QE=wn({},Du,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),YE=ki(QE),JE=wn({},Du,{data:0}),l5=ki(JE),XE={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ZE={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},e6={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function t6(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=e6[t])?!!e[t]:!1}function Tv(){return t6}var n6=wn({},Id,{key:function(t){if(t.key){var e=XE[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Qf(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?ZE[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Tv,charCode:function(t){return t.type==="keypress"?Qf(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Qf(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),r6=ki(n6),i6=wn({},vm,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),c5=ki(i6),s6=wn({},Id,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Tv}),a6=ki(s6),o6=wn({},Du,{propertyName:0,elapsedTime:0,pseudoElement:0}),l6=ki(o6),c6=wn({},vm,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),u6=ki(c6),h6=[9,13,27,32],Iv=ka&&"CompositionEvent"in window,Oh=null;ka&&"documentMode"in document&&(Oh=document.documentMode);var d6=ka&&"TextEvent"in window&&!Oh,Jb=ka&&(!Iv||Oh&&8<Oh&&11>=Oh),u5=" ",h5=!1;function Xb(t,e){switch(t){case"keyup":return h6.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Zb(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var $c=!1;function f6(t,e){switch(t){case"compositionend":return Zb(e);case"keypress":return e.which!==32?null:(h5=!0,u5);case"textInput":return t=e.data,t===u5&&h5?null:t;default:return null}}function p6(t,e){if($c)return t==="compositionend"||!Iv&&Xb(t,e)?(t=Yb(),Gf=Ev=Io=null,$c=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Jb&&e.locale!=="ko"?null:e.data;default:return null}}var m6={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function d5(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!m6[t.type]:e==="textarea"}function e4(t,e,n,r){Cb(r),e=Ap(e,"onChange"),0<e.length&&(n=new kv("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Mh=null,rd=null;function g6(t){h4(t,0)}function ym(t){var e=Gc(t);if(Nb(e))return t}function v6(t,e){if(t==="change")return e}var t4=!1;if(ka){var Og;if(ka){var Mg="oninput"in document;if(!Mg){var f5=document.createElement("div");f5.setAttribute("oninput","return;"),Mg=typeof f5.oninput=="function"}Og=Mg}else Og=!1;t4=Og&&(!document.documentMode||9<document.documentMode)}function p5(){Mh&&(Mh.detachEvent("onpropertychange",n4),rd=Mh=null)}function n4(t){if(t.propertyName==="value"&&ym(rd)){var e=[];e4(e,rd,t,bv(t)),Db(g6,e)}}function y6(t,e,n){t==="focusin"?(p5(),Mh=e,rd=n,Mh.attachEvent("onpropertychange",n4)):t==="focusout"&&p5()}function w6(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ym(rd)}function _6(t,e){if(t==="click")return ym(e)}function b6(t,e){if(t==="input"||t==="change")return ym(e)}function x6(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var fs=typeof Object.is=="function"?Object.is:x6;function id(t,e){if(fs(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!I1.call(e,i)||!fs(t[i],e[i]))return!1}return!0}function m5(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function g5(t,e){var n=m5(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=m5(n)}}function r4(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?r4(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function i4(){for(var t=window,e=yp();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=yp(t.document)}return e}function Pv(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function S6(t){var e=i4(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&r4(n.ownerDocument.documentElement,n)){if(r!==null&&Pv(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=g5(n,s);var a=g5(n,r);i&&a&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var N6=ka&&"documentMode"in document&&11>=document.documentMode,Hc=null,G1=null,Vh=null,Q1=!1;function v5(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Q1||Hc==null||Hc!==yp(r)||(r=Hc,"selectionStart"in r&&Pv(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Vh&&id(Vh,r)||(Vh=r,r=Ap(G1,"onSelect"),0<r.length&&(e=new kv("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Hc)))}function Af(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Wc={animationend:Af("Animation","AnimationEnd"),animationiteration:Af("Animation","AnimationIteration"),animationstart:Af("Animation","AnimationStart"),transitionend:Af("Transition","TransitionEnd")},Vg={},s4={};ka&&(s4=document.createElement("div").style,"AnimationEvent"in window||(delete Wc.animationend.animation,delete Wc.animationiteration.animation,delete Wc.animationstart.animation),"TransitionEvent"in window||delete Wc.transitionend.transition);function wm(t){if(Vg[t])return Vg[t];if(!Wc[t])return t;var e=Wc[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in s4)return Vg[t]=e[n];return t}var a4=wm("animationend"),o4=wm("animationiteration"),l4=wm("animationstart"),c4=wm("transitionend"),u4=new Map,y5="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function tl(t,e){u4.set(t,e),ec(e,[t])}for(var Ug=0;Ug<y5.length;Ug++){var Bg=y5[Ug],A6=Bg.toLowerCase(),E6=Bg[0].toUpperCase()+Bg.slice(1);tl(A6,"on"+E6)}tl(a4,"onAnimationEnd");tl(o4,"onAnimationIteration");tl(l4,"onAnimationStart");tl("dblclick","onDoubleClick");tl("focusin","onFocus");tl("focusout","onBlur");tl(c4,"onTransitionEnd");yu("onMouseEnter",["mouseout","mouseover"]);yu("onMouseLeave",["mouseout","mouseover"]);yu("onPointerEnter",["pointerout","pointerover"]);yu("onPointerLeave",["pointerout","pointerover"]);ec("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ec("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ec("onBeforeInput",["compositionend","keypress","textInput","paste"]);ec("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ec("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ec("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Th="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),k6=new Set("cancel close invalid load scroll toggle".split(" ").concat(Th));function w5(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,AE(r,e,void 0,t),t.currentTarget=null}function h4(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var a=r.length-1;0<=a;a--){var o=r[a],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==s&&i.isPropagationStopped())break e;w5(i,o,c),s=l}else for(a=0;a<r.length;a++){if(o=r[a],l=o.instance,c=o.currentTarget,o=o.listener,l!==s&&i.isPropagationStopped())break e;w5(i,o,c),s=l}}}if(_p)throw t=z1,_p=!1,z1=null,t}function ln(t,e){var n=e[e0];n===void 0&&(n=e[e0]=new Set);var r=t+"__bubble";n.has(r)||(d4(e,t,2,!1),n.add(r))}function Kg(t,e,n){var r=0;e&&(r|=4),d4(n,t,r,e)}var Ef="_reactListening"+Math.random().toString(36).slice(2);function sd(t){if(!t[Ef]){t[Ef]=!0,wb.forEach(function(n){n!=="selectionchange"&&(k6.has(n)||Kg(n,!1,t),Kg(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Ef]||(e[Ef]=!0,Kg("selectionchange",!1,e))}}function d4(t,e,n,r){switch(Qb(e)){case 1:var i=BE;break;case 4:i=KE;break;default:i=Av}n=i.bind(null,e,n,t),i=void 0,!q1||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function qg(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var o=r.stateNode.containerInfo;if(o===i||o.nodeType===8&&o.parentNode===i)break;if(a===4)for(a=r.return;a!==null;){var l=a.tag;if((l===3||l===4)&&(l=a.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;a=a.return}for(;o!==null;){if(a=jl(o),a===null)return;if(l=a.tag,l===5||l===6){r=s=a;continue e}o=o.parentNode}}r=r.return}Db(function(){var c=s,d=bv(n),p=[];e:{var g=u4.get(t);if(g!==void 0){var m=kv,b=t;switch(t){case"keypress":if(Qf(n)===0)break e;case"keydown":case"keyup":m=r6;break;case"focusin":b="focus",m=Fg;break;case"focusout":b="blur",m=Fg;break;case"beforeblur":case"afterblur":m=Fg;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=o5;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=$E;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=a6;break;case a4:case o4:case l4:m=GE;break;case c4:m=l6;break;case"scroll":m=qE;break;case"wheel":m=u6;break;case"copy":case"cut":case"paste":m=YE;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=c5}var x=(e&4)!==0,T=!x&&t==="scroll",w=x?g!==null?g+"Capture":null:g;x=[];for(var N=c,C;N!==null;){C=N;var F=C.stateNode;if(C.tag===5&&F!==null&&(C=F,w!==null&&(F=Zh(N,w),F!=null&&x.push(ad(N,F,C)))),T)break;N=N.return}0<x.length&&(g=new m(g,b,null,n,d),p.push({event:g,listeners:x}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",g&&n!==B1&&(b=n.relatedTarget||n.fromElement)&&(jl(b)||b[Ta]))break e;if((m||g)&&(g=d.window===d?d:(g=d.ownerDocument)?g.defaultView||g.parentWindow:window,m?(b=n.relatedTarget||n.toElement,m=c,b=b?jl(b):null,b!==null&&(T=tc(b),b!==T||b.tag!==5&&b.tag!==6)&&(b=null)):(m=null,b=c),m!==b)){if(x=o5,F="onMouseLeave",w="onMouseEnter",N="mouse",(t==="pointerout"||t==="pointerover")&&(x=c5,F="onPointerLeave",w="onPointerEnter",N="pointer"),T=m==null?g:Gc(m),C=b==null?g:Gc(b),g=new x(F,N+"leave",m,n,d),g.target=T,g.relatedTarget=C,F=null,jl(d)===c&&(x=new x(w,N+"enter",b,n,d),x.target=C,x.relatedTarget=T,F=x),T=F,m&&b)t:{for(x=m,w=b,N=0,C=x;C;C=Rc(C))N++;for(C=0,F=w;F;F=Rc(F))C++;for(;0<N-C;)x=Rc(x),N--;for(;0<C-N;)w=Rc(w),C--;for(;N--;){if(x===w||w!==null&&x===w.alternate)break t;x=Rc(x),w=Rc(w)}x=null}else x=null;m!==null&&_5(p,g,m,x,!1),b!==null&&T!==null&&_5(p,T,b,x,!0)}}e:{if(g=c?Gc(c):window,m=g.nodeName&&g.nodeName.toLowerCase(),m==="select"||m==="input"&&g.type==="file")var Q=v6;else if(d5(g))if(t4)Q=b6;else{Q=w6;var B=y6}else(m=g.nodeName)&&m.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(Q=_6);if(Q&&(Q=Q(t,c))){e4(p,Q,n,d);break e}B&&B(t,g,c),t==="focusout"&&(B=g._wrapperState)&&B.controlled&&g.type==="number"&&F1(g,"number",g.value)}switch(B=c?Gc(c):window,t){case"focusin":(d5(B)||B.contentEditable==="true")&&(Hc=B,G1=c,Vh=null);break;case"focusout":Vh=G1=Hc=null;break;case"mousedown":Q1=!0;break;case"contextmenu":case"mouseup":case"dragend":Q1=!1,v5(p,n,d);break;case"selectionchange":if(N6)break;case"keydown":case"keyup":v5(p,n,d)}var j;if(Iv)e:{switch(t){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else $c?Xb(t,n)&&(y="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(y="onCompositionStart");y&&(Jb&&n.locale!=="ko"&&($c||y!=="onCompositionStart"?y==="onCompositionEnd"&&$c&&(j=Yb()):(Io=d,Ev="value"in Io?Io.value:Io.textContent,$c=!0)),B=Ap(c,y),0<B.length&&(y=new l5(y,t,null,n,d),p.push({event:y,listeners:B}),j?y.data=j:(j=Zb(n),j!==null&&(y.data=j)))),(j=d6?f6(t,n):p6(t,n))&&(c=Ap(c,"onBeforeInput"),0<c.length&&(d=new l5("onBeforeInput","beforeinput",null,n,d),p.push({event:d,listeners:c}),d.data=j))}h4(p,e)})}function ad(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Ap(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Zh(t,n),s!=null&&r.unshift(ad(t,s,i)),s=Zh(t,e),s!=null&&r.push(ad(t,s,i))),t=t.return}return r}function Rc(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function _5(t,e,n,r,i){for(var s=e._reactName,a=[];n!==null&&n!==r;){var o=n,l=o.alternate,c=o.stateNode;if(l!==null&&l===r)break;o.tag===5&&c!==null&&(o=c,i?(l=Zh(n,s),l!=null&&a.unshift(ad(n,l,o))):i||(l=Zh(n,s),l!=null&&a.push(ad(n,l,o)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var T6=/\r\n?/g,I6=/\u0000|\uFFFD/g;function b5(t){return(typeof t=="string"?t:""+t).replace(T6,`
`).replace(I6,"")}function kf(t,e,n){if(e=b5(e),b5(t)!==e&&n)throw Error(qe(425))}function Ep(){}var Y1=null,J1=null;function X1(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Z1=typeof setTimeout=="function"?setTimeout:void 0,P6=typeof clearTimeout=="function"?clearTimeout:void 0,x5=typeof Promise=="function"?Promise:void 0,C6=typeof queueMicrotask=="function"?queueMicrotask:typeof x5<"u"?function(t){return x5.resolve(null).then(t).catch(j6)}:Z1;function j6(t){setTimeout(function(){throw t})}function zg(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),nd(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);nd(e)}function Oo(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function S5(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Fu=Math.random().toString(36).slice(2),Fs="__reactFiber$"+Fu,od="__reactProps$"+Fu,Ta="__reactContainer$"+Fu,e0="__reactEvents$"+Fu,L6="__reactListeners$"+Fu,R6="__reactHandles$"+Fu;function jl(t){var e=t[Fs];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Ta]||n[Fs]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=S5(t);t!==null;){if(n=t[Fs])return n;t=S5(t)}return e}t=n,n=t.parentNode}return null}function Pd(t){return t=t[Fs]||t[Ta],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Gc(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(qe(33))}function _m(t){return t[od]||null}var t0=[],Qc=-1;function nl(t){return{current:t}}function hn(t){0>Qc||(t.current=t0[Qc],t0[Qc]=null,Qc--)}function sn(t,e){Qc++,t0[Qc]=t.current,t.current=e}var Go={},jr=nl(Go),ai=nl(!1),ql=Go;function wu(t,e){var n=t.type.contextTypes;if(!n)return Go;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function oi(t){return t=t.childContextTypes,t!=null}function kp(){hn(ai),hn(jr)}function N5(t,e,n){if(jr.current!==Go)throw Error(qe(168));sn(jr,e),sn(ai,n)}function f4(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(qe(108,yE(t)||"Unknown",i));return wn({},n,r)}function Tp(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Go,ql=jr.current,sn(jr,t),sn(ai,ai.current),!0}function A5(t,e,n){var r=t.stateNode;if(!r)throw Error(qe(169));n?(t=f4(t,e,ql),r.__reactInternalMemoizedMergedChildContext=t,hn(ai),hn(jr),sn(jr,t)):hn(ai),sn(ai,n)}var va=null,bm=!1,$g=!1;function p4(t){va===null?va=[t]:va.push(t)}function D6(t){bm=!0,p4(t)}function rl(){if(!$g&&va!==null){$g=!0;var t=0,e=Qt;try{var n=va;for(Qt=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}va=null,bm=!1}catch(i){throw va!==null&&(va=va.slice(t+1)),Vb(xv,rl),i}finally{Qt=e,$g=!1}}return null}var Yc=[],Jc=0,Ip=null,Pp=0,Oi=[],Mi=0,zl=null,ya=1,wa="";function El(t,e){Yc[Jc++]=Pp,Yc[Jc++]=Ip,Ip=t,Pp=e}function m4(t,e,n){Oi[Mi++]=ya,Oi[Mi++]=wa,Oi[Mi++]=zl,zl=t;var r=ya;t=wa;var i=32-hs(r)-1;r&=~(1<<i),n+=1;var s=32-hs(e)+i;if(30<s){var a=i-i%5;s=(r&(1<<a)-1).toString(32),r>>=a,i-=a,ya=1<<32-hs(e)+i|n<<i|r,wa=s+t}else ya=1<<s|n<<i|r,wa=t}function Cv(t){t.return!==null&&(El(t,1),m4(t,1,0))}function jv(t){for(;t===Ip;)Ip=Yc[--Jc],Yc[Jc]=null,Pp=Yc[--Jc],Yc[Jc]=null;for(;t===zl;)zl=Oi[--Mi],Oi[Mi]=null,wa=Oi[--Mi],Oi[Mi]=null,ya=Oi[--Mi],Oi[Mi]=null}var Ni=null,_i=null,pn=!1,us=null;function g4(t,e){var n=Ui(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function E5(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Ni=t,_i=Oo(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Ni=t,_i=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=zl!==null?{id:ya,overflow:wa}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Ui(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Ni=t,_i=null,!0):!1;default:return!1}}function n0(t){return(t.mode&1)!==0&&(t.flags&128)===0}function r0(t){if(pn){var e=_i;if(e){var n=e;if(!E5(t,e)){if(n0(t))throw Error(qe(418));e=Oo(n.nextSibling);var r=Ni;e&&E5(t,e)?g4(r,n):(t.flags=t.flags&-4097|2,pn=!1,Ni=t)}}else{if(n0(t))throw Error(qe(418));t.flags=t.flags&-4097|2,pn=!1,Ni=t}}}function k5(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ni=t}function Tf(t){if(t!==Ni)return!1;if(!pn)return k5(t),pn=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!X1(t.type,t.memoizedProps)),e&&(e=_i)){if(n0(t))throw v4(),Error(qe(418));for(;e;)g4(t,e),e=Oo(e.nextSibling)}if(k5(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(qe(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){_i=Oo(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}_i=null}}else _i=Ni?Oo(t.stateNode.nextSibling):null;return!0}function v4(){for(var t=_i;t;)t=Oo(t.nextSibling)}function _u(){_i=Ni=null,pn=!1}function Lv(t){us===null?us=[t]:us.push(t)}var F6=Fa.ReactCurrentBatchConfig;function vh(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(qe(309));var r=n.stateNode}if(!r)throw Error(qe(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(a){var o=i.refs;a===null?delete o[s]:o[s]=a},e._stringRef=s,e)}if(typeof t!="string")throw Error(qe(284));if(!n._owner)throw Error(qe(290,t))}return t}function If(t,e){throw t=Object.prototype.toString.call(e),Error(qe(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function T5(t){var e=t._init;return e(t._payload)}function y4(t){function e(w,N){if(t){var C=w.deletions;C===null?(w.deletions=[N],w.flags|=16):C.push(N)}}function n(w,N){if(!t)return null;for(;N!==null;)e(w,N),N=N.sibling;return null}function r(w,N){for(w=new Map;N!==null;)N.key!==null?w.set(N.key,N):w.set(N.index,N),N=N.sibling;return w}function i(w,N){return w=Bo(w,N),w.index=0,w.sibling=null,w}function s(w,N,C){return w.index=C,t?(C=w.alternate,C!==null?(C=C.index,C<N?(w.flags|=2,N):C):(w.flags|=2,N)):(w.flags|=1048576,N)}function a(w){return t&&w.alternate===null&&(w.flags|=2),w}function o(w,N,C,F){return N===null||N.tag!==6?(N=Xg(C,w.mode,F),N.return=w,N):(N=i(N,C),N.return=w,N)}function l(w,N,C,F){var Q=C.type;return Q===zc?d(w,N,C.props.children,F,C.key):N!==null&&(N.elementType===Q||typeof Q=="object"&&Q!==null&&Q.$$typeof===_o&&T5(Q)===N.type)?(F=i(N,C.props),F.ref=vh(w,N,C),F.return=w,F):(F=np(C.type,C.key,C.props,null,w.mode,F),F.ref=vh(w,N,C),F.return=w,F)}function c(w,N,C,F){return N===null||N.tag!==4||N.stateNode.containerInfo!==C.containerInfo||N.stateNode.implementation!==C.implementation?(N=Zg(C,w.mode,F),N.return=w,N):(N=i(N,C.children||[]),N.return=w,N)}function d(w,N,C,F,Q){return N===null||N.tag!==7?(N=Ml(C,w.mode,F,Q),N.return=w,N):(N=i(N,C),N.return=w,N)}function p(w,N,C){if(typeof N=="string"&&N!==""||typeof N=="number")return N=Xg(""+N,w.mode,C),N.return=w,N;if(typeof N=="object"&&N!==null){switch(N.$$typeof){case yf:return C=np(N.type,N.key,N.props,null,w.mode,C),C.ref=vh(w,null,N),C.return=w,C;case qc:return N=Zg(N,w.mode,C),N.return=w,N;case _o:var F=N._init;return p(w,F(N._payload),C)}if(Eh(N)||dh(N))return N=Ml(N,w.mode,C,null),N.return=w,N;If(w,N)}return null}function g(w,N,C,F){var Q=N!==null?N.key:null;if(typeof C=="string"&&C!==""||typeof C=="number")return Q!==null?null:o(w,N,""+C,F);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case yf:return C.key===Q?l(w,N,C,F):null;case qc:return C.key===Q?c(w,N,C,F):null;case _o:return Q=C._init,g(w,N,Q(C._payload),F)}if(Eh(C)||dh(C))return Q!==null?null:d(w,N,C,F,null);If(w,C)}return null}function m(w,N,C,F,Q){if(typeof F=="string"&&F!==""||typeof F=="number")return w=w.get(C)||null,o(N,w,""+F,Q);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case yf:return w=w.get(F.key===null?C:F.key)||null,l(N,w,F,Q);case qc:return w=w.get(F.key===null?C:F.key)||null,c(N,w,F,Q);case _o:var B=F._init;return m(w,N,C,B(F._payload),Q)}if(Eh(F)||dh(F))return w=w.get(C)||null,d(N,w,F,Q,null);If(N,F)}return null}function b(w,N,C,F){for(var Q=null,B=null,j=N,y=N=0,S=null;j!==null&&y<C.length;y++){j.index>y?(S=j,j=null):S=j.sibling;var L=g(w,j,C[y],F);if(L===null){j===null&&(j=S);break}t&&j&&L.alternate===null&&e(w,j),N=s(L,N,y),B===null?Q=L:B.sibling=L,B=L,j=S}if(y===C.length)return n(w,j),pn&&El(w,y),Q;if(j===null){for(;y<C.length;y++)j=p(w,C[y],F),j!==null&&(N=s(j,N,y),B===null?Q=j:B.sibling=j,B=j);return pn&&El(w,y),Q}for(j=r(w,j);y<C.length;y++)S=m(j,w,y,C[y],F),S!==null&&(t&&S.alternate!==null&&j.delete(S.key===null?y:S.key),N=s(S,N,y),B===null?Q=S:B.sibling=S,B=S);return t&&j.forEach(function(E){return e(w,E)}),pn&&El(w,y),Q}function x(w,N,C,F){var Q=dh(C);if(typeof Q!="function")throw Error(qe(150));if(C=Q.call(C),C==null)throw Error(qe(151));for(var B=Q=null,j=N,y=N=0,S=null,L=C.next();j!==null&&!L.done;y++,L=C.next()){j.index>y?(S=j,j=null):S=j.sibling;var E=g(w,j,L.value,F);if(E===null){j===null&&(j=S);break}t&&j&&E.alternate===null&&e(w,j),N=s(E,N,y),B===null?Q=E:B.sibling=E,B=E,j=S}if(L.done)return n(w,j),pn&&El(w,y),Q;if(j===null){for(;!L.done;y++,L=C.next())L=p(w,L.value,F),L!==null&&(N=s(L,N,y),B===null?Q=L:B.sibling=L,B=L);return pn&&El(w,y),Q}for(j=r(w,j);!L.done;y++,L=C.next())L=m(j,w,y,L.value,F),L!==null&&(t&&L.alternate!==null&&j.delete(L.key===null?y:L.key),N=s(L,N,y),B===null?Q=L:B.sibling=L,B=L);return t&&j.forEach(function(I){return e(w,I)}),pn&&El(w,y),Q}function T(w,N,C,F){if(typeof C=="object"&&C!==null&&C.type===zc&&C.key===null&&(C=C.props.children),typeof C=="object"&&C!==null){switch(C.$$typeof){case yf:e:{for(var Q=C.key,B=N;B!==null;){if(B.key===Q){if(Q=C.type,Q===zc){if(B.tag===7){n(w,B.sibling),N=i(B,C.props.children),N.return=w,w=N;break e}}else if(B.elementType===Q||typeof Q=="object"&&Q!==null&&Q.$$typeof===_o&&T5(Q)===B.type){n(w,B.sibling),N=i(B,C.props),N.ref=vh(w,B,C),N.return=w,w=N;break e}n(w,B);break}else e(w,B);B=B.sibling}C.type===zc?(N=Ml(C.props.children,w.mode,F,C.key),N.return=w,w=N):(F=np(C.type,C.key,C.props,null,w.mode,F),F.ref=vh(w,N,C),F.return=w,w=F)}return a(w);case qc:e:{for(B=C.key;N!==null;){if(N.key===B)if(N.tag===4&&N.stateNode.containerInfo===C.containerInfo&&N.stateNode.implementation===C.implementation){n(w,N.sibling),N=i(N,C.children||[]),N.return=w,w=N;break e}else{n(w,N);break}else e(w,N);N=N.sibling}N=Zg(C,w.mode,F),N.return=w,w=N}return a(w);case _o:return B=C._init,T(w,N,B(C._payload),F)}if(Eh(C))return b(w,N,C,F);if(dh(C))return x(w,N,C,F);If(w,C)}return typeof C=="string"&&C!==""||typeof C=="number"?(C=""+C,N!==null&&N.tag===6?(n(w,N.sibling),N=i(N,C),N.return=w,w=N):(n(w,N),N=Xg(C,w.mode,F),N.return=w,w=N),a(w)):n(w,N)}return T}var bu=y4(!0),w4=y4(!1),Cp=nl(null),jp=null,Xc=null,Rv=null;function Dv(){Rv=Xc=jp=null}function Fv(t){var e=Cp.current;hn(Cp),t._currentValue=e}function i0(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function lu(t,e){jp=t,Rv=Xc=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(si=!0),t.firstContext=null)}function qi(t){var e=t._currentValue;if(Rv!==t)if(t={context:t,memoizedValue:e,next:null},Xc===null){if(jp===null)throw Error(qe(308));Xc=t,jp.dependencies={lanes:0,firstContext:t}}else Xc=Xc.next=t;return e}var Ll=null;function Ov(t){Ll===null?Ll=[t]:Ll.push(t)}function _4(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Ov(e)):(n.next=i.next,i.next=n),e.interleaved=n,Ia(t,r)}function Ia(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var bo=!1;function Mv(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function b4(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Na(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Mo(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Vt&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Ia(t,n)}return i=r.interleaved,i===null?(e.next=e,Ov(r)):(e.next=i.next,i.next=e),r.interleaved=e,Ia(t,n)}function Yf(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Sv(t,n)}}function I5(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=a:s=s.next=a,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Lp(t,e,n,r){var i=t.updateQueue;bo=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,o=i.shared.pending;if(o!==null){i.shared.pending=null;var l=o,c=l.next;l.next=null,a===null?s=c:a.next=c,a=l;var d=t.alternate;d!==null&&(d=d.updateQueue,o=d.lastBaseUpdate,o!==a&&(o===null?d.firstBaseUpdate=c:o.next=c,d.lastBaseUpdate=l))}if(s!==null){var p=i.baseState;a=0,d=c=l=null,o=s;do{var g=o.lane,m=o.eventTime;if((r&g)===g){d!==null&&(d=d.next={eventTime:m,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var b=t,x=o;switch(g=e,m=n,x.tag){case 1:if(b=x.payload,typeof b=="function"){p=b.call(m,p,g);break e}p=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=x.payload,g=typeof b=="function"?b.call(m,p,g):b,g==null)break e;p=wn({},p,g);break e;case 2:bo=!0}}o.callback!==null&&o.lane!==0&&(t.flags|=64,g=i.effects,g===null?i.effects=[o]:g.push(o))}else m={eventTime:m,lane:g,tag:o.tag,payload:o.payload,callback:o.callback,next:null},d===null?(c=d=m,l=p):d=d.next=m,a|=g;if(o=o.next,o===null){if(o=i.shared.pending,o===null)break;g=o,o=g.next,g.next=null,i.lastBaseUpdate=g,i.shared.pending=null}}while(!0);if(d===null&&(l=p),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do a|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Hl|=a,t.lanes=a,t.memoizedState=p}}function P5(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(qe(191,i));i.call(r)}}}var Cd={},Us=nl(Cd),ld=nl(Cd),cd=nl(Cd);function Rl(t){if(t===Cd)throw Error(qe(174));return t}function Vv(t,e){switch(sn(cd,e),sn(ld,t),sn(Us,Cd),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:M1(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=M1(e,t)}hn(Us),sn(Us,e)}function xu(){hn(Us),hn(ld),hn(cd)}function x4(t){Rl(cd.current);var e=Rl(Us.current),n=M1(e,t.type);e!==n&&(sn(ld,t),sn(Us,n))}function Uv(t){ld.current===t&&(hn(Us),hn(ld))}var gn=nl(0);function Rp(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Hg=[];function Bv(){for(var t=0;t<Hg.length;t++)Hg[t]._workInProgressVersionPrimary=null;Hg.length=0}var Jf=Fa.ReactCurrentDispatcher,Wg=Fa.ReactCurrentBatchConfig,$l=0,vn=null,Yn=null,nr=null,Dp=!1,Uh=!1,ud=0,O6=0;function br(){throw Error(qe(321))}function Kv(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!fs(t[n],e[n]))return!1;return!0}function qv(t,e,n,r,i,s){if($l=s,vn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Jf.current=t===null||t.memoizedState===null?B6:K6,t=n(r,i),Uh){s=0;do{if(Uh=!1,ud=0,25<=s)throw Error(qe(301));s+=1,nr=Yn=null,e.updateQueue=null,Jf.current=q6,t=n(r,i)}while(Uh)}if(Jf.current=Fp,e=Yn!==null&&Yn.next!==null,$l=0,nr=Yn=vn=null,Dp=!1,e)throw Error(qe(300));return t}function zv(){var t=ud!==0;return ud=0,t}function Rs(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return nr===null?vn.memoizedState=nr=t:nr=nr.next=t,nr}function zi(){if(Yn===null){var t=vn.alternate;t=t!==null?t.memoizedState:null}else t=Yn.next;var e=nr===null?vn.memoizedState:nr.next;if(e!==null)nr=e,Yn=t;else{if(t===null)throw Error(qe(310));Yn=t,t={memoizedState:Yn.memoizedState,baseState:Yn.baseState,baseQueue:Yn.baseQueue,queue:Yn.queue,next:null},nr===null?vn.memoizedState=nr=t:nr=nr.next=t}return nr}function hd(t,e){return typeof e=="function"?e(t):e}function Gg(t){var e=zi(),n=e.queue;if(n===null)throw Error(qe(311));n.lastRenderedReducer=t;var r=Yn,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var a=i.next;i.next=s.next,s.next=a}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var o=a=null,l=null,c=s;do{var d=c.lane;if(($l&d)===d)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var p={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(o=l=p,a=r):l=l.next=p,vn.lanes|=d,Hl|=d}c=c.next}while(c!==null&&c!==s);l===null?a=r:l.next=o,fs(r,e.memoizedState)||(si=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,vn.lanes|=s,Hl|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Qg(t){var e=zi(),n=e.queue;if(n===null)throw Error(qe(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var a=i=i.next;do s=t(s,a.action),a=a.next;while(a!==i);fs(s,e.memoizedState)||(si=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function S4(){}function N4(t,e){var n=vn,r=zi(),i=e(),s=!fs(r.memoizedState,i);if(s&&(r.memoizedState=i,si=!0),r=r.queue,$v(k4.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||nr!==null&&nr.memoizedState.tag&1){if(n.flags|=2048,dd(9,E4.bind(null,n,r,i,e),void 0,null),ir===null)throw Error(qe(349));$l&30||A4(n,e,i)}return i}function A4(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=vn.updateQueue,e===null?(e={lastEffect:null,stores:null},vn.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function E4(t,e,n,r){e.value=n,e.getSnapshot=r,T4(e)&&I4(t)}function k4(t,e,n){return n(function(){T4(e)&&I4(t)})}function T4(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!fs(t,n)}catch{return!0}}function I4(t){var e=Ia(t,1);e!==null&&ds(e,t,1,-1)}function C5(t){var e=Rs();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:hd,lastRenderedState:t},e.queue=t,t=t.dispatch=U6.bind(null,vn,t),[e.memoizedState,t]}function dd(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=vn.updateQueue,e===null?(e={lastEffect:null,stores:null},vn.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function P4(){return zi().memoizedState}function Xf(t,e,n,r){var i=Rs();vn.flags|=t,i.memoizedState=dd(1|e,n,void 0,r===void 0?null:r)}function xm(t,e,n,r){var i=zi();r=r===void 0?null:r;var s=void 0;if(Yn!==null){var a=Yn.memoizedState;if(s=a.destroy,r!==null&&Kv(r,a.deps)){i.memoizedState=dd(e,n,s,r);return}}vn.flags|=t,i.memoizedState=dd(1|e,n,s,r)}function j5(t,e){return Xf(8390656,8,t,e)}function $v(t,e){return xm(2048,8,t,e)}function C4(t,e){return xm(4,2,t,e)}function j4(t,e){return xm(4,4,t,e)}function L4(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function R4(t,e,n){return n=n!=null?n.concat([t]):null,xm(4,4,L4.bind(null,e,t),n)}function Hv(){}function D4(t,e){var n=zi();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Kv(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function F4(t,e){var n=zi();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Kv(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function O4(t,e,n){return $l&21?(fs(n,e)||(n=Kb(),vn.lanes|=n,Hl|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,si=!0),t.memoizedState=n)}function M6(t,e){var n=Qt;Qt=n!==0&&4>n?n:4,t(!0);var r=Wg.transition;Wg.transition={};try{t(!1),e()}finally{Qt=n,Wg.transition=r}}function M4(){return zi().memoizedState}function V6(t,e,n){var r=Uo(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},V4(t))U4(e,n);else if(n=_4(t,e,n,r),n!==null){var i=qr();ds(n,t,r,i),B4(n,e,r)}}function U6(t,e,n){var r=Uo(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(V4(t))U4(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var a=e.lastRenderedState,o=s(a,n);if(i.hasEagerState=!0,i.eagerState=o,fs(o,a)){var l=e.interleaved;l===null?(i.next=i,Ov(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=_4(t,e,i,r),n!==null&&(i=qr(),ds(n,t,r,i),B4(n,e,r))}}function V4(t){var e=t.alternate;return t===vn||e!==null&&e===vn}function U4(t,e){Uh=Dp=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function B4(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Sv(t,n)}}var Fp={readContext:qi,useCallback:br,useContext:br,useEffect:br,useImperativeHandle:br,useInsertionEffect:br,useLayoutEffect:br,useMemo:br,useReducer:br,useRef:br,useState:br,useDebugValue:br,useDeferredValue:br,useTransition:br,useMutableSource:br,useSyncExternalStore:br,useId:br,unstable_isNewReconciler:!1},B6={readContext:qi,useCallback:function(t,e){return Rs().memoizedState=[t,e===void 0?null:e],t},useContext:qi,useEffect:j5,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Xf(4194308,4,L4.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Xf(4194308,4,t,e)},useInsertionEffect:function(t,e){return Xf(4,2,t,e)},useMemo:function(t,e){var n=Rs();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Rs();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=V6.bind(null,vn,t),[r.memoizedState,t]},useRef:function(t){var e=Rs();return t={current:t},e.memoizedState=t},useState:C5,useDebugValue:Hv,useDeferredValue:function(t){return Rs().memoizedState=t},useTransition:function(){var t=C5(!1),e=t[0];return t=M6.bind(null,t[1]),Rs().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=vn,i=Rs();if(pn){if(n===void 0)throw Error(qe(407));n=n()}else{if(n=e(),ir===null)throw Error(qe(349));$l&30||A4(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,j5(k4.bind(null,r,s,t),[t]),r.flags|=2048,dd(9,E4.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Rs(),e=ir.identifierPrefix;if(pn){var n=wa,r=ya;n=(r&~(1<<32-hs(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=ud++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=O6++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},K6={readContext:qi,useCallback:D4,useContext:qi,useEffect:$v,useImperativeHandle:R4,useInsertionEffect:C4,useLayoutEffect:j4,useMemo:F4,useReducer:Gg,useRef:P4,useState:function(){return Gg(hd)},useDebugValue:Hv,useDeferredValue:function(t){var e=zi();return O4(e,Yn.memoizedState,t)},useTransition:function(){var t=Gg(hd)[0],e=zi().memoizedState;return[t,e]},useMutableSource:S4,useSyncExternalStore:N4,useId:M4,unstable_isNewReconciler:!1},q6={readContext:qi,useCallback:D4,useContext:qi,useEffect:$v,useImperativeHandle:R4,useInsertionEffect:C4,useLayoutEffect:j4,useMemo:F4,useReducer:Qg,useRef:P4,useState:function(){return Qg(hd)},useDebugValue:Hv,useDeferredValue:function(t){var e=zi();return Yn===null?e.memoizedState=t:O4(e,Yn.memoizedState,t)},useTransition:function(){var t=Qg(hd)[0],e=zi().memoizedState;return[t,e]},useMutableSource:S4,useSyncExternalStore:N4,useId:M4,unstable_isNewReconciler:!1};function os(t,e){if(t&&t.defaultProps){e=wn({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function s0(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:wn({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Sm={isMounted:function(t){return(t=t._reactInternals)?tc(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=qr(),i=Uo(t),s=Na(r,i);s.payload=e,n!=null&&(s.callback=n),e=Mo(t,s,i),e!==null&&(ds(e,t,i,r),Yf(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=qr(),i=Uo(t),s=Na(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Mo(t,s,i),e!==null&&(ds(e,t,i,r),Yf(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=qr(),r=Uo(t),i=Na(n,r);i.tag=2,e!=null&&(i.callback=e),e=Mo(t,i,r),e!==null&&(ds(e,t,r,n),Yf(e,t,r))}};function L5(t,e,n,r,i,s,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,a):e.prototype&&e.prototype.isPureReactComponent?!id(n,r)||!id(i,s):!0}function K4(t,e,n){var r=!1,i=Go,s=e.contextType;return typeof s=="object"&&s!==null?s=qi(s):(i=oi(e)?ql:jr.current,r=e.contextTypes,s=(r=r!=null)?wu(t,i):Go),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Sm,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function R5(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Sm.enqueueReplaceState(e,e.state,null)}function a0(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Mv(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=qi(s):(s=oi(e)?ql:jr.current,i.context=wu(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(s0(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Sm.enqueueReplaceState(i,i.state,null),Lp(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Su(t,e){try{var n="",r=e;do n+=vE(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Yg(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function o0(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var z6=typeof WeakMap=="function"?WeakMap:Map;function q4(t,e,n){n=Na(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Mp||(Mp=!0,v0=r),o0(t,e)},n}function z4(t,e,n){n=Na(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){o0(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){o0(t,e),typeof r!="function"&&(Vo===null?Vo=new Set([this]):Vo.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function D5(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new z6;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=ik.bind(null,t,e,n),e.then(t,t))}function F5(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function O5(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Na(-1,1),e.tag=2,Mo(n,e,1))),n.lanes|=1),t)}var $6=Fa.ReactCurrentOwner,si=!1;function Kr(t,e,n,r){e.child=t===null?w4(e,null,n,r):bu(e,t.child,n,r)}function M5(t,e,n,r,i){n=n.render;var s=e.ref;return lu(e,i),r=qv(t,e,n,r,s,i),n=zv(),t!==null&&!si?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Pa(t,e,i)):(pn&&n&&Cv(e),e.flags|=1,Kr(t,e,r,i),e.child)}function V5(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!e2(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,$4(t,e,s,r,i)):(t=np(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var a=s.memoizedProps;if(n=n.compare,n=n!==null?n:id,n(a,r)&&t.ref===e.ref)return Pa(t,e,i)}return e.flags|=1,t=Bo(s,r),t.ref=e.ref,t.return=e,e.child=t}function $4(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(id(s,r)&&t.ref===e.ref)if(si=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(si=!0);else return e.lanes=t.lanes,Pa(t,e,i)}return l0(t,e,n,r,i)}function H4(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},sn(eu,wi),wi|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,sn(eu,wi),wi|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,sn(eu,wi),wi|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,sn(eu,wi),wi|=r;return Kr(t,e,i,n),e.child}function W4(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function l0(t,e,n,r,i){var s=oi(n)?ql:jr.current;return s=wu(e,s),lu(e,i),n=qv(t,e,n,r,s,i),r=zv(),t!==null&&!si?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Pa(t,e,i)):(pn&&r&&Cv(e),e.flags|=1,Kr(t,e,n,i),e.child)}function U5(t,e,n,r,i){if(oi(n)){var s=!0;Tp(e)}else s=!1;if(lu(e,i),e.stateNode===null)Zf(t,e),K4(e,n,r),a0(e,n,r,i),r=!0;else if(t===null){var a=e.stateNode,o=e.memoizedProps;a.props=o;var l=a.context,c=n.contextType;typeof c=="object"&&c!==null?c=qi(c):(c=oi(n)?ql:jr.current,c=wu(e,c));var d=n.getDerivedStateFromProps,p=typeof d=="function"||typeof a.getSnapshotBeforeUpdate=="function";p||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==r||l!==c)&&R5(e,a,r,c),bo=!1;var g=e.memoizedState;a.state=g,Lp(e,r,a,i),l=e.memoizedState,o!==r||g!==l||ai.current||bo?(typeof d=="function"&&(s0(e,n,d,r),l=e.memoizedState),(o=bo||L5(e,n,o,r,g,l,c))?(p||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),a.props=r,a.state=l,a.context=c,r=o):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,b4(t,e),o=e.memoizedProps,c=e.type===e.elementType?o:os(e.type,o),a.props=c,p=e.pendingProps,g=a.context,l=n.contextType,typeof l=="object"&&l!==null?l=qi(l):(l=oi(n)?ql:jr.current,l=wu(e,l));var m=n.getDerivedStateFromProps;(d=typeof m=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==p||g!==l)&&R5(e,a,r,l),bo=!1,g=e.memoizedState,a.state=g,Lp(e,r,a,i);var b=e.memoizedState;o!==p||g!==b||ai.current||bo?(typeof m=="function"&&(s0(e,n,m,r),b=e.memoizedState),(c=bo||L5(e,n,c,r,g,b,l)||!1)?(d||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,b,l),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,b,l)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=b),a.props=r,a.state=b,a.context=l,r=c):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),r=!1)}return c0(t,e,n,r,s,i)}function c0(t,e,n,r,i,s){W4(t,e);var a=(e.flags&128)!==0;if(!r&&!a)return i&&A5(e,n,!1),Pa(t,e,s);r=e.stateNode,$6.current=e;var o=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&a?(e.child=bu(e,t.child,null,s),e.child=bu(e,null,o,s)):Kr(t,e,o,s),e.memoizedState=r.state,i&&A5(e,n,!0),e.child}function G4(t){var e=t.stateNode;e.pendingContext?N5(t,e.pendingContext,e.pendingContext!==e.context):e.context&&N5(t,e.context,!1),Vv(t,e.containerInfo)}function B5(t,e,n,r,i){return _u(),Lv(i),e.flags|=256,Kr(t,e,n,r),e.child}var u0={dehydrated:null,treeContext:null,retryLane:0};function h0(t){return{baseLanes:t,cachePool:null,transitions:null}}function Q4(t,e,n){var r=e.pendingProps,i=gn.current,s=!1,a=(e.flags&128)!==0,o;if((o=a)||(o=t!==null&&t.memoizedState===null?!1:(i&2)!==0),o?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),sn(gn,i&1),t===null)return r0(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=r.children,t=r.fallback,s?(r=e.mode,s=e.child,a={mode:"hidden",children:a},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=a):s=Em(a,r,0,null),t=Ml(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=h0(n),e.memoizedState=u0,t):Wv(e,a));if(i=t.memoizedState,i!==null&&(o=i.dehydrated,o!==null))return H6(t,e,a,r,o,i,n);if(s){s=r.fallback,a=e.mode,i=t.child,o=i.sibling;var l={mode:"hidden",children:r.children};return!(a&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Bo(i,l),r.subtreeFlags=i.subtreeFlags&14680064),o!==null?s=Bo(o,s):(s=Ml(s,a,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,a=t.child.memoizedState,a=a===null?h0(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},s.memoizedState=a,s.childLanes=t.childLanes&~n,e.memoizedState=u0,r}return s=t.child,t=s.sibling,r=Bo(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Wv(t,e){return e=Em({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Pf(t,e,n,r){return r!==null&&Lv(r),bu(e,t.child,null,n),t=Wv(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function H6(t,e,n,r,i,s,a){if(n)return e.flags&256?(e.flags&=-257,r=Yg(Error(qe(422))),Pf(t,e,a,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Em({mode:"visible",children:r.children},i,0,null),s=Ml(s,i,a,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&bu(e,t.child,null,a),e.child.memoizedState=h0(a),e.memoizedState=u0,s);if(!(e.mode&1))return Pf(t,e,a,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var o=r.dgst;return r=o,s=Error(qe(419)),r=Yg(s,r,void 0),Pf(t,e,a,r)}if(o=(a&t.childLanes)!==0,si||o){if(r=ir,r!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|a)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Ia(t,i),ds(r,t,i,-1))}return Zv(),r=Yg(Error(qe(421))),Pf(t,e,a,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=sk.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,_i=Oo(i.nextSibling),Ni=e,pn=!0,us=null,t!==null&&(Oi[Mi++]=ya,Oi[Mi++]=wa,Oi[Mi++]=zl,ya=t.id,wa=t.overflow,zl=e),e=Wv(e,r.children),e.flags|=4096,e)}function K5(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),i0(t.return,e,n)}function Jg(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Y4(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Kr(t,e,r.children,n),r=gn.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&K5(t,n,e);else if(t.tag===19)K5(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(sn(gn,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Rp(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Jg(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Rp(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Jg(e,!0,n,null,s);break;case"together":Jg(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Zf(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Pa(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Hl|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(qe(153));if(e.child!==null){for(t=e.child,n=Bo(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Bo(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function W6(t,e,n){switch(e.tag){case 3:G4(e),_u();break;case 5:x4(e);break;case 1:oi(e.type)&&Tp(e);break;case 4:Vv(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;sn(Cp,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(sn(gn,gn.current&1),e.flags|=128,null):n&e.child.childLanes?Q4(t,e,n):(sn(gn,gn.current&1),t=Pa(t,e,n),t!==null?t.sibling:null);sn(gn,gn.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Y4(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),sn(gn,gn.current),r)break;return null;case 22:case 23:return e.lanes=0,H4(t,e,n)}return Pa(t,e,n)}var J4,d0,X4,Z4;J4=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};d0=function(){};X4=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Rl(Us.current);var s=null;switch(n){case"input":i=R1(t,i),r=R1(t,r),s=[];break;case"select":i=wn({},i,{value:void 0}),r=wn({},r,{value:void 0}),s=[];break;case"textarea":i=O1(t,i),r=O1(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Ep)}V1(n,r);var a;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var o=i[c];for(a in o)o.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Jh.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(o=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==o&&(l!=null||o!=null))if(c==="style")if(o){for(a in o)!o.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in l)l.hasOwnProperty(a)&&o[a]!==l[a]&&(n||(n={}),n[a]=l[a])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,o=o?o.__html:void 0,l!=null&&o!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Jh.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&ln("scroll",t),s||o===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};Z4=function(t,e,n,r){n!==r&&(e.flags|=4)};function yh(t,e){if(!pn)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function xr(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function G6(t,e,n){var r=e.pendingProps;switch(jv(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return xr(e),null;case 1:return oi(e.type)&&kp(),xr(e),null;case 3:return r=e.stateNode,xu(),hn(ai),hn(jr),Bv(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Tf(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,us!==null&&(_0(us),us=null))),d0(t,e),xr(e),null;case 5:Uv(e);var i=Rl(cd.current);if(n=e.type,t!==null&&e.stateNode!=null)X4(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(qe(166));return xr(e),null}if(t=Rl(Us.current),Tf(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Fs]=e,r[od]=s,t=(e.mode&1)!==0,n){case"dialog":ln("cancel",r),ln("close",r);break;case"iframe":case"object":case"embed":ln("load",r);break;case"video":case"audio":for(i=0;i<Th.length;i++)ln(Th[i],r);break;case"source":ln("error",r);break;case"img":case"image":case"link":ln("error",r),ln("load",r);break;case"details":ln("toggle",r);break;case"input":Jy(r,s),ln("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},ln("invalid",r);break;case"textarea":Zy(r,s),ln("invalid",r)}V1(n,s),i=null;for(var a in s)if(s.hasOwnProperty(a)){var o=s[a];a==="children"?typeof o=="string"?r.textContent!==o&&(s.suppressHydrationWarning!==!0&&kf(r.textContent,o,t),i=["children",o]):typeof o=="number"&&r.textContent!==""+o&&(s.suppressHydrationWarning!==!0&&kf(r.textContent,o,t),i=["children",""+o]):Jh.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&ln("scroll",r)}switch(n){case"input":wf(r),Xy(r,s,!0);break;case"textarea":wf(r),e5(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Ep)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=kb(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=a.createElement(n,{is:r.is}):(t=a.createElement(n),n==="select"&&(a=t,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):t=a.createElementNS(t,n),t[Fs]=e,t[od]=r,J4(t,e,!1,!1),e.stateNode=t;e:{switch(a=U1(n,r),n){case"dialog":ln("cancel",t),ln("close",t),i=r;break;case"iframe":case"object":case"embed":ln("load",t),i=r;break;case"video":case"audio":for(i=0;i<Th.length;i++)ln(Th[i],t);i=r;break;case"source":ln("error",t),i=r;break;case"img":case"image":case"link":ln("error",t),ln("load",t),i=r;break;case"details":ln("toggle",t),i=r;break;case"input":Jy(t,r),i=R1(t,r),ln("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=wn({},r,{value:void 0}),ln("invalid",t);break;case"textarea":Zy(t,r),i=O1(t,r),ln("invalid",t);break;default:i=r}V1(n,i),o=i;for(s in o)if(o.hasOwnProperty(s)){var l=o[s];s==="style"?Pb(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&Tb(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Xh(t,l):typeof l=="number"&&Xh(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Jh.hasOwnProperty(s)?l!=null&&s==="onScroll"&&ln("scroll",t):l!=null&&vv(t,s,l,a))}switch(n){case"input":wf(t),Xy(t,r,!1);break;case"textarea":wf(t),e5(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Wo(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?iu(t,!!r.multiple,s,!1):r.defaultValue!=null&&iu(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Ep)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return xr(e),null;case 6:if(t&&e.stateNode!=null)Z4(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(qe(166));if(n=Rl(cd.current),Rl(Us.current),Tf(e)){if(r=e.stateNode,n=e.memoizedProps,r[Fs]=e,(s=r.nodeValue!==n)&&(t=Ni,t!==null))switch(t.tag){case 3:kf(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&kf(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Fs]=e,e.stateNode=r}return xr(e),null;case 13:if(hn(gn),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(pn&&_i!==null&&e.mode&1&&!(e.flags&128))v4(),_u(),e.flags|=98560,s=!1;else if(s=Tf(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(qe(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(qe(317));s[Fs]=e}else _u(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;xr(e),s=!1}else us!==null&&(_0(us),us=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||gn.current&1?Jn===0&&(Jn=3):Zv())),e.updateQueue!==null&&(e.flags|=4),xr(e),null);case 4:return xu(),d0(t,e),t===null&&sd(e.stateNode.containerInfo),xr(e),null;case 10:return Fv(e.type._context),xr(e),null;case 17:return oi(e.type)&&kp(),xr(e),null;case 19:if(hn(gn),s=e.memoizedState,s===null)return xr(e),null;if(r=(e.flags&128)!==0,a=s.rendering,a===null)if(r)yh(s,!1);else{if(Jn!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=Rp(t),a!==null){for(e.flags|=128,yh(s,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,a=s.alternate,a===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,t=a.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return sn(gn,gn.current&1|2),e.child}t=t.sibling}s.tail!==null&&Dn()>Nu&&(e.flags|=128,r=!0,yh(s,!1),e.lanes=4194304)}else{if(!r)if(t=Rp(a),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),yh(s,!0),s.tail===null&&s.tailMode==="hidden"&&!a.alternate&&!pn)return xr(e),null}else 2*Dn()-s.renderingStartTime>Nu&&n!==1073741824&&(e.flags|=128,r=!0,yh(s,!1),e.lanes=4194304);s.isBackwards?(a.sibling=e.child,e.child=a):(n=s.last,n!==null?n.sibling=a:e.child=a,s.last=a)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Dn(),e.sibling=null,n=gn.current,sn(gn,r?n&1|2:n&1),e):(xr(e),null);case 22:case 23:return Xv(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?wi&1073741824&&(xr(e),e.subtreeFlags&6&&(e.flags|=8192)):xr(e),null;case 24:return null;case 25:return null}throw Error(qe(156,e.tag))}function Q6(t,e){switch(jv(e),e.tag){case 1:return oi(e.type)&&kp(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return xu(),hn(ai),hn(jr),Bv(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Uv(e),null;case 13:if(hn(gn),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(qe(340));_u()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return hn(gn),null;case 4:return xu(),null;case 10:return Fv(e.type._context),null;case 22:case 23:return Xv(),null;case 24:return null;default:return null}}var Cf=!1,Ir=!1,Y6=typeof WeakSet=="function"?WeakSet:Set,rt=null;function Zc(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){In(t,e,r)}else n.current=null}function f0(t,e,n){try{n()}catch(r){In(t,e,r)}}var q5=!1;function J6(t,e){if(Y1=Sp,t=i4(),Pv(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var a=0,o=-1,l=-1,c=0,d=0,p=t,g=null;t:for(;;){for(var m;p!==n||i!==0&&p.nodeType!==3||(o=a+i),p!==s||r!==0&&p.nodeType!==3||(l=a+r),p.nodeType===3&&(a+=p.nodeValue.length),(m=p.firstChild)!==null;)g=p,p=m;for(;;){if(p===t)break t;if(g===n&&++c===i&&(o=a),g===s&&++d===r&&(l=a),(m=p.nextSibling)!==null)break;p=g,g=p.parentNode}p=m}n=o===-1||l===-1?null:{start:o,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(J1={focusedElem:t,selectionRange:n},Sp=!1,rt=e;rt!==null;)if(e=rt,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,rt=t;else for(;rt!==null;){e=rt;try{var b=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var x=b.memoizedProps,T=b.memoizedState,w=e.stateNode,N=w.getSnapshotBeforeUpdate(e.elementType===e.type?x:os(e.type,x),T);w.__reactInternalSnapshotBeforeUpdate=N}break;case 3:var C=e.stateNode.containerInfo;C.nodeType===1?C.textContent="":C.nodeType===9&&C.documentElement&&C.removeChild(C.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(qe(163))}}catch(F){In(e,e.return,F)}if(t=e.sibling,t!==null){t.return=e.return,rt=t;break}rt=e.return}return b=q5,q5=!1,b}function Bh(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&f0(e,n,s)}i=i.next}while(i!==r)}}function Nm(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function p0(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function ex(t){var e=t.alternate;e!==null&&(t.alternate=null,ex(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Fs],delete e[od],delete e[e0],delete e[L6],delete e[R6])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function tx(t){return t.tag===5||t.tag===3||t.tag===4}function z5(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||tx(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function m0(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Ep));else if(r!==4&&(t=t.child,t!==null))for(m0(t,e,n),t=t.sibling;t!==null;)m0(t,e,n),t=t.sibling}function g0(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(g0(t,e,n),t=t.sibling;t!==null;)g0(t,e,n),t=t.sibling}var ur=null,cs=!1;function go(t,e,n){for(n=n.child;n!==null;)nx(t,e,n),n=n.sibling}function nx(t,e,n){if(Vs&&typeof Vs.onCommitFiberUnmount=="function")try{Vs.onCommitFiberUnmount(gm,n)}catch{}switch(n.tag){case 5:Ir||Zc(n,e);case 6:var r=ur,i=cs;ur=null,go(t,e,n),ur=r,cs=i,ur!==null&&(cs?(t=ur,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):ur.removeChild(n.stateNode));break;case 18:ur!==null&&(cs?(t=ur,n=n.stateNode,t.nodeType===8?zg(t.parentNode,n):t.nodeType===1&&zg(t,n),nd(t)):zg(ur,n.stateNode));break;case 4:r=ur,i=cs,ur=n.stateNode.containerInfo,cs=!0,go(t,e,n),ur=r,cs=i;break;case 0:case 11:case 14:case 15:if(!Ir&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,a=s.destroy;s=s.tag,a!==void 0&&(s&2||s&4)&&f0(n,e,a),i=i.next}while(i!==r)}go(t,e,n);break;case 1:if(!Ir&&(Zc(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){In(n,e,o)}go(t,e,n);break;case 21:go(t,e,n);break;case 22:n.mode&1?(Ir=(r=Ir)||n.memoizedState!==null,go(t,e,n),Ir=r):go(t,e,n);break;default:go(t,e,n)}}function $5(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Y6),e.forEach(function(r){var i=ak.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function ns(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,a=e,o=a;e:for(;o!==null;){switch(o.tag){case 5:ur=o.stateNode,cs=!1;break e;case 3:ur=o.stateNode.containerInfo,cs=!0;break e;case 4:ur=o.stateNode.containerInfo,cs=!0;break e}o=o.return}if(ur===null)throw Error(qe(160));nx(s,a,i),ur=null,cs=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){In(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)rx(e,t),e=e.sibling}function rx(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ns(e,t),js(t),r&4){try{Bh(3,t,t.return),Nm(3,t)}catch(x){In(t,t.return,x)}try{Bh(5,t,t.return)}catch(x){In(t,t.return,x)}}break;case 1:ns(e,t),js(t),r&512&&n!==null&&Zc(n,n.return);break;case 5:if(ns(e,t),js(t),r&512&&n!==null&&Zc(n,n.return),t.flags&32){var i=t.stateNode;try{Xh(i,"")}catch(x){In(t,t.return,x)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,a=n!==null?n.memoizedProps:s,o=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{o==="input"&&s.type==="radio"&&s.name!=null&&Ab(i,s),U1(o,a);var c=U1(o,s);for(a=0;a<l.length;a+=2){var d=l[a],p=l[a+1];d==="style"?Pb(i,p):d==="dangerouslySetInnerHTML"?Tb(i,p):d==="children"?Xh(i,p):vv(i,d,p,c)}switch(o){case"input":D1(i,s);break;case"textarea":Eb(i,s);break;case"select":var g=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var m=s.value;m!=null?iu(i,!!s.multiple,m,!1):g!==!!s.multiple&&(s.defaultValue!=null?iu(i,!!s.multiple,s.defaultValue,!0):iu(i,!!s.multiple,s.multiple?[]:"",!1))}i[od]=s}catch(x){In(t,t.return,x)}}break;case 6:if(ns(e,t),js(t),r&4){if(t.stateNode===null)throw Error(qe(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(x){In(t,t.return,x)}}break;case 3:if(ns(e,t),js(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{nd(e.containerInfo)}catch(x){In(t,t.return,x)}break;case 4:ns(e,t),js(t);break;case 13:ns(e,t),js(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Yv=Dn())),r&4&&$5(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(Ir=(c=Ir)||d,ns(e,t),Ir=c):ns(e,t),js(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!d&&t.mode&1)for(rt=t,d=t.child;d!==null;){for(p=rt=d;rt!==null;){switch(g=rt,m=g.child,g.tag){case 0:case 11:case 14:case 15:Bh(4,g,g.return);break;case 1:Zc(g,g.return);var b=g.stateNode;if(typeof b.componentWillUnmount=="function"){r=g,n=g.return;try{e=r,b.props=e.memoizedProps,b.state=e.memoizedState,b.componentWillUnmount()}catch(x){In(r,n,x)}}break;case 5:Zc(g,g.return);break;case 22:if(g.memoizedState!==null){W5(p);continue}}m!==null?(m.return=g,rt=m):W5(p)}d=d.sibling}e:for(d=null,p=t;;){if(p.tag===5){if(d===null){d=p;try{i=p.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(o=p.stateNode,l=p.memoizedProps.style,a=l!=null&&l.hasOwnProperty("display")?l.display:null,o.style.display=Ib("display",a))}catch(x){In(t,t.return,x)}}}else if(p.tag===6){if(d===null)try{p.stateNode.nodeValue=c?"":p.memoizedProps}catch(x){In(t,t.return,x)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;d===p&&(d=null),p=p.return}d===p&&(d=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:ns(e,t),js(t),r&4&&$5(t);break;case 21:break;default:ns(e,t),js(t)}}function js(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(tx(n)){var r=n;break e}n=n.return}throw Error(qe(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Xh(i,""),r.flags&=-33);var s=z5(t);g0(t,s,i);break;case 3:case 4:var a=r.stateNode.containerInfo,o=z5(t);m0(t,o,a);break;default:throw Error(qe(161))}}catch(l){In(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function X6(t,e,n){rt=t,ix(t)}function ix(t,e,n){for(var r=(t.mode&1)!==0;rt!==null;){var i=rt,s=i.child;if(i.tag===22&&r){var a=i.memoizedState!==null||Cf;if(!a){var o=i.alternate,l=o!==null&&o.memoizedState!==null||Ir;o=Cf;var c=Ir;if(Cf=a,(Ir=l)&&!c)for(rt=i;rt!==null;)a=rt,l=a.child,a.tag===22&&a.memoizedState!==null?G5(i):l!==null?(l.return=a,rt=l):G5(i);for(;s!==null;)rt=s,ix(s),s=s.sibling;rt=i,Cf=o,Ir=c}H5(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,rt=s):H5(t)}}function H5(t){for(;rt!==null;){var e=rt;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ir||Nm(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Ir)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:os(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&P5(e,s,r);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}P5(e,a,n)}break;case 5:var o=e.stateNode;if(n===null&&e.flags&4){n=o;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var p=d.dehydrated;p!==null&&nd(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(qe(163))}Ir||e.flags&512&&p0(e)}catch(g){In(e,e.return,g)}}if(e===t){rt=null;break}if(n=e.sibling,n!==null){n.return=e.return,rt=n;break}rt=e.return}}function W5(t){for(;rt!==null;){var e=rt;if(e===t){rt=null;break}var n=e.sibling;if(n!==null){n.return=e.return,rt=n;break}rt=e.return}}function G5(t){for(;rt!==null;){var e=rt;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Nm(4,e)}catch(l){In(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){In(e,i,l)}}var s=e.return;try{p0(e)}catch(l){In(e,s,l)}break;case 5:var a=e.return;try{p0(e)}catch(l){In(e,a,l)}}}catch(l){In(e,e.return,l)}if(e===t){rt=null;break}var o=e.sibling;if(o!==null){o.return=e.return,rt=o;break}rt=e.return}}var Z6=Math.ceil,Op=Fa.ReactCurrentDispatcher,Gv=Fa.ReactCurrentOwner,Bi=Fa.ReactCurrentBatchConfig,Vt=0,ir=null,$n=null,fr=0,wi=0,eu=nl(0),Jn=0,fd=null,Hl=0,Am=0,Qv=0,Kh=null,ni=null,Yv=0,Nu=1/0,ga=null,Mp=!1,v0=null,Vo=null,jf=!1,Po=null,Vp=0,qh=0,y0=null,ep=-1,tp=0;function qr(){return Vt&6?Dn():ep!==-1?ep:ep=Dn()}function Uo(t){return t.mode&1?Vt&2&&fr!==0?fr&-fr:F6.transition!==null?(tp===0&&(tp=Kb()),tp):(t=Qt,t!==0||(t=window.event,t=t===void 0?16:Qb(t.type)),t):1}function ds(t,e,n,r){if(50<qh)throw qh=0,y0=null,Error(qe(185));Td(t,n,r),(!(Vt&2)||t!==ir)&&(t===ir&&(!(Vt&2)&&(Am|=n),Jn===4&&So(t,fr)),li(t,r),n===1&&Vt===0&&!(e.mode&1)&&(Nu=Dn()+500,bm&&rl()))}function li(t,e){var n=t.callbackNode;FE(t,e);var r=xp(t,t===ir?fr:0);if(r===0)n!==null&&r5(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&r5(n),e===1)t.tag===0?D6(Q5.bind(null,t)):p4(Q5.bind(null,t)),C6(function(){!(Vt&6)&&rl()}),n=null;else{switch(qb(r)){case 1:n=xv;break;case 4:n=Ub;break;case 16:n=bp;break;case 536870912:n=Bb;break;default:n=bp}n=dx(n,sx.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function sx(t,e){if(ep=-1,tp=0,Vt&6)throw Error(qe(327));var n=t.callbackNode;if(cu()&&t.callbackNode!==n)return null;var r=xp(t,t===ir?fr:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Up(t,r);else{e=r;var i=Vt;Vt|=2;var s=ox();(ir!==t||fr!==e)&&(ga=null,Nu=Dn()+500,Ol(t,e));do try{nk();break}catch(o){ax(t,o)}while(!0);Dv(),Op.current=s,Vt=i,$n!==null?e=0:(ir=null,fr=0,e=Jn)}if(e!==0){if(e===2&&(i=$1(t),i!==0&&(r=i,e=w0(t,i))),e===1)throw n=fd,Ol(t,0),So(t,r),li(t,Dn()),n;if(e===6)So(t,r);else{if(i=t.current.alternate,!(r&30)&&!ek(i)&&(e=Up(t,r),e===2&&(s=$1(t),s!==0&&(r=s,e=w0(t,s))),e===1))throw n=fd,Ol(t,0),So(t,r),li(t,Dn()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(qe(345));case 2:kl(t,ni,ga);break;case 3:if(So(t,r),(r&130023424)===r&&(e=Yv+500-Dn(),10<e)){if(xp(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){qr(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Z1(kl.bind(null,t,ni,ga),e);break}kl(t,ni,ga);break;case 4:if(So(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var a=31-hs(r);s=1<<a,a=e[a],a>i&&(i=a),r&=~s}if(r=i,r=Dn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Z6(r/1960))-r,10<r){t.timeoutHandle=Z1(kl.bind(null,t,ni,ga),r);break}kl(t,ni,ga);break;case 5:kl(t,ni,ga);break;default:throw Error(qe(329))}}}return li(t,Dn()),t.callbackNode===n?sx.bind(null,t):null}function w0(t,e){var n=Kh;return t.current.memoizedState.isDehydrated&&(Ol(t,e).flags|=256),t=Up(t,e),t!==2&&(e=ni,ni=n,e!==null&&_0(e)),t}function _0(t){ni===null?ni=t:ni.push.apply(ni,t)}function ek(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!fs(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function So(t,e){for(e&=~Qv,e&=~Am,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-hs(e),r=1<<n;t[n]=-1,e&=~r}}function Q5(t){if(Vt&6)throw Error(qe(327));cu();var e=xp(t,0);if(!(e&1))return li(t,Dn()),null;var n=Up(t,e);if(t.tag!==0&&n===2){var r=$1(t);r!==0&&(e=r,n=w0(t,r))}if(n===1)throw n=fd,Ol(t,0),So(t,e),li(t,Dn()),n;if(n===6)throw Error(qe(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,kl(t,ni,ga),li(t,Dn()),null}function Jv(t,e){var n=Vt;Vt|=1;try{return t(e)}finally{Vt=n,Vt===0&&(Nu=Dn()+500,bm&&rl())}}function Wl(t){Po!==null&&Po.tag===0&&!(Vt&6)&&cu();var e=Vt;Vt|=1;var n=Bi.transition,r=Qt;try{if(Bi.transition=null,Qt=1,t)return t()}finally{Qt=r,Bi.transition=n,Vt=e,!(Vt&6)&&rl()}}function Xv(){wi=eu.current,hn(eu)}function Ol(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,P6(n)),$n!==null)for(n=$n.return;n!==null;){var r=n;switch(jv(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&kp();break;case 3:xu(),hn(ai),hn(jr),Bv();break;case 5:Uv(r);break;case 4:xu();break;case 13:hn(gn);break;case 19:hn(gn);break;case 10:Fv(r.type._context);break;case 22:case 23:Xv()}n=n.return}if(ir=t,$n=t=Bo(t.current,null),fr=wi=e,Jn=0,fd=null,Qv=Am=Hl=0,ni=Kh=null,Ll!==null){for(e=0;e<Ll.length;e++)if(n=Ll[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var a=s.next;s.next=i,r.next=a}n.pending=r}Ll=null}return t}function ax(t,e){do{var n=$n;try{if(Dv(),Jf.current=Fp,Dp){for(var r=vn.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Dp=!1}if($l=0,nr=Yn=vn=null,Uh=!1,ud=0,Gv.current=null,n===null||n.return===null){Jn=1,fd=e,$n=null;break}e:{var s=t,a=n.return,o=n,l=e;if(e=fr,o.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,d=o,p=d.tag;if(!(d.mode&1)&&(p===0||p===11||p===15)){var g=d.alternate;g?(d.updateQueue=g.updateQueue,d.memoizedState=g.memoizedState,d.lanes=g.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=F5(a);if(m!==null){m.flags&=-257,O5(m,a,o,s,e),m.mode&1&&D5(s,c,e),e=m,l=c;var b=e.updateQueue;if(b===null){var x=new Set;x.add(l),e.updateQueue=x}else b.add(l);break e}else{if(!(e&1)){D5(s,c,e),Zv();break e}l=Error(qe(426))}}else if(pn&&o.mode&1){var T=F5(a);if(T!==null){!(T.flags&65536)&&(T.flags|=256),O5(T,a,o,s,e),Lv(Su(l,o));break e}}s=l=Su(l,o),Jn!==4&&(Jn=2),Kh===null?Kh=[s]:Kh.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var w=q4(s,l,e);I5(s,w);break e;case 1:o=l;var N=s.type,C=s.stateNode;if(!(s.flags&128)&&(typeof N.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(Vo===null||!Vo.has(C)))){s.flags|=65536,e&=-e,s.lanes|=e;var F=z4(s,o,e);I5(s,F);break e}}s=s.return}while(s!==null)}cx(n)}catch(Q){e=Q,$n===n&&n!==null&&($n=n=n.return);continue}break}while(!0)}function ox(){var t=Op.current;return Op.current=Fp,t===null?Fp:t}function Zv(){(Jn===0||Jn===3||Jn===2)&&(Jn=4),ir===null||!(Hl&268435455)&&!(Am&268435455)||So(ir,fr)}function Up(t,e){var n=Vt;Vt|=2;var r=ox();(ir!==t||fr!==e)&&(ga=null,Ol(t,e));do try{tk();break}catch(i){ax(t,i)}while(!0);if(Dv(),Vt=n,Op.current=r,$n!==null)throw Error(qe(261));return ir=null,fr=0,Jn}function tk(){for(;$n!==null;)lx($n)}function nk(){for(;$n!==null&&!kE();)lx($n)}function lx(t){var e=hx(t.alternate,t,wi);t.memoizedProps=t.pendingProps,e===null?cx(t):$n=e,Gv.current=null}function cx(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Q6(n,e),n!==null){n.flags&=32767,$n=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Jn=6,$n=null;return}}else if(n=G6(n,e,wi),n!==null){$n=n;return}if(e=e.sibling,e!==null){$n=e;return}$n=e=t}while(e!==null);Jn===0&&(Jn=5)}function kl(t,e,n){var r=Qt,i=Bi.transition;try{Bi.transition=null,Qt=1,rk(t,e,n,r)}finally{Bi.transition=i,Qt=r}return null}function rk(t,e,n,r){do cu();while(Po!==null);if(Vt&6)throw Error(qe(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(qe(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(OE(t,s),t===ir&&($n=ir=null,fr=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||jf||(jf=!0,dx(bp,function(){return cu(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Bi.transition,Bi.transition=null;var a=Qt;Qt=1;var o=Vt;Vt|=4,Gv.current=null,J6(t,n),rx(n,t),S6(J1),Sp=!!Y1,J1=Y1=null,t.current=n,X6(n),TE(),Vt=o,Qt=a,Bi.transition=s}else t.current=n;if(jf&&(jf=!1,Po=t,Vp=i),s=t.pendingLanes,s===0&&(Vo=null),CE(n.stateNode),li(t,Dn()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Mp)throw Mp=!1,t=v0,v0=null,t;return Vp&1&&t.tag!==0&&cu(),s=t.pendingLanes,s&1?t===y0?qh++:(qh=0,y0=t):qh=0,rl(),null}function cu(){if(Po!==null){var t=qb(Vp),e=Bi.transition,n=Qt;try{if(Bi.transition=null,Qt=16>t?16:t,Po===null)var r=!1;else{if(t=Po,Po=null,Vp=0,Vt&6)throw Error(qe(331));var i=Vt;for(Vt|=4,rt=t.current;rt!==null;){var s=rt,a=s.child;if(rt.flags&16){var o=s.deletions;if(o!==null){for(var l=0;l<o.length;l++){var c=o[l];for(rt=c;rt!==null;){var d=rt;switch(d.tag){case 0:case 11:case 15:Bh(8,d,s)}var p=d.child;if(p!==null)p.return=d,rt=p;else for(;rt!==null;){d=rt;var g=d.sibling,m=d.return;if(ex(d),d===c){rt=null;break}if(g!==null){g.return=m,rt=g;break}rt=m}}}var b=s.alternate;if(b!==null){var x=b.child;if(x!==null){b.child=null;do{var T=x.sibling;x.sibling=null,x=T}while(x!==null)}}rt=s}}if(s.subtreeFlags&2064&&a!==null)a.return=s,rt=a;else e:for(;rt!==null;){if(s=rt,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Bh(9,s,s.return)}var w=s.sibling;if(w!==null){w.return=s.return,rt=w;break e}rt=s.return}}var N=t.current;for(rt=N;rt!==null;){a=rt;var C=a.child;if(a.subtreeFlags&2064&&C!==null)C.return=a,rt=C;else e:for(a=N;rt!==null;){if(o=rt,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:Nm(9,o)}}catch(Q){In(o,o.return,Q)}if(o===a){rt=null;break e}var F=o.sibling;if(F!==null){F.return=o.return,rt=F;break e}rt=o.return}}if(Vt=i,rl(),Vs&&typeof Vs.onPostCommitFiberRoot=="function")try{Vs.onPostCommitFiberRoot(gm,t)}catch{}r=!0}return r}finally{Qt=n,Bi.transition=e}}return!1}function Y5(t,e,n){e=Su(n,e),e=q4(t,e,1),t=Mo(t,e,1),e=qr(),t!==null&&(Td(t,1,e),li(t,e))}function In(t,e,n){if(t.tag===3)Y5(t,t,n);else for(;e!==null;){if(e.tag===3){Y5(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Vo===null||!Vo.has(r))){t=Su(n,t),t=z4(e,t,1),e=Mo(e,t,1),t=qr(),e!==null&&(Td(e,1,t),li(e,t));break}}e=e.return}}function ik(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=qr(),t.pingedLanes|=t.suspendedLanes&n,ir===t&&(fr&n)===n&&(Jn===4||Jn===3&&(fr&130023424)===fr&&500>Dn()-Yv?Ol(t,0):Qv|=n),li(t,e)}function ux(t,e){e===0&&(t.mode&1?(e=xf,xf<<=1,!(xf&130023424)&&(xf=4194304)):e=1);var n=qr();t=Ia(t,e),t!==null&&(Td(t,e,n),li(t,n))}function sk(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),ux(t,n)}function ak(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(qe(314))}r!==null&&r.delete(e),ux(t,n)}var hx;hx=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||ai.current)si=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return si=!1,W6(t,e,n);si=!!(t.flags&131072)}else si=!1,pn&&e.flags&1048576&&m4(e,Pp,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Zf(t,e),t=e.pendingProps;var i=wu(e,jr.current);lu(e,n),i=qv(null,e,r,t,i,n);var s=zv();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,oi(r)?(s=!0,Tp(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Mv(e),i.updater=Sm,e.stateNode=i,i._reactInternals=e,a0(e,r,t,n),e=c0(null,e,r,!0,s,n)):(e.tag=0,pn&&s&&Cv(e),Kr(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Zf(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=lk(r),t=os(r,t),i){case 0:e=l0(null,e,r,t,n);break e;case 1:e=U5(null,e,r,t,n);break e;case 11:e=M5(null,e,r,t,n);break e;case 14:e=V5(null,e,r,os(r.type,t),n);break e}throw Error(qe(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:os(r,i),l0(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:os(r,i),U5(t,e,r,i,n);case 3:e:{if(G4(e),t===null)throw Error(qe(387));r=e.pendingProps,s=e.memoizedState,i=s.element,b4(t,e),Lp(e,r,null,n);var a=e.memoizedState;if(r=a.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Su(Error(qe(423)),e),e=B5(t,e,r,n,i);break e}else if(r!==i){i=Su(Error(qe(424)),e),e=B5(t,e,r,n,i);break e}else for(_i=Oo(e.stateNode.containerInfo.firstChild),Ni=e,pn=!0,us=null,n=w4(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(_u(),r===i){e=Pa(t,e,n);break e}Kr(t,e,r,n)}e=e.child}return e;case 5:return x4(e),t===null&&r0(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,a=i.children,X1(r,i)?a=null:s!==null&&X1(r,s)&&(e.flags|=32),W4(t,e),Kr(t,e,a,n),e.child;case 6:return t===null&&r0(e),null;case 13:return Q4(t,e,n);case 4:return Vv(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=bu(e,null,r,n):Kr(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:os(r,i),M5(t,e,r,i,n);case 7:return Kr(t,e,e.pendingProps,n),e.child;case 8:return Kr(t,e,e.pendingProps.children,n),e.child;case 12:return Kr(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,a=i.value,sn(Cp,r._currentValue),r._currentValue=a,s!==null)if(fs(s.value,a)){if(s.children===i.children&&!ai.current){e=Pa(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var o=s.dependencies;if(o!==null){a=s.child;for(var l=o.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=Na(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),i0(s.return,n,e),o.lanes|=n;break}l=l.next}}else if(s.tag===10)a=s.type===e.type?null:s.child;else if(s.tag===18){if(a=s.return,a===null)throw Error(qe(341));a.lanes|=n,o=a.alternate,o!==null&&(o.lanes|=n),i0(a,n,e),a=s.sibling}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===e){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}Kr(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,lu(e,n),i=qi(i),r=r(i),e.flags|=1,Kr(t,e,r,n),e.child;case 14:return r=e.type,i=os(r,e.pendingProps),i=os(r.type,i),V5(t,e,r,i,n);case 15:return $4(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:os(r,i),Zf(t,e),e.tag=1,oi(r)?(t=!0,Tp(e)):t=!1,lu(e,n),K4(e,r,i),a0(e,r,i,n),c0(null,e,r,!0,t,n);case 19:return Y4(t,e,n);case 22:return H4(t,e,n)}throw Error(qe(156,e.tag))};function dx(t,e){return Vb(t,e)}function ok(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ui(t,e,n,r){return new ok(t,e,n,r)}function e2(t){return t=t.prototype,!(!t||!t.isReactComponent)}function lk(t){if(typeof t=="function")return e2(t)?1:0;if(t!=null){if(t=t.$$typeof,t===wv)return 11;if(t===_v)return 14}return 2}function Bo(t,e){var n=t.alternate;return n===null?(n=Ui(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function np(t,e,n,r,i,s){var a=2;if(r=t,typeof t=="function")e2(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case zc:return Ml(n.children,i,s,e);case yv:a=8,i|=8;break;case P1:return t=Ui(12,n,e,i|2),t.elementType=P1,t.lanes=s,t;case C1:return t=Ui(13,n,e,i),t.elementType=C1,t.lanes=s,t;case j1:return t=Ui(19,n,e,i),t.elementType=j1,t.lanes=s,t;case xb:return Em(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case _b:a=10;break e;case bb:a=9;break e;case wv:a=11;break e;case _v:a=14;break e;case _o:a=16,r=null;break e}throw Error(qe(130,t==null?t:typeof t,""))}return e=Ui(a,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Ml(t,e,n,r){return t=Ui(7,t,r,e),t.lanes=n,t}function Em(t,e,n,r){return t=Ui(22,t,r,e),t.elementType=xb,t.lanes=n,t.stateNode={isHidden:!1},t}function Xg(t,e,n){return t=Ui(6,t,null,e),t.lanes=n,t}function Zg(t,e,n){return e=Ui(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function ck(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Lg(0),this.expirationTimes=Lg(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Lg(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function t2(t,e,n,r,i,s,a,o,l){return t=new ck(t,e,n,o,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Ui(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Mv(s),t}function uk(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:qc,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function fx(t){if(!t)return Go;t=t._reactInternals;e:{if(tc(t)!==t||t.tag!==1)throw Error(qe(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(oi(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(qe(171))}if(t.tag===1){var n=t.type;if(oi(n))return f4(t,n,e)}return e}function px(t,e,n,r,i,s,a,o,l){return t=t2(n,r,!0,t,i,s,a,o,l),t.context=fx(null),n=t.current,r=qr(),i=Uo(n),s=Na(r,i),s.callback=e??null,Mo(n,s,i),t.current.lanes=i,Td(t,i,r),li(t,r),t}function km(t,e,n,r){var i=e.current,s=qr(),a=Uo(i);return n=fx(n),e.context===null?e.context=n:e.pendingContext=n,e=Na(s,a),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Mo(i,e,a),t!==null&&(ds(t,i,a,s),Yf(t,i,a)),a}function Bp(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function J5(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function n2(t,e){J5(t,e),(t=t.alternate)&&J5(t,e)}function hk(){return null}var mx=typeof reportError=="function"?reportError:function(t){console.error(t)};function r2(t){this._internalRoot=t}Tm.prototype.render=r2.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(qe(409));km(t,e,null,null)};Tm.prototype.unmount=r2.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Wl(function(){km(null,t,null,null)}),e[Ta]=null}};function Tm(t){this._internalRoot=t}Tm.prototype.unstable_scheduleHydration=function(t){if(t){var e=Hb();t={blockedOn:null,target:t,priority:e};for(var n=0;n<xo.length&&e!==0&&e<xo[n].priority;n++);xo.splice(n,0,t),n===0&&Gb(t)}};function i2(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Im(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function X5(){}function dk(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=Bp(a);s.call(c)}}var a=px(e,r,t,0,null,!1,!1,"",X5);return t._reactRootContainer=a,t[Ta]=a.current,sd(t.nodeType===8?t.parentNode:t),Wl(),a}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var o=r;r=function(){var c=Bp(l);o.call(c)}}var l=t2(t,0,!1,null,null,!1,!1,"",X5);return t._reactRootContainer=l,t[Ta]=l.current,sd(t.nodeType===8?t.parentNode:t),Wl(function(){km(e,l,n,r)}),l}function Pm(t,e,n,r,i){var s=n._reactRootContainer;if(s){var a=s;if(typeof i=="function"){var o=i;i=function(){var l=Bp(a);o.call(l)}}km(e,a,t,i)}else a=dk(n,e,t,i,r);return Bp(a)}zb=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=kh(e.pendingLanes);n!==0&&(Sv(e,n|1),li(e,Dn()),!(Vt&6)&&(Nu=Dn()+500,rl()))}break;case 13:Wl(function(){var r=Ia(t,1);if(r!==null){var i=qr();ds(r,t,1,i)}}),n2(t,1)}};Nv=function(t){if(t.tag===13){var e=Ia(t,134217728);if(e!==null){var n=qr();ds(e,t,134217728,n)}n2(t,134217728)}};$b=function(t){if(t.tag===13){var e=Uo(t),n=Ia(t,e);if(n!==null){var r=qr();ds(n,t,e,r)}n2(t,e)}};Hb=function(){return Qt};Wb=function(t,e){var n=Qt;try{return Qt=t,e()}finally{Qt=n}};K1=function(t,e,n){switch(e){case"input":if(D1(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=_m(r);if(!i)throw Error(qe(90));Nb(r),D1(r,i)}}}break;case"textarea":Eb(t,n);break;case"select":e=n.value,e!=null&&iu(t,!!n.multiple,e,!1)}};Lb=Jv;Rb=Wl;var fk={usingClientEntryPoint:!1,Events:[Pd,Gc,_m,Cb,jb,Jv]},wh={findFiberByHostInstance:jl,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},pk={bundleType:wh.bundleType,version:wh.version,rendererPackageName:wh.rendererPackageName,rendererConfig:wh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Fa.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Ob(t),t===null?null:t.stateNode},findFiberByHostInstance:wh.findFiberByHostInstance||hk,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Lf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Lf.isDisabled&&Lf.supportsFiber)try{gm=Lf.inject(pk),Vs=Lf}catch{}}Ei.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=fk;Ei.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!i2(e))throw Error(qe(200));return uk(t,e,null,n)};Ei.createRoot=function(t,e){if(!i2(t))throw Error(qe(299));var n=!1,r="",i=mx;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=t2(t,1,!1,null,null,n,!1,r,i),t[Ta]=e.current,sd(t.nodeType===8?t.parentNode:t),new r2(e)};Ei.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(qe(188)):(t=Object.keys(t).join(","),Error(qe(268,t)));return t=Ob(e),t=t===null?null:t.stateNode,t};Ei.flushSync=function(t){return Wl(t)};Ei.hydrate=function(t,e,n){if(!Im(e))throw Error(qe(200));return Pm(null,t,e,!0,n)};Ei.hydrateRoot=function(t,e,n){if(!i2(t))throw Error(qe(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",a=mx;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=px(e,null,t,1,n??null,i,!1,s,a),t[Ta]=e.current,sd(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Tm(e)};Ei.render=function(t,e,n){if(!Im(e))throw Error(qe(200));return Pm(null,t,e,!1,n)};Ei.unmountComponentAtNode=function(t){if(!Im(t))throw Error(qe(40));return t._reactRootContainer?(Wl(function(){Pm(null,null,t,!1,function(){t._reactRootContainer=null,t[Ta]=null})}),!0):!1};Ei.unstable_batchedUpdates=Jv;Ei.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Im(n))throw Error(qe(200));if(t==null||t._reactInternals===void 0)throw Error(qe(38));return Pm(t,e,n,!1,r)};Ei.version="18.3.1-next-f1338f8080-20240426";function gx(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(gx)}catch(t){console.error(t)}}gx(),gb.exports=Ei;var mk=gb.exports,Z5=mk;T1.createRoot=Z5.createRoot,T1.hydrateRoot=Z5.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function pd(){return pd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},pd.apply(this,arguments)}var Co;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Co||(Co={}));const ew="popstate";function gk(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:a,hash:o}=r.location;return b0("",{pathname:s,search:a,hash:o},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:Kp(i)}return yk(e,n,null,t)}function yn(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function vx(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function vk(){return Math.random().toString(36).substr(2,8)}function tw(t,e){return{usr:t.state,key:t.key,idx:e}}function b0(t,e,n,r){return n===void 0&&(n=null),pd({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Ou(e):e,{state:n,key:e&&e.key||r||vk()})}function Kp(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Ou(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function yk(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,a=i.history,o=Co.Pop,l=null,c=d();c==null&&(c=0,a.replaceState(pd({},a.state,{idx:c}),""));function d(){return(a.state||{idx:null}).idx}function p(){o=Co.Pop;let T=d(),w=T==null?null:T-c;c=T,l&&l({action:o,location:x.location,delta:w})}function g(T,w){o=Co.Push;let N=b0(x.location,T,w);c=d()+1;let C=tw(N,c),F=x.createHref(N);try{a.pushState(C,"",F)}catch(Q){if(Q instanceof DOMException&&Q.name==="DataCloneError")throw Q;i.location.assign(F)}s&&l&&l({action:o,location:x.location,delta:1})}function m(T,w){o=Co.Replace;let N=b0(x.location,T,w);c=d();let C=tw(N,c),F=x.createHref(N);a.replaceState(C,"",F),s&&l&&l({action:o,location:x.location,delta:0})}function b(T){let w=i.location.origin!=="null"?i.location.origin:i.location.href,N=typeof T=="string"?T:Kp(T);return N=N.replace(/ $/,"%20"),yn(w,"No window.location.(origin|href) available to create URL for href: "+N),new URL(N,w)}let x={get action(){return o},get location(){return t(i,a)},listen(T){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(ew,p),l=T,()=>{i.removeEventListener(ew,p),l=null}},createHref(T){return e(i,T)},createURL:b,encodeLocation(T){let w=b(T);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:g,replace:m,go(T){return a.go(T)}};return x}var nw;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(nw||(nw={}));function wk(t,e,n){return n===void 0&&(n="/"),_k(t,e,n)}function _k(t,e,n,r){let i=typeof e=="string"?Ou(e):e,s=Au(i.pathname||"/",n);if(s==null)return null;let a=yx(t);bk(a);let o=null;for(let l=0;o==null&&l<a.length;++l){let c=jk(s);o=Pk(a[l],c)}return o}function yx(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,a,o)=>{let l={relativePath:o===void 0?s.path||"":o,caseSensitive:s.caseSensitive===!0,childrenIndex:a,route:s};l.relativePath.startsWith("/")&&(yn(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=Ko([r,l.relativePath]),d=n.concat(l);s.children&&s.children.length>0&&(yn(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),yx(s.children,e,d,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:Tk(c,s.index),routesMeta:d})};return t.forEach((s,a)=>{var o;if(s.path===""||!((o=s.path)!=null&&o.includes("?")))i(s,a);else for(let l of wx(s.path))i(s,a,l)}),e}function wx(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let a=wx(r.join("/")),o=[];return o.push(...a.map(l=>l===""?s:[s,l].join("/"))),i&&o.push(...a),o.map(l=>t.startsWith("/")&&l===""?"/":l)}function bk(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:Ik(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const xk=/^:[\w-]+$/,Sk=3,Nk=2,Ak=1,Ek=10,kk=-2,rw=t=>t==="*";function Tk(t,e){let n=t.split("/"),r=n.length;return n.some(rw)&&(r+=kk),e&&(r+=Nk),n.filter(i=>!rw(i)).reduce((i,s)=>i+(xk.test(s)?Sk:s===""?Ak:Ek),r)}function Ik(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function Pk(t,e,n){let{routesMeta:r}=t,i={},s="/",a=[];for(let o=0;o<r.length;++o){let l=r[o],c=o===r.length-1,d=s==="/"?e:e.slice(s.length)||"/",p=x0({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},d),g=l.route;if(!p)return null;Object.assign(i,p.params),a.push({params:i,pathname:Ko([s,p.pathname]),pathnameBase:Fk(Ko([s,p.pathnameBase])),route:g}),p.pathnameBase!=="/"&&(s=Ko([s,p.pathnameBase]))}return a}function x0(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=Ck(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],a=s.replace(/(.)\/+$/,"$1"),o=i.slice(1);return{params:r.reduce((c,d,p)=>{let{paramName:g,isOptional:m}=d;if(g==="*"){let x=o[p]||"";a=s.slice(0,s.length-x.length).replace(/(.)\/+$/,"$1")}const b=o[p];return m&&!b?c[g]=void 0:c[g]=(b||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:a,pattern:t}}function Ck(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),vx(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,o,l)=>(r.push({paramName:o,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function jk(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return vx(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Au(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function Lk(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?Ou(t):t;return{pathname:n?n.startsWith("/")?n:Rk(n,e):e,search:Ok(r),hash:Mk(i)}}function Rk(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function e1(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Dk(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function s2(t,e){let n=Dk(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function a2(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=Ou(t):(i=pd({},t),yn(!i.pathname||!i.pathname.includes("?"),e1("?","pathname","search",i)),yn(!i.pathname||!i.pathname.includes("#"),e1("#","pathname","hash",i)),yn(!i.search||!i.search.includes("#"),e1("#","search","hash",i)));let s=t===""||i.pathname==="",a=s?"/":i.pathname,o;if(a==null)o=n;else{let p=e.length-1;if(!r&&a.startsWith("..")){let g=a.split("/");for(;g[0]==="..";)g.shift(),p-=1;i.pathname=g.join("/")}o=p>=0?e[p]:"/"}let l=Lk(i,o),c=a&&a!=="/"&&a.endsWith("/"),d=(s||a===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||d)&&(l.pathname+="/"),l}const Ko=t=>t.join("/").replace(/\/\/+/g,"/"),Fk=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Ok=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Mk=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Vk(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const _x=["post","put","patch","delete"];new Set(_x);const Uk=["get",..._x];new Set(Uk);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function md(){return md=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},md.apply(this,arguments)}const Cm=oe.createContext(null),bx=oe.createContext(null),Oa=oe.createContext(null),jm=oe.createContext(null),Gs=oe.createContext({outlet:null,matches:[],isDataRoute:!1}),xx=oe.createContext(null);function Bk(t,e){let{relative:n}=e===void 0?{}:e;Mu()||yn(!1);let{basename:r,navigator:i}=oe.useContext(Oa),{hash:s,pathname:a,search:o}=Lm(t,{relative:n}),l=a;return r!=="/"&&(l=a==="/"?r:Ko([r,a])),i.createHref({pathname:l,search:o,hash:s})}function Mu(){return oe.useContext(jm)!=null}function Vu(){return Mu()||yn(!1),oe.useContext(jm).location}function Sx(t){oe.useContext(Oa).static||oe.useLayoutEffect(t)}function Uu(){let{isDataRoute:t}=oe.useContext(Gs);return t?rT():Kk()}function Kk(){Mu()||yn(!1);let t=oe.useContext(Cm),{basename:e,future:n,navigator:r}=oe.useContext(Oa),{matches:i}=oe.useContext(Gs),{pathname:s}=Vu(),a=JSON.stringify(s2(i,n.v7_relativeSplatPath)),o=oe.useRef(!1);return Sx(()=>{o.current=!0}),oe.useCallback(function(c,d){if(d===void 0&&(d={}),!o.current)return;if(typeof c=="number"){r.go(c);return}let p=a2(c,JSON.parse(a),s,d.relative==="path");t==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:Ko([e,p.pathname])),(d.replace?r.replace:r.push)(p,d.state,d)},[e,r,a,s,t])}const qk=oe.createContext(null);function zk(t){let e=oe.useContext(Gs).outlet;return e&&oe.createElement(qk.Provider,{value:t},e)}function $k(){let{matches:t}=oe.useContext(Gs),e=t[t.length-1];return e?e.params:{}}function Lm(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=oe.useContext(Oa),{matches:i}=oe.useContext(Gs),{pathname:s}=Vu(),a=JSON.stringify(s2(i,r.v7_relativeSplatPath));return oe.useMemo(()=>a2(t,JSON.parse(a),s,n==="path"),[t,a,s,n])}function Hk(t,e){return Wk(t,e)}function Wk(t,e,n,r){Mu()||yn(!1);let{navigator:i}=oe.useContext(Oa),{matches:s}=oe.useContext(Gs),a=s[s.length-1],o=a?a.params:{};a&&a.pathname;let l=a?a.pathnameBase:"/";a&&a.route;let c=Vu(),d;if(e){var p;let T=typeof e=="string"?Ou(e):e;l==="/"||(p=T.pathname)!=null&&p.startsWith(l)||yn(!1),d=T}else d=c;let g=d.pathname||"/",m=g;if(l!=="/"){let T=l.replace(/^\//,"").split("/");m="/"+g.replace(/^\//,"").split("/").slice(T.length).join("/")}let b=wk(t,{pathname:m}),x=Xk(b&&b.map(T=>Object.assign({},T,{params:Object.assign({},o,T.params),pathname:Ko([l,i.encodeLocation?i.encodeLocation(T.pathname).pathname:T.pathname]),pathnameBase:T.pathnameBase==="/"?l:Ko([l,i.encodeLocation?i.encodeLocation(T.pathnameBase).pathname:T.pathnameBase])})),s,n,r);return e&&x?oe.createElement(jm.Provider,{value:{location:md({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:Co.Pop}},x):x}function Gk(){let t=nT(),e=Vk(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return oe.createElement(oe.Fragment,null,oe.createElement("h2",null,"Unexpected Application Error!"),oe.createElement("h3",{style:{fontStyle:"italic"}},e),n?oe.createElement("pre",{style:i},n):null,null)}const Qk=oe.createElement(Gk,null);class Yk extends oe.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?oe.createElement(Gs.Provider,{value:this.props.routeContext},oe.createElement(xx.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Jk(t){let{routeContext:e,match:n,children:r}=t,i=oe.useContext(Cm);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),oe.createElement(Gs.Provider,{value:e},r)}function Xk(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let a=t,o=(i=n)==null?void 0:i.errors;if(o!=null){let d=a.findIndex(p=>p.route.id&&(o==null?void 0:o[p.route.id])!==void 0);d>=0||yn(!1),a=a.slice(0,Math.min(a.length,d+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<a.length;d++){let p=a[d];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(c=d),p.route.id){let{loaderData:g,errors:m}=n,b=p.route.loader&&g[p.route.id]===void 0&&(!m||m[p.route.id]===void 0);if(p.route.lazy||b){l=!0,c>=0?a=a.slice(0,c+1):a=[a[0]];break}}}return a.reduceRight((d,p,g)=>{let m,b=!1,x=null,T=null;n&&(m=o&&p.route.id?o[p.route.id]:void 0,x=p.route.errorElement||Qk,l&&(c<0&&g===0?(iT("route-fallback"),b=!0,T=null):c===g&&(b=!0,T=p.route.hydrateFallbackElement||null)));let w=e.concat(a.slice(0,g+1)),N=()=>{let C;return m?C=x:b?C=T:p.route.Component?C=oe.createElement(p.route.Component,null):p.route.element?C=p.route.element:C=d,oe.createElement(Jk,{match:p,routeContext:{outlet:d,matches:w,isDataRoute:n!=null},children:C})};return n&&(p.route.ErrorBoundary||p.route.errorElement||g===0)?oe.createElement(Yk,{location:n.location,revalidation:n.revalidation,component:x,error:m,children:N(),routeContext:{outlet:null,matches:w,isDataRoute:!0}}):N()},null)}var Nx=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(Nx||{}),Ax=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Ax||{});function Zk(t){let e=oe.useContext(Cm);return e||yn(!1),e}function eT(t){let e=oe.useContext(bx);return e||yn(!1),e}function tT(t){let e=oe.useContext(Gs);return e||yn(!1),e}function Ex(t){let e=tT(),n=e.matches[e.matches.length-1];return n.route.id||yn(!1),n.route.id}function nT(){var t;let e=oe.useContext(xx),n=eT(),r=Ex();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function rT(){let{router:t}=Zk(Nx.UseNavigateStable),e=Ex(Ax.UseNavigateStable),n=oe.useRef(!1);return Sx(()=>{n.current=!0}),oe.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,md({fromRouteId:e},s)))},[t,e])}const iw={};function iT(t,e,n){iw[t]||(iw[t]=!0)}function sT(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function S0(t){let{to:e,replace:n,state:r,relative:i}=t;Mu()||yn(!1);let{future:s,static:a}=oe.useContext(Oa),{matches:o}=oe.useContext(Gs),{pathname:l}=Vu(),c=Uu(),d=a2(e,s2(o,s.v7_relativeSplatPath),l,i==="path"),p=JSON.stringify(d);return oe.useEffect(()=>c(JSON.parse(p),{replace:n,state:r,relative:i}),[c,p,i,n,r]),null}function aT(t){return zk(t.context)}function ss(t){yn(!1)}function oT(t){let{basename:e="/",children:n=null,location:r,navigationType:i=Co.Pop,navigator:s,static:a=!1,future:o}=t;Mu()&&yn(!1);let l=e.replace(/^\/*/,"/"),c=oe.useMemo(()=>({basename:l,navigator:s,static:a,future:md({v7_relativeSplatPath:!1},o)}),[l,o,s,a]);typeof r=="string"&&(r=Ou(r));let{pathname:d="/",search:p="",hash:g="",state:m=null,key:b="default"}=r,x=oe.useMemo(()=>{let T=Au(d,l);return T==null?null:{location:{pathname:T,search:p,hash:g,state:m,key:b},navigationType:i}},[l,d,p,g,m,b,i]);return x==null?null:oe.createElement(Oa.Provider,{value:c},oe.createElement(jm.Provider,{children:n,value:x}))}function lT(t){let{children:e,location:n}=t;return Hk(N0(e),n)}new Promise(()=>{});function N0(t,e){e===void 0&&(e=[]);let n=[];return oe.Children.forEach(t,(r,i)=>{if(!oe.isValidElement(r))return;let s=[...e,i];if(r.type===oe.Fragment){n.push.apply(n,N0(r.props.children,s));return}r.type!==ss&&yn(!1),!r.props.index||!r.props.children||yn(!1);let a={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=N0(r.props.children,s)),n.push(a)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function qp(){return qp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},qp.apply(this,arguments)}function kx(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function cT(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function uT(t,e){return t.button===0&&(!e||e==="_self")&&!cT(t)}const hT=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],dT=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],fT="6";try{window.__reactRouterVersion=fT}catch{}const pT=oe.createContext({isTransitioning:!1}),mT="startTransition",sw=iE[mT];function gT(t){let{basename:e,children:n,future:r,window:i}=t,s=oe.useRef();s.current==null&&(s.current=gk({window:i,v5Compat:!0}));let a=s.current,[o,l]=oe.useState({action:a.action,location:a.location}),{v7_startTransition:c}=r||{},d=oe.useCallback(p=>{c&&sw?sw(()=>l(p)):l(p)},[l,c]);return oe.useLayoutEffect(()=>a.listen(d),[a,d]),oe.useEffect(()=>sT(r),[r]),oe.createElement(oT,{basename:e,children:n,location:o.location,navigationType:o.action,navigator:a,future:r})}const vT=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",yT=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,wT=oe.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:a,state:o,target:l,to:c,preventScrollReset:d,viewTransition:p}=e,g=kx(e,hT),{basename:m}=oe.useContext(Oa),b,x=!1;if(typeof c=="string"&&yT.test(c)&&(b=c,vT))try{let C=new URL(window.location.href),F=c.startsWith("//")?new URL(C.protocol+c):new URL(c),Q=Au(F.pathname,m);F.origin===C.origin&&Q!=null?c=Q+F.search+F.hash:x=!0}catch{}let T=Bk(c,{relative:i}),w=bT(c,{replace:a,state:o,target:l,preventScrollReset:d,relative:i,viewTransition:p});function N(C){r&&r(C),C.defaultPrevented||w(C)}return oe.createElement("a",qp({},g,{href:b||T,onClick:x||s?r:N,ref:n,target:l}))}),_h=oe.forwardRef(function(e,n){let{"aria-current":r="page",caseSensitive:i=!1,className:s="",end:a=!1,style:o,to:l,viewTransition:c,children:d}=e,p=kx(e,dT),g=Lm(l,{relative:p.relative}),m=Vu(),b=oe.useContext(bx),{navigator:x,basename:T}=oe.useContext(Oa),w=b!=null&&xT(g)&&c===!0,N=x.encodeLocation?x.encodeLocation(g).pathname:g.pathname,C=m.pathname,F=b&&b.navigation&&b.navigation.location?b.navigation.location.pathname:null;i||(C=C.toLowerCase(),F=F?F.toLowerCase():null,N=N.toLowerCase()),F&&T&&(F=Au(F,T)||F);const Q=N!=="/"&&N.endsWith("/")?N.length-1:N.length;let B=C===N||!a&&C.startsWith(N)&&C.charAt(Q)==="/",j=F!=null&&(F===N||!a&&F.startsWith(N)&&F.charAt(N.length)==="/"),y={isActive:B,isPending:j,isTransitioning:w},S=B?r:void 0,L;typeof s=="function"?L=s(y):L=[s,B?"active":null,j?"pending":null,w?"transitioning":null].filter(Boolean).join(" ");let E=typeof o=="function"?o(y):o;return oe.createElement(wT,qp({},p,{"aria-current":S,className:L,ref:n,style:E,to:l,viewTransition:c}),typeof d=="function"?d(y):d)});var A0;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(A0||(A0={}));var aw;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(aw||(aw={}));function _T(t){let e=oe.useContext(Cm);return e||yn(!1),e}function bT(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:a,viewTransition:o}=e===void 0?{}:e,l=Uu(),c=Vu(),d=Lm(t,{relative:a});return oe.useCallback(p=>{if(uT(p,n)){p.preventDefault();let g=r!==void 0?r:Kp(c)===Kp(d);l(t,{replace:g,state:i,preventScrollReset:s,relative:a,viewTransition:o})}},[c,l,d,r,i,n,t,s,a,o])}function xT(t,e){e===void 0&&(e={});let n=oe.useContext(pT);n==null&&yn(!1);let{basename:r}=_T(A0.useViewTransitionState),i=Lm(t,{relative:e.relative});if(!n.isTransitioning)return!1;let s=Au(n.currentLocation.pathname,r)||n.currentLocation.pathname,a=Au(n.nextLocation.pathname,r)||n.nextLocation.pathname;return x0(i.pathname,a)!=null||x0(i.pathname,s)!=null}const Tx=oe.createContext(),Ti=()=>{const t=oe.useContext(Tx);if(!t)throw new Error("useNotification must be used within NotificationProvider");return t},ST=({children:t})=>{const[e,n]=oe.useState([]),[r,i]=oe.useState(null),[s,a]=oe.useState(null),o=oe.useCallback((T,w="info")=>{const N=Date.now()+Math.random(),C={id:N,message:T,type:w};return n(F=>[...F,C]),setTimeout(()=>{l(N)},4e3),N},[]),l=oe.useCallback(T=>{n(w=>w.filter(N=>N.id!==T))},[]),c=oe.useCallback(T=>o(T,"success"),[o]),d=oe.useCallback(T=>o(T,"error"),[o]),p=oe.useCallback(T=>o(T,"info"),[o]),g=oe.useCallback(T=>o(T,"warning"),[o]),m=oe.useCallback(T=>new Promise(w=>{i({...T,onConfirm:()=>{i(null),w(!0)},onCancel:()=>{i(null),w(!1)}})}),[]),b=oe.useCallback(T=>new Promise(w=>{a({...T,onConfirm:()=>{a(null),w(!0)},onCancel:()=>{a(null),w(!1)}})}),[]),x={toasts:e,showToast:o,removeToast:l,showSuccess:c,showError:d,showInfo:p,showWarning:g,showConfirm:m,confirmDialog:r,showCriticalConfirm:b,criticalConfirmDialog:s};return u.jsx(Tx.Provider,{value:x,children:t})},NT=t=>{switch(t){case"success":return"";case"error":return"";case"warning":return"";case"info":default:return""}},AT=t=>{switch(t){case"success":return"toast-success";case"error":return"toast-error";case"warning":return"toast-warning";case"info":default:return"toast-info"}};function ET({toast:t,onRemove:e}){return oe.useEffect(()=>{const n=setTimeout(()=>{e(t.id)},4e3);return()=>clearTimeout(n)},[t.id,e]),u.jsxs("div",{className:`toast ${AT(t.type)}`,children:[u.jsx("div",{className:"toast-icon",children:NT(t.type)}),u.jsx("div",{className:"toast-message",children:t.message}),u.jsx("button",{className:"toast-close",onClick:()=>e(t.id),"aria-label":"Luk notifikation",children:""})]})}function kT(){const{toasts:t,removeToast:e}=Ti();return u.jsx("div",{className:"toast-container",children:t.map(n=>u.jsx(ET,{toast:n,onRemove:e},n.id))})}function TT(){const{confirmDialog:t}=Ti();if(!t)return null;const{title:e="Bekrft handling",message:n,confirmText:r="Bekrft",cancelText:i="Annuller",onConfirm:s,onCancel:a,type:o="danger"}=t;return u.jsx("div",{className:"confirm-overlay",children:u.jsxs("div",{className:"confirm-dialog",children:[u.jsx("div",{className:"confirm-header",children:u.jsx("h3",{children:e})}),u.jsx("div",{className:"confirm-body",children:u.jsx("p",{children:n})}),u.jsxs("div",{className:"confirm-footer",children:[u.jsx("button",{className:"btn-secondary",onClick:a,children:i}),u.jsx("button",{className:o==="danger"?"btn-danger":"btn-primary",onClick:s,children:r})]})]})})}function IT(){const{criticalConfirmDialog:t}=Ti(),[e,n]=oe.useState(""),[r,i]=oe.useState(!1);if(oe.useEffect(()=>{n(""),i(!1)},[t]),!t)return null;const{title:s="Bekrft sletning",message:a,itemName:o,confirmText:l="Slet",cancelText:c="Annuller",onConfirm:d,onCancel:p,warningText:g}=t,m=()=>{e.toLowerCase()==="slet"?(i(!1),d()):i(!0)},b=x=>{x.key==="Enter"&&m()};return u.jsx("div",{className:"confirm-overlay",children:u.jsxs("div",{className:"critical-confirm-dialog",children:[u.jsxs("div",{className:"confirm-header critical-header",children:[u.jsx("div",{className:"critical-icon",children:""}),u.jsx("h3",{children:s})]}),u.jsxs("div",{className:"confirm-body",children:[u.jsx("p",{className:"critical-message",children:a}),o&&u.jsx("div",{className:"item-highlight",children:u.jsx("strong",{children:o})}),g&&u.jsxs("div",{className:"warning-box",children:[u.jsx("span",{className:"warning-icon",children:""}),u.jsx("span",{children:g})]}),u.jsxs("div",{className:"confirmation-input-section",children:[u.jsxs("label",{children:["Skriv ",u.jsx("strong",{children:'"Slet"'})," for at bekrfte:"]}),u.jsx("input",{type:"text",value:e,onChange:x=>{n(x.target.value),i(!1)},onKeyPress:b,placeholder:"Skriv Slet",className:r?"input-error":"",autoFocus:!0}),r&&u.jsx("span",{className:"error-text",children:'Du skal skrive "Slet" for at bekrfte'})]})]}),u.jsxs("div",{className:"confirm-footer",children:[u.jsx("button",{className:"btn-secondary",onClick:p,children:c}),u.jsx("button",{className:"btn-danger",onClick:m,disabled:!e,children:l})]})]})})}var ow={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ix=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},PT=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],a=t[n++],o=t[n++],l=((i&7)<<18|(s&63)<<12|(a&63)<<6|o&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],a=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|a&63)}}return e.join("")},Px={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],a=i+1<t.length,o=a?t[i+1]:0,l=i+2<t.length,c=l?t[i+2]:0,d=s>>2,p=(s&3)<<4|o>>4;let g=(o&15)<<2|c>>6,m=c&63;l||(m=64,a||(g=64)),r.push(n[d],n[p],n[g],n[m])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Ix(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):PT(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],o=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const p=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||o==null||c==null||p==null)throw new CT;const g=s<<2|o>>4;if(r.push(g),c!==64){const m=o<<4&240|c>>2;if(r.push(m),p!==64){const b=c<<6&192|p;r.push(b)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class CT extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const jT=function(t){const e=Ix(t);return Px.encodeByteArray(e,!0)},zp=function(t){return jT(t).replace(/\./g,"")},Cx=function(t){try{return Px.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RT=()=>LT().__FIREBASE_DEFAULTS__,DT=()=>{if(typeof process>"u"||typeof ow>"u")return;const t=ow.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},FT=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Cx(t[1]);return e&&JSON.parse(e)},Rm=()=>{try{return RT()||DT()||FT()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},jx=t=>{var e,n;return(n=(e=Rm())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Lx=t=>{const e=jx(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Rx=()=>{var t;return(t=Rm())===null||t===void 0?void 0:t.config},Dx=t=>{var e;return(e=Rm())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OT{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fx(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[zp(JSON.stringify(n)),zp(JSON.stringify(a)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function MT(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Lr())}function VT(){var t;const e=(t=Rm())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function UT(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function BT(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function KT(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function qT(){const t=Lr();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function zT(){return!VT()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function $T(){try{return typeof indexedDB=="object"}catch{return!1}}function HT(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WT="FirebaseError";class Qs extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=WT,Object.setPrototypeOf(this,Qs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,jd.prototype.create)}}class jd{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],a=s?GT(s,r):"Error",o=`${this.serviceName}: ${a} (${i}).`;return new Qs(i,o,r)}}function GT(t,e){return t.replace(QT,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const QT=/\{\$([^}]+)}/g;function YT(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function $p(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],a=e[i];if(lw(s)&&lw(a)){if(!$p(s,a))return!1}else if(s!==a)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function lw(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ld(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Ih(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function Ph(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function JT(t,e){const n=new XT(t,e);return n.subscribe.bind(n)}class XT{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");ZT(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=t1),i.error===void 0&&(i.error=t1),i.complete===void 0&&(i.complete=t1);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ZT(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function t1(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _n(t){return t&&t._delegate?t._delegate:t}class Qo{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tl="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eI{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new OT;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(nI(e))try{this.getOrInitializeService({instanceIdentifier:Tl})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Tl){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Tl){return this.instances.has(e)}getOptions(e=Tl){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,a]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(s);r===o&&a.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const a=this.instances.get(i);return a&&e(a,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:tI(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Tl){return this.component?this.component.multipleInstances?e:Tl:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function tI(t){return t===Tl?void 0:t}function nI(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rI{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new eI(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ft;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ft||(Ft={}));const iI={debug:Ft.DEBUG,verbose:Ft.VERBOSE,info:Ft.INFO,warn:Ft.WARN,error:Ft.ERROR,silent:Ft.SILENT},sI=Ft.INFO,aI={[Ft.DEBUG]:"log",[Ft.VERBOSE]:"log",[Ft.INFO]:"info",[Ft.WARN]:"warn",[Ft.ERROR]:"error"},oI=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=aI[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class o2{constructor(e){this.name=e,this._logLevel=sI,this._logHandler=oI,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ft))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?iI[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ft.DEBUG,...e),this._logHandler(this,Ft.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ft.VERBOSE,...e),this._logHandler(this,Ft.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ft.INFO,...e),this._logHandler(this,Ft.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ft.WARN,...e),this._logHandler(this,Ft.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ft.ERROR,...e),this._logHandler(this,Ft.ERROR,...e)}}const lI=(t,e)=>e.some(n=>t instanceof n);let cw,uw;function cI(){return cw||(cw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function uI(){return uw||(uw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Ox=new WeakMap,E0=new WeakMap,Mx=new WeakMap,n1=new WeakMap,l2=new WeakMap;function hI(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",a)},s=()=>{n(qo(t.result)),i()},a=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&Ox.set(n,t)}).catch(()=>{}),l2.set(e,t),e}function dI(t){if(E0.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",a),t.removeEventListener("abort",a)},s=()=>{n(),i()},a=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",a),t.addEventListener("abort",a)});E0.set(t,e)}let k0={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return E0.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Mx.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return qo(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function fI(t){k0=t(k0)}function pI(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(r1(this),e,...n);return Mx.set(r,e.sort?e.sort():[e]),qo(r)}:uI().includes(t)?function(...e){return t.apply(r1(this),e),qo(Ox.get(this))}:function(...e){return qo(t.apply(r1(this),e))}}function mI(t){return typeof t=="function"?pI(t):(t instanceof IDBTransaction&&dI(t),lI(t,cI())?new Proxy(t,k0):t)}function qo(t){if(t instanceof IDBRequest)return hI(t);if(n1.has(t))return n1.get(t);const e=mI(t);return e!==t&&(n1.set(t,e),l2.set(e,t)),e}const r1=t=>l2.get(t);function gI(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const a=indexedDB.open(t,e),o=qo(a);return r&&a.addEventListener("upgradeneeded",l=>{r(qo(a.result),l.oldVersion,l.newVersion,qo(a.transaction),l)}),n&&a.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),o.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),o}const vI=["get","getKey","getAll","getAllKeys","count"],yI=["put","add","delete","clear"],i1=new Map;function hw(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(i1.get(e))return i1.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=yI.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||vI.includes(n)))return;const s=async function(a,...o){const l=this.transaction(a,i?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(o.shift())),(await Promise.all([c[n](...o),i&&l.done]))[0]};return i1.set(e,s),s}fI(t=>({...t,get:(e,n,r)=>hw(e,n)||t.get(e,n,r),has:(e,n)=>!!hw(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wI{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(_I(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function _I(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const T0="@firebase/app",dw="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ca=new o2("@firebase/app"),bI="@firebase/app-compat",xI="@firebase/analytics-compat",SI="@firebase/analytics",NI="@firebase/app-check-compat",AI="@firebase/app-check",EI="@firebase/auth",kI="@firebase/auth-compat",TI="@firebase/database",II="@firebase/data-connect",PI="@firebase/database-compat",CI="@firebase/functions",jI="@firebase/functions-compat",LI="@firebase/installations",RI="@firebase/installations-compat",DI="@firebase/messaging",FI="@firebase/messaging-compat",OI="@firebase/performance",MI="@firebase/performance-compat",VI="@firebase/remote-config",UI="@firebase/remote-config-compat",BI="@firebase/storage",KI="@firebase/storage-compat",qI="@firebase/firestore",zI="@firebase/vertexai-preview",$I="@firebase/firestore-compat",HI="firebase",WI="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I0="[DEFAULT]",GI={[T0]:"fire-core",[bI]:"fire-core-compat",[SI]:"fire-analytics",[xI]:"fire-analytics-compat",[AI]:"fire-app-check",[NI]:"fire-app-check-compat",[EI]:"fire-auth",[kI]:"fire-auth-compat",[TI]:"fire-rtdb",[II]:"fire-data-connect",[PI]:"fire-rtdb-compat",[CI]:"fire-fn",[jI]:"fire-fn-compat",[LI]:"fire-iid",[RI]:"fire-iid-compat",[DI]:"fire-fcm",[FI]:"fire-fcm-compat",[OI]:"fire-perf",[MI]:"fire-perf-compat",[VI]:"fire-rc",[UI]:"fire-rc-compat",[BI]:"fire-gcs",[KI]:"fire-gcs-compat",[qI]:"fire-fst",[$I]:"fire-fst-compat",[zI]:"fire-vertex","fire-js":"fire-js",[HI]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hp=new Map,QI=new Map,P0=new Map;function fw(t,e){try{t.container.addComponent(e)}catch(n){Ca.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Gl(t){const e=t.name;if(P0.has(e))return Ca.debug(`There were multiple attempts to register component ${e}.`),!1;P0.set(e,t);for(const n of Hp.values())fw(n,t);for(const n of QI.values())fw(n,t);return!0}function Dm(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function _a(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},zo=new jd("app","Firebase",YI);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JI{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Qo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw zo.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nc=WI;function Vx(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:I0,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw zo.create("bad-app-name",{appName:String(i)});if(n||(n=Rx()),!n)throw zo.create("no-options");const s=Hp.get(i);if(s){if($p(n,s.options)&&$p(r,s.config))return s;throw zo.create("duplicate-app",{appName:i})}const a=new rI(i);for(const l of P0.values())a.addComponent(l);const o=new JI(n,r,a);return Hp.set(i,o),o}function c2(t=I0){const e=Hp.get(t);if(!e&&t===I0&&Rx())return Vx();if(!e)throw zo.create("no-app",{appName:t});return e}function Bs(t,e,n){var r;let i=(r=GI[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),a=e.match(/\s|\//);if(s||a){const o=[`Unable to register library "${i}" with version "${e}":`];s&&o.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&a&&o.push("and"),a&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ca.warn(o.join(" "));return}Gl(new Qo(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XI="firebase-heartbeat-database",ZI=1,gd="firebase-heartbeat-store";let s1=null;function Ux(){return s1||(s1=gI(XI,ZI,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(gd)}catch(n){console.warn(n)}}}}).catch(t=>{throw zo.create("idb-open",{originalErrorMessage:t.message})})),s1}async function eP(t){try{const n=(await Ux()).transaction(gd),r=await n.objectStore(gd).get(Bx(t));return await n.done,r}catch(e){if(e instanceof Qs)Ca.warn(e.message);else{const n=zo.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ca.warn(n.message)}}}async function pw(t,e){try{const r=(await Ux()).transaction(gd,"readwrite");await r.objectStore(gd).put(e,Bx(t)),await r.done}catch(n){if(n instanceof Qs)Ca.warn(n.message);else{const r=zo.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ca.warn(r.message)}}}function Bx(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tP=1024,nP=30*24*60*60*1e3;class rP{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new sP(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=mw();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(a=>a.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(a=>{const o=new Date(a.date).valueOf();return Date.now()-o<=nP}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Ca.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=mw(),{heartbeatsToSend:r,unsentEntries:i}=iP(this._heartbeatsCache.heartbeats),s=zp(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Ca.warn(n),""}}}function mw(){return new Date().toISOString().substring(0,10)}function iP(t,e=tP){const n=[];let r=t.slice();for(const i of t){const s=n.find(a=>a.agent===i.agent);if(s){if(s.dates.push(i.date),gw(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),gw(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class sP{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return $T()?HT().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await eP(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return pw(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return pw(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function gw(t){return zp(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aP(t){Gl(new Qo("platform-logger",e=>new wI(e),"PRIVATE")),Gl(new Qo("heartbeat",e=>new rP(e),"PRIVATE")),Bs(T0,dw,t),Bs(T0,dw,"esm2017"),Bs("fire-js","")}aP("");function u2(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function Kx(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const oP=Kx,qx=new jd("auth","Firebase",Kx());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wp=new o2("@firebase/auth");function lP(t,...e){Wp.logLevel<=Ft.WARN&&Wp.warn(`Auth (${nc}): ${t}`,...e)}function rp(t,...e){Wp.logLevel<=Ft.ERROR&&Wp.error(`Auth (${nc}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ps(t,...e){throw h2(t,...e)}function Ks(t,...e){return h2(t,...e)}function zx(t,e,n){const r=Object.assign(Object.assign({},oP()),{[e]:n});return new jd("auth","Firebase",r).create(e,{appName:t.name})}function $o(t){return zx(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function h2(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return qx.create(t,...e)}function wt(t,e,...n){if(!t)throw h2(e,...n)}function ba(t){const e="INTERNAL ASSERTION FAILED: "+t;throw rp(e),new Error(e)}function ja(t,e){t||ba(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C0(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function cP(){return vw()==="http:"||vw()==="https:"}function vw(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uP(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(cP()||BT()||"connection"in navigator)?navigator.onLine:!0}function hP(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rd{constructor(e,n){this.shortDelay=e,this.longDelay=n,ja(n>e,"Short delay should be less than long delay!"),this.isMobile=MT()||KT()}get(){return uP()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d2(t,e){ja(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $x{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ba("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ba("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ba("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dP={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fP=new Rd(3e4,6e4);function rc(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function il(t,e,n,r,i={}){return Hx(t,i,async()=>{let s={},a={};r&&(e==="GET"?a=r:s={body:JSON.stringify(r)});const o=Ld(Object.assign({key:t.config.apiKey},a)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:l},s);return UT()||(c.referrerPolicy="no-referrer"),$x.fetch()(Wx(t,t.config.apiHost,n,o),c)})}async function Hx(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},dP),e);try{const i=new mP(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const a=await s.json();if("needConfirmation"in a)throw Rf(t,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{const o=s.ok?a.errorMessage:a.error.message,[l,c]=o.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Rf(t,"credential-already-in-use",a);if(l==="EMAIL_EXISTS")throw Rf(t,"email-already-in-use",a);if(l==="USER_DISABLED")throw Rf(t,"user-disabled",a);const d=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw zx(t,d,c);ps(t,d)}}catch(i){if(i instanceof Qs)throw i;ps(t,"network-request-failed",{message:String(i)})}}async function Fm(t,e,n,r,i={}){const s=await il(t,e,n,r,i);return"mfaPendingCredential"in s&&ps(t,"multi-factor-auth-required",{_serverResponse:s}),s}function Wx(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?d2(t.config,i):`${t.config.apiScheme}://${i}`}function pP(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class mP{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Ks(this.auth,"network-request-failed")),fP.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Rf(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Ks(t,e,r);return i.customData._tokenResponse=n,i}function yw(t){return t!==void 0&&t.enterprise!==void 0}class gP{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return pP(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function vP(t,e){return il(t,"GET","/v2/recaptchaConfig",rc(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yP(t,e){return il(t,"POST","/v1/accounts:delete",e)}async function Gx(t,e){return il(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zh(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function wP(t,e=!1){const n=_n(t),r=await n.getIdToken(e),i=f2(r);wt(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,a=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:zh(a1(i.auth_time)),issuedAtTime:zh(a1(i.iat)),expirationTime:zh(a1(i.exp)),signInProvider:a||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function a1(t){return Number(t)*1e3}function f2(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return rp("JWT malformed, contained fewer than 3 sections"),null;try{const i=Cx(n);return i?JSON.parse(i):(rp("Failed to decode base64 JWT payload"),null)}catch(i){return rp("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function ww(t){const e=f2(t);return wt(e,"internal-error"),wt(typeof e.exp<"u","internal-error"),wt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vd(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Qs&&_P(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function _P({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bP{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j0{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=zh(this.lastLoginAt),this.creationTime=zh(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gp(t){var e;const n=t.auth,r=await t.getIdToken(),i=await vd(t,Gx(n,{idToken:r}));wt(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const a=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?Qx(s.providerUserInfo):[],o=SP(t.providerData,a),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(o!=null&&o.length),d=l?c:!1,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new j0(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(t,p)}async function xP(t){const e=_n(t);await Gp(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function SP(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function Qx(t){return t.map(e=>{var{providerId:n}=e,r=u2(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NP(t,e){const n=await Hx(t,{},async()=>{const r=Ld({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,a=Wx(t,i,"/v1/token",`key=${s}`),o=await t._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",$x.fetch()(a,{method:"POST",headers:o,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function AP(t,e){return il(t,"POST","/v2/accounts:revokeToken",rc(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uu{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){wt(e.idToken,"internal-error"),wt(typeof e.idToken<"u","internal-error"),wt(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):ww(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){wt(e.length!==0,"internal-error");const n=ww(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(wt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await NP(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,a=new uu;return r&&(wt(typeof r=="string","internal-error",{appName:e}),a.refreshToken=r),i&&(wt(typeof i=="string","internal-error",{appName:e}),a.accessToken=i),s&&(wt(typeof s=="number","internal-error",{appName:e}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new uu,this.toJSON())}_performRefresh(){return ba("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vo(t,e){wt(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class xa{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=u2(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new bP(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new j0(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await vd(this,this.stsTokenManager.getToken(this.auth,e));return wt(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return wP(this,e)}reload(){return xP(this)}_assign(e){this!==e&&(wt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new xa(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){wt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Gp(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(_a(this.auth.app))return Promise.reject($o(this.auth));const e=await this.getIdToken();return await vd(this,yP(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,a,o,l,c,d;const p=(r=n.displayName)!==null&&r!==void 0?r:void 0,g=(i=n.email)!==null&&i!==void 0?i:void 0,m=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,b=(a=n.photoURL)!==null&&a!==void 0?a:void 0,x=(o=n.tenantId)!==null&&o!==void 0?o:void 0,T=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,w=(c=n.createdAt)!==null&&c!==void 0?c:void 0,N=(d=n.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:C,emailVerified:F,isAnonymous:Q,providerData:B,stsTokenManager:j}=n;wt(C&&j,e,"internal-error");const y=uu.fromJSON(this.name,j);wt(typeof C=="string",e,"internal-error"),vo(p,e.name),vo(g,e.name),wt(typeof F=="boolean",e,"internal-error"),wt(typeof Q=="boolean",e,"internal-error"),vo(m,e.name),vo(b,e.name),vo(x,e.name),vo(T,e.name),vo(w,e.name),vo(N,e.name);const S=new xa({uid:C,auth:e,email:g,emailVerified:F,displayName:p,isAnonymous:Q,photoURL:b,phoneNumber:m,tenantId:x,stsTokenManager:y,createdAt:w,lastLoginAt:N});return B&&Array.isArray(B)&&(S.providerData=B.map(L=>Object.assign({},L))),T&&(S._redirectEventId=T),S}static async _fromIdTokenResponse(e,n,r=!1){const i=new uu;i.updateFromServerResponse(n);const s=new xa({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Gp(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];wt(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?Qx(i.providerUserInfo):[],a=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),o=new uu;o.updateFromIdToken(r);const l=new xa({uid:i.localId,auth:e,stsTokenManager:o,isAnonymous:a}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new j0(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _w=new Map;function Sa(t){ja(t instanceof Function,"Expected a class definition");let e=_w.get(t);return e?(ja(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,_w.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yx{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Yx.type="NONE";const bw=Yx;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ip(t,e,n){return`firebase:${t}:${e}:${n}`}class hu{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=ip(this.userKey,i.apiKey,s),this.fullPersistenceKey=ip("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?xa._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new hu(Sa(bw),e,r);const i=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=i[0]||Sa(bw);const a=ip(r,e.config.apiKey,e.name);let o=null;for(const c of n)try{const d=await c._get(a);if(d){const p=xa._fromJSON(e,d);c!==s&&(o=p),s=c;break}}catch{}const l=i.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new hu(s,e,r):(s=l[0],o&&await s._set(a,o.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(a)}catch{}})),new hu(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xw(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(e3(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Jx(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(n3(e))return"Blackberry";if(r3(e))return"Webos";if(Xx(e))return"Safari";if((e.includes("chrome/")||Zx(e))&&!e.includes("edge/"))return"Chrome";if(t3(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function Jx(t=Lr()){return/firefox\//i.test(t)}function Xx(t=Lr()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Zx(t=Lr()){return/crios\//i.test(t)}function e3(t=Lr()){return/iemobile/i.test(t)}function t3(t=Lr()){return/android/i.test(t)}function n3(t=Lr()){return/blackberry/i.test(t)}function r3(t=Lr()){return/webos/i.test(t)}function p2(t=Lr()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function EP(t=Lr()){var e;return p2(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function kP(){return qT()&&document.documentMode===10}function i3(t=Lr()){return p2(t)||t3(t)||r3(t)||n3(t)||/windows phone/i.test(t)||e3(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s3(t,e=[]){let n;switch(t){case"Browser":n=xw(Lr());break;case"Worker":n=`${xw(Lr())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${nc}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TP{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((a,o)=>{try{const l=e(s);a(l)}catch(l){o(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IP(t,e={}){return il(t,"GET","/v2/passwordPolicy",rc(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PP=6;class CP{constructor(e){var n,r,i,s;const a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=a.minPasswordLength)!==null&&n!==void 0?n:PP,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,a,o;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(a=l.containsNumericCharacter)!==null&&a!==void 0?a:!0),l.isValid&&(l.isValid=(o=l.containsNonAlphanumericCharacter)!==null&&o!==void 0?o:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jP{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Sw(this),this.idTokenSubscription=new Sw(this),this.beforeStateQueue=new TP(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=qx,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Sa(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await hu.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Gx(this,{idToken:e}),r=await xa._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(_a(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(o,o))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,o=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!a||a===o)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(a){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return wt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Gp(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=hP()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(_a(this.app))return Promise.reject($o(this));const n=e?_n(e):null;return n&&wt(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&wt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return _a(this.app)?Promise.reject($o(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return _a(this.app)?Promise.reject($o(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Sa(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await IP(this),n=new CP(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new jd("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await AP(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Sa(e)||this._popupRedirectResolver;wt(n,this,"argument-error"),this.redirectPersistenceManager=await hu.create(this,[Sa(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let a=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(wt(o,this,"internal-error"),o.then(()=>{a||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{a=!0,l()}}else{const l=e.addObserver(n);return()=>{a=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return wt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=s3(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&lP(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Bu(t){return _n(t)}class Sw{constructor(e){this.auth=e,this.observer=null,this.addObserver=JT(n=>this.observer=n)}get next(){return wt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Om={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function LP(t){Om=t}function a3(t){return Om.loadJS(t)}function RP(){return Om.recaptchaEnterpriseScript}function DP(){return Om.gapiScript}function FP(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const OP="recaptcha-enterprise",MP="NO_RECAPTCHA";class VP{constructor(e){this.type=OP,this.auth=Bu(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(a,o)=>{vP(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)o(new Error("recaptcha Enterprise site key undefined"));else{const c=new gP(l);return s.tenantId==null?s._agentRecaptchaConfig=c:s._tenantRecaptchaConfigs[s.tenantId]=c,a(c.siteKey)}}).catch(l=>{o(l)})})}function i(s,a,o){const l=window.grecaptcha;yw(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(c=>{a(c)}).catch(()=>{a(MP)})}):o(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,a)=>{r(this.auth).then(o=>{if(!n&&yw(window.grecaptcha))i(o,s,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let l=RP();l.length!==0&&(l+=o),a3(l).then(()=>{i(o,s,a)}).catch(c=>{a(c)})}}).catch(o=>{a(o)})})}}async function Nw(t,e,n,r=!1){const i=new VP(t);let s;try{s=await i.verify(n)}catch{s=await i.verify(n,!0)}const a=Object.assign({},e);return r?Object.assign(a,{captchaResp:s}):Object.assign(a,{captchaResponse:s}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function Aw(t,e,n,r){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await Nw(t,e,n,n==="getOobCode");return r(t,s)}else return r(t,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await Nw(t,e,n,n==="getOobCode");return r(t,a)}else return Promise.reject(s)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UP(t,e){const n=Dm(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if($p(s,e??{}))return i;ps(i,"already-initialized")}return n.initialize({options:e})}function BP(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Sa);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function KP(t,e,n){const r=Bu(t);wt(r._canInitEmulator,r,"emulator-config-failed"),wt(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=o3(e),{host:a,port:o}=qP(e),l=o===null?"":`:${o}`;r.config.emulator={url:`${s}//${a}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:a,port:o,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),zP()}function o3(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function qP(t){const e=o3(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:Ew(r.substr(s.length+1))}}else{const[s,a]=r.split(":");return{host:s,port:Ew(a)}}}function Ew(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function zP(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m2{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ba("not implemented")}_getIdTokenResponse(e){return ba("not implemented")}_linkToIdToken(e,n){return ba("not implemented")}_getReauthenticationResolver(e){return ba("not implemented")}}async function $P(t,e){return il(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HP(t,e){return Fm(t,"POST","/v1/accounts:signInWithPassword",rc(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WP(t,e){return Fm(t,"POST","/v1/accounts:signInWithEmailLink",rc(t,e))}async function GP(t,e){return Fm(t,"POST","/v1/accounts:signInWithEmailLink",rc(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yd extends m2{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new yd(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new yd(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Aw(e,n,"signInWithPassword",HP);case"emailLink":return WP(e,{email:this._email,oobCode:this._password});default:ps(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Aw(e,r,"signUpPassword",$P);case"emailLink":return GP(e,{idToken:n,email:this._email,oobCode:this._password});default:ps(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function du(t,e){return Fm(t,"POST","/v1/accounts:signInWithIdp",rc(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QP="http://localhost";class Ql extends m2{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ql(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):ps("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=u2(n,["providerId","signInMethod"]);if(!r||!i)return null;const a=new Ql(r,i);return a.idToken=s.idToken||void 0,a.accessToken=s.accessToken||void 0,a.secret=s.secret,a.nonce=s.nonce,a.pendingToken=s.pendingToken||null,a}_getIdTokenResponse(e){const n=this.buildRequest();return du(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,du(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,du(e,n)}buildRequest(){const e={requestUri:QP,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Ld(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YP(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function JP(t){const e=Ih(Ph(t)).link,n=e?Ih(Ph(e)).deep_link_id:null,r=Ih(Ph(t)).deep_link_id;return(r?Ih(Ph(r)).link:null)||r||n||e||t}class g2{constructor(e){var n,r,i,s,a,o;const l=Ih(Ph(e)),c=(n=l.apiKey)!==null&&n!==void 0?n:null,d=(r=l.oobCode)!==null&&r!==void 0?r:null,p=YP((i=l.mode)!==null&&i!==void 0?i:null);wt(c&&d&&p,"argument-error"),this.apiKey=c,this.operation=p,this.code=d,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(a=l.languageCode)!==null&&a!==void 0?a:null,this.tenantId=(o=l.tenantId)!==null&&o!==void 0?o:null}static parseLink(e){const n=JP(e);try{return new g2(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ku{constructor(){this.providerId=Ku.PROVIDER_ID}static credential(e,n){return yd._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=g2.parseLink(n);return wt(r,"argument-error"),yd._fromEmailAndCode(e,r.code,r.tenantId)}}Ku.PROVIDER_ID="password";Ku.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ku.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l3{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dd extends l3{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class No extends Dd{constructor(){super("facebook.com")}static credential(e){return Ql._fromParams({providerId:No.PROVIDER_ID,signInMethod:No.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return No.credentialFromTaggedObject(e)}static credentialFromError(e){return No.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return No.credential(e.oauthAccessToken)}catch{return null}}}No.FACEBOOK_SIGN_IN_METHOD="facebook.com";No.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ao extends Dd{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ql._fromParams({providerId:Ao.PROVIDER_ID,signInMethod:Ao.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Ao.credentialFromTaggedObject(e)}static credentialFromError(e){return Ao.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Ao.credential(n,r)}catch{return null}}}Ao.GOOGLE_SIGN_IN_METHOD="google.com";Ao.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eo extends Dd{constructor(){super("github.com")}static credential(e){return Ql._fromParams({providerId:Eo.PROVIDER_ID,signInMethod:Eo.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Eo.credentialFromTaggedObject(e)}static credentialFromError(e){return Eo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Eo.credential(e.oauthAccessToken)}catch{return null}}}Eo.GITHUB_SIGN_IN_METHOD="github.com";Eo.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ko extends Dd{constructor(){super("twitter.com")}static credential(e,n){return Ql._fromParams({providerId:ko.PROVIDER_ID,signInMethod:ko.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ko.credentialFromTaggedObject(e)}static credentialFromError(e){return ko.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return ko.credential(n,r)}catch{return null}}}ko.TWITTER_SIGN_IN_METHOD="twitter.com";ko.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eu{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await xa._fromIdTokenResponse(e,r,i),a=kw(r);return new Eu({user:s,providerId:a,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=kw(r);return new Eu({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function kw(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qp extends Qs{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Qp.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Qp(e,n,r,i)}}function c3(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Qp._fromErrorAndOperation(t,s,e,r):s})}async function XP(t,e,n=!1){const r=await vd(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Eu._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZP(t,e,n=!1){const{auth:r}=t;if(_a(r.app))return Promise.reject($o(r));const i="reauthenticate";try{const s=await vd(t,c3(r,i,e,t),n);wt(s.idToken,r,"internal-error");const a=f2(s.idToken);wt(a,r,"internal-error");const{sub:o}=a;return wt(t.uid===o,r,"user-mismatch"),Eu._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&ps(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function u3(t,e,n=!1){if(_a(t.app))return Promise.reject($o(t));const r="signIn",i=await c3(t,r,e),s=await Eu._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function eC(t,e){return u3(Bu(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tC(t){const e=Bu(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function nC(t,e,n){return _a(t.app)?Promise.reject($o(t)):eC(_n(t),Ku.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&tC(t),r})}function rC(t,e,n,r){return _n(t).onIdTokenChanged(e,n,r)}function iC(t,e,n){return _n(t).beforeAuthStateChanged(e,n)}function sC(t,e,n,r){return _n(t).onAuthStateChanged(e,n,r)}function aC(t){return _n(t).signOut()}const Yp="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h3{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Yp,"1"),this.storage.removeItem(Yp),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oC=1e3,lC=10;class d3 extends h3{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=i3(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((a,o,l)=>{this.notifyListeners(a,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const a=this.storage.getItem(r);!n&&this.localCache[r]===a||this.notifyListeners(r,a)},s=this.storage.getItem(r);kP()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,lC):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},oC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}d3.type="LOCAL";const cC=d3;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f3 extends h3{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}f3.type="SESSION";const p3=f3;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uC(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mm{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new Mm(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,a=this.handlersMap[i];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const o=Array.from(a).map(async c=>c(n.origin,s)),l=await uC(o);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Mm.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v2(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hC{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,a;return new Promise((o,l)=>{const c=v2("",20);i.port1.start();const d=setTimeout(()=>{l(new Error("unsupported_event"))},r);a={messageChannel:i,onMessage(p){const g=p;if(g.data.eventId===c)switch(g.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),o(g.data.response);break;default:clearTimeout(d),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(a),i.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[i.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qs(){return window}function dC(t){qs().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m3(){return typeof qs().WorkerGlobalScope<"u"&&typeof qs().importScripts=="function"}async function fC(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function pC(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function mC(){return m3()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g3="firebaseLocalStorageDb",gC=1,Jp="firebaseLocalStorage",v3="fbase_key";class Fd{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Vm(t,e){return t.transaction([Jp],e?"readwrite":"readonly").objectStore(Jp)}function vC(){const t=indexedDB.deleteDatabase(g3);return new Fd(t).toPromise()}function L0(){const t=indexedDB.open(g3,gC);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Jp,{keyPath:v3})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Jp)?e(r):(r.close(),await vC(),e(await L0()))})})}async function Tw(t,e,n){const r=Vm(t,!0).put({[v3]:e,value:n});return new Fd(r).toPromise()}async function yC(t,e){const n=Vm(t,!1).get(e),r=await new Fd(n).toPromise();return r===void 0?null:r.value}function Iw(t,e){const n=Vm(t,!0).delete(e);return new Fd(n).toPromise()}const wC=800,_C=3;class y3{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await L0(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>_C)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return m3()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Mm._getInstance(mC()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await fC(),!this.activeServiceWorker)return;this.sender=new hC(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||pC()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await L0();return await Tw(e,Yp,"1"),await Iw(e,Yp),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Tw(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>yC(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Iw(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=Vm(i,!1).getAll();return new Fd(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),wC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}y3.type="LOCAL";const bC=y3;new Rd(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xC(t,e){return e?Sa(e):(wt(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y2 extends m2{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return du(e,this._buildIdpRequest())}_linkToIdToken(e,n){return du(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return du(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function SC(t){return u3(t.auth,new y2(t),t.bypassAuthState)}function NC(t){const{auth:e,user:n}=t;return wt(n,e,"internal-error"),ZP(n,new y2(t),t.bypassAuthState)}async function AC(t){const{auth:e,user:n}=t;return wt(n,e,"internal-error"),XP(n,new y2(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w3{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:a,type:o}=e;if(a){this.reject(a);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return SC;case"linkViaPopup":case"linkViaRedirect":return AC;case"reauthViaPopup":case"reauthViaRedirect":return NC;default:ps(this.auth,"internal-error")}}resolve(e){ja(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ja(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EC=new Rd(2e3,1e4);class tu extends w3{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,tu.currentPopupAction&&tu.currentPopupAction.cancel(),tu.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return wt(e,this.auth,"internal-error"),e}async onExecution(){ja(this.filter.length===1,"Popup operations only handle one event");const e=v2();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Ks(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Ks(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,tu.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ks(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,EC.get())};e()}}tu.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kC="pendingRedirect",sp=new Map;class TC extends w3{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=sp.get(this.auth._key());if(!e){try{const r=await IC(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}sp.set(this.auth._key(),e)}return this.bypassAuthState||sp.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function IC(t,e){const n=jC(e),r=CC(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function PC(t,e){sp.set(t._key(),e)}function CC(t){return Sa(t._redirectPersistence)}function jC(t){return ip(kC,t.config.apiKey,t.name)}async function LC(t,e,n=!1){if(_a(t.app))return Promise.reject($o(t));const r=Bu(t),i=xC(r,e),a=await new TC(r,i,n).execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RC=10*60*1e3;class DC{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!FC(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!_3(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Ks(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=RC&&this.cachedEventUids.clear(),this.cachedEventUids.has(Pw(e))}saveEventToCache(e){this.cachedEventUids.add(Pw(e)),this.lastProcessedEventTime=Date.now()}}function Pw(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function _3({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function FC(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return _3(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OC(t,e={}){return il(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,VC=/^https?/;async function UC(t){if(t.config.emulator)return;const{authorizedDomains:e}=await OC(t);for(const n of e)try{if(BC(n))return}catch{}ps(t,"unauthorized-domain")}function BC(t){const e=C0(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===r}if(!VC.test(n))return!1;if(MC.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KC=new Rd(3e4,6e4);function Cw(){const t=qs().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function qC(t){return new Promise((e,n)=>{var r,i,s;function a(){Cw(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Cw(),n(Ks(t,"network-request-failed"))},timeout:KC.get()})}if(!((i=(r=qs().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=qs().gapi)===null||s===void 0)&&s.load)a();else{const o=FP("iframefcb");return qs()[o]=()=>{gapi.load?a():n(Ks(t,"network-request-failed"))},a3(`${DP()}?onload=${o}`).catch(l=>n(l))}}).catch(e=>{throw ap=null,e})}let ap=null;function zC(t){return ap=ap||qC(t),ap}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $C=new Rd(5e3,15e3),HC="__/auth/iframe",WC="emulator/auth/iframe",GC={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},QC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function YC(t){const e=t.config;wt(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?d2(e,WC):`https://${t.config.authDomain}/${HC}`,r={apiKey:e.apiKey,appName:t.name,v:nc},i=QC.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Ld(r).slice(1)}`}async function JC(t){const e=await zC(t),n=qs().gapi;return wt(n,t,"internal-error"),e.open({where:document.body,url:YC(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:GC,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const a=Ks(t,"network-request-failed"),o=qs().setTimeout(()=>{s(a)},$C.get());function l(){qs().clearTimeout(o),i(r)}r.ping(l).then(l,()=>{s(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XC={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},ZC=500,e8=600,t8="_blank",n8="http://localhost";class jw{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function r8(t,e,n,r=ZC,i=e8){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let o="";const l=Object.assign(Object.assign({},XC),{width:r.toString(),height:i.toString(),top:s,left:a}),c=Lr().toLowerCase();n&&(o=Zx(c)?t8:n),Jx(c)&&(e=e||n8,l.scrollbars="yes");const d=Object.entries(l).reduce((g,[m,b])=>`${g}${m}=${b},`,"");if(EP(c)&&o!=="_self")return i8(e||"",o),new jw(null);const p=window.open(e||"",o,d);wt(p,t,"popup-blocked");try{p.focus()}catch{}return new jw(p)}function i8(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s8="__/auth/handler",a8="emulator/auth/handler",o8=encodeURIComponent("fac");async function Lw(t,e,n,r,i,s){wt(t.config.authDomain,t,"auth-domain-config-required"),wt(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:nc,eventId:i};if(e instanceof l3){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",YT(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,p]of Object.entries({}))a[d]=p}if(e instanceof Dd){const d=e.getScopes().filter(p=>p!=="");d.length>0&&(a.scopes=d.join(","))}t.tenantId&&(a.tid=t.tenantId);const o=a;for(const d of Object.keys(o))o[d]===void 0&&delete o[d];const l=await t._getAppCheckToken(),c=l?`#${o8}=${encodeURIComponent(l)}`:"";return`${l8(t)}?${Ld(o).slice(1)}${c}`}function l8({config:t}){return t.emulator?d2(t,a8):`https://${t.authDomain}/${s8}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o1="webStorageSupport";class c8{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=p3,this._completeRedirectFn=LC,this._overrideRedirectResult=PC}async _openPopup(e,n,r,i){var s;ja((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const a=await Lw(e,n,r,C0(),i);return r8(e,a,v2())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await Lw(e,n,r,C0(),i);return dC(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(ja(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await JC(e),r=new DC(e);return n.register("authEvent",i=>(wt(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(o1,{type:o1},i=>{var s;const a=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[o1];a!==void 0&&n(!!a),ps(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=UC(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return i3()||Xx()||p2()}}const u8=c8;var Rw="@firebase/auth",Dw="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h8{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){wt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d8(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function f8(t){Gl(new Qo("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:o}=r.options;wt(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:a,authDomain:o,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:s3(t)},c=new jP(r,i,s,l);return BP(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Gl(new Qo("auth-internal",e=>{const n=Bu(e.getProvider("auth").getImmediate());return(r=>new h8(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Bs(Rw,Dw,d8(t)),Bs(Rw,Dw,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p8=5*60,m8=Dx("authIdTokenMaxAge")||p8;let Fw=null;const g8=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>m8)return;const i=n==null?void 0:n.token;Fw!==i&&(Fw=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function v8(t=c2()){const e=Dm(t,"auth");if(e.isInitialized())return e.getImmediate();const n=UP(t,{popupRedirectResolver:u8,persistence:[bC,cC,p3]}),r=Dx("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const a=g8(s.toString());iC(n,a,()=>a(n.currentUser)),rC(n,o=>a(o))}}const i=jx("auth");return i&&KP(n,`http://${i}`),n}function y8(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}LP({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=Ks("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",y8().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});f8("Browser");var w8="firebase",_8="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Bs(w8,_8,"app");var Ow=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Vl,b3;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(j,y){function S(){}S.prototype=y.prototype,j.D=y.prototype,j.prototype=new S,j.prototype.constructor=j,j.C=function(L,E,I){for(var k=Array(arguments.length-2),M=2;M<arguments.length;M++)k[M-2]=arguments[M];return y.prototype[E].apply(L,k)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(j,y,S){S||(S=0);var L=Array(16);if(typeof y=="string")for(var E=0;16>E;++E)L[E]=y.charCodeAt(S++)|y.charCodeAt(S++)<<8|y.charCodeAt(S++)<<16|y.charCodeAt(S++)<<24;else for(E=0;16>E;++E)L[E]=y[S++]|y[S++]<<8|y[S++]<<16|y[S++]<<24;y=j.g[0],S=j.g[1],E=j.g[2];var I=j.g[3],k=y+(I^S&(E^I))+L[0]+3614090360&4294967295;y=S+(k<<7&4294967295|k>>>25),k=I+(E^y&(S^E))+L[1]+3905402710&4294967295,I=y+(k<<12&4294967295|k>>>20),k=E+(S^I&(y^S))+L[2]+606105819&4294967295,E=I+(k<<17&4294967295|k>>>15),k=S+(y^E&(I^y))+L[3]+3250441966&4294967295,S=E+(k<<22&4294967295|k>>>10),k=y+(I^S&(E^I))+L[4]+4118548399&4294967295,y=S+(k<<7&4294967295|k>>>25),k=I+(E^y&(S^E))+L[5]+1200080426&4294967295,I=y+(k<<12&4294967295|k>>>20),k=E+(S^I&(y^S))+L[6]+2821735955&4294967295,E=I+(k<<17&4294967295|k>>>15),k=S+(y^E&(I^y))+L[7]+4249261313&4294967295,S=E+(k<<22&4294967295|k>>>10),k=y+(I^S&(E^I))+L[8]+1770035416&4294967295,y=S+(k<<7&4294967295|k>>>25),k=I+(E^y&(S^E))+L[9]+2336552879&4294967295,I=y+(k<<12&4294967295|k>>>20),k=E+(S^I&(y^S))+L[10]+4294925233&4294967295,E=I+(k<<17&4294967295|k>>>15),k=S+(y^E&(I^y))+L[11]+2304563134&4294967295,S=E+(k<<22&4294967295|k>>>10),k=y+(I^S&(E^I))+L[12]+1804603682&4294967295,y=S+(k<<7&4294967295|k>>>25),k=I+(E^y&(S^E))+L[13]+4254626195&4294967295,I=y+(k<<12&4294967295|k>>>20),k=E+(S^I&(y^S))+L[14]+2792965006&4294967295,E=I+(k<<17&4294967295|k>>>15),k=S+(y^E&(I^y))+L[15]+1236535329&4294967295,S=E+(k<<22&4294967295|k>>>10),k=y+(E^I&(S^E))+L[1]+4129170786&4294967295,y=S+(k<<5&4294967295|k>>>27),k=I+(S^E&(y^S))+L[6]+3225465664&4294967295,I=y+(k<<9&4294967295|k>>>23),k=E+(y^S&(I^y))+L[11]+643717713&4294967295,E=I+(k<<14&4294967295|k>>>18),k=S+(I^y&(E^I))+L[0]+3921069994&4294967295,S=E+(k<<20&4294967295|k>>>12),k=y+(E^I&(S^E))+L[5]+3593408605&4294967295,y=S+(k<<5&4294967295|k>>>27),k=I+(S^E&(y^S))+L[10]+38016083&4294967295,I=y+(k<<9&4294967295|k>>>23),k=E+(y^S&(I^y))+L[15]+3634488961&4294967295,E=I+(k<<14&4294967295|k>>>18),k=S+(I^y&(E^I))+L[4]+3889429448&4294967295,S=E+(k<<20&4294967295|k>>>12),k=y+(E^I&(S^E))+L[9]+568446438&4294967295,y=S+(k<<5&4294967295|k>>>27),k=I+(S^E&(y^S))+L[14]+3275163606&4294967295,I=y+(k<<9&4294967295|k>>>23),k=E+(y^S&(I^y))+L[3]+4107603335&4294967295,E=I+(k<<14&4294967295|k>>>18),k=S+(I^y&(E^I))+L[8]+1163531501&4294967295,S=E+(k<<20&4294967295|k>>>12),k=y+(E^I&(S^E))+L[13]+2850285829&4294967295,y=S+(k<<5&4294967295|k>>>27),k=I+(S^E&(y^S))+L[2]+4243563512&4294967295,I=y+(k<<9&4294967295|k>>>23),k=E+(y^S&(I^y))+L[7]+1735328473&4294967295,E=I+(k<<14&4294967295|k>>>18),k=S+(I^y&(E^I))+L[12]+2368359562&4294967295,S=E+(k<<20&4294967295|k>>>12),k=y+(S^E^I)+L[5]+4294588738&4294967295,y=S+(k<<4&4294967295|k>>>28),k=I+(y^S^E)+L[8]+2272392833&4294967295,I=y+(k<<11&4294967295|k>>>21),k=E+(I^y^S)+L[11]+1839030562&4294967295,E=I+(k<<16&4294967295|k>>>16),k=S+(E^I^y)+L[14]+4259657740&4294967295,S=E+(k<<23&4294967295|k>>>9),k=y+(S^E^I)+L[1]+2763975236&4294967295,y=S+(k<<4&4294967295|k>>>28),k=I+(y^S^E)+L[4]+1272893353&4294967295,I=y+(k<<11&4294967295|k>>>21),k=E+(I^y^S)+L[7]+4139469664&4294967295,E=I+(k<<16&4294967295|k>>>16),k=S+(E^I^y)+L[10]+3200236656&4294967295,S=E+(k<<23&4294967295|k>>>9),k=y+(S^E^I)+L[13]+681279174&4294967295,y=S+(k<<4&4294967295|k>>>28),k=I+(y^S^E)+L[0]+3936430074&4294967295,I=y+(k<<11&4294967295|k>>>21),k=E+(I^y^S)+L[3]+3572445317&4294967295,E=I+(k<<16&4294967295|k>>>16),k=S+(E^I^y)+L[6]+76029189&4294967295,S=E+(k<<23&4294967295|k>>>9),k=y+(S^E^I)+L[9]+3654602809&4294967295,y=S+(k<<4&4294967295|k>>>28),k=I+(y^S^E)+L[12]+3873151461&4294967295,I=y+(k<<11&4294967295|k>>>21),k=E+(I^y^S)+L[15]+530742520&4294967295,E=I+(k<<16&4294967295|k>>>16),k=S+(E^I^y)+L[2]+3299628645&4294967295,S=E+(k<<23&4294967295|k>>>9),k=y+(E^(S|~I))+L[0]+4096336452&4294967295,y=S+(k<<6&4294967295|k>>>26),k=I+(S^(y|~E))+L[7]+1126891415&4294967295,I=y+(k<<10&4294967295|k>>>22),k=E+(y^(I|~S))+L[14]+2878612391&4294967295,E=I+(k<<15&4294967295|k>>>17),k=S+(I^(E|~y))+L[5]+4237533241&4294967295,S=E+(k<<21&4294967295|k>>>11),k=y+(E^(S|~I))+L[12]+1700485571&4294967295,y=S+(k<<6&4294967295|k>>>26),k=I+(S^(y|~E))+L[3]+2399980690&4294967295,I=y+(k<<10&4294967295|k>>>22),k=E+(y^(I|~S))+L[10]+4293915773&4294967295,E=I+(k<<15&4294967295|k>>>17),k=S+(I^(E|~y))+L[1]+2240044497&4294967295,S=E+(k<<21&4294967295|k>>>11),k=y+(E^(S|~I))+L[8]+1873313359&4294967295,y=S+(k<<6&4294967295|k>>>26),k=I+(S^(y|~E))+L[15]+4264355552&4294967295,I=y+(k<<10&4294967295|k>>>22),k=E+(y^(I|~S))+L[6]+2734768916&4294967295,E=I+(k<<15&4294967295|k>>>17),k=S+(I^(E|~y))+L[13]+1309151649&4294967295,S=E+(k<<21&4294967295|k>>>11),k=y+(E^(S|~I))+L[4]+4149444226&4294967295,y=S+(k<<6&4294967295|k>>>26),k=I+(S^(y|~E))+L[11]+3174756917&4294967295,I=y+(k<<10&4294967295|k>>>22),k=E+(y^(I|~S))+L[2]+718787259&4294967295,E=I+(k<<15&4294967295|k>>>17),k=S+(I^(E|~y))+L[9]+3951481745&4294967295,j.g[0]=j.g[0]+y&4294967295,j.g[1]=j.g[1]+(E+(k<<21&4294967295|k>>>11))&4294967295,j.g[2]=j.g[2]+E&4294967295,j.g[3]=j.g[3]+I&4294967295}r.prototype.u=function(j,y){y===void 0&&(y=j.length);for(var S=y-this.blockSize,L=this.B,E=this.h,I=0;I<y;){if(E==0)for(;I<=S;)i(this,j,I),I+=this.blockSize;if(typeof j=="string"){for(;I<y;)if(L[E++]=j.charCodeAt(I++),E==this.blockSize){i(this,L),E=0;break}}else for(;I<y;)if(L[E++]=j[I++],E==this.blockSize){i(this,L),E=0;break}}this.h=E,this.o+=y},r.prototype.v=function(){var j=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);j[0]=128;for(var y=1;y<j.length-8;++y)j[y]=0;var S=8*this.o;for(y=j.length-8;y<j.length;++y)j[y]=S&255,S/=256;for(this.u(j),j=Array(16),y=S=0;4>y;++y)for(var L=0;32>L;L+=8)j[S++]=this.g[y]>>>L&255;return j};function s(j,y){var S=o;return Object.prototype.hasOwnProperty.call(S,j)?S[j]:S[j]=y(j)}function a(j,y){this.h=y;for(var S=[],L=!0,E=j.length-1;0<=E;E--){var I=j[E]|0;L&&I==y||(S[E]=I,L=!1)}this.g=S}var o={};function l(j){return-128<=j&&128>j?s(j,function(y){return new a([y|0],0>y?-1:0)}):new a([j|0],0>j?-1:0)}function c(j){if(isNaN(j)||!isFinite(j))return p;if(0>j)return T(c(-j));for(var y=[],S=1,L=0;j>=S;L++)y[L]=j/S|0,S*=4294967296;return new a(y,0)}function d(j,y){if(j.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(j.charAt(0)=="-")return T(d(j.substring(1),y));if(0<=j.indexOf("-"))throw Error('number format error: interior "-" character');for(var S=c(Math.pow(y,8)),L=p,E=0;E<j.length;E+=8){var I=Math.min(8,j.length-E),k=parseInt(j.substring(E,E+I),y);8>I?(I=c(Math.pow(y,I)),L=L.j(I).add(c(k))):(L=L.j(S),L=L.add(c(k)))}return L}var p=l(0),g=l(1),m=l(16777216);t=a.prototype,t.m=function(){if(x(this))return-T(this).m();for(var j=0,y=1,S=0;S<this.g.length;S++){var L=this.i(S);j+=(0<=L?L:4294967296+L)*y,y*=4294967296}return j},t.toString=function(j){if(j=j||10,2>j||36<j)throw Error("radix out of range: "+j);if(b(this))return"0";if(x(this))return"-"+T(this).toString(j);for(var y=c(Math.pow(j,6)),S=this,L="";;){var E=F(S,y).g;S=w(S,E.j(y));var I=((0<S.g.length?S.g[0]:S.h)>>>0).toString(j);if(S=E,b(S))return I+L;for(;6>I.length;)I="0"+I;L=I+L}},t.i=function(j){return 0>j?0:j<this.g.length?this.g[j]:this.h};function b(j){if(j.h!=0)return!1;for(var y=0;y<j.g.length;y++)if(j.g[y]!=0)return!1;return!0}function x(j){return j.h==-1}t.l=function(j){return j=w(this,j),x(j)?-1:b(j)?0:1};function T(j){for(var y=j.g.length,S=[],L=0;L<y;L++)S[L]=~j.g[L];return new a(S,~j.h).add(g)}t.abs=function(){return x(this)?T(this):this},t.add=function(j){for(var y=Math.max(this.g.length,j.g.length),S=[],L=0,E=0;E<=y;E++){var I=L+(this.i(E)&65535)+(j.i(E)&65535),k=(I>>>16)+(this.i(E)>>>16)+(j.i(E)>>>16);L=k>>>16,I&=65535,k&=65535,S[E]=k<<16|I}return new a(S,S[S.length-1]&-2147483648?-1:0)};function w(j,y){return j.add(T(y))}t.j=function(j){if(b(this)||b(j))return p;if(x(this))return x(j)?T(this).j(T(j)):T(T(this).j(j));if(x(j))return T(this.j(T(j)));if(0>this.l(m)&&0>j.l(m))return c(this.m()*j.m());for(var y=this.g.length+j.g.length,S=[],L=0;L<2*y;L++)S[L]=0;for(L=0;L<this.g.length;L++)for(var E=0;E<j.g.length;E++){var I=this.i(L)>>>16,k=this.i(L)&65535,M=j.i(E)>>>16,te=j.i(E)&65535;S[2*L+2*E]+=k*te,N(S,2*L+2*E),S[2*L+2*E+1]+=I*te,N(S,2*L+2*E+1),S[2*L+2*E+1]+=k*M,N(S,2*L+2*E+1),S[2*L+2*E+2]+=I*M,N(S,2*L+2*E+2)}for(L=0;L<y;L++)S[L]=S[2*L+1]<<16|S[2*L];for(L=y;L<2*y;L++)S[L]=0;return new a(S,0)};function N(j,y){for(;(j[y]&65535)!=j[y];)j[y+1]+=j[y]>>>16,j[y]&=65535,y++}function C(j,y){this.g=j,this.h=y}function F(j,y){if(b(y))throw Error("division by zero");if(b(j))return new C(p,p);if(x(j))return y=F(T(j),y),new C(T(y.g),T(y.h));if(x(y))return y=F(j,T(y)),new C(T(y.g),y.h);if(30<j.g.length){if(x(j)||x(y))throw Error("slowDivide_ only works with positive integers.");for(var S=g,L=y;0>=L.l(j);)S=Q(S),L=Q(L);var E=B(S,1),I=B(L,1);for(L=B(L,2),S=B(S,2);!b(L);){var k=I.add(L);0>=k.l(j)&&(E=E.add(S),I=k),L=B(L,1),S=B(S,1)}return y=w(j,E.j(y)),new C(E,y)}for(E=p;0<=j.l(y);){for(S=Math.max(1,Math.floor(j.m()/y.m())),L=Math.ceil(Math.log(S)/Math.LN2),L=48>=L?1:Math.pow(2,L-48),I=c(S),k=I.j(y);x(k)||0<k.l(j);)S-=L,I=c(S),k=I.j(y);b(I)&&(I=g),E=E.add(I),j=w(j,k)}return new C(E,j)}t.A=function(j){return F(this,j).h},t.and=function(j){for(var y=Math.max(this.g.length,j.g.length),S=[],L=0;L<y;L++)S[L]=this.i(L)&j.i(L);return new a(S,this.h&j.h)},t.or=function(j){for(var y=Math.max(this.g.length,j.g.length),S=[],L=0;L<y;L++)S[L]=this.i(L)|j.i(L);return new a(S,this.h|j.h)},t.xor=function(j){for(var y=Math.max(this.g.length,j.g.length),S=[],L=0;L<y;L++)S[L]=this.i(L)^j.i(L);return new a(S,this.h^j.h)};function Q(j){for(var y=j.g.length+1,S=[],L=0;L<y;L++)S[L]=j.i(L)<<1|j.i(L-1)>>>31;return new a(S,j.h)}function B(j,y){var S=y>>5;y%=32;for(var L=j.g.length-S,E=[],I=0;I<L;I++)E[I]=0<y?j.i(I+S)>>>y|j.i(I+S+1)<<32-y:j.i(I+S);return new a(E,j.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,b3=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=c,a.fromString=d,Vl=a}).apply(typeof Ow<"u"?Ow:typeof self<"u"?self:typeof window<"u"?window:{});var Df=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var x3,Ch,S3,op,R0,N3,A3,E3;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(f,P,D){return f==Array.prototype||f==Object.prototype||(f[P]=D.value),f};function n(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof Df=="object"&&Df];for(var P=0;P<f.length;++P){var D=f[P];if(D&&D.Math==Math)return D}throw Error("Cannot find global object")}var r=n(this);function i(f,P){if(P)e:{var D=r;f=f.split(".");for(var X=0;X<f.length-1;X++){var ge=f[X];if(!(ge in D))break e;D=D[ge]}f=f[f.length-1],X=D[f],P=P(X),P!=X&&P!=null&&e(D,f,{configurable:!0,writable:!0,value:P})}}function s(f,P){f instanceof String&&(f+="");var D=0,X=!1,ge={next:function(){if(!X&&D<f.length){var Ne=D++;return{value:P(Ne,f[Ne]),done:!1}}return X=!0,{done:!0,value:void 0}}};return ge[Symbol.iterator]=function(){return ge},ge}i("Array.prototype.values",function(f){return f||function(){return s(this,function(P,D){return D})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},o=this||self;function l(f){var P=typeof f;return P=P!="object"?P:f?Array.isArray(f)?"array":P:"null",P=="array"||P=="object"&&typeof f.length=="number"}function c(f){var P=typeof f;return P=="object"&&f!=null||P=="function"}function d(f,P,D){return f.call.apply(f.bind,arguments)}function p(f,P,D){if(!f)throw Error();if(2<arguments.length){var X=Array.prototype.slice.call(arguments,2);return function(){var ge=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(ge,X),f.apply(P,ge)}}return function(){return f.apply(P,arguments)}}function g(f,P,D){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:p,g.apply(null,arguments)}function m(f,P){var D=Array.prototype.slice.call(arguments,1);return function(){var X=D.slice();return X.push.apply(X,arguments),f.apply(this,X)}}function b(f,P){function D(){}D.prototype=P.prototype,f.aa=P.prototype,f.prototype=new D,f.prototype.constructor=f,f.Qb=function(X,ge,Ne){for(var Ve=Array(arguments.length-2),St=2;St<arguments.length;St++)Ve[St-2]=arguments[St];return P.prototype[ge].apply(X,Ve)}}function x(f){const P=f.length;if(0<P){const D=Array(P);for(let X=0;X<P;X++)D[X]=f[X];return D}return[]}function T(f,P){for(let D=1;D<arguments.length;D++){const X=arguments[D];if(l(X)){const ge=f.length||0,Ne=X.length||0;f.length=ge+Ne;for(let Ve=0;Ve<Ne;Ve++)f[ge+Ve]=X[Ve]}else f.push(X)}}class w{constructor(P,D){this.i=P,this.j=D,this.h=0,this.g=null}get(){let P;return 0<this.h?(this.h--,P=this.g,this.g=P.next,P.next=null):P=this.i(),P}}function N(f){return/^[\s\xa0]*$/.test(f)}function C(){var f=o.navigator;return f&&(f=f.userAgent)?f:""}function F(f){return F[" "](f),f}F[" "]=function(){};var Q=C().indexOf("Gecko")!=-1&&!(C().toLowerCase().indexOf("webkit")!=-1&&C().indexOf("Edge")==-1)&&!(C().indexOf("Trident")!=-1||C().indexOf("MSIE")!=-1)&&C().indexOf("Edge")==-1;function B(f,P,D){for(const X in f)P.call(D,f[X],X,f)}function j(f,P){for(const D in f)P.call(void 0,f[D],D,f)}function y(f){const P={};for(const D in f)P[D]=f[D];return P}const S="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function L(f,P){let D,X;for(let ge=1;ge<arguments.length;ge++){X=arguments[ge];for(D in X)f[D]=X[D];for(let Ne=0;Ne<S.length;Ne++)D=S[Ne],Object.prototype.hasOwnProperty.call(X,D)&&(f[D]=X[D])}}function E(f){var P=1;f=f.split(":");const D=[];for(;0<P&&f.length;)D.push(f.shift()),P--;return f.length&&D.push(f.join(":")),D}function I(f){o.setTimeout(()=>{throw f},0)}function k(){var f=$;let P=null;return f.g&&(P=f.g,f.g=f.g.next,f.g||(f.h=null),P.next=null),P}class M{constructor(){this.h=this.g=null}add(P,D){const X=te.get();X.set(P,D),this.h?this.h.next=X:this.g=X,this.h=X}}var te=new w(()=>new V,f=>f.reset());class V{constructor(){this.next=this.g=this.h=null}set(P,D){this.h=P,this.g=D,this.next=null}reset(){this.next=this.g=this.h=null}}let U,z=!1,$=new M,ne=()=>{const f=o.Promise.resolve(void 0);U=()=>{f.then(we)}};var we=()=>{for(var f;f=k();){try{f.h.call(f.g)}catch(D){I(D)}var P=te;P.j(f),100>P.h&&(P.h++,f.next=P.g,P.g=f)}z=!1};function O(){this.s=this.s,this.C=this.C}O.prototype.s=!1,O.prototype.ma=function(){this.s||(this.s=!0,this.N())},O.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Y(f,P){this.type=f,this.g=this.target=P,this.defaultPrevented=!1}Y.prototype.h=function(){this.defaultPrevented=!0};var J=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var f=!1,P=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const D=()=>{};o.addEventListener("test",D,P),o.removeEventListener("test",D,P)}catch{}return f}();function H(f,P){if(Y.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f){var D=this.type=f.type,X=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;if(this.target=f.target||f.srcElement,this.g=P,P=f.relatedTarget){if(Q){e:{try{F(P.nodeName);var ge=!0;break e}catch{}ge=!1}ge||(P=null)}}else D=="mouseover"?P=f.fromElement:D=="mouseout"&&(P=f.toElement);this.relatedTarget=P,X?(this.clientX=X.clientX!==void 0?X.clientX:X.pageX,this.clientY=X.clientY!==void 0?X.clientY:X.pageY,this.screenX=X.screenX||0,this.screenY=X.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=typeof f.pointerType=="string"?f.pointerType:se[f.pointerType]||"",this.state=f.state,this.i=f,f.defaultPrevented&&H.aa.h.call(this)}}b(H,Y);var se={2:"touch",3:"pen",4:"mouse"};H.prototype.h=function(){H.aa.h.call(this);var f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var le="closure_listenable_"+(1e6*Math.random()|0),ue=0;function de(f,P,D,X,ge){this.listener=f,this.proxy=null,this.src=P,this.type=D,this.capture=!!X,this.ha=ge,this.key=++ue,this.da=this.fa=!1}function Ae(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function Te(f){this.src=f,this.g={},this.h=0}Te.prototype.add=function(f,P,D,X,ge){var Ne=f.toString();f=this.g[Ne],f||(f=this.g[Ne]=[],this.h++);var Ve=Be(f,P,X,ge);return-1<Ve?(P=f[Ve],D||(P.fa=!1)):(P=new de(P,this.src,Ne,!!X,ge),P.fa=D,f.push(P)),P};function Re(f,P){var D=P.type;if(D in f.g){var X=f.g[D],ge=Array.prototype.indexOf.call(X,P,void 0),Ne;(Ne=0<=ge)&&Array.prototype.splice.call(X,ge,1),Ne&&(Ae(P),f.g[D].length==0&&(delete f.g[D],f.h--))}}function Be(f,P,D,X){for(var ge=0;ge<f.length;++ge){var Ne=f[ge];if(!Ne.da&&Ne.listener==P&&Ne.capture==!!D&&Ne.ha==X)return ge}return-1}var Xe="closure_lm_"+(1e6*Math.random()|0),be={};function ae(f,P,D,X,ge){if(Array.isArray(P)){for(var Ne=0;Ne<P.length;Ne++)ae(f,P[Ne],D,X,ge);return null}return D=at(D),f&&f[le]?f.K(P,D,c(X)?!!X.capture:!1,ge):He(f,P,D,!1,X,ge)}function He(f,P,D,X,ge,Ne){if(!P)throw Error("Invalid event type");var Ve=c(ge)?!!ge.capture:!!ge,St=We(f);if(St||(f[Xe]=St=new Te(f)),D=St.add(P,D,X,Ve,Ne),D.proxy)return D;if(X=De(),D.proxy=X,X.src=f,X.listener=D,f.addEventListener)J||(ge=Ve),ge===void 0&&(ge=!1),f.addEventListener(P.toString(),X,ge);else if(f.attachEvent)f.attachEvent(Me(P.toString()),X);else if(f.addListener&&f.removeListener)f.addListener(X);else throw Error("addEventListener and attachEvent are unavailable.");return D}function De(){function f(D){return P.call(f.src,f.listener,D)}const P=Ke;return f}function he(f,P,D,X,ge){if(Array.isArray(P))for(var Ne=0;Ne<P.length;Ne++)he(f,P[Ne],D,X,ge);else X=c(X)?!!X.capture:!!X,D=at(D),f&&f[le]?(f=f.i,P=String(P).toString(),P in f.g&&(Ne=f.g[P],D=Be(Ne,D,X,ge),-1<D&&(Ae(Ne[D]),Array.prototype.splice.call(Ne,D,1),Ne.length==0&&(delete f.g[P],f.h--)))):f&&(f=We(f))&&(P=f.g[P.toString()],f=-1,P&&(f=Be(P,D,X,ge)),(D=-1<f?P[f]:null)&&Ie(D))}function Ie(f){if(typeof f!="number"&&f&&!f.da){var P=f.src;if(P&&P[le])Re(P.i,f);else{var D=f.type,X=f.proxy;P.removeEventListener?P.removeEventListener(D,X,f.capture):P.detachEvent?P.detachEvent(Me(D),X):P.addListener&&P.removeListener&&P.removeListener(X),(D=We(P))?(Re(D,f),D.h==0&&(D.src=null,P[Xe]=null)):Ae(f)}}}function Me(f){return f in be?be[f]:be[f]="on"+f}function Ke(f,P){if(f.da)f=!0;else{P=new H(P,this);var D=f.listener,X=f.ha||f.src;f.fa&&Ie(f),f=D.call(X,P)}return f}function We(f){return f=f[Xe],f instanceof Te?f:null}var Ye="__closure_events_fn_"+(1e9*Math.random()>>>0);function at(f){return typeof f=="function"?f:(f[Ye]||(f[Ye]=function(P){return f.handleEvent(P)}),f[Ye])}function tt(){O.call(this),this.i=new Te(this),this.M=this,this.F=null}b(tt,O),tt.prototype[le]=!0,tt.prototype.removeEventListener=function(f,P,D,X){he(this,f,P,D,X)};function ut(f,P){var D,X=f.F;if(X)for(D=[];X;X=X.F)D.push(X);if(f=f.M,X=P.type||P,typeof P=="string")P=new Y(P,f);else if(P instanceof Y)P.target=P.target||f;else{var ge=P;P=new Y(X,f),L(P,ge)}if(ge=!0,D)for(var Ne=D.length-1;0<=Ne;Ne--){var Ve=P.g=D[Ne];ge=dt(Ve,X,!0,P)&&ge}if(Ve=P.g=f,ge=dt(Ve,X,!0,P)&&ge,ge=dt(Ve,X,!1,P)&&ge,D)for(Ne=0;Ne<D.length;Ne++)Ve=P.g=D[Ne],ge=dt(Ve,X,!1,P)&&ge}tt.prototype.N=function(){if(tt.aa.N.call(this),this.i){var f=this.i,P;for(P in f.g){for(var D=f.g[P],X=0;X<D.length;X++)Ae(D[X]);delete f.g[P],f.h--}}this.F=null},tt.prototype.K=function(f,P,D,X){return this.i.add(String(f),P,!1,D,X)},tt.prototype.L=function(f,P,D,X){return this.i.add(String(f),P,!0,D,X)};function dt(f,P,D,X){if(P=f.i.g[String(P)],!P)return!0;P=P.concat();for(var ge=!0,Ne=0;Ne<P.length;++Ne){var Ve=P[Ne];if(Ve&&!Ve.da&&Ve.capture==D){var St=Ve.listener,jt=Ve.ha||Ve.src;Ve.fa&&Re(f.i,Ve),ge=St.call(jt,X)!==!1&&ge}}return ge&&!X.defaultPrevented}function ot(f,P,D){if(typeof f=="function")D&&(f=g(f,D));else if(f&&typeof f.handleEvent=="function")f=g(f.handleEvent,f);else throw Error("Invalid listener argument");return 2147483647<Number(P)?-1:o.setTimeout(f,P||0)}function ct(f){f.g=ot(()=>{f.g=null,f.i&&(f.i=!1,ct(f))},f.l);const P=f.h;f.h=null,f.m.apply(null,P)}class ze extends O{constructor(P,D){super(),this.m=P,this.l=D,this.h=null,this.i=!1,this.g=null}j(P){this.h=arguments,this.g?this.i=!0:ct(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function _e(f){O.call(this),this.h=f,this.g={}}b(_e,O);var $e=[];function mt(f){B(f.g,function(P,D){this.g.hasOwnProperty(D)&&Ie(P)},f),f.g={}}_e.prototype.N=function(){_e.aa.N.call(this),mt(this)},_e.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ft=o.JSON.stringify,Tt=o.JSON.parse,Vn=class{stringify(f){return o.JSON.stringify(f,void 0)}parse(f){return o.JSON.parse(f,void 0)}};function xt(){}xt.prototype.h=null;function vr(f){return f.h||(f.h=f.i())}function Bt(){}var Wn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Nn(){Y.call(this,"d")}b(Nn,Y);function Dt(){Y.call(this,"c")}b(Dt,Y);var lt={},Pt=null;function Rr(){return Pt=Pt||new tt}lt.La="serverreachability";function Jt(f){Y.call(this,lt.La,f)}b(Jt,Y);function fn(f){const P=Rr();ut(P,new Jt(P))}lt.STAT_EVENT="statevent";function hi(f,P){Y.call(this,lt.STAT_EVENT,f),this.stat=P}b(hi,Y);function nt(f){const P=Rr();ut(P,new hi(P,f))}lt.Ma="timingevent";function Wr(f,P){Y.call(this,lt.Ma,f),this.size=P}b(Wr,Y);function yr(f,P){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){f()},P)}function Un(){this.g=!0}Un.prototype.xa=function(){this.g=!1};function Pn(f,P,D,X,ge,Ne){f.info(function(){if(f.g)if(Ne)for(var Ve="",St=Ne.split("&"),jt=0;jt<St.length;jt++){var Nt=St[jt].split("=");if(1<Nt.length){var zt=Nt[0];Nt=Nt[1];var Zt=zt.split("_");Ve=2<=Zt.length&&Zt[1]=="type"?Ve+(zt+"="+Nt+"&"):Ve+(zt+"=redacted&")}}else Ve=null;else Ve=Ne;return"XMLHTTP REQ ("+X+") [attempt "+ge+"]: "+P+`
`+D+`
`+Ve})}function An(f,P,D,X,ge,Ne,Ve){f.info(function(){return"XMLHTTP RESP ("+X+") [ attempt "+ge+"]: "+P+`
`+D+`
`+Ne+" "+Ve})}function Bn(f,P,D,X){f.info(function(){return"XMLHTTP TEXT ("+P+"): "+$i(f,D)+(X?" "+X:"")})}function Ua(f,P){f.info(function(){return"TIMEOUT: "+P})}Un.prototype.info=function(){};function $i(f,P){if(!f.g)return P;if(!P)return null;try{var D=JSON.parse(P);if(D){for(f=0;f<D.length;f++)if(Array.isArray(D[f])){var X=D[f];if(!(2>X.length)){var ge=X[1];if(Array.isArray(ge)&&!(1>ge.length)){var Ne=ge[0];if(Ne!="noop"&&Ne!="stop"&&Ne!="close")for(var Ve=1;Ve<ge.length;Ve++)ge[Ve]=""}}}}return ft(D)}catch{return P}}var wr={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Gr={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Dr;function Fr(){}b(Fr,xt),Fr.prototype.g=function(){return new XMLHttpRequest},Fr.prototype.i=function(){return{}},Dr=new Fr;function Cn(f,P,D,X){this.j=f,this.i=P,this.l=D,this.R=X||1,this.U=new _e(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new di}function di(){this.i=null,this.g="",this.h=!1}var ws={},_s={};function bs(f,P,D){f.L=1,f.v=na(Or(P)),f.m=D,f.P=!0,Js(f,null)}function Js(f,P){f.F=Date.now(),Ba(f),f.A=Or(f.v);var D=f.A,X=f.R;Array.isArray(X)||(X=[String(X)]),yt(D.i,"t",X),f.C=0,D=f.j.J,f.h=new di,f.g=K(f.j,D?P:null,!f.m),0<f.O&&(f.M=new ze(g(f.Y,f,f.g),f.O)),P=f.U,D=f.g,X=f.ca;var ge="readystatechange";Array.isArray(ge)||(ge&&($e[0]=ge.toString()),ge=$e);for(var Ne=0;Ne<ge.length;Ne++){var Ve=ae(D,ge[Ne],X||P.handleEvent,!1,P.h||P);if(!Ve)break;P.g[Ve.key]=Ve}P=f.H?y(f.H):{},f.m?(f.u||(f.u="POST"),P["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.A,f.u,f.m,P)):(f.u="GET",f.g.ea(f.A,f.u,null,P)),fn(),Pn(f.i,f.u,f.A,f.l,f.R,f.m)}Cn.prototype.ca=function(f){f=f.target;const P=this.M;P&&Gn(f)==3?P.j():this.Y(f)},Cn.prototype.Y=function(f){try{if(f==this.g)e:{const Zt=Gn(this.g);var P=this.g.Ba();const Zi=this.g.Z();if(!(3>Zt)&&(Zt!=3||this.g&&(this.h.h||this.g.oa()||wc(this.g)))){this.J||Zt!=4||P==7||(P==8||0>=Zi?fn(3):fn(2)),xs(this);var D=this.g.Z();this.X=D;t:if(Xs(this)){var X=wc(this.g);f="";var ge=X.length,Ne=Gn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Hi(this),Ss(this);var Ve="";break t}this.h.i=new o.TextDecoder}for(P=0;P<ge;P++)this.h.h=!0,f+=this.h.i.decode(X[P],{stream:!(Ne&&P==ge-1)});X.length=0,this.h.g+=f,this.C=0,Ve=this.h.g}else Ve=this.g.oa();if(this.o=D==200,An(this.i,this.u,this.A,this.l,this.R,Zt,D),this.o){if(this.T&&!this.K){t:{if(this.g){var St,jt=this.g;if((St=jt.g?jt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!N(St)){var Nt=St;break t}}Nt=null}if(D=Nt)Bn(this.i,this.l,D,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Zs(this,D);else{this.o=!1,this.s=3,nt(12),Hi(this),Ss(this);break e}}if(this.P){D=!0;let ar;for(;!this.J&&this.C<Ve.length;)if(ar=uc(this,Ve),ar==_s){Zt==4&&(this.s=4,nt(14),D=!1),Bn(this.i,this.l,null,"[Incomplete Response]");break}else if(ar==ws){this.s=4,nt(15),Bn(this.i,this.l,Ve,"[Invalid Chunk]"),D=!1;break}else Bn(this.i,this.l,ar,null),Zs(this,ar);if(Xs(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Zt!=4||Ve.length!=0||this.h.h||(this.s=1,nt(16),D=!1),this.o=this.o&&D,!D)Bn(this.i,this.l,Ve,"[Invalid Chunked Response]"),Hi(this),Ss(this);else if(0<Ve.length&&!this.W){this.W=!0;var zt=this.j;zt.g==this&&zt.ba&&!zt.M&&(zt.j.info("Great, no buffering proxy detected. Bytes received: "+Ve.length),to(zt),zt.M=!0,nt(11))}}else Bn(this.i,this.l,Ve,null),Zs(this,Ve);Zt==4&&Hi(this),this.o&&!this.J&&(Zt==4?Ts(this.j,this):(this.o=!1,Ba(this)))}else Es(this.g),D==400&&0<Ve.indexOf("Unknown SID")?(this.s=3,nt(12)):(this.s=0,nt(13)),Hi(this),Ss(this)}}}catch{}finally{}};function Xs(f){return f.g?f.u=="GET"&&f.L!=2&&f.j.Ca:!1}function uc(f,P){var D=f.C,X=P.indexOf(`
`,D);return X==-1?_s:(D=Number(P.substring(D,X)),isNaN(D)?ws:(X+=1,X+D>P.length?_s:(P=P.slice(X,X+D),f.C=X+D,P)))}Cn.prototype.cancel=function(){this.J=!0,Hi(this)};function Ba(f){f.S=Date.now()+f.I,hc(f,f.I)}function hc(f,P){if(f.B!=null)throw Error("WatchDog timer not null");f.B=yr(g(f.ba,f),P)}function xs(f){f.B&&(o.clearTimeout(f.B),f.B=null)}Cn.prototype.ba=function(){this.B=null;const f=Date.now();0<=f-this.S?(Ua(this.i,this.A),this.L!=2&&(fn(),nt(17)),Hi(this),this.s=2,Ss(this)):hc(this,this.S-f)};function Ss(f){f.j.G==0||f.J||Ts(f.j,f)}function Hi(f){xs(f);var P=f.M;P&&typeof P.ma=="function"&&P.ma(),f.M=null,mt(f.U),f.g&&(P=f.g,f.g=null,P.abort(),P.ma())}function Zs(f,P){try{var D=f.j;if(D.G!=0&&(D.g==f||ol(D.h,f))){if(!f.K&&ol(D.h,f)&&D.G==3){try{var X=D.Da.g.parse(P)}catch{X=null}if(Array.isArray(X)&&X.length==3){var ge=X;if(ge[0]==0){e:if(!D.u){if(D.g)if(D.g.F+3e3<f.F)Xi(D),Ja(D);else break e;oa(D),nt(18)}}else D.za=ge[1],0<D.za-D.T&&37500>ge[2]&&D.F&&D.v==0&&!D.C&&(D.C=yr(g(D.Za,D),6e3));if(1>=ea(D.h)&&D.ca){try{D.ca()}catch{}D.ca=void 0}}else _r(D,11)}else if((f.K||D.g==f)&&Xi(D),!N(P))for(ge=D.Da.g.parse(P),P=0;P<ge.length;P++){let Nt=ge[P];if(D.T=Nt[0],Nt=Nt[1],D.G==2)if(Nt[0]=="c"){D.K=Nt[1],D.ia=Nt[2];const zt=Nt[3];zt!=null&&(D.la=zt,D.j.info("VER="+D.la));const Zt=Nt[4];Zt!=null&&(D.Aa=Zt,D.j.info("SVER="+D.Aa));const Zi=Nt[5];Zi!=null&&typeof Zi=="number"&&0<Zi&&(X=1.5*Zi,D.L=X,D.j.info("backChannelRequestTimeoutMs_="+X)),X=D;const ar=f.g;if(ar){const Is=ar.g?ar.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Is){var Ne=X.h;Ne.g||Is.indexOf("spdy")==-1&&Is.indexOf("quic")==-1&&Is.indexOf("h2")==-1||(Ne.j=Ne.l,Ne.g=new Set,Ne.h&&(an(Ne,Ne.h),Ne.h=null))}if(X.D){const Ps=ar.g?ar.g.getResponseHeader("X-HTTP-Session-Id"):null;Ps&&(X.ya=Ps,$t(X.I,X.D,Ps))}}D.G=3,D.l&&D.l.ua(),D.ba&&(D.R=Date.now()-f.F,D.j.info("Handshake RTT: "+D.R+"ms")),X=D;var Ve=f;if(X.qa=_(X,X.J?X.ia:null,X.W),Ve.K){ll(X.h,Ve);var St=Ve,jt=X.L;jt&&(St.I=jt),St.B&&(xs(St),Ba(St)),X.g=Ve}else eo(X);0<D.i.length&&Xa(D)}else Nt[0]!="stop"&&Nt[0]!="close"||_r(D,7);else D.G==3&&(Nt[0]=="stop"||Nt[0]=="close"?Nt[0]=="stop"?_r(D,7):Ji(D):Nt[0]!="noop"&&D.l&&D.l.ta(Nt),D.v=0)}}fn(4)}catch{}}var Gu=class{constructor(f,P){this.g=f,this.map=P}};function al(f){this.l=f||10,o.PerformanceNavigationTiming?(f=o.performance.getEntriesByType("navigation"),f=0<f.length&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function dc(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function ea(f){return f.h?1:f.g?f.g.size:0}function ol(f,P){return f.h?f.h==P:f.g?f.g.has(P):!1}function an(f,P){f.g?f.g.add(P):f.h=P}function ll(f,P){f.h&&f.h==P?f.h=null:f.g&&f.g.has(P)&&f.g.delete(P)}al.prototype.cancel=function(){if(this.i=cl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const f of this.g.values())f.cancel();this.g.clear()}};function cl(f){if(f.h!=null)return f.i.concat(f.h.D);if(f.g!=null&&f.g.size!==0){let P=f.i;for(const D of f.g.values())P=P.concat(D.D);return P}return x(f.i)}function fc(f){if(f.V&&typeof f.V=="function")return f.V();if(typeof Map<"u"&&f instanceof Map||typeof Set<"u"&&f instanceof Set)return Array.from(f.values());if(typeof f=="string")return f.split("");if(l(f)){for(var P=[],D=f.length,X=0;X<D;X++)P.push(f[X]);return P}P=[],D=0;for(X in f)P[D++]=f[X];return P}function ul(f){if(f.na&&typeof f.na=="function")return f.na();if(!f.V||typeof f.V!="function"){if(typeof Map<"u"&&f instanceof Map)return Array.from(f.keys());if(!(typeof Set<"u"&&f instanceof Set)){if(l(f)||typeof f=="string"){var P=[];f=f.length;for(var D=0;D<f;D++)P.push(D);return P}P=[],D=0;for(const X in f)P[D++]=X;return P}}}function pc(f,P){if(f.forEach&&typeof f.forEach=="function")f.forEach(P,void 0);else if(l(f)||typeof f=="string")Array.prototype.forEach.call(f,P,void 0);else for(var D=ul(f),X=fc(f),ge=X.length,Ne=0;Ne<ge;Ne++)P.call(void 0,X[Ne],D&&D[Ne],f)}var Qr=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ka(f,P){if(f){f=f.split("&");for(var D=0;D<f.length;D++){var X=f[D].indexOf("="),ge=null;if(0<=X){var Ne=f[D].substring(0,X);ge=f[D].substring(X+1)}else Ne=f[D];P(Ne,ge?decodeURIComponent(ge.replace(/\+/g," ")):"")}}}function En(f){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,f instanceof En){this.h=f.h,ta(this,f.j),this.o=f.o,this.g=f.g,qa(this,f.s),this.l=f.l;var P=f.i,D=new Ns;D.i=P.i,P.g&&(D.g=new Map(P.g),D.h=P.h),hl(this,D),this.m=f.m}else f&&(P=String(f).match(Qr))?(this.h=!1,ta(this,P[1]||"",!0),this.o=ra(P[2]||""),this.g=ra(P[3]||"",!0),qa(this,P[4]),this.l=ra(P[5]||"",!0),hl(this,P[6]||"",!0),this.m=ra(P[7]||"")):(this.h=!1,this.i=new Ns(null,this.h))}En.prototype.toString=function(){var f=[],P=this.j;P&&f.push(Wi(P,mc,!0),":");var D=this.g;return(D||P=="file")&&(f.push("//"),(P=this.o)&&f.push(Wi(P,mc,!0),"@"),f.push(encodeURIComponent(String(D)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),D=this.s,D!=null&&f.push(":",String(D))),(D=this.l)&&(this.g&&D.charAt(0)!="/"&&f.push("/"),f.push(Wi(D,D.charAt(0)=="/"?Gi:Yu,!0))),(D=this.i.toString())&&f.push("?",D),(D=this.m)&&f.push("#",Wi(D,$a)),f.join("")};function Or(f){return new En(f)}function ta(f,P,D){f.j=D?ra(P,!0):P,f.j&&(f.j=f.j.replace(/:$/,""))}function qa(f,P){if(P){if(P=Number(P),isNaN(P)||0>P)throw Error("Bad port number "+P);f.s=P}else f.s=null}function hl(f,P,D){P instanceof Ns?(f.i=P,Ju(f.i,f.h)):(D||(P=Wi(P,za)),f.i=new Ns(P,f.h))}function $t(f,P,D){f.i.set(P,D)}function na(f){return $t(f,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),f}function ra(f,P){return f?P?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function Wi(f,P,D){return typeof f=="string"?(f=encodeURI(f).replace(P,Qu),D&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function Qu(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var mc=/[#\/\?@]/g,Yu=/[#\?:]/g,Gi=/[#\?]/g,za=/[#\?@]/g,$a=/#/g;function Ns(f,P){this.h=this.g=null,this.i=f||null,this.j=!!P}function on(f){f.g||(f.g=new Map,f.h=0,f.i&&Ka(f.i,function(P,D){f.add(decodeURIComponent(P.replace(/\+/g," ")),D)}))}t=Ns.prototype,t.add=function(f,P){on(this),this.i=null,f=As(this,f);var D=this.g.get(f);return D||this.g.set(f,D=[]),D.push(P),this.h+=1,this};function gc(f,P){on(f),P=As(f,P),f.g.has(P)&&(f.i=null,f.h-=f.g.get(P).length,f.g.delete(P))}function dl(f,P){return on(f),P=As(f,P),f.g.has(P)}t.forEach=function(f,P){on(this),this.g.forEach(function(D,X){D.forEach(function(ge){f.call(P,ge,X,this)},this)},this)},t.na=function(){on(this);const f=Array.from(this.g.values()),P=Array.from(this.g.keys()),D=[];for(let X=0;X<P.length;X++){const ge=f[X];for(let Ne=0;Ne<ge.length;Ne++)D.push(P[X])}return D},t.V=function(f){on(this);let P=[];if(typeof f=="string")dl(this,f)&&(P=P.concat(this.g.get(As(this,f))));else{f=Array.from(this.g.values());for(let D=0;D<f.length;D++)P=P.concat(f[D])}return P},t.set=function(f,P){return on(this),this.i=null,f=As(this,f),dl(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[P]),this.h+=1,this},t.get=function(f,P){return f?(f=this.V(f),0<f.length?String(f[0]):P):P};function yt(f,P,D){gc(f,P),0<D.length&&(f.i=null,f.g.set(As(f,P),x(D)),f.h+=D.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],P=Array.from(this.g.keys());for(var D=0;D<P.length;D++){var X=P[D];const Ne=encodeURIComponent(String(X)),Ve=this.V(X);for(X=0;X<Ve.length;X++){var ge=Ne;Ve[X]!==""&&(ge+="="+encodeURIComponent(String(Ve[X]))),f.push(ge)}}return this.i=f.join("&")};function As(f,P){return P=String(P),f.j&&(P=P.toLowerCase()),P}function Ju(f,P){P&&!f.j&&(on(f),f.i=null,f.g.forEach(function(D,X){var ge=X.toLowerCase();X!=ge&&(gc(this,X),yt(this,ge,D))},f)),f.j=P}function Ii(f,P){const D=new Un;if(o.Image){const X=new Image;X.onload=m(fi,D,"TestLoadImage: loaded",!0,P,X),X.onerror=m(fi,D,"TestLoadImage: error",!1,P,X),X.onabort=m(fi,D,"TestLoadImage: abort",!1,P,X),X.ontimeout=m(fi,D,"TestLoadImage: timeout",!1,P,X),o.setTimeout(function(){X.ontimeout&&X.ontimeout()},1e4),X.src=f}else P(!1)}function vc(f,P){const D=new Un,X=new AbortController,ge=setTimeout(()=>{X.abort(),fi(D,"TestPingServer: timeout",!1,P)},1e4);fetch(f,{signal:X.signal}).then(Ne=>{clearTimeout(ge),Ne.ok?fi(D,"TestPingServer: ok",!0,P):fi(D,"TestPingServer: server error",!1,P)}).catch(()=>{clearTimeout(ge),fi(D,"TestPingServer: error",!1,P)})}function fi(f,P,D,X,ge){try{ge&&(ge.onload=null,ge.onerror=null,ge.onabort=null,ge.ontimeout=null),X(D)}catch{}}function Ha(){this.g=new Vn}function fl(f,P,D){const X=D||"";try{pc(f,function(ge,Ne){let Ve=ge;c(ge)&&(Ve=ft(ge)),P.push(X+Ne+"="+encodeURIComponent(Ve))})}catch(ge){throw P.push(X+"type="+encodeURIComponent("_badmap")),ge}}function Wa(f){this.l=f.Ub||null,this.j=f.eb||!1}b(Wa,xt),Wa.prototype.g=function(){return new Ga(this.l,this.j)},Wa.prototype.i=function(f){return function(){return f}}({});function Ga(f,P){tt.call(this),this.D=f,this.o=P,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}b(Ga,tt),t=Ga.prototype,t.open=function(f,P){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=f,this.A=P,this.readyState=1,pi(this)},t.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const P={headers:this.u,method:this.B,credentials:this.m,cache:void 0};f&&(P.body=f),(this.D||o).fetch(new Request(this.A,P)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Qi(this)),this.readyState=0},t.Sa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,pi(this)),this.g&&(this.readyState=3,pi(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;yc(this)}else f.text().then(this.Ra.bind(this),this.ga.bind(this))};function yc(f){f.j.read().then(f.Pa.bind(f)).catch(f.ga.bind(f))}t.Pa=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var P=f.value?f.value:new Uint8Array(0);(P=this.v.decode(P,{stream:!f.done}))&&(this.response=this.responseText+=P)}f.done?Qi(this):pi(this),this.readyState==3&&yc(this)}},t.Ra=function(f){this.g&&(this.response=this.responseText=f,Qi(this))},t.Qa=function(f){this.g&&(this.response=f,Qi(this))},t.ga=function(){this.g&&Qi(this)};function Qi(f){f.readyState=4,f.l=null,f.j=null,f.v=null,pi(f)}t.setRequestHeader=function(f,P){this.u.append(f,P)},t.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],P=this.h.entries();for(var D=P.next();!D.done;)D=D.value,f.push(D[0]+": "+D[1]),D=P.next();return f.join(`\r
`)};function pi(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(Ga.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function Yi(f){let P="";return B(f,function(D,X){P+=X,P+=":",P+=D,P+=`\r
`}),P}function pl(f,P,D){e:{for(X in D){var X=!1;break e}X=!0}X||(D=Yi(D),typeof f=="string"?D!=null&&encodeURIComponent(String(D)):$t(f,P,D))}function qt(f){tt.call(this),this.headers=new Map,this.o=f||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}b(qt,tt);var ml=/^https?$/i,Qa=["POST","PUT"];t=qt.prototype,t.Ha=function(f){this.J=f},t.ea=function(f,P,D,X){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);P=P?P.toUpperCase():"GET",this.D=f,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Dr.g(),this.v=this.o?vr(this.o):vr(Dr),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(P,String(f),!0),this.B=!1}catch(Ne){gl(this,Ne);return}if(f=D||"",D=new Map(this.headers),X)if(Object.getPrototypeOf(X)===Object.prototype)for(var ge in X)D.set(ge,X[ge]);else if(typeof X.keys=="function"&&typeof X.get=="function")for(const Ne of X.keys())D.set(Ne,X.get(Ne));else throw Error("Unknown input type for opt_headers: "+String(X));X=Array.from(D.keys()).find(Ne=>Ne.toLowerCase()=="content-type"),ge=o.FormData&&f instanceof o.FormData,!(0<=Array.prototype.indexOf.call(Qa,P,void 0))||X||ge||D.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Ne,Ve]of D)this.g.setRequestHeader(Ne,Ve);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{mi(this),this.u=!0,this.g.send(f),this.u=!1}catch(Ne){gl(this,Ne)}};function gl(f,P){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=P,f.m=5,vl(f),ia(f)}function vl(f){f.A||(f.A=!0,ut(f,"complete"),ut(f,"error"))}t.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=f||7,ut(this,"complete"),ut(this,"abort"),ia(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ia(this,!0)),qt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?yl(this):this.bb())},t.bb=function(){yl(this)};function yl(f){if(f.h&&typeof a<"u"&&(!f.v[1]||Gn(f)!=4||f.Z()!=2)){if(f.u&&Gn(f)==4)ot(f.Ea,0,f);else if(ut(f,"readystatechange"),Gn(f)==4){f.h=!1;try{const Ve=f.Z();e:switch(Ve){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var P=!0;break e;default:P=!1}var D;if(!(D=P)){var X;if(X=Ve===0){var ge=String(f.D).match(Qr)[1]||null;!ge&&o.self&&o.self.location&&(ge=o.self.location.protocol.slice(0,-1)),X=!ml.test(ge?ge.toLowerCase():"")}D=X}if(D)ut(f,"complete"),ut(f,"success");else{f.m=6;try{var Ne=2<Gn(f)?f.g.statusText:""}catch{Ne=""}f.l=Ne+" ["+f.Z()+"]",vl(f)}}finally{ia(f)}}}}function ia(f,P){if(f.g){mi(f);const D=f.g,X=f.v[0]?()=>{}:null;f.g=null,f.v=null,P||ut(f,"ready");try{D.onreadystatechange=X}catch{}}}function mi(f){f.I&&(o.clearTimeout(f.I),f.I=null)}t.isActive=function(){return!!this.g};function Gn(f){return f.g?f.g.readyState:0}t.Z=function(){try{return 2<Gn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(f){if(this.g){var P=this.g.responseText;return f&&P.indexOf(f)==0&&(P=P.substring(f.length)),Tt(P)}};function wc(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.H){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function Es(f){const P={};f=(f.g&&2<=Gn(f)&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let X=0;X<f.length;X++){if(N(f[X]))continue;var D=E(f[X]);const ge=D[0];if(D=D[1],typeof D!="string")continue;D=D.trim();const Ne=P[ge]||[];P[ge]=Ne,Ne.push(D)}j(P,function(X){return X.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function sr(f,P,D){return D&&D.internalChannelParams&&D.internalChannelParams[f]||P}function Ya(f){this.Aa=0,this.i=[],this.j=new Un,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=sr("failFast",!1,f),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=sr("baseRetryDelayMs",5e3,f),this.cb=sr("retryDelaySeedMs",1e4,f),this.Wa=sr("forwardChannelMaxRetries",2,f),this.wa=sr("forwardChannelRequestTimeoutMs",2e4,f),this.pa=f&&f.xmlHttpFactory||void 0,this.Xa=f&&f.Tb||void 0,this.Ca=f&&f.useFetchStreams||!1,this.L=void 0,this.J=f&&f.supportsCrossDomainXhr||!1,this.K="",this.h=new al(f&&f.concurrentRequestLimit),this.Da=new Ha,this.P=f&&f.fastHandshake||!1,this.O=f&&f.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=f&&f.Rb||!1,f&&f.xa&&this.j.xa(),f&&f.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&f&&f.detectBufferingProxy||!1,this.ja=void 0,f&&f.longPollingTimeout&&0<f.longPollingTimeout&&(this.ja=f.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Ya.prototype,t.la=8,t.G=1,t.connect=function(f,P,D,X){nt(0),this.W=f,this.H=P||{},D&&X!==void 0&&(this.H.OSID=D,this.H.OAID=X),this.F=this.X,this.I=_(this,null,this.W),Xa(this)};function Ji(f){if(sa(f),f.G==3){var P=f.U++,D=Or(f.I);if($t(D,"SID",f.K),$t(D,"RID",P),$t(D,"TYPE","terminate"),ks(f,D),P=new Cn(f,f.j,P),P.L=2,P.v=na(Or(D)),D=!1,o.navigator&&o.navigator.sendBeacon)try{D=o.navigator.sendBeacon(P.v.toString(),"")}catch{}!D&&o.Image&&(new Image().src=P.v,D=!0),D||(P.g=K(P.j,null),P.g.ea(P.v)),P.F=Date.now(),Ba(P)}ro(f)}function Ja(f){f.g&&(to(f),f.g.cancel(),f.g=null)}function sa(f){Ja(f),f.u&&(o.clearTimeout(f.u),f.u=null),Xi(f),f.h.cancel(),f.s&&(typeof f.s=="number"&&o.clearTimeout(f.s),f.s=null)}function Xa(f){if(!dc(f.h)&&!f.s){f.s=!0;var P=f.Ga;U||ne(),z||(U(),z=!0),$.add(P,f),f.B=0}}function wl(f,P){return ea(f.h)>=f.h.j-(f.s?1:0)?!1:f.s?(f.i=P.D.concat(f.i),!0):f.G==1||f.G==2||f.B>=(f.Va?0:f.Wa)?!1:(f.s=yr(g(f.Ga,f,P),no(f,f.B)),f.B++,!0)}t.Ga=function(f){if(this.s)if(this.s=null,this.G==1){if(!f){this.U=Math.floor(1e5*Math.random()),f=this.U++;const ge=new Cn(this,this.j,f);let Ne=this.o;if(this.S&&(Ne?(Ne=y(Ne),L(Ne,this.S)):Ne=this.S),this.m!==null||this.O||(ge.H=Ne,Ne=null),this.P)e:{for(var P=0,D=0;D<this.i.length;D++){t:{var X=this.i[D];if("__data__"in X.map&&(X=X.map.__data__,typeof X=="string")){X=X.length;break t}X=void 0}if(X===void 0)break;if(P+=X,4096<P){P=D;break e}if(P===4096||D===this.i.length-1){P=D+1;break e}}P=1e3}else P=1e3;P=aa(this,ge,P),D=Or(this.I),$t(D,"RID",f),$t(D,"CVER",22),this.D&&$t(D,"X-HTTP-Session-Id",this.D),ks(this,D),Ne&&(this.O?P="headers="+encodeURIComponent(String(Yi(Ne)))+"&"+P:this.m&&pl(D,this.m,Ne)),an(this.h,ge),this.Ua&&$t(D,"TYPE","init"),this.P?($t(D,"$req",P),$t(D,"SID","null"),ge.T=!0,bs(ge,D,null)):bs(ge,D,P),this.G=2}}else this.G==3&&(f?Za(this,f):this.i.length==0||dc(this.h)||Za(this))};function Za(f,P){var D;P?D=P.l:D=f.U++;const X=Or(f.I);$t(X,"SID",f.K),$t(X,"RID",D),$t(X,"AID",f.T),ks(f,X),f.m&&f.o&&pl(X,f.m,f.o),D=new Cn(f,f.j,D,f.B+1),f.m===null&&(D.H=f.o),P&&(f.i=P.D.concat(f.i)),P=aa(f,D,1e3),D.I=Math.round(.5*f.wa)+Math.round(.5*f.wa*Math.random()),an(f.h,D),bs(D,X,P)}function ks(f,P){f.H&&B(f.H,function(D,X){$t(P,X,D)}),f.l&&pc({},function(D,X){$t(P,X,D)})}function aa(f,P,D){D=Math.min(f.i.length,D);var X=f.l?g(f.l.Na,f.l,f):null;e:{var ge=f.i;let Ne=-1;for(;;){const Ve=["count="+D];Ne==-1?0<D?(Ne=ge[0].g,Ve.push("ofs="+Ne)):Ne=0:Ve.push("ofs="+Ne);let St=!0;for(let jt=0;jt<D;jt++){let Nt=ge[jt].g;const zt=ge[jt].map;if(Nt-=Ne,0>Nt)Ne=Math.max(0,ge[jt].g-100),St=!1;else try{fl(zt,Ve,"req"+Nt+"_")}catch{X&&X(zt)}}if(St){X=Ve.join("&");break e}}}return f=f.i.splice(0,D),P.D=f,X}function eo(f){if(!f.g&&!f.u){f.Y=1;var P=f.Fa;U||ne(),z||(U(),z=!0),$.add(P,f),f.v=0}}function oa(f){return f.g||f.u||3<=f.v?!1:(f.Y++,f.u=yr(g(f.Fa,f),no(f,f.v)),f.v++,!0)}t.Fa=function(){if(this.u=null,_c(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var f=2*this.R;this.j.info("BP detection timer enabled: "+f),this.A=yr(g(this.ab,this),f)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,nt(10),Ja(this),_c(this))};function to(f){f.A!=null&&(o.clearTimeout(f.A),f.A=null)}function _c(f){f.g=new Cn(f,f.j,"rpc",f.Y),f.m===null&&(f.g.H=f.o),f.g.O=0;var P=Or(f.qa);$t(P,"RID","rpc"),$t(P,"SID",f.K),$t(P,"AID",f.T),$t(P,"CI",f.F?"0":"1"),!f.F&&f.ja&&$t(P,"TO",f.ja),$t(P,"TYPE","xmlhttp"),ks(f,P),f.m&&f.o&&pl(P,f.m,f.o),f.L&&(f.g.I=f.L);var D=f.g;f=f.ia,D.L=1,D.v=na(Or(P)),D.m=null,D.P=!0,Js(D,f)}t.Za=function(){this.C!=null&&(this.C=null,Ja(this),oa(this),nt(19))};function Xi(f){f.C!=null&&(o.clearTimeout(f.C),f.C=null)}function Ts(f,P){var D=null;if(f.g==P){Xi(f),to(f),f.g=null;var X=2}else if(ol(f.h,P))D=P.D,ll(f.h,P),X=1;else return;if(f.G!=0){if(P.o)if(X==1){D=P.m?P.m.length:0,P=Date.now()-P.F;var ge=f.B;X=Rr(),ut(X,new Wr(X,D)),Xa(f)}else eo(f);else if(ge=P.s,ge==3||ge==0&&0<P.X||!(X==1&&wl(f,P)||X==2&&oa(f)))switch(D&&0<D.length&&(P=f.h,P.i=P.i.concat(D)),ge){case 1:_r(f,5);break;case 4:_r(f,10);break;case 3:_r(f,6);break;default:_r(f,2)}}}function no(f,P){let D=f.Ta+Math.floor(Math.random()*f.cb);return f.isActive()||(D*=2),D*P}function _r(f,P){if(f.j.info("Error code "+P),P==2){var D=g(f.fb,f),X=f.Xa;const ge=!X;X=new En(X||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||ta(X,"https"),na(X),ge?Ii(X.toString(),D):vc(X.toString(),D)}else nt(2);f.G=0,f.l&&f.l.sa(P),ro(f),sa(f)}t.fb=function(f){f?(this.j.info("Successfully pinged google.com"),nt(2)):(this.j.info("Failed to ping google.com"),nt(1))};function ro(f){if(f.G=0,f.ka=[],f.l){const P=cl(f.h);(P.length!=0||f.i.length!=0)&&(T(f.ka,P),T(f.ka,f.i),f.h.i.length=0,x(f.i),f.i.length=0),f.l.ra()}}function _(f,P,D){var X=D instanceof En?Or(D):new En(D);if(X.g!="")P&&(X.g=P+"."+X.g),qa(X,X.s);else{var ge=o.location;X=ge.protocol,P=P?P+"."+ge.hostname:ge.hostname,ge=+ge.port;var Ne=new En(null);X&&ta(Ne,X),P&&(Ne.g=P),ge&&qa(Ne,ge),D&&(Ne.l=D),X=Ne}return D=f.D,P=f.ya,D&&P&&$t(X,D,P),$t(X,"VER",f.la),ks(f,X),X}function K(f,P,D){if(P&&!f.J)throw Error("Can't create secondary domain capable XhrIo object.");return P=f.Ca&&!f.pa?new qt(new Wa({eb:D})):new qt(f.pa),P.Ha(f.J),P}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function ie(){}t=ie.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function ce(){}ce.prototype.g=function(f,P){return new ve(f,P)};function ve(f,P){tt.call(this),this.g=new Ya(P),this.l=f,this.h=P&&P.messageUrlParams||null,f=P&&P.messageHeaders||null,P&&P.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=P&&P.initMessageHeaders||null,P&&P.messageContentType&&(f?f["X-WebChannel-Content-Type"]=P.messageContentType:f={"X-WebChannel-Content-Type":P.messageContentType}),P&&P.va&&(f?f["X-WebChannel-Client-Profile"]=P.va:f={"X-WebChannel-Client-Profile":P.va}),this.g.S=f,(f=P&&P.Sb)&&!N(f)&&(this.g.m=f),this.v=P&&P.supportsCrossDomainXhr||!1,this.u=P&&P.sendRawJson||!1,(P=P&&P.httpSessionIdParam)&&!N(P)&&(this.g.D=P,f=this.h,f!==null&&P in f&&(f=this.h,P in f&&delete f[P])),this.j=new Qe(this)}b(ve,tt),ve.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},ve.prototype.close=function(){Ji(this.g)},ve.prototype.o=function(f){var P=this.g;if(typeof f=="string"){var D={};D.__data__=f,f=D}else this.u&&(D={},D.__data__=ft(f),f=D);P.i.push(new Gu(P.Ya++,f)),P.G==3&&Xa(P)},ve.prototype.N=function(){this.g.l=null,delete this.j,Ji(this.g),delete this.g,ve.aa.N.call(this)};function ke(f){Nn.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var P=f.__sm__;if(P){e:{for(const D in P){f=D;break e}f=void 0}(this.i=f)&&(f=this.i,P=P!==null&&f in P?P[f]:void 0),this.data=P}else this.data=f}b(ke,Nn);function Oe(){Dt.call(this),this.status=1}b(Oe,Dt);function Qe(f){this.g=f}b(Qe,ie),Qe.prototype.ua=function(){ut(this.g,"a")},Qe.prototype.ta=function(f){ut(this.g,new ke(f))},Qe.prototype.sa=function(f){ut(this.g,new Oe)},Qe.prototype.ra=function(){ut(this.g,"b")},ce.prototype.createWebChannel=ce.prototype.g,ve.prototype.send=ve.prototype.o,ve.prototype.open=ve.prototype.m,ve.prototype.close=ve.prototype.close,E3=function(){return new ce},A3=function(){return Rr()},N3=lt,R0={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},wr.NO_ERROR=0,wr.TIMEOUT=8,wr.HTTP_ERROR=6,op=wr,Gr.COMPLETE="complete",S3=Gr,Bt.EventType=Wn,Wn.OPEN="a",Wn.CLOSE="b",Wn.ERROR="c",Wn.MESSAGE="d",tt.prototype.listen=tt.prototype.K,Ch=Bt,qt.prototype.listenOnce=qt.prototype.L,qt.prototype.getLastError=qt.prototype.Ka,qt.prototype.getLastErrorCode=qt.prototype.Ba,qt.prototype.getStatus=qt.prototype.Z,qt.prototype.getResponseJson=qt.prototype.Oa,qt.prototype.getResponseText=qt.prototype.oa,qt.prototype.send=qt.prototype.ea,qt.prototype.setWithCredentials=qt.prototype.Ha,x3=qt}).apply(typeof Df<"u"?Df:typeof self<"u"?self:typeof window<"u"?window:{});const Mw="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Tr.UNAUTHENTICATED=new Tr(null),Tr.GOOGLE_CREDENTIALS=new Tr("google-credentials-uid"),Tr.FIRST_PARTY=new Tr("first-party-uid"),Tr.MOCK_USER=new Tr("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qu="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yl=new o2("@firebase/firestore");function bh(){return Yl.logLevel}function st(t,...e){if(Yl.logLevel<=Ft.DEBUG){const n=e.map(w2);Yl.debug(`Firestore (${qu}): ${t}`,...n)}}function La(t,...e){if(Yl.logLevel<=Ft.ERROR){const n=e.map(w2);Yl.error(`Firestore (${qu}): ${t}`,...n)}}function ku(t,...e){if(Yl.logLevel<=Ft.WARN){const n=e.map(w2);Yl.warn(`Firestore (${qu}): ${t}`,...n)}}function w2(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bt(t="Unexpected state"){const e=`FIRESTORE (${qu}) INTERNAL ASSERTION FAILED: `+t;throw La(e),new Error(e)}function Yt(t,e){t||bt()}function kt(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Le={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class et extends Qs{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aa{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k3{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class b8{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Tr.UNAUTHENTICATED))}shutdown(){}}class x8{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class S8{constructor(e){this.t=e,this.currentUser=Tr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Yt(this.o===void 0);let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new Aa;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Aa,e.enqueueRetryable(()=>i(this.currentUser))};const a=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},o=l=>{st("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(l=>o(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?o(l):(st("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Aa)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(st("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Yt(typeof r.accessToken=="string"),new k3(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Yt(e===null||typeof e=="string"),new Tr(e)}}class N8{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Tr.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class A8{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new N8(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Tr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class E8{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class k8{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Yt(this.o===void 0);const r=s=>{s.error!=null&&st("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const a=s.token!==this.R;return this.R=s.token,st("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{st("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):st("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Yt(typeof n.token=="string"),this.R=n.token,new E8(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T8(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T3{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=T8(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function Ut(t,e){return t<e?-1:t>e?1:0}function Tu(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xn{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new et(Le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new et(Le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new et(Le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new et(Le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Xn.fromMillis(Date.now())}static fromDate(e){return Xn.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Xn(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ut(this.nanoseconds,e.nanoseconds):Ut(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Et(e)}static min(){return new Et(new Xn(0,0))}static max(){return new Et(new Xn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wd{constructor(e,n,r){n===void 0?n=0:n>e.length&&bt(),r===void 0?r=e.length-n:r>e.length-n&&bt(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return wd.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof wd?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),a=n.get(i);if(s<a)return-1;if(s>a)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class cn extends wd{construct(e,n,r){return new cn(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new et(Le.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new cn(n)}static emptyPath(){return new cn([])}}const I8=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class dr extends wd{construct(e,n,r){return new dr(e,n,r)}static isValidIdentifier(e){return I8.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),dr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new dr(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new et(Le.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let a=!1;for(;i<e.length;){const o=e[i];if(o==="\\"){if(i+1===e.length)throw new et(Le.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new et(Le.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else o==="`"?(a=!a,i++):o!=="."||a?(r+=o,i++):(s(),i++)}if(s(),a)throw new et(Le.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new dr(n)}static emptyPath(){return new dr([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ht{constructor(e){this.path=e}static fromPath(e){return new ht(cn.fromString(e))}static fromName(e){return new ht(cn.fromString(e).popFirst(5))}static empty(){return new ht(cn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&cn.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return cn.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ht(new cn(e.slice()))}}function P8(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Et.fromTimestamp(r===1e9?new Xn(n+1,0):new Xn(n,r));return new Yo(i,ht.empty(),e)}function C8(t){return new Yo(t.readTime,t.key,-1)}class Yo{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Yo(Et.min(),ht.empty(),-1)}static max(){return new Yo(Et.max(),ht.empty(),-1)}}function j8(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ht.comparator(t.documentKey,e.documentKey),n!==0?n:Ut(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L8="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class R8{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Od(t){if(t.code!==Le.FAILED_PRECONDITION||t.message!==L8)throw t;st("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ue{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&bt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Ue((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof Ue?n:Ue.resolve(n)}catch(n){return Ue.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):Ue.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):Ue.reject(n)}static resolve(e){return new Ue((n,r)=>{n(e)})}static reject(e){return new Ue((n,r)=>{r(e)})}static waitFor(e){return new Ue((n,r)=>{let i=0,s=0,a=!1;e.forEach(o=>{++i,o.next(()=>{++s,a&&s===i&&n()},l=>r(l))}),a=!0,s===i&&n()})}static or(e){let n=Ue.resolve(!1);for(const r of e)n=n.next(i=>i?Ue.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new Ue((r,i)=>{const s=e.length,a=new Array(s);let o=0;for(let l=0;l<s;l++){const c=l;n(e[c]).next(d=>{a[c]=d,++o,o===s&&r(a)},d=>i(d))}})}static doWhile(e,n){return new Ue((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function D8(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Md(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _2{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}_2.oe=-1;function Um(t){return t==null}function Xp(t){return t===0&&1/t==-1/0}function F8(t){return typeof t=="number"&&Number.isInteger(t)&&!Xp(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vw(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ic(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function I3(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn{constructor(e,n){this.comparator=e,this.root=n||hr.EMPTY}insert(e,n){return new bn(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,hr.BLACK,null,null))}remove(e){return new bn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,hr.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ff(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ff(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ff(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ff(this.root,e,this.comparator,!0)}}class Ff{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class hr{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??hr.RED,this.left=i??hr.EMPTY,this.right=s??hr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new hr(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return hr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return hr.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,hr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,hr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw bt();const e=this.left.check();if(e!==this.right.check())throw bt();return e+(this.isRed()?0:1)}}hr.EMPTY=null,hr.RED=!0,hr.BLACK=!1;hr.EMPTY=new class{constructor(){this.size=0}get key(){throw bt()}get value(){throw bt()}get color(){throw bt()}get left(){throw bt()}get right(){throw bt()}copy(e,n,r,i,s){return this}insert(e,n,r){return new hr(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr{constructor(e){this.comparator=e,this.data=new bn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Uw(this.data.getIterator())}getIteratorFrom(e){return new Uw(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof pr)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new pr(this.comparator);return n.data=e,n}}class Uw{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bi{constructor(e){this.fields=e,e.sort(dr.comparator)}static empty(){return new bi([])}unionWith(e){let n=new pr(dr.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new bi(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Tu(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P3 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gr{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new P3("Invalid base64 string: "+s):s}}(e);return new gr(n)}static fromUint8Array(e){const n=function(i){let s="";for(let a=0;a<i.length;++a)s+=String.fromCharCode(i[a]);return s}(e);return new gr(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ut(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}gr.EMPTY_BYTE_STRING=new gr("");const O8=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Jo(t){if(Yt(!!t),typeof t=="string"){let e=0;const n=O8.exec(t);if(Yt(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Rn(t.seconds),nanos:Rn(t.nanos)}}function Rn(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Jl(t){return typeof t=="string"?gr.fromBase64String(t):gr.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b2(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function x2(t){const e=t.mapValue.fields.__previous_value__;return b2(e)?x2(e):e}function _d(t){const e=Jo(t.mapValue.fields.__local_write_time__.timestampValue);return new Xn(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M8{constructor(e,n,r,i,s,a,o,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=o,this.longPollingOptions=l,this.useFetchStreams=c}}class bd{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new bd("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof bd&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Of={mapValue:{}};function Xl(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?b2(t)?4:U8(t)?9007199254740991:V8(t)?10:11:bt()}function Ws(t,e){if(t===e)return!0;const n=Xl(t);if(n!==Xl(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return _d(t).isEqual(_d(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const a=Jo(i.timestampValue),o=Jo(s.timestampValue);return a.seconds===o.seconds&&a.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Jl(i.bytesValue).isEqual(Jl(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Rn(i.geoPointValue.latitude)===Rn(s.geoPointValue.latitude)&&Rn(i.geoPointValue.longitude)===Rn(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Rn(i.integerValue)===Rn(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const a=Rn(i.doubleValue),o=Rn(s.doubleValue);return a===o?Xp(a)===Xp(o):isNaN(a)&&isNaN(o)}return!1}(t,e);case 9:return Tu(t.arrayValue.values||[],e.arrayValue.values||[],Ws);case 10:case 11:return function(i,s){const a=i.mapValue.fields||{},o=s.mapValue.fields||{};if(Vw(a)!==Vw(o))return!1;for(const l in a)if(a.hasOwnProperty(l)&&(o[l]===void 0||!Ws(a[l],o[l])))return!1;return!0}(t,e);default:return bt()}}function xd(t,e){return(t.values||[]).find(n=>Ws(n,e))!==void 0}function Iu(t,e){if(t===e)return 0;const n=Xl(t),r=Xl(e);if(n!==r)return Ut(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ut(t.booleanValue,e.booleanValue);case 2:return function(s,a){const o=Rn(s.integerValue||s.doubleValue),l=Rn(a.integerValue||a.doubleValue);return o<l?-1:o>l?1:o===l?0:isNaN(o)?isNaN(l)?0:-1:1}(t,e);case 3:return Bw(t.timestampValue,e.timestampValue);case 4:return Bw(_d(t),_d(e));case 5:return Ut(t.stringValue,e.stringValue);case 6:return function(s,a){const o=Jl(s),l=Jl(a);return o.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,a){const o=s.split("/"),l=a.split("/");for(let c=0;c<o.length&&c<l.length;c++){const d=Ut(o[c],l[c]);if(d!==0)return d}return Ut(o.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,a){const o=Ut(Rn(s.latitude),Rn(a.latitude));return o!==0?o:Ut(Rn(s.longitude),Rn(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Kw(t.arrayValue,e.arrayValue);case 10:return function(s,a){var o,l,c,d;const p=s.fields||{},g=a.fields||{},m=(o=p.value)===null||o===void 0?void 0:o.arrayValue,b=(l=g.value)===null||l===void 0?void 0:l.arrayValue,x=Ut(((c=m==null?void 0:m.values)===null||c===void 0?void 0:c.length)||0,((d=b==null?void 0:b.values)===null||d===void 0?void 0:d.length)||0);return x!==0?x:Kw(m,b)}(t.mapValue,e.mapValue);case 11:return function(s,a){if(s===Of.mapValue&&a===Of.mapValue)return 0;if(s===Of.mapValue)return 1;if(a===Of.mapValue)return-1;const o=s.fields||{},l=Object.keys(o),c=a.fields||{},d=Object.keys(c);l.sort(),d.sort();for(let p=0;p<l.length&&p<d.length;++p){const g=Ut(l[p],d[p]);if(g!==0)return g;const m=Iu(o[l[p]],c[d[p]]);if(m!==0)return m}return Ut(l.length,d.length)}(t.mapValue,e.mapValue);default:throw bt()}}function Bw(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ut(t,e);const n=Jo(t),r=Jo(e),i=Ut(n.seconds,r.seconds);return i!==0?i:Ut(n.nanos,r.nanos)}function Kw(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=Iu(n[i],r[i]);if(s)return s}return Ut(n.length,r.length)}function Pu(t){return D0(t)}function D0(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Jo(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Jl(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ht.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=D0(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const a of r)s?s=!1:i+=",",i+=`${a}:${D0(n.fields[a])}`;return i+"}"}(t.mapValue):bt()}function qw(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function F0(t){return!!t&&"integerValue"in t}function S2(t){return!!t&&"arrayValue"in t}function zw(t){return!!t&&"nullValue"in t}function $w(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function lp(t){return!!t&&"mapValue"in t}function V8(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function $h(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return ic(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=$h(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=$h(t.arrayValue.values[n]);return e}return Object.assign({},t)}function U8(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ii{constructor(e){this.value=e}static empty(){return new ii({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!lp(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=$h(n)}setAll(e){let n=dr.emptyPath(),r={},i=[];e.forEach((a,o)=>{if(!n.isImmediateParentOf(o)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=o.popLast()}a?r[o.lastSegment()]=$h(a):i.push(o.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());lp(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Ws(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];lp(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){ic(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new ii($h(this.value))}}function C3(t){const e=[];return ic(t.fields,(n,r)=>{const i=new dr([n]);if(lp(r)){const s=C3(r.mapValue).fields;if(s.length===0)e.push(i);else for(const a of s)e.push(i.child(a))}else e.push(i)}),new bi(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pr{constructor(e,n,r,i,s,a,o){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=a,this.documentState=o}static newInvalidDocument(e){return new Pr(e,0,Et.min(),Et.min(),Et.min(),ii.empty(),0)}static newFoundDocument(e,n,r,i){return new Pr(e,1,n,Et.min(),r,i,0)}static newNoDocument(e,n){return new Pr(e,2,n,Et.min(),Et.min(),ii.empty(),0)}static newUnknownDocument(e,n){return new Pr(e,3,n,Et.min(),Et.min(),ii.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Et.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ii.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ii.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Et.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Pr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Pr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zp{constructor(e,n){this.position=e,this.inclusive=n}}function Hw(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],a=t.position[i];if(s.field.isKeyField()?r=ht.comparator(ht.fromName(a.referenceValue),n.key):r=Iu(a,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function Ww(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Ws(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sd{constructor(e,n="asc"){this.field=e,this.dir=n}}function B8(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j3{}class Hn extends j3{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new q8(e,n,r):n==="array-contains"?new H8(e,r):n==="in"?new W8(e,r):n==="not-in"?new G8(e,r):n==="array-contains-any"?new Q8(e,r):new Hn(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new z8(e,r):new $8(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Iu(n,this.value)):n!==null&&Xl(this.value)===Xl(n)&&this.matchesComparison(Iu(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return bt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ms extends j3{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new ms(e,n)}matches(e){return L3(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function L3(t){return t.op==="and"}function R3(t){return K8(t)&&L3(t)}function K8(t){for(const e of t.filters)if(e instanceof ms)return!1;return!0}function O0(t){if(t instanceof Hn)return t.field.canonicalString()+t.op.toString()+Pu(t.value);if(R3(t))return t.filters.map(e=>O0(e)).join(",");{const e=t.filters.map(n=>O0(n)).join(",");return`${t.op}(${e})`}}function D3(t,e){return t instanceof Hn?function(r,i){return i instanceof Hn&&r.op===i.op&&r.field.isEqual(i.field)&&Ws(r.value,i.value)}(t,e):t instanceof ms?function(r,i){return i instanceof ms&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,a,o)=>s&&D3(a,i.filters[o]),!0):!1}(t,e):void bt()}function F3(t){return t instanceof Hn?function(n){return`${n.field.canonicalString()} ${n.op} ${Pu(n.value)}`}(t):t instanceof ms?function(n){return n.op.toString()+" {"+n.getFilters().map(F3).join(" ,")+"}"}(t):"Filter"}class q8 extends Hn{constructor(e,n,r){super(e,n,r),this.key=ht.fromName(r.referenceValue)}matches(e){const n=ht.comparator(e.key,this.key);return this.matchesComparison(n)}}class z8 extends Hn{constructor(e,n){super(e,"in",n),this.keys=O3("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class $8 extends Hn{constructor(e,n){super(e,"not-in",n),this.keys=O3("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function O3(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>ht.fromName(r.referenceValue))}class H8 extends Hn{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return S2(n)&&xd(n.arrayValue,this.value)}}class W8 extends Hn{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&xd(this.value.arrayValue,n)}}class G8 extends Hn{constructor(e,n){super(e,"not-in",n)}matches(e){if(xd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!xd(this.value.arrayValue,n)}}class Q8 extends Hn{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!S2(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>xd(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y8{constructor(e,n=null,r=[],i=[],s=null,a=null,o=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=a,this.endAt=o,this.ue=null}}function Gw(t,e=null,n=[],r=[],i=null,s=null,a=null){return new Y8(t,e,n,r,i,s,a)}function N2(t){const e=kt(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>O0(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Um(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Pu(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Pu(r)).join(",")),e.ue=n}return e.ue}function A2(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!B8(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!D3(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Ww(t.startAt,e.startAt)&&Ww(t.endAt,e.endAt)}function M0(t){return ht.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zu{constructor(e,n=null,r=[],i=[],s=null,a="F",o=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=a,this.startAt=o,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function J8(t,e,n,r,i,s,a,o){return new zu(t,e,n,r,i,s,a,o)}function E2(t){return new zu(t)}function Qw(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function M3(t){return t.collectionGroup!==null}function Hh(t){const e=kt(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let o=new pr(dr.comparator);return a.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(o=o.add(c.field))})}),o})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Sd(s,r))}),n.has(dr.keyField().canonicalString())||e.ce.push(new Sd(dr.keyField(),r))}return e.ce}function zs(t){const e=kt(t);return e.le||(e.le=X8(e,Hh(t))),e.le}function X8(t,e){if(t.limitType==="F")return Gw(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Sd(i.field,s)});const n=t.endAt?new Zp(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Zp(t.startAt.position,t.startAt.inclusive):null;return Gw(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function V0(t,e){const n=t.filters.concat([e]);return new zu(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function U0(t,e,n){return new zu(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Bm(t,e){return A2(zs(t),zs(e))&&t.limitType===e.limitType}function V3(t){return`${N2(zs(t))}|lt:${t.limitType}`}function Mc(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>F3(i)).join(", ")}]`),Um(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Pu(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Pu(i)).join(",")),`Target(${r})`}(zs(t))}; limitType=${t.limitType})`}function Km(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):ht.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of Hh(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(a,o,l){const c=Hw(a,o,l);return a.inclusive?c<=0:c<0}(r.startAt,Hh(r),i)||r.endAt&&!function(a,o,l){const c=Hw(a,o,l);return a.inclusive?c>=0:c>0}(r.endAt,Hh(r),i))}(t,e)}function Z8(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function U3(t){return(e,n)=>{let r=!1;for(const i of Hh(t)){const s=ej(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function ej(t,e,n){const r=t.field.isKeyField()?ht.comparator(e.key,n.key):function(s,a,o){const l=a.data.field(s),c=o.data.field(s);return l!==null&&c!==null?Iu(l,c):bt()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return bt()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $u{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ic(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return I3(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tj=new bn(ht.comparator);function Ra(){return tj}const B3=new bn(ht.comparator);function jh(...t){let e=B3;for(const n of t)e=e.insert(n.key,n);return e}function K3(t){let e=B3;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Dl(){return Wh()}function q3(){return Wh()}function Wh(){return new $u(t=>t.toString(),(t,e)=>t.isEqual(e))}const nj=new bn(ht.comparator),rj=new pr(ht.comparator);function Rt(...t){let e=rj;for(const n of t)e=e.add(n);return e}const ij=new pr(Ut);function sj(){return ij}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k2(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Xp(e)?"-0":e}}function z3(t){return{integerValue:""+t}}function aj(t,e){return F8(e)?z3(e):k2(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qm{constructor(){this._=void 0}}function oj(t,e,n){return t instanceof em?function(i,s){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&b2(s)&&(s=x2(s)),s&&(a.fields.__previous_value__=s),{mapValue:a}}(n,e):t instanceof Nd?H3(t,e):t instanceof Ad?W3(t,e):function(i,s){const a=$3(i,s),o=Yw(a)+Yw(i.Pe);return F0(a)&&F0(i.Pe)?z3(o):k2(i.serializer,o)}(t,e)}function lj(t,e,n){return t instanceof Nd?H3(t,e):t instanceof Ad?W3(t,e):n}function $3(t,e){return t instanceof tm?function(r){return F0(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class em extends qm{}class Nd extends qm{constructor(e){super(),this.elements=e}}function H3(t,e){const n=G3(e);for(const r of t.elements)n.some(i=>Ws(i,r))||n.push(r);return{arrayValue:{values:n}}}class Ad extends qm{constructor(e){super(),this.elements=e}}function W3(t,e){let n=G3(e);for(const r of t.elements)n=n.filter(i=>!Ws(i,r));return{arrayValue:{values:n}}}class tm extends qm{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function Yw(t){return Rn(t.integerValue||t.doubleValue)}function G3(t){return S2(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function cj(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Nd&&i instanceof Nd||r instanceof Ad&&i instanceof Ad?Tu(r.elements,i.elements,Ws):r instanceof tm&&i instanceof tm?Ws(r.Pe,i.Pe):r instanceof em&&i instanceof em}(t.transform,e.transform)}class uj{constructor(e,n){this.version=e,this.transformResults=n}}class Ki{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Ki}static exists(e){return new Ki(void 0,e)}static updateTime(e){return new Ki(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function cp(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class zm{}function Q3(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new T2(t.key,Ki.none()):new Vd(t.key,t.data,Ki.none());{const n=t.data,r=ii.empty();let i=new pr(dr.comparator);for(let s of e.fields)if(!i.has(s)){let a=n.field(s);a===null&&s.length>1&&(s=s.popLast(),a=n.field(s)),a===null?r.delete(s):r.set(s,a),i=i.add(s)}return new sl(t.key,r,new bi(i.toArray()),Ki.none())}}function hj(t,e,n){t instanceof Vd?function(i,s,a){const o=i.value.clone(),l=Xw(i.fieldTransforms,s,a.transformResults);o.setAll(l),s.convertToFoundDocument(a.version,o).setHasCommittedMutations()}(t,e,n):t instanceof sl?function(i,s,a){if(!cp(i.precondition,s))return void s.convertToUnknownDocument(a.version);const o=Xw(i.fieldTransforms,s,a.transformResults),l=s.data;l.setAll(Y3(i)),l.setAll(o),s.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(t,e,n):function(i,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function Gh(t,e,n,r){return t instanceof Vd?function(s,a,o,l){if(!cp(s.precondition,a))return o;const c=s.value.clone(),d=Zw(s.fieldTransforms,l,a);return c.setAll(d),a.convertToFoundDocument(a.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof sl?function(s,a,o,l){if(!cp(s.precondition,a))return o;const c=Zw(s.fieldTransforms,l,a),d=a.data;return d.setAll(Y3(s)),d.setAll(c),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),o===null?null:o.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(s,a,o){return cp(s.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):o}(t,e,n)}function dj(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=$3(r.transform,i||null);s!=null&&(n===null&&(n=ii.empty()),n.set(r.field,s))}return n||null}function Jw(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Tu(r,i,(s,a)=>cj(s,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Vd extends zm{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class sl extends zm{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function Y3(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Xw(t,e,n){const r=new Map;Yt(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],a=s.transform,o=e.data.field(s.field);r.set(s.field,lj(a,o,n[i]))}return r}function Zw(t,e,n){const r=new Map;for(const i of t){const s=i.transform,a=n.data.field(i.field);r.set(i.field,oj(s,a,e))}return r}class T2 extends zm{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class fj extends zm{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pj{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&hj(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Gh(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Gh(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=q3();return this.mutations.forEach(i=>{const s=e.get(i.key),a=s.overlayedDocument;let o=this.applyToLocalView(a,s.mutatedFields);o=n.has(i.key)?null:o;const l=Q3(a,o);l!==null&&r.set(i.key,l),a.isValidDocument()||a.convertToNoDocument(Et.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Rt())}isEqual(e){return this.batchId===e.batchId&&Tu(this.mutations,e.mutations,(n,r)=>Jw(n,r))&&Tu(this.baseMutations,e.baseMutations,(n,r)=>Jw(n,r))}}class I2{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Yt(e.mutations.length===r.length);let i=function(){return nj}();const s=e.mutations;for(let a=0;a<s.length;a++)i=i.insert(s[a].key,r[a].version);return new I2(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mj{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gj{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var zn,Ot;function vj(t){switch(t){default:return bt();case Le.CANCELLED:case Le.UNKNOWN:case Le.DEADLINE_EXCEEDED:case Le.RESOURCE_EXHAUSTED:case Le.INTERNAL:case Le.UNAVAILABLE:case Le.UNAUTHENTICATED:return!1;case Le.INVALID_ARGUMENT:case Le.NOT_FOUND:case Le.ALREADY_EXISTS:case Le.PERMISSION_DENIED:case Le.FAILED_PRECONDITION:case Le.ABORTED:case Le.OUT_OF_RANGE:case Le.UNIMPLEMENTED:case Le.DATA_LOSS:return!0}}function J3(t){if(t===void 0)return La("GRPC error has no .code"),Le.UNKNOWN;switch(t){case zn.OK:return Le.OK;case zn.CANCELLED:return Le.CANCELLED;case zn.UNKNOWN:return Le.UNKNOWN;case zn.DEADLINE_EXCEEDED:return Le.DEADLINE_EXCEEDED;case zn.RESOURCE_EXHAUSTED:return Le.RESOURCE_EXHAUSTED;case zn.INTERNAL:return Le.INTERNAL;case zn.UNAVAILABLE:return Le.UNAVAILABLE;case zn.UNAUTHENTICATED:return Le.UNAUTHENTICATED;case zn.INVALID_ARGUMENT:return Le.INVALID_ARGUMENT;case zn.NOT_FOUND:return Le.NOT_FOUND;case zn.ALREADY_EXISTS:return Le.ALREADY_EXISTS;case zn.PERMISSION_DENIED:return Le.PERMISSION_DENIED;case zn.FAILED_PRECONDITION:return Le.FAILED_PRECONDITION;case zn.ABORTED:return Le.ABORTED;case zn.OUT_OF_RANGE:return Le.OUT_OF_RANGE;case zn.UNIMPLEMENTED:return Le.UNIMPLEMENTED;case zn.DATA_LOSS:return Le.DATA_LOSS;default:return bt()}}(Ot=zn||(zn={}))[Ot.OK=0]="OK",Ot[Ot.CANCELLED=1]="CANCELLED",Ot[Ot.UNKNOWN=2]="UNKNOWN",Ot[Ot.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ot[Ot.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ot[Ot.NOT_FOUND=5]="NOT_FOUND",Ot[Ot.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ot[Ot.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ot[Ot.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ot[Ot.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ot[Ot.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ot[Ot.ABORTED=10]="ABORTED",Ot[Ot.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ot[Ot.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ot[Ot.INTERNAL=13]="INTERNAL",Ot[Ot.UNAVAILABLE=14]="UNAVAILABLE",Ot[Ot.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yj(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wj=new Vl([4294967295,4294967295],0);function e_(t){const e=yj().encode(t),n=new b3;return n.update(e),new Uint8Array(n.digest())}function t_(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Vl([n,r],0),new Vl([i,s],0)]}class P2{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Lh(`Invalid padding: ${n}`);if(r<0)throw new Lh(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Lh(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Lh(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Vl.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(Vl.fromNumber(r)));return i.compare(wj)===1&&(i=new Vl([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=e_(e),[r,i]=t_(n);for(let s=0;s<this.hashCount;s++){const a=this.Ee(r,i,s);if(!this.de(a))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),a=new P2(s,i,n);return r.forEach(o=>a.insert(o)),a}insert(e){if(this.Ie===0)return;const n=e_(e),[r,i]=t_(n);for(let s=0;s<this.hashCount;s++){const a=this.Ee(r,i,s);this.Ae(a)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Lh extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $m{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Ud.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new $m(Et.min(),i,new bn(Ut),Ra(),Rt())}}class Ud{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Ud(r,n,Rt(),Rt(),Rt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class up{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class X3{constructor(e,n){this.targetId=e,this.me=n}}class Z3{constructor(e,n,r=gr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class n_{constructor(){this.fe=0,this.ge=i_(),this.pe=gr.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Rt(),n=Rt(),r=Rt();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:bt()}}),new Ud(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=i_()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Yt(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class _j{constructor(e){this.Le=e,this.Be=new Map,this.ke=Ra(),this.qe=r_(),this.Qe=new bn(Ut)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:bt()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const s=i.target;if(M0(s))if(r===0){const a=new ht(s.path);this.Ue(n,a,Pr.newNoDocument(a,Et.min()))}else Yt(r===1);else{const a=this.Ye(n);if(a!==r){const o=this.Ze(e),l=o?this.Xe(o,e,a):1;if(l!==0){this.je(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,c)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let a,o;try{a=Jl(r).toUint8Array()}catch(l){if(l instanceof P3)return ku("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{o=new P2(a,i,s)}catch(l){return ku(l instanceof Lh?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return o.Ie===0?null:o}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const a=this.Le.tt(),o=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;e.mightContain(o)||(this.Ue(n,s,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((s,a)=>{const o=this.Je(a);if(o){if(s.current&&M0(o.target)){const l=new ht(o.target.path);this.ke.get(l)!==null||this.it(a,l)||this.Ue(a,l,Pr.newNoDocument(l,e))}s.be&&(n.set(a,s.ve()),s.Ce())}});let r=Rt();this.qe.forEach((s,a)=>{let o=!0;a.forEachWhile(l=>{const c=this.Je(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)}),o&&(r=r.add(s))}),this.ke.forEach((s,a)=>a.setReadTime(e));const i=new $m(e,n,this.Qe,this.ke,r);return this.ke=Ra(),this.qe=r_(),this.Qe=new bn(Ut),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new n_,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new pr(Ut),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||st("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new n_),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function r_(){return new bn(ht.comparator)}function i_(){return new bn(ht.comparator)}const bj={asc:"ASCENDING",desc:"DESCENDING"},xj={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Sj={and:"AND",or:"OR"};class Nj{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function B0(t,e){return t.useProto3Json||Um(e)?e:{value:e}}function nm(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function eS(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Aj(t,e){return nm(t,e.toTimestamp())}function $s(t){return Yt(!!t),Et.fromTimestamp(function(n){const r=Jo(n);return new Xn(r.seconds,r.nanos)}(t))}function C2(t,e){return K0(t,e).canonicalString()}function K0(t,e){const n=function(i){return new cn(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function tS(t){const e=cn.fromString(t);return Yt(aS(e)),e}function q0(t,e){return C2(t.databaseId,e.path)}function l1(t,e){const n=tS(e);if(n.get(1)!==t.databaseId.projectId)throw new et(Le.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new et(Le.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ht(rS(n))}function nS(t,e){return C2(t.databaseId,e)}function Ej(t){const e=tS(t);return e.length===4?cn.emptyPath():rS(e)}function z0(t){return new cn(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function rS(t){return Yt(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function s_(t,e,n){return{name:q0(t,e),fields:n.value.mapValue.fields}}function kj(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:bt()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(c,d){return c.useProto3Json?(Yt(d===void 0||typeof d=="string"),gr.fromBase64String(d||"")):(Yt(d===void 0||d instanceof Buffer||d instanceof Uint8Array),gr.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,o=a&&function(c){const d=c.code===void 0?Le.UNKNOWN:J3(c.code);return new et(d,c.message||"")}(a);n=new Z3(r,i,s,o||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=l1(t,r.document.name),s=$s(r.document.updateTime),a=r.document.createTime?$s(r.document.createTime):Et.min(),o=new ii({mapValue:{fields:r.document.fields}}),l=Pr.newFoundDocument(i,s,a,o),c=r.targetIds||[],d=r.removedTargetIds||[];n=new up(c,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=l1(t,r.document),s=r.readTime?$s(r.readTime):Et.min(),a=Pr.newNoDocument(i,s),o=r.removedTargetIds||[];n=new up([],o,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=l1(t,r.document),s=r.removedTargetIds||[];n=new up([],s,i,null)}else{if(!("filter"in e))return bt();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,a=new gj(i,s),o=r.targetId;n=new X3(o,a)}}return n}function Tj(t,e){let n;if(e instanceof Vd)n={update:s_(t,e.key,e.value)};else if(e instanceof T2)n={delete:q0(t,e.key)};else if(e instanceof sl)n={update:s_(t,e.key,e.data),updateMask:Oj(e.fieldMask)};else{if(!(e instanceof fj))return bt();n={verify:q0(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,a){const o=a.transform;if(o instanceof em)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof Nd)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof Ad)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof tm)return{fieldPath:a.field.canonicalString(),increment:o.Pe};throw bt()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:Aj(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:bt()}(t,e.precondition)),n}function Ij(t,e){return t&&t.length>0?(Yt(e!==void 0),t.map(n=>function(i,s){let a=i.updateTime?$s(i.updateTime):$s(s);return a.isEqual(Et.min())&&(a=$s(s)),new uj(a,i.transformResults||[])}(n,e))):[]}function Pj(t,e){return{documents:[nS(t,e.path)]}}function Cj(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=nS(t,i);const s=function(c){if(c.length!==0)return sS(ms.create(c,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const a=function(c){if(c.length!==0)return c.map(d=>function(g){return{field:Vc(g.field),direction:Rj(g.dir)}}(d))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const o=B0(t,e.limit);return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:n,parent:i}}function jj(t){let e=Ej(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Yt(r===1);const d=n.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let s=[];n.where&&(s=function(p){const g=iS(p);return g instanceof ms&&R3(g)?g.getFilters():[g]}(n.where));let a=[];n.orderBy&&(a=function(p){return p.map(g=>function(b){return new Sd(Uc(b.field),function(T){switch(T){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction))}(g))}(n.orderBy));let o=null;n.limit&&(o=function(p){let g;return g=typeof p=="object"?p.value:p,Um(g)?null:g}(n.limit));let l=null;n.startAt&&(l=function(p){const g=!!p.before,m=p.values||[];return new Zp(m,g)}(n.startAt));let c=null;return n.endAt&&(c=function(p){const g=!p.before,m=p.values||[];return new Zp(m,g)}(n.endAt)),J8(e,i,a,s,o,"F",l,c)}function Lj(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return bt()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function iS(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Uc(n.unaryFilter.field);return Hn.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Uc(n.unaryFilter.field);return Hn.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Uc(n.unaryFilter.field);return Hn.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Uc(n.unaryFilter.field);return Hn.create(a,"!=",{nullValue:"NULL_VALUE"});default:return bt()}}(t):t.fieldFilter!==void 0?function(n){return Hn.create(Uc(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return bt()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return ms.create(n.compositeFilter.filters.map(r=>iS(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return bt()}}(n.compositeFilter.op))}(t):bt()}function Rj(t){return bj[t]}function Dj(t){return xj[t]}function Fj(t){return Sj[t]}function Vc(t){return{fieldPath:t.canonicalString()}}function Uc(t){return dr.fromServerFormat(t.fieldPath)}function sS(t){return t instanceof Hn?function(n){if(n.op==="=="){if($w(n.value))return{unaryFilter:{field:Vc(n.field),op:"IS_NAN"}};if(zw(n.value))return{unaryFilter:{field:Vc(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if($w(n.value))return{unaryFilter:{field:Vc(n.field),op:"IS_NOT_NAN"}};if(zw(n.value))return{unaryFilter:{field:Vc(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Vc(n.field),op:Dj(n.op),value:n.value}}}(t):t instanceof ms?function(n){const r=n.getFilters().map(i=>sS(i));return r.length===1?r[0]:{compositeFilter:{op:Fj(n.op),filters:r}}}(t):bt()}function Oj(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function aS(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jo{constructor(e,n,r,i,s=Et.min(),a=Et.min(),o=gr.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=o,this.expectedCount=l}withSequenceNumber(e){return new jo(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new jo(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new jo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new jo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mj{constructor(e){this.ct=e}}function Vj(t){const e=jj({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?U0(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uj{constructor(){this.un=new Bj}addToCollectionParentIndex(e,n){return this.un.add(n),Ue.resolve()}getCollectionParents(e,n){return Ue.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return Ue.resolve()}deleteFieldIndex(e,n){return Ue.resolve()}deleteAllFieldIndexes(e){return Ue.resolve()}createTargetIndexes(e,n){return Ue.resolve()}getDocumentsMatchingTarget(e,n){return Ue.resolve(null)}getIndexType(e,n){return Ue.resolve(0)}getFieldIndexes(e,n){return Ue.resolve([])}getNextCollectionGroupToUpdate(e){return Ue.resolve(null)}getMinOffset(e,n){return Ue.resolve(Yo.min())}getMinOffsetFromCollectionGroup(e,n){return Ue.resolve(Yo.min())}updateCollectionGroup(e,n,r){return Ue.resolve()}updateIndexEntries(e,n){return Ue.resolve()}}class Bj{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new pr(cn.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new pr(cn.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cu{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Cu(0)}static kn(){return new Cu(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kj{constructor(){this.changes=new $u(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Pr.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?Ue.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qj{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zj{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Gh(r.mutation,i,bi.empty(),Xn.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Rt()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Rt()){const i=Dl();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let a=jh();return s.forEach((o,l)=>{a=a.insert(o,l.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const r=Dl();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Rt()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((a,o)=>{n.set(a,o)})})}computeViews(e,n,r,i){let s=Ra();const a=Wh(),o=function(){return Wh()}();return n.forEach((l,c)=>{const d=r.get(c.key);i.has(c.key)&&(d===void 0||d.mutation instanceof sl)?s=s.insert(c.key,c):d!==void 0?(a.set(c.key,d.mutation.getFieldMask()),Gh(d.mutation,c,d.mutation.getFieldMask(),Xn.now())):a.set(c.key,bi.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,d)=>a.set(c,d)),n.forEach((c,d)=>{var p;return o.set(c,new qj(d,(p=a.get(c))!==null&&p!==void 0?p:null))}),o))}recalculateAndSaveOverlays(e,n){const r=Wh();let i=new bn((a,o)=>a-o),s=Rt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const o of a)o.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let d=r.get(l)||bi.empty();d=o.applyToLocalView(c,d),r.set(l,d);const p=(i.get(o.batchId)||Rt()).add(l);i=i.insert(o.batchId,p)})}).next(()=>{const a=[],o=i.getReverseIterator();for(;o.hasNext();){const l=o.getNext(),c=l.key,d=l.value,p=q3();d.forEach(g=>{if(!s.has(g)){const m=Q3(n.get(g),r.get(g));m!==null&&p.set(g,m),s=s.add(g)}}),a.push(this.documentOverlayCache.saveOverlays(e,c,p))}return Ue.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(a){return ht.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):M3(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const a=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):Ue.resolve(Dl());let o=-1,l=s;return a.next(c=>Ue.forEach(c,(d,p)=>(o<p.largestBatchId&&(o=p.largestBatchId),s.get(d)?Ue.resolve():this.remoteDocumentCache.getEntry(e,d).next(g=>{l=l.insert(d,g)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,Rt())).next(d=>({batchId:o,changes:K3(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ht(n)).next(r=>{let i=jh();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let a=jh();return this.indexManager.getCollectionParents(e,s).next(o=>Ue.forEach(o,l=>{const c=function(p,g){return new zu(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(d=>{d.forEach((p,g)=>{a=a.insert(p,g)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(a=>{s.forEach((l,c)=>{const d=c.getKey();a.get(d)===null&&(a=a.insert(d,Pr.newInvalidDocument(d)))});let o=jh();return a.forEach((l,c)=>{const d=s.get(l);d!==void 0&&Gh(d.mutation,c,bi.empty(),Xn.now()),Km(n,c)&&(o=o.insert(l,c))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $j{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return Ue.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:$s(i.createTime)}}(n)),Ue.resolve()}getNamedQuery(e,n){return Ue.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:Vj(i.bundledQuery),readTime:$s(i.readTime)}}(n)),Ue.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hj{constructor(){this.overlays=new bn(ht.comparator),this.Ir=new Map}getOverlay(e,n){return Ue.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Dl();return Ue.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),Ue.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),Ue.resolve()}getOverlaysForCollection(e,n,r){const i=Dl(),s=n.length+1,a=new ht(n.child("")),o=this.overlays.getIteratorFrom(a);for(;o.hasNext();){const l=o.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return Ue.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new bn((c,d)=>c-d);const a=this.overlays.getIterator();for(;a.hasNext();){const c=a.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let d=s.get(c.largestBatchId);d===null&&(d=Dl(),s=s.insert(c.largestBatchId,d)),d.set(c.getKey(),c)}}const o=Dl(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,d)=>o.set(c,d)),!(o.size()>=i)););return Ue.resolve(o)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const a=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new mj(n,r));let s=this.Ir.get(n);s===void 0&&(s=Rt(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wj{constructor(){this.sessionToken=gr.EMPTY_BYTE_STRING}getSessionToken(e){return Ue.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,Ue.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j2{constructor(){this.Tr=new pr(tr.Er),this.dr=new pr(tr.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new tr(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new tr(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new ht(new cn([])),r=new tr(n,e),i=new tr(n,e+1),s=[];return this.dr.forEachInRange([r,i],a=>{this.Vr(a),s.push(a.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new ht(new cn([])),r=new tr(n,e),i=new tr(n,e+1);let s=Rt();return this.dr.forEachInRange([r,i],a=>{s=s.add(a.key)}),s}containsKey(e){const n=new tr(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class tr{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return ht.comparator(e.key,n.key)||Ut(e.wr,n.wr)}static Ar(e,n){return Ut(e.wr,n.wr)||ht.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gj{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new pr(tr.Er)}checkEmpty(e){return Ue.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new pj(s,n,r,i);this.mutationQueue.push(a);for(const o of i)this.br=this.br.add(new tr(o.key,s)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return Ue.resolve(a)}lookupMutationBatch(e,n){return Ue.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),s=i<0?0:i;return Ue.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Ue.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return Ue.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new tr(n,0),i=new tr(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],a=>{const o=this.Dr(a.wr);s.push(o)}),Ue.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new pr(Ut);return n.forEach(i=>{const s=new tr(i,0),a=new tr(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,a],o=>{r=r.add(o.wr)})}),Ue.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;ht.isDocumentKey(s)||(s=s.child(""));const a=new tr(new ht(s),0);let o=new pr(Ut);return this.br.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(o=o.add(l.wr)),!0)},a),Ue.resolve(this.Cr(o))}Cr(e){const n=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Yt(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return Ue.forEach(n.mutations,i=>{const s=new tr(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new tr(n,0),i=this.br.firstAfterOrEqual(r);return Ue.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,Ue.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qj{constructor(e){this.Mr=e,this.docs=function(){return new bn(ht.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,a=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return Ue.resolve(r?r.document.mutableCopy():Pr.newInvalidDocument(n))}getEntries(e,n){let r=Ra();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Pr.newInvalidDocument(i))}),Ue.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Ra();const a=n.path,o=new ht(a.child("")),l=this.docs.getIteratorFrom(o);for(;l.hasNext();){const{key:c,value:{document:d}}=l.getNext();if(!a.isPrefixOf(c.path))break;c.path.length>a.length+1||j8(C8(d),r)<=0||(i.has(d.key)||Km(n,d))&&(s=s.insert(d.key,d.mutableCopy()))}return Ue.resolve(s)}getAllFromCollectionGroup(e,n,r,i){bt()}Or(e,n){return Ue.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Yj(this)}getSize(e){return Ue.resolve(this.size)}}class Yj extends Kj{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),Ue.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jj{constructor(e){this.persistence=e,this.Nr=new $u(n=>N2(n),A2),this.lastRemoteSnapshotVersion=Et.min(),this.highestTargetId=0,this.Lr=0,this.Br=new j2,this.targetCount=0,this.kr=Cu.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),Ue.resolve()}getLastRemoteSnapshotVersion(e){return Ue.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ue.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),Ue.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),Ue.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Cu(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,Ue.resolve()}updateTargetData(e,n){return this.Kn(n),Ue.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,Ue.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Nr.forEach((a,o)=>{o.sequenceNumber<=n&&r.get(o.targetId)===null&&(this.Nr.delete(a),s.push(this.removeMatchingKeysForTargetId(e,o.targetId)),i++)}),Ue.waitFor(s).next(()=>i)}getTargetCount(e){return Ue.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return Ue.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),Ue.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(a=>{s.push(i.markPotentiallyOrphaned(e,a))}),Ue.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),Ue.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return Ue.resolve(r)}containsKey(e,n){return Ue.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xj{constructor(e,n){this.qr={},this.overlays={},this.Qr=new _2(0),this.Kr=!1,this.Kr=!0,this.$r=new Wj,this.referenceDelegate=e(this),this.Ur=new Jj(this),this.indexManager=new Uj,this.remoteDocumentCache=function(i){return new Qj(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new Mj(n),this.Gr=new $j(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Hj,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new Gj(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){st("MemoryPersistence","Starting transaction:",e);const i=new Zj(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,n){return Ue.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class Zj extends R8{constructor(e){super(),this.currentSequenceNumber=e}}class L2{constructor(e){this.persistence=e,this.Jr=new j2,this.Yr=null}static Zr(e){return new L2(e)}get Xr(){if(this.Yr)return this.Yr;throw bt()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),Ue.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),Ue.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),Ue.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ue.forEach(this.Xr,r=>{const i=ht.fromPath(r);return this.ei(e,i).next(s=>{s||n.removeEntry(i,Et.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return Ue.or([()=>Ue.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R2{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=Rt(),i=Rt();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new R2(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eL{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tL{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return zT()?8:D8(Lr())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.Yi(e,n).next(a=>{s.result=a}).next(()=>{if(!s.result)return this.Zi(e,n,i,r).next(a=>{s.result=a})}).next(()=>{if(s.result)return;const a=new eL;return this.Xi(e,n,a).next(o=>{if(s.result=o,this.zi)return this.es(e,n,a,o.size)})}).next(()=>s.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(bh()<=Ft.DEBUG&&st("QueryEngine","SDK will not create cache indexes for query:",Mc(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),Ue.resolve()):(bh()<=Ft.DEBUG&&st("QueryEngine","Query:",Mc(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(bh()<=Ft.DEBUG&&st("QueryEngine","The SDK decides to create cache indexes for query:",Mc(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,zs(n))):Ue.resolve())}Yi(e,n){if(Qw(n))return Ue.resolve(null);let r=zs(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=U0(n,null,"F"),r=zs(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const a=Rt(...s);return this.Ji.getDocuments(e,a).next(o=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.ts(n,o);return this.ns(n,c,a,l.readTime)?this.Yi(e,U0(n,null,"F")):this.rs(e,c,n,l)}))})))}Zi(e,n,r,i){return Qw(n)||i.isEqual(Et.min())?Ue.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const a=this.ts(n,s);return this.ns(n,a,r,i)?Ue.resolve(null):(bh()<=Ft.DEBUG&&st("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Mc(n)),this.rs(e,a,n,P8(i,-1)).next(o=>o))})}ts(e,n){let r=new pr(U3(e));return n.forEach((i,s)=>{Km(e,s)&&(r=r.add(s))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,n,r){return bh()<=Ft.DEBUG&&st("QueryEngine","Using full collection scan to execute query:",Mc(n)),this.Ji.getDocumentsMatchingQuery(e,n,Yo.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(a=>{s=s.insert(a.key,a)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nL{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new bn(Ut),this._s=new $u(s=>N2(s),A2),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new zj(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function rL(t,e,n,r){return new nL(t,e,n,r)}async function oS(t,e){const n=kt(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const a=[],o=[];let l=Rt();for(const c of i){a.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}for(const c of s){o.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}return n.localDocuments.getDocuments(r,l).next(c=>({hs:c,removedBatchIds:a,addedBatchIds:o}))})})}function iL(t,e){const n=kt(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(o,l,c,d){const p=c.batch,g=p.keys();let m=Ue.resolve();return g.forEach(b=>{m=m.next(()=>d.getEntry(l,b)).next(x=>{const T=c.docVersions.get(b);Yt(T!==null),x.version.compareTo(T)<0&&(p.applyToRemoteDocument(x,c),x.isValidDocument()&&(x.setReadTime(c.commitVersion),d.addEntry(x)))})}),m.next(()=>o.mutationQueue.removeMutationBatch(l,p))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(o){let l=Rt();for(let c=0;c<o.mutationResults.length;++c)o.mutationResults[c].transformResults.length>0&&(l=l.add(o.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function lS(t){const e=kt(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function sL(t,e){const n=kt(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const a=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const o=[];e.targetChanges.forEach((d,p)=>{const g=i.get(p);if(!g)return;o.push(n.Ur.removeMatchingKeys(s,d.removedDocuments,p).next(()=>n.Ur.addMatchingKeys(s,d.addedDocuments,p)));let m=g.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(p)!==null?m=m.withResumeToken(gr.EMPTY_BYTE_STRING,Et.min()).withLastLimboFreeSnapshotVersion(Et.min()):d.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(d.resumeToken,r)),i=i.insert(p,m),function(x,T,w){return x.resumeToken.approximateByteSize()===0||T.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=3e8?!0:w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0}(g,m,d)&&o.push(n.Ur.updateTargetData(s,m))});let l=Ra(),c=Rt();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(s,d))}),o.push(aL(s,a,e.documentUpdates).next(d=>{l=d.Ps,c=d.Is})),!r.isEqual(Et.min())){const d=n.Ur.getLastRemoteSnapshotVersion(s).next(p=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));o.push(d)}return Ue.waitFor(o).next(()=>a.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(n.os=i,s))}function aL(t,e,n){let r=Rt(),i=Rt();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let a=Ra();return n.forEach((o,l)=>{const c=s.get(o);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(o)),l.isNoDocument()&&l.version.isEqual(Et.min())?(e.removeEntry(o,l.readTime),a=a.insert(o,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),a=a.insert(o,l)):st("LocalStore","Ignoring outdated watch update for ",o,". Current version:",c.version," Watch version:",l.version)}),{Ps:a,Is:i}})}function oL(t,e){const n=kt(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function lL(t,e){const n=kt(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(s=>s?(i=s,Ue.resolve(i)):n.Ur.allocateTargetId(r).next(a=>(i=new jo(e,a,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function $0(t,e,n){const r=kt(t),i=r.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,a=>r.persistence.referenceDelegate.removeTarget(a,i))}catch(a){if(!Md(a))throw a;st("LocalStore",`Failed to update sequence numbers for target ${e}: ${a}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function a_(t,e,n){const r=kt(t);let i=Et.min(),s=Rt();return r.persistence.runTransaction("Execute query","readwrite",a=>function(l,c,d){const p=kt(l),g=p._s.get(d);return g!==void 0?Ue.resolve(p.os.get(g)):p.Ur.getTargetData(c,d)}(r,a,zs(e)).next(o=>{if(o)return i=o.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(a,o.targetId).next(l=>{s=l})}).next(()=>r.ss.getDocumentsMatchingQuery(a,e,n?i:Et.min(),n?s:Rt())).next(o=>(cL(r,Z8(e),o),{documents:o,Ts:s})))}function cL(t,e,n){let r=t.us.get(e)||Et.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.us.set(e,r)}class o_{constructor(){this.activeTargetIds=sj()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class uL{constructor(){this.so=new o_,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new o_,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hL{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l_{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){st("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){st("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Mf=null;function c1(){return Mf===null?Mf=function(){return 268435456+Math.round(2147483648*Math.random())}():Mf++,"0x"+Mf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dL={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fL{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sr="WebChannelConnection";class pL extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(n,r,i,s,a){const o=c1(),l=this.xo(n,r.toUriEncodedString());st("RestConnection",`Sending RPC '${n}' ${o}:`,l,i);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,s,a),this.No(n,l,c,i).then(d=>(st("RestConnection",`Received RPC '${n}' ${o}: `,d),d),d=>{throw ku("RestConnection",`RPC '${n}' ${o} failed with error: `,d,"url: ",l,"request:",i),d})}Lo(n,r,i,s,a,o){return this.Mo(n,r,i,s,a)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+qu}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,a)=>n[a]=s),i&&i.headers.forEach((s,a)=>n[a]=s)}xo(n,r){const i=dL[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const s=c1();return new Promise((a,o)=>{const l=new x3;l.setWithCredentials(!0),l.listenOnce(S3.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case op.NO_ERROR:const d=l.getResponseJson();st(Sr,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(d)),a(d);break;case op.TIMEOUT:st(Sr,`RPC '${e}' ${s} timed out`),o(new et(Le.DEADLINE_EXCEEDED,"Request time out"));break;case op.HTTP_ERROR:const p=l.getStatus();if(st(Sr,`RPC '${e}' ${s} failed with status:`,p,"response text:",l.getResponseText()),p>0){let g=l.getResponseJson();Array.isArray(g)&&(g=g[0]);const m=g==null?void 0:g.error;if(m&&m.status&&m.message){const b=function(T){const w=T.toLowerCase().replace(/_/g,"-");return Object.values(Le).indexOf(w)>=0?w:Le.UNKNOWN}(m.status);o(new et(b,m.message))}else o(new et(Le.UNKNOWN,"Server responded with status "+l.getStatus()))}else o(new et(Le.UNAVAILABLE,"Connection failed."));break;default:bt()}}finally{st(Sr,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(i);st(Sr,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",c,r,15)})}Bo(e,n,r){const i=c1(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=E3(),o=A3(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const d=s.join("");st(Sr,`Creating RPC '${e}' stream ${i}: ${d}`,l);const p=a.createWebChannel(d,l);let g=!1,m=!1;const b=new fL({Io:T=>{m?st(Sr,`Not sending because RPC '${e}' stream ${i} is closed:`,T):(g||(st(Sr,`Opening RPC '${e}' stream ${i} transport.`),p.open(),g=!0),st(Sr,`RPC '${e}' stream ${i} sending:`,T),p.send(T))},To:()=>p.close()}),x=(T,w,N)=>{T.listen(w,C=>{try{N(C)}catch(F){setTimeout(()=>{throw F},0)}})};return x(p,Ch.EventType.OPEN,()=>{m||(st(Sr,`RPC '${e}' stream ${i} transport opened.`),b.yo())}),x(p,Ch.EventType.CLOSE,()=>{m||(m=!0,st(Sr,`RPC '${e}' stream ${i} transport closed`),b.So())}),x(p,Ch.EventType.ERROR,T=>{m||(m=!0,ku(Sr,`RPC '${e}' stream ${i} transport errored:`,T),b.So(new et(Le.UNAVAILABLE,"The operation could not be completed")))}),x(p,Ch.EventType.MESSAGE,T=>{var w;if(!m){const N=T.data[0];Yt(!!N);const C=N,F=C.error||((w=C[0])===null||w===void 0?void 0:w.error);if(F){st(Sr,`RPC '${e}' stream ${i} received error:`,F);const Q=F.status;let B=function(S){const L=zn[S];if(L!==void 0)return J3(L)}(Q),j=F.message;B===void 0&&(B=Le.INTERNAL,j="Unknown error status: "+Q+" with message "+F.message),m=!0,b.So(new et(B,j)),p.close()}else st(Sr,`RPC '${e}' stream ${i} received:`,N),b.bo(N)}}),x(o,N3.STAT_EVENT,T=>{T.stat===R0.PROXY?st(Sr,`RPC '${e}' stream ${i} detected buffering proxy`):T.stat===R0.NOPROXY&&st(Sr,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{b.wo()},0),b}}function u1(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hm(t){return new Nj(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cS{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&st("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uS{constructor(e,n,r,i,s,a,o,l){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=o,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new cS(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===Le.RESOURCE_EXHAUSTED?(La(n.toString()),La("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===Le.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{const i=new et(Le.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return st("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(st("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class mL extends uS{constructor(e,n,r,i,s,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,a),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=kj(this.serializer,e),r=function(s){if(!("targetChange"in s))return Et.min();const a=s.targetChange;return a.targetIds&&a.targetIds.length?Et.min():a.readTime?$s(a.readTime):Et.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=z0(this.serializer),n.addTarget=function(s,a){let o;const l=a.target;if(o=M0(l)?{documents:Pj(s,l)}:{query:Cj(s,l)._t},o.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){o.resumeToken=eS(s,a.resumeToken);const c=B0(s,a.expectedCount);c!==null&&(o.expectedCount=c)}else if(a.snapshotVersion.compareTo(Et.min())>0){o.readTime=nm(s,a.snapshotVersion.toTimestamp());const c=B0(s,a.expectedCount);c!==null&&(o.expectedCount=c)}return o}(this.serializer,e);const r=Lj(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=z0(this.serializer),n.removeTarget=e,this.a_(n)}}class gL extends uS{constructor(e,n,r,i,s,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,a),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Yt(!!e.streamToken),this.lastStreamToken=e.streamToken,Yt(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Yt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=Ij(e.writeResults,e.commitTime),r=$s(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=z0(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>Tj(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vL extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new et(Le.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Mo(e,K0(n,r),i,s,a)).catch(s=>{throw s.name==="FirebaseError"?(s.code===Le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new et(Le.UNKNOWN,s.toString())})}Lo(e,n,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,o])=>this.connection.Lo(e,K0(n,r),i,a,o,s)).catch(a=>{throw a.name==="FirebaseError"?(a.code===Le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new et(Le.UNKNOWN,a.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class yL{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(La(n),this.D_=!1):st("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wL{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(a=>{r.enqueueAndForget(async()=>{sc(this)&&(st("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=kt(l);c.L_.add(4),await Bd(c),c.q_.set("Unknown"),c.L_.delete(4),await Wm(c)}(this))})}),this.q_=new yL(r,i)}}async function Wm(t){if(sc(t))for(const e of t.B_)await e(!0)}async function Bd(t){for(const e of t.B_)await e(!1)}function hS(t,e){const n=kt(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),M2(n)?O2(n):Hu(n).r_()&&F2(n,e))}function D2(t,e){const n=kt(t),r=Hu(n);n.N_.delete(e),r.r_()&&dS(n,e),n.N_.size===0&&(r.r_()?r.o_():sc(n)&&n.q_.set("Unknown"))}function F2(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Et.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Hu(t).A_(e)}function dS(t,e){t.Q_.xe(e),Hu(t).R_(e)}function O2(t){t.Q_=new _j({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Hu(t).start(),t.q_.v_()}function M2(t){return sc(t)&&!Hu(t).n_()&&t.N_.size>0}function sc(t){return kt(t).L_.size===0}function fS(t){t.Q_=void 0}async function _L(t){t.q_.set("Online")}async function bL(t){t.N_.forEach((e,n)=>{F2(t,e)})}async function xL(t,e){fS(t),M2(t)?(t.q_.M_(e),O2(t)):t.q_.set("Unknown")}async function SL(t,e,n){if(t.q_.set("Online"),e instanceof Z3&&e.state===2&&e.cause)try{await async function(i,s){const a=s.cause;for(const o of s.targetIds)i.N_.has(o)&&(await i.remoteSyncer.rejectListen(o,a),i.N_.delete(o),i.Q_.removeTarget(o))}(t,e)}catch(r){st("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await rm(t,r)}else if(e instanceof up?t.Q_.Ke(e):e instanceof X3?t.Q_.He(e):t.Q_.We(e),!n.isEqual(Et.min()))try{const r=await lS(t.localStore);n.compareTo(r)>=0&&await function(s,a){const o=s.Q_.rt(a);return o.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const d=s.N_.get(c);d&&s.N_.set(c,d.withResumeToken(l.resumeToken,a))}}),o.targetMismatches.forEach((l,c)=>{const d=s.N_.get(l);if(!d)return;s.N_.set(l,d.withResumeToken(gr.EMPTY_BYTE_STRING,d.snapshotVersion)),dS(s,l);const p=new jo(d.target,l,c,d.sequenceNumber);F2(s,p)}),s.remoteSyncer.applyRemoteEvent(o)}(t,n)}catch(r){st("RemoteStore","Failed to raise snapshot:",r),await rm(t,r)}}async function rm(t,e,n){if(!Md(e))throw e;t.L_.add(1),await Bd(t),t.q_.set("Offline"),n||(n=()=>lS(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{st("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Wm(t)})}function pS(t,e){return e().catch(n=>rm(t,n,e))}async function Gm(t){const e=kt(t),n=Xo(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;NL(e);)try{const i=await oL(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,AL(e,i)}catch(i){await rm(e,i)}mS(e)&&gS(e)}function NL(t){return sc(t)&&t.O_.length<10}function AL(t,e){t.O_.push(e);const n=Xo(t);n.r_()&&n.V_&&n.m_(e.mutations)}function mS(t){return sc(t)&&!Xo(t).n_()&&t.O_.length>0}function gS(t){Xo(t).start()}async function EL(t){Xo(t).p_()}async function kL(t){const e=Xo(t);for(const n of t.O_)e.m_(n.mutations)}async function TL(t,e,n){const r=t.O_.shift(),i=I2.from(r,e,n);await pS(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Gm(t)}async function IL(t,e){e&&Xo(t).V_&&await async function(r,i){if(function(a){return vj(a)&&a!==Le.ABORTED}(i.code)){const s=r.O_.shift();Xo(r).s_(),await pS(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Gm(r)}}(t,e),mS(t)&&gS(t)}async function c_(t,e){const n=kt(t);n.asyncQueue.verifyOperationInProgress(),st("RemoteStore","RemoteStore received new credentials");const r=sc(n);n.L_.add(3),await Bd(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Wm(n)}async function PL(t,e){const n=kt(t);e?(n.L_.delete(2),await Wm(n)):e||(n.L_.add(2),await Bd(n),n.q_.set("Unknown"))}function Hu(t){return t.K_||(t.K_=function(n,r,i){const s=kt(n);return s.w_(),new mL(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:_L.bind(null,t),Ro:bL.bind(null,t),mo:xL.bind(null,t),d_:SL.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),M2(t)?O2(t):t.q_.set("Unknown")):(await t.K_.stop(),fS(t))})),t.K_}function Xo(t){return t.U_||(t.U_=function(n,r,i){const s=kt(n);return s.w_(),new gL(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:EL.bind(null,t),mo:IL.bind(null,t),f_:kL.bind(null,t),g_:TL.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Gm(t)):(await t.U_.stop(),t.O_.length>0&&(st("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V2{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Aa,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const a=Date.now()+r,o=new V2(e,n,a,i,s);return o.start(r),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new et(Le.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function U2(t,e){if(La("AsyncQueue",`${e}: ${t}`),Md(t))return new et(Le.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fu{constructor(e){this.comparator=e?(n,r)=>e(n,r)||ht.comparator(n.key,r.key):(n,r)=>ht.comparator(n.key,r.key),this.keyedMap=jh(),this.sortedSet=new bn(this.comparator)}static emptySet(e){return new fu(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof fu)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new fu;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u_{constructor(){this.W_=new bn(ht.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):bt():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class ju{constructor(e,n,r,i,s,a,o,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=o,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,s){const a=[];return n.forEach(o=>{a.push({type:0,doc:o})}),new ju(e,n,fu.emptySet(n),a,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Bm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CL{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class jL{constructor(){this.queries=h_(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=kt(n),s=i.queries;i.queries=h_(),s.forEach((a,o)=>{for(const l of o.j_)l.onError(r)})})(this,new et(Le.ABORTED,"Firestore shutting down"))}}function h_(){return new $u(t=>V3(t),Bm)}async function vS(t,e){const n=kt(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new CL,r=e.J_()?0:1);try{switch(r){case 0:s.z_=await n.onListen(i,!0);break;case 1:s.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(a){const o=U2(a,`Initialization of query '${Mc(e.query)}' failed`);return void e.onError(o)}n.queries.set(i,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&B2(n)}async function yS(t,e){const n=kt(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const a=s.j_.indexOf(e);a>=0&&(s.j_.splice(a,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function LL(t,e){const n=kt(t);let r=!1;for(const i of e){const s=i.query,a=n.queries.get(s);if(a){for(const o of a.j_)o.X_(i)&&(r=!0);a.z_=i}}r&&B2(n)}function RL(t,e,n){const r=kt(t),i=r.queries.get(e);if(i)for(const s of i.j_)s.onError(n);r.queries.delete(e)}function B2(t){t.Y_.forEach(e=>{e.next()})}var H0,d_;(d_=H0||(H0={})).ea="default",d_.Cache="cache";class wS{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new ju(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=ju.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==H0.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _S{constructor(e){this.key=e}}class bS{constructor(e){this.key=e}}class DL{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Rt(),this.mutatedKeys=Rt(),this.Aa=U3(e),this.Ra=new fu(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new u_,i=n?n.Ra:this.Ra;let s=n?n.mutatedKeys:this.mutatedKeys,a=i,o=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,p)=>{const g=i.get(d),m=Km(this.query,p)?p:null,b=!!g&&this.mutatedKeys.has(g.key),x=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let T=!1;g&&m?g.data.isEqual(m.data)?b!==x&&(r.track({type:3,doc:m}),T=!0):this.ga(g,m)||(r.track({type:2,doc:m}),T=!0,(l&&this.Aa(m,l)>0||c&&this.Aa(m,c)<0)&&(o=!0)):!g&&m?(r.track({type:0,doc:m}),T=!0):g&&!m&&(r.track({type:1,doc:g}),T=!0,(l||c)&&(o=!0)),T&&(m?(a=a.add(m),s=x?s.add(d):s.delete(d)):(a=a.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const d=this.query.limitType==="F"?a.last():a.first();a=a.delete(d.key),s=s.delete(d.key),r.track({type:1,doc:d})}return{Ra:a,fa:r,ns:o,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const a=e.fa.G_();a.sort((d,p)=>function(m,b){const x=T=>{switch(T){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return bt()}};return x(m)-x(b)}(d.type,p.type)||this.Aa(d.doc,p.doc)),this.pa(r),i=i!=null&&i;const o=n&&!i?this.ya():[],l=this.da.size===0&&this.current&&!i?1:0,c=l!==this.Ea;return this.Ea=l,a.length!==0||c?{snapshot:new ju(this.query,e.Ra,s,a,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:o}:{wa:o}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new u_,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Rt(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new bS(r))}),this.da.forEach(r=>{e.has(r)||n.push(new _S(r))}),n}ba(e){this.Ta=e.Ts,this.da=Rt();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return ju.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class FL{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class OL{constructor(e){this.key=e,this.va=!1}}class ML{constructor(e,n,r,i,s,a){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.Ca={},this.Fa=new $u(o=>V3(o),Bm),this.Ma=new Map,this.xa=new Set,this.Oa=new bn(ht.comparator),this.Na=new Map,this.La=new j2,this.Ba={},this.ka=new Map,this.qa=Cu.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function VL(t,e,n=!0){const r=kS(t);let i;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await xS(r,e,n,!0),i}async function UL(t,e){const n=kS(t);await xS(n,e,!0,!1)}async function xS(t,e,n,r){const i=await lL(t.localStore,zs(e)),s=i.targetId,a=t.sharedClientState.addLocalQueryTarget(s,n);let o;return r&&(o=await BL(t,e,s,a==="current",i.resumeToken)),t.isPrimaryClient&&n&&hS(t.remoteStore,i),o}async function BL(t,e,n,r,i){t.Ka=(p,g,m)=>async function(x,T,w,N){let C=T.view.ma(w);C.ns&&(C=await a_(x.localStore,T.query,!1).then(({documents:j})=>T.view.ma(j,C)));const F=N&&N.targetChanges.get(T.targetId),Q=N&&N.targetMismatches.get(T.targetId)!=null,B=T.view.applyChanges(C,x.isPrimaryClient,F,Q);return p_(x,T.targetId,B.wa),B.snapshot}(t,p,g,m);const s=await a_(t.localStore,e,!0),a=new DL(e,s.Ts),o=a.ma(s.documents),l=Ud.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=a.applyChanges(o,t.isPrimaryClient,l);p_(t,n,c.wa);const d=new FL(e,n,a);return t.Fa.set(e,d),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),c.snapshot}async function KL(t,e,n){const r=kt(t),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(a=>!Bm(a,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await $0(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&D2(r.remoteStore,i.targetId),W0(r,i.targetId)}).catch(Od)):(W0(r,i.targetId),await $0(r.localStore,i.targetId,!0))}async function qL(t,e){const n=kt(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),D2(n.remoteStore,r.targetId))}async function zL(t,e,n){const r=JL(t);try{const i=await function(a,o){const l=kt(a),c=Xn.now(),d=o.reduce((m,b)=>m.add(b.key),Rt());let p,g;return l.persistence.runTransaction("Locally write mutations","readwrite",m=>{let b=Ra(),x=Rt();return l.cs.getEntries(m,d).next(T=>{b=T,b.forEach((w,N)=>{N.isValidDocument()||(x=x.add(w))})}).next(()=>l.localDocuments.getOverlayedDocuments(m,b)).next(T=>{p=T;const w=[];for(const N of o){const C=dj(N,p.get(N.key).overlayedDocument);C!=null&&w.push(new sl(N.key,C,C3(C.value.mapValue),Ki.exists(!0)))}return l.mutationQueue.addMutationBatch(m,c,w,o)}).next(T=>{g=T;const w=T.applyToLocalDocumentSet(p,x);return l.documentOverlayCache.saveOverlays(m,T.batchId,w)})}).then(()=>({batchId:g.batchId,changes:K3(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,o,l){let c=a.Ba[a.currentUser.toKey()];c||(c=new bn(Ut)),c=c.insert(o,l),a.Ba[a.currentUser.toKey()]=c}(r,i.batchId,n),await Kd(r,i.changes),await Gm(r.remoteStore)}catch(i){const s=U2(i,"Failed to persist write");n.reject(s)}}async function SS(t,e){const n=kt(t);try{const r=await sL(n.localStore,e);e.targetChanges.forEach((i,s)=>{const a=n.Na.get(s);a&&(Yt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?a.va=!0:i.modifiedDocuments.size>0?Yt(a.va):i.removedDocuments.size>0&&(Yt(a.va),a.va=!1))}),await Kd(n,r,e)}catch(r){await Od(r)}}function f_(t,e,n){const r=kt(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach((s,a)=>{const o=a.view.Z_(e);o.snapshot&&i.push(o.snapshot)}),function(a,o){const l=kt(a);l.onlineState=o;let c=!1;l.queries.forEach((d,p)=>{for(const g of p.j_)g.Z_(o)&&(c=!0)}),c&&B2(l)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function $L(t,e,n){const r=kt(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),s=i&&i.key;if(s){let a=new bn(ht.comparator);a=a.insert(s,Pr.newNoDocument(s,Et.min()));const o=Rt().add(s),l=new $m(Et.min(),new Map,new bn(Ut),a,o);await SS(r,l),r.Oa=r.Oa.remove(s),r.Na.delete(e),K2(r)}else await $0(r.localStore,e,!1).then(()=>W0(r,e,n)).catch(Od)}async function HL(t,e){const n=kt(t),r=e.batch.batchId;try{const i=await iL(n.localStore,e);AS(n,r,null),NS(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Kd(n,i)}catch(i){await Od(i)}}async function WL(t,e,n){const r=kt(t);try{const i=await function(a,o){const l=kt(a);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let d;return l.mutationQueue.lookupMutationBatch(c,o).next(p=>(Yt(p!==null),d=p.keys(),l.mutationQueue.removeMutationBatch(c,p))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,d,o)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,d)).next(()=>l.localDocuments.getDocuments(c,d))})}(r.localStore,e);AS(r,e,n),NS(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Kd(r,i)}catch(i){await Od(i)}}function NS(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function AS(t,e,n){const r=kt(t);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function W0(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||ES(t,r)})}function ES(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(D2(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),K2(t))}function p_(t,e,n){for(const r of n)r instanceof _S?(t.La.addReference(r.key,e),GL(t,r)):r instanceof bS?(st("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||ES(t,r.key)):bt()}function GL(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(st("SyncEngine","New document in limbo: "+n),t.xa.add(r),K2(t))}function K2(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new ht(cn.fromString(e)),r=t.qa.next();t.Na.set(r,new OL(n)),t.Oa=t.Oa.insert(n,r),hS(t.remoteStore,new jo(zs(E2(n.path)),r,"TargetPurposeLimboResolution",_2.oe))}}async function Kd(t,e,n){const r=kt(t),i=[],s=[],a=[];r.Fa.isEmpty()||(r.Fa.forEach((o,l)=>{a.push(r.Ka(l,e,n).then(c=>{var d;if((c||n)&&r.isPrimaryClient){const p=c?!c.fromCache:(d=n==null?void 0:n.targetChanges.get(l.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(l.targetId,p?"current":"not-current")}if(c){i.push(c);const p=R2.Wi(l.targetId,c);s.push(p)}}))}),await Promise.all(a),r.Ca.d_(i),await async function(l,c){const d=kt(l);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>Ue.forEach(c,g=>Ue.forEach(g.$i,m=>d.persistence.referenceDelegate.addReference(p,g.targetId,m)).next(()=>Ue.forEach(g.Ui,m=>d.persistence.referenceDelegate.removeReference(p,g.targetId,m)))))}catch(p){if(!Md(p))throw p;st("LocalStore","Failed to update sequence numbers: "+p)}for(const p of c){const g=p.targetId;if(!p.fromCache){const m=d.os.get(g),b=m.snapshotVersion,x=m.withLastLimboFreeSnapshotVersion(b);d.os=d.os.insert(g,x)}}}(r.localStore,s))}async function QL(t,e){const n=kt(t);if(!n.currentUser.isEqual(e)){st("SyncEngine","User change. New user:",e.toKey());const r=await oS(n.localStore,e);n.currentUser=e,function(s,a){s.ka.forEach(o=>{o.forEach(l=>{l.reject(new et(Le.CANCELLED,a))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Kd(n,r.hs)}}function YL(t,e){const n=kt(t),r=n.Na.get(e);if(r&&r.va)return Rt().add(r.key);{let i=Rt();const s=n.Ma.get(e);if(!s)return i;for(const a of s){const o=n.Fa.get(a);i=i.unionWith(o.view.Va)}return i}}function kS(t){const e=kt(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=SS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=YL.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=$L.bind(null,e),e.Ca.d_=LL.bind(null,e.eventManager),e.Ca.$a=RL.bind(null,e.eventManager),e}function JL(t){const e=kt(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=HL.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=WL.bind(null,e),e}class im{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Hm(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return rL(this.persistence,new tL,e.initialUser,this.serializer)}Ga(e){return new Xj(L2.Zr,this.serializer)}Wa(e){return new uL}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}im.provider={build:()=>new im};class G0{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>f_(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=QL.bind(null,this.syncEngine),await PL(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new jL}()}createDatastore(e){const n=Hm(e.databaseInfo.databaseId),r=function(s){return new pL(s)}(e.databaseInfo);return function(s,a,o,l){return new vL(s,a,o,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,a,o){return new wL(r,i,s,a,o)}(this.localStore,this.datastore,e.asyncQueue,n=>f_(this.syncEngine,n,0),function(){return l_.D()?new l_:new hL}())}createSyncEngine(e,n){return function(i,s,a,o,l,c,d){const p=new ML(i,s,a,o,l,c);return d&&(p.Qa=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=kt(i);st("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await Bd(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}G0.provider={build:()=>new G0};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TS{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):La("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XL{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Tr.UNAUTHENTICATED,this.clientId=T3.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async a=>{st("FirestoreClient","Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(r,a=>(st("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Aa;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=U2(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function h1(t,e){t.asyncQueue.verifyOperationInProgress(),st("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await oS(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function m_(t,e){t.asyncQueue.verifyOperationInProgress();const n=await ZL(t);st("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>c_(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>c_(e.remoteStore,i)),t._onlineComponents=e}async function ZL(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){st("FirestoreClient","Using user provided OfflineComponentProvider");try{await h1(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===Le.FAILED_PRECONDITION||i.code===Le.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;ku("Error using user provided cache. Falling back to memory cache: "+n),await h1(t,new im)}}else st("FirestoreClient","Using default OfflineComponentProvider"),await h1(t,new im);return t._offlineComponents}async function IS(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(st("FirestoreClient","Using user provided OnlineComponentProvider"),await m_(t,t._uninitializedComponentsProvider._online)):(st("FirestoreClient","Using default OnlineComponentProvider"),await m_(t,new G0))),t._onlineComponents}function eR(t){return IS(t).then(e=>e.syncEngine)}async function PS(t){const e=await IS(t),n=e.eventManager;return n.onListen=VL.bind(null,e.syncEngine),n.onUnlisten=KL.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=UL.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=qL.bind(null,e.syncEngine),n}function tR(t,e,n={}){const r=new Aa;return t.asyncQueue.enqueueAndForget(async()=>function(s,a,o,l,c){const d=new TS({next:g=>{d.Za(),a.enqueueAndForget(()=>yS(s,p));const m=g.docs.has(o);!m&&g.fromCache?c.reject(new et(Le.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&g.fromCache&&l&&l.source==="server"?c.reject(new et(Le.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(g)},error:g=>c.reject(g)}),p=new wS(E2(o.path),d,{includeMetadataChanges:!0,_a:!0});return vS(s,p)}(await PS(t),t.asyncQueue,e,n,r)),r.promise}function nR(t,e,n={}){const r=new Aa;return t.asyncQueue.enqueueAndForget(async()=>function(s,a,o,l,c){const d=new TS({next:g=>{d.Za(),a.enqueueAndForget(()=>yS(s,p)),g.fromCache&&l.source==="server"?c.reject(new et(Le.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(g)},error:g=>c.reject(g)}),p=new wS(o,d,{includeMetadataChanges:!0,_a:!0});return vS(s,p)}(await PS(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CS(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g_=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jS(t,e,n){if(!n)throw new et(Le.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function rR(t,e,n,r){if(e===!0&&r===!0)throw new et(Le.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function v_(t){if(!ht.isDocumentKey(t))throw new et(Le.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function y_(t){if(ht.isDocumentKey(t))throw new et(Le.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Qm(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":bt()}function gs(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new et(Le.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Qm(t);throw new et(Le.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w_{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new et(Le.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new et(Le.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}rR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=CS((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new et(Le.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new et(Le.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new et(Le.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ym{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new w_({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new et(Le.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new et(Le.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new w_(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new b8;switch(r.type){case"firstParty":return new A8(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new et(Le.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=g_.get(n);r&&(st("ComponentProvider","Removing Datastore"),g_.delete(n),r.terminate())}(this),Promise.resolve()}}function iR(t,e,n,r={}){var i;const s=(t=gs(t,Ym))._getSettings(),a=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==a&&ku("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:a,ssl:!1})),r.mockUserToken){let o,l;if(typeof r.mockUserToken=="string")o=r.mockUserToken,l=Tr.MOCK_USER;else{o=Fx(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new et(Le.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Tr(c)}t._authCredentials=new x8(new k3(o,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ac{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ac(this.firestore,e,this._query)}}class zr{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ho(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new zr(this.firestore,e,this._key)}}class Ho extends ac{constructor(e,n,r){super(e,n,E2(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new zr(this.firestore,null,new ht(e))}withConverter(e){return new Ho(this.firestore,e,this._path)}}function xn(t,e,...n){if(t=_n(t),jS("collection","path",e),t instanceof Ym){const r=cn.fromString(e,...n);return y_(r),new Ho(t,null,r)}{if(!(t instanceof zr||t instanceof Ho))throw new et(Le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(cn.fromString(e,...n));return y_(r),new Ho(t.firestore,null,r)}}function mn(t,e,...n){if(t=_n(t),arguments.length===1&&(e=T3.newId()),jS("doc","path",e),t instanceof Ym){const r=cn.fromString(e,...n);return v_(r),new zr(t,null,new ht(r))}{if(!(t instanceof zr||t instanceof Ho))throw new et(Le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(cn.fromString(e,...n));return v_(r),new zr(t.firestore,t instanceof Ho?t.converter:null,new ht(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new cS(this,"async_queue_retry"),this.Vu=()=>{const r=u1();r&&st("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=u1();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=u1();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Aa;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Md(e))throw e;st("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(a){let o=a.message||"";return a.stack&&(o=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),o}(r);throw La("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const i=V2.createAndSchedule(this,e,n,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&bt()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}class oc extends Ym{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new __,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new __(e),this._firestoreClient=void 0,await e}}}function sR(t,e){const n=typeof t=="object"?t:c2(),r=typeof t=="string"?t:"(default)",i=Dm(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=Lx("firestore");s&&iR(i,...s)}return i}function q2(t){if(t._terminated)throw new et(Le.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||aR(t),t._firestoreClient}function aR(t){var e,n,r;const i=t._freezeSettings(),s=function(o,l,c,d){return new M8(o,l,c,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,CS(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new XL(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(o){const l=o==null?void 0:o._online.build();return{_offline:o==null?void 0:o._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Lu(gr.fromBase64String(e))}catch(n){throw new et(Le.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Lu(gr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jm{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new et(Le.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new dr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z2{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $2{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new et(Le.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new et(Le.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ut(this._lat,e._lat)||Ut(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H2{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oR=/^__.*__$/;class lR{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new sl(e,this.data,this.fieldMask,n,this.fieldTransforms):new Vd(e,this.data,n,this.fieldTransforms)}}class LS{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new sl(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function RS(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw bt()}}class W2{constructor(e,n,r,i,s,a){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new W2(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return sm(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(RS(this.Cu)&&oR.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class cR{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Hm(e)}Qu(e,n,r,i=!1){return new W2({Cu:e,methodName:n,qu:r,path:dr.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Xm(t){const e=t._freezeSettings(),n=Hm(t._databaseId);return new cR(t._databaseId,!!e.ignoreUndefinedProperties,n)}function DS(t,e,n,r,i,s={}){const a=t.Qu(s.merge||s.mergeFields?2:0,e,n,i);G2("Data must be an object, but it was:",a,r);const o=FS(r,a);let l,c;if(s.merge)l=new bi(a.fieldMask),c=a.fieldTransforms;else if(s.mergeFields){const d=[];for(const p of s.mergeFields){const g=Q0(e,p,n);if(!a.contains(g))throw new et(Le.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);MS(d,g)||d.push(g)}l=new bi(d),c=a.fieldTransforms.filter(p=>l.covers(p.field))}else l=null,c=a.fieldTransforms;return new lR(new ii(o),l,c)}class Zm extends z2{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Zm}}function uR(t,e,n,r){const i=t.Qu(1,e,n);G2("Data must be an object, but it was:",i,r);const s=[],a=ii.empty();ic(r,(l,c)=>{const d=Q2(e,l,n);c=_n(c);const p=i.Nu(d);if(c instanceof Zm)s.push(d);else{const g=qd(c,p);g!=null&&(s.push(d),a.set(d,g))}});const o=new bi(s);return new LS(a,o,i.fieldTransforms)}function hR(t,e,n,r,i,s){const a=t.Qu(1,e,n),o=[Q0(e,r,n)],l=[i];if(s.length%2!=0)throw new et(Le.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<s.length;g+=2)o.push(Q0(e,s[g])),l.push(s[g+1]);const c=[],d=ii.empty();for(let g=o.length-1;g>=0;--g)if(!MS(c,o[g])){const m=o[g];let b=l[g];b=_n(b);const x=a.Nu(m);if(b instanceof Zm)c.push(m);else{const T=qd(b,x);T!=null&&(c.push(m),d.set(m,T))}}const p=new bi(c);return new LS(d,p,a.fieldTransforms)}function dR(t,e,n,r=!1){return qd(n,t.Qu(r?4:3,e))}function qd(t,e){if(OS(t=_n(t)))return G2("Unsupported field value:",e,t),FS(t,e);if(t instanceof z2)return function(r,i){if(!RS(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const s=[];let a=0;for(const o of r){let l=qd(o,i.Lu(a));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),a++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=_n(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return aj(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Xn.fromDate(r);return{timestampValue:nm(i.serializer,s)}}if(r instanceof Xn){const s=new Xn(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:nm(i.serializer,s)}}if(r instanceof $2)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Lu)return{bytesValue:eS(i.serializer,r._byteString)};if(r instanceof zr){const s=i.databaseId,a=r.firestore._databaseId;if(!a.isEqual(s))throw i.Bu(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:C2(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof H2)return function(a,o){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:a.toArray().map(l=>{if(typeof l!="number")throw o.Bu("VectorValues must only contain numeric values.");return k2(o.serializer,l)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${Qm(r)}`)}(t,e)}function FS(t,e){const n={};return I3(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ic(t,(r,i)=>{const s=qd(i,e.Mu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function OS(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Xn||t instanceof $2||t instanceof Lu||t instanceof zr||t instanceof z2||t instanceof H2)}function G2(t,e,n){if(!OS(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=Qm(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function Q0(t,e,n){if((e=_n(e))instanceof Jm)return e._internalPath;if(typeof e=="string")return Q2(t,e);throw sm("Field path arguments must be of type string or ",t,!1,void 0,n)}const fR=new RegExp("[~\\*/\\[\\]]");function Q2(t,e,n){if(e.search(fR)>=0)throw sm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Jm(...e.split("."))._internalPath}catch{throw sm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function sm(t,e,n,r,i){const s=r&&!r.isEmpty(),a=i!==void 0;let o=`Function ${e}() called with invalid data`;n&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(s||a)&&(l+=" (found",s&&(l+=` in field ${r}`),a&&(l+=` in document ${i}`),l+=")"),new et(Le.INVALID_ARGUMENT,o+t+l)}function MS(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VS{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new zr(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new pR(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(eg("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class pR extends VS{data(){return super.data()}}function eg(t,e){return typeof e=="string"?Q2(t,e):e instanceof Jm?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mR(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new et(Le.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Y2{}class US extends Y2{}function zd(t,e,...n){let r=[];e instanceof Y2&&r.push(e),r=r.concat(n),function(s){const a=s.filter(l=>l instanceof J2).length,o=s.filter(l=>l instanceof tg).length;if(a>1||a>0&&o>0)throw new et(Le.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class tg extends US{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new tg(e,n,r)}_apply(e){const n=this._parse(e);return BS(e._query,n),new ac(e.firestore,e.converter,V0(e._query,n))}_parse(e){const n=Xm(e.firestore);return function(s,a,o,l,c,d,p){let g;if(c.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new et(Le.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){x_(p,d);const m=[];for(const b of p)m.push(b_(l,s,b));g={arrayValue:{values:m}}}else g=b_(l,s,p)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||x_(p,d),g=dR(o,a,p,d==="in"||d==="not-in");return Hn.create(c,d,g)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function ng(t,e,n){const r=e,i=eg("where",t);return tg._create(i,r,n)}class J2 extends Y2{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new J2(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:ms.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let a=i;const o=s.getFlattenedFilters();for(const l of o)BS(a,l),a=V0(a,l)}(e._query,n),new ac(e.firestore,e.converter,V0(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class X2 extends US{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new X2(e,n)}_apply(e){const n=function(i,s,a){if(i.startAt!==null)throw new et(Le.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new et(Le.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Sd(s,a)}(e._query,this._field,this._direction);return new ac(e.firestore,e.converter,function(i,s){const a=i.explicitOrderBy.concat([s]);return new zu(i.path,i.collectionGroup,a,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function Z2(t,e="asc"){const n=e,r=eg("orderBy",t);return X2._create(r,n)}function b_(t,e,n){if(typeof(n=_n(n))=="string"){if(n==="")throw new et(Le.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!M3(e)&&n.indexOf("/")!==-1)throw new et(Le.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(cn.fromString(n));if(!ht.isDocumentKey(r))throw new et(Le.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return qw(t,new ht(r))}if(n instanceof zr)return qw(t,n._key);throw new et(Le.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Qm(n)}.`)}function x_(t,e){if(!Array.isArray(t)||t.length===0)throw new et(Le.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function BS(t,e){const n=function(i,s){for(const a of i)for(const o of a.getFlattenedFilters())if(s.indexOf(o.op)>=0)return o.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new et(Le.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new et(Le.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class gR{convertValue(e,n="none"){switch(Xl(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Rn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Jl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw bt()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return ic(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(a=>Rn(a.doubleValue));return new H2(s)}convertGeoPoint(e){return new $2(Rn(e.latitude),Rn(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=x2(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(_d(e));default:return null}}convertTimestamp(e){const n=Jo(e);return new Xn(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=cn.fromString(e);Yt(aS(r));const i=new bd(r.get(1),r.get(3)),s=new ht(r.popFirst(5));return i.isEqual(n)||La(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KS(t,e,n){let r;return r=t?t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rh{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class qS extends VS{constructor(e,n,r,i,s,a){super(e,n,r,i,a),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new hp(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(eg("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class hp extends qS{data(e={}){return super.data(e)}}class vR{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Rh(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new hp(this._firestore,this._userDataWriter,r.key,r,new Rh(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new et(Le.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let a=0;return i._snapshot.docChanges.map(o=>{const l=new hp(i._firestore,i._userDataWriter,o.doc.key,o.doc,new Rh(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);return o.doc,{type:"added",doc:l,oldIndex:-1,newIndex:a++}})}{let a=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(o=>s||o.type!==3).map(o=>{const l=new hp(i._firestore,i._userDataWriter,o.doc.key,o.doc,new Rh(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,d=-1;return o.type!==0&&(c=a.indexOf(o.doc.key),a=a.delete(o.doc.key)),o.type!==1&&(a=a.add(o.doc),d=a.indexOf(o.doc.key)),{type:yR(o.type),doc:l,oldIndex:c,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function yR(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return bt()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rg(t){t=gs(t,zr);const e=gs(t.firestore,oc);return tR(q2(e),t._key).then(n=>wR(e,t,n))}class zS extends gR{constructor(e){super(),this.firestore=e}convertBytes(e){return new Lu(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new zr(this.firestore,null,n)}}function ci(t){t=gs(t,ac);const e=gs(t.firestore,oc),n=q2(e),r=new zS(e);return mR(t._query),nR(n,t._query).then(i=>new vR(e,r,t,i))}function Y0(t,e,n){t=gs(t,zr);const r=gs(t.firestore,oc),i=KS(t.converter,e);return ig(r,[DS(Xm(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Ki.none())])}function Da(t,e,n,...r){t=gs(t,zr);const i=gs(t.firestore,oc),s=Xm(i);let a;return a=typeof(e=_n(e))=="string"||e instanceof Jm?hR(s,"updateDoc",t._key,e,n,r):uR(s,"updateDoc",t._key,e),ig(i,[a.toMutation(t._key,Ki.exists(!0))])}function Ma(t){return ig(gs(t.firestore,oc),[new T2(t._key,Ki.none())])}function Va(t,e){const n=gs(t.firestore,oc),r=mn(t),i=KS(t.converter,e);return ig(n,[DS(Xm(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Ki.exists(!1))]).then(()=>r)}function ig(t,e){return function(r,i){const s=new Aa;return r.asyncQueue.enqueueAndForget(async()=>zL(await eR(r),i,s)),s.promise}(q2(t),e)}function wR(t,e,n){const r=n.docs.get(e._key),i=new zS(t);return new qS(t,i,e._key,r,new Rh(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){qu=i})(nc),Gl(new Qo("firestore",(r,{instanceIdentifier:i,options:s})=>{const a=r.getProvider("app").getImmediate(),o=new oc(new S8(r.getProvider("auth-internal")),new k8(r.getProvider("app-check-internal")),function(c,d){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new et(Le.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new bd(c.options.projectId,d)}(a,i),a);return s=Object.assign({useFetchStreams:n},s),o._setSettings(s),o},"PUBLIC").setMultipleInstances(!0)),Bs(Mw,"4.7.3",e),Bs(Mw,"4.7.3","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $S="firebasestorage.googleapis.com",HS="storageBucket",_R=2*60*1e3,bR=10*60*1e3,xR=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sn extends Qs{constructor(e,n,r=0){super(d1(e),`Firebase Storage: ${n} (${d1(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Sn.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return d1(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var dn;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(dn||(dn={}));function d1(t){return"storage/"+t}function ey(){const t="An unknown error occurred, please check the error payload for server response.";return new Sn(dn.UNKNOWN,t)}function SR(t){return new Sn(dn.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function NR(t){return new Sn(dn.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function AR(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Sn(dn.UNAUTHENTICATED,t)}function ER(){return new Sn(dn.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function kR(t){return new Sn(dn.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function WS(){return new Sn(dn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function GS(){return new Sn(dn.CANCELED,"User canceled the upload/download.")}function TR(t){return new Sn(dn.INVALID_URL,"Invalid URL '"+t+"'.")}function IR(t){return new Sn(dn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function PR(){return new Sn(dn.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+HS+"' property when initializing the app?")}function QS(){return new Sn(dn.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function CR(){return new Sn(dn.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function jR(){return new Sn(dn.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function LR(t){return new Sn(dn.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function J0(t){return new Sn(dn.INVALID_ARGUMENT,t)}function YS(){return new Sn(dn.APP_DELETED,"The Firebase app was deleted.")}function RR(t){return new Sn(dn.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Qh(t,e){return new Sn(dn.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function xh(t){throw new Sn(dn.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=xi.makeFromUrl(e,n)}catch{return new xi(e,"")}if(r.path==="")return r;throw IR(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(F){F.path.charAt(F.path.length-1)==="/"&&(F.path_=F.path_.slice(0,-1))}const a="(/(.*))?$",o=new RegExp("^gs://"+i+a,"i"),l={bucket:1,path:3};function c(F){F.path_=decodeURIComponent(F.path)}const d="v[A-Za-z0-9_]+",p=n.replace(/[.]/g,"\\."),g="(/([^?#]*).*)?$",m=new RegExp(`^https?://${p}/${d}/b/${i}/o${g}`,"i"),b={bucket:1,path:3},x=n===$S?"(?:storage.googleapis.com|storage.cloud.google.com)":n,T="([^?#]*)",w=new RegExp(`^https?://${x}/${i}/${T}`,"i"),C=[{regex:o,indices:l,postModify:s},{regex:m,indices:b,postModify:c},{regex:w,indices:{bucket:1,path:2},postModify:c}];for(let F=0;F<C.length;F++){const Q=C[F],B=Q.regex.exec(e);if(B){const j=B[Q.indices.bucket];let y=B[Q.indices.path];y||(y=""),r=new xi(j,y),Q.postModify(r);break}}if(r==null)throw TR(e);return r}}class DR{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FR(t,e,n){let r=1,i=null,s=null,a=!1,o=0;function l(){return o===2}let c=!1;function d(...T){c||(c=!0,e.apply(null,T))}function p(T){i=setTimeout(()=>{i=null,t(m,l())},T)}function g(){s&&clearTimeout(s)}function m(T,...w){if(c){g();return}if(T){g(),d.call(null,T,...w);return}if(l()||a){g(),d.call(null,T,...w);return}r<64&&(r*=2);let C;o===1?(o=2,C=0):C=(r+Math.random())*1e3,p(C)}let b=!1;function x(T){b||(b=!0,g(),!c&&(i!==null?(T||(o=2),clearTimeout(i),p(0)):T||(o=1)))}return p(0),s=setTimeout(()=>{a=!0,x(!0)},n),x}function OR(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MR(t){return t!==void 0}function VR(t){return typeof t=="function"}function UR(t){return typeof t=="object"&&!Array.isArray(t)}function sg(t){return typeof t=="string"||t instanceof String}function S_(t){return ty()&&t instanceof Blob}function ty(){return typeof Blob<"u"}function N_(t,e,n,r){if(r<e)throw J0(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw J0(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wu(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function JS(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var Ul;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Ul||(Ul={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XS(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BR{constructor(e,n,r,i,s,a,o,l,c,d,p,g=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=a,this.callback_=o,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=d,this.connectionFactory_=p,this.retry=g,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((m,b)=>{this.resolve_=m,this.reject_=b,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new Vf(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const a=o=>{const l=o.loaded,c=o.lengthComputable?o.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&s.addUploadProgressListener(a),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(a),this.pendingConnection_=null;const o=s.getErrorCode()===Ul.NO_ERROR,l=s.getStatus();if(!o||XS(l,this.additionalRetryCodes_)&&this.retry){const d=s.getErrorCode()===Ul.ABORT;r(!1,new Vf(!1,null,d));return}const c=this.successCodes_.indexOf(l)!==-1;r(!0,new Vf(c,s))})},n=(r,i)=>{const s=this.resolve_,a=this.reject_,o=i.connection;if(i.wasSuccessCode)try{const l=this.callback_(o,o.getResponse());MR(l)?s(l):s()}catch(l){a(l)}else if(o!==null){const l=ey();l.serverResponse=o.getErrorText(),this.errorCallback_?a(this.errorCallback_(o,l)):a(l)}else if(i.canceled){const l=this.appDelete_?YS():GS();a(l)}else{const l=WS();a(l)}};this.canceled_?n(!1,new Vf(!1,null,!0)):this.backoffId_=FR(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&OR(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Vf{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function KR(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function qR(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function zR(t,e){e&&(t["X-Firebase-GMPID"]=e)}function $R(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function HR(t,e,n,r,i,s,a=!0){const o=JS(t.urlParams),l=t.url+o,c=Object.assign({},t.headers);return zR(c,e),KR(c,n),qR(c,s),$R(c,r),new BR(l,t.method,c,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WR(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function GR(...t){const e=WR();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(ty())return new Blob(t);throw new Sn(dn.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function QR(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YR(t){if(typeof atob>"u")throw LR("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Os={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class f1{constructor(e,n){this.data=e,this.contentType=n||null}}function JR(t,e){switch(t){case Os.RAW:return new f1(ZS(e));case Os.BASE64:case Os.BASE64URL:return new f1(eN(t,e));case Os.DATA_URL:return new f1(ZR(e),e7(e))}throw ey()}function ZS(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const s=r,a=t.charCodeAt(++n);r=65536|(s&1023)<<10|a&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function XR(t){let e;try{e=decodeURIComponent(t)}catch{throw Qh(Os.DATA_URL,"Malformed data URL.")}return ZS(e)}function eN(t,e){switch(t){case Os.BASE64:{const i=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(i||s)throw Qh(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Os.BASE64URL:{const i=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(i||s)throw Qh(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=YR(e)}catch(i){throw i.message.includes("polyfill")?i:Qh(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class tN{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Qh(Os.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=t7(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function ZR(t){const e=new tN(t);return e.base64?eN(Os.BASE64,e.rest):XR(e.rest)}function e7(t){return new tN(t).contentType}function t7(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class To{constructor(e,n){let r=0,i="";S_(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(S_(this.data_)){const r=this.data_,i=QR(r,e,n);return i===null?null:new To(i)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new To(r,!0)}}static getBlob(...e){if(ty()){const n=e.map(r=>r instanceof To?r.data_:r);return new To(GR.apply(null,n))}else{const n=e.map(a=>sg(a)?JR(Os.RAW,a).data:a.data_);let r=0;n.forEach(a=>{r+=a.byteLength});const i=new Uint8Array(r);let s=0;return n.forEach(a=>{for(let o=0;o<a.length;o++)i[s++]=a[o]}),new To(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nN(t){let e;try{e=JSON.parse(t)}catch{return null}return UR(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n7(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function r7(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function rN(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i7(t,e){return e}class Br{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||i7}}let Uf=null;function s7(t){return!sg(t)||t.length<2?t:rN(t)}function iN(){if(Uf)return Uf;const t=[];t.push(new Br("bucket")),t.push(new Br("generation")),t.push(new Br("metageneration")),t.push(new Br("name","fullPath",!0));function e(s,a){return s7(a)}const n=new Br("name");n.xform=e,t.push(n);function r(s,a){return a!==void 0?Number(a):a}const i=new Br("size");return i.xform=r,t.push(i),t.push(new Br("timeCreated")),t.push(new Br("updated")),t.push(new Br("md5Hash",null,!0)),t.push(new Br("cacheControl",null,!0)),t.push(new Br("contentDisposition",null,!0)),t.push(new Br("contentEncoding",null,!0)),t.push(new Br("contentLanguage",null,!0)),t.push(new Br("contentType",null,!0)),t.push(new Br("metadata","customMetadata",!0)),Uf=t,Uf}function a7(t,e){function n(){const r=t.bucket,i=t.fullPath,s=new xi(r,i);return e._makeStorageReference(s)}Object.defineProperty(t,"ref",{get:n})}function o7(t,e,n){const r={};r.type="file";const i=n.length;for(let s=0;s<i;s++){const a=n[s];r[a.local]=a.xform(r,e[a.server])}return a7(r,t),r}function sN(t,e,n){const r=nN(e);return r===null?null:o7(t,r,n)}function l7(t,e,n,r){const i=nN(e);if(i===null||!sg(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const a=encodeURIComponent;return s.split(",").map(c=>{const d=t.bucket,p=t.fullPath,g="/b/"+a(d)+"/o/"+a(p),m=Wu(g,n,r),b=JS({alt:"media",token:c});return m+b})[0]}function aN(t,e){const n={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(n[s.server]=t[s.local])}return JSON.stringify(n)}class lc{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ea(t){if(!t)throw ey()}function ny(t,e){function n(r,i){const s=sN(t,i,e);return Ea(s!==null),s}return n}function c7(t,e){function n(r,i){const s=sN(t,i,e);return Ea(s!==null),l7(s,i,t.host,t._protocol)}return n}function $d(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=ER():i=AR():n.getStatus()===402?i=NR(t.bucket):n.getStatus()===403?i=kR(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function ry(t){const e=$d(t);function n(r,i){let s=e(r,i);return r.getStatus()===404&&(s=SR(t.path)),s.serverResponse=i.serverResponse,s}return n}function u7(t,e,n){const r=e.fullServerUrl(),i=Wu(r,t.host,t._protocol),s="GET",a=t.maxOperationRetryTime,o=new lc(i,s,ny(t,n),a);return o.errorHandler=ry(e),o}function h7(t,e,n){const r=e.fullServerUrl(),i=Wu(r,t.host,t._protocol),s="GET",a=t.maxOperationRetryTime,o=new lc(i,s,c7(t,n),a);return o.errorHandler=ry(e),o}function d7(t,e){const n=e.fullServerUrl(),r=Wu(n,t.host,t._protocol),i="DELETE",s=t.maxOperationRetryTime;function a(l,c){}const o=new lc(r,i,a,s);return o.successCodes=[200,204],o.errorHandler=ry(e),o}function f7(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function oN(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=f7(null,e)),r}function p7(t,e,n,r,i){const s=e.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"};function o(){let C="";for(let F=0;F<2;F++)C=C+Math.random().toString().slice(2);return C}const l=o();a["Content-Type"]="multipart/related; boundary="+l;const c=oN(e,r,i),d=aN(c,n),p="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+d+`\r
--`+l+`\r
Content-Type: `+c.contentType+`\r
\r
`,g=`\r
--`+l+"--",m=To.getBlob(p,r,g);if(m===null)throw QS();const b={name:c.fullPath},x=Wu(s,t.host,t._protocol),T="POST",w=t.maxUploadRetryTime,N=new lc(x,T,ny(t,n),w);return N.urlParams=b,N.headers=a,N.body=m.uploadData(),N.errorHandler=$d(e),N}class am{constructor(e,n,r,i){this.current=e,this.total=n,this.finalized=!!r,this.metadata=i||null}}function iy(t,e){let n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch{Ea(!1)}return Ea(!!n&&(e||["active"]).indexOf(n)!==-1),n}function m7(t,e,n,r,i){const s=e.bucketOnlyServerUrl(),a=oN(e,r,i),o={name:a.fullPath},l=Wu(s,t.host,t._protocol),c="POST",d={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":a.contentType,"Content-Type":"application/json; charset=utf-8"},p=aN(a,n),g=t.maxUploadRetryTime;function m(x){iy(x);let T;try{T=x.getResponseHeader("X-Goog-Upload-URL")}catch{Ea(!1)}return Ea(sg(T)),T}const b=new lc(l,c,m,g);return b.urlParams=o,b.headers=d,b.body=p,b.errorHandler=$d(e),b}function g7(t,e,n,r){const i={"X-Goog-Upload-Command":"query"};function s(c){const d=iy(c,["active","final"]);let p=null;try{p=c.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Ea(!1)}p||Ea(!1);const g=Number(p);return Ea(!isNaN(g)),new am(g,r.size(),d==="final")}const a="POST",o=t.maxUploadRetryTime,l=new lc(n,a,s,o);return l.headers=i,l.errorHandler=$d(e),l}const A_=256*1024;function v7(t,e,n,r,i,s,a,o){const l=new am(0,0);if(a?(l.current=a.current,l.total=a.total):(l.current=0,l.total=r.size()),r.size()!==l.total)throw CR();const c=l.total-l.current;let d=c;i>0&&(d=Math.min(d,i));const p=l.current,g=p+d;let m="";d===0?m="finalize":c===d?m="upload, finalize":m="upload";const b={"X-Goog-Upload-Command":m,"X-Goog-Upload-Offset":`${l.current}`},x=r.slice(p,g);if(x===null)throw QS();function T(F,Q){const B=iy(F,["active","final"]),j=l.current+d,y=r.size();let S;return B==="final"?S=ny(e,s)(F,Q):S=null,new am(j,y,B==="final",S)}const w="POST",N=e.maxUploadRetryTime,C=new lc(n,w,T,N);return C.headers=b,C.body=x.uploadData(),C.progressCallback=o||null,C.errorHandler=$d(t),C}const ti={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function p1(t){switch(t){case"running":case"pausing":case"canceling":return ti.RUNNING;case"paused":return ti.PAUSED;case"success":return ti.SUCCESS;case"canceled":return ti.CANCELED;case"error":return ti.ERROR;default:return ti.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y7{constructor(e,n,r){if(VR(e)||n!=null||r!=null)this.next=e,this.error=n??void 0,this.complete=r??void 0;else{const s=e;this.next=s.next,this.error=s.error,this.complete=s.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dc(t){return(...e)=>{Promise.resolve().then(()=>t(...e))}}class w7{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Ul.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Ul.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Ul.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i){if(this.sent_)throw xh("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw xh("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw xh("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw xh("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw xh("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class _7 extends w7{initXhr(){this.xhr_.responseType="text"}}function Pl(){return new _7}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b7{constructor(e,n,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=n,this._metadata=r,this._mappings=iN(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals(dn.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const s=this.isExponentialBackoffExpired();if(XS(i.status,[]))if(s)i=WS();else{this.sleepTime=Math.max(this.sleepTime*2,xR),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals(dn.CANCELED)?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,s)=>{this._resolve=i,this._reject=s,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return n=>this._updateProgress(e+n)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,r])=>{switch(this._state){case"running":e(n,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,n)=>{const r=m7(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Pl,e,n);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((n,r)=>{const i=g7(this._ref.storage,this._ref._location,e,this._blob),s=this._ref.storage._makeRequest(i,Pl,n,r);this._request=s,s.getPromise().then(a=>{a=a,this._request=void 0,this._updateProgress(a.current),this._needToFetchStatus=!1,a.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=A_*this._chunkMultiplier,n=new am(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,s)=>{let a;try{a=v7(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,n,this._makeProgressCallback())}catch(l){this._error=l,this._transition("error");return}const o=this._ref.storage._makeRequest(a,Pl,i,s,!1);this._request=o,o.getPromise().then(l=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(l.current),l.finalized?(this._metadata=l.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){A_*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,n)=>{const r=u7(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,Pl,e,n);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,n)=>{const r=p7(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Pl,e,n);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const n=this._transferred;this._transferred=e,this._transferred!==n&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const n=this._state==="paused";this._state=e,n&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=GS(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=p1(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,n,r,i){const s=new y7(n||void 0,r||void 0,i||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(e,n){return this._promise.then(e,n)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const n=this._observers.indexOf(e);n!==-1&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(p1(this._state)){case ti.SUCCESS:Dc(this._resolve.bind(null,this.snapshot))();break;case ti.CANCELED:case ti.ERROR:const n=this._reject;Dc(n.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(p1(this._state)){case ti.RUNNING:case ti.PAUSED:e.next&&Dc(e.next.bind(e,this.snapshot))();break;case ti.SUCCESS:e.complete&&Dc(e.complete.bind(e))();break;case ti.CANCELED:case ti.ERROR:e.error&&Dc(e.error.bind(e,this._error))();break;default:e.error&&Dc(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zl{constructor(e,n){this._service=e,n instanceof xi?this._location=n:this._location=xi.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Zl(e,n)}get root(){const e=new xi(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return rN(this._location.path)}get storage(){return this._service}get parent(){const e=n7(this._location.path);if(e===null)return null;const n=new xi(this._location.bucket,e);return new Zl(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw RR(e)}}function x7(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new b7(t,new To(e),n)}function S7(t){t._throwIfRoot("getDownloadURL");const e=h7(t.storage,t._location,iN());return t.storage.makeRequestWithTokens(e,Pl).then(n=>{if(n===null)throw jR();return n})}function N7(t){t._throwIfRoot("deleteObject");const e=d7(t.storage,t._location);return t.storage.makeRequestWithTokens(e,Pl)}function A7(t,e){const n=r7(t._location.path,e),r=new xi(t._location.bucket,n);return new Zl(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E7(t){return/^[A-Za-z]+:\/\//.test(t)}function k7(t,e){return new Zl(t,e)}function lN(t,e){if(t instanceof sy){const n=t;if(n._bucket==null)throw PR();const r=new Zl(n,n._bucket);return e!=null?lN(r,e):r}else return e!==void 0?A7(t,e):t}function T7(t,e){if(e&&E7(e)){if(t instanceof sy)return k7(t,e);throw J0("To use ref(service, url), the first argument must be a Storage instance.")}else return lN(t,e)}function E_(t,e){const n=e==null?void 0:e[HS];return n==null?null:xi.makeFromBucketSpec(n,t)}function I7(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:Fx(i,t.app.options.projectId))}class sy{constructor(e,n,r,i,s){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=$S,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=_R,this._maxUploadRetryTime=bR,this._requests=new Set,i!=null?this._bucket=xi.makeFromBucketSpec(i,this._host):this._bucket=E_(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=xi.makeFromBucketSpec(this._url,e):this._bucket=E_(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){N_("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){N_("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Zl(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new DR(YS());{const a=HR(e,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const k_="@firebase/storage",T_="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cN="storage";function uN(t,e,n){return t=_n(t),x7(t,e,n)}function hN(t){return t=_n(t),S7(t)}function P7(t){return t=_n(t),N7(t)}function ay(t,e){return t=_n(t),T7(t,e)}function C7(t=c2(),e){t=_n(t);const r=Dm(t,cN).getImmediate({identifier:e}),i=Lx("storage");return i&&j7(r,...i),r}function j7(t,e,n,r={}){I7(t,e,n,r)}function L7(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new sy(n,r,i,e,nc)}function R7(){Gl(new Qo(cN,L7,"PUBLIC").setMultipleInstances(!0)),Bs(k_,T_,""),Bs(k_,T_,"esm2017")}R7();const D7={apiKey:"AIzaSyAcdG_9cM9yzmeMOFx-fhL4QAf9_wM3Yjo",authDomain:"achandymand-145da.firebaseapp.com",projectId:"achandymand-145da",storageBucket:"achandymand-145da.firebasestorage.app",messagingSenderId:"865306374889",appId:"1:865306374889:web:be1bc2500f388596de7678"},oy=Vx(D7),ly=v8(oy),_t=sR(oy),cy=C7(oy);function F7(){const[t,e]=oe.useState(""),[n,r]=oe.useState(""),[i,s]=oe.useState(""),[a,o]=oe.useState(!1),l=Uu(),c=async d=>{d.preventDefault(),s(""),o(!0);try{await nC(ly,t,n),l("/timeregistrering")}catch(p){console.error("Login error:",p);let g="Der opstod en fejl ved login. Prv igen.";p.code==="auth/user-not-found"||p.code==="auth/wrong-password"?g="Forkert brugernavn eller adgangskode.":p.code==="auth/invalid-email"?g="Ugyldig e-mailadresse.":p.code==="auth/too-many-requests"&&(g="For mange forsg. Prv igen senere."),s(g)}finally{o(!1)}};return u.jsx("div",{className:"login-container",children:u.jsxs("div",{className:"login-box",children:[u.jsxs("div",{className:"login-logo",children:[u.jsx("h1",{children:"AC Handymand"}),u.jsx("p",{children:"Timeregistrering System"})]}),u.jsxs("form",{className:"login-form",onSubmit:c,children:[i&&u.jsx("div",{className:"error-message",children:i}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"email",children:"Brugernavn (E-mail)"}),u.jsx("input",{type:"email",id:"email",value:t,onChange:d=>e(d.target.value),required:!0,disabled:a,placeholder:"din@email.dk"})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"password",children:"Adgangskode"}),u.jsx("input",{type:"password",id:"password",value:n,onChange:d=>r(d.target.value),required:!0,disabled:a,placeholder:""})]}),u.jsx("button",{type:"submit",className:"btn-login",disabled:a,children:a?"Logger ind...":"Log ind"})]})]})})}const O7=["Sndag","Mandag","Tirsdag","Onsdag","Torsdag","Fredag","Lrdag"],om=["Januar","Februar","Marts","April","Maj","Juni","Juli","August","September","Oktober","November","December"];function M7(t){return O7[t.getDay()]}function V7(t){const e=t.getDay();return e===0||e===6}function U7(t,e){const n=[];let r=new Date(t,e,20);const i=e===11?0:e+1,s=e===11?t+1:t,a=new Date(s,i,19);for(;r<=a;){const o=`${String(r.getDate()).padStart(2,"0")}/${String(r.getMonth()+1).padStart(2,"0")}/${r.getFullYear()}`;n.push({date:new Date(r),dayOfMonth:r.getDate(),month:r.getMonth(),year:r.getFullYear(),weekday:M7(r),isWeekend:V7(r),formattedDate:o}),r.setDate(r.getDate()+1)}return n}function dN(t){const e=t===11?0:t+1;return`${om[t]} / ${om[e]}`}function fN(t,e){return e===11?`${t} / ${t+1}`:String(t)}function B7(){return om.map((t,e)=>{const n=e===11?0:e+1;return{value:e,label:`${t} / ${om[n]}`}})}const K7="modulepreload",q7=function(t){return"/"+t},I_={},X0=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),o=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));i=Promise.allSettled(n.map(l=>{if(l=q7(l),l in I_)return;I_[l]=!0;const c=l.endsWith(".css"),d=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${d}`))return;const p=document.createElement("link");if(p.rel=c?"stylesheet":K7,c||(p.as="script"),p.crossOrigin="",p.href=l,o&&p.setAttribute("nonce",o),document.head.appendChild(p),c)return new Promise((g,m)=>{p.addEventListener("load",g),p.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return i.then(a=>{for(const o of a||[])o.status==="rejected"&&s(o.reason);return e().catch(s)})};function Gt(t){"@babel/helpers - typeof";return Gt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gt(t)}var Cr=Uint8Array,Si=Uint16Array,uy=Int32Array,ag=new Cr([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),og=new Cr([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Z0=new Cr([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),pN=function(t,e){for(var n=new Si(31),r=0;r<31;++r)n[r]=e+=1<<t[r-1];for(var i=new uy(n[30]),r=1;r<30;++r)for(var s=n[r];s<n[r+1];++s)i[s]=s-n[r]<<5|r;return{b:n,r:i}},mN=pN(ag,2),gN=mN.b,ev=mN.r;gN[28]=258,ev[258]=28;var vN=pN(og,0),z7=vN.b,P_=vN.r,tv=new Si(32768);for(var un=0;un<32768;++un){var yo=(un&43690)>>1|(un&21845)<<1;yo=(yo&52428)>>2|(yo&13107)<<2,yo=(yo&61680)>>4|(yo&3855)<<4,tv[un]=((yo&65280)>>8|(yo&255)<<8)>>1}var Hs=function(t,e,n){for(var r=t.length,i=0,s=new Si(e);i<r;++i)t[i]&&++s[t[i]-1];var a=new Si(e);for(i=1;i<e;++i)a[i]=a[i-1]+s[i-1]<<1;var o;if(n){o=new Si(1<<e);var l=15-e;for(i=0;i<r;++i)if(t[i])for(var c=i<<4|t[i],d=e-t[i],p=a[t[i]-1]++<<d,g=p|(1<<d)-1;p<=g;++p)o[tv[p]>>l]=c}else for(o=new Si(r),i=0;i<r;++i)t[i]&&(o[i]=tv[a[t[i]-1]++]>>15-t[i]);return o},Zo=new Cr(288);for(var un=0;un<144;++un)Zo[un]=8;for(var un=144;un<256;++un)Zo[un]=9;for(var un=256;un<280;++un)Zo[un]=7;for(var un=280;un<288;++un)Zo[un]=8;var Ed=new Cr(32);for(var un=0;un<32;++un)Ed[un]=5;var $7=Hs(Zo,9,0),H7=Hs(Zo,9,1),W7=Hs(Ed,5,0),G7=Hs(Ed,5,1),m1=function(t){for(var e=t[0],n=1;n<t.length;++n)t[n]>e&&(e=t[n]);return e},rs=function(t,e,n){var r=e/8|0;return(t[r]|t[r+1]<<8)>>(e&7)&n},g1=function(t,e){var n=e/8|0;return(t[n]|t[n+1]<<8|t[n+2]<<16)>>(e&7)},hy=function(t){return(t+7)/8|0},yN=function(t,e,n){return(n==null||n>t.length)&&(n=t.length),new Cr(t.subarray(e,n))},Q7=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],ls=function(t,e,n){var r=new Error(e||Q7[t]);if(r.code=t,Error.captureStackTrace&&Error.captureStackTrace(r,ls),!n)throw r;return r},Y7=function(t,e,n,r){var i=t.length,s=0;if(!i||e.f&&!e.l)return n||new Cr(0);var a=!n,o=a||e.i!=2,l=e.i;a&&(n=new Cr(i*3));var c=function(Te){var Re=n.length;if(Te>Re){var Be=new Cr(Math.max(Re*2,Te));Be.set(n),n=Be}},d=e.f||0,p=e.p||0,g=e.b||0,m=e.l,b=e.d,x=e.m,T=e.n,w=i*8;do{if(!m){d=rs(t,p,1);var N=rs(t,p+1,3);if(p+=3,N)if(N==1)m=H7,b=G7,x=9,T=5;else if(N==2){var B=rs(t,p,31)+257,j=rs(t,p+10,15)+4,y=B+rs(t,p+5,31)+1;p+=14;for(var S=new Cr(y),L=new Cr(19),E=0;E<j;++E)L[Z0[E]]=rs(t,p+E*3,7);p+=j*3;for(var I=m1(L),k=(1<<I)-1,M=Hs(L,I,1),E=0;E<y;){var te=M[rs(t,p,k)];p+=te&15;var C=te>>4;if(C<16)S[E++]=C;else{var V=0,U=0;for(C==16?(U=3+rs(t,p,3),p+=2,V=S[E-1]):C==17?(U=3+rs(t,p,7),p+=3):C==18&&(U=11+rs(t,p,127),p+=7);U--;)S[E++]=V}}var z=S.subarray(0,B),$=S.subarray(B);x=m1(z),T=m1($),m=Hs(z,x,1),b=Hs($,T,1)}else ls(1);else{var C=hy(p)+4,F=t[C-4]|t[C-3]<<8,Q=C+F;if(Q>i){l&&ls(0);break}o&&c(g+F),n.set(t.subarray(C,Q),g),e.b=g+=F,e.p=p=Q*8,e.f=d;continue}if(p>w){l&&ls(0);break}}o&&c(g+131072);for(var ne=(1<<x)-1,we=(1<<T)-1,O=p;;O=p){var V=m[g1(t,p)&ne],Y=V>>4;if(p+=V&15,p>w){l&&ls(0);break}if(V||ls(2),Y<256)n[g++]=Y;else if(Y==256){O=p,m=null;break}else{var J=Y-254;if(Y>264){var E=Y-257,H=ag[E];J=rs(t,p,(1<<H)-1)+gN[E],p+=H}var se=b[g1(t,p)&we],le=se>>4;se||ls(3),p+=se&15;var $=z7[le];if(le>3){var H=og[le];$+=g1(t,p)&(1<<H)-1,p+=H}if(p>w){l&&ls(0);break}o&&c(g+131072);var ue=g+J;if(g<$){var de=s-$,Ae=Math.min($,ue);for(de+g<0&&ls(3);g<Ae;++g)n[g]=r[de+g]}for(;g<ue;++g)n[g]=n[g-$]}}e.l=m,e.p=O,e.b=g,e.f=d,m&&(d=1,e.m=x,e.d=b,e.n=T)}while(!d);return g!=n.length&&a?yN(n,0,g):n.subarray(0,g)},ma=function(t,e,n){n<<=e&7;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8},Sh=function(t,e,n){n<<=e&7;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8,t[r+2]|=n>>16},v1=function(t,e){for(var n=[],r=0;r<t.length;++r)t[r]&&n.push({s:r,f:t[r]});var i=n.length,s=n.slice();if(!i)return{t:_N,l:0};if(i==1){var a=new Cr(n[0].s+1);return a[n[0].s]=1,{t:a,l:1}}n.sort(function(Q,B){return Q.f-B.f}),n.push({s:-1,f:25001});var o=n[0],l=n[1],c=0,d=1,p=2;for(n[0]={s:-1,f:o.f+l.f,l:o,r:l};d!=i-1;)o=n[n[c].f<n[p].f?c++:p++],l=n[c!=d&&n[c].f<n[p].f?c++:p++],n[d++]={s:-1,f:o.f+l.f,l:o,r:l};for(var g=s[0].s,r=1;r<i;++r)s[r].s>g&&(g=s[r].s);var m=new Si(g+1),b=nv(n[d-1],m,0);if(b>e){var r=0,x=0,T=b-e,w=1<<T;for(s.sort(function(B,j){return m[j.s]-m[B.s]||B.f-j.f});r<i;++r){var N=s[r].s;if(m[N]>e)x+=w-(1<<b-m[N]),m[N]=e;else break}for(x>>=T;x>0;){var C=s[r].s;m[C]<e?x-=1<<e-m[C]++-1:++r}for(;r>=0&&x;--r){var F=s[r].s;m[F]==e&&(--m[F],++x)}b=e}return{t:new Cr(m),l:b}},nv=function(t,e,n){return t.s==-1?Math.max(nv(t.l,e,n+1),nv(t.r,e,n+1)):e[t.s]=n},C_=function(t){for(var e=t.length;e&&!t[--e];);for(var n=new Si(++e),r=0,i=t[0],s=1,a=function(l){n[r++]=l},o=1;o<=e;++o)if(t[o]==i&&o!=e)++s;else{if(!i&&s>2){for(;s>138;s-=138)a(32754);s>2&&(a(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(a(i),--s;s>6;s-=6)a(8304);s>2&&(a(s-3<<5|8208),s=0)}for(;s--;)a(i);s=1,i=t[o]}return{c:n.subarray(0,r),n:e}},Nh=function(t,e){for(var n=0,r=0;r<e.length;++r)n+=t[r]*e[r];return n},wN=function(t,e,n){var r=n.length,i=hy(e+2);t[i]=r&255,t[i+1]=r>>8,t[i+2]=t[i]^255,t[i+3]=t[i+1]^255;for(var s=0;s<r;++s)t[i+s+4]=n[s];return(i+4+r)*8},j_=function(t,e,n,r,i,s,a,o,l,c,d){ma(e,d++,n),++i[256];for(var p=v1(i,15),g=p.t,m=p.l,b=v1(s,15),x=b.t,T=b.l,w=C_(g),N=w.c,C=w.n,F=C_(x),Q=F.c,B=F.n,j=new Si(19),y=0;y<N.length;++y)++j[N[y]&31];for(var y=0;y<Q.length;++y)++j[Q[y]&31];for(var S=v1(j,7),L=S.t,E=S.l,I=19;I>4&&!L[Z0[I-1]];--I);var k=c+5<<3,M=Nh(i,Zo)+Nh(s,Ed)+a,te=Nh(i,g)+Nh(s,x)+a+14+3*I+Nh(j,L)+2*j[16]+3*j[17]+7*j[18];if(l>=0&&k<=M&&k<=te)return wN(e,d,t.subarray(l,l+c));var V,U,z,$;if(ma(e,d,1+(te<M)),d+=2,te<M){V=Hs(g,m,0),U=g,z=Hs(x,T,0),$=x;var ne=Hs(L,E,0);ma(e,d,C-257),ma(e,d+5,B-1),ma(e,d+10,I-4),d+=14;for(var y=0;y<I;++y)ma(e,d+3*y,L[Z0[y]]);d+=3*I;for(var we=[N,Q],O=0;O<2;++O)for(var Y=we[O],y=0;y<Y.length;++y){var J=Y[y]&31;ma(e,d,ne[J]),d+=L[J],J>15&&(ma(e,d,Y[y]>>5&127),d+=Y[y]>>12)}}else V=$7,U=Zo,z=W7,$=Ed;for(var y=0;y<o;++y){var H=r[y];if(H>255){var J=H>>18&31;Sh(e,d,V[J+257]),d+=U[J+257],J>7&&(ma(e,d,H>>23&31),d+=ag[J]);var se=H&31;Sh(e,d,z[se]),d+=$[se],se>3&&(Sh(e,d,H>>5&8191),d+=og[se])}else Sh(e,d,V[H]),d+=U[H]}return Sh(e,d,V[256]),d+U[256]},J7=new uy([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),_N=new Cr(0),X7=function(t,e,n,r,i,s){var a=s.z||t.length,o=new Cr(r+a+5*(1+Math.ceil(a/7e3))+i),l=o.subarray(r,o.length-i),c=s.l,d=(s.r||0)&7;if(e){d&&(l[0]=s.r>>3);for(var p=J7[e-1],g=p>>13,m=p&8191,b=(1<<n)-1,x=s.p||new Si(32768),T=s.h||new Si(b+1),w=Math.ceil(n/3),N=2*w,C=function(Xe){return(t[Xe]^t[Xe+1]<<w^t[Xe+2]<<N)&b},F=new uy(25e3),Q=new Si(288),B=new Si(32),j=0,y=0,S=s.i||0,L=0,E=s.w||0,I=0;S+2<a;++S){var k=C(S),M=S&32767,te=T[k];if(x[M]=te,T[k]=M,E<=S){var V=a-S;if((j>7e3||L>24576)&&(V>423||!c)){d=j_(t,l,0,F,Q,B,y,L,I,S-I,d),L=j=y=0,I=S;for(var U=0;U<286;++U)Q[U]=0;for(var U=0;U<30;++U)B[U]=0}var z=2,$=0,ne=m,we=M-te&32767;if(V>2&&k==C(S-we))for(var O=Math.min(g,V)-1,Y=Math.min(32767,S),J=Math.min(258,V);we<=Y&&--ne&&M!=te;){if(t[S+z]==t[S+z-we]){for(var H=0;H<J&&t[S+H]==t[S+H-we];++H);if(H>z){if(z=H,$=we,H>O)break;for(var se=Math.min(we,H-2),le=0,U=0;U<se;++U){var ue=S-we+U&32767,de=x[ue],Ae=ue-de&32767;Ae>le&&(le=Ae,te=ue)}}}M=te,te=x[M],we+=M-te&32767}if($){F[L++]=268435456|ev[z]<<18|P_[$];var Te=ev[z]&31,Re=P_[$]&31;y+=ag[Te]+og[Re],++Q[257+Te],++B[Re],E=S+z,++j}else F[L++]=t[S],++Q[t[S]]}}for(S=Math.max(S,E);S<a;++S)F[L++]=t[S],++Q[t[S]];d=j_(t,l,c,F,Q,B,y,L,I,S-I,d),c||(s.r=d&7|l[d/8|0]<<3,d-=7,s.h=T,s.p=x,s.i=S,s.w=E)}else{for(var S=s.w||0;S<a+c;S+=65535){var Be=S+65535;Be>=a&&(l[d/8|0]=c,Be=a),d=wN(l,d+1,t.subarray(S,Be))}s.i=a}return yN(o,0,r+hy(d)+i)},bN=function(){var t=1,e=0;return{p:function(n){for(var r=t,i=e,s=n.length|0,a=0;a!=s;){for(var o=Math.min(a+2655,s);a<o;++a)i+=r+=n[a];r=(r&65535)+15*(r>>16),i=(i&65535)+15*(i>>16)}t=r,e=i},d:function(){return t%=65521,e%=65521,(t&255)<<24|(t&65280)<<8|(e&255)<<8|e>>8}}},Z7=function(t,e,n,r,i){if(!i&&(i={l:1},e.dictionary)){var s=e.dictionary.subarray(-32768),a=new Cr(s.length+t.length);a.set(s),a.set(t,s.length),t=a,i.w=s.length}return X7(t,e.level==null?6:e.level,e.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+e.mem,n,r,i)},xN=function(t,e,n){for(;n;++e)t[e]=n,n>>>=8},eD=function(t,e){var n=e.level,r=n==0?0:n<6?1:n==9?3:2;if(t[0]=120,t[1]=r<<6|(e.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,e.dictionary){var i=bN();i.p(e.dictionary),xN(t,2,i.d())}},tD=function(t,e){return((t[0]&15)!=8||t[0]>>4>7||(t[0]<<8|t[1])%31)&&ls(6,"invalid zlib data"),(t[1]>>5&1)==1&&ls(6,"invalid zlib data: "+(t[1]&32?"need":"unexpected")+" dictionary"),(t[1]>>3&4)+2};function rv(t,e){e||(e={});var n=bN();n.p(t);var r=Z7(t,e,e.dictionary?6:2,4);return eD(r,e),xN(r,r.length-4,n.d()),r}function nD(t,e){return Y7(t.subarray(tD(t),-4),{i:2},e,e)}var rD=typeof TextDecoder<"u"&&new TextDecoder,iD=0;try{rD.decode(_N,{stream:!0}),iD=1}catch{}var vt=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function y1(){vt.console&&typeof vt.console.log=="function"&&vt.console.log.apply(vt.console,arguments)}var tn={log:y1,warn:function(t){vt.console&&(typeof vt.console.warn=="function"?vt.console.warn.apply(vt.console,arguments):y1.call(null,arguments))},error:function(t){vt.console&&(typeof vt.console.error=="function"?vt.console.error.apply(vt.console,arguments):y1(t))}};function w1(t,e,n){var r=new XMLHttpRequest;r.open("GET",t),r.responseType="blob",r.onload=function(){Il(r.response,e,n)},r.onerror=function(){tn.error("could not download file")},r.send()}function L_(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function Bf(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var Yh,iv,Il=vt.saveAs||((typeof window>"u"?"undefined":Gt(window))!=="object"||window!==vt?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,e,n){var r=vt.URL||vt.webkitURL,i=document.createElement("a");e=e||t.name||"download",i.download=e,i.rel="noopener",typeof t=="string"?(i.href=t,i.origin!==location.origin?L_(i.href)?w1(t,e,n):Bf(i,i.target="_blank"):Bf(i)):(i.href=r.createObjectURL(t),setTimeout(function(){r.revokeObjectURL(i.href)},4e4),setTimeout(function(){Bf(i)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,n){if(e=e||t.name||"download",typeof t=="string")if(L_(t))w1(t,e,n);else{var r=document.createElement("a");r.href=t,r.target="_blank",setTimeout(function(){Bf(r)})}else navigator.msSaveOrOpenBlob(function(i,s){return s===void 0?s={autoBom:!1}:Gt(s)!=="object"&&(tn.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i}(t,n),e)}:function(t,e,n,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof t=="string")return w1(t,e,n);var i=t.type==="application/octet-stream",s=/constructor/i.test(vt.HTMLElement)||vt.safari,a=/CriOS\/[\d]+/.test(navigator.userAgent);if((a||i&&s)&&(typeof FileReader>"u"?"undefined":Gt(FileReader))==="object"){var o=new FileReader;o.onloadend=function(){var d=o.result;d=a?d:d.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=d:location=d,r=null},o.readAsDataURL(t)}else{var l=vt.URL||vt.webkitURL,c=l.createObjectURL(t);r?r.location=c:location.href=c,r=null,setTimeout(function(){l.revokeObjectURL(c)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function SN(t){var e;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(o){return[parseInt(o[1]),parseInt(o[2]),parseInt(o[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(o){return[parseInt(o[1],16),parseInt(o[2],16),parseInt(o[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(o){return[parseInt(o[1]+o[1],16),parseInt(o[2]+o[2],16),parseInt(o[3]+o[3],16)]}}],r=0;r<n.length;r++){var i=n[r].re,s=n[r].process,a=i.exec(t);a&&(e=s(a),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var o=this.r.toString(16),l=this.g.toString(16),c=this.b.toString(16);return o.length==1&&(o="0"+o),l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),"#"+o+l+c}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function _1(t,e){var n=t[0],r=t[1],i=t[2],s=t[3];n=Nr(n,r,i,s,e[0],7,-680876936),s=Nr(s,n,r,i,e[1],12,-389564586),i=Nr(i,s,n,r,e[2],17,606105819),r=Nr(r,i,s,n,e[3],22,-1044525330),n=Nr(n,r,i,s,e[4],7,-176418897),s=Nr(s,n,r,i,e[5],12,1200080426),i=Nr(i,s,n,r,e[6],17,-1473231341),r=Nr(r,i,s,n,e[7],22,-45705983),n=Nr(n,r,i,s,e[8],7,1770035416),s=Nr(s,n,r,i,e[9],12,-1958414417),i=Nr(i,s,n,r,e[10],17,-42063),r=Nr(r,i,s,n,e[11],22,-1990404162),n=Nr(n,r,i,s,e[12],7,1804603682),s=Nr(s,n,r,i,e[13],12,-40341101),i=Nr(i,s,n,r,e[14],17,-1502002290),n=Ar(n,r=Nr(r,i,s,n,e[15],22,1236535329),i,s,e[1],5,-165796510),s=Ar(s,n,r,i,e[6],9,-1069501632),i=Ar(i,s,n,r,e[11],14,643717713),r=Ar(r,i,s,n,e[0],20,-373897302),n=Ar(n,r,i,s,e[5],5,-701558691),s=Ar(s,n,r,i,e[10],9,38016083),i=Ar(i,s,n,r,e[15],14,-660478335),r=Ar(r,i,s,n,e[4],20,-405537848),n=Ar(n,r,i,s,e[9],5,568446438),s=Ar(s,n,r,i,e[14],9,-1019803690),i=Ar(i,s,n,r,e[3],14,-187363961),r=Ar(r,i,s,n,e[8],20,1163531501),n=Ar(n,r,i,s,e[13],5,-1444681467),s=Ar(s,n,r,i,e[2],9,-51403784),i=Ar(i,s,n,r,e[7],14,1735328473),n=Er(n,r=Ar(r,i,s,n,e[12],20,-1926607734),i,s,e[5],4,-378558),s=Er(s,n,r,i,e[8],11,-2022574463),i=Er(i,s,n,r,e[11],16,1839030562),r=Er(r,i,s,n,e[14],23,-35309556),n=Er(n,r,i,s,e[1],4,-1530992060),s=Er(s,n,r,i,e[4],11,1272893353),i=Er(i,s,n,r,e[7],16,-155497632),r=Er(r,i,s,n,e[10],23,-1094730640),n=Er(n,r,i,s,e[13],4,681279174),s=Er(s,n,r,i,e[0],11,-358537222),i=Er(i,s,n,r,e[3],16,-722521979),r=Er(r,i,s,n,e[6],23,76029189),n=Er(n,r,i,s,e[9],4,-640364487),s=Er(s,n,r,i,e[12],11,-421815835),i=Er(i,s,n,r,e[15],16,530742520),n=kr(n,r=Er(r,i,s,n,e[2],23,-995338651),i,s,e[0],6,-198630844),s=kr(s,n,r,i,e[7],10,1126891415),i=kr(i,s,n,r,e[14],15,-1416354905),r=kr(r,i,s,n,e[5],21,-57434055),n=kr(n,r,i,s,e[12],6,1700485571),s=kr(s,n,r,i,e[3],10,-1894986606),i=kr(i,s,n,r,e[10],15,-1051523),r=kr(r,i,s,n,e[1],21,-2054922799),n=kr(n,r,i,s,e[8],6,1873313359),s=kr(s,n,r,i,e[15],10,-30611744),i=kr(i,s,n,r,e[6],15,-1560198380),r=kr(r,i,s,n,e[13],21,1309151649),n=kr(n,r,i,s,e[4],6,-145523070),s=kr(s,n,r,i,e[11],10,-1120210379),i=kr(i,s,n,r,e[2],15,718787259),r=kr(r,i,s,n,e[9],21,-343485551),t[0]=Lo(n,t[0]),t[1]=Lo(r,t[1]),t[2]=Lo(i,t[2]),t[3]=Lo(s,t[3])}function lg(t,e,n,r,i,s){return e=Lo(Lo(e,t),Lo(r,s)),Lo(e<<i|e>>>32-i,n)}function Nr(t,e,n,r,i,s,a){return lg(e&n|~e&r,t,e,i,s,a)}function Ar(t,e,n,r,i,s,a){return lg(e&r|n&~r,t,e,i,s,a)}function Er(t,e,n,r,i,s,a){return lg(e^n^r,t,e,i,s,a)}function kr(t,e,n,r,i,s,a){return lg(n^(e|~r),t,e,i,s,a)}function NN(t){var e,n=t.length,r=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)_1(r,sD(t.substring(e-64,e)));t=t.substring(e-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)i[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(i[e>>2]|=128<<(e%4<<3),e>55)for(_1(r,i),e=0;e<16;e++)i[e]=0;return i[14]=8*n,_1(r,i),r}function sD(t){var e,n=[];for(e=0;e<64;e+=4)n[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return n}Yh=vt.atob.bind(vt),iv=vt.btoa.bind(vt);var R_="0123456789abcdef".split("");function aD(t){for(var e="",n=0;n<4;n++)e+=R_[t>>8*n+4&15]+R_[t>>8*n&15];return e}function oD(t){return String.fromCharCode((255&t)>>0,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function sv(t){return NN(t).map(oD).join("")}var lD=function(t){for(var e=0;e<t.length;e++)t[e]=aD(t[e]);return t.join("")}(NN("hello"))!="5d41402abc4b2a76b9719d911017c592";function Lo(t,e){if(lD){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}return t+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function av(t,e){var n,r,i,s;if(t!==n){for(var a=(i=t,s=1+(256/t.length>>0),new Array(s+1).join(i)),o=[],l=0;l<256;l++)o[l]=l;var c=0;for(l=0;l<256;l++){var d=o[l];c=(c+d+a.charCodeAt(l))%256,o[l]=o[c],o[c]=d}n=t,r=o}else o=r;var p=e.length,g=0,m=0,b="";for(l=0;l<p;l++)m=(m+(d=o[g=(g+1)%256]))%256,o[g]=o[m],o[m]=d,a=o[(o[g]+o[m])%256],b+=String.fromCharCode(e.charCodeAt(l)^a);return b}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var D_={print:4,modify:8,copy:16,"annot-forms":32};function Bc(t,e,n,r){this.v=1,this.r=2;var i=192;t.forEach(function(o){if(D_.perm!==void 0)throw new Error("Invalid permission: "+o);i+=D_[o]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var s=(e+this.padding).substr(0,32),a=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,a),this.P=-(1+(255^i)),this.encryptionKey=sv(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=av(this.encryptionKey,this.padding)}function Kc(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",n=t.length,r=0;r<n;r++){var i=t.charCodeAt(r);i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?e+="#"+("0"+i.toString(16)).slice(-2):e+=t[r]}return e}function F_(t){if(Gt(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(n,r,i){if(i=i||!1,typeof n!="string"||typeof r!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(n)||(e[n]={});var s=Math.random().toString(35);return e[n][s]=[r,!!i],s},this.unsubscribe=function(n){for(var r in e)if(e[r][n])return delete e[r][n],Object.keys(e[r]).length===0&&delete e[r],!0;return!1},this.publish=function(n){if(e.hasOwnProperty(n)){var r=Array.prototype.slice.call(arguments,1),i=[];for(var s in e[n]){var a=e[n][s];try{a[0].apply(t,r)}catch(o){vt.console&&tn.error("jsPDF PubSub Error",o.message,o)}a[1]&&i.push(s)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function lm(t){if(!(this instanceof lm))return new lm(t);var e="opacity,stroke-opacity".split(",");for(var n in t)t.hasOwnProperty(n)&&e.indexOf(n)>=0&&(this[n]=t[n]);this.id="",this.objectNumber=-1}function AN(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function Cl(t,e,n,r,i){if(!(this instanceof Cl))return new Cl(t,e,n,r,i);this.type=t==="axial"?2:3,this.coords=e,this.colors=n,AN.call(this,r,i)}function nu(t,e,n,r,i){if(!(this instanceof nu))return new nu(t,e,n,r,i);this.boundingBox=t,this.xStep=e,this.yStep=n,this.stream="",this.cloneIndex=0,AN.call(this,r,i)}function gt(t){var e,n=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],i=arguments[2],s=arguments[3],a=[],o=1,l=16,c="S",d=null;Gt(t=t||{})==="object"&&(n=t.orientation,r=t.unit||r,i=t.format||i,s=t.compress||t.compressPdf||s,(d=t.encryption||null)!==null&&(d.userPassword=d.userPassword||"",d.ownerPassword=d.ownerPassword||"",d.userPermissions=d.userPermissions||[]),o=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(e=t.precision),t.floatPrecision!==void 0&&(l=t.floatPrecision),c=t.defaultPathOperation||"S"),a=t.filters||(s===!0?["FlateEncode"]:a),r=r||"mm",n=(""+(n||"P")).toLowerCase();var p=t.putOnlyUsedFonts||!1,g={},m={internal:{},__private__:{}};m.__private__.PubSub=F_;var b="1.3",x=m.__private__.getPdfVersion=function(){return b};m.__private__.setPdfVersion=function(_){b=_};var T={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};m.__private__.getPageFormats=function(){return T};var w=m.__private__.getPageFormat=function(_){return T[_]};i=i||"a4";var N={COMPAT:"compat",ADVANCED:"advanced"},C=N.COMPAT;function F(){this.saveGraphicsState(),ae(new nt(ze,0,0,-ze,0,_r()*ze).toString()+" cm"),this.setFontSize(this.getFontSize()/ze),c="n",C=N.ADVANCED}function Q(){this.restoreGraphicsState(),c="S",C=N.COMPAT}var B=m.__private__.combineFontStyleAndFontWeight=function(_,K){if(_=="bold"&&K=="normal"||_=="bold"&&K==400||_=="normal"&&K=="italic"||_=="bold"&&K=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return K&&(_=K==400||K==="normal"?_==="italic"?"italic":"normal":K!=700&&K!=="bold"||_!=="normal"?(K==700?"bold":K)+""+_:"bold"),_};m.advancedAPI=function(_){var K=C===N.COMPAT;return K&&F.call(this),typeof _!="function"||(_(this),K&&Q.call(this)),this},m.compatAPI=function(_){var K=C===N.ADVANCED;return K&&Q.call(this),typeof _!="function"||(_(this),K&&F.call(this)),this},m.isAdvancedAPI=function(){return C===N.ADVANCED};var j,y=function(_){if(C!==N.ADVANCED)throw new Error(_+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},S=m.roundToPrecision=m.__private__.roundToPrecision=function(_,K){var ie=e||K;if(isNaN(_)||isNaN(ie))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return _.toFixed(ie).replace(/0+$/,"")};j=m.hpf=m.__private__.hpf=typeof l=="number"?function(_){if(isNaN(_))throw new Error("Invalid argument passed to jsPDF.hpf");return S(_,l)}:l==="smart"?function(_){if(isNaN(_))throw new Error("Invalid argument passed to jsPDF.hpf");return S(_,_>-1&&_<1?16:5)}:function(_){if(isNaN(_))throw new Error("Invalid argument passed to jsPDF.hpf");return S(_,16)};var L=m.f2=m.__private__.f2=function(_){if(isNaN(_))throw new Error("Invalid argument passed to jsPDF.f2");return S(_,2)},E=m.__private__.f3=function(_){if(isNaN(_))throw new Error("Invalid argument passed to jsPDF.f3");return S(_,3)},I=m.scale=m.__private__.scale=function(_){if(isNaN(_))throw new Error("Invalid argument passed to jsPDF.scale");return C===N.COMPAT?_*ze:C===N.ADVANCED?_:void 0},k=function(_){return C===N.COMPAT?_r()-_:C===N.ADVANCED?_:void 0},M=function(_){return I(k(_))};m.__private__.setPrecision=m.setPrecision=function(_){typeof parseInt(_,10)=="number"&&(e=parseInt(_,10))};var te,V="00000000000000000000000000000000",U=m.__private__.getFileId=function(){return V},z=m.__private__.setFileId=function(_){return V=_!==void 0&&/^[a-fA-F0-9]{32}$/.test(_)?_.toUpperCase():V.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),d!==null&&(on=new Bc(d.userPermissions,d.userPassword,d.ownerPassword,V)),V};m.setFileId=function(_){return z(_),this},m.getFileId=function(){return U()};var $=m.__private__.convertDateToPDFDate=function(_){var K=_.getTimezoneOffset(),ie=K<0?"+":"-",ce=Math.floor(Math.abs(K/60)),ve=Math.abs(K%60),ke=[ie,J(ce),"'",J(ve),"'"].join("");return["D:",_.getFullYear(),J(_.getMonth()+1),J(_.getDate()),J(_.getHours()),J(_.getMinutes()),J(_.getSeconds()),ke].join("")},ne=m.__private__.convertPDFDateToDate=function(_){var K=parseInt(_.substr(2,4),10),ie=parseInt(_.substr(6,2),10)-1,ce=parseInt(_.substr(8,2),10),ve=parseInt(_.substr(10,2),10),ke=parseInt(_.substr(12,2),10),Oe=parseInt(_.substr(14,2),10);return new Date(K,ie,ce,ve,ke,Oe,0)},we=m.__private__.setCreationDate=function(_){var K;if(_===void 0&&(_=new Date),_ instanceof Date)K=$(_);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(_))throw new Error("Invalid argument passed to jsPDF.setCreationDate");K=_}return te=K},O=m.__private__.getCreationDate=function(_){var K=te;return _==="jsDate"&&(K=ne(te)),K};m.setCreationDate=function(_){return we(_),this},m.getCreationDate=function(_){return O(_)};var Y,J=m.__private__.padd2=function(_){return("0"+parseInt(_)).slice(-2)},H=m.__private__.padd2Hex=function(_){return("00"+(_=_.toString())).substr(_.length)},se=0,le=[],ue=[],de=0,Ae=[],Te=[],Re=!1,Be=ue,Xe=function(){se=0,de=0,ue=[],le=[],Ae=[],$i=An(),wr=An()};m.__private__.setCustomOutputDestination=function(_){Re=!0,Be=_};var be=function(_){Re||(Be=_)};m.__private__.resetCustomOutputDestination=function(){Re=!1,Be=ue};var ae=m.__private__.out=function(_){return _=_.toString(),de+=_.length+1,Be.push(_),Be},He=m.__private__.write=function(_){return ae(arguments.length===1?_.toString():Array.prototype.join.call(arguments," "))},De=m.__private__.getArrayBuffer=function(_){for(var K=_.length,ie=new ArrayBuffer(K),ce=new Uint8Array(ie);K--;)ce[K]=_.charCodeAt(K);return ie},he=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];m.__private__.getStandardFonts=function(){return he};var Ie=t.fontSize||16;m.__private__.setFontSize=m.setFontSize=function(_){return Ie=C===N.ADVANCED?_/ze:_,this};var Me,Ke=m.__private__.getFontSize=m.getFontSize=function(){return C===N.COMPAT?Ie:Ie*ze},We=t.R2L||!1;m.__private__.setR2L=m.setR2L=function(_){return We=_,this},m.__private__.getR2L=m.getR2L=function(){return We};var Ye,at=m.__private__.setZoomMode=function(_){var K=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(_))Me=_;else if(isNaN(_)){if(K.indexOf(_)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+_+'" is not recognized.');Me=_}else Me=parseInt(_,10)};m.__private__.getZoomMode=function(){return Me};var tt,ut=m.__private__.setPageMode=function(_){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(_)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+_+'" is not recognized.');Ye=_};m.__private__.getPageMode=function(){return Ye};var dt=m.__private__.setLayoutMode=function(_){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(_)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+_+'" is not recognized.');tt=_};m.__private__.getLayoutMode=function(){return tt},m.__private__.setDisplayMode=m.setDisplayMode=function(_,K,ie){return at(_),dt(K),ut(ie),this};var ot={title:"",subject:"",author:"",keywords:"",creator:""};m.__private__.getDocumentProperty=function(_){if(Object.keys(ot).indexOf(_)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return ot[_]},m.__private__.getDocumentProperties=function(){return ot},m.__private__.setDocumentProperties=m.setProperties=m.setDocumentProperties=function(_){for(var K in ot)ot.hasOwnProperty(K)&&_[K]&&(ot[K]=_[K]);return this},m.__private__.setDocumentProperty=function(_,K){if(Object.keys(ot).indexOf(_)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return ot[_]=K};var ct,ze,_e,$e,mt,ft={},Tt={},Vn=[],xt={},vr={},Bt={},Wn={},Nn=null,Dt=0,lt=[],Pt=new F_(m),Rr=t.hotfixes||[],Jt={},fn={},hi=[],nt=function _(K,ie,ce,ve,ke,Oe){if(!(this instanceof _))return new _(K,ie,ce,ve,ke,Oe);isNaN(K)&&(K=1),isNaN(ie)&&(ie=0),isNaN(ce)&&(ce=0),isNaN(ve)&&(ve=1),isNaN(ke)&&(ke=0),isNaN(Oe)&&(Oe=0),this._matrix=[K,ie,ce,ve,ke,Oe]};Object.defineProperty(nt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(_){this._matrix[0]=_}}),Object.defineProperty(nt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(_){this._matrix[1]=_}}),Object.defineProperty(nt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(_){this._matrix[2]=_}}),Object.defineProperty(nt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(_){this._matrix[3]=_}}),Object.defineProperty(nt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(_){this._matrix[4]=_}}),Object.defineProperty(nt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(_){this._matrix[5]=_}}),Object.defineProperty(nt.prototype,"a",{get:function(){return this._matrix[0]},set:function(_){this._matrix[0]=_}}),Object.defineProperty(nt.prototype,"b",{get:function(){return this._matrix[1]},set:function(_){this._matrix[1]=_}}),Object.defineProperty(nt.prototype,"c",{get:function(){return this._matrix[2]},set:function(_){this._matrix[2]=_}}),Object.defineProperty(nt.prototype,"d",{get:function(){return this._matrix[3]},set:function(_){this._matrix[3]=_}}),Object.defineProperty(nt.prototype,"e",{get:function(){return this._matrix[4]},set:function(_){this._matrix[4]=_}}),Object.defineProperty(nt.prototype,"f",{get:function(){return this._matrix[5]},set:function(_){this._matrix[5]=_}}),Object.defineProperty(nt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(nt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(nt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(nt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),nt.prototype.join=function(_){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(j).join(_)},nt.prototype.multiply=function(_){var K=_.sx*this.sx+_.shy*this.shx,ie=_.sx*this.shy+_.shy*this.sy,ce=_.shx*this.sx+_.sy*this.shx,ve=_.shx*this.shy+_.sy*this.sy,ke=_.tx*this.sx+_.ty*this.shx+this.tx,Oe=_.tx*this.shy+_.ty*this.sy+this.ty;return new nt(K,ie,ce,ve,ke,Oe)},nt.prototype.decompose=function(){var _=this.sx,K=this.shy,ie=this.shx,ce=this.sy,ve=this.tx,ke=this.ty,Oe=Math.sqrt(_*_+K*K),Qe=(_/=Oe)*ie+(K/=Oe)*ce;ie-=_*Qe,ce-=K*Qe;var f=Math.sqrt(ie*ie+ce*ce);return Qe/=f,_*(ce/=f)<K*(ie/=f)&&(_=-_,K=-K,Qe=-Qe,Oe=-Oe),{scale:new nt(Oe,0,0,f,0,0),translate:new nt(1,0,0,1,ve,ke),rotate:new nt(_,K,-K,_,0,0),skew:new nt(1,0,Qe,1,0,0)}},nt.prototype.toString=function(_){return this.join(" ")},nt.prototype.inversed=function(){var _=this.sx,K=this.shy,ie=this.shx,ce=this.sy,ve=this.tx,ke=this.ty,Oe=1/(_*ce-K*ie),Qe=ce*Oe,f=-K*Oe,P=-ie*Oe,D=_*Oe;return new nt(Qe,f,P,D,-Qe*ve-P*ke,-f*ve-D*ke)},nt.prototype.applyToPoint=function(_){var K=_.x*this.sx+_.y*this.shx+this.tx,ie=_.x*this.shy+_.y*this.sy+this.ty;return new aa(K,ie)},nt.prototype.applyToRectangle=function(_){var K=this.applyToPoint(_),ie=this.applyToPoint(new aa(_.x+_.w,_.y+_.h));return new eo(K.x,K.y,ie.x-K.x,ie.y-K.y)},nt.prototype.clone=function(){var _=this.sx,K=this.shy,ie=this.shx,ce=this.sy,ve=this.tx,ke=this.ty;return new nt(_,K,ie,ce,ve,ke)},m.Matrix=nt;var Wr=m.matrixMult=function(_,K){return K.multiply(_)},yr=new nt(1,0,0,1,0,0);m.unitMatrix=m.identityMatrix=yr;var Un=function(_,K){if(!vr[_]){var ie=(K instanceof Cl?"Sh":"P")+(Object.keys(xt).length+1).toString(10);K.id=ie,vr[_]=ie,xt[ie]=K,Pt.publish("addPattern",K)}};m.ShadingPattern=Cl,m.TilingPattern=nu,m.addShadingPattern=function(_,K){return y("addShadingPattern()"),Un(_,K),this},m.beginTilingPattern=function(_){y("beginTilingPattern()"),to(_.boundingBox[0],_.boundingBox[1],_.boundingBox[2]-_.boundingBox[0],_.boundingBox[3]-_.boundingBox[1],_.matrix)},m.endTilingPattern=function(_,K){y("endTilingPattern()"),K.stream=Te[Y].join(`
`),Un(_,K),Pt.publish("endTilingPattern",K),hi.pop().restore()};var Pn=m.__private__.newObject=function(){var _=An();return Bn(_,!0),_},An=m.__private__.newObjectDeferred=function(){return se++,le[se]=function(){return de},se},Bn=function(_,K){return K=typeof K=="boolean"&&K,le[_]=de,K&&ae(_+" 0 obj"),_},Ua=m.__private__.newAdditionalObject=function(){var _={objId:An(),content:""};return Ae.push(_),_},$i=An(),wr=An(),Gr=m.__private__.decodeColorString=function(_){var K=_.split(" ");if(K.length!==2||K[1]!=="g"&&K[1]!=="G")K.length===5&&(K[4]==="k"||K[4]==="K")&&(K=[(1-K[0])*(1-K[3]),(1-K[1])*(1-K[3]),(1-K[2])*(1-K[3]),"r"]);else{var ie=parseFloat(K[0]);K=[ie,ie,ie,"r"]}for(var ce="#",ve=0;ve<3;ve++)ce+=("0"+Math.floor(255*parseFloat(K[ve])).toString(16)).slice(-2);return ce},Dr=m.__private__.encodeColorString=function(_){var K;typeof _=="string"&&(_={ch1:_});var ie=_.ch1,ce=_.ch2,ve=_.ch3,ke=_.ch4,Oe=_.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof ie=="string"&&ie.charAt(0)!=="#"){var Qe=new SN(ie);if(Qe.ok)ie=Qe.toHex();else if(!/^\d*\.?\d*$/.test(ie))throw new Error('Invalid color "'+ie+'" passed to jsPDF.encodeColorString.')}if(typeof ie=="string"&&/^#[0-9A-Fa-f]{3}$/.test(ie)&&(ie="#"+ie[1]+ie[1]+ie[2]+ie[2]+ie[3]+ie[3]),typeof ie=="string"&&/^#[0-9A-Fa-f]{6}$/.test(ie)){var f=parseInt(ie.substr(1),16);ie=f>>16&255,ce=f>>8&255,ve=255&f}if(ce===void 0||ke===void 0&&ie===ce&&ce===ve)if(typeof ie=="string")K=ie+" "+Oe[0];else switch(_.precision){case 2:K=L(ie/255)+" "+Oe[0];break;case 3:default:K=E(ie/255)+" "+Oe[0]}else if(ke===void 0||Gt(ke)==="object"){if(ke&&!isNaN(ke.a)&&ke.a===0)return K=["1.","1.","1.",Oe[1]].join(" ");if(typeof ie=="string")K=[ie,ce,ve,Oe[1]].join(" ");else switch(_.precision){case 2:K=[L(ie/255),L(ce/255),L(ve/255),Oe[1]].join(" ");break;default:case 3:K=[E(ie/255),E(ce/255),E(ve/255),Oe[1]].join(" ")}}else if(typeof ie=="string")K=[ie,ce,ve,ke,Oe[2]].join(" ");else switch(_.precision){case 2:K=[L(ie),L(ce),L(ve),L(ke),Oe[2]].join(" ");break;case 3:default:K=[E(ie),E(ce),E(ve),E(ke),Oe[2]].join(" ")}return K},Fr=m.__private__.getFilters=function(){return a},Cn=m.__private__.putStream=function(_){var K=(_=_||{}).data||"",ie=_.filters||Fr(),ce=_.alreadyAppliedFilters||[],ve=_.addLength1||!1,ke=K.length,Oe=_.objectId,Qe=function(St){return St};if(d!==null&&Oe===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");d!==null&&(Qe=on.encryptor(Oe,0));var f={};ie===!0&&(ie=["FlateEncode"]);var P=_.additionalKeyValues||[],D=(f=gt.API.processDataByFilters!==void 0?gt.API.processDataByFilters(K,ie):{data:K,reverseChain:[]}).reverseChain+(Array.isArray(ce)?ce.join(" "):ce.toString());if(f.data.length!==0&&(P.push({key:"Length",value:f.data.length}),ve===!0&&P.push({key:"Length1",value:ke})),D.length!=0)if(D.split("/").length-1==1)P.push({key:"Filter",value:D});else{P.push({key:"Filter",value:"["+D+"]"});for(var X=0;X<P.length;X+=1)if(P[X].key==="DecodeParms"){for(var ge=[],Ne=0;Ne<f.reverseChain.split("/").length-1;Ne+=1)ge.push("null");ge.push(P[X].value),P[X].value="["+ge.join(" ")+"]"}}ae("<<");for(var Ve=0;Ve<P.length;Ve++)ae("/"+P[Ve].key+" "+P[Ve].value);ae(">>"),f.data.length!==0&&(ae("stream"),ae(Qe(f.data)),ae("endstream"))},di=m.__private__.putPage=function(_){var K=_.number,ie=_.data,ce=_.objId,ve=_.contentsObjId;Bn(ce,!0),ae("<</Type /Page"),ae("/Parent "+_.rootDictionaryObjId+" 0 R"),ae("/Resources "+_.resourceDictionaryObjId+" 0 R"),ae("/MediaBox ["+parseFloat(j(_.mediaBox.bottomLeftX))+" "+parseFloat(j(_.mediaBox.bottomLeftY))+" "+j(_.mediaBox.topRightX)+" "+j(_.mediaBox.topRightY)+"]"),_.cropBox!==null&&ae("/CropBox ["+j(_.cropBox.bottomLeftX)+" "+j(_.cropBox.bottomLeftY)+" "+j(_.cropBox.topRightX)+" "+j(_.cropBox.topRightY)+"]"),_.bleedBox!==null&&ae("/BleedBox ["+j(_.bleedBox.bottomLeftX)+" "+j(_.bleedBox.bottomLeftY)+" "+j(_.bleedBox.topRightX)+" "+j(_.bleedBox.topRightY)+"]"),_.trimBox!==null&&ae("/TrimBox ["+j(_.trimBox.bottomLeftX)+" "+j(_.trimBox.bottomLeftY)+" "+j(_.trimBox.topRightX)+" "+j(_.trimBox.topRightY)+"]"),_.artBox!==null&&ae("/ArtBox ["+j(_.artBox.bottomLeftX)+" "+j(_.artBox.bottomLeftY)+" "+j(_.artBox.topRightX)+" "+j(_.artBox.topRightY)+"]"),typeof _.userUnit=="number"&&_.userUnit!==1&&ae("/UserUnit "+_.userUnit),Pt.publish("putPage",{objId:ce,pageContext:lt[K],pageNumber:K,page:ie}),ae("/Contents "+ve+" 0 R"),ae(">>"),ae("endobj");var ke=ie.join(`
`);return C===N.ADVANCED&&(ke+=`
Q`),Bn(ve,!0),Cn({data:ke,filters:Fr(),objectId:ve}),ae("endobj"),ce},ws=m.__private__.putPages=function(){var _,K,ie=[];for(_=1;_<=Dt;_++)lt[_].objId=An(),lt[_].contentsObjId=An();for(_=1;_<=Dt;_++)ie.push(di({number:_,data:Te[_],objId:lt[_].objId,contentsObjId:lt[_].contentsObjId,mediaBox:lt[_].mediaBox,cropBox:lt[_].cropBox,bleedBox:lt[_].bleedBox,trimBox:lt[_].trimBox,artBox:lt[_].artBox,userUnit:lt[_].userUnit,rootDictionaryObjId:$i,resourceDictionaryObjId:wr}));Bn($i,!0),ae("<</Type /Pages");var ce="/Kids [";for(K=0;K<Dt;K++)ce+=ie[K]+" 0 R ";ae(ce+"]"),ae("/Count "+Dt),ae(">>"),ae("endobj"),Pt.publish("postPutPages")},_s=function(_){Pt.publish("putFont",{font:_,out:ae,newObject:Pn,putStream:Cn}),_.isAlreadyPutted!==!0&&(_.objectNumber=Pn(),ae("<<"),ae("/Type /Font"),ae("/BaseFont /"+Kc(_.postScriptName)),ae("/Subtype /Type1"),typeof _.encoding=="string"&&ae("/Encoding /"+_.encoding),ae("/FirstChar 32"),ae("/LastChar 255"),ae(">>"),ae("endobj"))},bs=function(){for(var _ in ft)ft.hasOwnProperty(_)&&(p===!1||p===!0&&g.hasOwnProperty(_))&&_s(ft[_])},Js=function(_){_.objectNumber=Pn();var K=[];K.push({key:"Type",value:"/XObject"}),K.push({key:"Subtype",value:"/Form"}),K.push({key:"BBox",value:"["+[j(_.x),j(_.y),j(_.x+_.width),j(_.y+_.height)].join(" ")+"]"}),K.push({key:"Matrix",value:"["+_.matrix.toString()+"]"});var ie=_.pages[1].join(`
`);Cn({data:ie,additionalKeyValues:K,objectId:_.objectNumber}),ae("endobj")},Xs=function(){for(var _ in Jt)Jt.hasOwnProperty(_)&&Js(Jt[_])},uc=function(_,K){var ie,ce=[],ve=1/(K-1);for(ie=0;ie<1;ie+=ve)ce.push(ie);if(ce.push(1),_[0].offset!=0){var ke={offset:0,color:_[0].color};_.unshift(ke)}if(_[_.length-1].offset!=1){var Oe={offset:1,color:_[_.length-1].color};_.push(Oe)}for(var Qe="",f=0,P=0;P<ce.length;P++){for(ie=ce[P];ie>_[f+1].offset;)f++;var D=_[f].offset,X=(ie-D)/(_[f+1].offset-D),ge=_[f].color,Ne=_[f+1].color;Qe+=H(Math.round((1-X)*ge[0]+X*Ne[0]).toString(16))+H(Math.round((1-X)*ge[1]+X*Ne[1]).toString(16))+H(Math.round((1-X)*ge[2]+X*Ne[2]).toString(16))}return Qe.trim()},Ba=function(_,K){K||(K=21);var ie=Pn(),ce=uc(_.colors,K),ve=[];ve.push({key:"FunctionType",value:"0"}),ve.push({key:"Domain",value:"[0.0 1.0]"}),ve.push({key:"Size",value:"["+K+"]"}),ve.push({key:"BitsPerSample",value:"8"}),ve.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),ve.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Cn({data:ce,additionalKeyValues:ve,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:ie}),ae("endobj"),_.objectNumber=Pn(),ae("<< /ShadingType "+_.type),ae("/ColorSpace /DeviceRGB");var ke="/Coords ["+j(parseFloat(_.coords[0]))+" "+j(parseFloat(_.coords[1]))+" ";_.type===2?ke+=j(parseFloat(_.coords[2]))+" "+j(parseFloat(_.coords[3])):ke+=j(parseFloat(_.coords[2]))+" "+j(parseFloat(_.coords[3]))+" "+j(parseFloat(_.coords[4]))+" "+j(parseFloat(_.coords[5])),ae(ke+="]"),_.matrix&&ae("/Matrix ["+_.matrix.toString()+"]"),ae("/Function "+ie+" 0 R"),ae("/Extend [true true]"),ae(">>"),ae("endobj")},hc=function(_,K){var ie=An(),ce=Pn();K.push({resourcesOid:ie,objectOid:ce}),_.objectNumber=ce;var ve=[];ve.push({key:"Type",value:"/Pattern"}),ve.push({key:"PatternType",value:"1"}),ve.push({key:"PaintType",value:"1"}),ve.push({key:"TilingType",value:"1"}),ve.push({key:"BBox",value:"["+_.boundingBox.map(j).join(" ")+"]"}),ve.push({key:"XStep",value:j(_.xStep)}),ve.push({key:"YStep",value:j(_.yStep)}),ve.push({key:"Resources",value:ie+" 0 R"}),_.matrix&&ve.push({key:"Matrix",value:"["+_.matrix.toString()+"]"}),Cn({data:_.stream,additionalKeyValues:ve,objectId:_.objectNumber}),ae("endobj")},xs=function(_){var K;for(K in xt)xt.hasOwnProperty(K)&&(xt[K]instanceof Cl?Ba(xt[K]):xt[K]instanceof nu&&hc(xt[K],_))},Ss=function(_){for(var K in _.objectNumber=Pn(),ae("<<"),_)switch(K){case"opacity":ae("/ca "+L(_[K]));break;case"stroke-opacity":ae("/CA "+L(_[K]))}ae(">>"),ae("endobj")},Hi=function(){var _;for(_ in Bt)Bt.hasOwnProperty(_)&&Ss(Bt[_])},Zs=function(){for(var _ in ae("/XObject <<"),Jt)Jt.hasOwnProperty(_)&&Jt[_].objectNumber>=0&&ae("/"+_+" "+Jt[_].objectNumber+" 0 R");Pt.publish("putXobjectDict"),ae(">>")},Gu=function(){on.oid=Pn(),ae("<<"),ae("/Filter /Standard"),ae("/V "+on.v),ae("/R "+on.r),ae("/U <"+on.toHexString(on.U)+">"),ae("/O <"+on.toHexString(on.O)+">"),ae("/P "+on.P),ae(">>"),ae("endobj")},al=function(){for(var _ in ae("/Font <<"),ft)ft.hasOwnProperty(_)&&(p===!1||p===!0&&g.hasOwnProperty(_))&&ae("/"+_+" "+ft[_].objectNumber+" 0 R");ae(">>")},dc=function(){if(Object.keys(xt).length>0){for(var _ in ae("/Shading <<"),xt)xt.hasOwnProperty(_)&&xt[_]instanceof Cl&&xt[_].objectNumber>=0&&ae("/"+_+" "+xt[_].objectNumber+" 0 R");Pt.publish("putShadingPatternDict"),ae(">>")}},ea=function(_){if(Object.keys(xt).length>0){for(var K in ae("/Pattern <<"),xt)xt.hasOwnProperty(K)&&xt[K]instanceof m.TilingPattern&&xt[K].objectNumber>=0&&xt[K].objectNumber<_&&ae("/"+K+" "+xt[K].objectNumber+" 0 R");Pt.publish("putTilingPatternDict"),ae(">>")}},ol=function(){if(Object.keys(Bt).length>0){var _;for(_ in ae("/ExtGState <<"),Bt)Bt.hasOwnProperty(_)&&Bt[_].objectNumber>=0&&ae("/"+_+" "+Bt[_].objectNumber+" 0 R");Pt.publish("putGStateDict"),ae(">>")}},an=function(_){Bn(_.resourcesOid,!0),ae("<<"),ae("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),al(),dc(),ea(_.objectOid),ol(),Zs(),ae(">>"),ae("endobj")},ll=function(){var _=[];bs(),Hi(),Xs(),xs(_),Pt.publish("putResources"),_.forEach(an),an({resourcesOid:wr,objectOid:Number.MAX_SAFE_INTEGER}),Pt.publish("postPutResources")},cl=function(){Pt.publish("putAdditionalObjects");for(var _=0;_<Ae.length;_++){var K=Ae[_];Bn(K.objId,!0),ae(K.content),ae("endobj")}Pt.publish("postPutAdditionalObjects")},fc=function(_){Tt[_.fontName]=Tt[_.fontName]||{},Tt[_.fontName][_.fontStyle]=_.id},ul=function(_,K,ie,ce,ve){var ke={id:"F"+(Object.keys(ft).length+1).toString(10),postScriptName:_,fontName:K,fontStyle:ie,encoding:ce,isStandardFont:ve||!1,metadata:{}};return Pt.publish("addFont",{font:ke,instance:this}),ft[ke.id]=ke,fc(ke),ke.id},pc=function(_){for(var K=0,ie=he.length;K<ie;K++){var ce=ul.call(this,_[K][0],_[K][1],_[K][2],he[K][3],!0);p===!1&&(g[ce]=!0);var ve=_[K][0].split("-");fc({id:ce,fontName:ve[0],fontStyle:ve[1]||""})}Pt.publish("addFonts",{fonts:ft,dictionary:Tt})},Qr=function(_){return _.foo=function(){try{return _.apply(this,arguments)}catch(ce){var K=ce.stack||"";~K.indexOf(" at ")&&(K=K.split(" at ")[1]);var ie="Error in function "+K.split(`
`)[0].split("<")[0]+": "+ce.message;if(!vt.console)throw new Error(ie);vt.console.error(ie,ce),vt.alert&&alert(ie)}},_.foo.bar=_,_.foo},Ka=function(_,K){var ie,ce,ve,ke,Oe,Qe,f,P,D;if(ve=(K=K||{}).sourceEncoding||"Unicode",Oe=K.outputEncoding,(K.autoencode||Oe)&&ft[ct].metadata&&ft[ct].metadata[ve]&&ft[ct].metadata[ve].encoding&&(ke=ft[ct].metadata[ve].encoding,!Oe&&ft[ct].encoding&&(Oe=ft[ct].encoding),!Oe&&ke.codePages&&(Oe=ke.codePages[0]),typeof Oe=="string"&&(Oe=ke[Oe]),Oe)){for(f=!1,Qe=[],ie=0,ce=_.length;ie<ce;ie++)(P=Oe[_.charCodeAt(ie)])?Qe.push(String.fromCharCode(P)):Qe.push(_[ie]),Qe[ie].charCodeAt(0)>>8&&(f=!0);_=Qe.join("")}for(ie=_.length;f===void 0&&ie!==0;)_.charCodeAt(ie-1)>>8&&(f=!0),ie--;if(!f)return _;for(Qe=K.noBOM?[]:[254,255],ie=0,ce=_.length;ie<ce;ie++){if((D=(P=_.charCodeAt(ie))>>8)>>8)throw new Error("Character at position "+ie+" of string '"+_+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Qe.push(D),Qe.push(P-(D<<8))}return String.fromCharCode.apply(void 0,Qe)},En=m.__private__.pdfEscape=m.pdfEscape=function(_,K){return Ka(_,K).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Or=m.__private__.beginPage=function(_){Te[++Dt]=[],lt[Dt]={objId:0,contentsObjId:0,userUnit:Number(o),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(_[0]),topRightY:Number(_[1])}},hl(Dt),be(Te[Y])},ta=function(_,K){var ie,ce,ve;switch(n=K||n,typeof _=="string"&&(ie=w(_.toLowerCase()),Array.isArray(ie)&&(ce=ie[0],ve=ie[1])),Array.isArray(_)&&(ce=_[0]*ze,ve=_[1]*ze),isNaN(ce)&&(ce=i[0],ve=i[1]),(ce>14400||ve>14400)&&(tn.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),ce=Math.min(14400,ce),ve=Math.min(14400,ve)),i=[ce,ve],n.substr(0,1)){case"l":ve>ce&&(i=[ve,ce]);break;case"p":ce>ve&&(i=[ve,ce])}Or(i),gl(ml),ae(sr),wl!==0&&ae(wl+" J"),Za!==0&&ae(Za+" j"),Pt.publish("addPage",{pageNumber:Dt})},qa=function(_){_>0&&_<=Dt&&(Te.splice(_,1),lt.splice(_,1),Dt--,Y>Dt&&(Y=Dt),this.setPage(Y))},hl=function(_){_>0&&_<=Dt&&(Y=_)},$t=m.__private__.getNumberOfPages=m.getNumberOfPages=function(){return Te.length-1},na=function(_,K,ie){var ce,ve=void 0;return ie=ie||{},_=_!==void 0?_:ft[ct].fontName,K=K!==void 0?K:ft[ct].fontStyle,ce=_.toLowerCase(),Tt[ce]!==void 0&&Tt[ce][K]!==void 0?ve=Tt[ce][K]:Tt[_]!==void 0&&Tt[_][K]!==void 0?ve=Tt[_][K]:ie.disableWarning===!1&&tn.warn("Unable to look up font label for font '"+_+"', '"+K+"'. Refer to getFontList() for available fonts."),ve||ie.noFallback||(ve=Tt.times[K])==null&&(ve=Tt.times.normal),ve},ra=m.__private__.putInfo=function(){var _=Pn(),K=function(ce){return ce};for(var ie in d!==null&&(K=on.encryptor(_,0)),ae("<<"),ae("/Producer ("+En(K("jsPDF "+gt.version))+")"),ot)ot.hasOwnProperty(ie)&&ot[ie]&&ae("/"+ie.substr(0,1).toUpperCase()+ie.substr(1)+" ("+En(K(ot[ie]))+")");ae("/CreationDate ("+En(K(te))+")"),ae(">>"),ae("endobj")},Wi=m.__private__.putCatalog=function(_){var K=(_=_||{}).rootDictionaryObjId||$i;switch(Pn(),ae("<<"),ae("/Type /Catalog"),ae("/Pages "+K+" 0 R"),Me||(Me="fullwidth"),Me){case"fullwidth":ae("/OpenAction [3 0 R /FitH null]");break;case"fullheight":ae("/OpenAction [3 0 R /FitV null]");break;case"fullpage":ae("/OpenAction [3 0 R /Fit]");break;case"original":ae("/OpenAction [3 0 R /XYZ null null 1]");break;default:var ie=""+Me;ie.substr(ie.length-1)==="%"&&(Me=parseInt(Me)/100),typeof Me=="number"&&ae("/OpenAction [3 0 R /XYZ null null "+L(Me)+"]")}switch(tt||(tt="continuous"),tt){case"continuous":ae("/PageLayout /OneColumn");break;case"single":ae("/PageLayout /SinglePage");break;case"two":case"twoleft":ae("/PageLayout /TwoColumnLeft");break;case"tworight":ae("/PageLayout /TwoColumnRight")}Ye&&ae("/PageMode /"+Ye),Pt.publish("putCatalog"),ae(">>"),ae("endobj")},Qu=m.__private__.putTrailer=function(){ae("trailer"),ae("<<"),ae("/Size "+(se+1)),ae("/Root "+se+" 0 R"),ae("/Info "+(se-1)+" 0 R"),d!==null&&ae("/Encrypt "+on.oid+" 0 R"),ae("/ID [ <"+V+"> <"+V+"> ]"),ae(">>")},mc=m.__private__.putHeader=function(){ae("%PDF-"+b),ae("%")},Yu=m.__private__.putXRef=function(){var _="0000000000";ae("xref"),ae("0 "+(se+1)),ae("0000000000 65535 f ");for(var K=1;K<=se;K++)typeof le[K]=="function"?ae((_+le[K]()).slice(-10)+" 00000 n "):le[K]!==void 0?ae((_+le[K]).slice(-10)+" 00000 n "):ae("0000000000 00000 n ")},Gi=m.__private__.buildDocument=function(){Xe(),be(ue),Pt.publish("buildDocument"),mc(),ws(),cl(),ll(),d!==null&&Gu(),ra(),Wi();var _=de;return Yu(),Qu(),ae("startxref"),ae(""+_),ae("%%EOF"),be(Te[Y]),ue.join(`
`)},za=m.__private__.getBlob=function(_){return new Blob([De(_)],{type:"application/pdf"})},$a=m.output=m.__private__.output=Qr(function(_,K){switch(typeof(K=K||{})=="string"?K={filename:K}:K.filename=K.filename||"generated.pdf",_){case void 0:return Gi();case"save":m.save(K.filename);break;case"arraybuffer":return De(Gi());case"blob":return za(Gi());case"bloburi":case"bloburl":if(vt.URL!==void 0&&typeof vt.URL.createObjectURL=="function")return vt.URL&&vt.URL.createObjectURL(za(Gi()))||void 0;tn.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var ie="",ce=Gi();try{ie=iv(ce)}catch{ie=iv(unescape(encodeURIComponent(ce)))}return"data:application/pdf;filename="+K.filename+";base64,"+ie;case"pdfobjectnewwindow":if(Object.prototype.toString.call(vt)==="[object Window]"){var ve="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",ke=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';K.pdfObjectUrl&&(ve=K.pdfObjectUrl,ke="");var Oe='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+ve+'"'+ke+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(K)+");<\/script></body></html>",Qe=vt.open();return Qe!==null&&Qe.document.write(Oe),Qe}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(vt)==="[object Window]"){var f='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(K.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+K.filename+'" width="500px" height="400px" /></body></html>',P=vt.open();if(P!==null){P.document.write(f);var D=this;P.document.documentElement.querySelector("#pdfViewer").onload=function(){P.document.title=K.filename,P.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(D.output("bloburl"))}}return P}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(vt)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var X='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",K)+'"></iframe></body></html>',ge=vt.open();if(ge!==null&&(ge.document.write(X),ge.document.title=K.filename),ge||typeof safari>"u")return ge;break;case"datauri":case"dataurl":return vt.document.location.href=this.output("datauristring",K);default:return null}}),Ns=function(_){return Array.isArray(Rr)===!0&&Rr.indexOf(_)>-1};switch(r){case"pt":ze=1;break;case"mm":ze=72/25.4;break;case"cm":ze=72/2.54;break;case"in":ze=72;break;case"px":ze=Ns("px_scaling")==1?.75:96/72;break;case"pc":case"em":ze=12;break;case"ex":ze=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);ze=r}var on=null;we(),z();var gc=function(_){return d!==null?on.encryptor(_,0):function(K){return K}},dl=m.__private__.getPageInfo=m.getPageInfo=function(_){if(isNaN(_)||_%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:lt[_].objId,pageNumber:_,pageContext:lt[_]}},yt=m.__private__.getPageInfoByObjId=function(_){if(isNaN(_)||_%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var K in lt)if(lt[K].objId===_)break;return dl(K)},As=m.__private__.getCurrentPageInfo=m.getCurrentPageInfo=function(){return{objId:lt[Y].objId,pageNumber:Y,pageContext:lt[Y]}};m.addPage=function(){return ta.apply(this,arguments),this},m.setPage=function(){return hl.apply(this,arguments),be.call(this,Te[Y]),this},m.insertPage=function(_){return this.addPage(),this.movePage(Y,_),this},m.movePage=function(_,K){var ie,ce;if(_>K){ie=Te[_],ce=lt[_];for(var ve=_;ve>K;ve--)Te[ve]=Te[ve-1],lt[ve]=lt[ve-1];Te[K]=ie,lt[K]=ce,this.setPage(K)}else if(_<K){ie=Te[_],ce=lt[_];for(var ke=_;ke<K;ke++)Te[ke]=Te[ke+1],lt[ke]=lt[ke+1];Te[K]=ie,lt[K]=ce,this.setPage(K)}return this},m.deletePage=function(){return qa.apply(this,arguments),this},m.__private__.text=m.text=function(_,K,ie,ce,ve){var ke,Oe,Qe,f,P,D,X,ge,Ne,Ve=(ce=ce||{}).scope||this;if(typeof _=="number"&&typeof K=="number"&&(typeof ie=="string"||Array.isArray(ie))){var St=ie;ie=K,K=_,_=St}if(arguments[3]instanceof nt?(y("The transform parameter of text() with a Matrix value"),Ne=ve):(Qe=arguments[4],f=arguments[5],Gt(X=arguments[3])==="object"&&X!==null||(typeof Qe=="string"&&(f=Qe,Qe=null),typeof X=="string"&&(f=X,X=null),typeof X=="number"&&(Qe=X,X=null),ce={flags:X,angle:Qe,align:f})),isNaN(K)||isNaN(ie)||_==null)throw new Error("Invalid arguments passed to jsPDF.text");if(_.length===0)return Ve;var jt="",Nt=!1,zt=typeof ce.lineHeightFactor=="number"?ce.lineHeightFactor:qt,Zt=Ve.internal.scaleFactor;function Zi(nn){return nn=nn.split("	").join(Array(ce.TabLen||9).join(" ")),En(nn,X)}function ar(nn){for(var rn,Ln=nn.concat(),Qn=[],ha=Ln.length;ha--;)typeof(rn=Ln.shift())=="string"?Qn.push(rn):Array.isArray(nn)&&(rn.length===1||rn[1]===void 0&&rn[2]===void 0)?Qn.push(rn[0]):Qn.push([rn[0],rn[1],rn[2]]);return Qn}function Is(nn,rn){var Ln;if(typeof nn=="string")Ln=rn(nn)[0];else if(Array.isArray(nn)){for(var Qn,ha,sh=nn.concat(),Ic=[],Yd=sh.length;Yd--;)typeof(Qn=sh.shift())=="string"?Ic.push(rn(Qn)[0]):Array.isArray(Qn)&&typeof Qn[0]=="string"&&(ha=rn(Qn[0],Qn[1],Qn[2]),Ic.push([ha[0],ha[1],ha[2]]));Ln=Ic}return Ln}var Ps=!1,Xu=!0;if(typeof _=="string")Ps=!0;else if(Array.isArray(_)){var Zu=_.concat();Oe=[];for(var bc,or=Zu.length;or--;)(typeof(bc=Zu.shift())!="string"||Array.isArray(bc)&&typeof bc[0]!="string")&&(Xu=!1);Ps=Xu}if(Ps===!1)throw new Error('Type of text must be string or Array. "'+_+'" is not recognized.');typeof _=="string"&&(_=_.match(/[\r?\n]/)?_.split(/\r\n|\r|\n/g):[_]);var xc=Ie/Ve.internal.scaleFactor,Sc=xc*(zt-1);switch(ce.baseline){case"bottom":ie-=Sc;break;case"top":ie+=xc-Sc;break;case"hanging":ie+=xc-2*Sc;break;case"middle":ie+=xc/2-Sc}if((D=ce.maxWidth||0)>0&&(typeof _=="string"?_=Ve.splitTextToSize(_,D):Object.prototype.toString.call(_)==="[object Array]"&&(_=_.reduce(function(nn,rn){return nn.concat(Ve.splitTextToSize(rn,D))},[]))),ke={text:_,x:K,y:ie,options:ce,mutex:{pdfEscape:En,activeFontKey:ct,fonts:ft,activeFontSize:Ie}},Pt.publish("preProcessText",ke),_=ke.text,Qe=(ce=ke.options).angle,!(Ne instanceof nt)&&Qe&&typeof Qe=="number"){Qe*=Math.PI/180,ce.rotationDirection===0&&(Qe=-Qe),C===N.ADVANCED&&(Qe=-Qe);var Nc=Math.cos(Qe),eh=Math.sin(Qe);Ne=new nt(Nc,eh,-eh,Nc,0,0)}else Qe&&Qe instanceof nt&&(Ne=Qe);C!==N.ADVANCED||Ne||(Ne=yr),(P=ce.charSpace||sa)!==void 0&&(jt+=j(I(P))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(ge=ce.horizontalScale)!==void 0&&(jt+=j(100*ge)+` Tz
`),ce.lang;var Yr=-1,ug=ce.renderingMode!==void 0?ce.renderingMode:ce.stroke,th=Ve.internal.getCurrentPageInfo().pageContext;switch(ug){case 0:case!1:case"fill":Yr=0;break;case 1:case!0:case"stroke":Yr=1;break;case 2:case"fillThenStroke":Yr=2;break;case 3:case"invisible":Yr=3;break;case 4:case"fillAndAddForClipping":Yr=4;break;case 5:case"strokeAndAddPathForClipping":Yr=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Yr=6;break;case 7:case"addToPathForClipping":Yr=7}var Hd=th.usedRenderingMode!==void 0?th.usedRenderingMode:-1;Yr!==-1?jt+=Yr+` Tr
`:Hd!==-1&&(jt+=`0 Tr
`),Yr!==-1&&(th.usedRenderingMode=Yr),f=ce.align||"left";var Pi,Ac=Ie*zt,Wd=Ve.internal.pageSize.getWidth(),Gd=ft[ct];P=ce.charSpace||sa,D=ce.maxWidth||0,X=Object.assign({autoencode:!0,noBOM:!0},ce.flags);var io=[],_l=function(nn){return Ve.getStringUnitWidth(nn,{font:Gd,charSpace:P,fontSize:Ie,doKerning:!1})*Ie/Zt};if(Object.prototype.toString.call(_)==="[object Array]"){var Jr;Oe=ar(_),f!=="left"&&(Pi=Oe.map(_l));var Mr,so=0;if(f==="right"){K-=Pi[0],_=[],or=Oe.length;for(var la=0;la<or;la++)la===0?(Mr=mi(K),Jr=Gn(ie)):(Mr=I(so-Pi[la]),Jr=-Ac),_.push([Oe[la],Mr,Jr]),so=Pi[la]}else if(f==="center"){K-=Pi[0]/2,_=[],or=Oe.length;for(var ca=0;ca<or;ca++)ca===0?(Mr=mi(K),Jr=Gn(ie)):(Mr=I((so-Pi[ca])/2),Jr=-Ac),_.push([Oe[ca],Mr,Jr]),so=Pi[ca]}else if(f==="left"){_=[],or=Oe.length;for(var Ec=0;Ec<or;Ec++)_.push(Oe[Ec])}else if(f==="justify"&&Gd.encoding==="Identity-H"){_=[],or=Oe.length,D=D!==0?D:Wd;for(var ua=0,jn=0;jn<or;jn++)if(Jr=jn===0?Gn(ie):-Ac,Mr=jn===0?mi(K):ua,jn<or-1){var nh=I((D-Pi[jn])/(Oe[jn].split(" ").length-1)),Vr=Oe[jn].split(" ");_.push([Vr[0]+" ",Mr,Jr]),ua=0;for(var Ci=1;Ci<Vr.length;Ci++){var kc=(_l(Vr[Ci-1]+" "+Vr[Ci])-_l(Vr[Ci]))*Zt+nh;Ci==Vr.length-1?_.push([Vr[Ci],kc,0]):_.push([Vr[Ci]+" ",kc,0]),ua-=kc}}else _.push([Oe[jn],Mr,Jr]);_.push(["",ua,0])}else{if(f!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(_=[],or=Oe.length,D=D!==0?D:Wd,jn=0;jn<or;jn++)Jr=jn===0?Gn(ie):-Ac,Mr=jn===0?mi(K):0,jn<or-1?io.push(j(I((D-Pi[jn])/(Oe[jn].split(" ").length-1)))):io.push(0),_.push([Oe[jn],Mr,Jr])}}var Qd=typeof ce.R2L=="boolean"?ce.R2L:We;Qd===!0&&(_=Is(_,function(nn,rn,Ln){return[nn.split("").reverse().join(""),rn,Ln]})),ke={text:_,x:K,y:ie,options:ce,mutex:{pdfEscape:En,activeFontKey:ct,fonts:ft,activeFontSize:Ie}},Pt.publish("postProcessText",ke),_=ke.text,Nt=ke.mutex.isHex||!1;var rh=ft[ct].encoding;rh!=="WinAnsiEncoding"&&rh!=="StandardEncoding"||(_=Is(_,function(nn,rn,Ln){return[Zi(nn),rn,Ln]})),Oe=ar(_),_=[];for(var bl,xl,ao,Sl=0,Tc=1,Nl=Array.isArray(Oe[0])?Tc:Sl,oo="",ih=function(nn,rn,Ln){var Qn="";return Ln instanceof nt?(Ln=typeof ce.angle=="number"?Wr(Ln,new nt(1,0,0,1,nn,rn)):Wr(new nt(1,0,0,1,nn,rn),Ln),C===N.ADVANCED&&(Ln=Wr(new nt(1,0,0,-1,0,0),Ln)),Qn=Ln.join(" ")+` Tm
`):Qn=j(nn)+" "+j(rn)+` Td
`,Qn},ji=0;ji<Oe.length;ji++){switch(oo="",Nl){case Tc:ao=(Nt?"<":"(")+Oe[ji][0]+(Nt?">":")"),bl=parseFloat(Oe[ji][1]),xl=parseFloat(Oe[ji][2]);break;case Sl:ao=(Nt?"<":"(")+Oe[ji]+(Nt?">":")"),bl=mi(K),xl=Gn(ie)}io!==void 0&&io[ji]!==void 0&&(oo=io[ji]+` Tw
`),ji===0?_.push(oo+ih(bl,xl,Ne)+ao):Nl===Sl?_.push(oo+ao):Nl===Tc&&_.push(oo+ih(bl,xl,Ne)+ao)}_=Nl===Sl?_.join(` Tj
T* `):_.join(` Tj
`),_+=` Tj
`;var Li=`BT
/`;return Li+=ct+" "+Ie+` Tf
`,Li+=j(Ie*zt)+` TL
`,Li+=Ji+`
`,Li+=jt,Li+=_,ae(Li+="ET"),g[ct]=!0,Ve};var Ju=m.__private__.clip=m.clip=function(_){return ae(_==="evenodd"?"W*":"W"),this};m.clipEvenOdd=function(){return Ju("evenodd")},m.__private__.discardPath=m.discardPath=function(){return ae("n"),this};var Ii=m.__private__.isValidStyle=function(_){var K=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(_)!==-1&&(K=!0),K};m.__private__.setDefaultPathOperation=m.setDefaultPathOperation=function(_){return Ii(_)&&(c=_),this};var vc=m.__private__.getStyle=m.getStyle=function(_){var K=c;switch(_){case"D":case"S":K="S";break;case"F":K="f";break;case"FD":case"DF":K="B";break;case"f":case"f*":case"B":case"B*":K=_}return K},fi=m.close=function(){return ae("h"),this};m.stroke=function(){return ae("S"),this},m.fill=function(_){return Ha("f",_),this},m.fillEvenOdd=function(_){return Ha("f*",_),this},m.fillStroke=function(_){return Ha("B",_),this},m.fillStrokeEvenOdd=function(_){return Ha("B*",_),this};var Ha=function(_,K){Gt(K)==="object"?Ga(K,_):ae(_)},fl=function(_){_===null||C===N.ADVANCED&&_===void 0||(_=vc(_),ae(_))};function Wa(_,K,ie,ce,ve){var ke=new nu(K||this.boundingBox,ie||this.xStep,ce||this.yStep,this.gState,ve||this.matrix);ke.stream=this.stream;var Oe=_+"$$"+this.cloneIndex+++"$$";return Un(Oe,ke),ke}var Ga=function(_,K){var ie=vr[_.key],ce=xt[ie];if(ce instanceof Cl)ae("q"),ae(yc(K)),ce.gState&&m.setGState(ce.gState),ae(_.matrix.toString()+" cm"),ae("/"+ie+" sh"),ae("Q");else if(ce instanceof nu){var ve=new nt(1,0,0,-1,0,_r());_.matrix&&(ve=ve.multiply(_.matrix||yr),ie=Wa.call(ce,_.key,_.boundingBox,_.xStep,_.yStep,ve).id),ae("q"),ae("/Pattern cs"),ae("/"+ie+" scn"),ce.gState&&m.setGState(ce.gState),ae(K),ae("Q")}},yc=function(_){switch(_){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},Qi=m.moveTo=function(_,K){return ae(j(I(_))+" "+j(M(K))+" m"),this},pi=m.lineTo=function(_,K){return ae(j(I(_))+" "+j(M(K))+" l"),this},Yi=m.curveTo=function(_,K,ie,ce,ve,ke){return ae([j(I(_)),j(M(K)),j(I(ie)),j(M(ce)),j(I(ve)),j(M(ke)),"c"].join(" ")),this};m.__private__.line=m.line=function(_,K,ie,ce,ve){if(isNaN(_)||isNaN(K)||isNaN(ie)||isNaN(ce)||!Ii(ve))throw new Error("Invalid arguments passed to jsPDF.line");return C===N.COMPAT?this.lines([[ie-_,ce-K]],_,K,[1,1],ve||"S"):this.lines([[ie-_,ce-K]],_,K,[1,1]).stroke()},m.__private__.lines=m.lines=function(_,K,ie,ce,ve,ke){var Oe,Qe,f,P,D,X,ge,Ne,Ve,St,jt,Nt;if(typeof _=="number"&&(Nt=ie,ie=K,K=_,_=Nt),ce=ce||[1,1],ke=ke||!1,isNaN(K)||isNaN(ie)||!Array.isArray(_)||!Array.isArray(ce)||!Ii(ve)||typeof ke!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Qi(K,ie),Oe=ce[0],Qe=ce[1],P=_.length,St=K,jt=ie,f=0;f<P;f++)(D=_[f]).length===2?(St=D[0]*Oe+St,jt=D[1]*Qe+jt,pi(St,jt)):(X=D[0]*Oe+St,ge=D[1]*Qe+jt,Ne=D[2]*Oe+St,Ve=D[3]*Qe+jt,St=D[4]*Oe+St,jt=D[5]*Qe+jt,Yi(X,ge,Ne,Ve,St,jt));return ke&&fi(),fl(ve),this},m.path=function(_){for(var K=0;K<_.length;K++){var ie=_[K],ce=ie.c;switch(ie.op){case"m":Qi(ce[0],ce[1]);break;case"l":pi(ce[0],ce[1]);break;case"c":Yi.apply(this,ce);break;case"h":fi()}}return this},m.__private__.rect=m.rect=function(_,K,ie,ce,ve){if(isNaN(_)||isNaN(K)||isNaN(ie)||isNaN(ce)||!Ii(ve))throw new Error("Invalid arguments passed to jsPDF.rect");return C===N.COMPAT&&(ce=-ce),ae([j(I(_)),j(M(K)),j(I(ie)),j(I(ce)),"re"].join(" ")),fl(ve),this},m.__private__.triangle=m.triangle=function(_,K,ie,ce,ve,ke,Oe){if(isNaN(_)||isNaN(K)||isNaN(ie)||isNaN(ce)||isNaN(ve)||isNaN(ke)||!Ii(Oe))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[ie-_,ce-K],[ve-ie,ke-ce],[_-ve,K-ke]],_,K,[1,1],Oe,!0),this},m.__private__.roundedRect=m.roundedRect=function(_,K,ie,ce,ve,ke,Oe){if(isNaN(_)||isNaN(K)||isNaN(ie)||isNaN(ce)||isNaN(ve)||isNaN(ke)||!Ii(Oe))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Qe=4/3*(Math.SQRT2-1);return ve=Math.min(ve,.5*ie),ke=Math.min(ke,.5*ce),this.lines([[ie-2*ve,0],[ve*Qe,0,ve,ke-ke*Qe,ve,ke],[0,ce-2*ke],[0,ke*Qe,-ve*Qe,ke,-ve,ke],[2*ve-ie,0],[-ve*Qe,0,-ve,-ke*Qe,-ve,-ke],[0,2*ke-ce],[0,-ke*Qe,ve*Qe,-ke,ve,-ke]],_+ve,K,[1,1],Oe,!0),this},m.__private__.ellipse=m.ellipse=function(_,K,ie,ce,ve){if(isNaN(_)||isNaN(K)||isNaN(ie)||isNaN(ce)||!Ii(ve))throw new Error("Invalid arguments passed to jsPDF.ellipse");var ke=4/3*(Math.SQRT2-1)*ie,Oe=4/3*(Math.SQRT2-1)*ce;return Qi(_+ie,K),Yi(_+ie,K-Oe,_+ke,K-ce,_,K-ce),Yi(_-ke,K-ce,_-ie,K-Oe,_-ie,K),Yi(_-ie,K+Oe,_-ke,K+ce,_,K+ce),Yi(_+ke,K+ce,_+ie,K+Oe,_+ie,K),fl(ve),this},m.__private__.circle=m.circle=function(_,K,ie,ce){if(isNaN(_)||isNaN(K)||isNaN(ie)||!Ii(ce))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(_,K,ie,ie,ce)},m.setFont=function(_,K,ie){return ie&&(K=B(K,ie)),ct=na(_,K,{disableWarning:!1}),this};var pl=m.__private__.getFont=m.getFont=function(){return ft[na.apply(m,arguments)]};m.__private__.getFontList=m.getFontList=function(){var _,K,ie={};for(_ in Tt)if(Tt.hasOwnProperty(_))for(K in ie[_]=[],Tt[_])Tt[_].hasOwnProperty(K)&&ie[_].push(K);return ie},m.addFont=function(_,K,ie,ce,ve){var ke=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&ke.indexOf(arguments[3])!==-1?ve=arguments[3]:arguments[3]&&ke.indexOf(arguments[3])==-1&&(ie=B(ie,ce)),ve=ve||"Identity-H",ul.call(this,_,K,ie,ve)};var qt,ml=t.lineWidth||.200025,Qa=m.__private__.getLineWidth=m.getLineWidth=function(){return ml},gl=m.__private__.setLineWidth=m.setLineWidth=function(_){return ml=_,ae(j(I(_))+" w"),this};m.__private__.setLineDash=gt.API.setLineDash=gt.API.setLineDashPattern=function(_,K){if(_=_||[],K=K||0,isNaN(K)||!Array.isArray(_))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return _=_.map(function(ie){return j(I(ie))}).join(" "),K=j(I(K)),ae("["+_+"] "+K+" d"),this};var vl=m.__private__.getLineHeight=m.getLineHeight=function(){return Ie*qt};m.__private__.getLineHeight=m.getLineHeight=function(){return Ie*qt};var yl=m.__private__.setLineHeightFactor=m.setLineHeightFactor=function(_){return typeof(_=_||1.15)=="number"&&(qt=_),this},ia=m.__private__.getLineHeightFactor=m.getLineHeightFactor=function(){return qt};yl(t.lineHeight);var mi=m.__private__.getHorizontalCoordinate=function(_){return I(_)},Gn=m.__private__.getVerticalCoordinate=function(_){return C===N.ADVANCED?_:lt[Y].mediaBox.topRightY-lt[Y].mediaBox.bottomLeftY-I(_)},wc=m.__private__.getHorizontalCoordinateString=m.getHorizontalCoordinateString=function(_){return j(mi(_))},Es=m.__private__.getVerticalCoordinateString=m.getVerticalCoordinateString=function(_){return j(Gn(_))},sr=t.strokeColor||"0 G";m.__private__.getStrokeColor=m.getDrawColor=function(){return Gr(sr)},m.__private__.setStrokeColor=m.setDrawColor=function(_,K,ie,ce){return sr=Dr({ch1:_,ch2:K,ch3:ie,ch4:ce,pdfColorType:"draw",precision:2}),ae(sr),this};var Ya=t.fillColor||"0 g";m.__private__.getFillColor=m.getFillColor=function(){return Gr(Ya)},m.__private__.setFillColor=m.setFillColor=function(_,K,ie,ce){return Ya=Dr({ch1:_,ch2:K,ch3:ie,ch4:ce,pdfColorType:"fill",precision:2}),ae(Ya),this};var Ji=t.textColor||"0 g",Ja=m.__private__.getTextColor=m.getTextColor=function(){return Gr(Ji)};m.__private__.setTextColor=m.setTextColor=function(_,K,ie,ce){return Ji=Dr({ch1:_,ch2:K,ch3:ie,ch4:ce,pdfColorType:"text",precision:3}),this};var sa=t.charSpace,Xa=m.__private__.getCharSpace=m.getCharSpace=function(){return parseFloat(sa||0)};m.__private__.setCharSpace=m.setCharSpace=function(_){if(isNaN(_))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return sa=_,this};var wl=0;m.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},m.__private__.setLineCap=m.setLineCap=function(_){var K=m.CapJoinStyles[_];if(K===void 0)throw new Error("Line cap style of '"+_+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return wl=K,ae(K+" J"),this};var Za=0;m.__private__.setLineJoin=m.setLineJoin=function(_){var K=m.CapJoinStyles[_];if(K===void 0)throw new Error("Line join style of '"+_+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Za=K,ae(K+" j"),this},m.__private__.setLineMiterLimit=m.__private__.setMiterLimit=m.setLineMiterLimit=m.setMiterLimit=function(_){if(_=_||0,isNaN(_))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return ae(j(I(_))+" M"),this},m.GState=lm,m.setGState=function(_){(_=typeof _=="string"?Bt[Wn[_]]:ks(null,_)).equals(Nn)||(ae("/"+_.id+" gs"),Nn=_)};var ks=function(_,K){if(!_||!Wn[_]){var ie=!1;for(var ce in Bt)if(Bt.hasOwnProperty(ce)&&Bt[ce].equals(K)){ie=!0;break}if(ie)K=Bt[ce];else{var ve="GS"+(Object.keys(Bt).length+1).toString(10);Bt[ve]=K,K.id=ve}return _&&(Wn[_]=K.id),Pt.publish("addGState",K),K}};m.addGState=function(_,K){return ks(_,K),this},m.saveGraphicsState=function(){return ae("q"),Vn.push({key:ct,size:Ie,color:Ji}),this},m.restoreGraphicsState=function(){ae("Q");var _=Vn.pop();return ct=_.key,Ie=_.size,Ji=_.color,Nn=null,this},m.setCurrentTransformationMatrix=function(_){return ae(_.toString()+" cm"),this},m.comment=function(_){return ae("#"+_),this};var aa=function(_,K){var ie=_||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return ie},set:function(ke){isNaN(ke)||(ie=parseFloat(ke))}});var ce=K||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return ce},set:function(ke){isNaN(ke)||(ce=parseFloat(ke))}});var ve="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return ve},set:function(ke){ve=ke.toString()}}),this},eo=function(_,K,ie,ce){aa.call(this,_,K),this.type="rect";var ve=ie||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return ve},set:function(Oe){isNaN(Oe)||(ve=parseFloat(Oe))}});var ke=ce||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return ke},set:function(Oe){isNaN(Oe)||(ke=parseFloat(Oe))}}),this},oa=function(){this.page=Dt,this.currentPage=Y,this.pages=Te.slice(0),this.pagesContext=lt.slice(0),this.x=_e,this.y=$e,this.matrix=mt,this.width=Ts(Y),this.height=_r(Y),this.outputDestination=Be,this.id="",this.objectNumber=-1};oa.prototype.restore=function(){Dt=this.page,Y=this.currentPage,lt=this.pagesContext,Te=this.pages,_e=this.x,$e=this.y,mt=this.matrix,no(Y,this.width),ro(Y,this.height),Be=this.outputDestination};var to=function(_,K,ie,ce,ve){hi.push(new oa),Dt=Y=0,Te=[],_e=_,$e=K,mt=ve,Or([ie,ce])},_c=function(_){if(fn[_])hi.pop().restore();else{var K=new oa,ie="Xo"+(Object.keys(Jt).length+1).toString(10);K.id=ie,fn[_]=ie,Jt[ie]=K,Pt.publish("addFormObject",K),hi.pop().restore()}};for(var Xi in m.beginFormObject=function(_,K,ie,ce,ve){return to(_,K,ie,ce,ve),this},m.endFormObject=function(_){return _c(_),this},m.doFormObject=function(_,K){var ie=Jt[fn[_]];return ae("q"),ae(K.toString()+" cm"),ae("/"+ie.id+" Do"),ae("Q"),this},m.getFormObject=function(_){var K=Jt[fn[_]];return{x:K.x,y:K.y,width:K.width,height:K.height,matrix:K.matrix}},m.save=function(_,K){return _=_||"generated.pdf",(K=K||{}).returnPromise=K.returnPromise||!1,K.returnPromise===!1?(Il(za(Gi()),_),typeof Il.unload=="function"&&vt.setTimeout&&setTimeout(Il.unload,911),this):new Promise(function(ie,ce){try{var ve=Il(za(Gi()),_);typeof Il.unload=="function"&&vt.setTimeout&&setTimeout(Il.unload,911),ie(ve)}catch(ke){ce(ke.message)}})},gt.API)gt.API.hasOwnProperty(Xi)&&(Xi==="events"&&gt.API.events.length?function(_,K){var ie,ce,ve;for(ve=K.length-1;ve!==-1;ve--)ie=K[ve][0],ce=K[ve][1],_.subscribe.apply(_,[ie].concat(typeof ce=="function"?[ce]:ce))}(Pt,gt.API.events):m[Xi]=gt.API[Xi]);var Ts=m.getPageWidth=function(_){return(lt[_=_||Y].mediaBox.topRightX-lt[_].mediaBox.bottomLeftX)/ze},no=m.setPageWidth=function(_,K){lt[_].mediaBox.topRightX=K*ze+lt[_].mediaBox.bottomLeftX},_r=m.getPageHeight=function(_){return(lt[_=_||Y].mediaBox.topRightY-lt[_].mediaBox.bottomLeftY)/ze},ro=m.setPageHeight=function(_,K){lt[_].mediaBox.topRightY=K*ze+lt[_].mediaBox.bottomLeftY};return m.internal={pdfEscape:En,getStyle:vc,getFont:pl,getFontSize:Ke,getCharSpace:Xa,getTextColor:Ja,getLineHeight:vl,getLineHeightFactor:ia,getLineWidth:Qa,write:He,getHorizontalCoordinate:mi,getVerticalCoordinate:Gn,getCoordinateString:wc,getVerticalCoordinateString:Es,collections:{},newObject:Pn,newAdditionalObject:Ua,newObjectDeferred:An,newObjectDeferredBegin:Bn,getFilters:Fr,putStream:Cn,events:Pt,scaleFactor:ze,pageSize:{getWidth:function(){return Ts(Y)},setWidth:function(_){no(Y,_)},getHeight:function(){return _r(Y)},setHeight:function(_){ro(Y,_)}},encryptionOptions:d,encryption:on,getEncryptor:gc,output:$a,getNumberOfPages:$t,pages:Te,out:ae,f2:L,f3:E,getPageInfo:dl,getPageInfoByObjId:yt,getCurrentPageInfo:As,getPDFVersion:x,Point:aa,Rectangle:eo,Matrix:nt,hasHotfix:Ns},Object.defineProperty(m.internal.pageSize,"width",{get:function(){return Ts(Y)},set:function(_){no(Y,_)},enumerable:!0,configurable:!0}),Object.defineProperty(m.internal.pageSize,"height",{get:function(){return _r(Y)},set:function(_){ro(Y,_)},enumerable:!0,configurable:!0}),pc.call(m,he),ct="F1",ta(i,n),Pt.publish("initialized"),m}Bc.prototype.lsbFirstWord=function(t){return String.fromCharCode(t>>0&255,t>>8&255,t>>16&255,t>>24&255)},Bc.prototype.toHexString=function(t){return t.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Bc.prototype.hexToBytes=function(t){for(var e=[],n=0;n<t.length;n+=2)e.push(String.fromCharCode(parseInt(t.substr(n,2),16)));return e.join("")},Bc.prototype.processOwnerPassword=function(t,e){return av(sv(e).substr(0,5),t)},Bc.prototype.encryptor=function(t,e){var n=sv(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(r){return av(n,r)}},lm.prototype.equals=function(t){var e,n="id,objectNumber,equals";if(!t||Gt(t)!==Gt(this))return!1;var r=0;for(e in this)if(!(n.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this[e]!==t[e])return!1;r++}for(e in t)t.hasOwnProperty(e)&&n.indexOf(e)<0&&r--;return r===0},gt.API={events:[]},gt.version="2.5.2";var Tn=gt.API,dy=1,cc=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Fc=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},At=function(t){return t.toFixed(2)},wo=function(t){return t.toFixed(5)};Tn.__acroform__={};var ui=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},O_=function(t){return t*dy},Ls=function(t){var e=new kN,n=it.internal.getHeight(t)||0,r=it.internal.getWidth(t)||0;return e.BBox=[0,0,Number(At(r)),Number(At(n))],e},cD=Tn.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|=1<<e},uD=Tn.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&=~(1<<e)},hD=Tn.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return t&1<<e?1:0},Fn=Tn.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return hD(t,e-1)},On=Tn.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return cD(t,e-1)},Mn=Tn.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return uD(t,e-1)},dD=Tn.__acroform__.calculateCoordinates=function(t,e){var n=e.internal.getHorizontalCoordinate,r=e.internal.getVerticalCoordinate,i=t[0],s=t[1],a=t[2],o=t[3],l={};return l.lowerLeft_X=n(i)||0,l.lowerLeft_Y=r(s+o)||0,l.upperRight_X=n(i+a)||0,l.upperRight_Y=r(s)||0,[Number(At(l.lowerLeft_X)),Number(At(l.lowerLeft_Y)),Number(At(l.upperRight_X)),Number(At(l.upperRight_Y))]},fD=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],n=t._V||t.DV,r=ov(t,n),i=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+i+" "+At(r.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(r.text),e.push("ET"),e.push("Q"),e.push("EMC");var s=Ls(t);return s.scope=t.scope,s.stream=e.join(`
`),s}},ov=function(t,e){var n=t.fontSize===0?t.maxFontSize:t.fontSize,r={text:"",fontSize:""},i=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");i=t.multiline?i.map(function(E){return E.split(`
`)}):i.map(function(E){return[E]});var s=n,a=it.internal.getHeight(t)||0;a=a<0?-a:a;var o=it.internal.getWidth(t)||0;o=o<0?-o:o;var l=function(E,I,k){if(E+1<i.length){var M=I+" "+i[E+1][0];return Kf(M,t,k).width<=o-4}return!1};s++;e:for(;s>0;){e="",s--;var c,d,p=Kf("3",t,s).height,g=t.multiline?a-s:(a-p)/2,m=g+=2,b=0,x=0,T=0;if(s<=0){e=`(...) Tj
`,e+="% Width of Text: "+Kf(e,t,s=12).width+", FieldWidth:"+o+`
`;break}for(var w="",N=0,C=0;C<i.length;C++)if(i.hasOwnProperty(C)){var F=!1;if(i[C].length!==1&&T!==i[C].length-1){if((p+2)*(N+2)+2>a)continue e;w+=i[C][T],F=!0,x=C,C--}else{w=(w+=i[C][T]+" ").substr(w.length-1)==" "?w.substr(0,w.length-1):w;var Q=parseInt(C),B=l(Q,w,s),j=C>=i.length-1;if(B&&!j){w+=" ",T=0;continue}if(B||j){if(j)x=Q;else if(t.multiline&&(p+2)*(N+2)+2>a)continue e}else{if(!t.multiline||(p+2)*(N+2)+2>a)continue e;x=Q}}for(var y="",S=b;S<=x;S++){var L=i[S];if(t.multiline){if(S===x){y+=L[T]+" ",T=(T+1)%L.length;continue}if(S===b){y+=L[L.length-1]+" ";continue}}y+=L[0]+" "}switch(y=y.substr(y.length-1)==" "?y.substr(0,y.length-1):y,d=Kf(y,t,s).width,t.textAlign){case"right":c=o-d-2;break;case"center":c=(o-d)/2;break;case"left":default:c=2}e+=At(c)+" "+At(m)+` Td
`,e+="("+cc(y)+`) Tj
`,e+=-At(c)+` 0 Td
`,m=-(s+2),d=0,b=F?x:x+1,N++,w=""}break}return r.text=e,r.fontSize=s,r},Kf=function(t,e,n){var r=e.scope.internal.getFont(e.fontName,e.fontStyle),i=e.scope.getStringUnitWidth(t,{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:e.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:i}},pD={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},mD=function(t,e){var n={type:"reference",object:t};e.internal.getPageInfo(t.page).pageContext.annotations.find(function(r){return r.type===n.type&&r.object===n.object})===void 0&&e.internal.getPageInfo(t.page).pageContext.annotations.push(n)},gD=function(t,e){for(var n in t)if(t.hasOwnProperty(n)){var r=n,i=t[n];e.internal.newObjectDeferredBegin(i.objId,!0),Gt(i)==="object"&&typeof i.putStream=="function"&&i.putStream(),delete t[r]}},vD=function(t,e){if(e.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(vs.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(pD)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");dy=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new TN,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(n){n.internal.events.unsubscribe(n.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete n.internal.acroformPlugin.acroFormDictionaryRoot._eventID,n.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(n){n.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=n.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in r)if(r.hasOwnProperty(i)){var s=r[i];s.objId=void 0,s.hasAnnotation&&mD(s,n)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(n){if(n.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");n.internal.write("/AcroForm "+n.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(n){(function(r,i){var s=!r;for(var a in r||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(a)){var o=r[a],l=[],c=o.Rect;if(o.Rect&&(o.Rect=dD(o.Rect,i)),i.internal.newObjectDeferredBegin(o.objId,!0),o.DA=it.createDefaultAppearanceStream(o),Gt(o)==="object"&&typeof o.getKeyValueListForStream=="function"&&(l=o.getKeyValueListForStream()),o.Rect=c,o.hasAppearanceStream&&!o.appearanceStreamContent){var d=fD(o);l.push({key:"AP",value:"<</N "+d+">>"}),i.internal.acroformPlugin.xForms.push(d)}if(o.appearanceStreamContent){var p="";for(var g in o.appearanceStreamContent)if(o.appearanceStreamContent.hasOwnProperty(g)){var m=o.appearanceStreamContent[g];if(p+="/"+g+" ",p+="<<",Object.keys(m).length>=1||Array.isArray(m)){for(var a in m)if(m.hasOwnProperty(a)){var b=m[a];typeof b=="function"&&(b=b.call(i,o)),p+="/"+a+" "+b+" ",i.internal.acroformPlugin.xForms.indexOf(b)>=0||i.internal.acroformPlugin.xForms.push(b)}}else typeof(b=m)=="function"&&(b=b.call(i,o)),p+="/"+a+" "+b,i.internal.acroformPlugin.xForms.indexOf(b)>=0||i.internal.acroformPlugin.xForms.push(b);p+=">>"}l.push({key:"AP",value:`<<
`+p+">>"})}i.internal.putStream({additionalKeyValues:l,objectId:o.objId}),i.internal.out("endobj")}s&&gD(i.internal.acroformPlugin.xForms,i)})(n,t)}),t.internal.acroformPlugin.isInitialized=!0}},EN=Tn.__acroform__.arrayToPdfArray=function(t,e,n){var r=function(a){return a};if(Array.isArray(t)){for(var i="[",s=0;s<t.length;s++)switch(s!==0&&(i+=" "),Gt(t[s])){case"boolean":case"number":case"object":i+=t[s].toString();break;case"string":t[s].substr(0,1)!=="/"?(e!==void 0&&n&&(r=n.internal.getEncryptor(e)),i+="("+cc(r(t[s].toString()))+")"):i+=t[s].toString()}return i+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},b1=function(t,e,n){var r=function(i){return i};return e!==void 0&&n&&(r=n.internal.getEncryptor(e)),(t=t||"").toString(),t="("+cc(r(t))+")"},Ms=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Ms.prototype.toString=function(){return this.objId+" 0 R"},Ms.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},Ms.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var n in e)if(Object.getOwnPropertyDescriptor(this,e[n]).configurable===!1){var r=e[n],i=this[r];i&&(Array.isArray(i)?t.push({key:r,value:EN(i,this.objId,this.scope)}):i instanceof Ms?(i.scope=this.scope,t.push({key:r,value:i.objId+" 0 R"})):typeof i!="function"&&t.push({key:r,value:i}))}return t};var kN=function(){Ms.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(n){t=n.trim()},get:function(){return t||null}})};ui(kN,Ms);var TN=function(){Ms.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var n=function(r){return r};return this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),"("+cc(n(t))+")"}},set:function(n){t=n}})};ui(TN,Ms);var vs=function t(){Ms.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(w){if(isNaN(w))throw new Error('Invalid value "'+w+'" for attribute F supplied.');e=w}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Fn(e,3)},set:function(w){w?this.F=On(e,3):this.F=Mn(e,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(w){if(isNaN(w))throw new Error('Invalid value "'+w+'" for attribute Ff supplied.');n=w}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(w){r=w!==void 0?w:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(w){r[0]=w}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(w){r[1]=w}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(w){r[2]=w}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(w){r[3]=w}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(w){switch(w){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=w;break;default:throw new Error('Invalid value "'+w+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof cm)return;s="FieldObject"+t.FieldNum++}var w=function(N){return N};return this.scope&&(w=this.scope.internal.getEncryptor(this.objId)),"("+cc(w(s))+")"},set:function(w){s=w.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(w){s=w}});var a="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return a},set:function(w){a=w}});var o="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return o},set:function(w){o=w}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(w){l=w}});var c=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return c===void 0?50/dy:c},set:function(w){c=w}});var d="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return d},set:function(w){d=w}});var p="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!p||this instanceof cm||this instanceof Bl))return b1(p,this.objId,this.scope)},set:function(w){w=w.toString(),p=w}});var g=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(g)return this instanceof rr?g:b1(g,this.objId,this.scope)},set:function(w){w=w.toString(),g=this instanceof rr?w:w.substr(0,1)==="("?Fc(w.substr(1,w.length-2)):Fc(w)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof rr?Fc(g.substr(1,g.length-1)):g},set:function(w){w=w.toString(),g=this instanceof rr?"/"+w:w}});var m=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(m)return m},set:function(w){this.V=w}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(m)return this instanceof rr?m:b1(m,this.objId,this.scope)},set:function(w){w=w.toString(),m=this instanceof rr?w:w.substr(0,1)==="("?Fc(w.substr(1,w.length-2)):Fc(w)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof rr?Fc(m.substr(1,m.length-1)):m},set:function(w){w=w.toString(),m=this instanceof rr?"/"+w:w}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var b,x=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return x},set:function(w){w=!!w,x=w}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(b)return b},set:function(w){b=w}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Fn(this.Ff,1)},set:function(w){w?this.Ff=On(this.Ff,1):this.Ff=Mn(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Fn(this.Ff,2)},set:function(w){w?this.Ff=On(this.Ff,2):this.Ff=Mn(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Fn(this.Ff,3)},set:function(w){w?this.Ff=On(this.Ff,3):this.Ff=Mn(this.Ff,3)}});var T=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(T!==null)return T},set:function(w){if([0,1,2].indexOf(w)===-1)throw new Error('Invalid value "'+w+'" for attribute Q supplied.');T=w}}),Object.defineProperty(this,"textAlign",{get:function(){var w;switch(T){case 0:default:w="left";break;case 1:w="center";break;case 2:w="right"}return w},configurable:!0,enumerable:!0,set:function(w){switch(w){case"right":case 2:T=2;break;case"center":case 1:T=1;break;case"left":case 0:default:T=0}}})};ui(vs,Ms);var pu=function(){vs.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(n){t=n}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return EN(e,this.objId,this.scope)},set:function(n){var r,i;i=[],typeof(r=n)=="string"&&(i=function(s,a,o){o||(o=1);for(var l,c=[];l=a.exec(s);)c.push(l[o]);return c}(r,/\((.*?)\)/g)),e=i}}),this.getOptions=function(){return e},this.setOptions=function(n){e=n,this.sort&&e.sort()},this.addOption=function(n){n=(n=n||"").toString(),e.push(n),this.sort&&e.sort()},this.removeOption=function(n,r){for(r=r||!1,n=(n=n||"").toString();e.indexOf(n)!==-1&&(e.splice(e.indexOf(n),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Fn(this.Ff,18)},set:function(n){n?this.Ff=On(this.Ff,18):this.Ff=Mn(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Fn(this.Ff,19)},set:function(n){this.combo===!0&&(n?this.Ff=On(this.Ff,19):this.Ff=Mn(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Fn(this.Ff,20)},set:function(n){n?(this.Ff=On(this.Ff,20),e.sort()):this.Ff=Mn(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Fn(this.Ff,22)},set:function(n){n?this.Ff=On(this.Ff,22):this.Ff=Mn(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Fn(this.Ff,23)},set:function(n){n?this.Ff=On(this.Ff,23):this.Ff=Mn(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Fn(this.Ff,27)},set:function(n){n?this.Ff=On(this.Ff,27):this.Ff=Mn(this.Ff,27)}}),this.hasAppearanceStream=!1};ui(pu,vs);var mu=function(){pu.call(this),this.fontName="helvetica",this.combo=!1};ui(mu,pu);var gu=function(){mu.call(this),this.combo=!0};ui(gu,mu);var dp=function(){gu.call(this),this.edit=!0};ui(dp,gu);var rr=function(){vs.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Fn(this.Ff,15)},set:function(n){n?this.Ff=On(this.Ff,15):this.Ff=Mn(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Fn(this.Ff,16)},set:function(n){n?this.Ff=On(this.Ff,16):this.Ff=Mn(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Fn(this.Ff,17)},set:function(n){n?this.Ff=On(this.Ff,17):this.Ff=Mn(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Fn(this.Ff,26)},set:function(n){n?this.Ff=On(this.Ff,26):this.Ff=Mn(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var n=function(s){return s};if(this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var r,i=[];for(r in i.push("<<"),e)i.push("/"+r+" ("+cc(n(e[r]))+")");return i.push(">>"),i.join(`
`)}},set:function(n){Gt(n)==="object"&&(e=n)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(n){typeof n=="string"&&(e.CA=n)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(n){t="/"+n}})};ui(rr,vs);var fp=function(){rr.call(this),this.pushButton=!0};ui(fp,rr);var vu=function(){rr.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e!==void 0?e:[]}})};ui(vu,rr);var cm=function(){var t,e;vs.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(i){t=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(i){e=i}});var n,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(o){return o};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var s,a=[];for(s in a.push("<<"),r)a.push("/"+s+" ("+cc(i(r[s]))+")");return a.push(">>"),a.join(`
`)},set:function(i){Gt(i)==="object"&&(r=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(i){typeof i=="string"&&(r.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(i){n=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(i){n="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=it.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};ui(cm,vs),vu.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var n=this.Kids[e];n.appearanceStreamContent=t.createAppearanceStream(n.optionName),n.caption=t.getCA()}},vu.prototype.createOption=function(t){var e=new cm;return e.Parent=this,e.optionName=t,this.Kids.push(e),yD.call(this.scope,e),e};var pp=function(){rr.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=it.CheckBox.createAppearanceStream()};ui(pp,rr);var Bl=function(){vs.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Fn(this.Ff,13)},set:function(e){e?this.Ff=On(this.Ff,13):this.Ff=Mn(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Fn(this.Ff,21)},set:function(e){e?this.Ff=On(this.Ff,21):this.Ff=Mn(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Fn(this.Ff,23)},set:function(e){e?this.Ff=On(this.Ff,23):this.Ff=Mn(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Fn(this.Ff,24)},set:function(e){e?this.Ff=On(this.Ff,24):this.Ff=Mn(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Fn(this.Ff,25)},set:function(e){e?this.Ff=On(this.Ff,25):this.Ff=Mn(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Fn(this.Ff,26)},set:function(e){e?this.Ff=On(this.Ff,26):this.Ff=Mn(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};ui(Bl,vs);var mp=function(){Bl.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Fn(this.Ff,14)},set:function(t){t?this.Ff=On(this.Ff,14):this.Ff=Mn(this.Ff,14)}}),this.password=!0};ui(mp,Bl);var it={CheckBox:{createAppearanceStream:function(){return{N:{On:it.CheckBox.YesNormal},D:{On:it.CheckBox.YesPushDown,Off:it.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=Ls(t);e.scope=t.scope;var n=[],r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,i=t.scope.__private__.encodeColorString(t.color),s=ov(t,t.caption);return n.push("0.749023 g"),n.push("0 0 "+At(it.internal.getWidth(t))+" "+At(it.internal.getHeight(t))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+r+" "+At(s.fontSize)+" Tf "+i),n.push("BT"),n.push(s.text),n.push("ET"),n.push("Q"),n.push("EMC"),e.stream=n.join(`
`),e},YesNormal:function(t){var e=Ls(t);e.scope=t.scope;var n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color),i=[],s=it.internal.getHeight(t),a=it.internal.getWidth(t),o=ov(t,t.caption);return i.push("1 g"),i.push("0 0 "+At(a)+" "+At(s)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+At(a-1)+" "+At(s-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+n+" "+At(o.fontSize)+" Tf "+r),i.push(o.text),i.push("ET"),i.push("Q"),e.stream=i.join(`
`),e},OffPushDown:function(t){var e=Ls(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+At(it.internal.getWidth(t))+" "+At(it.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:it.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=it.RadioButton.Circle.YesNormal,e.D[t]=it.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=Ls(t);e.scope=t.scope;var n=[],r=it.internal.getWidth(t)<=it.internal.getHeight(t)?it.internal.getWidth(t)/4:it.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=it.internal.Bezier_C,s=Number((r*i).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+wo(it.internal.getWidth(t)/2)+" "+wo(it.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+s+" "+s+" "+r+" 0 "+r+" c"),n.push("-"+s+" "+r+" -"+r+" "+s+" -"+r+" 0 c"),n.push("-"+r+" -"+s+" -"+s+" -"+r+" 0 -"+r+" c"),n.push(s+" -"+r+" "+r+" -"+s+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=Ls(t);e.scope=t.scope;var n=[],r=it.internal.getWidth(t)<=it.internal.getHeight(t)?it.internal.getWidth(t)/4:it.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*it.internal.Bezier_C).toFixed(5)),a=Number((r*it.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+wo(it.internal.getWidth(t)/2)+" "+wo(it.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),n.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),n.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),n.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+wo(it.internal.getWidth(t)/2)+" "+wo(it.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+a+" "+a+" "+r+" 0 "+r+" c"),n.push("-"+a+" "+r+" -"+r+" "+a+" -"+r+" 0 c"),n.push("-"+r+" -"+a+" -"+a+" -"+r+" 0 -"+r+" c"),n.push(a+" -"+r+" "+r+" -"+a+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(t){var e=Ls(t);e.scope=t.scope;var n=[],r=it.internal.getWidth(t)<=it.internal.getHeight(t)?it.internal.getWidth(t)/4:it.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*it.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+wo(it.internal.getWidth(t)/2)+" "+wo(it.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),n.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),n.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),n.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:it.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=it.RadioButton.Cross.YesNormal,e.D[t]=it.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=Ls(t);e.scope=t.scope;var n=[],r=it.internal.calculateCross(t);return n.push("q"),n.push("1 1 "+At(it.internal.getWidth(t)-2)+" "+At(it.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(At(r.x1.x)+" "+At(r.x1.y)+" m"),n.push(At(r.x2.x)+" "+At(r.x2.y)+" l"),n.push(At(r.x4.x)+" "+At(r.x4.y)+" m"),n.push(At(r.x3.x)+" "+At(r.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=Ls(t);e.scope=t.scope;var n=it.internal.calculateCross(t),r=[];return r.push("0.749023 g"),r.push("0 0 "+At(it.internal.getWidth(t))+" "+At(it.internal.getHeight(t))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+At(it.internal.getWidth(t)-2)+" "+At(it.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(At(n.x1.x)+" "+At(n.x1.y)+" m"),r.push(At(n.x2.x)+" "+At(n.x2.y)+" l"),r.push(At(n.x4.x)+" "+At(n.x4.y)+" m"),r.push(At(n.x3.x)+" "+At(n.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(t){var e=Ls(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+At(it.internal.getWidth(t))+" "+At(it.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+n}};it.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=it.internal.getWidth(t),n=it.internal.getHeight(t),r=Math.min(e,n);return{x1:{x:(e-r)/2,y:(n-r)/2+r},x2:{x:(e-r)/2+r,y:(n-r)/2},x3:{x:(e-r)/2,y:(n-r)/2},x4:{x:(e-r)/2+r,y:(n-r)/2+r}}}},it.internal.getWidth=function(t){var e=0;return Gt(t)==="object"&&(e=O_(t.Rect[2])),e},it.internal.getHeight=function(t){var e=0;return Gt(t)==="object"&&(e=O_(t.Rect[3])),e};var yD=Tn.addField=function(t){if(vD(this,t),!(t instanceof vs))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};Tn.AcroFormChoiceField=pu,Tn.AcroFormListBox=mu,Tn.AcroFormComboBox=gu,Tn.AcroFormEditBox=dp,Tn.AcroFormButton=rr,Tn.AcroFormPushButton=fp,Tn.AcroFormRadioButton=vu,Tn.AcroFormCheckBox=pp,Tn.AcroFormTextField=Bl,Tn.AcroFormPasswordField=mp,Tn.AcroFormAppearance=it,Tn.AcroForm={ChoiceField:pu,ListBox:mu,ComboBox:gu,EditBox:dp,Button:rr,PushButton:fp,RadioButton:vu,CheckBox:pp,TextField:Bl,PasswordField:mp,Appearance:it},gt.AcroForm={ChoiceField:pu,ListBox:mu,ComboBox:gu,EditBox:dp,Button:rr,PushButton:fp,RadioButton:vu,CheckBox:pp,TextField:Bl,PasswordField:mp,Appearance:it};gt.AcroForm;function IN(t){return t.reduce(function(e,n,r){return e[n]=r,e},{})}(function(t){t.__addimage__={};var e="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},r=t.__addimage__.getImageFileTypeByImageData=function(E,I){var k,M,te,V,U,z=e;if((I=I||e)==="RGBA"||E.data!==void 0&&E.data instanceof Uint8ClampedArray&&"height"in E&&"width"in E)return"RGBA";if(B(E))for(U in n)for(te=n[U],k=0;k<te.length;k+=1){for(V=!0,M=0;M<te[k].length;M+=1)if(te[k][M]!==void 0&&te[k][M]!==E[M]){V=!1;break}if(V===!0){z=U;break}}else for(U in n)for(te=n[U],k=0;k<te.length;k+=1){for(V=!0,M=0;M<te[k].length;M+=1)if(te[k][M]!==void 0&&te[k][M]!==E.charCodeAt(M)){V=!1;break}if(V===!0){z=U;break}}return z===e&&I!==e&&(z=I),z},i=function E(I){for(var k=this.internal.write,M=this.internal.putStream,te=(0,this.internal.getFilters)();te.indexOf("FlateEncode")!==-1;)te.splice(te.indexOf("FlateEncode"),1);I.objectId=this.internal.newObject();var V=[];if(V.push({key:"Type",value:"/XObject"}),V.push({key:"Subtype",value:"/Image"}),V.push({key:"Width",value:I.width}),V.push({key:"Height",value:I.height}),I.colorSpace===T.INDEXED?V.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(I.palette.length/3-1)+" "+("sMask"in I&&I.sMask!==void 0?I.objectId+2:I.objectId+1)+" 0 R]"}):(V.push({key:"ColorSpace",value:"/"+I.colorSpace}),I.colorSpace===T.DEVICE_CMYK&&V.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),V.push({key:"BitsPerComponent",value:I.bitsPerComponent}),"decodeParameters"in I&&I.decodeParameters!==void 0&&V.push({key:"DecodeParms",value:"<<"+I.decodeParameters+">>"}),"transparency"in I&&Array.isArray(I.transparency)){for(var U="",z=0,$=I.transparency.length;z<$;z++)U+=I.transparency[z]+" "+I.transparency[z]+" ";V.push({key:"Mask",value:"["+U+"]"})}I.sMask!==void 0&&V.push({key:"SMask",value:I.objectId+1+" 0 R"});var ne=I.filter!==void 0?["/"+I.filter]:void 0;if(M({data:I.data,additionalKeyValues:V,alreadyAppliedFilters:ne,objectId:I.objectId}),k("endobj"),"sMask"in I&&I.sMask!==void 0){var we="/Predictor "+I.predictor+" /Colors 1 /BitsPerComponent "+I.bitsPerComponent+" /Columns "+I.width,O={width:I.width,height:I.height,colorSpace:"DeviceGray",bitsPerComponent:I.bitsPerComponent,decodeParameters:we,data:I.sMask};"filter"in I&&(O.filter=I.filter),E.call(this,O)}if(I.colorSpace===T.INDEXED){var Y=this.internal.newObject();M({data:y(new Uint8Array(I.palette)),objectId:Y}),k("endobj")}},s=function(){var E=this.internal.collections.addImage_images;for(var I in E)i.call(this,E[I])},a=function(){var E,I=this.internal.collections.addImage_images,k=this.internal.write;for(var M in I)k("/I"+(E=I[M]).index,E.objectId,"0","R")},o=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",s),this.internal.events.subscribe("putXobjectDict",a))},l=function(){var E=this.internal.collections.addImage_images;return o.call(this),E},c=function(){return Object.keys(this.internal.collections.addImage_images).length},d=function(E){return typeof t["process"+E.toUpperCase()]=="function"},p=function(E){return Gt(E)==="object"&&E.nodeType===1},g=function(E,I){if(E.nodeName==="IMG"&&E.hasAttribute("src")){var k=""+E.getAttribute("src");if(k.indexOf("data:image/")===0)return Yh(unescape(k).split("base64,").pop());var M=t.loadFile(k,!0);if(M!==void 0)return M}if(E.nodeName==="CANVAS"){if(E.width===0||E.height===0)throw new Error("Given canvas must have data. Canvas width: "+E.width+", height: "+E.height);var te;switch(I){case"PNG":te="image/png";break;case"WEBP":te="image/webp";break;case"JPEG":case"JPG":default:te="image/jpeg"}return Yh(E.toDataURL(te,1).split("base64,").pop())}},m=function(E){var I=this.internal.collections.addImage_images;if(I){for(var k in I)if(E===I[k].alias)return I[k]}},b=function(E,I,k){return E||I||(E=-96,I=-96),E<0&&(E=-1*k.width*72/E/this.internal.scaleFactor),I<0&&(I=-1*k.height*72/I/this.internal.scaleFactor),E===0&&(E=I*k.width/k.height),I===0&&(I=E*k.height/k.width),[E,I]},x=function(E,I,k,M,te,V){var U=b.call(this,k,M,te),z=this.internal.getCoordinateString,$=this.internal.getVerticalCoordinateString,ne=l.call(this);if(k=U[0],M=U[1],ne[te.index]=te,V){V*=Math.PI/180;var we=Math.cos(V),O=Math.sin(V),Y=function(H){return H.toFixed(4)},J=[Y(we),Y(O),Y(-1*O),Y(we),0,0,"cm"]}this.internal.write("q"),V?(this.internal.write([1,"0","0",1,z(E),$(I+M),"cm"].join(" ")),this.internal.write(J.join(" ")),this.internal.write([z(k),"0","0",z(M),"0","0","cm"].join(" "))):this.internal.write([z(k),"0","0",z(M),z(E),$(I+M),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+te.index+" Do"),this.internal.write("Q")},T=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var w=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},N=t.__addimage__.sHashCode=function(E){var I,k,M=0;if(typeof E=="string")for(k=E.length,I=0;I<k;I++)M=(M<<5)-M+E.charCodeAt(I),M|=0;else if(B(E))for(k=E.byteLength/2,I=0;I<k;I++)M=(M<<5)-M+E[I],M|=0;return M},C=t.__addimage__.validateStringAsBase64=function(E){(E=E||"").toString().trim();var I=!0;return E.length===0&&(I=!1),E.length%4!=0&&(I=!1),/^[A-Za-z0-9+/]+$/.test(E.substr(0,E.length-2))===!1&&(I=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(E.substr(-2))===!1&&(I=!1),I},F=t.__addimage__.extractImageFromDataUrl=function(E){var I=(E=E||"").split("base64,"),k=null;if(I.length===2){var M=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(I[0]);Array.isArray(M)&&(k={mimeType:M[1],charset:M[2],data:I[1]})}return k},Q=t.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};t.__addimage__.isArrayBuffer=function(E){return Q()&&E instanceof ArrayBuffer};var B=t.__addimage__.isArrayBufferView=function(E){return Q()&&typeof Uint32Array<"u"&&(E instanceof Int8Array||E instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&E instanceof Uint8ClampedArray||E instanceof Int16Array||E instanceof Uint16Array||E instanceof Int32Array||E instanceof Uint32Array||E instanceof Float32Array||E instanceof Float64Array)},j=t.__addimage__.binaryStringToUint8Array=function(E){for(var I=E.length,k=new Uint8Array(I),M=0;M<I;M++)k[M]=E.charCodeAt(M);return k},y=t.__addimage__.arrayBufferToBinaryString=function(E){for(var I="",k=B(E)?E:new Uint8Array(E),M=0;M<k.length;M+=8192)I+=String.fromCharCode.apply(null,k.subarray(M,M+8192));return I};t.addImage=function(){var E,I,k,M,te,V,U,z,$;if(typeof arguments[1]=="number"?(I=e,k=arguments[1],M=arguments[2],te=arguments[3],V=arguments[4],U=arguments[5],z=arguments[6],$=arguments[7]):(I=arguments[1],k=arguments[2],M=arguments[3],te=arguments[4],V=arguments[5],U=arguments[6],z=arguments[7],$=arguments[8]),Gt(E=arguments[0])==="object"&&!p(E)&&"imageData"in E){var ne=E;E=ne.imageData,I=ne.format||I||e,k=ne.x||k||0,M=ne.y||M||0,te=ne.w||ne.width||te,V=ne.h||ne.height||V,U=ne.alias||U,z=ne.compression||z,$=ne.rotation||ne.angle||$}var we=this.internal.getFilters();if(z===void 0&&we.indexOf("FlateEncode")!==-1&&(z="SLOW"),isNaN(k)||isNaN(M))throw new Error("Invalid coordinates passed to jsPDF.addImage");o.call(this);var O=S.call(this,E,I,U,z);return x.call(this,k,M,te,V,O,$),this};var S=function(E,I,k,M){var te,V,U;if(typeof E=="string"&&r(E)===e){E=unescape(E);var z=L(E,!1);(z!==""||(z=t.loadFile(E,!0))!==void 0)&&(E=z)}if(p(E)&&(E=g(E,I)),I=r(E,I),!d(I))throw new Error("addImage does not support files of type '"+I+"', please ensure that a plugin for '"+I+"' support is added.");if(((U=k)==null||U.length===0)&&(k=function($){return typeof $=="string"||B($)?N($):B($.data)?N($.data):null}(E)),(te=m.call(this,k))||(Q()&&(E instanceof Uint8Array||I==="RGBA"||(V=E,E=j(E))),te=this["process"+I.toUpperCase()](E,c.call(this),k,function($){return $&&typeof $=="string"&&($=$.toUpperCase()),$ in t.image_compression?$:w.NONE}(M),V)),!te)throw new Error("An unknown error occurred whilst processing the image.");return te},L=t.__addimage__.convertBase64ToBinaryString=function(E,I){var k;I=typeof I!="boolean"||I;var M,te="";if(typeof E=="string"){M=(k=F(E))!==null?k.data:E;try{te=Yh(M)}catch(V){if(I)throw C(M)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+V.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return te};t.getImageProperties=function(E){var I,k,M="";if(p(E)&&(E=g(E)),typeof E=="string"&&r(E)===e&&((M=L(E,!1))===""&&(M=t.loadFile(E)||""),E=M),k=r(E),!d(k))throw new Error("addImage does not support files of type '"+k+"', please ensure that a plugin for '"+k+"' support is added.");if(!Q()||E instanceof Uint8Array||(E=j(E)),!(I=this["process"+k.toUpperCase()](E)))throw new Error("An unknown error occurred whilst processing the image");return I.fileType=k,I}})(gt.API),function(t){var e=function(n){if(n!==void 0&&n!="")return!0};gt.API.events.push(["addPage",function(n){this.internal.getPageInfo(n.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(n){for(var r,i,s,a=this.internal.getCoordinateString,o=this.internal.getVerticalCoordinateString,l=this.internal.getPageInfoByObjId(n.objId),c=n.pageContext.annotations,d=!1,p=0;p<c.length&&!d;p++)switch((r=c[p]).type){case"link":(e(r.options.url)||e(r.options.pageNumber))&&(d=!0);break;case"reference":case"text":case"freetext":d=!0}if(d!=0){this.internal.write("/Annots [");for(var g=0;g<c.length;g++){r=c[g];var m=this.internal.pdfEscape,b=this.internal.getEncryptor(n.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var x=this.internal.newAdditionalObject(),T=this.internal.newAdditionalObject(),w=this.internal.getEncryptor(x.objId),N=r.title||"Note";s="<</Type /Annot /Subtype /Text "+(i="/Rect ["+a(r.bounds.x)+" "+o(r.bounds.y+r.bounds.h)+" "+a(r.bounds.x+r.bounds.w)+" "+o(r.bounds.y)+"] ")+"/Contents ("+m(w(r.contents))+")",s+=" /Popup "+T.objId+" 0 R",s+=" /P "+l.objId+" 0 R",s+=" /T ("+m(w(N))+") >>",x.content=s;var C=x.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+a(r.bounds.x+30)+" "+o(r.bounds.y+r.bounds.h)+" "+a(r.bounds.x+r.bounds.w+30)+" "+o(r.bounds.y)+"] ")+" /Parent "+C,r.open&&(s+=" /Open true"),s+=" >>",T.content=s,this.internal.write(x.objId,"0 R",T.objId,"0 R");break;case"freetext":i="/Rect ["+a(r.bounds.x)+" "+o(r.bounds.y)+" "+a(r.bounds.x+r.bounds.w)+" "+o(r.bounds.y+r.bounds.h)+"] ";var F=r.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+m(b(r.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+F+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(r.options.name){var Q=this.annotations._nameMap[r.options.name];r.options.pageNumber=Q.page,r.options.top=Q.y}else r.options.top||(r.options.top=0);if(i="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",s="",r.options.url)s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+m(b(r.options.url))+") >>";else if(r.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,s+=" /FitV "+r.options.left+"]";break;case"XYZ":default:var B=o(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),s+=" /XYZ "+r.options.left+" "+B+" "+r.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),t.createAnnotation=function(n){var r=this.internal.getCurrentPageInfo();switch(n.type){case"link":this.link(n.bounds.x,n.bounds.y,n.bounds.w,n.bounds.h,n);break;case"text":case"freetext":r.pageContext.annotations.push(n)}},t.link=function(n,r,i,s,a){var o=this.internal.getCurrentPageInfo(),l=this.internal.getCoordinateString,c=this.internal.getVerticalCoordinateString;o.pageContext.annotations.push({finalBounds:{x:l(n),y:c(r),w:l(n+i),h:c(r+s)},options:a,type:"link"})},t.textWithLink=function(n,r,i,s){var a,o,l=this.getTextWidth(n),c=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){o=s.maxWidth;var d=this.splitTextToSize(n,o).length;a=Math.ceil(c*d)}else o=l,a=c;return this.text(n,r,i,s),i+=.2*c,s.align==="center"&&(r-=l/2),s.align==="right"&&(r-=l),this.link(r,i-c,o,a,s),l},t.getTextWidth=function(n){var r=this.internal.getFontSize();return this.getStringUnitWidth(n)*r/this.internal.scaleFactor}}(gt.API),function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];t.__arabicParser__={};var s=t.__arabicParser__.isInArabicSubstitutionA=function(x){return e[x.charCodeAt(0)]!==void 0},a=t.__arabicParser__.isArabicLetter=function(x){return typeof x=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(x)},o=t.__arabicParser__.isArabicEndLetter=function(x){return a(x)&&s(x)&&e[x.charCodeAt(0)].length<=2},l=t.__arabicParser__.isArabicAlfLetter=function(x){return a(x)&&i.indexOf(x.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(x){return a(x)&&s(x)&&e[x.charCodeAt(0)].length>=1};var c=t.__arabicParser__.arabicLetterHasFinalForm=function(x){return a(x)&&s(x)&&e[x.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(x){return a(x)&&s(x)&&e[x.charCodeAt(0)].length>=3};var d=t.__arabicParser__.arabicLetterHasMedialForm=function(x){return a(x)&&s(x)&&e[x.charCodeAt(0)].length==4},p=t.__arabicParser__.resolveLigatures=function(x){var T=0,w=n,N="",C=0;for(T=0;T<x.length;T+=1)w[x.charCodeAt(T)]!==void 0?(C++,typeof(w=w[x.charCodeAt(T)])=="number"&&(N+=String.fromCharCode(w),w=n,C=0),T===x.length-1&&(w=n,N+=x.charAt(T-(C-1)),T-=C-1,C=0)):(w=n,N+=x.charAt(T-C),T-=C,C=0);return N};t.__arabicParser__.isArabicDiacritic=function(x){return x!==void 0&&r[x.charCodeAt(0)]!==void 0};var g=t.__arabicParser__.getCorrectForm=function(x,T,w){return a(x)?s(x)===!1?-1:!c(x)||!a(T)&&!a(w)||!a(w)&&o(T)||o(x)&&!a(T)||o(x)&&l(T)||o(x)&&o(T)?0:d(x)&&a(T)&&!o(T)&&a(w)&&c(w)?3:o(x)||!a(w)?1:2:-1},m=function(x){var T=0,w=0,N=0,C="",F="",Q="",B=(x=x||"").split("\\s+"),j=[];for(T=0;T<B.length;T+=1){for(j.push(""),w=0;w<B[T].length;w+=1)C=B[T][w],F=B[T][w-1],Q=B[T][w+1],a(C)?(N=g(C,F,Q),j[T]+=N!==-1?String.fromCharCode(e[C.charCodeAt(0)][N]):C):j[T]+=C;j[T]=p(j[T])}return j.join(" ")},b=t.__arabicParser__.processArabic=t.processArabic=function(){var x,T=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,w=[];if(Array.isArray(T)){var N=0;for(w=[],N=0;N<T.length;N+=1)Array.isArray(T[N])?w.push([m(T[N][0]),T[N][1],T[N][2]]):w.push([m(T[N])]);x=w}else x=m(T);return typeof arguments[0]=="string"?x:(arguments[0].text=x,arguments[0])};t.events.push(["preProcessText",b])}(gt.API),gt.API.autoPrint=function(t){var e;switch((t=t||{}).variant=t.variant||"non-conform",t.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(t){var e=function(){var n=void 0;Object.defineProperty(this,"pdf",{get:function(){return n},set:function(o){n=o}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(o){r=isNaN(o)||Number.isInteger(o)===!1||o<0?150:o,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(o){i=isNaN(o)||Number.isInteger(o)===!1||o<0?300:o,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(o){s=o}});var a={};Object.defineProperty(this,"style",{get:function(){return a},set:function(o){a=o}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(n,r){var i;if((n=n||"2d")!=="2d")return null;for(i in r)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=r[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(gt.API),function(t){var e={left:0,top:0,bottom:0,right:0},n=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var l=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return l},set:function(x){l=x}});var c=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return c},set:function(x){c=x}});var d=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return d},set:function(x){d=x}});var p=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return p},set:function(x){p=x}});var g=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return g},set:function(x){g=x}});var m=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return m},set:function(x){m=x}});var b=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return b},set:function(x){b=x}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(l){return r.call(this),this.internal.__cell__.headerFunction=typeof l=="function"?l:void 0,this},t.getTextDimensions=function(l,c){r.call(this);var d=(c=c||{}).fontSize||this.getFontSize(),p=c.font||this.getFont(),g=c.scaleFactor||this.internal.scaleFactor,m=0,b=0,x=0,T=this;if(!Array.isArray(l)&&typeof l!="string"){if(typeof l!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");l=String(l)}var w=c.maxWidth;w>0?typeof l=="string"?l=this.splitTextToSize(l,w):Object.prototype.toString.call(l)==="[object Array]"&&(l=l.reduce(function(C,F){return C.concat(T.splitTextToSize(F,w))},[])):l=Array.isArray(l)?l:[l];for(var N=0;N<l.length;N++)m<(x=this.getStringUnitWidth(l[N],{font:p})*d)&&(m=x);return m!==0&&(b=l.length),{w:m/=g,h:Math.max((b*d*this.getLineHeightFactor()-d*(this.getLineHeightFactor()-1))/g,0)}},t.cellAddPage=function(){r.call(this),this.addPage();var l=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new s(l.left,l.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var a=t.cell=function(){var l;l=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var c=this.internal.__cell__.lastCell,d=this.internal.__cell__.padding,p=this.internal.__cell__.margins||e,g=this.internal.__cell__.tableHeaderRow,m=this.internal.__cell__.printHeaders;return c.lineNumber!==void 0&&(c.lineNumber===l.lineNumber?(l.x=(c.x||0)+(c.width||0),l.y=c.y||0):c.y+c.height+l.height+p.bottom>this.getPageHeight()?(this.cellAddPage(),l.y=p.top,m&&g&&(this.printHeaderRow(l.lineNumber,!0),l.y+=g[0].height)):l.y=c.y+c.height||l.y),l.text[0]!==void 0&&(this.rect(l.x,l.y,l.width,l.height,n===!0?"FD":void 0),l.align==="right"?this.text(l.text,l.x+l.width-d,l.y+d,{align:"right",baseline:"top"}):l.align==="center"?this.text(l.text,l.x+l.width/2,l.y+d,{align:"center",baseline:"top",maxWidth:l.width-d-d}):this.text(l.text,l.x+d,l.y+d,{align:"left",baseline:"top",maxWidth:l.width-d-d})),this.internal.__cell__.lastCell=l,this};t.table=function(l,c,d,p,g){if(r.call(this),!d)throw new Error("No data for PDF table.");var m,b,x,T,w=[],N=[],C=[],F={},Q={},B=[],j=[],y=(g=g||{}).autoSize||!1,S=g.printHeaders!==!1,L=g.css&&g.css["font-size"]!==void 0?16*g.css["font-size"]:g.fontSize||12,E=g.margins||Object.assign({width:this.getPageWidth()},e),I=typeof g.padding=="number"?g.padding:3,k=g.headerBackgroundColor||"#c8c8c8",M=g.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=S,this.internal.__cell__.margins=E,this.internal.__cell__.table_font_size=L,this.internal.__cell__.padding=I,this.internal.__cell__.headerBackgroundColor=k,this.internal.__cell__.headerTextColor=M,this.setFontSize(L),p==null)N=w=Object.keys(d[0]),C=w.map(function(){return"left"});else if(Array.isArray(p)&&Gt(p[0])==="object")for(w=p.map(function(ne){return ne.name}),N=p.map(function(ne){return ne.prompt||ne.name||""}),C=p.map(function(ne){return ne.align||"left"}),m=0;m<p.length;m+=1)Q[p[m].name]=p[m].width*(19.049976/25.4);else Array.isArray(p)&&typeof p[0]=="string"&&(N=w=p,C=w.map(function(){return"left"}));if(y||Array.isArray(p)&&typeof p[0]=="string")for(m=0;m<w.length;m+=1){for(F[T=w[m]]=d.map(function(ne){return ne[T]}),this.setFont(void 0,"bold"),B.push(this.getTextDimensions(N[m],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),b=F[T],this.setFont(void 0,"normal"),x=0;x<b.length;x+=1)B.push(this.getTextDimensions(b[x],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);Q[T]=Math.max.apply(null,B)+I+I,B=[]}if(S){var te={};for(m=0;m<w.length;m+=1)te[w[m]]={},te[w[m]].text=N[m],te[w[m]].align=C[m];var V=o.call(this,te,Q);j=w.map(function(ne){return new s(l,c,Q[ne],V,te[ne].text,void 0,te[ne].align)}),this.setTableHeaderRow(j),this.printHeaderRow(1,!1)}var U=p.reduce(function(ne,we){return ne[we.name]=we.align,ne},{});for(m=0;m<d.length;m+=1){"rowStart"in g&&g.rowStart instanceof Function&&g.rowStart({row:m,data:d[m]},this);var z=o.call(this,d[m],Q);for(x=0;x<w.length;x+=1){var $=d[m][w[x]];"cellStart"in g&&g.cellStart instanceof Function&&g.cellStart({row:m,col:x,data:$},this),a.call(this,new s(l,c,Q[w[x]],z,$,m+2,U[w[x]]))}}return this.internal.__cell__.table_x=l,this.internal.__cell__.table_y=c,this};var o=function(l,c){var d=this.internal.__cell__.padding,p=this.internal.__cell__.table_font_size,g=this.internal.scaleFactor;return Object.keys(l).map(function(m){var b=l[m];return this.splitTextToSize(b.hasOwnProperty("text")?b.text:b,c[m]-d-d)},this).map(function(m){return this.getLineHeightFactor()*m.length*p/g+d+d},this).reduce(function(m,b){return Math.max(m,b)},0)};t.setTableHeaderRow=function(l){r.call(this),this.internal.__cell__.tableHeaderRow=l},t.printHeaderRow=function(l,c){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var d;if(n=!0,typeof this.internal.__cell__.headerFunction=="function"){var p=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(p[0],p[1],p[2],p[3],void 0,-1)}this.setFont(void 0,"bold");for(var g=[],m=0;m<this.internal.__cell__.tableHeaderRow.length;m+=1){d=this.internal.__cell__.tableHeaderRow[m].clone(),c&&(d.y=this.internal.__cell__.margins.top||0,g.push(d)),d.lineNumber=l;var b=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),a.call(this,d),this.setTextColor(b)}g.length>0&&this.setTableHeaderRow(g),this.setFont(void 0,"normal"),n=!1}}(gt.API);var PN={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},CN=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],lv=IN(CN),jN=[100,200,300,400,500,600,700,800,900],wD=IN(jN);function cv(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),n=function(s){return PN[s=s||"normal"]?s:"normal"}(t.style),r=function(s){if(!s)return 400;if(typeof s=="number")return s>=100&&s<=900&&s%100==0?s:400;if(/^\d00$/.test(s))return parseInt(s);switch(s){case"bold":return 700;case"normal":default:return 400}}(t.weight),i=function(s){return typeof lv[s=s||"normal"]=="number"?s:"normal"}(t.stretch);return{family:e,style:n,weight:r,stretch:i,src:t.src||[],ref:t.ref||{name:e,style:[i,n,r].join(" ")}}}function M_(t,e,n,r){var i;for(i=n;i>=0&&i<e.length;i+=r)if(t[e[i]])return t[e[i]];for(i=n;i>=0&&i<e.length;i-=r)if(t[e[i]])return t[e[i]]}var _D={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},V_={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function U_(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function bD(t,e,n){for(var r=(n=n||{}).defaultFontFamily||"times",i=Object.assign({},_D,n.genericFontFamilies||{}),s=null,a=null,o=0;o<e.length;++o)if(i[(s=cv(e[o])).family]&&(s.family=i[s.family]),t.hasOwnProperty(s.family)){a=t[s.family];break}if(!(a=a||t[r]))throw new Error("Could not find a font-family for the rule '"+U_(s)+"' and default family '"+r+"'.");if(a=function(l,c){if(c[l])return c[l];var d=lv[l],p=d<=lv.normal?-1:1,g=M_(c,CN,d,p);if(!g)throw new Error("Could not find a matching font-stretch value for "+l);return g}(s.stretch,a),a=function(l,c){if(c[l])return c[l];for(var d=PN[l],p=0;p<d.length;++p)if(c[d[p]])return c[d[p]];throw new Error("Could not find a matching font-style for "+l)}(s.style,a),!(a=function(l,c){if(c[l])return c[l];if(l===400&&c[500])return c[500];if(l===500&&c[400])return c[400];var d=wD[l],p=M_(c,jN,d,l<400?-1:1);if(!p)throw new Error("Could not find a matching font-weight for value "+l);return p}(s.weight,a)))throw new Error("Failed to resolve a font for the rule '"+U_(s)+"'.");return a}function B_(t){return t.trimLeft()}function xD(t,e){for(var n=0;n<t.length;){if(t.charAt(n)===e)return[t.substring(0,n),t.substring(n+1)];n+=1}return null}function SD(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],t.substring(e[0].length)]}var qf,K_,q_,x1=["times"];(function(t){var e,n,r,i,s,a,o,l,c,d=function(O){return O=O||{},this.isStrokeTransparent=O.isStrokeTransparent||!1,this.strokeOpacity=O.strokeOpacity||1,this.strokeStyle=O.strokeStyle||"#000000",this.fillStyle=O.fillStyle||"#000000",this.isFillTransparent=O.isFillTransparent||!1,this.fillOpacity=O.fillOpacity||1,this.font=O.font||"10px sans-serif",this.textBaseline=O.textBaseline||"alphabetic",this.textAlign=O.textAlign||"left",this.lineWidth=O.lineWidth||1,this.lineJoin=O.lineJoin||"miter",this.lineCap=O.lineCap||"butt",this.path=O.path||[],this.transform=O.transform!==void 0?O.transform.clone():new l,this.globalCompositeOperation=O.globalCompositeOperation||"normal",this.globalAlpha=O.globalAlpha||1,this.clip_path=O.clip_path||[],this.currentPoint=O.currentPoint||new a,this.miterLimit=O.miterLimit||10,this.lastPoint=O.lastPoint||new a,this.lineDashOffset=O.lineDashOffset||0,this.lineDash=O.lineDash||[],this.margin=O.margin||[0,0,0,0],this.prevPageLastElemOffset=O.prevPageLastElemOffset||0,this.ignoreClearRect=typeof O.ignoreClearRect!="boolean"||O.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new p(this),e=this.internal.f2,n=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,a=this.internal.Point,o=this.internal.Rectangle,l=this.internal.Matrix,c=new d}]);var p=function(O){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var Y=O;Object.defineProperty(this,"pdf",{get:function(){return Y}});var J=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return J},set:function(be){J=!!be}});var H=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return H},set:function(be){H=!!be}});var se=0;Object.defineProperty(this,"posX",{get:function(){return se},set:function(be){isNaN(be)||(se=be)}});var le=0;Object.defineProperty(this,"posY",{get:function(){return le},set:function(be){isNaN(be)||(le=be)}}),Object.defineProperty(this,"margin",{get:function(){return c.margin},set:function(be){var ae;typeof be=="number"?ae=[be,be,be,be]:((ae=new Array(4))[0]=be[0],ae[1]=be.length>=2?be[1]:ae[0],ae[2]=be.length>=3?be[2]:ae[0],ae[3]=be.length>=4?be[3]:ae[1]),c.margin=ae}});var ue=!1;Object.defineProperty(this,"autoPaging",{get:function(){return ue},set:function(be){ue=be}});var de=0;Object.defineProperty(this,"lastBreak",{get:function(){return de},set:function(be){de=be}});var Ae=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Ae},set:function(be){Ae=be}}),Object.defineProperty(this,"ctx",{get:function(){return c},set:function(be){be instanceof d&&(c=be)}}),Object.defineProperty(this,"path",{get:function(){return c.path},set:function(be){c.path=be}});var Te=[];Object.defineProperty(this,"ctxStack",{get:function(){return Te},set:function(be){Te=be}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(be){var ae;ae=g(be),this.ctx.fillStyle=ae.style,this.ctx.isFillTransparent=ae.a===0,this.ctx.fillOpacity=ae.a,this.pdf.setFillColor(ae.r,ae.g,ae.b,{a:ae.a}),this.pdf.setTextColor(ae.r,ae.g,ae.b,{a:ae.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(be){var ae=g(be);this.ctx.strokeStyle=ae.style,this.ctx.isStrokeTransparent=ae.a===0,this.ctx.strokeOpacity=ae.a,ae.a===0?this.pdf.setDrawColor(255,255,255):(ae.a,this.pdf.setDrawColor(ae.r,ae.g,ae.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(be){["butt","round","square"].indexOf(be)!==-1&&(this.ctx.lineCap=be,this.pdf.setLineCap(be))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(be){isNaN(be)||(this.ctx.lineWidth=be,this.pdf.setLineWidth(be))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(be){["bevel","round","miter"].indexOf(be)!==-1&&(this.ctx.lineJoin=be,this.pdf.setLineJoin(be))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(be){isNaN(be)||(this.ctx.miterLimit=be,this.pdf.setMiterLimit(be))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(be){this.ctx.textBaseline=be}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(be){["right","end","center","left","start"].indexOf(be)!==-1&&(this.ctx.textAlign=be)}});var Re=null;function Be(be,ae){if(Re===null){var He=function(De){var he=[];return Object.keys(De).forEach(function(Ie){De[Ie].forEach(function(Me){var Ke=null;switch(Me){case"bold":Ke={family:Ie,weight:"bold"};break;case"italic":Ke={family:Ie,style:"italic"};break;case"bolditalic":Ke={family:Ie,weight:"bold",style:"italic"};break;case"":case"normal":Ke={family:Ie}}Ke!==null&&(Ke.ref={name:Ie,style:Me},he.push(Ke))})}),he}(be.getFontList());Re=function(De){for(var he={},Ie=0;Ie<De.length;++Ie){var Me=cv(De[Ie]),Ke=Me.family,We=Me.stretch,Ye=Me.style,at=Me.weight;he[Ke]=he[Ke]||{},he[Ke][We]=he[Ke][We]||{},he[Ke][We][Ye]=he[Ke][We][Ye]||{},he[Ke][We][Ye][at]=Me}return he}(He.concat(ae))}return Re}var Xe=null;Object.defineProperty(this,"fontFaces",{get:function(){return Xe},set:function(be){Re=null,Xe=be}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(be){var ae;if(this.ctx.font=be,(ae=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(be))!==null){var He=ae[1],De=(ae[2],ae[3]),he=ae[4],Ie=(ae[5],ae[6]),Me=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(he)[2];he=Math.floor(Me==="px"?parseFloat(he)*this.pdf.internal.scaleFactor:Me==="em"?parseFloat(he)*this.pdf.getFontSize():parseFloat(he)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(he);var Ke=function(ot){var ct,ze,_e=[],$e=ot.trim();if($e==="")return x1;if($e in V_)return[V_[$e]];for(;$e!=="";){switch(ze=null,ct=($e=B_($e)).charAt(0)){case'"':case"'":ze=xD($e.substring(1),ct);break;default:ze=SD($e)}if(ze===null||(_e.push(ze[0]),($e=B_(ze[1]))!==""&&$e.charAt(0)!==","))return x1;$e=$e.replace(/^,/,"")}return _e}(Ie);if(this.fontFaces){var We=bD(Be(this.pdf,this.fontFaces),Ke.map(function(ot){return{family:ot,stretch:"normal",weight:De,style:He}}));this.pdf.setFont(We.ref.name,We.ref.style)}else{var Ye="";(De==="bold"||parseInt(De,10)>=700||He==="bold")&&(Ye="bold"),He==="italic"&&(Ye+="italic"),Ye.length===0&&(Ye="normal");for(var at="",tt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},ut=0;ut<Ke.length;ut++){if(this.pdf.internal.getFont(Ke[ut],Ye,{noFallback:!0,disableWarning:!0})!==void 0){at=Ke[ut];break}if(Ye==="bolditalic"&&this.pdf.internal.getFont(Ke[ut],"bold",{noFallback:!0,disableWarning:!0})!==void 0)at=Ke[ut],Ye="bold";else if(this.pdf.internal.getFont(Ke[ut],"normal",{noFallback:!0,disableWarning:!0})!==void 0){at=Ke[ut],Ye="normal";break}}if(at===""){for(var dt=0;dt<Ke.length;dt++)if(tt[Ke[dt]]){at=tt[Ke[dt]];break}}at=at===""?"Times":at,this.pdf.setFont(at,Ye)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(be){this.ctx.globalCompositeOperation=be}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(be){this.ctx.globalAlpha=be}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(be){this.ctx.lineDashOffset=be,we.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(be){this.ctx.lineDash=be,we.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(be){this.ctx.ignoreClearRect=!!be}})};p.prototype.setLineDash=function(O){this.lineDash=O},p.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},p.prototype.fill=function(){F.call(this,"fill",!1)},p.prototype.stroke=function(){F.call(this,"stroke",!1)},p.prototype.beginPath=function(){this.path=[{type:"begin"}]},p.prototype.moveTo=function(O,Y){if(isNaN(O)||isNaN(Y))throw tn.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var J=this.ctx.transform.applyToPoint(new a(O,Y));this.path.push({type:"mt",x:J.x,y:J.y}),this.ctx.lastPoint=new a(O,Y)},p.prototype.closePath=function(){var O=new a(0,0),Y=0;for(Y=this.path.length-1;Y!==-1;Y--)if(this.path[Y].type==="begin"&&Gt(this.path[Y+1])==="object"&&typeof this.path[Y+1].x=="number"){O=new a(this.path[Y+1].x,this.path[Y+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new a(O.x,O.y)},p.prototype.lineTo=function(O,Y){if(isNaN(O)||isNaN(Y))throw tn.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var J=this.ctx.transform.applyToPoint(new a(O,Y));this.path.push({type:"lt",x:J.x,y:J.y}),this.ctx.lastPoint=new a(J.x,J.y)},p.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),F.call(this,null,!0)},p.prototype.quadraticCurveTo=function(O,Y,J,H){if(isNaN(J)||isNaN(H)||isNaN(O)||isNaN(Y))throw tn.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var se=this.ctx.transform.applyToPoint(new a(J,H)),le=this.ctx.transform.applyToPoint(new a(O,Y));this.path.push({type:"qct",x1:le.x,y1:le.y,x:se.x,y:se.y}),this.ctx.lastPoint=new a(se.x,se.y)},p.prototype.bezierCurveTo=function(O,Y,J,H,se,le){if(isNaN(se)||isNaN(le)||isNaN(O)||isNaN(Y)||isNaN(J)||isNaN(H))throw tn.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var ue=this.ctx.transform.applyToPoint(new a(se,le)),de=this.ctx.transform.applyToPoint(new a(O,Y)),Ae=this.ctx.transform.applyToPoint(new a(J,H));this.path.push({type:"bct",x1:de.x,y1:de.y,x2:Ae.x,y2:Ae.y,x:ue.x,y:ue.y}),this.ctx.lastPoint=new a(ue.x,ue.y)},p.prototype.arc=function(O,Y,J,H,se,le){if(isNaN(O)||isNaN(Y)||isNaN(J)||isNaN(H)||isNaN(se))throw tn.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(le=!!le,!this.ctx.transform.isIdentity){var ue=this.ctx.transform.applyToPoint(new a(O,Y));O=ue.x,Y=ue.y;var de=this.ctx.transform.applyToPoint(new a(0,J)),Ae=this.ctx.transform.applyToPoint(new a(0,0));J=Math.sqrt(Math.pow(de.x-Ae.x,2)+Math.pow(de.y-Ae.y,2))}Math.abs(se-H)>=2*Math.PI&&(H=0,se=2*Math.PI),this.path.push({type:"arc",x:O,y:Y,radius:J,startAngle:H,endAngle:se,counterclockwise:le})},p.prototype.arcTo=function(O,Y,J,H,se){throw new Error("arcTo not implemented.")},p.prototype.rect=function(O,Y,J,H){if(isNaN(O)||isNaN(Y)||isNaN(J)||isNaN(H))throw tn.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(O,Y),this.lineTo(O+J,Y),this.lineTo(O+J,Y+H),this.lineTo(O,Y+H),this.lineTo(O,Y),this.lineTo(O+J,Y),this.lineTo(O,Y)},p.prototype.fillRect=function(O,Y,J,H){if(isNaN(O)||isNaN(Y)||isNaN(J)||isNaN(H))throw tn.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!m.call(this)){var se={};this.lineCap!=="butt"&&(se.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(se.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(O,Y,J,H),this.fill(),se.hasOwnProperty("lineCap")&&(this.lineCap=se.lineCap),se.hasOwnProperty("lineJoin")&&(this.lineJoin=se.lineJoin)}},p.prototype.strokeRect=function(O,Y,J,H){if(isNaN(O)||isNaN(Y)||isNaN(J)||isNaN(H))throw tn.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");b.call(this)||(this.beginPath(),this.rect(O,Y,J,H),this.stroke())},p.prototype.clearRect=function(O,Y,J,H){if(isNaN(O)||isNaN(Y)||isNaN(J)||isNaN(H))throw tn.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(O,Y,J,H))},p.prototype.save=function(O){O=typeof O!="boolean"||O;for(var Y=this.pdf.internal.getCurrentPageInfo().pageNumber,J=0;J<this.pdf.internal.getNumberOfPages();J++)this.pdf.setPage(J+1),this.pdf.internal.out("q");if(this.pdf.setPage(Y),O){this.ctx.fontSize=this.pdf.internal.getFontSize();var H=new d(this.ctx);this.ctxStack.push(this.ctx),this.ctx=H}},p.prototype.restore=function(O){O=typeof O!="boolean"||O;for(var Y=this.pdf.internal.getCurrentPageInfo().pageNumber,J=0;J<this.pdf.internal.getNumberOfPages();J++)this.pdf.setPage(J+1),this.pdf.internal.out("Q");this.pdf.setPage(Y),O&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},p.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var g=function(O){var Y,J,H,se;if(O.isCanvasGradient===!0&&(O=O.getColor()),!O)return{r:0,g:0,b:0,a:0,style:O};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(O))Y=0,J=0,H=0,se=0;else{var le=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(O);if(le!==null)Y=parseInt(le[1]),J=parseInt(le[2]),H=parseInt(le[3]),se=1;else if((le=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(O))!==null)Y=parseInt(le[1]),J=parseInt(le[2]),H=parseInt(le[3]),se=parseFloat(le[4]);else{if(se=1,typeof O=="string"&&O.charAt(0)!=="#"){var ue=new SN(O);O=ue.ok?ue.toHex():"#000000"}O.length===4?(Y=O.substring(1,2),Y+=Y,J=O.substring(2,3),J+=J,H=O.substring(3,4),H+=H):(Y=O.substring(1,3),J=O.substring(3,5),H=O.substring(5,7)),Y=parseInt(Y,16),J=parseInt(J,16),H=parseInt(H,16)}}return{r:Y,g:J,b:H,a:se,style:O}},m=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},b=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};p.prototype.fillText=function(O,Y,J,H){if(isNaN(Y)||isNaN(J)||typeof O!="string")throw tn.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(H=isNaN(H)?void 0:H,!m.call(this)){var se=z(this.ctx.transform.rotation),le=this.ctx.transform.scaleX;I.call(this,{text:O,x:Y,y:J,scale:le,angle:se,align:this.textAlign,maxWidth:H})}},p.prototype.strokeText=function(O,Y,J,H){if(isNaN(Y)||isNaN(J)||typeof O!="string")throw tn.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!b.call(this)){H=isNaN(H)?void 0:H;var se=z(this.ctx.transform.rotation),le=this.ctx.transform.scaleX;I.call(this,{text:O,x:Y,y:J,scale:le,renderingMode:"stroke",angle:se,align:this.textAlign,maxWidth:H})}},p.prototype.measureText=function(O){if(typeof O!="string")throw tn.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var Y=this.pdf,J=this.pdf.internal.scaleFactor,H=Y.internal.getFontSize(),se=Y.getStringUnitWidth(O)*H/Y.internal.scaleFactor,le=function(ue){var de=(ue=ue||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return de}}),this};return new le({width:se*=Math.round(96*J/72*1e4)/1e4})},p.prototype.scale=function(O,Y){if(isNaN(O)||isNaN(Y))throw tn.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var J=new l(O,0,0,Y,0,0);this.ctx.transform=this.ctx.transform.multiply(J)},p.prototype.rotate=function(O){if(isNaN(O))throw tn.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var Y=new l(Math.cos(O),Math.sin(O),-Math.sin(O),Math.cos(O),0,0);this.ctx.transform=this.ctx.transform.multiply(Y)},p.prototype.translate=function(O,Y){if(isNaN(O)||isNaN(Y))throw tn.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var J=new l(1,0,0,1,O,Y);this.ctx.transform=this.ctx.transform.multiply(J)},p.prototype.transform=function(O,Y,J,H,se,le){if(isNaN(O)||isNaN(Y)||isNaN(J)||isNaN(H)||isNaN(se)||isNaN(le))throw tn.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var ue=new l(O,Y,J,H,se,le);this.ctx.transform=this.ctx.transform.multiply(ue)},p.prototype.setTransform=function(O,Y,J,H,se,le){O=isNaN(O)?1:O,Y=isNaN(Y)?0:Y,J=isNaN(J)?0:J,H=isNaN(H)?1:H,se=isNaN(se)?0:se,le=isNaN(le)?0:le,this.ctx.transform=new l(O,Y,J,H,se,le)};var x=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};p.prototype.drawImage=function(O,Y,J,H,se,le,ue,de,Ae){var Te=this.pdf.getImageProperties(O),Re=1,Be=1,Xe=1,be=1;H!==void 0&&de!==void 0&&(Xe=de/H,be=Ae/se,Re=Te.width/H*de/H,Be=Te.height/se*Ae/se),le===void 0&&(le=Y,ue=J,Y=0,J=0),H!==void 0&&de===void 0&&(de=H,Ae=se),H===void 0&&de===void 0&&(de=Te.width,Ae=Te.height);for(var ae,He=this.ctx.transform.decompose(),De=z(He.rotate.shx),he=new l,Ie=(he=(he=(he=he.multiply(He.translate)).multiply(He.skew)).multiply(He.scale)).applyToRectangle(new o(le-Y*Xe,ue-J*be,H*Re,se*Be)),Me=T.call(this,Ie),Ke=[],We=0;We<Me.length;We+=1)Ke.indexOf(Me[We])===-1&&Ke.push(Me[We]);if(C(Ke),this.autoPaging)for(var Ye=Ke[0],at=Ke[Ke.length-1],tt=Ye;tt<at+1;tt++){this.pdf.setPage(tt);var ut=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],dt=tt===1?this.posY+this.margin[0]:this.margin[0],ot=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ct=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],ze=tt===1?0:ot+(tt-2)*ct;if(this.ctx.clip_path.length!==0){var _e=this.path;ae=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=N(ae,this.posX+this.margin[3],-ze+dt+this.ctx.prevPageLastElemOffset),Q.call(this,"fill",!0),this.path=_e}var $e=JSON.parse(JSON.stringify(Ie));$e=N([$e],this.posX+this.margin[3],-ze+dt+this.ctx.prevPageLastElemOffset)[0];var mt=(tt>Ye||tt<at)&&x.call(this);mt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ut,ct,null).clip().discardPath()),this.pdf.addImage(O,"JPEG",$e.x,$e.y,$e.w,$e.h,null,null,De),mt&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(O,"JPEG",Ie.x,Ie.y,Ie.w,Ie.h,null,null,De)};var T=function(O,Y,J){var H=[];Y=Y||this.pdf.internal.pageSize.width,J=J||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var se=this.posY+this.ctx.prevPageLastElemOffset;switch(O.type){default:case"mt":case"lt":H.push(Math.floor((O.y+se)/J)+1);break;case"arc":H.push(Math.floor((O.y+se-O.radius)/J)+1),H.push(Math.floor((O.y+se+O.radius)/J)+1);break;case"qct":var le=$(this.ctx.lastPoint.x,this.ctx.lastPoint.y,O.x1,O.y1,O.x,O.y);H.push(Math.floor((le.y+se)/J)+1),H.push(Math.floor((le.y+le.h+se)/J)+1);break;case"bct":var ue=ne(this.ctx.lastPoint.x,this.ctx.lastPoint.y,O.x1,O.y1,O.x2,O.y2,O.x,O.y);H.push(Math.floor((ue.y+se)/J)+1),H.push(Math.floor((ue.y+ue.h+se)/J)+1);break;case"rect":H.push(Math.floor((O.y+se)/J)+1),H.push(Math.floor((O.y+O.h+se)/J)+1)}for(var de=0;de<H.length;de+=1)for(;this.pdf.internal.getNumberOfPages()<H[de];)w.call(this);return H},w=function(){var O=this.fillStyle,Y=this.strokeStyle,J=this.font,H=this.lineCap,se=this.lineWidth,le=this.lineJoin;this.pdf.addPage(),this.fillStyle=O,this.strokeStyle=Y,this.font=J,this.lineCap=H,this.lineWidth=se,this.lineJoin=le},N=function(O,Y,J){for(var H=0;H<O.length;H++)switch(O[H].type){case"bct":O[H].x2+=Y,O[H].y2+=J;case"qct":O[H].x1+=Y,O[H].y1+=J;case"mt":case"lt":case"arc":default:O[H].x+=Y,O[H].y+=J}return O},C=function(O){return O.sort(function(Y,J){return Y-J})},F=function(O,Y){for(var J,H,se=this.fillStyle,le=this.strokeStyle,ue=this.lineCap,de=this.lineWidth,Ae=Math.abs(de*this.ctx.transform.scaleX),Te=this.lineJoin,Re=JSON.parse(JSON.stringify(this.path)),Be=JSON.parse(JSON.stringify(this.path)),Xe=[],be=0;be<Be.length;be++)if(Be[be].x!==void 0)for(var ae=T.call(this,Be[be]),He=0;He<ae.length;He+=1)Xe.indexOf(ae[He])===-1&&Xe.push(ae[He]);for(var De=0;De<Xe.length;De++)for(;this.pdf.internal.getNumberOfPages()<Xe[De];)w.call(this);if(C(Xe),this.autoPaging)for(var he=Xe[0],Ie=Xe[Xe.length-1],Me=he;Me<Ie+1;Me++){this.pdf.setPage(Me),this.fillStyle=se,this.strokeStyle=le,this.lineCap=ue,this.lineWidth=Ae,this.lineJoin=Te;var Ke=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],We=Me===1?this.posY+this.margin[0]:this.margin[0],Ye=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],at=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],tt=Me===1?0:Ye+(Me-2)*at;if(this.ctx.clip_path.length!==0){var ut=this.path;J=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=N(J,this.posX+this.margin[3],-tt+We+this.ctx.prevPageLastElemOffset),Q.call(this,O,!0),this.path=ut}if(H=JSON.parse(JSON.stringify(Re)),this.path=N(H,this.posX+this.margin[3],-tt+We+this.ctx.prevPageLastElemOffset),Y===!1||Me===0){var dt=(Me>he||Me<Ie)&&x.call(this);dt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ke,at,null).clip().discardPath()),Q.call(this,O,Y),dt&&this.pdf.restoreGraphicsState()}this.lineWidth=de}else this.lineWidth=Ae,Q.call(this,O,Y),this.lineWidth=de;this.path=Re},Q=function(O,Y){if((O!=="stroke"||Y||!b.call(this))&&(O==="stroke"||Y||!m.call(this))){for(var J,H,se=[],le=this.path,ue=0;ue<le.length;ue++){var de=le[ue];switch(de.type){case"begin":se.push({begin:!0});break;case"close":se.push({close:!0});break;case"mt":se.push({start:de,deltas:[],abs:[]});break;case"lt":var Ae=se.length;if(le[ue-1]&&!isNaN(le[ue-1].x)&&(J=[de.x-le[ue-1].x,de.y-le[ue-1].y],Ae>0)){for(;Ae>=0;Ae--)if(se[Ae-1].close!==!0&&se[Ae-1].begin!==!0){se[Ae-1].deltas.push(J),se[Ae-1].abs.push(de);break}}break;case"bct":J=[de.x1-le[ue-1].x,de.y1-le[ue-1].y,de.x2-le[ue-1].x,de.y2-le[ue-1].y,de.x-le[ue-1].x,de.y-le[ue-1].y],se[se.length-1].deltas.push(J);break;case"qct":var Te=le[ue-1].x+2/3*(de.x1-le[ue-1].x),Re=le[ue-1].y+2/3*(de.y1-le[ue-1].y),Be=de.x+2/3*(de.x1-de.x),Xe=de.y+2/3*(de.y1-de.y),be=de.x,ae=de.y;J=[Te-le[ue-1].x,Re-le[ue-1].y,Be-le[ue-1].x,Xe-le[ue-1].y,be-le[ue-1].x,ae-le[ue-1].y],se[se.length-1].deltas.push(J);break;case"arc":se.push({deltas:[],abs:[],arc:!0}),Array.isArray(se[se.length-1].abs)&&se[se.length-1].abs.push(de)}}H=Y?null:O==="stroke"?"stroke":"fill";for(var He=!1,De=0;De<se.length;De++)if(se[De].arc)for(var he=se[De].abs,Ie=0;Ie<he.length;Ie++){var Me=he[Ie];Me.type==="arc"?y.call(this,Me.x,Me.y,Me.radius,Me.startAngle,Me.endAngle,Me.counterclockwise,void 0,Y,!He):k.call(this,Me.x,Me.y),He=!0}else if(se[De].close===!0)this.pdf.internal.out("h"),He=!1;else if(se[De].begin!==!0){var Ke=se[De].start.x,We=se[De].start.y;M.call(this,se[De].deltas,Ke,We),He=!0}H&&S.call(this,H),Y&&L.call(this)}},B=function(O){var Y=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,J=Y*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return O-J;case"top":return O+Y-J;case"hanging":return O+Y-2*J;case"middle":return O+Y/2-J;case"ideographic":return O;case"alphabetic":default:return O}},j=function(O){return O+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};p.prototype.createLinearGradient=function(){var O=function(){};return O.colorStops=[],O.addColorStop=function(Y,J){this.colorStops.push([Y,J])},O.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},O.isCanvasGradient=!0,O},p.prototype.createPattern=function(){return this.createLinearGradient()},p.prototype.createRadialGradient=function(){return this.createLinearGradient()};var y=function(O,Y,J,H,se,le,ue,de,Ae){for(var Te=V.call(this,J,H,se,le),Re=0;Re<Te.length;Re++){var Be=Te[Re];Re===0&&(Ae?E.call(this,Be.x1+O,Be.y1+Y):k.call(this,Be.x1+O,Be.y1+Y)),te.call(this,O,Y,Be.x2,Be.y2,Be.x3,Be.y3,Be.x4,Be.y4)}de?L.call(this):S.call(this,ue)},S=function(O){switch(O){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},L=function(){this.pdf.clip(),this.pdf.discardPath()},E=function(O,Y){this.pdf.internal.out(n(O)+" "+r(Y)+" m")},I=function(O){var Y;switch(O.align){case"right":case"end":Y="right";break;case"center":Y="center";break;case"left":case"start":default:Y="left"}var J=this.pdf.getTextDimensions(O.text),H=B.call(this,O.y),se=j.call(this,H)-J.h,le=this.ctx.transform.applyToPoint(new a(O.x,H)),ue=this.ctx.transform.decompose(),de=new l;de=(de=(de=de.multiply(ue.translate)).multiply(ue.skew)).multiply(ue.scale);for(var Ae,Te,Re,Be=this.ctx.transform.applyToRectangle(new o(O.x,H,J.w,J.h)),Xe=de.applyToRectangle(new o(O.x,se,J.w,J.h)),be=T.call(this,Xe),ae=[],He=0;He<be.length;He+=1)ae.indexOf(be[He])===-1&&ae.push(be[He]);if(C(ae),this.autoPaging)for(var De=ae[0],he=ae[ae.length-1],Ie=De;Ie<he+1;Ie++){this.pdf.setPage(Ie);var Me=Ie===1?this.posY+this.margin[0]:this.margin[0],Ke=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],We=this.pdf.internal.pageSize.height-this.margin[2],Ye=We-this.margin[0],at=this.pdf.internal.pageSize.width-this.margin[1],tt=at-this.margin[3],ut=Ie===1?0:Ke+(Ie-2)*Ye;if(this.ctx.clip_path.length!==0){var dt=this.path;Ae=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=N(Ae,this.posX+this.margin[3],-1*ut+Me),Q.call(this,"fill",!0),this.path=dt}var ot=N([JSON.parse(JSON.stringify(Xe))],this.posX+this.margin[3],-ut+Me+this.ctx.prevPageLastElemOffset)[0];O.scale>=.01&&(Te=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Te*O.scale),Re=this.lineWidth,this.lineWidth=Re*O.scale);var ct=this.autoPaging!=="text";if(ct||ot.y+ot.h<=We){if(ct||ot.y>=Me&&ot.x<=at){var ze=ct?O.text:this.pdf.splitTextToSize(O.text,O.maxWidth||at-ot.x)[0],_e=N([JSON.parse(JSON.stringify(Be))],this.posX+this.margin[3],-ut+Me+this.ctx.prevPageLastElemOffset)[0],$e=ct&&(Ie>De||Ie<he)&&x.call(this);$e&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],tt,Ye,null).clip().discardPath()),this.pdf.text(ze,_e.x,_e.y,{angle:O.angle,align:Y,renderingMode:O.renderingMode}),$e&&this.pdf.restoreGraphicsState()}}else ot.y<We&&(this.ctx.prevPageLastElemOffset+=We-ot.y);O.scale>=.01&&(this.pdf.setFontSize(Te),this.lineWidth=Re)}else O.scale>=.01&&(Te=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Te*O.scale),Re=this.lineWidth,this.lineWidth=Re*O.scale),this.pdf.text(O.text,le.x+this.posX,le.y+this.posY,{angle:O.angle,align:Y,renderingMode:O.renderingMode,maxWidth:O.maxWidth}),O.scale>=.01&&(this.pdf.setFontSize(Te),this.lineWidth=Re)},k=function(O,Y,J,H){J=J||0,H=H||0,this.pdf.internal.out(n(O+J)+" "+r(Y+H)+" l")},M=function(O,Y,J){return this.pdf.lines(O,Y,J,null,null)},te=function(O,Y,J,H,se,le,ue,de){this.pdf.internal.out([e(i(J+O)),e(s(H+Y)),e(i(se+O)),e(s(le+Y)),e(i(ue+O)),e(s(de+Y)),"c"].join(" "))},V=function(O,Y,J,H){for(var se=2*Math.PI,le=Math.PI/2;Y>J;)Y-=se;var ue=Math.abs(J-Y);ue<se&&H&&(ue=se-ue);for(var de=[],Ae=H?-1:1,Te=Y;ue>1e-5;){var Re=Te+Ae*Math.min(ue,le);de.push(U.call(this,O,Te,Re)),ue-=Math.abs(Re-Te),Te=Re}return de},U=function(O,Y,J){var H=(J-Y)/2,se=O*Math.cos(H),le=O*Math.sin(H),ue=se,de=-le,Ae=ue*ue+de*de,Te=Ae+ue*se+de*le,Re=4/3*(Math.sqrt(2*Ae*Te)-Te)/(ue*le-de*se),Be=ue-Re*de,Xe=de+Re*ue,be=Be,ae=-Xe,He=H+Y,De=Math.cos(He),he=Math.sin(He);return{x1:O*Math.cos(Y),y1:O*Math.sin(Y),x2:Be*De-Xe*he,y2:Be*he+Xe*De,x3:be*De-ae*he,y3:be*he+ae*De,x4:O*Math.cos(J),y4:O*Math.sin(J)}},z=function(O){return 180*O/Math.PI},$=function(O,Y,J,H,se,le){var ue=O+.5*(J-O),de=Y+.5*(H-Y),Ae=se+.5*(J-se),Te=le+.5*(H-le),Re=Math.min(O,se,ue,Ae),Be=Math.max(O,se,ue,Ae),Xe=Math.min(Y,le,de,Te),be=Math.max(Y,le,de,Te);return new o(Re,Xe,Be-Re,be-Xe)},ne=function(O,Y,J,H,se,le,ue,de){var Ae,Te,Re,Be,Xe,be,ae,He,De,he,Ie,Me,Ke,We,Ye=J-O,at=H-Y,tt=se-J,ut=le-H,dt=ue-se,ot=de-le;for(Te=0;Te<41;Te++)De=(ae=(Re=O+(Ae=Te/40)*Ye)+Ae*((Xe=J+Ae*tt)-Re))+Ae*(Xe+Ae*(se+Ae*dt-Xe)-ae),he=(He=(Be=Y+Ae*at)+Ae*((be=H+Ae*ut)-Be))+Ae*(be+Ae*(le+Ae*ot-be)-He),Te==0?(Ie=De,Me=he,Ke=De,We=he):(Ie=Math.min(Ie,De),Me=Math.min(Me,he),Ke=Math.max(Ke,De),We=Math.max(We,he));return new o(Math.round(Ie),Math.round(Me),Math.round(Ke-Ie),Math.round(We-Me))},we=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var O,Y,J=(O=this.ctx.lineDash,Y=this.ctx.lineDashOffset,JSON.stringify({lineDash:O,lineDashOffset:Y}));this.prevLineDash!==J&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=J)}}})(gt.API),function(t){var e=function(s){var a,o,l,c,d,p,g,m,b,x;for(o=[],l=0,c=(s+=a="\0\0\0\0".slice(s.length%4||4)).length;c>l;l+=4)(d=(s.charCodeAt(l)<<24)+(s.charCodeAt(l+1)<<16)+(s.charCodeAt(l+2)<<8)+s.charCodeAt(l+3))!==0?(p=(d=((d=((d=((d=(d-(x=d%85))/85)-(b=d%85))/85)-(m=d%85))/85)-(g=d%85))/85)%85,o.push(p+33,g+33,m+33,b+33,x+33)):o.push(122);return function(T,w){for(var N=w;N>0;N--)T.pop()}(o,a.length),String.fromCharCode.apply(String,o)+"~>"},n=function(s){var a,o,l,c,d,p=String,g="length",m=255,b="charCodeAt",x="slice",T="replace";for(s[x](-2),s=s[x](0,-2)[T](/\s/g,"")[T]("z","!!!!!"),l=[],c=0,d=(s+=a="uuuuu"[x](s[g]%5||5))[g];d>c;c+=5)o=52200625*(s[b](c)-33)+614125*(s[b](c+1)-33)+7225*(s[b](c+2)-33)+85*(s[b](c+3)-33)+(s[b](c+4)-33),l.push(m&o>>24,m&o>>16,m&o>>8,m&o);return function(w,N){for(var C=N;C>0;C--)w.pop()}(l,a[g]),p.fromCharCode.apply(p,l)},r=function(s){var a=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((s=s.replace(/\s/g,"")).indexOf(">")!==-1&&(s=s.substr(0,s.indexOf(">"))),s.length%2&&(s+="0"),a.test(s)===!1)return"";for(var o="",l=0;l<s.length;l+=2)o+=String.fromCharCode("0x"+(s[l]+s[l+1]));return o},i=function(s){for(var a=new Uint8Array(s.length),o=s.length;o--;)a[o]=s.charCodeAt(o);return s=(a=rv(a)).reduce(function(l,c){return l+String.fromCharCode(c)},"")};t.processDataByFilters=function(s,a){var o=0,l=s||"",c=[];for(typeof(a=a||[])=="string"&&(a=[a]),o=0;o<a.length;o+=1)switch(a[o]){case"ASCII85Decode":case"/ASCII85Decode":l=n(l),c.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":l=e(l),c.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":l=r(l),c.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":l=l.split("").map(function(d){return("0"+d.charCodeAt().toString(16)).slice(-2)}).join("")+">",c.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":l=i(l),c.push("/FlateDecode");break;default:throw new Error('The filter: "'+a[o]+'" is not implemented')}return{data:l,reverseChain:c.reverse().join(" ")}}}(gt.API),function(t){t.loadFile=function(e,n,r){return function(i,s,a){s=s!==!1,a=typeof a=="function"?a:function(){};var o=void 0;try{o=function(l,c,d){var p=new XMLHttpRequest,g=0,m=function(b){var x=b.length,T=[],w=String.fromCharCode;for(g=0;g<x;g+=1)T.push(w(255&b.charCodeAt(g)));return T.join("")};if(p.open("GET",l,!c),p.overrideMimeType("text/plain; charset=x-user-defined"),c===!1&&(p.onload=function(){p.status===200?d(m(this.responseText)):d(void 0)}),p.send(null),c&&p.status===200)return m(p.responseText)}(i,s,a)}catch{}return o}(e,n,r)},t.loadImageFile=t.loadFile}(gt.API),function(t){function e(){return(vt.html2canvas?Promise.resolve(vt.html2canvas):X0(()=>import("./html2canvas.esm-CBrSDip1.js"),[])).catch(function(a){return Promise.reject(new Error("Could not load html2canvas: "+a))}).then(function(a){return a.default?a.default:a})}function n(){return(vt.DOMPurify?Promise.resolve(vt.DOMPurify):X0(()=>import("./purify.es-C_uT9hQ1.js"),[])).catch(function(a){return Promise.reject(new Error("Could not load dompurify: "+a))}).then(function(a){return a.default?a.default:a})}var r=function(a){var o=Gt(a);return o==="undefined"?"undefined":o==="string"||a instanceof String?"string":o==="number"||a instanceof Number?"number":o==="function"||a instanceof Function?"function":a&&a.constructor===Array?"array":a&&a.nodeType===1?"element":o==="object"?"object":"unknown"},i=function(a,o){var l=document.createElement(a);for(var c in o.className&&(l.className=o.className),o.innerHTML&&o.dompurify&&(l.innerHTML=o.dompurify.sanitize(o.innerHTML)),o.style)l.style[c]=o.style[c];return l},s=function a(o){var l=Object.assign(a.convert(Promise.resolve()),JSON.parse(JSON.stringify(a.template))),c=a.convert(Promise.resolve(),l);return c=(c=c.setProgress(1,a,1,[a])).set(o)};(s.prototype=Object.create(Promise.prototype)).constructor=s,s.convert=function(a,o){return a.__proto__=o||s.prototype,a},s.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},s.prototype.from=function(a,o){return this.then(function(){switch(o=o||function(l){switch(r(l)){case"string":return"string";case"element":return l.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(a)){case"string":return this.then(n).then(function(l){return this.set({src:i("div",{innerHTML:a,dompurify:l})})});case"element":return this.set({src:a});case"canvas":return this.set({canvas:a});case"img":return this.set({img:a});default:return this.error("Unknown source type.")}})},s.prototype.to=function(a){switch(a){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},s.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var a={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},o=function l(c,d){for(var p=c.nodeType===3?document.createTextNode(c.nodeValue):c.cloneNode(!1),g=c.firstChild;g;g=g.nextSibling)d!==!0&&g.nodeType===1&&g.nodeName==="SCRIPT"||p.appendChild(l(g,d));return c.nodeType===1&&(c.nodeName==="CANVAS"?(p.width=c.width,p.height=c.height,p.getContext("2d").drawImage(c,0,0)):c.nodeName!=="TEXTAREA"&&c.nodeName!=="SELECT"||(p.value=c.value),p.addEventListener("load",function(){p.scrollTop=c.scrollTop,p.scrollLeft=c.scrollLeft},!0)),p}(this.prop.src,this.opt.html2canvas.javascriptEnabled);o.tagName==="BODY"&&(a.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:a}),this.prop.container.appendChild(o),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},s.prototype.toCanvas=function(){var a=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(a).then(e).then(function(o){var l=Object.assign({},this.opt.html2canvas);return delete l.onrendered,o(this.prop.container,l)}).then(function(o){(this.opt.html2canvas.onrendered||function(){})(o),this.prop.canvas=o,document.body.removeChild(this.prop.overlay)})},s.prototype.toContext2d=function(){var a=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(a).then(e).then(function(o){var l=this.opt.jsPDF,c=this.opt.fontFaces,d=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,p=Object.assign({async:!0,allowTaint:!0,scale:d,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete p.onrendered,l.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,l.context2d.posX=this.opt.x,l.context2d.posY=this.opt.y,l.context2d.margin=this.opt.margin,l.context2d.fontFaces=c,c)for(var g=0;g<c.length;++g){var m=c[g],b=m.src.find(function(x){return x.format==="truetype"});b&&l.addFont(b.url,m.ref.name,m.ref.style)}return p.windowHeight=p.windowHeight||0,p.windowHeight=p.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):p.windowHeight,l.context2d.save(!0),o(this.prop.container,p)}).then(function(o){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(o),this.prop.canvas=o,document.body.removeChild(this.prop.overlay)})},s.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var a=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=a})},s.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},s.prototype.output=function(a,o,l){return(l=l||"pdf").toLowerCase()==="img"||l.toLowerCase()==="image"?this.outputImg(a,o):this.outputPdf(a,o)},s.prototype.outputPdf=function(a,o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(a,o)})},s.prototype.outputImg=function(a){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(a){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+a+'" is not supported.'}})},s.prototype.save=function(a){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(a?{filename:a}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},s.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},s.prototype.set=function(a){if(r(a)!=="object")return this;var o=Object.keys(a||{}).map(function(l){if(l in s.template.prop)return function(){this.prop[l]=a[l]};switch(l){case"margin":return this.setMargin.bind(this,a.margin);case"jsPDF":return function(){return this.opt.jsPDF=a.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,a.pageSize);default:return function(){this.opt[l]=a[l]}}},this);return this.then(function(){return this.thenList(o)})},s.prototype.get=function(a,o){return this.then(function(){var l=a in s.template.prop?this.prop[a]:this.opt[a];return o?o(l):l})},s.prototype.setMargin=function(a){return this.then(function(){switch(r(a)){case"number":a=[a,a,a,a];case"array":if(a.length===2&&(a=[a[0],a[1],a[0],a[1]]),a.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=a}).then(this.setPageSize)},s.prototype.setPageSize=function(a){function o(l,c){return Math.floor(l*c/72*96)}return this.then(function(){(a=a||gt.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(a.inner={width:a.width-this.opt.margin[1]-this.opt.margin[3],height:a.height-this.opt.margin[0]-this.opt.margin[2]},a.inner.px={width:o(a.inner.width,a.k),height:o(a.inner.height,a.k)},a.inner.ratio=a.inner.height/a.inner.width),this.prop.pageSize=a})},s.prototype.setProgress=function(a,o,l,c){return a!=null&&(this.progress.val=a),o!=null&&(this.progress.state=o),l!=null&&(this.progress.n=l),c!=null&&(this.progress.stack=c),this.progress.ratio=this.progress.val/this.progress.state,this},s.prototype.updateProgress=function(a,o,l,c){return this.setProgress(a?this.progress.val+a:null,o||null,l?this.progress.n+l:null,c?this.progress.stack.concat(c):null)},s.prototype.then=function(a,o){var l=this;return this.thenCore(a,o,function(c,d){return l.updateProgress(null,null,1,[c]),Promise.prototype.then.call(this,function(p){return l.updateProgress(null,c),p}).then(c,d).then(function(p){return l.updateProgress(1),p})})},s.prototype.thenCore=function(a,o,l){l=l||Promise.prototype.then,a&&(a=a.bind(this)),o&&(o=o.bind(this));var c=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:s.convert(Object.assign({},this),Promise.prototype),d=l.call(c,a,o);return s.convert(d,this.__proto__)},s.prototype.thenExternal=function(a,o){return Promise.prototype.then.call(this,a,o)},s.prototype.thenList=function(a){var o=this;return a.forEach(function(l){o=o.thenCore(l)}),o},s.prototype.catch=function(a){a&&(a=a.bind(this));var o=Promise.prototype.catch.call(this,a);return s.convert(o,this)},s.prototype.catchExternal=function(a){return Promise.prototype.catch.call(this,a)},s.prototype.error=function(a){return this.then(function(){throw new Error(a)})},s.prototype.using=s.prototype.set,s.prototype.saveAs=s.prototype.save,s.prototype.export=s.prototype.output,s.prototype.run=s.prototype.then,gt.getPageSize=function(a,o,l){if(Gt(a)==="object"){var c=a;a=c.orientation,o=c.unit||o,l=c.format||l}o=o||"mm",l=l||"a4",a=(""+(a||"P")).toLowerCase();var d,p=(""+l).toLowerCase(),g={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(o){case"pt":d=1;break;case"mm":d=72/25.4;break;case"cm":d=72/2.54;break;case"in":d=72;break;case"px":d=.75;break;case"pc":case"em":d=12;break;case"ex":d=6;break;default:throw"Invalid unit: "+o}var m,b=0,x=0;if(g.hasOwnProperty(p))b=g[p][1]/d,x=g[p][0]/d;else try{b=l[1],x=l[0]}catch{throw new Error("Invalid format: "+l)}if(a==="p"||a==="portrait")a="p",x>b&&(m=x,x=b,b=m);else{if(a!=="l"&&a!=="landscape")throw"Invalid orientation: "+a;a="l",b>x&&(m=x,x=b,b=m)}return{width:x,height:b,unit:o,k:d,orientation:a}},t.html=function(a,o){(o=o||{}).callback=o.callback||function(){},o.html2canvas=o.html2canvas||{},o.html2canvas.canvas=o.html2canvas.canvas||this.canvas,o.jsPDF=o.jsPDF||this,o.fontFaces=o.fontFaces?o.fontFaces.map(cv):null;var l=new s(o);return o.worker?l:l.from(a).doCallback()}}(gt.API),gt.API.addJS=function(t){return q_=t,this.internal.events.subscribe("postPutResources",function(){qf=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(qf+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),K_=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+q_+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){qf!==void 0&&K_!==void 0&&this.internal.out("/Names <</JavaScript "+qf+" 0 R>>")}),this},function(t){var e;t.events.push(["postPutResources",function(){var n=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=n.outline.render().split(/\r\n/),s=0;s<i.length;s++){var a=i[s],o=r.exec(a);if(o!=null){var l=o[1];n.internal.newObjectDeferredBegin(l,!1)}n.internal.write(a)}if(this.outline.createNamedDestinations){var c=this.internal.pages.length,d=[];for(s=0;s<c;s++){var p=n.internal.newObject();d.push(p);var g=n.internal.getPageInfo(s+1);n.internal.write("<< /D["+g.objId+" 0 R /XYZ null null null]>> endobj")}var m=n.internal.newObject();for(n.internal.write("<< /Names [ "),s=0;s<d.length;s++)n.internal.write("(page_"+(s+1)+")"+d[s]+" 0 R");n.internal.write(" ] >>","endobj"),e=n.internal.newObject(),n.internal.write("<< /Dests "+m+" 0 R"),n.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var n=this;n.outline={createNamedDestinations:!1,root:{children:[]}},n.outline.add=function(r,i,s){var a={title:i,options:s,children:[]};return r==null&&(r=this.root),r.children.push(a),a},n.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=n,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},n.outline.genIds_r=function(r){r.id=n.internal.newObjectDeferred();for(var i=0;i<r.children.length;i++)this.genIds_r(r.children[i])},n.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},n.outline.renderItems=function(r){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<r.children.length;s++){var a=r.children[s];this.objStart(a),this.line("/Title "+this.makeString(a.title)),this.line("/Parent "+this.makeRef(r)),s>0&&this.line("/Prev "+this.makeRef(r.children[s-1])),s<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[s+1])),a.children.length>0&&(this.line("/First "+this.makeRef(a.children[0])),this.line("/Last "+this.makeRef(a.children[a.children.length-1])));var o=this.count=this.count_r({count:0},a);if(o>0&&this.line("/Count "+o),a.options&&a.options.pageNumber){var l=n.internal.getPageInfo(a.options.pageNumber);this.line("/Dest ["+l.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var c=0;c<r.children.length;c++)this.renderItems(r.children[c])},n.outline.line=function(r){this.ctx.val+=r+`\r
`},n.outline.makeRef=function(r){return r.id+" 0 R"},n.outline.makeString=function(r){return"("+n.internal.pdfEscape(r)+")"},n.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},n.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},n.outline.count_r=function(r,i){for(var s=0;s<i.children.length;s++)r.count++,this.count_r(r,i.children[s]);return r.count}}])}(gt.API),function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(n,r,i,s,a,o){var l,c=this.decode.DCT_DECODE,d=null;if(typeof n=="string"||this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n)){switch(n=a||n,n=this.__addimage__.isArrayBuffer(n)?new Uint8Array(n):n,(l=function(p){for(var g,m=256*p.charCodeAt(4)+p.charCodeAt(5),b=p.length,x={width:0,height:0,numcomponents:1},T=4;T<b;T+=2){if(T+=m,e.indexOf(p.charCodeAt(T+1))!==-1){g=256*p.charCodeAt(T+5)+p.charCodeAt(T+6),x={width:256*p.charCodeAt(T+7)+p.charCodeAt(T+8),height:g,numcomponents:p.charCodeAt(T+9)};break}m=256*p.charCodeAt(T+2)+p.charCodeAt(T+3)}return x}(n=this.__addimage__.isArrayBufferView(n)?this.__addimage__.arrayBufferToBinaryString(n):n)).numcomponents){case 1:o=this.color_spaces.DEVICE_GRAY;break;case 4:o=this.color_spaces.DEVICE_CMYK;break;case 3:o=this.color_spaces.DEVICE_RGB}d={data:n,width:l.width,height:l.height,colorSpace:o,bitsPerComponent:8,filter:c,index:r,alias:i}}return d}}(gt.API);var Oc,zf,z_,$_,H_,ND=function(){var t,e,n;function r(s){var a,o,l,c,d,p,g,m,b,x,T,w,N,C;for(this.data=s,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},p=null;;){switch(a=this.readUInt32(),b=(function(){var F,Q;for(Q=[],F=0;F<4;++F)Q.push(String.fromCharCode(this.data[this.pos++]));return Q}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(a);break;case"fcTL":p&&this.animation.frames.push(p),this.pos+=4,p={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},d=this.readUInt16(),c=this.readUInt16()||100,p.delay=1e3*d/c,p.disposeOp=this.data[this.pos++],p.blendOp=this.data[this.pos++],p.data=[];break;case"IDAT":case"fdAT":for(b==="fdAT"&&(this.pos+=4,a-=4),s=(p!=null?p.data:void 0)||this.imgData,w=0;0<=a?w<a:w>a;0<=a?++w:--w)s.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(l=this.palette.length/3,this.transparency.indexed=this.read(a),this.transparency.indexed.length>l)throw new Error("More transparent colors than palette size");if((x=l-this.transparency.indexed.length)>0)for(N=0;0<=x?N<x:N>x;0<=x?++N:--N)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(a)[0];break;case 2:this.transparency.rgb=this.read(a)}break;case"tEXt":g=(T=this.read(a)).indexOf(0),m=String.fromCharCode.apply(String,T.slice(0,g)),this.text[m]=String.fromCharCode.apply(String,T.slice(g+1));break;case"IEND":return p&&this.animation.frames.push(p),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(C=this.colorType)===4||C===6,o=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*o,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=a}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}r.prototype.read=function(s){var a,o;for(o=[],a=0;0<=s?a<s:a>s;0<=s?++a:--a)o.push(this.data[this.pos++]);return o},r.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.decodePixels=function(s){var a=this.pixelBitlength/8,o=new Uint8Array(this.width*this.height*a),l=0,c=this;if(s==null&&(s=this.imgData),s.length===0)return new Uint8Array(0);function d(p,g,m,b){var x,T,w,N,C,F,Q,B,j,y,S,L,E,I,k,M,te,V,U,z,$,ne=Math.ceil((c.width-p)/m),we=Math.ceil((c.height-g)/b),O=c.width==ne&&c.height==we;for(I=a*ne,L=O?o:new Uint8Array(I*we),F=s.length,E=0,T=0;E<we&&l<F;){switch(s[l++]){case 0:for(N=te=0;te<I;N=te+=1)L[T++]=s[l++];break;case 1:for(N=V=0;V<I;N=V+=1)x=s[l++],C=N<a?0:L[T-a],L[T++]=(x+C)%256;break;case 2:for(N=U=0;U<I;N=U+=1)x=s[l++],w=(N-N%a)/a,k=E&&L[(E-1)*I+w*a+N%a],L[T++]=(k+x)%256;break;case 3:for(N=z=0;z<I;N=z+=1)x=s[l++],w=(N-N%a)/a,C=N<a?0:L[T-a],k=E&&L[(E-1)*I+w*a+N%a],L[T++]=(x+Math.floor((C+k)/2))%256;break;case 4:for(N=$=0;$<I;N=$+=1)x=s[l++],w=(N-N%a)/a,C=N<a?0:L[T-a],E===0?k=M=0:(k=L[(E-1)*I+w*a+N%a],M=w&&L[(E-1)*I+(w-1)*a+N%a]),Q=C+k-M,B=Math.abs(Q-C),y=Math.abs(Q-k),S=Math.abs(Q-M),j=B<=y&&B<=S?C:y<=S?k:M,L[T++]=(x+j)%256;break;default:throw new Error("Invalid filter algorithm: "+s[l-1])}if(!O){var Y=((g+E*b)*c.width+p)*a,J=E*I;for(N=0;N<ne;N+=1){for(var H=0;H<a;H+=1)o[Y++]=L[J++];Y+=(m-1)*a}}E++}}return s=nD(s),c.interlaceMethod==1?(d(0,0,8,8),d(4,0,8,8),d(0,4,4,8),d(2,0,4,4),d(0,2,2,4),d(1,0,2,2),d(0,1,1,2)):d(0,0,1,1),o},r.prototype.decodePalette=function(){var s,a,o,l,c,d,p,g,m;for(o=this.palette,d=this.transparency.indexed||[],c=new Uint8Array((d.length||0)+o.length),l=0,s=0,a=p=0,g=o.length;p<g;a=p+=3)c[l++]=o[a],c[l++]=o[a+1],c[l++]=o[a+2],c[l++]=(m=d[s++])!=null?m:255;return c},r.prototype.copyToImageData=function(s,a){var o,l,c,d,p,g,m,b,x,T,w;if(l=this.colors,x=null,o=this.hasAlphaChannel,this.palette.length&&(x=(w=this._decodedPalette)!=null?w:this._decodedPalette=this.decodePalette(),l=4,o=!0),b=(c=s.data||s).length,p=x||a,d=g=0,l===1)for(;d<b;)m=x?4*a[d/4]:g,T=p[m++],c[d++]=T,c[d++]=T,c[d++]=T,c[d++]=o?p[m++]:255,g=m;else for(;d<b;)m=x?4*a[d/4]:g,c[d++]=p[m++],c[d++]=p[m++],c[d++]=p[m++],c[d++]=o?p[m++]:255,g=m},r.prototype.decode=function(){var s;return s=new Uint8Array(this.width*this.height*4),this.copyToImageData(s,this.decodePixels()),s};var i=function(){if(Object.prototype.toString.call(vt)==="[object Window]"){try{e=vt.document.createElement("canvas"),n=e.getContext("2d")}catch{return!1}return!0}return!1};return i(),t=function(s){var a;if(i()===!0)return n.width=s.width,n.height=s.height,n.clearRect(0,0,s.width,s.height),n.putImageData(s,0,0),(a=new Image).src=e.toDataURL(),a;throw new Error("This method requires a Browser with Canvas-capability.")},r.prototype.decodeFrames=function(s){var a,o,l,c,d,p,g,m;if(this.animation){for(m=[],o=d=0,p=(g=this.animation.frames).length;d<p;o=++d)a=g[o],l=s.createImageData(a.width,a.height),c=this.decodePixels(new Uint8Array(a.data)),this.copyToImageData(l,c),a.imageData=l,m.push(a.image=t(l));return m}},r.prototype.renderFrame=function(s,a){var o,l,c;return o=(l=this.animation.frames)[a],c=l[a-1],a===0&&s.clearRect(0,0,this.width,this.height),(c!=null?c.disposeOp:void 0)===1?s.clearRect(c.xOffset,c.yOffset,c.width,c.height):(c!=null?c.disposeOp:void 0)===2&&s.putImageData(c.imageData,c.xOffset,c.yOffset),o.blendOp===0&&s.clearRect(o.xOffset,o.yOffset,o.width,o.height),s.drawImage(o.image,o.xOffset,o.yOffset)},r.prototype.animate=function(s){var a,o,l,c,d,p,g=this;return o=0,p=this.animation,c=p.numFrames,l=p.frames,d=p.numPlays,(a=function(){var m,b;if(m=o++%c,b=l[m],g.renderFrame(s,m),c>1&&o/c<d)return g.animation._timeout=setTimeout(a,b.delay)})()},r.prototype.stopAnimation=function(){var s;return clearTimeout((s=this.animation)!=null?s._timeout:void 0)},r.prototype.render=function(s){var a,o;return s._png&&s._png.stopAnimation(),s._png=this,s.width=this.width,s.height=this.height,a=s.getContext("2d"),this.animation?(this.decodeFrames(a),this.animate(a)):(o=a.createImageData(this.width,this.height),this.copyToImageData(o,this.decodePixels()),a.putImageData(o,0,0))},r}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function AD(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!=56||t[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var n=t[e++]|t[e++]<<8,r=t[e++]|t[e++]<<8,i=t[e++],s=i>>7,a=1<<(7&i)+1;t[e++],t[e++];var o=null,l=null;s&&(o=e,l=a,e+=3*a);var c=!0,d=[],p=0,g=null,m=0,b=null;for(this.width=n,this.height=r;c&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0)e+=14,b=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((E=t[e++])>=0))throw Error("Invalid block size");if(E===0)break;e+=E}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var x=t[e++];p=t[e++]|t[e++]<<8,g=t[e++],!(1&x)&&(g=null),m=x>>2&7,e++;break;case 254:for(;;){if(!((E=t[e++])>=0))throw Error("Invalid block size");if(E===0)break;e+=E}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var T=t[e++]|t[e++]<<8,w=t[e++]|t[e++]<<8,N=t[e++]|t[e++]<<8,C=t[e++]|t[e++]<<8,F=t[e++],Q=F>>6&1,B=1<<(7&F)+1,j=o,y=l,S=!1;F>>7&&(S=!0,j=e,y=B,e+=3*B);var L=e;for(e++;;){var E;if(!((E=t[e++])>=0))throw Error("Invalid block size");if(E===0)break;e+=E}d.push({x:T,y:w,width:N,height:C,has_local_palette:S,palette_offset:j,palette_size:y,data_offset:L,data_length:e-L,transparent_index:g,interlaced:!!Q,delay:p,disposal:m});break;case 59:c=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return d.length},this.loopCount=function(){return b},this.frameInfo=function(I){if(I<0||I>=d.length)throw new Error("Frame index out of range.");return d[I]},this.decodeAndBlitFrameBGRA=function(I,k){var M=this.frameInfo(I),te=M.width*M.height,V=new Uint8Array(te);W_(t,M.data_offset,V,te);var U=M.palette_offset,z=M.transparent_index;z===null&&(z=256);var $=M.width,ne=n-$,we=$,O=4*(M.y*n+M.x),Y=4*((M.y+M.height)*n+M.x),J=O,H=4*ne;M.interlaced===!0&&(H+=4*n*7);for(var se=8,le=0,ue=V.length;le<ue;++le){var de=V[le];if(we===0&&(we=$,(J+=H)>=Y&&(H=4*ne+4*n*(se-1),J=O+($+ne)*(se<<1),se>>=1)),de===z)J+=4;else{var Ae=t[U+3*de],Te=t[U+3*de+1],Re=t[U+3*de+2];k[J++]=Re,k[J++]=Te,k[J++]=Ae,k[J++]=255}--we}},this.decodeAndBlitFrameRGBA=function(I,k){var M=this.frameInfo(I),te=M.width*M.height,V=new Uint8Array(te);W_(t,M.data_offset,V,te);var U=M.palette_offset,z=M.transparent_index;z===null&&(z=256);var $=M.width,ne=n-$,we=$,O=4*(M.y*n+M.x),Y=4*((M.y+M.height)*n+M.x),J=O,H=4*ne;M.interlaced===!0&&(H+=4*n*7);for(var se=8,le=0,ue=V.length;le<ue;++le){var de=V[le];if(we===0&&(we=$,(J+=H)>=Y&&(H=4*ne+4*n*(se-1),J=O+($+ne)*(se<<1),se>>=1)),de===z)J+=4;else{var Ae=t[U+3*de],Te=t[U+3*de+1],Re=t[U+3*de+2];k[J++]=Ae,k[J++]=Te,k[J++]=Re,k[J++]=255}--we}}}function W_(t,e,n,r){for(var i=t[e++],s=1<<i,a=s+1,o=a+1,l=i+1,c=(1<<l)-1,d=0,p=0,g=0,m=t[e++],b=new Int32Array(4096),x=null;;){for(;d<16&&m!==0;)p|=t[e++]<<d,d+=8,m===1?m=t[e++]:--m;if(d<l)break;var T=p&c;if(p>>=l,d-=l,T!==s){if(T===a)break;for(var w=T<o?T:x,N=0,C=w;C>s;)C=b[C]>>8,++N;var F=C;if(g+N+(w!==T?1:0)>r)return void tn.log("Warning, gif stream longer than expected.");n[g++]=F;var Q=g+=N;for(w!==T&&(n[g++]=F),C=w;N--;)C=b[C],n[--Q]=255&C,C>>=8;x!==null&&o<4096&&(b[o++]=x<<8|F,o>=c+1&&l<12&&(++l,c=c<<1|1)),x=T}else o=a+1,c=(1<<(l=i+1))-1,x=null}return g!==r&&tn.log("Warning, gif stream shorter than expected."),n}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function S1(t){var e,n,r,i,s,a=Math.floor,o=new Array(64),l=new Array(64),c=new Array(64),d=new Array(64),p=new Array(65535),g=new Array(65535),m=new Array(64),b=new Array(64),x=[],T=0,w=7,N=new Array(64),C=new Array(64),F=new Array(64),Q=new Array(256),B=new Array(2048),j=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],y=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],S=[0,1,2,3,4,5,6,7,8,9,10,11],L=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],E=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],I=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],k=[0,1,2,3,4,5,6,7,8,9,10,11],M=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],te=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function V(O,Y){for(var J=0,H=0,se=new Array,le=1;le<=16;le++){for(var ue=1;ue<=O[le];ue++)se[Y[H]]=[],se[Y[H]][0]=J,se[Y[H]][1]=le,H++,J++;J*=2}return se}function U(O){for(var Y=O[0],J=O[1]-1;J>=0;)Y&1<<J&&(T|=1<<w),J--,--w<0&&(T==255?(z(255),z(0)):z(T),w=7,T=0)}function z(O){x.push(O)}function $(O){z(O>>8&255),z(255&O)}function ne(O,Y,J,H,se){for(var le,ue=se[0],de=se[240],Ae=function(he,Ie){var Me,Ke,We,Ye,at,tt,ut,dt,ot,ct,ze=0;for(ot=0;ot<8;++ot){Me=he[ze],Ke=he[ze+1],We=he[ze+2],Ye=he[ze+3],at=he[ze+4],tt=he[ze+5],ut=he[ze+6];var _e=Me+(dt=he[ze+7]),$e=Me-dt,mt=Ke+ut,ft=Ke-ut,Tt=We+tt,Vn=We-tt,xt=Ye+at,vr=Ye-at,Bt=_e+xt,Wn=_e-xt,Nn=mt+Tt,Dt=mt-Tt;he[ze]=Bt+Nn,he[ze+4]=Bt-Nn;var lt=.707106781*(Dt+Wn);he[ze+2]=Wn+lt,he[ze+6]=Wn-lt;var Pt=.382683433*((Bt=vr+Vn)-(Dt=ft+$e)),Rr=.5411961*Bt+Pt,Jt=1.306562965*Dt+Pt,fn=.707106781*(Nn=Vn+ft),hi=$e+fn,nt=$e-fn;he[ze+5]=nt+Rr,he[ze+3]=nt-Rr,he[ze+1]=hi+Jt,he[ze+7]=hi-Jt,ze+=8}for(ze=0,ot=0;ot<8;++ot){Me=he[ze],Ke=he[ze+8],We=he[ze+16],Ye=he[ze+24],at=he[ze+32],tt=he[ze+40],ut=he[ze+48];var Wr=Me+(dt=he[ze+56]),yr=Me-dt,Un=Ke+ut,Pn=Ke-ut,An=We+tt,Bn=We-tt,Ua=Ye+at,$i=Ye-at,wr=Wr+Ua,Gr=Wr-Ua,Dr=Un+An,Fr=Un-An;he[ze]=wr+Dr,he[ze+32]=wr-Dr;var Cn=.707106781*(Fr+Gr);he[ze+16]=Gr+Cn,he[ze+48]=Gr-Cn;var di=.382683433*((wr=$i+Bn)-(Fr=Pn+yr)),ws=.5411961*wr+di,_s=1.306562965*Fr+di,bs=.707106781*(Dr=Bn+Pn),Js=yr+bs,Xs=yr-bs;he[ze+40]=Xs+ws,he[ze+24]=Xs-ws,he[ze+8]=Js+_s,he[ze+56]=Js-_s,ze++}for(ot=0;ot<64;++ot)ct=he[ot]*Ie[ot],m[ot]=ct>0?ct+.5|0:ct-.5|0;return m}(O,Y),Te=0;Te<64;++Te)b[j[Te]]=Ae[Te];var Re=b[0]-J;J=b[0],Re==0?U(H[0]):(U(H[g[le=32767+Re]]),U(p[le]));for(var Be=63;Be>0&&b[Be]==0;)Be--;if(Be==0)return U(ue),J;for(var Xe,be=1;be<=Be;){for(var ae=be;b[be]==0&&be<=Be;)++be;var He=be-ae;if(He>=16){Xe=He>>4;for(var De=1;De<=Xe;++De)U(de);He&=15}le=32767+b[be],U(se[(He<<4)+g[le]]),U(p[le]),be++}return Be!=63&&U(ue),J}function we(O){O=Math.min(Math.max(O,1),100),s!=O&&(function(Y){for(var J=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],H=0;H<64;H++){var se=a((J[H]*Y+50)/100);se=Math.min(Math.max(se,1),255),o[j[H]]=se}for(var le=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],ue=0;ue<64;ue++){var de=a((le[ue]*Y+50)/100);de=Math.min(Math.max(de,1),255),l[j[ue]]=de}for(var Ae=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Te=0,Re=0;Re<8;Re++)for(var Be=0;Be<8;Be++)c[Te]=1/(o[j[Te]]*Ae[Re]*Ae[Be]*8),d[Te]=1/(l[j[Te]]*Ae[Re]*Ae[Be]*8),Te++}(O<50?Math.floor(5e3/O):Math.floor(200-2*O)),s=O)}this.encode=function(O,Y){Y&&we(Y),x=new Array,T=0,w=7,$(65496),$(65504),$(16),z(74),z(70),z(73),z(70),z(0),z(1),z(1),z(0),$(1),$(1),z(0),z(0),function(){$(65499),$(132),z(0);for(var Ke=0;Ke<64;Ke++)z(o[Ke]);z(1);for(var We=0;We<64;We++)z(l[We])}(),function(Ke,We){$(65472),$(17),z(8),$(We),$(Ke),z(3),z(1),z(17),z(0),z(2),z(17),z(1),z(3),z(17),z(1)}(O.width,O.height),function(){$(65476),$(418),z(0);for(var Ke=0;Ke<16;Ke++)z(y[Ke+1]);for(var We=0;We<=11;We++)z(S[We]);z(16);for(var Ye=0;Ye<16;Ye++)z(L[Ye+1]);for(var at=0;at<=161;at++)z(E[at]);z(1);for(var tt=0;tt<16;tt++)z(I[tt+1]);for(var ut=0;ut<=11;ut++)z(k[ut]);z(17);for(var dt=0;dt<16;dt++)z(M[dt+1]);for(var ot=0;ot<=161;ot++)z(te[ot])}(),$(65498),$(12),z(3),z(1),z(0),z(2),z(17),z(3),z(17),z(0),z(63),z(0);var J=0,H=0,se=0;T=0,w=7,this.encode.displayName="_encode_";for(var le,ue,de,Ae,Te,Re,Be,Xe,be,ae=O.data,He=O.width,De=O.height,he=4*He,Ie=0;Ie<De;){for(le=0;le<he;){for(Te=he*Ie+le,Be=-1,Xe=0,be=0;be<64;be++)Re=Te+(Xe=be>>3)*he+(Be=4*(7&be)),Ie+Xe>=De&&(Re-=he*(Ie+1+Xe-De)),le+Be>=he&&(Re-=le+Be-he+4),ue=ae[Re++],de=ae[Re++],Ae=ae[Re++],N[be]=(B[ue]+B[de+256>>0]+B[Ae+512>>0]>>16)-128,C[be]=(B[ue+768>>0]+B[de+1024>>0]+B[Ae+1280>>0]>>16)-128,F[be]=(B[ue+1280>>0]+B[de+1536>>0]+B[Ae+1792>>0]>>16)-128;J=ne(N,c,J,e,r),H=ne(C,d,H,n,i),se=ne(F,d,se,n,i),le+=32}Ie+=8}if(w>=0){var Me=[];Me[1]=w+1,Me[0]=(1<<w+1)-1,U(Me)}return $(65497),new Uint8Array(x)},t=t||50,function(){for(var O=String.fromCharCode,Y=0;Y<256;Y++)Q[Y]=O(Y)}(),e=V(y,S),n=V(I,k),r=V(L,E),i=V(M,te),function(){for(var O=1,Y=2,J=1;J<=15;J++){for(var H=O;H<Y;H++)g[32767+H]=J,p[32767+H]=[],p[32767+H][1]=J,p[32767+H][0]=H;for(var se=-(Y-1);se<=-O;se++)g[32767+se]=J,p[32767+se]=[],p[32767+se][1]=J,p[32767+se][0]=Y-1+se;O<<=1,Y<<=1}}(),function(){for(var O=0;O<256;O++)B[O]=19595*O,B[O+256>>0]=38470*O,B[O+512>>0]=7471*O+32768,B[O+768>>0]=-11059*O,B[O+1024>>0]=-21709*O,B[O+1280>>0]=32768*O+8421375,B[O+1536>>0]=-27439*O,B[O+1792>>0]=-5329*O}(),we(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function is(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function G_(t){function e(y){if(!y)throw Error("assert :P")}function n(y,S,L){for(var E=0;4>E;E++)if(y[S+E]!=L.charCodeAt(E))return!0;return!1}function r(y,S,L,E,I){for(var k=0;k<I;k++)y[S+k]=L[E+k]}function i(y,S,L,E){for(var I=0;I<E;I++)y[S+I]=L}function s(y){return new Int32Array(y)}function a(y,S){for(var L=[],E=0;E<y;E++)L.push(new S);return L}function o(y,S){var L=[];return function E(I,k,M){for(var te=M[k],V=0;V<te&&(I.push(M.length>k+1?[]:new S),!(M.length<k+1));V++)E(I[V],k+1,M)}(L,0,y),L}var l=function(){var y=this;function S(h,v){for(var A=1<<v-1>>>0;h&A;)A>>>=1;return A?(h&A-1)+A:h}function L(h,v,A,R,q){e(!(R%A));do h[v+(R-=A)]=q;while(0<R)}function E(h,v,A,R,q){if(e(2328>=q),512>=q)var W=s(512);else if((W=s(q))==null)return 0;return function(G,Z,ee,re,fe,xe){var Se,ye,je=Z,Ee=1<<ee,pe=s(16),me=s(16);for(e(fe!=0),e(re!=null),e(G!=null),e(0<ee),ye=0;ye<fe;++ye){if(15<re[ye])return 0;++pe[re[ye]]}if(pe[0]==fe)return 0;for(me[1]=0,Se=1;15>Se;++Se){if(pe[Se]>1<<Se)return 0;me[Se+1]=me[Se]+pe[Se]}for(ye=0;ye<fe;++ye)Se=re[ye],0<re[ye]&&(xe[me[Se]++]=ye);if(me[15]==1)return(re=new I).g=0,re.value=xe[0],L(G,je,1,Ee,re),Ee;var Pe,Fe=-1,Ce=Ee-1,Ze=0,Ge=1,pt=1,Je=1<<ee;for(ye=0,Se=1,fe=2;Se<=ee;++Se,fe<<=1){if(Ge+=pt<<=1,0>(pt-=pe[Se]))return 0;for(;0<pe[Se];--pe[Se])(re=new I).g=Se,re.value=xe[ye++],L(G,je+Ze,fe,Je,re),Ze=S(Ze,Se)}for(Se=ee+1,fe=2;15>=Se;++Se,fe<<=1){if(Ge+=pt<<=1,0>(pt-=pe[Se]))return 0;for(;0<pe[Se];--pe[Se]){if(re=new I,(Ze&Ce)!=Fe){for(je+=Je,Pe=1<<(Fe=Se)-ee;15>Fe&&!(0>=(Pe-=pe[Fe]));)++Fe,Pe<<=1;Ee+=Je=1<<(Pe=Fe-ee),G[Z+(Fe=Ze&Ce)].g=Pe+ee,G[Z+Fe].value=je-Z-Fe}re.g=Se-ee,re.value=xe[ye++],L(G,je+(Ze>>ee),fe,Je,re),Ze=S(Ze,Se)}}return Ge!=2*me[15]-1?0:Ee}(h,v,A,R,q,W)}function I(){this.value=this.g=0}function k(){this.value=this.g=0}function M(){this.G=a(5,I),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=a(or,k)}function te(h,v,A,R){e(h!=null),e(v!=null),e(2147483648>R),h.Ca=254,h.I=0,h.b=-8,h.Ka=0,h.oa=v,h.pa=A,h.Jd=v,h.Yc=A+R,h.Zc=4<=R?A+R-4+1:A,le(h)}function V(h,v){for(var A=0;0<v--;)A|=de(h,128)<<v;return A}function U(h,v){var A=V(h,v);return ue(h)?-A:A}function z(h,v,A,R){var q,W=0;for(e(h!=null),e(v!=null),e(4294967288>R),h.Sb=R,h.Ra=0,h.u=0,h.h=0,4<R&&(R=4),q=0;q<R;++q)W+=v[A+q]<<8*q;h.Ra=W,h.bb=R,h.oa=v,h.pa=A}function $(h){for(;8<=h.u&&h.bb<h.Sb;)h.Ra>>>=8,h.Ra+=h.oa[h.pa+h.bb]<<Nc-8>>>0,++h.bb,h.u-=8;J(h)&&(h.h=1,h.u=0)}function ne(h,v){if(e(0<=v),!h.h&&v<=Sc){var A=Y(h)&xc[v];return h.u+=v,$(h),A}return h.h=1,h.u=0}function we(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function O(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function Y(h){return h.Ra>>>(h.u&Nc-1)>>>0}function J(h){return e(h.bb<=h.Sb),h.h||h.bb==h.Sb&&h.u>Nc}function H(h,v){h.u=v,h.h=J(h)}function se(h){h.u>=eh&&(e(h.u>=eh),$(h))}function le(h){e(h!=null&&h.oa!=null),h.pa<h.Zc?(h.I=(h.oa[h.pa++]|h.I<<8)>>>0,h.b+=8):(e(h!=null&&h.oa!=null),h.pa<h.Yc?(h.b+=8,h.I=h.oa[h.pa++]|h.I<<8):h.Ka?h.b=0:(h.I<<=8,h.b+=8,h.Ka=1))}function ue(h){return V(h,1)}function de(h,v){var A=h.Ca;0>h.b&&le(h);var R=h.b,q=A*v>>>8,W=(h.I>>>R>q)+0;for(W?(A-=q,h.I-=q+1<<R>>>0):A=q+1,R=A,q=0;256<=R;)q+=8,R>>=8;return R=7^q+Yr[R],h.b-=R,h.Ca=(A<<R)-1,W}function Ae(h,v,A){h[v+0]=A>>24&255,h[v+1]=A>>16&255,h[v+2]=A>>8&255,h[v+3]=A>>0&255}function Te(h,v){return h[v+0]<<0|h[v+1]<<8}function Re(h,v){return Te(h,v)|h[v+2]<<16}function Be(h,v){return Te(h,v)|Te(h,v+2)<<16}function Xe(h,v){var A=1<<v;return e(h!=null),e(0<v),h.X=s(A),h.X==null?0:(h.Mb=32-v,h.Xa=v,1)}function be(h,v){e(h!=null),e(v!=null),e(h.Xa==v.Xa),r(v.X,0,h.X,0,1<<v.Xa)}function ae(){this.X=[],this.Xa=this.Mb=0}function He(h,v,A,R){e(A!=null),e(R!=null);var q=A[0],W=R[0];return q==0&&(q=(h*W+v/2)/v),W==0&&(W=(v*q+h/2)/h),0>=q||0>=W?0:(A[0]=q,R[0]=W,1)}function De(h,v){return h+(1<<v)-1>>>v}function he(h,v){return((4278255360&h)+(4278255360&v)>>>0&4278255360)+((16711935&h)+(16711935&v)>>>0&16711935)>>>0}function Ie(h,v){y[v]=function(A,R,q,W,G,Z,ee){var re;for(re=0;re<G;++re){var fe=y[h](Z[ee+re-1],q,W+re);Z[ee+re]=he(A[R+re],fe)}}}function Me(){this.ud=this.hd=this.jd=0}function Ke(h,v){return((4278124286&(h^v))>>>1)+(h&v)>>>0}function We(h){return 0<=h&&256>h?h:0>h?0:255<h?255:void 0}function Ye(h,v){return We(h+(h-v+.5>>1))}function at(h,v,A){return Math.abs(v-A)-Math.abs(h-A)}function tt(h,v,A,R,q,W,G){for(R=W[G-1],A=0;A<q;++A)W[G+A]=R=he(h[v+A],R)}function ut(h,v,A,R,q){var W;for(W=0;W<A;++W){var G=h[v+W],Z=G>>8&255,ee=16711935&(ee=(ee=16711935&G)+((Z<<16)+Z));R[q+W]=(4278255360&G)+ee>>>0}}function dt(h,v){v.jd=h>>0&255,v.hd=h>>8&255,v.ud=h>>16&255}function ot(h,v,A,R,q,W){var G;for(G=0;G<R;++G){var Z=v[A+G],ee=Z>>>8,re=Z,fe=255&(fe=(fe=Z>>>16)+((h.jd<<24>>24)*(ee<<24>>24)>>>5));re=255&(re=(re=re+((h.hd<<24>>24)*(ee<<24>>24)>>>5))+((h.ud<<24>>24)*(fe<<24>>24)>>>5)),q[W+G]=(4278255360&Z)+(fe<<16)+re}}function ct(h,v,A,R,q){y[v]=function(W,G,Z,ee,re,fe,xe,Se,ye){for(ee=xe;ee<Se;++ee)for(xe=0;xe<ye;++xe)re[fe++]=q(Z[R(W[G++])])},y[h]=function(W,G,Z,ee,re,fe,xe){var Se=8>>W.b,ye=W.Ea,je=W.K[0],Ee=W.w;if(8>Se)for(W=(1<<W.b)-1,Ee=(1<<Se)-1;G<Z;++G){var pe,me=0;for(pe=0;pe<ye;++pe)pe&W||(me=R(ee[re++])),fe[xe++]=q(je[me&Ee]),me>>=Se}else y["VP8LMapColor"+A](ee,re,je,Ee,fe,xe,G,Z,ye)}}function ze(h,v,A,R,q){for(A=v+A;v<A;){var W=h[v++];R[q++]=W>>16&255,R[q++]=W>>8&255,R[q++]=W>>0&255}}function _e(h,v,A,R,q){for(A=v+A;v<A;){var W=h[v++];R[q++]=W>>16&255,R[q++]=W>>8&255,R[q++]=W>>0&255,R[q++]=W>>24&255}}function $e(h,v,A,R,q){for(A=v+A;v<A;){var W=(G=h[v++])>>16&240|G>>12&15,G=G>>0&240|G>>28&15;R[q++]=W,R[q++]=G}}function mt(h,v,A,R,q){for(A=v+A;v<A;){var W=(G=h[v++])>>16&248|G>>13&7,G=G>>5&224|G>>3&31;R[q++]=W,R[q++]=G}}function ft(h,v,A,R,q){for(A=v+A;v<A;){var W=h[v++];R[q++]=W>>0&255,R[q++]=W>>8&255,R[q++]=W>>16&255}}function Tt(h,v,A,R,q,W){if(W==0)for(A=v+A;v<A;)Ae(R,((W=h[v++])[0]>>24|W[1]>>8&65280|W[2]<<8&16711680|W[3]<<24)>>>0),q+=32;else r(R,q,h,v,A)}function Vn(h,v){y[v][0]=y[h+"0"],y[v][1]=y[h+"1"],y[v][2]=y[h+"2"],y[v][3]=y[h+"3"],y[v][4]=y[h+"4"],y[v][5]=y[h+"5"],y[v][6]=y[h+"6"],y[v][7]=y[h+"7"],y[v][8]=y[h+"8"],y[v][9]=y[h+"9"],y[v][10]=y[h+"10"],y[v][11]=y[h+"11"],y[v][12]=y[h+"12"],y[v][13]=y[h+"13"],y[v][14]=y[h+"0"],y[v][15]=y[h+"0"]}function xt(h){return h==fg||h==pg||h==nf||h==mg}function vr(){this.eb=[],this.size=this.A=this.fb=0}function Bt(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Wn(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new vr,this.f.kb=new Bt,this.sd=null}function Nn(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Dt(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function lt(h){return alert("todo:WebPSamplerProcessPlane"),h.T}function Pt(h,v){var A=h.T,R=v.ba.f.RGBA,q=R.eb,W=R.fb+h.ka*R.A,G=Di[v.ba.S],Z=h.y,ee=h.O,re=h.f,fe=h.N,xe=h.ea,Se=h.W,ye=v.cc,je=v.dc,Ee=v.Mc,pe=v.Nc,me=h.ka,Pe=h.ka+h.T,Fe=h.U,Ce=Fe+1>>1;for(me==0?G(Z,ee,null,null,re,fe,xe,Se,re,fe,xe,Se,q,W,null,null,Fe):(G(v.ec,v.fc,Z,ee,ye,je,Ee,pe,re,fe,xe,Se,q,W-R.A,q,W,Fe),++A);me+2<Pe;me+=2)ye=re,je=fe,Ee=xe,pe=Se,fe+=h.Rc,Se+=h.Rc,W+=2*R.A,G(Z,(ee+=2*h.fa)-h.fa,Z,ee,ye,je,Ee,pe,re,fe,xe,Se,q,W-R.A,q,W,Fe);return ee+=h.fa,h.j+Pe<h.o?(r(v.ec,v.fc,Z,ee,Fe),r(v.cc,v.dc,re,fe,Ce),r(v.Mc,v.Nc,xe,Se,Ce),A--):1&Pe||G(Z,ee,null,null,re,fe,xe,Se,re,fe,xe,Se,q,W+R.A,null,null,Fe),A}function Rr(h,v,A){var R=h.F,q=[h.J];if(R!=null){var W=h.U,G=v.ba.S,Z=G==tf||G==nf;v=v.ba.f.RGBA;var ee=[0],re=h.ka;ee[0]=h.T,h.Kb&&(re==0?--ee[0]:(--re,q[0]-=h.width),h.j+h.ka+h.T==h.o&&(ee[0]=h.o-h.j-re));var fe=v.eb;re=v.fb+re*v.A,h=rn(R,q[0],h.width,W,ee,fe,re+(Z?0:3),v.A),e(A==ee),h&&xt(G)&&Li(fe,re,Z,W,ee,v.A)}return 0}function Jt(h){var v=h.ma,A=v.ba.S,R=11>A,q=A==Zd||A==ef||A==tf||A==dg||A==12||xt(A);if(v.memory=null,v.Ib=null,v.Jb=null,v.Nd=null,!Xu(v.Oa,h,q?11:12))return 0;if(q&&xt(A)&&Oe(),h.da)alert("todo:use_scaling");else{if(R){if(v.Ib=lt,h.Kb){if(A=h.U+1>>1,v.memory=s(h.U+2*A),v.memory==null)return 0;v.ec=v.memory,v.fc=0,v.cc=v.ec,v.dc=v.fc+h.U,v.Mc=v.cc,v.Nc=v.dc+A,v.Ib=Pt,Oe()}}else alert("todo:EmitYUV");q&&(v.Jb=Rr,R&&ve())}if(R&&!ky){for(h=0;256>h;++h)xA[h]=89858*(h-128)+sf>>rf,AA[h]=-22014*(h-128)+sf,NA[h]=-45773*(h-128),SA[h]=113618*(h-128)+sf>>rf;for(h=oh;h<yg;++h)v=76283*(h-16)+sf>>rf,EA[h-oh]=zt(v,255),kA[h-oh]=zt(v+8>>4,15);ky=1}return 1}function fn(h){var v=h.ma,A=h.U,R=h.T;return e(!(1&h.ka)),0>=A||0>=R?0:(A=v.Ib(h,v),v.Jb!=null&&v.Jb(h,v,A),v.Dc+=A,1)}function hi(h){h.ma.memory=null}function nt(h,v,A,R){return ne(h,8)!=47?0:(v[0]=ne(h,14)+1,A[0]=ne(h,14)+1,R[0]=ne(h,1),ne(h,3)!=0?0:!h.h)}function Wr(h,v){if(4>h)return h+1;var A=h-2>>1;return(2+(1&h)<<A)+ne(v,A)+1}function yr(h,v){return 120<v?v-120:1<=(A=((A=lA[v-1])>>4)*h+(8-(15&A)))?A:1;var A}function Un(h,v,A){var R=Y(A),q=h[v+=255&R].g-8;return 0<q&&(H(A,A.u+8),R=Y(A),v+=h[v].value,v+=R&(1<<q)-1),H(A,A.u+h[v].g),h[v].value}function Pn(h,v,A){return A.g+=h.g,A.value+=h.value<<v>>>0,e(8>=A.g),h.g}function An(h,v,A){var R=h.xc;return e((v=R==0?0:h.vc[h.md*(A>>R)+(v>>R)])<h.Wb),h.Ya[v]}function Bn(h,v,A,R){var q=h.ab,W=h.c*v,G=h.C;v=G+v;var Z=A,ee=R;for(R=h.Ta,A=h.Ua;0<q--;){var re=h.gc[q],fe=G,xe=v,Se=Z,ye=ee,je=(ee=R,Z=A,re.Ea);switch(e(fe<xe),e(xe<=re.nc),re.hc){case 2:Hd(Se,ye,(xe-fe)*je,ee,Z);break;case 0:var Ee=fe,pe=xe,me=ee,Pe=Z,Fe=(Je=re).Ea;Ee==0&&(ug(Se,ye,null,null,1,me,Pe),tt(Se,ye+1,0,0,Fe-1,me,Pe+1),ye+=Fe,Pe+=Fe,++Ee);for(var Ce=1<<Je.b,Ze=Ce-1,Ge=De(Fe,Je.b),pt=Je.K,Je=Je.w+(Ee>>Je.b)*Ge;Ee<pe;){var Kt=pt,Ht=Je,Mt=1;for(th(Se,ye,me,Pe-Fe,1,me,Pe);Mt<Fe;){var Lt=(Mt&~Ze)+Ce;Lt>Fe&&(Lt=Fe),(0,io[Kt[Ht++]>>8&15])(Se,ye+ +Mt,me,Pe+Mt-Fe,Lt-Mt,me,Pe+Mt),Mt=Lt}ye+=Fe,Pe+=Fe,++Ee&Ze||(Je+=Ge)}xe!=re.nc&&r(ee,Z-je,ee,Z+(xe-fe-1)*je,je);break;case 1:for(je=Se,pe=ye,Fe=(Se=re.Ea)-(Pe=Se&~(me=(ye=1<<re.b)-1)),Ee=De(Se,re.b),Ce=re.K,re=re.w+(fe>>re.b)*Ee;fe<xe;){for(Ze=Ce,Ge=re,pt=new Me,Je=pe+Pe,Kt=pe+Se;pe<Je;)dt(Ze[Ge++],pt),_l(pt,je,pe,ye,ee,Z),pe+=ye,Z+=ye;pe<Kt&&(dt(Ze[Ge++],pt),_l(pt,je,pe,Fe,ee,Z),pe+=Fe,Z+=Fe),++fe&me||(re+=Ee)}break;case 3:if(Se==ee&&ye==Z&&0<re.b){for(pe=ee,Se=je=Z+(xe-fe)*je-(Pe=(xe-fe)*De(re.Ea,re.b)),ye=ee,me=Z,Ee=[],Pe=(Fe=Pe)-1;0<=Pe;--Pe)Ee[Pe]=ye[me+Pe];for(Pe=Fe-1;0<=Pe;--Pe)pe[Se+Pe]=Ee[Pe];Pi(re,fe,xe,ee,je,ee,Z)}else Pi(re,fe,xe,Se,ye,ee,Z)}Z=R,ee=A}ee!=A&&r(R,A,Z,ee,W)}function Ua(h,v){var A=h.V,R=h.Ba+h.c*h.C,q=v-h.C;if(e(v<=h.l.o),e(16>=q),0<q){var W=h.l,G=h.Ta,Z=h.Ua,ee=W.width;if(Bn(h,q,A,R),q=Z=[Z],e((A=h.C)<(R=v)),e(W.v<W.va),R>W.o&&(R=W.o),A<W.j){var re=W.j-A;A=W.j,q[0]+=re*ee}if(A>=R?A=0:(q[0]+=4*W.v,W.ka=A-W.j,W.U=W.va-W.v,W.T=R-A,A=1),A){if(Z=Z[0],11>(A=h.ca).S){var fe=A.f.RGBA,xe=(R=A.S,q=W.U,W=W.T,re=fe.eb,fe.A),Se=W;for(fe=fe.fb+h.Ma*fe.A;0<Se--;){var ye=G,je=Z,Ee=q,pe=re,me=fe;switch(R){case Xd:Jr(ye,je,Ee,pe,me);break;case Zd:Mr(ye,je,Ee,pe,me);break;case fg:Mr(ye,je,Ee,pe,me),Li(pe,me,0,Ee,1,0);break;case yy:ca(ye,je,Ee,pe,me);break;case ef:Tt(ye,je,Ee,pe,me,1);break;case pg:Tt(ye,je,Ee,pe,me,1),Li(pe,me,0,Ee,1,0);break;case tf:Tt(ye,je,Ee,pe,me,0);break;case nf:Tt(ye,je,Ee,pe,me,0),Li(pe,me,1,Ee,1,0);break;case dg:so(ye,je,Ee,pe,me);break;case mg:so(ye,je,Ee,pe,me),nn(pe,me,Ee,1,0);break;case wy:la(ye,je,Ee,pe,me);break;default:e(0)}Z+=ee,fe+=xe}h.Ma+=W}else alert("todo:EmitRescaledRowsYUVA");e(h.Ma<=A.height)}}h.C=v,e(h.C<=h.i)}function $i(h){var v;if(0<h.ua)return 0;for(v=0;v<h.Wb;++v){var A=h.Ya[v].G,R=h.Ya[v].H;if(0<A[1][R[1]+0].g||0<A[2][R[2]+0].g||0<A[3][R[3]+0].g)return 0}return 1}function wr(h,v,A,R,q,W){if(h.Z!=0){var G=h.qd,Z=h.rd;for(e(co[h.Z]!=null);v<A;++v)co[h.Z](G,Z,R,q,R,q,W),G=R,Z=q,q+=W;h.qd=G,h.rd=Z}}function Gr(h,v){var A=h.l.ma,R=A.Z==0||A.Z==1?h.l.j:h.C;if(R=h.C<R?R:h.C,e(v<=h.l.o),v>R){var q=h.l.width,W=A.ca,G=A.tb+q*R,Z=h.V,ee=h.Ba+h.c*R,re=h.gc;e(h.ab==1),e(re[0].hc==3),Wd(re[0],R,v,Z,ee,W,G),wr(A,R,v,W,G,q)}h.C=h.Ma=v}function Dr(h,v,A,R,q,W,G){var Z=h.$/R,ee=h.$%R,re=h.m,fe=h.s,xe=A+h.$,Se=xe;q=A+R*q;var ye=A+R*W,je=280+fe.ua,Ee=h.Pb?Z:16777216,pe=0<fe.ua?fe.Wa:null,me=fe.wc,Pe=xe<ye?An(fe,ee,Z):null;e(h.C<W),e(ye<=q);var Fe=!1;e:for(;;){for(;Fe||xe<ye;){var Ce=0;if(Z>=Ee){var Ze=xe-A;e((Ee=h).Pb),Ee.wd=Ee.m,Ee.xd=Ze,0<Ee.s.ua&&be(Ee.s.Wa,Ee.s.vb),Ee=Z+uA}if(ee&me||(Pe=An(fe,ee,Z)),e(Pe!=null),Pe.Qb&&(v[xe]=Pe.qb,Fe=!0),!Fe)if(se(re),Pe.jc){Ce=re,Ze=v;var Ge=xe,pt=Pe.pd[Y(Ce)&or-1];e(Pe.jc),256>pt.g?(H(Ce,Ce.u+pt.g),Ze[Ge]=pt.value,Ce=0):(H(Ce,Ce.u+pt.g-256),e(256<=pt.value),Ce=pt.value),Ce==0&&(Fe=!0)}else Ce=Un(Pe.G[0],Pe.H[0],re);if(re.h)break;if(Fe||256>Ce){if(!Fe)if(Pe.nd)v[xe]=(Pe.qb|Ce<<8)>>>0;else{if(se(re),Fe=Un(Pe.G[1],Pe.H[1],re),se(re),Ze=Un(Pe.G[2],Pe.H[2],re),Ge=Un(Pe.G[3],Pe.H[3],re),re.h)break;v[xe]=(Ge<<24|Fe<<16|Ce<<8|Ze)>>>0}if(Fe=!1,++xe,++ee>=R&&(ee=0,++Z,G!=null&&Z<=W&&!(Z%16)&&G(h,Z),pe!=null))for(;Se<xe;)Ce=v[Se++],pe.X[(506832829*Ce&4294967295)>>>pe.Mb]=Ce}else if(280>Ce){if(Ce=Wr(Ce-256,re),Ze=Un(Pe.G[4],Pe.H[4],re),se(re),Ze=yr(R,Ze=Wr(Ze,re)),re.h)break;if(xe-A<Ze||q-xe<Ce)break e;for(Ge=0;Ge<Ce;++Ge)v[xe+Ge]=v[xe+Ge-Ze];for(xe+=Ce,ee+=Ce;ee>=R;)ee-=R,++Z,G!=null&&Z<=W&&!(Z%16)&&G(h,Z);if(e(xe<=q),ee&me&&(Pe=An(fe,ee,Z)),pe!=null)for(;Se<xe;)Ce=v[Se++],pe.X[(506832829*Ce&4294967295)>>>pe.Mb]=Ce}else{if(!(Ce<je))break e;for(Fe=Ce-280,e(pe!=null);Se<xe;)Ce=v[Se++],pe.X[(506832829*Ce&4294967295)>>>pe.Mb]=Ce;Ce=xe,e(!(Fe>>>(Ze=pe).Xa)),v[Ce]=Ze.X[Fe],Fe=!0}Fe||e(re.h==J(re))}if(h.Pb&&re.h&&xe<q)e(h.m.h),h.a=5,h.m=h.wd,h.$=h.xd,0<h.s.ua&&be(h.s.vb,h.s.Wa);else{if(re.h)break e;G!=null&&G(h,Z>W?W:Z),h.a=0,h.$=xe-A}return 1}return h.a=3,0}function Fr(h){e(h!=null),h.vc=null,h.yc=null,h.Ya=null;var v=h.Wa;v!=null&&(v.X=null),h.vb=null,e(h!=null)}function Cn(){var h=new _c;return h==null?null:(h.a=0,h.xb=xy,Vn("Predictor","VP8LPredictors"),Vn("Predictor","VP8LPredictors_C"),Vn("PredictorAdd","VP8LPredictorsAdd"),Vn("PredictorAdd","VP8LPredictorsAdd_C"),Hd=ut,_l=ot,Jr=ze,Mr=_e,so=$e,la=mt,ca=ft,y.VP8LMapColor32b=Ac,y.VP8LMapColor8b=Gd,h)}function di(h,v,A,R,q){var W=1,G=[h],Z=[v],ee=R.m,re=R.s,fe=null,xe=0;e:for(;;){if(A)for(;W&&ne(ee,1);){var Se=G,ye=Z,je=R,Ee=1,pe=je.m,me=je.gc[je.ab],Pe=ne(pe,2);if(je.Oc&1<<Pe)W=0;else{switch(je.Oc|=1<<Pe,me.hc=Pe,me.Ea=Se[0],me.nc=ye[0],me.K=[null],++je.ab,e(4>=je.ab),Pe){case 0:case 1:me.b=ne(pe,3)+2,Ee=di(De(me.Ea,me.b),De(me.nc,me.b),0,je,me.K),me.K=me.K[0];break;case 3:var Fe,Ce=ne(pe,8)+1,Ze=16<Ce?0:4<Ce?1:2<Ce?2:3;if(Se[0]=De(me.Ea,Ze),me.b=Ze,Fe=Ee=di(Ce,1,0,je,me.K)){var Ge,pt=Ce,Je=me,Kt=1<<(8>>Je.b),Ht=s(Kt);if(Ht==null)Fe=0;else{var Mt=Je.K[0],Lt=Je.w;for(Ht[0]=Je.K[0][0],Ge=1;Ge<1*pt;++Ge)Ht[Ge]=he(Mt[Lt+Ge],Ht[Ge-1]);for(;Ge<4*Kt;++Ge)Ht[Ge]=0;Je.K[0]=null,Je.K[0]=Ht,Fe=1}}Ee=Fe;break;case 2:break;default:e(0)}W=Ee}}if(G=G[0],Z=Z[0],W&&ne(ee,1)&&!(W=1<=(xe=ne(ee,4))&&11>=xe)){R.a=3;break e}var en;if(en=W)t:{var Xt,It,Kn,Xr=R,qn=G,Zr=Z,Wt=xe,vi=A,yi=Xr.m,Zn=Xr.s,lr=[null],Ur=1,Fi=0,Cs=cA[Wt];n:for(;;){if(vi&&ne(yi,1)){var er=ne(yi,3)+2,fa=De(qn,er),Al=De(Zr,er),Pc=fa*Al;if(!di(fa,Al,0,Xr,lr))break n;for(lr=lr[0],Zn.xc=er,Xt=0;Xt<Pc;++Xt){var uo=lr[Xt]>>8&65535;lr[Xt]=uo,uo>=Ur&&(Ur=uo+1)}}if(yi.h)break n;for(It=0;5>It;++It){var kn=_y[It];!It&&0<Wt&&(kn+=1<<Wt),Fi<kn&&(Fi=kn)}var wg=a(Ur*Cs,I),Py=Ur,Cy=a(Py,M);if(Cy==null)var of=null;else e(65536>=Py),of=Cy;var lh=s(Fi);if(of==null||lh==null||wg==null){Xr.a=1;break n}var lf=wg;for(Xt=Kn=0;Xt<Ur;++Xt){var ts=of[Xt],Cc=ts.G,jc=ts.H,jy=0,cf=1,Ly=0;for(It=0;5>It;++It){kn=_y[It],Cc[It]=lf,jc[It]=Kn,!It&&0<Wt&&(kn+=1<<Wt);i:{var uf,_g=kn,hf=Xr,ch=lh,PA=lf,CA=Kn,bg=0,ho=hf.m,jA=ne(ho,1);if(i(ch,0,0,_g),jA){var LA=ne(ho,1)+1,RA=ne(ho,1),Ry=ne(ho,RA==0?1:8);ch[Ry]=1,LA==2&&(ch[Ry=ne(ho,8)]=1);var df=1}else{var Dy=s(19),Fy=ne(ho,4)+4;if(19<Fy){hf.a=3;var ff=0;break i}for(uf=0;uf<Fy;++uf)Dy[oA[uf]]=ne(ho,3);var xg=void 0,uh=void 0,Oy=hf,DA=Dy,pf=_g,My=ch,Sg=0,fo=Oy.m,Vy=8,Uy=a(128,I);r:for(;E(Uy,0,7,DA,19);){if(ne(fo,1)){var FA=2+2*ne(fo,3);if((xg=2+ne(fo,FA))>pf)break r}else xg=pf;for(uh=0;uh<pf&&xg--;){se(fo);var By=Uy[0+(127&Y(fo))];H(fo,fo.u+By.g);var Lc=By.value;if(16>Lc)My[uh++]=Lc,Lc!=0&&(Vy=Lc);else{var OA=Lc==16,Ky=Lc-16,MA=sA[Ky],qy=ne(fo,iA[Ky])+MA;if(uh+qy>pf)break r;for(var VA=OA?Vy:0;0<qy--;)My[uh++]=VA}}Sg=1;break r}Sg||(Oy.a=3),df=Sg}(df=df&&!ho.h)&&(bg=E(PA,CA,8,ch,_g)),df&&bg!=0?ff=bg:(hf.a=3,ff=0)}if(ff==0)break n;if(cf&&aA[It]==1&&(cf=lf[Kn].g==0),jy+=lf[Kn].g,Kn+=ff,3>=It){var hh,Ng=lh[0];for(hh=1;hh<kn;++hh)lh[hh]>Ng&&(Ng=lh[hh]);Ly+=Ng}}if(ts.nd=cf,ts.Qb=0,cf&&(ts.qb=(Cc[3][jc[3]+0].value<<24|Cc[1][jc[1]+0].value<<16|Cc[2][jc[2]+0].value)>>>0,jy==0&&256>Cc[0][jc[0]+0].value&&(ts.Qb=1,ts.qb+=Cc[0][jc[0]+0].value<<8)),ts.jc=!ts.Qb&&6>Ly,ts.jc){var mf,pa=ts;for(mf=0;mf<or;++mf){var po=mf,mo=pa.pd[po],gf=pa.G[0][pa.H[0]+po];256<=gf.value?(mo.g=gf.g+256,mo.value=gf.value):(mo.g=0,mo.value=0,po>>=Pn(gf,8,mo),po>>=Pn(pa.G[1][pa.H[1]+po],16,mo),po>>=Pn(pa.G[2][pa.H[2]+po],0,mo),Pn(pa.G[3][pa.H[3]+po],24,mo))}}}Zn.vc=lr,Zn.Wb=Ur,Zn.Ya=of,Zn.yc=wg,en=1;break t}en=0}if(!(W=en)){R.a=3;break e}if(0<xe){if(re.ua=1<<xe,!Xe(re.Wa,xe)){R.a=1,W=0;break e}}else re.ua=0;var Ag=R,zy=G,UA=Z,Eg=Ag.s,kg=Eg.xc;if(Ag.c=zy,Ag.i=UA,Eg.md=De(zy,kg),Eg.wc=kg==0?-1:(1<<kg)-1,A){R.xb=vA;break e}if((fe=s(G*Z))==null){R.a=1,W=0;break e}W=(W=Dr(R,fe,0,G,Z,Z,null))&&!ee.h;break e}return W?(q!=null?q[0]=fe:(e(fe==null),e(A)),R.$=0,A||Fr(re)):Fr(re),W}function ws(h,v){var A=h.c*h.i,R=A+v+16*v;return e(h.c<=v),h.V=s(R),h.V==null?(h.Ta=null,h.Ua=0,h.a=1,0):(h.Ta=h.V,h.Ua=h.Ba+A+v,1)}function _s(h,v){var A=h.C,R=v-A,q=h.V,W=h.Ba+h.c*A;for(e(v<=h.l.o);0<R;){var G=16<R?16:R,Z=h.l.ma,ee=h.l.width,re=ee*G,fe=Z.ca,xe=Z.tb+ee*A,Se=h.Ta,ye=h.Ua;Bn(h,G,q,W),Ln(Se,ye,fe,xe,re),wr(Z,A,A+G,fe,xe,ee),R-=G,q+=G*h.c,A+=G}e(A==v),h.C=h.Ma=v}function bs(){this.ub=this.yd=this.td=this.Rb=0}function Js(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Xs(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function uc(){this.Yb=function(){var h=[];return function v(A,R,q){for(var W=q[R],G=0;G<W&&(A.push(q.length>R+1?[]:0),!(q.length<R+1));G++)v(A[G],R+1,q)}(h,0,[3,11]),h}()}function Ba(){this.jb=s(3),this.Wc=o([4,8],uc),this.Xc=o([4,17],uc)}function hc(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function xs(){this.ld=this.La=this.dd=this.tc=0}function Ss(){this.Na=this.la=0}function Hi(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Zs(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Gu(){this.uc=this.M=this.Nb=0,this.wa=Array(new xs),this.Y=0,this.ya=Array(new Zs),this.aa=0,this.l=new ea}function al(){this.y=s(16),this.f=s(8),this.ea=s(8)}function dc(){this.cb=this.a=0,this.sc="",this.m=new we,this.Od=new bs,this.Kc=new Js,this.ed=new hc,this.Qa=new Xs,this.Ic=this.$c=this.Aa=0,this.D=new Gu,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=a(8,we),this.ia=0,this.pb=a(4,Hi),this.Pa=new Ba,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new al),this.Hd=0,this.rb=Array(new Ss),this.sb=0,this.wa=Array(new xs),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Zs),this.L=this.aa=0,this.gd=o([4,2],xs),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function ea(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function ol(){var h=new dc;return h!=null&&(h.a=0,h.sc="OK",h.cb=0,h.Xb=0,ah||(ah=fc)),h}function an(h,v,A){return h.a==0&&(h.a=v,h.sc=A,h.cb=0),0}function ll(h,v,A){return 3<=A&&h[v+0]==157&&h[v+1]==1&&h[v+2]==42}function cl(h,v){if(h==null)return 0;if(h.a=0,h.sc="OK",v==null)return an(h,2,"null VP8Io passed to VP8GetHeaders()");var A=v.data,R=v.w,q=v.ha;if(4>q)return an(h,7,"Truncated header.");var W=A[R+0]|A[R+1]<<8|A[R+2]<<16,G=h.Od;if(G.Rb=!(1&W),G.td=W>>1&7,G.yd=W>>4&1,G.ub=W>>5,3<G.td)return an(h,3,"Incorrect keyframe parameters.");if(!G.yd)return an(h,4,"Frame not displayable.");R+=3,q-=3;var Z=h.Kc;if(G.Rb){if(7>q)return an(h,7,"cannot parse picture header");if(!ll(A,R,q))return an(h,3,"Bad code word");Z.c=16383&(A[R+4]<<8|A[R+3]),Z.Td=A[R+4]>>6,Z.i=16383&(A[R+6]<<8|A[R+5]),Z.Ud=A[R+6]>>6,R+=7,q-=7,h.za=Z.c+15>>4,h.Ub=Z.i+15>>4,v.width=Z.c,v.height=Z.i,v.Da=0,v.j=0,v.v=0,v.va=v.width,v.o=v.height,v.da=0,v.ib=v.width,v.hb=v.height,v.U=v.width,v.T=v.height,i((W=h.Pa).jb,0,255,W.jb.length),e((W=h.Qa)!=null),W.Cb=0,W.Bb=0,W.Fb=1,i(W.Zb,0,0,W.Zb.length),i(W.Lb,0,0,W.Lb)}if(G.ub>q)return an(h,7,"bad partition length");te(W=h.m,A,R,G.ub),R+=G.ub,q-=G.ub,G.Rb&&(Z.Ld=ue(W),Z.Kd=ue(W)),Z=h.Qa;var ee,re=h.Pa;if(e(W!=null),e(Z!=null),Z.Cb=ue(W),Z.Cb){if(Z.Bb=ue(W),ue(W)){for(Z.Fb=ue(W),ee=0;4>ee;++ee)Z.Zb[ee]=ue(W)?U(W,7):0;for(ee=0;4>ee;++ee)Z.Lb[ee]=ue(W)?U(W,6):0}if(Z.Bb)for(ee=0;3>ee;++ee)re.jb[ee]=ue(W)?V(W,8):255}else Z.Bb=0;if(W.Ka)return an(h,3,"cannot parse segment header");if((Z=h.ed).zd=ue(W),Z.Tb=V(W,6),Z.wb=V(W,3),Z.Pc=ue(W),Z.Pc&&ue(W)){for(re=0;4>re;++re)ue(W)&&(Z.vd[re]=U(W,6));for(re=0;4>re;++re)ue(W)&&(Z.od[re]=U(W,6))}if(h.L=Z.Tb==0?0:Z.zd?1:2,W.Ka)return an(h,3,"cannot parse filter header");var fe=q;if(q=ee=R,R=ee+fe,Z=fe,h.Xb=(1<<V(h.m,2))-1,fe<3*(re=h.Xb))A=7;else{for(ee+=3*re,Z-=3*re,fe=0;fe<re;++fe){var xe=A[q+0]|A[q+1]<<8|A[q+2]<<16;xe>Z&&(xe=Z),te(h.Jc[+fe],A,ee,xe),ee+=xe,Z-=xe,q+=3}te(h.Jc[+re],A,ee,Z),A=ee<R?0:5}if(A!=0)return an(h,A,"cannot parse partitions");for(A=V(ee=h.m,7),q=ue(ee)?U(ee,4):0,R=ue(ee)?U(ee,4):0,Z=ue(ee)?U(ee,4):0,re=ue(ee)?U(ee,4):0,ee=ue(ee)?U(ee,4):0,fe=h.Qa,xe=0;4>xe;++xe){if(fe.Cb){var Se=fe.Zb[xe];fe.Fb||(Se+=A)}else{if(0<xe){h.pb[xe]=h.pb[0];continue}Se=A}var ye=h.pb[xe];ye.Sc[0]=gg[zt(Se+q,127)],ye.Sc[1]=vg[zt(Se+0,127)],ye.Eb[0]=2*gg[zt(Se+R,127)],ye.Eb[1]=101581*vg[zt(Se+Z,127)]>>16,8>ye.Eb[1]&&(ye.Eb[1]=8),ye.Qc[0]=gg[zt(Se+re,117)],ye.Qc[1]=vg[zt(Se+ee,127)],ye.lc=Se+ee}if(!G.Rb)return an(h,4,"Not a key frame.");for(ue(W),G=h.Pa,A=0;4>A;++A){for(q=0;8>q;++q)for(R=0;3>R;++R)for(Z=0;11>Z;++Z)re=de(W,mA[A][q][R][Z])?V(W,8):fA[A][q][R][Z],G.Wc[A][q].Yb[R][Z]=re;for(q=0;17>q;++q)G.Xc[A][q]=G.Wc[A][gA[q]]}return h.kc=ue(W),h.kc&&(h.Bd=V(W,8)),h.cb=1}function fc(h,v,A,R,q,W,G){var Z=v[q].Yb[A];for(A=0;16>q;++q){if(!de(h,Z[A+0]))return q;for(;!de(h,Z[A+1]);)if(Z=v[++q].Yb[0],A=0,q==16)return 16;var ee=v[q+1].Yb;if(de(h,Z[A+2])){var re=h,fe=0;if(de(re,(Se=Z)[(xe=A)+3]))if(de(re,Se[xe+6])){for(Z=0,xe=2*(fe=de(re,Se[xe+8]))+(Se=de(re,Se[xe+9+fe])),fe=0,Se=hA[xe];Se[Z];++Z)fe+=fe+de(re,Se[Z]);fe+=3+(8<<xe)}else de(re,Se[xe+7])?(fe=7+2*de(re,165),fe+=de(re,145)):fe=5+de(re,159);else fe=de(re,Se[xe+4])?3+de(re,Se[xe+5]):2;Z=ee[2]}else fe=1,Z=ee[1];ee=G+dA[q],0>(re=h).b&&le(re);var xe,Se=re.b,ye=(xe=re.Ca>>1)-(re.I>>Se)>>31;--re.b,re.Ca+=ye,re.Ca|=1,re.I-=(xe+1&ye)<<Se,W[ee]=((fe^ye)-ye)*R[(0<q)+0]}return 16}function ul(h){var v=h.rb[h.sb-1];v.la=0,v.Na=0,i(h.zc,0,0,h.zc.length),h.ja=0}function pc(h,v){if(h==null)return 0;if(v==null)return an(h,2,"NULL VP8Io parameter in VP8Decode().");if(!h.cb&&!cl(h,v))return 0;if(e(h.cb),v.ac==null||v.ac(v)){v.ob&&(h.L=0);var A=af[h.L];if(h.L==2?(h.yb=0,h.zb=0):(h.yb=v.v-A>>4,h.zb=v.j-A>>4,0>h.yb&&(h.yb=0),0>h.zb&&(h.zb=0)),h.Va=v.o+15+A>>4,h.Hb=v.va+15+A>>4,h.Hb>h.za&&(h.Hb=h.za),h.Va>h.Ub&&(h.Va=h.Ub),0<h.L){var R=h.ed;for(A=0;4>A;++A){var q;if(h.Qa.Cb){var W=h.Qa.Lb[A];h.Qa.Fb||(W+=R.Tb)}else W=R.Tb;for(q=0;1>=q;++q){var G=h.gd[A][q],Z=W;if(R.Pc&&(Z+=R.vd[0],q&&(Z+=R.od[0])),0<(Z=0>Z?0:63<Z?63:Z)){var ee=Z;0<R.wb&&(ee=4<R.wb?ee>>2:ee>>1)>9-R.wb&&(ee=9-R.wb),1>ee&&(ee=1),G.dd=ee,G.tc=2*Z+ee,G.ld=40<=Z?2:15<=Z?1:0}else G.tc=0;G.La=q}}}A=0}else an(h,6,"Frame setup failed"),A=h.a;if(A=A==0){if(A){h.$c=0,0<h.Aa||(h.Ic=IA);e:{A=h.Ic,R=4*(ee=h.za);var re=32*ee,fe=ee+1,xe=0<h.L?ee*(0<h.Aa?2:1):0,Se=(h.Aa==2?2:1)*ee;if((G=R+832+(q=3*(16*A+af[h.L])/2*re)+(W=h.Fa!=null&&0<h.Fa.length?h.Kc.c*h.Kc.i:0))!=G)A=0;else{if(G>h.Vb){if(h.Vb=0,h.Ec=s(G),h.Fc=0,h.Ec==null){A=an(h,1,"no memory during frame initialization.");break e}h.Vb=G}G=h.Ec,Z=h.Fc,h.Ac=G,h.Bc=Z,Z+=R,h.Gd=a(re,al),h.Hd=0,h.rb=a(fe+1,Ss),h.sb=1,h.wa=xe?a(xe,xs):null,h.Y=0,h.D.Nb=0,h.D.wa=h.wa,h.D.Y=h.Y,0<h.Aa&&(h.D.Y+=ee),e(!0),h.oc=G,h.pc=Z,Z+=832,h.ya=a(Se,Zs),h.aa=0,h.D.ya=h.ya,h.D.aa=h.aa,h.Aa==2&&(h.D.aa+=ee),h.R=16*ee,h.B=8*ee,ee=(re=af[h.L])*h.R,re=re/2*h.B,h.sa=G,h.ta=Z+ee,h.qa=h.sa,h.ra=h.ta+16*A*h.R+re,h.Ha=h.qa,h.Ia=h.ra+8*A*h.B+re,h.$c=0,Z+=q,h.mb=W?G:null,h.nb=W?Z:null,e(Z+W<=h.Fc+h.Vb),ul(h),i(h.Ac,h.Bc,0,R),A=1}}if(A){if(v.ka=0,v.y=h.sa,v.O=h.ta,v.f=h.qa,v.N=h.ra,v.ea=h.Ha,v.Vd=h.Ia,v.fa=h.R,v.Rc=h.B,v.F=null,v.J=0,!Yd){for(A=-255;255>=A;++A)Qn[255+A]=0>A?-A:A;for(A=-1020;1020>=A;++A)ha[1020+A]=-128>A?-128:127<A?127:A;for(A=-112;112>=A;++A)sh[112+A]=-16>A?-16:15<A?15:A;for(A=-255;510>=A;++A)Ic[255+A]=0>A?0:255<A?255:A;Yd=1}Ec=ra,ua=qa,nh=hl,Vr=$t,Ci=na,jn=ta,kc=Ya,Qd=Ji,rh=Xa,bl=wl,xl=Ja,ao=sa,Sl=Za,Tc=ks,Nl=ia,oo=mi,ih=Gn,ji=wc,es[0]=Ii,es[1]=Qu,es[2]=As,es[3]=Ju,es[4]=vc,es[5]=Ha,es[6]=fi,es[7]=fl,es[8]=Ga,es[9]=Wa,lo[0]=Ns,lo[1]=Yu,lo[2]=Gi,lo[3]=za,lo[4]=on,lo[5]=gc,lo[6]=dl,da[0]=Yi,da[1]=mc,da[2]=yc,da[3]=Qi,da[4]=qt,da[5]=pl,da[6]=ml,A=1}else A=0}A&&(A=function(ye,je){for(ye.M=0;ye.M<ye.Va;++ye.M){var Ee,pe=ye.Jc[ye.M&ye.Xb],me=ye.m,Pe=ye;for(Ee=0;Ee<Pe.za;++Ee){var Fe=me,Ce=Pe,Ze=Ce.Ac,Ge=Ce.Bc+4*Ee,pt=Ce.zc,Je=Ce.ya[Ce.aa+Ee];if(Ce.Qa.Bb?Je.$b=de(Fe,Ce.Pa.jb[0])?2+de(Fe,Ce.Pa.jb[2]):de(Fe,Ce.Pa.jb[1]):Je.$b=0,Ce.kc&&(Je.Ad=de(Fe,Ce.Bd)),Je.Za=!de(Fe,145)+0,Je.Za){var Kt=Je.Ob,Ht=0;for(Ce=0;4>Ce;++Ce){var Mt,Lt=pt[0+Ce];for(Mt=0;4>Mt;++Mt){Lt=pA[Ze[Ge+Mt]][Lt];for(var en=by[de(Fe,Lt[0])];0<en;)en=by[2*en+de(Fe,Lt[en])];Lt=-en,Ze[Ge+Mt]=Lt}r(Kt,Ht,Ze,Ge,4),Ht+=4,pt[0+Ce]=Lt}}else Lt=de(Fe,156)?de(Fe,128)?1:3:de(Fe,163)?2:0,Je.Ob[0]=Lt,i(Ze,Ge,Lt,4),i(pt,0,Lt,4);Je.Dd=de(Fe,142)?de(Fe,114)?de(Fe,183)?1:3:2:0}if(Pe.m.Ka)return an(ye,7,"Premature end-of-partition0 encountered.");for(;ye.ja<ye.za;++ye.ja){if(Pe=pe,Fe=(me=ye).rb[me.sb-1],Ze=me.rb[me.sb+me.ja],Ee=me.ya[me.aa+me.ja],Ge=me.kc?Ee.Ad:0)Fe.la=Ze.la=0,Ee.Za||(Fe.Na=Ze.Na=0),Ee.Hc=0,Ee.Gc=0,Ee.ia=0;else{var Xt,It;if(Fe=Ze,Ze=Pe,Ge=me.Pa.Xc,pt=me.ya[me.aa+me.ja],Je=me.pb[pt.$b],Ce=pt.ad,Kt=0,Ht=me.rb[me.sb-1],Lt=Mt=0,i(Ce,Kt,0,384),pt.Za)var Kn=0,Xr=Ge[3];else{en=s(16);var qn=Fe.Na+Ht.Na;if(qn=ah(Ze,Ge[1],qn,Je.Eb,0,en,0),Fe.Na=Ht.Na=(0<qn)+0,1<qn)Ec(en,0,Ce,Kt);else{var Zr=en[0]+3>>3;for(en=0;256>en;en+=16)Ce[Kt+en]=Zr}Kn=1,Xr=Ge[0]}var Wt=15&Fe.la,vi=15&Ht.la;for(en=0;4>en;++en){var yi=1&vi;for(Zr=It=0;4>Zr;++Zr)Wt=Wt>>1|(yi=(qn=ah(Ze,Xr,qn=yi+(1&Wt),Je.Sc,Kn,Ce,Kt))>Kn)<<7,It=It<<2|(3<qn?3:1<qn?2:Ce[Kt+0]!=0),Kt+=16;Wt>>=4,vi=vi>>1|yi<<7,Mt=(Mt<<8|It)>>>0}for(Xr=Wt,Kn=vi>>4,Xt=0;4>Xt;Xt+=2){for(It=0,Wt=Fe.la>>4+Xt,vi=Ht.la>>4+Xt,en=0;2>en;++en){for(yi=1&vi,Zr=0;2>Zr;++Zr)qn=yi+(1&Wt),Wt=Wt>>1|(yi=0<(qn=ah(Ze,Ge[2],qn,Je.Qc,0,Ce,Kt)))<<3,It=It<<2|(3<qn?3:1<qn?2:Ce[Kt+0]!=0),Kt+=16;Wt>>=2,vi=vi>>1|yi<<5}Lt|=It<<4*Xt,Xr|=Wt<<4<<Xt,Kn|=(240&vi)<<Xt}Fe.la=Xr,Ht.la=Kn,pt.Hc=Mt,pt.Gc=Lt,pt.ia=43690&Lt?0:Je.ia,Ge=!(Mt|Lt)}if(0<me.L&&(me.wa[me.Y+me.ja]=me.gd[Ee.$b][Ee.Za],me.wa[me.Y+me.ja].La|=!Ge),Pe.Ka)return an(ye,7,"Premature end-of-file encountered.")}if(ul(ye),me=je,Pe=1,Ee=(pe=ye).D,Fe=0<pe.L&&pe.M>=pe.zb&&pe.M<=pe.Va,pe.Aa==0)e:{if(Ee.M=pe.M,Ee.uc=Fe,Is(pe,Ee),Pe=1,Ee=(It=pe.D).Nb,Fe=(Lt=af[pe.L])*pe.R,Ze=Lt/2*pe.B,en=16*Ee*pe.R,Zr=8*Ee*pe.B,Ge=pe.sa,pt=pe.ta-Fe+en,Je=pe.qa,Ce=pe.ra-Ze+Zr,Kt=pe.Ha,Ht=pe.Ia-Ze+Zr,vi=(Wt=It.M)==0,Mt=Wt>=pe.Va-1,pe.Aa==2&&Is(pe,It),It.uc)for(yi=(qn=pe).D.M,e(qn.D.uc),It=qn.yb;It<qn.Hb;++It){Kn=It,Xr=yi;var Zn=(lr=(kn=qn).D).Nb;Xt=kn.R;var lr=lr.wa[lr.Y+Kn],Ur=kn.sa,Fi=kn.ta+16*Zn*Xt+16*Kn,Cs=lr.dd,er=lr.tc;if(er!=0)if(e(3<=er),kn.L==1)0<Kn&&oo(Ur,Fi,Xt,er+4),lr.La&&ji(Ur,Fi,Xt,er),0<Xr&&Nl(Ur,Fi,Xt,er+4),lr.La&&ih(Ur,Fi,Xt,er);else{var fa=kn.B,Al=kn.qa,Pc=kn.ra+8*Zn*fa+8*Kn,uo=kn.Ha,kn=kn.Ia+8*Zn*fa+8*Kn;Zn=lr.ld,0<Kn&&(Qd(Ur,Fi,Xt,er+4,Cs,Zn),bl(Al,Pc,uo,kn,fa,er+4,Cs,Zn)),lr.La&&(ao(Ur,Fi,Xt,er,Cs,Zn),Tc(Al,Pc,uo,kn,fa,er,Cs,Zn)),0<Xr&&(kc(Ur,Fi,Xt,er+4,Cs,Zn),rh(Al,Pc,uo,kn,fa,er+4,Cs,Zn)),lr.La&&(xl(Ur,Fi,Xt,er,Cs,Zn),Sl(Al,Pc,uo,kn,fa,er,Cs,Zn))}}if(pe.ia&&alert("todo:DitherRow"),me.put!=null){if(It=16*Wt,Wt=16*(Wt+1),vi?(me.y=pe.sa,me.O=pe.ta+en,me.f=pe.qa,me.N=pe.ra+Zr,me.ea=pe.Ha,me.W=pe.Ia+Zr):(It-=Lt,me.y=Ge,me.O=pt,me.f=Je,me.N=Ce,me.ea=Kt,me.W=Ht),Mt||(Wt-=Lt),Wt>me.o&&(Wt=me.o),me.F=null,me.J=null,pe.Fa!=null&&0<pe.Fa.length&&It<Wt&&(me.J=ro(pe,me,It,Wt-It),me.F=pe.mb,me.F==null&&me.F.length==0)){Pe=an(pe,3,"Could not decode alpha data.");break e}It<me.j&&(Lt=me.j-It,It=me.j,e(!(1&Lt)),me.O+=pe.R*Lt,me.N+=pe.B*(Lt>>1),me.W+=pe.B*(Lt>>1),me.F!=null&&(me.J+=me.width*Lt)),It<Wt&&(me.O+=me.v,me.N+=me.v>>1,me.W+=me.v>>1,me.F!=null&&(me.J+=me.v),me.ka=It-me.j,me.U=me.va-me.v,me.T=Wt-It,Pe=me.put(me))}Ee+1!=pe.Ic||Mt||(r(pe.sa,pe.ta-Fe,Ge,pt+16*pe.R,Fe),r(pe.qa,pe.ra-Ze,Je,Ce+8*pe.B,Ze),r(pe.Ha,pe.Ia-Ze,Kt,Ht+8*pe.B,Ze))}if(!Pe)return an(ye,6,"Output aborted.")}return 1}(h,v)),v.bc!=null&&v.bc(v),A&=1}return A?(h.cb=0,A):0}function Qr(h,v,A,R,q){q=h[v+A+32*R]+(q>>3),h[v+A+32*R]=-256&q?0>q?0:255:q}function Ka(h,v,A,R,q,W){Qr(h,v,0,A,R+q),Qr(h,v,1,A,R+W),Qr(h,v,2,A,R-W),Qr(h,v,3,A,R-q)}function En(h){return(20091*h>>16)+h}function Or(h,v,A,R){var q,W=0,G=s(16);for(q=0;4>q;++q){var Z=h[v+0]+h[v+8],ee=h[v+0]-h[v+8],re=(35468*h[v+4]>>16)-En(h[v+12]),fe=En(h[v+4])+(35468*h[v+12]>>16);G[W+0]=Z+fe,G[W+1]=ee+re,G[W+2]=ee-re,G[W+3]=Z-fe,W+=4,v++}for(q=W=0;4>q;++q)Z=(h=G[W+0]+4)+G[W+8],ee=h-G[W+8],re=(35468*G[W+4]>>16)-En(G[W+12]),Qr(A,R,0,0,Z+(fe=En(G[W+4])+(35468*G[W+12]>>16))),Qr(A,R,1,0,ee+re),Qr(A,R,2,0,ee-re),Qr(A,R,3,0,Z-fe),W++,R+=32}function ta(h,v,A,R){var q=h[v+0]+4,W=35468*h[v+4]>>16,G=En(h[v+4]),Z=35468*h[v+1]>>16;Ka(A,R,0,q+G,h=En(h[v+1]),Z),Ka(A,R,1,q+W,h,Z),Ka(A,R,2,q-W,h,Z),Ka(A,R,3,q-G,h,Z)}function qa(h,v,A,R,q){Or(h,v,A,R),q&&Or(h,v+16,A,R+4)}function hl(h,v,A,R){ua(h,v+0,A,R,1),ua(h,v+32,A,R+128,1)}function $t(h,v,A,R){var q;for(h=h[v+0]+4,q=0;4>q;++q)for(v=0;4>v;++v)Qr(A,R,v,q,h)}function na(h,v,A,R){h[v+0]&&Vr(h,v+0,A,R),h[v+16]&&Vr(h,v+16,A,R+4),h[v+32]&&Vr(h,v+32,A,R+128),h[v+48]&&Vr(h,v+48,A,R+128+4)}function ra(h,v,A,R){var q,W=s(16);for(q=0;4>q;++q){var G=h[v+0+q]+h[v+12+q],Z=h[v+4+q]+h[v+8+q],ee=h[v+4+q]-h[v+8+q],re=h[v+0+q]-h[v+12+q];W[0+q]=G+Z,W[8+q]=G-Z,W[4+q]=re+ee,W[12+q]=re-ee}for(q=0;4>q;++q)G=(h=W[0+4*q]+3)+W[3+4*q],Z=W[1+4*q]+W[2+4*q],ee=W[1+4*q]-W[2+4*q],re=h-W[3+4*q],A[R+0]=G+Z>>3,A[R+16]=re+ee>>3,A[R+32]=G-Z>>3,A[R+48]=re-ee>>3,R+=64}function Wi(h,v,A){var R,q=v-32,W=gi,G=255-h[q-1];for(R=0;R<A;++R){var Z,ee=W,re=G+h[v-1];for(Z=0;Z<A;++Z)h[v+Z]=ee[re+h[q+Z]];v+=32}}function Qu(h,v){Wi(h,v,4)}function mc(h,v){Wi(h,v,8)}function Yu(h,v){Wi(h,v,16)}function Gi(h,v){var A;for(A=0;16>A;++A)r(h,v+32*A,h,v-32,16)}function za(h,v){var A;for(A=16;0<A;--A)i(h,v,h[v-1],16),v+=32}function $a(h,v,A){var R;for(R=0;16>R;++R)i(v,A+32*R,h,16)}function Ns(h,v){var A,R=16;for(A=0;16>A;++A)R+=h[v-1+32*A]+h[v+A-32];$a(R>>5,h,v)}function on(h,v){var A,R=8;for(A=0;16>A;++A)R+=h[v-1+32*A];$a(R>>4,h,v)}function gc(h,v){var A,R=8;for(A=0;16>A;++A)R+=h[v+A-32];$a(R>>4,h,v)}function dl(h,v){$a(128,h,v)}function yt(h,v,A){return h+2*v+A+2>>2}function As(h,v){var A,R=v-32;for(R=new Uint8Array([yt(h[R-1],h[R+0],h[R+1]),yt(h[R+0],h[R+1],h[R+2]),yt(h[R+1],h[R+2],h[R+3]),yt(h[R+2],h[R+3],h[R+4])]),A=0;4>A;++A)r(h,v+32*A,R,0,R.length)}function Ju(h,v){var A=h[v-1],R=h[v-1+32],q=h[v-1+64],W=h[v-1+96];Ae(h,v+0,16843009*yt(h[v-1-32],A,R)),Ae(h,v+32,16843009*yt(A,R,q)),Ae(h,v+64,16843009*yt(R,q,W)),Ae(h,v+96,16843009*yt(q,W,W))}function Ii(h,v){var A,R=4;for(A=0;4>A;++A)R+=h[v+A-32]+h[v-1+32*A];for(R>>=3,A=0;4>A;++A)i(h,v+32*A,R,4)}function vc(h,v){var A=h[v-1+0],R=h[v-1+32],q=h[v-1+64],W=h[v-1-32],G=h[v+0-32],Z=h[v+1-32],ee=h[v+2-32],re=h[v+3-32];h[v+0+96]=yt(R,q,h[v-1+96]),h[v+1+96]=h[v+0+64]=yt(A,R,q),h[v+2+96]=h[v+1+64]=h[v+0+32]=yt(W,A,R),h[v+3+96]=h[v+2+64]=h[v+1+32]=h[v+0+0]=yt(G,W,A),h[v+3+64]=h[v+2+32]=h[v+1+0]=yt(Z,G,W),h[v+3+32]=h[v+2+0]=yt(ee,Z,G),h[v+3+0]=yt(re,ee,Z)}function fi(h,v){var A=h[v+1-32],R=h[v+2-32],q=h[v+3-32],W=h[v+4-32],G=h[v+5-32],Z=h[v+6-32],ee=h[v+7-32];h[v+0+0]=yt(h[v+0-32],A,R),h[v+1+0]=h[v+0+32]=yt(A,R,q),h[v+2+0]=h[v+1+32]=h[v+0+64]=yt(R,q,W),h[v+3+0]=h[v+2+32]=h[v+1+64]=h[v+0+96]=yt(q,W,G),h[v+3+32]=h[v+2+64]=h[v+1+96]=yt(W,G,Z),h[v+3+64]=h[v+2+96]=yt(G,Z,ee),h[v+3+96]=yt(Z,ee,ee)}function Ha(h,v){var A=h[v-1+0],R=h[v-1+32],q=h[v-1+64],W=h[v-1-32],G=h[v+0-32],Z=h[v+1-32],ee=h[v+2-32],re=h[v+3-32];h[v+0+0]=h[v+1+64]=W+G+1>>1,h[v+1+0]=h[v+2+64]=G+Z+1>>1,h[v+2+0]=h[v+3+64]=Z+ee+1>>1,h[v+3+0]=ee+re+1>>1,h[v+0+96]=yt(q,R,A),h[v+0+64]=yt(R,A,W),h[v+0+32]=h[v+1+96]=yt(A,W,G),h[v+1+32]=h[v+2+96]=yt(W,G,Z),h[v+2+32]=h[v+3+96]=yt(G,Z,ee),h[v+3+32]=yt(Z,ee,re)}function fl(h,v){var A=h[v+0-32],R=h[v+1-32],q=h[v+2-32],W=h[v+3-32],G=h[v+4-32],Z=h[v+5-32],ee=h[v+6-32],re=h[v+7-32];h[v+0+0]=A+R+1>>1,h[v+1+0]=h[v+0+64]=R+q+1>>1,h[v+2+0]=h[v+1+64]=q+W+1>>1,h[v+3+0]=h[v+2+64]=W+G+1>>1,h[v+0+32]=yt(A,R,q),h[v+1+32]=h[v+0+96]=yt(R,q,W),h[v+2+32]=h[v+1+96]=yt(q,W,G),h[v+3+32]=h[v+2+96]=yt(W,G,Z),h[v+3+64]=yt(G,Z,ee),h[v+3+96]=yt(Z,ee,re)}function Wa(h,v){var A=h[v-1+0],R=h[v-1+32],q=h[v-1+64],W=h[v-1+96];h[v+0+0]=A+R+1>>1,h[v+2+0]=h[v+0+32]=R+q+1>>1,h[v+2+32]=h[v+0+64]=q+W+1>>1,h[v+1+0]=yt(A,R,q),h[v+3+0]=h[v+1+32]=yt(R,q,W),h[v+3+32]=h[v+1+64]=yt(q,W,W),h[v+3+64]=h[v+2+64]=h[v+0+96]=h[v+1+96]=h[v+2+96]=h[v+3+96]=W}function Ga(h,v){var A=h[v-1+0],R=h[v-1+32],q=h[v-1+64],W=h[v-1+96],G=h[v-1-32],Z=h[v+0-32],ee=h[v+1-32],re=h[v+2-32];h[v+0+0]=h[v+2+32]=A+G+1>>1,h[v+0+32]=h[v+2+64]=R+A+1>>1,h[v+0+64]=h[v+2+96]=q+R+1>>1,h[v+0+96]=W+q+1>>1,h[v+3+0]=yt(Z,ee,re),h[v+2+0]=yt(G,Z,ee),h[v+1+0]=h[v+3+32]=yt(A,G,Z),h[v+1+32]=h[v+3+64]=yt(R,A,G),h[v+1+64]=h[v+3+96]=yt(q,R,A),h[v+1+96]=yt(W,q,R)}function yc(h,v){var A;for(A=0;8>A;++A)r(h,v+32*A,h,v-32,8)}function Qi(h,v){var A;for(A=0;8>A;++A)i(h,v,h[v-1],8),v+=32}function pi(h,v,A){var R;for(R=0;8>R;++R)i(v,A+32*R,h,8)}function Yi(h,v){var A,R=8;for(A=0;8>A;++A)R+=h[v+A-32]+h[v-1+32*A];pi(R>>4,h,v)}function pl(h,v){var A,R=4;for(A=0;8>A;++A)R+=h[v+A-32];pi(R>>3,h,v)}function qt(h,v){var A,R=4;for(A=0;8>A;++A)R+=h[v-1+32*A];pi(R>>3,h,v)}function ml(h,v){pi(128,h,v)}function Qa(h,v,A){var R=h[v-A],q=h[v+0],W=3*(q-R)+hg[1020+h[v-2*A]-h[v+A]],G=Jd[112+(W+4>>3)];h[v-A]=gi[255+R+Jd[112+(W+3>>3)]],h[v+0]=gi[255+q-G]}function gl(h,v,A,R){var q=h[v+0],W=h[v+A];return Ri[255+h[v-2*A]-h[v-A]]>R||Ri[255+W-q]>R}function vl(h,v,A,R){return 4*Ri[255+h[v-A]-h[v+0]]+Ri[255+h[v-2*A]-h[v+A]]<=R}function yl(h,v,A,R,q){var W=h[v-3*A],G=h[v-2*A],Z=h[v-A],ee=h[v+0],re=h[v+A],fe=h[v+2*A],xe=h[v+3*A];return 4*Ri[255+Z-ee]+Ri[255+G-re]>R?0:Ri[255+h[v-4*A]-W]<=q&&Ri[255+W-G]<=q&&Ri[255+G-Z]<=q&&Ri[255+xe-fe]<=q&&Ri[255+fe-re]<=q&&Ri[255+re-ee]<=q}function ia(h,v,A,R){var q=2*R+1;for(R=0;16>R;++R)vl(h,v+R,A,q)&&Qa(h,v+R,A)}function mi(h,v,A,R){var q=2*R+1;for(R=0;16>R;++R)vl(h,v+R*A,1,q)&&Qa(h,v+R*A,1)}function Gn(h,v,A,R){var q;for(q=3;0<q;--q)ia(h,v+=4*A,A,R)}function wc(h,v,A,R){var q;for(q=3;0<q;--q)mi(h,v+=4,A,R)}function Es(h,v,A,R,q,W,G,Z){for(W=2*W+1;0<q--;){if(yl(h,v,A,W,G))if(gl(h,v,A,Z))Qa(h,v,A);else{var ee=h,re=v,fe=A,xe=ee[re-2*fe],Se=ee[re-fe],ye=ee[re+0],je=ee[re+fe],Ee=ee[re+2*fe],pe=27*(Pe=hg[1020+3*(ye-Se)+hg[1020+xe-je]])+63>>7,me=18*Pe+63>>7,Pe=9*Pe+63>>7;ee[re-3*fe]=gi[255+ee[re-3*fe]+Pe],ee[re-2*fe]=gi[255+xe+me],ee[re-fe]=gi[255+Se+pe],ee[re+0]=gi[255+ye-pe],ee[re+fe]=gi[255+je-me],ee[re+2*fe]=gi[255+Ee-Pe]}v+=R}}function sr(h,v,A,R,q,W,G,Z){for(W=2*W+1;0<q--;){if(yl(h,v,A,W,G))if(gl(h,v,A,Z))Qa(h,v,A);else{var ee=h,re=v,fe=A,xe=ee[re-fe],Se=ee[re+0],ye=ee[re+fe],je=Jd[112+((Ee=3*(Se-xe))+4>>3)],Ee=Jd[112+(Ee+3>>3)],pe=je+1>>1;ee[re-2*fe]=gi[255+ee[re-2*fe]+pe],ee[re-fe]=gi[255+xe+Ee],ee[re+0]=gi[255+Se-je],ee[re+fe]=gi[255+ye-pe]}v+=R}}function Ya(h,v,A,R,q,W){Es(h,v,A,1,16,R,q,W)}function Ji(h,v,A,R,q,W){Es(h,v,1,A,16,R,q,W)}function Ja(h,v,A,R,q,W){var G;for(G=3;0<G;--G)sr(h,v+=4*A,A,1,16,R,q,W)}function sa(h,v,A,R,q,W){var G;for(G=3;0<G;--G)sr(h,v+=4,1,A,16,R,q,W)}function Xa(h,v,A,R,q,W,G,Z){Es(h,v,q,1,8,W,G,Z),Es(A,R,q,1,8,W,G,Z)}function wl(h,v,A,R,q,W,G,Z){Es(h,v,1,q,8,W,G,Z),Es(A,R,1,q,8,W,G,Z)}function Za(h,v,A,R,q,W,G,Z){sr(h,v+4*q,q,1,8,W,G,Z),sr(A,R+4*q,q,1,8,W,G,Z)}function ks(h,v,A,R,q,W,G,Z){sr(h,v+4,1,q,8,W,G,Z),sr(A,R+4,1,q,8,W,G,Z)}function aa(){this.ba=new Wn,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Dt,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function eo(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function oa(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function to(){this.ua=0,this.Wa=new ae,this.vb=new ae,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new M,this.yc=new I}function _c(){this.xb=this.a=0,this.l=new ea,this.ca=new Wn,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new O,this.Pb=0,this.wd=new O,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new to,this.ab=0,this.gc=a(4,oa),this.Oc=0}function Xi(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new ea,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Ts(h,v,A,R,q,W,G){for(h=h==null?0:h[v+0],v=0;v<G;++v)q[W+v]=h+A[R+v]&255,h=q[W+v]}function no(h,v,A,R,q,W,G){var Z;if(h==null)Ts(null,null,A,R,q,W,G);else for(Z=0;Z<G;++Z)q[W+Z]=h[v+Z]+A[R+Z]&255}function _r(h,v,A,R,q,W,G){if(h==null)Ts(null,null,A,R,q,W,G);else{var Z,ee=h[v+0],re=ee,fe=ee;for(Z=0;Z<G;++Z)re=fe+(ee=h[v+Z])-re,fe=A[R+Z]+(-256&re?0>re?0:255:re)&255,re=ee,q[W+Z]=fe}}function ro(h,v,A,R){var q=v.width,W=v.o;if(e(h!=null&&v!=null),0>A||0>=R||A+R>W)return null;if(!h.Cc){if(h.ga==null){var G;if(h.ga=new Xi,(G=h.ga==null)||(G=v.width*v.o,e(h.Gb.length==0),h.Gb=s(G),h.Uc=0,h.Gb==null?G=0:(h.mb=h.Gb,h.nb=h.Uc,h.rc=null,G=1),G=!G),!G){G=h.ga;var Z=h.Fa,ee=h.P,re=h.qc,fe=h.mb,xe=h.nb,Se=ee+1,ye=re-1,je=G.l;if(e(Z!=null&&fe!=null&&v!=null),co[0]=null,co[1]=Ts,co[2]=no,co[3]=_r,G.ca=fe,G.tb=xe,G.c=v.width,G.i=v.height,e(0<G.c&&0<G.i),1>=re)v=0;else if(G.$a=Z[ee+0]>>0&3,G.Z=Z[ee+0]>>2&3,G.Lc=Z[ee+0]>>4&3,ee=Z[ee+0]>>6&3,0>G.$a||1<G.$a||4<=G.Z||1<G.Lc||ee)v=0;else if(je.put=fn,je.ac=Jt,je.bc=hi,je.ma=G,je.width=v.width,je.height=v.height,je.Da=v.Da,je.v=v.v,je.va=v.va,je.j=v.j,je.o=v.o,G.$a)e:{e(G.$a==1),v=Cn();t:for(;;){if(v==null){v=0;break e}if(e(G!=null),G.mc=v,v.c=G.c,v.i=G.i,v.l=G.l,v.l.ma=G,v.l.width=G.c,v.l.height=G.i,v.a=0,z(v.m,Z,Se,ye),!di(G.c,G.i,1,v,null)||(v.ab==1&&v.gc[0].hc==3&&$i(v.s)?(G.ic=1,Z=v.c*v.i,v.Ta=null,v.Ua=0,v.V=s(Z),v.Ba=0,v.V==null?(v.a=1,v=0):v=1):(G.ic=0,v=ws(v,G.c)),!v))break t;v=1;break e}G.mc=null,v=0}else v=ye>=G.c*G.i;G=!v}if(G)return null;h.ga.Lc!=1?h.Ga=0:R=W-A}e(h.ga!=null),e(A+R<=W);e:{if(v=(Z=h.ga).c,W=Z.l.o,Z.$a==0){if(Se=h.rc,ye=h.Vc,je=h.Fa,ee=h.P+1+A*v,re=h.mb,fe=h.nb+A*v,e(ee<=h.P+h.qc),Z.Z!=0)for(e(co[Z.Z]!=null),G=0;G<R;++G)co[Z.Z](Se,ye,je,ee,re,fe,v),Se=re,ye=fe,fe+=v,ee+=v;else for(G=0;G<R;++G)r(re,fe,je,ee,v),Se=re,ye=fe,fe+=v,ee+=v;h.rc=Se,h.Vc=ye}else{if(e(Z.mc!=null),v=A+R,e((G=Z.mc)!=null),e(v<=G.i),G.C>=v)v=1;else if(Z.ic||ve(),Z.ic){Z=G.V,Se=G.Ba,ye=G.c;var Ee=G.i,pe=(je=1,ee=G.$/ye,re=G.$%ye,fe=G.m,xe=G.s,G.$),me=ye*Ee,Pe=ye*v,Fe=xe.wc,Ce=pe<Pe?An(xe,re,ee):null;e(pe<=me),e(v<=Ee),e($i(xe));t:for(;;){for(;!fe.h&&pe<Pe;){if(re&Fe||(Ce=An(xe,re,ee)),e(Ce!=null),se(fe),256>(Ee=Un(Ce.G[0],Ce.H[0],fe)))Z[Se+pe]=Ee,++pe,++re>=ye&&(re=0,++ee<=v&&!(ee%16)&&Gr(G,ee));else{if(!(280>Ee)){je=0;break t}Ee=Wr(Ee-256,fe);var Ze,Ge=Un(Ce.G[4],Ce.H[4],fe);if(se(fe),!(pe>=(Ge=yr(ye,Ge=Wr(Ge,fe)))&&me-pe>=Ee)){je=0;break t}for(Ze=0;Ze<Ee;++Ze)Z[Se+pe+Ze]=Z[Se+pe+Ze-Ge];for(pe+=Ee,re+=Ee;re>=ye;)re-=ye,++ee<=v&&!(ee%16)&&Gr(G,ee);pe<Pe&&re&Fe&&(Ce=An(xe,re,ee))}e(fe.h==J(fe))}Gr(G,ee>v?v:ee);break t}!je||fe.h&&pe<me?(je=0,G.a=fe.h?5:3):G.$=pe,v=je}else v=Dr(G,G.V,G.Ba,G.c,G.i,v,_s);if(!v){R=0;break e}}A+R>=W&&(h.Cc=1),R=1}if(!R)return null;if(h.Cc&&((R=h.ga)!=null&&(R.mc=null),h.ga=null,0<h.Ga))return alert("todo:WebPDequantizeLevels"),null}return h.nb+A*q}function _(h,v,A,R,q,W){for(;0<q--;){var G,Z=h,ee=v+(A?1:0),re=h,fe=v+(A?0:3);for(G=0;G<R;++G){var xe=re[fe+4*G];xe!=255&&(xe*=32897,Z[ee+4*G+0]=Z[ee+4*G+0]*xe>>23,Z[ee+4*G+1]=Z[ee+4*G+1]*xe>>23,Z[ee+4*G+2]=Z[ee+4*G+2]*xe>>23)}v+=W}}function K(h,v,A,R,q){for(;0<R--;){var W;for(W=0;W<A;++W){var G=h[v+2*W+0],Z=15&(re=h[v+2*W+1]),ee=4369*Z,re=(240&re|re>>4)*ee>>16;h[v+2*W+0]=(240&G|G>>4)*ee>>16&240|(15&G|G<<4)*ee>>16>>4&15,h[v+2*W+1]=240&re|Z}v+=q}}function ie(h,v,A,R,q,W,G,Z){var ee,re,fe=255;for(re=0;re<q;++re){for(ee=0;ee<R;++ee){var xe=h[v+ee];W[G+4*ee]=xe,fe&=xe}v+=A,G+=Z}return fe!=255}function ce(h,v,A,R,q){var W;for(W=0;W<q;++W)A[R+W]=h[v+W]>>8}function ve(){Li=_,nn=K,rn=ie,Ln=ce}function ke(h,v,A){y[h]=function(R,q,W,G,Z,ee,re,fe,xe,Se,ye,je,Ee,pe,me,Pe,Fe){var Ce,Ze=Fe-1>>1,Ge=Z[ee+0]|re[fe+0]<<16,pt=xe[Se+0]|ye[je+0]<<16;e(R!=null);var Je=3*Ge+pt+131074>>2;for(v(R[q+0],255&Je,Je>>16,Ee,pe),W!=null&&(Je=3*pt+Ge+131074>>2,v(W[G+0],255&Je,Je>>16,me,Pe)),Ce=1;Ce<=Ze;++Ce){var Kt=Z[ee+Ce]|re[fe+Ce]<<16,Ht=xe[Se+Ce]|ye[je+Ce]<<16,Mt=Ge+Kt+pt+Ht+524296,Lt=Mt+2*(Kt+pt)>>3;Je=Lt+Ge>>1,Ge=(Mt=Mt+2*(Ge+Ht)>>3)+Kt>>1,v(R[q+2*Ce-1],255&Je,Je>>16,Ee,pe+(2*Ce-1)*A),v(R[q+2*Ce-0],255&Ge,Ge>>16,Ee,pe+(2*Ce-0)*A),W!=null&&(Je=Mt+pt>>1,Ge=Lt+Ht>>1,v(W[G+2*Ce-1],255&Je,Je>>16,me,Pe+(2*Ce-1)*A),v(W[G+2*Ce+0],255&Ge,Ge>>16,me,Pe+(2*Ce+0)*A)),Ge=Kt,pt=Ht}1&Fe||(Je=3*Ge+pt+131074>>2,v(R[q+Fe-1],255&Je,Je>>16,Ee,pe+(Fe-1)*A),W!=null&&(Je=3*pt+Ge+131074>>2,v(W[G+Fe-1],255&Je,Je>>16,me,Pe+(Fe-1)*A)))}}function Oe(){Di[Xd]=yA,Di[Zd]=Sy,Di[yy]=wA,Di[ef]=Ny,Di[tf]=Ay,Di[dg]=Ey,Di[wy]=_A,Di[fg]=Sy,Di[pg]=Ny,Di[nf]=Ay,Di[mg]=Ey}function Qe(h){return h&-16384?0>h?0:255:h>>bA}function f(h,v){return Qe((19077*h>>8)+(26149*v>>8)-14234)}function P(h,v,A){return Qe((19077*h>>8)-(6419*v>>8)-(13320*A>>8)+8708)}function D(h,v){return Qe((19077*h>>8)+(33050*v>>8)-17685)}function X(h,v,A,R,q){R[q+0]=f(h,A),R[q+1]=P(h,v,A),R[q+2]=D(h,v)}function ge(h,v,A,R,q){R[q+0]=D(h,v),R[q+1]=P(h,v,A),R[q+2]=f(h,A)}function Ne(h,v,A,R,q){var W=P(h,v,A);v=W<<3&224|D(h,v)>>3,R[q+0]=248&f(h,A)|W>>5,R[q+1]=v}function Ve(h,v,A,R,q){var W=240&D(h,v)|15;R[q+0]=240&f(h,A)|P(h,v,A)>>4,R[q+1]=W}function St(h,v,A,R,q){R[q+0]=255,X(h,v,A,R,q+1)}function jt(h,v,A,R,q){ge(h,v,A,R,q),R[q+3]=255}function Nt(h,v,A,R,q){X(h,v,A,R,q),R[q+3]=255}function zt(h,v){return 0>h?0:h>v?v:h}function Zt(h,v,A){y[h]=function(R,q,W,G,Z,ee,re,fe,xe){for(var Se=fe+(-2&xe)*A;fe!=Se;)v(R[q+0],W[G+0],Z[ee+0],re,fe),v(R[q+1],W[G+0],Z[ee+0],re,fe+A),q+=2,++G,++ee,fe+=2*A;1&xe&&v(R[q+0],W[G+0],Z[ee+0],re,fe)}}function Zi(h,v,A){return A==0?h==0?v==0?6:5:v==0?4:0:A}function ar(h,v,A,R,q){switch(h>>>30){case 3:ua(v,A,R,q,0);break;case 2:jn(v,A,R,q);break;case 1:Vr(v,A,R,q)}}function Is(h,v){var A,R,q=v.M,W=v.Nb,G=h.oc,Z=h.pc+40,ee=h.oc,re=h.pc+584,fe=h.oc,xe=h.pc+600;for(A=0;16>A;++A)G[Z+32*A-1]=129;for(A=0;8>A;++A)ee[re+32*A-1]=129,fe[xe+32*A-1]=129;for(0<q?G[Z-1-32]=ee[re-1-32]=fe[xe-1-32]=129:(i(G,Z-32-1,127,21),i(ee,re-32-1,127,9),i(fe,xe-32-1,127,9)),R=0;R<h.za;++R){var Se=v.ya[v.aa+R];if(0<R){for(A=-1;16>A;++A)r(G,Z+32*A-4,G,Z+32*A+12,4);for(A=-1;8>A;++A)r(ee,re+32*A-4,ee,re+32*A+4,4),r(fe,xe+32*A-4,fe,xe+32*A+4,4)}var ye=h.Gd,je=h.Hd+R,Ee=Se.ad,pe=Se.Hc;if(0<q&&(r(G,Z-32,ye[je].y,0,16),r(ee,re-32,ye[je].f,0,8),r(fe,xe-32,ye[je].ea,0,8)),Se.Za){var me=G,Pe=Z-32+16;for(0<q&&(R>=h.za-1?i(me,Pe,ye[je].y[15],4):r(me,Pe,ye[je+1].y,0,4)),A=0;4>A;A++)me[Pe+128+A]=me[Pe+256+A]=me[Pe+384+A]=me[Pe+0+A];for(A=0;16>A;++A,pe<<=2)me=G,Pe=Z+Ty[A],es[Se.Ob[A]](me,Pe),ar(pe,Ee,16*+A,me,Pe)}else if(me=Zi(R,q,Se.Ob[0]),lo[me](G,Z),pe!=0)for(A=0;16>A;++A,pe<<=2)ar(pe,Ee,16*+A,G,Z+Ty[A]);for(A=Se.Gc,me=Zi(R,q,Se.Dd),da[me](ee,re),da[me](fe,xe),pe=Ee,me=ee,Pe=re,255&(Se=A>>0)&&(170&Se?nh(pe,256,me,Pe):Ci(pe,256,me,Pe)),Se=fe,pe=xe,255&(A>>=8)&&(170&A?nh(Ee,320,Se,pe):Ci(Ee,320,Se,pe)),q<h.Ub-1&&(r(ye[je].y,0,G,Z+480,16),r(ye[je].f,0,ee,re+224,8),r(ye[je].ea,0,fe,xe+224,8)),A=8*W*h.B,ye=h.sa,je=h.ta+16*R+16*W*h.R,Ee=h.qa,Se=h.ra+8*R+A,pe=h.Ha,me=h.Ia+8*R+A,A=0;16>A;++A)r(ye,je+A*h.R,G,Z+32*A,16);for(A=0;8>A;++A)r(Ee,Se+A*h.B,ee,re+32*A,8),r(pe,me+A*h.B,fe,xe+32*A,8)}}function Ps(h,v,A,R,q,W,G,Z,ee){var re=[0],fe=[0],xe=0,Se=ee!=null?ee.kd:0,ye=ee??new eo;if(h==null||12>A)return 7;ye.data=h,ye.w=v,ye.ha=A,v=[v],A=[A],ye.gb=[ye.gb];e:{var je=v,Ee=A,pe=ye.gb;if(e(h!=null),e(Ee!=null),e(pe!=null),pe[0]=0,12<=Ee[0]&&!n(h,je[0],"RIFF")){if(n(h,je[0]+8,"WEBP")){pe=3;break e}var me=Be(h,je[0]+4);if(12>me||4294967286<me){pe=3;break e}if(Se&&me>Ee[0]-8){pe=7;break e}pe[0]=me,je[0]+=12,Ee[0]-=12}pe=0}if(pe!=0)return pe;for(me=0<ye.gb[0],A=A[0];;){e:{var Pe=h;Ee=v,pe=A;var Fe=re,Ce=fe,Ze=je=[0];if((Je=xe=[xe])[0]=0,8>pe[0])pe=7;else{if(!n(Pe,Ee[0],"VP8X")){if(Be(Pe,Ee[0]+4)!=10){pe=3;break e}if(18>pe[0]){pe=7;break e}var Ge=Be(Pe,Ee[0]+8),pt=1+Re(Pe,Ee[0]+12);if(2147483648<=pt*(Pe=1+Re(Pe,Ee[0]+15))){pe=3;break e}Ze!=null&&(Ze[0]=Ge),Fe!=null&&(Fe[0]=pt),Ce!=null&&(Ce[0]=Pe),Ee[0]+=18,pe[0]-=18,Je[0]=1}pe=0}}if(xe=xe[0],je=je[0],pe!=0)return pe;if(Ee=!!(2&je),!me&&xe)return 3;if(W!=null&&(W[0]=!!(16&je)),G!=null&&(G[0]=Ee),Z!=null&&(Z[0]=0),G=re[0],je=fe[0],xe&&Ee&&ee==null){pe=0;break}if(4>A){pe=7;break}if(me&&xe||!me&&!xe&&!n(h,v[0],"ALPH")){A=[A],ye.na=[ye.na],ye.P=[ye.P],ye.Sa=[ye.Sa];e:{Ge=h,pe=v,me=A;var Je=ye.gb;Fe=ye.na,Ce=ye.P,Ze=ye.Sa,pt=22,e(Ge!=null),e(me!=null),Pe=pe[0];var Kt=me[0];for(e(Fe!=null),e(Ze!=null),Fe[0]=null,Ce[0]=null,Ze[0]=0;;){if(pe[0]=Pe,me[0]=Kt,8>Kt){pe=7;break e}var Ht=Be(Ge,Pe+4);if(4294967286<Ht){pe=3;break e}var Mt=8+Ht+1&-2;if(pt+=Mt,0<Je&&pt>Je){pe=3;break e}if(!n(Ge,Pe,"VP8 ")||!n(Ge,Pe,"VP8L")){pe=0;break e}if(Kt[0]<Mt){pe=7;break e}n(Ge,Pe,"ALPH")||(Fe[0]=Ge,Ce[0]=Pe+8,Ze[0]=Ht),Pe+=Mt,Kt-=Mt}}if(A=A[0],ye.na=ye.na[0],ye.P=ye.P[0],ye.Sa=ye.Sa[0],pe!=0)break}A=[A],ye.Ja=[ye.Ja],ye.xa=[ye.xa];e:if(Je=h,pe=v,me=A,Fe=ye.gb[0],Ce=ye.Ja,Ze=ye.xa,Ge=pe[0],Pe=!n(Je,Ge,"VP8 "),pt=!n(Je,Ge,"VP8L"),e(Je!=null),e(me!=null),e(Ce!=null),e(Ze!=null),8>me[0])pe=7;else{if(Pe||pt){if(Je=Be(Je,Ge+4),12<=Fe&&Je>Fe-12){pe=3;break e}if(Se&&Je>me[0]-8){pe=7;break e}Ce[0]=Je,pe[0]+=8,me[0]-=8,Ze[0]=pt}else Ze[0]=5<=me[0]&&Je[Ge+0]==47&&!(Je[Ge+4]>>5),Ce[0]=me[0];pe=0}if(A=A[0],ye.Ja=ye.Ja[0],ye.xa=ye.xa[0],v=v[0],pe!=0)break;if(4294967286<ye.Ja)return 3;if(Z==null||Ee||(Z[0]=ye.xa?2:1),G=[G],je=[je],ye.xa){if(5>A){pe=7;break}Z=G,Se=je,Ee=W,h==null||5>A?h=0:5<=A&&h[v+0]==47&&!(h[v+4]>>5)?(me=[0],Je=[0],Fe=[0],z(Ce=new O,h,v,A),nt(Ce,me,Je,Fe)?(Z!=null&&(Z[0]=me[0]),Se!=null&&(Se[0]=Je[0]),Ee!=null&&(Ee[0]=Fe[0]),h=1):h=0):h=0}else{if(10>A){pe=7;break}Z=je,h==null||10>A||!ll(h,v+3,A-3)?h=0:(Se=h[v+0]|h[v+1]<<8|h[v+2]<<16,Ee=16383&(h[v+7]<<8|h[v+6]),h=16383&(h[v+9]<<8|h[v+8]),1&Se||3<(Se>>1&7)||!(Se>>4&1)||Se>>5>=ye.Ja||!Ee||!h?h=0:(G&&(G[0]=Ee),Z&&(Z[0]=h),h=1))}if(!h||(G=G[0],je=je[0],xe&&(re[0]!=G||fe[0]!=je)))return 3;ee!=null&&(ee[0]=ye,ee.offset=v-ee.w,e(4294967286>v-ee.w),e(ee.offset==ee.ha-A));break}return pe==0||pe==7&&xe&&ee==null?(W!=null&&(W[0]|=ye.na!=null&&0<ye.na.length),R!=null&&(R[0]=G),q!=null&&(q[0]=je),0):pe}function Xu(h,v,A){var R=v.width,q=v.height,W=0,G=0,Z=R,ee=q;if(v.Da=h!=null&&0<h.Da,v.Da&&(Z=h.cd,ee=h.bd,W=h.v,G=h.j,11>A||(W&=-2,G&=-2),0>W||0>G||0>=Z||0>=ee||W+Z>R||G+ee>q))return 0;if(v.v=W,v.j=G,v.va=W+Z,v.o=G+ee,v.U=Z,v.T=ee,v.da=h!=null&&0<h.da,v.da){if(!He(Z,ee,A=[h.ib],W=[h.hb]))return 0;v.ib=A[0],v.hb=W[0]}return v.ob=h!=null&&h.ob,v.Kb=h==null||!h.Sd,v.da&&(v.ob=v.ib<3*R/4&&v.hb<3*q/4,v.Kb=0),1}function Zu(h){if(h==null)return 2;if(11>h.S){var v=h.f.RGBA;v.fb+=(h.height-1)*v.A,v.A=-v.A}else v=h.f.kb,h=h.height,v.O+=(h-1)*v.fa,v.fa=-v.fa,v.N+=(h-1>>1)*v.Ab,v.Ab=-v.Ab,v.W+=(h-1>>1)*v.Db,v.Db=-v.Db,v.F!=null&&(v.J+=(h-1)*v.lb,v.lb=-v.lb);return 0}function bc(h,v,A,R){if(R==null||0>=h||0>=v)return 2;if(A!=null){if(A.Da){var q=A.cd,W=A.bd,G=-2&A.v,Z=-2&A.j;if(0>G||0>Z||0>=q||0>=W||G+q>h||Z+W>v)return 2;h=q,v=W}if(A.da){if(!He(h,v,q=[A.ib],W=[A.hb]))return 2;h=q[0],v=W[0]}}R.width=h,R.height=v;e:{var ee=R.width,re=R.height;if(h=R.S,0>=ee||0>=re||!(h>=Xd&&13>h))h=2;else{if(0>=R.Rd&&R.sd==null){G=W=q=v=0;var fe=(Z=ee*Iy[h])*re;if(11>h||(W=(re+1)/2*(v=(ee+1)/2),h==12&&(G=(q=ee)*re)),(re=s(fe+2*W+G))==null){h=1;break e}R.sd=re,11>h?((ee=R.f.RGBA).eb=re,ee.fb=0,ee.A=Z,ee.size=fe):((ee=R.f.kb).y=re,ee.O=0,ee.fa=Z,ee.Fd=fe,ee.f=re,ee.N=0+fe,ee.Ab=v,ee.Cd=W,ee.ea=re,ee.W=0+fe+W,ee.Db=v,ee.Ed=W,h==12&&(ee.F=re,ee.J=0+fe+2*W),ee.Tc=G,ee.lb=q)}if(v=1,q=R.S,W=R.width,G=R.height,q>=Xd&&13>q)if(11>q)h=R.f.RGBA,v&=(Z=Math.abs(h.A))*(G-1)+W<=h.size,v&=Z>=W*Iy[q],v&=h.eb!=null;else{h=R.f.kb,Z=(W+1)/2,fe=(G+1)/2,ee=Math.abs(h.fa),re=Math.abs(h.Ab);var xe=Math.abs(h.Db),Se=Math.abs(h.lb),ye=Se*(G-1)+W;v&=ee*(G-1)+W<=h.Fd,v&=re*(fe-1)+Z<=h.Cd,v=(v&=xe*(fe-1)+Z<=h.Ed)&ee>=W&re>=Z&xe>=Z,v&=h.y!=null,v&=h.f!=null,v&=h.ea!=null,q==12&&(v&=Se>=W,v&=ye<=h.Tc,v&=h.F!=null)}else v=0;h=v?0:2}}return h!=0||A!=null&&A.fd&&(h=Zu(R)),h}var or=64,xc=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Sc=24,Nc=32,eh=8,Yr=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Ie("Predictor0","PredictorAdd0"),y.Predictor0=function(){return 4278190080},y.Predictor1=function(h){return h},y.Predictor2=function(h,v,A){return v[A+0]},y.Predictor3=function(h,v,A){return v[A+1]},y.Predictor4=function(h,v,A){return v[A-1]},y.Predictor5=function(h,v,A){return Ke(Ke(h,v[A+1]),v[A+0])},y.Predictor6=function(h,v,A){return Ke(h,v[A-1])},y.Predictor7=function(h,v,A){return Ke(h,v[A+0])},y.Predictor8=function(h,v,A){return Ke(v[A-1],v[A+0])},y.Predictor9=function(h,v,A){return Ke(v[A+0],v[A+1])},y.Predictor10=function(h,v,A){return Ke(Ke(h,v[A-1]),Ke(v[A+0],v[A+1]))},y.Predictor11=function(h,v,A){var R=v[A+0];return 0>=at(R>>24&255,h>>24&255,(v=v[A-1])>>24&255)+at(R>>16&255,h>>16&255,v>>16&255)+at(R>>8&255,h>>8&255,v>>8&255)+at(255&R,255&h,255&v)?R:h},y.Predictor12=function(h,v,A){var R=v[A+0];return(We((h>>24&255)+(R>>24&255)-((v=v[A-1])>>24&255))<<24|We((h>>16&255)+(R>>16&255)-(v>>16&255))<<16|We((h>>8&255)+(R>>8&255)-(v>>8&255))<<8|We((255&h)+(255&R)-(255&v)))>>>0},y.Predictor13=function(h,v,A){var R=v[A-1];return(Ye((h=Ke(h,v[A+0]))>>24&255,R>>24&255)<<24|Ye(h>>16&255,R>>16&255)<<16|Ye(h>>8&255,R>>8&255)<<8|Ye(h>>0&255,R>>0&255))>>>0};var ug=y.PredictorAdd0;y.PredictorAdd1=tt,Ie("Predictor2","PredictorAdd2"),Ie("Predictor3","PredictorAdd3"),Ie("Predictor4","PredictorAdd4"),Ie("Predictor5","PredictorAdd5"),Ie("Predictor6","PredictorAdd6"),Ie("Predictor7","PredictorAdd7"),Ie("Predictor8","PredictorAdd8"),Ie("Predictor9","PredictorAdd9"),Ie("Predictor10","PredictorAdd10"),Ie("Predictor11","PredictorAdd11"),Ie("Predictor12","PredictorAdd12"),Ie("Predictor13","PredictorAdd13");var th=y.PredictorAdd2;ct("ColorIndexInverseTransform","MapARGB","32b",function(h){return h>>8&255},function(h){return h}),ct("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(h){return h},function(h){return h>>8&255});var Hd,Pi=y.ColorIndexInverseTransform,Ac=y.MapARGB,Wd=y.VP8LColorIndexInverseTransformAlpha,Gd=y.MapAlpha,io=y.VP8LPredictorsAdd=[];io.length=16,(y.VP8LPredictors=[]).length=16,(y.VP8LPredictorsAdd_C=[]).length=16,(y.VP8LPredictors_C=[]).length=16;var _l,Jr,Mr,so,la,ca,Ec,ua,jn,nh,Vr,Ci,kc,Qd,rh,bl,xl,ao,Sl,Tc,Nl,oo,ih,ji,Li,nn,rn,Ln,Qn=s(511),ha=s(2041),sh=s(225),Ic=s(767),Yd=0,hg=ha,Jd=sh,gi=Ic,Ri=Qn,Xd=0,Zd=1,yy=2,ef=3,tf=4,dg=5,wy=6,fg=7,pg=8,nf=9,mg=10,iA=[2,3,7],sA=[3,3,11],_y=[280,256,256,256,40],aA=[0,1,1,1,0],oA=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],lA=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],cA=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],uA=8,gg=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],vg=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],ah=null,hA=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],dA=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],by=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],fA=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],pA=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],mA=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],gA=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],lo=[],es=[],da=[],vA=1,xy=2,co=[],Di=[];ke("UpsampleRgbLinePair",X,3),ke("UpsampleBgrLinePair",ge,3),ke("UpsampleRgbaLinePair",Nt,4),ke("UpsampleBgraLinePair",jt,4),ke("UpsampleArgbLinePair",St,4),ke("UpsampleRgba4444LinePair",Ve,2),ke("UpsampleRgb565LinePair",Ne,2);var yA=y.UpsampleRgbLinePair,wA=y.UpsampleBgrLinePair,Sy=y.UpsampleRgbaLinePair,Ny=y.UpsampleBgraLinePair,Ay=y.UpsampleArgbLinePair,Ey=y.UpsampleRgba4444LinePair,_A=y.UpsampleRgb565LinePair,rf=16,sf=1<<rf-1,oh=-227,yg=482,bA=6,ky=0,xA=s(256),SA=s(256),NA=s(256),AA=s(256),EA=s(yg-oh),kA=s(yg-oh);Zt("YuvToRgbRow",X,3),Zt("YuvToBgrRow",ge,3),Zt("YuvToRgbaRow",Nt,4),Zt("YuvToBgraRow",jt,4),Zt("YuvToArgbRow",St,4),Zt("YuvToRgba4444Row",Ve,2),Zt("YuvToRgb565Row",Ne,2);var Ty=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],af=[0,2,8],TA=[8,7,6,4,4,2,2,2,1,1,1,1],IA=1;this.WebPDecodeRGBA=function(h,v,A,R,q){var W=Zd,G=new aa,Z=new Wn;G.ba=Z,Z.S=W,Z.width=[Z.width],Z.height=[Z.height];var ee=Z.width,re=Z.height,fe=new Nn;if(fe==null||h==null)var xe=2;else e(fe!=null),xe=Ps(h,v,A,fe.width,fe.height,fe.Pd,fe.Qd,fe.format,null);if(xe!=0?ee=0:(ee!=null&&(ee[0]=fe.width[0]),re!=null&&(re[0]=fe.height[0]),ee=1),ee){Z.width=Z.width[0],Z.height=Z.height[0],R!=null&&(R[0]=Z.width),q!=null&&(q[0]=Z.height);e:{if(R=new ea,(q=new eo).data=h,q.w=v,q.ha=A,q.kd=1,v=[0],e(q!=null),((h=Ps(q.data,q.w,q.ha,null,null,null,v,null,q))==0||h==7)&&v[0]&&(h=4),(v=h)==0){if(e(G!=null),R.data=q.data,R.w=q.w+q.offset,R.ha=q.ha-q.offset,R.put=fn,R.ac=Jt,R.bc=hi,R.ma=G,q.xa){if((h=Cn())==null){G=1;break e}if(function(Se,ye){var je=[0],Ee=[0],pe=[0];t:for(;;){if(Se==null)return 0;if(ye==null)return Se.a=2,0;if(Se.l=ye,Se.a=0,z(Se.m,ye.data,ye.w,ye.ha),!nt(Se.m,je,Ee,pe)){Se.a=3;break t}if(Se.xb=xy,ye.width=je[0],ye.height=Ee[0],!di(je[0],Ee[0],1,Se,null))break t;return 1}return e(Se.a!=0),0}(h,R)){if(R=(v=bc(R.width,R.height,G.Oa,G.ba))==0){t:{R=h;n:for(;;){if(R==null){R=0;break t}if(e(R.s.yc!=null),e(R.s.Ya!=null),e(0<R.s.Wb),e((A=R.l)!=null),e((q=A.ma)!=null),R.xb!=0){if(R.ca=q.ba,R.tb=q.tb,e(R.ca!=null),!Xu(q.Oa,A,ef)){R.a=2;break n}if(!ws(R,A.width)||A.da)break n;if((A.da||xt(R.ca.S))&&ve(),11>R.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),R.ca.f.kb.F!=null&&ve()),R.Pb&&0<R.s.ua&&R.s.vb.X==null&&!Xe(R.s.vb,R.s.Wa.Xa)){R.a=1;break n}R.xb=0}if(!Dr(R,R.V,R.Ba,R.c,R.i,A.o,Ua))break n;q.Dc=R.Ma,R=1;break t}e(R.a!=0),R=0}R=!R}R&&(v=h.a)}else v=h.a}else{if((h=new ol)==null){G=1;break e}if(h.Fa=q.na,h.P=q.P,h.qc=q.Sa,cl(h,R)){if((v=bc(R.width,R.height,G.Oa,G.ba))==0){if(h.Aa=0,A=G.Oa,e((q=h)!=null),A!=null){if(0<(ee=0>(ee=A.Md)?0:100<ee?255:255*ee/100)){for(re=fe=0;4>re;++re)12>(xe=q.pb[re]).lc&&(xe.ia=ee*TA[0>xe.lc?0:xe.lc]>>3),fe|=xe.ia;fe&&(alert("todo:VP8InitRandom"),q.ia=1)}q.Ga=A.Id,100<q.Ga?q.Ga=100:0>q.Ga&&(q.Ga=0)}pc(h,R)||(v=h.a)}}else v=h.a}v==0&&G.Oa!=null&&G.Oa.fd&&(v=Zu(G.ba))}G=v}W=G!=0?null:11>W?Z.f.RGBA.eb:Z.f.kb.y}else W=null;return W};var Iy=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function c(y,S){for(var L="",E=0;E<4;E++)L+=String.fromCharCode(y[S++]);return L}function d(y,S){return(y[S+0]<<0|y[S+1]<<8|y[S+2]<<16)>>>0}function p(y,S){return(y[S+0]<<0|y[S+1]<<8|y[S+2]<<16|y[S+3]<<24)>>>0}new l;var g=[0],m=[0],b=[],x=new l,T=t,w=function(y,S){var L={},E=0,I=!1,k=0,M=0;if(L.frames=[],!function(Y,J,H,se){for(var le=0;le<se;le++)if(Y[J+le]!=H.charCodeAt(le))return!0;return!1}(y,S,"RIFF",4)){var te,V;for(p(y,S+=4),S+=8;S<y.length;){var U=c(y,S),z=p(y,S+=4);S+=4;var $=z+(1&z);switch(U){case"VP8 ":case"VP8L":L.frames[E]===void 0&&(L.frames[E]={}),(O=L.frames[E]).src_off=I?M:S-8,O.src_size=k+z+8,E++,I&&(I=!1,k=0,M=0);break;case"VP8X":(O=L.header={}).feature_flags=y[S];var ne=S+4;O.canvas_width=1+d(y,ne),ne+=3,O.canvas_height=1+d(y,ne),ne+=3;break;case"ALPH":I=!0,k=$+8,M=S-8;break;case"ANIM":(O=L.header).bgcolor=p(y,S),ne=S+4,O.loop_count=(te=y)[(V=ne)+0]<<0|te[V+1]<<8,ne+=2;break;case"ANMF":var we,O;(O=L.frames[E]={}).offset_x=2*d(y,S),S+=3,O.offset_y=2*d(y,S),S+=3,O.width=1+d(y,S),S+=3,O.height=1+d(y,S),S+=3,O.duration=d(y,S),S+=3,we=y[S++],O.dispose=1&we,O.blend=we>>1&1}U!="ANMF"&&(S+=$)}return L}}(T,0);w.response=T,w.rgbaoutput=!0,w.dataurl=!1;var N=w.header?w.header:null,C=w.frames?w.frames:null;if(N){N.loop_counter=N.loop_count,g=[N.canvas_height],m=[N.canvas_width];for(var F=0;F<C.length&&C[F].blend!=0;F++);}var Q=C[0],B=x.WebPDecodeRGBA(T,Q.src_off,Q.src_size,m,g);Q.rgba=B,Q.imgwidth=m[0],Q.imgheight=g[0];for(var j=0;j<m[0]*g[0]*4;j++)b[j]=B[j];return this.width=m,this.height=g,this.data=b,this}(function(t){var e=function(){return typeof rv=="function"},n=function(g,m,b,x){var T=4,w=a;switch(x){case t.image_compression.FAST:T=1,w=s;break;case t.image_compression.MEDIUM:T=6,w=o;break;case t.image_compression.SLOW:T=9,w=l}g=r(g,m,b,w);var N=rv(g,{level:T});return t.__addimage__.arrayBufferToBinaryString(N)},r=function(g,m,b,x){for(var T,w,N,C=g.length/m,F=new Uint8Array(g.length+C),Q=d(),B=0;B<C;B+=1){if(N=B*m,T=g.subarray(N,N+m),x)F.set(x(T,b,w),N+B);else{for(var j,y=Q.length,S=[];j<y;j+=1)S[j]=Q[j](T,b,w);var L=p(S.concat());F.set(S[L],N+B)}w=T}return F},i=function(g){var m=Array.apply([],g);return m.unshift(0),m},s=function(g,m){var b,x=[],T=g.length;x[0]=1;for(var w=0;w<T;w+=1)b=g[w-m]||0,x[w+1]=g[w]-b+256&255;return x},a=function(g,m,b){var x,T=[],w=g.length;T[0]=2;for(var N=0;N<w;N+=1)x=b&&b[N]||0,T[N+1]=g[N]-x+256&255;return T},o=function(g,m,b){var x,T,w=[],N=g.length;w[0]=3;for(var C=0;C<N;C+=1)x=g[C-m]||0,T=b&&b[C]||0,w[C+1]=g[C]+256-(x+T>>>1)&255;return w},l=function(g,m,b){var x,T,w,N,C=[],F=g.length;C[0]=4;for(var Q=0;Q<F;Q+=1)x=g[Q-m]||0,T=b&&b[Q]||0,w=b&&b[Q-m]||0,N=c(x,T,w),C[Q+1]=g[Q]-N+256&255;return C},c=function(g,m,b){if(g===m&&m===b)return g;var x=Math.abs(m-b),T=Math.abs(g-b),w=Math.abs(g+m-b-b);return x<=T&&x<=w?g:T<=w?m:b},d=function(){return[i,s,a,o,l]},p=function(g){var m=g.map(function(b){return b.reduce(function(x,T){return x+Math.abs(T)},0)});return m.indexOf(Math.min.apply(null,m))};t.processPNG=function(g,m,b,x){var T,w,N,C,F,Q,B,j,y,S,L,E,I,k,M,te=this.decode.FLATE_DECODE,V="";if(this.__addimage__.isArrayBuffer(g)&&(g=new Uint8Array(g)),this.__addimage__.isArrayBufferView(g)){if(g=(N=new ND(g)).imgData,w=N.bits,T=N.colorSpace,F=N.colors,[4,6].indexOf(N.colorType)!==-1){if(N.bits===8){y=(j=N.pixelBitlength==32?new Uint32Array(N.decodePixels().buffer):N.pixelBitlength==16?new Uint16Array(N.decodePixels().buffer):new Uint8Array(N.decodePixels().buffer)).length,L=new Uint8Array(y*N.colors),S=new Uint8Array(y);var U,z=N.pixelBitlength-N.bits;for(k=0,M=0;k<y;k++){for(I=j[k],U=0;U<z;)L[M++]=I>>>U&255,U+=N.bits;S[k]=I>>>U&255}}if(N.bits===16){y=(j=new Uint32Array(N.decodePixels().buffer)).length,L=new Uint8Array(y*(32/N.pixelBitlength)*N.colors),S=new Uint8Array(y*(32/N.pixelBitlength)),E=N.colors>1,k=0,M=0;for(var $=0;k<y;)I=j[k++],L[M++]=I>>>0&255,E&&(L[M++]=I>>>16&255,I=j[k++],L[M++]=I>>>0&255),S[$++]=I>>>16&255;w=8}x!==t.image_compression.NONE&&e()?(g=n(L,N.width*N.colors,N.colors,x),B=n(S,N.width,1,x)):(g=L,B=S,te=void 0)}if(N.colorType===3&&(T=this.color_spaces.INDEXED,Q=N.palette,N.transparency.indexed)){var ne=N.transparency.indexed,we=0;for(k=0,y=ne.length;k<y;++k)we+=ne[k];if((we/=255)===y-1&&ne.indexOf(0)!==-1)C=[ne.indexOf(0)];else if(we!==y){for(j=N.decodePixels(),S=new Uint8Array(j.length),k=0,y=j.length;k<y;k++)S[k]=ne[j[k]];B=n(S,N.width,1)}}var O=function(Y){var J;switch(Y){case t.image_compression.FAST:J=11;break;case t.image_compression.MEDIUM:J=13;break;case t.image_compression.SLOW:J=14;break;default:J=12}return J}(x);return te===this.decode.FLATE_DECODE&&(V="/Predictor "+O+" "),V+="/Colors "+F+" /BitsPerComponent "+w+" /Columns "+N.width,(this.__addimage__.isArrayBuffer(g)||this.__addimage__.isArrayBufferView(g))&&(g=this.__addimage__.arrayBufferToBinaryString(g)),(B&&this.__addimage__.isArrayBuffer(B)||this.__addimage__.isArrayBufferView(B))&&(B=this.__addimage__.arrayBufferToBinaryString(B)),{alias:b,data:g,index:m,filter:te,decodeParameters:V,transparency:C,palette:Q,sMask:B,predictor:O,width:N.width,height:N.height,bitsPerComponent:w,colorSpace:T}}}})(gt.API),function(t){t.processGIF89A=function(e,n,r,i){var s=new AD(e),a=s.width,o=s.height,l=[];s.decodeAndBlitFrameRGBA(0,l);var c={data:l,width:a,height:o},d=new S1(100).encode(c,100);return t.processJPEG.call(this,d,n,r,i)},t.processGIF87A=t.processGIF89A}(gt.API),is.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var n=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:i,green:r,blue:n,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},is.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(n){tn.log("bit decode error:"+n)}},is.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),n=e%4;for(t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<e;i++)for(var s=this.datav.getUint8(this.pos++,!0),a=r*this.width*4+8*i*4,o=0;o<8&&8*i+o<this.width;o++){var l=this.palette[s>>7-o&1];this.data[a+4*o]=l.blue,this.data[a+4*o+1]=l.green,this.data[a+4*o+2]=l.red,this.data[a+4*o+3]=255}n!==0&&(this.pos+=4-n)}},is.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<t;i++){var s=this.datav.getUint8(this.pos++,!0),a=r*this.width*4+2*i*4,o=s>>4,l=15&s,c=this.palette[o];if(this.data[a]=c.blue,this.data[a+1]=c.green,this.data[a+2]=c.red,this.data[a+3]=255,2*i+1>=this.width)break;c=this.palette[l],this.data[a+4]=c.blue,this.data[a+4+1]=c.green,this.data[a+4+2]=c.red,this.data[a+4+3]=255}e!==0&&(this.pos+=4-e)}},is.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),s=n*this.width*4+4*r;if(i<this.palette.length){var a=this.palette[i];this.data[s]=a.red,this.data[s+1]=a.green,this.data[s+2]=a.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}t!==0&&(this.pos+=4-t)}},is.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<this.width;i++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(s&e)/e*255|0,o=(s>>5&e)/e*255|0,l=(s>>10&e)/e*255|0,c=s>>15?255:0,d=r*this.width*4+4*i;this.data[d]=l,this.data[d+1]=o,this.data[d+2]=a,this.data[d+3]=c}this.pos+=t}},is.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),n=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,s=0;s<this.width;s++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(a&e)/e*255|0,l=(a>>5&n)/n*255|0,c=(a>>11)/e*255|0,d=i*this.width*4+4*s;this.data[d]=c,this.data[d+1]=l,this.data[d+2]=o,this.data[d+3]=255}this.pos+=t}},is.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=e*this.width*4+4*n;this.data[a]=s,this.data[a+1]=i,this.data[a+2]=r,this.data[a+3]=255}this.pos+=this.width%4}},is.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*n;this.data[o]=s,this.data[o+1]=i,this.data[o+2]=r,this.data[o+3]=a}},is.prototype.getData=function(){return this.data},function(t){t.processBMP=function(e,n,r,i){var s=new is(e,!1),a=s.width,o=s.height,l={data:s.getData(),width:a,height:o},c=new S1(100).encode(l,100);return t.processJPEG.call(this,c,n,r,i)}}(gt.API),G_.prototype.getData=function(){return this.data},function(t){t.processWEBP=function(e,n,r,i){var s=new G_(e),a=s.width,o=s.height,l={data:s.getData(),width:a,height:o},c=new S1(100).encode(l,100);return t.processJPEG.call(this,c,n,r,i)}}(gt.API),gt.API.processRGBA=function(t,e,n){for(var r=t.data,i=r.length,s=new Uint8Array(i/4*3),a=new Uint8Array(i/4),o=0,l=0,c=0;c<i;c+=4){var d=r[c],p=r[c+1],g=r[c+2],m=r[c+3];s[o++]=d,s[o++]=p,s[o++]=g,a[l++]=m}var b=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(a),data:b,index:e,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},gt.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Oc=gt.API,zf=Oc.getCharWidthsArray=function(t,e){var n,r,i=(e=e||{}).font||this.internal.getFont(),s=e.fontSize||this.internal.getFontSize(),a=e.charSpace||this.internal.getCharSpace(),o=e.widths?e.widths:i.metadata.Unicode.widths,l=o.fof?o.fof:1,c=e.kerning?e.kerning:i.metadata.Unicode.kerning,d=c.fof?c.fof:1,p=e.doKerning!==!1,g=0,m=t.length,b=0,x=o[0]||l,T=[];for(n=0;n<m;n++)r=t.charCodeAt(n),typeof i.metadata.widthOfString=="function"?T.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(r))+a*(1e3/s)||0)/1e3):(g=p&&Gt(c[r])==="object"&&!isNaN(parseInt(c[r][b],10))?c[r][b]/d:0,T.push((o[r]||x)/l+g)),b=r;return T},z_=Oc.getStringUnitWidth=function(t,e){var n=(e=e||{}).fontSize||this.internal.getFontSize(),r=e.font||this.internal.getFont(),i=e.charSpace||this.internal.getCharSpace();return Oc.processArabic&&(t=Oc.processArabic(t)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(t,n,i)/n:zf.apply(this,arguments).reduce(function(s,a){return s+a},0)},$_=function(t,e,n,r){for(var i=[],s=0,a=t.length,o=0;s!==a&&o+e[s]<n;)o+=e[s],s++;i.push(t.slice(0,s));var l=s;for(o=0;s!==a;)o+e[s]>r&&(i.push(t.slice(l,s)),o=0,l=s),o+=e[s],s++;return l!==s&&i.push(t.slice(l,s)),i},H_=function(t,e,n){n||(n={});var r,i,s,a,o,l,c,d=[],p=[d],g=n.textIndent||0,m=0,b=0,x=t.split(" "),T=zf.apply(this,[" ",n])[0];if(l=n.lineIndent===-1?x[0].length+2:n.lineIndent||0){var w=Array(l).join(" "),N=[];x.map(function(F){(F=F.split(/\s*\n/)).length>1?N=N.concat(F.map(function(Q,B){return(B&&Q.length?`
`:"")+Q})):N.push(F[0])}),x=N,l=z_.apply(this,[w,n])}for(s=0,a=x.length;s<a;s++){var C=0;if(r=x[s],l&&r[0]==`
`&&(r=r.substr(1),C=1),g+m+(b=(i=zf.apply(this,[r,n])).reduce(function(F,Q){return F+Q},0))>e||C){if(b>e){for(o=$_.apply(this,[r,i,e-(g+m),e]),d.push(o.shift()),d=[o.pop()];o.length;)p.push([o.shift()]);b=i.slice(r.length-(d[0]?d[0].length:0)).reduce(function(F,Q){return F+Q},0)}else d=[r];p.push(d),g=b+l,m=T}else d.push(r),g+=m+b,m=T}return c=l?function(F,Q){return(Q?w:"")+F.join(" ")}:function(F){return F.join(" ")},p.map(c)},Oc.splitTextToSize=function(t,e,n){var r,i=(n=n||{}).fontSize||this.internal.getFontSize(),s=(function(d){if(d.widths&&d.kerning)return{widths:d.widths,kerning:d.kerning};var p=this.internal.getFont(d.fontName,d.fontStyle);return p.metadata.Unicode?{widths:p.metadata.Unicode.widths||{0:1},kerning:p.metadata.Unicode.kerning||{}}:{font:p.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,n);r=Array.isArray(t)?t:String(t).split(/\r?\n/);var a=1*this.internal.scaleFactor*e/i;s.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/i:0,s.lineIndent=n.lineIndent;var o,l,c=[];for(o=0,l=r.length;o<l;o++)c=c.concat(H_.apply(this,[r[o],a,s]));return c},function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",n={},r={},i=0;i<e.length;i++)n[e[i]]="0123456789abcdef"[i],r["0123456789abcdef"[i]]=e[i];var s=function(p){return"0x"+parseInt(p,10).toString(16)},a=t.__fontmetrics__.compress=function(p){var g,m,b,x,T=["{"];for(var w in p){if(g=p[w],isNaN(parseInt(w,10))?m="'"+w+"'":(w=parseInt(w,10),m=(m=s(w).slice(2)).slice(0,-1)+r[m.slice(-1)]),typeof g=="number")g<0?(b=s(g).slice(3),x="-"):(b=s(g).slice(2),x=""),b=x+b.slice(0,-1)+r[b.slice(-1)];else{if(Gt(g)!=="object")throw new Error("Don't know what to do with value type "+Gt(g)+".");b=a(g)}T.push(m+b)}return T.push("}"),T.join("")},o=t.__fontmetrics__.uncompress=function(p){if(typeof p!="string")throw new Error("Invalid argument passed to uncompress.");for(var g,m,b,x,T={},w=1,N=T,C=[],F="",Q="",B=p.length-1,j=1;j<B;j+=1)(x=p[j])=="'"?g?(b=g.join(""),g=void 0):g=[]:g?g.push(x):x=="{"?(C.push([N,b]),N={},b=void 0):x=="}"?((m=C.pop())[0][m[1]]=N,b=void 0,N=m[0]):x=="-"?w=-1:b===void 0?n.hasOwnProperty(x)?(F+=n[x],b=parseInt(F,16)*w,w=1,F=""):F+=x:n.hasOwnProperty(x)?(Q+=n[x],N[b]=parseInt(Q,16)*w,w=1,b=void 0,Q=""):Q+=x;return T},l={codePages:["WinAnsiEncoding"],WinAnsiEncoding:o("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},c={Unicode:{Courier:l,"Courier-Bold":l,"Courier-BoldOblique":l,"Courier-Oblique":l,Helvetica:l,"Helvetica-Bold":l,"Helvetica-BoldOblique":l,"Helvetica-Oblique":l,"Times-Roman":l,"Times-Bold":l,"Times-BoldItalic":l,"Times-Italic":l}},d={Unicode:{"Courier-Oblique":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":o("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":o("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":o("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:o("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:o("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":o("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:o("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":o("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":o("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":o("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(p){var g=p.font,m=d.Unicode[g.postScriptName];m&&(g.metadata.Unicode={},g.metadata.Unicode.widths=m.widths,g.metadata.Unicode.kerning=m.kerning);var b=c.Unicode[g.postScriptName];b&&(g.metadata.Unicode.encoding=b,g.encoding=b.codePages[0])}])}(gt.API),function(t){var e=function(n){for(var r=n.length,i=new Uint8Array(r),s=0;s<r;s++)i[s]=n.charCodeAt(s);return i};t.API.events.push(["addFont",function(n){var r=void 0,i=n.font,s=n.instance;if(!i.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(r=s.existsFileInVFS(i.postScriptName)===!1?s.loadFile(i.postScriptName):s.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(a,o){o=/^\x00\x01\x00\x00/.test(o)?e(o):e(Yh(o)),a.metadata=t.API.TTFFont.open(o),a.metadata.Unicode=a.metadata.Unicode||{encoding:{},kerning:{},widths:[]},a.metadata.glyIdsUsed=[0]})(i,r)}}])}(gt),function(t){function e(){return(vt.canvg?Promise.resolve(vt.canvg):X0(()=>import("./index.es-BCsotTh9.js"),[])).catch(function(n){return Promise.reject(new Error("Could not load canvg: "+n))}).then(function(n){return n.default?n.default:n})}gt.API.addSvgAsImage=function(n,r,i,s,a,o,l,c){if(isNaN(r)||isNaN(i))throw tn.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(s)||isNaN(a))throw tn.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var d=document.createElement("canvas");d.width=s,d.height=a;var p=d.getContext("2d");p.fillStyle="#fff",p.fillRect(0,0,d.width,d.height);var g={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},m=this;return e().then(function(b){return b.fromString(p,n,g)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(b){return b.render(g)}).then(function(){m.addImage(d.toDataURL("image/jpeg",1),r,i,s,a,l,c)})}}(),gt.API.putTotalPages=function(t){var e,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),n=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var i=0;i<this.internal.pages[r].length;i++)this.internal.pages[r][i]=this.internal.pages[r][i].replace(e,n);return this},gt.API.viewerPreferences=function(t,e){var n;t=t||{},e=e||!1;var r,i,s,a={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},o=Object.keys(a),l=[],c=0,d=0,p=0;function g(b,x){var T,w=!1;for(T=0;T<b.length;T+=1)b[T]===x&&(w=!0);return w}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(a)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,t==="reset"||e===!0){var m=o.length;for(p=0;p<m;p+=1)n[o[p]].value=n[o[p]].defaultValue,n[o[p]].explicitSet=!1}if(Gt(t)==="object"){for(i in t)if(s=t[i],g(o,i)&&s!==void 0){if(n[i].type==="boolean"&&typeof s=="boolean")n[i].value=s;else if(n[i].type==="name"&&g(n[i].valueSet,s))n[i].value=s;else if(n[i].type==="integer"&&Number.isInteger(s))n[i].value=s;else if(n[i].type==="array"){for(c=0;c<s.length;c+=1)if(r=!0,s[c].length===1&&typeof s[c][0]=="number")l.push(String(s[c]-1));else if(s[c].length>1){for(d=0;d<s[c].length;d+=1)typeof s[c][d]!="number"&&(r=!1);r===!0&&l.push([s[c][0]-1,s[c][1]-1].join(" "))}n[i].value="["+l.join(" ")+"]"}else n[i].value=n[i].defaultValue;n[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var b,x=[];for(b in n)n[b].explicitSet===!0&&(n[b].type==="name"?x.push("/"+b+" /"+n[b].value):x.push("/"+b+" "+n[b].value));x.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+x.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},function(t){var e=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(r)),a=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),o=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),l=unescape(encodeURIComponent("</x:xmpmeta>")),c=s.length+a.length+o.length+i.length+l.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+c+" >>"),this.internal.write("stream"),this.internal.write(i+s+a+o+l),this.internal.write("endstream"),this.internal.write("endobj")},n=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(r,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",n),this.internal.events.subscribe("postPutResources",e)),this}}(gt.API),function(t){var e=t.API,n=e.pdfEscape16=function(s,a){for(var o,l=a.metadata.Unicode.widths,c=["","0","00","000","0000"],d=[""],p=0,g=s.length;p<g;++p){if(o=a.metadata.characterToGlyph(s.charCodeAt(p)),a.metadata.glyIdsUsed.push(o),a.metadata.toUnicode[o]=s.charCodeAt(p),l.indexOf(o)==-1&&(l.push(o),l.push([parseInt(a.metadata.widthOfGlyph(o),10)])),o=="0")return d.join("");o=o.toString(16),d.push(c[4-o.length],o)}return d.join("")},r=function(s){var a,o,l,c,d,p,g;for(d=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,l=[],p=0,g=(o=Object.keys(s).sort(function(m,b){return m-b})).length;p<g;p++)a=o[p],l.length>=100&&(d+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar`,l=[]),s[a]!==void 0&&s[a]!==null&&typeof s[a].toString=="function"&&(c=("0000"+s[a].toString(16)).slice(-4),a=("0000"+(+a).toString(16)).slice(-4),l.push("<"+a+"><"+c+">"));return l.length&&(d+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar
`),d+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(s){(function(a){var o=a.font,l=a.out,c=a.newObject,d=a.putStream;if(o.metadata instanceof t.API.TTFFont&&o.encoding==="Identity-H"){for(var p=o.metadata.Unicode.widths,g=o.metadata.subset.encode(o.metadata.glyIdsUsed,1),m="",b=0;b<g.length;b++)m+=String.fromCharCode(g[b]);var x=c();d({data:m,addLength1:!0,objectId:x}),l("endobj");var T=c();d({data:r(o.metadata.toUnicode),addLength1:!0,objectId:T}),l("endobj");var w=c();l("<<"),l("/Type /FontDescriptor"),l("/FontName /"+Kc(o.fontName)),l("/FontFile2 "+x+" 0 R"),l("/FontBBox "+t.API.PDFObject.convert(o.metadata.bbox)),l("/Flags "+o.metadata.flags),l("/StemV "+o.metadata.stemV),l("/ItalicAngle "+o.metadata.italicAngle),l("/Ascent "+o.metadata.ascender),l("/Descent "+o.metadata.decender),l("/CapHeight "+o.metadata.capHeight),l(">>"),l("endobj");var N=c();l("<<"),l("/Type /Font"),l("/BaseFont /"+Kc(o.fontName)),l("/FontDescriptor "+w+" 0 R"),l("/W "+t.API.PDFObject.convert(p)),l("/CIDToGIDMap /Identity"),l("/DW 1000"),l("/Subtype /CIDFontType2"),l("/CIDSystemInfo"),l("<<"),l("/Supplement 0"),l("/Registry (Adobe)"),l("/Ordering ("+o.encoding+")"),l(">>"),l(">>"),l("endobj"),o.objectNumber=c(),l("<<"),l("/Type /Font"),l("/Subtype /Type0"),l("/ToUnicode "+T+" 0 R"),l("/BaseFont /"+Kc(o.fontName)),l("/Encoding /"+o.encoding),l("/DescendantFonts ["+N+" 0 R]"),l(">>"),l("endobj"),o.isAlreadyPutted=!0}})(s)}]),e.events.push(["putFont",function(s){(function(a){var o=a.font,l=a.out,c=a.newObject,d=a.putStream;if(o.metadata instanceof t.API.TTFFont&&o.encoding==="WinAnsiEncoding"){for(var p=o.metadata.rawData,g="",m=0;m<p.length;m++)g+=String.fromCharCode(p[m]);var b=c();d({data:g,addLength1:!0,objectId:b}),l("endobj");var x=c();d({data:r(o.metadata.toUnicode),addLength1:!0,objectId:x}),l("endobj");var T=c();l("<<"),l("/Descent "+o.metadata.decender),l("/CapHeight "+o.metadata.capHeight),l("/StemV "+o.metadata.stemV),l("/Type /FontDescriptor"),l("/FontFile2 "+b+" 0 R"),l("/Flags 96"),l("/FontBBox "+t.API.PDFObject.convert(o.metadata.bbox)),l("/FontName /"+Kc(o.fontName)),l("/ItalicAngle "+o.metadata.italicAngle),l("/Ascent "+o.metadata.ascender),l(">>"),l("endobj"),o.objectNumber=c();for(var w=0;w<o.metadata.hmtx.widths.length;w++)o.metadata.hmtx.widths[w]=parseInt(o.metadata.hmtx.widths[w]*(1e3/o.metadata.head.unitsPerEm));l("<</Subtype/TrueType/Type/Font/ToUnicode "+x+" 0 R/BaseFont/"+Kc(o.fontName)+"/FontDescriptor "+T+" 0 R/Encoding/"+o.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(o.metadata.hmtx.widths)+">>"),l("endobj"),o.isAlreadyPutted=!0}})(s)}]);var i=function(s){var a,o=s.text||"",l=s.x,c=s.y,d=s.options||{},p=s.mutex||{},g=p.pdfEscape,m=p.activeFontKey,b=p.fonts,x=m,T="",w=0,N="",C=b[x].encoding;if(b[x].encoding!=="Identity-H")return{text:o,x:l,y:c,options:d,mutex:p};for(N=o,x=m,Array.isArray(o)&&(N=o[0]),w=0;w<N.length;w+=1)b[x].metadata.hasOwnProperty("cmap")&&(a=b[x].metadata.cmap.unicode.codeMap[N[w].charCodeAt(0)]),a||N[w].charCodeAt(0)<256&&b[x].metadata.hasOwnProperty("Unicode")?T+=N[w]:T+="";var F="";return parseInt(x.slice(1))<14||C==="WinAnsiEncoding"?F=g(T,x).split("").map(function(Q){return Q.charCodeAt(0).toString(16)}).join(""):C==="Identity-H"&&(F=n(T,b[x])),p.isHex=!0,{text:F,x:l,y:c,options:d,mutex:p}};e.events.push(["postProcessText",function(s){var a=s.text||"",o=[],l={text:a,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(a)){var c=0;for(c=0;c<a.length;c+=1)Array.isArray(a[c])&&a[c].length===3?o.push([i(Object.assign({},l,{text:a[c][0]})).text,a[c][1],a[c][2]]):o.push(i(Object.assign({},l,{text:a[c]})).text);s.text=o}else s.text=i(Object.assign({},l,{text:a})).text}])}(gt),function(t){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0},t.addFileToVFS=function(n,r){return e.call(this),this.internal.vFS[n]=r,this},t.getFileFromVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0?this.internal.vFS[n]:null}}(gt.API),function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(r){var i,s,a,o,l,c,d,p=e,g=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],m=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],b={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},x={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},T=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],w=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),N=!1,C=0;this.__bidiEngine__={};var F=function(E){var I=E.charCodeAt(),k=I>>8,M=x[k];return M!==void 0?p[256*M+(255&I)]:k===252||k===253?"AL":w.test(k)?"L":k===8?"R":"N"},Q=function(E){for(var I,k=0;k<E.length;k++){if((I=F(E.charAt(k)))==="L")return!1;if(I==="R")return!0}return!1},B=function(E,I,k,M){var te,V,U,z,$=I[M];switch($){case"L":case"R":N=!1;break;case"N":case"AN":break;case"EN":N&&($="AN");break;case"AL":N=!0,$="R";break;case"WS":$="N";break;case"CS":M<1||M+1>=I.length||(te=k[M-1])!=="EN"&&te!=="AN"||(V=I[M+1])!=="EN"&&V!=="AN"?$="N":N&&(V="AN"),$=V===te?V:"N";break;case"ES":$=(te=M>0?k[M-1]:"B")==="EN"&&M+1<I.length&&I[M+1]==="EN"?"EN":"N";break;case"ET":if(M>0&&k[M-1]==="EN"){$="EN";break}if(N){$="N";break}for(U=M+1,z=I.length;U<z&&I[U]==="ET";)U++;$=U<z&&I[U]==="EN"?"EN":"N";break;case"NSM":if(a&&!o){for(z=I.length,U=M+1;U<z&&I[U]==="NSM";)U++;if(U<z){var ne=E[M],we=ne>=1425&&ne<=2303||ne===64286;if(te=I[U],we&&(te==="R"||te==="AL")){$="R";break}}}$=M<1||(te=I[M-1])==="B"?"N":k[M-1];break;case"B":N=!1,i=!0,$=C;break;case"S":s=!0,$="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":N=!1;break;case"BN":$="N"}return $},j=function(E,I,k){var M=E.split("");return k&&y(M,k,{hiLevel:C}),M.reverse(),I&&I.reverse(),M.join("")},y=function(E,I,k){var M,te,V,U,z,$=-1,ne=E.length,we=0,O=[],Y=C?m:g,J=[];for(N=!1,i=!1,s=!1,te=0;te<ne;te++)J[te]=F(E[te]);for(V=0;V<ne;V++){if(z=we,O[V]=B(E,J,O,V),M=240&(we=Y[z][b[O[V]]]),we&=15,I[V]=U=Y[we][5],M>0)if(M===16){for(te=$;te<V;te++)I[te]=1;$=-1}else $=-1;if(Y[we][6])$===-1&&($=V);else if($>-1){for(te=$;te<V;te++)I[te]=U;$=-1}J[V]==="B"&&(I[V]=0),k.hiLevel|=U}s&&function(H,se,le){for(var ue=0;ue<le;ue++)if(H[ue]==="S"){se[ue]=C;for(var de=ue-1;de>=0&&H[de]==="WS";de--)se[de]=C}}(J,I,ne)},S=function(E,I,k,M,te){if(!(te.hiLevel<E)){if(E===1&&C===1&&!i)return I.reverse(),void(k&&k.reverse());for(var V,U,z,$,ne=I.length,we=0;we<ne;){if(M[we]>=E){for(z=we+1;z<ne&&M[z]>=E;)z++;for($=we,U=z-1;$<U;$++,U--)V=I[$],I[$]=I[U],I[U]=V,k&&(V=k[$],k[$]=k[U],k[U]=V);we=z}we++}}},L=function(E,I,k){var M=E.split(""),te={hiLevel:C};return k||(k=[]),y(M,k,te),function(V,U,z){if(z.hiLevel!==0&&d)for(var $,ne=0;ne<V.length;ne++)U[ne]===1&&($=T.indexOf(V[ne]))>=0&&(V[ne]=T[$+1])}(M,k,te),S(2,M,I,k,te),S(1,M,I,k,te),M.join("")};return this.__bidiEngine__.doBidiReorder=function(E,I,k){if(function(te,V){if(V)for(var U=0;U<te.length;U++)V[U]=U;o===void 0&&(o=Q(te)),c===void 0&&(c=Q(te))}(E,I),a||!l||c)if(a&&l&&o^c)C=o?1:0,E=j(E,I,k);else if(!a&&l&&c)C=o?1:0,E=L(E,I,k),E=j(E,I);else if(!a||o||l||c){if(a&&!l&&o^c)E=j(E,I),o?(C=0,E=L(E,I,k)):(C=1,E=L(E,I,k),E=j(E,I));else if(a&&o&&!l&&c)C=1,E=L(E,I,k),E=j(E,I);else if(!a&&!l&&o^c){var M=d;o?(C=1,E=L(E,I,k),C=0,d=!1,E=L(E,I,k),d=M):(C=0,E=L(E,I,k),E=j(E,I),C=1,d=!1,E=L(E,I,k),d=M,E=j(E,I))}}else C=0,E=L(E,I,k);else C=o?1:0,E=L(E,I,k);return E},this.__bidiEngine__.setOptions=function(E){E&&(a=E.isInputVisual,l=E.isOutputVisual,o=E.isInputRtl,c=E.isOutputRtl,d=E.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(r){var i=r.text,s=(r.x,r.y,r.options||{}),a=(r.mutex,s.lang,[]);if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,n.setOptions(s),Object.prototype.toString.call(i)==="[object Array]"){var o=0;for(a=[],o=0;o<i.length;o+=1)Object.prototype.toString.call(i[o])==="[object Array]"?a.push([n.doBidiReorder(i[o][0]),i[o][1],i[o][2]]):a.push([n.doBidiReorder(i[o])]);r.text=a}else r.text=n.doBidiReorder(i);n.setOptions({isInputVisual:!0})}])}(gt),gt.API.TTFFont=function(){function t(e){var n;if(this.rawData=e,n=this.contents=new el(e),this.contents.pos=4,n.readString(4)==="ttcf")throw new Error("TTCF not supported.");n.pos=0,this.parse(),this.subset=new UD(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new ED(this.contents),this.head=new TD(this),this.name=new LD(this),this.cmap=new LN(this),this.toUnicode={},this.hhea=new ID(this),this.maxp=new RD(this),this.hmtx=new DD(this),this.post=new CD(this),this.os2=new PD(this),this.loca=new VD(this),this.glyf=new FD(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var e,n,r,i,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var a,o,l,c;for(c=[],a=0,o=(l=this.bbox).length;a<o;a++)e=l[a],c.push(Math.round(e*this.scaleFactor));return c}).call(this),this.stemV=0,this.post.exists?(r=255&(i=this.post.italic_angle),32768&(n=i>>16)&&(n=-(1+(65535^n))),this.italicAngle=+(n+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(e){var n;return((n=this.cmap.unicode)!=null?n.codeMap[e]:void 0)||0},t.prototype.widthOfGlyph=function(e){var n;return n=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*n},t.prototype.widthOfString=function(e,n,r){var i,s,a,o;for(a=0,s=0,o=(e=""+e).length;0<=o?s<o:s>o;s=0<=o?++s:--s)i=e.charCodeAt(s),a+=this.widthOfGlyph(this.characterToGlyph(i))+r*(1e3/n)||0;return a*(n/1e3)},t.prototype.lineHeight=function(e,n){var r;return n==null&&(n=!1),r=n?this.lineGap:0,(this.ascender+r-this.decender)/1e3*e},t}();var ys,el=function(){function t(e){this.data=e??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(e){return this.data[this.pos++]=e},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},t.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},t.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},t.prototype.readString=function(e){var n,r;for(r=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)r[n]=String.fromCharCode(this.readByte());return r.join("")},t.prototype.writeString=function(e){var n,r,i;for(i=[],n=0,r=e.length;0<=r?n<r:n>r;n=0<=r?++n:--n)i.push(this.writeByte(e.charCodeAt(n)));return i},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(e){return this.writeInt16(e)},t.prototype.readLongLong=function(){var e,n,r,i,s,a,o,l;return e=this.readByte(),n=this.readByte(),r=this.readByte(),i=this.readByte(),s=this.readByte(),a=this.readByte(),o=this.readByte(),l=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^n)+1099511627776*(255^r)+4294967296*(255^i)+16777216*(255^s)+65536*(255^a)+256*(255^o)+(255^l)+1):72057594037927940*e+281474976710656*n+1099511627776*r+4294967296*i+16777216*s+65536*a+256*o+l},t.prototype.writeLongLong=function(e){var n,r;return n=Math.floor(e/4294967296),r=4294967295&e,this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(e){return this.writeInt32(e)},t.prototype.read=function(e){var n,r;for(n=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)n.push(this.readByte());return n},t.prototype.write=function(e){var n,r,i,s;for(s=[],r=0,i=e.length;r<i;r++)n=e[r],s.push(this.writeByte(n));return s},t}(),ED=function(){var t;function e(n){var r,i,s;for(this.scalarType=n.readInt(),this.tableCount=n.readShort(),this.searchRange=n.readShort(),this.entrySelector=n.readShort(),this.rangeShift=n.readShort(),this.tables={},i=0,s=this.tableCount;0<=s?i<s:i>s;i=0<=s?++i:--i)r={tag:n.readString(4),checksum:n.readInt(),offset:n.readInt(),length:n.readInt()},this.tables[r.tag]=r}return e.prototype.encode=function(n){var r,i,s,a,o,l,c,d,p,g,m,b,x;for(x in m=Object.keys(n).length,l=Math.log(2),p=16*Math.floor(Math.log(m)/l),a=Math.floor(p/l),d=16*m-p,(i=new el).writeInt(this.scalarType),i.writeShort(m),i.writeShort(p),i.writeShort(a),i.writeShort(d),s=16*m,c=i.pos+s,o=null,b=[],n)for(g=n[x],i.writeString(x),i.writeInt(t(g)),i.writeInt(c),i.writeInt(g.length),b=b.concat(g),x==="head"&&(o=c),c+=g.length;c%4;)b.push(0),c++;return i.write(b),r=2981146554-t(i.data),i.pos=o+8,i.writeUInt32(r),i.data},t=function(n){var r,i,s,a;for(n=RN.call(n);n.length%4;)n.push(0);for(s=new el(n),i=0,r=0,a=n.length;r<a;r=r+=4)i+=s.readUInt32();return 4294967295&i},e}(),kD={}.hasOwnProperty,Ys=function(t,e){for(var n in e)kD.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};ys=function(){function t(e){var n;this.file=e,n=this.file.directory.tables[this.tag],this.exists=!!n,n&&(this.offset=n.offset,this.length=n.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t}();var TD=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Ys(e,ys),e.prototype.tag="head",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.revision=n.readInt(),this.checkSumAdjustment=n.readInt(),this.magicNumber=n.readInt(),this.flags=n.readShort(),this.unitsPerEm=n.readShort(),this.created=n.readLongLong(),this.modified=n.readLongLong(),this.xMin=n.readShort(),this.yMin=n.readShort(),this.xMax=n.readShort(),this.yMax=n.readShort(),this.macStyle=n.readShort(),this.lowestRecPPEM=n.readShort(),this.fontDirectionHint=n.readShort(),this.indexToLocFormat=n.readShort(),this.glyphDataFormat=n.readShort()},e.prototype.encode=function(n){var r;return(r=new el).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(n),r.writeShort(this.glyphDataFormat),r.data},e}(),Q_=function(){function t(e,n){var r,i,s,a,o,l,c,d,p,g,m,b,x,T,w,N,C;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=n+e.readInt(),p=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(l=0;l<256;++l)this.codeMap[l]=e.readByte();break;case 4:for(m=e.readUInt16(),g=m/2,e.pos+=6,s=function(){var F,Q;for(Q=[],l=F=0;0<=g?F<g:F>g;l=0<=g?++F:--F)Q.push(e.readUInt16());return Q}(),e.pos+=2,x=function(){var F,Q;for(Q=[],l=F=0;0<=g?F<g:F>g;l=0<=g?++F:--F)Q.push(e.readUInt16());return Q}(),c=function(){var F,Q;for(Q=[],l=F=0;0<=g?F<g:F>g;l=0<=g?++F:--F)Q.push(e.readUInt16());return Q}(),d=function(){var F,Q;for(Q=[],l=F=0;0<=g?F<g:F>g;l=0<=g?++F:--F)Q.push(e.readUInt16());return Q}(),i=(this.length-e.pos+this.offset)/2,o=function(){var F,Q;for(Q=[],l=F=0;0<=i?F<i:F>i;l=0<=i?++F:--F)Q.push(e.readUInt16());return Q}(),l=w=0,C=s.length;w<C;l=++w)for(T=s[l],r=N=b=x[l];b<=T?N<=T:N>=T;r=b<=T?++N:--N)d[l]===0?a=r+c[l]:(a=o[d[l]/2+(r-b)-(g-l)]||0)!==0&&(a+=c[l]),this.codeMap[r]=65535&a}e.pos=p}return t.encode=function(e,n){var r,i,s,a,o,l,c,d,p,g,m,b,x,T,w,N,C,F,Q,B,j,y,S,L,E,I,k,M,te,V,U,z,$,ne,we,O,Y,J,H,se,le,ue,de,Ae,Te,Re;switch(M=new el,a=Object.keys(e).sort(function(Be,Xe){return Be-Xe}),n){case"macroman":for(x=0,T=function(){var Be=[];for(b=0;b<256;++b)Be.push(0);return Be}(),N={0:0},s={},te=0,$=a.length;te<$;te++)N[de=e[i=a[te]]]==null&&(N[de]=++x),s[i]={old:e[i],new:N[e[i]]},T[i]=N[e[i]];return M.writeUInt16(1),M.writeUInt16(0),M.writeUInt32(12),M.writeUInt16(0),M.writeUInt16(262),M.writeUInt16(0),M.write(T),{charMap:s,subtable:M.data,maxGlyphID:x+1};case"unicode":for(I=[],p=[],C=0,N={},r={},w=c=null,V=0,ne=a.length;V<ne;V++)N[Q=e[i=a[V]]]==null&&(N[Q]=++C),r[i]={old:Q,new:N[Q]},o=N[Q]-i,w!=null&&o===c||(w&&p.push(w),I.push(i),c=o),w=i;for(w&&p.push(w),p.push(65535),I.push(65535),L=2*(S=I.length),y=2*Math.pow(Math.log(S)/Math.LN2,2),g=Math.log(y/2)/Math.LN2,j=2*S-y,l=[],B=[],m=[],b=U=0,we=I.length;U<we;b=++U){if(E=I[b],d=p[b],E===65535){l.push(0),B.push(0);break}if(E-(k=r[E].new)>=32768)for(l.push(0),B.push(2*(m.length+S-b)),i=z=E;E<=d?z<=d:z>=d;i=E<=d?++z:--z)m.push(r[i].new);else l.push(k-E),B.push(0)}for(M.writeUInt16(3),M.writeUInt16(1),M.writeUInt32(12),M.writeUInt16(4),M.writeUInt16(16+8*S+2*m.length),M.writeUInt16(0),M.writeUInt16(L),M.writeUInt16(y),M.writeUInt16(g),M.writeUInt16(j),le=0,O=p.length;le<O;le++)i=p[le],M.writeUInt16(i);for(M.writeUInt16(0),ue=0,Y=I.length;ue<Y;ue++)i=I[ue],M.writeUInt16(i);for(Ae=0,J=l.length;Ae<J;Ae++)o=l[Ae],M.writeUInt16(o);for(Te=0,H=B.length;Te<H;Te++)F=B[Te],M.writeUInt16(F);for(Re=0,se=m.length;Re<se;Re++)x=m[Re],M.writeUInt16(x);return{charMap:r,subtable:M.data,maxGlyphID:C+1}}},t}(),LN=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Ys(e,ys),e.prototype.tag="cmap",e.prototype.parse=function(n){var r,i,s;for(n.pos=this.offset,this.version=n.readUInt16(),s=n.readUInt16(),this.tables=[],this.unicode=null,i=0;0<=s?i<s:i>s;i=0<=s?++i:--i)r=new Q_(n,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},e.encode=function(n,r){var i,s;return r==null&&(r="macroman"),i=Q_.encode(n,r),(s=new el).writeUInt16(0),s.writeUInt16(1),i.table=s.data.concat(i.subtable),i},e}(),ID=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Ys(e,ys),e.prototype.tag="hhea",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.ascender=n.readShort(),this.decender=n.readShort(),this.lineGap=n.readShort(),this.advanceWidthMax=n.readShort(),this.minLeftSideBearing=n.readShort(),this.minRightSideBearing=n.readShort(),this.xMaxExtent=n.readShort(),this.caretSlopeRise=n.readShort(),this.caretSlopeRun=n.readShort(),this.caretOffset=n.readShort(),n.pos+=8,this.metricDataFormat=n.readShort(),this.numberOfMetrics=n.readUInt16()},e}(),PD=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Ys(e,ys),e.prototype.tag="OS/2",e.prototype.parse=function(n){if(n.pos=this.offset,this.version=n.readUInt16(),this.averageCharWidth=n.readShort(),this.weightClass=n.readUInt16(),this.widthClass=n.readUInt16(),this.type=n.readShort(),this.ySubscriptXSize=n.readShort(),this.ySubscriptYSize=n.readShort(),this.ySubscriptXOffset=n.readShort(),this.ySubscriptYOffset=n.readShort(),this.ySuperscriptXSize=n.readShort(),this.ySuperscriptYSize=n.readShort(),this.ySuperscriptXOffset=n.readShort(),this.ySuperscriptYOffset=n.readShort(),this.yStrikeoutSize=n.readShort(),this.yStrikeoutPosition=n.readShort(),this.familyClass=n.readShort(),this.panose=function(){var r,i;for(i=[],r=0;r<10;++r)i.push(n.readByte());return i}(),this.charRange=function(){var r,i;for(i=[],r=0;r<4;++r)i.push(n.readInt());return i}(),this.vendorID=n.readString(4),this.selection=n.readShort(),this.firstCharIndex=n.readShort(),this.lastCharIndex=n.readShort(),this.version>0&&(this.ascent=n.readShort(),this.descent=n.readShort(),this.lineGap=n.readShort(),this.winAscent=n.readShort(),this.winDescent=n.readShort(),this.codePageRange=function(){var r,i;for(i=[],r=0;r<2;r=++r)i.push(n.readInt());return i}(),this.version>1))return this.xHeight=n.readShort(),this.capHeight=n.readShort(),this.defaultChar=n.readShort(),this.breakChar=n.readShort(),this.maxContext=n.readShort()},e}(),CD=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Ys(e,ys),e.prototype.tag="post",e.prototype.parse=function(n){var r,i,s;switch(n.pos=this.offset,this.format=n.readInt(),this.italicAngle=n.readInt(),this.underlinePosition=n.readShort(),this.underlineThickness=n.readShort(),this.isFixedPitch=n.readInt(),this.minMemType42=n.readInt(),this.maxMemType42=n.readInt(),this.minMemType1=n.readInt(),this.maxMemType1=n.readInt(),this.format){case 65536:break;case 131072:var a;for(i=n.readUInt16(),this.glyphNameIndex=[],a=0;0<=i?a<i:a>i;a=0<=i?++a:--a)this.glyphNameIndex.push(n.readUInt16());for(this.names=[],s=[];n.pos<this.offset+this.length;)r=n.readByte(),s.push(this.names.push(n.readString(r)));return s;case 151552:return i=n.readUInt16(),this.offsets=n.read(i);case 196608:break;case 262144:return this.map=(function(){var o,l,c;for(c=[],a=o=0,l=this.file.maxp.numGlyphs;0<=l?o<l:o>l;a=0<=l?++o:--o)c.push(n.readUInt32());return c}).call(this)}},e}(),jD=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},LD=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Ys(e,ys),e.prototype.tag="name",e.prototype.parse=function(n){var r,i,s,a,o,l,c,d,p,g,m;for(n.pos=this.offset,n.readShort(),r=n.readShort(),l=n.readShort(),i=[],a=0;0<=r?a<r:a>r;a=0<=r?++a:--a)i.push({platformID:n.readShort(),encodingID:n.readShort(),languageID:n.readShort(),nameID:n.readShort(),length:n.readShort(),offset:this.offset+l+n.readShort()});for(c={},a=p=0,g=i.length;p<g;a=++p)s=i[a],n.pos=s.offset,d=n.readString(s.length),o=new jD(d,s),c[m=s.nameID]==null&&(c[m]=[]),c[s.nameID].push(o);this.strings=c,this.copyright=c[0],this.fontFamily=c[1],this.fontSubfamily=c[2],this.uniqueSubfamily=c[3],this.fontName=c[4],this.version=c[5];try{this.postscriptName=c[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=c[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=c[7],this.manufacturer=c[8],this.designer=c[9],this.description=c[10],this.vendorUrl=c[11],this.designerUrl=c[12],this.license=c[13],this.licenseUrl=c[14],this.preferredFamily=c[15],this.preferredSubfamily=c[17],this.compatibleFull=c[18],this.sampleText=c[19]},e}(),RD=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Ys(e,ys),e.prototype.tag="maxp",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.numGlyphs=n.readUInt16(),this.maxPoints=n.readUInt16(),this.maxContours=n.readUInt16(),this.maxCompositePoints=n.readUInt16(),this.maxComponentContours=n.readUInt16(),this.maxZones=n.readUInt16(),this.maxTwilightPoints=n.readUInt16(),this.maxStorage=n.readUInt16(),this.maxFunctionDefs=n.readUInt16(),this.maxInstructionDefs=n.readUInt16(),this.maxStackElements=n.readUInt16(),this.maxSizeOfInstructions=n.readUInt16(),this.maxComponentElements=n.readUInt16(),this.maxComponentDepth=n.readUInt16()},e}(),DD=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Ys(e,ys),e.prototype.tag="hmtx",e.prototype.parse=function(n){var r,i,s,a,o,l,c;for(n.pos=this.offset,this.metrics=[],r=0,l=this.file.hhea.numberOfMetrics;0<=l?r<l:r>l;r=0<=l?++r:--r)this.metrics.push({advance:n.readUInt16(),lsb:n.readInt16()});for(s=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var d,p;for(p=[],r=d=0;0<=s?d<s:d>s;r=0<=s?++d:--d)p.push(n.readInt16());return p}(),this.widths=(function(){var d,p,g,m;for(m=[],d=0,p=(g=this.metrics).length;d<p;d++)a=g[d],m.push(a.advance);return m}).call(this),i=this.widths[this.widths.length-1],c=[],r=o=0;0<=s?o<s:o>s;r=0<=s?++o:--o)c.push(this.widths.push(i));return c},e.prototype.forGlyph=function(n){return n in this.metrics?this.metrics[n]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[n-this.metrics.length]}},e}(),RN=[].slice,FD=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Ys(e,ys),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(n){var r,i,s,a,o,l,c,d,p,g;return n in this.cache?this.cache[n]:(a=this.file.loca,r=this.file.contents,i=a.indexOf(n),(s=a.lengthOf(n))===0?this.cache[n]=null:(r.pos=this.offset+i,o=(l=new el(r.read(s))).readShort(),d=l.readShort(),g=l.readShort(),c=l.readShort(),p=l.readShort(),this.cache[n]=o===-1?new MD(l,d,g,c,p):new OD(l,o,d,g,c,p),this.cache[n]))},e.prototype.encode=function(n,r,i){var s,a,o,l,c;for(o=[],a=[],l=0,c=r.length;l<c;l++)s=n[r[l]],a.push(o.length),s&&(o=o.concat(s.encode(i)));return a.push(o.length),{table:o,offsets:a}},e}(),OD=function(){function t(e,n,r,i,s,a){this.raw=e,this.numberOfContours=n,this.xMin=r,this.yMin=i,this.xMax=s,this.yMax=a,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t}(),MD=function(){function t(e,n,r,i,s){var a,o;for(this.raw=e,this.xMin=n,this.yMin=r,this.xMax=i,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],a=this.raw;o=a.readShort(),this.glyphOffsets.push(a.pos),this.glyphIDs.push(a.readUInt16()),32&o;)a.pos+=1&o?4:2,128&o?a.pos+=8:64&o?a.pos+=4:8&o&&(a.pos+=2)}return t.prototype.encode=function(){var e,n,r;for(n=new el(RN.call(this.raw.data)),e=0,r=this.glyphIDs.length;e<r;++e)n.pos=this.glyphOffsets[e];return n.data},t}(),VD=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Ys(e,ys),e.prototype.tag="loca",e.prototype.parse=function(n){var r,i;return n.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var s,a;for(a=[],i=0,s=this.length;i<s;i+=2)a.push(2*n.readUInt16());return a}).call(this):(function(){var s,a;for(a=[],i=0,s=this.length;i<s;i+=4)a.push(n.readUInt32());return a}).call(this)},e.prototype.indexOf=function(n){return this.offsets[n]},e.prototype.lengthOf=function(n){return this.offsets[n+1]-this.offsets[n]},e.prototype.encode=function(n,r){for(var i=new Uint32Array(this.offsets.length),s=0,a=0,o=0;o<i.length;++o)if(i[o]=s,a<r.length&&r[a]==o){++a,i[o]=s;var l=this.offsets[o],c=this.offsets[o+1]-l;c>0&&(s+=c)}for(var d=new Array(4*i.length),p=0;p<i.length;++p)d[4*p+3]=255&i[p],d[4*p+2]=(65280&i[p])>>8,d[4*p+1]=(16711680&i[p])>>16,d[4*p]=(4278190080&i[p])>>24;return d},e}(),UD=function(){function t(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var e,n,r,i,s;for(n in i=this.font.cmap.tables[0].codeMap,e={},s=this.subset)r=s[n],e[n]=i[r];return e},t.prototype.glyphsFor=function(e){var n,r,i,s,a,o,l;for(i={},a=0,o=e.length;a<o;a++)i[s=e[a]]=this.font.glyf.glyphFor(s);for(s in n=[],i)(r=i[s])!=null&&r.compound&&n.push.apply(n,r.glyphIDs);if(n.length>0)for(s in l=this.glyphsFor(n))r=l[s],i[s]=r;return i},t.prototype.encode=function(e,n){var r,i,s,a,o,l,c,d,p,g,m,b,x,T,w;for(i in r=LN.encode(this.generateCmap(),"unicode"),a=this.glyphsFor(e),m={0:0},w=r.charMap)m[(l=w[i]).old]=l.new;for(b in g=r.maxGlyphID,a)b in m||(m[b]=g++);return d=function(N){var C,F;for(C in F={},N)F[N[C]]=C;return F}(m),p=Object.keys(d).sort(function(N,C){return N-C}),x=function(){var N,C,F;for(F=[],N=0,C=p.length;N<C;N++)o=p[N],F.push(d[o]);return F}(),s=this.font.glyf.encode(a,x,m),c=this.font.loca.encode(s.offsets,x),T={cmap:this.font.cmap.raw(),glyf:s.table,loca:c,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(n)},this.font.os2.exists&&(T["OS/2"]=this.font.os2.raw()),this.font.directory.encode(T)},t}();gt.API.PDFObject=function(){var t;function e(){}return t=function(n,r){return(Array(r+1).join("0")+n).slice(-r)},e.convert=function(n){var r,i,s,a;if(Array.isArray(n))return"["+function(){var o,l,c;for(c=[],o=0,l=n.length;o<l;o++)r=n[o],c.push(e.convert(r));return c}().join(" ")+"]";if(typeof n=="string")return"/"+n;if(n!=null&&n.isString)return"("+n+")";if(n instanceof Date)return"(D:"+t(n.getUTCFullYear(),4)+t(n.getUTCMonth(),2)+t(n.getUTCDate(),2)+t(n.getUTCHours(),2)+t(n.getUTCMinutes(),2)+t(n.getUTCSeconds(),2)+"Z)";if({}.toString.call(n)==="[object Object]"){for(i in s=["<<"],n)a=n[i],s.push("/"+i+" "+e.convert(a));return s.push(">>"),s.join(`
`)}return""+n},e}();function Vi(t){const[e,n,r]=t.split("/");return new Date(r,n-1,e)}function um(t){const e=String(t.getDate()).padStart(2,"0"),n=String(t.getMonth()+1).padStart(2,"0"),r=t.getFullYear();return`${e}/${n}/${r}`}async function DN(t){try{return{success:!0,id:(await Va(xn(_t,"absences"),{...t,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})).id}}catch(e){return console.error("Error creating absence:",e),{success:!1,error:e}}}async function BD(t,e){try{const n=mn(_t,"absences",t);return await Da(n,{...e,updatedAt:new Date().toISOString()}),{success:!0}}catch(n){return console.error("Error updating absence:",n),{success:!1,error:n}}}async function KD(t){try{return await Ma(mn(_t,"absences",t)),{success:!0}}catch(e){return console.error("Error deleting absence:",e),{success:!1,error:e}}}async function fy(t){try{const e=zd(xn(_t,"absences"),ng("employeeId","==",t),Z2("date","asc")),n=await ci(e),r=[];return n.forEach(i=>{r.push({id:i.id,...i.data()})}),{success:!0,absences:r}}catch(e){return console.error("Error fetching employee absences:",e),{success:!1,error:e,absences:[]}}}function py(t,e){return t.find(n=>{const r=n.date;if(n.type==="extended"&&n.endDate){const i=Vi(n.date),s=Vi(n.endDate),a=Vi(e);return a>=i&&a<=s}return r===e})}async function qD(t,e){try{const n=t.map(r=>DN({...e,employeeId:r.id,employeeName:r.name}));return await Promise.all(n),{success:!0}}catch(n){return console.error("Error creating absence for all employees:",n),{success:!1,error:n}}}async function zD(t,e,n){try{const r=await fy(t);if(!r.success)return{success:!1,absences:[]};const i=Vi(e),s=Vi(n);return{success:!0,absences:r.absences.filter(o=>{const l=Vi(o.date);if(o.type==="extended"&&o.endDate){const c=Vi(o.endDate);return l<=s&&c>=i}return l>=i&&l<=s})}}catch(r){return console.error("Error fetching absences for date range:",r),{success:!1,error:r,absences:[]}}}function $D(t,e,n){const r=py(n,t);return r?r.type==="partial"?{worked:r.hoursWorked||0,minusLunch:r.hoursWorked||0}:{worked:0,minusLunch:0}:e==="Fredag"?{worked:7,minusLunch:7}:{worked:7.5,minusLunch:7.5}}function HD(t,e){const n=py(e,t);if(!n)return"";let r=n.absenceReason;return n.comment&&(r+=` - ${n.comment}`),r}async function WD(t,e,n,r,i){const s=new gt({orientation:"portrait",unit:"mm",format:"a4"}),a=r?i:i.filter(b=>n.includes(b.name)),o=U7(t,e),l=o[0].formattedDate,c=o[o.length-1].formattedDate;console.log("=== PDF GENERATION DEBUG ==="),console.log("Date range:",l,"to",c),console.log("Total dates:",o.length),console.log("First date format:",l);let d=null;try{const b=await fetch("/logo_black.png");if(b.ok){const x=await b.blob();d=await new Promise(T=>{const w=new FileReader;w.onloadend=()=>T(w.result),w.readAsDataURL(x)})}}catch(b){console.log("Could not load logo:",b)}for(let b=0;b<a.length;b++){const x=a[b];b>0&&s.addPage(),console.log(`
--- Loading absences for ${x.name} (ID: ${x.id}) ---`);const T=await zD(x.id,l,c),w=T.success?T.absences:[];console.log(`Found ${w.length} absence(s) for ${x.name}`),w.length>0&&console.log("Absences:",w.map(N=>`${N.date} (${N.absenceReason})`).join(", ")),GD(s,t,e,o,x.name,d,w)}const p=dN(e),m=`Timeregistrering_${fN(t,e).replace(" / ","_")}_${p.replace(" / ","_")}.pdf`;console.log(`=== PDF GENERATION COMPLETE ===
`),s.save(m)}function GD(t,e,n,r,i,s,a){const o=t.internal.pageSize.getWidth(),l=t.internal.pageSize.getHeight(),c=15;let d=c;t.setFontSize(18),t.setFont("helvetica","bold");const p=fN(e,n);if(t.text(`${p} Timeregistrering`,c,d),s)try{t.addImage(s,"PNG",o-c-40,d-5,40,20)}catch(N){console.log("Error adding logo to PDF:",N)}d+=8,t.setFontSize(12),t.setFont("helvetica","normal");const g=dN(n);t.text(g,c,d),d+=8,t.setFontSize(9),t.setFont("helvetica","normal"),t.text("AC Handymand.dk ApS",c,d),d+=4,t.text("Axel Juels All 72",c,d),d+=4,t.text("2750 Ballerup",c,d),d+=4,t.text("CVR 42397792",c,d),d+=6,t.setFont("helvetica","normal"),t.setFontSize(9),t.text("Oversigt over arbejdstimer, sygdom, BS, SH, FE, FF og overarbejde (OA).",c,d),d+=4,t.setFont("helvetica","bold"),t.setTextColor(255,0,0),t.text("Afleveres d. 19 i hver mned.",c,d),t.setTextColor(0,0,0),d+=8,QD(t,c,d,o-2*c,r,a);const m=l-25,b=o/3,x=(o-b)/2;t.setFont("helvetica","normal"),t.setFontSize(10),t.text("Underskrift:",x-25,m),t.line(x,m,x+b,m);const T=t.getTextWidth(i),w=x+(b-T)/2;t.text(i,w,m+6)}function QD(t,e,n,r,i,s){const a=[{header:"Dato",width:16},{header:"Ugedag",width:14},{header:"Fra kl. / Til kl.",width:22},{header:"Total timer",width:18},{header:`Total timer
minus frokost`,width:22},{header:"Afvigelse / Bemrkning",width:65},{header:"Arb. timer",width:16},{header:"OA",width:12}],o=a.reduce((b,x)=>b+x.width,0),l=r/o;a.forEach(b=>b.width*=l);const c=6,d=8;let p=e;t.setFontSize(8),t.setFont("helvetica","bold"),a.forEach(b=>{t.rect(p,n,b.width,d);const x=b.header.split(`
`),T=3,w=n+3;x.forEach((N,C)=>{const F=p+b.width/2;t.text(N,F,w+C*T,{align:"center"})}),p+=b.width}),n+=d;let g=0,m=0;t.setFont("helvetica","normal"),t.setFontSize(8),i.forEach(b=>{p=e;const x=py(s,b.formattedDate),T=$D(b.formattedDate,b.weekday,s),w=HD(b.formattedDate,s);x&&(m++,console.log(` Absence matched on ${b.formattedDate}: ${x.absenceReason}`)),b.isWeekend||(g+=T.minusLunch),a.forEach((N,C)=>{t.rect(p,n,N.width,c);let F="",Q=[0,0,0];if(C===0)F=b.formattedDate;else if(C===1)F=b.weekday,b.isWeekend&&(Q=[255,0,0]);else if(C===2&&!b.isWeekend)(!x||x.type==="partial")&&(b.weekday==="Fredag"?F="07:00-14:30":F="07:00-15:00");else if(C===3&&!b.isWeekend)x&&x.type!=="partial"?F="0":x&&x.type==="partial"?F=(x.hoursWorked||0).toString().replace(".",","):b.weekday==="Fredag"?F="7,5":F="8";else if(C===4&&!b.isWeekend){const B=T.minusLunch;B>0?F=B.toString().replace(".",","):F="0"}else if(C===5)F=w;else if(C===6&&!b.isWeekend){const B=T.worked;B>0?F=B.toString().replace(".",","):F="0"}if(F){t.setTextColor(...Q);const B=p+N.width/2;if(C===5&&F.length>40){t.setFontSize(7);const y=t.splitTextToSize(F,N.width-2)[0];t.text(y,B,n+c/2+1.5,{align:"center"}),t.setFontSize(8)}else t.text(F,B,n+c/2+1.5,{align:"center"});t.setTextColor(0,0,0)}p+=N.width}),n+=c}),console.log(`Total absence matches in PDF table: ${m}`),p=e,a.forEach((b,x)=>{if((x===5||x===6)&&t.rect(p,n,b.width,c),x===5){t.setFont("helvetica","bold");const T="Total timer:",w=t.getTextWidth(T);t.text(T,p+b.width-w-1,n+c/2+1.5),t.setFont("helvetica","normal")}else if(x===6){t.setFont("helvetica","bold");const T=g.toString().replace(".",","),w=p+b.width/2;t.text(T,w,n+c/2+1.5,{align:"center"}),t.setFont("helvetica","normal")}p+=b.width})}function YD({employee:t,employees:e,onClose:n,onSuccess:r}){const{showSuccess:i,showError:s,showWarning:a}=Ti(),[o,l]=oe.useState("partial"),[c,d]=oe.useState(!1),[p,g]=oe.useState(""),[m,b]=oe.useState("Feriedag"),[x,T]=oe.useState(""),[w,N]=oe.useState(""),[C,F]=oe.useState(""),[Q,B]=oe.useState(!1),j=["Feriedag","Feriefridag","Syg","Helligdag","Andet"],y=async S=>{if(S.preventDefault(),!p){a("Vlg venligst en dato.");return}if(o==="partial"&&!w){a("Indtast antal arbejdstimer.");return}if(o==="extended"&&!C){a("Vlg venligst slut dato.");return}if(o==="extended"){const L=new Date(p);if(new Date(C)<L){s("Slut dato skal vre efter start dato.");return}}d(!0);try{const L=new Date(p),E=um(L),I={employeeId:t.id,employeeName:t.name,date:E,type:o,absenceReason:m,comment:x||""};if(o==="partial"&&(I.hoursWorked=parseFloat(w)),o==="extended"){const k=new Date(C);I.endDate=um(k)}Q&&o==="single"?(await qD(e,{date:E,type:o,absenceReason:m,comment:x||""})).success?(i("Fravr oprettet for alle medarbejdere!"),r(),n()):s("Fejl ved oprettelse af fravr for alle medarbejdere."):(await DN(I)).success?(i("Fravr oprettet!"),r(),n()):s("Fejl ved oprettelse af fravr.")}catch(L){console.error("Error creating absence:",L),s("Der opstod en fejl.")}finally{d(!1)}};return u.jsx("div",{className:"modal-overlay",children:u.jsxs("div",{className:"modal-content",onClick:S=>S.stopPropagation(),children:[u.jsxs("div",{className:"modal-header",children:[u.jsxs("h2",{children:["Opret fravr - ",t.name]}),u.jsx("button",{className:"modal-close",onClick:n,children:""})]}),u.jsxs("div",{className:"absence-tabs",children:[u.jsx("button",{className:`absence-tab ${o==="partial"?"active":""}`,onClick:()=>l("partial"),children:"Delvist fravr"}),u.jsx("button",{className:`absence-tab ${o==="single"?"active":""}`,onClick:()=>l("single"),children:"Enkelte fravrsdage"}),u.jsx("button",{className:`absence-tab ${o==="extended"?"active":""}`,onClick:()=>l("extended"),children:"Lngere fravr"})]}),u.jsxs("form",{onSubmit:y,children:[u.jsxs("div",{className:"modal-body",children:[o==="partial"&&u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"form-group",children:[u.jsx("label",{children:"Dato *"}),u.jsx("input",{type:"date",value:p,onChange:S=>g(S.target.value),required:!0})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{children:"Antal arbejdstimer *"}),u.jsx("input",{type:"number",step:"0.5",min:"0",max:"12",value:w,onChange:S=>N(S.target.value),placeholder:"f.eks. 4",required:!0}),u.jsx("span",{className:"form-hint",children:"Indtast hvor mange timer der blev arbejdet"})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{children:"Kommentar (valgfri)"}),u.jsx("input",{type:"text",value:x,onChange:S=>T(S.target.value),placeholder:"f.eks. Gik hjem kl. 12"})]})]}),o==="single"&&u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"form-group",children:[u.jsx("label",{children:"Dato *"}),u.jsx("input",{type:"date",value:p,onChange:S=>g(S.target.value),required:!0})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{children:"Type af fravr *"}),u.jsx("select",{value:m,onChange:S=>b(S.target.value),required:!0,children:j.map(S=>u.jsx("option",{value:S,children:S},S))})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{children:"Kommentar (valgfri)"}),u.jsx("input",{type:"text",value:x,onChange:S=>T(S.target.value),placeholder:"f.eks. Betalt ferie"})]}),u.jsxs("div",{className:"checkbox-group",children:[u.jsx("input",{type:"checkbox",id:"applyToAll",checked:Q,onChange:S=>B(S.target.checked)}),u.jsx("label",{htmlFor:"applyToAll",className:"checkbox-label",children:"Lukkedag - tilfj fravr p alle medarbejdere"})]})]}),o==="extended"&&u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"form-group",children:[u.jsx("label",{children:"Start dato *"}),u.jsx("input",{type:"date",value:p,onChange:S=>g(S.target.value),required:!0})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{children:"Slut dato *"}),u.jsx("input",{type:"date",value:C,onChange:S=>F(S.target.value),required:!0})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{children:"Type af fravr *"}),u.jsx("select",{value:m,onChange:S=>b(S.target.value),required:!0,children:j.map(S=>u.jsx("option",{value:S,children:S},S))})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{children:"Kommentar (valgfri)"}),u.jsx("input",{type:"text",value:x,onChange:S=>T(S.target.value),placeholder:"f.eks. Sommerferie"})]})]})]}),u.jsxs("div",{className:"modal-footer",children:[u.jsx("button",{type:"button",className:"btn-secondary",onClick:n,disabled:c,children:"Annuller"}),u.jsx("button",{type:"submit",className:"btn-primary",disabled:c,children:c?"Gemmer...":"Gem fravr"})]})]})]})})}function JD({employee:t,onClose:e,onSuccess:n}){const{showSuccess:r,showError:i,showWarning:s,showConfirm:a}=Ti(),[o,l]=oe.useState(new Date().getMonth()),[c,d]=oe.useState(new Date().getFullYear()),[p,g]=oe.useState([]),[m,b]=oe.useState(!0),[x,T]=oe.useState(null),[w,N]=oe.useState(!1),[C,F]=oe.useState(""),[Q,B]=oe.useState(""),[j,y]=oe.useState(""),[S,L]=oe.useState(""),[E,I]=oe.useState(""),k=["Feriedag","Feriefridag","Syg","Helligdag","Andet"],M=["Januar","Februar","Marts","April","Maj","Juni","Juli","August","September","Oktober","November","December"];oe.useEffect(()=>{te()},[]);const te=async()=>{b(!0);const H=await fy(t.id);H.success&&g(H.absences),b(!1)},V=H=>{let se=o+H,le=c;se>11?(se=0,le++):se<0&&(se=11,le--),l(se),d(le)},U=(H,se)=>new Date(se,H+1,0).getDate(),z=(H,se)=>{const le=new Date(se,H,1).getDay();return le===0?6:le-1},$=H=>{const se=`${String(H).padStart(2,"0")}/${String(o+1).padStart(2,"0")}/${c}`;return p.filter(le=>{if(le.type==="extended"&&le.endDate){const ue=Vi(le.date),de=Vi(le.endDate),Ae=Vi(se);return Ae>=ue&&Ae<=de}return le.date===se})},ne=H=>{const se=$(H);se.length>0&&(T(se[0]),N(!1))},we=()=>{if(!x)return;const se=Vi(x.date).toISOString().split("T")[0];if(F(se),y(x.absenceReason),L(x.comment||""),I(x.hoursWorked||""),x.endDate){const ue=Vi(x.endDate).toISOString().split("T")[0];B(ue)}else B("");N(!0)},O=async()=>{if(!C||!j){s("Udfyld alle pkrvede felter.");return}b(!0);const H=new Date(C),le={date:um(H),absenceReason:j,comment:S};if(x.type==="partial"&&(le.hoursWorked=parseFloat(E)),x.type==="extended"&&Q){const de=new Date(Q);le.endDate=um(de)}(await BD(x.id,le)).success?(r("Fravr opdateret!"),await te(),T(null),N(!1),n()):i("Fejl ved opdatering af fravr."),b(!1)},Y=async()=>{if(!x||!await a({title:"Slet fravr",message:"Er du sikker p at du vil slette dette fravr?",confirmText:"Slet",cancelText:"Annuller"}))return;b(!0),(await KD(x.id)).success?(r("Fravr slettet!"),await te(),T(null),N(!1),n()):i("Fejl ved sletning af fravr."),b(!1)},J=()=>{const H=U(o,c),se=z(o,c),le=[];for(let ue=0;ue<se;ue++)le.push(u.jsx("div",{className:"calendar-day empty"},`empty-${ue}`));for(let ue=1;ue<=H;ue++){const de=$(ue),Ae=de.length>0;le.push(u.jsxs("div",{className:`calendar-day ${Ae?"has-absence":""}`,onClick:()=>ne(ue),children:[u.jsx("div",{className:"calendar-day-number",children:ue}),Ae&&u.jsx("div",{className:"calendar-absence-indicator",children:de[0].absenceReason.substring(0,3)})]},ue))}return le};return u.jsx("div",{className:"modal-overlay",children:u.jsxs("div",{className:"modal-content modal-large",onClick:H=>H.stopPropagation(),children:[u.jsxs("div",{className:"modal-header",children:[u.jsxs("h2",{children:["Se / rediger fravr - ",t.name]}),u.jsx("button",{className:"modal-close",onClick:e,children:""})]}),u.jsxs("div",{className:"modal-body",children:[u.jsxs("div",{className:"calendar-navigation",children:[u.jsx("button",{className:"btn-secondary btn-small",onClick:()=>V(-1),disabled:m,children:" Forrige"}),u.jsxs("h3",{children:[M[o]," ",c]}),u.jsx("button",{className:"btn-secondary btn-small",onClick:()=>V(1),disabled:m,children:"Nste "})]}),m&&u.jsx("p",{children:"Indlser..."}),!m&&u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"calendar-container",children:[u.jsxs("div",{className:"calendar-header",children:[u.jsx("div",{className:"calendar-header-day",children:"Man"}),u.jsx("div",{className:"calendar-header-day",children:"Tir"}),u.jsx("div",{className:"calendar-header-day",children:"Ons"}),u.jsx("div",{className:"calendar-header-day",children:"Tor"}),u.jsx("div",{className:"calendar-header-day",children:"Fre"}),u.jsx("div",{className:"calendar-header-day",children:"Lr"}),u.jsx("div",{className:"calendar-header-day",children:"Sn"})]}),u.jsx("div",{className:"calendar-grid",children:J()})]}),x&&!w&&u.jsxs("div",{className:"absence-details",children:[u.jsx("h4",{children:"Fravrsdetaljer"}),u.jsxs("div",{className:"detail-row",children:[u.jsx("strong",{children:"Dato:"})," ",x.date,x.endDate&&` til ${x.endDate}`]}),u.jsxs("div",{className:"detail-row",children:[u.jsx("strong",{children:"Type:"})," ",x.absenceReason]}),x.hoursWorked!==void 0&&u.jsxs("div",{className:"detail-row",children:[u.jsx("strong",{children:"Arbejdstimer:"})," ",x.hoursWorked]}),x.comment&&u.jsxs("div",{className:"detail-row",children:[u.jsx("strong",{children:"Kommentar:"})," ",x.comment]}),u.jsxs("div",{className:"detail-actions",children:[u.jsx("button",{className:"btn-primary btn-small",onClick:we,children:"Rediger"}),u.jsx("button",{className:"btn-small btn-danger",onClick:Y,children:"Slet"}),u.jsx("button",{className:"btn-secondary btn-small",onClick:()=>T(null),children:"Luk"})]})]}),x&&w&&u.jsxs("div",{className:"absence-details",children:[u.jsx("h4",{children:"Rediger fravr"}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{children:"Dato *"}),u.jsx("input",{type:"date",value:C,onChange:H=>F(H.target.value)})]}),x.type==="extended"&&u.jsxs("div",{className:"form-group",children:[u.jsx("label",{children:"Slut dato *"}),u.jsx("input",{type:"date",value:Q,onChange:H=>B(H.target.value)})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{children:"Type af fravr *"}),u.jsx("select",{value:j,onChange:H=>y(H.target.value),children:k.map(H=>u.jsx("option",{value:H,children:H},H))})]}),x.type==="partial"&&u.jsxs("div",{className:"form-group",children:[u.jsx("label",{children:"Arbejdstimer *"}),u.jsx("input",{type:"number",step:"0.5",min:"0",max:"12",value:E,onChange:H=>I(H.target.value)})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{children:"Kommentar"}),u.jsx("input",{type:"text",value:S,onChange:H=>L(H.target.value)})]}),u.jsxs("div",{className:"detail-actions",children:[u.jsx("button",{className:"btn-primary btn-small",onClick:O,children:"Gem ndringer"}),u.jsx("button",{className:"btn-secondary btn-small",onClick:()=>N(!1),children:"Annuller"})]})]})]})]}),u.jsx("div",{className:"modal-footer",children:u.jsx("button",{className:"btn-secondary",onClick:e,children:"Luk"})})]})})}function XD(){const{showError:t,showWarning:e}=Ti(),[n,r]=oe.useState(new Date().getFullYear()),[i,s]=oe.useState(new Date().getMonth()),[a,o]=oe.useState(!1),[l,c]=oe.useState(""),[d,p]=oe.useState([]),[g,m]=oe.useState(!1),[b,x]=oe.useState(!1),[T,w]=oe.useState(!1),[N,C]=oe.useState(!1),[F,Q]=oe.useState(null),B=B7(),j=Array.from({length:10},(k,M)=>new Date().getFullYear()-2+M);oe.useEffect(()=>{y()},[]);const y=async()=>{m(!0);try{const k=await ci(xn(_t,"employees")),M=[];k.forEach(te=>{M.push({id:te.id,...te.data()})}),M.sort((te,V)=>te.name.localeCompare(V.name)),p(M),M.length>0&&!l&&c(M[0].name)}catch(k){console.error("Error loading employees:",k),t("Fejl ved indlsning af medarbejdere.")}finally{m(!1)}},S=async()=>{if(!a&&!l){e("Vlg venligst en medarbejder.");return}x(!0);try{const k=a?d.map(M=>M.name):[l];await WD(n,i,k,a,d)}catch(k){console.error("Error generating PDF:",k),t("Der opstod en fejl ved generering af PDF. Prv igen.")}finally{x(!1)}},L=k=>{Q(k),w(!0)},E=k=>{Q(k),C(!0)},I=()=>{};return u.jsxs("div",{children:[u.jsxs("div",{className:"page-header",children:[u.jsx("h1",{children:"Timeregistrering"}),u.jsx("p",{children:"Generr timeregistreringsformularer for medarbejdere"}),u.jsx("img",{src:"/worker.png",alt:"",className:"page-header-clipart clipart-timeregistrering","aria-hidden":"true"})]}),u.jsxs("div",{className:"content-card",children:[u.jsx("h3",{style:{marginBottom:"20px"},children:"Generr PDF"}),u.jsxs("div",{className:"timesheet-form",children:[u.jsxs("div",{className:"form-section",children:[u.jsx("label",{htmlFor:"year",children:"Vlg r"}),u.jsx("select",{id:"year",value:n,onChange:k=>r(Number(k.target.value)),children:j.map(k=>u.jsx("option",{value:k,children:k},k))})]}),u.jsxs("div",{className:"form-section",children:[u.jsx("label",{htmlFor:"monthPair",children:"Vlg mneder"}),u.jsx("select",{id:"monthPair",value:i,onChange:k=>s(Number(k.target.value)),children:B.map(k=>u.jsx("option",{value:k.value,children:k.label},k.value))})]}),u.jsxs("div",{className:"form-section",children:[u.jsx("label",{children:"Ansatte"}),u.jsxs("div",{className:"checkbox-group",children:[u.jsx("input",{type:"checkbox",id:"allEmployees",checked:a,onChange:k=>o(k.target.checked)}),u.jsx("label",{htmlFor:"allEmployees",children:"Alle ansatte"})]}),g?u.jsx("p",{children:"Indlser medarbejdere..."}):u.jsx("select",{value:l,onChange:k=>c(k.target.value),disabled:a||d.length===0,children:d.length===0?u.jsx("option",{value:"",children:"Ingen medarbejdere"}):d.map(k=>u.jsx("option",{value:k.name,children:k.name},k.id))}),d.length===0&&u.jsx("p",{className:"no-employees-text",children:"Tilfj medarbejdere i Indstillinger frst"})]}),u.jsx("button",{className:"btn-generate",onClick:S,disabled:b||d.length===0,children:b?"Genererer...":"Generr PDF"})]})]}),u.jsxs("div",{className:"content-card",style:{marginTop:"30px"},children:[u.jsx("h3",{style:{marginBottom:"20px"},children:"Fravr og sygdom"}),g?u.jsx("p",{children:"Indlser medarbejdere..."}):d.length===0?u.jsx("p",{className:"no-employees-text",children:"Tilfj medarbejdere i Indstillinger frst"}):u.jsx("div",{className:"absence-employee-list",children:d.map(k=>u.jsxs("div",{className:"absence-employee-row",children:[u.jsx("span",{className:"absence-employee-name",children:k.name}),u.jsxs("div",{className:"absence-employee-actions",children:[u.jsx("button",{className:"btn-primary btn-small",onClick:()=>L(k),children:"Opret fravr"}),u.jsx("button",{className:"btn-secondary btn-small",onClick:()=>E(k),children:"Se / rediger fravr"})]})]},k.id))})]}),T&&F&&u.jsx(YD,{employee:F,employees:d,onClose:()=>w(!1),onSuccess:I}),N&&F&&u.jsx(JD,{employee:F,onClose:()=>C(!1),onSuccess:I})]})}function ZD({employee:t,onSave:e,onClose:n,isOpen:r}){const[i,s]=oe.useState("");oe.useEffect(()=>{s(t&&t.name||"")},[t,r]);const a=o=>{if(o.preventDefault(),!i.trim()){alert("Indtast venligst et navn.");return}e({name:i.trim()})};return r?u.jsx("div",{className:"modal-overlay",onClick:n,children:u.jsxs("div",{className:"modal-content",onClick:o=>o.stopPropagation(),children:[u.jsxs("div",{className:"modal-header",children:[u.jsx("h2",{children:t?"Redigr medarbejder":"Tilfj medarbejder"}),u.jsx("button",{className:"modal-close",onClick:n,children:""})]}),u.jsxs("form",{onSubmit:a,children:[u.jsx("div",{className:"modal-body",children:u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"employeeName",children:"Navn *"}),u.jsx("input",{type:"text",id:"employeeName",value:i,onChange:o=>s(o.target.value),placeholder:"Indtast medarbejdernavn",autoFocus:!0,required:!0})]})}),u.jsxs("div",{className:"modal-footer",children:[u.jsx("button",{type:"button",className:"btn-secondary",onClick:n,children:"Annuller"}),u.jsx("button",{type:"submit",className:"btn-primary",children:t?"Gem":"Tilfj"})]})]})]})}):null}function eF(){const{showSuccess:t,showError:e,showCriticalConfirm:n}=Ti(),[r,i]=oe.useState([]),[s,a]=oe.useState(!1),[o,l]=oe.useState(!1),[c,d]=oe.useState(null),[p,g]=oe.useState(450),[m,b]=oe.useState(!1),[x,T]=oe.useState(450);oe.useEffect(()=>{w(),N()},[]);const w=async()=>{try{const y=await rg(mn(_t,"settings","hourlyRates"));if(y.exists()){const S=y.data().defaultRate||450;g(S),T(S)}}catch(y){console.error("Error loading settings:",y)}},N=async()=>{a(!0);try{const y=await ci(xn(_t,"employees")),S=[];y.forEach(L=>{S.push({id:L.id,...L.data()})}),S.sort((L,E)=>L.name.localeCompare(E.name)),i(S)}catch(y){console.error("Error loading employees:",y),e("Der opstod en fejl ved indlsning af medarbejdere.")}finally{a(!1)}},C=async()=>{try{const y=parseFloat(x);if(isNaN(y)||y<=0){e("Indtast venligst en gyldig timepris.");return}await Y0(mn(_t,"settings","hourlyRates"),{defaultRate:y,updatedAt:new Date().toISOString()}),g(y),b(!1),t("Timepris gemt!")}catch(y){console.error("Error saving default rate:",y),e("Der opstod en fejl ved gemning af timepris.")}},F=()=>{d(null),l(!0)},Q=y=>{d(y),l(!0)},B=async y=>{if(await n({title:"Slet medarbejder?",message:"Dette vil permanent slette medarbejderen fra systemet.",itemName:y.name,warningText:"Historiske timeregistreringer vil stadig vre synlige, men medarbejderen kan ikke vlges fremadrettet",confirmText:"Slet Permanent",cancelText:"Annuller"}))try{await Ma(mn(_t,"employees",y.id)),t("Medarbejder slettet!"),await N()}catch(L){console.error("Error deleting employee:",L),e("Der opstod en fejl ved sletning af medarbejder.")}},j=async y=>{try{c?(await Da(mn(_t,"employees",c.id),{name:y.name,updatedAt:new Date().toISOString()}),t("Medarbejder opdateret!")):(await Va(xn(_t,"employees"),{name:y.name,createdAt:new Date().toISOString()}),t("Medarbejder oprettet!")),l(!1),await N()}catch(S){console.error("Error saving employee:",S),e("Der opstod en fejl ved gemning af medarbejder.")}};return u.jsxs("div",{children:[u.jsxs("div",{className:"page-header",children:[u.jsx("h1",{children:"Indstillinger"}),u.jsx("p",{children:"Administrr medarbejdere og priser"}),u.jsx("img",{src:"/admin.png",alt:"",className:"page-header-clipart clipart-indstillinger","aria-hidden":"true"})]}),u.jsxs("div",{className:"content-card",style:{marginBottom:"20px"},children:[u.jsx("h2",{style:{marginBottom:"20px",fontSize:"20px",color:"#2c3e50"},children:"Standard Timepris"}),m?u.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"15px"},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[u.jsx("input",{type:"number",value:x,onChange:y=>T(y.target.value),min:"0",step:"50",style:{padding:"10px",fontSize:"18px",width:"150px",border:"1px solid #ddd",borderRadius:"5px"},autoFocus:!0}),u.jsx("span",{style:{color:"#7f8c8d"},children:"kr/time"})]}),u.jsxs("div",{style:{display:"flex",gap:"10px"},children:[u.jsx("button",{className:"btn-secondary",onClick:()=>{T(p),b(!1)},children:"Annuller"}),u.jsx("button",{className:"btn-primary",onClick:C,children:"Gem"})]})]}):u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[u.jsxs("div",{children:[u.jsxs("div",{style:{fontSize:"32px",fontWeight:"bold",color:"#27ae60",marginBottom:"5px"},children:[p," kr"]}),u.jsx("div",{style:{fontSize:"14px",color:"#7f8c8d"},children:"Standard timepris brugt for alle sager (kan tilpasses per sag)"})]}),u.jsx("button",{className:"btn-secondary",onClick:()=>b(!0),children:"Redigr"})]})]}),u.jsxs("div",{className:"content-card",children:[u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[u.jsx("h2",{style:{margin:0,fontSize:"20px",color:"#2c3e50"},children:"Medarbejdere"}),u.jsx("button",{className:"btn-primary",onClick:F,children:"+ Tilfj Medarbejder"})]}),s?u.jsx("p",{children:"Indlser medarbejdere..."}):r.length===0?u.jsx("div",{style:{textAlign:"center",padding:"40px",color:"#7f8c8d"},children:u.jsx("p",{children:"Ingen medarbejdere tilfjet endnu."})}):u.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[u.jsx("thead",{children:u.jsxs("tr",{style:{borderBottom:"2px solid #ecf0f1"},children:[u.jsx("th",{style:{textAlign:"left",padding:"12px",color:"#2c3e50",fontWeight:"600"},children:"Navn"}),u.jsx("th",{style:{textAlign:"right",padding:"12px",color:"#2c3e50",fontWeight:"600"},children:"Handlinger"})]})}),u.jsx("tbody",{children:r.map(y=>u.jsxs("tr",{style:{borderBottom:"1px solid #ecf0f1"},children:[u.jsx("td",{style:{padding:"15px"},children:u.jsx("strong",{style:{fontSize:"15px",color:"#2c3e50"},children:y.name})}),u.jsxs("td",{style:{padding:"15px",textAlign:"right"},children:[u.jsx("button",{className:"btn-action btn-edit",onClick:()=>Q(y),children:"Redigr"}),u.jsx("button",{className:"btn-action btn-delete",onClick:()=>B(y),children:"Slet"})]})]},y.id))})]})]}),u.jsx(ZD,{isOpen:o,onClose:()=>l(!1),onSave:j,employee:c})]})}const tF=async t=>{const e=mn(_t,"projectCounter",String(t));try{const n=await rg(e);if(n.exists()){const i=(n.data().currentNumber||0)+1;return await Y0(e,{currentNumber:i}),Y_(t,i)}else return await Y0(e,{currentNumber:1}),Y_(t,1)}catch(n){throw console.error("Error getting next project number:",n),n}},Y_=(t,e)=>{const n=String(e).padStart(4,"0");return`${t}-${n}`},FN=t=>!t||t.length===0?0:t.reduce((e,n)=>e+(n.duration||0),0),nF=t=>!t||t.length===0?0:t.filter(e=>e.billable).reduce((e,n)=>e+(n.duration||0),0),rF=t=>!t||t.length===0?0:t.filter(e=>e.billable).reduce((e,n)=>e+(n.duration||0)*(n.rate||0),0),ON=async t=>{try{const e=zd(xn(_t,"timeEntries"),ng("projectId","==",t)),n=await ci(e),r=[];return n.forEach(i=>{r.push({id:i.id,...i.data()})}),r.sort((i,s)=>new Date(s.date)-new Date(i.date)),r}catch(e){throw console.error("Error getting project time entries:",e),e}},iF=t=>t?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t):!0,sF=t=>t?t.replace(/\D/g,"").length===8:!0,aF={1e3:"Kbenhavn K",1050:"Kbenhavn K",1100:"Kbenhavn K",1150:"Kbenhavn K",1151:"Kbenhavn K",1152:"Kbenhavn K",1153:"Kbenhavn K",1154:"Kbenhavn K",1155:"Kbenhavn K",1156:"Kbenhavn K",1157:"Kbenhavn K",1158:"Kbenhavn K",1159:"Kbenhavn K",1160:"Kbenhavn K",1161:"Kbenhavn K",1162:"Kbenhavn K",1163:"Kbenhavn K",1164:"Kbenhavn K",1165:"Kbenhavn K",1166:"Kbenhavn K",1167:"Kbenhavn K",1168:"Kbenhavn K",1169:"Kbenhavn K",1170:"Kbenhavn K",1171:"Kbenhavn K",1172:"Kbenhavn K",1173:"Kbenhavn K",1174:"Kbenhavn K",1175:"Kbenhavn K",1200:"Kbenhavn K",1201:"Kbenhavn K",1202:"Kbenhavn K",1203:"Kbenhavn K",1204:"Kbenhavn K",1205:"Kbenhavn K",1206:"Kbenhavn K",1207:"Kbenhavn K",1208:"Kbenhavn K",1209:"Kbenhavn K",1210:"Kbenhavn K",1211:"Kbenhavn K",1212:"Kbenhavn K",1213:"Kbenhavn K",1214:"Kbenhavn K",1215:"Kbenhavn K",1216:"Kbenhavn K",1217:"Kbenhavn K",1218:"Kbenhavn K",1219:"Kbenhavn K",1220:"Kbenhavn K",1221:"Kbenhavn K",1240:"Kbenhavn K",1250:"Kbenhavn K",1251:"Kbenhavn K",1252:"Kbenhavn K",1253:"Kbenhavn K",1254:"Kbenhavn K",1255:"Kbenhavn K",1256:"Kbenhavn K",1257:"Kbenhavn K",1258:"Kbenhavn K",1259:"Kbenhavn K",1260:"Kbenhavn K",1261:"Kbenhavn K",1263:"Kbenhavn K",1264:"Kbenhavn K",1265:"Kbenhavn K",1266:"Kbenhavn K",1267:"Kbenhavn K",1268:"Kbenhavn K",1270:"Kbenhavn K",1271:"Kbenhavn K",1300:"Kbenhavn K",1301:"Kbenhavn K",1302:"Kbenhavn K",1303:"Kbenhavn K",1304:"Kbenhavn K",1305:"Kbenhavn K",1306:"Kbenhavn K",1307:"Kbenhavn K",1308:"Kbenhavn K",1309:"Kbenhavn K",1310:"Kbenhavn K",1311:"Kbenhavn K",1312:"Kbenhavn K",1313:"Kbenhavn K",1314:"Kbenhavn K",1315:"Kbenhavn K",1316:"Kbenhavn K",1317:"Kbenhavn K",1318:"Kbenhavn K",1319:"Kbenhavn K",1320:"Kbenhavn K",1321:"Kbenhavn K",1322:"Kbenhavn K",1323:"Kbenhavn K",1324:"Kbenhavn K",1325:"Kbenhavn K",1326:"Kbenhavn K",1327:"Kbenhavn K",1328:"Kbenhavn K",1329:"Kbenhavn K",1350:"Kbenhavn K",1352:"Kbenhavn K",1353:"Kbenhavn K",1354:"Kbenhavn K",1355:"Kbenhavn K",1356:"Kbenhavn K",1357:"Kbenhavn K",1358:"Kbenhavn K",1359:"Kbenhavn K",1360:"Kbenhavn K",1361:"Kbenhavn K",1362:"Kbenhavn K",1363:"Kbenhavn K",1364:"Kbenhavn K",1365:"Kbenhavn K",1366:"Kbenhavn K",1367:"Kbenhavn K",1368:"Kbenhavn K",1369:"Kbenhavn K",1370:"Kbenhavn K",1371:"Kbenhavn K",1400:"Kbenhavn K",1401:"Kbenhavn K",1402:"Kbenhavn K",1403:"Kbenhavn K",1406:"Kbenhavn K",1407:"Kbenhavn K",1408:"Kbenhavn K",1409:"Kbenhavn K",1410:"Kbenhavn K",1411:"Kbenhavn K",1412:"Kbenhavn K",1413:"Kbenhavn K",1414:"Kbenhavn K",1415:"Kbenhavn K",1416:"Kbenhavn K",1417:"Kbenhavn K",1418:"Kbenhavn K",1419:"Kbenhavn K",1420:"Kbenhavn K",1421:"Kbenhavn K",1422:"Kbenhavn K",1423:"Kbenhavn K",1424:"Kbenhavn K",1425:"Kbenhavn K",1426:"Kbenhavn K",1427:"Kbenhavn K",1428:"Kbenhavn K",1429:"Kbenhavn K",1430:"Kbenhavn K",1431:"Kbenhavn K",1432:"Kbenhavn K",1433:"Kbenhavn K",1434:"Kbenhavn K",1435:"Kbenhavn K",1436:"Kbenhavn K",1437:"Kbenhavn K",1438:"Kbenhavn K",1439:"Kbenhavn K",1440:"Kbenhavn K",1441:"Kbenhavn K",1448:"Kbenhavn K",1450:"Kbenhavn K",1451:"Kbenhavn K",1452:"Kbenhavn K",1453:"Kbenhavn K",1454:"Kbenhavn K",1455:"Kbenhavn K",1456:"Kbenhavn K",1457:"Kbenhavn K",1458:"Kbenhavn K",1459:"Kbenhavn K",1460:"Kbenhavn K",1461:"Kbenhavn K",1462:"Kbenhavn K",1463:"Kbenhavn K",1464:"Kbenhavn K",1465:"Kbenhavn K",1466:"Kbenhavn K",1467:"Kbenhavn K",1468:"Kbenhavn K",1470:"Kbenhavn K",1471:"Kbenhavn K",1472:"Kbenhavn K",1473:"Kbenhavn K",1500:"Kbenhavn V",1501:"Kbenhavn V",1502:"Kbenhavn V",1503:"Kbenhavn V",1504:"Kbenhavn V",1505:"Kbenhavn V",1506:"Kbenhavn V",1507:"Kbenhavn V",1508:"Kbenhavn V",1509:"Kbenhavn V",1510:"Kbenhavn V",1511:"Kbenhavn V",1512:"Kbenhavn V",1513:"Kbenhavn V",1514:"Kbenhavn V",1515:"Kbenhavn V",1516:"Kbenhavn V",1517:"Kbenhavn V",1518:"Kbenhavn V",1519:"Kbenhavn V",1520:"Kbenhavn V",1521:"Kbenhavn V",1532:"Kbenhavn V",1533:"Kbenhavn V",1550:"Kbenhavn V",1551:"Kbenhavn V",1552:"Kbenhavn V",1553:"Kbenhavn V",1554:"Kbenhavn V",1555:"Kbenhavn V",1556:"Kbenhavn V",1557:"Kbenhavn V",1558:"Kbenhavn V",1559:"Kbenhavn V",1560:"Kbenhavn V",1561:"Kbenhavn V",1562:"Kbenhavn V",1563:"Kbenhavn V",1564:"Kbenhavn V",1566:"Kbenhavn V",1567:"Kbenhavn V",1568:"Kbenhavn V",1569:"Kbenhavn V",1570:"Kbenhavn V",1571:"Kbenhavn V",1572:"Kbenhavn V",1573:"Kbenhavn V",1574:"Kbenhavn V",1575:"Kbenhavn V",1576:"Kbenhavn V",1577:"Kbenhavn V",1592:"Kbenhavn V",1599:"Kbenhavn V",1600:"Kbenhavn V",1601:"Kbenhavn V",1602:"Kbenhavn V",1603:"Kbenhavn V",1604:"Kbenhavn V",1605:"Kbenhavn V",1606:"Kbenhavn V",1607:"Kbenhavn V",1608:"Kbenhavn V",1609:"Kbenhavn V",1610:"Kbenhavn V",1611:"Kbenhavn V",1612:"Kbenhavn V",1613:"Kbenhavn V",1614:"Kbenhavn V",1615:"Kbenhavn V",1616:"Kbenhavn V",1617:"Kbenhavn V",1618:"Kbenhavn V",1619:"Kbenhavn V",1620:"Kbenhavn V",1621:"Kbenhavn V",1622:"Kbenhavn V",1623:"Kbenhavn V",1624:"Kbenhavn V",1630:"Kbenhavn V",1631:"Kbenhavn V",1632:"Kbenhavn V",1633:"Kbenhavn V",1634:"Kbenhavn V",1635:"Kbenhavn V",1650:"Kbenhavn V",1651:"Kbenhavn V",1652:"Kbenhavn V",1653:"Kbenhavn V",1654:"Kbenhavn V",1655:"Kbenhavn V",1656:"Kbenhavn V",1657:"Kbenhavn V",1658:"Kbenhavn V",1659:"Kbenhavn V",1660:"Kbenhavn V",1661:"Kbenhavn V",1662:"Kbenhavn V",1663:"Kbenhavn V",1664:"Kbenhavn V",1665:"Kbenhavn V",1666:"Kbenhavn V",1667:"Kbenhavn V",1668:"Kbenhavn V",1669:"Kbenhavn V",1670:"Kbenhavn V",1671:"Kbenhavn V",1672:"Kbenhavn V",1673:"Kbenhavn V",1674:"Kbenhavn V",1675:"Kbenhavn V",1676:"Kbenhavn V",1677:"Kbenhavn V",1699:"Kbenhavn V",1700:"Kbenhavn V",1701:"Kbenhavn V",1702:"Kbenhavn V",1703:"Kbenhavn V",1704:"Kbenhavn V",1705:"Kbenhavn V",1706:"Kbenhavn V",1707:"Kbenhavn V",1708:"Kbenhavn V",1709:"Kbenhavn V",1710:"Kbenhavn V",1711:"Kbenhavn V",1712:"Kbenhavn V",1713:"Kbenhavn V",1714:"Kbenhavn V",1715:"Kbenhavn V",1716:"Kbenhavn V",1717:"Kbenhavn V",1718:"Kbenhavn V",1719:"Kbenhavn V",1720:"Kbenhavn V",1721:"Kbenhavn V",1722:"Kbenhavn V",1723:"Kbenhavn V",1724:"Kbenhavn V",1725:"Kbenhavn V",1726:"Kbenhavn V",1727:"Kbenhavn V",1728:"Kbenhavn V",1729:"Kbenhavn V",1730:"Kbenhavn V",1731:"Kbenhavn V",1732:"Kbenhavn V",1733:"Kbenhavn V",1734:"Kbenhavn V",1735:"Kbenhavn V",1736:"Kbenhavn V",1737:"Kbenhavn V",1738:"Kbenhavn V",1739:"Kbenhavn V",1749:"Kbenhavn V",1750:"Kbenhavn V",1751:"Kbenhavn V",1752:"Kbenhavn V",1753:"Kbenhavn V",1754:"Kbenhavn V",1755:"Kbenhavn V",1756:"Kbenhavn V",1757:"Kbenhavn V",1758:"Kbenhavn V",1759:"Kbenhavn V",1760:"Kbenhavn V",1761:"Kbenhavn V",1762:"Kbenhavn V",1763:"Kbenhavn V",1764:"Kbenhavn V",1765:"Kbenhavn V",1766:"Kbenhavn V",1770:"Kbenhavn V",1771:"Kbenhavn V",1772:"Kbenhavn V",1773:"Kbenhavn V",1774:"Kbenhavn V",1775:"Kbenhavn V",1777:"Kbenhavn V",1780:"Kbenhavn V",1785:"Kbenhavn V",1786:"Kbenhavn V",1787:"Kbenhavn V",1790:"Kbenhavn V",1799:"Kbenhavn V",1800:"Frederiksberg C",1801:"Frederiksberg C",1802:"Frederiksberg C",1803:"Frederiksberg C",1804:"Frederiksberg C",1805:"Frederiksberg C",1806:"Frederiksberg C",1807:"Frederiksberg C",1808:"Frederiksberg C",1809:"Frederiksberg C",1810:"Frederiksberg C",1811:"Frederiksberg C",1812:"Frederiksberg C",1813:"Frederiksberg C",1814:"Frederiksberg C",1815:"Frederiksberg C",1816:"Frederiksberg C",1817:"Frederiksberg C",1818:"Frederiksberg C",1819:"Frederiksberg C",1820:"Frederiksberg C",1822:"Frederiksberg C",1823:"Frederiksberg C",1824:"Frederiksberg C",1825:"Frederiksberg C",1826:"Frederiksberg C",1827:"Frederiksberg C",1828:"Frederiksberg C",1829:"Frederiksberg C",1850:"Frederiksberg C",1851:"Frederiksberg C",1852:"Frederiksberg C",1853:"Frederiksberg C",1854:"Frederiksberg C",1855:"Frederiksberg C",1856:"Frederiksberg C",1857:"Frederiksberg C",1860:"Frederiksberg C",1861:"Frederiksberg C",1862:"Frederiksberg C",1863:"Frederiksberg C",1864:"Frederiksberg C",1865:"Frederiksberg C",1866:"Frederiksberg C",1867:"Frederiksberg C",1868:"Frederiksberg C",1870:"Frederiksberg C",1871:"Frederiksberg C",1872:"Frederiksberg C",1873:"Frederiksberg C",1874:"Frederiksberg C",1875:"Frederiksberg C",1876:"Frederiksberg C",1877:"Frederiksberg C",1878:"Frederiksberg C",1879:"Frederiksberg C",1900:"Frederiksberg C",1901:"Frederiksberg C",1902:"Frederiksberg C",1903:"Frederiksberg C",1904:"Frederiksberg C",1905:"Frederiksberg C",1906:"Frederiksberg C",1908:"Frederiksberg C",1909:"Frederiksberg C",1910:"Frederiksberg C",1911:"Frederiksberg C",1912:"Frederiksberg C",1913:"Frederiksberg C",1914:"Frederiksberg C",1915:"Frederiksberg C",1916:"Frederiksberg C",1917:"Frederiksberg C",1920:"Frederiksberg C",1921:"Frederiksberg C",1922:"Frederiksberg C",1923:"Frederiksberg C",1924:"Frederiksberg C",1925:"Frederiksberg C",1926:"Frederiksberg C",1927:"Frederiksberg C",1928:"Frederiksberg C",1931:"Frederiksberg C",1950:"Frederiksberg C",1951:"Frederiksberg C",1952:"Frederiksberg C",1953:"Frederiksberg C",1954:"Frederiksberg C",1955:"Frederiksberg C",1956:"Frederiksberg C",1957:"Frederiksberg C",1958:"Frederiksberg C",1959:"Frederiksberg C",1960:"Frederiksberg C",1961:"Frederiksberg C",1962:"Frederiksberg C",1963:"Frederiksberg C",1964:"Frederiksberg C",1965:"Frederiksberg C",1966:"Frederiksberg C",1967:"Frederiksberg C",1970:"Frederiksberg C",1971:"Frederiksberg C",1972:"Frederiksberg C",1973:"Frederiksberg C",1974:"Frederiksberg C",2e3:"Frederiksberg",2100:"Kbenhavn ",2150:"Nordhavn",2200:"Kbenhavn N",2300:"Kbenhavn S",2400:"Kbenhavn NV",2450:"Kbenhavn SV",2500:"Valby",2600:"Glostrup",2605:"Brndby",2610:"Rdovre",2620:"Albertslund",2625:"Vallensbk",2630:"Taastrup",2635:"Ishj",2640:"Hedehusene",2650:"Hvidovre",2660:"Brndby Strand",2665:"Vallensbk Strand",2670:"Greve",2680:"Solrd Strand",2690:"Karlslunde",2700:"Brnshj",2720:"Vanlse",2730:"Herlev",2740:"Skovlunde",2750:"Ballerup",2760:"Mlv",2765:"Smrum",2770:"Kastrup",2791:"Dragr",2800:"Kongens Lyngby",2820:"Gentofte",2830:"Virum",2840:"Holte",2850:"Nrum",2860:"Sborg",2870:"Dyssegrd",2880:"Bagsvrd",2900:"Hellerup",2920:"Charlottenlund",2930:"Klampenborg",2942:"Skodsborg",2950:"Vedbk",2960:"Rungsted Kyst",2970:"Hrsholm",2980:"Kokkedal",2990:"Niv",3e3:"Helsingr",3050:"Humlebk",3060:"Espergrde",3070:"Snekkersten",3080:"Tikb",3100:"Hornbk",3120:"Dronningmlle",3140:"lsgrde",3150:"Hellebk",3200:"Helsinge",3210:"Vejby",3220:"Tisvildeleje",3230:"Grsted",3250:"Gilleleje",3300:"Frederiksvrk",3310:"lsted",3320:"Skvinge",3330:"Grlse",3360:"Liseleje",3370:"Melby",3390:"Hundested",3400:"Hillerd",3450:"Allerd",3460:"Birkerd",3480:"Fredensborg",3490:"Kvistgrd",3500:"Vrlse",3520:"Farum",3540:"Lynge",3550:"Slangerup",3600:"Frederikssund",3630:"Jgerspris",3650:"lstykke",3660:"Stenlse",3670:"Veks Sjlland",3700:"Rnne",3720:"Aakirkeby",3730:"Nex",3740:"Svaneke",3751:"stermarie",3760:"Gudhjem",3770:"Allinge",3782:"Klemensker",3790:"Hasle",4e3:"Roskilde",4030:"Tune",4040:"Jyllinge",4050:"Skibby",4060:"Kirke Sby",4070:"Kirke Hyllinge",4100:"Ringsted",4130:"Viby Sjlland",4140:"Borup",4160:"Herlufmagle",4171:"Glums",4173:"Fjenneslev",4174:"Jystrup Midtsj",4180:"Sor",4190:"Munke Bjergby",4200:"Slagelse",4220:"Korsr",4230:"Sklskr",4241:"Vemmelev",4242:"Boeslunde",4243:"Rude",4250:"Fuglebjerg",4261:"Dalmose",4262:"Sandved",4270:"Hng",4281:"Grlev",4291:"Ruds Vedby",4293:"Dianalund",4295:"Stenlille",4296:"Nyrup",4300:"Holbk",4320:"Lejre",4330:"Hvals",4340:"Tllse",4350:"Ugerlse",4360:"Kirke Eskilstrup",4370:"Store Merlse",4390:"Vipperd",4400:"Kalundborg",4420:"Regstrup",4440:"Mrkv",4450:"Jyderup",4460:"Snertinge",4470:"Sveblle",4480:"Store Fuglede",4490:"Jerslev Sjlland",4500:"Nykbing Sj",4520:"Svinninge",4532:"Gislinge",4534:"Hrve",4540:"Frevejle",4550:"Asns",4560:"Vig",4571:"Grevinge",4572:"Nrre Asmindrup",4573:"Hjby",4581:"Rrvig",4583:"Sjllands Odde",4591:"Fllenslev",4592:"Sejer",4593:"Eskebjerg",4600:"Kge",4621:"Gadstrup",4622:"Havdrup",4623:"Lille Skensved",4632:"Bjverskov",4640:"Faxe",4652:"Hrlev",4653:"Karise",4654:"Faxe Ladeplads",4660:"Store Heddinge",4671:"Strby",4672:"Klippinge",4673:"Rdvig Stevns",4681:"Herflge",4682:"Tureby",4683:"Rnnede",4684:"Holmegaard",4690:"Haslev",4700:"Nstved",4720:"Prst",4733:"Tappernje",4735:"Mern",4736:"Karrebksminde",4750:"Lundby",4760:"Vordingborg",4771:"Kalvehave",4772:"Langebk",4773:"Stensved",4780:"Stege",4791:"Borre",4792:"Askeby",4793:"Bog By",4800:"Nykbing F",4840:"Nrre Alslev",4850:"Stubbekbing",4862:"Guldborg",4863:"Eskilstrup",4871:"Horbelev",4872:"Idestrup",4873:"Vggerlse",4874:"Gedser",4880:"Nysted",4891:"Toreby L",4892:"Kettinge",4894:"ster Ulslev",4895:"Errindlev",4900:"Nakskov",4912:"Harpelunde",4913:"Horslunde",4920:"Sllested",4930:"Maribo",4941:"Bandholm",4943:"Torrig L",4944:"Fej",4951:"Nrreballe",4952:"Stokkemarke",4953:"Vesterborg",4960:"Holeby",4970:"Rdby",4983:"Dannemare",4990:"Sakskbing",5e3:"Odense C",5100:"Odense C",5200:"Odense V",5210:"Odense NV",5220:"Odense S",5230:"Odense M",5240:"Odense N",5250:"Odense SV",5260:"Odense S",5270:"Odense N",5290:"Marslev",5300:"Kerteminde",5320:"Agedrup",5330:"Munkebo",5350:"Rynkeby",5370:"Mesinge",5380:"Dalby",5390:"Martofte",5400:"Bogense",5450:"Otterup",5462:"Morud",5463:"Harndrup",5464:"Brenderup Fyn",5466:"Asperup",5471:"Snders",5474:"Veflinge",5485:"Skamby",5491:"Blommenslyst",5492:"Vissenbjerg",5500:"Middelfart",5540:"Ullerslev",5550:"Langeskov",5560:"Aarup",5580:"Nrre Aaby",5591:"Gelsted",5592:"Ejby",5600:"Faaborg",5610:"Assens",5620:"Glamsbjerg",5631:"Ebberup",5642:"Millinge",5672:"Broby",5683:"Haarby",5690:"Tommerup",5700:"Svendborg",5750:"Ringe",5762:"Vester Skerninge",5771:"Stenstrup",5772:"Kvrndrup",5792:"rslev",5800:"Nyborg",5853:"rbk",5854:"Gislev",5856:"Ryslinge",5863:"Ferritslev Fyn",5871:"Frrup",5874:"Hesselager",5881:"Skrup Fyn",5882:"Vejstrup",5883:"Oure",5884:"Gudme",5892:"Gudbjerg Sydfyn",5900:"Rudkbing",5932:"Humble",5935:"Bagenkop",5943:"Stryn",5953:"Tranekr",5960:"Marstal",5970:"rskbing",5985:"Sby r",6e3:"Kolding",6040:"Egtved",6051:"Almind",6052:"Viuf",6064:"Jordrup",6070:"Christiansfeld",6091:"Bjert",6092:"Snder Stenderup",6093:"Sjlund",6094:"Hejls",6100:"Haderslev",6200:"Aabenraa",6230:"Rdekro",6240:"Lgumkloster",6261:"Bredebro",6270:"Tnder",6280:"Hjer",6300:"Grsten",6310:"Broager",6320:"Egernsund",6330:"Padborg",6340:"Krus",6360:"Tinglev",6372:"Bylderup-Bov",6392:"Bolderslev",6400:"Snderborg",6430:"Nordborg",6440:"Augustenborg",6470:"Sydals",6500:"Vojens",6510:"Gram",6520:"Toftlund",6534:"Agerskov",6535:"Branderup J",6541:"Bevtoft",6560:"Sommersted",6580:"Vamdrup",6600:"Vejen",6621:"Gesten",6622:"Bkke",6623:"Vorbasse",6630:"Rdding",6640:"Lunderskov",6650:"Brrup",6660:"Lintrup",6670:"Holsted",6682:"Hovborg",6683:"Fvling",6690:"Grding",6700:"Esbjerg",6701:"Esbjerg",6705:"Esbjerg ",6710:"Esbjerg V",6715:"Esbjerg N",6720:"Fan",6731:"Tjreborg",6740:"Bramming",6752:"Glejbjerg",6753:"Agerbk",6760:"Ribe",6771:"Gredstedbro",6780:"Skrbk",6792:"Rm",6800:"Varde",6818:"rre",6823:"Ansager",6830:"Nrre Nebel",6840:"Oksbl",6851:"Janderup Vestj",6852:"Billum",6853:"Vejers Strand",6854:"Henne",6855:"Outrup",6857:"Blvand",6862:"Tistrup",6870:"lgod",6880:"Tarm",6893:"Hemmet",6900:"Skjern",6920:"Videbk",6933:"Kibk",6940:"Lem St",6950:"Ringkbing",6960:"Hvide Sande",6971:"Spjald",6973:"rnhj",6980:"Tim",6990:"Ulfborg",7e3:"Fredericia",7007:"Fredericia",7029:"Fredericia",7080:"Brkop",7100:"Vejle",7120:"Vejle st",7130:"Juelsminde",7140:"Stouby",7150:"Barrit",7160:"Trring",7171:"Uldum",7173:"Vonge",7182:"Bredsten",7183:"Randbl",7184:"Vandel",7190:"Billund",7200:"Grindsted",7250:"Hejnsvig",7260:"Snder Omme",7270:"Stakroge",7280:"Snder Felding",7300:"Jelling",7321:"Gadbjerg",7323:"Give",7330:"Brande",7361:"Ejstrupholm",7362:"Hampen",7400:"Herning",7430:"Ikast",7441:"Bording",7442:"Engesvang",7451:"Sunds",7470:"Karup J",7480:"Vildbjerg",7490:"Aulum",7500:"Holstebro",7540:"Haderup",7550:"Srvad",7560:"Hjerm",7570:"Vemb",7600:"Struer",7620:"Lemvig",7650:"Bvlingbjerg",7660:"Bkmarksbro",7673:"Harbore",7680:"Thyborn",7700:"Thisted",7730:"Hanstholm",7741:"Frstrup",7742:"Vesls",7752:"Snedsted",7755:"Bedsted Thy",7760:"Hurup Thy",7770:"Vestervig",7790:"Thyholm",7800:"Skive",7830:"Vinderup",7840:"Hjslev",7850:"Stoholm Jyll",7860:"Spttrup",7870:"Roslev",7884:"Fur",7900:"Nykbing M",7950:"Erslev",7960:"Karby",7970:"Redsted M",7980:"Vils",7990:"ster Assels",8e3:"Aarhus C",8100:"Aarhus C",8200:"Aarhus N",8210:"Aarhus V",8220:"Brabrand",8230:"byhj",8240:"Risskov",8245:"Risskov ",8250:"Eg",8260:"Viby J",8270:"Hjbjerg",8300:"Odder",8305:"Sams",8310:"Tranbjerg J",8320:"Mrslet",8330:"Beder",8340:"Malling",8350:"Hundslund",8355:"Solbjerg",8361:"Hasselager",8362:"Hrning",8370:"Hadsten",8380:"Trige",8381:"Tilst",8382:"Hinnerup",8400:"Ebeltoft",8410:"Rnde",8420:"Knebel",8444:"Balle",8450:"Hammel",8462:"Harlev J",8464:"Galten",8471:"Sabro",8472:"Sporup",8500:"Grenaa",8520:"Lystrup",8530:"Hjortshj",8541:"Skdstrup",8543:"Hornslet",8544:"Mrke",8550:"Ryomgrd",8560:"Kolind",8570:"Trustrup",8581:"Nimtofte",8585:"Glesborg",8586:"rum Djurs",8592:"Anholt",8600:"Silkeborg",8620:"Kjellerup",8632:"Lemming",8641:"Sorring",8643:"Ans By",8653:"Them",8654:"Bryrup",8660:"Skanderborg",8670:"Lsby",8680:"Ry",8700:"Horsens",8721:"Daugrd",8722:"Hedensted",8723:"Lsning",8732:"Hovedgrd",8740:"Brdstrup",8751:"Gedved",8752:"stbirk",8762:"Flemming",8763:"Rask Mlle",8765:"Klovborg",8766:"Nrre Snede",8781:"Stenderup",8783:"Hornsyld",8800:"Viborg",8830:"Tjele",8831:"Lgstrup",8832:"Skals",8840:"Rdkrsbro",8850:"Bjerringbro",8860:"Ulstrup",8870:"Lang",8881:"Thors",8882:"Frvang",8883:"Gjern",8900:"Randers C",8920:"Randers NV",8930:"Randers N",8940:"Randers SV",8950:"rsted",8960:"Randers S",8961:"Allingbro",8963:"Auning",8970:"Havndal",8981:"Spentrup",8983:"Gjerlev J",8990:"Frup",9e3:"Aalborg",9100:"Aalborg",9200:"Aalborg SV",9210:"Aalborg S",9220:"Aalborg st",9230:"Svenstrup J",9240:"Nibe",9260:"Gistrup",9270:"Klarup",9280:"Storvorde",9293:"Kongerslev",9300:"Sby",9310:"Vodskov",9320:"Hjallerup",9330:"Dronninglund",9340:"Asaa",9352:"Dybvad",9362:"Gandrup",9370:"Hals",9380:"Vestbjerg",9381:"Sulsted",9382:"Tylstrup",9400:"Nrresundby",9430:"Vadum",9440:"Aabybro",9460:"Brovst",9480:"Lkken",9490:"Pandrup",9492:"Blokhus",9493:"Saltum",9500:"Hobro",9510:"Arden",9520:"Skrping",9530:"Stvring",9541:"Suldrup",9550:"Mariager",9560:"Hadsund",9574:"Blum",9575:"Terndrup",9600:"Aars",9610:"Nrager",9620:"Aalestrup",9631:"Gedsted",9632:"Mldrup",9640:"Fars",9670:"Lgstr",9681:"Ranum",9690:"Fjerritslev",9700:"Brnderslev",9740:"Jerslev J",9750:"stervr",9760:"Vr",9800:"Hjrring",9830:"Trs",9850:"Hirtshals",9870:"Sindal",9881:"Bindslev",9900:"Frederikshavn",9940:"Ls",9970:"Strandby",9981:"Jerup",9982:"lbk",9990:"Skagen"};function oF(t){if(!t)return null;const e=t.replace(/\s/g,"");return e.length!==4||!/^\d{4}$/.test(e)?null:aF[e]||null}function lF(t,e,n){if(!t&&!e&&!n)return"";const r=[];if(t&&r.push(t),e||n){const i=[];e&&i.push(e),n&&i.push(n),r.push(i.join(" "))}return r.join(", ")}function MN({isOpen:t,onClose:e,onSave:n,project:r}){const[i,s]=oe.useState({name:"",description:"",customerName:"",customerPhone:"",customerEmail:"",customerAddress:"",streetAddress:"",postalCode:"",city:"",type:"fixed-price",fixedPrice:0,status:"planned"}),[a,o]=oe.useState({});oe.useEffect(()=>{if(r)if(r.streetAddress||r.postalCode||r.city)s({name:r.name||"",description:r.description||"",customerName:r.customerName||"",customerPhone:r.customerPhone||"",customerEmail:r.customerEmail||"",customerAddress:r.customerAddress||"",streetAddress:r.streetAddress||"",postalCode:r.postalCode||"",city:r.city||"",type:r.type||"fixed-price",fixedPrice:r.fixedPrice||0,status:r.status||"planned"});else if(r.customerAddress){const g=r.customerAddress.split(",").map(T=>T.trim());let m="",b="",x="";if(g.length>=2){m=g[0];const w=g[1].match(/^(\d{4})\s+(.+)$/);w&&(b=w[1],x=w[2])}else g.length===1&&(m=g[0]);s({name:r.name||"",description:r.description||"",customerName:r.customerName||"",customerPhone:r.customerPhone||"",customerEmail:r.customerEmail||"",customerAddress:r.customerAddress||"",streetAddress:m,postalCode:b,city:x,type:r.type||"fixed-price",fixedPrice:r.fixedPrice||0,status:r.status||"planned"})}else s({name:r.name||"",description:r.description||"",customerName:r.customerName||"",customerPhone:r.customerPhone||"",customerEmail:r.customerEmail||"",customerAddress:"",streetAddress:"",postalCode:"",city:"",type:r.type||"fixed-price",fixedPrice:r.fixedPrice||0,status:r.status||"planned"});else s({name:"",description:"",customerName:"",customerPhone:"",customerEmail:"",customerAddress:"",streetAddress:"",postalCode:"",city:"",type:"fixed-price",fixedPrice:0,status:"planned"});o({})},[r,t]);const l=g=>{const{name:m,value:b}=g.target;s(x=>({...x,[m]:b})),a[m]&&o(x=>({...x,[m]:null}))},c=g=>{const m=g.target.value.replace(/\D/g,"").slice(0,4);if(s(b=>({...b,postalCode:m})),m.length===4){const b=oF(m);b?(s(x=>({...x,city:b})),a.postalCode&&o(x=>({...x,postalCode:null}))):o(x=>({...x,postalCode:"Ugyldigt postnummer"}))}else a.postalCode&&o(b=>({...b,postalCode:null}))},d=()=>{const g={};return(!i.name||i.name.trim().length<3)&&(g.name="Sagsnavn skal vre mindst 3 tegn"),i.customerEmail&&!iF(i.customerEmail)&&(g.customerEmail="Ugyldig email adresse"),i.customerPhone&&!sF(i.customerPhone)&&(g.customerPhone="Telefonnummer skal vre 8 cifre"),i.postalCode&&i.postalCode.length!==4&&(g.postalCode="Postnummer skal vre 4 cifre"),i.type==="fixed-price"&&(!i.fixedPrice||i.fixedPrice<=0)&&(g.fixedPrice="Fast pris skal vre strre end 0"),o(g),Object.keys(g).length===0},p=g=>{if(g.preventDefault(),d()){const m=lF(i.streetAddress,i.postalCode,i.city);n({...i,customerAddress:m,streetAddress:i.streetAddress,postalCode:i.postalCode,city:i.city})}};return t?u.jsx("div",{className:"modal-overlay",children:u.jsxs("div",{className:"modal-content",onClick:g=>g.stopPropagation(),children:[u.jsxs("div",{className:"modal-header",children:[u.jsx("h2",{children:r?"Ret Sag":"Ny Sag"}),u.jsx("button",{className:"modal-close",onClick:e,children:""})]}),u.jsxs("form",{onSubmit:p,children:[u.jsxs("div",{className:"modal-body",children:[u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"name",children:"Sagsnavn *"}),u.jsx("input",{type:"text",id:"name",name:"name",value:i.name,onChange:l,className:a.name?"error":"",placeholder:"F.eks. Kkkenrenovering"}),a.name&&u.jsx("span",{className:"error-message",children:a.name})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"description",children:"Beskrivelse"}),u.jsx("textarea",{id:"description",name:"description",value:i.description,onChange:l,placeholder:"Kort beskrivelse af sagen...",rows:"3"})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"customerName",children:"Kundenavn"}),u.jsx("input",{type:"text",id:"customerName",name:"customerName",value:i.customerName,onChange:l,placeholder:"F.eks. Peter Jensen"})]}),u.jsxs("div",{className:"form-row",children:[u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"customerPhone",children:"Telefon"}),u.jsx("input",{type:"text",id:"customerPhone",name:"customerPhone",value:i.customerPhone,onChange:l,className:a.customerPhone?"error":"",placeholder:"12345678"}),a.customerPhone&&u.jsx("span",{className:"error-message",children:a.customerPhone})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"customerEmail",children:"Email"}),u.jsx("input",{type:"email",id:"customerEmail",name:"customerEmail",value:i.customerEmail,onChange:l,className:a.customerEmail?"error":"",placeholder:"kunde@example.com"}),a.customerEmail&&u.jsx("span",{className:"error-message",children:a.customerEmail})]})]}),u.jsx("div",{className:"form-section-divider",children:u.jsx("h3",{children:"Adresse"})}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"streetAddress",children:"Vejnavn og nummer"}),u.jsx("input",{type:"text",id:"streetAddress",name:"streetAddress",value:i.streetAddress,onChange:l,placeholder:"F.eks. Kongevejen 10"})]}),u.jsxs("div",{className:"form-row",children:[u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"postalCode",children:"Postnummer"}),u.jsx("input",{type:"text",id:"postalCode",name:"postalCode",value:i.postalCode,onChange:c,className:a.postalCode?"error":"",placeholder:"2830",maxLength:"4"}),a.postalCode&&u.jsx("span",{className:"error-message",children:a.postalCode}),u.jsx("small",{className:"form-hint",children:"Byen udfyldes automatisk"})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"city",children:"By"}),u.jsx("input",{type:"text",id:"city",name:"city",value:i.city,onChange:l,placeholder:"Holte",readOnly:!0,className:"autofilled-field"}),u.jsx("small",{className:"form-hint",children:"Udfyldes automatisk fra postnummer"})]})]}),u.jsx("div",{className:"form-section-divider",children:u.jsx("h3",{children:"Sagens detaljer"})}),u.jsxs("div",{className:"form-row",children:[u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"type",children:"Type *"}),u.jsxs("select",{id:"type",name:"type",value:i.type,onChange:l,children:[u.jsx("option",{value:"fixed-price",children:"Fast Pris"}),u.jsx("option",{value:"time-material",children:"Tid & Materiale"})]})]}),i.type==="fixed-price"&&u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"fixedPrice",children:"Fast pris (kr) *"}),u.jsx("input",{type:"number",id:"fixedPrice",name:"fixedPrice",value:i.fixedPrice,onChange:l,className:a.fixedPrice?"error":"",placeholder:"25000",min:"0"}),a.fixedPrice&&u.jsx("span",{className:"error-message",children:a.fixedPrice})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"status",children:"Status *"}),u.jsxs("select",{id:"status",name:"status",value:i.status,onChange:l,children:[u.jsx("option",{value:"planned",children:"Planlagt"}),u.jsx("option",{value:"in-progress",children:"I Gang"}),u.jsx("option",{value:"ready-for-invoice",children:"Klar til Faktura"}),u.jsx("option",{value:"closed",children:"Lukket"})]})]})]})]}),u.jsxs("div",{className:"modal-footer",children:[u.jsx("button",{type:"button",className:"btn-secondary",onClick:e,children:"Annuller"}),u.jsx("button",{type:"submit",className:"btn-primary",children:r?"Gem ndringer":"Opret Sag"})]})]})]})}):null}const ei=t=>new Intl.NumberFormat("da-DK",{style:"currency",currency:"DKK",minimumFractionDigits:0,maximumFractionDigits:2}).format(t),cF=t=>{if(!t)return"";const n=t.replace(/\D/g,"").match(/^(\d{2})(\d{2})(\d{2})(\d{2})$/);return n?`${n[1]} ${n[2]} ${n[3]} ${n[4]}`:t},uF=t=>t?`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(t)}`:"#",gp=t=>{if(!t)return"";typeof t=="string"&&(t=new Date(t));const e=String(t.getDate()).padStart(2,"0"),n=String(t.getMonth()+1).padStart(2,"0"),r=t.getFullYear();return`${e}/${n}/${r}`},J_=t=>!t&&t!==0?"0":Number(t).toFixed(1).replace(".",","),N1=["#5B8DBE","#7A9D54","#CD7672","#8B7FB8","#CC8E5E","#5B9D9D","#9D6B8B","#7B8D5B","#8B6B5B","#6B7B9D","#9D7B5B","#6B9D7B"],hF=t=>{if(!t)return N1[0];let e=0;for(let r=0;r<t.length;r++)e=t.charCodeAt(r)+((e<<5)-e);const n=Math.abs(e)%N1.length;return N1[n]};function dF(){const t=Uu(),{showSuccess:e,showError:n,showCriticalConfirm:r}=Ti(),[i,s]=oe.useState([]),[a,o]=oe.useState([]),[l,c]=oe.useState(!1),[d,p]=oe.useState(!1),[g,m]=oe.useState(null),[b,x]=oe.useState(""),[T,w]=oe.useState("all"),[N,C]=oe.useState("all"),[F,Q]=oe.useState({}),[B,j]=oe.useState(!1);oe.useEffect(()=>{y()},[]),oe.useEffect(()=>{L()},[i,b,T,N]);const y=async()=>{c(!0);try{const z=await ci(xn(_t,"projects")),$=[];z.forEach(ne=>{$.push({id:ne.id,...ne.data()})}),$.sort((ne,we)=>we.projectNumber&&ne.projectNumber?we.projectNumber.localeCompare(ne.projectNumber):0),s($),S($)}catch(z){console.error("Error loading projects:",z),n("Hovsa! Kunne ikke indlse sager. Prv igen.")}finally{c(!1)}},S=async z=>{const $={};for(const ne of z){const we=await ON(ne.id);$[ne.id]=FN(we)}Q($)},L=()=>{let z=i;b.trim()&&(z=z.filter($=>{var ne,we,O,Y,J;return((ne=$.name)==null?void 0:ne.toLowerCase().includes(b.toLowerCase()))||((we=$.customerName)==null?void 0:we.toLowerCase().includes(b.toLowerCase()))||((O=$.projectNumber)==null?void 0:O.toLowerCase().includes(b.toLowerCase()))||((Y=$.streetAddress)==null?void 0:Y.toLowerCase().includes(b.toLowerCase()))||((J=$.city)==null?void 0:J.toLowerCase().includes(b.toLowerCase()))})),T!=="all"&&(z=z.filter($=>$.status===T)),N!=="all"&&(z=z.filter($=>$.type===N)),o(z)},E=()=>{m(null),p(!0)},I=(z,$)=>{z.stopPropagation(),m($),p(!0)},k=async z=>{try{if(g)await Da(mn(_t,"projects",g.id),z),e("Sag opdateret!");else{const $=await tF();await Va(xn(_t,"projects"),{...z,projectNumber:$,createdAt:new Date().toISOString()}),e("Ny sag oprettet!")}p(!1),m(null),y()}catch($){console.error("Error saving project:",$),n("Hovsa! Kunne ikke gemme sagen. Prv igen.")}},M=async(z,$)=>{z.stopPropagation();const ne=F[$.id]||0;if(await r({title:"Slet sag permanent?",message:"Dette kan ikke fortrydes. Alle data p sagen vil blive slettet.",itemName:`${$.projectNumber} - ${$.name}`,warningText:ne>0?`Der er registreret ${ne} timer p denne sag`:null,confirmText:"Slet Permanent",cancelText:"Annuller"}))try{await Ma(mn(_t,"projects",$.id)),e("Sag slettet!"),y()}catch(O){console.error("Error deleting project:",O),n("Hovsa! Kunne ikke slette sagen. Prv igen.")}},te=z=>{t(`/sager/${z.id}`)},V=z=>z==="fixed-price"?"Fast Pris":"Tid & Materiale",U=z=>{const $={planned:{color:"#3498db",label:"Planlagt",icon:""},"in-progress":{color:"#27ae60",label:"I Gang",icon:""},"ready-for-invoice":{color:"#f39c12",label:"Klar til Faktura",icon:""},closed:{color:"#9b59b6",label:"Lukket",icon:""}};return $[z]||$.planned};return u.jsxs("div",{children:[u.jsx("div",{className:"page-header-friendly",children:u.jsxs("div",{className:"welcome-section",children:[u.jsx("h1",{children:"Hej! Her er dine sager "}),u.jsx("p",{className:"welcome-subtitle",children:"Klik p en sag for at se detaljer og timeregistreringer"}),u.jsx("img",{src:"/workers.png",alt:"",className:"page-header-clipart clipart-sager","aria-hidden":"true"})]})}),u.jsxs("div",{className:"content-card",children:[u.jsxs("div",{className:"sager-controls-new",children:[u.jsxs("div",{className:"search-section",children:[u.jsxs("div",{className:"search-box-large",children:[u.jsx("span",{className:"search-icon",children:""}),u.jsx("input",{type:"text",placeholder:"Skriv kundenavn eller sagsnavn...",value:b,onChange:z=>x(z.target.value),className:"search-input-large"})]}),u.jsxs("button",{className:"btn-filter-toggle",onClick:()=>j(!B),children:["Filtre ",B?"":""]}),u.jsxs("button",{className:"btn-create-friendly",onClick:E,children:[u.jsx("span",{className:"btn-icon-large",children:"+"})," Opret ny sag"]})]}),B&&u.jsxs("div",{className:"filter-panel",children:[u.jsxs("div",{className:"filter-group",children:[u.jsx("label",{children:"Status:"}),u.jsxs("select",{value:T,onChange:z=>w(z.target.value),className:"filter-select-friendly",children:[u.jsx("option",{value:"all",children:"Alle statusser"}),u.jsx("option",{value:"planned",children:" Planlagt"}),u.jsx("option",{value:"in-progress",children:" I Gang"}),u.jsx("option",{value:"ready-for-invoice",children:" Klar til Faktura"}),u.jsx("option",{value:"closed",children:" Lukket"})]})]}),u.jsxs("div",{className:"filter-group",children:[u.jsx("label",{children:"Type:"}),u.jsxs("select",{value:N,onChange:z=>C(z.target.value),className:"filter-select-friendly",children:[u.jsx("option",{value:"all",children:"Alle typer"}),u.jsx("option",{value:"fixed-price",children:"Fast Pris"}),u.jsx("option",{value:"time-material",children:"Tid & Materiale"})]})]})]})]}),l?u.jsxs("div",{className:"loading-friendly",children:[u.jsx("div",{className:"spinner"}),u.jsx("p",{children:"Henter dine sager..."})]}):a.length===0?u.jsxs("div",{className:"empty-state-friendly",children:[u.jsx("div",{className:"empty-icon",children:""}),u.jsx("h3",{children:i.length===0?"Ingen sager endnu":"Ingen sager matcher din sgning"}),u.jsx("p",{children:i.length===0?'Klik p "Opret ny sag" for at komme i gang!':"Prv at justere dine filtre eller sgning"}),i.length===0&&u.jsxs("button",{className:"btn-create-friendly",onClick:E,style:{marginTop:"20px"},children:[u.jsx("span",{className:"btn-icon-large",children:"+"})," Opret din frste sag"]})]}):u.jsx("div",{className:"projects-grid",children:a.map(z=>{const $=U(z.status),ne=F[z.id]||0,we=hF(z.id);return u.jsxs("div",{className:"project-card-new",onClick:()=>te(z),children:[u.jsxs("div",{className:"project-card-header-block",style:{backgroundColor:we},children:[u.jsxs("div",{className:"project-card-address-main",children:[u.jsx("div",{className:"address-street",children:z.streetAddress||"Adresse ikke angivet"}),u.jsx("div",{className:"address-postal",children:z.postalCode&&z.city?`${z.postalCode} ${z.city}`:z.customerAddress||""})]}),u.jsxs("div",{className:"project-card-actions-new",children:[u.jsx("button",{className:"card-action-btn-new edit",onClick:O=>I(O,z),title:"Ret sag",children:""}),u.jsx("button",{className:"card-action-btn-new delete",onClick:O=>M(O,z),title:"Slet sag",children:""})]})]}),u.jsx("h3",{className:"project-card-name",children:z.name}),u.jsxs("div",{className:"project-card-info",children:[u.jsxs("div",{className:"info-row-new",children:[u.jsx("span",{className:"info-label",children:"SAGSNR:"}),u.jsx("span",{className:"info-value",children:z.projectNumber})]}),u.jsxs("div",{className:"info-row-new",children:[u.jsx("span",{className:"info-label",children:"KUNDE:"}),u.jsx("span",{className:"info-value",children:z.customerName||"Ikke angivet"})]}),u.jsxs("div",{className:"info-row-new",children:[u.jsx("span",{className:"info-label",children:"TYPE:"}),u.jsx("span",{className:"info-value",children:V(z.type)})]}),u.jsxs("div",{className:"info-row-new",children:[u.jsx("span",{className:"info-label",children:"STATUS:"}),u.jsx("span",{className:"status-badge-new",style:{backgroundColor:$.color+"15",color:$.color,borderColor:$.color},children:$.label})]}),u.jsxs("div",{className:"info-row-new",children:[u.jsx("span",{className:"info-label",children:"TIMER REGISTRERET:"}),u.jsxs("span",{className:"info-value hours-value",children:[ne," Timer"]})]})]})]},z.id)})})]}),u.jsx(MN,{isOpen:d,onClose:()=>p(!1),onSave:k,project:g})]})}function fF({timeEntry:t,defaultRate:e,employees:n,onSave:r,onClose:i}){const[s,a]=oe.useState({date:"",duration:"",activity:"",billable:!0,rate:e,useCustomRate:!1,employeeName:"",selectedEmployees:[]}),[o,l]=oe.useState({});oe.useEffect(()=>{if(t)a({date:t.date||"",duration:String(t.duration||t.hours||""),activity:t.activity||t.description||"",billable:t.billable!==void 0?t.billable:!0,rate:t.rate||t.hourlyRate||e,useCustomRate:t.rate!==e,employeeName:t.employeeName||"",selectedEmployees:t.employeeName?[t.employeeName]:[]});else{const x=new Date().toISOString().split("T")[0];a(T=>({...T,date:x,duration:"",activity:"",billable:!0,rate:e,useCustomRate:!1,employeeName:n.length>0?n[0].name:"",selectedEmployees:[]}))}},[t,e,n,!0]);const d=x=>{if(!x)return 0;const T=String(x).replace(",",".");return parseFloat(T)||0},p=x=>{const{name:T,value:w,type:N,checked:C}=x.target;a(N==="checkbox"?T==="billable"?F=>({...F,billable:C,rate:C?F.useCustomRate?F.rate:e:0}):T==="useCustomRate"?F=>({...F,useCustomRate:C,rate:C&&F.rate||e}):F=>({...F,[T]:C}):F=>({...F,[T]:w})),o[T]&&l(F=>({...F,[T]:null}))},g=x=>{a(T=>{const N=T.selectedEmployees.includes(x)?T.selectedEmployees.filter(C=>C!==x):[...T.selectedEmployees,x];return{...T,selectedEmployees:N,employeeName:N.length>0?N.join(", "):""}})},m=()=>{const x={};if(!s.date)x.date="Dato er pkrvet";else{const w=new Date(s.date),N=new Date;N.setHours(0,0,0,0),w>N&&(x.date="Dato kan ikke vre i fremtiden")}const T=d(s.duration);if((!s.duration||T<=0)&&(x.duration="Varighed skal vre et positivt tal"),(!s.activity||s.activity.trim().length<3)&&(x.activity="Aktivitetsbeskrivelse skal vre mindst 3 tegn"),s.billable){const w=d(s.rate);(!s.rate||w<=0)&&(x.rate="Timepris skal vre et positivt tal")}return s.selectedEmployees.length===0&&(x.employeeName="Vlg mindst n medarbejder"),l(x),Object.keys(x).length===0},b=x=>{if(x.preventDefault(),m()){const T={date:s.date,duration:d(s.duration),activity:s.activity,billable:s.billable,rate:s.billable?d(s.rate):0,employeeName:s.employeeName};r(T)}};return u.jsx("div",{className:"modal-overlay",children:u.jsxs("div",{className:"modal-content time-entry-modal",onClick:x=>x.stopPropagation(),children:[u.jsxs("div",{className:"modal-header",children:[u.jsx("h2",{children:t?"Redigr Timer":"Tilfj Timer"}),u.jsx("button",{className:"modal-close",onClick:i,children:""})]}),u.jsxs("form",{onSubmit:b,className:"modal-form",children:[u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"date",children:"Dato *"}),u.jsx("input",{type:"date",id:"date",name:"date",value:s.date,onChange:p,className:o.date?"input-error":"",max:new Date().toISOString().split("T")[0]}),o.date&&u.jsx("span",{className:"error-text",children:o.date})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"duration",children:"Varighed (timer) *"}),u.jsx("input",{type:"text",id:"duration",name:"duration",value:s.duration,onChange:p,className:o.duration?"input-error":"",placeholder:"F.eks. 4,5"}),o.duration&&u.jsx("span",{className:"error-text",children:o.duration}),u.jsx("small",{className:"form-hint",children:"Brug komma for decimaler (f.eks. 4,5 timer)"})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{children:"Medarbejder(e) *"}),u.jsx("div",{className:"employee-multi-select",children:n.length===0?u.jsx("p",{className:"no-employees-text",children:"Ingen medarbejdere tilgngelige. Tilfj medarbejdere i Indstillinger."}):n.map(x=>u.jsxs("label",{className:"checkbox-modern",children:[u.jsx("input",{type:"checkbox",checked:s.selectedEmployees.includes(x.name),onChange:()=>g(x.name)}),u.jsx("span",{className:"checkbox-label",children:x.name})]},x.id))}),o.employeeName&&u.jsx("span",{className:"error-text",children:o.employeeName})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"activity",children:"Aktivitetsbeskrivelse *"}),u.jsx("textarea",{id:"activity",name:"activity",value:s.activity,onChange:p,className:o.activity?"input-error":"",rows:"3",placeholder:"Beskriv det udfrte arbejde..."}),o.activity&&u.jsx("span",{className:"error-text",children:o.activity})]}),u.jsx("div",{className:"checkbox-group-modern",children:u.jsxs("label",{className:"checkbox-modern",children:[u.jsx("input",{type:"checkbox",name:"billable",checked:s.billable,onChange:p}),u.jsx("span",{className:"checkbox-label",children:"Fakturerbar"})]})}),u.jsxs("div",{className:"rate-section",children:[u.jsx("label",{children:"Timepris (DKK) *"}),s.billable?u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:`rate-display ${s.useCustomRate?"inactive":"active"}`,children:[u.jsxs("span",{className:"rate-value",children:[e," kr"]}),u.jsx("span",{className:"rate-note",children:"Standard timepris"})]}),u.jsx("div",{className:"checkbox-group-modern",children:u.jsxs("label",{className:"checkbox-modern",children:[u.jsx("input",{type:"checkbox",name:"useCustomRate",checked:s.useCustomRate,onChange:p}),u.jsx("span",{className:"checkbox-label",children:"Brug tilpasset timepris"})]})}),s.useCustomRate&&u.jsxs("div",{className:"form-group",children:[u.jsx("input",{type:"text",name:"rate",value:s.rate,onChange:p,className:o.rate?"input-error":"",placeholder:"F.eks. 550"}),o.rate&&u.jsx("span",{className:"error-text",children:o.rate}),u.jsx("small",{className:"form-hint",children:"Brug komma for decimaler (f.eks. 550,50)"})]})]}):u.jsxs("div",{className:"rate-display disabled",children:[u.jsx("span",{className:"rate-value",children:"0 kr"}),u.jsx("span",{className:"rate-note",children:"Ikke fakturerbar"})]})]}),u.jsxs("div",{className:"modal-footer",children:[u.jsx("button",{type:"button",className:"btn-secondary",onClick:i,children:"Annuller"}),u.jsx("button",{type:"submit",className:"btn-primary",children:t?"Gem ndringer":"Tilfj timer"})]})]})]})})}function pF({purchase:t,project:e,suppliers:n,materials:r,onSave:i,onClose:s}){const[a,o]=oe.useState({date:"",materialName:"",materialId:null,sku:"",quantity:"",unit:"stk",category:"",supplierId:"",supplierName:"",purchasePrice:"",sellingPrice:"",paymentMethod:"Firmakort",notes:""}),[l,c]=oe.useState({}),[d,p]=oe.useState(!0),[g]=oe.useState(50),m=["stk","m","m","m","kg","liter","pose","rulle","palle"],b=["Tr","Gips","El-materialer","VVS","Maling","Vrktj","Diverse"],x=["Firmakort","Faktura","Kontant","MobilePay"];oe.useEffect(()=>{if(t)o({date:t.date||"",materialName:t.materialName||"",materialId:t.materialId||null,sku:t.sku||"",quantity:String(t.quantity||""),unit:t.unit||"stk",category:t.category||"",supplierId:t.supplierId||"",supplierName:t.supplierName||"",purchasePrice:String(t.purchasePrice||""),sellingPrice:String(t.sellingPrice||""),paymentMethod:t.paymentMethod||"Firmakort",notes:t.notes||""}),p(!1);else{const j=new Date().toISOString().split("T")[0];o(y=>({...y,date:j}))}},[t]);const T=j=>{if(!j)return 0;const y=String(j).replace(",",".");return parseFloat(y)||0},w=j=>String(j).replace(".",","),N=j=>{const{name:y,value:S}=j.target;o(L=>{const E={...L,[y]:S};if(y==="materialId"&&S){const I=r.find(k=>k.id===S);if(I&&(E.materialName=I.name,E.unit=I.unit,E.category=I.category,E.sku=I.sku||"",I.defaultSupplierId)){E.supplierId=I.defaultSupplierId;const k=n.find(M=>M.id===I.defaultSupplierId);k&&(E.supplierName=k.name)}}if(y==="supplierId"&&S){const I=n.find(k=>k.id===S);I&&(E.supplierName=I.name)}if(y==="purchasePrice"&&d){const I=T(S);if(I>0){const k=g/100,M=I*(1+k);E.sellingPrice=w(M.toFixed(2))}}return E}),l[y]&&c(L=>({...L,[y]:null}))},C=j=>{p(!1),N(j)},F=()=>{const j={};a.date||(j.date="Dato er pkrvet"),(!a.materialName||a.materialName.trim().length<2)&&(j.materialName="Materiale navn er pkrvet");const y=T(a.quantity);(!a.quantity||y<=0)&&(j.quantity="Antal skal vre strre end 0"),a.unit||(j.unit="Enhed er pkrvet"),a.category||(j.category="Kategori er pkrvet"),(!a.supplierName||a.supplierName.trim().length<2)&&(j.supplierName="Leverandr er pkrvet");const S=T(a.purchasePrice);(!a.purchasePrice||S<0)&&(j.purchasePrice="Indkbspris er pkrvet");const L=T(a.sellingPrice);return(!a.sellingPrice||L<0)&&(j.sellingPrice="Salgspris er pkrvet"),L<S&&(j.sellingPrice="Salgspris br vre hjere end indkbspris"),c(j),Object.keys(j).length===0},Q=j=>{if(j.preventDefault(),F()){const y={caseId:e.id,caseNumber:e.projectNumber,caseName:e.name,date:a.date,materialId:a.materialId||null,materialName:a.materialName.trim(),sku:a.sku.trim(),quantity:T(a.quantity),unit:a.unit,category:a.category,supplierId:a.supplierId||null,supplierName:a.supplierName.trim(),purchasePrice:T(a.purchasePrice),sellingPrice:T(a.sellingPrice),paymentMethod:a.paymentMethod,notes:a.notes.trim()};i(y)}},B=()=>{const j=T(a.purchasePrice),y=T(a.sellingPrice);return j>0?((y-j)/j*100).toFixed(1):"0"};return u.jsx("div",{className:"modal-overlay",children:u.jsxs("div",{className:"modal-content material-purchase-modal",onClick:j=>j.stopPropagation(),children:[u.jsxs("div",{className:"modal-header",children:[u.jsx("h2",{children:t?"Redigr Materiale":"Tilfj Materiale"}),u.jsx("button",{className:"modal-close",onClick:s,children:""})]}),u.jsxs("form",{onSubmit:Q,className:"modal-form",children:[u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"date",children:"Dato *"}),u.jsx("input",{type:"date",id:"date",name:"date",value:a.date,onChange:N,className:l.date?"input-error":"",max:new Date().toISOString().split("T")[0]}),l.date&&u.jsx("span",{className:"error-text",children:l.date})]}),r.length>0&&u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"materialId",children:"Vlg fra katalog (valgfrit)"}),u.jsxs("select",{id:"materialId",name:"materialId",value:a.materialId||"",onChange:N,children:[u.jsx("option",{value:"",children:"-- Skriv nyt materiale --"}),r.map(j=>u.jsxs("option",{value:j.id,children:[j.name," (",j.unit,")"]},j.id))]})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"materialName",children:"Materiale *"}),u.jsx("input",{type:"text",id:"materialName",name:"materialName",value:a.materialName,onChange:N,className:l.materialName?"input-error":"",placeholder:"F.eks. Gipsplader 13mm"}),l.materialName&&u.jsx("span",{className:"error-text",children:l.materialName})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"sku",children:"Artikelnummer / Varenummer"}),u.jsx("input",{type:"text",id:"sku",name:"sku",value:a.sku,onChange:N,placeholder:"F.eks. 123456"}),u.jsx("small",{className:"form-hint",children:"Leverandrens varenummer - hjlper med faktura-afstemning"})]}),u.jsxs("div",{className:"form-row",children:[u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"quantity",children:"Antal *"}),u.jsx("input",{type:"text",id:"quantity",name:"quantity",value:a.quantity,onChange:N,className:l.quantity?"input-error":"",placeholder:"F.eks. 15"}),l.quantity&&u.jsx("span",{className:"error-text",children:l.quantity})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"unit",children:"Enhed *"}),u.jsx("select",{id:"unit",name:"unit",value:a.unit,onChange:N,className:l.unit?"input-error":"",children:m.map(j=>u.jsx("option",{value:j,children:j},j))}),l.unit&&u.jsx("span",{className:"error-text",children:l.unit})]})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"category",children:"Kategori *"}),u.jsxs("select",{id:"category",name:"category",value:a.category,onChange:N,className:l.category?"input-error":"",children:[u.jsx("option",{value:"",children:"-- Vlg kategori --"}),b.map(j=>u.jsx("option",{value:j,children:j},j))]}),l.category&&u.jsx("span",{className:"error-text",children:l.category})]}),n.length>0?u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"supplierId",children:"Leverandr *"}),u.jsxs("select",{id:"supplierId",name:"supplierId",value:a.supplierId,onChange:N,className:l.supplierName?"input-error":"",children:[u.jsx("option",{value:"",children:"-- Vlg leverandr --"}),n.map(j=>u.jsx("option",{value:j.id,children:j.name},j.id))]}),l.supplierName&&u.jsx("span",{className:"error-text",children:l.supplierName})]}):u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"supplierName",children:"Leverandr *"}),u.jsx("input",{type:"text",id:"supplierName",name:"supplierName",value:a.supplierName,onChange:N,className:l.supplierName?"input-error":"",placeholder:"F.eks. XL-BYG"}),l.supplierName&&u.jsx("span",{className:"error-text",children:l.supplierName})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"purchasePrice",children:"Indkbspris (DKK) *"}),u.jsx("input",{type:"text",id:"purchasePrice",name:"purchasePrice",value:a.purchasePrice,onChange:N,className:l.purchasePrice?"input-error":"",placeholder:"F.eks. 2850"}),l.purchasePrice&&u.jsx("span",{className:"error-text",children:l.purchasePrice}),u.jsx("small",{className:"form-hint",children:"Total indkbspris for det angivne antal"})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"sellingPrice",children:"Salgspris (DKK) *"}),u.jsx("input",{type:"text",id:"sellingPrice",name:"sellingPrice",value:a.sellingPrice,onChange:C,className:l.sellingPrice?"input-error":"",placeholder:"F.eks. 4275"}),l.sellingPrice&&u.jsx("span",{className:"error-text",children:l.sellingPrice}),u.jsx("small",{className:"form-hint",children:d?`Auto-beregnet med ${g}% markup`:`Margin: ${B()}%`})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"paymentMethod",children:"Betalingsmetode"}),u.jsx("select",{id:"paymentMethod",name:"paymentMethod",value:a.paymentMethod,onChange:N,children:x.map(j=>u.jsx("option",{value:j,children:j},j))})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"notes",children:"Noter"}),u.jsx("textarea",{id:"notes",name:"notes",value:a.notes,onChange:N,rows:"2",placeholder:"Ekstra bemrkninger..."})]}),u.jsxs("div",{className:"modal-footer",children:[u.jsx("button",{type:"button",className:"btn-secondary",onClick:s,children:"Annuller"}),u.jsx("button",{type:"submit",className:"btn-primary",children:t?"Gem ndringer":"Tilfj materiale"})]})]})]})})}const mF=async(t,e="Admin")=>{try{return{success:!0,id:(await Va(xn(_t,"suppliers"),{...t,createdAt:new Date().toISOString(),createdBy:e,updatedAt:new Date().toISOString(),updatedBy:e})).id}}catch(n){return console.error("Error creating supplier:",n),{success:!1,error:n.message}}},VN=async()=>{try{const t=await ci(xn(_t,"suppliers")),e=[];return t.forEach(n=>{e.push({id:n.id,...n.data()})}),e.sort((n,r)=>(n.name||"").localeCompare(r.name)),{success:!0,suppliers:e}}catch(t){return console.error("Error getting suppliers:",t),{success:!1,error:t.message,suppliers:[]}}},gF=async(t,e,n="Admin")=>{try{return await Da(mn(_t,"suppliers",t),{...e,updatedAt:new Date().toISOString(),updatedBy:n}),{success:!0}}catch(r){return console.error("Error updating supplier:",r),{success:!1,error:r.message}}},vF=async t=>{try{return await Ma(mn(_t,"suppliers",t)),{success:!0}}catch(e){return console.error("Error deleting supplier:",e),{success:!1,error:e.message}}},yF=async(t,e="Admin")=>{try{return{success:!0,id:(await Va(xn(_t,"materials"),{...t,createdAt:new Date().toISOString(),createdBy:e,updatedAt:new Date().toISOString(),updatedBy:e})).id}}catch(n){return console.error("Error creating material:",n),{success:!1,error:n.message}}},UN=async()=>{try{const t=await ci(xn(_t,"materials")),e=[];return t.forEach(n=>{e.push({id:n.id,...n.data()})}),e.sort((n,r)=>(n.name||"").localeCompare(r.name)),{success:!0,materials:e}}catch(t){return console.error("Error getting materials:",t),{success:!1,error:t.message,materials:[]}}},BN=async(t,e,n="Admin")=>{try{return await Da(mn(_t,"materials",t),{...e,updatedAt:new Date().toISOString(),updatedBy:n}),{success:!0}}catch(r){return console.error("Error updating material:",r),{success:!1,error:r.message}}},wF=async t=>{try{return await Ma(mn(_t,"materials",t)),{success:!0}}catch(e){return console.error("Error deleting material:",e),{success:!1,error:e.message}}},_F=async(t,e="Admin")=>{try{const n=t.purchasePrice,i=t.sellingPrice-n,s=n>0?i/n*100:0,a=await Va(xn(_t,"materialPurchases"),{...t,marginKr:i,marginPercent:s,createdAt:new Date().toISOString(),createdBy:e,updatedAt:new Date().toISOString(),updatedBy:e});if(t.materialId&&t.quantity>0){const o=t.purchasePrice/t.quantity;await BN(t.materialId,{lastPurchasePrice:o,lastPurchaseDate:t.date},e)}return{success:!0,id:a.id}}catch(n){return console.error("Error creating material purchase:",n),{success:!1,error:n.message}}},bF=async t=>{try{const e=zd(xn(_t,"materialPurchases"),ng("caseId","==",t),Z2("date","desc")),n=await ci(e),r=[];return n.forEach(i=>{r.push({id:i.id,...i.data()})}),{success:!0,purchases:r}}catch(e){return console.error("Error getting case material purchases:",e),{success:!1,error:e.message,purchases:[]}}},xF=async()=>{try{const t=zd(xn(_t,"materialPurchases"),Z2("date","desc")),e=await ci(t),n=[];return e.forEach(r=>{n.push({id:r.id,...r.data()})}),{success:!0,purchases:n}}catch(t){return console.error("Error getting all material purchases:",t),{success:!1,error:t.message,purchases:[]}}},SF=async(t,e,n="Admin")=>{try{let r={...e};if(e.purchasePrice!==void 0||e.sellingPrice!==void 0){const s=(await rg(mn(_t,"materialPurchases",t))).data(),a=e.purchasePrice??s.purchasePrice,l=(e.sellingPrice??s.sellingPrice)-a,c=a>0?l/a*100:0;r.marginKr=l,r.marginPercent=c}return await Da(mn(_t,"materialPurchases",t),{...r,updatedAt:new Date().toISOString(),updatedBy:n}),{success:!0}}catch(r){return console.error("Error updating material purchase:",r),{success:!1,error:r.message}}},KN=async t=>{try{return await Ma(mn(_t,"materialPurchases",t)),{success:!0}}catch(e){return console.error("Error deleting material purchase:",e),{success:!1,error:e.message}}},qN=t=>!t||t.length===0?0:t.reduce((e,n)=>e+(n.purchasePrice||0),0),zN=t=>!t||t.length===0?0:t.reduce((e,n)=>e+(n.sellingPrice||0),0),NF=t=>{const e=qN(t);return zN(t)-e};function AF(t,e){return e.forEach(function(n){n&&typeof n!="string"&&!Array.isArray(n)&&Object.keys(n).forEach(function(r){if(r!=="default"&&!(r in t)){var i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:function(){return n[r]}})}})}),Object.freeze(t)}function $N(t,e){return new Promise(function(n,r){let i;return EF(t).then(function(s){try{return i=s,n(new Blob([e.slice(0,2),i,e.slice(2)],{type:"image/jpeg"}))}catch(a){return r(a)}},r)})}const EF=t=>new Promise((e,n)=>{const r=new FileReader;r.addEventListener("load",({target:{result:i}})=>{const s=new DataView(i);let a=0;if(s.getUint16(a)!==65496)return n("not a valid JPEG");for(a+=2;;){const o=s.getUint16(a);if(o===65498)break;const l=s.getUint16(a+2);if(o===65505&&s.getUint32(a+4)===1165519206){const c=a+10;let d;switch(s.getUint16(c)){case 18761:d=!0;break;case 19789:d=!1;break;default:return n("TIFF header contains invalid endian")}if(s.getUint16(c+2,d)!==42)return n("TIFF header contains invalid version");const p=s.getUint32(c+4,d),g=c+p+2+12*s.getUint16(c+p,d);for(let m=c+p+2;m<g;m+=12)if(s.getUint16(m,d)==274){if(s.getUint16(m+2,d)!==3)return n("Orientation data type is invalid");if(s.getUint32(m+4,d)!==1)return n("Orientation data count is invalid");s.setUint16(m+8,1,d);break}return e(i.slice(a,a+2+l))}a+=2+l}return e(new Blob)}),r.readAsArrayBuffer(t)});var hm={},kF={get exports(){return hm},set exports(t){hm=t}};(function(t){var e,n,r={};kF.exports=r,r.parse=function(i,s){for(var a=r.bin.readUshort,o=r.bin.readUint,l=0,c={},d=new Uint8Array(i),p=d.length-4;o(d,p)!=101010256;)p--;l=p,l+=4;var g=a(d,l+=4);a(d,l+=2);var m=o(d,l+=2),b=o(d,l+=4);l+=4,l=b;for(var x=0;x<g;x++){o(d,l),l+=4,l+=4,l+=4,o(d,l+=4),m=o(d,l+=4);var T=o(d,l+=4),w=a(d,l+=4),N=a(d,l+2),C=a(d,l+4);l+=6;var F=o(d,l+=8);l+=4,l+=w+N+C,r._readLocal(d,F,c,m,T,s)}return c},r._readLocal=function(i,s,a,o,l,c){var d=r.bin.readUshort,p=r.bin.readUint;p(i,s),d(i,s+=4),d(i,s+=2);var g=d(i,s+=2);p(i,s+=2),p(i,s+=4),s+=4;var m=d(i,s+=8),b=d(i,s+=2);s+=2;var x=r.bin.readUTF8(i,s,m);if(s+=m,s+=b,c)a[x]={size:l,csize:o};else{var T=new Uint8Array(i.buffer,s);if(g==0)a[x]=new Uint8Array(T.buffer.slice(s,s+o));else{if(g!=8)throw"unknown compression method: "+g;var w=new Uint8Array(l);r.inflateRaw(T,w),a[x]=w}}},r.inflateRaw=function(i,s){return r.F.inflate(i,s)},r.inflate=function(i,s){return i[0],i[1],r.inflateRaw(new Uint8Array(i.buffer,i.byteOffset+2,i.length-6),s)},r.deflate=function(i,s){s==null&&(s={level:6});var a=0,o=new Uint8Array(50+Math.floor(1.1*i.length));o[a]=120,o[a+1]=156,a+=2,a=r.F.deflateRaw(i,o,a,s.level);var l=r.adler(i,0,i.length);return o[a+0]=l>>>24&255,o[a+1]=l>>>16&255,o[a+2]=l>>>8&255,o[a+3]=l>>>0&255,new Uint8Array(o.buffer,0,a+4)},r.deflateRaw=function(i,s){s==null&&(s={level:6});var a=new Uint8Array(50+Math.floor(1.1*i.length)),o=r.F.deflateRaw(i,a,o,s.level);return new Uint8Array(a.buffer,0,o)},r.encode=function(i,s){s==null&&(s=!1);var a=0,o=r.bin.writeUint,l=r.bin.writeUshort,c={};for(var d in i){var p=!r._noNeed(d)&&!s,g=i[d],m=r.crc.crc(g,0,g.length);c[d]={cpr:p,usize:g.length,crc:m,file:p?r.deflateRaw(g):g}}for(var d in c)a+=c[d].file.length+30+46+2*r.bin.sizeUTF8(d);a+=22;var b=new Uint8Array(a),x=0,T=[];for(var d in c){var w=c[d];T.push(x),x=r._writeHeader(b,x,d,w,0)}var N=0,C=x;for(var d in c)w=c[d],T.push(x),x=r._writeHeader(b,x,d,w,1,T[N++]);var F=x-C;return o(b,x,101010256),x+=4,l(b,x+=4,N),l(b,x+=2,N),o(b,x+=2,F),o(b,x+=4,C),x+=4,x+=2,b.buffer},r._noNeed=function(i){var s=i.split(".").pop().toLowerCase();return"png,jpg,jpeg,zip".indexOf(s)!=-1},r._writeHeader=function(i,s,a,o,l,c){var d=r.bin.writeUint,p=r.bin.writeUshort,g=o.file;return d(i,s,l==0?67324752:33639248),s+=4,l==1&&(s+=2),p(i,s,20),p(i,s+=2,0),p(i,s+=2,o.cpr?8:0),d(i,s+=2,0),d(i,s+=4,o.crc),d(i,s+=4,g.length),d(i,s+=4,o.usize),p(i,s+=4,r.bin.sizeUTF8(a)),p(i,s+=2,0),s+=2,l==1&&(s+=2,s+=2,d(i,s+=6,c),s+=4),s+=r.bin.writeUTF8(i,s,a),l==0&&(i.set(g,s),s+=g.length),s},r.crc={table:function(){for(var i=new Uint32Array(256),s=0;s<256;s++){for(var a=s,o=0;o<8;o++)1&a?a=3988292384^a>>>1:a>>>=1;i[s]=a}return i}(),update:function(i,s,a,o){for(var l=0;l<o;l++)i=r.crc.table[255&(i^s[a+l])]^i>>>8;return i},crc:function(i,s,a){return 4294967295^r.crc.update(4294967295,i,s,a)}},r.adler=function(i,s,a){for(var o=1,l=0,c=s,d=s+a;c<d;){for(var p=Math.min(c+5552,d);c<p;)l+=o+=i[c++];o%=65521,l%=65521}return l<<16|o},r.bin={readUshort:function(i,s){return i[s]|i[s+1]<<8},writeUshort:function(i,s,a){i[s]=255&a,i[s+1]=a>>8&255},readUint:function(i,s){return 16777216*i[s+3]+(i[s+2]<<16|i[s+1]<<8|i[s])},writeUint:function(i,s,a){i[s]=255&a,i[s+1]=a>>8&255,i[s+2]=a>>16&255,i[s+3]=a>>24&255},readASCII:function(i,s,a){for(var o="",l=0;l<a;l++)o+=String.fromCharCode(i[s+l]);return o},writeASCII:function(i,s,a){for(var o=0;o<a.length;o++)i[s+o]=a.charCodeAt(o)},pad:function(i){return i.length<2?"0"+i:i},readUTF8:function(i,s,a){for(var o,l="",c=0;c<a;c++)l+="%"+r.bin.pad(i[s+c].toString(16));try{o=decodeURIComponent(l)}catch{return r.bin.readASCII(i,s,a)}return o},writeUTF8:function(i,s,a){for(var o=a.length,l=0,c=0;c<o;c++){var d=a.charCodeAt(c);if(!(4294967168&d))i[s+l]=d,l++;else if(!(4294965248&d))i[s+l]=192|d>>6,i[s+l+1]=128|d>>0&63,l+=2;else if(!(4294901760&d))i[s+l]=224|d>>12,i[s+l+1]=128|d>>6&63,i[s+l+2]=128|d>>0&63,l+=3;else{if(4292870144&d)throw"e";i[s+l]=240|d>>18,i[s+l+1]=128|d>>12&63,i[s+l+2]=128|d>>6&63,i[s+l+3]=128|d>>0&63,l+=4}}return l},sizeUTF8:function(i){for(var s=i.length,a=0,o=0;o<s;o++){var l=i.charCodeAt(o);if(!(4294967168&l))a++;else if(!(4294965248&l))a+=2;else if(!(4294901760&l))a+=3;else{if(4292870144&l)throw"e";a+=4}}return a}},r.F={},r.F.deflateRaw=function(i,s,a,o){var l=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][o],c=r.F.U,d=r.F._goodIndex;r.F._hash;var p=r.F._putsE,g=0,m=a<<3,b=0,x=i.length;if(o==0){for(;g<x;)p(s,m,g+(E=Math.min(65535,x-g))==x?1:0),m=r.F._copyExact(i,g,E,s,m+8),g+=E;return m>>>3}var T=c.lits,w=c.strt,N=c.prev,C=0,F=0,Q=0,B=0,j=0,y=0;for(x>2&&(w[y=r.F._hash(i,0)]=0),g=0;g<x;g++){if(j=y,g+1<x-2){y=r.F._hash(i,g+1);var S=g+1&32767;N[S]=w[y],w[y]=S}if(b<=g){(C>14e3||F>26697)&&x-g>100&&(b<g&&(T[C]=g-b,C+=2,b=g),m=r.F._writeBlock(g==x-1||b==x?1:0,T,C,B,i,Q,g-Q,s,m),C=F=B=0,Q=g);var L=0;g<x-2&&(L=r.F._bestMatch(i,g,N,j,Math.min(l[2],x-g),l[3]));var E=L>>>16,I=65535&L;if(L!=0){I=65535&L;var k=d(E=L>>>16,c.of0);c.lhst[257+k]++;var M=d(I,c.df0);c.dhst[M]++,B+=c.exb[k]+c.dxb[M],T[C]=E<<23|g-b,T[C+1]=I<<16|k<<8|M,C+=2,b=g+E}else c.lhst[i[g]]++;F++}}for(Q==g&&i.length!=0||(b<g&&(T[C]=g-b,C+=2,b=g),m=r.F._writeBlock(1,T,C,B,i,Q,g-Q,s,m),C=0,F=0,C=F=B=0,Q=g);7&m;)m++;return m>>>3},r.F._bestMatch=function(i,s,a,o,l,c){var d=32767&s,p=a[d],g=d-p+32768&32767;if(p==d||o!=r.F._hash(i,s-g))return 0;for(var m=0,b=0,x=Math.min(32767,s);g<=x&&--c!=0&&p!=d;){if(m==0||i[s+m]==i[s+m-g]){var T=r.F._howLong(i,s,g);if(T>m){if(b=g,(m=T)>=l)break;g+2<T&&(T=g+2);for(var w=0,N=0;N<T-2;N++){var C=s-g+N+32768&32767,F=C-a[C]+32768&32767;F>w&&(w=F,p=C)}}}g+=(d=p)-(p=a[d])+32768&32767}return m<<16|b},r.F._howLong=function(i,s,a){if(i[s]!=i[s-a]||i[s+1]!=i[s+1-a]||i[s+2]!=i[s+2-a])return 0;var o=s,l=Math.min(i.length,s+258);for(s+=3;s<l&&i[s]==i[s-a];)s++;return s-o},r.F._hash=function(i,s){return(i[s]<<8|i[s+1])+(i[s+2]<<4)&65535},r.saved=0,r.F._writeBlock=function(i,s,a,o,l,c,d,p,g){var m,b,x,T,w,N,C,F,Q,B=r.F.U,j=r.F._putsF,y=r.F._putsE;B.lhst[256]++,b=(m=r.F.getTrees())[0],x=m[1],T=m[2],w=m[3],N=m[4],C=m[5],F=m[6],Q=m[7];var S=32+(g+3&7?8-(g+3&7):0)+(d<<3),L=o+r.F.contSize(B.fltree,B.lhst)+r.F.contSize(B.fdtree,B.dhst),E=o+r.F.contSize(B.ltree,B.lhst)+r.F.contSize(B.dtree,B.dhst);E+=14+3*C+r.F.contSize(B.itree,B.ihst)+(2*B.ihst[16]+3*B.ihst[17]+7*B.ihst[18]);for(var I=0;I<286;I++)B.lhst[I]=0;for(I=0;I<30;I++)B.dhst[I]=0;for(I=0;I<19;I++)B.ihst[I]=0;var k=S<L&&S<E?0:L<E?1:2;if(j(p,g,i),j(p,g+1,k),g+=3,k==0){for(;7&g;)g++;g=r.F._copyExact(l,c,d,p,g)}else{var M,te;if(k==1&&(M=B.fltree,te=B.fdtree),k==2){r.F.makeCodes(B.ltree,b),r.F.revCodes(B.ltree,b),r.F.makeCodes(B.dtree,x),r.F.revCodes(B.dtree,x),r.F.makeCodes(B.itree,T),r.F.revCodes(B.itree,T),M=B.ltree,te=B.dtree,y(p,g,w-257),y(p,g+=5,N-1),y(p,g+=5,C-4),g+=4;for(var V=0;V<C;V++)y(p,g+3*V,B.itree[1+(B.ordr[V]<<1)]);g+=3*C,g=r.F._codeTiny(F,B.itree,p,g),g=r.F._codeTiny(Q,B.itree,p,g)}for(var U=c,z=0;z<a;z+=2){for(var $=s[z],ne=$>>>23,we=U+(8388607&$);U<we;)g=r.F._writeLit(l[U++],M,p,g);if(ne!=0){var O=s[z+1],Y=O>>16,J=O>>8&255,H=255&O;y(p,g=r.F._writeLit(257+J,M,p,g),ne-B.of0[J]),g+=B.exb[J],j(p,g=r.F._writeLit(H,te,p,g),Y-B.df0[H]),g+=B.dxb[H],U+=ne}}g=r.F._writeLit(256,M,p,g)}return g},r.F._copyExact=function(i,s,a,o,l){var c=l>>>3;return o[c]=a,o[c+1]=a>>>8,o[c+2]=255-o[c],o[c+3]=255-o[c+1],c+=4,o.set(new Uint8Array(i.buffer,s,a),c),l+(a+4<<3)},r.F.getTrees=function(){for(var i=r.F.U,s=r.F._hufTree(i.lhst,i.ltree,15),a=r.F._hufTree(i.dhst,i.dtree,15),o=[],l=r.F._lenCodes(i.ltree,o),c=[],d=r.F._lenCodes(i.dtree,c),p=0;p<o.length;p+=2)i.ihst[o[p]]++;for(p=0;p<c.length;p+=2)i.ihst[c[p]]++;for(var g=r.F._hufTree(i.ihst,i.itree,7),m=19;m>4&&i.itree[1+(i.ordr[m-1]<<1)]==0;)m--;return[s,a,g,l,d,m,o,c]},r.F.getSecond=function(i){for(var s=[],a=0;a<i.length;a+=2)s.push(i[a+1]);return s},r.F.nonZero=function(i){for(var s="",a=0;a<i.length;a+=2)i[a+1]!=0&&(s+=(a>>1)+",");return s},r.F.contSize=function(i,s){for(var a=0,o=0;o<s.length;o++)a+=s[o]*i[1+(o<<1)];return a},r.F._codeTiny=function(i,s,a,o){for(var l=0;l<i.length;l+=2){var c=i[l],d=i[l+1];o=r.F._writeLit(c,s,a,o);var p=c==16?2:c==17?3:7;c>15&&(r.F._putsE(a,o,d,p),o+=p)}return o},r.F._lenCodes=function(i,s){for(var a=i.length;a!=2&&i[a-1]==0;)a-=2;for(var o=0;o<a;o+=2){var l=i[o+1],c=o+3<a?i[o+3]:-1,d=o+5<a?i[o+5]:-1,p=o==0?-1:i[o-1];if(l==0&&c==l&&d==l){for(var g=o+5;g+2<a&&i[g+2]==l;)g+=2;(m=Math.min(g+1-o>>>1,138))<11?s.push(17,m-3):s.push(18,m-11),o+=2*m-2}else if(l==p&&c==l&&d==l){for(g=o+5;g+2<a&&i[g+2]==l;)g+=2;var m=Math.min(g+1-o>>>1,6);s.push(16,m-3),o+=2*m-2}else s.push(l,0)}return a>>>1},r.F._hufTree=function(i,s,a){var o=[],l=i.length,c=s.length,d=0;for(d=0;d<c;d+=2)s[d]=0,s[d+1]=0;for(d=0;d<l;d++)i[d]!=0&&o.push({lit:d,f:i[d]});var p=o.length,g=o.slice(0);if(p==0)return 0;if(p==1){var m=o[0].lit;return g=m==0?1:0,s[1+(m<<1)]=1,s[1+(g<<1)]=1,1}o.sort(function(F,Q){return F.f-Q.f});var b=o[0],x=o[1],T=0,w=1,N=2;for(o[0]={lit:-1,f:b.f+x.f,l:b,r:x,d:0};w!=p-1;)b=T!=w&&(N==p||o[T].f<o[N].f)?o[T++]:o[N++],x=T!=w&&(N==p||o[T].f<o[N].f)?o[T++]:o[N++],o[w++]={lit:-1,f:b.f+x.f,l:b,r:x};var C=r.F.setDepth(o[w-1],0);for(C>a&&(r.F.restrictDepth(g,a,C),C=a),d=0;d<p;d++)s[1+(g[d].lit<<1)]=g[d].d;return C},r.F.setDepth=function(i,s){return i.lit!=-1?(i.d=s,s):Math.max(r.F.setDepth(i.l,s+1),r.F.setDepth(i.r,s+1))},r.F.restrictDepth=function(i,s,a){var o=0,l=1<<a-s,c=0;for(i.sort(function(p,g){return g.d==p.d?p.f-g.f:g.d-p.d}),o=0;o<i.length&&i[o].d>s;o++){var d=i[o].d;i[o].d=s,c+=l-(1<<a-d)}for(c>>>=a-s;c>0;)(d=i[o].d)<s?(i[o].d++,c-=1<<s-d-1):o++;for(;o>=0;o--)i[o].d==s&&c<0&&(i[o].d--,c++);c!=0&&console.log("debt left")},r.F._goodIndex=function(i,s){var a=0;return s[16|a]<=i&&(a|=16),s[8|a]<=i&&(a|=8),s[4|a]<=i&&(a|=4),s[2|a]<=i&&(a|=2),s[1|a]<=i&&(a|=1),a},r.F._writeLit=function(i,s,a,o){return r.F._putsF(a,o,s[i<<1]),o+s[1+(i<<1)]},r.F.inflate=function(i,s){var a=Uint8Array;if(i[0]==3&&i[1]==0)return s||new a(0);var o=r.F,l=o._bitsF,c=o._bitsE,d=o._decodeTiny,p=o.makeCodes,g=o.codes2map,m=o._get17,b=o.U,x=s==null;x&&(s=new a(i.length>>>2<<3));for(var T,w,N=0,C=0,F=0,Q=0,B=0,j=0,y=0,S=0,L=0;N==0;)if(N=l(i,L,1),C=l(i,L+1,2),L+=3,C!=0){if(x&&(s=r.F._check(s,S+(1<<17))),C==1&&(T=b.flmap,w=b.fdmap,j=511,y=31),C==2){F=c(i,L,5)+257,Q=c(i,L+5,5)+1,B=c(i,L+10,4)+4,L+=14;for(var E=0;E<38;E+=2)b.itree[E]=0,b.itree[E+1]=0;var I=1;for(E=0;E<B;E++){var k=c(i,L+3*E,3);b.itree[1+(b.ordr[E]<<1)]=k,k>I&&(I=k)}L+=3*B,p(b.itree,I),g(b.itree,I,b.imap),T=b.lmap,w=b.dmap,L=d(b.imap,(1<<I)-1,F+Q,i,L,b.ttree);var M=o._copyOut(b.ttree,0,F,b.ltree);j=(1<<M)-1;var te=o._copyOut(b.ttree,F,Q,b.dtree);y=(1<<te)-1,p(b.ltree,M),g(b.ltree,M,T),p(b.dtree,te),g(b.dtree,te,w)}for(;;){var V=T[m(i,L)&j];L+=15&V;var U=V>>>4;if(!(U>>>8))s[S++]=U;else{if(U==256)break;var z=S+U-254;if(U>264){var $=b.ldef[U-257];z=S+($>>>3)+c(i,L,7&$),L+=7&$}var ne=w[m(i,L)&y];L+=15&ne;var we=ne>>>4,O=b.ddef[we],Y=(O>>>4)+l(i,L,15&O);for(L+=15&O,x&&(s=r.F._check(s,S+(1<<17)));S<z;)s[S]=s[S++-Y],s[S]=s[S++-Y],s[S]=s[S++-Y],s[S]=s[S++-Y];S=z}}}else{7&L&&(L+=8-(7&L));var J=4+(L>>>3),H=i[J-4]|i[J-3]<<8;x&&(s=r.F._check(s,S+H)),s.set(new a(i.buffer,i.byteOffset+J,H),S),L=J+H<<3,S+=H}return s.length==S?s:s.slice(0,S)},r.F._check=function(i,s){var a=i.length;if(s<=a)return i;var o=new Uint8Array(Math.max(a<<1,s));return o.set(i,0),o},r.F._decodeTiny=function(i,s,a,o,l,c){for(var d=r.F._bitsE,p=r.F._get17,g=0;g<a;){var m=i[p(o,l)&s];l+=15&m;var b=m>>>4;if(b<=15)c[g]=b,g++;else{var x=0,T=0;b==16?(T=3+d(o,l,2),l+=2,x=c[g-1]):b==17?(T=3+d(o,l,3),l+=3):b==18&&(T=11+d(o,l,7),l+=7);for(var w=g+T;g<w;)c[g]=x,g++}}return l},r.F._copyOut=function(i,s,a,o){for(var l=0,c=0,d=o.length>>>1;c<a;){var p=i[c+s];o[c<<1]=0,o[1+(c<<1)]=p,p>l&&(l=p),c++}for(;c<d;)o[c<<1]=0,o[1+(c<<1)]=0,c++;return l},r.F.makeCodes=function(i,s){for(var a,o,l,c,d=r.F.U,p=i.length,g=d.bl_count,m=0;m<=s;m++)g[m]=0;for(m=1;m<p;m+=2)g[i[m]]++;var b=d.next_code;for(a=0,g[0]=0,o=1;o<=s;o++)a=a+g[o-1]<<1,b[o]=a;for(l=0;l<p;l+=2)(c=i[l+1])!=0&&(i[l]=b[c],b[c]++)},r.F.codes2map=function(i,s,a){for(var o=i.length,l=r.F.U.rev15,c=0;c<o;c+=2)if(i[c+1]!=0)for(var d=c>>1,p=i[c+1],g=d<<4|p,m=s-p,b=i[c]<<m,x=b+(1<<m);b!=x;)a[l[b]>>>15-s]=g,b++},r.F.revCodes=function(i,s){for(var a=r.F.U.rev15,o=15-s,l=0;l<i.length;l+=2){var c=i[l]<<s-i[l+1];i[l]=a[c]>>>o}},r.F._putsE=function(i,s,a){a<<=7&s;var o=s>>>3;i[o]|=a,i[o+1]|=a>>>8},r.F._putsF=function(i,s,a){a<<=7&s;var o=s>>>3;i[o]|=a,i[o+1]|=a>>>8,i[o+2]|=a>>>16},r.F._bitsE=function(i,s,a){return(i[s>>>3]|i[1+(s>>>3)]<<8)>>>(7&s)&(1<<a)-1},r.F._bitsF=function(i,s,a){return(i[s>>>3]|i[1+(s>>>3)]<<8|i[2+(s>>>3)]<<16)>>>(7&s)&(1<<a)-1},r.F._get17=function(i,s){return(i[s>>>3]|i[1+(s>>>3)]<<8|i[2+(s>>>3)]<<16)>>>(7&s)},r.F._get25=function(i,s){return(i[s>>>3]|i[1+(s>>>3)]<<8|i[2+(s>>>3)]<<16|i[3+(s>>>3)]<<24)>>>(7&s)},r.F.U=(e=Uint16Array,n=Uint32Array,{next_code:new e(16),bl_count:new e(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new e(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new n(32),flmap:new e(512),fltree:[],fdmap:new e(32),fdtree:[],lmap:new e(32768),ltree:[],ttree:[],dmap:new e(32768),dtree:[],imap:new e(512),itree:[],rev15:new e(32768),lhst:new n(286),dhst:new n(30),ihst:new n(19),lits:new n(15e3),strt:new e(65536),prev:new e(32768)}),function(){for(var i=r.F.U,s=0;s<32768;s++){var a=s;a=(4278255360&(a=(4042322160&(a=(3435973836&(a=(2863311530&a)>>>1|(1431655765&a)<<1))>>>2|(858993459&a)<<2))>>>4|(252645135&a)<<4))>>>8|(16711935&a)<<8,i.rev15[s]=(a>>>16|a<<16)>>>17}function o(l,c,d){for(;c--!=0;)l.push(0,d)}for(s=0;s<32;s++)i.ldef[s]=i.of0[s]<<3|i.exb[s],i.ddef[s]=i.df0[s]<<4|i.dxb[s];o(i.fltree,144,8),o(i.fltree,112,9),o(i.fltree,24,7),o(i.fltree,8,8),r.F.makeCodes(i.fltree,9),r.F.codes2map(i.fltree,9,i.flmap),r.F.revCodes(i.fltree,9),o(i.fdtree,32,5),r.F.makeCodes(i.fdtree,5),r.F.codes2map(i.fdtree,5,i.fdmap),r.F.revCodes(i.fdtree,5),o(i.itree,19,0),o(i.ltree,286,0),o(i.dtree,30,0),o(i.ttree,320,0)}()})();var TF=AF({__proto__:null,default:hm},[hm]);const as=function(){var t={nextZero(d,p){for(;d[p]!=0;)p++;return p},readUshort:(d,p)=>d[p]<<8|d[p+1],writeUshort(d,p,g){d[p]=g>>8&255,d[p+1]=255&g},readUint:(d,p)=>16777216*d[p]+(d[p+1]<<16|d[p+2]<<8|d[p+3]),writeUint(d,p,g){d[p]=g>>24&255,d[p+1]=g>>16&255,d[p+2]=g>>8&255,d[p+3]=255&g},readASCII(d,p,g){let m="";for(let b=0;b<g;b++)m+=String.fromCharCode(d[p+b]);return m},writeASCII(d,p,g){for(let m=0;m<g.length;m++)d[p+m]=g.charCodeAt(m)},readBytes(d,p,g){const m=[];for(let b=0;b<g;b++)m.push(d[p+b]);return m},pad:d=>d.length<2?`0${d}`:d,readUTF8(d,p,g){let m,b="";for(let x=0;x<g;x++)b+=`%${t.pad(d[p+x].toString(16))}`;try{m=decodeURIComponent(b)}catch{return t.readASCII(d,p,g)}return m}};function e(d,p,g,m){const b=p*g,x=s(m),T=Math.ceil(p*x/8),w=new Uint8Array(4*b),N=new Uint32Array(w.buffer),{ctype:C}=m,{depth:F}=m,Q=t.readUshort;if(C==6){const $=b<<2;if(F==8)for(var B=0;B<$;B+=4)w[B]=d[B],w[B+1]=d[B+1],w[B+2]=d[B+2],w[B+3]=d[B+3];if(F==16)for(B=0;B<$;B++)w[B]=d[B<<1]}else if(C==2){const $=m.tabs.tRNS;if($==null){if(F==8)for(B=0;B<b;B++){var j=3*B;N[B]=255<<24|d[j+2]<<16|d[j+1]<<8|d[j]}if(F==16)for(B=0;B<b;B++)j=6*B,N[B]=255<<24|d[j+4]<<16|d[j+2]<<8|d[j]}else{var y=$[0];const ne=$[1],we=$[2];if(F==8)for(B=0;B<b;B++){var S=B<<2;j=3*B,N[B]=255<<24|d[j+2]<<16|d[j+1]<<8|d[j],d[j]==y&&d[j+1]==ne&&d[j+2]==we&&(w[S+3]=0)}if(F==16)for(B=0;B<b;B++)S=B<<2,j=6*B,N[B]=255<<24|d[j+4]<<16|d[j+2]<<8|d[j],Q(d,j)==y&&Q(d,j+2)==ne&&Q(d,j+4)==we&&(w[S+3]=0)}}else if(C==3){const $=m.tabs.PLTE,ne=m.tabs.tRNS,we=ne?ne.length:0;if(F==1)for(var L=0;L<g;L++){var E=L*T,I=L*p;for(B=0;B<p;B++){S=I+B<<2;var k=3*(M=d[E+(B>>3)]>>7-((7&B)<<0)&1);w[S]=$[k],w[S+1]=$[k+1],w[S+2]=$[k+2],w[S+3]=M<we?ne[M]:255}}if(F==2)for(L=0;L<g;L++)for(E=L*T,I=L*p,B=0;B<p;B++)S=I+B<<2,k=3*(M=d[E+(B>>2)]>>6-((3&B)<<1)&3),w[S]=$[k],w[S+1]=$[k+1],w[S+2]=$[k+2],w[S+3]=M<we?ne[M]:255;if(F==4)for(L=0;L<g;L++)for(E=L*T,I=L*p,B=0;B<p;B++)S=I+B<<2,k=3*(M=d[E+(B>>1)]>>4-((1&B)<<2)&15),w[S]=$[k],w[S+1]=$[k+1],w[S+2]=$[k+2],w[S+3]=M<we?ne[M]:255;if(F==8)for(B=0;B<b;B++){var M;S=B<<2,k=3*(M=d[B]),w[S]=$[k],w[S+1]=$[k+1],w[S+2]=$[k+2],w[S+3]=M<we?ne[M]:255}}else if(C==4){if(F==8)for(B=0;B<b;B++){S=B<<2;var te=d[V=B<<1];w[S]=te,w[S+1]=te,w[S+2]=te,w[S+3]=d[V+1]}if(F==16)for(B=0;B<b;B++){var V;S=B<<2,te=d[V=B<<2],w[S]=te,w[S+1]=te,w[S+2]=te,w[S+3]=d[V+2]}}else if(C==0)for(y=m.tabs.tRNS?m.tabs.tRNS:-1,L=0;L<g;L++){const $=L*T,ne=L*p;if(F==1)for(var U=0;U<p;U++){var z=(te=255*(d[$+(U>>>3)]>>>7-(7&U)&1))==255*y?0:255;N[ne+U]=z<<24|te<<16|te<<8|te}else if(F==2)for(U=0;U<p;U++)z=(te=85*(d[$+(U>>>2)]>>>6-((3&U)<<1)&3))==85*y?0:255,N[ne+U]=z<<24|te<<16|te<<8|te;else if(F==4)for(U=0;U<p;U++)z=(te=17*(d[$+(U>>>1)]>>>4-((1&U)<<2)&15))==17*y?0:255,N[ne+U]=z<<24|te<<16|te<<8|te;else if(F==8)for(U=0;U<p;U++)z=(te=d[$+U])==y?0:255,N[ne+U]=z<<24|te<<16|te<<8|te;else if(F==16)for(U=0;U<p;U++)te=d[$+(U<<1)],z=Q(d,$+(U<<1))==y?0:255,N[ne+U]=z<<24|te<<16|te<<8|te}return w}function n(d,p,g,m){const b=s(d),x=Math.ceil(g*b/8),T=new Uint8Array((x+1+d.interlace)*m);return p=d.tabs.CgBI?i(p,T):r(p,T),d.interlace==0?p=a(p,d,0,g,m):d.interlace==1&&(p=function(N,C){const F=C.width,Q=C.height,B=s(C),j=B>>3,y=Math.ceil(F*B/8),S=new Uint8Array(Q*y);let L=0;const E=[0,0,4,0,2,0,1],I=[0,4,0,2,0,1,0],k=[8,8,8,4,4,2,2],M=[8,8,4,4,2,2,1];let te=0;for(;te<7;){const U=k[te],z=M[te];let $=0,ne=0,we=E[te];for(;we<Q;)we+=U,ne++;let O=I[te];for(;O<F;)O+=z,$++;const Y=Math.ceil($*B/8);a(N,C,L,$,ne);let J=0,H=E[te];for(;H<Q;){let se=I[te],le=L+J*Y<<3;for(;se<F;){var V;if(B==1&&(V=(V=N[le>>3])>>7-(7&le)&1,S[H*y+(se>>3)]|=V<<7-((7&se)<<0)),B==2&&(V=(V=N[le>>3])>>6-(7&le)&3,S[H*y+(se>>2)]|=V<<6-((3&se)<<1)),B==4&&(V=(V=N[le>>3])>>4-(7&le)&15,S[H*y+(se>>1)]|=V<<4-((1&se)<<2)),B>=8){const ue=H*y+se*j;for(let de=0;de<j;de++)S[ue+de]=N[(le>>3)+de]}le+=B,se+=z}J++,H+=U}$*ne!=0&&(L+=ne*(1+Y)),te+=1}return S}(p,d)),p}function r(d,p){return i(new Uint8Array(d.buffer,2,d.length-6),p)}var i=function(){const d={H:{}};return d.H.N=function(p,g){const m=Uint8Array;let b,x,T=0,w=0,N=0,C=0,F=0,Q=0,B=0,j=0,y=0;if(p[0]==3&&p[1]==0)return g||new m(0);const S=d.H,L=S.b,E=S.e,I=S.R,k=S.n,M=S.A,te=S.Z,V=S.m,U=g==null;for(U&&(g=new m(p.length>>>2<<5));T==0;)if(T=L(p,y,1),w=L(p,y+1,2),y+=3,w!=0){if(U&&(g=d.H.W(g,j+(1<<17))),w==1&&(b=V.J,x=V.h,Q=511,B=31),w==2){N=E(p,y,5)+257,C=E(p,y+5,5)+1,F=E(p,y+10,4)+4,y+=14;let $=1;for(var z=0;z<38;z+=2)V.Q[z]=0,V.Q[z+1]=0;for(z=0;z<F;z++){const O=E(p,y+3*z,3);V.Q[1+(V.X[z]<<1)]=O,O>$&&($=O)}y+=3*F,k(V.Q,$),M(V.Q,$,V.u),b=V.w,x=V.d,y=I(V.u,(1<<$)-1,N+C,p,y,V.v);const ne=S.V(V.v,0,N,V.C);Q=(1<<ne)-1;const we=S.V(V.v,N,C,V.D);B=(1<<we)-1,k(V.C,ne),M(V.C,ne,b),k(V.D,we),M(V.D,we,x)}for(;;){const $=b[te(p,y)&Q];y+=15&$;const ne=$>>>4;if(!(ne>>>8))g[j++]=ne;else{if(ne==256)break;{let we=j+ne-254;if(ne>264){const se=V.q[ne-257];we=j+(se>>>3)+E(p,y,7&se),y+=7&se}const O=x[te(p,y)&B];y+=15&O;const Y=O>>>4,J=V.c[Y],H=(J>>>4)+L(p,y,15&J);for(y+=15&J;j<we;)g[j]=g[j++-H],g[j]=g[j++-H],g[j]=g[j++-H],g[j]=g[j++-H];j=we}}}}else{7&y&&(y+=8-(7&y));const $=4+(y>>>3),ne=p[$-4]|p[$-3]<<8;U&&(g=d.H.W(g,j+ne)),g.set(new m(p.buffer,p.byteOffset+$,ne),j),y=$+ne<<3,j+=ne}return g.length==j?g:g.slice(0,j)},d.H.W=function(p,g){const m=p.length;if(g<=m)return p;const b=new Uint8Array(m<<1);return b.set(p,0),b},d.H.R=function(p,g,m,b,x,T){const w=d.H.e,N=d.H.Z;let C=0;for(;C<m;){const F=p[N(b,x)&g];x+=15&F;const Q=F>>>4;if(Q<=15)T[C]=Q,C++;else{let B=0,j=0;Q==16?(j=3+w(b,x,2),x+=2,B=T[C-1]):Q==17?(j=3+w(b,x,3),x+=3):Q==18&&(j=11+w(b,x,7),x+=7);const y=C+j;for(;C<y;)T[C]=B,C++}}return x},d.H.V=function(p,g,m,b){let x=0,T=0;const w=b.length>>>1;for(;T<m;){const N=p[T+g];b[T<<1]=0,b[1+(T<<1)]=N,N>x&&(x=N),T++}for(;T<w;)b[T<<1]=0,b[1+(T<<1)]=0,T++;return x},d.H.n=function(p,g){const m=d.H.m,b=p.length;let x,T,w,N;const C=m.j;for(var F=0;F<=g;F++)C[F]=0;for(F=1;F<b;F+=2)C[p[F]]++;const Q=m.K;for(x=0,C[0]=0,T=1;T<=g;T++)x=x+C[T-1]<<1,Q[T]=x;for(w=0;w<b;w+=2)N=p[w+1],N!=0&&(p[w]=Q[N],Q[N]++)},d.H.A=function(p,g,m){const b=p.length,x=d.H.m.r;for(let T=0;T<b;T+=2)if(p[T+1]!=0){const w=T>>1,N=p[T+1],C=w<<4|N,F=g-N;let Q=p[T]<<F;const B=Q+(1<<F);for(;Q!=B;)m[x[Q]>>>15-g]=C,Q++}},d.H.l=function(p,g){const m=d.H.m.r,b=15-g;for(let x=0;x<p.length;x+=2){const T=p[x]<<g-p[x+1];p[x]=m[T]>>>b}},d.H.M=function(p,g,m){m<<=7&g;const b=g>>>3;p[b]|=m,p[b+1]|=m>>>8},d.H.I=function(p,g,m){m<<=7&g;const b=g>>>3;p[b]|=m,p[b+1]|=m>>>8,p[b+2]|=m>>>16},d.H.e=function(p,g,m){return(p[g>>>3]|p[1+(g>>>3)]<<8)>>>(7&g)&(1<<m)-1},d.H.b=function(p,g,m){return(p[g>>>3]|p[1+(g>>>3)]<<8|p[2+(g>>>3)]<<16)>>>(7&g)&(1<<m)-1},d.H.Z=function(p,g){return(p[g>>>3]|p[1+(g>>>3)]<<8|p[2+(g>>>3)]<<16)>>>(7&g)},d.H.i=function(p,g){return(p[g>>>3]|p[1+(g>>>3)]<<8|p[2+(g>>>3)]<<16|p[3+(g>>>3)]<<24)>>>(7&g)},d.H.m=function(){const p=Uint16Array,g=Uint32Array;return{K:new p(16),j:new p(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new p(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new g(32),J:new p(512),_:[],h:new p(32),$:[],w:new p(32768),C:[],v:[],d:new p(32768),D:[],u:new p(512),Q:[],r:new p(32768),s:new g(286),Y:new g(30),a:new g(19),t:new g(15e3),k:new p(65536),g:new p(32768)}}(),function(){const p=d.H.m;for(var g=0;g<32768;g++){let b=g;b=(2863311530&b)>>>1|(1431655765&b)<<1,b=(3435973836&b)>>>2|(858993459&b)<<2,b=(4042322160&b)>>>4|(252645135&b)<<4,b=(4278255360&b)>>>8|(16711935&b)<<8,p.r[g]=(b>>>16|b<<16)>>>17}function m(b,x,T){for(;x--!=0;)b.push(0,T)}for(g=0;g<32;g++)p.q[g]=p.S[g]<<3|p.T[g],p.c[g]=p.p[g]<<4|p.z[g];m(p._,144,8),m(p._,112,9),m(p._,24,7),m(p._,8,8),d.H.n(p._,9),d.H.A(p._,9,p.J),d.H.l(p._,9),m(p.$,32,5),d.H.n(p.$,5),d.H.A(p.$,5,p.h),d.H.l(p.$,5),m(p.Q,19,0),m(p.C,286,0),m(p.D,30,0),m(p.v,320,0)}(),d.H.N}();function s(d){return[1,null,3,1,2,null,4][d.ctype]*d.depth}function a(d,p,g,m,b){let x=s(p);const T=Math.ceil(m*x/8);let w,N;x=Math.ceil(x/8);let C=d[g],F=0;if(C>1&&(d[g]=[0,0,1][C-2]),C==3)for(F=x;F<T;F++)d[F+1]=d[F+1]+(d[F+1-x]>>>1)&255;for(let Q=0;Q<b;Q++)if(w=g+Q*T,N=w+Q+1,C=d[N-1],F=0,C==0)for(;F<T;F++)d[w+F]=d[N+F];else if(C==1){for(;F<x;F++)d[w+F]=d[N+F];for(;F<T;F++)d[w+F]=d[N+F]+d[w+F-x]}else if(C==2)for(;F<T;F++)d[w+F]=d[N+F]+d[w+F-T];else if(C==3){for(;F<x;F++)d[w+F]=d[N+F]+(d[w+F-T]>>>1);for(;F<T;F++)d[w+F]=d[N+F]+(d[w+F-T]+d[w+F-x]>>>1)}else{for(;F<x;F++)d[w+F]=d[N+F]+o(0,d[w+F-T],0);for(;F<T;F++)d[w+F]=d[N+F]+o(d[w+F-x],d[w+F-T],d[w+F-x-T])}return d}function o(d,p,g){const m=d+p-g,b=m-d,x=m-p,T=m-g;return b*b<=x*x&&b*b<=T*T?d:x*x<=T*T?p:g}function l(d,p,g){g.width=t.readUint(d,p),p+=4,g.height=t.readUint(d,p),p+=4,g.depth=d[p],p++,g.ctype=d[p],p++,g.compress=d[p],p++,g.filter=d[p],p++,g.interlace=d[p],p++}function c(d,p,g,m,b,x,T,w,N){const C=Math.min(p,b),F=Math.min(g,x);let Q=0,B=0;for(let te=0;te<F;te++)for(let V=0;V<C;V++)if(T>=0&&w>=0?(Q=te*p+V<<2,B=(w+te)*b+T+V<<2):(Q=(-w+te)*p-T+V<<2,B=te*b+V<<2),N==0)m[B]=d[Q],m[B+1]=d[Q+1],m[B+2]=d[Q+2],m[B+3]=d[Q+3];else if(N==1){var j=d[Q+3]*.00392156862745098,y=d[Q]*j,S=d[Q+1]*j,L=d[Q+2]*j,E=m[B+3]*(1/255),I=m[B]*E,k=m[B+1]*E,M=m[B+2]*E;const U=1-j,z=j+E*U,$=z==0?0:1/z;m[B+3]=255*z,m[B+0]=(y+I*U)*$,m[B+1]=(S+k*U)*$,m[B+2]=(L+M*U)*$}else if(N==2)j=d[Q+3],y=d[Q],S=d[Q+1],L=d[Q+2],E=m[B+3],I=m[B],k=m[B+1],M=m[B+2],j==E&&y==I&&S==k&&L==M?(m[B]=0,m[B+1]=0,m[B+2]=0,m[B+3]=0):(m[B]=y,m[B+1]=S,m[B+2]=L,m[B+3]=j);else if(N==3){if(j=d[Q+3],y=d[Q],S=d[Q+1],L=d[Q+2],E=m[B+3],I=m[B],k=m[B+1],M=m[B+2],j==E&&y==I&&S==k&&L==M)continue;if(j<220&&E>20)return!1}return!0}return{decode:function(p){const g=new Uint8Array(p);let m=8;const b=t,x=b.readUshort,T=b.readUint,w={tabs:{},frames:[]},N=new Uint8Array(g.length);let C,F=0,Q=0;const B=[137,80,78,71,13,10,26,10];for(var j=0;j<8;j++)if(g[j]!=B[j])throw"The input is not a PNG file!";for(;m<g.length;){const te=b.readUint(g,m);m+=4;const V=b.readASCII(g,m,4);if(m+=4,V=="IHDR")l(g,m,w);else if(V=="iCCP"){for(var y=m;g[y]!=0;)y++;b.readASCII(g,m,y-m),g[y+1];const U=g.slice(y+2,m+te);let z=null;try{z=r(U)}catch{z=i(U)}w.tabs[V]=z}else if(V=="CgBI")w.tabs[V]=g.slice(m,m+4);else if(V=="IDAT"){for(j=0;j<te;j++)N[F+j]=g[m+j];F+=te}else if(V=="acTL")w.tabs[V]={num_frames:T(g,m),num_plays:T(g,m+4)},C=new Uint8Array(g.length);else if(V=="fcTL"){Q!=0&&((M=w.frames[w.frames.length-1]).data=n(w,C.slice(0,Q),M.rect.width,M.rect.height),Q=0);const U={x:T(g,m+12),y:T(g,m+16),width:T(g,m+4),height:T(g,m+8)};let z=x(g,m+22);z=x(g,m+20)/(z==0?100:z);const $={rect:U,delay:Math.round(1e3*z),dispose:g[m+24],blend:g[m+25]};w.frames.push($)}else if(V=="fdAT"){for(j=0;j<te-4;j++)C[Q+j]=g[m+j+4];Q+=te-4}else if(V=="pHYs")w.tabs[V]=[b.readUint(g,m),b.readUint(g,m+4),g[m+8]];else if(V=="cHRM")for(w.tabs[V]=[],j=0;j<8;j++)w.tabs[V].push(b.readUint(g,m+4*j));else if(V=="tEXt"||V=="zTXt"){w.tabs[V]==null&&(w.tabs[V]={});var S=b.nextZero(g,m),L=b.readASCII(g,m,S-m),E=m+te-S-1;if(V=="tEXt")k=b.readASCII(g,S+1,E);else{var I=r(g.slice(S+2,S+2+E));k=b.readUTF8(I,0,I.length)}w.tabs[V][L]=k}else if(V=="iTXt"){w.tabs[V]==null&&(w.tabs[V]={}),S=0,y=m,S=b.nextZero(g,y),L=b.readASCII(g,y,S-y);const U=g[y=S+1];var k;g[y+1],y+=2,S=b.nextZero(g,y),b.readASCII(g,y,S-y),y=S+1,S=b.nextZero(g,y),b.readUTF8(g,y,S-y),E=te-((y=S+1)-m),U==0?k=b.readUTF8(g,y,E):(I=r(g.slice(y,y+E)),k=b.readUTF8(I,0,I.length)),w.tabs[V][L]=k}else if(V=="PLTE")w.tabs[V]=b.readBytes(g,m,te);else if(V=="hIST"){const U=w.tabs.PLTE.length/3;for(w.tabs[V]=[],j=0;j<U;j++)w.tabs[V].push(x(g,m+2*j))}else if(V=="tRNS")w.ctype==3?w.tabs[V]=b.readBytes(g,m,te):w.ctype==0?w.tabs[V]=x(g,m):w.ctype==2&&(w.tabs[V]=[x(g,m),x(g,m+2),x(g,m+4)]);else if(V=="gAMA")w.tabs[V]=b.readUint(g,m)/1e5;else if(V=="sRGB")w.tabs[V]=g[m];else if(V=="bKGD")w.ctype==0||w.ctype==4?w.tabs[V]=[x(g,m)]:w.ctype==2||w.ctype==6?w.tabs[V]=[x(g,m),x(g,m+2),x(g,m+4)]:w.ctype==3&&(w.tabs[V]=g[m]);else if(V=="IEND")break;m+=te,b.readUint(g,m),m+=4}var M;return Q!=0&&((M=w.frames[w.frames.length-1]).data=n(w,C.slice(0,Q),M.rect.width,M.rect.height)),w.data=n(w,N,w.width,w.height),delete w.compress,delete w.interlace,delete w.filter,w},toRGBA8:function(p){const g=p.width,m=p.height;if(p.tabs.acTL==null)return[e(p.data,g,m,p).buffer];const b=[];p.frames[0].data==null&&(p.frames[0].data=p.data);const x=g*m*4,T=new Uint8Array(x),w=new Uint8Array(x),N=new Uint8Array(x);for(let F=0;F<p.frames.length;F++){const Q=p.frames[F],B=Q.rect.x,j=Q.rect.y,y=Q.rect.width,S=Q.rect.height,L=e(Q.data,y,S,p);if(F!=0)for(var C=0;C<x;C++)N[C]=T[C];if(Q.blend==0?c(L,y,S,T,g,m,B,j,0):Q.blend==1&&c(L,y,S,T,g,m,B,j,1),b.push(T.buffer.slice(0)),Q.dispose!=0){if(Q.dispose==1)c(w,y,S,T,g,m,B,j,0);else if(Q.dispose==2)for(C=0;C<x;C++)T[C]=N[C]}}return b},_paeth:o,_copyTile:c,_bin:t}}();(function(){const{_copyTile:t}=as,{_bin:e}=as,n=as._paeth;var r={table:function(){const y=new Uint32Array(256);for(let S=0;S<256;S++){let L=S;for(let E=0;E<8;E++)1&L?L=3988292384^L>>>1:L>>>=1;y[S]=L}return y}(),update(y,S,L,E){for(let I=0;I<E;I++)y=r.table[255&(y^S[L+I])]^y>>>8;return y},crc:(y,S,L)=>4294967295^r.update(4294967295,y,S,L)};function i(y,S,L,E){S[L]+=y[0]*E>>4,S[L+1]+=y[1]*E>>4,S[L+2]+=y[2]*E>>4,S[L+3]+=y[3]*E>>4}function s(y){return Math.max(0,Math.min(255,y))}function a(y,S){const L=y[0]-S[0],E=y[1]-S[1],I=y[2]-S[2],k=y[3]-S[3];return L*L+E*E+I*I+k*k}function o(y,S,L,E,I,k,M){M==null&&(M=1);const te=E.length,V=[];for(var U=0;U<te;U++){const H=E[U];V.push([H>>>0&255,H>>>8&255,H>>>16&255,H>>>24&255])}for(U=0;U<te;U++){let H=4294967295;for(var z=0,$=0;$<te;$++){var ne=a(V[U],V[$]);$!=U&&ne<H&&(H=ne,z=$)}}const we=new Uint32Array(I.buffer),O=new Int16Array(S*L*4),Y=[0,8,2,10,12,4,14,6,3,11,1,9,15,7,13,5];for(U=0;U<Y.length;U++)Y[U]=255*((Y[U]+.5)/16-.5);for(let H=0;H<L;H++)for(let se=0;se<S;se++){var J;U=4*(H*S+se),M!=2?J=[s(y[U]+O[U]),s(y[U+1]+O[U+1]),s(y[U+2]+O[U+2]),s(y[U+3]+O[U+3])]:(ne=Y[4*(3&H)+(3&se)],J=[s(y[U]+ne),s(y[U+1]+ne),s(y[U+2]+ne),s(y[U+3]+ne)]),z=0;let le=16777215;for($=0;$<te;$++){const Ae=a(J,V[$]);Ae<le&&(le=Ae,z=$)}const ue=V[z],de=[J[0]-ue[0],J[1]-ue[1],J[2]-ue[2],J[3]-ue[3]];M==1&&(se!=S-1&&i(de,O,U+4,7),H!=L-1&&(se!=0&&i(de,O,U+4*S-4,3),i(de,O,U+4*S,5),se!=S-1&&i(de,O,U+4*S+4,1))),k[U>>2]=z,we[U>>2]=E[z]}}function l(y,S,L,E,I){I==null&&(I={});const{crc:k}=r,M=e.writeUint,te=e.writeUshort,V=e.writeASCII;let U=8;const z=y.frames.length>1;let $,ne=!1,we=33+(z?20:0);if(I.sRGB!=null&&(we+=13),I.pHYs!=null&&(we+=21),I.iCCP!=null&&($=pako.deflate(I.iCCP),we+=21+$.length+4),y.ctype==3){for(var O=y.plte.length,Y=0;Y<O;Y++)y.plte[Y]>>>24!=255&&(ne=!0);we+=8+3*O+4+(ne?8+1*O+4:0)}for(var J=0;J<y.frames.length;J++)z&&(we+=38),we+=(ue=y.frames[J]).cimg.length+12,J!=0&&(we+=4);we+=12;const H=new Uint8Array(we),se=[137,80,78,71,13,10,26,10];for(Y=0;Y<8;Y++)H[Y]=se[Y];if(M(H,U,13),U+=4,V(H,U,"IHDR"),U+=4,M(H,U,S),U+=4,M(H,U,L),U+=4,H[U]=y.depth,U++,H[U]=y.ctype,U++,H[U]=0,U++,H[U]=0,U++,H[U]=0,U++,M(H,U,k(H,U-17,17)),U+=4,I.sRGB!=null&&(M(H,U,1),U+=4,V(H,U,"sRGB"),U+=4,H[U]=I.sRGB,U++,M(H,U,k(H,U-5,5)),U+=4),I.iCCP!=null){const de=13+$.length;M(H,U,de),U+=4,V(H,U,"iCCP"),U+=4,V(H,U,"ICC profile"),U+=11,U+=2,H.set($,U),U+=$.length,M(H,U,k(H,U-(de+4),de+4)),U+=4}if(I.pHYs!=null&&(M(H,U,9),U+=4,V(H,U,"pHYs"),U+=4,M(H,U,I.pHYs[0]),U+=4,M(H,U,I.pHYs[1]),U+=4,H[U]=I.pHYs[2],U++,M(H,U,k(H,U-13,13)),U+=4),z&&(M(H,U,8),U+=4,V(H,U,"acTL"),U+=4,M(H,U,y.frames.length),U+=4,M(H,U,I.loop!=null?I.loop:0),U+=4,M(H,U,k(H,U-12,12)),U+=4),y.ctype==3){for(M(H,U,3*(O=y.plte.length)),U+=4,V(H,U,"PLTE"),U+=4,Y=0;Y<O;Y++){const de=3*Y,Ae=y.plte[Y],Te=255&Ae,Re=Ae>>>8&255,Be=Ae>>>16&255;H[U+de+0]=Te,H[U+de+1]=Re,H[U+de+2]=Be}if(U+=3*O,M(H,U,k(H,U-3*O-4,3*O+4)),U+=4,ne){for(M(H,U,O),U+=4,V(H,U,"tRNS"),U+=4,Y=0;Y<O;Y++)H[U+Y]=y.plte[Y]>>>24&255;U+=O,M(H,U,k(H,U-O-4,O+4)),U+=4}}let le=0;for(J=0;J<y.frames.length;J++){var ue=y.frames[J];z&&(M(H,U,26),U+=4,V(H,U,"fcTL"),U+=4,M(H,U,le++),U+=4,M(H,U,ue.rect.width),U+=4,M(H,U,ue.rect.height),U+=4,M(H,U,ue.rect.x),U+=4,M(H,U,ue.rect.y),U+=4,te(H,U,E[J]),U+=2,te(H,U,1e3),U+=2,H[U]=ue.dispose,U++,H[U]=ue.blend,U++,M(H,U,k(H,U-30,30)),U+=4);const de=ue.cimg;M(H,U,(O=de.length)+(J==0?0:4)),U+=4;const Ae=U;V(H,U,J==0?"IDAT":"fdAT"),U+=4,J!=0&&(M(H,U,le++),U+=4),H.set(de,U),U+=O,M(H,U,k(H,Ae,U-Ae)),U+=4}return M(H,U,0),U+=4,V(H,U,"IEND"),U+=4,M(H,U,k(H,U-4,4)),U+=4,H.buffer}function c(y,S,L){for(let E=0;E<y.frames.length;E++){const I=y.frames[E];I.rect.width;const k=I.rect.height,M=new Uint8Array(k*I.bpl+k);I.cimg=m(I.img,k,I.bpp,I.bpl,M,S,L)}}function d(y,S,L,E,I){const k=I[0],M=I[1],te=I[2],V=I[3],U=I[4],z=I[5];let $=6,ne=8,we=255;for(var O=0;O<y.length;O++){const ae=new Uint8Array(y[O]);for(var Y=ae.length,J=0;J<Y;J+=4)we&=ae[J+3]}const H=we!=255,se=function(He,De,he,Ie,Me,Ke){const We=[];for(var Ye=0;Ye<He.length;Ye++){const ct=new Uint8Array(He[Ye]),ze=new Uint32Array(ct.buffer);var at;let _e=0,$e=0,mt=De,ft=he,Tt=Ie?1:0;if(Ye!=0){const Vn=Ke||Ie||Ye==1||We[Ye-2].dispose!=0?1:2;let xt=0,vr=1e9;for(let Bt=0;Bt<Vn;Bt++){var tt=new Uint8Array(He[Ye-1-Bt]);const Wn=new Uint32Array(He[Ye-1-Bt]);let Nn=De,Dt=he,lt=-1,Pt=-1;for(let Jt=0;Jt<he;Jt++)for(let fn=0;fn<De;fn++)ze[dt=Jt*De+fn]!=Wn[dt]&&(fn<Nn&&(Nn=fn),fn>lt&&(lt=fn),Jt<Dt&&(Dt=Jt),Jt>Pt&&(Pt=Jt));lt==-1&&(Nn=Dt=lt=Pt=0),Me&&((1&Nn)==1&&Nn--,(1&Dt)==1&&Dt--);const Rr=(lt-Nn+1)*(Pt-Dt+1);Rr<vr&&(vr=Rr,xt=Bt,_e=Nn,$e=Dt,mt=lt-Nn+1,ft=Pt-Dt+1)}tt=new Uint8Array(He[Ye-1-xt]),xt==1&&(We[Ye-1].dispose=2),at=new Uint8Array(mt*ft*4),t(tt,De,he,at,mt,ft,-_e,-$e,0),Tt=t(ct,De,he,at,mt,ft,-_e,-$e,3)?1:0,Tt==1?g(ct,De,he,at,{x:_e,y:$e,width:mt,height:ft}):t(ct,De,he,at,mt,ft,-_e,-$e,0)}else at=ct.slice(0);We.push({rect:{x:_e,y:$e,width:mt,height:ft},img:at,blend:Tt,dispose:0})}if(Ie)for(Ye=0;Ye<We.length;Ye++){if((ot=We[Ye]).blend==1)continue;const ct=ot.rect,ze=We[Ye-1].rect,_e=Math.min(ct.x,ze.x),$e=Math.min(ct.y,ze.y),mt={x:_e,y:$e,width:Math.max(ct.x+ct.width,ze.x+ze.width)-_e,height:Math.max(ct.y+ct.height,ze.y+ze.height)-$e};We[Ye-1].dispose=1,Ye-1!=0&&p(He,De,he,We,Ye-1,mt,Me),p(He,De,he,We,Ye,mt,Me)}let ut=0;if(He.length!=1)for(var dt=0;dt<We.length;dt++){var ot;ut+=(ot=We[dt]).rect.width*ot.rect.height}return We}(y,S,L,k,M,te),le={},ue=[],de=[];if(E!=0){const ae=[];for(J=0;J<se.length;J++)ae.push(se[J].img.buffer);const He=function(Me){let Ke=0;for(var We=0;We<Me.length;We++)Ke+=Me[We].byteLength;const Ye=new Uint8Array(Ke);let at=0;for(We=0;We<Me.length;We++){const tt=new Uint8Array(Me[We]),ut=tt.length;for(let dt=0;dt<ut;dt+=4){let ot=tt[dt],ct=tt[dt+1],ze=tt[dt+2];const _e=tt[dt+3];_e==0&&(ot=ct=ze=0),Ye[at+dt]=ot,Ye[at+dt+1]=ct,Ye[at+dt+2]=ze,Ye[at+dt+3]=_e}at+=ut}return Ye.buffer}(ae),De=x(He,E);for(J=0;J<De.plte.length;J++)ue.push(De.plte[J].est.rgba);let he=0;for(J=0;J<se.length;J++){const Ie=(Te=se[J]).img.length;var Ae=new Uint8Array(De.inds.buffer,he>>2,Ie>>2);de.push(Ae);const Me=new Uint8Array(De.abuf,he,Ie);z&&o(Te.img,Te.rect.width,Te.rect.height,ue,Me,Ae),Te.img.set(Me),he+=Ie}}else for(O=0;O<se.length;O++){var Te=se[O];const ae=new Uint32Array(Te.img.buffer);var Re=Te.rect.width;for(Y=ae.length,Ae=new Uint8Array(Y),de.push(Ae),J=0;J<Y;J++){const He=ae[J];if(J!=0&&He==ae[J-1])Ae[J]=Ae[J-1];else if(J>Re&&He==ae[J-Re])Ae[J]=Ae[J-Re];else{let De=le[He];if(De==null&&(le[He]=De=ue.length,ue.push(He),ue.length>=300))break;Ae[J]=De}}}const Be=ue.length;for(Be<=256&&U==0&&(ne=Be<=2?1:Be<=4?2:Be<=16?4:8,ne=Math.max(ne,V)),O=0;O<se.length;O++){(Te=se[O]).rect.x,Te.rect.y,Re=Te.rect.width;const ae=Te.rect.height;let He=Te.img;new Uint32Array(He.buffer);let De=4*Re,he=4;if(Be<=256&&U==0){De=Math.ceil(ne*Re/8);var Xe=new Uint8Array(De*ae);const Ie=de[O];for(let Me=0;Me<ae;Me++){J=Me*De;const Ke=Me*Re;if(ne==8)for(var be=0;be<Re;be++)Xe[J+be]=Ie[Ke+be];else if(ne==4)for(be=0;be<Re;be++)Xe[J+(be>>1)]|=Ie[Ke+be]<<4-4*(1&be);else if(ne==2)for(be=0;be<Re;be++)Xe[J+(be>>2)]|=Ie[Ke+be]<<6-2*(3&be);else if(ne==1)for(be=0;be<Re;be++)Xe[J+(be>>3)]|=Ie[Ke+be]<<7-1*(7&be)}He=Xe,$=3,he=1}else if(H==0&&se.length==1){Xe=new Uint8Array(Re*ae*3);const Ie=Re*ae;for(J=0;J<Ie;J++){const Me=3*J,Ke=4*J;Xe[Me]=He[Ke],Xe[Me+1]=He[Ke+1],Xe[Me+2]=He[Ke+2]}He=Xe,$=2,he=3,De=3*Re}Te.img=He,Te.bpl=De,Te.bpp=he}return{ctype:$,depth:ne,plte:ue,frames:se}}function p(y,S,L,E,I,k,M){const te=Uint8Array,V=Uint32Array,U=new te(y[I-1]),z=new V(y[I-1]),$=I+1<y.length?new te(y[I+1]):null,ne=new te(y[I]),we=new V(ne.buffer);let O=S,Y=L,J=-1,H=-1;for(let le=0;le<k.height;le++)for(let ue=0;ue<k.width;ue++){const de=k.x+ue,Ae=k.y+le,Te=Ae*S+de,Re=we[Te];Re==0||E[I-1].dispose==0&&z[Te]==Re&&($==null||$[4*Te+3]!=0)||(de<O&&(O=de),de>J&&(J=de),Ae<Y&&(Y=Ae),Ae>H&&(H=Ae))}J==-1&&(O=Y=J=H=0),M&&((1&O)==1&&O--,(1&Y)==1&&Y--),k={x:O,y:Y,width:J-O+1,height:H-Y+1};const se=E[I];se.rect=k,se.blend=1,se.img=new Uint8Array(k.width*k.height*4),E[I-1].dispose==0?(t(U,S,L,se.img,k.width,k.height,-k.x,-k.y,0),g(ne,S,L,se.img,k)):t(ne,S,L,se.img,k.width,k.height,-k.x,-k.y,0)}function g(y,S,L,E,I){t(y,S,L,E,I.width,I.height,-I.x,-I.y,2)}function m(y,S,L,E,I,k,M){const te=[];let V,U=[0,1,2,3,4];k!=-1?U=[k]:(S*E>5e5||L==1)&&(U=[0]),M&&(V={level:0});const z=TF;for(var $=0;$<U.length;$++){for(let O=0;O<S;O++)b(I,y,O,E,L,U[$]);te.push(z.deflate(I,V))}let ne,we=1e9;for($=0;$<te.length;$++)te[$].length<we&&(ne=$,we=te[$].length);return te[ne]}function b(y,S,L,E,I,k){const M=L*E;let te=M+L;if(y[te]=k,te++,k==0)if(E<500)for(var V=0;V<E;V++)y[te+V]=S[M+V];else y.set(new Uint8Array(S.buffer,M,E),te);else if(k==1){for(V=0;V<I;V++)y[te+V]=S[M+V];for(V=I;V<E;V++)y[te+V]=S[M+V]-S[M+V-I]+256&255}else if(L==0){for(V=0;V<I;V++)y[te+V]=S[M+V];if(k==2)for(V=I;V<E;V++)y[te+V]=S[M+V];if(k==3)for(V=I;V<E;V++)y[te+V]=S[M+V]-(S[M+V-I]>>1)+256&255;if(k==4)for(V=I;V<E;V++)y[te+V]=S[M+V]-n(S[M+V-I],0,0)+256&255}else{if(k==2)for(V=0;V<E;V++)y[te+V]=S[M+V]+256-S[M+V-E]&255;if(k==3){for(V=0;V<I;V++)y[te+V]=S[M+V]+256-(S[M+V-E]>>1)&255;for(V=I;V<E;V++)y[te+V]=S[M+V]+256-(S[M+V-E]+S[M+V-I]>>1)&255}if(k==4){for(V=0;V<I;V++)y[te+V]=S[M+V]+256-n(0,S[M+V-E],0)&255;for(V=I;V<E;V++)y[te+V]=S[M+V]+256-n(S[M+V-I],S[M+V-E],S[M+V-I-E])&255}}}function x(y,S){const L=new Uint8Array(y),E=L.slice(0),I=new Uint32Array(E.buffer),k=T(E,S),M=k[0],te=k[1],V=L.length,U=new Uint8Array(V>>2);let z;if(L.length<2e7)for(var $=0;$<V;$+=4)z=w(M,ne=L[$]*(1/255),we=L[$+1]*(1/255),O=L[$+2]*(1/255),Y=L[$+3]*(1/255)),U[$>>2]=z.ind,I[$>>2]=z.est.rgba;else for($=0;$<V;$+=4){var ne=L[$]*.00392156862745098,we=L[$+1]*(1/255),O=L[$+2]*(1/255),Y=L[$+3]*(1/255);for(z=M;z.left;)z=N(z.est,ne,we,O,Y)<=0?z.left:z.right;U[$>>2]=z.ind,I[$>>2]=z.est.rgba}return{abuf:E.buffer,inds:U,plte:te}}function T(y,S,L){L==null&&(L=1e-4);const E=new Uint32Array(y.buffer),I={i0:0,i1:y.length,bst:null,est:null,tdst:0,left:null,right:null};I.bst=Q(y,I.i0,I.i1),I.est=B(I.bst);const k=[I];for(;k.length<S;){let te=0,V=0;for(var M=0;M<k.length;M++)k[M].est.L>te&&(te=k[M].est.L,V=M);if(te<L)break;const U=k[V],z=C(y,E,U.i0,U.i1,U.est.e,U.est.eMq255);if(U.i0>=z||U.i1<=z){U.est.L=0;continue}const $={i0:U.i0,i1:z,bst:null,est:null,tdst:0,left:null,right:null};$.bst=Q(y,$.i0,$.i1),$.est=B($.bst);const ne={i0:z,i1:U.i1,bst:null,est:null,tdst:0,left:null,right:null};for(ne.bst={R:[],m:[],N:U.bst.N-$.bst.N},M=0;M<16;M++)ne.bst.R[M]=U.bst.R[M]-$.bst.R[M];for(M=0;M<4;M++)ne.bst.m[M]=U.bst.m[M]-$.bst.m[M];ne.est=B(ne.bst),U.left=$,U.right=ne,k[V]=$,k.push(ne)}for(k.sort((te,V)=>V.bst.N-te.bst.N),M=0;M<k.length;M++)k[M].ind=M;return[I,k]}function w(y,S,L,E,I){if(y.left==null)return y.tdst=function($,ne,we,O,Y){const J=ne-$[0],H=we-$[1],se=O-$[2],le=Y-$[3];return J*J+H*H+se*se+le*le}(y.est.q,S,L,E,I),y;const k=N(y.est,S,L,E,I);let M=y.left,te=y.right;k>0&&(M=y.right,te=y.left);const V=w(M,S,L,E,I);if(V.tdst<=k*k)return V;const U=w(te,S,L,E,I);return U.tdst<V.tdst?U:V}function N(y,S,L,E,I){const{e:k}=y;return k[0]*S+k[1]*L+k[2]*E+k[3]*I-y.eMq}function C(y,S,L,E,I,k){for(E-=4;L<E;){for(;F(y,L,I)<=k;)L+=4;for(;F(y,E,I)>k;)E-=4;if(L>=E)break;const M=S[L>>2];S[L>>2]=S[E>>2],S[E>>2]=M,L+=4,E-=4}for(;F(y,L,I)>k;)L-=4;return L+4}function F(y,S,L){return y[S]*L[0]+y[S+1]*L[1]+y[S+2]*L[2]+y[S+3]*L[3]}function Q(y,S,L){const E=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],I=[0,0,0,0],k=L-S>>2;for(let M=S;M<L;M+=4){const te=y[M]*.00392156862745098,V=y[M+1]*(1/255),U=y[M+2]*(1/255),z=y[M+3]*(1/255);I[0]+=te,I[1]+=V,I[2]+=U,I[3]+=z,E[0]+=te*te,E[1]+=te*V,E[2]+=te*U,E[3]+=te*z,E[5]+=V*V,E[6]+=V*U,E[7]+=V*z,E[10]+=U*U,E[11]+=U*z,E[15]+=z*z}return E[4]=E[1],E[8]=E[2],E[9]=E[6],E[12]=E[3],E[13]=E[7],E[14]=E[11],{R:E,m:I,N:k}}function B(y){const{R:S}=y,{m:L}=y,{N:E}=y,I=L[0],k=L[1],M=L[2],te=L[3],V=E==0?0:1/E,U=[S[0]-I*I*V,S[1]-I*k*V,S[2]-I*M*V,S[3]-I*te*V,S[4]-k*I*V,S[5]-k*k*V,S[6]-k*M*V,S[7]-k*te*V,S[8]-M*I*V,S[9]-M*k*V,S[10]-M*M*V,S[11]-M*te*V,S[12]-te*I*V,S[13]-te*k*V,S[14]-te*M*V,S[15]-te*te*V],z=U,$=j;let ne=[Math.random(),Math.random(),Math.random(),Math.random()],we=0,O=0;if(E!=0)for(let J=0;J<16&&(ne=$.multVec(z,ne),O=Math.sqrt($.dot(ne,ne)),ne=$.sml(1/O,ne),!(J!=0&&Math.abs(O-we)<1e-9));J++)we=O;const Y=[I*V,k*V,M*V,te*V];return{Cov:U,q:Y,e:ne,L:we,eMq255:$.dot($.sml(255,Y),ne),eMq:$.dot(ne,Y),rgba:(Math.round(255*Y[3])<<24|Math.round(255*Y[2])<<16|Math.round(255*Y[1])<<8|Math.round(255*Y[0])<<0)>>>0}}var j={multVec:(y,S)=>[y[0]*S[0]+y[1]*S[1]+y[2]*S[2]+y[3]*S[3],y[4]*S[0]+y[5]*S[1]+y[6]*S[2]+y[7]*S[3],y[8]*S[0]+y[9]*S[1]+y[10]*S[2]+y[11]*S[3],y[12]*S[0]+y[13]*S[1]+y[14]*S[2]+y[15]*S[3]],dot:(y,S)=>y[0]*S[0]+y[1]*S[1]+y[2]*S[2]+y[3]*S[3],sml:(y,S)=>[y*S[0],y*S[1],y*S[2],y*S[3]]};as.encode=function(S,L,E,I,k,M,te){I==null&&(I=0),te==null&&(te=!1);const V=d(S,L,E,I,[!1,!1,!1,0,te,!1]);return c(V,-1),l(V,L,E,k,M)},as.encodeLL=function(S,L,E,I,k,M,te,V){const U={ctype:0+(I==1?0:2)+(k==0?0:4),depth:M,frames:[]},z=(I+k)*M,$=z*L;for(let ne=0;ne<S.length;ne++)U.frames.push({rect:{x:0,y:0,width:L,height:E},img:new Uint8Array(S[ne]),blend:0,dispose:1,bpp:Math.ceil(z/8),bpl:Math.ceil($/8)});return c(U,0,!0),l(U,L,E,te,V)},as.encode.compress=d,as.encode.dither=o,as.quantize=x,as.quantize.getKDtree=T,as.quantize.getNearest=w})();const HN={toArrayBuffer(t,e){const n=t.width,r=t.height,i=n<<2,s=t.getContext("2d").getImageData(0,0,n,r),a=new Uint32Array(s.data.buffer),o=(32*n+31)/32<<2,l=o*r,c=122+l,d=new ArrayBuffer(c),p=new DataView(d),g=1<<20;let m,b,x,T,w=g,N=0,C=0,F=0;function Q(y){p.setUint16(C,y,!0),C+=2}function B(y){p.setUint32(C,y,!0),C+=4}function j(y){C+=y}Q(19778),B(c),j(4),B(122),B(108),B(n),B(-r>>>0),Q(1),Q(32),B(3),B(l),B(2835),B(2835),j(8),B(16711680),B(65280),B(255),B(4278190080),B(1466527264),function y(){for(;N<r&&w>0;){for(T=122+N*o,m=0;m<i;)w--,b=a[F++],x=b>>>24,p.setUint32(T+m,b<<8|x),m+=4;N++}F<a.length?(w=g,setTimeout(y,HN._dly)):e(d)}()},toBlob(t,e){this.toArrayBuffer(t,n=>{e(new Blob([n],{type:"image/bmp"}))})},_dly:9};var ri={CHROME:"CHROME",FIREFOX:"FIREFOX",DESKTOP_SAFARI:"DESKTOP_SAFARI",IE:"IE",IOS:"IOS",ETC:"ETC"},IF={[ri.CHROME]:16384,[ri.FIREFOX]:11180,[ri.DESKTOP_SAFARI]:16384,[ri.IE]:8192,[ri.IOS]:4096,[ri.ETC]:8192};const my=typeof window<"u",WN=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,dm=my&&window.cordova&&window.cordova.require&&window.cordova.require("cordova/modulemapper"),PF=(my||WN)&&(dm&&dm.getOriginalSymbol(window,"File")||typeof File<"u"&&File),GN=(my||WN)&&(dm&&dm.getOriginalSymbol(window,"FileReader")||typeof FileReader<"u"&&FileReader);function gy(t,e,n=Date.now()){return new Promise(r=>{const i=t.split(","),s=i[0].match(/:(.*?);/)[1],a=globalThis.atob(i[1]);let o=a.length;const l=new Uint8Array(o);for(;o--;)l[o]=a.charCodeAt(o);const c=new Blob([l],{type:s});c.name=e,c.lastModified=n,r(c)})}function QN(t){return new Promise((e,n)=>{const r=new GN;r.onload=()=>e(r.result),r.onerror=i=>n(i),r.readAsDataURL(t)})}function YN(t){return new Promise((e,n)=>{const r=new Image;r.onload=()=>e(r),r.onerror=i=>n(i),r.src=t})}function Fl(){if(Fl.cachedResult!==void 0)return Fl.cachedResult;let t=ri.ETC;const{userAgent:e}=navigator;return/Chrom(e|ium)/i.test(e)?t=ri.CHROME:/iP(ad|od|hone)/i.test(e)&&/WebKit/i.test(e)?t=ri.IOS:/Safari/i.test(e)?t=ri.DESKTOP_SAFARI:/Firefox/i.test(e)?t=ri.FIREFOX:(/MSIE/i.test(e)||document.documentMode)&&(t=ri.IE),Fl.cachedResult=t,Fl.cachedResult}function JN(t,e){const n=Fl(),r=IF[n];let i=t,s=e,a=i*s;const o=i>s?s/i:i/s;for(;a>r*r;){const l=(r+i)/2,c=(r+s)/2;l<c?(s=c,i=c*o):(s=l*o,i=l),a=i*s}return{width:i,height:s}}function cg(t,e){let n,r;try{if(n=new OffscreenCanvas(t,e),r=n.getContext("2d"),r===null)throw new Error("getContext of OffscreenCanvas returns null")}catch{n=document.createElement("canvas"),r=n.getContext("2d")}return n.width=t,n.height=e,[n,r]}function XN(t,e){const{width:n,height:r}=JN(t.width,t.height),[i,s]=cg(n,r);return e&&/jpe?g/.test(e)&&(s.fillStyle="white",s.fillRect(0,0,i.width,i.height)),s.drawImage(t,0,0,i.width,i.height),i}function vp(){return vp.cachedResult!==void 0||(vp.cachedResult=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&typeof document<"u"&&"ontouchend"in document),vp.cachedResult}function fm(t,e={}){return new Promise(function(n,r){let i,s;var a=function(){try{return s=XN(i,e.fileType||t.type),n([i,s])}catch(l){return r(l)}},o=function(l){try{var c=function(d){try{throw d}catch(p){return r(p)}};try{let d;return QN(t).then(function(p){try{return d=p,YN(d).then(function(g){try{return i=g,function(){try{return a()}catch(m){return r(m)}}()}catch(m){return c(m)}},c)}catch(g){return c(g)}},c)}catch(d){c(d)}}catch(d){return r(d)}};try{if(vp()||[ri.DESKTOP_SAFARI,ri.MOBILE_SAFARI].includes(Fl()))throw new Error("Skip createImageBitmap on IOS and Safari");return createImageBitmap(t).then(function(l){try{return i=l,a()}catch{return o()}},o)}catch{o()}})}function pm(t,e,n,r,i=1){return new Promise(function(s,a){let o;if(e==="image/png"){let c,d,p;return c=t.getContext("2d"),{data:d}=c.getImageData(0,0,t.width,t.height),p=as.encode([d.buffer],t.width,t.height,4096*i),o=new Blob([p],{type:e}),o.name=n,o.lastModified=r,l.call(this)}{let c=function(){return l.call(this)};if(e==="image/bmp")return new Promise(d=>HN.toBlob(t,d)).then((function(d){try{return o=d,o.name=n,o.lastModified=r,c.call(this)}catch(p){return a(p)}}).bind(this),a);{let d=function(){return c.call(this)};if(typeof OffscreenCanvas=="function"&&t instanceof OffscreenCanvas)return t.convertToBlob({type:e,quality:i}).then((function(p){try{return o=p,o.name=n,o.lastModified=r,d.call(this)}catch(g){return a(g)}}).bind(this),a);{let p;return p=t.toDataURL(e,i),gy(p,n,r).then((function(g){try{return o=g,d.call(this)}catch(m){return a(m)}}).bind(this),a)}}}function l(){return s(o)}})}function Ds(t){t.width=0,t.height=0}function ru(){return new Promise(function(t,e){let n,r,i,s;return ru.cachedResult!==void 0?t(ru.cachedResult):gy("data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==","test.jpg",Date.now()).then(function(a){try{return n=a,fm(n).then(function(o){try{return r=o[1],pm(r,n.type,n.name,n.lastModified).then(function(l){try{return i=l,Ds(r),fm(i).then(function(c){try{return s=c[0],ru.cachedResult=s.width===1&&s.height===2,t(ru.cachedResult)}catch(d){return e(d)}},e)}catch(c){return e(c)}},e)}catch(l){return e(l)}},e)}catch(o){return e(o)}},e)})}function ZN(t){return new Promise((e,n)=>{const r=new GN;r.onload=i=>{const s=new DataView(i.target.result);if(s.getUint16(0,!1)!=65496)return e(-2);const a=s.byteLength;let o=2;for(;o<a;){if(s.getUint16(o+2,!1)<=8)return e(-1);const l=s.getUint16(o,!1);if(o+=2,l==65505){if(s.getUint32(o+=2,!1)!=1165519206)return e(-1);const c=s.getUint16(o+=6,!1)==18761;o+=s.getUint32(o+4,c);const d=s.getUint16(o,c);o+=2;for(let p=0;p<d;p++)if(s.getUint16(o+12*p,c)==274)return e(s.getUint16(o+12*p+8,c))}else{if((65280&l)!=65280)break;o+=s.getUint16(o,!1)}}return e(-1)},r.onerror=i=>n(i),r.readAsArrayBuffer(t)})}function eA(t,e){const{width:n}=t,{height:r}=t,{maxWidthOrHeight:i}=e;let s,a=t;return isFinite(i)&&(n>i||r>i)&&([a,s]=cg(n,r),n>r?(a.width=i,a.height=r/n*i):(a.width=n/r*i,a.height=i),s.drawImage(t,0,0,a.width,a.height),Ds(t)),a}function tA(t,e){const{width:n}=t,{height:r}=t,[i,s]=cg(n,r);switch(e>4&&e<9?(i.width=r,i.height=n):(i.width=n,i.height=r),e){case 2:s.transform(-1,0,0,1,n,0);break;case 3:s.transform(-1,0,0,-1,n,r);break;case 4:s.transform(1,0,0,-1,0,r);break;case 5:s.transform(0,1,1,0,0,0);break;case 6:s.transform(0,1,-1,0,r,0);break;case 7:s.transform(0,-1,-1,0,r,n);break;case 8:s.transform(0,-1,1,0,0,n)}return s.drawImage(t,0,0,n,r),Ds(t),i}function X_(t,e,n=0){return new Promise(function(r,i){let s,a,o,l,c,d,p,g,m,b,x,T,w,N,C,F,Q,B,j,y;function S(E=5){if(e.signal&&e.signal.aborted)throw e.signal.reason;s+=E,e.onProgress(Math.min(s,100))}function L(E){if(e.signal&&e.signal.aborted)throw e.signal.reason;s=Math.min(Math.max(E,s),100),e.onProgress(s)}return s=n,a=e.maxIteration||10,o=1024*e.maxSizeMB*1024,S(),fm(t,e).then((function(E){try{return[,l]=E,S(),c=eA(l,e),S(),new Promise(function(I,k){var M;if(!(M=e.exifOrientation))return ZN(t).then((function(V){try{return M=V,te.call(this)}catch(U){return k(U)}}).bind(this),k);function te(){return I(M)}return te.call(this)}).then((function(I){try{return d=I,S(),ru().then((function(k){try{return p=k?c:tA(c,d),S(),g=e.initialQuality||1,m=e.fileType||t.type,pm(p,m,t.name,t.lastModified,g).then((function(M){try{{let V=function(){if(a--&&(C>o||C>w)){let z,$;return z=y?.95*j.width:j.width,$=y?.95*j.height:j.height,[Q,B]=cg(z,$),B.drawImage(j,0,0,z,$),g*=m==="image/png"?.85:.95,pm(Q,m,t.name,t.lastModified,g).then(function(ne){try{return F=ne,Ds(j),j=Q,C=F.size,L(Math.min(99,Math.floor((N-C)/(N-o)*100))),V}catch(we){return i(we)}},i)}return[1]},U=function(){return Ds(j),Ds(Q),Ds(c),Ds(p),Ds(l),L(100),r(F)};if(b=M,S(),x=b.size>o,T=b.size>t.size,!x&&!T)return L(100),r(b);var te;return w=t.size,N=b.size,C=N,j=p,y=!e.alwaysKeepResolution&&x,(te=(function(z){for(;z;){if(z.then)return void z.then(te,i);try{if(z.pop){if(z.length)return z.pop()?U.call(this):z;z=V}else z=z.call(this)}catch($){return i($)}}}).bind(this))(V)}}catch(V){return i(V)}}).bind(this),i)}catch(M){return i(M)}}).bind(this),i)}catch(k){return i(k)}}).bind(this),i)}catch(I){return i(I)}}).bind(this),i)})}const CF=`
let scriptImported = false
self.addEventListener('message', async (e) => {
  const { file, id, imageCompressionLibUrl, options } = e.data
  options.onProgress = (progress) => self.postMessage({ progress, id })
  try {
    if (!scriptImported) {
      // console.log('[worker] importScripts', imageCompressionLibUrl)
      self.importScripts(imageCompressionLibUrl)
      scriptImported = true
    }
    // console.log('[worker] self', self)
    const compressedFile = await imageCompression(file, options)
    self.postMessage({ file: compressedFile, id })
  } catch (e) {
    // console.error('[worker] error', e)
    self.postMessage({ error: e.message + '\\n' + e.stack, id })
  }
})
`;let A1;function jF(t,e){return new Promise((n,r)=>{A1||(A1=function(a){const o=[];return o.push(a),URL.createObjectURL(new Blob(o))}(CF));const i=new Worker(A1);i.addEventListener("message",function(a){if(e.signal&&e.signal.aborted)i.terminate();else if(a.data.progress===void 0){if(a.data.error)return r(new Error(a.data.error)),void i.terminate();n(a.data.file),i.terminate()}else e.onProgress(a.data.progress)}),i.addEventListener("error",r),e.signal&&e.signal.addEventListener("abort",()=>{r(e.signal.reason),i.terminate()}),i.postMessage({file:t,imageCompressionLibUrl:e.libURL,options:{...e,onProgress:void 0,signal:void 0}})})}function cr(t,e){return new Promise(function(n,r){let i,s,a,o,l,c;if(i={...e},a=0,{onProgress:o}=i,i.maxSizeMB=i.maxSizeMB||Number.POSITIVE_INFINITY,l=typeof i.useWebWorker!="boolean"||i.useWebWorker,delete i.useWebWorker,i.onProgress=m=>{a=m,typeof o=="function"&&o(a)},!(t instanceof Blob||t instanceof PF))return r(new Error("The file given is not an instance of Blob or File"));if(!/^image/.test(t.type))return r(new Error("The file given is not an image"));if(c=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,!l||typeof Worker!="function"||c)return X_(t,i).then((function(m){try{return s=m,g.call(this)}catch(b){return r(b)}}).bind(this),r);var d=(function(){try{return g.call(this)}catch(m){return r(m)}}).bind(this),p=function(m){try{return X_(t,i).then(function(b){try{return s=b,d()}catch(x){return r(x)}},r)}catch(b){return r(b)}};try{return i.libURL=i.libURL||"https://cdn.jsdelivr.net/npm/browser-image-compression@2.0.2/dist/browser-image-compression.js",jF(t,i).then(function(m){try{return s=m,d()}catch{return p()}},p)}catch{p()}function g(){try{s.name=t.name,s.lastModified=t.lastModified}catch{}try{i.preserveExif&&t.type==="image/jpeg"&&(!i.fileType||i.fileType&&i.fileType===t.type)&&(s=$N(t,s))}catch{}return n(s)}})}cr.getDataUrlFromFile=QN,cr.getFilefromDataUrl=gy,cr.loadImage=YN,cr.drawImageInCanvas=XN,cr.drawFileInCanvas=fm,cr.canvasToFile=pm,cr.getExifOrientation=ZN,cr.handleMaxWidthOrHeight=eA,cr.followExifOrientation=tA,cr.cleanupCanvasMemory=Ds,cr.isAutoOrientationInBrowser=ru,cr.approximateBelowMaximumCanvasSizeOfBrowser=JN,cr.copyExifWithoutOrientation=$N,cr.getBrowserName=Fl,cr.version="2.0.2";const LF={"image/jpeg":".jpg","image/jpg":".jpg","image/png":".png","application/pdf":".pdf","application/msword":".doc","application/vnd.openxmlformats-officedocument.wordprocessingml.document":".docx","application/vnd.ms-excel":".xls","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":".xlsx","text/plain":".txt","text/csv":".csv"},RF=t=>{if(t===0)return"0 Bytes";const e=1024,n=["Bytes","KB","MB","GB"],r=Math.floor(Math.log(t)/Math.log(e));return Math.round(t/Math.pow(e,r)*100)/100+" "+n[r]},vy=t=>LF[t]||"",DF=()=>`file_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,FF=t=>t.replace(/[^a-zA-Z0-9._-]/g,"_").replace(/_{2,}/g,"_").toLowerCase(),OF=(t,e,n,r)=>{const i=FF(t.name);vy(t.type)||`${t.name.split(".").pop()}`;const s=`${r}_${i}`,a=`projects/${e}/${n}/${s}`,o=ay(cy,a);return{uploadTask:uN(o,t,{contentType:t.type}),storagePath:a,filename:s}},MF=async(t,e,n,r)=>{if(!t)return null;const i="thumbnail",s=vy(t.type),a=`${r}_${i}${s}`,o=`projects/${e}/${n}/${a}`,l=ay(cy,o);try{return await uN(l,t),{thumbnailURL:await hN(l),thumbnailPath:o}}catch(c){return console.error("Thumbnail upload error:",c),null}},Z_=async t=>{try{const e=ay(cy,t);return await P7(e),{success:!0}}catch(e){return console.error("Storage delete error:",e),{success:!1,error:e.message}}},VF=async t=>{try{return{success:!0,fileId:(await Va(xn(_t,"files"),{...t,uploadedAt:new Date().toISOString(),createdAt:new Date().toISOString()})).id}}catch(e){return console.error("Firestore save error:",e),{success:!1,error:e.message}}},UF=async t=>{try{const e=zd(xn(_t,"files"),ng("sagsnummer","==",t)),n=await ci(e),r=[];return n.forEach(i=>{r.push({id:i.id,...i.data()})}),{success:!0,files:r}}catch(e){return console.error("Firestore get files error:",e),{success:!1,error:e.message,files:[]}}},BF=(t,e)=>t.filter(n=>n.fileCategory===e),KF=async t=>{try{return await Ma(mn(_t,"files",t)),{success:!0}}catch(e){return console.error("Firestore delete error:",e),{success:!1,error:e.message}}},qF=async({file:t,thumbnail:e,sagsnummer:n,projectId:r,projectName:i,category:s,uploadedBy:a,uploadedByUID:o,originalSize:l,compressedSize:c,isCompressed:d,description:p="",onProgress:g})=>{const m=DF();try{const{uploadTask:b,storagePath:x,filename:T}=OF(t,n,s,m);return new Promise((w,N)=>{b.on("state_changed",C=>{const F=C.bytesTransferred/C.totalBytes*100;g&&g(F)},C=>{console.error("Upload error:",C),N({success:!1,error:C.message})},async()=>{try{const C=await hN(b.snapshot.ref);let F=null;e&&(F=await MF(e,n,s,m));const Q={fileId:m,fileName:t.name,originalFileName:t.name,fileType:t.type,fileExtension:vy(t.type),fileCategory:s,fileSizeOriginal:l,fileSizeCompressed:c,isCompressed:d,compressionRatio:d?Math.round((1-c/l)*100)+"%":null,sagsnummer:n,projectId:r,projectName:i,fileURL:C,storagePath:x,thumbnailURL:(F==null?void 0:F.thumbnailURL)||null,thumbnailPath:(F==null?void 0:F.thumbnailPath)||null,uploadedBy:a,uploadedByUID:o,description:p.trim(),tags:[]},B=await VF(Q);B.success?w({success:!0,fileId:B.fileId,fileData:{...Q,id:B.fileId}}):N(B)}catch(C){N({success:!1,error:C.message})}})})}catch(b){return console.error("Upload process error:",b),{success:!1,error:b.message}}},zF=async t=>{try{return await Z_(t.storagePath),t.thumbnailPath&&await Z_(t.thumbnailPath),await KF(t.id),{success:!0}}catch(e){return console.error("Delete file error:",e),{success:!1,error:e.message}}};function $F({sagsnummer:t,projectId:e,projectName:n,uploadedBy:r,uploadedByUID:i,onUploadComplete:s}){const[a,o]=oe.useState(!1),[l,c]=oe.useState(0),[d,p]=oe.useState(0),[g,m]=oe.useState(!1),[b,x]=oe.useState(null),[T,w]=oe.useState(""),[N,C]=oe.useState(""),F=oe.useRef(null),{showSuccess:Q,showError:B}=Ti(),j=M=>{var V;const te=(V=M.target.files)==null?void 0:V[0];te&&(x(te),C(""),m(!0))},y=M=>{var V;M.preventDefault();const te=(V=M.dataTransfer.files)==null?void 0:V[0];te&&(x(te),C(""),m(!0))},S=M=>{M.preventDefault()},L=M=>{w(M)},E=async()=>{if(!T){B("Vlg venligst en kategori");return}m(!1),b&&(await k(b,T,N),x(null),w(""),C(""))},I=async(M,te)=>{try{const U=await cr(M,{maxSizeMB:1,maxWidthOrHeight:1920,useWebWorker:!0,onProgress:te}),$=await cr(M,{maxSizeMB:.1,maxWidthOrHeight:200,useWebWorker:!0});return{compressed:U,thumbnail:$}}catch(V){return console.error("Image compression error:",V),{compressed:M,thumbnail:null}}},k=async(M,te,V)=>{if(M.size>10485760){B("Filen er for stor. Maksimum 10MB tilladt.");return}o(!0),c(0),p(0);try{let z=M,$=M.size,ne=M.size,we=!1,O=null;if(M.type.startsWith("image/")){const J=await I(M,H=>{p(H)});J.compressed&&(z=J.compressed,ne=J.compressed.size,we=!0),J.thumbnail&&(O=J.thumbnail),p(100)}const Y=await qF({file:z,thumbnail:O,sagsnummer:t,projectId:e,projectName:n,category:te,uploadedBy:r,uploadedByUID:i,originalSize:$,compressedSize:ne,isCompressed:we,description:V,onProgress:J=>{c(Math.round(J))}});Y.success?(Q("Fil uploaded!"),s(Y.fileData),F.current&&(F.current.value="")):B("Upload fejlede")}catch(z){console.error("Upload error:",z),B("Upload fejlede - prv igen")}finally{o(!1),p(0),c(0)}};return u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"file-upload-area-compact",children:[u.jsxs("div",{className:"upload-dropzone-compact",onDrop:y,onDragOver:S,onClick:()=>{var M;return(M=F.current)==null?void 0:M.click()},children:[u.jsx("span",{className:"upload-icon-compact",children:""}),u.jsx("span",{className:"upload-text-compact",children:"Drag & drop eller klik for at uploade fil"})]}),u.jsx("input",{ref:F,type:"file",onChange:j,style:{display:"none"}}),a&&u.jsxs("div",{className:"upload-progress-compact",children:[d>0&&d<100&&u.jsxs(u.Fragment,{children:[u.jsxs("span",{className:"progress-text-compact",children:["Komprimerer... ",d,"%"]}),u.jsx("div",{className:"progress-bar-container",children:u.jsx("div",{className:"progress-bar",style:{width:`${d}%`}})})]}),l>0&&u.jsxs(u.Fragment,{children:[u.jsxs("span",{className:"progress-text-compact",children:["Uploader... ",l,"%"]}),u.jsx("div",{className:"progress-bar-container",children:u.jsx("div",{className:"progress-bar",style:{width:`${l}%`}})})]})]})]}),g&&u.jsx("div",{className:"confirm-overlay",children:u.jsxs("div",{className:"confirm-dialog file-upload-dialog",children:[u.jsxs("div",{className:"confirm-header",children:[u.jsx("h3",{children:"Upload fil"}),u.jsx("button",{className:"modal-close",onClick:()=>{m(!1),x(null),w(""),C("")},children:""})]}),u.jsxs("div",{className:"confirm-body",children:[u.jsx("div",{className:"file-info",children:u.jsxs("p",{className:"file-name",children:[" ",b==null?void 0:b.name]})}),u.jsxs("div",{className:"form-group",style:{marginTop:"16px"},children:[u.jsx("label",{children:"Vlg kategori *"}),u.jsxs("div",{className:"category-selection-compact",children:[u.jsxs("button",{type:"button",className:`category-btn-compact ${T==="bilag"?"selected":""}`,onClick:()=>L("bilag"),children:[u.jsx("span",{className:"category-icon",children:""}),u.jsx("span",{children:"Bilag"})]}),u.jsxs("button",{type:"button",className:`category-btn-compact ${T==="billeder"?"selected":""}`,onClick:()=>L("billeder"),children:[u.jsx("span",{className:"category-icon",children:""}),u.jsx("span",{children:"Billeder"})]}),u.jsxs("button",{type:"button",className:`category-btn-compact ${T==="dokumenter"?"selected":""}`,onClick:()=>L("dokumenter"),children:[u.jsx("span",{className:"category-icon",children:""}),u.jsx("span",{children:"Dokumenter"})]})]})]}),u.jsxs("div",{className:"form-group",style:{marginTop:"16px"},children:[u.jsx("label",{htmlFor:"fileNote",children:"Kommentar/Note (valgfri)"}),u.jsx("textarea",{id:"fileNote",value:N,onChange:M=>C(M.target.value),placeholder:"Tilfj en note eller kommentar til filen...",rows:"3",maxLength:"500",style:{width:"100%",padding:"10px",border:"1px solid #ddd",borderRadius:"6px",fontSize:"14px",fontFamily:"inherit",resize:"vertical"}}),u.jsxs("small",{className:"form-hint",children:[N.length,"/500 tegn"]})]})]}),u.jsxs("div",{className:"confirm-footer",children:[u.jsx("button",{className:"btn-secondary",onClick:()=>{m(!1),x(null),w(""),C("")},children:"Annuller"}),u.jsx("button",{className:"btn-primary",onClick:E,disabled:!T,children:"Upload fil"})]})]})})]})}function E1({category:t,files:e,onPreview:n,onDelete:r,onDownload:i}){const a=(()=>{switch(t){case"bilag":return{icon:"",title:"Bilag",emptyText:"Ingen bilag endnu"};case"billeder":return{icon:"",title:"Billeder",emptyText:"Ingen billeder endnu"};case"dokumenter":return{icon:"",title:"Dokumenter",emptyText:"Ingen dokumenter endnu"};default:return{icon:"",title:"Filer",emptyText:"Ingen filer endnu"}}})();return u.jsxs("div",{className:"file-category-column",children:[u.jsxs("div",{className:"category-header",children:[u.jsx("span",{className:"category-icon",children:a.icon}),u.jsx("h3",{children:a.title}),u.jsx("span",{className:"category-count",children:e.length})]}),u.jsx("div",{className:"files-list",children:e.length===0?u.jsxs("div",{className:"empty-state-file",children:[u.jsx("div",{className:"empty-icon",children:a.icon}),u.jsx("p",{children:a.emptyText})]}):e.map(o=>{var l;return u.jsxs("div",{className:"file-item",children:[u.jsx("div",{className:"file-preview",onClick:()=>n(o),children:o.thumbnailURL?u.jsx("img",{src:o.thumbnailURL,alt:o.fileName}):u.jsx("div",{className:"file-icon",children:(l=o.fileType)!=null&&l.startsWith("image/")?"":""})}),u.jsxs("div",{className:"file-details",children:[u.jsx("div",{className:"file-name",title:o.fileName,children:o.fileName}),o.description&&u.jsxs("div",{className:"file-note",title:o.description,children:[" ",o.description]}),u.jsxs("div",{className:"file-meta",children:[u.jsx("span",{className:"file-date",children:gp(o.uploadedAt)}),o.fileSizeCompressed&&u.jsx("span",{className:"file-size",children:RF(o.fileSizeCompressed)})]}),o.uploadedBy&&u.jsxs("div",{className:"file-uploader",children:[" ",o.uploadedBy]})]}),u.jsxs("div",{className:"file-actions",children:[u.jsx("button",{className:"action-btn",onClick:()=>n(o),title:"Vis",children:""}),u.jsx("button",{className:"action-btn",onClick:()=>i(o),title:"Download",children:""}),u.jsx("button",{className:"action-btn danger",onClick:()=>r(o),title:"Slet",children:""})]})]},o.id)})})]})}function HF({file:t,onClose:e,onNext:n,onPrev:r,hasNext:i,hasPrev:s}){return oe.useEffect(()=>{const o=l=>{l.key==="Escape"&&e(),l.key==="ArrowLeft"&&s&&r(),l.key==="ArrowRight"&&i&&n()};return window.addEventListener("keydown",o),()=>window.removeEventListener("keydown",o)},[e,n,r,i,s]),oe.useEffect(()=>{if(!t)return;const o=t.fileType==="application/pdf",l=t.fileType.startsWith("image/");if(o){window.open(t.fileURL,"_blank"),e();return}l||e()},[t,e]),!t||!t.fileType.startsWith("image/")?null:u.jsx("div",{className:"preview-overlay",onClick:e,children:u.jsxs("div",{className:"preview-modal",onClick:o=>o.stopPropagation(),children:[u.jsxs("div",{className:"preview-header",children:[u.jsx("span",{className:"preview-filename",children:t.fileName}),u.jsx("button",{className:"preview-close",onClick:e,"aria-label":"Luk",children:""})]}),u.jsx("div",{className:"preview-content",children:u.jsx("img",{src:t.fileURL,alt:t.fileName,className:"preview-image"})}),u.jsxs("div",{className:"preview-navigation",children:[s&&u.jsx("button",{className:"preview-nav-btn preview-prev",onClick:r,"aria-label":"Forrige",children:""}),i&&u.jsx("button",{className:"preview-nav-btn preview-next",onClick:n,"aria-label":"Nste",children:""})]})]})})}function WF({project:t,currentUser:e}){const[n,r]=oe.useState([]),[i,s]=oe.useState(!0),[a,o]=oe.useState(""),[l,c]=oe.useState("newest"),[d,p]=oe.useState(null),[g,m]=oe.useState(0),[b,x]=oe.useState(""),{showSuccess:T,showError:w,showConfirm:N}=Ti();oe.useEffect(()=>{C()},[t.projectNumber]);const C=async()=>{s(!0);try{const V=await UF(t.projectNumber);V.success?r(V.files):w("Kunne ikke indlse filer")}catch(V){console.error("Error loading files:",V),w("Kunne ikke indlse filer")}finally{s(!1)}},F=V=>{r(U=>[...U,V])},Q=async V=>{if(await N({title:"Slet fil?",message:`Er du sikker p at du vil slette "${V.fileName}"? Denne handling kan ikke fortrydes.`,confirmText:"Slet fil",cancelText:"Annuller",type:"danger"}))try{(await zF(V)).success?(r($=>$.filter(ne=>ne.id!==V.id)),T("Fil slettet")):w("Kunne ikke slette fil")}catch(z){console.error("Delete error:",z),w("Kunne ikke slette fil")}},B=V=>{window.open(V.fileURL,"_blank")},j=V=>{const U=V.fileCategory,$=E(U).findIndex(ne=>ne.id===V.id);p(V),m($),x(U)},y=()=>{const V=E(b);if(g<V.length-1){const U=g+1;p(V[U]),m(U)}},S=()=>{if(g>0){const V=E(b),U=g-1;p(V[U]),m(U)}},L=()=>{let V=[...n];if(a.trim()){const U=a.toLowerCase();V=V.filter(z=>{var $;return z.fileName.toLowerCase().includes(U)||(($=z.description)==null?void 0:$.toLowerCase().includes(U))})}return V.sort((U,z)=>l==="newest"?new Date(z.uploadedAt)-new Date(U.uploadedAt):l==="oldest"?new Date(U.uploadedAt)-new Date(z.uploadedAt):l==="name"?U.fileName.localeCompare(z.fileName):0),V},E=V=>{const U=L();return BF(U,V)};if(i)return u.jsxs("div",{className:"loading-text",children:[u.jsx("span",{className:"loading-spinner-dark"}),"Indlser filer..."]});const I=E("bilag"),k=E("billeder"),M=E("dokumenter"),te=b?E(b):[];return u.jsxs("div",{className:"files-tab",children:[u.jsx($F,{sagsnummer:t.projectNumber,projectId:t.id,projectName:t.name,uploadedBy:e,uploadedByUID:"user123",onUploadComplete:F}),u.jsxs("div",{className:"files-controls",children:[u.jsx("input",{type:"text",placeholder:"Sg efter filnavn...",value:a,onChange:V=>o(V.target.value),className:"search-input"}),u.jsxs("select",{value:l,onChange:V=>c(V.target.value),className:"filter-select",children:[u.jsx("option",{value:"newest",children:"Nyeste frst"}),u.jsx("option",{value:"oldest",children:"ldste frst"}),u.jsx("option",{value:"name",children:"Navn (A-Z)"})]})]}),u.jsxs("div",{className:"files-columns",children:[u.jsx(E1,{category:"bilag",files:I,onPreview:j,onDelete:Q,onDownload:B}),u.jsx(E1,{category:"billeder",files:k,onPreview:j,onDelete:Q,onDownload:B}),u.jsx(E1,{category:"dokumenter",files:M,onPreview:j,onDelete:Q,onDownload:B})]}),u.jsx(HF,{file:d,onClose:()=>p(null),onNext:y,onPrev:S,hasNext:g<te.length-1,hasPrev:g>0})]})}function GF(){const{id:t}=$k(),e=Uu(),[n,r]=oe.useState(null),[i,s]=oe.useState([]),[a,o]=oe.useState([]),[l,c]=oe.useState([]),[d,p]=oe.useState([]),[g,m]=oe.useState([]),[b,x]=oe.useState(!0),[T,w]=oe.useState(!1),[N,C]=oe.useState(!1),[F,Q]=oe.useState(!1),[B,j]=oe.useState(null),[y,S]=oe.useState(null),[L,E]=oe.useState(450),[I,k]=oe.useState("oversigt");oe.useEffect(()=>{M(),te(),V(),U(),z(),$()},[t]);const M=async()=>{try{const he=await rg(mn(_t,"projects",t));he.exists()?r({id:he.id,...he.data()}):(alert("Sag ikke fundet"),e("/sager"))}catch(he){console.error("Error loading project:",he),alert("Der opstod en fejl ved indlsning af sag.")}finally{x(!1)}},te=async()=>{try{const he=await ON(t);s(he)}catch(he){console.error("Error loading time entries:",he)}},V=async()=>{try{const he=await bF(t);he.success&&o(he.purchases)}catch(he){console.error("Error loading material purchases:",he)}},U=async()=>{try{const he=await VN();he.success&&c(he.suppliers)}catch(he){console.error("Error loading suppliers:",he)}},z=async()=>{try{const he=await UN();he.success&&p(he.materials)}catch(he){console.error("Error loading materials:",he)}},$=async()=>{try{const he=await ci(xn(_t,"employees")),Ie=[];he.forEach(Me=>{Ie.push({id:Me.id,...Me.data()})}),Ie.sort((Me,Ke)=>Me.name.localeCompare(Ke.name)),m(Ie)}catch(he){console.error("Error loading employees:",he)}},ne=()=>{w(!0)},we=async he=>{try{await Da(mn(_t,"projects",t),{...he,updatedAt:new Date().toISOString(),updatedBy:"Admin"}),w(!1),await M()}catch(Ie){console.error("Error updating project:",Ie),alert("Der opstod en fejl ved opdatering af sag.")}},O=()=>{j(null),C(!0)},Y=he=>{j(he),C(!0)},J=async he=>{if(window.confirm("Er du sikker p, at du vil slette denne timeregistrering?"))try{await Ma(mn(_t,"timeEntries",he.id)),await te()}catch(Ie){console.error("Error deleting time entry:",Ie),alert("Der opstod en fejl ved sletning af timeregistrering.")}},H=async he=>{try{const Ie={...he,projectId:t,duration:he.duration,hours:he.duration,hourlyRate:he.rate||0,employeeName:he.employeeName||"Ikke angivet",activity:he.activity,billable:he.billable,rate:he.rate||0};B?await Da(mn(_t,"timeEntries",B.id),{...Ie,updatedAt:new Date().toISOString()}):await Va(xn(_t,"timeEntries"),{...Ie,createdAt:new Date().toISOString(),createdBy:"Admin"}),C(!1),await te()}catch(Ie){console.error("Error saving time entry:",Ie),alert("Der opstod en fejl ved gemning af timeregistrering.")}},se=()=>{S(null),Q(!0)},le=he=>{S(he),Q(!0)},ue=async he=>{if(window.confirm("Er du sikker p, at du vil slette dette materiale?"))try{(await KN(he.id)).success?await V():alert("Der opstod en fejl ved sletning af materiale.")}catch(Ie){console.error("Error deleting material:",Ie),alert("Der opstod en fejl ved sletning af materiale.")}},de=async he=>{try{y?(await SF(y.id,he)).success?(Q(!1),await V()):alert("Der opstod en fejl ved opdatering af materiale."):(await _F(he)).success?(Q(!1),await V()):alert("Der opstod en fejl ved tilfjelse af materiale.")}catch(Ie){console.error("Error saving material:",Ie),alert("Der opstod en fejl ved gemning af materiale.")}},Ae=he=>he==="fixed-price"?"Fast Pris":"Tid & Materiale",Te=he=>{const Ie={planned:{color:"#3498db",label:"Planlagt"},"in-progress":{color:"#27ae60",label:"I Gang"},"ready-for-invoice":{color:"#f39c12",label:"Klar til Faktura"},closed:{color:"#9b59b6",label:"Lukket"}};return Ie[he]||Ie.planned};if(b)return u.jsx("div",{children:u.jsx("div",{className:"page-header-friendly",children:u.jsxs("div",{className:"loading-friendly",children:[u.jsx("div",{className:"spinner"}),u.jsx("p",{children:"Henter sag..."})]})})});if(!n)return null;const Re=FN(i),Be=nF(i),Xe=rF(i),be=qN(a),ae=zN(a),He=NF(a),De=Te(n.status);return u.jsxs("div",{children:[u.jsxs("div",{className:"sag-details-header",children:[u.jsx("button",{className:"btn-back-friendly",onClick:()=>e("/sager"),children:" Tilbage til alle sager"}),u.jsxs("div",{className:"sag-details-title-section",children:[u.jsx("h1",{className:"sag-details-customer",children:n.customerName||"Kunde ikke angivet"}),u.jsx("p",{className:"sag-details-name",children:n.name}),u.jsxs("div",{className:"sag-details-meta",children:[u.jsxs("span",{className:"sag-meta-number",children:["Sagsnr. ",n.projectNumber]}),u.jsx("span",{className:"sag-meta-divider",children:""}),u.jsx("span",{className:"sag-meta-status",style:{backgroundColor:De.color+"20",color:De.color,border:`2px solid ${De.color}`},children:De.label})]})]})]}),u.jsxs("div",{className:"sag-tabs-colorful",children:[u.jsxs("button",{className:`sag-tab-colorful tab-blue ${I==="oversigt"?"active":""}`,onClick:()=>k("oversigt"),children:[u.jsx("span",{className:"tab-icon",children:""}),u.jsx("span",{className:"tab-text",children:"Oversigt"})]}),u.jsxs("button",{className:`sag-tab-colorful tab-green ${I==="timer"?"active":""}`,onClick:()=>k("timer"),children:[u.jsx("span",{className:"tab-icon",children:""}),u.jsx("span",{className:"tab-text",children:"Timer"})]}),u.jsxs("button",{className:`sag-tab-colorful tab-orange ${I==="materialer"?"active":""}`,onClick:()=>k("materialer"),children:[u.jsx("span",{className:"tab-icon",children:""}),u.jsx("span",{className:"tab-text",children:"Materialer"})]}),u.jsxs("button",{className:`sag-tab-colorful tab-purple ${I==="dokumenter"?"active":""}`,onClick:()=>k("dokumenter"),children:[u.jsx("span",{className:"tab-icon",children:""}),u.jsx("span",{className:"tab-text",children:"Dokumenter"})]})]}),u.jsxs("div",{className:"sag-tab-content-colorful",children:[I==="oversigt"&&u.jsx("div",{className:"oversigt-tab-new",children:u.jsxs("div",{className:"sag-sections-grid",children:[u.jsx("img",{src:"/house.png",alt:"",className:"page-header-clipart clipart-sagdetails","aria-hidden":"true"}),u.jsxs("div",{className:"sag-section-card section-blue",children:[u.jsxs("div",{className:"section-header header-blue",children:[u.jsxs("div",{className:"section-header-left",children:[u.jsx("span",{className:"section-icon",children:""}),u.jsx("h2",{children:"Sagsoplysninger"})]}),u.jsx("button",{className:"btn-section-action",onClick:ne,children:" Ret"})]}),u.jsxs("div",{className:"section-body",children:[u.jsxs("div",{className:"info-row",children:[u.jsx("span",{className:"info-label-new",children:"Status:"}),u.jsx("span",{className:"info-badge",style:{backgroundColor:De.color+"20",color:De.color,border:`2px solid ${De.color}`},children:De.label})]}),u.jsxs("div",{className:"info-row",children:[u.jsx("span",{className:"info-label-new",children:"Type:"}),u.jsx("span",{className:"info-value-new",children:Ae(n.type)})]}),n.type==="fixed-price"&&u.jsxs("div",{className:"info-row",children:[u.jsx("span",{className:"info-label-new",children:"Fast pris:"}),u.jsx("span",{className:"info-value-new highlight-green",children:ei(n.fixedPrice)})]}),u.jsxs("div",{className:"info-row",children:[u.jsx("span",{className:"info-label-new",children:"Oprettet:"}),u.jsx("span",{className:"info-value-new",children:gp(n.createdAt)})]}),n.description&&u.jsxs("div",{className:"info-row full",children:[u.jsx("span",{className:"info-label-new",children:"Beskrivelse:"}),u.jsx("p",{className:"info-description-new",children:n.description})]})]})]}),u.jsxs("div",{className:"sag-section-card section-blue",children:[u.jsx("div",{className:"section-header header-blue",children:u.jsxs("div",{className:"section-header-left",children:[u.jsx("span",{className:"section-icon",children:""}),u.jsx("h2",{children:"Kundeoplysninger"})]})}),u.jsxs("div",{className:"section-body",children:[u.jsxs("div",{className:"info-row",children:[u.jsx("span",{className:"info-label-new",children:"Navn:"}),u.jsx("span",{className:"info-value-new",children:n.customerName||"Ikke angivet"})]}),n.customerPhone&&u.jsxs("div",{className:"info-row",children:[u.jsx("span",{className:"info-label-new",children:"Telefon:"}),u.jsxs("a",{href:`tel:${n.customerPhone}`,className:"info-link-new",children:[" ",cF(n.customerPhone)]})]}),n.customerEmail&&u.jsxs("div",{className:"info-row",children:[u.jsx("span",{className:"info-label-new",children:"Email:"}),u.jsxs("a",{href:`mailto:${n.customerEmail}`,className:"info-link-new",children:[" ",n.customerEmail]})]}),n.customerAddress&&u.jsxs("div",{className:"info-row full",children:[u.jsx("span",{className:"info-label-new",children:"Adresse:"}),u.jsxs("a",{href:uF(n.customerAddress),target:"_blank",rel:"noopener noreferrer",className:"info-link-new",children:[" ",n.customerAddress]})]})]})]}),u.jsxs("div",{className:"sag-section-card section-green",children:[u.jsx("div",{className:"section-header header-green",children:u.jsxs("div",{className:"section-header-left",children:[u.jsx("span",{className:"section-icon",children:""}),u.jsx("h2",{children:"Timer Status"})]})}),u.jsxs("div",{className:"section-body",children:[u.jsxs("div",{className:"stats-compact",children:[u.jsxs("div",{className:"stat-compact",children:[u.jsx("div",{className:"stat-value-compact",children:Re.toFixed(1)}),u.jsx("div",{className:"stat-label-compact",children:"I alt arbejdet"})]}),u.jsxs("div",{className:"stat-compact",children:[u.jsx("div",{className:"stat-value-compact highlight-green",children:Be.toFixed(1)}),u.jsx("div",{className:"stat-label-compact",children:"Kan faktureres"})]}),u.jsxs("div",{className:"stat-compact",children:[u.jsx("div",{className:"stat-value-compact highlight-green",children:ei(Xe)}),u.jsx("div",{className:"stat-label-compact",children:"Vrdi"})]})]}),i.length>0&&u.jsxs("div",{className:"recent-activity",children:[u.jsx("p",{className:"recent-label",children:"Seneste registreringer:"}),i.slice(0,3).map((he,Ie)=>u.jsxs("div",{className:"recent-item-compact",children:[u.jsx("span",{className:"recent-date",children:gp(he.date)}),u.jsx("span",{className:"recent-name",children:he.employeeName}),u.jsx("span",{className:"recent-hours",children:J_(he.duration||he.hours||0)})]},Ie))]})]})]}),u.jsxs("div",{className:"sag-section-card section-orange",children:[u.jsx("div",{className:"section-header header-orange",children:u.jsxs("div",{className:"section-header-left",children:[u.jsx("span",{className:"section-icon",children:""}),u.jsx("h2",{children:"Materialer Status"})]})}),u.jsx("div",{className:"section-body",children:u.jsxs("div",{className:"stats-compact",children:[u.jsxs("div",{className:"stat-compact",children:[u.jsx("div",{className:"stat-value-compact",children:a.length}),u.jsx("div",{className:"stat-label-compact",children:"Indkb"})]}),u.jsxs("div",{className:"stat-compact",children:[u.jsx("div",{className:"stat-value-compact",children:ei(be)}),u.jsx("div",{className:"stat-label-compact",children:"Indkbspris"})]}),u.jsxs("div",{className:"stat-compact",children:[u.jsx("div",{className:"stat-value-compact",children:ei(ae)}),u.jsx("div",{className:"stat-label-compact",children:"Salgspris"})]}),u.jsxs("div",{className:"stat-compact",children:[u.jsx("div",{className:"stat-value-compact",style:{color:He>=0?"#27ae60":"#e74c3c"},children:ei(He)}),u.jsx("div",{className:"stat-label-compact",children:"Avance"})]})]})})]})]})}),I==="timer"&&u.jsxs("div",{className:"timer-tab-new",children:[u.jsxs("div",{className:"tab-header-section",children:[u.jsxs("div",{className:"tab-summary-boxes",children:[u.jsxs("div",{className:"summary-box box-green",children:[u.jsx("div",{className:"summary-icon",children:""}),u.jsxs("div",{className:"summary-content",children:[u.jsxs("div",{className:"summary-value",children:[Re.toFixed(1)," timer"]}),u.jsx("div",{className:"summary-label",children:"I alt arbejdet"})]})]}),u.jsxs("div",{className:"summary-box box-green",children:[u.jsx("div",{className:"summary-icon",children:""}),u.jsxs("div",{className:"summary-content",children:[u.jsxs("div",{className:"summary-value",children:[Be.toFixed(1)," timer"]}),u.jsx("div",{className:"summary-label",children:"Kan faktureres"})]})]}),u.jsxs("div",{className:"summary-box box-green",children:[u.jsx("div",{className:"summary-icon",children:""}),u.jsxs("div",{className:"summary-content",children:[u.jsx("div",{className:"summary-value",children:ei(Xe)}),u.jsx("div",{className:"summary-label",children:"Total vrdi"})]})]})]}),u.jsxs("button",{className:"btn-add-friendly btn-green",onClick:O,children:[u.jsx("span",{className:"btn-icon-large",children:"+"})," Registrer nye timer"]})]}),u.jsx("div",{className:"content-table-wrapper",children:i.length===0?u.jsxs("div",{className:"empty-state-friendly",children:[u.jsx("div",{className:"empty-icon",children:""}),u.jsx("h3",{children:"Ingen timer registreret endnu"}),u.jsx("p",{children:'Klik p "Registrer nye timer" for at komme i gang'})]}):u.jsxs("table",{className:"friendly-table",children:[u.jsx("thead",{children:u.jsxs("tr",{children:[u.jsx("th",{children:"Dato"}),u.jsx("th",{children:"Medarbejder"}),u.jsx("th",{children:"Timer"}),u.jsx("th",{children:"Timepris"}),u.jsx("th",{children:"Fakturerbar"}),u.jsx("th",{children:"Vrdi"}),u.jsx("th",{children:"Aktivitet"}),u.jsx("th",{})]})}),u.jsx("tbody",{children:i.map(he=>u.jsxs("tr",{children:[u.jsx("td",{children:gp(he.date)}),u.jsx("td",{className:"employee-cell",children:he.employeeName||"Ikke angivet"}),u.jsx("td",{className:"hours-cell",children:J_(he.duration||he.hours||0)}),u.jsx("td",{children:ei(he.rate||he.hourlyRate||0)}),u.jsx("td",{children:he.billable?"":""}),u.jsx("td",{className:"value-cell",children:he.billable?ei((he.duration||he.hours||0)*(he.rate||he.hourlyRate||0)):"-"}),u.jsx("td",{className:"activity-cell",children:he.activity||he.description||"-"}),u.jsxs("td",{className:"actions-cell",children:[u.jsx("button",{className:"btn-icon-action",onClick:()=>Y(he),title:"Ret",children:""}),u.jsx("button",{className:"btn-icon-action",onClick:()=>J(he),title:"Slet",children:""})]})]},he.id))})]})})]}),I==="materialer"&&u.jsxs("div",{className:"materialer-tab-new",children:[u.jsxs("div",{className:"tab-header-section",children:[u.jsxs("div",{className:"tab-summary-boxes",children:[u.jsxs("div",{className:"summary-box box-orange",children:[u.jsx("div",{className:"summary-icon",children:""}),u.jsxs("div",{className:"summary-content",children:[u.jsx("div",{className:"summary-value",children:a.length}),u.jsx("div",{className:"summary-label",children:"Indkb"})]})]}),u.jsxs("div",{className:"summary-box box-orange",children:[u.jsx("div",{className:"summary-icon",children:""}),u.jsxs("div",{className:"summary-content",children:[u.jsx("div",{className:"summary-value",children:ei(be)}),u.jsx("div",{className:"summary-label",children:"Indkbspris"})]})]}),u.jsxs("div",{className:"summary-box box-orange",children:[u.jsx("div",{className:"summary-icon",children:""}),u.jsxs("div",{className:"summary-content",children:[u.jsx("div",{className:"summary-value",children:ei(ae)}),u.jsx("div",{className:"summary-label",children:"Salgspris"})]})]}),u.jsxs("div",{className:`summary-box ${He>=0?"box-green":"box-red"}`,children:[u.jsx("div",{className:"summary-icon",children:He>=0?"":""}),u.jsxs("div",{className:"summary-content",children:[u.jsx("div",{className:"summary-value",children:ei(He)}),u.jsx("div",{className:"summary-label",children:"Avance"})]})]})]}),u.jsxs("button",{className:"btn-add-friendly btn-orange",onClick:se,children:[u.jsx("span",{className:"btn-icon-large",children:"+"})," Tilfj materiale"]})]}),u.jsx("div",{className:"content-table-wrapper",children:a.length===0?u.jsxs("div",{className:"empty-state-friendly",children:[u.jsx("div",{className:"empty-icon",children:""}),u.jsx("h3",{children:"Ingen materialer endnu"}),u.jsx("p",{children:'Klik p "Tilfj materiale" for at registrere indkb'})]}):u.jsxs("table",{className:"friendly-table",children:[u.jsx("thead",{children:u.jsxs("tr",{children:[u.jsx("th",{children:"Materiale"}),u.jsx("th",{children:"Leverandr"}),u.jsx("th",{children:"Antal"}),u.jsx("th",{children:"Indkbspris"}),u.jsx("th",{children:"Salgspris"}),u.jsx("th",{children:"Avance"}),u.jsx("th",{})]})}),u.jsx("tbody",{children:a.map(he=>u.jsxs("tr",{children:[u.jsx("td",{className:"material-cell",children:he.materialName||"Ikke angivet"}),u.jsx("td",{children:he.supplierName||"-"}),u.jsxs("td",{children:[he.quantity," ",he.unit]}),u.jsx("td",{children:ei(he.purchasePrice)}),u.jsx("td",{children:ei(he.sellingPrice)}),u.jsx("td",{className:"margin-cell",style:{color:(he.marginKr||0)>=0?"#27ae60":"#e74c3c"},children:ei(he.marginKr)}),u.jsxs("td",{className:"actions-cell",children:[u.jsx("button",{className:"btn-icon-action",onClick:()=>le(he),title:"Ret",children:""}),u.jsx("button",{className:"btn-icon-action",onClick:()=>ue(he),title:"Slet",children:""})]})]},he.id))})]})})]}),I==="dokumenter"&&u.jsx("div",{className:"dokumenter-tab-new",children:u.jsx(WF,{project:n,currentUser:"Admin"})})]}),T&&u.jsx(MN,{isOpen:T,project:n,onClose:()=>w(!1),onSave:we}),N&&u.jsx(fF,{timeEntry:B,defaultRate:L,employees:g,onClose:()=>C(!1),onSave:H}),F&&u.jsx(pF,{purchase:y,project:n,suppliers:l,materials:d,onClose:()=>Q(!1),onSave:de})]})}function QF({supplier:t,onSave:e,onClose:n}){const[r,i]=oe.useState({name:"",cvr:"",contactPerson:"",phone:"",email:"",address:"",customerNumber:"",type:"",preferredPaymentMethod:"",notes:""}),[s,a]=oe.useState({}),o=["Byggemarked","Grossist","Specialforhandler","Tmmerhandel","El-grossist","VVS-grossist","Malerforretning","Vrktjsforhandler","Andet"],l=["Faktura","Kontant","Kort","Firmakort","MobilePay","Konto"];oe.useEffect(()=>{t&&i({name:t.name||"",cvr:t.cvr||"",contactPerson:t.contactPerson||"",phone:t.phone||"",email:t.email||"",address:t.address||"",customerNumber:t.customerNumber||"",type:t.type||"",preferredPaymentMethod:t.preferredPaymentMethod||"",notes:t.notes||""})},[t]);const c=T=>{const{name:w,value:N}=T.target;i(C=>({...C,[w]:N})),s[w]&&a(C=>({...C,[w]:null}))},d=T=>T.replace(/\D/g,"").slice(0,8),p=T=>{const w=d(T.target.value);i(N=>({...N,cvr:w})),s.cvr&&a(N=>({...N,cvr:null}))},g=T=>T.replace(/\D/g,"").slice(0,8),m=T=>{const w=g(T.target.value);i(N=>({...N,phone:w})),s.phone&&a(N=>({...N,phone:null}))},b=()=>{const T={};return(!r.name||r.name.trim().length<2)&&(T.name="Leverandrnavn er pkrvet (min. 2 tegn)"),(!r.cvr||r.cvr.length!==8)&&(T.cvr="CVR skal vre 8 cifre"),r.email&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r.email)&&(T.email="Ugyldig email-adresse"),r.phone&&r.phone.length!==8&&(T.phone="Telefonnummer skal vre 8 cifre"),a(T),Object.keys(T).length===0},x=T=>{if(T.preventDefault(),b()){const w={name:r.name.trim(),cvr:r.cvr,contactPerson:r.contactPerson.trim(),phone:r.phone,email:r.email.trim().toLowerCase(),address:r.address.trim(),customerNumber:r.customerNumber.trim(),type:r.type,preferredPaymentMethod:r.preferredPaymentMethod,notes:r.notes.trim()};e(w)}};return u.jsx("div",{className:"modal-overlay",children:u.jsxs("div",{className:"modal-content supplier-modal",onClick:T=>T.stopPropagation(),children:[u.jsxs("div",{className:"modal-header",children:[u.jsx("h2",{children:t?"Redigr Leverandr":"Tilfj Leverandr"}),u.jsx("button",{className:"modal-close",onClick:n,children:""})]}),u.jsxs("form",{onSubmit:x,className:"modal-form",children:[u.jsxs("div",{className:"form-section",children:[u.jsx("h3",{className:"form-section-title",children:"Grundoplysninger"}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"name",children:"Leverandrnavn *"}),u.jsx("input",{type:"text",id:"name",name:"name",value:r.name,onChange:c,className:s.name?"input-error":"",placeholder:"F.eks. XL-BYG Slagelse",autoFocus:!0}),s.name&&u.jsx("span",{className:"error-text",children:s.name})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"cvr",children:"CVR-nummer *"}),u.jsx("input",{type:"text",id:"cvr",name:"cvr",value:r.cvr,onChange:p,className:s.cvr?"input-error":"",placeholder:"12345678",maxLength:"8"}),s.cvr&&u.jsx("span",{className:"error-text",children:s.cvr}),u.jsx("small",{className:"form-hint",children:"8 cifre uden mellemrum"})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"customerNumber",children:"Kundenummer"}),u.jsx("input",{type:"text",id:"customerNumber",name:"customerNumber",value:r.customerNumber,onChange:c,placeholder:"Vores kundenummer hos leverandren"}),u.jsx("small",{className:"form-hint",children:"Jeres kontonummer eller kundenummer hos denne leverandr"})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"type",children:"Type"}),u.jsxs("select",{id:"type",name:"type",value:r.type,onChange:c,children:[u.jsx("option",{value:"",children:"-- Vlg type --"}),o.map(T=>u.jsx("option",{value:T,children:T},T))]})]})]}),u.jsxs("div",{className:"form-section",children:[u.jsx("h3",{className:"form-section-title",children:"Kontaktoplysninger"}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"contactPerson",children:"Kontaktperson"}),u.jsx("input",{type:"text",id:"contactPerson",name:"contactPerson",value:r.contactPerson,onChange:c,placeholder:"F.eks. Hans Jensen"})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"phone",children:"Telefon"}),u.jsx("input",{type:"text",id:"phone",name:"phone",value:r.phone,onChange:m,className:s.phone?"input-error":"",placeholder:"12345678",maxLength:"8"}),s.phone&&u.jsx("span",{className:"error-text",children:s.phone}),u.jsx("small",{className:"form-hint",children:"8 cifre uden mellemrum"})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"email",children:"Email"}),u.jsx("input",{type:"email",id:"email",name:"email",value:r.email,onChange:c,className:s.email?"input-error":"",placeholder:"kontakt@leverandoer.dk"}),s.email&&u.jsx("span",{className:"error-text",children:s.email})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"address",children:"Adresse"}),u.jsx("textarea",{id:"address",name:"address",value:r.address,onChange:c,rows:"2",placeholder:`Gadenavn 123
1234 By`})]})]}),u.jsxs("div",{className:"form-section",children:[u.jsx("h3",{className:"form-section-title",children:"Betaling"}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"preferredPaymentMethod",children:"Foretrukken betalingsmetode"}),u.jsxs("select",{id:"preferredPaymentMethod",name:"preferredPaymentMethod",value:r.preferredPaymentMethod,onChange:c,children:[u.jsx("option",{value:"",children:"-- Vlg betalingsmetode --"}),l.map(T=>u.jsx("option",{value:T,children:T},T))]})]})]}),u.jsxs("div",{className:"form-section",children:[u.jsx("h3",{className:"form-section-title",children:"Noter"}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"notes",children:"Interne bemrkninger"}),u.jsx("textarea",{id:"notes",name:"notes",value:r.notes,onChange:c,rows:"3",placeholder:"Ekstra noter om leverandren..."})]})]}),u.jsxs("div",{className:"modal-footer",children:[u.jsx("button",{type:"button",className:"btn-secondary",onClick:n,children:"Annuller"}),u.jsx("button",{type:"submit",className:"btn-primary",children:t?"Gem ndringer":"Tilfj leverandr"})]})]})]})})}function YF({material:t,suppliers:e,onSave:n,onClose:r}){const[i,s]=oe.useState({name:"",sku:"",unit:"stk",category:"",defaultSupplierId:"",defaultSupplierName:"",standardMarkup:"50"}),[a,o]=oe.useState({}),l=["stk","m","m","m","kg","liter","pose","rulle","palle"],c=["Tr","Gips","El-materialer","VVS","Maling","Vrktj","Diverse"];oe.useEffect(()=>{t&&s({name:t.name||"",sku:t.sku||"",unit:t.unit||"stk",category:t.category||"",defaultSupplierId:t.defaultSupplierId||"",defaultSupplierName:t.defaultSupplierName||"",standardMarkup:String(t.standardMarkup||50)})},[t]);const d=m=>{const{name:b,value:x}=m.target;s(T=>{const w={...T,[b]:x};if(b==="defaultSupplierId"&&x){const N=e.find(C=>C.id===x);N&&(w.defaultSupplierName=N.name)}else b==="defaultSupplierId"&&!x&&(w.defaultSupplierName="");return w}),a[b]&&o(T=>({...T,[b]:null}))},p=()=>{const m={};(!i.name||i.name.trim().length<2)&&(m.name="Materiale navn er pkrvet (min. 2 tegn)"),i.unit||(m.unit="Enhed er pkrvet"),i.category||(m.category="Kategori er pkrvet");const b=parseFloat(i.standardMarkup);return(isNaN(b)||b<0||b>500)&&(m.standardMarkup="Avance skal vre mellem 0 og 500%"),o(m),Object.keys(m).length===0},g=m=>{if(m.preventDefault(),p()){const b={name:i.name.trim(),sku:i.sku.trim(),unit:i.unit,category:i.category,defaultSupplierId:i.defaultSupplierId||null,defaultSupplierName:i.defaultSupplierName,standardMarkup:parseFloat(i.standardMarkup)};n(b)}};return u.jsx("div",{className:"modal-overlay",children:u.jsxs("div",{className:"modal-content material-modal",onClick:m=>m.stopPropagation(),children:[u.jsxs("div",{className:"modal-header",children:[u.jsx("h2",{children:t?"Redigr Materiale":"Tilfj Materiale"}),u.jsx("button",{className:"modal-close",onClick:r,children:""})]}),u.jsxs("form",{onSubmit:g,className:"modal-form",children:[u.jsxs("div",{className:"form-section",children:[u.jsx("h3",{className:"form-section-title",children:"Grundoplysninger"}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"name",children:"Materiale navn *"}),u.jsx("input",{type:"text",id:"name",name:"name",value:i.name,onChange:d,className:a.name?"input-error":"",placeholder:"F.eks. Gipsplader 13mm",autoFocus:!0}),a.name&&u.jsx("span",{className:"error-text",children:a.name})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"sku",children:"Artikelnummer / Varenummer"}),u.jsx("input",{type:"text",id:"sku",name:"sku",value:i.sku,onChange:d,placeholder:"F.eks. GP13-001"}),u.jsx("small",{className:"form-hint",children:"Leverandrens varenummer"})]}),u.jsxs("div",{className:"form-row",children:[u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"unit",children:"Enhed *"}),u.jsx("select",{id:"unit",name:"unit",value:i.unit,onChange:d,className:a.unit?"input-error":"",children:l.map(m=>u.jsx("option",{value:m,children:m},m))}),a.unit&&u.jsx("span",{className:"error-text",children:a.unit})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"category",children:"Kategori *"}),u.jsxs("select",{id:"category",name:"category",value:i.category,onChange:d,className:a.category?"input-error":"",children:[u.jsx("option",{value:"",children:"-- Vlg --"}),c.map(m=>u.jsx("option",{value:m,children:m},m))]}),a.category&&u.jsx("span",{className:"error-text",children:a.category})]})]})]}),u.jsxs("div",{className:"form-section",children:[u.jsx("h3",{className:"form-section-title",children:"Standard leverandr & prisstning"}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"defaultSupplierId",children:"Standard leverandr"}),u.jsxs("select",{id:"defaultSupplierId",name:"defaultSupplierId",value:i.defaultSupplierId,onChange:d,children:[u.jsx("option",{value:"",children:"-- Ingen standard --"}),e.map(m=>u.jsx("option",{value:m.id,children:m.name},m.id))]}),u.jsx("small",{className:"form-hint",children:"Vlges automatisk nr du tilfjer dette materiale til en sag"})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"standardMarkup",children:"Standard avance (%) *"}),u.jsx("input",{type:"text",id:"standardMarkup",name:"standardMarkup",value:i.standardMarkup,onChange:d,className:a.standardMarkup?"input-error":"",placeholder:"F.eks. 50"}),a.standardMarkup&&u.jsx("span",{className:"error-text",children:a.standardMarkup}),u.jsx("small",{className:"form-hint",children:"Bruges til at beregne salgspris automatisk (f.eks. 50% = indkb * 1.5)"})]}),t&&t.lastPurchasePrice&&u.jsxs("div",{className:"info-box",children:[u.jsx("div",{className:"info-box-title",children:"Seneste indkb"}),u.jsxs("div",{className:"info-box-content",children:[u.jsx("strong",{children:"Pris pr. enhed:"})," ",t.lastPurchasePrice.toFixed(2)," kr",u.jsx("br",{}),u.jsx("strong",{children:"Dato:"})," ",new Date(t.lastPurchaseDate).toLocaleDateString("da-DK")]})]})]}),u.jsxs("div",{className:"modal-footer",children:[u.jsx("button",{type:"button",className:"btn-secondary",onClick:r,children:"Annuller"}),u.jsx("button",{type:"submit",className:"btn-primary",children:t?"Gem ndringer":"Tilfj materiale"})]})]})]})})}function JF(){const{showSuccess:t,showError:e,showCriticalConfirm:n}=Ti(),[r,i]=oe.useState("leverandoerer"),[s,a]=oe.useState([]),[o,l]=oe.useState([]),[c,d]=oe.useState([]),[p,g]=oe.useState([]),[m,b]=oe.useState([]),[x,T]=oe.useState([]),[w,N]=oe.useState(!1),[C,F]=oe.useState(!1),[Q,B]=oe.useState(!1),[j,y]=oe.useState(null),[S,L]=oe.useState(null),[E,I]=oe.useState(""),[k,M]=oe.useState("all"),[te,V]=oe.useState(""),[U,z]=oe.useState("all"),[$,ne]=oe.useState(""),[we,O]=oe.useState("all"),[Y,J]=oe.useState("all"),[H,se]=oe.useState(!1),[le,ue]=oe.useState(!1),[de,Ae]=oe.useState(!1);oe.useEffect(()=>{r==="leverandoerer"?Te():r==="katalog"?(Re(),Te()):r==="indkoeb"&&(Be(),Te())},[r]),oe.useEffect(()=>{Xe()},[s,E,k]),oe.useEffect(()=>{be()},[o,te,U]),oe.useEffect(()=>{ae()},[c,$,we,Y]);const Te=async()=>{N(!0);try{const _e=await VN();_e.success&&a(_e.suppliers)}catch(_e){console.error("Error loading suppliers:",_e)}finally{N(!1)}},Re=async()=>{N(!0);try{const _e=await UN();_e.success&&l(_e.materials)}catch(_e){console.error("Error loading materials:",_e)}finally{N(!1)}},Be=async()=>{N(!0);try{const _e=await xF();_e.success&&d(_e.purchases)}catch(_e){console.error("Error loading purchases:",_e)}finally{N(!1)}},Xe=()=>{let _e=[...s];if(E.trim()){const $e=E.toLowerCase();_e=_e.filter(mt=>{var ft,Tt,Vn,xt,vr;return((ft=mt.name)==null?void 0:ft.toLowerCase().includes($e))||((Tt=mt.contactPerson)==null?void 0:Tt.toLowerCase().includes($e))||((Vn=mt.phone)==null?void 0:Vn.toLowerCase().includes($e))||((xt=mt.email)==null?void 0:xt.toLowerCase().includes($e))||((vr=mt.cvr)==null?void 0:vr.toLowerCase().includes($e))})}k!=="all"&&(_e=_e.filter($e=>$e.type===k)),g(_e)},be=()=>{let _e=[...o];if(te.trim()){const $e=te.toLowerCase();_e=_e.filter(mt=>{var ft,Tt;return((ft=mt.name)==null?void 0:ft.toLowerCase().includes($e))||((Tt=mt.sku)==null?void 0:Tt.toLowerCase().includes($e))})}U!=="all"&&(_e=_e.filter($e=>$e.category===U)),b(_e)},ae=()=>{let _e=[...c];if($.trim()){const $e=$.toLowerCase();_e=_e.filter(mt=>{var ft,Tt,Vn,xt;return((ft=mt.materialName)==null?void 0:ft.toLowerCase().includes($e))||((Tt=mt.supplierName)==null?void 0:Tt.toLowerCase().includes($e))||((Vn=mt.caseName)==null?void 0:Vn.toLowerCase().includes($e))||((xt=mt.caseNumber)==null?void 0:xt.toLowerCase().includes($e))})}we!=="all"&&(_e=_e.filter($e=>$e.supplierId===we)),Y!=="all"&&(_e=_e.filter($e=>$e.category===Y)),T(_e)},He=()=>{const _e=x.reduce((ft,Tt)=>ft+(Tt.purchasePrice||0),0),$e=x.reduce((ft,Tt)=>ft+(Tt.sellingPrice||0),0),mt=$e-_e;return{totalPurchaseCost:_e,totalSellingPrice:$e,totalMargin:mt}},De=_e=>`${_e.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,".")} kr`,he=()=>{y(null),F(!0)},Ie=_e=>{y(_e),F(!0)},Me=async _e=>{if(await n({title:"Slet leverandr?",message:"Dette vil permanent slette leverandren.",itemName:_e.name,warningText:null,confirmText:"Slet Permanent",cancelText:"Annuller"}))try{(await vF(_e.id)).success?(t("Leverandr slettet!"),await Te()):e("Der opstod en fejl ved sletning af leverandr.")}catch(mt){console.error("Error deleting supplier:",mt),e("Der opstod en fejl ved sletning af leverandr.")}},Ke=async _e=>{try{j?(await gF(j.id,_e)).success?(F(!1),t("Leverandr opdateret!"),await Te()):e("Der opstod en fejl ved opdatering af leverandr."):(await mF(_e)).success?(F(!1),t("Leverandr oprettet!"),await Te()):e("Der opstod en fejl ved tilfjelse af leverandr.")}catch($e){console.error("Error saving supplier:",$e),e("Der opstod en fejl ved gemning af leverandr.")}},We=()=>{L(null),B(!0)},Ye=_e=>{L(_e),B(!0)},at=async _e=>{if(await n({title:"Slet materiale?",message:"Dette vil permanent slette materialet fra kataloget.",itemName:_e.name,warningText:_e.lastPurchaseDate?"Dette materiale har historiske indkb knyttet til sig":null,confirmText:"Slet Permanent",cancelText:"Annuller"}))try{(await wF(_e.id)).success?(t("Materiale slettet!"),await Re()):e("Der opstod en fejl ved sletning af materiale.")}catch(mt){console.error("Error deleting material:",mt),e("Der opstod en fejl ved sletning af materiale.")}},tt=async _e=>{try{S?(await BN(S.id,_e)).success?(B(!1),t("Materiale opdateret!"),await Re()):e("Der opstod en fejl ved opdatering af materiale."):(await yF(_e)).success?(B(!1),t("Materiale oprettet!"),await Re()):e("Der opstod en fejl ved tilfjelse af materiale.")}catch($e){console.error("Error saving material:",$e),e("Der opstod en fejl ved gemning af materiale.")}},ut=async _e=>{if(await n({title:"Slet indkb?",message:"Dette vil permanent slette indkbet.",itemName:_e.materialName,warningText:`Fra sag: ${_e.caseName||"Ukendt sag"}`,confirmText:"Slet Permanent",cancelText:"Annuller"}))try{(await KN(_e.id)).success?(t("Indkb slettet!"),await Be()):e("Der opstod en fejl ved sletning af indkb.")}catch(mt){console.error("Error deleting purchase:",mt),e("Der opstod en fejl ved sletning af indkb.")}},dt=()=>{const _e=new Set;return o.forEach($e=>$e.category&&_e.add($e.category)),Array.from(_e).sort()},{totalPurchaseCost:ot,totalSellingPrice:ct,totalMargin:ze}=He();return u.jsxs("div",{children:[u.jsxs("div",{className:"welcome-section",children:[u.jsx("h1",{children:"Hej! Her er dine materialer"}),u.jsx("p",{className:"helper-text",children:"Administrer leverandrer, materialer og hold styr p alle indkb"}),u.jsx("img",{src:"/planks.png",alt:"",className:"page-header-clipart clipart-materialer","aria-hidden":"true"})]}),u.jsxs("div",{className:"sag-tabs-colorful material-tabs",children:[u.jsxs("button",{className:`sag-tab-colorful tab-blue ${r==="leverandoerer"?"active":""}`,onClick:()=>i("leverandoerer"),children:[u.jsx("span",{className:"tab-icon",children:""}),u.jsx("span",{className:"tab-text",children:"Leverandrer"})]}),u.jsxs("button",{className:`sag-tab-colorful tab-green ${r==="katalog"?"active":""}`,onClick:()=>i("katalog"),children:[u.jsx("span",{className:"tab-icon",children:""}),u.jsx("span",{className:"tab-text",children:"Materiale Katalog"})]}),u.jsxs("button",{className:`sag-tab-colorful tab-orange ${r==="indkoeb"?"active":""}`,onClick:()=>i("indkoeb"),children:[u.jsx("span",{className:"tab-icon",children:""}),u.jsx("span",{className:"tab-text",children:"Alle Indkb"})]})]}),u.jsxs("div",{className:"tab-content-area",children:[r==="leverandoerer"&&u.jsxs("div",{className:"tab-section",children:[u.jsxs("div",{className:"tab-header-section",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"tab-title",children:"Dine leverandrer"}),u.jsx("p",{className:"tab-subtitle",children:"Hold styr p kontaktinfo og leverandrdetaljer"})]}),u.jsxs("button",{className:"btn-add-friendly btn-blue",onClick:he,children:[u.jsx("span",{className:"btn-icon-large",children:"+"})," Ny leverandr"]})]}),u.jsxs("div",{className:"search-section",children:[u.jsxs("div",{className:"search-box-large",children:[u.jsx("span",{className:"search-icon",children:""}),u.jsx("input",{type:"text",placeholder:"Sg efter navn, kontakt, telefon, email eller CVR...",value:E,onChange:_e=>I(_e.target.value),className:"search-input-large"})]}),u.jsxs("button",{className:`btn-filter-toggle ${H?"active":""}`,onClick:()=>se(!H),children:["Filtre ",H?"":""]})]}),H&&u.jsx("div",{className:"filter-panel",children:u.jsxs("div",{className:"filter-group",children:[u.jsx("label",{children:"Type"}),u.jsxs("select",{value:k,onChange:_e=>M(_e.target.value),className:"filter-select-friendly",children:[u.jsx("option",{value:"all",children:"Alle typer"}),u.jsx("option",{value:"Byggemarked",children:"Byggemarked"}),u.jsx("option",{value:"Grossist",children:"Grossist"}),u.jsx("option",{value:"Specialforhandler",children:"Specialforhandler"}),u.jsx("option",{value:"Andet",children:"Andet"})]})]})}),u.jsx("div",{className:"content-table-wrapper",children:w?u.jsxs("div",{className:"empty-state-friendly",children:[u.jsx("div",{className:"empty-icon",children:""}),u.jsx("h3",{children:"Henter leverandrer..."})]}):p.length===0?u.jsxs("div",{className:"empty-state-friendly",children:[u.jsx("div",{className:"empty-icon",children:""}),u.jsxs("h3",{children:["Ingen leverandrer ",E||k!=="all"?"matcher din sgning":"endnu"]}),u.jsx("p",{children:E||k!=="all"?"Prv en anden sgning":'Klik p "Ny leverandr" for at komme i gang'})]}):u.jsxs("table",{className:"friendly-table",children:[u.jsx("thead",{children:u.jsxs("tr",{children:[u.jsx("th",{children:"Navn"}),u.jsx("th",{children:"Type"}),u.jsx("th",{children:"Kontaktperson"}),u.jsx("th",{children:"Telefon"}),u.jsx("th",{children:"Email"}),u.jsx("th",{children:"CVR"}),u.jsx("th",{})]})}),u.jsx("tbody",{children:p.map(_e=>u.jsxs("tr",{children:[u.jsx("td",{className:"supplier-name-cell",children:u.jsx("strong",{children:_e.name})}),u.jsx("td",{children:u.jsx("span",{className:"badge-neutral",children:_e.type||"-"})}),u.jsx("td",{children:_e.contactPerson||"-"}),u.jsx("td",{children:_e.phone||"-"}),u.jsx("td",{children:_e.email||"-"}),u.jsx("td",{children:_e.cvr||"-"}),u.jsxs("td",{className:"actions-cell",children:[u.jsx("button",{className:"btn-icon-friendly btn-edit",onClick:()=>Ie(_e),title:"Ret",children:""}),u.jsx("button",{className:"btn-icon-friendly btn-delete",onClick:()=>Me(_e),title:"Slet",children:""})]})]},_e.id))})]})})]}),r==="katalog"&&u.jsxs("div",{className:"tab-section",children:[u.jsxs("div",{className:"tab-header-section",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"tab-title",children:"Materiale katalog"}),u.jsx("p",{className:"tab-subtitle",children:"Opret genbrugelige materialer med standardpriser"})]}),u.jsxs("button",{className:"btn-add-friendly btn-green",onClick:We,children:[u.jsx("span",{className:"btn-icon-large",children:"+"})," Nyt materiale"]})]}),u.jsxs("div",{className:"search-section",children:[u.jsxs("div",{className:"search-box-large",children:[u.jsx("span",{className:"search-icon",children:""}),u.jsx("input",{type:"text",placeholder:"Sg efter materiale navn eller varenummer...",value:te,onChange:_e=>V(_e.target.value),className:"search-input-large"})]}),u.jsxs("button",{className:`btn-filter-toggle ${le?"active":""}`,onClick:()=>ue(!le),children:["Filtre ",le?"":""]})]}),le&&u.jsx("div",{className:"filter-panel",children:u.jsxs("div",{className:"filter-group",children:[u.jsx("label",{children:"Kategori"}),u.jsxs("select",{value:U,onChange:_e=>z(_e.target.value),className:"filter-select-friendly",children:[u.jsx("option",{value:"all",children:"Alle kategorier"}),dt().map(_e=>u.jsx("option",{value:_e,children:_e},_e))]})]})}),u.jsx("div",{className:"content-table-wrapper",children:w?u.jsxs("div",{className:"empty-state-friendly",children:[u.jsx("div",{className:"empty-icon",children:""}),u.jsx("h3",{children:"Henter materialer..."})]}):m.length===0?u.jsxs("div",{className:"empty-state-friendly",children:[u.jsx("div",{className:"empty-icon",children:""}),u.jsxs("h3",{children:["Ingen materialer ",te||U!=="all"?"matcher din sgning":"endnu"]}),u.jsx("p",{children:te||U!=="all"?"Prv en anden sgning":'Klik p "Nyt materiale" for at tilfje til kataloget'})]}):u.jsxs("table",{className:"friendly-table",children:[u.jsx("thead",{children:u.jsxs("tr",{children:[u.jsx("th",{children:"Materiale"}),u.jsx("th",{children:"Varenr."}),u.jsx("th",{children:"Kategori"}),u.jsx("th",{children:"Enhed"}),u.jsx("th",{children:"Standard avance"}),u.jsx("th",{children:"Seneste pris"}),u.jsx("th",{})]})}),u.jsx("tbody",{children:m.map(_e=>u.jsxs("tr",{children:[u.jsx("td",{className:"material-name-cell",children:u.jsx("strong",{children:_e.name})}),u.jsx("td",{children:_e.sku||"-"}),u.jsx("td",{children:u.jsx("span",{className:"badge-neutral",children:_e.category})}),u.jsx("td",{children:_e.unit}),u.jsxs("td",{children:[_e.standardMarkup,"%"]}),u.jsx("td",{children:_e.lastPurchasePrice?u.jsxs(u.Fragment,{children:[De(_e.lastPurchasePrice),_e.lastPurchaseDate&&u.jsx("div",{style:{fontSize:"11px",color:"#7f8c8d"},children:new Date(_e.lastPurchaseDate).toLocaleDateString("da-DK")})]}):"-"}),u.jsxs("td",{className:"actions-cell",children:[u.jsx("button",{className:"btn-icon-friendly btn-edit",onClick:()=>Ye(_e),title:"Ret",children:""}),u.jsx("button",{className:"btn-icon-friendly btn-delete",onClick:()=>at(_e),title:"Slet",children:""})]})]},_e.id))})]})})]}),r==="indkoeb"&&u.jsxs("div",{className:"tab-section",children:[u.jsx("div",{className:"tab-header-section",children:u.jsxs("div",{children:[u.jsx("h2",{className:"tab-title",children:"Alle indkb"}),u.jsx("p",{className:"tab-subtitle",children:"Oversigt over alle materialeindkb p tvrs af sager"})]})}),u.jsxs("div",{className:"tab-summary-boxes",children:[u.jsxs("div",{className:"summary-box box-blue",children:[u.jsx("div",{className:"summary-icon",children:""}),u.jsxs("div",{className:"summary-content",children:[u.jsx("div",{className:"summary-value",children:De(ot)}),u.jsx("div",{className:"summary-label",children:"Indkbt for"})]})]}),u.jsxs("div",{className:"summary-box box-orange",children:[u.jsx("div",{className:"summary-icon",children:""}),u.jsxs("div",{className:"summary-content",children:[u.jsx("div",{className:"summary-value",children:De(ct)}),u.jsx("div",{className:"summary-label",children:"Slges for"})]})]}),u.jsxs("div",{className:`summary-box ${ze>=0?"box-green":"box-red"}`,children:[u.jsx("div",{className:"summary-icon",children:ze>=0?"":""}),u.jsxs("div",{className:"summary-content",children:[u.jsx("div",{className:"summary-value",children:De(ze)}),u.jsx("div",{className:"summary-label",children:"Total avance"})]})]})]}),u.jsxs("div",{className:"search-section",children:[u.jsxs("div",{className:"search-box-large",children:[u.jsx("span",{className:"search-icon",children:""}),u.jsx("input",{type:"text",placeholder:"Sg efter materiale, leverandr, sag...",value:$,onChange:_e=>ne(_e.target.value),className:"search-input-large"})]}),u.jsxs("button",{className:`btn-filter-toggle ${de?"active":""}`,onClick:()=>Ae(!de),children:["Filtre ",de?"":""]})]}),de&&u.jsxs("div",{className:"filter-panel",children:[u.jsxs("div",{className:"filter-group",children:[u.jsx("label",{children:"Leverandr"}),u.jsxs("select",{value:we,onChange:_e=>O(_e.target.value),className:"filter-select-friendly",children:[u.jsx("option",{value:"all",children:"Alle leverandrer"}),s.map(_e=>u.jsx("option",{value:_e.id,children:_e.name},_e.id))]})]}),u.jsxs("div",{className:"filter-group",children:[u.jsx("label",{children:"Kategori"}),u.jsxs("select",{value:Y,onChange:_e=>J(_e.target.value),className:"filter-select-friendly",children:[u.jsx("option",{value:"all",children:"Alle kategorier"}),dt().map(_e=>u.jsx("option",{value:_e,children:_e},_e))]})]})]}),u.jsx("div",{className:"content-table-wrapper",children:w?u.jsxs("div",{className:"empty-state-friendly",children:[u.jsx("div",{className:"empty-icon",children:""}),u.jsx("h3",{children:"Henter indkb..."})]}):x.length===0?u.jsxs("div",{className:"empty-state-friendly",children:[u.jsx("div",{className:"empty-icon",children:""}),u.jsxs("h3",{children:["Ingen indkb ",$||we!=="all"||Y!=="all"?"matcher din sgning":"endnu"]}),u.jsx("p",{children:$||we!=="all"||Y!=="all"?"Prv en anden sgning":"Indkb vises her nr du tilfjer materialer til sager"})]}):u.jsxs("table",{className:"friendly-table",children:[u.jsx("thead",{children:u.jsxs("tr",{children:[u.jsx("th",{children:"Dato"}),u.jsx("th",{children:"Materiale"}),u.jsx("th",{children:"Sag"}),u.jsx("th",{children:"Leverandr"}),u.jsx("th",{children:"Antal"}),u.jsx("th",{children:"Indkbspris"}),u.jsx("th",{children:"Salgspris"}),u.jsx("th",{children:"Avance"}),u.jsx("th",{})]})}),u.jsx("tbody",{children:x.map(_e=>u.jsxs("tr",{children:[u.jsx("td",{children:new Date(_e.date).toLocaleDateString("da-DK")}),u.jsxs("td",{className:"material-name-cell",children:[u.jsx("strong",{children:_e.materialName}),_e.sku&&u.jsx("div",{style:{fontSize:"11px",color:"#7f8c8d"},children:_e.sku})]}),u.jsxs("td",{children:[u.jsx("div",{children:_e.caseName||"Ukendt"}),u.jsx("div",{style:{fontSize:"11px",color:"#7f8c8d"},children:_e.caseNumber})]}),u.jsx("td",{children:_e.supplierName||"-"}),u.jsxs("td",{children:[_e.quantity," ",_e.unit]}),u.jsx("td",{children:De(_e.purchasePrice)}),u.jsx("td",{children:De(_e.sellingPrice)}),u.jsxs("td",{className:"margin-cell",style:{color:(_e.marginKr||0)>=0?"#27ae60":"#e74c3c"},children:[u.jsx("div",{children:De(_e.marginKr||0)}),u.jsxs("div",{style:{fontSize:"11px"},children:["(",(_e.marginPercent||0).toFixed(1),"%)"]})]}),u.jsx("td",{className:"actions-cell",children:u.jsx("button",{className:"btn-icon-friendly btn-delete",onClick:()=>ut(_e),title:"Slet",children:""})})]},_e.id))})]})})]})]}),C&&u.jsx(QF,{supplier:j,onClose:()=>F(!1),onSave:Ke}),Q&&u.jsx(YF,{material:S,suppliers:s,onClose:()=>B(!1),onSave:tt})]})}const XF=["Januar","Februar","Marts","April","Maj","Juni","Juli","August","September","Oktober","November","December"],ZF=["Man","Tir","Ons","Tor","Fre","Lr","Sn"];function uv(t){const e=new Date(t),n=String(e.getDate()).padStart(2,"0"),r=String(e.getMonth()+1).padStart(2,"0"),i=e.getFullYear();return`${n}/${r}/${i}`}function Kl(t){const[e,n,r]=t.split("/");return new Date(r,n-1,e)}function e9(t,e){const n=new Date(t,e,1).getDay();return n===0?6:n-1}function nA(t,e){return new Date(t,e+1,0).getDate()}function t9(t,e,n){const r=new Date;return r.getFullYear()===t&&r.getMonth()===e&&r.getDate()===n}function eb(t){return t?t.substring(0,5):""}const k1=["#5B8DBE","#7A9D54","#CD7672","#8B7FB8","#CC8E5E","#5B9D9D","#9D6B8B","#7B8D5B","#8B6B5B","#6B7B9D","#9D7B5B","#6B9D7B"];function rA(t){if(!t)return k1[0];let e=0;for(let r=0;r<t.length;r++)e=t.charCodeAt(r)+((e<<5)-e);const n=Math.abs(e)%k1.length;return k1[n]}function tb(t,e=.2){const n=t.replace("#",""),r=parseInt(n.substring(0,2),16),i=parseInt(n.substring(2,4),16),s=parseInt(n.substring(4,6),16);return`rgba(${r}, ${i}, ${s}, ${e})`}async function n9(t){try{return{success:!0,id:(await Va(xn(_t,"calendar_events"),{...t,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})).id}}catch(e){return console.error("Error creating calendar event:",e),{success:!1,error:e}}}async function r9(t,e){try{return await Da(mn(_t,"calendar_events",t),{...e,updatedAt:new Date().toISOString()}),{success:!0}}catch(n){return console.error("Error updating calendar event:",n),{success:!1,error:n}}}async function i9(t){try{return await Ma(mn(_t,"calendar_events",t)),{success:!0}}catch(e){return console.error("Error deleting calendar event:",e),{success:!1,error:e}}}async function s9(t,e){try{const n=`01/${String(e+1).padStart(2,"0")}/${t}`,r=`${nA(t,e)}/${String(e+1).padStart(2,"0")}/${t}`,i=await ci(xn(_t,"calendar_events")),s=[];return i.forEach(a=>{const o=a.data(),l=Kl(o.date),c=Kl(n),d=Kl(r);l>=c&&l<=d&&s.push({id:a.id,...o})}),{success:!0,events:s}}catch(n){return console.error("Error loading month events:",n),{success:!1,error:n,events:[]}}}function nb(t,e){return t.filter(n=>n.date===e)}async function a9(t,e,n){try{const r=[],i=new Date(e,n,1),s=new Date(e,n+1,0);for(const a of t){const o=await fy(a.id);o.success&&o.absences&&o.absences.filter(c=>{const d=Kl(c.date);return d>=i&&d<=s}).forEach(c=>{r.push({...c,employeeName:a.name,employeeId:a.id,type:"absence"})})}return{success:!0,absences:r}}catch(r){return console.error("Error loading month absences:",r),{success:!1,error:r,absences:[]}}}function rb(t,e){return t.filter(n=>{if(n.type==="extended"&&n.endDate){const r=Kl(n.date),i=Kl(n.endDate),s=Kl(e);return s>=r&&s<=i}return n.date===e})}function o9(t,e){const n=e.map(r=>({id:`absence-${r.id}`,title:`${r.employeeName} - ${r.absenceReason}`,date:r.date,type:"absence",employeeId:r.employeeId,employeeName:r.employeeName,absenceReason:r.absenceReason,isAbsence:!0,originalData:r}));return[...t,...n]}function l9({isOpen:t,onClose:e,onSave:n,editEvent:r=null,selectedDate:i=null,employees:s=[],projects:a=[]}){const{showWarning:o}=Ti(),[l,c]=oe.useState(""),[d,p]=oe.useState(""),[g,m]=oe.useState(""),[b,x]=oe.useState(""),[T,w]=oe.useState([]),[N,C]=oe.useState(""),[F,Q]=oe.useState(""),[B,j]=oe.useState("work"),[y,S]=oe.useState(!1);oe.useEffect(()=>{if(r){if(c(r.title||""),r.date){const[k,M,te]=r.date.split("/");p(`${te}-${M}-${k}`)}m(r.startTime||""),x(r.endTime||""),w(r.employeeIds||[]),C(r.sagsnummer||""),Q(r.description||""),j(r.eventType||"work")}else if(i){const[k,M,te]=i.split("/");p(`${te}-${M}-${k}`),c(""),m(""),x(""),w([]),C(""),Q(""),j("work")}else c(""),p(""),m(""),x(""),w([]),C(""),Q(""),j("work")},[r,i,t]);const L=k=>{T.includes(k)?w(T.filter(M=>M!==k)):w([...T,k])},E=async k=>{if(k.preventDefault(),!l.trim()){o("Indtast venligst en titel.");return}if(!d){o("Vlg venligst en dato.");return}if(T.length===0){o("Vlg mindst n medarbejder.");return}S(!0);try{const M=new Date(d),te=uv(M),V={title:l.trim(),date:te,startTime:g||null,endTime:b||null,employeeIds:T,employeeNames:T.map(U=>{const z=s.find($=>$.id===U);return z?z.name:""}),sagsnummer:N||null,description:F.trim()||null,eventType:B};await n(V),e()}catch(M){console.error("Error saving event:",M)}finally{S(!1)}},I=k=>{const M=[];return k.sagsnummer&&M.push(`#${k.sagsnummer}`),k.customerName&&M.push(k.customerName),k.address&&M.push(k.address),M.join(" - ")||`Sag #${k.sagsnummer}`};return t?u.jsx("div",{className:"modal-overlay",onClick:e,children:u.jsxs("div",{className:"modal-content calendar-event-modal",onClick:k=>k.stopPropagation(),children:[u.jsxs("div",{className:"modal-header",children:[u.jsx("h2",{children:r?"Redigr begivenhed":"Opret ny begivenhed"}),u.jsx("button",{className:"modal-close",onClick:e,children:""})]}),u.jsxs("form",{onSubmit:E,children:[u.jsxs("div",{className:"modal-body",children:[u.jsxs("div",{className:"form-group",children:[u.jsx("label",{children:"Titel *"}),u.jsx("input",{type:"text",value:l,onChange:k=>c(k.target.value),placeholder:"F.eks. Badevrelse renovering",required:!0})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{children:"Type"}),u.jsxs("select",{value:B,onChange:k=>j(k.target.value),children:[u.jsx("option",{value:"work",children:"Arbejde"}),u.jsx("option",{value:"meeting",children:"Mde"}),u.jsx("option",{value:"call",children:"Telefonmde"}),u.jsx("option",{value:"other",children:"Andet"})]})]}),u.jsxs("div",{className:"form-row",children:[u.jsxs("div",{className:"form-group",children:[u.jsx("label",{children:"Dato *"}),u.jsx("input",{type:"date",value:d,onChange:k=>p(k.target.value),required:!0})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{children:"Start tid (valgfri)"}),u.jsx("input",{type:"time",value:g,onChange:k=>m(k.target.value)})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{children:"Slut tid (valgfri)"}),u.jsx("input",{type:"time",value:b,onChange:k=>x(k.target.value)})]})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{children:"Medarbejdere *"}),u.jsxs("div",{className:"employee-checkbox-list",children:[s.map(k=>u.jsxs("label",{className:"employee-checkbox-item",children:[u.jsx("input",{type:"checkbox",checked:T.includes(k.id),onChange:()=>L(k.id)}),u.jsx("span",{children:k.name})]},k.id)),s.length===0&&u.jsx("p",{className:"no-data-text",children:"Ingen medarbejdere tilgngelige"})]})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{children:"Tilknyttet sag (valgfri)"}),u.jsxs("select",{value:N,onChange:k=>C(k.target.value),children:[u.jsx("option",{value:"",children:"-- Ingen sag --"}),a.filter(k=>k.status!=="completed").map(k=>u.jsx("option",{value:k.sagsnummer,children:I(k)},k.id))]})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{children:"Beskrivelse (valgfri)"}),u.jsx("textarea",{value:F,onChange:k=>Q(k.target.value),placeholder:"Tilfj detaljer om begivenheden...",rows:"3"})]})]}),u.jsxs("div",{className:"modal-footer",children:[u.jsx("button",{type:"button",className:"btn-secondary",onClick:e,disabled:y,children:"Annuller"}),u.jsx("button",{type:"submit",className:"btn-primary",disabled:y,children:y?"Gemmer...":r?"Gem ndringer":"Opret begivenhed"})]})]})]})}):null}function c9({isOpen:t,onClose:e,selectedDate:n,events:r,absences:i,onEditEvent:s,onDeleteEvent:a}){if(!t)return null;const o=[];r.forEach(c=>{o.push({...c,isAbsence:!1})}),i.forEach(c=>{o.push({...c,title:`${c.employeeName} - ${c.absenceReason}`,isAbsence:!0,originalData:c})});const l=c=>{switch(c){case"work":return"Arbejde";case"meeting":return"Mde";case"call":return"Telefonmde";case"other":return"Andet";default:return"Arbejde"}};return u.jsx("div",{className:"modal-overlay",onClick:e,children:u.jsxs("div",{className:"modal-content event-details-modal-popup",onClick:c=>c.stopPropagation(),children:[u.jsxs("div",{className:"modal-header",children:[u.jsxs("h2",{children:[" Begivenheder for ",n]}),u.jsx("button",{className:"modal-close",onClick:e,children:""})]}),u.jsx("div",{className:"modal-body",children:o.length===0?u.jsx("div",{className:"no-data-text",children:u.jsx("p",{children:"Ingen begivenheder denne dag"})}):u.jsx("div",{className:"event-details-list-modal",children:o.map((c,d)=>{var p;if(c.isAbsence){const g="#f57c00";return u.jsxs("div",{className:"event-detail-item-modal absence-item",style:{borderLeftColor:g},children:[u.jsxs("div",{className:"event-item-header-modal",children:[u.jsx("span",{className:"event-badge-modal",style:{backgroundColor:tb(g,.3),color:g},children:"Fravr"}),u.jsx("div",{className:"event-item-title-modal",children:c.title})]}),c.originalData.hoursWorked&&u.jsxs("div",{className:"event-item-meta-modal",children:[" Arbejdede ",c.originalData.hoursWorked," timer"]}),c.originalData.comment&&u.jsxs("div",{className:"event-item-description-modal",children:[" ",c.originalData.comment]}),u.jsx("div",{className:"event-item-footer-modal",children:u.jsx("span",{className:"event-footer-note",children:"Fravr kan redigeres i Timeregistrering"})})]},d)}else{const g=c.employeeIds&&c.employeeIds.length>0?rA(c.employeeIds[0]):"#7f8c8d";return u.jsxs("div",{className:"event-detail-item-modal",style:{borderLeftColor:g},children:[u.jsxs("div",{className:"event-item-header-modal",children:[u.jsx("span",{className:"event-badge-modal",style:{backgroundColor:tb(g,.3),color:g},children:l(c.eventType)}),u.jsx("div",{className:"event-item-title-modal",children:c.title})]}),(c.startTime||c.endTime)&&u.jsxs("div",{className:"event-item-time-modal",children:[" ",eb(c.startTime)," ",c.endTime&&`- ${eb(c.endTime)}`]}),u.jsxs("div",{className:"event-item-employees-modal",children:[" ",(p=c.employeeNames)==null?void 0:p.join(", ")]}),c.sagsnummer&&u.jsxs("div",{className:"event-item-meta-modal",children:[" Sag #",c.sagsnummer]}),c.description&&u.jsxs("div",{className:"event-item-description-modal",children:[" ",c.description]}),u.jsxs("div",{className:"event-item-actions-modal",children:[u.jsx("button",{className:"btn-small btn-secondary",onClick:()=>{s(c),e()},children:" Redigr"}),u.jsx("button",{className:"btn-small btn-danger",onClick:()=>{a(c),e()},children:" Slet"})]})]},d)}})})}),u.jsx("div",{className:"modal-footer",children:u.jsx("button",{className:"btn-secondary",onClick:e,children:"Luk"})})]})})}function u9(){const{showSuccess:t,showError:e,showConfirm:n}=Ti(),[r,i]=oe.useState(new Date().getFullYear()),[s,a]=oe.useState(new Date().getMonth()),[o,l]=oe.useState([]),[c,d]=oe.useState([]),[p,g]=oe.useState([]),[m,b]=oe.useState([]),[x,T]=oe.useState(!1),[w,N]=oe.useState(!1),[C,F]=oe.useState(!1),[Q,B]=oe.useState(null),[j,y]=oe.useState([]),[S,L]=oe.useState([]),[E,I]=oe.useState(null);oe.useEffect(()=>{k()},[r,s]),oe.useEffect(()=>{V(),U()},[]);const k=async()=>{T(!0),await Promise.all([M(),te()]),T(!1)},M=async()=>{const le=await s9(r,s);le.success?l(le.events):e("Fejl ved indlsning af begivenheder.")},te=async()=>{if(p.length===0)return;const le=await a9(p,r,s);le.success?d(le.absences):console.error("Error loading absences")},V=async()=>{try{const le=await ci(xn(_t,"employees")),ue=[];le.forEach(de=>{ue.push({id:de.id,...de.data()})}),g(ue)}catch(le){console.error("Error loading employees:",le)}},U=async()=>{try{const le=await ci(xn(_t,"projects")),ue=[];le.forEach(de=>{ue.push({id:de.id,...de.data()})}),b(ue)}catch(le){console.error("Error loading projects:",le)}};oe.useEffect(()=>{p.length>0&&te()},[p]);const z=()=>{s===0?(a(11),i(r-1)):a(s-1)},$=()=>{s===11?(a(0),i(r+1)):a(s+1)},ne=()=>{const le=new Date;i(le.getFullYear()),a(le.getMonth())},we=le=>{const ue=uv(new Date(r,s,le));B(ue);const de=nb(o,ue),Ae=rb(c,ue);de.length>0||Ae.length>0?(y(de),L(Ae),F(!0)):(I(null),N(!0))},O=()=>{B(null),I(null),N(!0)},Y=le=>{I(le),N(!0)},J=async le=>{E?(await r9(E.id,le)).success?(t("Begivenhed opdateret!"),M()):e("Fejl ved opdatering af begivenhed."):(await n9(le)).success?(t("Begivenhed oprettet!"),M()):e("Fejl ved oprettelse af begivenhed.")},H=async le=>{if(!await n({title:"Slet begivenhed",message:"Er du sikker p at du vil slette denne begivenhed?",confirmText:"Slet",cancelText:"Annuller"}))return;(await i9(le.id)).success?(t("Begivenhed slettet!"),M(),F(!1)):e("Fejl ved sletning af begivenhed.")},se=()=>{const le=e9(r,s),ue=nA(r,s),de=[];for(let Ae=0;Ae<le;Ae++)de.push(u.jsx("div",{className:"calendar-day empty"},`empty-${Ae}`));for(let Ae=1;Ae<=ue;Ae++){const Te=uv(new Date(r,s,Ae)),Re=nb(o,Te),Be=rb(c,Te),Xe=o9(Re,Be),be=Xe.length>0,ae=t9(r,s,Ae);de.push(u.jsxs("div",{className:`calendar-day ${be?"has-events":""} ${ae?"today":""}`,onClick:()=>we(Ae),children:[u.jsx("div",{className:"calendar-day-number",children:Ae}),be&&u.jsxs("div",{className:"calendar-day-indicators",children:[Xe.slice(0,3).map((He,De)=>{var Ie;const he=He.isAbsence?"#f57c00":rA(((Ie=He.employeeIds)==null?void 0:Ie[0])||He.employeeId);return u.jsx("div",{className:"calendar-event-dot",style:{backgroundColor:he},title:He.title},De)}),Xe.length>3&&u.jsxs("span",{className:"calendar-more-indicator",children:["+",Xe.length-3]})]})]},Ae))}return de};return u.jsxs("div",{children:[u.jsx("div",{className:"page-header-friendly",children:u.jsxs("div",{className:"welcome-section",children:[u.jsx("h1",{children:" Kalender"}),u.jsx("p",{className:"welcome-subtitle",children:"Plan og oversigt over arbejde og fravr"})]})}),u.jsxs("div",{className:"content-card",children:[u.jsxs("div",{className:"calendar-header-controls",children:[u.jsx("button",{className:"btn-secondary",onClick:z,children:" Forrige"}),u.jsx("div",{className:"calendar-title",children:u.jsxs("h2",{children:[XF[s]," ",r]})}),u.jsx("button",{className:"btn-secondary",onClick:$,children:"Nste "})]}),u.jsxs("div",{className:"calendar-quick-actions",children:[u.jsx("button",{className:"btn-secondary btn-small",onClick:ne,children:"I dag"}),u.jsx("button",{className:"btn-primary",onClick:O,children:"+ Opret begivenhed"})]}),x?u.jsx("div",{className:"loading-container",children:u.jsx("p",{children:"Indlser kalender..."})}):u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"calendar-weekdays",children:ZF.map(le=>u.jsx("div",{className:"calendar-weekday",children:le},le))}),u.jsx("div",{className:"calendar-grid",children:se()})]})]}),w&&u.jsx(l9,{isOpen:w,onClose:()=>N(!1),onSave:J,editEvent:E,selectedDate:Q,employees:p,projects:m}),C&&u.jsx(c9,{isOpen:C,onClose:()=>F(!1),selectedDate:Q,events:j,absences:S,onEditEvent:Y,onDeleteEvent:H})]})}function h9(){const t=Uu(),e=async()=>{try{await aC(ly),t("/login")}catch(n){console.error("Error logging out:",n),alert("Der opstod en fejl ved logud.")}};return u.jsxs("div",{className:"app-layout",children:[u.jsxs("aside",{className:"sidebar",children:[u.jsxs("div",{className:"sidebar-header",children:[u.jsx("img",{src:"/logo_white.png",alt:"Piblo Logo",className:"sidebar-logo",onError:n=>{n.target.style.display="none",n.target.nextElementSibling.style.display="block"}}),u.jsx("div",{style:{width:"80px",height:"80px",margin:"0 auto 15px",display:"none",alignItems:"center",justifyContent:"center",fontSize:"40px"},children:""}),u.jsx("div",{className:"sidebar-title",children:"Piblo"})]}),u.jsxs("nav",{className:"sidebar-nav",children:[u.jsx(_h,{to:"/sager",className:({isActive:n})=>`nav-item ${n?"active":""}`,children:"Sager"}),u.jsx(_h,{to:"/materialer",className:({isActive:n})=>`nav-item ${n?"active":""}`,children:"Materialer"}),u.jsx(_h,{to:"/kalender",className:({isActive:n})=>`nav-item ${n?"active":""}`,children:"Kalender"}),u.jsx(_h,{to:"/timeregistrering",className:({isActive:n})=>`nav-item ${n?"active":""}`,children:"Timeregistrering"}),u.jsx(_h,{to:"/indstillinger",className:({isActive:n})=>`nav-item ${n?"active":""}`,children:"Indstillinger"})]}),u.jsx("div",{className:"sidebar-footer",children:u.jsx("button",{className:"btn-logout",onClick:e,children:"Log ud"})})]}),u.jsx("main",{className:"main-content",children:u.jsx(aT,{})})]})}function d9(){const[t,e]=oe.useState(null),[n,r]=oe.useState(!0);return oe.useEffect(()=>{const i=sC(ly,s=>{e(s),r(!1)});return()=>i()},[]),{user:t,loading:n}}function f9({children:t}){const{user:e,loading:n}=d9();return n?u.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"100vh",fontSize:"18px",color:"#7f8c8d"},children:"Indlser..."}):e?t:u.jsx(S0,{to:"/login",replace:!0})}function p9(){return u.jsxs(ST,{children:[u.jsx(gT,{children:u.jsxs(lT,{children:[u.jsx(ss,{path:"/login",element:u.jsx(F7,{})}),u.jsxs(ss,{path:"/",element:u.jsx(f9,{children:u.jsx(h9,{})}),children:[u.jsx(ss,{index:!0,element:u.jsx(S0,{to:"/sager",replace:!0})}),u.jsx(ss,{path:"sager",element:u.jsx(dF,{})}),u.jsx(ss,{path:"sager/:id",element:u.jsx(GF,{})}),u.jsx(ss,{path:"materialer",element:u.jsx(JF,{})}),u.jsx(ss,{path:"kalender",element:u.jsx(u9,{})}),u.jsx(ss,{path:"timeregistrering",element:u.jsx(XD,{})}),u.jsx(ss,{path:"indstillinger",element:u.jsx(eF,{})})]}),u.jsx(ss,{path:"*",element:u.jsx(S0,{to:"/",replace:!0})})]})}),u.jsx(kT,{}),u.jsx(TT,{}),u.jsx(IT,{})]})}T1.createRoot(document.getElementById("root")).render(u.jsx(pb.StrictMode,{children:u.jsx(p9,{})}));export{Gt as _,m9 as c,KA as g};

function LA(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var HF=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function RA(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Qw={exports:{}},pm={},Yw={exports:{}},Ct={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ad=Symbol.for("react.element"),jA=Symbol.for("react.portal"),DA=Symbol.for("react.fragment"),FA=Symbol.for("react.strict_mode"),OA=Symbol.for("react.profiler"),MA=Symbol.for("react.provider"),VA=Symbol.for("react.context"),UA=Symbol.for("react.forward_ref"),BA=Symbol.for("react.suspense"),KA=Symbol.for("react.memo"),qA=Symbol.for("react.lazy"),Uy=Symbol.iterator;function zA(t){return t===null||typeof t!="object"?null:(t=Uy&&t[Uy]||t["@@iterator"],typeof t=="function"?t:null)}var Jw={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Xw=Object.assign,Zw={};function Rc(t,e,n){this.props=t,this.context=e,this.refs=Zw,this.updater=n||Jw}Rc.prototype.isReactComponent={};Rc.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Rc.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function eb(){}eb.prototype=Rc.prototype;function ov(t,e,n){this.props=t,this.context=e,this.refs=Zw,this.updater=n||Jw}var lv=ov.prototype=new eb;lv.constructor=ov;Xw(lv,Rc.prototype);lv.isPureReactComponent=!0;var By=Array.isArray,tb=Object.prototype.hasOwnProperty,uv={current:null},nb={key:!0,ref:!0,__self:!0,__source:!0};function rb(t,e,n){var r,i={},s=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(s=""+e.key),e)tb.call(e,r)&&!nb.hasOwnProperty(r)&&(i[r]=e[r]);var o=arguments.length-2;if(o===1)i.children=n;else if(1<o){for(var l=Array(o),u=0;u<o;u++)l[u]=arguments[u+2];i.children=l}if(t&&t.defaultProps)for(r in o=t.defaultProps,o)i[r]===void 0&&(i[r]=o[r]);return{$$typeof:Ad,type:t,key:s,ref:a,props:i,_owner:uv.current}}function HA(t,e){return{$$typeof:Ad,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function cv(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ad}function $A(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Ky=/\/+/g;function kg(t,e){return typeof t=="object"&&t!==null&&t.key!=null?$A(""+t.key):e.toString(36)}function zf(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case Ad:case jA:a=!0}}if(a)return a=t,i=i(a),t=r===""?"."+kg(a,0):r,By(i)?(n="",t!=null&&(n=t.replace(Ky,"$&/")+"/"),zf(i,e,n,"",function(u){return u})):i!=null&&(cv(i)&&(i=HA(i,n+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(Ky,"$&/")+"/")+t)),e.push(i)),1;if(a=0,r=r===""?".":r+":",By(t))for(var o=0;o<t.length;o++){s=t[o];var l=r+kg(s,o);a+=zf(s,e,n,l,i)}else if(l=zA(t),typeof l=="function")for(t=l.call(t),o=0;!(s=t.next()).done;)s=s.value,l=r+kg(s,o++),a+=zf(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function mf(t,e,n){if(t==null)return t;var r=[],i=0;return zf(t,r,"","",function(s){return e.call(n,s,i++)}),r}function WA(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Hr={current:null},Hf={transition:null},GA={ReactCurrentDispatcher:Hr,ReactCurrentBatchConfig:Hf,ReactCurrentOwner:uv};function ib(){throw Error("act(...) is not supported in production builds of React.")}Ct.Children={map:mf,forEach:function(t,e,n){mf(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return mf(t,function(){e++}),e},toArray:function(t){return mf(t,function(e){return e})||[]},only:function(t){if(!cv(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ct.Component=Rc;Ct.Fragment=DA;Ct.Profiler=OA;Ct.PureComponent=ov;Ct.StrictMode=FA;Ct.Suspense=BA;Ct.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=GA;Ct.act=ib;Ct.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Xw({},t.props),i=t.key,s=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,a=uv.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var o=t.type.defaultProps;for(l in e)tb.call(e,l)&&!nb.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&o!==void 0?o[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){o=Array(l);for(var u=0;u<l;u++)o[u]=arguments[u+2];r.children=o}return{$$typeof:Ad,type:t.type,key:i,ref:s,props:r,_owner:a}};Ct.createContext=function(t){return t={$$typeof:VA,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:MA,_context:t},t.Consumer=t};Ct.createElement=rb;Ct.createFactory=function(t){var e=rb.bind(null,t);return e.type=t,e};Ct.createRef=function(){return{current:null}};Ct.forwardRef=function(t){return{$$typeof:UA,render:t}};Ct.isValidElement=cv;Ct.lazy=function(t){return{$$typeof:qA,_payload:{_status:-1,_result:t},_init:WA}};Ct.memo=function(t,e){return{$$typeof:KA,type:t,compare:e===void 0?null:e}};Ct.startTransition=function(t){var e=Hf.transition;Hf.transition={};try{t()}finally{Hf.transition=e}};Ct.unstable_act=ib;Ct.useCallback=function(t,e){return Hr.current.useCallback(t,e)};Ct.useContext=function(t){return Hr.current.useContext(t)};Ct.useDebugValue=function(){};Ct.useDeferredValue=function(t){return Hr.current.useDeferredValue(t)};Ct.useEffect=function(t,e){return Hr.current.useEffect(t,e)};Ct.useId=function(){return Hr.current.useId()};Ct.useImperativeHandle=function(t,e,n){return Hr.current.useImperativeHandle(t,e,n)};Ct.useInsertionEffect=function(t,e){return Hr.current.useInsertionEffect(t,e)};Ct.useLayoutEffect=function(t,e){return Hr.current.useLayoutEffect(t,e)};Ct.useMemo=function(t,e){return Hr.current.useMemo(t,e)};Ct.useReducer=function(t,e,n){return Hr.current.useReducer(t,e,n)};Ct.useRef=function(t){return Hr.current.useRef(t)};Ct.useState=function(t){return Hr.current.useState(t)};Ct.useSyncExternalStore=function(t,e,n){return Hr.current.useSyncExternalStore(t,e,n)};Ct.useTransition=function(){return Hr.current.useTransition()};Ct.version="18.3.1";Yw.exports=Ct;var oe=Yw.exports;const sb=RA(oe),QA=LA({__proto__:null,default:sb},[oe]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var YA=oe,JA=Symbol.for("react.element"),XA=Symbol.for("react.fragment"),ZA=Object.prototype.hasOwnProperty,eE=YA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,tE={key:!0,ref:!0,__self:!0,__source:!0};function ab(t,e,n){var r,i={},s=null,a=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)ZA.call(e,r)&&!tE.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:JA,type:t,key:s,ref:a,props:i,_owner:eE.current}}pm.Fragment=XA;pm.jsx=ab;pm.jsxs=ab;Qw.exports=pm;var f=Qw.exports,A1={},ob={exports:{}},Ai={},lb={exports:{}},ub={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(z,H){var ne=z.length;z.push(H);e:for(;0<ne;){var _e=ne-1>>>1,O=z[_e];if(0<i(O,H))z[_e]=H,z[ne]=O,ne=_e;else break e}}function n(z){return z.length===0?null:z[0]}function r(z){if(z.length===0)return null;var H=z[0],ne=z.pop();if(ne!==H){z[0]=ne;e:for(var _e=0,O=z.length,Q=O>>>1;_e<Q;){var J=2*(_e+1)-1,W=z[J],se=J+1,le=z[se];if(0>i(W,ne))se<O&&0>i(le,W)?(z[_e]=le,z[se]=ne,_e=se):(z[_e]=W,z[J]=ne,_e=J);else if(se<O&&0>i(le,ne))z[_e]=le,z[se]=ne,_e=se;else break e}}return H}function i(z,H){var ne=z.sortIndex-H.sortIndex;return ne!==0?ne:z.id-H.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();t.unstable_now=function(){return a.now()-o}}var l=[],u=[],h=1,p=null,g=3,m=!1,b=!1,x=!1,k=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,A=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(z){for(var H=n(u);H!==null;){if(H.callback===null)r(u);else if(H.startTime<=z)r(u),H.sortIndex=H.expirationTime,e(l,H);else break;H=n(u)}}function F(z){if(x=!1,C(z),!b)if(n(l)!==null)b=!0,V(Y);else{var H=n(u);H!==null&&U(F,H.startTime-z)}}function Y(z,H){b=!1,x&&(x=!1,_(y),y=-1),m=!0;var ne=g;try{for(C(H),p=n(l);p!==null&&(!(p.expirationTime>H)||z&&!E());){var _e=p.callback;if(typeof _e=="function"){p.callback=null,g=p.priorityLevel;var O=_e(p.expirationTime<=H);H=t.unstable_now(),typeof O=="function"?p.callback=O:p===n(l)&&r(l),C(H)}else r(l);p=n(l)}if(p!==null)var Q=!0;else{var J=n(u);J!==null&&U(F,J.startTime-H),Q=!1}return Q}finally{p=null,g=ne,m=!1}}var B=!1,L=null,y=-1,S=5,R=-1;function E(){return!(t.unstable_now()-R<S)}function I(){if(L!==null){var z=t.unstable_now();R=z;var H=!0;try{H=L(!0,z)}finally{H?P():(B=!1,L=null)}}else B=!1}var P;if(typeof A=="function")P=function(){A(I)};else if(typeof MessageChannel<"u"){var M=new MessageChannel,te=M.port2;M.port1.onmessage=I,P=function(){te.postMessage(null)}}else P=function(){k(I,0)};function V(z){L=z,B||(B=!0,P())}function U(z,H){y=k(function(){z(t.unstable_now())},H)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(z){z.callback=null},t.unstable_continueExecution=function(){b||m||(b=!0,V(Y))},t.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<z?Math.floor(1e3/z):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(z){switch(g){case 1:case 2:case 3:var H=3;break;default:H=g}var ne=g;g=H;try{return z()}finally{g=ne}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(z,H){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var ne=g;g=z;try{return H()}finally{g=ne}},t.unstable_scheduleCallback=function(z,H,ne){var _e=t.unstable_now();switch(typeof ne=="object"&&ne!==null?(ne=ne.delay,ne=typeof ne=="number"&&0<ne?_e+ne:_e):ne=_e,z){case 1:var O=-1;break;case 2:O=250;break;case 5:O=1073741823;break;case 4:O=1e4;break;default:O=5e3}return O=ne+O,z={id:h++,callback:H,priorityLevel:z,startTime:ne,expirationTime:O,sortIndex:-1},ne>_e?(z.sortIndex=ne,e(u,z),n(l)===null&&z===n(u)&&(x?(_(y),y=-1):x=!0,U(F,ne-_e))):(z.sortIndex=O,e(l,z),b||m||(b=!0,V(Y))),z},t.unstable_shouldYield=E,t.unstable_wrapCallback=function(z){var H=g;return function(){var ne=g;g=H;try{return z.apply(this,arguments)}finally{g=ne}}}})(ub);lb.exports=ub;var nE=lb.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rE=oe,Ni=nE;function qe(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var cb=new Set,Qh={};function Zl(t,e){vc(t,e),vc(t+"Capture",e)}function vc(t,e){for(Qh[t]=e,t=0;t<e.length;t++)cb.add(e[t])}var ka=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),E1=Object.prototype.hasOwnProperty,iE=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,qy={},zy={};function sE(t){return E1.call(zy,t)?!0:E1.call(qy,t)?!1:iE.test(t)?zy[t]=!0:(qy[t]=!0,!1)}function aE(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function oE(t,e,n,r){if(e===null||typeof e>"u"||aE(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function $r(t,e,n,r,i,s,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=a}var mr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){mr[t]=new $r(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];mr[e]=new $r(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){mr[t]=new $r(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){mr[t]=new $r(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){mr[t]=new $r(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){mr[t]=new $r(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){mr[t]=new $r(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){mr[t]=new $r(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){mr[t]=new $r(t,5,!1,t.toLowerCase(),null,!1,!1)});var hv=/[\-:]([a-z])/g;function dv(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(hv,dv);mr[e]=new $r(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(hv,dv);mr[e]=new $r(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(hv,dv);mr[e]=new $r(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){mr[t]=new $r(t,1,!1,t.toLowerCase(),null,!1,!1)});mr.xlinkHref=new $r("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){mr[t]=new $r(t,1,!1,t.toLowerCase(),null,!0,!0)});function fv(t,e,n,r){var i=mr.hasOwnProperty(e)?mr[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(oE(e,n,i,r)&&(n=null),r||i===null?sE(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Da=rE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,gf=Symbol.for("react.element"),Ku=Symbol.for("react.portal"),qu=Symbol.for("react.fragment"),pv=Symbol.for("react.strict_mode"),k1=Symbol.for("react.profiler"),hb=Symbol.for("react.provider"),db=Symbol.for("react.context"),mv=Symbol.for("react.forward_ref"),I1=Symbol.for("react.suspense"),T1=Symbol.for("react.suspense_list"),gv=Symbol.for("react.memo"),vo=Symbol.for("react.lazy"),fb=Symbol.for("react.offscreen"),Hy=Symbol.iterator;function hh(t){return t===null||typeof t!="object"?null:(t=Hy&&t[Hy]||t["@@iterator"],typeof t=="function"?t:null)}var yn=Object.assign,Ig;function Sh(t){if(Ig===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Ig=e&&e[1]||""}return`
`+Ig+t}var Tg=!1;function Pg(t,e){if(!t||Tg)return"";Tg=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),a=i.length-1,o=s.length-1;1<=a&&0<=o&&i[a]!==s[o];)o--;for(;1<=a&&0<=o;a--,o--)if(i[a]!==s[o]){if(a!==1||o!==1)do if(a--,o--,0>o||i[a]!==s[o]){var l=`
`+i[a].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=a&&0<=o);break}}}finally{Tg=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Sh(t):""}function lE(t){switch(t.tag){case 5:return Sh(t.type);case 16:return Sh("Lazy");case 13:return Sh("Suspense");case 19:return Sh("SuspenseList");case 0:case 2:case 15:return t=Pg(t.type,!1),t;case 11:return t=Pg(t.type.render,!1),t;case 1:return t=Pg(t.type,!0),t;default:return""}}function P1(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case qu:return"Fragment";case Ku:return"Portal";case k1:return"Profiler";case pv:return"StrictMode";case I1:return"Suspense";case T1:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case db:return(t.displayName||"Context")+".Consumer";case hb:return(t._context.displayName||"Context")+".Provider";case mv:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case gv:return e=t.displayName||null,e!==null?e:P1(t.type)||"Memo";case vo:e=t._payload,t=t._init;try{return P1(t(e))}catch{}}return null}function uE(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return P1(e);case 8:return e===pv?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function zo(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function pb(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function cE(t){var e=pb(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(a){r=""+a,s.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function vf(t){t._valueTracker||(t._valueTracker=cE(t))}function mb(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=pb(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function vp(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function C1(t,e){var n=e.checked;return yn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function $y(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=zo(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function gb(t,e){e=e.checked,e!=null&&fv(t,"checked",e,!1)}function L1(t,e){gb(t,e);var n=zo(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?R1(t,e.type,n):e.hasOwnProperty("defaultValue")&&R1(t,e.type,zo(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Wy(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function R1(t,e,n){(e!=="number"||vp(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Nh=Array.isArray;function rc(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+zo(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function j1(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(qe(91));return yn({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Gy(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(qe(92));if(Nh(n)){if(1<n.length)throw Error(qe(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:zo(n)}}function vb(t,e){var n=zo(e.value),r=zo(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Qy(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function yb(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function D1(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?yb(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var yf,_b=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(yf=yf||document.createElement("div"),yf.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=yf.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Yh(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Rh={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},hE=["Webkit","ms","Moz","O"];Object.keys(Rh).forEach(function(t){hE.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Rh[e]=Rh[t]})});function wb(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Rh.hasOwnProperty(t)&&Rh[t]?(""+e).trim():e+"px"}function bb(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=wb(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var dE=yn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function F1(t,e){if(e){if(dE[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(qe(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(qe(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(qe(61))}if(e.style!=null&&typeof e.style!="object")throw Error(qe(62))}}function O1(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var M1=null;function vv(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var V1=null,ic=null,sc=null;function Yy(t){if(t=Id(t)){if(typeof V1!="function")throw Error(qe(280));var e=t.stateNode;e&&(e=_m(e),V1(t.stateNode,t.type,e))}}function xb(t){ic?sc?sc.push(t):sc=[t]:ic=t}function Sb(){if(ic){var t=ic,e=sc;if(sc=ic=null,Yy(t),e)for(t=0;t<e.length;t++)Yy(e[t])}}function Nb(t,e){return t(e)}function Ab(){}var Cg=!1;function Eb(t,e,n){if(Cg)return t(e,n);Cg=!0;try{return Nb(t,e,n)}finally{Cg=!1,(ic!==null||sc!==null)&&(Ab(),Sb())}}function Jh(t,e){var n=t.stateNode;if(n===null)return null;var r=_m(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(qe(231,e,typeof n));return n}var U1=!1;if(ka)try{var dh={};Object.defineProperty(dh,"passive",{get:function(){U1=!0}}),window.addEventListener("test",dh,dh),window.removeEventListener("test",dh,dh)}catch{U1=!1}function fE(t,e,n,r,i,s,a,o,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(h){this.onError(h)}}var jh=!1,yp=null,_p=!1,B1=null,pE={onError:function(t){jh=!0,yp=t}};function mE(t,e,n,r,i,s,a,o,l){jh=!1,yp=null,fE.apply(pE,arguments)}function gE(t,e,n,r,i,s,a,o,l){if(mE.apply(this,arguments),jh){if(jh){var u=yp;jh=!1,yp=null}else throw Error(qe(198));_p||(_p=!0,B1=u)}}function eu(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function kb(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Jy(t){if(eu(t)!==t)throw Error(qe(188))}function vE(t){var e=t.alternate;if(!e){if(e=eu(t),e===null)throw Error(qe(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Jy(i),t;if(s===r)return Jy(i),e;s=s.sibling}throw Error(qe(188))}if(n.return!==r.return)n=i,r=s;else{for(var a=!1,o=i.child;o;){if(o===n){a=!0,n=i,r=s;break}if(o===r){a=!0,r=i,n=s;break}o=o.sibling}if(!a){for(o=s.child;o;){if(o===n){a=!0,n=s,r=i;break}if(o===r){a=!0,r=s,n=i;break}o=o.sibling}if(!a)throw Error(qe(189))}}if(n.alternate!==r)throw Error(qe(190))}if(n.tag!==3)throw Error(qe(188));return n.stateNode.current===n?t:e}function Ib(t){return t=vE(t),t!==null?Tb(t):null}function Tb(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Tb(t);if(e!==null)return e;t=t.sibling}return null}var Pb=Ni.unstable_scheduleCallback,Xy=Ni.unstable_cancelCallback,yE=Ni.unstable_shouldYield,_E=Ni.unstable_requestPaint,jn=Ni.unstable_now,wE=Ni.unstable_getCurrentPriorityLevel,yv=Ni.unstable_ImmediatePriority,Cb=Ni.unstable_UserBlockingPriority,wp=Ni.unstable_NormalPriority,bE=Ni.unstable_LowPriority,Lb=Ni.unstable_IdlePriority,mm=null,Vs=null;function xE(t){if(Vs&&typeof Vs.onCommitFiberRoot=="function")try{Vs.onCommitFiberRoot(mm,t,void 0,(t.current.flags&128)===128)}catch{}}var ls=Math.clz32?Math.clz32:AE,SE=Math.log,NE=Math.LN2;function AE(t){return t>>>=0,t===0?32:31-(SE(t)/NE|0)|0}var _f=64,wf=4194304;function Ah(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function bp(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,a=n&268435455;if(a!==0){var o=a&~i;o!==0?r=Ah(o):(s&=a,s!==0&&(r=Ah(s)))}else a=n&~i,a!==0?r=Ah(a):s!==0&&(r=Ah(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-ls(e),i=1<<n,r|=t[n],e&=~i;return r}function EE(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function kE(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var a=31-ls(s),o=1<<a,l=i[a];l===-1?(!(o&n)||o&r)&&(i[a]=EE(o,e)):l<=e&&(t.expiredLanes|=o),s&=~o}}function K1(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Rb(){var t=_f;return _f<<=1,!(_f&4194240)&&(_f=64),t}function Lg(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Ed(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-ls(e),t[e]=n}function IE(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-ls(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function _v(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-ls(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Qt=0;function jb(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Db,wv,Fb,Ob,Mb,q1=!1,bf=[],Co=null,Lo=null,Ro=null,Xh=new Map,Zh=new Map,_o=[],TE="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Zy(t,e){switch(t){case"focusin":case"focusout":Co=null;break;case"dragenter":case"dragleave":Lo=null;break;case"mouseover":case"mouseout":Ro=null;break;case"pointerover":case"pointerout":Xh.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Zh.delete(e.pointerId)}}function fh(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Id(e),e!==null&&wv(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function PE(t,e,n,r,i){switch(e){case"focusin":return Co=fh(Co,t,e,n,r,i),!0;case"dragenter":return Lo=fh(Lo,t,e,n,r,i),!0;case"mouseover":return Ro=fh(Ro,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Xh.set(s,fh(Xh.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Zh.set(s,fh(Zh.get(s)||null,t,e,n,r,i)),!0}return!1}function Vb(t){var e=Ll(t.target);if(e!==null){var n=eu(e);if(n!==null){if(e=n.tag,e===13){if(e=kb(n),e!==null){t.blockedOn=e,Mb(t.priority,function(){Fb(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function $f(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=z1(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);M1=r,n.target.dispatchEvent(r),M1=null}else return e=Id(n),e!==null&&wv(e),t.blockedOn=n,!1;e.shift()}return!0}function e5(t,e,n){$f(t)&&n.delete(e)}function CE(){q1=!1,Co!==null&&$f(Co)&&(Co=null),Lo!==null&&$f(Lo)&&(Lo=null),Ro!==null&&$f(Ro)&&(Ro=null),Xh.forEach(e5),Zh.forEach(e5)}function ph(t,e){t.blockedOn===e&&(t.blockedOn=null,q1||(q1=!0,Ni.unstable_scheduleCallback(Ni.unstable_NormalPriority,CE)))}function ed(t){function e(i){return ph(i,t)}if(0<bf.length){ph(bf[0],t);for(var n=1;n<bf.length;n++){var r=bf[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Co!==null&&ph(Co,t),Lo!==null&&ph(Lo,t),Ro!==null&&ph(Ro,t),Xh.forEach(e),Zh.forEach(e),n=0;n<_o.length;n++)r=_o[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<_o.length&&(n=_o[0],n.blockedOn===null);)Vb(n),n.blockedOn===null&&_o.shift()}var ac=Da.ReactCurrentBatchConfig,xp=!0;function LE(t,e,n,r){var i=Qt,s=ac.transition;ac.transition=null;try{Qt=1,bv(t,e,n,r)}finally{Qt=i,ac.transition=s}}function RE(t,e,n,r){var i=Qt,s=ac.transition;ac.transition=null;try{Qt=4,bv(t,e,n,r)}finally{Qt=i,ac.transition=s}}function bv(t,e,n,r){if(xp){var i=z1(t,e,n,r);if(i===null)Kg(t,e,r,Sp,n),Zy(t,r);else if(PE(i,t,e,n,r))r.stopPropagation();else if(Zy(t,r),e&4&&-1<TE.indexOf(t)){for(;i!==null;){var s=Id(i);if(s!==null&&Db(s),s=z1(t,e,n,r),s===null&&Kg(t,e,r,Sp,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Kg(t,e,r,null,n)}}var Sp=null;function z1(t,e,n,r){if(Sp=null,t=vv(r),t=Ll(t),t!==null)if(e=eu(t),e===null)t=null;else if(n=e.tag,n===13){if(t=kb(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Sp=t,null}function Ub(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(wE()){case yv:return 1;case Cb:return 4;case wp:case bE:return 16;case Lb:return 536870912;default:return 16}default:return 16}}var Eo=null,xv=null,Wf=null;function Bb(){if(Wf)return Wf;var t,e=xv,n=e.length,r,i="value"in Eo?Eo.value:Eo.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var a=n-t;for(r=1;r<=a&&e[n-r]===i[s-r];r++);return Wf=i.slice(t,1<r?1-r:void 0)}function Gf(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function xf(){return!0}function t5(){return!1}function Ei(t){function e(n,r,i,s,a){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(n=t[o],this[o]=n?n(s):s[o]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?xf:t5,this.isPropagationStopped=t5,this}return yn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=xf)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=xf)},persist:function(){},isPersistent:xf}),e}var jc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Sv=Ei(jc),kd=yn({},jc,{view:0,detail:0}),jE=Ei(kd),Rg,jg,mh,gm=yn({},kd,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Nv,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==mh&&(mh&&t.type==="mousemove"?(Rg=t.screenX-mh.screenX,jg=t.screenY-mh.screenY):jg=Rg=0,mh=t),Rg)},movementY:function(t){return"movementY"in t?t.movementY:jg}}),n5=Ei(gm),DE=yn({},gm,{dataTransfer:0}),FE=Ei(DE),OE=yn({},kd,{relatedTarget:0}),Dg=Ei(OE),ME=yn({},jc,{animationName:0,elapsedTime:0,pseudoElement:0}),VE=Ei(ME),UE=yn({},jc,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),BE=Ei(UE),KE=yn({},jc,{data:0}),r5=Ei(KE),qE={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},zE={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},HE={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function $E(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=HE[t])?!!e[t]:!1}function Nv(){return $E}var WE=yn({},kd,{key:function(t){if(t.key){var e=qE[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Gf(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?zE[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Nv,charCode:function(t){return t.type==="keypress"?Gf(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Gf(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),GE=Ei(WE),QE=yn({},gm,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),i5=Ei(QE),YE=yn({},kd,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Nv}),JE=Ei(YE),XE=yn({},jc,{propertyName:0,elapsedTime:0,pseudoElement:0}),ZE=Ei(XE),e6=yn({},gm,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),t6=Ei(e6),n6=[9,13,27,32],Av=ka&&"CompositionEvent"in window,Dh=null;ka&&"documentMode"in document&&(Dh=document.documentMode);var r6=ka&&"TextEvent"in window&&!Dh,Kb=ka&&(!Av||Dh&&8<Dh&&11>=Dh),s5=" ",a5=!1;function qb(t,e){switch(t){case"keyup":return n6.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zb(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var zu=!1;function i6(t,e){switch(t){case"compositionend":return zb(e);case"keypress":return e.which!==32?null:(a5=!0,s5);case"textInput":return t=e.data,t===s5&&a5?null:t;default:return null}}function s6(t,e){if(zu)return t==="compositionend"||!Av&&qb(t,e)?(t=Bb(),Wf=xv=Eo=null,zu=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Kb&&e.locale!=="ko"?null:e.data;default:return null}}var a6={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function o5(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!a6[t.type]:e==="textarea"}function Hb(t,e,n,r){xb(r),e=Np(e,"onChange"),0<e.length&&(n=new Sv("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Fh=null,td=null;function o6(t){n4(t,0)}function vm(t){var e=Wu(t);if(mb(e))return t}function l6(t,e){if(t==="change")return e}var $b=!1;if(ka){var Fg;if(ka){var Og="oninput"in document;if(!Og){var l5=document.createElement("div");l5.setAttribute("oninput","return;"),Og=typeof l5.oninput=="function"}Fg=Og}else Fg=!1;$b=Fg&&(!document.documentMode||9<document.documentMode)}function u5(){Fh&&(Fh.detachEvent("onpropertychange",Wb),td=Fh=null)}function Wb(t){if(t.propertyName==="value"&&vm(td)){var e=[];Hb(e,td,t,vv(t)),Eb(o6,e)}}function u6(t,e,n){t==="focusin"?(u5(),Fh=e,td=n,Fh.attachEvent("onpropertychange",Wb)):t==="focusout"&&u5()}function c6(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return vm(td)}function h6(t,e){if(t==="click")return vm(e)}function d6(t,e){if(t==="input"||t==="change")return vm(e)}function f6(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var cs=typeof Object.is=="function"?Object.is:f6;function nd(t,e){if(cs(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!E1.call(e,i)||!cs(t[i],e[i]))return!1}return!0}function c5(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function h5(t,e){var n=c5(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=c5(n)}}function Gb(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Gb(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Qb(){for(var t=window,e=vp();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=vp(t.document)}return e}function Ev(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function p6(t){var e=Qb(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Gb(n.ownerDocument.documentElement,n)){if(r!==null&&Ev(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=h5(n,s);var a=h5(n,r);i&&a&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var m6=ka&&"documentMode"in document&&11>=document.documentMode,Hu=null,H1=null,Oh=null,$1=!1;function d5(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;$1||Hu==null||Hu!==vp(r)||(r=Hu,"selectionStart"in r&&Ev(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Oh&&nd(Oh,r)||(Oh=r,r=Np(H1,"onSelect"),0<r.length&&(e=new Sv("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Hu)))}function Sf(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var $u={animationend:Sf("Animation","AnimationEnd"),animationiteration:Sf("Animation","AnimationIteration"),animationstart:Sf("Animation","AnimationStart"),transitionend:Sf("Transition","TransitionEnd")},Mg={},Yb={};ka&&(Yb=document.createElement("div").style,"AnimationEvent"in window||(delete $u.animationend.animation,delete $u.animationiteration.animation,delete $u.animationstart.animation),"TransitionEvent"in window||delete $u.transitionend.transition);function ym(t){if(Mg[t])return Mg[t];if(!$u[t])return t;var e=$u[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Yb)return Mg[t]=e[n];return t}var Jb=ym("animationend"),Xb=ym("animationiteration"),Zb=ym("animationstart"),e4=ym("transitionend"),t4=new Map,f5="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Zo(t,e){t4.set(t,e),Zl(e,[t])}for(var Vg=0;Vg<f5.length;Vg++){var Ug=f5[Vg],g6=Ug.toLowerCase(),v6=Ug[0].toUpperCase()+Ug.slice(1);Zo(g6,"on"+v6)}Zo(Jb,"onAnimationEnd");Zo(Xb,"onAnimationIteration");Zo(Zb,"onAnimationStart");Zo("dblclick","onDoubleClick");Zo("focusin","onFocus");Zo("focusout","onBlur");Zo(e4,"onTransitionEnd");vc("onMouseEnter",["mouseout","mouseover"]);vc("onMouseLeave",["mouseout","mouseover"]);vc("onPointerEnter",["pointerout","pointerover"]);vc("onPointerLeave",["pointerout","pointerover"]);Zl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Zl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Zl("onBeforeInput",["compositionend","keypress","textInput","paste"]);Zl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Zl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Zl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Eh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),y6=new Set("cancel close invalid load scroll toggle".split(" ").concat(Eh));function p5(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,gE(r,e,void 0,t),t.currentTarget=null}function n4(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var a=r.length-1;0<=a;a--){var o=r[a],l=o.instance,u=o.currentTarget;if(o=o.listener,l!==s&&i.isPropagationStopped())break e;p5(i,o,u),s=l}else for(a=0;a<r.length;a++){if(o=r[a],l=o.instance,u=o.currentTarget,o=o.listener,l!==s&&i.isPropagationStopped())break e;p5(i,o,u),s=l}}}if(_p)throw t=B1,_p=!1,B1=null,t}function ln(t,e){var n=e[J1];n===void 0&&(n=e[J1]=new Set);var r=t+"__bubble";n.has(r)||(r4(e,t,2,!1),n.add(r))}function Bg(t,e,n){var r=0;e&&(r|=4),r4(n,t,r,e)}var Nf="_reactListening"+Math.random().toString(36).slice(2);function rd(t){if(!t[Nf]){t[Nf]=!0,cb.forEach(function(n){n!=="selectionchange"&&(y6.has(n)||Bg(n,!1,t),Bg(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Nf]||(e[Nf]=!0,Bg("selectionchange",!1,e))}}function r4(t,e,n,r){switch(Ub(e)){case 1:var i=LE;break;case 4:i=RE;break;default:i=bv}n=i.bind(null,e,n,t),i=void 0,!U1||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Kg(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var o=r.stateNode.containerInfo;if(o===i||o.nodeType===8&&o.parentNode===i)break;if(a===4)for(a=r.return;a!==null;){var l=a.tag;if((l===3||l===4)&&(l=a.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;a=a.return}for(;o!==null;){if(a=Ll(o),a===null)return;if(l=a.tag,l===5||l===6){r=s=a;continue e}o=o.parentNode}}r=r.return}Eb(function(){var u=s,h=vv(n),p=[];e:{var g=t4.get(t);if(g!==void 0){var m=Sv,b=t;switch(t){case"keypress":if(Gf(n)===0)break e;case"keydown":case"keyup":m=GE;break;case"focusin":b="focus",m=Dg;break;case"focusout":b="blur",m=Dg;break;case"beforeblur":case"afterblur":m=Dg;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=n5;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=FE;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=JE;break;case Jb:case Xb:case Zb:m=VE;break;case e4:m=ZE;break;case"scroll":m=jE;break;case"wheel":m=t6;break;case"copy":case"cut":case"paste":m=BE;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=i5}var x=(e&4)!==0,k=!x&&t==="scroll",_=x?g!==null?g+"Capture":null:g;x=[];for(var A=u,C;A!==null;){C=A;var F=C.stateNode;if(C.tag===5&&F!==null&&(C=F,_!==null&&(F=Jh(A,_),F!=null&&x.push(id(A,F,C)))),k)break;A=A.return}0<x.length&&(g=new m(g,b,null,n,h),p.push({event:g,listeners:x}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",g&&n!==M1&&(b=n.relatedTarget||n.fromElement)&&(Ll(b)||b[Ia]))break e;if((m||g)&&(g=h.window===h?h:(g=h.ownerDocument)?g.defaultView||g.parentWindow:window,m?(b=n.relatedTarget||n.toElement,m=u,b=b?Ll(b):null,b!==null&&(k=eu(b),b!==k||b.tag!==5&&b.tag!==6)&&(b=null)):(m=null,b=u),m!==b)){if(x=n5,F="onMouseLeave",_="onMouseEnter",A="mouse",(t==="pointerout"||t==="pointerover")&&(x=i5,F="onPointerLeave",_="onPointerEnter",A="pointer"),k=m==null?g:Wu(m),C=b==null?g:Wu(b),g=new x(F,A+"leave",m,n,h),g.target=k,g.relatedTarget=C,F=null,Ll(h)===u&&(x=new x(_,A+"enter",b,n,h),x.target=C,x.relatedTarget=k,F=x),k=F,m&&b)t:{for(x=m,_=b,A=0,C=x;C;C=Ru(C))A++;for(C=0,F=_;F;F=Ru(F))C++;for(;0<A-C;)x=Ru(x),A--;for(;0<C-A;)_=Ru(_),C--;for(;A--;){if(x===_||_!==null&&x===_.alternate)break t;x=Ru(x),_=Ru(_)}x=null}else x=null;m!==null&&m5(p,g,m,x,!1),b!==null&&k!==null&&m5(p,k,b,x,!0)}}e:{if(g=u?Wu(u):window,m=g.nodeName&&g.nodeName.toLowerCase(),m==="select"||m==="input"&&g.type==="file")var Y=l6;else if(o5(g))if($b)Y=d6;else{Y=c6;var B=u6}else(m=g.nodeName)&&m.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(Y=h6);if(Y&&(Y=Y(t,u))){Hb(p,Y,n,h);break e}B&&B(t,g,u),t==="focusout"&&(B=g._wrapperState)&&B.controlled&&g.type==="number"&&R1(g,"number",g.value)}switch(B=u?Wu(u):window,t){case"focusin":(o5(B)||B.contentEditable==="true")&&(Hu=B,H1=u,Oh=null);break;case"focusout":Oh=H1=Hu=null;break;case"mousedown":$1=!0;break;case"contextmenu":case"mouseup":case"dragend":$1=!1,d5(p,n,h);break;case"selectionchange":if(m6)break;case"keydown":case"keyup":d5(p,n,h)}var L;if(Av)e:{switch(t){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else zu?qb(t,n)&&(y="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(y="onCompositionStart");y&&(Kb&&n.locale!=="ko"&&(zu||y!=="onCompositionStart"?y==="onCompositionEnd"&&zu&&(L=Bb()):(Eo=h,xv="value"in Eo?Eo.value:Eo.textContent,zu=!0)),B=Np(u,y),0<B.length&&(y=new r5(y,t,null,n,h),p.push({event:y,listeners:B}),L?y.data=L:(L=zb(n),L!==null&&(y.data=L)))),(L=r6?i6(t,n):s6(t,n))&&(u=Np(u,"onBeforeInput"),0<u.length&&(h=new r5("onBeforeInput","beforeinput",null,n,h),p.push({event:h,listeners:u}),h.data=L))}n4(p,e)})}function id(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Np(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Jh(t,n),s!=null&&r.unshift(id(t,s,i)),s=Jh(t,e),s!=null&&r.push(id(t,s,i))),t=t.return}return r}function Ru(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function m5(t,e,n,r,i){for(var s=e._reactName,a=[];n!==null&&n!==r;){var o=n,l=o.alternate,u=o.stateNode;if(l!==null&&l===r)break;o.tag===5&&u!==null&&(o=u,i?(l=Jh(n,s),l!=null&&a.unshift(id(n,l,o))):i||(l=Jh(n,s),l!=null&&a.push(id(n,l,o)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var _6=/\r\n?/g,w6=/\u0000|\uFFFD/g;function g5(t){return(typeof t=="string"?t:""+t).replace(_6,`
`).replace(w6,"")}function Af(t,e,n){if(e=g5(e),g5(t)!==e&&n)throw Error(qe(425))}function Ap(){}var W1=null,G1=null;function Q1(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Y1=typeof setTimeout=="function"?setTimeout:void 0,b6=typeof clearTimeout=="function"?clearTimeout:void 0,v5=typeof Promise=="function"?Promise:void 0,x6=typeof queueMicrotask=="function"?queueMicrotask:typeof v5<"u"?function(t){return v5.resolve(null).then(t).catch(S6)}:Y1;function S6(t){setTimeout(function(){throw t})}function qg(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),ed(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);ed(e)}function jo(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function y5(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Dc=Math.random().toString(36).slice(2),Fs="__reactFiber$"+Dc,sd="__reactProps$"+Dc,Ia="__reactContainer$"+Dc,J1="__reactEvents$"+Dc,N6="__reactListeners$"+Dc,A6="__reactHandles$"+Dc;function Ll(t){var e=t[Fs];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Ia]||n[Fs]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=y5(t);t!==null;){if(n=t[Fs])return n;t=y5(t)}return e}t=n,n=t.parentNode}return null}function Id(t){return t=t[Fs]||t[Ia],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Wu(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(qe(33))}function _m(t){return t[sd]||null}var X1=[],Gu=-1;function el(t){return{current:t}}function hn(t){0>Gu||(t.current=X1[Gu],X1[Gu]=null,Gu--)}function sn(t,e){Gu++,X1[Gu]=t.current,t.current=e}var Ho={},Lr=el(Ho),ai=el(!1),Kl=Ho;function yc(t,e){var n=t.type.contextTypes;if(!n)return Ho;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function oi(t){return t=t.childContextTypes,t!=null}function Ep(){hn(ai),hn(Lr)}function _5(t,e,n){if(Lr.current!==Ho)throw Error(qe(168));sn(Lr,e),sn(ai,n)}function i4(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(qe(108,uE(t)||"Unknown",i));return yn({},n,r)}function kp(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ho,Kl=Lr.current,sn(Lr,t),sn(ai,ai.current),!0}function w5(t,e,n){var r=t.stateNode;if(!r)throw Error(qe(169));n?(t=i4(t,e,Kl),r.__reactInternalMemoizedMergedChildContext=t,hn(ai),hn(Lr),sn(Lr,t)):hn(ai),sn(ai,n)}var va=null,wm=!1,zg=!1;function s4(t){va===null?va=[t]:va.push(t)}function E6(t){wm=!0,s4(t)}function tl(){if(!zg&&va!==null){zg=!0;var t=0,e=Qt;try{var n=va;for(Qt=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}va=null,wm=!1}catch(i){throw va!==null&&(va=va.slice(t+1)),Pb(yv,tl),i}finally{Qt=e,zg=!1}}return null}var Qu=[],Yu=0,Ip=null,Tp=0,Di=[],Fi=0,ql=null,ya=1,_a="";function El(t,e){Qu[Yu++]=Tp,Qu[Yu++]=Ip,Ip=t,Tp=e}function a4(t,e,n){Di[Fi++]=ya,Di[Fi++]=_a,Di[Fi++]=ql,ql=t;var r=ya;t=_a;var i=32-ls(r)-1;r&=~(1<<i),n+=1;var s=32-ls(e)+i;if(30<s){var a=i-i%5;s=(r&(1<<a)-1).toString(32),r>>=a,i-=a,ya=1<<32-ls(e)+i|n<<i|r,_a=s+t}else ya=1<<s|n<<i|r,_a=t}function kv(t){t.return!==null&&(El(t,1),a4(t,1,0))}function Iv(t){for(;t===Ip;)Ip=Qu[--Yu],Qu[Yu]=null,Tp=Qu[--Yu],Qu[Yu]=null;for(;t===ql;)ql=Di[--Fi],Di[Fi]=null,_a=Di[--Fi],Di[Fi]=null,ya=Di[--Fi],Di[Fi]=null}var Si=null,_i=null,pn=!1,os=null;function o4(t,e){var n=Mi(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function b5(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Si=t,_i=jo(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Si=t,_i=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ql!==null?{id:ya,overflow:_a}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Mi(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Si=t,_i=null,!0):!1;default:return!1}}function Z1(t){return(t.mode&1)!==0&&(t.flags&128)===0}function e0(t){if(pn){var e=_i;if(e){var n=e;if(!b5(t,e)){if(Z1(t))throw Error(qe(418));e=jo(n.nextSibling);var r=Si;e&&b5(t,e)?o4(r,n):(t.flags=t.flags&-4097|2,pn=!1,Si=t)}}else{if(Z1(t))throw Error(qe(418));t.flags=t.flags&-4097|2,pn=!1,Si=t}}}function x5(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Si=t}function Ef(t){if(t!==Si)return!1;if(!pn)return x5(t),pn=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Q1(t.type,t.memoizedProps)),e&&(e=_i)){if(Z1(t))throw l4(),Error(qe(418));for(;e;)o4(t,e),e=jo(e.nextSibling)}if(x5(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(qe(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){_i=jo(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}_i=null}}else _i=Si?jo(t.stateNode.nextSibling):null;return!0}function l4(){for(var t=_i;t;)t=jo(t.nextSibling)}function _c(){_i=Si=null,pn=!1}function Tv(t){os===null?os=[t]:os.push(t)}var k6=Da.ReactCurrentBatchConfig;function gh(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(qe(309));var r=n.stateNode}if(!r)throw Error(qe(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(a){var o=i.refs;a===null?delete o[s]:o[s]=a},e._stringRef=s,e)}if(typeof t!="string")throw Error(qe(284));if(!n._owner)throw Error(qe(290,t))}return t}function kf(t,e){throw t=Object.prototype.toString.call(e),Error(qe(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function S5(t){var e=t._init;return e(t._payload)}function u4(t){function e(_,A){if(t){var C=_.deletions;C===null?(_.deletions=[A],_.flags|=16):C.push(A)}}function n(_,A){if(!t)return null;for(;A!==null;)e(_,A),A=A.sibling;return null}function r(_,A){for(_=new Map;A!==null;)A.key!==null?_.set(A.key,A):_.set(A.index,A),A=A.sibling;return _}function i(_,A){return _=Mo(_,A),_.index=0,_.sibling=null,_}function s(_,A,C){return _.index=C,t?(C=_.alternate,C!==null?(C=C.index,C<A?(_.flags|=2,A):C):(_.flags|=2,A)):(_.flags|=1048576,A)}function a(_){return t&&_.alternate===null&&(_.flags|=2),_}function o(_,A,C,F){return A===null||A.tag!==6?(A=Jg(C,_.mode,F),A.return=_,A):(A=i(A,C),A.return=_,A)}function l(_,A,C,F){var Y=C.type;return Y===qu?h(_,A,C.props.children,F,C.key):A!==null&&(A.elementType===Y||typeof Y=="object"&&Y!==null&&Y.$$typeof===vo&&S5(Y)===A.type)?(F=i(A,C.props),F.ref=gh(_,A,C),F.return=_,F):(F=tp(C.type,C.key,C.props,null,_.mode,F),F.ref=gh(_,A,C),F.return=_,F)}function u(_,A,C,F){return A===null||A.tag!==4||A.stateNode.containerInfo!==C.containerInfo||A.stateNode.implementation!==C.implementation?(A=Xg(C,_.mode,F),A.return=_,A):(A=i(A,C.children||[]),A.return=_,A)}function h(_,A,C,F,Y){return A===null||A.tag!==7?(A=Ml(C,_.mode,F,Y),A.return=_,A):(A=i(A,C),A.return=_,A)}function p(_,A,C){if(typeof A=="string"&&A!==""||typeof A=="number")return A=Jg(""+A,_.mode,C),A.return=_,A;if(typeof A=="object"&&A!==null){switch(A.$$typeof){case gf:return C=tp(A.type,A.key,A.props,null,_.mode,C),C.ref=gh(_,null,A),C.return=_,C;case Ku:return A=Xg(A,_.mode,C),A.return=_,A;case vo:var F=A._init;return p(_,F(A._payload),C)}if(Nh(A)||hh(A))return A=Ml(A,_.mode,C,null),A.return=_,A;kf(_,A)}return null}function g(_,A,C,F){var Y=A!==null?A.key:null;if(typeof C=="string"&&C!==""||typeof C=="number")return Y!==null?null:o(_,A,""+C,F);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case gf:return C.key===Y?l(_,A,C,F):null;case Ku:return C.key===Y?u(_,A,C,F):null;case vo:return Y=C._init,g(_,A,Y(C._payload),F)}if(Nh(C)||hh(C))return Y!==null?null:h(_,A,C,F,null);kf(_,C)}return null}function m(_,A,C,F,Y){if(typeof F=="string"&&F!==""||typeof F=="number")return _=_.get(C)||null,o(A,_,""+F,Y);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case gf:return _=_.get(F.key===null?C:F.key)||null,l(A,_,F,Y);case Ku:return _=_.get(F.key===null?C:F.key)||null,u(A,_,F,Y);case vo:var B=F._init;return m(_,A,C,B(F._payload),Y)}if(Nh(F)||hh(F))return _=_.get(C)||null,h(A,_,F,Y,null);kf(A,F)}return null}function b(_,A,C,F){for(var Y=null,B=null,L=A,y=A=0,S=null;L!==null&&y<C.length;y++){L.index>y?(S=L,L=null):S=L.sibling;var R=g(_,L,C[y],F);if(R===null){L===null&&(L=S);break}t&&L&&R.alternate===null&&e(_,L),A=s(R,A,y),B===null?Y=R:B.sibling=R,B=R,L=S}if(y===C.length)return n(_,L),pn&&El(_,y),Y;if(L===null){for(;y<C.length;y++)L=p(_,C[y],F),L!==null&&(A=s(L,A,y),B===null?Y=L:B.sibling=L,B=L);return pn&&El(_,y),Y}for(L=r(_,L);y<C.length;y++)S=m(L,_,y,C[y],F),S!==null&&(t&&S.alternate!==null&&L.delete(S.key===null?y:S.key),A=s(S,A,y),B===null?Y=S:B.sibling=S,B=S);return t&&L.forEach(function(E){return e(_,E)}),pn&&El(_,y),Y}function x(_,A,C,F){var Y=hh(C);if(typeof Y!="function")throw Error(qe(150));if(C=Y.call(C),C==null)throw Error(qe(151));for(var B=Y=null,L=A,y=A=0,S=null,R=C.next();L!==null&&!R.done;y++,R=C.next()){L.index>y?(S=L,L=null):S=L.sibling;var E=g(_,L,R.value,F);if(E===null){L===null&&(L=S);break}t&&L&&E.alternate===null&&e(_,L),A=s(E,A,y),B===null?Y=E:B.sibling=E,B=E,L=S}if(R.done)return n(_,L),pn&&El(_,y),Y;if(L===null){for(;!R.done;y++,R=C.next())R=p(_,R.value,F),R!==null&&(A=s(R,A,y),B===null?Y=R:B.sibling=R,B=R);return pn&&El(_,y),Y}for(L=r(_,L);!R.done;y++,R=C.next())R=m(L,_,y,R.value,F),R!==null&&(t&&R.alternate!==null&&L.delete(R.key===null?y:R.key),A=s(R,A,y),B===null?Y=R:B.sibling=R,B=R);return t&&L.forEach(function(I){return e(_,I)}),pn&&El(_,y),Y}function k(_,A,C,F){if(typeof C=="object"&&C!==null&&C.type===qu&&C.key===null&&(C=C.props.children),typeof C=="object"&&C!==null){switch(C.$$typeof){case gf:e:{for(var Y=C.key,B=A;B!==null;){if(B.key===Y){if(Y=C.type,Y===qu){if(B.tag===7){n(_,B.sibling),A=i(B,C.props.children),A.return=_,_=A;break e}}else if(B.elementType===Y||typeof Y=="object"&&Y!==null&&Y.$$typeof===vo&&S5(Y)===B.type){n(_,B.sibling),A=i(B,C.props),A.ref=gh(_,B,C),A.return=_,_=A;break e}n(_,B);break}else e(_,B);B=B.sibling}C.type===qu?(A=Ml(C.props.children,_.mode,F,C.key),A.return=_,_=A):(F=tp(C.type,C.key,C.props,null,_.mode,F),F.ref=gh(_,A,C),F.return=_,_=F)}return a(_);case Ku:e:{for(B=C.key;A!==null;){if(A.key===B)if(A.tag===4&&A.stateNode.containerInfo===C.containerInfo&&A.stateNode.implementation===C.implementation){n(_,A.sibling),A=i(A,C.children||[]),A.return=_,_=A;break e}else{n(_,A);break}else e(_,A);A=A.sibling}A=Xg(C,_.mode,F),A.return=_,_=A}return a(_);case vo:return B=C._init,k(_,A,B(C._payload),F)}if(Nh(C))return b(_,A,C,F);if(hh(C))return x(_,A,C,F);kf(_,C)}return typeof C=="string"&&C!==""||typeof C=="number"?(C=""+C,A!==null&&A.tag===6?(n(_,A.sibling),A=i(A,C),A.return=_,_=A):(n(_,A),A=Jg(C,_.mode,F),A.return=_,_=A),a(_)):n(_,A)}return k}var wc=u4(!0),c4=u4(!1),Pp=el(null),Cp=null,Ju=null,Pv=null;function Cv(){Pv=Ju=Cp=null}function Lv(t){var e=Pp.current;hn(Pp),t._currentValue=e}function t0(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function oc(t,e){Cp=t,Pv=Ju=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(si=!0),t.firstContext=null)}function Bi(t){var e=t._currentValue;if(Pv!==t)if(t={context:t,memoizedValue:e,next:null},Ju===null){if(Cp===null)throw Error(qe(308));Ju=t,Cp.dependencies={lanes:0,firstContext:t}}else Ju=Ju.next=t;return e}var Rl=null;function Rv(t){Rl===null?Rl=[t]:Rl.push(t)}function h4(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Rv(e)):(n.next=i.next,i.next=n),e.interleaved=n,Ta(t,r)}function Ta(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var yo=!1;function jv(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function d4(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Na(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Do(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Vt&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Ta(t,n)}return i=r.interleaved,i===null?(e.next=e,Rv(r)):(e.next=i.next,i.next=e),r.interleaved=e,Ta(t,n)}function Qf(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,_v(t,n)}}function N5(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=a:s=s.next=a,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Lp(t,e,n,r){var i=t.updateQueue;yo=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,o=i.shared.pending;if(o!==null){i.shared.pending=null;var l=o,u=l.next;l.next=null,a===null?s=u:a.next=u,a=l;var h=t.alternate;h!==null&&(h=h.updateQueue,o=h.lastBaseUpdate,o!==a&&(o===null?h.firstBaseUpdate=u:o.next=u,h.lastBaseUpdate=l))}if(s!==null){var p=i.baseState;a=0,h=u=l=null,o=s;do{var g=o.lane,m=o.eventTime;if((r&g)===g){h!==null&&(h=h.next={eventTime:m,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var b=t,x=o;switch(g=e,m=n,x.tag){case 1:if(b=x.payload,typeof b=="function"){p=b.call(m,p,g);break e}p=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=x.payload,g=typeof b=="function"?b.call(m,p,g):b,g==null)break e;p=yn({},p,g);break e;case 2:yo=!0}}o.callback!==null&&o.lane!==0&&(t.flags|=64,g=i.effects,g===null?i.effects=[o]:g.push(o))}else m={eventTime:m,lane:g,tag:o.tag,payload:o.payload,callback:o.callback,next:null},h===null?(u=h=m,l=p):h=h.next=m,a|=g;if(o=o.next,o===null){if(o=i.shared.pending,o===null)break;g=o,o=g.next,g.next=null,i.lastBaseUpdate=g,i.shared.pending=null}}while(!0);if(h===null&&(l=p),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do a|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Hl|=a,t.lanes=a,t.memoizedState=p}}function A5(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(qe(191,i));i.call(r)}}}var Td={},Us=el(Td),ad=el(Td),od=el(Td);function jl(t){if(t===Td)throw Error(qe(174));return t}function Dv(t,e){switch(sn(od,e),sn(ad,t),sn(Us,Td),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:D1(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=D1(e,t)}hn(Us),sn(Us,e)}function bc(){hn(Us),hn(ad),hn(od)}function f4(t){jl(od.current);var e=jl(Us.current),n=D1(e,t.type);e!==n&&(sn(ad,t),sn(Us,n))}function Fv(t){ad.current===t&&(hn(Us),hn(ad))}var mn=el(0);function Rp(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Hg=[];function Ov(){for(var t=0;t<Hg.length;t++)Hg[t]._workInProgressVersionPrimary=null;Hg.length=0}var Yf=Da.ReactCurrentDispatcher,$g=Da.ReactCurrentBatchConfig,zl=0,gn=null,Qn=null,nr=null,jp=!1,Mh=!1,ld=0,I6=0;function br(){throw Error(qe(321))}function Mv(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!cs(t[n],e[n]))return!1;return!0}function Vv(t,e,n,r,i,s){if(zl=s,gn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Yf.current=t===null||t.memoizedState===null?L6:R6,t=n(r,i),Mh){s=0;do{if(Mh=!1,ld=0,25<=s)throw Error(qe(301));s+=1,nr=Qn=null,e.updateQueue=null,Yf.current=j6,t=n(r,i)}while(Mh)}if(Yf.current=Dp,e=Qn!==null&&Qn.next!==null,zl=0,nr=Qn=gn=null,jp=!1,e)throw Error(qe(300));return t}function Uv(){var t=ld!==0;return ld=0,t}function js(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return nr===null?gn.memoizedState=nr=t:nr=nr.next=t,nr}function Ki(){if(Qn===null){var t=gn.alternate;t=t!==null?t.memoizedState:null}else t=Qn.next;var e=nr===null?gn.memoizedState:nr.next;if(e!==null)nr=e,Qn=t;else{if(t===null)throw Error(qe(310));Qn=t,t={memoizedState:Qn.memoizedState,baseState:Qn.baseState,baseQueue:Qn.baseQueue,queue:Qn.queue,next:null},nr===null?gn.memoizedState=nr=t:nr=nr.next=t}return nr}function ud(t,e){return typeof e=="function"?e(t):e}function Wg(t){var e=Ki(),n=e.queue;if(n===null)throw Error(qe(311));n.lastRenderedReducer=t;var r=Qn,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var a=i.next;i.next=s.next,s.next=a}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var o=a=null,l=null,u=s;do{var h=u.lane;if((zl&h)===h)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var p={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(o=l=p,a=r):l=l.next=p,gn.lanes|=h,Hl|=h}u=u.next}while(u!==null&&u!==s);l===null?a=r:l.next=o,cs(r,e.memoizedState)||(si=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,gn.lanes|=s,Hl|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Gg(t){var e=Ki(),n=e.queue;if(n===null)throw Error(qe(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var a=i=i.next;do s=t(s,a.action),a=a.next;while(a!==i);cs(s,e.memoizedState)||(si=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function p4(){}function m4(t,e){var n=gn,r=Ki(),i=e(),s=!cs(r.memoizedState,i);if(s&&(r.memoizedState=i,si=!0),r=r.queue,Bv(y4.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||nr!==null&&nr.memoizedState.tag&1){if(n.flags|=2048,cd(9,v4.bind(null,n,r,i,e),void 0,null),ir===null)throw Error(qe(349));zl&30||g4(n,e,i)}return i}function g4(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=gn.updateQueue,e===null?(e={lastEffect:null,stores:null},gn.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function v4(t,e,n,r){e.value=n,e.getSnapshot=r,_4(e)&&w4(t)}function y4(t,e,n){return n(function(){_4(e)&&w4(t)})}function _4(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!cs(t,n)}catch{return!0}}function w4(t){var e=Ta(t,1);e!==null&&us(e,t,1,-1)}function E5(t){var e=js();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ud,lastRenderedState:t},e.queue=t,t=t.dispatch=C6.bind(null,gn,t),[e.memoizedState,t]}function cd(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=gn.updateQueue,e===null?(e={lastEffect:null,stores:null},gn.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function b4(){return Ki().memoizedState}function Jf(t,e,n,r){var i=js();gn.flags|=t,i.memoizedState=cd(1|e,n,void 0,r===void 0?null:r)}function bm(t,e,n,r){var i=Ki();r=r===void 0?null:r;var s=void 0;if(Qn!==null){var a=Qn.memoizedState;if(s=a.destroy,r!==null&&Mv(r,a.deps)){i.memoizedState=cd(e,n,s,r);return}}gn.flags|=t,i.memoizedState=cd(1|e,n,s,r)}function k5(t,e){return Jf(8390656,8,t,e)}function Bv(t,e){return bm(2048,8,t,e)}function x4(t,e){return bm(4,2,t,e)}function S4(t,e){return bm(4,4,t,e)}function N4(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function A4(t,e,n){return n=n!=null?n.concat([t]):null,bm(4,4,N4.bind(null,e,t),n)}function Kv(){}function E4(t,e){var n=Ki();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Mv(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function k4(t,e){var n=Ki();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Mv(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function I4(t,e,n){return zl&21?(cs(n,e)||(n=Rb(),gn.lanes|=n,Hl|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,si=!0),t.memoizedState=n)}function T6(t,e){var n=Qt;Qt=n!==0&&4>n?n:4,t(!0);var r=$g.transition;$g.transition={};try{t(!1),e()}finally{Qt=n,$g.transition=r}}function T4(){return Ki().memoizedState}function P6(t,e,n){var r=Oo(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},P4(t))C4(e,n);else if(n=h4(t,e,n,r),n!==null){var i=qr();us(n,t,r,i),L4(n,e,r)}}function C6(t,e,n){var r=Oo(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(P4(t))C4(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var a=e.lastRenderedState,o=s(a,n);if(i.hasEagerState=!0,i.eagerState=o,cs(o,a)){var l=e.interleaved;l===null?(i.next=i,Rv(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=h4(t,e,i,r),n!==null&&(i=qr(),us(n,t,r,i),L4(n,e,r))}}function P4(t){var e=t.alternate;return t===gn||e!==null&&e===gn}function C4(t,e){Mh=jp=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function L4(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,_v(t,n)}}var Dp={readContext:Bi,useCallback:br,useContext:br,useEffect:br,useImperativeHandle:br,useInsertionEffect:br,useLayoutEffect:br,useMemo:br,useReducer:br,useRef:br,useState:br,useDebugValue:br,useDeferredValue:br,useTransition:br,useMutableSource:br,useSyncExternalStore:br,useId:br,unstable_isNewReconciler:!1},L6={readContext:Bi,useCallback:function(t,e){return js().memoizedState=[t,e===void 0?null:e],t},useContext:Bi,useEffect:k5,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Jf(4194308,4,N4.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Jf(4194308,4,t,e)},useInsertionEffect:function(t,e){return Jf(4,2,t,e)},useMemo:function(t,e){var n=js();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=js();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=P6.bind(null,gn,t),[r.memoizedState,t]},useRef:function(t){var e=js();return t={current:t},e.memoizedState=t},useState:E5,useDebugValue:Kv,useDeferredValue:function(t){return js().memoizedState=t},useTransition:function(){var t=E5(!1),e=t[0];return t=T6.bind(null,t[1]),js().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=gn,i=js();if(pn){if(n===void 0)throw Error(qe(407));n=n()}else{if(n=e(),ir===null)throw Error(qe(349));zl&30||g4(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,k5(y4.bind(null,r,s,t),[t]),r.flags|=2048,cd(9,v4.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=js(),e=ir.identifierPrefix;if(pn){var n=_a,r=ya;n=(r&~(1<<32-ls(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=ld++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=I6++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},R6={readContext:Bi,useCallback:E4,useContext:Bi,useEffect:Bv,useImperativeHandle:A4,useInsertionEffect:x4,useLayoutEffect:S4,useMemo:k4,useReducer:Wg,useRef:b4,useState:function(){return Wg(ud)},useDebugValue:Kv,useDeferredValue:function(t){var e=Ki();return I4(e,Qn.memoizedState,t)},useTransition:function(){var t=Wg(ud)[0],e=Ki().memoizedState;return[t,e]},useMutableSource:p4,useSyncExternalStore:m4,useId:T4,unstable_isNewReconciler:!1},j6={readContext:Bi,useCallback:E4,useContext:Bi,useEffect:Bv,useImperativeHandle:A4,useInsertionEffect:x4,useLayoutEffect:S4,useMemo:k4,useReducer:Gg,useRef:b4,useState:function(){return Gg(ud)},useDebugValue:Kv,useDeferredValue:function(t){var e=Ki();return Qn===null?e.memoizedState=t:I4(e,Qn.memoizedState,t)},useTransition:function(){var t=Gg(ud)[0],e=Ki().memoizedState;return[t,e]},useMutableSource:p4,useSyncExternalStore:m4,useId:T4,unstable_isNewReconciler:!1};function is(t,e){if(t&&t.defaultProps){e=yn({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function n0(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:yn({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var xm={isMounted:function(t){return(t=t._reactInternals)?eu(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=qr(),i=Oo(t),s=Na(r,i);s.payload=e,n!=null&&(s.callback=n),e=Do(t,s,i),e!==null&&(us(e,t,i,r),Qf(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=qr(),i=Oo(t),s=Na(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Do(t,s,i),e!==null&&(us(e,t,i,r),Qf(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=qr(),r=Oo(t),i=Na(n,r);i.tag=2,e!=null&&(i.callback=e),e=Do(t,i,r),e!==null&&(us(e,t,r,n),Qf(e,t,r))}};function I5(t,e,n,r,i,s,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,a):e.prototype&&e.prototype.isPureReactComponent?!nd(n,r)||!nd(i,s):!0}function R4(t,e,n){var r=!1,i=Ho,s=e.contextType;return typeof s=="object"&&s!==null?s=Bi(s):(i=oi(e)?Kl:Lr.current,r=e.contextTypes,s=(r=r!=null)?yc(t,i):Ho),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=xm,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function T5(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&xm.enqueueReplaceState(e,e.state,null)}function r0(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},jv(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Bi(s):(s=oi(e)?Kl:Lr.current,i.context=yc(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(n0(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&xm.enqueueReplaceState(i,i.state,null),Lp(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function xc(t,e){try{var n="",r=e;do n+=lE(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Qg(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function i0(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var D6=typeof WeakMap=="function"?WeakMap:Map;function j4(t,e,n){n=Na(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Op||(Op=!0,p0=r),i0(t,e)},n}function D4(t,e,n){n=Na(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){i0(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){i0(t,e),typeof r!="function"&&(Fo===null?Fo=new Set([this]):Fo.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function P5(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new D6;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=Q6.bind(null,t,e,n),e.then(t,t))}function C5(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function L5(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Na(-1,1),e.tag=2,Do(n,e,1))),n.lanes|=1),t)}var F6=Da.ReactCurrentOwner,si=!1;function Kr(t,e,n,r){e.child=t===null?c4(e,null,n,r):wc(e,t.child,n,r)}function R5(t,e,n,r,i){n=n.render;var s=e.ref;return oc(e,i),r=Vv(t,e,n,r,s,i),n=Uv(),t!==null&&!si?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Pa(t,e,i)):(pn&&n&&kv(e),e.flags|=1,Kr(t,e,r,i),e.child)}function j5(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Yv(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,F4(t,e,s,r,i)):(t=tp(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var a=s.memoizedProps;if(n=n.compare,n=n!==null?n:nd,n(a,r)&&t.ref===e.ref)return Pa(t,e,i)}return e.flags|=1,t=Mo(s,r),t.ref=e.ref,t.return=e,e.child=t}function F4(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(nd(s,r)&&t.ref===e.ref)if(si=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(si=!0);else return e.lanes=t.lanes,Pa(t,e,i)}return s0(t,e,n,r,i)}function O4(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},sn(Zu,yi),yi|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,sn(Zu,yi),yi|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,sn(Zu,yi),yi|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,sn(Zu,yi),yi|=r;return Kr(t,e,i,n),e.child}function M4(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function s0(t,e,n,r,i){var s=oi(n)?Kl:Lr.current;return s=yc(e,s),oc(e,i),n=Vv(t,e,n,r,s,i),r=Uv(),t!==null&&!si?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Pa(t,e,i)):(pn&&r&&kv(e),e.flags|=1,Kr(t,e,n,i),e.child)}function D5(t,e,n,r,i){if(oi(n)){var s=!0;kp(e)}else s=!1;if(oc(e,i),e.stateNode===null)Xf(t,e),R4(e,n,r),r0(e,n,r,i),r=!0;else if(t===null){var a=e.stateNode,o=e.memoizedProps;a.props=o;var l=a.context,u=n.contextType;typeof u=="object"&&u!==null?u=Bi(u):(u=oi(n)?Kl:Lr.current,u=yc(e,u));var h=n.getDerivedStateFromProps,p=typeof h=="function"||typeof a.getSnapshotBeforeUpdate=="function";p||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==r||l!==u)&&T5(e,a,r,u),yo=!1;var g=e.memoizedState;a.state=g,Lp(e,r,a,i),l=e.memoizedState,o!==r||g!==l||ai.current||yo?(typeof h=="function"&&(n0(e,n,h,r),l=e.memoizedState),(o=yo||I5(e,n,o,r,g,l,u))?(p||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),a.props=r,a.state=l,a.context=u,r=o):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,d4(t,e),o=e.memoizedProps,u=e.type===e.elementType?o:is(e.type,o),a.props=u,p=e.pendingProps,g=a.context,l=n.contextType,typeof l=="object"&&l!==null?l=Bi(l):(l=oi(n)?Kl:Lr.current,l=yc(e,l));var m=n.getDerivedStateFromProps;(h=typeof m=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==p||g!==l)&&T5(e,a,r,l),yo=!1,g=e.memoizedState,a.state=g,Lp(e,r,a,i);var b=e.memoizedState;o!==p||g!==b||ai.current||yo?(typeof m=="function"&&(n0(e,n,m,r),b=e.memoizedState),(u=yo||I5(e,n,u,r,g,b,l)||!1)?(h||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,b,l),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,b,l)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=b),a.props=r,a.state=b,a.context=l,r=u):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),r=!1)}return a0(t,e,n,r,s,i)}function a0(t,e,n,r,i,s){M4(t,e);var a=(e.flags&128)!==0;if(!r&&!a)return i&&w5(e,n,!1),Pa(t,e,s);r=e.stateNode,F6.current=e;var o=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&a?(e.child=wc(e,t.child,null,s),e.child=wc(e,null,o,s)):Kr(t,e,o,s),e.memoizedState=r.state,i&&w5(e,n,!0),e.child}function V4(t){var e=t.stateNode;e.pendingContext?_5(t,e.pendingContext,e.pendingContext!==e.context):e.context&&_5(t,e.context,!1),Dv(t,e.containerInfo)}function F5(t,e,n,r,i){return _c(),Tv(i),e.flags|=256,Kr(t,e,n,r),e.child}var o0={dehydrated:null,treeContext:null,retryLane:0};function l0(t){return{baseLanes:t,cachePool:null,transitions:null}}function U4(t,e,n){var r=e.pendingProps,i=mn.current,s=!1,a=(e.flags&128)!==0,o;if((o=a)||(o=t!==null&&t.memoizedState===null?!1:(i&2)!==0),o?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),sn(mn,i&1),t===null)return e0(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=r.children,t=r.fallback,s?(r=e.mode,s=e.child,a={mode:"hidden",children:a},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=a):s=Am(a,r,0,null),t=Ml(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=l0(n),e.memoizedState=o0,t):qv(e,a));if(i=t.memoizedState,i!==null&&(o=i.dehydrated,o!==null))return O6(t,e,a,r,o,i,n);if(s){s=r.fallback,a=e.mode,i=t.child,o=i.sibling;var l={mode:"hidden",children:r.children};return!(a&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Mo(i,l),r.subtreeFlags=i.subtreeFlags&14680064),o!==null?s=Mo(o,s):(s=Ml(s,a,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,a=t.child.memoizedState,a=a===null?l0(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},s.memoizedState=a,s.childLanes=t.childLanes&~n,e.memoizedState=o0,r}return s=t.child,t=s.sibling,r=Mo(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function qv(t,e){return e=Am({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function If(t,e,n,r){return r!==null&&Tv(r),wc(e,t.child,null,n),t=qv(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function O6(t,e,n,r,i,s,a){if(n)return e.flags&256?(e.flags&=-257,r=Qg(Error(qe(422))),If(t,e,a,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Am({mode:"visible",children:r.children},i,0,null),s=Ml(s,i,a,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&wc(e,t.child,null,a),e.child.memoizedState=l0(a),e.memoizedState=o0,s);if(!(e.mode&1))return If(t,e,a,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var o=r.dgst;return r=o,s=Error(qe(419)),r=Qg(s,r,void 0),If(t,e,a,r)}if(o=(a&t.childLanes)!==0,si||o){if(r=ir,r!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|a)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Ta(t,i),us(r,t,i,-1))}return Qv(),r=Qg(Error(qe(421))),If(t,e,a,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=Y6.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,_i=jo(i.nextSibling),Si=e,pn=!0,os=null,t!==null&&(Di[Fi++]=ya,Di[Fi++]=_a,Di[Fi++]=ql,ya=t.id,_a=t.overflow,ql=e),e=qv(e,r.children),e.flags|=4096,e)}function O5(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),t0(t.return,e,n)}function Yg(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function B4(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Kr(t,e,r.children,n),r=mn.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&O5(t,n,e);else if(t.tag===19)O5(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(sn(mn,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Rp(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Yg(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Rp(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Yg(e,!0,n,null,s);break;case"together":Yg(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Xf(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Pa(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Hl|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(qe(153));if(e.child!==null){for(t=e.child,n=Mo(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Mo(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function M6(t,e,n){switch(e.tag){case 3:V4(e),_c();break;case 5:f4(e);break;case 1:oi(e.type)&&kp(e);break;case 4:Dv(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;sn(Pp,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(sn(mn,mn.current&1),e.flags|=128,null):n&e.child.childLanes?U4(t,e,n):(sn(mn,mn.current&1),t=Pa(t,e,n),t!==null?t.sibling:null);sn(mn,mn.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return B4(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),sn(mn,mn.current),r)break;return null;case 22:case 23:return e.lanes=0,O4(t,e,n)}return Pa(t,e,n)}var K4,u0,q4,z4;K4=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};u0=function(){};q4=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,jl(Us.current);var s=null;switch(n){case"input":i=C1(t,i),r=C1(t,r),s=[];break;case"select":i=yn({},i,{value:void 0}),r=yn({},r,{value:void 0}),s=[];break;case"textarea":i=j1(t,i),r=j1(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Ap)}F1(n,r);var a;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var o=i[u];for(a in o)o.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Qh.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var l=r[u];if(o=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==o&&(l!=null||o!=null))if(u==="style")if(o){for(a in o)!o.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in l)l.hasOwnProperty(a)&&o[a]!==l[a]&&(n||(n={}),n[a]=l[a])}else n||(s||(s=[]),s.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,o=o?o.__html:void 0,l!=null&&o!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Qh.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&ln("scroll",t),s||o===l||(s=[])):(s=s||[]).push(u,l))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};z4=function(t,e,n,r){n!==r&&(e.flags|=4)};function vh(t,e){if(!pn)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function xr(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function V6(t,e,n){var r=e.pendingProps;switch(Iv(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return xr(e),null;case 1:return oi(e.type)&&Ep(),xr(e),null;case 3:return r=e.stateNode,bc(),hn(ai),hn(Lr),Ov(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Ef(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,os!==null&&(v0(os),os=null))),u0(t,e),xr(e),null;case 5:Fv(e);var i=jl(od.current);if(n=e.type,t!==null&&e.stateNode!=null)q4(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(qe(166));return xr(e),null}if(t=jl(Us.current),Ef(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Fs]=e,r[sd]=s,t=(e.mode&1)!==0,n){case"dialog":ln("cancel",r),ln("close",r);break;case"iframe":case"object":case"embed":ln("load",r);break;case"video":case"audio":for(i=0;i<Eh.length;i++)ln(Eh[i],r);break;case"source":ln("error",r);break;case"img":case"image":case"link":ln("error",r),ln("load",r);break;case"details":ln("toggle",r);break;case"input":$y(r,s),ln("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},ln("invalid",r);break;case"textarea":Gy(r,s),ln("invalid",r)}F1(n,s),i=null;for(var a in s)if(s.hasOwnProperty(a)){var o=s[a];a==="children"?typeof o=="string"?r.textContent!==o&&(s.suppressHydrationWarning!==!0&&Af(r.textContent,o,t),i=["children",o]):typeof o=="number"&&r.textContent!==""+o&&(s.suppressHydrationWarning!==!0&&Af(r.textContent,o,t),i=["children",""+o]):Qh.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&ln("scroll",r)}switch(n){case"input":vf(r),Wy(r,s,!0);break;case"textarea":vf(r),Qy(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Ap)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=yb(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=a.createElement(n,{is:r.is}):(t=a.createElement(n),n==="select"&&(a=t,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):t=a.createElementNS(t,n),t[Fs]=e,t[sd]=r,K4(t,e,!1,!1),e.stateNode=t;e:{switch(a=O1(n,r),n){case"dialog":ln("cancel",t),ln("close",t),i=r;break;case"iframe":case"object":case"embed":ln("load",t),i=r;break;case"video":case"audio":for(i=0;i<Eh.length;i++)ln(Eh[i],t);i=r;break;case"source":ln("error",t),i=r;break;case"img":case"image":case"link":ln("error",t),ln("load",t),i=r;break;case"details":ln("toggle",t),i=r;break;case"input":$y(t,r),i=C1(t,r),ln("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=yn({},r,{value:void 0}),ln("invalid",t);break;case"textarea":Gy(t,r),i=j1(t,r),ln("invalid",t);break;default:i=r}F1(n,i),o=i;for(s in o)if(o.hasOwnProperty(s)){var l=o[s];s==="style"?bb(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&_b(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Yh(t,l):typeof l=="number"&&Yh(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Qh.hasOwnProperty(s)?l!=null&&s==="onScroll"&&ln("scroll",t):l!=null&&fv(t,s,l,a))}switch(n){case"input":vf(t),Wy(t,r,!1);break;case"textarea":vf(t),Qy(t);break;case"option":r.value!=null&&t.setAttribute("value",""+zo(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?rc(t,!!r.multiple,s,!1):r.defaultValue!=null&&rc(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Ap)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return xr(e),null;case 6:if(t&&e.stateNode!=null)z4(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(qe(166));if(n=jl(od.current),jl(Us.current),Ef(e)){if(r=e.stateNode,n=e.memoizedProps,r[Fs]=e,(s=r.nodeValue!==n)&&(t=Si,t!==null))switch(t.tag){case 3:Af(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Af(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Fs]=e,e.stateNode=r}return xr(e),null;case 13:if(hn(mn),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(pn&&_i!==null&&e.mode&1&&!(e.flags&128))l4(),_c(),e.flags|=98560,s=!1;else if(s=Ef(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(qe(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(qe(317));s[Fs]=e}else _c(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;xr(e),s=!1}else os!==null&&(v0(os),os=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||mn.current&1?Yn===0&&(Yn=3):Qv())),e.updateQueue!==null&&(e.flags|=4),xr(e),null);case 4:return bc(),u0(t,e),t===null&&rd(e.stateNode.containerInfo),xr(e),null;case 10:return Lv(e.type._context),xr(e),null;case 17:return oi(e.type)&&Ep(),xr(e),null;case 19:if(hn(mn),s=e.memoizedState,s===null)return xr(e),null;if(r=(e.flags&128)!==0,a=s.rendering,a===null)if(r)vh(s,!1);else{if(Yn!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=Rp(t),a!==null){for(e.flags|=128,vh(s,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,a=s.alternate,a===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,t=a.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return sn(mn,mn.current&1|2),e.child}t=t.sibling}s.tail!==null&&jn()>Sc&&(e.flags|=128,r=!0,vh(s,!1),e.lanes=4194304)}else{if(!r)if(t=Rp(a),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),vh(s,!0),s.tail===null&&s.tailMode==="hidden"&&!a.alternate&&!pn)return xr(e),null}else 2*jn()-s.renderingStartTime>Sc&&n!==1073741824&&(e.flags|=128,r=!0,vh(s,!1),e.lanes=4194304);s.isBackwards?(a.sibling=e.child,e.child=a):(n=s.last,n!==null?n.sibling=a:e.child=a,s.last=a)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=jn(),e.sibling=null,n=mn.current,sn(mn,r?n&1|2:n&1),e):(xr(e),null);case 22:case 23:return Gv(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?yi&1073741824&&(xr(e),e.subtreeFlags&6&&(e.flags|=8192)):xr(e),null;case 24:return null;case 25:return null}throw Error(qe(156,e.tag))}function U6(t,e){switch(Iv(e),e.tag){case 1:return oi(e.type)&&Ep(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return bc(),hn(ai),hn(Lr),Ov(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Fv(e),null;case 13:if(hn(mn),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(qe(340));_c()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return hn(mn),null;case 4:return bc(),null;case 10:return Lv(e.type._context),null;case 22:case 23:return Gv(),null;case 24:return null;default:return null}}var Tf=!1,Tr=!1,B6=typeof WeakSet=="function"?WeakSet:Set,rt=null;function Xu(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){kn(t,e,r)}else n.current=null}function c0(t,e,n){try{n()}catch(r){kn(t,e,r)}}var M5=!1;function K6(t,e){if(W1=xp,t=Qb(),Ev(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var a=0,o=-1,l=-1,u=0,h=0,p=t,g=null;t:for(;;){for(var m;p!==n||i!==0&&p.nodeType!==3||(o=a+i),p!==s||r!==0&&p.nodeType!==3||(l=a+r),p.nodeType===3&&(a+=p.nodeValue.length),(m=p.firstChild)!==null;)g=p,p=m;for(;;){if(p===t)break t;if(g===n&&++u===i&&(o=a),g===s&&++h===r&&(l=a),(m=p.nextSibling)!==null)break;p=g,g=p.parentNode}p=m}n=o===-1||l===-1?null:{start:o,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(G1={focusedElem:t,selectionRange:n},xp=!1,rt=e;rt!==null;)if(e=rt,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,rt=t;else for(;rt!==null;){e=rt;try{var b=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var x=b.memoizedProps,k=b.memoizedState,_=e.stateNode,A=_.getSnapshotBeforeUpdate(e.elementType===e.type?x:is(e.type,x),k);_.__reactInternalSnapshotBeforeUpdate=A}break;case 3:var C=e.stateNode.containerInfo;C.nodeType===1?C.textContent="":C.nodeType===9&&C.documentElement&&C.removeChild(C.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(qe(163))}}catch(F){kn(e,e.return,F)}if(t=e.sibling,t!==null){t.return=e.return,rt=t;break}rt=e.return}return b=M5,M5=!1,b}function Vh(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&c0(e,n,s)}i=i.next}while(i!==r)}}function Sm(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function h0(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function H4(t){var e=t.alternate;e!==null&&(t.alternate=null,H4(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Fs],delete e[sd],delete e[J1],delete e[N6],delete e[A6])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function $4(t){return t.tag===5||t.tag===3||t.tag===4}function V5(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||$4(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function d0(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Ap));else if(r!==4&&(t=t.child,t!==null))for(d0(t,e,n),t=t.sibling;t!==null;)d0(t,e,n),t=t.sibling}function f0(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(f0(t,e,n),t=t.sibling;t!==null;)f0(t,e,n),t=t.sibling}var cr=null,as=!1;function fo(t,e,n){for(n=n.child;n!==null;)W4(t,e,n),n=n.sibling}function W4(t,e,n){if(Vs&&typeof Vs.onCommitFiberUnmount=="function")try{Vs.onCommitFiberUnmount(mm,n)}catch{}switch(n.tag){case 5:Tr||Xu(n,e);case 6:var r=cr,i=as;cr=null,fo(t,e,n),cr=r,as=i,cr!==null&&(as?(t=cr,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):cr.removeChild(n.stateNode));break;case 18:cr!==null&&(as?(t=cr,n=n.stateNode,t.nodeType===8?qg(t.parentNode,n):t.nodeType===1&&qg(t,n),ed(t)):qg(cr,n.stateNode));break;case 4:r=cr,i=as,cr=n.stateNode.containerInfo,as=!0,fo(t,e,n),cr=r,as=i;break;case 0:case 11:case 14:case 15:if(!Tr&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,a=s.destroy;s=s.tag,a!==void 0&&(s&2||s&4)&&c0(n,e,a),i=i.next}while(i!==r)}fo(t,e,n);break;case 1:if(!Tr&&(Xu(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){kn(n,e,o)}fo(t,e,n);break;case 21:fo(t,e,n);break;case 22:n.mode&1?(Tr=(r=Tr)||n.memoizedState!==null,fo(t,e,n),Tr=r):fo(t,e,n);break;default:fo(t,e,n)}}function U5(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new B6),e.forEach(function(r){var i=J6.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function es(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,a=e,o=a;e:for(;o!==null;){switch(o.tag){case 5:cr=o.stateNode,as=!1;break e;case 3:cr=o.stateNode.containerInfo,as=!0;break e;case 4:cr=o.stateNode.containerInfo,as=!0;break e}o=o.return}if(cr===null)throw Error(qe(160));W4(s,a,i),cr=null,as=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){kn(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)G4(e,t),e=e.sibling}function G4(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(es(e,t),Cs(t),r&4){try{Vh(3,t,t.return),Sm(3,t)}catch(x){kn(t,t.return,x)}try{Vh(5,t,t.return)}catch(x){kn(t,t.return,x)}}break;case 1:es(e,t),Cs(t),r&512&&n!==null&&Xu(n,n.return);break;case 5:if(es(e,t),Cs(t),r&512&&n!==null&&Xu(n,n.return),t.flags&32){var i=t.stateNode;try{Yh(i,"")}catch(x){kn(t,t.return,x)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,a=n!==null?n.memoizedProps:s,o=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{o==="input"&&s.type==="radio"&&s.name!=null&&gb(i,s),O1(o,a);var u=O1(o,s);for(a=0;a<l.length;a+=2){var h=l[a],p=l[a+1];h==="style"?bb(i,p):h==="dangerouslySetInnerHTML"?_b(i,p):h==="children"?Yh(i,p):fv(i,h,p,u)}switch(o){case"input":L1(i,s);break;case"textarea":vb(i,s);break;case"select":var g=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var m=s.value;m!=null?rc(i,!!s.multiple,m,!1):g!==!!s.multiple&&(s.defaultValue!=null?rc(i,!!s.multiple,s.defaultValue,!0):rc(i,!!s.multiple,s.multiple?[]:"",!1))}i[sd]=s}catch(x){kn(t,t.return,x)}}break;case 6:if(es(e,t),Cs(t),r&4){if(t.stateNode===null)throw Error(qe(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(x){kn(t,t.return,x)}}break;case 3:if(es(e,t),Cs(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{ed(e.containerInfo)}catch(x){kn(t,t.return,x)}break;case 4:es(e,t),Cs(t);break;case 13:es(e,t),Cs(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||($v=jn())),r&4&&U5(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(Tr=(u=Tr)||h,es(e,t),Tr=u):es(e,t),Cs(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!h&&t.mode&1)for(rt=t,h=t.child;h!==null;){for(p=rt=h;rt!==null;){switch(g=rt,m=g.child,g.tag){case 0:case 11:case 14:case 15:Vh(4,g,g.return);break;case 1:Xu(g,g.return);var b=g.stateNode;if(typeof b.componentWillUnmount=="function"){r=g,n=g.return;try{e=r,b.props=e.memoizedProps,b.state=e.memoizedState,b.componentWillUnmount()}catch(x){kn(r,n,x)}}break;case 5:Xu(g,g.return);break;case 22:if(g.memoizedState!==null){K5(p);continue}}m!==null?(m.return=g,rt=m):K5(p)}h=h.sibling}e:for(h=null,p=t;;){if(p.tag===5){if(h===null){h=p;try{i=p.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(o=p.stateNode,l=p.memoizedProps.style,a=l!=null&&l.hasOwnProperty("display")?l.display:null,o.style.display=wb("display",a))}catch(x){kn(t,t.return,x)}}}else if(p.tag===6){if(h===null)try{p.stateNode.nodeValue=u?"":p.memoizedProps}catch(x){kn(t,t.return,x)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;h===p&&(h=null),p=p.return}h===p&&(h=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:es(e,t),Cs(t),r&4&&U5(t);break;case 21:break;default:es(e,t),Cs(t)}}function Cs(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if($4(n)){var r=n;break e}n=n.return}throw Error(qe(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Yh(i,""),r.flags&=-33);var s=V5(t);f0(t,s,i);break;case 3:case 4:var a=r.stateNode.containerInfo,o=V5(t);d0(t,o,a);break;default:throw Error(qe(161))}}catch(l){kn(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function q6(t,e,n){rt=t,Q4(t)}function Q4(t,e,n){for(var r=(t.mode&1)!==0;rt!==null;){var i=rt,s=i.child;if(i.tag===22&&r){var a=i.memoizedState!==null||Tf;if(!a){var o=i.alternate,l=o!==null&&o.memoizedState!==null||Tr;o=Tf;var u=Tr;if(Tf=a,(Tr=l)&&!u)for(rt=i;rt!==null;)a=rt,l=a.child,a.tag===22&&a.memoizedState!==null?q5(i):l!==null?(l.return=a,rt=l):q5(i);for(;s!==null;)rt=s,Q4(s),s=s.sibling;rt=i,Tf=o,Tr=u}B5(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,rt=s):B5(t)}}function B5(t){for(;rt!==null;){var e=rt;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Tr||Sm(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Tr)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:is(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&A5(e,s,r);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}A5(e,a,n)}break;case 5:var o=e.stateNode;if(n===null&&e.flags&4){n=o;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var p=h.dehydrated;p!==null&&ed(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(qe(163))}Tr||e.flags&512&&h0(e)}catch(g){kn(e,e.return,g)}}if(e===t){rt=null;break}if(n=e.sibling,n!==null){n.return=e.return,rt=n;break}rt=e.return}}function K5(t){for(;rt!==null;){var e=rt;if(e===t){rt=null;break}var n=e.sibling;if(n!==null){n.return=e.return,rt=n;break}rt=e.return}}function q5(t){for(;rt!==null;){var e=rt;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Sm(4,e)}catch(l){kn(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){kn(e,i,l)}}var s=e.return;try{h0(e)}catch(l){kn(e,s,l)}break;case 5:var a=e.return;try{h0(e)}catch(l){kn(e,a,l)}}}catch(l){kn(e,e.return,l)}if(e===t){rt=null;break}var o=e.sibling;if(o!==null){o.return=e.return,rt=o;break}rt=e.return}}var z6=Math.ceil,Fp=Da.ReactCurrentDispatcher,zv=Da.ReactCurrentOwner,Vi=Da.ReactCurrentBatchConfig,Vt=0,ir=null,zn=null,fr=0,yi=0,Zu=el(0),Yn=0,hd=null,Hl=0,Nm=0,Hv=0,Uh=null,ni=null,$v=0,Sc=1/0,ga=null,Op=!1,p0=null,Fo=null,Pf=!1,ko=null,Mp=0,Bh=0,m0=null,Zf=-1,ep=0;function qr(){return Vt&6?jn():Zf!==-1?Zf:Zf=jn()}function Oo(t){return t.mode&1?Vt&2&&fr!==0?fr&-fr:k6.transition!==null?(ep===0&&(ep=Rb()),ep):(t=Qt,t!==0||(t=window.event,t=t===void 0?16:Ub(t.type)),t):1}function us(t,e,n,r){if(50<Bh)throw Bh=0,m0=null,Error(qe(185));Ed(t,n,r),(!(Vt&2)||t!==ir)&&(t===ir&&(!(Vt&2)&&(Nm|=n),Yn===4&&wo(t,fr)),li(t,r),n===1&&Vt===0&&!(e.mode&1)&&(Sc=jn()+500,wm&&tl()))}function li(t,e){var n=t.callbackNode;kE(t,e);var r=bp(t,t===ir?fr:0);if(r===0)n!==null&&Xy(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Xy(n),e===1)t.tag===0?E6(z5.bind(null,t)):s4(z5.bind(null,t)),x6(function(){!(Vt&6)&&tl()}),n=null;else{switch(jb(r)){case 1:n=yv;break;case 4:n=Cb;break;case 16:n=wp;break;case 536870912:n=Lb;break;default:n=wp}n=r3(n,Y4.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Y4(t,e){if(Zf=-1,ep=0,Vt&6)throw Error(qe(327));var n=t.callbackNode;if(lc()&&t.callbackNode!==n)return null;var r=bp(t,t===ir?fr:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Vp(t,r);else{e=r;var i=Vt;Vt|=2;var s=X4();(ir!==t||fr!==e)&&(ga=null,Sc=jn()+500,Ol(t,e));do try{W6();break}catch(o){J4(t,o)}while(!0);Cv(),Fp.current=s,Vt=i,zn!==null?e=0:(ir=null,fr=0,e=Yn)}if(e!==0){if(e===2&&(i=K1(t),i!==0&&(r=i,e=g0(t,i))),e===1)throw n=hd,Ol(t,0),wo(t,r),li(t,jn()),n;if(e===6)wo(t,r);else{if(i=t.current.alternate,!(r&30)&&!H6(i)&&(e=Vp(t,r),e===2&&(s=K1(t),s!==0&&(r=s,e=g0(t,s))),e===1))throw n=hd,Ol(t,0),wo(t,r),li(t,jn()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(qe(345));case 2:kl(t,ni,ga);break;case 3:if(wo(t,r),(r&130023424)===r&&(e=$v+500-jn(),10<e)){if(bp(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){qr(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Y1(kl.bind(null,t,ni,ga),e);break}kl(t,ni,ga);break;case 4:if(wo(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var a=31-ls(r);s=1<<a,a=e[a],a>i&&(i=a),r&=~s}if(r=i,r=jn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*z6(r/1960))-r,10<r){t.timeoutHandle=Y1(kl.bind(null,t,ni,ga),r);break}kl(t,ni,ga);break;case 5:kl(t,ni,ga);break;default:throw Error(qe(329))}}}return li(t,jn()),t.callbackNode===n?Y4.bind(null,t):null}function g0(t,e){var n=Uh;return t.current.memoizedState.isDehydrated&&(Ol(t,e).flags|=256),t=Vp(t,e),t!==2&&(e=ni,ni=n,e!==null&&v0(e)),t}function v0(t){ni===null?ni=t:ni.push.apply(ni,t)}function H6(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!cs(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function wo(t,e){for(e&=~Hv,e&=~Nm,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-ls(e),r=1<<n;t[n]=-1,e&=~r}}function z5(t){if(Vt&6)throw Error(qe(327));lc();var e=bp(t,0);if(!(e&1))return li(t,jn()),null;var n=Vp(t,e);if(t.tag!==0&&n===2){var r=K1(t);r!==0&&(e=r,n=g0(t,r))}if(n===1)throw n=hd,Ol(t,0),wo(t,e),li(t,jn()),n;if(n===6)throw Error(qe(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,kl(t,ni,ga),li(t,jn()),null}function Wv(t,e){var n=Vt;Vt|=1;try{return t(e)}finally{Vt=n,Vt===0&&(Sc=jn()+500,wm&&tl())}}function $l(t){ko!==null&&ko.tag===0&&!(Vt&6)&&lc();var e=Vt;Vt|=1;var n=Vi.transition,r=Qt;try{if(Vi.transition=null,Qt=1,t)return t()}finally{Qt=r,Vi.transition=n,Vt=e,!(Vt&6)&&tl()}}function Gv(){yi=Zu.current,hn(Zu)}function Ol(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,b6(n)),zn!==null)for(n=zn.return;n!==null;){var r=n;switch(Iv(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ep();break;case 3:bc(),hn(ai),hn(Lr),Ov();break;case 5:Fv(r);break;case 4:bc();break;case 13:hn(mn);break;case 19:hn(mn);break;case 10:Lv(r.type._context);break;case 22:case 23:Gv()}n=n.return}if(ir=t,zn=t=Mo(t.current,null),fr=yi=e,Yn=0,hd=null,Hv=Nm=Hl=0,ni=Uh=null,Rl!==null){for(e=0;e<Rl.length;e++)if(n=Rl[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var a=s.next;s.next=i,r.next=a}n.pending=r}Rl=null}return t}function J4(t,e){do{var n=zn;try{if(Cv(),Yf.current=Dp,jp){for(var r=gn.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}jp=!1}if(zl=0,nr=Qn=gn=null,Mh=!1,ld=0,zv.current=null,n===null||n.return===null){Yn=1,hd=e,zn=null;break}e:{var s=t,a=n.return,o=n,l=e;if(e=fr,o.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,h=o,p=h.tag;if(!(h.mode&1)&&(p===0||p===11||p===15)){var g=h.alternate;g?(h.updateQueue=g.updateQueue,h.memoizedState=g.memoizedState,h.lanes=g.lanes):(h.updateQueue=null,h.memoizedState=null)}var m=C5(a);if(m!==null){m.flags&=-257,L5(m,a,o,s,e),m.mode&1&&P5(s,u,e),e=m,l=u;var b=e.updateQueue;if(b===null){var x=new Set;x.add(l),e.updateQueue=x}else b.add(l);break e}else{if(!(e&1)){P5(s,u,e),Qv();break e}l=Error(qe(426))}}else if(pn&&o.mode&1){var k=C5(a);if(k!==null){!(k.flags&65536)&&(k.flags|=256),L5(k,a,o,s,e),Tv(xc(l,o));break e}}s=l=xc(l,o),Yn!==4&&(Yn=2),Uh===null?Uh=[s]:Uh.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var _=j4(s,l,e);N5(s,_);break e;case 1:o=l;var A=s.type,C=s.stateNode;if(!(s.flags&128)&&(typeof A.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(Fo===null||!Fo.has(C)))){s.flags|=65536,e&=-e,s.lanes|=e;var F=D4(s,o,e);N5(s,F);break e}}s=s.return}while(s!==null)}e3(n)}catch(Y){e=Y,zn===n&&n!==null&&(zn=n=n.return);continue}break}while(!0)}function X4(){var t=Fp.current;return Fp.current=Dp,t===null?Dp:t}function Qv(){(Yn===0||Yn===3||Yn===2)&&(Yn=4),ir===null||!(Hl&268435455)&&!(Nm&268435455)||wo(ir,fr)}function Vp(t,e){var n=Vt;Vt|=2;var r=X4();(ir!==t||fr!==e)&&(ga=null,Ol(t,e));do try{$6();break}catch(i){J4(t,i)}while(!0);if(Cv(),Vt=n,Fp.current=r,zn!==null)throw Error(qe(261));return ir=null,fr=0,Yn}function $6(){for(;zn!==null;)Z4(zn)}function W6(){for(;zn!==null&&!yE();)Z4(zn)}function Z4(t){var e=n3(t.alternate,t,yi);t.memoizedProps=t.pendingProps,e===null?e3(t):zn=e,zv.current=null}function e3(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=U6(n,e),n!==null){n.flags&=32767,zn=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Yn=6,zn=null;return}}else if(n=V6(n,e,yi),n!==null){zn=n;return}if(e=e.sibling,e!==null){zn=e;return}zn=e=t}while(e!==null);Yn===0&&(Yn=5)}function kl(t,e,n){var r=Qt,i=Vi.transition;try{Vi.transition=null,Qt=1,G6(t,e,n,r)}finally{Vi.transition=i,Qt=r}return null}function G6(t,e,n,r){do lc();while(ko!==null);if(Vt&6)throw Error(qe(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(qe(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(IE(t,s),t===ir&&(zn=ir=null,fr=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Pf||(Pf=!0,r3(wp,function(){return lc(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Vi.transition,Vi.transition=null;var a=Qt;Qt=1;var o=Vt;Vt|=4,zv.current=null,K6(t,n),G4(n,t),p6(G1),xp=!!W1,G1=W1=null,t.current=n,q6(n),_E(),Vt=o,Qt=a,Vi.transition=s}else t.current=n;if(Pf&&(Pf=!1,ko=t,Mp=i),s=t.pendingLanes,s===0&&(Fo=null),xE(n.stateNode),li(t,jn()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Op)throw Op=!1,t=p0,p0=null,t;return Mp&1&&t.tag!==0&&lc(),s=t.pendingLanes,s&1?t===m0?Bh++:(Bh=0,m0=t):Bh=0,tl(),null}function lc(){if(ko!==null){var t=jb(Mp),e=Vi.transition,n=Qt;try{if(Vi.transition=null,Qt=16>t?16:t,ko===null)var r=!1;else{if(t=ko,ko=null,Mp=0,Vt&6)throw Error(qe(331));var i=Vt;for(Vt|=4,rt=t.current;rt!==null;){var s=rt,a=s.child;if(rt.flags&16){var o=s.deletions;if(o!==null){for(var l=0;l<o.length;l++){var u=o[l];for(rt=u;rt!==null;){var h=rt;switch(h.tag){case 0:case 11:case 15:Vh(8,h,s)}var p=h.child;if(p!==null)p.return=h,rt=p;else for(;rt!==null;){h=rt;var g=h.sibling,m=h.return;if(H4(h),h===u){rt=null;break}if(g!==null){g.return=m,rt=g;break}rt=m}}}var b=s.alternate;if(b!==null){var x=b.child;if(x!==null){b.child=null;do{var k=x.sibling;x.sibling=null,x=k}while(x!==null)}}rt=s}}if(s.subtreeFlags&2064&&a!==null)a.return=s,rt=a;else e:for(;rt!==null;){if(s=rt,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Vh(9,s,s.return)}var _=s.sibling;if(_!==null){_.return=s.return,rt=_;break e}rt=s.return}}var A=t.current;for(rt=A;rt!==null;){a=rt;var C=a.child;if(a.subtreeFlags&2064&&C!==null)C.return=a,rt=C;else e:for(a=A;rt!==null;){if(o=rt,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:Sm(9,o)}}catch(Y){kn(o,o.return,Y)}if(o===a){rt=null;break e}var F=o.sibling;if(F!==null){F.return=o.return,rt=F;break e}rt=o.return}}if(Vt=i,tl(),Vs&&typeof Vs.onPostCommitFiberRoot=="function")try{Vs.onPostCommitFiberRoot(mm,t)}catch{}r=!0}return r}finally{Qt=n,Vi.transition=e}}return!1}function H5(t,e,n){e=xc(n,e),e=j4(t,e,1),t=Do(t,e,1),e=qr(),t!==null&&(Ed(t,1,e),li(t,e))}function kn(t,e,n){if(t.tag===3)H5(t,t,n);else for(;e!==null;){if(e.tag===3){H5(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Fo===null||!Fo.has(r))){t=xc(n,t),t=D4(e,t,1),e=Do(e,t,1),t=qr(),e!==null&&(Ed(e,1,t),li(e,t));break}}e=e.return}}function Q6(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=qr(),t.pingedLanes|=t.suspendedLanes&n,ir===t&&(fr&n)===n&&(Yn===4||Yn===3&&(fr&130023424)===fr&&500>jn()-$v?Ol(t,0):Hv|=n),li(t,e)}function t3(t,e){e===0&&(t.mode&1?(e=wf,wf<<=1,!(wf&130023424)&&(wf=4194304)):e=1);var n=qr();t=Ta(t,e),t!==null&&(Ed(t,e,n),li(t,n))}function Y6(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),t3(t,n)}function J6(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(qe(314))}r!==null&&r.delete(e),t3(t,n)}var n3;n3=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||ai.current)si=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return si=!1,M6(t,e,n);si=!!(t.flags&131072)}else si=!1,pn&&e.flags&1048576&&a4(e,Tp,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Xf(t,e),t=e.pendingProps;var i=yc(e,Lr.current);oc(e,n),i=Vv(null,e,r,t,i,n);var s=Uv();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,oi(r)?(s=!0,kp(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,jv(e),i.updater=xm,e.stateNode=i,i._reactInternals=e,r0(e,r,t,n),e=a0(null,e,r,!0,s,n)):(e.tag=0,pn&&s&&kv(e),Kr(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Xf(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=Z6(r),t=is(r,t),i){case 0:e=s0(null,e,r,t,n);break e;case 1:e=D5(null,e,r,t,n);break e;case 11:e=R5(null,e,r,t,n);break e;case 14:e=j5(null,e,r,is(r.type,t),n);break e}throw Error(qe(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:is(r,i),s0(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:is(r,i),D5(t,e,r,i,n);case 3:e:{if(V4(e),t===null)throw Error(qe(387));r=e.pendingProps,s=e.memoizedState,i=s.element,d4(t,e),Lp(e,r,null,n);var a=e.memoizedState;if(r=a.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=xc(Error(qe(423)),e),e=F5(t,e,r,n,i);break e}else if(r!==i){i=xc(Error(qe(424)),e),e=F5(t,e,r,n,i);break e}else for(_i=jo(e.stateNode.containerInfo.firstChild),Si=e,pn=!0,os=null,n=c4(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(_c(),r===i){e=Pa(t,e,n);break e}Kr(t,e,r,n)}e=e.child}return e;case 5:return f4(e),t===null&&e0(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,a=i.children,Q1(r,i)?a=null:s!==null&&Q1(r,s)&&(e.flags|=32),M4(t,e),Kr(t,e,a,n),e.child;case 6:return t===null&&e0(e),null;case 13:return U4(t,e,n);case 4:return Dv(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=wc(e,null,r,n):Kr(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:is(r,i),R5(t,e,r,i,n);case 7:return Kr(t,e,e.pendingProps,n),e.child;case 8:return Kr(t,e,e.pendingProps.children,n),e.child;case 12:return Kr(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,a=i.value,sn(Pp,r._currentValue),r._currentValue=a,s!==null)if(cs(s.value,a)){if(s.children===i.children&&!ai.current){e=Pa(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var o=s.dependencies;if(o!==null){a=s.child;for(var l=o.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=Na(-1,n&-n),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?l.next=l:(l.next=h.next,h.next=l),u.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),t0(s.return,n,e),o.lanes|=n;break}l=l.next}}else if(s.tag===10)a=s.type===e.type?null:s.child;else if(s.tag===18){if(a=s.return,a===null)throw Error(qe(341));a.lanes|=n,o=a.alternate,o!==null&&(o.lanes|=n),t0(a,n,e),a=s.sibling}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===e){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}Kr(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,oc(e,n),i=Bi(i),r=r(i),e.flags|=1,Kr(t,e,r,n),e.child;case 14:return r=e.type,i=is(r,e.pendingProps),i=is(r.type,i),j5(t,e,r,i,n);case 15:return F4(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:is(r,i),Xf(t,e),e.tag=1,oi(r)?(t=!0,kp(e)):t=!1,oc(e,n),R4(e,r,i),r0(e,r,i,n),a0(null,e,r,!0,t,n);case 19:return B4(t,e,n);case 22:return O4(t,e,n)}throw Error(qe(156,e.tag))};function r3(t,e){return Pb(t,e)}function X6(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mi(t,e,n,r){return new X6(t,e,n,r)}function Yv(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Z6(t){if(typeof t=="function")return Yv(t)?1:0;if(t!=null){if(t=t.$$typeof,t===mv)return 11;if(t===gv)return 14}return 2}function Mo(t,e){var n=t.alternate;return n===null?(n=Mi(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function tp(t,e,n,r,i,s){var a=2;if(r=t,typeof t=="function")Yv(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case qu:return Ml(n.children,i,s,e);case pv:a=8,i|=8;break;case k1:return t=Mi(12,n,e,i|2),t.elementType=k1,t.lanes=s,t;case I1:return t=Mi(13,n,e,i),t.elementType=I1,t.lanes=s,t;case T1:return t=Mi(19,n,e,i),t.elementType=T1,t.lanes=s,t;case fb:return Am(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case hb:a=10;break e;case db:a=9;break e;case mv:a=11;break e;case gv:a=14;break e;case vo:a=16,r=null;break e}throw Error(qe(130,t==null?t:typeof t,""))}return e=Mi(a,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Ml(t,e,n,r){return t=Mi(7,t,r,e),t.lanes=n,t}function Am(t,e,n,r){return t=Mi(22,t,r,e),t.elementType=fb,t.lanes=n,t.stateNode={isHidden:!1},t}function Jg(t,e,n){return t=Mi(6,t,null,e),t.lanes=n,t}function Xg(t,e,n){return e=Mi(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function ek(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Lg(0),this.expirationTimes=Lg(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Lg(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Jv(t,e,n,r,i,s,a,o,l){return t=new ek(t,e,n,o,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Mi(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},jv(s),t}function tk(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ku,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function i3(t){if(!t)return Ho;t=t._reactInternals;e:{if(eu(t)!==t||t.tag!==1)throw Error(qe(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(oi(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(qe(171))}if(t.tag===1){var n=t.type;if(oi(n))return i4(t,n,e)}return e}function s3(t,e,n,r,i,s,a,o,l){return t=Jv(n,r,!0,t,i,s,a,o,l),t.context=i3(null),n=t.current,r=qr(),i=Oo(n),s=Na(r,i),s.callback=e??null,Do(n,s,i),t.current.lanes=i,Ed(t,i,r),li(t,r),t}function Em(t,e,n,r){var i=e.current,s=qr(),a=Oo(i);return n=i3(n),e.context===null?e.context=n:e.pendingContext=n,e=Na(s,a),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Do(i,e,a),t!==null&&(us(t,i,a,s),Qf(t,i,a)),a}function Up(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function $5(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Xv(t,e){$5(t,e),(t=t.alternate)&&$5(t,e)}function nk(){return null}var a3=typeof reportError=="function"?reportError:function(t){console.error(t)};function Zv(t){this._internalRoot=t}km.prototype.render=Zv.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(qe(409));Em(t,e,null,null)};km.prototype.unmount=Zv.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;$l(function(){Em(null,t,null,null)}),e[Ia]=null}};function km(t){this._internalRoot=t}km.prototype.unstable_scheduleHydration=function(t){if(t){var e=Ob();t={blockedOn:null,target:t,priority:e};for(var n=0;n<_o.length&&e!==0&&e<_o[n].priority;n++);_o.splice(n,0,t),n===0&&Vb(t)}};function e2(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Im(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function W5(){}function rk(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=Up(a);s.call(u)}}var a=s3(e,r,t,0,null,!1,!1,"",W5);return t._reactRootContainer=a,t[Ia]=a.current,rd(t.nodeType===8?t.parentNode:t),$l(),a}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var o=r;r=function(){var u=Up(l);o.call(u)}}var l=Jv(t,0,!1,null,null,!1,!1,"",W5);return t._reactRootContainer=l,t[Ia]=l.current,rd(t.nodeType===8?t.parentNode:t),$l(function(){Em(e,l,n,r)}),l}function Tm(t,e,n,r,i){var s=n._reactRootContainer;if(s){var a=s;if(typeof i=="function"){var o=i;i=function(){var l=Up(a);o.call(l)}}Em(e,a,t,i)}else a=rk(n,e,t,i,r);return Up(a)}Db=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Ah(e.pendingLanes);n!==0&&(_v(e,n|1),li(e,jn()),!(Vt&6)&&(Sc=jn()+500,tl()))}break;case 13:$l(function(){var r=Ta(t,1);if(r!==null){var i=qr();us(r,t,1,i)}}),Xv(t,1)}};wv=function(t){if(t.tag===13){var e=Ta(t,134217728);if(e!==null){var n=qr();us(e,t,134217728,n)}Xv(t,134217728)}};Fb=function(t){if(t.tag===13){var e=Oo(t),n=Ta(t,e);if(n!==null){var r=qr();us(n,t,e,r)}Xv(t,e)}};Ob=function(){return Qt};Mb=function(t,e){var n=Qt;try{return Qt=t,e()}finally{Qt=n}};V1=function(t,e,n){switch(e){case"input":if(L1(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=_m(r);if(!i)throw Error(qe(90));mb(r),L1(r,i)}}}break;case"textarea":vb(t,n);break;case"select":e=n.value,e!=null&&rc(t,!!n.multiple,e,!1)}};Nb=Wv;Ab=$l;var ik={usingClientEntryPoint:!1,Events:[Id,Wu,_m,xb,Sb,Wv]},yh={findFiberByHostInstance:Ll,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},sk={bundleType:yh.bundleType,version:yh.version,rendererPackageName:yh.rendererPackageName,rendererConfig:yh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Da.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Ib(t),t===null?null:t.stateNode},findFiberByHostInstance:yh.findFiberByHostInstance||nk,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Cf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Cf.isDisabled&&Cf.supportsFiber)try{mm=Cf.inject(sk),Vs=Cf}catch{}}Ai.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ik;Ai.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!e2(e))throw Error(qe(200));return tk(t,e,null,n)};Ai.createRoot=function(t,e){if(!e2(t))throw Error(qe(299));var n=!1,r="",i=a3;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Jv(t,1,!1,null,null,n,!1,r,i),t[Ia]=e.current,rd(t.nodeType===8?t.parentNode:t),new Zv(e)};Ai.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(qe(188)):(t=Object.keys(t).join(","),Error(qe(268,t)));return t=Ib(e),t=t===null?null:t.stateNode,t};Ai.flushSync=function(t){return $l(t)};Ai.hydrate=function(t,e,n){if(!Im(e))throw Error(qe(200));return Tm(null,t,e,!0,n)};Ai.hydrateRoot=function(t,e,n){if(!e2(t))throw Error(qe(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",a=a3;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=s3(e,null,t,1,n??null,i,!1,s,a),t[Ia]=e.current,rd(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new km(e)};Ai.render=function(t,e,n){if(!Im(e))throw Error(qe(200));return Tm(null,t,e,!1,n)};Ai.unmountComponentAtNode=function(t){if(!Im(t))throw Error(qe(40));return t._reactRootContainer?($l(function(){Tm(null,null,t,!1,function(){t._reactRootContainer=null,t[Ia]=null})}),!0):!1};Ai.unstable_batchedUpdates=Wv;Ai.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Im(n))throw Error(qe(200));if(t==null||t._reactInternals===void 0)throw Error(qe(38));return Tm(t,e,n,!1,r)};Ai.version="18.3.1-next-f1338f8080-20240426";function o3(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(o3)}catch(t){console.error(t)}}o3(),ob.exports=Ai;var ak=ob.exports,G5=ak;A1.createRoot=G5.createRoot,A1.hydrateRoot=G5.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function dd(){return dd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},dd.apply(this,arguments)}var Io;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Io||(Io={}));const Q5="popstate";function ok(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:a,hash:o}=r.location;return y0("",{pathname:s,search:a,hash:o},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:Bp(i)}return uk(e,n,null,t)}function vn(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function l3(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function lk(){return Math.random().toString(36).substr(2,8)}function Y5(t,e){return{usr:t.state,key:t.key,idx:e}}function y0(t,e,n,r){return n===void 0&&(n=null),dd({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Fc(e):e,{state:n,key:e&&e.key||r||lk()})}function Bp(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Fc(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function uk(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,a=i.history,o=Io.Pop,l=null,u=h();u==null&&(u=0,a.replaceState(dd({},a.state,{idx:u}),""));function h(){return(a.state||{idx:null}).idx}function p(){o=Io.Pop;let k=h(),_=k==null?null:k-u;u=k,l&&l({action:o,location:x.location,delta:_})}function g(k,_){o=Io.Push;let A=y0(x.location,k,_);u=h()+1;let C=Y5(A,u),F=x.createHref(A);try{a.pushState(C,"",F)}catch(Y){if(Y instanceof DOMException&&Y.name==="DataCloneError")throw Y;i.location.assign(F)}s&&l&&l({action:o,location:x.location,delta:1})}function m(k,_){o=Io.Replace;let A=y0(x.location,k,_);u=h();let C=Y5(A,u),F=x.createHref(A);a.replaceState(C,"",F),s&&l&&l({action:o,location:x.location,delta:0})}function b(k){let _=i.location.origin!=="null"?i.location.origin:i.location.href,A=typeof k=="string"?k:Bp(k);return A=A.replace(/ $/,"%20"),vn(_,"No window.location.(origin|href) available to create URL for href: "+A),new URL(A,_)}let x={get action(){return o},get location(){return t(i,a)},listen(k){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(Q5,p),l=k,()=>{i.removeEventListener(Q5,p),l=null}},createHref(k){return e(i,k)},createURL:b,encodeLocation(k){let _=b(k);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:g,replace:m,go(k){return a.go(k)}};return x}var J5;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(J5||(J5={}));function ck(t,e,n){return n===void 0&&(n="/"),hk(t,e,n)}function hk(t,e,n,r){let i=typeof e=="string"?Fc(e):e,s=Nc(i.pathname||"/",n);if(s==null)return null;let a=u3(t);dk(a);let o=null;for(let l=0;o==null&&l<a.length;++l){let u=Sk(s);o=bk(a[l],u)}return o}function u3(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,a,o)=>{let l={relativePath:o===void 0?s.path||"":o,caseSensitive:s.caseSensitive===!0,childrenIndex:a,route:s};l.relativePath.startsWith("/")&&(vn(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let u=Vo([r,l.relativePath]),h=n.concat(l);s.children&&s.children.length>0&&(vn(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),u3(s.children,e,h,u)),!(s.path==null&&!s.index)&&e.push({path:u,score:_k(u,s.index),routesMeta:h})};return t.forEach((s,a)=>{var o;if(s.path===""||!((o=s.path)!=null&&o.includes("?")))i(s,a);else for(let l of c3(s.path))i(s,a,l)}),e}function c3(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let a=c3(r.join("/")),o=[];return o.push(...a.map(l=>l===""?s:[s,l].join("/"))),i&&o.push(...a),o.map(l=>t.startsWith("/")&&l===""?"/":l)}function dk(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:wk(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const fk=/^:[\w-]+$/,pk=3,mk=2,gk=1,vk=10,yk=-2,X5=t=>t==="*";function _k(t,e){let n=t.split("/"),r=n.length;return n.some(X5)&&(r+=yk),e&&(r+=mk),n.filter(i=>!X5(i)).reduce((i,s)=>i+(fk.test(s)?pk:s===""?gk:vk),r)}function wk(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function bk(t,e,n){let{routesMeta:r}=t,i={},s="/",a=[];for(let o=0;o<r.length;++o){let l=r[o],u=o===r.length-1,h=s==="/"?e:e.slice(s.length)||"/",p=_0({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},h),g=l.route;if(!p)return null;Object.assign(i,p.params),a.push({params:i,pathname:Vo([s,p.pathname]),pathnameBase:kk(Vo([s,p.pathnameBase])),route:g}),p.pathnameBase!=="/"&&(s=Vo([s,p.pathnameBase]))}return a}function _0(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=xk(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],a=s.replace(/(.)\/+$/,"$1"),o=i.slice(1);return{params:r.reduce((u,h,p)=>{let{paramName:g,isOptional:m}=h;if(g==="*"){let x=o[p]||"";a=s.slice(0,s.length-x.length).replace(/(.)\/+$/,"$1")}const b=o[p];return m&&!b?u[g]=void 0:u[g]=(b||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:a,pattern:t}}function xk(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),l3(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,o,l)=>(r.push({paramName:o,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function Sk(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return l3(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Nc(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function Nk(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?Fc(t):t;return{pathname:n?n.startsWith("/")?n:Ak(n,e):e,search:Ik(r),hash:Tk(i)}}function Ak(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Zg(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Ek(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function t2(t,e){let n=Ek(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function n2(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=Fc(t):(i=dd({},t),vn(!i.pathname||!i.pathname.includes("?"),Zg("?","pathname","search",i)),vn(!i.pathname||!i.pathname.includes("#"),Zg("#","pathname","hash",i)),vn(!i.search||!i.search.includes("#"),Zg("#","search","hash",i)));let s=t===""||i.pathname==="",a=s?"/":i.pathname,o;if(a==null)o=n;else{let p=e.length-1;if(!r&&a.startsWith("..")){let g=a.split("/");for(;g[0]==="..";)g.shift(),p-=1;i.pathname=g.join("/")}o=p>=0?e[p]:"/"}let l=Nk(i,o),u=a&&a!=="/"&&a.endsWith("/"),h=(s||a===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(u||h)&&(l.pathname+="/"),l}const Vo=t=>t.join("/").replace(/\/\/+/g,"/"),kk=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Ik=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Tk=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Pk(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const h3=["post","put","patch","delete"];new Set(h3);const Ck=["get",...h3];new Set(Ck);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function fd(){return fd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},fd.apply(this,arguments)}const Pm=oe.createContext(null),d3=oe.createContext(null),Fa=oe.createContext(null),Cm=oe.createContext(null),Gs=oe.createContext({outlet:null,matches:[],isDataRoute:!1}),f3=oe.createContext(null);function Lk(t,e){let{relative:n}=e===void 0?{}:e;Oc()||vn(!1);let{basename:r,navigator:i}=oe.useContext(Fa),{hash:s,pathname:a,search:o}=Lm(t,{relative:n}),l=a;return r!=="/"&&(l=a==="/"?r:Vo([r,a])),i.createHref({pathname:l,search:o,hash:s})}function Oc(){return oe.useContext(Cm)!=null}function Mc(){return Oc()||vn(!1),oe.useContext(Cm).location}function p3(t){oe.useContext(Fa).static||oe.useLayoutEffect(t)}function Vc(){let{isDataRoute:t}=oe.useContext(Gs);return t?Gk():Rk()}function Rk(){Oc()||vn(!1);let t=oe.useContext(Pm),{basename:e,future:n,navigator:r}=oe.useContext(Fa),{matches:i}=oe.useContext(Gs),{pathname:s}=Mc(),a=JSON.stringify(t2(i,n.v7_relativeSplatPath)),o=oe.useRef(!1);return p3(()=>{o.current=!0}),oe.useCallback(function(u,h){if(h===void 0&&(h={}),!o.current)return;if(typeof u=="number"){r.go(u);return}let p=n2(u,JSON.parse(a),s,h.relative==="path");t==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:Vo([e,p.pathname])),(h.replace?r.replace:r.push)(p,h.state,h)},[e,r,a,s,t])}const jk=oe.createContext(null);function Dk(t){let e=oe.useContext(Gs).outlet;return e&&oe.createElement(jk.Provider,{value:t},e)}function Fk(){let{matches:t}=oe.useContext(Gs),e=t[t.length-1];return e?e.params:{}}function Lm(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=oe.useContext(Fa),{matches:i}=oe.useContext(Gs),{pathname:s}=Mc(),a=JSON.stringify(t2(i,r.v7_relativeSplatPath));return oe.useMemo(()=>n2(t,JSON.parse(a),s,n==="path"),[t,a,s,n])}function Ok(t,e){return Mk(t,e)}function Mk(t,e,n,r){Oc()||vn(!1);let{navigator:i}=oe.useContext(Fa),{matches:s}=oe.useContext(Gs),a=s[s.length-1],o=a?a.params:{};a&&a.pathname;let l=a?a.pathnameBase:"/";a&&a.route;let u=Mc(),h;if(e){var p;let k=typeof e=="string"?Fc(e):e;l==="/"||(p=k.pathname)!=null&&p.startsWith(l)||vn(!1),h=k}else h=u;let g=h.pathname||"/",m=g;if(l!=="/"){let k=l.replace(/^\//,"").split("/");m="/"+g.replace(/^\//,"").split("/").slice(k.length).join("/")}let b=ck(t,{pathname:m}),x=qk(b&&b.map(k=>Object.assign({},k,{params:Object.assign({},o,k.params),pathname:Vo([l,i.encodeLocation?i.encodeLocation(k.pathname).pathname:k.pathname]),pathnameBase:k.pathnameBase==="/"?l:Vo([l,i.encodeLocation?i.encodeLocation(k.pathnameBase).pathname:k.pathnameBase])})),s,n,r);return e&&x?oe.createElement(Cm.Provider,{value:{location:fd({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:Io.Pop}},x):x}function Vk(){let t=Wk(),e=Pk(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return oe.createElement(oe.Fragment,null,oe.createElement("h2",null,"Unexpected Application Error!"),oe.createElement("h3",{style:{fontStyle:"italic"}},e),n?oe.createElement("pre",{style:i},n):null,null)}const Uk=oe.createElement(Vk,null);class Bk extends oe.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?oe.createElement(Gs.Provider,{value:this.props.routeContext},oe.createElement(f3.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Kk(t){let{routeContext:e,match:n,children:r}=t,i=oe.useContext(Pm);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),oe.createElement(Gs.Provider,{value:e},r)}function qk(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let a=t,o=(i=n)==null?void 0:i.errors;if(o!=null){let h=a.findIndex(p=>p.route.id&&(o==null?void 0:o[p.route.id])!==void 0);h>=0||vn(!1),a=a.slice(0,Math.min(a.length,h+1))}let l=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let h=0;h<a.length;h++){let p=a[h];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(u=h),p.route.id){let{loaderData:g,errors:m}=n,b=p.route.loader&&g[p.route.id]===void 0&&(!m||m[p.route.id]===void 0);if(p.route.lazy||b){l=!0,u>=0?a=a.slice(0,u+1):a=[a[0]];break}}}return a.reduceRight((h,p,g)=>{let m,b=!1,x=null,k=null;n&&(m=o&&p.route.id?o[p.route.id]:void 0,x=p.route.errorElement||Uk,l&&(u<0&&g===0?(Qk("route-fallback"),b=!0,k=null):u===g&&(b=!0,k=p.route.hydrateFallbackElement||null)));let _=e.concat(a.slice(0,g+1)),A=()=>{let C;return m?C=x:b?C=k:p.route.Component?C=oe.createElement(p.route.Component,null):p.route.element?C=p.route.element:C=h,oe.createElement(Kk,{match:p,routeContext:{outlet:h,matches:_,isDataRoute:n!=null},children:C})};return n&&(p.route.ErrorBoundary||p.route.errorElement||g===0)?oe.createElement(Bk,{location:n.location,revalidation:n.revalidation,component:x,error:m,children:A(),routeContext:{outlet:null,matches:_,isDataRoute:!0}}):A()},null)}var m3=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(m3||{}),g3=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(g3||{});function zk(t){let e=oe.useContext(Pm);return e||vn(!1),e}function Hk(t){let e=oe.useContext(d3);return e||vn(!1),e}function $k(t){let e=oe.useContext(Gs);return e||vn(!1),e}function v3(t){let e=$k(),n=e.matches[e.matches.length-1];return n.route.id||vn(!1),n.route.id}function Wk(){var t;let e=oe.useContext(f3),n=Hk(),r=v3();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function Gk(){let{router:t}=zk(m3.UseNavigateStable),e=v3(g3.UseNavigateStable),n=oe.useRef(!1);return p3(()=>{n.current=!0}),oe.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,fd({fromRouteId:e},s)))},[t,e])}const Z5={};function Qk(t,e,n){Z5[t]||(Z5[t]=!0)}function Yk(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function w0(t){let{to:e,replace:n,state:r,relative:i}=t;Oc()||vn(!1);let{future:s,static:a}=oe.useContext(Fa),{matches:o}=oe.useContext(Gs),{pathname:l}=Mc(),u=Vc(),h=n2(e,t2(o,s.v7_relativeSplatPath),l,i==="path"),p=JSON.stringify(h);return oe.useEffect(()=>u(JSON.parse(p),{replace:n,state:r,relative:i}),[u,p,i,n,r]),null}function Jk(t){return Dk(t.context)}function Ls(t){vn(!1)}function Xk(t){let{basename:e="/",children:n=null,location:r,navigationType:i=Io.Pop,navigator:s,static:a=!1,future:o}=t;Oc()&&vn(!1);let l=e.replace(/^\/*/,"/"),u=oe.useMemo(()=>({basename:l,navigator:s,static:a,future:fd({v7_relativeSplatPath:!1},o)}),[l,o,s,a]);typeof r=="string"&&(r=Fc(r));let{pathname:h="/",search:p="",hash:g="",state:m=null,key:b="default"}=r,x=oe.useMemo(()=>{let k=Nc(h,l);return k==null?null:{location:{pathname:k,search:p,hash:g,state:m,key:b},navigationType:i}},[l,h,p,g,m,b,i]);return x==null?null:oe.createElement(Fa.Provider,{value:u},oe.createElement(Cm.Provider,{children:n,value:x}))}function Zk(t){let{children:e,location:n}=t;return Ok(b0(e),n)}new Promise(()=>{});function b0(t,e){e===void 0&&(e=[]);let n=[];return oe.Children.forEach(t,(r,i)=>{if(!oe.isValidElement(r))return;let s=[...e,i];if(r.type===oe.Fragment){n.push.apply(n,b0(r.props.children,s));return}r.type!==Ls&&vn(!1),!r.props.index||!r.props.children||vn(!1);let a={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=b0(r.props.children,s)),n.push(a)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Kp(){return Kp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Kp.apply(this,arguments)}function y3(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function eI(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function tI(t,e){return t.button===0&&(!e||e==="_self")&&!eI(t)}const nI=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],rI=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],iI="6";try{window.__reactRouterVersion=iI}catch{}const sI=oe.createContext({isTransitioning:!1}),aI="startTransition",e_=QA[aI];function oI(t){let{basename:e,children:n,future:r,window:i}=t,s=oe.useRef();s.current==null&&(s.current=ok({window:i,v5Compat:!0}));let a=s.current,[o,l]=oe.useState({action:a.action,location:a.location}),{v7_startTransition:u}=r||{},h=oe.useCallback(p=>{u&&e_?e_(()=>l(p)):l(p)},[l,u]);return oe.useLayoutEffect(()=>a.listen(h),[a,h]),oe.useEffect(()=>Yk(r),[r]),oe.createElement(Xk,{basename:e,children:n,location:o.location,navigationType:o.action,navigator:a,future:r})}const lI=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",uI=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,cI=oe.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:a,state:o,target:l,to:u,preventScrollReset:h,viewTransition:p}=e,g=y3(e,nI),{basename:m}=oe.useContext(Fa),b,x=!1;if(typeof u=="string"&&uI.test(u)&&(b=u,lI))try{let C=new URL(window.location.href),F=u.startsWith("//")?new URL(C.protocol+u):new URL(u),Y=Nc(F.pathname,m);F.origin===C.origin&&Y!=null?u=Y+F.search+F.hash:x=!0}catch{}let k=Lk(u,{relative:i}),_=dI(u,{replace:a,state:o,target:l,preventScrollReset:h,relative:i,viewTransition:p});function A(C){r&&r(C),C.defaultPrevented||_(C)}return oe.createElement("a",Kp({},g,{href:b||k,onClick:x||s?r:A,ref:n,target:l}))}),Lf=oe.forwardRef(function(e,n){let{"aria-current":r="page",caseSensitive:i=!1,className:s="",end:a=!1,style:o,to:l,viewTransition:u,children:h}=e,p=y3(e,rI),g=Lm(l,{relative:p.relative}),m=Mc(),b=oe.useContext(d3),{navigator:x,basename:k}=oe.useContext(Fa),_=b!=null&&fI(g)&&u===!0,A=x.encodeLocation?x.encodeLocation(g).pathname:g.pathname,C=m.pathname,F=b&&b.navigation&&b.navigation.location?b.navigation.location.pathname:null;i||(C=C.toLowerCase(),F=F?F.toLowerCase():null,A=A.toLowerCase()),F&&k&&(F=Nc(F,k)||F);const Y=A!=="/"&&A.endsWith("/")?A.length-1:A.length;let B=C===A||!a&&C.startsWith(A)&&C.charAt(Y)==="/",L=F!=null&&(F===A||!a&&F.startsWith(A)&&F.charAt(A.length)==="/"),y={isActive:B,isPending:L,isTransitioning:_},S=B?r:void 0,R;typeof s=="function"?R=s(y):R=[s,B?"active":null,L?"pending":null,_?"transitioning":null].filter(Boolean).join(" ");let E=typeof o=="function"?o(y):o;return oe.createElement(cI,Kp({},p,{"aria-current":S,className:R,ref:n,style:E,to:l,viewTransition:u}),typeof h=="function"?h(y):h)});var x0;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(x0||(x0={}));var t_;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(t_||(t_={}));function hI(t){let e=oe.useContext(Pm);return e||vn(!1),e}function dI(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:a,viewTransition:o}=e===void 0?{}:e,l=Vc(),u=Mc(),h=Lm(t,{relative:a});return oe.useCallback(p=>{if(tI(p,n)){p.preventDefault();let g=r!==void 0?r:Bp(u)===Bp(h);l(t,{replace:g,state:i,preventScrollReset:s,relative:a,viewTransition:o})}},[u,l,h,r,i,n,t,s,a,o])}function fI(t,e){e===void 0&&(e={});let n=oe.useContext(sI);n==null&&vn(!1);let{basename:r}=hI(x0.useViewTransitionState),i=Lm(t,{relative:e.relative});if(!n.isTransitioning)return!1;let s=Nc(n.currentLocation.pathname,r)||n.currentLocation.pathname,a=Nc(n.nextLocation.pathname,r)||n.nextLocation.pathname;return _0(i.pathname,a)!=null||_0(i.pathname,s)!=null}const _3=oe.createContext(),ps=()=>{const t=oe.useContext(_3);if(!t)throw new Error("useNotification must be used within NotificationProvider");return t},pI=({children:t})=>{const[e,n]=oe.useState([]),[r,i]=oe.useState(null),[s,a]=oe.useState(null),o=oe.useCallback((k,_="info")=>{const A=Date.now()+Math.random(),C={id:A,message:k,type:_};return n(F=>[...F,C]),setTimeout(()=>{l(A)},4e3),A},[]),l=oe.useCallback(k=>{n(_=>_.filter(A=>A.id!==k))},[]),u=oe.useCallback(k=>o(k,"success"),[o]),h=oe.useCallback(k=>o(k,"error"),[o]),p=oe.useCallback(k=>o(k,"info"),[o]),g=oe.useCallback(k=>o(k,"warning"),[o]),m=oe.useCallback(k=>new Promise(_=>{i({...k,onConfirm:()=>{i(null),_(!0)},onCancel:()=>{i(null),_(!1)}})}),[]),b=oe.useCallback(k=>new Promise(_=>{a({...k,onConfirm:()=>{a(null),_(!0)},onCancel:()=>{a(null),_(!1)}})}),[]),x={toasts:e,showToast:o,removeToast:l,showSuccess:u,showError:h,showInfo:p,showWarning:g,showConfirm:m,confirmDialog:r,showCriticalConfirm:b,criticalConfirmDialog:s};return f.jsx(_3.Provider,{value:x,children:t})},mI=t=>{switch(t){case"success":return"";case"error":return"";case"warning":return"";case"info":default:return""}},gI=t=>{switch(t){case"success":return"toast-success";case"error":return"toast-error";case"warning":return"toast-warning";case"info":default:return"toast-info"}};function vI({toast:t,onRemove:e}){return oe.useEffect(()=>{const n=setTimeout(()=>{e(t.id)},4e3);return()=>clearTimeout(n)},[t.id,e]),f.jsxs("div",{className:`toast ${gI(t.type)}`,children:[f.jsx("div",{className:"toast-icon",children:mI(t.type)}),f.jsx("div",{className:"toast-message",children:t.message}),f.jsx("button",{className:"toast-close",onClick:()=>e(t.id),"aria-label":"Luk notifikation",children:""})]})}function yI(){const{toasts:t,removeToast:e}=ps();return f.jsx("div",{className:"toast-container",children:t.map(n=>f.jsx(vI,{toast:n,onRemove:e},n.id))})}function _I(){const{confirmDialog:t}=ps();if(!t)return null;const{title:e="Bekrft handling",message:n,confirmText:r="Bekrft",cancelText:i="Annuller",onConfirm:s,onCancel:a,type:o="danger"}=t;return f.jsx("div",{className:"confirm-overlay",children:f.jsxs("div",{className:"confirm-dialog",children:[f.jsx("div",{className:"confirm-header",children:f.jsx("h3",{children:e})}),f.jsx("div",{className:"confirm-body",children:f.jsx("p",{children:n})}),f.jsxs("div",{className:"confirm-footer",children:[f.jsx("button",{className:"btn-secondary",onClick:a,children:i}),f.jsx("button",{className:o==="danger"?"btn-danger":"btn-primary",onClick:s,children:r})]})]})})}function wI(){const{criticalConfirmDialog:t}=ps(),[e,n]=oe.useState(""),[r,i]=oe.useState(!1);if(oe.useEffect(()=>{n(""),i(!1)},[t]),!t)return null;const{title:s="Bekrft sletning",message:a,itemName:o,confirmText:l="Slet",cancelText:u="Annuller",onConfirm:h,onCancel:p,warningText:g}=t,m=()=>{e.toLowerCase()==="slet"?(i(!1),h()):i(!0)},b=x=>{x.key==="Enter"&&m()};return f.jsx("div",{className:"confirm-overlay",children:f.jsxs("div",{className:"critical-confirm-dialog",children:[f.jsxs("div",{className:"confirm-header critical-header",children:[f.jsx("div",{className:"critical-icon",children:""}),f.jsx("h3",{children:s})]}),f.jsxs("div",{className:"confirm-body",children:[f.jsx("p",{className:"critical-message",children:a}),o&&f.jsx("div",{className:"item-highlight",children:f.jsx("strong",{children:o})}),g&&f.jsxs("div",{className:"warning-box",children:[f.jsx("span",{className:"warning-icon",children:""}),f.jsx("span",{children:g})]}),f.jsxs("div",{className:"confirmation-input-section",children:[f.jsxs("label",{children:["Skriv ",f.jsx("strong",{children:'"Slet"'})," for at bekrfte:"]}),f.jsx("input",{type:"text",value:e,onChange:x=>{n(x.target.value),i(!1)},onKeyPress:b,placeholder:"Skriv Slet",className:r?"input-error":"",autoFocus:!0}),r&&f.jsx("span",{className:"error-text",children:'Du skal skrive "Slet" for at bekrfte'})]})]}),f.jsxs("div",{className:"confirm-footer",children:[f.jsx("button",{className:"btn-secondary",onClick:p,children:u}),f.jsx("button",{className:"btn-danger",onClick:m,disabled:!e,children:l})]})]})})}var n_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w3=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},bI=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],a=t[n++],o=t[n++],l=((i&7)<<18|(s&63)<<12|(a&63)<<6|o&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],a=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|a&63)}}return e.join("")},b3={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],a=i+1<t.length,o=a?t[i+1]:0,l=i+2<t.length,u=l?t[i+2]:0,h=s>>2,p=(s&3)<<4|o>>4;let g=(o&15)<<2|u>>6,m=u&63;l||(m=64,a||(g=64)),r.push(n[h],n[p],n[g],n[m])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(w3(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):bI(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],o=i<t.length?n[t.charAt(i)]:0;++i;const u=i<t.length?n[t.charAt(i)]:64;++i;const p=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||o==null||u==null||p==null)throw new xI;const g=s<<2|o>>4;if(r.push(g),u!==64){const m=o<<4&240|u>>2;if(r.push(m),p!==64){const b=u<<6&192|p;r.push(b)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class xI extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const SI=function(t){const e=w3(t);return b3.encodeByteArray(e,!0)},qp=function(t){return SI(t).replace(/\./g,"")},x3=function(t){try{return b3.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AI=()=>NI().__FIREBASE_DEFAULTS__,EI=()=>{if(typeof process>"u"||typeof n_>"u")return;const t=n_.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},kI=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&x3(t[1]);return e&&JSON.parse(e)},Rm=()=>{try{return AI()||EI()||kI()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},S3=t=>{var e,n;return(n=(e=Rm())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},N3=t=>{const e=S3(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},A3=()=>{var t;return(t=Rm())===null||t===void 0?void 0:t.config},E3=t=>{var e;return(e=Rm())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class II{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k3(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[qp(JSON.stringify(n)),qp(JSON.stringify(a)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function TI(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Rr())}function PI(){var t;const e=(t=Rm())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function CI(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function LI(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function RI(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function jI(){const t=Rr();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function DI(){return!PI()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function FI(){try{return typeof indexedDB=="object"}catch{return!1}}function OI(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MI="FirebaseError";class Qs extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=MI,Object.setPrototypeOf(this,Qs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Pd.prototype.create)}}class Pd{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],a=s?VI(s,r):"Error",o=`${this.serviceName}: ${a} (${i}).`;return new Qs(i,o,r)}}function VI(t,e){return t.replace(UI,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const UI=/\{\$([^}]+)}/g;function BI(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function zp(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],a=e[i];if(r_(s)&&r_(a)){if(!zp(s,a))return!1}else if(s!==a)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function r_(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cd(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function kh(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function Ih(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function KI(t,e){const n=new qI(t,e);return n.subscribe.bind(n)}class qI{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");zI(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=e1),i.error===void 0&&(i.error=e1),i.complete===void 0&&(i.complete=e1);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function zI(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function e1(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _n(t){return t&&t._delegate?t._delegate:t}class $o{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Il="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HI{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new II;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(WI(e))try{this.getOrInitializeService({instanceIdentifier:Il})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Il){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Il){return this.instances.has(e)}getOptions(e=Il){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,a]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(s);r===o&&a.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const a=this.instances.get(i);return a&&e(a,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:$I(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Il){return this.component?this.component.multipleInstances?e:Il:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function $I(t){return t===Il?void 0:t}function WI(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GI{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new HI(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ft;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ft||(Ft={}));const QI={debug:Ft.DEBUG,verbose:Ft.VERBOSE,info:Ft.INFO,warn:Ft.WARN,error:Ft.ERROR,silent:Ft.SILENT},YI=Ft.INFO,JI={[Ft.DEBUG]:"log",[Ft.VERBOSE]:"log",[Ft.INFO]:"info",[Ft.WARN]:"warn",[Ft.ERROR]:"error"},XI=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=JI[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class r2{constructor(e){this.name=e,this._logLevel=YI,this._logHandler=XI,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ft))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?QI[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ft.DEBUG,...e),this._logHandler(this,Ft.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ft.VERBOSE,...e),this._logHandler(this,Ft.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ft.INFO,...e),this._logHandler(this,Ft.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ft.WARN,...e),this._logHandler(this,Ft.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ft.ERROR,...e),this._logHandler(this,Ft.ERROR,...e)}}const ZI=(t,e)=>e.some(n=>t instanceof n);let i_,s_;function eT(){return i_||(i_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function tT(){return s_||(s_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const I3=new WeakMap,S0=new WeakMap,T3=new WeakMap,t1=new WeakMap,i2=new WeakMap;function nT(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",a)},s=()=>{n(Uo(t.result)),i()},a=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&I3.set(n,t)}).catch(()=>{}),i2.set(e,t),e}function rT(t){if(S0.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",a),t.removeEventListener("abort",a)},s=()=>{n(),i()},a=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",a),t.addEventListener("abort",a)});S0.set(t,e)}let N0={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return S0.get(t);if(e==="objectStoreNames")return t.objectStoreNames||T3.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Uo(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function iT(t){N0=t(N0)}function sT(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(n1(this),e,...n);return T3.set(r,e.sort?e.sort():[e]),Uo(r)}:tT().includes(t)?function(...e){return t.apply(n1(this),e),Uo(I3.get(this))}:function(...e){return Uo(t.apply(n1(this),e))}}function aT(t){return typeof t=="function"?sT(t):(t instanceof IDBTransaction&&rT(t),ZI(t,eT())?new Proxy(t,N0):t)}function Uo(t){if(t instanceof IDBRequest)return nT(t);if(t1.has(t))return t1.get(t);const e=aT(t);return e!==t&&(t1.set(t,e),i2.set(e,t)),e}const n1=t=>i2.get(t);function oT(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const a=indexedDB.open(t,e),o=Uo(a);return r&&a.addEventListener("upgradeneeded",l=>{r(Uo(a.result),l.oldVersion,l.newVersion,Uo(a.transaction),l)}),n&&a.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),o.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),o}const lT=["get","getKey","getAll","getAllKeys","count"],uT=["put","add","delete","clear"],r1=new Map;function a_(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(r1.get(e))return r1.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=uT.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||lT.includes(n)))return;const s=async function(a,...o){const l=this.transaction(a,i?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(o.shift())),(await Promise.all([u[n](...o),i&&l.done]))[0]};return r1.set(e,s),s}iT(t=>({...t,get:(e,n,r)=>a_(e,n)||t.get(e,n,r),has:(e,n)=>!!a_(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cT{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(hT(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function hT(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const A0="@firebase/app",o_="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ca=new r2("@firebase/app"),dT="@firebase/app-compat",fT="@firebase/analytics-compat",pT="@firebase/analytics",mT="@firebase/app-check-compat",gT="@firebase/app-check",vT="@firebase/auth",yT="@firebase/auth-compat",_T="@firebase/database",wT="@firebase/data-connect",bT="@firebase/database-compat",xT="@firebase/functions",ST="@firebase/functions-compat",NT="@firebase/installations",AT="@firebase/installations-compat",ET="@firebase/messaging",kT="@firebase/messaging-compat",IT="@firebase/performance",TT="@firebase/performance-compat",PT="@firebase/remote-config",CT="@firebase/remote-config-compat",LT="@firebase/storage",RT="@firebase/storage-compat",jT="@firebase/firestore",DT="@firebase/vertexai-preview",FT="@firebase/firestore-compat",OT="firebase",MT="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E0="[DEFAULT]",VT={[A0]:"fire-core",[dT]:"fire-core-compat",[pT]:"fire-analytics",[fT]:"fire-analytics-compat",[gT]:"fire-app-check",[mT]:"fire-app-check-compat",[vT]:"fire-auth",[yT]:"fire-auth-compat",[_T]:"fire-rtdb",[wT]:"fire-data-connect",[bT]:"fire-rtdb-compat",[xT]:"fire-fn",[ST]:"fire-fn-compat",[NT]:"fire-iid",[AT]:"fire-iid-compat",[ET]:"fire-fcm",[kT]:"fire-fcm-compat",[IT]:"fire-perf",[TT]:"fire-perf-compat",[PT]:"fire-rc",[CT]:"fire-rc-compat",[LT]:"fire-gcs",[RT]:"fire-gcs-compat",[jT]:"fire-fst",[FT]:"fire-fst-compat",[DT]:"fire-vertex","fire-js":"fire-js",[OT]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hp=new Map,UT=new Map,k0=new Map;function l_(t,e){try{t.container.addComponent(e)}catch(n){Ca.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Wl(t){const e=t.name;if(k0.has(e))return Ca.debug(`There were multiple attempts to register component ${e}.`),!1;k0.set(e,t);for(const n of Hp.values())l_(n,t);for(const n of UT.values())l_(n,t);return!0}function jm(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function wa(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BT={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Bo=new Pd("app","Firebase",BT);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KT{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new $o("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Bo.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tu=MT;function P3(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:E0,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Bo.create("bad-app-name",{appName:String(i)});if(n||(n=A3()),!n)throw Bo.create("no-options");const s=Hp.get(i);if(s){if(zp(n,s.options)&&zp(r,s.config))return s;throw Bo.create("duplicate-app",{appName:i})}const a=new GI(i);for(const l of k0.values())a.addComponent(l);const o=new KT(n,r,a);return Hp.set(i,o),o}function s2(t=E0){const e=Hp.get(t);if(!e&&t===E0&&A3())return P3();if(!e)throw Bo.create("no-app",{appName:t});return e}function Bs(t,e,n){var r;let i=(r=VT[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),a=e.match(/\s|\//);if(s||a){const o=[`Unable to register library "${i}" with version "${e}":`];s&&o.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&a&&o.push("and"),a&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ca.warn(o.join(" "));return}Wl(new $o(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qT="firebase-heartbeat-database",zT=1,pd="firebase-heartbeat-store";let i1=null;function C3(){return i1||(i1=oT(qT,zT,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(pd)}catch(n){console.warn(n)}}}}).catch(t=>{throw Bo.create("idb-open",{originalErrorMessage:t.message})})),i1}async function HT(t){try{const n=(await C3()).transaction(pd),r=await n.objectStore(pd).get(L3(t));return await n.done,r}catch(e){if(e instanceof Qs)Ca.warn(e.message);else{const n=Bo.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ca.warn(n.message)}}}async function u_(t,e){try{const r=(await C3()).transaction(pd,"readwrite");await r.objectStore(pd).put(e,L3(t)),await r.done}catch(n){if(n instanceof Qs)Ca.warn(n.message);else{const r=Bo.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ca.warn(r.message)}}}function L3(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $T=1024,WT=30*24*60*60*1e3;class GT{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new YT(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=c_();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(a=>a.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(a=>{const o=new Date(a.date).valueOf();return Date.now()-o<=WT}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Ca.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=c_(),{heartbeatsToSend:r,unsentEntries:i}=QT(this._heartbeatsCache.heartbeats),s=qp(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Ca.warn(n),""}}}function c_(){return new Date().toISOString().substring(0,10)}function QT(t,e=$T){const n=[];let r=t.slice();for(const i of t){const s=n.find(a=>a.agent===i.agent);if(s){if(s.dates.push(i.date),h_(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),h_(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class YT{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return FI()?OI().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await HT(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return u_(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return u_(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function h_(t){return qp(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JT(t){Wl(new $o("platform-logger",e=>new cT(e),"PRIVATE")),Wl(new $o("heartbeat",e=>new GT(e),"PRIVATE")),Bs(A0,o_,t),Bs(A0,o_,"esm2017"),Bs("fire-js","")}JT("");function a2(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function R3(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const XT=R3,j3=new Pd("auth","Firebase",R3());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $p=new r2("@firebase/auth");function ZT(t,...e){$p.logLevel<=Ft.WARN&&$p.warn(`Auth (${tu}): ${t}`,...e)}function np(t,...e){$p.logLevel<=Ft.ERROR&&$p.error(`Auth (${tu}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hs(t,...e){throw o2(t,...e)}function Ks(t,...e){return o2(t,...e)}function D3(t,e,n){const r=Object.assign(Object.assign({},XT()),{[e]:n});return new Pd("auth","Firebase",r).create(e,{appName:t.name})}function Ko(t){return D3(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function o2(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return j3.create(t,...e)}function _t(t,e,...n){if(!t)throw o2(e,...n)}function ba(t){const e="INTERNAL ASSERTION FAILED: "+t;throw np(e),new Error(e)}function La(t,e){t||ba(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I0(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function eP(){return d_()==="http:"||d_()==="https:"}function d_(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tP(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(eP()||LI()||"connection"in navigator)?navigator.onLine:!0}function nP(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ld{constructor(e,n){this.shortDelay=e,this.longDelay=n,La(n>e,"Short delay should be less than long delay!"),this.isMobile=TI()||RI()}get(){return tP()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l2(t,e){La(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F3{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ba("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ba("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ba("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rP={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iP=new Ld(3e4,6e4);function nu(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function nl(t,e,n,r,i={}){return O3(t,i,async()=>{let s={},a={};r&&(e==="GET"?a=r:s={body:JSON.stringify(r)});const o=Cd(Object.assign({key:t.config.apiKey},a)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const u=Object.assign({method:e,headers:l},s);return CI()||(u.referrerPolicy="no-referrer"),F3.fetch()(M3(t,t.config.apiHost,n,o),u)})}async function O3(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},rP),e);try{const i=new aP(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const a=await s.json();if("needConfirmation"in a)throw Rf(t,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{const o=s.ok?a.errorMessage:a.error.message,[l,u]=o.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Rf(t,"credential-already-in-use",a);if(l==="EMAIL_EXISTS")throw Rf(t,"email-already-in-use",a);if(l==="USER_DISABLED")throw Rf(t,"user-disabled",a);const h=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw D3(t,h,u);hs(t,h)}}catch(i){if(i instanceof Qs)throw i;hs(t,"network-request-failed",{message:String(i)})}}async function Dm(t,e,n,r,i={}){const s=await nl(t,e,n,r,i);return"mfaPendingCredential"in s&&hs(t,"multi-factor-auth-required",{_serverResponse:s}),s}function M3(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?l2(t.config,i):`${t.config.apiScheme}://${i}`}function sP(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class aP{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Ks(this.auth,"network-request-failed")),iP.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Rf(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Ks(t,e,r);return i.customData._tokenResponse=n,i}function f_(t){return t!==void 0&&t.enterprise!==void 0}class oP{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return sP(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function lP(t,e){return nl(t,"GET","/v2/recaptchaConfig",nu(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uP(t,e){return nl(t,"POST","/v1/accounts:delete",e)}async function V3(t,e){return nl(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kh(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function cP(t,e=!1){const n=_n(t),r=await n.getIdToken(e),i=u2(r);_t(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,a=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Kh(s1(i.auth_time)),issuedAtTime:Kh(s1(i.iat)),expirationTime:Kh(s1(i.exp)),signInProvider:a||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function s1(t){return Number(t)*1e3}function u2(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return np("JWT malformed, contained fewer than 3 sections"),null;try{const i=x3(n);return i?JSON.parse(i):(np("Failed to decode base64 JWT payload"),null)}catch(i){return np("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function p_(t){const e=u2(t);return _t(e,"internal-error"),_t(typeof e.exp<"u","internal-error"),_t(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function md(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Qs&&hP(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function hP({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dP{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T0{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Kh(this.lastLoginAt),this.creationTime=Kh(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wp(t){var e;const n=t.auth,r=await t.getIdToken(),i=await md(t,V3(n,{idToken:r}));_t(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const a=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?U3(s.providerUserInfo):[],o=pP(t.providerData,a),l=t.isAnonymous,u=!(t.email&&s.passwordHash)&&!(o!=null&&o.length),h=l?u:!1,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new T0(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(t,p)}async function fP(t){const e=_n(t);await Wp(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function pP(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function U3(t){return t.map(e=>{var{providerId:n}=e,r=a2(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mP(t,e){const n=await O3(t,{},async()=>{const r=Cd({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,a=M3(t,i,"/v1/token",`key=${s}`),o=await t._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",F3.fetch()(a,{method:"POST",headers:o,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function gP(t,e){return nl(t,"POST","/v2/accounts:revokeToken",nu(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uc{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){_t(e.idToken,"internal-error"),_t(typeof e.idToken<"u","internal-error"),_t(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):p_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){_t(e.length!==0,"internal-error");const n=p_(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(_t(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await mP(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,a=new uc;return r&&(_t(typeof r=="string","internal-error",{appName:e}),a.refreshToken=r),i&&(_t(typeof i=="string","internal-error",{appName:e}),a.accessToken=i),s&&(_t(typeof s=="number","internal-error",{appName:e}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new uc,this.toJSON())}_performRefresh(){return ba("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function po(t,e){_t(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class xa{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=a2(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new dP(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new T0(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await md(this,this.stsTokenManager.getToken(this.auth,e));return _t(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return cP(this,e)}reload(){return fP(this)}_assign(e){this!==e&&(_t(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new xa(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){_t(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Wp(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(wa(this.auth.app))return Promise.reject(Ko(this.auth));const e=await this.getIdToken();return await md(this,uP(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,a,o,l,u,h;const p=(r=n.displayName)!==null&&r!==void 0?r:void 0,g=(i=n.email)!==null&&i!==void 0?i:void 0,m=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,b=(a=n.photoURL)!==null&&a!==void 0?a:void 0,x=(o=n.tenantId)!==null&&o!==void 0?o:void 0,k=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,_=(u=n.createdAt)!==null&&u!==void 0?u:void 0,A=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:C,emailVerified:F,isAnonymous:Y,providerData:B,stsTokenManager:L}=n;_t(C&&L,e,"internal-error");const y=uc.fromJSON(this.name,L);_t(typeof C=="string",e,"internal-error"),po(p,e.name),po(g,e.name),_t(typeof F=="boolean",e,"internal-error"),_t(typeof Y=="boolean",e,"internal-error"),po(m,e.name),po(b,e.name),po(x,e.name),po(k,e.name),po(_,e.name),po(A,e.name);const S=new xa({uid:C,auth:e,email:g,emailVerified:F,displayName:p,isAnonymous:Y,photoURL:b,phoneNumber:m,tenantId:x,stsTokenManager:y,createdAt:_,lastLoginAt:A});return B&&Array.isArray(B)&&(S.providerData=B.map(R=>Object.assign({},R))),k&&(S._redirectEventId=k),S}static async _fromIdTokenResponse(e,n,r=!1){const i=new uc;i.updateFromServerResponse(n);const s=new xa({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Wp(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];_t(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?U3(i.providerUserInfo):[],a=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),o=new uc;o.updateFromIdToken(r);const l=new xa({uid:i.localId,auth:e,stsTokenManager:o,isAnonymous:a}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new T0(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,u),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m_=new Map;function Sa(t){La(t instanceof Function,"Expected a class definition");let e=m_.get(t);return e?(La(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,m_.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B3{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}B3.type="NONE";const g_=B3;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rp(t,e,n){return`firebase:${t}:${e}:${n}`}class cc{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=rp(this.userKey,i.apiKey,s),this.fullPersistenceKey=rp("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?xa._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new cc(Sa(g_),e,r);const i=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=i[0]||Sa(g_);const a=rp(r,e.config.apiKey,e.name);let o=null;for(const u of n)try{const h=await u._get(a);if(h){const p=xa._fromJSON(e,h);u!==s&&(o=p),s=u;break}}catch{}const l=i.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new cc(s,e,r):(s=l[0],o&&await s._set(a,o.toJSON()),await Promise.all(n.map(async u=>{if(u!==s)try{await u._remove(a)}catch{}})),new cc(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v_(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(H3(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(K3(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(W3(e))return"Blackberry";if(G3(e))return"Webos";if(q3(e))return"Safari";if((e.includes("chrome/")||z3(e))&&!e.includes("edge/"))return"Chrome";if($3(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function K3(t=Rr()){return/firefox\//i.test(t)}function q3(t=Rr()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function z3(t=Rr()){return/crios\//i.test(t)}function H3(t=Rr()){return/iemobile/i.test(t)}function $3(t=Rr()){return/android/i.test(t)}function W3(t=Rr()){return/blackberry/i.test(t)}function G3(t=Rr()){return/webos/i.test(t)}function c2(t=Rr()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function vP(t=Rr()){var e;return c2(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function yP(){return jI()&&document.documentMode===10}function Q3(t=Rr()){return c2(t)||$3(t)||G3(t)||W3(t)||/windows phone/i.test(t)||H3(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y3(t,e=[]){let n;switch(t){case"Browser":n=v_(Rr());break;case"Worker":n=`${v_(Rr())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${tu}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _P{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((a,o)=>{try{const l=e(s);a(l)}catch(l){o(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wP(t,e={}){return nl(t,"GET","/v2/passwordPolicy",nu(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bP=6;class xP{constructor(e){var n,r,i,s;const a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=a.minPasswordLength)!==null&&n!==void 0?n:bP,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,a,o;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(a=l.containsNumericCharacter)!==null&&a!==void 0?a:!0),l.isValid&&(l.isValid=(o=l.containsNonAlphanumericCharacter)!==null&&o!==void 0?o:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SP{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new y_(this),this.idTokenSubscription=new y_(this),this.beforeStateQueue=new _P(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=j3,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Sa(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await cc.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await V3(this,{idToken:e}),r=await xa._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(wa(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(o,o))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,o=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!a||a===o)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(a){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return _t(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Wp(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=nP()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(wa(this.app))return Promise.reject(Ko(this));const n=e?_n(e):null;return n&&_t(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&_t(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return wa(this.app)?Promise.reject(Ko(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return wa(this.app)?Promise.reject(Ko(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Sa(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await wP(this),n=new xP(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Pd("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await gP(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Sa(e)||this._popupRedirectResolver;_t(n,this,"argument-error"),this.redirectPersistenceManager=await cc.create(this,[Sa(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let a=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(_t(o,this,"internal-error"),o.then(()=>{a||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{a=!0,l()}}else{const l=e.addObserver(n);return()=>{a=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return _t(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Y3(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&ZT(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Uc(t){return _n(t)}class y_{constructor(e){this.auth=e,this.observer=null,this.addObserver=KI(n=>this.observer=n)}get next(){return _t(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function NP(t){Fm=t}function J3(t){return Fm.loadJS(t)}function AP(){return Fm.recaptchaEnterpriseScript}function EP(){return Fm.gapiScript}function kP(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const IP="recaptcha-enterprise",TP="NO_RECAPTCHA";class PP{constructor(e){this.type=IP,this.auth=Uc(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(a,o)=>{lP(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)o(new Error("recaptcha Enterprise site key undefined"));else{const u=new oP(l);return s.tenantId==null?s._agentRecaptchaConfig=u:s._tenantRecaptchaConfigs[s.tenantId]=u,a(u.siteKey)}}).catch(l=>{o(l)})})}function i(s,a,o){const l=window.grecaptcha;f_(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(u=>{a(u)}).catch(()=>{a(TP)})}):o(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,a)=>{r(this.auth).then(o=>{if(!n&&f_(window.grecaptcha))i(o,s,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let l=AP();l.length!==0&&(l+=o),J3(l).then(()=>{i(o,s,a)}).catch(u=>{a(u)})}}).catch(o=>{a(o)})})}}async function __(t,e,n,r=!1){const i=new PP(t);let s;try{s=await i.verify(n)}catch{s=await i.verify(n,!0)}const a=Object.assign({},e);return r?Object.assign(a,{captchaResp:s}):Object.assign(a,{captchaResponse:s}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function w_(t,e,n,r){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await __(t,e,n,n==="getOobCode");return r(t,s)}else return r(t,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await __(t,e,n,n==="getOobCode");return r(t,a)}else return Promise.reject(s)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CP(t,e){const n=jm(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(zp(s,e??{}))return i;hs(i,"already-initialized")}return n.initialize({options:e})}function LP(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Sa);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function RP(t,e,n){const r=Uc(t);_t(r._canInitEmulator,r,"emulator-config-failed"),_t(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=X3(e),{host:a,port:o}=jP(e),l=o===null?"":`:${o}`;r.config.emulator={url:`${s}//${a}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:a,port:o,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),DP()}function X3(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function jP(t){const e=X3(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:b_(r.substr(s.length+1))}}else{const[s,a]=r.split(":");return{host:s,port:b_(a)}}}function b_(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function DP(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h2{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ba("not implemented")}_getIdTokenResponse(e){return ba("not implemented")}_linkToIdToken(e,n){return ba("not implemented")}_getReauthenticationResolver(e){return ba("not implemented")}}async function FP(t,e){return nl(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OP(t,e){return Dm(t,"POST","/v1/accounts:signInWithPassword",nu(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MP(t,e){return Dm(t,"POST","/v1/accounts:signInWithEmailLink",nu(t,e))}async function VP(t,e){return Dm(t,"POST","/v1/accounts:signInWithEmailLink",nu(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gd extends h2{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new gd(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new gd(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return w_(e,n,"signInWithPassword",OP);case"emailLink":return MP(e,{email:this._email,oobCode:this._password});default:hs(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return w_(e,r,"signUpPassword",FP);case"emailLink":return VP(e,{idToken:n,email:this._email,oobCode:this._password});default:hs(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hc(t,e){return Dm(t,"POST","/v1/accounts:signInWithIdp",nu(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UP="http://localhost";class Gl extends h2{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Gl(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):hs("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=a2(n,["providerId","signInMethod"]);if(!r||!i)return null;const a=new Gl(r,i);return a.idToken=s.idToken||void 0,a.accessToken=s.accessToken||void 0,a.secret=s.secret,a.nonce=s.nonce,a.pendingToken=s.pendingToken||null,a}_getIdTokenResponse(e){const n=this.buildRequest();return hc(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,hc(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,hc(e,n)}buildRequest(){const e={requestUri:UP,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Cd(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BP(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function KP(t){const e=kh(Ih(t)).link,n=e?kh(Ih(e)).deep_link_id:null,r=kh(Ih(t)).deep_link_id;return(r?kh(Ih(r)).link:null)||r||n||e||t}class d2{constructor(e){var n,r,i,s,a,o;const l=kh(Ih(e)),u=(n=l.apiKey)!==null&&n!==void 0?n:null,h=(r=l.oobCode)!==null&&r!==void 0?r:null,p=BP((i=l.mode)!==null&&i!==void 0?i:null);_t(u&&h&&p,"argument-error"),this.apiKey=u,this.operation=p,this.code=h,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(a=l.languageCode)!==null&&a!==void 0?a:null,this.tenantId=(o=l.tenantId)!==null&&o!==void 0?o:null}static parseLink(e){const n=KP(e);try{return new d2(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bc{constructor(){this.providerId=Bc.PROVIDER_ID}static credential(e,n){return gd._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=d2.parseLink(n);return _t(r,"argument-error"),gd._fromEmailAndCode(e,r.code,r.tenantId)}}Bc.PROVIDER_ID="password";Bc.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Bc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z3{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rd extends Z3{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bo extends Rd{constructor(){super("facebook.com")}static credential(e){return Gl._fromParams({providerId:bo.PROVIDER_ID,signInMethod:bo.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return bo.credentialFromTaggedObject(e)}static credentialFromError(e){return bo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return bo.credential(e.oauthAccessToken)}catch{return null}}}bo.FACEBOOK_SIGN_IN_METHOD="facebook.com";bo.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xo extends Rd{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Gl._fromParams({providerId:xo.PROVIDER_ID,signInMethod:xo.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return xo.credentialFromTaggedObject(e)}static credentialFromError(e){return xo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return xo.credential(n,r)}catch{return null}}}xo.GOOGLE_SIGN_IN_METHOD="google.com";xo.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class So extends Rd{constructor(){super("github.com")}static credential(e){return Gl._fromParams({providerId:So.PROVIDER_ID,signInMethod:So.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return So.credentialFromTaggedObject(e)}static credentialFromError(e){return So.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return So.credential(e.oauthAccessToken)}catch{return null}}}So.GITHUB_SIGN_IN_METHOD="github.com";So.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class No extends Rd{constructor(){super("twitter.com")}static credential(e,n){return Gl._fromParams({providerId:No.PROVIDER_ID,signInMethod:No.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return No.credentialFromTaggedObject(e)}static credentialFromError(e){return No.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return No.credential(n,r)}catch{return null}}}No.TWITTER_SIGN_IN_METHOD="twitter.com";No.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ac{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await xa._fromIdTokenResponse(e,r,i),a=x_(r);return new Ac({user:s,providerId:a,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=x_(r);return new Ac({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function x_(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gp extends Qs{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Gp.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Gp(e,n,r,i)}}function ex(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Gp._fromErrorAndOperation(t,s,e,r):s})}async function qP(t,e,n=!1){const r=await md(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Ac._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zP(t,e,n=!1){const{auth:r}=t;if(wa(r.app))return Promise.reject(Ko(r));const i="reauthenticate";try{const s=await md(t,ex(r,i,e,t),n);_t(s.idToken,r,"internal-error");const a=u2(s.idToken);_t(a,r,"internal-error");const{sub:o}=a;return _t(t.uid===o,r,"user-mismatch"),Ac._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&hs(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tx(t,e,n=!1){if(wa(t.app))return Promise.reject(Ko(t));const r="signIn",i=await ex(t,r,e),s=await Ac._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function HP(t,e){return tx(Uc(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $P(t){const e=Uc(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function WP(t,e,n){return wa(t.app)?Promise.reject(Ko(t)):HP(_n(t),Bc.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&$P(t),r})}function GP(t,e,n,r){return _n(t).onIdTokenChanged(e,n,r)}function QP(t,e,n){return _n(t).beforeAuthStateChanged(e,n)}function YP(t,e,n,r){return _n(t).onAuthStateChanged(e,n,r)}function JP(t){return _n(t).signOut()}const Qp="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nx{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Qp,"1"),this.storage.removeItem(Qp),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XP=1e3,ZP=10;class rx extends nx{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Q3(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((a,o,l)=>{this.notifyListeners(a,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const a=this.storage.getItem(r);!n&&this.localCache[r]===a||this.notifyListeners(r,a)},s=this.storage.getItem(r);yP()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,ZP):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},XP)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}rx.type="LOCAL";const eC=rx;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ix extends nx{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}ix.type="SESSION";const sx=ix;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tC(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Om{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new Om(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,a=this.handlersMap[i];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const o=Array.from(a).map(async u=>u(n.origin,s)),l=await tC(o);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Om.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f2(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nC{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,a;return new Promise((o,l)=>{const u=f2("",20);i.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},r);a={messageChannel:i,onMessage(p){const g=p;if(g.data.eventId===u)switch(g.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),o(g.data.response);break;default:clearTimeout(h),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(a),i.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[i.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qs(){return window}function rC(t){qs().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ax(){return typeof qs().WorkerGlobalScope<"u"&&typeof qs().importScripts=="function"}async function iC(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function sC(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function aC(){return ax()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ox="firebaseLocalStorageDb",oC=1,Yp="firebaseLocalStorage",lx="fbase_key";class jd{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Mm(t,e){return t.transaction([Yp],e?"readwrite":"readonly").objectStore(Yp)}function lC(){const t=indexedDB.deleteDatabase(ox);return new jd(t).toPromise()}function P0(){const t=indexedDB.open(ox,oC);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Yp,{keyPath:lx})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Yp)?e(r):(r.close(),await lC(),e(await P0()))})})}async function S_(t,e,n){const r=Mm(t,!0).put({[lx]:e,value:n});return new jd(r).toPromise()}async function uC(t,e){const n=Mm(t,!1).get(e),r=await new jd(n).toPromise();return r===void 0?null:r.value}function N_(t,e){const n=Mm(t,!0).delete(e);return new jd(n).toPromise()}const cC=800,hC=3;class ux{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await P0(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>hC)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return ax()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Om._getInstance(aC()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await iC(),!this.activeServiceWorker)return;this.sender=new nC(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||sC()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await P0();return await S_(e,Qp,"1"),await N_(e,Qp),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>S_(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>uC(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>N_(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=Mm(i,!1).getAll();return new jd(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),cC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}ux.type="LOCAL";const dC=ux;new Ld(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fC(t,e){return e?Sa(e):(_t(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p2 extends h2{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return hc(e,this._buildIdpRequest())}_linkToIdToken(e,n){return hc(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return hc(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function pC(t){return tx(t.auth,new p2(t),t.bypassAuthState)}function mC(t){const{auth:e,user:n}=t;return _t(n,e,"internal-error"),zP(n,new p2(t),t.bypassAuthState)}async function gC(t){const{auth:e,user:n}=t;return _t(n,e,"internal-error"),qP(n,new p2(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cx{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:a,type:o}=e;if(a){this.reject(a);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return pC;case"linkViaPopup":case"linkViaRedirect":return gC;case"reauthViaPopup":case"reauthViaRedirect":return mC;default:hs(this.auth,"internal-error")}}resolve(e){La(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){La(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vC=new Ld(2e3,1e4);class ec extends cx{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,ec.currentPopupAction&&ec.currentPopupAction.cancel(),ec.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return _t(e,this.auth,"internal-error"),e}async onExecution(){La(this.filter.length===1,"Popup operations only handle one event");const e=f2();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Ks(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Ks(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ec.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ks(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,vC.get())};e()}}ec.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yC="pendingRedirect",ip=new Map;class _C extends cx{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=ip.get(this.auth._key());if(!e){try{const r=await wC(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}ip.set(this.auth._key(),e)}return this.bypassAuthState||ip.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function wC(t,e){const n=SC(e),r=xC(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function bC(t,e){ip.set(t._key(),e)}function xC(t){return Sa(t._redirectPersistence)}function SC(t){return rp(yC,t.config.apiKey,t.name)}async function NC(t,e,n=!1){if(wa(t.app))return Promise.reject(Ko(t));const r=Uc(t),i=fC(r,e),a=await new _C(r,i,n).execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AC=10*60*1e3;class EC{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!kC(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!hx(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Ks(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=AC&&this.cachedEventUids.clear(),this.cachedEventUids.has(A_(e))}saveEventToCache(e){this.cachedEventUids.add(A_(e)),this.lastProcessedEventTime=Date.now()}}function A_(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function hx({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function kC(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return hx(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IC(t,e={}){return nl(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,PC=/^https?/;async function CC(t){if(t.config.emulator)return;const{authorizedDomains:e}=await IC(t);for(const n of e)try{if(LC(n))return}catch{}hs(t,"unauthorized-domain")}function LC(t){const e=I0(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===r}if(!PC.test(n))return!1;if(TC.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RC=new Ld(3e4,6e4);function E_(){const t=qs().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function jC(t){return new Promise((e,n)=>{var r,i,s;function a(){E_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{E_(),n(Ks(t,"network-request-failed"))},timeout:RC.get()})}if(!((i=(r=qs().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=qs().gapi)===null||s===void 0)&&s.load)a();else{const o=kP("iframefcb");return qs()[o]=()=>{gapi.load?a():n(Ks(t,"network-request-failed"))},J3(`${EP()}?onload=${o}`).catch(l=>n(l))}}).catch(e=>{throw sp=null,e})}let sp=null;function DC(t){return sp=sp||jC(t),sp}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FC=new Ld(5e3,15e3),OC="__/auth/iframe",MC="emulator/auth/iframe",VC={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},UC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function BC(t){const e=t.config;_t(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?l2(e,MC):`https://${t.config.authDomain}/${OC}`,r={apiKey:e.apiKey,appName:t.name,v:tu},i=UC.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Cd(r).slice(1)}`}async function KC(t){const e=await DC(t),n=qs().gapi;return _t(n,t,"internal-error"),e.open({where:document.body,url:BC(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:VC,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const a=Ks(t,"network-request-failed"),o=qs().setTimeout(()=>{s(a)},FC.get());function l(){qs().clearTimeout(o),i(r)}r.ping(l).then(l,()=>{s(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qC={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},zC=500,HC=600,$C="_blank",WC="http://localhost";class k_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function GC(t,e,n,r=zC,i=HC){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let o="";const l=Object.assign(Object.assign({},qC),{width:r.toString(),height:i.toString(),top:s,left:a}),u=Rr().toLowerCase();n&&(o=z3(u)?$C:n),K3(u)&&(e=e||WC,l.scrollbars="yes");const h=Object.entries(l).reduce((g,[m,b])=>`${g}${m}=${b},`,"");if(vP(u)&&o!=="_self")return QC(e||"",o),new k_(null);const p=window.open(e||"",o,h);_t(p,t,"popup-blocked");try{p.focus()}catch{}return new k_(p)}function QC(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YC="__/auth/handler",JC="emulator/auth/handler",XC=encodeURIComponent("fac");async function I_(t,e,n,r,i,s){_t(t.config.authDomain,t,"auth-domain-config-required"),_t(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:tu,eventId:i};if(e instanceof Z3){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",BI(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,p]of Object.entries({}))a[h]=p}if(e instanceof Rd){const h=e.getScopes().filter(p=>p!=="");h.length>0&&(a.scopes=h.join(","))}t.tenantId&&(a.tid=t.tenantId);const o=a;for(const h of Object.keys(o))o[h]===void 0&&delete o[h];const l=await t._getAppCheckToken(),u=l?`#${XC}=${encodeURIComponent(l)}`:"";return`${ZC(t)}?${Cd(o).slice(1)}${u}`}function ZC({config:t}){return t.emulator?l2(t,JC):`https://${t.authDomain}/${YC}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a1="webStorageSupport";class e8{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=sx,this._completeRedirectFn=NC,this._overrideRedirectResult=bC}async _openPopup(e,n,r,i){var s;La((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const a=await I_(e,n,r,I0(),i);return GC(e,a,f2())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await I_(e,n,r,I0(),i);return rC(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(La(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await KC(e),r=new EC(e);return n.register("authEvent",i=>(_t(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(a1,{type:a1},i=>{var s;const a=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[a1];a!==void 0&&n(!!a),hs(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=CC(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Q3()||q3()||c2()}}const t8=e8;var T_="@firebase/auth",P_="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n8{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){_t(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r8(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function i8(t){Wl(new $o("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:o}=r.options;_t(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:a,authDomain:o,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Y3(t)},u=new SP(r,i,s,l);return LP(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Wl(new $o("auth-internal",e=>{const n=Uc(e.getProvider("auth").getImmediate());return(r=>new n8(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Bs(T_,P_,r8(t)),Bs(T_,P_,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s8=5*60,a8=E3("authIdTokenMaxAge")||s8;let C_=null;const o8=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>a8)return;const i=n==null?void 0:n.token;C_!==i&&(C_=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function l8(t=s2()){const e=jm(t,"auth");if(e.isInitialized())return e.getImmediate();const n=CP(t,{popupRedirectResolver:t8,persistence:[dC,eC,sx]}),r=E3("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const a=o8(s.toString());QP(n,a,()=>a(n.currentUser)),GP(n,o=>a(o))}}const i=S3("auth");return i&&RP(n,`http://${i}`),n}function u8(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}NP({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=Ks("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",u8().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});i8("Browser");var c8="firebase",h8="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Bs(c8,h8,"app");var L_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Vl,dx;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(L,y){function S(){}S.prototype=y.prototype,L.D=y.prototype,L.prototype=new S,L.prototype.constructor=L,L.C=function(R,E,I){for(var P=Array(arguments.length-2),M=2;M<arguments.length;M++)P[M-2]=arguments[M];return y.prototype[E].apply(R,P)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(L,y,S){S||(S=0);var R=Array(16);if(typeof y=="string")for(var E=0;16>E;++E)R[E]=y.charCodeAt(S++)|y.charCodeAt(S++)<<8|y.charCodeAt(S++)<<16|y.charCodeAt(S++)<<24;else for(E=0;16>E;++E)R[E]=y[S++]|y[S++]<<8|y[S++]<<16|y[S++]<<24;y=L.g[0],S=L.g[1],E=L.g[2];var I=L.g[3],P=y+(I^S&(E^I))+R[0]+3614090360&4294967295;y=S+(P<<7&4294967295|P>>>25),P=I+(E^y&(S^E))+R[1]+3905402710&4294967295,I=y+(P<<12&4294967295|P>>>20),P=E+(S^I&(y^S))+R[2]+606105819&4294967295,E=I+(P<<17&4294967295|P>>>15),P=S+(y^E&(I^y))+R[3]+3250441966&4294967295,S=E+(P<<22&4294967295|P>>>10),P=y+(I^S&(E^I))+R[4]+4118548399&4294967295,y=S+(P<<7&4294967295|P>>>25),P=I+(E^y&(S^E))+R[5]+1200080426&4294967295,I=y+(P<<12&4294967295|P>>>20),P=E+(S^I&(y^S))+R[6]+2821735955&4294967295,E=I+(P<<17&4294967295|P>>>15),P=S+(y^E&(I^y))+R[7]+4249261313&4294967295,S=E+(P<<22&4294967295|P>>>10),P=y+(I^S&(E^I))+R[8]+1770035416&4294967295,y=S+(P<<7&4294967295|P>>>25),P=I+(E^y&(S^E))+R[9]+2336552879&4294967295,I=y+(P<<12&4294967295|P>>>20),P=E+(S^I&(y^S))+R[10]+4294925233&4294967295,E=I+(P<<17&4294967295|P>>>15),P=S+(y^E&(I^y))+R[11]+2304563134&4294967295,S=E+(P<<22&4294967295|P>>>10),P=y+(I^S&(E^I))+R[12]+1804603682&4294967295,y=S+(P<<7&4294967295|P>>>25),P=I+(E^y&(S^E))+R[13]+4254626195&4294967295,I=y+(P<<12&4294967295|P>>>20),P=E+(S^I&(y^S))+R[14]+2792965006&4294967295,E=I+(P<<17&4294967295|P>>>15),P=S+(y^E&(I^y))+R[15]+1236535329&4294967295,S=E+(P<<22&4294967295|P>>>10),P=y+(E^I&(S^E))+R[1]+4129170786&4294967295,y=S+(P<<5&4294967295|P>>>27),P=I+(S^E&(y^S))+R[6]+3225465664&4294967295,I=y+(P<<9&4294967295|P>>>23),P=E+(y^S&(I^y))+R[11]+643717713&4294967295,E=I+(P<<14&4294967295|P>>>18),P=S+(I^y&(E^I))+R[0]+3921069994&4294967295,S=E+(P<<20&4294967295|P>>>12),P=y+(E^I&(S^E))+R[5]+3593408605&4294967295,y=S+(P<<5&4294967295|P>>>27),P=I+(S^E&(y^S))+R[10]+38016083&4294967295,I=y+(P<<9&4294967295|P>>>23),P=E+(y^S&(I^y))+R[15]+3634488961&4294967295,E=I+(P<<14&4294967295|P>>>18),P=S+(I^y&(E^I))+R[4]+3889429448&4294967295,S=E+(P<<20&4294967295|P>>>12),P=y+(E^I&(S^E))+R[9]+568446438&4294967295,y=S+(P<<5&4294967295|P>>>27),P=I+(S^E&(y^S))+R[14]+3275163606&4294967295,I=y+(P<<9&4294967295|P>>>23),P=E+(y^S&(I^y))+R[3]+4107603335&4294967295,E=I+(P<<14&4294967295|P>>>18),P=S+(I^y&(E^I))+R[8]+1163531501&4294967295,S=E+(P<<20&4294967295|P>>>12),P=y+(E^I&(S^E))+R[13]+2850285829&4294967295,y=S+(P<<5&4294967295|P>>>27),P=I+(S^E&(y^S))+R[2]+4243563512&4294967295,I=y+(P<<9&4294967295|P>>>23),P=E+(y^S&(I^y))+R[7]+1735328473&4294967295,E=I+(P<<14&4294967295|P>>>18),P=S+(I^y&(E^I))+R[12]+2368359562&4294967295,S=E+(P<<20&4294967295|P>>>12),P=y+(S^E^I)+R[5]+4294588738&4294967295,y=S+(P<<4&4294967295|P>>>28),P=I+(y^S^E)+R[8]+2272392833&4294967295,I=y+(P<<11&4294967295|P>>>21),P=E+(I^y^S)+R[11]+1839030562&4294967295,E=I+(P<<16&4294967295|P>>>16),P=S+(E^I^y)+R[14]+4259657740&4294967295,S=E+(P<<23&4294967295|P>>>9),P=y+(S^E^I)+R[1]+2763975236&4294967295,y=S+(P<<4&4294967295|P>>>28),P=I+(y^S^E)+R[4]+1272893353&4294967295,I=y+(P<<11&4294967295|P>>>21),P=E+(I^y^S)+R[7]+4139469664&4294967295,E=I+(P<<16&4294967295|P>>>16),P=S+(E^I^y)+R[10]+3200236656&4294967295,S=E+(P<<23&4294967295|P>>>9),P=y+(S^E^I)+R[13]+681279174&4294967295,y=S+(P<<4&4294967295|P>>>28),P=I+(y^S^E)+R[0]+3936430074&4294967295,I=y+(P<<11&4294967295|P>>>21),P=E+(I^y^S)+R[3]+3572445317&4294967295,E=I+(P<<16&4294967295|P>>>16),P=S+(E^I^y)+R[6]+76029189&4294967295,S=E+(P<<23&4294967295|P>>>9),P=y+(S^E^I)+R[9]+3654602809&4294967295,y=S+(P<<4&4294967295|P>>>28),P=I+(y^S^E)+R[12]+3873151461&4294967295,I=y+(P<<11&4294967295|P>>>21),P=E+(I^y^S)+R[15]+530742520&4294967295,E=I+(P<<16&4294967295|P>>>16),P=S+(E^I^y)+R[2]+3299628645&4294967295,S=E+(P<<23&4294967295|P>>>9),P=y+(E^(S|~I))+R[0]+4096336452&4294967295,y=S+(P<<6&4294967295|P>>>26),P=I+(S^(y|~E))+R[7]+1126891415&4294967295,I=y+(P<<10&4294967295|P>>>22),P=E+(y^(I|~S))+R[14]+2878612391&4294967295,E=I+(P<<15&4294967295|P>>>17),P=S+(I^(E|~y))+R[5]+4237533241&4294967295,S=E+(P<<21&4294967295|P>>>11),P=y+(E^(S|~I))+R[12]+1700485571&4294967295,y=S+(P<<6&4294967295|P>>>26),P=I+(S^(y|~E))+R[3]+2399980690&4294967295,I=y+(P<<10&4294967295|P>>>22),P=E+(y^(I|~S))+R[10]+4293915773&4294967295,E=I+(P<<15&4294967295|P>>>17),P=S+(I^(E|~y))+R[1]+2240044497&4294967295,S=E+(P<<21&4294967295|P>>>11),P=y+(E^(S|~I))+R[8]+1873313359&4294967295,y=S+(P<<6&4294967295|P>>>26),P=I+(S^(y|~E))+R[15]+4264355552&4294967295,I=y+(P<<10&4294967295|P>>>22),P=E+(y^(I|~S))+R[6]+2734768916&4294967295,E=I+(P<<15&4294967295|P>>>17),P=S+(I^(E|~y))+R[13]+1309151649&4294967295,S=E+(P<<21&4294967295|P>>>11),P=y+(E^(S|~I))+R[4]+4149444226&4294967295,y=S+(P<<6&4294967295|P>>>26),P=I+(S^(y|~E))+R[11]+3174756917&4294967295,I=y+(P<<10&4294967295|P>>>22),P=E+(y^(I|~S))+R[2]+718787259&4294967295,E=I+(P<<15&4294967295|P>>>17),P=S+(I^(E|~y))+R[9]+3951481745&4294967295,L.g[0]=L.g[0]+y&4294967295,L.g[1]=L.g[1]+(E+(P<<21&4294967295|P>>>11))&4294967295,L.g[2]=L.g[2]+E&4294967295,L.g[3]=L.g[3]+I&4294967295}r.prototype.u=function(L,y){y===void 0&&(y=L.length);for(var S=y-this.blockSize,R=this.B,E=this.h,I=0;I<y;){if(E==0)for(;I<=S;)i(this,L,I),I+=this.blockSize;if(typeof L=="string"){for(;I<y;)if(R[E++]=L.charCodeAt(I++),E==this.blockSize){i(this,R),E=0;break}}else for(;I<y;)if(R[E++]=L[I++],E==this.blockSize){i(this,R),E=0;break}}this.h=E,this.o+=y},r.prototype.v=function(){var L=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);L[0]=128;for(var y=1;y<L.length-8;++y)L[y]=0;var S=8*this.o;for(y=L.length-8;y<L.length;++y)L[y]=S&255,S/=256;for(this.u(L),L=Array(16),y=S=0;4>y;++y)for(var R=0;32>R;R+=8)L[S++]=this.g[y]>>>R&255;return L};function s(L,y){var S=o;return Object.prototype.hasOwnProperty.call(S,L)?S[L]:S[L]=y(L)}function a(L,y){this.h=y;for(var S=[],R=!0,E=L.length-1;0<=E;E--){var I=L[E]|0;R&&I==y||(S[E]=I,R=!1)}this.g=S}var o={};function l(L){return-128<=L&&128>L?s(L,function(y){return new a([y|0],0>y?-1:0)}):new a([L|0],0>L?-1:0)}function u(L){if(isNaN(L)||!isFinite(L))return p;if(0>L)return k(u(-L));for(var y=[],S=1,R=0;L>=S;R++)y[R]=L/S|0,S*=4294967296;return new a(y,0)}function h(L,y){if(L.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(L.charAt(0)=="-")return k(h(L.substring(1),y));if(0<=L.indexOf("-"))throw Error('number format error: interior "-" character');for(var S=u(Math.pow(y,8)),R=p,E=0;E<L.length;E+=8){var I=Math.min(8,L.length-E),P=parseInt(L.substring(E,E+I),y);8>I?(I=u(Math.pow(y,I)),R=R.j(I).add(u(P))):(R=R.j(S),R=R.add(u(P)))}return R}var p=l(0),g=l(1),m=l(16777216);t=a.prototype,t.m=function(){if(x(this))return-k(this).m();for(var L=0,y=1,S=0;S<this.g.length;S++){var R=this.i(S);L+=(0<=R?R:4294967296+R)*y,y*=4294967296}return L},t.toString=function(L){if(L=L||10,2>L||36<L)throw Error("radix out of range: "+L);if(b(this))return"0";if(x(this))return"-"+k(this).toString(L);for(var y=u(Math.pow(L,6)),S=this,R="";;){var E=F(S,y).g;S=_(S,E.j(y));var I=((0<S.g.length?S.g[0]:S.h)>>>0).toString(L);if(S=E,b(S))return I+R;for(;6>I.length;)I="0"+I;R=I+R}},t.i=function(L){return 0>L?0:L<this.g.length?this.g[L]:this.h};function b(L){if(L.h!=0)return!1;for(var y=0;y<L.g.length;y++)if(L.g[y]!=0)return!1;return!0}function x(L){return L.h==-1}t.l=function(L){return L=_(this,L),x(L)?-1:b(L)?0:1};function k(L){for(var y=L.g.length,S=[],R=0;R<y;R++)S[R]=~L.g[R];return new a(S,~L.h).add(g)}t.abs=function(){return x(this)?k(this):this},t.add=function(L){for(var y=Math.max(this.g.length,L.g.length),S=[],R=0,E=0;E<=y;E++){var I=R+(this.i(E)&65535)+(L.i(E)&65535),P=(I>>>16)+(this.i(E)>>>16)+(L.i(E)>>>16);R=P>>>16,I&=65535,P&=65535,S[E]=P<<16|I}return new a(S,S[S.length-1]&-2147483648?-1:0)};function _(L,y){return L.add(k(y))}t.j=function(L){if(b(this)||b(L))return p;if(x(this))return x(L)?k(this).j(k(L)):k(k(this).j(L));if(x(L))return k(this.j(k(L)));if(0>this.l(m)&&0>L.l(m))return u(this.m()*L.m());for(var y=this.g.length+L.g.length,S=[],R=0;R<2*y;R++)S[R]=0;for(R=0;R<this.g.length;R++)for(var E=0;E<L.g.length;E++){var I=this.i(R)>>>16,P=this.i(R)&65535,M=L.i(E)>>>16,te=L.i(E)&65535;S[2*R+2*E]+=P*te,A(S,2*R+2*E),S[2*R+2*E+1]+=I*te,A(S,2*R+2*E+1),S[2*R+2*E+1]+=P*M,A(S,2*R+2*E+1),S[2*R+2*E+2]+=I*M,A(S,2*R+2*E+2)}for(R=0;R<y;R++)S[R]=S[2*R+1]<<16|S[2*R];for(R=y;R<2*y;R++)S[R]=0;return new a(S,0)};function A(L,y){for(;(L[y]&65535)!=L[y];)L[y+1]+=L[y]>>>16,L[y]&=65535,y++}function C(L,y){this.g=L,this.h=y}function F(L,y){if(b(y))throw Error("division by zero");if(b(L))return new C(p,p);if(x(L))return y=F(k(L),y),new C(k(y.g),k(y.h));if(x(y))return y=F(L,k(y)),new C(k(y.g),y.h);if(30<L.g.length){if(x(L)||x(y))throw Error("slowDivide_ only works with positive integers.");for(var S=g,R=y;0>=R.l(L);)S=Y(S),R=Y(R);var E=B(S,1),I=B(R,1);for(R=B(R,2),S=B(S,2);!b(R);){var P=I.add(R);0>=P.l(L)&&(E=E.add(S),I=P),R=B(R,1),S=B(S,1)}return y=_(L,E.j(y)),new C(E,y)}for(E=p;0<=L.l(y);){for(S=Math.max(1,Math.floor(L.m()/y.m())),R=Math.ceil(Math.log(S)/Math.LN2),R=48>=R?1:Math.pow(2,R-48),I=u(S),P=I.j(y);x(P)||0<P.l(L);)S-=R,I=u(S),P=I.j(y);b(I)&&(I=g),E=E.add(I),L=_(L,P)}return new C(E,L)}t.A=function(L){return F(this,L).h},t.and=function(L){for(var y=Math.max(this.g.length,L.g.length),S=[],R=0;R<y;R++)S[R]=this.i(R)&L.i(R);return new a(S,this.h&L.h)},t.or=function(L){for(var y=Math.max(this.g.length,L.g.length),S=[],R=0;R<y;R++)S[R]=this.i(R)|L.i(R);return new a(S,this.h|L.h)},t.xor=function(L){for(var y=Math.max(this.g.length,L.g.length),S=[],R=0;R<y;R++)S[R]=this.i(R)^L.i(R);return new a(S,this.h^L.h)};function Y(L){for(var y=L.g.length+1,S=[],R=0;R<y;R++)S[R]=L.i(R)<<1|L.i(R-1)>>>31;return new a(S,L.h)}function B(L,y){var S=y>>5;y%=32;for(var R=L.g.length-S,E=[],I=0;I<R;I++)E[I]=0<y?L.i(I+S)>>>y|L.i(I+S+1)<<32-y:L.i(I+S);return new a(E,L.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,dx=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=u,a.fromString=h,Vl=a}).apply(typeof L_<"u"?L_:typeof self<"u"?self:typeof window<"u"?window:{});var jf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var fx,Th,px,ap,C0,mx,gx,vx;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(d,T,D){return d==Array.prototype||d==Object.prototype||(d[T]=D.value),d};function n(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof jf=="object"&&jf];for(var T=0;T<d.length;++T){var D=d[T];if(D&&D.Math==Math)return D}throw Error("Cannot find global object")}var r=n(this);function i(d,T){if(T)e:{var D=r;d=d.split(".");for(var X=0;X<d.length-1;X++){var ge=d[X];if(!(ge in D))break e;D=D[ge]}d=d[d.length-1],X=D[d],T=T(X),T!=X&&T!=null&&e(D,d,{configurable:!0,writable:!0,value:T})}}function s(d,T){d instanceof String&&(d+="");var D=0,X=!1,ge={next:function(){if(!X&&D<d.length){var Ne=D++;return{value:T(Ne,d[Ne]),done:!1}}return X=!0,{done:!0,value:void 0}}};return ge[Symbol.iterator]=function(){return ge},ge}i("Array.prototype.values",function(d){return d||function(){return s(this,function(T,D){return D})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},o=this||self;function l(d){var T=typeof d;return T=T!="object"?T:d?Array.isArray(d)?"array":T:"null",T=="array"||T=="object"&&typeof d.length=="number"}function u(d){var T=typeof d;return T=="object"&&d!=null||T=="function"}function h(d,T,D){return d.call.apply(d.bind,arguments)}function p(d,T,D){if(!d)throw Error();if(2<arguments.length){var X=Array.prototype.slice.call(arguments,2);return function(){var ge=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(ge,X),d.apply(T,ge)}}return function(){return d.apply(T,arguments)}}function g(d,T,D){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,g.apply(null,arguments)}function m(d,T){var D=Array.prototype.slice.call(arguments,1);return function(){var X=D.slice();return X.push.apply(X,arguments),d.apply(this,X)}}function b(d,T){function D(){}D.prototype=T.prototype,d.aa=T.prototype,d.prototype=new D,d.prototype.constructor=d,d.Qb=function(X,ge,Ne){for(var Ve=Array(arguments.length-2),xt=2;xt<arguments.length;xt++)Ve[xt-2]=arguments[xt];return T.prototype[ge].apply(X,Ve)}}function x(d){const T=d.length;if(0<T){const D=Array(T);for(let X=0;X<T;X++)D[X]=d[X];return D}return[]}function k(d,T){for(let D=1;D<arguments.length;D++){const X=arguments[D];if(l(X)){const ge=d.length||0,Ne=X.length||0;d.length=ge+Ne;for(let Ve=0;Ve<Ne;Ve++)d[ge+Ve]=X[Ve]}else d.push(X)}}class _{constructor(T,D){this.i=T,this.j=D,this.h=0,this.g=null}get(){let T;return 0<this.h?(this.h--,T=this.g,this.g=T.next,T.next=null):T=this.i(),T}}function A(d){return/^[\s\xa0]*$/.test(d)}function C(){var d=o.navigator;return d&&(d=d.userAgent)?d:""}function F(d){return F[" "](d),d}F[" "]=function(){};var Y=C().indexOf("Gecko")!=-1&&!(C().toLowerCase().indexOf("webkit")!=-1&&C().indexOf("Edge")==-1)&&!(C().indexOf("Trident")!=-1||C().indexOf("MSIE")!=-1)&&C().indexOf("Edge")==-1;function B(d,T,D){for(const X in d)T.call(D,d[X],X,d)}function L(d,T){for(const D in d)T.call(void 0,d[D],D,d)}function y(d){const T={};for(const D in d)T[D]=d[D];return T}const S="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function R(d,T){let D,X;for(let ge=1;ge<arguments.length;ge++){X=arguments[ge];for(D in X)d[D]=X[D];for(let Ne=0;Ne<S.length;Ne++)D=S[Ne],Object.prototype.hasOwnProperty.call(X,D)&&(d[D]=X[D])}}function E(d){var T=1;d=d.split(":");const D=[];for(;0<T&&d.length;)D.push(d.shift()),T--;return d.length&&D.push(d.join(":")),D}function I(d){o.setTimeout(()=>{throw d},0)}function P(){var d=H;let T=null;return d.g&&(T=d.g,d.g=d.g.next,d.g||(d.h=null),T.next=null),T}class M{constructor(){this.h=this.g=null}add(T,D){const X=te.get();X.set(T,D),this.h?this.h.next=X:this.g=X,this.h=X}}var te=new _(()=>new V,d=>d.reset());class V{constructor(){this.next=this.g=this.h=null}set(T,D){this.h=T,this.g=D,this.next=null}reset(){this.next=this.g=this.h=null}}let U,z=!1,H=new M,ne=()=>{const d=o.Promise.resolve(void 0);U=()=>{d.then(_e)}};var _e=()=>{for(var d;d=P();){try{d.h.call(d.g)}catch(D){I(D)}var T=te;T.j(d),100>T.h&&(T.h++,d.next=T.g,T.g=d)}z=!1};function O(){this.s=this.s,this.C=this.C}O.prototype.s=!1,O.prototype.ma=function(){this.s||(this.s=!0,this.N())},O.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Q(d,T){this.type=d,this.g=this.target=T,this.defaultPrevented=!1}Q.prototype.h=function(){this.defaultPrevented=!0};var J=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var d=!1,T=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const D=()=>{};o.addEventListener("test",D,T),o.removeEventListener("test",D,T)}catch{}return d}();function W(d,T){if(Q.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d){var D=this.type=d.type,X=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;if(this.target=d.target||d.srcElement,this.g=T,T=d.relatedTarget){if(Y){e:{try{F(T.nodeName);var ge=!0;break e}catch{}ge=!1}ge||(T=null)}}else D=="mouseover"?T=d.fromElement:D=="mouseout"&&(T=d.toElement);this.relatedTarget=T,X?(this.clientX=X.clientX!==void 0?X.clientX:X.pageX,this.clientY=X.clientY!==void 0?X.clientY:X.pageY,this.screenX=X.screenX||0,this.screenY=X.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=typeof d.pointerType=="string"?d.pointerType:se[d.pointerType]||"",this.state=d.state,this.i=d,d.defaultPrevented&&W.aa.h.call(this)}}b(W,Q);var se={2:"touch",3:"pen",4:"mouse"};W.prototype.h=function(){W.aa.h.call(this);var d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var le="closure_listenable_"+(1e6*Math.random()|0),fe=0;function pe(d,T,D,X,ge){this.listener=d,this.proxy=null,this.src=T,this.type=D,this.capture=!!X,this.ha=ge,this.key=++fe,this.da=this.fa=!1}function ke(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function Ie(d){this.src=d,this.g={},this.h=0}Ie.prototype.add=function(d,T,D,X,ge){var Ne=d.toString();d=this.g[Ne],d||(d=this.g[Ne]=[],this.h++);var Ve=Ke(d,T,X,ge);return-1<Ve?(T=d[Ve],D||(T.fa=!1)):(T=new pe(T,this.src,Ne,!!X,ge),T.fa=D,d.push(T)),T};function je(d,T){var D=T.type;if(D in d.g){var X=d.g[D],ge=Array.prototype.indexOf.call(X,T,void 0),Ne;(Ne=0<=ge)&&Array.prototype.splice.call(X,ge,1),Ne&&(ke(T),d.g[D].length==0&&(delete d.g[D],d.h--))}}function Ke(d,T,D,X){for(var ge=0;ge<d.length;++ge){var Ne=d[ge];if(!Ne.da&&Ne.listener==T&&Ne.capture==!!D&&Ne.ha==X)return ge}return-1}var Ze="closure_lm_"+(1e6*Math.random()|0),Se={};function ae(d,T,D,X,ge){if(Array.isArray(T)){for(var Ne=0;Ne<T.length;Ne++)ae(d,T[Ne],D,X,ge);return null}return D=at(D),d&&d[le]?d.K(T,D,u(X)?!!X.capture:!1,ge):Ge(d,T,D,!1,X,ge)}function Ge(d,T,D,X,ge,Ne){if(!T)throw Error("Invalid event type");var Ve=u(ge)?!!ge.capture:!!ge,xt=$e(d);if(xt||(d[Ze]=xt=new Ie(d)),D=xt.add(T,D,X,Ve,Ne),D.proxy)return D;if(X=Fe(),D.proxy=X,X.src=d,X.listener=D,d.addEventListener)J||(ge=Ve),ge===void 0&&(ge=!1),d.addEventListener(T.toString(),X,ge);else if(d.attachEvent)d.attachEvent(Me(T.toString()),X);else if(d.addListener&&d.removeListener)d.addListener(X);else throw Error("addEventListener and attachEvent are unavailable.");return D}function Fe(){function d(D){return T.call(d.src,d.listener,D)}const T=Be;return d}function ce(d,T,D,X,ge){if(Array.isArray(T))for(var Ne=0;Ne<T.length;Ne++)ce(d,T[Ne],D,X,ge);else X=u(X)?!!X.capture:!!X,D=at(D),d&&d[le]?(d=d.i,T=String(T).toString(),T in d.g&&(Ne=d.g[T],D=Ke(Ne,D,X,ge),-1<D&&(ke(Ne[D]),Array.prototype.splice.call(Ne,D,1),Ne.length==0&&(delete d.g[T],d.h--)))):d&&(d=$e(d))&&(T=d.g[T.toString()],d=-1,T&&(d=Ke(T,D,X,ge)),(D=-1<d?T[d]:null)&&Te(D))}function Te(d){if(typeof d!="number"&&d&&!d.da){var T=d.src;if(T&&T[le])je(T.i,d);else{var D=d.type,X=d.proxy;T.removeEventListener?T.removeEventListener(D,X,d.capture):T.detachEvent?T.detachEvent(Me(D),X):T.addListener&&T.removeListener&&T.removeListener(X),(D=$e(T))?(je(D,d),D.h==0&&(D.src=null,T[Ze]=null)):ke(d)}}}function Me(d){return d in Se?Se[d]:Se[d]="on"+d}function Be(d,T){if(d.da)d=!0;else{T=new W(T,this);var D=d.listener,X=d.ha||d.src;d.fa&&Te(d),d=D.call(X,T)}return d}function $e(d){return d=d[Ze],d instanceof Ie?d:null}var Ye="__closure_events_fn_"+(1e9*Math.random()>>>0);function at(d){return typeof d=="function"?d:(d[Ye]||(d[Ye]=function(T){return d.handleEvent(T)}),d[Ye])}function tt(){O.call(this),this.i=new Ie(this),this.M=this,this.F=null}b(tt,O),tt.prototype[le]=!0,tt.prototype.removeEventListener=function(d,T,D,X){ce(this,d,T,D,X)};function ct(d,T){var D,X=d.F;if(X)for(D=[];X;X=X.F)D.push(X);if(d=d.M,X=T.type||T,typeof T=="string")T=new Q(T,d);else if(T instanceof Q)T.target=T.target||d;else{var ge=T;T=new Q(X,d),R(T,ge)}if(ge=!0,D)for(var Ne=D.length-1;0<=Ne;Ne--){var Ve=T.g=D[Ne];ge=dt(Ve,X,!0,T)&&ge}if(Ve=T.g=d,ge=dt(Ve,X,!0,T)&&ge,ge=dt(Ve,X,!1,T)&&ge,D)for(Ne=0;Ne<D.length;Ne++)Ve=T.g=D[Ne],ge=dt(Ve,X,!1,T)&&ge}tt.prototype.N=function(){if(tt.aa.N.call(this),this.i){var d=this.i,T;for(T in d.g){for(var D=d.g[T],X=0;X<D.length;X++)ke(D[X]);delete d.g[T],d.h--}}this.F=null},tt.prototype.K=function(d,T,D,X){return this.i.add(String(d),T,!1,D,X)},tt.prototype.L=function(d,T,D,X){return this.i.add(String(d),T,!0,D,X)};function dt(d,T,D,X){if(T=d.i.g[String(T)],!T)return!0;T=T.concat();for(var ge=!0,Ne=0;Ne<T.length;++Ne){var Ve=T[Ne];if(Ve&&!Ve.da&&Ve.capture==D){var xt=Ve.listener,Lt=Ve.ha||Ve.src;Ve.fa&&je(d.i,Ve),ge=xt.call(Lt,X)!==!1&&ge}}return ge&&!X.defaultPrevented}function ot(d,T,D){if(typeof d=="function")D&&(d=g(d,D));else if(d&&typeof d.handleEvent=="function")d=g(d.handleEvent,d);else throw Error("Invalid listener argument");return 2147483647<Number(T)?-1:o.setTimeout(d,T||0)}function ut(d){d.g=ot(()=>{d.g=null,d.i&&(d.i=!1,ut(d))},d.l);const T=d.h;d.h=null,d.m.apply(null,T)}class ze extends O{constructor(T,D){super(),this.m=T,this.l=D,this.h=null,this.i=!1,this.g=null}j(T){this.h=arguments,this.g?this.i=!0:ut(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function we(d){O.call(this),this.h=d,this.g={}}b(we,O);var He=[];function mt(d){B(d.g,function(T,D){this.g.hasOwnProperty(D)&&Te(T)},d),d.g={}}we.prototype.N=function(){we.aa.N.call(this),mt(this)},we.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ft=o.JSON.stringify,kt=o.JSON.parse,Mn=class{stringify(d){return o.JSON.stringify(d,void 0)}parse(d){return o.JSON.parse(d,void 0)}};function bt(){}bt.prototype.h=null;function vr(d){return d.h||(d.h=d.i())}function Bt(){}var $n={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function xn(){Q.call(this,"d")}b(xn,Q);function Dt(){Q.call(this,"c")}b(Dt,Q);var lt={},Pt=null;function jr(){return Pt=Pt||new tt}lt.La="serverreachability";function Jt(d){Q.call(this,lt.La,d)}b(Jt,Q);function fn(d){const T=jr();ct(T,new Jt(T))}lt.STAT_EVENT="statevent";function ci(d,T){Q.call(this,lt.STAT_EVENT,d),this.stat=T}b(ci,Q);function nt(d){const T=jr();ct(T,new ci(T,d))}lt.Ma="timingevent";function Wr(d,T){Q.call(this,lt.Ma,d),this.size=T}b(Wr,Q);function yr(d,T){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){d()},T)}function Vn(){this.g=!0}Vn.prototype.xa=function(){this.g=!1};function Tn(d,T,D,X,ge,Ne){d.info(function(){if(d.g)if(Ne)for(var Ve="",xt=Ne.split("&"),Lt=0;Lt<xt.length;Lt++){var St=xt[Lt].split("=");if(1<St.length){var zt=St[0];St=St[1];var Zt=zt.split("_");Ve=2<=Zt.length&&Zt[1]=="type"?Ve+(zt+"="+St+"&"):Ve+(zt+"=redacted&")}}else Ve=null;else Ve=Ne;return"XMLHTTP REQ ("+X+") [attempt "+ge+"]: "+T+`
`+D+`
`+Ve})}function Sn(d,T,D,X,ge,Ne,Ve){d.info(function(){return"XMLHTTP RESP ("+X+") [ attempt "+ge+"]: "+T+`
`+D+`
`+Ne+" "+Ve})}function Un(d,T,D,X){d.info(function(){return"XMLHTTP TEXT ("+T+"): "+qi(d,D)+(X?" "+X:"")})}function Oa(d,T){d.info(function(){return"TIMEOUT: "+T})}Vn.prototype.info=function(){};function qi(d,T){if(!d.g)return T;if(!T)return null;try{var D=JSON.parse(T);if(D){for(d=0;d<D.length;d++)if(Array.isArray(D[d])){var X=D[d];if(!(2>X.length)){var ge=X[1];if(Array.isArray(ge)&&!(1>ge.length)){var Ne=ge[0];if(Ne!="noop"&&Ne!="stop"&&Ne!="close")for(var Ve=1;Ve<ge.length;Ve++)ge[Ve]=""}}}}return ft(D)}catch{return T}}var _r={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Gr={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Dr;function Fr(){}b(Fr,bt),Fr.prototype.g=function(){return new XMLHttpRequest},Fr.prototype.i=function(){return{}},Dr=new Fr;function Pn(d,T,D,X){this.j=d,this.i=T,this.l=D,this.R=X||1,this.U=new we(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new hi}function hi(){this.i=null,this.g="",this.h=!1}var ys={},_s={};function ws(d,T,D){d.L=1,d.v=na(Or(T)),d.m=D,d.P=!0,Js(d,null)}function Js(d,T){d.F=Date.now(),Ma(d),d.A=Or(d.v);var D=d.A,X=d.R;Array.isArray(X)||(X=[String(X)]),yt(D.i,"t",X),d.C=0,D=d.j.J,d.h=new hi,d.g=K(d.j,D?T:null,!d.m),0<d.O&&(d.M=new ze(g(d.Y,d,d.g),d.O)),T=d.U,D=d.g,X=d.ca;var ge="readystatechange";Array.isArray(ge)||(ge&&(He[0]=ge.toString()),ge=He);for(var Ne=0;Ne<ge.length;Ne++){var Ve=ae(D,ge[Ne],X||T.handleEvent,!1,T.h||T);if(!Ve)break;T.g[Ve.key]=Ve}T=d.H?y(d.H):{},d.m?(d.u||(d.u="POST"),T["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.A,d.u,d.m,T)):(d.u="GET",d.g.ea(d.A,d.u,null,T)),fn(),Tn(d.i,d.u,d.A,d.l,d.R,d.m)}Pn.prototype.ca=function(d){d=d.target;const T=this.M;T&&Wn(d)==3?T.j():this.Y(d)},Pn.prototype.Y=function(d){try{if(d==this.g)e:{const Zt=Wn(this.g);var T=this.g.Ba();const Ji=this.g.Z();if(!(3>Zt)&&(Zt!=3||this.g&&(this.h.h||this.g.oa()||yu(this.g)))){this.J||Zt!=4||T==7||(T==8||0>=Ji?fn(3):fn(2)),bs(this);var D=this.g.Z();this.X=D;t:if(Xs(this)){var X=yu(this.g);d="";var ge=X.length,Ne=Wn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){zi(this),xs(this);var Ve="";break t}this.h.i=new o.TextDecoder}for(T=0;T<ge;T++)this.h.h=!0,d+=this.h.i.decode(X[T],{stream:!(Ne&&T==ge-1)});X.length=0,this.h.g+=d,this.C=0,Ve=this.h.g}else Ve=this.g.oa();if(this.o=D==200,Sn(this.i,this.u,this.A,this.l,this.R,Zt,D),this.o){if(this.T&&!this.K){t:{if(this.g){var xt,Lt=this.g;if((xt=Lt.g?Lt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!A(xt)){var St=xt;break t}}St=null}if(D=St)Un(this.i,this.l,D,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Zs(this,D);else{this.o=!1,this.s=3,nt(12),zi(this),xs(this);break e}}if(this.P){D=!0;let ar;for(;!this.J&&this.C<Ve.length;)if(ar=uu(this,Ve),ar==_s){Zt==4&&(this.s=4,nt(14),D=!1),Un(this.i,this.l,null,"[Incomplete Response]");break}else if(ar==ys){this.s=4,nt(15),Un(this.i,this.l,Ve,"[Invalid Chunk]"),D=!1;break}else Un(this.i,this.l,ar,null),Zs(this,ar);if(Xs(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Zt!=4||Ve.length!=0||this.h.h||(this.s=1,nt(16),D=!1),this.o=this.o&&D,!D)Un(this.i,this.l,Ve,"[Invalid Chunked Response]"),zi(this),xs(this);else if(0<Ve.length&&!this.W){this.W=!0;var zt=this.j;zt.g==this&&zt.ba&&!zt.M&&(zt.j.info("Great, no buffering proxy detected. Bytes received: "+Ve.length),Xa(zt),zt.M=!0,nt(11))}}else Un(this.i,this.l,Ve,null),Zs(this,Ve);Zt==4&&zi(this),this.o&&!this.J&&(Zt==4?ks(this.j,this):(this.o=!1,Ma(this)))}else As(this.g),D==400&&0<Ve.indexOf("Unknown SID")?(this.s=3,nt(12)):(this.s=0,nt(13)),zi(this),xs(this)}}}catch{}finally{}};function Xs(d){return d.g?d.u=="GET"&&d.L!=2&&d.j.Ca:!1}function uu(d,T){var D=d.C,X=T.indexOf(`
`,D);return X==-1?_s:(D=Number(T.substring(D,X)),isNaN(D)?ys:(X+=1,X+D>T.length?_s:(T=T.slice(X,X+D),d.C=X+D,T)))}Pn.prototype.cancel=function(){this.J=!0,zi(this)};function Ma(d){d.S=Date.now()+d.I,cu(d,d.I)}function cu(d,T){if(d.B!=null)throw Error("WatchDog timer not null");d.B=yr(g(d.ba,d),T)}function bs(d){d.B&&(o.clearTimeout(d.B),d.B=null)}Pn.prototype.ba=function(){this.B=null;const d=Date.now();0<=d-this.S?(Oa(this.i,this.A),this.L!=2&&(fn(),nt(17)),zi(this),this.s=2,xs(this)):cu(this,this.S-d)};function xs(d){d.j.G==0||d.J||ks(d.j,d)}function zi(d){bs(d);var T=d.M;T&&typeof T.ma=="function"&&T.ma(),d.M=null,mt(d.U),d.g&&(T=d.g,d.g=null,T.abort(),T.ma())}function Zs(d,T){try{var D=d.j;if(D.G!=0&&(D.g==d||ol(D.h,d))){if(!d.K&&ol(D.h,d)&&D.G==3){try{var X=D.Da.g.parse(T)}catch{X=null}if(Array.isArray(X)&&X.length==3){var ge=X;if(ge[0]==0){e:if(!D.u){if(D.g)if(D.g.F+3e3<d.F)Yi(D),Ga(D);else break e;oa(D),nt(18)}}else D.za=ge[1],0<D.za-D.T&&37500>ge[2]&&D.F&&D.v==0&&!D.C&&(D.C=yr(g(D.Za,D),6e3));if(1>=ea(D.h)&&D.ca){try{D.ca()}catch{}D.ca=void 0}}else wr(D,11)}else if((d.K||D.g==d)&&Yi(D),!A(T))for(ge=D.Da.g.parse(T),T=0;T<ge.length;T++){let St=ge[T];if(D.T=St[0],St=St[1],D.G==2)if(St[0]=="c"){D.K=St[1],D.ia=St[2];const zt=St[3];zt!=null&&(D.la=zt,D.j.info("VER="+D.la));const Zt=St[4];Zt!=null&&(D.Aa=Zt,D.j.info("SVER="+D.Aa));const Ji=St[5];Ji!=null&&typeof Ji=="number"&&0<Ji&&(X=1.5*Ji,D.L=X,D.j.info("backChannelRequestTimeoutMs_="+X)),X=D;const ar=d.g;if(ar){const Is=ar.g?ar.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Is){var Ne=X.h;Ne.g||Is.indexOf("spdy")==-1&&Is.indexOf("quic")==-1&&Is.indexOf("h2")==-1||(Ne.j=Ne.l,Ne.g=new Set,Ne.h&&(an(Ne,Ne.h),Ne.h=null))}if(X.D){const Ts=ar.g?ar.g.getResponseHeader("X-HTTP-Session-Id"):null;Ts&&(X.ya=Ts,Ht(X.I,X.D,Ts))}}D.G=3,D.l&&D.l.ua(),D.ba&&(D.R=Date.now()-d.F,D.j.info("Handshake RTT: "+D.R+"ms")),X=D;var Ve=d;if(X.qa=w(X,X.J?X.ia:null,X.W),Ve.K){ll(X.h,Ve);var xt=Ve,Lt=X.L;Lt&&(xt.I=Lt),xt.B&&(bs(xt),Ma(xt)),X.g=Ve}else Ja(X);0<D.i.length&&Qa(D)}else St[0]!="stop"&&St[0]!="close"||wr(D,7);else D.G==3&&(St[0]=="stop"||St[0]=="close"?St[0]=="stop"?wr(D,7):Qi(D):St[0]!="noop"&&D.l&&D.l.ta(St),D.v=0)}}fn(4)}catch{}}var Wc=class{constructor(d,T){this.g=d,this.map=T}};function al(d){this.l=d||10,o.PerformanceNavigationTiming?(d=o.performance.getEntriesByType("navigation"),d=0<d.length&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function hu(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function ea(d){return d.h?1:d.g?d.g.size:0}function ol(d,T){return d.h?d.h==T:d.g?d.g.has(T):!1}function an(d,T){d.g?d.g.add(T):d.h=T}function ll(d,T){d.h&&d.h==T?d.h=null:d.g&&d.g.has(T)&&d.g.delete(T)}al.prototype.cancel=function(){if(this.i=ul(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function ul(d){if(d.h!=null)return d.i.concat(d.h.D);if(d.g!=null&&d.g.size!==0){let T=d.i;for(const D of d.g.values())T=T.concat(D.D);return T}return x(d.i)}function du(d){if(d.V&&typeof d.V=="function")return d.V();if(typeof Map<"u"&&d instanceof Map||typeof Set<"u"&&d instanceof Set)return Array.from(d.values());if(typeof d=="string")return d.split("");if(l(d)){for(var T=[],D=d.length,X=0;X<D;X++)T.push(d[X]);return T}T=[],D=0;for(X in d)T[D++]=d[X];return T}function cl(d){if(d.na&&typeof d.na=="function")return d.na();if(!d.V||typeof d.V!="function"){if(typeof Map<"u"&&d instanceof Map)return Array.from(d.keys());if(!(typeof Set<"u"&&d instanceof Set)){if(l(d)||typeof d=="string"){var T=[];d=d.length;for(var D=0;D<d;D++)T.push(D);return T}T=[],D=0;for(const X in d)T[D++]=X;return T}}}function fu(d,T){if(d.forEach&&typeof d.forEach=="function")d.forEach(T,void 0);else if(l(d)||typeof d=="string")Array.prototype.forEach.call(d,T,void 0);else for(var D=cl(d),X=du(d),ge=X.length,Ne=0;Ne<ge;Ne++)T.call(void 0,X[Ne],D&&D[Ne],d)}var Qr=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Va(d,T){if(d){d=d.split("&");for(var D=0;D<d.length;D++){var X=d[D].indexOf("="),ge=null;if(0<=X){var Ne=d[D].substring(0,X);ge=d[D].substring(X+1)}else Ne=d[D];T(Ne,ge?decodeURIComponent(ge.replace(/\+/g," ")):"")}}}function Nn(d){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,d instanceof Nn){this.h=d.h,ta(this,d.j),this.o=d.o,this.g=d.g,Ua(this,d.s),this.l=d.l;var T=d.i,D=new Ss;D.i=T.i,T.g&&(D.g=new Map(T.g),D.h=T.h),hl(this,D),this.m=d.m}else d&&(T=String(d).match(Qr))?(this.h=!1,ta(this,T[1]||"",!0),this.o=ra(T[2]||""),this.g=ra(T[3]||"",!0),Ua(this,T[4]),this.l=ra(T[5]||"",!0),hl(this,T[6]||"",!0),this.m=ra(T[7]||"")):(this.h=!1,this.i=new Ss(null,this.h))}Nn.prototype.toString=function(){var d=[],T=this.j;T&&d.push(Hi(T,pu,!0),":");var D=this.g;return(D||T=="file")&&(d.push("//"),(T=this.o)&&d.push(Hi(T,pu,!0),"@"),d.push(encodeURIComponent(String(D)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),D=this.s,D!=null&&d.push(":",String(D))),(D=this.l)&&(this.g&&D.charAt(0)!="/"&&d.push("/"),d.push(Hi(D,D.charAt(0)=="/"?$i:Qc,!0))),(D=this.i.toString())&&d.push("?",D),(D=this.m)&&d.push("#",Hi(D,Ka)),d.join("")};function Or(d){return new Nn(d)}function ta(d,T,D){d.j=D?ra(T,!0):T,d.j&&(d.j=d.j.replace(/:$/,""))}function Ua(d,T){if(T){if(T=Number(T),isNaN(T)||0>T)throw Error("Bad port number "+T);d.s=T}else d.s=null}function hl(d,T,D){T instanceof Ss?(d.i=T,Yc(d.i,d.h)):(D||(T=Hi(T,Ba)),d.i=new Ss(T,d.h))}function Ht(d,T,D){d.i.set(T,D)}function na(d){return Ht(d,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),d}function ra(d,T){return d?T?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function Hi(d,T,D){return typeof d=="string"?(d=encodeURI(d).replace(T,Gc),D&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function Gc(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var pu=/[#\/\?@]/g,Qc=/[#\?:]/g,$i=/[#\?]/g,Ba=/[#\?@]/g,Ka=/#/g;function Ss(d,T){this.h=this.g=null,this.i=d||null,this.j=!!T}function on(d){d.g||(d.g=new Map,d.h=0,d.i&&Va(d.i,function(T,D){d.add(decodeURIComponent(T.replace(/\+/g," ")),D)}))}t=Ss.prototype,t.add=function(d,T){on(this),this.i=null,d=Ns(this,d);var D=this.g.get(d);return D||this.g.set(d,D=[]),D.push(T),this.h+=1,this};function mu(d,T){on(d),T=Ns(d,T),d.g.has(T)&&(d.i=null,d.h-=d.g.get(T).length,d.g.delete(T))}function dl(d,T){return on(d),T=Ns(d,T),d.g.has(T)}t.forEach=function(d,T){on(this),this.g.forEach(function(D,X){D.forEach(function(ge){d.call(T,ge,X,this)},this)},this)},t.na=function(){on(this);const d=Array.from(this.g.values()),T=Array.from(this.g.keys()),D=[];for(let X=0;X<T.length;X++){const ge=d[X];for(let Ne=0;Ne<ge.length;Ne++)D.push(T[X])}return D},t.V=function(d){on(this);let T=[];if(typeof d=="string")dl(this,d)&&(T=T.concat(this.g.get(Ns(this,d))));else{d=Array.from(this.g.values());for(let D=0;D<d.length;D++)T=T.concat(d[D])}return T},t.set=function(d,T){return on(this),this.i=null,d=Ns(this,d),dl(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[T]),this.h+=1,this},t.get=function(d,T){return d?(d=this.V(d),0<d.length?String(d[0]):T):T};function yt(d,T,D){mu(d,T),0<D.length&&(d.i=null,d.g.set(Ns(d,T),x(D)),d.h+=D.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],T=Array.from(this.g.keys());for(var D=0;D<T.length;D++){var X=T[D];const Ne=encodeURIComponent(String(X)),Ve=this.V(X);for(X=0;X<Ve.length;X++){var ge=Ne;Ve[X]!==""&&(ge+="="+encodeURIComponent(String(Ve[X]))),d.push(ge)}}return this.i=d.join("&")};function Ns(d,T){return T=String(T),d.j&&(T=T.toLowerCase()),T}function Yc(d,T){T&&!d.j&&(on(d),d.i=null,d.g.forEach(function(D,X){var ge=X.toLowerCase();X!=ge&&(mu(this,X),yt(this,ge,D))},d)),d.j=T}function ki(d,T){const D=new Vn;if(o.Image){const X=new Image;X.onload=m(di,D,"TestLoadImage: loaded",!0,T,X),X.onerror=m(di,D,"TestLoadImage: error",!1,T,X),X.onabort=m(di,D,"TestLoadImage: abort",!1,T,X),X.ontimeout=m(di,D,"TestLoadImage: timeout",!1,T,X),o.setTimeout(function(){X.ontimeout&&X.ontimeout()},1e4),X.src=d}else T(!1)}function gu(d,T){const D=new Vn,X=new AbortController,ge=setTimeout(()=>{X.abort(),di(D,"TestPingServer: timeout",!1,T)},1e4);fetch(d,{signal:X.signal}).then(Ne=>{clearTimeout(ge),Ne.ok?di(D,"TestPingServer: ok",!0,T):di(D,"TestPingServer: server error",!1,T)}).catch(()=>{clearTimeout(ge),di(D,"TestPingServer: error",!1,T)})}function di(d,T,D,X,ge){try{ge&&(ge.onload=null,ge.onerror=null,ge.onabort=null,ge.ontimeout=null),X(D)}catch{}}function qa(){this.g=new Mn}function fl(d,T,D){const X=D||"";try{fu(d,function(ge,Ne){let Ve=ge;u(ge)&&(Ve=ft(ge)),T.push(X+Ne+"="+encodeURIComponent(Ve))})}catch(ge){throw T.push(X+"type="+encodeURIComponent("_badmap")),ge}}function za(d){this.l=d.Ub||null,this.j=d.eb||!1}b(za,bt),za.prototype.g=function(){return new Ha(this.l,this.j)},za.prototype.i=function(d){return function(){return d}}({});function Ha(d,T){tt.call(this),this.D=d,this.o=T,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}b(Ha,tt),t=Ha.prototype,t.open=function(d,T){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=d,this.A=T,this.readyState=1,fi(this)},t.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const T={headers:this.u,method:this.B,credentials:this.m,cache:void 0};d&&(T.body=d),(this.D||o).fetch(new Request(this.A,T)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Wi(this)),this.readyState=0},t.Sa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,fi(this)),this.g&&(this.readyState=3,fi(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;vu(this)}else d.text().then(this.Ra.bind(this),this.ga.bind(this))};function vu(d){d.j.read().then(d.Pa.bind(d)).catch(d.ga.bind(d))}t.Pa=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var T=d.value?d.value:new Uint8Array(0);(T=this.v.decode(T,{stream:!d.done}))&&(this.response=this.responseText+=T)}d.done?Wi(this):fi(this),this.readyState==3&&vu(this)}},t.Ra=function(d){this.g&&(this.response=this.responseText=d,Wi(this))},t.Qa=function(d){this.g&&(this.response=d,Wi(this))},t.ga=function(){this.g&&Wi(this)};function Wi(d){d.readyState=4,d.l=null,d.j=null,d.v=null,fi(d)}t.setRequestHeader=function(d,T){this.u.append(d,T)},t.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],T=this.h.entries();for(var D=T.next();!D.done;)D=D.value,d.push(D[0]+": "+D[1]),D=T.next();return d.join(`\r
`)};function fi(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(Ha.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function Gi(d){let T="";return B(d,function(D,X){T+=X,T+=":",T+=D,T+=`\r
`}),T}function pl(d,T,D){e:{for(X in D){var X=!1;break e}X=!0}X||(D=Gi(D),typeof d=="string"?D!=null&&encodeURIComponent(String(D)):Ht(d,T,D))}function qt(d){tt.call(this),this.headers=new Map,this.o=d||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}b(qt,tt);var ml=/^https?$/i,$a=["POST","PUT"];t=qt.prototype,t.Ha=function(d){this.J=d},t.ea=function(d,T,D,X){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);T=T?T.toUpperCase():"GET",this.D=d,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Dr.g(),this.v=this.o?vr(this.o):vr(Dr),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(T,String(d),!0),this.B=!1}catch(Ne){gl(this,Ne);return}if(d=D||"",D=new Map(this.headers),X)if(Object.getPrototypeOf(X)===Object.prototype)for(var ge in X)D.set(ge,X[ge]);else if(typeof X.keys=="function"&&typeof X.get=="function")for(const Ne of X.keys())D.set(Ne,X.get(Ne));else throw Error("Unknown input type for opt_headers: "+String(X));X=Array.from(D.keys()).find(Ne=>Ne.toLowerCase()=="content-type"),ge=o.FormData&&d instanceof o.FormData,!(0<=Array.prototype.indexOf.call($a,T,void 0))||X||ge||D.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Ne,Ve]of D)this.g.setRequestHeader(Ne,Ve);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{pi(this),this.u=!0,this.g.send(d),this.u=!1}catch(Ne){gl(this,Ne)}};function gl(d,T){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=T,d.m=5,vl(d),ia(d)}function vl(d){d.A||(d.A=!0,ct(d,"complete"),ct(d,"error"))}t.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=d||7,ct(this,"complete"),ct(this,"abort"),ia(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ia(this,!0)),qt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?yl(this):this.bb())},t.bb=function(){yl(this)};function yl(d){if(d.h&&typeof a<"u"&&(!d.v[1]||Wn(d)!=4||d.Z()!=2)){if(d.u&&Wn(d)==4)ot(d.Ea,0,d);else if(ct(d,"readystatechange"),Wn(d)==4){d.h=!1;try{const Ve=d.Z();e:switch(Ve){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var T=!0;break e;default:T=!1}var D;if(!(D=T)){var X;if(X=Ve===0){var ge=String(d.D).match(Qr)[1]||null;!ge&&o.self&&o.self.location&&(ge=o.self.location.protocol.slice(0,-1)),X=!ml.test(ge?ge.toLowerCase():"")}D=X}if(D)ct(d,"complete"),ct(d,"success");else{d.m=6;try{var Ne=2<Wn(d)?d.g.statusText:""}catch{Ne=""}d.l=Ne+" ["+d.Z()+"]",vl(d)}}finally{ia(d)}}}}function ia(d,T){if(d.g){pi(d);const D=d.g,X=d.v[0]?()=>{}:null;d.g=null,d.v=null,T||ct(d,"ready");try{D.onreadystatechange=X}catch{}}}function pi(d){d.I&&(o.clearTimeout(d.I),d.I=null)}t.isActive=function(){return!!this.g};function Wn(d){return d.g?d.g.readyState:0}t.Z=function(){try{return 2<Wn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(d){if(this.g){var T=this.g.responseText;return d&&T.indexOf(d)==0&&(T=T.substring(d.length)),kt(T)}};function yu(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.H){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function As(d){const T={};d=(d.g&&2<=Wn(d)&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let X=0;X<d.length;X++){if(A(d[X]))continue;var D=E(d[X]);const ge=D[0];if(D=D[1],typeof D!="string")continue;D=D.trim();const Ne=T[ge]||[];T[ge]=Ne,Ne.push(D)}L(T,function(X){return X.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function sr(d,T,D){return D&&D.internalChannelParams&&D.internalChannelParams[d]||T}function Wa(d){this.Aa=0,this.i=[],this.j=new Vn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=sr("failFast",!1,d),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=sr("baseRetryDelayMs",5e3,d),this.cb=sr("retryDelaySeedMs",1e4,d),this.Wa=sr("forwardChannelMaxRetries",2,d),this.wa=sr("forwardChannelRequestTimeoutMs",2e4,d),this.pa=d&&d.xmlHttpFactory||void 0,this.Xa=d&&d.Tb||void 0,this.Ca=d&&d.useFetchStreams||!1,this.L=void 0,this.J=d&&d.supportsCrossDomainXhr||!1,this.K="",this.h=new al(d&&d.concurrentRequestLimit),this.Da=new qa,this.P=d&&d.fastHandshake||!1,this.O=d&&d.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=d&&d.Rb||!1,d&&d.xa&&this.j.xa(),d&&d.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&d&&d.detectBufferingProxy||!1,this.ja=void 0,d&&d.longPollingTimeout&&0<d.longPollingTimeout&&(this.ja=d.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Wa.prototype,t.la=8,t.G=1,t.connect=function(d,T,D,X){nt(0),this.W=d,this.H=T||{},D&&X!==void 0&&(this.H.OSID=D,this.H.OAID=X),this.F=this.X,this.I=w(this,null,this.W),Qa(this)};function Qi(d){if(sa(d),d.G==3){var T=d.U++,D=Or(d.I);if(Ht(D,"SID",d.K),Ht(D,"RID",T),Ht(D,"TYPE","terminate"),Es(d,D),T=new Pn(d,d.j,T),T.L=2,T.v=na(Or(D)),D=!1,o.navigator&&o.navigator.sendBeacon)try{D=o.navigator.sendBeacon(T.v.toString(),"")}catch{}!D&&o.Image&&(new Image().src=T.v,D=!0),D||(T.g=K(T.j,null),T.g.ea(T.v)),T.F=Date.now(),Ma(T)}eo(d)}function Ga(d){d.g&&(Xa(d),d.g.cancel(),d.g=null)}function sa(d){Ga(d),d.u&&(o.clearTimeout(d.u),d.u=null),Yi(d),d.h.cancel(),d.s&&(typeof d.s=="number"&&o.clearTimeout(d.s),d.s=null)}function Qa(d){if(!hu(d.h)&&!d.s){d.s=!0;var T=d.Ga;U||ne(),z||(U(),z=!0),H.add(T,d),d.B=0}}function _l(d,T){return ea(d.h)>=d.h.j-(d.s?1:0)?!1:d.s?(d.i=T.D.concat(d.i),!0):d.G==1||d.G==2||d.B>=(d.Va?0:d.Wa)?!1:(d.s=yr(g(d.Ga,d,T),Za(d,d.B)),d.B++,!0)}t.Ga=function(d){if(this.s)if(this.s=null,this.G==1){if(!d){this.U=Math.floor(1e5*Math.random()),d=this.U++;const ge=new Pn(this,this.j,d);let Ne=this.o;if(this.S&&(Ne?(Ne=y(Ne),R(Ne,this.S)):Ne=this.S),this.m!==null||this.O||(ge.H=Ne,Ne=null),this.P)e:{for(var T=0,D=0;D<this.i.length;D++){t:{var X=this.i[D];if("__data__"in X.map&&(X=X.map.__data__,typeof X=="string")){X=X.length;break t}X=void 0}if(X===void 0)break;if(T+=X,4096<T){T=D;break e}if(T===4096||D===this.i.length-1){T=D+1;break e}}T=1e3}else T=1e3;T=aa(this,ge,T),D=Or(this.I),Ht(D,"RID",d),Ht(D,"CVER",22),this.D&&Ht(D,"X-HTTP-Session-Id",this.D),Es(this,D),Ne&&(this.O?T="headers="+encodeURIComponent(String(Gi(Ne)))+"&"+T:this.m&&pl(D,this.m,Ne)),an(this.h,ge),this.Ua&&Ht(D,"TYPE","init"),this.P?(Ht(D,"$req",T),Ht(D,"SID","null"),ge.T=!0,ws(ge,D,null)):ws(ge,D,T),this.G=2}}else this.G==3&&(d?Ya(this,d):this.i.length==0||hu(this.h)||Ya(this))};function Ya(d,T){var D;T?D=T.l:D=d.U++;const X=Or(d.I);Ht(X,"SID",d.K),Ht(X,"RID",D),Ht(X,"AID",d.T),Es(d,X),d.m&&d.o&&pl(X,d.m,d.o),D=new Pn(d,d.j,D,d.B+1),d.m===null&&(D.H=d.o),T&&(d.i=T.D.concat(d.i)),T=aa(d,D,1e3),D.I=Math.round(.5*d.wa)+Math.round(.5*d.wa*Math.random()),an(d.h,D),ws(D,X,T)}function Es(d,T){d.H&&B(d.H,function(D,X){Ht(T,X,D)}),d.l&&fu({},function(D,X){Ht(T,X,D)})}function aa(d,T,D){D=Math.min(d.i.length,D);var X=d.l?g(d.l.Na,d.l,d):null;e:{var ge=d.i;let Ne=-1;for(;;){const Ve=["count="+D];Ne==-1?0<D?(Ne=ge[0].g,Ve.push("ofs="+Ne)):Ne=0:Ve.push("ofs="+Ne);let xt=!0;for(let Lt=0;Lt<D;Lt++){let St=ge[Lt].g;const zt=ge[Lt].map;if(St-=Ne,0>St)Ne=Math.max(0,ge[Lt].g-100),xt=!1;else try{fl(zt,Ve,"req"+St+"_")}catch{X&&X(zt)}}if(xt){X=Ve.join("&");break e}}}return d=d.i.splice(0,D),T.D=d,X}function Ja(d){if(!d.g&&!d.u){d.Y=1;var T=d.Fa;U||ne(),z||(U(),z=!0),H.add(T,d),d.v=0}}function oa(d){return d.g||d.u||3<=d.v?!1:(d.Y++,d.u=yr(g(d.Fa,d),Za(d,d.v)),d.v++,!0)}t.Fa=function(){if(this.u=null,_u(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var d=2*this.R;this.j.info("BP detection timer enabled: "+d),this.A=yr(g(this.ab,this),d)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,nt(10),Ga(this),_u(this))};function Xa(d){d.A!=null&&(o.clearTimeout(d.A),d.A=null)}function _u(d){d.g=new Pn(d,d.j,"rpc",d.Y),d.m===null&&(d.g.H=d.o),d.g.O=0;var T=Or(d.qa);Ht(T,"RID","rpc"),Ht(T,"SID",d.K),Ht(T,"AID",d.T),Ht(T,"CI",d.F?"0":"1"),!d.F&&d.ja&&Ht(T,"TO",d.ja),Ht(T,"TYPE","xmlhttp"),Es(d,T),d.m&&d.o&&pl(T,d.m,d.o),d.L&&(d.g.I=d.L);var D=d.g;d=d.ia,D.L=1,D.v=na(Or(T)),D.m=null,D.P=!0,Js(D,d)}t.Za=function(){this.C!=null&&(this.C=null,Ga(this),oa(this),nt(19))};function Yi(d){d.C!=null&&(o.clearTimeout(d.C),d.C=null)}function ks(d,T){var D=null;if(d.g==T){Yi(d),Xa(d),d.g=null;var X=2}else if(ol(d.h,T))D=T.D,ll(d.h,T),X=1;else return;if(d.G!=0){if(T.o)if(X==1){D=T.m?T.m.length:0,T=Date.now()-T.F;var ge=d.B;X=jr(),ct(X,new Wr(X,D)),Qa(d)}else Ja(d);else if(ge=T.s,ge==3||ge==0&&0<T.X||!(X==1&&_l(d,T)||X==2&&oa(d)))switch(D&&0<D.length&&(T=d.h,T.i=T.i.concat(D)),ge){case 1:wr(d,5);break;case 4:wr(d,10);break;case 3:wr(d,6);break;default:wr(d,2)}}}function Za(d,T){let D=d.Ta+Math.floor(Math.random()*d.cb);return d.isActive()||(D*=2),D*T}function wr(d,T){if(d.j.info("Error code "+T),T==2){var D=g(d.fb,d),X=d.Xa;const ge=!X;X=new Nn(X||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||ta(X,"https"),na(X),ge?ki(X.toString(),D):gu(X.toString(),D)}else nt(2);d.G=0,d.l&&d.l.sa(T),eo(d),sa(d)}t.fb=function(d){d?(this.j.info("Successfully pinged google.com"),nt(2)):(this.j.info("Failed to ping google.com"),nt(1))};function eo(d){if(d.G=0,d.ka=[],d.l){const T=ul(d.h);(T.length!=0||d.i.length!=0)&&(k(d.ka,T),k(d.ka,d.i),d.h.i.length=0,x(d.i),d.i.length=0),d.l.ra()}}function w(d,T,D){var X=D instanceof Nn?Or(D):new Nn(D);if(X.g!="")T&&(X.g=T+"."+X.g),Ua(X,X.s);else{var ge=o.location;X=ge.protocol,T=T?T+"."+ge.hostname:ge.hostname,ge=+ge.port;var Ne=new Nn(null);X&&ta(Ne,X),T&&(Ne.g=T),ge&&Ua(Ne,ge),D&&(Ne.l=D),X=Ne}return D=d.D,T=d.ya,D&&T&&Ht(X,D,T),Ht(X,"VER",d.la),Es(d,X),X}function K(d,T,D){if(T&&!d.J)throw Error("Can't create secondary domain capable XhrIo object.");return T=d.Ca&&!d.pa?new qt(new za({eb:D})):new qt(d.pa),T.Ha(d.J),T}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function ie(){}t=ie.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function ue(){}ue.prototype.g=function(d,T){return new ve(d,T)};function ve(d,T){tt.call(this),this.g=new Wa(T),this.l=d,this.h=T&&T.messageUrlParams||null,d=T&&T.messageHeaders||null,T&&T.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=T&&T.initMessageHeaders||null,T&&T.messageContentType&&(d?d["X-WebChannel-Content-Type"]=T.messageContentType:d={"X-WebChannel-Content-Type":T.messageContentType}),T&&T.va&&(d?d["X-WebChannel-Client-Profile"]=T.va:d={"X-WebChannel-Client-Profile":T.va}),this.g.S=d,(d=T&&T.Sb)&&!A(d)&&(this.g.m=d),this.v=T&&T.supportsCrossDomainXhr||!1,this.u=T&&T.sendRawJson||!1,(T=T&&T.httpSessionIdParam)&&!A(T)&&(this.g.D=T,d=this.h,d!==null&&T in d&&(d=this.h,T in d&&delete d[T])),this.j=new Qe(this)}b(ve,tt),ve.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},ve.prototype.close=function(){Qi(this.g)},ve.prototype.o=function(d){var T=this.g;if(typeof d=="string"){var D={};D.__data__=d,d=D}else this.u&&(D={},D.__data__=ft(d),d=D);T.i.push(new Wc(T.Ya++,d)),T.G==3&&Qa(T)},ve.prototype.N=function(){this.g.l=null,delete this.j,Qi(this.g),delete this.g,ve.aa.N.call(this)};function Ee(d){xn.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var T=d.__sm__;if(T){e:{for(const D in T){d=D;break e}d=void 0}(this.i=d)&&(d=this.i,T=T!==null&&d in T?T[d]:void 0),this.data=T}else this.data=d}b(Ee,xn);function Oe(){Dt.call(this),this.status=1}b(Oe,Dt);function Qe(d){this.g=d}b(Qe,ie),Qe.prototype.ua=function(){ct(this.g,"a")},Qe.prototype.ta=function(d){ct(this.g,new Ee(d))},Qe.prototype.sa=function(d){ct(this.g,new Oe)},Qe.prototype.ra=function(){ct(this.g,"b")},ue.prototype.createWebChannel=ue.prototype.g,ve.prototype.send=ve.prototype.o,ve.prototype.open=ve.prototype.m,ve.prototype.close=ve.prototype.close,vx=function(){return new ue},gx=function(){return jr()},mx=lt,C0={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},_r.NO_ERROR=0,_r.TIMEOUT=8,_r.HTTP_ERROR=6,ap=_r,Gr.COMPLETE="complete",px=Gr,Bt.EventType=$n,$n.OPEN="a",$n.CLOSE="b",$n.ERROR="c",$n.MESSAGE="d",tt.prototype.listen=tt.prototype.K,Th=Bt,qt.prototype.listenOnce=qt.prototype.L,qt.prototype.getLastError=qt.prototype.Ka,qt.prototype.getLastErrorCode=qt.prototype.Ba,qt.prototype.getStatus=qt.prototype.Z,qt.prototype.getResponseJson=qt.prototype.Oa,qt.prototype.getResponseText=qt.prototype.oa,qt.prototype.send=qt.prototype.ea,qt.prototype.setWithCredentials=qt.prototype.Ha,fx=qt}).apply(typeof jf<"u"?jf:typeof self<"u"?self:typeof window<"u"?window:{});const R_="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ir{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ir.UNAUTHENTICATED=new Ir(null),Ir.GOOGLE_CREDENTIALS=new Ir("google-credentials-uid"),Ir.FIRST_PARTY=new Ir("first-party-uid"),Ir.MOCK_USER=new Ir("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Kc="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ql=new r2("@firebase/firestore");function _h(){return Ql.logLevel}function st(t,...e){if(Ql.logLevel<=Ft.DEBUG){const n=e.map(m2);Ql.debug(`Firestore (${Kc}): ${t}`,...n)}}function Ra(t,...e){if(Ql.logLevel<=Ft.ERROR){const n=e.map(m2);Ql.error(`Firestore (${Kc}): ${t}`,...n)}}function Ec(t,...e){if(Ql.logLevel<=Ft.WARN){const n=e.map(m2);Ql.warn(`Firestore (${Kc}): ${t}`,...n)}}function m2(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wt(t="Unexpected state"){const e=`FIRESTORE (${Kc}) INTERNAL ASSERTION FAILED: `+t;throw Ra(e),new Error(e)}function Yt(t,e){t||wt()}function Et(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Re={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class et extends Qs{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aa{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yx{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class d8{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ir.UNAUTHENTICATED))}shutdown(){}}class f8{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class p8{constructor(e){this.t=e,this.currentUser=Ir.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Yt(this.o===void 0);let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new Aa;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Aa,e.enqueueRetryable(()=>i(this.currentUser))};const a=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},o=l=>{st("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(l=>o(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?o(l):(st("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Aa)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(st("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Yt(typeof r.accessToken=="string"),new yx(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Yt(e===null||typeof e=="string"),new Ir(e)}}class m8{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Ir.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class g8{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new m8(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Ir.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class v8{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class y8{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Yt(this.o===void 0);const r=s=>{s.error!=null&&st("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const a=s.token!==this.R;return this.R=s.token,st("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{st("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):st("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Yt(typeof n.token=="string"),this.R=n.token,new v8(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _8(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _x{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=_8(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function Ut(t,e){return t<e?-1:t>e?1:0}function kc(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jn{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new et(Re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new et(Re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new et(Re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new et(Re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Jn.fromMillis(Date.now())}static fromDate(e){return Jn.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Jn(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ut(this.nanoseconds,e.nanoseconds):Ut(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{constructor(e){this.timestamp=e}static fromTimestamp(e){return new At(e)}static min(){return new At(new Jn(0,0))}static max(){return new At(new Jn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vd{constructor(e,n,r){n===void 0?n=0:n>e.length&&wt(),r===void 0?r=e.length-n:r>e.length-n&&wt(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return vd.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof vd?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),a=n.get(i);if(s<a)return-1;if(s>a)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class un extends vd{construct(e,n,r){return new un(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new et(Re.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new un(n)}static emptyPath(){return new un([])}}const w8=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class dr extends vd{construct(e,n,r){return new dr(e,n,r)}static isValidIdentifier(e){return w8.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),dr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new dr(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new et(Re.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let a=!1;for(;i<e.length;){const o=e[i];if(o==="\\"){if(i+1===e.length)throw new et(Re.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new et(Re.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else o==="`"?(a=!a,i++):o!=="."||a?(r+=o,i++):(s(),i++)}if(s(),a)throw new et(Re.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new dr(n)}static emptyPath(){return new dr([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ht{constructor(e){this.path=e}static fromPath(e){return new ht(un.fromString(e))}static fromName(e){return new ht(un.fromString(e).popFirst(5))}static empty(){return new ht(un.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&un.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return un.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ht(new un(e.slice()))}}function b8(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=At.fromTimestamp(r===1e9?new Jn(n+1,0):new Jn(n,r));return new Wo(i,ht.empty(),e)}function x8(t){return new Wo(t.readTime,t.key,-1)}class Wo{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Wo(At.min(),ht.empty(),-1)}static max(){return new Wo(At.max(),ht.empty(),-1)}}function S8(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ht.comparator(t.documentKey,e.documentKey),n!==0?n:Ut(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N8="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class A8{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dd(t){if(t.code!==Re.FAILED_PRECONDITION||t.message!==N8)throw t;st("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ue{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&wt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Ue((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof Ue?n:Ue.resolve(n)}catch(n){return Ue.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):Ue.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):Ue.reject(n)}static resolve(e){return new Ue((n,r)=>{n(e)})}static reject(e){return new Ue((n,r)=>{r(e)})}static waitFor(e){return new Ue((n,r)=>{let i=0,s=0,a=!1;e.forEach(o=>{++i,o.next(()=>{++s,a&&s===i&&n()},l=>r(l))}),a=!0,s===i&&n()})}static or(e){let n=Ue.resolve(!1);for(const r of e)n=n.next(i=>i?Ue.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new Ue((r,i)=>{const s=e.length,a=new Array(s);let o=0;for(let l=0;l<s;l++){const u=l;n(e[u]).next(h=>{a[u]=h,++o,o===s&&r(a)},h=>i(h))}})}static doWhile(e,n){return new Ue((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function E8(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Fd(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g2{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}g2.oe=-1;function Vm(t){return t==null}function Jp(t){return t===0&&1/t==-1/0}function k8(t){return typeof t=="number"&&Number.isInteger(t)&&!Jp(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j_(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ru(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function wx(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(e,n){this.comparator=e,this.root=n||hr.EMPTY}insert(e,n){return new wn(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,hr.BLACK,null,null))}remove(e){return new wn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,hr.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Df(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Df(this.root,e,this.comparator,!1)}getReverseIterator(){return new Df(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Df(this.root,e,this.comparator,!0)}}class Df{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class hr{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??hr.RED,this.left=i??hr.EMPTY,this.right=s??hr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new hr(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return hr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return hr.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,hr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,hr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw wt();const e=this.left.check();if(e!==this.right.check())throw wt();return e+(this.isRed()?0:1)}}hr.EMPTY=null,hr.RED=!0,hr.BLACK=!1;hr.EMPTY=new class{constructor(){this.size=0}get key(){throw wt()}get value(){throw wt()}get color(){throw wt()}get left(){throw wt()}get right(){throw wt()}copy(e,n,r,i,s){return this}insert(e,n,r){return new hr(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr{constructor(e){this.comparator=e,this.data=new wn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new D_(this.data.getIterator())}getIteratorFrom(e){return new D_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof pr)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new pr(this.comparator);return n.data=e,n}}class D_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wi{constructor(e){this.fields=e,e.sort(dr.comparator)}static empty(){return new wi([])}unionWith(e){let n=new pr(dr.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new wi(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return kc(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bx extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gr{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new bx("Invalid base64 string: "+s):s}}(e);return new gr(n)}static fromUint8Array(e){const n=function(i){let s="";for(let a=0;a<i.length;++a)s+=String.fromCharCode(i[a]);return s}(e);return new gr(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ut(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}gr.EMPTY_BYTE_STRING=new gr("");const I8=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Go(t){if(Yt(!!t),typeof t=="string"){let e=0;const n=I8.exec(t);if(Yt(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Rn(t.seconds),nanos:Rn(t.nanos)}}function Rn(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Yl(t){return typeof t=="string"?gr.fromBase64String(t):gr.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v2(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function y2(t){const e=t.mapValue.fields.__previous_value__;return v2(e)?y2(e):e}function yd(t){const e=Go(t.mapValue.fields.__local_write_time__.timestampValue);return new Jn(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T8{constructor(e,n,r,i,s,a,o,l,u){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=o,this.longPollingOptions=l,this.useFetchStreams=u}}class _d{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new _d("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof _d&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ff={mapValue:{}};function Jl(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?v2(t)?4:C8(t)?9007199254740991:P8(t)?10:11:wt()}function Ws(t,e){if(t===e)return!0;const n=Jl(t);if(n!==Jl(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return yd(t).isEqual(yd(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const a=Go(i.timestampValue),o=Go(s.timestampValue);return a.seconds===o.seconds&&a.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Yl(i.bytesValue).isEqual(Yl(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Rn(i.geoPointValue.latitude)===Rn(s.geoPointValue.latitude)&&Rn(i.geoPointValue.longitude)===Rn(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Rn(i.integerValue)===Rn(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const a=Rn(i.doubleValue),o=Rn(s.doubleValue);return a===o?Jp(a)===Jp(o):isNaN(a)&&isNaN(o)}return!1}(t,e);case 9:return kc(t.arrayValue.values||[],e.arrayValue.values||[],Ws);case 10:case 11:return function(i,s){const a=i.mapValue.fields||{},o=s.mapValue.fields||{};if(j_(a)!==j_(o))return!1;for(const l in a)if(a.hasOwnProperty(l)&&(o[l]===void 0||!Ws(a[l],o[l])))return!1;return!0}(t,e);default:return wt()}}function wd(t,e){return(t.values||[]).find(n=>Ws(n,e))!==void 0}function Ic(t,e){if(t===e)return 0;const n=Jl(t),r=Jl(e);if(n!==r)return Ut(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ut(t.booleanValue,e.booleanValue);case 2:return function(s,a){const o=Rn(s.integerValue||s.doubleValue),l=Rn(a.integerValue||a.doubleValue);return o<l?-1:o>l?1:o===l?0:isNaN(o)?isNaN(l)?0:-1:1}(t,e);case 3:return F_(t.timestampValue,e.timestampValue);case 4:return F_(yd(t),yd(e));case 5:return Ut(t.stringValue,e.stringValue);case 6:return function(s,a){const o=Yl(s),l=Yl(a);return o.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,a){const o=s.split("/"),l=a.split("/");for(let u=0;u<o.length&&u<l.length;u++){const h=Ut(o[u],l[u]);if(h!==0)return h}return Ut(o.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,a){const o=Ut(Rn(s.latitude),Rn(a.latitude));return o!==0?o:Ut(Rn(s.longitude),Rn(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return O_(t.arrayValue,e.arrayValue);case 10:return function(s,a){var o,l,u,h;const p=s.fields||{},g=a.fields||{},m=(o=p.value)===null||o===void 0?void 0:o.arrayValue,b=(l=g.value)===null||l===void 0?void 0:l.arrayValue,x=Ut(((u=m==null?void 0:m.values)===null||u===void 0?void 0:u.length)||0,((h=b==null?void 0:b.values)===null||h===void 0?void 0:h.length)||0);return x!==0?x:O_(m,b)}(t.mapValue,e.mapValue);case 11:return function(s,a){if(s===Ff.mapValue&&a===Ff.mapValue)return 0;if(s===Ff.mapValue)return 1;if(a===Ff.mapValue)return-1;const o=s.fields||{},l=Object.keys(o),u=a.fields||{},h=Object.keys(u);l.sort(),h.sort();for(let p=0;p<l.length&&p<h.length;++p){const g=Ut(l[p],h[p]);if(g!==0)return g;const m=Ic(o[l[p]],u[h[p]]);if(m!==0)return m}return Ut(l.length,h.length)}(t.mapValue,e.mapValue);default:throw wt()}}function F_(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ut(t,e);const n=Go(t),r=Go(e),i=Ut(n.seconds,r.seconds);return i!==0?i:Ut(n.nanos,r.nanos)}function O_(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=Ic(n[i],r[i]);if(s)return s}return Ut(n.length,r.length)}function Tc(t){return L0(t)}function L0(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Go(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Yl(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ht.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=L0(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const a of r)s?s=!1:i+=",",i+=`${a}:${L0(n.fields[a])}`;return i+"}"}(t.mapValue):wt()}function M_(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function R0(t){return!!t&&"integerValue"in t}function _2(t){return!!t&&"arrayValue"in t}function V_(t){return!!t&&"nullValue"in t}function U_(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function op(t){return!!t&&"mapValue"in t}function P8(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function qh(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return ru(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=qh(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=qh(t.arrayValue.values[n]);return e}return Object.assign({},t)}function C8(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ii{constructor(e){this.value=e}static empty(){return new ii({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!op(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=qh(n)}setAll(e){let n=dr.emptyPath(),r={},i=[];e.forEach((a,o)=>{if(!n.isImmediateParentOf(o)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=o.popLast()}a?r[o.lastSegment()]=qh(a):i.push(o.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());op(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Ws(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];op(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){ru(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new ii(qh(this.value))}}function xx(t){const e=[];return ru(t.fields,(n,r)=>{const i=new dr([n]);if(op(r)){const s=xx(r.mapValue).fields;if(s.length===0)e.push(i);else for(const a of s)e.push(i.child(a))}else e.push(i)}),new wi(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pr{constructor(e,n,r,i,s,a,o){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=a,this.documentState=o}static newInvalidDocument(e){return new Pr(e,0,At.min(),At.min(),At.min(),ii.empty(),0)}static newFoundDocument(e,n,r,i){return new Pr(e,1,n,At.min(),r,i,0)}static newNoDocument(e,n){return new Pr(e,2,n,At.min(),At.min(),ii.empty(),0)}static newUnknownDocument(e,n){return new Pr(e,3,n,At.min(),At.min(),ii.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(At.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ii.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ii.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=At.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Pr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Pr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xp{constructor(e,n){this.position=e,this.inclusive=n}}function B_(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],a=t.position[i];if(s.field.isKeyField()?r=ht.comparator(ht.fromName(a.referenceValue),n.key):r=Ic(a,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function K_(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Ws(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bd{constructor(e,n="asc"){this.field=e,this.dir=n}}function L8(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sx{}class Hn extends Sx{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new j8(e,n,r):n==="array-contains"?new O8(e,r):n==="in"?new M8(e,r):n==="not-in"?new V8(e,r):n==="array-contains-any"?new U8(e,r):new Hn(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new D8(e,r):new F8(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Ic(n,this.value)):n!==null&&Jl(this.value)===Jl(n)&&this.matchesComparison(Ic(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return wt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ds extends Sx{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new ds(e,n)}matches(e){return Nx(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Nx(t){return t.op==="and"}function Ax(t){return R8(t)&&Nx(t)}function R8(t){for(const e of t.filters)if(e instanceof ds)return!1;return!0}function j0(t){if(t instanceof Hn)return t.field.canonicalString()+t.op.toString()+Tc(t.value);if(Ax(t))return t.filters.map(e=>j0(e)).join(",");{const e=t.filters.map(n=>j0(n)).join(",");return`${t.op}(${e})`}}function Ex(t,e){return t instanceof Hn?function(r,i){return i instanceof Hn&&r.op===i.op&&r.field.isEqual(i.field)&&Ws(r.value,i.value)}(t,e):t instanceof ds?function(r,i){return i instanceof ds&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,a,o)=>s&&Ex(a,i.filters[o]),!0):!1}(t,e):void wt()}function kx(t){return t instanceof Hn?function(n){return`${n.field.canonicalString()} ${n.op} ${Tc(n.value)}`}(t):t instanceof ds?function(n){return n.op.toString()+" {"+n.getFilters().map(kx).join(" ,")+"}"}(t):"Filter"}class j8 extends Hn{constructor(e,n,r){super(e,n,r),this.key=ht.fromName(r.referenceValue)}matches(e){const n=ht.comparator(e.key,this.key);return this.matchesComparison(n)}}class D8 extends Hn{constructor(e,n){super(e,"in",n),this.keys=Ix("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class F8 extends Hn{constructor(e,n){super(e,"not-in",n),this.keys=Ix("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Ix(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>ht.fromName(r.referenceValue))}class O8 extends Hn{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return _2(n)&&wd(n.arrayValue,this.value)}}class M8 extends Hn{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&wd(this.value.arrayValue,n)}}class V8 extends Hn{constructor(e,n){super(e,"not-in",n)}matches(e){if(wd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!wd(this.value.arrayValue,n)}}class U8 extends Hn{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!_2(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>wd(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B8{constructor(e,n=null,r=[],i=[],s=null,a=null,o=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=a,this.endAt=o,this.ue=null}}function q_(t,e=null,n=[],r=[],i=null,s=null,a=null){return new B8(t,e,n,r,i,s,a)}function w2(t){const e=Et(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>j0(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Vm(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Tc(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Tc(r)).join(",")),e.ue=n}return e.ue}function b2(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!L8(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Ex(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!K_(t.startAt,e.startAt)&&K_(t.endAt,e.endAt)}function D0(t){return ht.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qc{constructor(e,n=null,r=[],i=[],s=null,a="F",o=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=a,this.startAt=o,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function K8(t,e,n,r,i,s,a,o){return new qc(t,e,n,r,i,s,a,o)}function x2(t){return new qc(t)}function z_(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Tx(t){return t.collectionGroup!==null}function zh(t){const e=Et(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let o=new pr(dr.comparator);return a.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(o=o.add(u.field))})}),o})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new bd(s,r))}),n.has(dr.keyField().canonicalString())||e.ce.push(new bd(dr.keyField(),r))}return e.ce}function zs(t){const e=Et(t);return e.le||(e.le=q8(e,zh(t))),e.le}function q8(t,e){if(t.limitType==="F")return q_(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new bd(i.field,s)});const n=t.endAt?new Xp(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Xp(t.startAt.position,t.startAt.inclusive):null;return q_(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function F0(t,e){const n=t.filters.concat([e]);return new qc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function O0(t,e,n){return new qc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Um(t,e){return b2(zs(t),zs(e))&&t.limitType===e.limitType}function Px(t){return`${w2(zs(t))}|lt:${t.limitType}`}function Ou(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>kx(i)).join(", ")}]`),Vm(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Tc(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Tc(i)).join(",")),`Target(${r})`}(zs(t))}; limitType=${t.limitType})`}function Bm(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):ht.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of zh(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(a,o,l){const u=B_(a,o,l);return a.inclusive?u<=0:u<0}(r.startAt,zh(r),i)||r.endAt&&!function(a,o,l){const u=B_(a,o,l);return a.inclusive?u>=0:u>0}(r.endAt,zh(r),i))}(t,e)}function z8(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Cx(t){return(e,n)=>{let r=!1;for(const i of zh(t)){const s=H8(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function H8(t,e,n){const r=t.field.isKeyField()?ht.comparator(e.key,n.key):function(s,a,o){const l=a.data.field(s),u=o.data.field(s);return l!==null&&u!==null?Ic(l,u):wt()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return wt()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zc{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ru(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return wx(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $8=new wn(ht.comparator);function ja(){return $8}const Lx=new wn(ht.comparator);function Ph(...t){let e=Lx;for(const n of t)e=e.insert(n.key,n);return e}function Rx(t){let e=Lx;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Dl(){return Hh()}function jx(){return Hh()}function Hh(){return new zc(t=>t.toString(),(t,e)=>t.isEqual(e))}const W8=new wn(ht.comparator),G8=new pr(ht.comparator);function jt(...t){let e=G8;for(const n of t)e=e.add(n);return e}const Q8=new pr(Ut);function Y8(){return Q8}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S2(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Jp(e)?"-0":e}}function Dx(t){return{integerValue:""+t}}function J8(t,e){return k8(e)?Dx(e):S2(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Km{constructor(){this._=void 0}}function X8(t,e,n){return t instanceof Zp?function(i,s){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&v2(s)&&(s=y2(s)),s&&(a.fields.__previous_value__=s),{mapValue:a}}(n,e):t instanceof xd?Ox(t,e):t instanceof Sd?Mx(t,e):function(i,s){const a=Fx(i,s),o=H_(a)+H_(i.Pe);return R0(a)&&R0(i.Pe)?Dx(o):S2(i.serializer,o)}(t,e)}function Z8(t,e,n){return t instanceof xd?Ox(t,e):t instanceof Sd?Mx(t,e):n}function Fx(t,e){return t instanceof em?function(r){return R0(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Zp extends Km{}class xd extends Km{constructor(e){super(),this.elements=e}}function Ox(t,e){const n=Vx(e);for(const r of t.elements)n.some(i=>Ws(i,r))||n.push(r);return{arrayValue:{values:n}}}class Sd extends Km{constructor(e){super(),this.elements=e}}function Mx(t,e){let n=Vx(e);for(const r of t.elements)n=n.filter(i=>!Ws(i,r));return{arrayValue:{values:n}}}class em extends Km{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function H_(t){return Rn(t.integerValue||t.doubleValue)}function Vx(t){return _2(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function eL(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof xd&&i instanceof xd||r instanceof Sd&&i instanceof Sd?kc(r.elements,i.elements,Ws):r instanceof em&&i instanceof em?Ws(r.Pe,i.Pe):r instanceof Zp&&i instanceof Zp}(t.transform,e.transform)}class tL{constructor(e,n){this.version=e,this.transformResults=n}}class Ui{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Ui}static exists(e){return new Ui(void 0,e)}static updateTime(e){return new Ui(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function lp(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class qm{}function Ux(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new N2(t.key,Ui.none()):new Od(t.key,t.data,Ui.none());{const n=t.data,r=ii.empty();let i=new pr(dr.comparator);for(let s of e.fields)if(!i.has(s)){let a=n.field(s);a===null&&s.length>1&&(s=s.popLast(),a=n.field(s)),a===null?r.delete(s):r.set(s,a),i=i.add(s)}return new rl(t.key,r,new wi(i.toArray()),Ui.none())}}function nL(t,e,n){t instanceof Od?function(i,s,a){const o=i.value.clone(),l=W_(i.fieldTransforms,s,a.transformResults);o.setAll(l),s.convertToFoundDocument(a.version,o).setHasCommittedMutations()}(t,e,n):t instanceof rl?function(i,s,a){if(!lp(i.precondition,s))return void s.convertToUnknownDocument(a.version);const o=W_(i.fieldTransforms,s,a.transformResults),l=s.data;l.setAll(Bx(i)),l.setAll(o),s.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(t,e,n):function(i,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function $h(t,e,n,r){return t instanceof Od?function(s,a,o,l){if(!lp(s.precondition,a))return o;const u=s.value.clone(),h=G_(s.fieldTransforms,l,a);return u.setAll(h),a.convertToFoundDocument(a.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof rl?function(s,a,o,l){if(!lp(s.precondition,a))return o;const u=G_(s.fieldTransforms,l,a),h=a.data;return h.setAll(Bx(s)),h.setAll(u),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),o===null?null:o.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(s,a,o){return lp(s.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):o}(t,e,n)}function rL(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=Fx(r.transform,i||null);s!=null&&(n===null&&(n=ii.empty()),n.set(r.field,s))}return n||null}function $_(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&kc(r,i,(s,a)=>eL(s,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Od extends qm{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class rl extends qm{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function Bx(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function W_(t,e,n){const r=new Map;Yt(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],a=s.transform,o=e.data.field(s.field);r.set(s.field,Z8(a,o,n[i]))}return r}function G_(t,e,n){const r=new Map;for(const i of t){const s=i.transform,a=n.data.field(i.field);r.set(i.field,X8(s,a,e))}return r}class N2 extends qm{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class iL extends qm{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sL{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&nL(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=$h(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=$h(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=jx();return this.mutations.forEach(i=>{const s=e.get(i.key),a=s.overlayedDocument;let o=this.applyToLocalView(a,s.mutatedFields);o=n.has(i.key)?null:o;const l=Ux(a,o);l!==null&&r.set(i.key,l),a.isValidDocument()||a.convertToNoDocument(At.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),jt())}isEqual(e){return this.batchId===e.batchId&&kc(this.mutations,e.mutations,(n,r)=>$_(n,r))&&kc(this.baseMutations,e.baseMutations,(n,r)=>$_(n,r))}}class A2{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Yt(e.mutations.length===r.length);let i=function(){return W8}();const s=e.mutations;for(let a=0;a<s.length;a++)i=i.insert(s[a].key,r[a].version);return new A2(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aL{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oL{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qn,Ot;function lL(t){switch(t){default:return wt();case Re.CANCELLED:case Re.UNKNOWN:case Re.DEADLINE_EXCEEDED:case Re.RESOURCE_EXHAUSTED:case Re.INTERNAL:case Re.UNAVAILABLE:case Re.UNAUTHENTICATED:return!1;case Re.INVALID_ARGUMENT:case Re.NOT_FOUND:case Re.ALREADY_EXISTS:case Re.PERMISSION_DENIED:case Re.FAILED_PRECONDITION:case Re.ABORTED:case Re.OUT_OF_RANGE:case Re.UNIMPLEMENTED:case Re.DATA_LOSS:return!0}}function Kx(t){if(t===void 0)return Ra("GRPC error has no .code"),Re.UNKNOWN;switch(t){case qn.OK:return Re.OK;case qn.CANCELLED:return Re.CANCELLED;case qn.UNKNOWN:return Re.UNKNOWN;case qn.DEADLINE_EXCEEDED:return Re.DEADLINE_EXCEEDED;case qn.RESOURCE_EXHAUSTED:return Re.RESOURCE_EXHAUSTED;case qn.INTERNAL:return Re.INTERNAL;case qn.UNAVAILABLE:return Re.UNAVAILABLE;case qn.UNAUTHENTICATED:return Re.UNAUTHENTICATED;case qn.INVALID_ARGUMENT:return Re.INVALID_ARGUMENT;case qn.NOT_FOUND:return Re.NOT_FOUND;case qn.ALREADY_EXISTS:return Re.ALREADY_EXISTS;case qn.PERMISSION_DENIED:return Re.PERMISSION_DENIED;case qn.FAILED_PRECONDITION:return Re.FAILED_PRECONDITION;case qn.ABORTED:return Re.ABORTED;case qn.OUT_OF_RANGE:return Re.OUT_OF_RANGE;case qn.UNIMPLEMENTED:return Re.UNIMPLEMENTED;case qn.DATA_LOSS:return Re.DATA_LOSS;default:return wt()}}(Ot=qn||(qn={}))[Ot.OK=0]="OK",Ot[Ot.CANCELLED=1]="CANCELLED",Ot[Ot.UNKNOWN=2]="UNKNOWN",Ot[Ot.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ot[Ot.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ot[Ot.NOT_FOUND=5]="NOT_FOUND",Ot[Ot.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ot[Ot.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ot[Ot.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ot[Ot.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ot[Ot.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ot[Ot.ABORTED=10]="ABORTED",Ot[Ot.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ot[Ot.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ot[Ot.INTERNAL=13]="INTERNAL",Ot[Ot.UNAVAILABLE=14]="UNAVAILABLE",Ot[Ot.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uL(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cL=new Vl([4294967295,4294967295],0);function Q_(t){const e=uL().encode(t),n=new dx;return n.update(e),new Uint8Array(n.digest())}function Y_(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Vl([n,r],0),new Vl([i,s],0)]}class E2{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Ch(`Invalid padding: ${n}`);if(r<0)throw new Ch(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ch(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Ch(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Vl.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(Vl.fromNumber(r)));return i.compare(cL)===1&&(i=new Vl([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=Q_(e),[r,i]=Y_(n);for(let s=0;s<this.hashCount;s++){const a=this.Ee(r,i,s);if(!this.de(a))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),a=new E2(s,i,n);return r.forEach(o=>a.insert(o)),a}insert(e){if(this.Ie===0)return;const n=Q_(e),[r,i]=Y_(n);for(let s=0;s<this.hashCount;s++){const a=this.Ee(r,i,s);this.Ae(a)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Ch extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zm{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Md.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new zm(At.min(),i,new wn(Ut),ja(),jt())}}class Md{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Md(r,n,jt(),jt(),jt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class up{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class qx{constructor(e,n){this.targetId=e,this.me=n}}class zx{constructor(e,n,r=gr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class J_{constructor(){this.fe=0,this.ge=Z_(),this.pe=gr.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=jt(),n=jt(),r=jt();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:wt()}}),new Md(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=Z_()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Yt(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class hL{constructor(e){this.Le=e,this.Be=new Map,this.ke=ja(),this.qe=X_(),this.Qe=new wn(Ut)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:wt()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const s=i.target;if(D0(s))if(r===0){const a=new ht(s.path);this.Ue(n,a,Pr.newNoDocument(a,At.min()))}else Yt(r===1);else{const a=this.Ye(n);if(a!==r){const o=this.Ze(e),l=o?this.Xe(o,e,a):1;if(l!==0){this.je(n);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,u)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let a,o;try{a=Yl(r).toUint8Array()}catch(l){if(l instanceof bx)return Ec("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{o=new E2(a,i,s)}catch(l){return Ec(l instanceof Ch?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return o.Ie===0?null:o}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const a=this.Le.tt(),o=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;e.mightContain(o)||(this.Ue(n,s,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((s,a)=>{const o=this.Je(a);if(o){if(s.current&&D0(o.target)){const l=new ht(o.target.path);this.ke.get(l)!==null||this.it(a,l)||this.Ue(a,l,Pr.newNoDocument(l,e))}s.be&&(n.set(a,s.ve()),s.Ce())}});let r=jt();this.qe.forEach((s,a)=>{let o=!0;a.forEachWhile(l=>{const u=this.Je(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)}),o&&(r=r.add(s))}),this.ke.forEach((s,a)=>a.setReadTime(e));const i=new zm(e,n,this.Qe,this.ke,r);return this.ke=ja(),this.qe=X_(),this.Qe=new wn(Ut),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new J_,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new pr(Ut),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||st("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new J_),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function X_(){return new wn(ht.comparator)}function Z_(){return new wn(ht.comparator)}const dL={asc:"ASCENDING",desc:"DESCENDING"},fL={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},pL={and:"AND",or:"OR"};class mL{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function M0(t,e){return t.useProto3Json||Vm(e)?e:{value:e}}function tm(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Hx(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function gL(t,e){return tm(t,e.toTimestamp())}function Hs(t){return Yt(!!t),At.fromTimestamp(function(n){const r=Go(n);return new Jn(r.seconds,r.nanos)}(t))}function k2(t,e){return V0(t,e).canonicalString()}function V0(t,e){const n=function(i){return new un(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function $x(t){const e=un.fromString(t);return Yt(Jx(e)),e}function U0(t,e){return k2(t.databaseId,e.path)}function o1(t,e){const n=$x(e);if(n.get(1)!==t.databaseId.projectId)throw new et(Re.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new et(Re.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ht(Gx(n))}function Wx(t,e){return k2(t.databaseId,e)}function vL(t){const e=$x(t);return e.length===4?un.emptyPath():Gx(e)}function B0(t){return new un(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Gx(t){return Yt(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function ew(t,e,n){return{name:U0(t,e),fields:n.value.mapValue.fields}}function yL(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:wt()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(u,h){return u.useProto3Json?(Yt(h===void 0||typeof h=="string"),gr.fromBase64String(h||"")):(Yt(h===void 0||h instanceof Buffer||h instanceof Uint8Array),gr.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,o=a&&function(u){const h=u.code===void 0?Re.UNKNOWN:Kx(u.code);return new et(h,u.message||"")}(a);n=new zx(r,i,s,o||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=o1(t,r.document.name),s=Hs(r.document.updateTime),a=r.document.createTime?Hs(r.document.createTime):At.min(),o=new ii({mapValue:{fields:r.document.fields}}),l=Pr.newFoundDocument(i,s,a,o),u=r.targetIds||[],h=r.removedTargetIds||[];n=new up(u,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=o1(t,r.document),s=r.readTime?Hs(r.readTime):At.min(),a=Pr.newNoDocument(i,s),o=r.removedTargetIds||[];n=new up([],o,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=o1(t,r.document),s=r.removedTargetIds||[];n=new up([],s,i,null)}else{if(!("filter"in e))return wt();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,a=new oL(i,s),o=r.targetId;n=new qx(o,a)}}return n}function _L(t,e){let n;if(e instanceof Od)n={update:ew(t,e.key,e.value)};else if(e instanceof N2)n={delete:U0(t,e.key)};else if(e instanceof rl)n={update:ew(t,e.key,e.data),updateMask:IL(e.fieldMask)};else{if(!(e instanceof iL))return wt();n={verify:U0(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,a){const o=a.transform;if(o instanceof Zp)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof xd)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof Sd)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof em)return{fieldPath:a.field.canonicalString(),increment:o.Pe};throw wt()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:gL(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:wt()}(t,e.precondition)),n}function wL(t,e){return t&&t.length>0?(Yt(e!==void 0),t.map(n=>function(i,s){let a=i.updateTime?Hs(i.updateTime):Hs(s);return a.isEqual(At.min())&&(a=Hs(s)),new tL(a,i.transformResults||[])}(n,e))):[]}function bL(t,e){return{documents:[Wx(t,e.path)]}}function xL(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Wx(t,i);const s=function(u){if(u.length!==0)return Yx(ds.create(u,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const a=function(u){if(u.length!==0)return u.map(h=>function(g){return{field:Mu(g.field),direction:AL(g.dir)}}(h))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const o=M0(t,e.limit);return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{_t:n,parent:i}}function SL(t){let e=vL(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Yt(r===1);const h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];n.where&&(s=function(p){const g=Qx(p);return g instanceof ds&&Ax(g)?g.getFilters():[g]}(n.where));let a=[];n.orderBy&&(a=function(p){return p.map(g=>function(b){return new bd(Vu(b.field),function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction))}(g))}(n.orderBy));let o=null;n.limit&&(o=function(p){let g;return g=typeof p=="object"?p.value:p,Vm(g)?null:g}(n.limit));let l=null;n.startAt&&(l=function(p){const g=!!p.before,m=p.values||[];return new Xp(m,g)}(n.startAt));let u=null;return n.endAt&&(u=function(p){const g=!p.before,m=p.values||[];return new Xp(m,g)}(n.endAt)),K8(e,i,a,s,o,"F",l,u)}function NL(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return wt()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Qx(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Vu(n.unaryFilter.field);return Hn.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Vu(n.unaryFilter.field);return Hn.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Vu(n.unaryFilter.field);return Hn.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Vu(n.unaryFilter.field);return Hn.create(a,"!=",{nullValue:"NULL_VALUE"});default:return wt()}}(t):t.fieldFilter!==void 0?function(n){return Hn.create(Vu(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return wt()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return ds.create(n.compositeFilter.filters.map(r=>Qx(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return wt()}}(n.compositeFilter.op))}(t):wt()}function AL(t){return dL[t]}function EL(t){return fL[t]}function kL(t){return pL[t]}function Mu(t){return{fieldPath:t.canonicalString()}}function Vu(t){return dr.fromServerFormat(t.fieldPath)}function Yx(t){return t instanceof Hn?function(n){if(n.op==="=="){if(U_(n.value))return{unaryFilter:{field:Mu(n.field),op:"IS_NAN"}};if(V_(n.value))return{unaryFilter:{field:Mu(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(U_(n.value))return{unaryFilter:{field:Mu(n.field),op:"IS_NOT_NAN"}};if(V_(n.value))return{unaryFilter:{field:Mu(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Mu(n.field),op:EL(n.op),value:n.value}}}(t):t instanceof ds?function(n){const r=n.getFilters().map(i=>Yx(i));return r.length===1?r[0]:{compositeFilter:{op:kL(n.op),filters:r}}}(t):wt()}function IL(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Jx(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class To{constructor(e,n,r,i,s=At.min(),a=At.min(),o=gr.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=o,this.expectedCount=l}withSequenceNumber(e){return new To(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new To(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new To(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new To(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TL{constructor(e){this.ct=e}}function PL(t){const e=SL({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?O0(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CL{constructor(){this.un=new LL}addToCollectionParentIndex(e,n){return this.un.add(n),Ue.resolve()}getCollectionParents(e,n){return Ue.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return Ue.resolve()}deleteFieldIndex(e,n){return Ue.resolve()}deleteAllFieldIndexes(e){return Ue.resolve()}createTargetIndexes(e,n){return Ue.resolve()}getDocumentsMatchingTarget(e,n){return Ue.resolve(null)}getIndexType(e,n){return Ue.resolve(0)}getFieldIndexes(e,n){return Ue.resolve([])}getNextCollectionGroupToUpdate(e){return Ue.resolve(null)}getMinOffset(e,n){return Ue.resolve(Wo.min())}getMinOffsetFromCollectionGroup(e,n){return Ue.resolve(Wo.min())}updateCollectionGroup(e,n,r){return Ue.resolve()}updateIndexEntries(e,n){return Ue.resolve()}}class LL{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new pr(un.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new pr(un.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pc{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Pc(0)}static kn(){return new Pc(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RL{constructor(){this.changes=new zc(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Pr.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?Ue.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jL{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DL{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&$h(r.mutation,i,wi.empty(),Jn.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,jt()).next(()=>r))}getLocalViewOfDocuments(e,n,r=jt()){const i=Dl();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let a=Ph();return s.forEach((o,l)=>{a=a.insert(o,l.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const r=Dl();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,jt()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((a,o)=>{n.set(a,o)})})}computeViews(e,n,r,i){let s=ja();const a=Hh(),o=function(){return Hh()}();return n.forEach((l,u)=>{const h=r.get(u.key);i.has(u.key)&&(h===void 0||h.mutation instanceof rl)?s=s.insert(u.key,u):h!==void 0?(a.set(u.key,h.mutation.getFieldMask()),$h(h.mutation,u,h.mutation.getFieldMask(),Jn.now())):a.set(u.key,wi.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((u,h)=>a.set(u,h)),n.forEach((u,h)=>{var p;return o.set(u,new jL(h,(p=a.get(u))!==null&&p!==void 0?p:null))}),o))}recalculateAndSaveOverlays(e,n){const r=Hh();let i=new wn((a,o)=>a-o),s=jt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const o of a)o.keys().forEach(l=>{const u=n.get(l);if(u===null)return;let h=r.get(l)||wi.empty();h=o.applyToLocalView(u,h),r.set(l,h);const p=(i.get(o.batchId)||jt()).add(l);i=i.insert(o.batchId,p)})}).next(()=>{const a=[],o=i.getReverseIterator();for(;o.hasNext();){const l=o.getNext(),u=l.key,h=l.value,p=jx();h.forEach(g=>{if(!s.has(g)){const m=Ux(n.get(g),r.get(g));m!==null&&p.set(g,m),s=s.add(g)}}),a.push(this.documentOverlayCache.saveOverlays(e,u,p))}return Ue.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(a){return ht.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Tx(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const a=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):Ue.resolve(Dl());let o=-1,l=s;return a.next(u=>Ue.forEach(u,(h,p)=>(o<p.largestBatchId&&(o=p.largestBatchId),s.get(h)?Ue.resolve():this.remoteDocumentCache.getEntry(e,h).next(g=>{l=l.insert(h,g)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,l,u,jt())).next(h=>({batchId:o,changes:Rx(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ht(n)).next(r=>{let i=Ph();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let a=Ph();return this.indexManager.getCollectionParents(e,s).next(o=>Ue.forEach(o,l=>{const u=function(p,g){return new qc(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(h=>{h.forEach((p,g)=>{a=a.insert(p,g)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(a=>{s.forEach((l,u)=>{const h=u.getKey();a.get(h)===null&&(a=a.insert(h,Pr.newInvalidDocument(h)))});let o=Ph();return a.forEach((l,u)=>{const h=s.get(l);h!==void 0&&$h(h.mutation,u,wi.empty(),Jn.now()),Bm(n,u)&&(o=o.insert(l,u))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FL{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return Ue.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Hs(i.createTime)}}(n)),Ue.resolve()}getNamedQuery(e,n){return Ue.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:PL(i.bundledQuery),readTime:Hs(i.readTime)}}(n)),Ue.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OL{constructor(){this.overlays=new wn(ht.comparator),this.Ir=new Map}getOverlay(e,n){return Ue.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Dl();return Ue.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),Ue.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),Ue.resolve()}getOverlaysForCollection(e,n,r){const i=Dl(),s=n.length+1,a=new ht(n.child("")),o=this.overlays.getIteratorFrom(a);for(;o.hasNext();){const l=o.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return Ue.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new wn((u,h)=>u-h);const a=this.overlays.getIterator();for(;a.hasNext();){const u=a.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let h=s.get(u.largestBatchId);h===null&&(h=Dl(),s=s.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}const o=Dl(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,h)=>o.set(u,h)),!(o.size()>=i)););return Ue.resolve(o)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const a=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new aL(n,r));let s=this.Ir.get(n);s===void 0&&(s=jt(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ML{constructor(){this.sessionToken=gr.EMPTY_BYTE_STRING}getSessionToken(e){return Ue.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,Ue.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I2{constructor(){this.Tr=new pr(tr.Er),this.dr=new pr(tr.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new tr(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new tr(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new ht(new un([])),r=new tr(n,e),i=new tr(n,e+1),s=[];return this.dr.forEachInRange([r,i],a=>{this.Vr(a),s.push(a.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new ht(new un([])),r=new tr(n,e),i=new tr(n,e+1);let s=jt();return this.dr.forEachInRange([r,i],a=>{s=s.add(a.key)}),s}containsKey(e){const n=new tr(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class tr{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return ht.comparator(e.key,n.key)||Ut(e.wr,n.wr)}static Ar(e,n){return Ut(e.wr,n.wr)||ht.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VL{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new pr(tr.Er)}checkEmpty(e){return Ue.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new sL(s,n,r,i);this.mutationQueue.push(a);for(const o of i)this.br=this.br.add(new tr(o.key,s)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return Ue.resolve(a)}lookupMutationBatch(e,n){return Ue.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),s=i<0?0:i;return Ue.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Ue.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return Ue.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new tr(n,0),i=new tr(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],a=>{const o=this.Dr(a.wr);s.push(o)}),Ue.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new pr(Ut);return n.forEach(i=>{const s=new tr(i,0),a=new tr(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,a],o=>{r=r.add(o.wr)})}),Ue.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;ht.isDocumentKey(s)||(s=s.child(""));const a=new tr(new ht(s),0);let o=new pr(Ut);return this.br.forEachWhile(l=>{const u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(o=o.add(l.wr)),!0)},a),Ue.resolve(this.Cr(o))}Cr(e){const n=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Yt(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return Ue.forEach(n.mutations,i=>{const s=new tr(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new tr(n,0),i=this.br.firstAfterOrEqual(r);return Ue.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,Ue.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UL{constructor(e){this.Mr=e,this.docs=function(){return new wn(ht.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,a=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return Ue.resolve(r?r.document.mutableCopy():Pr.newInvalidDocument(n))}getEntries(e,n){let r=ja();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Pr.newInvalidDocument(i))}),Ue.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=ja();const a=n.path,o=new ht(a.child("")),l=this.docs.getIteratorFrom(o);for(;l.hasNext();){const{key:u,value:{document:h}}=l.getNext();if(!a.isPrefixOf(u.path))break;u.path.length>a.length+1||S8(x8(h),r)<=0||(i.has(h.key)||Bm(n,h))&&(s=s.insert(h.key,h.mutableCopy()))}return Ue.resolve(s)}getAllFromCollectionGroup(e,n,r,i){wt()}Or(e,n){return Ue.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new BL(this)}getSize(e){return Ue.resolve(this.size)}}class BL extends RL{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),Ue.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KL{constructor(e){this.persistence=e,this.Nr=new zc(n=>w2(n),b2),this.lastRemoteSnapshotVersion=At.min(),this.highestTargetId=0,this.Lr=0,this.Br=new I2,this.targetCount=0,this.kr=Pc.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),Ue.resolve()}getLastRemoteSnapshotVersion(e){return Ue.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ue.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),Ue.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),Ue.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Pc(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,Ue.resolve()}updateTargetData(e,n){return this.Kn(n),Ue.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,Ue.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Nr.forEach((a,o)=>{o.sequenceNumber<=n&&r.get(o.targetId)===null&&(this.Nr.delete(a),s.push(this.removeMatchingKeysForTargetId(e,o.targetId)),i++)}),Ue.waitFor(s).next(()=>i)}getTargetCount(e){return Ue.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return Ue.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),Ue.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(a=>{s.push(i.markPotentiallyOrphaned(e,a))}),Ue.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),Ue.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return Ue.resolve(r)}containsKey(e,n){return Ue.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qL{constructor(e,n){this.qr={},this.overlays={},this.Qr=new g2(0),this.Kr=!1,this.Kr=!0,this.$r=new ML,this.referenceDelegate=e(this),this.Ur=new KL(this),this.indexManager=new CL,this.remoteDocumentCache=function(i){return new UL(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new TL(n),this.Gr=new FL(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new OL,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new VL(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){st("MemoryPersistence","Starting transaction:",e);const i=new zL(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,n){return Ue.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class zL extends A8{constructor(e){super(),this.currentSequenceNumber=e}}class T2{constructor(e){this.persistence=e,this.Jr=new I2,this.Yr=null}static Zr(e){return new T2(e)}get Xr(){if(this.Yr)return this.Yr;throw wt()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),Ue.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),Ue.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),Ue.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ue.forEach(this.Xr,r=>{const i=ht.fromPath(r);return this.ei(e,i).next(s=>{s||n.removeEntry(i,At.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return Ue.or([()=>Ue.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P2{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=jt(),i=jt();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new P2(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HL{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $L{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return DI()?8:E8(Rr())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.Yi(e,n).next(a=>{s.result=a}).next(()=>{if(!s.result)return this.Zi(e,n,i,r).next(a=>{s.result=a})}).next(()=>{if(s.result)return;const a=new HL;return this.Xi(e,n,a).next(o=>{if(s.result=o,this.zi)return this.es(e,n,a,o.size)})}).next(()=>s.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(_h()<=Ft.DEBUG&&st("QueryEngine","SDK will not create cache indexes for query:",Ou(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),Ue.resolve()):(_h()<=Ft.DEBUG&&st("QueryEngine","Query:",Ou(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(_h()<=Ft.DEBUG&&st("QueryEngine","The SDK decides to create cache indexes for query:",Ou(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,zs(n))):Ue.resolve())}Yi(e,n){if(z_(n))return Ue.resolve(null);let r=zs(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=O0(n,null,"F"),r=zs(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const a=jt(...s);return this.Ji.getDocuments(e,a).next(o=>this.indexManager.getMinOffset(e,r).next(l=>{const u=this.ts(n,o);return this.ns(n,u,a,l.readTime)?this.Yi(e,O0(n,null,"F")):this.rs(e,u,n,l)}))})))}Zi(e,n,r,i){return z_(n)||i.isEqual(At.min())?Ue.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const a=this.ts(n,s);return this.ns(n,a,r,i)?Ue.resolve(null):(_h()<=Ft.DEBUG&&st("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ou(n)),this.rs(e,a,n,b8(i,-1)).next(o=>o))})}ts(e,n){let r=new pr(Cx(e));return n.forEach((i,s)=>{Bm(e,s)&&(r=r.add(s))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,n,r){return _h()<=Ft.DEBUG&&st("QueryEngine","Using full collection scan to execute query:",Ou(n)),this.Ji.getDocumentsMatchingQuery(e,n,Wo.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(a=>{s=s.insert(a.key,a)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WL{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new wn(Ut),this._s=new zc(s=>w2(s),b2),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new DL(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function GL(t,e,n,r){return new WL(t,e,n,r)}async function Xx(t,e){const n=Et(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const a=[],o=[];let l=jt();for(const u of i){a.push(u.batchId);for(const h of u.mutations)l=l.add(h.key)}for(const u of s){o.push(u.batchId);for(const h of u.mutations)l=l.add(h.key)}return n.localDocuments.getDocuments(r,l).next(u=>({hs:u,removedBatchIds:a,addedBatchIds:o}))})})}function QL(t,e){const n=Et(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(o,l,u,h){const p=u.batch,g=p.keys();let m=Ue.resolve();return g.forEach(b=>{m=m.next(()=>h.getEntry(l,b)).next(x=>{const k=u.docVersions.get(b);Yt(k!==null),x.version.compareTo(k)<0&&(p.applyToRemoteDocument(x,u),x.isValidDocument()&&(x.setReadTime(u.commitVersion),h.addEntry(x)))})}),m.next(()=>o.mutationQueue.removeMutationBatch(l,p))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(o){let l=jt();for(let u=0;u<o.mutationResults.length;++u)o.mutationResults[u].transformResults.length>0&&(l=l.add(o.batch.mutations[u].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function Zx(t){const e=Et(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function YL(t,e){const n=Et(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const a=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const o=[];e.targetChanges.forEach((h,p)=>{const g=i.get(p);if(!g)return;o.push(n.Ur.removeMatchingKeys(s,h.removedDocuments,p).next(()=>n.Ur.addMatchingKeys(s,h.addedDocuments,p)));let m=g.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(p)!==null?m=m.withResumeToken(gr.EMPTY_BYTE_STRING,At.min()).withLastLimboFreeSnapshotVersion(At.min()):h.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(h.resumeToken,r)),i=i.insert(p,m),function(x,k,_){return x.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=3e8?!0:_.addedDocuments.size+_.modifiedDocuments.size+_.removedDocuments.size>0}(g,m,h)&&o.push(n.Ur.updateTargetData(s,m))});let l=ja(),u=jt();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(s,h))}),o.push(JL(s,a,e.documentUpdates).next(h=>{l=h.Ps,u=h.Is})),!r.isEqual(At.min())){const h=n.Ur.getLastRemoteSnapshotVersion(s).next(p=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));o.push(h)}return Ue.waitFor(o).next(()=>a.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,u)).next(()=>l)}).then(s=>(n.os=i,s))}function JL(t,e,n){let r=jt(),i=jt();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let a=ja();return n.forEach((o,l)=>{const u=s.get(o);l.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(o)),l.isNoDocument()&&l.version.isEqual(At.min())?(e.removeEntry(o,l.readTime),a=a.insert(o,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),a=a.insert(o,l)):st("LocalStore","Ignoring outdated watch update for ",o,". Current version:",u.version," Watch version:",l.version)}),{Ps:a,Is:i}})}function XL(t,e){const n=Et(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function ZL(t,e){const n=Et(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(s=>s?(i=s,Ue.resolve(i)):n.Ur.allocateTargetId(r).next(a=>(i=new To(e,a,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function K0(t,e,n){const r=Et(t),i=r.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,a=>r.persistence.referenceDelegate.removeTarget(a,i))}catch(a){if(!Fd(a))throw a;st("LocalStore",`Failed to update sequence numbers for target ${e}: ${a}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function tw(t,e,n){const r=Et(t);let i=At.min(),s=jt();return r.persistence.runTransaction("Execute query","readwrite",a=>function(l,u,h){const p=Et(l),g=p._s.get(h);return g!==void 0?Ue.resolve(p.os.get(g)):p.Ur.getTargetData(u,h)}(r,a,zs(e)).next(o=>{if(o)return i=o.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(a,o.targetId).next(l=>{s=l})}).next(()=>r.ss.getDocumentsMatchingQuery(a,e,n?i:At.min(),n?s:jt())).next(o=>(eR(r,z8(e),o),{documents:o,Ts:s})))}function eR(t,e,n){let r=t.us.get(e)||At.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.us.set(e,r)}class nw{constructor(){this.activeTargetIds=Y8()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class tR{constructor(){this.so=new nw,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new nw,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nR{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rw{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){st("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){st("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Of=null;function l1(){return Of===null?Of=function(){return 268435456+Math.round(2147483648*Math.random())}():Of++,"0x"+Of.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rR={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iR{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sr="WebChannelConnection";class sR extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(n,r,i,s,a){const o=l1(),l=this.xo(n,r.toUriEncodedString());st("RestConnection",`Sending RPC '${n}' ${o}:`,l,i);const u={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(u,s,a),this.No(n,l,u,i).then(h=>(st("RestConnection",`Received RPC '${n}' ${o}: `,h),h),h=>{throw Ec("RestConnection",`RPC '${n}' ${o} failed with error: `,h,"url: ",l,"request:",i),h})}Lo(n,r,i,s,a,o){return this.Mo(n,r,i,s,a)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Kc}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,a)=>n[a]=s),i&&i.headers.forEach((s,a)=>n[a]=s)}xo(n,r){const i=rR[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const s=l1();return new Promise((a,o)=>{const l=new fx;l.setWithCredentials(!0),l.listenOnce(px.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case ap.NO_ERROR:const h=l.getResponseJson();st(Sr,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),a(h);break;case ap.TIMEOUT:st(Sr,`RPC '${e}' ${s} timed out`),o(new et(Re.DEADLINE_EXCEEDED,"Request time out"));break;case ap.HTTP_ERROR:const p=l.getStatus();if(st(Sr,`RPC '${e}' ${s} failed with status:`,p,"response text:",l.getResponseText()),p>0){let g=l.getResponseJson();Array.isArray(g)&&(g=g[0]);const m=g==null?void 0:g.error;if(m&&m.status&&m.message){const b=function(k){const _=k.toLowerCase().replace(/_/g,"-");return Object.values(Re).indexOf(_)>=0?_:Re.UNKNOWN}(m.status);o(new et(b,m.message))}else o(new et(Re.UNKNOWN,"Server responded with status "+l.getStatus()))}else o(new et(Re.UNAVAILABLE,"Connection failed."));break;default:wt()}}finally{st(Sr,`RPC '${e}' ${s} completed.`)}});const u=JSON.stringify(i);st(Sr,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",u,r,15)})}Bo(e,n,r){const i=l1(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=vx(),o=gx(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const h=s.join("");st(Sr,`Creating RPC '${e}' stream ${i}: ${h}`,l);const p=a.createWebChannel(h,l);let g=!1,m=!1;const b=new iR({Io:k=>{m?st(Sr,`Not sending because RPC '${e}' stream ${i} is closed:`,k):(g||(st(Sr,`Opening RPC '${e}' stream ${i} transport.`),p.open(),g=!0),st(Sr,`RPC '${e}' stream ${i} sending:`,k),p.send(k))},To:()=>p.close()}),x=(k,_,A)=>{k.listen(_,C=>{try{A(C)}catch(F){setTimeout(()=>{throw F},0)}})};return x(p,Th.EventType.OPEN,()=>{m||(st(Sr,`RPC '${e}' stream ${i} transport opened.`),b.yo())}),x(p,Th.EventType.CLOSE,()=>{m||(m=!0,st(Sr,`RPC '${e}' stream ${i} transport closed`),b.So())}),x(p,Th.EventType.ERROR,k=>{m||(m=!0,Ec(Sr,`RPC '${e}' stream ${i} transport errored:`,k),b.So(new et(Re.UNAVAILABLE,"The operation could not be completed")))}),x(p,Th.EventType.MESSAGE,k=>{var _;if(!m){const A=k.data[0];Yt(!!A);const C=A,F=C.error||((_=C[0])===null||_===void 0?void 0:_.error);if(F){st(Sr,`RPC '${e}' stream ${i} received error:`,F);const Y=F.status;let B=function(S){const R=qn[S];if(R!==void 0)return Kx(R)}(Y),L=F.message;B===void 0&&(B=Re.INTERNAL,L="Unknown error status: "+Y+" with message "+F.message),m=!0,b.So(new et(B,L)),p.close()}else st(Sr,`RPC '${e}' stream ${i} received:`,A),b.bo(A)}}),x(o,mx.STAT_EVENT,k=>{k.stat===C0.PROXY?st(Sr,`RPC '${e}' stream ${i} detected buffering proxy`):k.stat===C0.NOPROXY&&st(Sr,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{b.wo()},0),b}}function u1(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hm(t){return new mL(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eS{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&st("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tS{constructor(e,n,r,i,s,a,o,l){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=o,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new eS(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===Re.RESOURCE_EXHAUSTED?(Ra(n.toString()),Ra("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===Re.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{const i=new et(Re.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return st("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(st("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class aR extends tS{constructor(e,n,r,i,s,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,a),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=yL(this.serializer,e),r=function(s){if(!("targetChange"in s))return At.min();const a=s.targetChange;return a.targetIds&&a.targetIds.length?At.min():a.readTime?Hs(a.readTime):At.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=B0(this.serializer),n.addTarget=function(s,a){let o;const l=a.target;if(o=D0(l)?{documents:bL(s,l)}:{query:xL(s,l)._t},o.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){o.resumeToken=Hx(s,a.resumeToken);const u=M0(s,a.expectedCount);u!==null&&(o.expectedCount=u)}else if(a.snapshotVersion.compareTo(At.min())>0){o.readTime=tm(s,a.snapshotVersion.toTimestamp());const u=M0(s,a.expectedCount);u!==null&&(o.expectedCount=u)}return o}(this.serializer,e);const r=NL(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=B0(this.serializer),n.removeTarget=e,this.a_(n)}}class oR extends tS{constructor(e,n,r,i,s,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,a),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Yt(!!e.streamToken),this.lastStreamToken=e.streamToken,Yt(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Yt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=wL(e.writeResults,e.commitTime),r=Hs(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=B0(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>_L(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lR extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new et(Re.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Mo(e,V0(n,r),i,s,a)).catch(s=>{throw s.name==="FirebaseError"?(s.code===Re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new et(Re.UNKNOWN,s.toString())})}Lo(e,n,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,o])=>this.connection.Lo(e,V0(n,r),i,a,o,s)).catch(a=>{throw a.name==="FirebaseError"?(a.code===Re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new et(Re.UNKNOWN,a.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class uR{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Ra(n),this.D_=!1):st("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cR{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(a=>{r.enqueueAndForget(async()=>{iu(this)&&(st("RemoteStore","Restarting streams for network reachability change."),await async function(l){const u=Et(l);u.L_.add(4),await Vd(u),u.q_.set("Unknown"),u.L_.delete(4),await $m(u)}(this))})}),this.q_=new uR(r,i)}}async function $m(t){if(iu(t))for(const e of t.B_)await e(!0)}async function Vd(t){for(const e of t.B_)await e(!1)}function nS(t,e){const n=Et(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),j2(n)?R2(n):Hc(n).r_()&&L2(n,e))}function C2(t,e){const n=Et(t),r=Hc(n);n.N_.delete(e),r.r_()&&rS(n,e),n.N_.size===0&&(r.r_()?r.o_():iu(n)&&n.q_.set("Unknown"))}function L2(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(At.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Hc(t).A_(e)}function rS(t,e){t.Q_.xe(e),Hc(t).R_(e)}function R2(t){t.Q_=new hL({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Hc(t).start(),t.q_.v_()}function j2(t){return iu(t)&&!Hc(t).n_()&&t.N_.size>0}function iu(t){return Et(t).L_.size===0}function iS(t){t.Q_=void 0}async function hR(t){t.q_.set("Online")}async function dR(t){t.N_.forEach((e,n)=>{L2(t,e)})}async function fR(t,e){iS(t),j2(t)?(t.q_.M_(e),R2(t)):t.q_.set("Unknown")}async function pR(t,e,n){if(t.q_.set("Online"),e instanceof zx&&e.state===2&&e.cause)try{await async function(i,s){const a=s.cause;for(const o of s.targetIds)i.N_.has(o)&&(await i.remoteSyncer.rejectListen(o,a),i.N_.delete(o),i.Q_.removeTarget(o))}(t,e)}catch(r){st("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await nm(t,r)}else if(e instanceof up?t.Q_.Ke(e):e instanceof qx?t.Q_.He(e):t.Q_.We(e),!n.isEqual(At.min()))try{const r=await Zx(t.localStore);n.compareTo(r)>=0&&await function(s,a){const o=s.Q_.rt(a);return o.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const h=s.N_.get(u);h&&s.N_.set(u,h.withResumeToken(l.resumeToken,a))}}),o.targetMismatches.forEach((l,u)=>{const h=s.N_.get(l);if(!h)return;s.N_.set(l,h.withResumeToken(gr.EMPTY_BYTE_STRING,h.snapshotVersion)),rS(s,l);const p=new To(h.target,l,u,h.sequenceNumber);L2(s,p)}),s.remoteSyncer.applyRemoteEvent(o)}(t,n)}catch(r){st("RemoteStore","Failed to raise snapshot:",r),await nm(t,r)}}async function nm(t,e,n){if(!Fd(e))throw e;t.L_.add(1),await Vd(t),t.q_.set("Offline"),n||(n=()=>Zx(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{st("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await $m(t)})}function sS(t,e){return e().catch(n=>nm(t,n,e))}async function Wm(t){const e=Et(t),n=Qo(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;mR(e);)try{const i=await XL(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,gR(e,i)}catch(i){await nm(e,i)}aS(e)&&oS(e)}function mR(t){return iu(t)&&t.O_.length<10}function gR(t,e){t.O_.push(e);const n=Qo(t);n.r_()&&n.V_&&n.m_(e.mutations)}function aS(t){return iu(t)&&!Qo(t).n_()&&t.O_.length>0}function oS(t){Qo(t).start()}async function vR(t){Qo(t).p_()}async function yR(t){const e=Qo(t);for(const n of t.O_)e.m_(n.mutations)}async function _R(t,e,n){const r=t.O_.shift(),i=A2.from(r,e,n);await sS(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Wm(t)}async function wR(t,e){e&&Qo(t).V_&&await async function(r,i){if(function(a){return lL(a)&&a!==Re.ABORTED}(i.code)){const s=r.O_.shift();Qo(r).s_(),await sS(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Wm(r)}}(t,e),aS(t)&&oS(t)}async function iw(t,e){const n=Et(t);n.asyncQueue.verifyOperationInProgress(),st("RemoteStore","RemoteStore received new credentials");const r=iu(n);n.L_.add(3),await Vd(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await $m(n)}async function bR(t,e){const n=Et(t);e?(n.L_.delete(2),await $m(n)):e||(n.L_.add(2),await Vd(n),n.q_.set("Unknown"))}function Hc(t){return t.K_||(t.K_=function(n,r,i){const s=Et(n);return s.w_(),new aR(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:hR.bind(null,t),Ro:dR.bind(null,t),mo:fR.bind(null,t),d_:pR.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),j2(t)?R2(t):t.q_.set("Unknown")):(await t.K_.stop(),iS(t))})),t.K_}function Qo(t){return t.U_||(t.U_=function(n,r,i){const s=Et(n);return s.w_(),new oR(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:vR.bind(null,t),mo:wR.bind(null,t),f_:yR.bind(null,t),g_:_R.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Wm(t)):(await t.U_.stop(),t.O_.length>0&&(st("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D2{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Aa,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const a=Date.now()+r,o=new D2(e,n,a,i,s);return o.start(r),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new et(Re.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function F2(t,e){if(Ra("AsyncQueue",`${e}: ${t}`),Fd(t))return new et(Re.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dc{constructor(e){this.comparator=e?(n,r)=>e(n,r)||ht.comparator(n.key,r.key):(n,r)=>ht.comparator(n.key,r.key),this.keyedMap=Ph(),this.sortedSet=new wn(this.comparator)}static emptySet(e){return new dc(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof dc)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new dc;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sw{constructor(){this.W_=new wn(ht.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):wt():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Cc{constructor(e,n,r,i,s,a,o,l,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=o,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,i,s){const a=[];return n.forEach(o=>{a.push({type:0,doc:o})}),new Cc(e,n,dc.emptySet(n),a,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Um(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xR{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class SR{constructor(){this.queries=aw(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=Et(n),s=i.queries;i.queries=aw(),s.forEach((a,o)=>{for(const l of o.j_)l.onError(r)})})(this,new et(Re.ABORTED,"Firestore shutting down"))}}function aw(){return new zc(t=>Px(t),Um)}async function lS(t,e){const n=Et(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new xR,r=e.J_()?0:1);try{switch(r){case 0:s.z_=await n.onListen(i,!0);break;case 1:s.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(a){const o=F2(a,`Initialization of query '${Ou(e.query)}' failed`);return void e.onError(o)}n.queries.set(i,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&O2(n)}async function uS(t,e){const n=Et(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const a=s.j_.indexOf(e);a>=0&&(s.j_.splice(a,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function NR(t,e){const n=Et(t);let r=!1;for(const i of e){const s=i.query,a=n.queries.get(s);if(a){for(const o of a.j_)o.X_(i)&&(r=!0);a.z_=i}}r&&O2(n)}function AR(t,e,n){const r=Et(t),i=r.queries.get(e);if(i)for(const s of i.j_)s.onError(n);r.queries.delete(e)}function O2(t){t.Y_.forEach(e=>{e.next()})}var q0,ow;(ow=q0||(q0={})).ea="default",ow.Cache="cache";class cS{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Cc(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Cc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==q0.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hS{constructor(e){this.key=e}}class dS{constructor(e){this.key=e}}class ER{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=jt(),this.mutatedKeys=jt(),this.Aa=Cx(e),this.Ra=new dc(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new sw,i=n?n.Ra:this.Ra;let s=n?n.mutatedKeys:this.mutatedKeys,a=i,o=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{const g=i.get(h),m=Bm(this.query,p)?p:null,b=!!g&&this.mutatedKeys.has(g.key),x=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let k=!1;g&&m?g.data.isEqual(m.data)?b!==x&&(r.track({type:3,doc:m}),k=!0):this.ga(g,m)||(r.track({type:2,doc:m}),k=!0,(l&&this.Aa(m,l)>0||u&&this.Aa(m,u)<0)&&(o=!0)):!g&&m?(r.track({type:0,doc:m}),k=!0):g&&!m&&(r.track({type:1,doc:g}),k=!0,(l||u)&&(o=!0)),k&&(m?(a=a.add(m),s=x?s.add(h):s.delete(h)):(a=a.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const h=this.query.limitType==="F"?a.last():a.first();a=a.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{Ra:a,fa:r,ns:o,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const a=e.fa.G_();a.sort((h,p)=>function(m,b){const x=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return wt()}};return x(m)-x(b)}(h.type,p.type)||this.Aa(h.doc,p.doc)),this.pa(r),i=i!=null&&i;const o=n&&!i?this.ya():[],l=this.da.size===0&&this.current&&!i?1:0,u=l!==this.Ea;return this.Ea=l,a.length!==0||u?{snapshot:new Cc(this.query,e.Ra,s,a,e.mutatedKeys,l===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:o}:{wa:o}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new sw,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=jt(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new dS(r))}),this.da.forEach(r=>{e.has(r)||n.push(new hS(r))}),n}ba(e){this.Ta=e.Ts,this.da=jt();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Cc.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class kR{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class IR{constructor(e){this.key=e,this.va=!1}}class TR{constructor(e,n,r,i,s,a){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.Ca={},this.Fa=new zc(o=>Px(o),Um),this.Ma=new Map,this.xa=new Set,this.Oa=new wn(ht.comparator),this.Na=new Map,this.La=new I2,this.Ba={},this.ka=new Map,this.qa=Pc.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function PR(t,e,n=!0){const r=yS(t);let i;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await fS(r,e,n,!0),i}async function CR(t,e){const n=yS(t);await fS(n,e,!0,!1)}async function fS(t,e,n,r){const i=await ZL(t.localStore,zs(e)),s=i.targetId,a=t.sharedClientState.addLocalQueryTarget(s,n);let o;return r&&(o=await LR(t,e,s,a==="current",i.resumeToken)),t.isPrimaryClient&&n&&nS(t.remoteStore,i),o}async function LR(t,e,n,r,i){t.Ka=(p,g,m)=>async function(x,k,_,A){let C=k.view.ma(_);C.ns&&(C=await tw(x.localStore,k.query,!1).then(({documents:L})=>k.view.ma(L,C)));const F=A&&A.targetChanges.get(k.targetId),Y=A&&A.targetMismatches.get(k.targetId)!=null,B=k.view.applyChanges(C,x.isPrimaryClient,F,Y);return uw(x,k.targetId,B.wa),B.snapshot}(t,p,g,m);const s=await tw(t.localStore,e,!0),a=new ER(e,s.Ts),o=a.ma(s.documents),l=Md.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),u=a.applyChanges(o,t.isPrimaryClient,l);uw(t,n,u.wa);const h=new kR(e,n,a);return t.Fa.set(e,h),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),u.snapshot}async function RR(t,e,n){const r=Et(t),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(a=>!Um(a,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await K0(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&C2(r.remoteStore,i.targetId),z0(r,i.targetId)}).catch(Dd)):(z0(r,i.targetId),await K0(r.localStore,i.targetId,!0))}async function jR(t,e){const n=Et(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),C2(n.remoteStore,r.targetId))}async function DR(t,e,n){const r=KR(t);try{const i=await function(a,o){const l=Et(a),u=Jn.now(),h=o.reduce((m,b)=>m.add(b.key),jt());let p,g;return l.persistence.runTransaction("Locally write mutations","readwrite",m=>{let b=ja(),x=jt();return l.cs.getEntries(m,h).next(k=>{b=k,b.forEach((_,A)=>{A.isValidDocument()||(x=x.add(_))})}).next(()=>l.localDocuments.getOverlayedDocuments(m,b)).next(k=>{p=k;const _=[];for(const A of o){const C=rL(A,p.get(A.key).overlayedDocument);C!=null&&_.push(new rl(A.key,C,xx(C.value.mapValue),Ui.exists(!0)))}return l.mutationQueue.addMutationBatch(m,u,_,o)}).next(k=>{g=k;const _=k.applyToLocalDocumentSet(p,x);return l.documentOverlayCache.saveOverlays(m,k.batchId,_)})}).then(()=>({batchId:g.batchId,changes:Rx(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,o,l){let u=a.Ba[a.currentUser.toKey()];u||(u=new wn(Ut)),u=u.insert(o,l),a.Ba[a.currentUser.toKey()]=u}(r,i.batchId,n),await Ud(r,i.changes),await Wm(r.remoteStore)}catch(i){const s=F2(i,"Failed to persist write");n.reject(s)}}async function pS(t,e){const n=Et(t);try{const r=await YL(n.localStore,e);e.targetChanges.forEach((i,s)=>{const a=n.Na.get(s);a&&(Yt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?a.va=!0:i.modifiedDocuments.size>0?Yt(a.va):i.removedDocuments.size>0&&(Yt(a.va),a.va=!1))}),await Ud(n,r,e)}catch(r){await Dd(r)}}function lw(t,e,n){const r=Et(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach((s,a)=>{const o=a.view.Z_(e);o.snapshot&&i.push(o.snapshot)}),function(a,o){const l=Et(a);l.onlineState=o;let u=!1;l.queries.forEach((h,p)=>{for(const g of p.j_)g.Z_(o)&&(u=!0)}),u&&O2(l)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function FR(t,e,n){const r=Et(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),s=i&&i.key;if(s){let a=new wn(ht.comparator);a=a.insert(s,Pr.newNoDocument(s,At.min()));const o=jt().add(s),l=new zm(At.min(),new Map,new wn(Ut),a,o);await pS(r,l),r.Oa=r.Oa.remove(s),r.Na.delete(e),M2(r)}else await K0(r.localStore,e,!1).then(()=>z0(r,e,n)).catch(Dd)}async function OR(t,e){const n=Et(t),r=e.batch.batchId;try{const i=await QL(n.localStore,e);gS(n,r,null),mS(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Ud(n,i)}catch(i){await Dd(i)}}async function MR(t,e,n){const r=Et(t);try{const i=await function(a,o){const l=Et(a);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let h;return l.mutationQueue.lookupMutationBatch(u,o).next(p=>(Yt(p!==null),h=p.keys(),l.mutationQueue.removeMutationBatch(u,p))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,h,o)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,h)).next(()=>l.localDocuments.getDocuments(u,h))})}(r.localStore,e);gS(r,e,n),mS(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Ud(r,i)}catch(i){await Dd(i)}}function mS(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function gS(t,e,n){const r=Et(t);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function z0(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||vS(t,r)})}function vS(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(C2(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),M2(t))}function uw(t,e,n){for(const r of n)r instanceof hS?(t.La.addReference(r.key,e),VR(t,r)):r instanceof dS?(st("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||vS(t,r.key)):wt()}function VR(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(st("SyncEngine","New document in limbo: "+n),t.xa.add(r),M2(t))}function M2(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new ht(un.fromString(e)),r=t.qa.next();t.Na.set(r,new IR(n)),t.Oa=t.Oa.insert(n,r),nS(t.remoteStore,new To(zs(x2(n.path)),r,"TargetPurposeLimboResolution",g2.oe))}}async function Ud(t,e,n){const r=Et(t),i=[],s=[],a=[];r.Fa.isEmpty()||(r.Fa.forEach((o,l)=>{a.push(r.Ka(l,e,n).then(u=>{var h;if((u||n)&&r.isPrimaryClient){const p=u?!u.fromCache:(h=n==null?void 0:n.targetChanges.get(l.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(l.targetId,p?"current":"not-current")}if(u){i.push(u);const p=P2.Wi(l.targetId,u);s.push(p)}}))}),await Promise.all(a),r.Ca.d_(i),await async function(l,u){const h=Et(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>Ue.forEach(u,g=>Ue.forEach(g.$i,m=>h.persistence.referenceDelegate.addReference(p,g.targetId,m)).next(()=>Ue.forEach(g.Ui,m=>h.persistence.referenceDelegate.removeReference(p,g.targetId,m)))))}catch(p){if(!Fd(p))throw p;st("LocalStore","Failed to update sequence numbers: "+p)}for(const p of u){const g=p.targetId;if(!p.fromCache){const m=h.os.get(g),b=m.snapshotVersion,x=m.withLastLimboFreeSnapshotVersion(b);h.os=h.os.insert(g,x)}}}(r.localStore,s))}async function UR(t,e){const n=Et(t);if(!n.currentUser.isEqual(e)){st("SyncEngine","User change. New user:",e.toKey());const r=await Xx(n.localStore,e);n.currentUser=e,function(s,a){s.ka.forEach(o=>{o.forEach(l=>{l.reject(new et(Re.CANCELLED,a))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Ud(n,r.hs)}}function BR(t,e){const n=Et(t),r=n.Na.get(e);if(r&&r.va)return jt().add(r.key);{let i=jt();const s=n.Ma.get(e);if(!s)return i;for(const a of s){const o=n.Fa.get(a);i=i.unionWith(o.view.Va)}return i}}function yS(t){const e=Et(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=pS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=BR.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=FR.bind(null,e),e.Ca.d_=NR.bind(null,e.eventManager),e.Ca.$a=AR.bind(null,e.eventManager),e}function KR(t){const e=Et(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=OR.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=MR.bind(null,e),e}class rm{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Hm(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return GL(this.persistence,new $L,e.initialUser,this.serializer)}Ga(e){return new qL(T2.Zr,this.serializer)}Wa(e){return new tR}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}rm.provider={build:()=>new rm};class H0{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>lw(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=UR.bind(null,this.syncEngine),await bR(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new SR}()}createDatastore(e){const n=Hm(e.databaseInfo.databaseId),r=function(s){return new sR(s)}(e.databaseInfo);return function(s,a,o,l){return new lR(s,a,o,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,a,o){return new cR(r,i,s,a,o)}(this.localStore,this.datastore,e.asyncQueue,n=>lw(this.syncEngine,n,0),function(){return rw.D()?new rw:new nR}())}createSyncEngine(e,n){return function(i,s,a,o,l,u,h){const p=new TR(i,s,a,o,l,u);return h&&(p.Qa=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=Et(i);st("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await Vd(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}H0.provider={build:()=>new H0};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _S{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Ra("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qR{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Ir.UNAUTHENTICATED,this.clientId=_x.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async a=>{st("FirestoreClient","Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(r,a=>(st("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Aa;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=F2(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function c1(t,e){t.asyncQueue.verifyOperationInProgress(),st("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await Xx(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function cw(t,e){t.asyncQueue.verifyOperationInProgress();const n=await zR(t);st("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>iw(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>iw(e.remoteStore,i)),t._onlineComponents=e}async function zR(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){st("FirestoreClient","Using user provided OfflineComponentProvider");try{await c1(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===Re.FAILED_PRECONDITION||i.code===Re.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Ec("Error using user provided cache. Falling back to memory cache: "+n),await c1(t,new rm)}}else st("FirestoreClient","Using default OfflineComponentProvider"),await c1(t,new rm);return t._offlineComponents}async function wS(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(st("FirestoreClient","Using user provided OnlineComponentProvider"),await cw(t,t._uninitializedComponentsProvider._online)):(st("FirestoreClient","Using default OnlineComponentProvider"),await cw(t,new H0))),t._onlineComponents}function HR(t){return wS(t).then(e=>e.syncEngine)}async function bS(t){const e=await wS(t),n=e.eventManager;return n.onListen=PR.bind(null,e.syncEngine),n.onUnlisten=RR.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=CR.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=jR.bind(null,e.syncEngine),n}function $R(t,e,n={}){const r=new Aa;return t.asyncQueue.enqueueAndForget(async()=>function(s,a,o,l,u){const h=new _S({next:g=>{h.Za(),a.enqueueAndForget(()=>uS(s,p));const m=g.docs.has(o);!m&&g.fromCache?u.reject(new et(Re.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&g.fromCache&&l&&l.source==="server"?u.reject(new et(Re.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(g)},error:g=>u.reject(g)}),p=new cS(x2(o.path),h,{includeMetadataChanges:!0,_a:!0});return lS(s,p)}(await bS(t),t.asyncQueue,e,n,r)),r.promise}function WR(t,e,n={}){const r=new Aa;return t.asyncQueue.enqueueAndForget(async()=>function(s,a,o,l,u){const h=new _S({next:g=>{h.Za(),a.enqueueAndForget(()=>uS(s,p)),g.fromCache&&l.source==="server"?u.reject(new et(Re.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(g)},error:g=>u.reject(g)}),p=new cS(o,h,{includeMetadataChanges:!0,_a:!0});return lS(s,p)}(await bS(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xS(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hw=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SS(t,e,n){if(!n)throw new et(Re.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function GR(t,e,n,r){if(e===!0&&r===!0)throw new et(Re.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function dw(t){if(!ht.isDocumentKey(t))throw new et(Re.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function fw(t){if(ht.isDocumentKey(t))throw new et(Re.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Gm(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":wt()}function fs(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new et(Re.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Gm(t);throw new et(Re.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pw{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new et(Re.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new et(Re.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}GR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=xS((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new et(Re.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new et(Re.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new et(Re.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Qm{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new pw({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new et(Re.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new et(Re.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new pw(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new d8;switch(r.type){case"firstParty":return new g8(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new et(Re.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=hw.get(n);r&&(st("ComponentProvider","Removing Datastore"),hw.delete(n),r.terminate())}(this),Promise.resolve()}}function QR(t,e,n,r={}){var i;const s=(t=fs(t,Qm))._getSettings(),a=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==a&&Ec("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:a,ssl:!1})),r.mockUserToken){let o,l;if(typeof r.mockUserToken=="string")o=r.mockUserToken,l=Ir.MOCK_USER;else{o=k3(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new et(Re.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Ir(u)}t._authCredentials=new f8(new yx(o,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class su{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new su(this.firestore,e,this._query)}}class zr{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new qo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new zr(this.firestore,e,this._key)}}class qo extends su{constructor(e,n,r){super(e,n,x2(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new zr(this.firestore,null,new ht(e))}withConverter(e){return new qo(this.firestore,e,this._path)}}function Xn(t,e,...n){if(t=_n(t),SS("collection","path",e),t instanceof Qm){const r=un.fromString(e,...n);return fw(r),new qo(t,null,r)}{if(!(t instanceof zr||t instanceof qo))throw new et(Re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(un.fromString(e,...n));return fw(r),new qo(t.firestore,null,r)}}function In(t,e,...n){if(t=_n(t),arguments.length===1&&(e=_x.newId()),SS("doc","path",e),t instanceof Qm){const r=un.fromString(e,...n);return dw(r),new zr(t,null,new ht(r))}{if(!(t instanceof zr||t instanceof qo))throw new et(Re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(un.fromString(e,...n));return dw(r),new zr(t.firestore,t instanceof qo?t.converter:null,new ht(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mw{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new eS(this,"async_queue_retry"),this.Vu=()=>{const r=u1();r&&st("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=u1();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=u1();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Aa;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Fd(e))throw e;st("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(a){let o=a.message||"";return a.stack&&(o=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),o}(r);throw Ra("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const i=D2.createAndSchedule(this,e,n,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&wt()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}class au extends Qm{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new mw,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new mw(e),this._firestoreClient=void 0,await e}}}function YR(t,e){const n=typeof t=="object"?t:s2(),r=typeof t=="string"?t:"(default)",i=jm(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=N3("firestore");s&&QR(i,...s)}return i}function V2(t){if(t._terminated)throw new et(Re.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||JR(t),t._firestoreClient}function JR(t){var e,n,r;const i=t._freezeSettings(),s=function(o,l,u,h){return new T8(o,l,u,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,xS(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new qR(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(o){const l=o==null?void 0:o._online.build();return{_offline:o==null?void 0:o._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Lc(gr.fromBase64String(e))}catch(n){throw new et(Re.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Lc(gr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ym{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new et(Re.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new dr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U2{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B2{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new et(Re.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new et(Re.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ut(this._lat,e._lat)||Ut(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K2{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XR=/^__.*__$/;class ZR{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new rl(e,this.data,this.fieldMask,n,this.fieldTransforms):new Od(e,this.data,n,this.fieldTransforms)}}class NS{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new rl(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function AS(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw wt()}}class q2{constructor(e,n,r,i,s,a){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new q2(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return im(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(AS(this.Cu)&&XR.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class ej{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Hm(e)}Qu(e,n,r,i=!1){return new q2({Cu:e,methodName:n,qu:r,path:dr.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Jm(t){const e=t._freezeSettings(),n=Hm(t._databaseId);return new ej(t._databaseId,!!e.ignoreUndefinedProperties,n)}function ES(t,e,n,r,i,s={}){const a=t.Qu(s.merge||s.mergeFields?2:0,e,n,i);z2("Data must be an object, but it was:",a,r);const o=kS(r,a);let l,u;if(s.merge)l=new wi(a.fieldMask),u=a.fieldTransforms;else if(s.mergeFields){const h=[];for(const p of s.mergeFields){const g=$0(e,p,n);if(!a.contains(g))throw new et(Re.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);TS(h,g)||h.push(g)}l=new wi(h),u=a.fieldTransforms.filter(p=>l.covers(p.field))}else l=null,u=a.fieldTransforms;return new ZR(new ii(o),l,u)}class Xm extends U2{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Xm}}function tj(t,e,n,r){const i=t.Qu(1,e,n);z2("Data must be an object, but it was:",i,r);const s=[],a=ii.empty();ru(r,(l,u)=>{const h=H2(e,l,n);u=_n(u);const p=i.Nu(h);if(u instanceof Xm)s.push(h);else{const g=Bd(u,p);g!=null&&(s.push(h),a.set(h,g))}});const o=new wi(s);return new NS(a,o,i.fieldTransforms)}function nj(t,e,n,r,i,s){const a=t.Qu(1,e,n),o=[$0(e,r,n)],l=[i];if(s.length%2!=0)throw new et(Re.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<s.length;g+=2)o.push($0(e,s[g])),l.push(s[g+1]);const u=[],h=ii.empty();for(let g=o.length-1;g>=0;--g)if(!TS(u,o[g])){const m=o[g];let b=l[g];b=_n(b);const x=a.Nu(m);if(b instanceof Xm)u.push(m);else{const k=Bd(b,x);k!=null&&(u.push(m),h.set(m,k))}}const p=new wi(u);return new NS(h,p,a.fieldTransforms)}function rj(t,e,n,r=!1){return Bd(n,t.Qu(r?4:3,e))}function Bd(t,e){if(IS(t=_n(t)))return z2("Unsupported field value:",e,t),kS(t,e);if(t instanceof U2)return function(r,i){if(!AS(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const s=[];let a=0;for(const o of r){let l=Bd(o,i.Lu(a));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),a++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=_n(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return J8(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Jn.fromDate(r);return{timestampValue:tm(i.serializer,s)}}if(r instanceof Jn){const s=new Jn(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:tm(i.serializer,s)}}if(r instanceof B2)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Lc)return{bytesValue:Hx(i.serializer,r._byteString)};if(r instanceof zr){const s=i.databaseId,a=r.firestore._databaseId;if(!a.isEqual(s))throw i.Bu(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:k2(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof K2)return function(a,o){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:a.toArray().map(l=>{if(typeof l!="number")throw o.Bu("VectorValues must only contain numeric values.");return S2(o.serializer,l)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${Gm(r)}`)}(t,e)}function kS(t,e){const n={};return wx(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ru(t,(r,i)=>{const s=Bd(i,e.Mu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function IS(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Jn||t instanceof B2||t instanceof Lc||t instanceof zr||t instanceof U2||t instanceof K2)}function z2(t,e,n){if(!IS(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=Gm(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function $0(t,e,n){if((e=_n(e))instanceof Ym)return e._internalPath;if(typeof e=="string")return H2(t,e);throw im("Field path arguments must be of type string or ",t,!1,void 0,n)}const ij=new RegExp("[~\\*/\\[\\]]");function H2(t,e,n){if(e.search(ij)>=0)throw im(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Ym(...e.split("."))._internalPath}catch{throw im(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function im(t,e,n,r,i){const s=r&&!r.isEmpty(),a=i!==void 0;let o=`Function ${e}() called with invalid data`;n&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(s||a)&&(l+=" (found",s&&(l+=` in field ${r}`),a&&(l+=` in document ${i}`),l+=")"),new et(Re.INVALID_ARGUMENT,o+t+l)}function TS(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PS{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new zr(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new sj(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Zm("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class sj extends PS{data(){return super.data()}}function Zm(t,e){return typeof e=="string"?H2(t,e):e instanceof Ym?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aj(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new et(Re.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class $2{}class CS extends $2{}function Kd(t,e,...n){let r=[];e instanceof $2&&r.push(e),r=r.concat(n),function(s){const a=s.filter(l=>l instanceof W2).length,o=s.filter(l=>l instanceof eg).length;if(a>1||a>0&&o>0)throw new et(Re.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class eg extends CS{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new eg(e,n,r)}_apply(e){const n=this._parse(e);return LS(e._query,n),new su(e.firestore,e.converter,F0(e._query,n))}_parse(e){const n=Jm(e.firestore);return function(s,a,o,l,u,h,p){let g;if(u.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new et(Re.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){vw(p,h);const m=[];for(const b of p)m.push(gw(l,s,b));g={arrayValue:{values:m}}}else g=gw(l,s,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||vw(p,h),g=rj(o,a,p,h==="in"||h==="not-in");return Hn.create(u,h,g)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function tg(t,e,n){const r=e,i=Zm("where",t);return eg._create(i,r,n)}class W2 extends $2{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new W2(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:ds.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let a=i;const o=s.getFlattenedFilters();for(const l of o)LS(a,l),a=F0(a,l)}(e._query,n),new su(e.firestore,e.converter,F0(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class G2 extends CS{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new G2(e,n)}_apply(e){const n=function(i,s,a){if(i.startAt!==null)throw new et(Re.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new et(Re.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new bd(s,a)}(e._query,this._field,this._direction);return new su(e.firestore,e.converter,function(i,s){const a=i.explicitOrderBy.concat([s]);return new qc(i.path,i.collectionGroup,a,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function Q2(t,e="asc"){const n=e,r=Zm("orderBy",t);return G2._create(r,n)}function gw(t,e,n){if(typeof(n=_n(n))=="string"){if(n==="")throw new et(Re.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Tx(e)&&n.indexOf("/")!==-1)throw new et(Re.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(un.fromString(n));if(!ht.isDocumentKey(r))throw new et(Re.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return M_(t,new ht(r))}if(n instanceof zr)return M_(t,n._key);throw new et(Re.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Gm(n)}.`)}function vw(t,e){if(!Array.isArray(t)||t.length===0)throw new et(Re.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function LS(t,e){const n=function(i,s){for(const a of i)for(const o of a.getFlattenedFilters())if(s.indexOf(o.op)>=0)return o.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new et(Re.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new et(Re.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class oj{convertValue(e,n="none"){switch(Jl(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Rn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Yl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw wt()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return ru(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(a=>Rn(a.doubleValue));return new K2(s)}convertGeoPoint(e){return new B2(Rn(e.latitude),Rn(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=y2(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(yd(e));default:return null}}convertTimestamp(e){const n=Go(e);return new Jn(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=un.fromString(e);Yt(Jx(r));const i=new _d(r.get(1),r.get(3)),s=new ht(r.popFirst(5));return i.isEqual(n)||Ra(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RS(t,e,n){let r;return r=t?t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lh{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class jS extends PS{constructor(e,n,r,i,s,a){super(e,n,r,i,a),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new cp(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Zm("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class cp extends jS{data(e={}){return super.data(e)}}class lj{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Lh(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new cp(this._firestore,this._userDataWriter,r.key,r,new Lh(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new et(Re.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let a=0;return i._snapshot.docChanges.map(o=>{const l=new cp(i._firestore,i._userDataWriter,o.doc.key,o.doc,new Lh(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);return o.doc,{type:"added",doc:l,oldIndex:-1,newIndex:a++}})}{let a=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(o=>s||o.type!==3).map(o=>{const l=new cp(i._firestore,i._userDataWriter,o.doc.key,o.doc,new Lh(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,h=-1;return o.type!==0&&(u=a.indexOf(o.doc.key),a=a.delete(o.doc.key)),o.type!==1&&(a=a.add(o.doc),h=a.indexOf(o.doc.key)),{type:uj(o.type),doc:l,oldIndex:u,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function uj(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return wt()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ng(t){t=fs(t,zr);const e=fs(t.firestore,au);return $R(V2(e),t._key).then(n=>cj(e,t,n))}class DS extends oj{constructor(e){super(),this.firestore=e}convertBytes(e){return new Lc(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new zr(this.firestore,null,n)}}function ms(t){t=fs(t,su);const e=fs(t.firestore,au),n=V2(e),r=new DS(e);return aj(t._query),WR(n,t._query).then(i=>new lj(e,r,t,i))}function W0(t,e,n){t=fs(t,zr);const r=fs(t.firestore,au),i=RS(t.converter,e);return rg(r,[ES(Jm(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Ui.none())])}function Yo(t,e,n,...r){t=fs(t,zr);const i=fs(t.firestore,au),s=Jm(i);let a;return a=typeof(e=_n(e))=="string"||e instanceof Ym?nj(s,"updateDoc",t._key,e,n,r):tj(s,"updateDoc",t._key,e),rg(i,[a.toMutation(t._key,Ui.exists(!0))])}function il(t){return rg(fs(t.firestore,au),[new N2(t._key,Ui.none())])}function sl(t,e){const n=fs(t.firestore,au),r=In(t),i=RS(t.converter,e);return rg(n,[ES(Jm(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Ui.exists(!1))]).then(()=>r)}function rg(t,e){return function(r,i){const s=new Aa;return r.asyncQueue.enqueueAndForget(async()=>DR(await HR(r),i,s)),s.promise}(V2(t),e)}function cj(t,e,n){const r=n.docs.get(e._key),i=new DS(t);return new jS(t,i,e._key,r,new Lh(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){Kc=i})(tu),Wl(new $o("firestore",(r,{instanceIdentifier:i,options:s})=>{const a=r.getProvider("app").getImmediate(),o=new au(new p8(r.getProvider("auth-internal")),new y8(r.getProvider("app-check-internal")),function(u,h){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new et(Re.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new _d(u.options.projectId,h)}(a,i),a);return s=Object.assign({useFetchStreams:n},s),o._setSettings(s),o},"PUBLIC").setMultipleInstances(!0)),Bs(R_,"4.7.3",e),Bs(R_,"4.7.3","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FS="firebasestorage.googleapis.com",OS="storageBucket",hj=2*60*1e3,dj=10*60*1e3,fj=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn extends Qs{constructor(e,n,r=0){super(h1(e),`Firebase Storage: ${n} (${h1(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,bn.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return h1(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var dn;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(dn||(dn={}));function h1(t){return"storage/"+t}function Y2(){const t="An unknown error occurred, please check the error payload for server response.";return new bn(dn.UNKNOWN,t)}function pj(t){return new bn(dn.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function mj(t){return new bn(dn.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function gj(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new bn(dn.UNAUTHENTICATED,t)}function vj(){return new bn(dn.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function yj(t){return new bn(dn.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function MS(){return new bn(dn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function VS(){return new bn(dn.CANCELED,"User canceled the upload/download.")}function _j(t){return new bn(dn.INVALID_URL,"Invalid URL '"+t+"'.")}function wj(t){return new bn(dn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function bj(){return new bn(dn.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+OS+"' property when initializing the app?")}function US(){return new bn(dn.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function xj(){return new bn(dn.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function Sj(){return new bn(dn.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function Nj(t){return new bn(dn.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function G0(t){return new bn(dn.INVALID_ARGUMENT,t)}function BS(){return new bn(dn.APP_DELETED,"The Firebase app was deleted.")}function Aj(t){return new bn(dn.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Wh(t,e){return new bn(dn.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function wh(t){throw new bn(dn.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bi{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=bi.makeFromUrl(e,n)}catch{return new bi(e,"")}if(r.path==="")return r;throw wj(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(F){F.path.charAt(F.path.length-1)==="/"&&(F.path_=F.path_.slice(0,-1))}const a="(/(.*))?$",o=new RegExp("^gs://"+i+a,"i"),l={bucket:1,path:3};function u(F){F.path_=decodeURIComponent(F.path)}const h="v[A-Za-z0-9_]+",p=n.replace(/[.]/g,"\\."),g="(/([^?#]*).*)?$",m=new RegExp(`^https?://${p}/${h}/b/${i}/o${g}`,"i"),b={bucket:1,path:3},x=n===FS?"(?:storage.googleapis.com|storage.cloud.google.com)":n,k="([^?#]*)",_=new RegExp(`^https?://${x}/${i}/${k}`,"i"),C=[{regex:o,indices:l,postModify:s},{regex:m,indices:b,postModify:u},{regex:_,indices:{bucket:1,path:2},postModify:u}];for(let F=0;F<C.length;F++){const Y=C[F],B=Y.regex.exec(e);if(B){const L=B[Y.indices.bucket];let y=B[Y.indices.path];y||(y=""),r=new bi(L,y),Y.postModify(r);break}}if(r==null)throw _j(e);return r}}class Ej{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kj(t,e,n){let r=1,i=null,s=null,a=!1,o=0;function l(){return o===2}let u=!1;function h(...k){u||(u=!0,e.apply(null,k))}function p(k){i=setTimeout(()=>{i=null,t(m,l())},k)}function g(){s&&clearTimeout(s)}function m(k,..._){if(u){g();return}if(k){g(),h.call(null,k,..._);return}if(l()||a){g(),h.call(null,k,..._);return}r<64&&(r*=2);let C;o===1?(o=2,C=0):C=(r+Math.random())*1e3,p(C)}let b=!1;function x(k){b||(b=!0,g(),!u&&(i!==null?(k||(o=2),clearTimeout(i),p(0)):k||(o=1)))}return p(0),s=setTimeout(()=>{a=!0,x(!0)},n),x}function Ij(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tj(t){return t!==void 0}function Pj(t){return typeof t=="function"}function Cj(t){return typeof t=="object"&&!Array.isArray(t)}function ig(t){return typeof t=="string"||t instanceof String}function yw(t){return J2()&&t instanceof Blob}function J2(){return typeof Blob<"u"}function _w(t,e,n,r){if(r<e)throw G0(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw G0(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $c(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function KS(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var Ul;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Ul||(Ul={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qS(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lj{constructor(e,n,r,i,s,a,o,l,u,h,p,g=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=a,this.callback_=o,this.errorCallback_=l,this.timeout_=u,this.progressCallback_=h,this.connectionFactory_=p,this.retry=g,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((m,b)=>{this.resolve_=m,this.reject_=b,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new Mf(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const a=o=>{const l=o.loaded,u=o.lengthComputable?o.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,u)};this.progressCallback_!==null&&s.addUploadProgressListener(a),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(a),this.pendingConnection_=null;const o=s.getErrorCode()===Ul.NO_ERROR,l=s.getStatus();if(!o||qS(l,this.additionalRetryCodes_)&&this.retry){const h=s.getErrorCode()===Ul.ABORT;r(!1,new Mf(!1,null,h));return}const u=this.successCodes_.indexOf(l)!==-1;r(!0,new Mf(u,s))})},n=(r,i)=>{const s=this.resolve_,a=this.reject_,o=i.connection;if(i.wasSuccessCode)try{const l=this.callback_(o,o.getResponse());Tj(l)?s(l):s()}catch(l){a(l)}else if(o!==null){const l=Y2();l.serverResponse=o.getErrorText(),this.errorCallback_?a(this.errorCallback_(o,l)):a(l)}else if(i.canceled){const l=this.appDelete_?BS():VS();a(l)}else{const l=MS();a(l)}};this.canceled_?n(!1,new Mf(!1,null,!0)):this.backoffId_=kj(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&Ij(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Mf{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function Rj(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function jj(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function Dj(t,e){e&&(t["X-Firebase-GMPID"]=e)}function Fj(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function Oj(t,e,n,r,i,s,a=!0){const o=KS(t.urlParams),l=t.url+o,u=Object.assign({},t.headers);return Dj(u,e),Rj(u,n),jj(u,s),Fj(u,r),new Lj(l,t.method,u,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mj(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function Vj(...t){const e=Mj();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(J2())return new Blob(t);throw new bn(dn.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function Uj(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bj(t){if(typeof atob>"u")throw Nj("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Os={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class d1{constructor(e,n){this.data=e,this.contentType=n||null}}function Kj(t,e){switch(t){case Os.RAW:return new d1(zS(e));case Os.BASE64:case Os.BASE64URL:return new d1(HS(t,e));case Os.DATA_URL:return new d1(zj(e),Hj(e))}throw Y2()}function zS(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const s=r,a=t.charCodeAt(++n);r=65536|(s&1023)<<10|a&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function qj(t){let e;try{e=decodeURIComponent(t)}catch{throw Wh(Os.DATA_URL,"Malformed data URL.")}return zS(e)}function HS(t,e){switch(t){case Os.BASE64:{const i=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(i||s)throw Wh(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Os.BASE64URL:{const i=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(i||s)throw Wh(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=Bj(e)}catch(i){throw i.message.includes("polyfill")?i:Wh(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class $S{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Wh(Os.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=$j(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function zj(t){const e=new $S(t);return e.base64?HS(Os.BASE64,e.rest):qj(e.rest)}function Hj(t){return new $S(t).contentType}function $j(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ao{constructor(e,n){let r=0,i="";yw(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(yw(this.data_)){const r=this.data_,i=Uj(r,e,n);return i===null?null:new Ao(i)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new Ao(r,!0)}}static getBlob(...e){if(J2()){const n=e.map(r=>r instanceof Ao?r.data_:r);return new Ao(Vj.apply(null,n))}else{const n=e.map(a=>ig(a)?Kj(Os.RAW,a).data:a.data_);let r=0;n.forEach(a=>{r+=a.byteLength});const i=new Uint8Array(r);let s=0;return n.forEach(a=>{for(let o=0;o<a.length;o++)i[s++]=a[o]}),new Ao(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WS(t){let e;try{e=JSON.parse(t)}catch{return null}return Cj(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wj(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function Gj(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function GS(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qj(t,e){return e}class Br{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||Qj}}let Vf=null;function Yj(t){return!ig(t)||t.length<2?t:GS(t)}function QS(){if(Vf)return Vf;const t=[];t.push(new Br("bucket")),t.push(new Br("generation")),t.push(new Br("metageneration")),t.push(new Br("name","fullPath",!0));function e(s,a){return Yj(a)}const n=new Br("name");n.xform=e,t.push(n);function r(s,a){return a!==void 0?Number(a):a}const i=new Br("size");return i.xform=r,t.push(i),t.push(new Br("timeCreated")),t.push(new Br("updated")),t.push(new Br("md5Hash",null,!0)),t.push(new Br("cacheControl",null,!0)),t.push(new Br("contentDisposition",null,!0)),t.push(new Br("contentEncoding",null,!0)),t.push(new Br("contentLanguage",null,!0)),t.push(new Br("contentType",null,!0)),t.push(new Br("metadata","customMetadata",!0)),Vf=t,Vf}function Jj(t,e){function n(){const r=t.bucket,i=t.fullPath,s=new bi(r,i);return e._makeStorageReference(s)}Object.defineProperty(t,"ref",{get:n})}function Xj(t,e,n){const r={};r.type="file";const i=n.length;for(let s=0;s<i;s++){const a=n[s];r[a.local]=a.xform(r,e[a.server])}return Jj(r,t),r}function YS(t,e,n){const r=WS(e);return r===null?null:Xj(t,r,n)}function Zj(t,e,n,r){const i=WS(e);if(i===null||!ig(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const a=encodeURIComponent;return s.split(",").map(u=>{const h=t.bucket,p=t.fullPath,g="/b/"+a(h)+"/o/"+a(p),m=$c(g,n,r),b=KS({alt:"media",token:u});return m+b})[0]}function JS(t,e){const n={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(n[s.server]=t[s.local])}return JSON.stringify(n)}class ou{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ea(t){if(!t)throw Y2()}function X2(t,e){function n(r,i){const s=YS(t,i,e);return Ea(s!==null),s}return n}function e7(t,e){function n(r,i){const s=YS(t,i,e);return Ea(s!==null),Zj(s,i,t.host,t._protocol)}return n}function qd(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=vj():i=gj():n.getStatus()===402?i=mj(t.bucket):n.getStatus()===403?i=yj(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function Z2(t){const e=qd(t);function n(r,i){let s=e(r,i);return r.getStatus()===404&&(s=pj(t.path)),s.serverResponse=i.serverResponse,s}return n}function t7(t,e,n){const r=e.fullServerUrl(),i=$c(r,t.host,t._protocol),s="GET",a=t.maxOperationRetryTime,o=new ou(i,s,X2(t,n),a);return o.errorHandler=Z2(e),o}function n7(t,e,n){const r=e.fullServerUrl(),i=$c(r,t.host,t._protocol),s="GET",a=t.maxOperationRetryTime,o=new ou(i,s,e7(t,n),a);return o.errorHandler=Z2(e),o}function r7(t,e){const n=e.fullServerUrl(),r=$c(n,t.host,t._protocol),i="DELETE",s=t.maxOperationRetryTime;function a(l,u){}const o=new ou(r,i,a,s);return o.successCodes=[200,204],o.errorHandler=Z2(e),o}function i7(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function XS(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=i7(null,e)),r}function s7(t,e,n,r,i){const s=e.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"};function o(){let C="";for(let F=0;F<2;F++)C=C+Math.random().toString().slice(2);return C}const l=o();a["Content-Type"]="multipart/related; boundary="+l;const u=XS(e,r,i),h=JS(u,n),p="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+h+`\r
--`+l+`\r
Content-Type: `+u.contentType+`\r
\r
`,g=`\r
--`+l+"--",m=Ao.getBlob(p,r,g);if(m===null)throw US();const b={name:u.fullPath},x=$c(s,t.host,t._protocol),k="POST",_=t.maxUploadRetryTime,A=new ou(x,k,X2(t,n),_);return A.urlParams=b,A.headers=a,A.body=m.uploadData(),A.errorHandler=qd(e),A}class sm{constructor(e,n,r,i){this.current=e,this.total=n,this.finalized=!!r,this.metadata=i||null}}function ey(t,e){let n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch{Ea(!1)}return Ea(!!n&&(e||["active"]).indexOf(n)!==-1),n}function a7(t,e,n,r,i){const s=e.bucketOnlyServerUrl(),a=XS(e,r,i),o={name:a.fullPath},l=$c(s,t.host,t._protocol),u="POST",h={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":a.contentType,"Content-Type":"application/json; charset=utf-8"},p=JS(a,n),g=t.maxUploadRetryTime;function m(x){ey(x);let k;try{k=x.getResponseHeader("X-Goog-Upload-URL")}catch{Ea(!1)}return Ea(ig(k)),k}const b=new ou(l,u,m,g);return b.urlParams=o,b.headers=h,b.body=p,b.errorHandler=qd(e),b}function o7(t,e,n,r){const i={"X-Goog-Upload-Command":"query"};function s(u){const h=ey(u,["active","final"]);let p=null;try{p=u.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Ea(!1)}p||Ea(!1);const g=Number(p);return Ea(!isNaN(g)),new sm(g,r.size(),h==="final")}const a="POST",o=t.maxUploadRetryTime,l=new ou(n,a,s,o);return l.headers=i,l.errorHandler=qd(e),l}const ww=256*1024;function l7(t,e,n,r,i,s,a,o){const l=new sm(0,0);if(a?(l.current=a.current,l.total=a.total):(l.current=0,l.total=r.size()),r.size()!==l.total)throw xj();const u=l.total-l.current;let h=u;i>0&&(h=Math.min(h,i));const p=l.current,g=p+h;let m="";h===0?m="finalize":u===h?m="upload, finalize":m="upload";const b={"X-Goog-Upload-Command":m,"X-Goog-Upload-Offset":`${l.current}`},x=r.slice(p,g);if(x===null)throw US();function k(F,Y){const B=ey(F,["active","final"]),L=l.current+h,y=r.size();let S;return B==="final"?S=X2(e,s)(F,Y):S=null,new sm(L,y,B==="final",S)}const _="POST",A=e.maxUploadRetryTime,C=new ou(n,_,k,A);return C.headers=b,C.body=x.uploadData(),C.progressCallback=o||null,C.errorHandler=qd(t),C}const ti={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function f1(t){switch(t){case"running":case"pausing":case"canceling":return ti.RUNNING;case"paused":return ti.PAUSED;case"success":return ti.SUCCESS;case"canceled":return ti.CANCELED;case"error":return ti.ERROR;default:return ti.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u7{constructor(e,n,r){if(Pj(e)||n!=null||r!=null)this.next=e,this.error=n??void 0,this.complete=r??void 0;else{const s=e;this.next=s.next,this.error=s.error,this.complete=s.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ju(t){return(...e)=>{Promise.resolve().then(()=>t(...e))}}class c7{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Ul.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Ul.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Ul.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i){if(this.sent_)throw wh("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw wh("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw wh("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw wh("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw wh("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class h7 extends c7{initXhr(){this.xhr_.responseType="text"}}function Pl(){return new h7}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d7{constructor(e,n,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=n,this._metadata=r,this._mappings=QS(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals(dn.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const s=this.isExponentialBackoffExpired();if(qS(i.status,[]))if(s)i=MS();else{this.sleepTime=Math.max(this.sleepTime*2,fj),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals(dn.CANCELED)?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,s)=>{this._resolve=i,this._reject=s,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return n=>this._updateProgress(e+n)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,r])=>{switch(this._state){case"running":e(n,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,n)=>{const r=a7(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Pl,e,n);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((n,r)=>{const i=o7(this._ref.storage,this._ref._location,e,this._blob),s=this._ref.storage._makeRequest(i,Pl,n,r);this._request=s,s.getPromise().then(a=>{a=a,this._request=void 0,this._updateProgress(a.current),this._needToFetchStatus=!1,a.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=ww*this._chunkMultiplier,n=new sm(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,s)=>{let a;try{a=l7(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,n,this._makeProgressCallback())}catch(l){this._error=l,this._transition("error");return}const o=this._ref.storage._makeRequest(a,Pl,i,s,!1);this._request=o,o.getPromise().then(l=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(l.current),l.finalized?(this._metadata=l.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){ww*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,n)=>{const r=t7(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,Pl,e,n);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,n)=>{const r=s7(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Pl,e,n);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const n=this._transferred;this._transferred=e,this._transferred!==n&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const n=this._state==="paused";this._state=e,n&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=VS(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=f1(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,n,r,i){const s=new u7(n||void 0,r||void 0,i||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(e,n){return this._promise.then(e,n)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const n=this._observers.indexOf(e);n!==-1&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(f1(this._state)){case ti.SUCCESS:ju(this._resolve.bind(null,this.snapshot))();break;case ti.CANCELED:case ti.ERROR:const n=this._reject;ju(n.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(f1(this._state)){case ti.RUNNING:case ti.PAUSED:e.next&&ju(e.next.bind(e,this.snapshot))();break;case ti.SUCCESS:e.complete&&ju(e.complete.bind(e))();break;case ti.CANCELED:case ti.ERROR:e.error&&ju(e.error.bind(e,this._error))();break;default:e.error&&ju(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xl{constructor(e,n){this._service=e,n instanceof bi?this._location=n:this._location=bi.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Xl(e,n)}get root(){const e=new bi(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return GS(this._location.path)}get storage(){return this._service}get parent(){const e=Wj(this._location.path);if(e===null)return null;const n=new bi(this._location.bucket,e);return new Xl(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw Aj(e)}}function f7(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new d7(t,new Ao(e),n)}function p7(t){t._throwIfRoot("getDownloadURL");const e=n7(t.storage,t._location,QS());return t.storage.makeRequestWithTokens(e,Pl).then(n=>{if(n===null)throw Sj();return n})}function m7(t){t._throwIfRoot("deleteObject");const e=r7(t.storage,t._location);return t.storage.makeRequestWithTokens(e,Pl)}function g7(t,e){const n=Gj(t._location.path,e),r=new bi(t._location.bucket,n);return new Xl(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v7(t){return/^[A-Za-z]+:\/\//.test(t)}function y7(t,e){return new Xl(t,e)}function ZS(t,e){if(t instanceof ty){const n=t;if(n._bucket==null)throw bj();const r=new Xl(n,n._bucket);return e!=null?ZS(r,e):r}else return e!==void 0?g7(t,e):t}function _7(t,e){if(e&&v7(e)){if(t instanceof ty)return y7(t,e);throw G0("To use ref(service, url), the first argument must be a Storage instance.")}else return ZS(t,e)}function bw(t,e){const n=e==null?void 0:e[OS];return n==null?null:bi.makeFromBucketSpec(n,t)}function w7(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:k3(i,t.app.options.projectId))}class ty{constructor(e,n,r,i,s){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=FS,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=hj,this._maxUploadRetryTime=dj,this._requests=new Set,i!=null?this._bucket=bi.makeFromBucketSpec(i,this._host):this._bucket=bw(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=bi.makeFromBucketSpec(this._url,e):this._bucket=bw(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){_w("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){_w("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Xl(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new Ej(BS());{const a=Oj(e,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const xw="@firebase/storage",Sw="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eN="storage";function tN(t,e,n){return t=_n(t),f7(t,e,n)}function nN(t){return t=_n(t),p7(t)}function b7(t){return t=_n(t),m7(t)}function ny(t,e){return t=_n(t),_7(t,e)}function x7(t=s2(),e){t=_n(t);const r=jm(t,eN).getImmediate({identifier:e}),i=N3("storage");return i&&S7(r,...i),r}function S7(t,e,n,r={}){w7(t,e,n,r)}function N7(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new ty(n,r,i,e,tu)}function A7(){Wl(new $o(eN,N7,"PUBLIC").setMultipleInstances(!0)),Bs(xw,Sw,""),Bs(xw,Sw,"esm2017")}A7();const E7={apiKey:"AIzaSyAcdG_9cM9yzmeMOFx-fhL4QAf9_wM3Yjo",authDomain:"achandymand-145da.firebaseapp.com",projectId:"achandymand-145da",storageBucket:"achandymand-145da.firebasestorage.app",messagingSenderId:"865306374889",appId:"1:865306374889:web:be1bc2500f388596de7678"},ry=P3(E7),iy=l8(ry),Tt=YR(ry),sy=x7(ry);function k7(){const[t,e]=oe.useState(""),[n,r]=oe.useState(""),[i,s]=oe.useState(""),[a,o]=oe.useState(!1),l=Vc(),u=async h=>{h.preventDefault(),s(""),o(!0);try{await WP(iy,t,n),l("/timeregistrering")}catch(p){console.error("Login error:",p);let g="Der opstod en fejl ved login. Prv igen.";p.code==="auth/user-not-found"||p.code==="auth/wrong-password"?g="Forkert brugernavn eller adgangskode.":p.code==="auth/invalid-email"?g="Ugyldig e-mailadresse.":p.code==="auth/too-many-requests"&&(g="For mange forsg. Prv igen senere."),s(g)}finally{o(!1)}};return f.jsx("div",{className:"login-container",children:f.jsxs("div",{className:"login-box",children:[f.jsxs("div",{className:"login-logo",children:[f.jsx("h1",{children:"AC Handymand"}),f.jsx("p",{children:"Timeregistrering System"})]}),f.jsxs("form",{className:"login-form",onSubmit:u,children:[i&&f.jsx("div",{className:"error-message",children:i}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{htmlFor:"email",children:"Brugernavn (E-mail)"}),f.jsx("input",{type:"email",id:"email",value:t,onChange:h=>e(h.target.value),required:!0,disabled:a,placeholder:"din@email.dk"})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{htmlFor:"password",children:"Adgangskode"}),f.jsx("input",{type:"password",id:"password",value:n,onChange:h=>r(h.target.value),required:!0,disabled:a,placeholder:""})]}),f.jsx("button",{type:"submit",className:"btn-login",disabled:a,children:a?"Logger ind...":"Log ind"})]})]})})}const I7=["Sndag","Mandag","Tirsdag","Onsdag","Torsdag","Fredag","Lrdag"],am=["Januar","Februar","Marts","April","Maj","Juni","Juli","August","September","Oktober","November","December"];function T7(t){return I7[t.getDay()]}function P7(t){const e=t.getDay();return e===0||e===6}function C7(t,e){const n=[];let r=new Date(t,e,20);const i=e===11?0:e+1,s=e===11?t+1:t,a=new Date(s,i,19);for(;r<=a;){const o=`${String(r.getDate()).padStart(2,"0")}/${String(r.getMonth()+1).padStart(2,"0")}/${r.getFullYear()}`;n.push({date:new Date(r),dayOfMonth:r.getDate(),month:r.getMonth(),year:r.getFullYear(),weekday:T7(r),isWeekend:P7(r),formattedDate:o}),r.setDate(r.getDate()+1)}return n}function rN(t){const e=t===11?0:t+1;return`${am[t]} / ${am[e]}`}function iN(t,e){return e===11?`${t} / ${t+1}`:String(t)}function L7(){return am.map((t,e)=>{const n=e===11?0:e+1;return{value:e,label:`${t} / ${am[n]}`}})}const R7="modulepreload",j7=function(t){return"/"+t},Nw={},Q0=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),o=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));i=Promise.allSettled(n.map(l=>{if(l=j7(l),l in Nw)return;Nw[l]=!0;const u=l.endsWith(".css"),h=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${h}`))return;const p=document.createElement("link");if(p.rel=u?"stylesheet":R7,u||(p.as="script"),p.crossOrigin="",p.href=l,o&&p.setAttribute("nonce",o),document.head.appendChild(p),u)return new Promise((g,m)=>{p.addEventListener("load",g),p.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return i.then(a=>{for(const o of a||[])o.status==="rejected"&&s(o.reason);return e().catch(s)})};function Gt(t){"@babel/helpers - typeof";return Gt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gt(t)}var Cr=Uint8Array,xi=Uint16Array,ay=Int32Array,sg=new Cr([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),ag=new Cr([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Y0=new Cr([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),sN=function(t,e){for(var n=new xi(31),r=0;r<31;++r)n[r]=e+=1<<t[r-1];for(var i=new ay(n[30]),r=1;r<30;++r)for(var s=n[r];s<n[r+1];++s)i[s]=s-n[r]<<5|r;return{b:n,r:i}},aN=sN(sg,2),oN=aN.b,J0=aN.r;oN[28]=258,J0[258]=28;var lN=sN(ag,0),D7=lN.b,Aw=lN.r,X0=new xi(32768);for(var cn=0;cn<32768;++cn){var mo=(cn&43690)>>1|(cn&21845)<<1;mo=(mo&52428)>>2|(mo&13107)<<2,mo=(mo&61680)>>4|(mo&3855)<<4,X0[cn]=((mo&65280)>>8|(mo&255)<<8)>>1}var $s=function(t,e,n){for(var r=t.length,i=0,s=new xi(e);i<r;++i)t[i]&&++s[t[i]-1];var a=new xi(e);for(i=1;i<e;++i)a[i]=a[i-1]+s[i-1]<<1;var o;if(n){o=new xi(1<<e);var l=15-e;for(i=0;i<r;++i)if(t[i])for(var u=i<<4|t[i],h=e-t[i],p=a[t[i]-1]++<<h,g=p|(1<<h)-1;p<=g;++p)o[X0[p]>>l]=u}else for(o=new xi(r),i=0;i<r;++i)t[i]&&(o[i]=X0[a[t[i]-1]++]>>15-t[i]);return o},Jo=new Cr(288);for(var cn=0;cn<144;++cn)Jo[cn]=8;for(var cn=144;cn<256;++cn)Jo[cn]=9;for(var cn=256;cn<280;++cn)Jo[cn]=7;for(var cn=280;cn<288;++cn)Jo[cn]=8;var Nd=new Cr(32);for(var cn=0;cn<32;++cn)Nd[cn]=5;var F7=$s(Jo,9,0),O7=$s(Jo,9,1),M7=$s(Nd,5,0),V7=$s(Nd,5,1),p1=function(t){for(var e=t[0],n=1;n<t.length;++n)t[n]>e&&(e=t[n]);return e},ts=function(t,e,n){var r=e/8|0;return(t[r]|t[r+1]<<8)>>(e&7)&n},m1=function(t,e){var n=e/8|0;return(t[n]|t[n+1]<<8|t[n+2]<<16)>>(e&7)},oy=function(t){return(t+7)/8|0},uN=function(t,e,n){return(n==null||n>t.length)&&(n=t.length),new Cr(t.subarray(e,n))},U7=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],ss=function(t,e,n){var r=new Error(e||U7[t]);if(r.code=t,Error.captureStackTrace&&Error.captureStackTrace(r,ss),!n)throw r;return r},B7=function(t,e,n,r){var i=t.length,s=0;if(!i||e.f&&!e.l)return n||new Cr(0);var a=!n,o=a||e.i!=2,l=e.i;a&&(n=new Cr(i*3));var u=function(Ie){var je=n.length;if(Ie>je){var Ke=new Cr(Math.max(je*2,Ie));Ke.set(n),n=Ke}},h=e.f||0,p=e.p||0,g=e.b||0,m=e.l,b=e.d,x=e.m,k=e.n,_=i*8;do{if(!m){h=ts(t,p,1);var A=ts(t,p+1,3);if(p+=3,A)if(A==1)m=O7,b=V7,x=9,k=5;else if(A==2){var B=ts(t,p,31)+257,L=ts(t,p+10,15)+4,y=B+ts(t,p+5,31)+1;p+=14;for(var S=new Cr(y),R=new Cr(19),E=0;E<L;++E)R[Y0[E]]=ts(t,p+E*3,7);p+=L*3;for(var I=p1(R),P=(1<<I)-1,M=$s(R,I,1),E=0;E<y;){var te=M[ts(t,p,P)];p+=te&15;var C=te>>4;if(C<16)S[E++]=C;else{var V=0,U=0;for(C==16?(U=3+ts(t,p,3),p+=2,V=S[E-1]):C==17?(U=3+ts(t,p,7),p+=3):C==18&&(U=11+ts(t,p,127),p+=7);U--;)S[E++]=V}}var z=S.subarray(0,B),H=S.subarray(B);x=p1(z),k=p1(H),m=$s(z,x,1),b=$s(H,k,1)}else ss(1);else{var C=oy(p)+4,F=t[C-4]|t[C-3]<<8,Y=C+F;if(Y>i){l&&ss(0);break}o&&u(g+F),n.set(t.subarray(C,Y),g),e.b=g+=F,e.p=p=Y*8,e.f=h;continue}if(p>_){l&&ss(0);break}}o&&u(g+131072);for(var ne=(1<<x)-1,_e=(1<<k)-1,O=p;;O=p){var V=m[m1(t,p)&ne],Q=V>>4;if(p+=V&15,p>_){l&&ss(0);break}if(V||ss(2),Q<256)n[g++]=Q;else if(Q==256){O=p,m=null;break}else{var J=Q-254;if(Q>264){var E=Q-257,W=sg[E];J=ts(t,p,(1<<W)-1)+oN[E],p+=W}var se=b[m1(t,p)&_e],le=se>>4;se||ss(3),p+=se&15;var H=D7[le];if(le>3){var W=ag[le];H+=m1(t,p)&(1<<W)-1,p+=W}if(p>_){l&&ss(0);break}o&&u(g+131072);var fe=g+J;if(g<H){var pe=s-H,ke=Math.min(H,fe);for(pe+g<0&&ss(3);g<ke;++g)n[g]=r[pe+g]}for(;g<fe;++g)n[g]=n[g-H]}}e.l=m,e.p=O,e.b=g,e.f=h,m&&(h=1,e.m=x,e.d=b,e.n=k)}while(!h);return g!=n.length&&a?uN(n,0,g):n.subarray(0,g)},ma=function(t,e,n){n<<=e&7;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8},bh=function(t,e,n){n<<=e&7;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8,t[r+2]|=n>>16},g1=function(t,e){for(var n=[],r=0;r<t.length;++r)t[r]&&n.push({s:r,f:t[r]});var i=n.length,s=n.slice();if(!i)return{t:hN,l:0};if(i==1){var a=new Cr(n[0].s+1);return a[n[0].s]=1,{t:a,l:1}}n.sort(function(Y,B){return Y.f-B.f}),n.push({s:-1,f:25001});var o=n[0],l=n[1],u=0,h=1,p=2;for(n[0]={s:-1,f:o.f+l.f,l:o,r:l};h!=i-1;)o=n[n[u].f<n[p].f?u++:p++],l=n[u!=h&&n[u].f<n[p].f?u++:p++],n[h++]={s:-1,f:o.f+l.f,l:o,r:l};for(var g=s[0].s,r=1;r<i;++r)s[r].s>g&&(g=s[r].s);var m=new xi(g+1),b=Z0(n[h-1],m,0);if(b>e){var r=0,x=0,k=b-e,_=1<<k;for(s.sort(function(B,L){return m[L.s]-m[B.s]||B.f-L.f});r<i;++r){var A=s[r].s;if(m[A]>e)x+=_-(1<<b-m[A]),m[A]=e;else break}for(x>>=k;x>0;){var C=s[r].s;m[C]<e?x-=1<<e-m[C]++-1:++r}for(;r>=0&&x;--r){var F=s[r].s;m[F]==e&&(--m[F],++x)}b=e}return{t:new Cr(m),l:b}},Z0=function(t,e,n){return t.s==-1?Math.max(Z0(t.l,e,n+1),Z0(t.r,e,n+1)):e[t.s]=n},Ew=function(t){for(var e=t.length;e&&!t[--e];);for(var n=new xi(++e),r=0,i=t[0],s=1,a=function(l){n[r++]=l},o=1;o<=e;++o)if(t[o]==i&&o!=e)++s;else{if(!i&&s>2){for(;s>138;s-=138)a(32754);s>2&&(a(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(a(i),--s;s>6;s-=6)a(8304);s>2&&(a(s-3<<5|8208),s=0)}for(;s--;)a(i);s=1,i=t[o]}return{c:n.subarray(0,r),n:e}},xh=function(t,e){for(var n=0,r=0;r<e.length;++r)n+=t[r]*e[r];return n},cN=function(t,e,n){var r=n.length,i=oy(e+2);t[i]=r&255,t[i+1]=r>>8,t[i+2]=t[i]^255,t[i+3]=t[i+1]^255;for(var s=0;s<r;++s)t[i+s+4]=n[s];return(i+4+r)*8},kw=function(t,e,n,r,i,s,a,o,l,u,h){ma(e,h++,n),++i[256];for(var p=g1(i,15),g=p.t,m=p.l,b=g1(s,15),x=b.t,k=b.l,_=Ew(g),A=_.c,C=_.n,F=Ew(x),Y=F.c,B=F.n,L=new xi(19),y=0;y<A.length;++y)++L[A[y]&31];for(var y=0;y<Y.length;++y)++L[Y[y]&31];for(var S=g1(L,7),R=S.t,E=S.l,I=19;I>4&&!R[Y0[I-1]];--I);var P=u+5<<3,M=xh(i,Jo)+xh(s,Nd)+a,te=xh(i,g)+xh(s,x)+a+14+3*I+xh(L,R)+2*L[16]+3*L[17]+7*L[18];if(l>=0&&P<=M&&P<=te)return cN(e,h,t.subarray(l,l+u));var V,U,z,H;if(ma(e,h,1+(te<M)),h+=2,te<M){V=$s(g,m,0),U=g,z=$s(x,k,0),H=x;var ne=$s(R,E,0);ma(e,h,C-257),ma(e,h+5,B-1),ma(e,h+10,I-4),h+=14;for(var y=0;y<I;++y)ma(e,h+3*y,R[Y0[y]]);h+=3*I;for(var _e=[A,Y],O=0;O<2;++O)for(var Q=_e[O],y=0;y<Q.length;++y){var J=Q[y]&31;ma(e,h,ne[J]),h+=R[J],J>15&&(ma(e,h,Q[y]>>5&127),h+=Q[y]>>12)}}else V=F7,U=Jo,z=M7,H=Nd;for(var y=0;y<o;++y){var W=r[y];if(W>255){var J=W>>18&31;bh(e,h,V[J+257]),h+=U[J+257],J>7&&(ma(e,h,W>>23&31),h+=sg[J]);var se=W&31;bh(e,h,z[se]),h+=H[se],se>3&&(bh(e,h,W>>5&8191),h+=ag[se])}else bh(e,h,V[W]),h+=U[W]}return bh(e,h,V[256]),h+U[256]},K7=new ay([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),hN=new Cr(0),q7=function(t,e,n,r,i,s){var a=s.z||t.length,o=new Cr(r+a+5*(1+Math.ceil(a/7e3))+i),l=o.subarray(r,o.length-i),u=s.l,h=(s.r||0)&7;if(e){h&&(l[0]=s.r>>3);for(var p=K7[e-1],g=p>>13,m=p&8191,b=(1<<n)-1,x=s.p||new xi(32768),k=s.h||new xi(b+1),_=Math.ceil(n/3),A=2*_,C=function(Ze){return(t[Ze]^t[Ze+1]<<_^t[Ze+2]<<A)&b},F=new ay(25e3),Y=new xi(288),B=new xi(32),L=0,y=0,S=s.i||0,R=0,E=s.w||0,I=0;S+2<a;++S){var P=C(S),M=S&32767,te=k[P];if(x[M]=te,k[P]=M,E<=S){var V=a-S;if((L>7e3||R>24576)&&(V>423||!u)){h=kw(t,l,0,F,Y,B,y,R,I,S-I,h),R=L=y=0,I=S;for(var U=0;U<286;++U)Y[U]=0;for(var U=0;U<30;++U)B[U]=0}var z=2,H=0,ne=m,_e=M-te&32767;if(V>2&&P==C(S-_e))for(var O=Math.min(g,V)-1,Q=Math.min(32767,S),J=Math.min(258,V);_e<=Q&&--ne&&M!=te;){if(t[S+z]==t[S+z-_e]){for(var W=0;W<J&&t[S+W]==t[S+W-_e];++W);if(W>z){if(z=W,H=_e,W>O)break;for(var se=Math.min(_e,W-2),le=0,U=0;U<se;++U){var fe=S-_e+U&32767,pe=x[fe],ke=fe-pe&32767;ke>le&&(le=ke,te=fe)}}}M=te,te=x[M],_e+=M-te&32767}if(H){F[R++]=268435456|J0[z]<<18|Aw[H];var Ie=J0[z]&31,je=Aw[H]&31;y+=sg[Ie]+ag[je],++Y[257+Ie],++B[je],E=S+z,++L}else F[R++]=t[S],++Y[t[S]]}}for(S=Math.max(S,E);S<a;++S)F[R++]=t[S],++Y[t[S]];h=kw(t,l,u,F,Y,B,y,R,I,S-I,h),u||(s.r=h&7|l[h/8|0]<<3,h-=7,s.h=k,s.p=x,s.i=S,s.w=E)}else{for(var S=s.w||0;S<a+u;S+=65535){var Ke=S+65535;Ke>=a&&(l[h/8|0]=u,Ke=a),h=cN(l,h+1,t.subarray(S,Ke))}s.i=a}return uN(o,0,r+oy(h)+i)},dN=function(){var t=1,e=0;return{p:function(n){for(var r=t,i=e,s=n.length|0,a=0;a!=s;){for(var o=Math.min(a+2655,s);a<o;++a)i+=r+=n[a];r=(r&65535)+15*(r>>16),i=(i&65535)+15*(i>>16)}t=r,e=i},d:function(){return t%=65521,e%=65521,(t&255)<<24|(t&65280)<<8|(e&255)<<8|e>>8}}},z7=function(t,e,n,r,i){if(!i&&(i={l:1},e.dictionary)){var s=e.dictionary.subarray(-32768),a=new Cr(s.length+t.length);a.set(s),a.set(t,s.length),t=a,i.w=s.length}return q7(t,e.level==null?6:e.level,e.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+e.mem,n,r,i)},fN=function(t,e,n){for(;n;++e)t[e]=n,n>>>=8},H7=function(t,e){var n=e.level,r=n==0?0:n<6?1:n==9?3:2;if(t[0]=120,t[1]=r<<6|(e.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,e.dictionary){var i=dN();i.p(e.dictionary),fN(t,2,i.d())}},$7=function(t,e){return((t[0]&15)!=8||t[0]>>4>7||(t[0]<<8|t[1])%31)&&ss(6,"invalid zlib data"),(t[1]>>5&1)==1&&ss(6,"invalid zlib data: "+(t[1]&32?"need":"unexpected")+" dictionary"),(t[1]>>3&4)+2};function ev(t,e){e||(e={});var n=dN();n.p(t);var r=z7(t,e,e.dictionary?6:2,4);return H7(r,e),fN(r,r.length-4,n.d()),r}function W7(t,e){return B7(t.subarray($7(t),-4),{i:2},e,e)}var G7=typeof TextDecoder<"u"&&new TextDecoder,Q7=0;try{G7.decode(hN,{stream:!0}),Q7=1}catch{}var vt=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function v1(){vt.console&&typeof vt.console.log=="function"&&vt.console.log.apply(vt.console,arguments)}var tn={log:v1,warn:function(t){vt.console&&(typeof vt.console.warn=="function"?vt.console.warn.apply(vt.console,arguments):v1.call(null,arguments))},error:function(t){vt.console&&(typeof vt.console.error=="function"?vt.console.error.apply(vt.console,arguments):v1(t))}};function y1(t,e,n){var r=new XMLHttpRequest;r.open("GET",t),r.responseType="blob",r.onload=function(){Tl(r.response,e,n)},r.onerror=function(){tn.error("could not download file")},r.send()}function Iw(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function Uf(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var Gh,tv,Tl=vt.saveAs||((typeof window>"u"?"undefined":Gt(window))!=="object"||window!==vt?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,e,n){var r=vt.URL||vt.webkitURL,i=document.createElement("a");e=e||t.name||"download",i.download=e,i.rel="noopener",typeof t=="string"?(i.href=t,i.origin!==location.origin?Iw(i.href)?y1(t,e,n):Uf(i,i.target="_blank"):Uf(i)):(i.href=r.createObjectURL(t),setTimeout(function(){r.revokeObjectURL(i.href)},4e4),setTimeout(function(){Uf(i)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,n){if(e=e||t.name||"download",typeof t=="string")if(Iw(t))y1(t,e,n);else{var r=document.createElement("a");r.href=t,r.target="_blank",setTimeout(function(){Uf(r)})}else navigator.msSaveOrOpenBlob(function(i,s){return s===void 0?s={autoBom:!1}:Gt(s)!=="object"&&(tn.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i}(t,n),e)}:function(t,e,n,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof t=="string")return y1(t,e,n);var i=t.type==="application/octet-stream",s=/constructor/i.test(vt.HTMLElement)||vt.safari,a=/CriOS\/[\d]+/.test(navigator.userAgent);if((a||i&&s)&&(typeof FileReader>"u"?"undefined":Gt(FileReader))==="object"){var o=new FileReader;o.onloadend=function(){var h=o.result;h=a?h:h.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=h:location=h,r=null},o.readAsDataURL(t)}else{var l=vt.URL||vt.webkitURL,u=l.createObjectURL(t);r?r.location=u:location.href=u,r=null,setTimeout(function(){l.revokeObjectURL(u)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function pN(t){var e;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(o){return[parseInt(o[1]),parseInt(o[2]),parseInt(o[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(o){return[parseInt(o[1],16),parseInt(o[2],16),parseInt(o[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(o){return[parseInt(o[1]+o[1],16),parseInt(o[2]+o[2],16),parseInt(o[3]+o[3],16)]}}],r=0;r<n.length;r++){var i=n[r].re,s=n[r].process,a=i.exec(t);a&&(e=s(a),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var o=this.r.toString(16),l=this.g.toString(16),u=this.b.toString(16);return o.length==1&&(o="0"+o),l.length==1&&(l="0"+l),u.length==1&&(u="0"+u),"#"+o+l+u}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function _1(t,e){var n=t[0],r=t[1],i=t[2],s=t[3];n=Nr(n,r,i,s,e[0],7,-680876936),s=Nr(s,n,r,i,e[1],12,-389564586),i=Nr(i,s,n,r,e[2],17,606105819),r=Nr(r,i,s,n,e[3],22,-1044525330),n=Nr(n,r,i,s,e[4],7,-176418897),s=Nr(s,n,r,i,e[5],12,1200080426),i=Nr(i,s,n,r,e[6],17,-1473231341),r=Nr(r,i,s,n,e[7],22,-45705983),n=Nr(n,r,i,s,e[8],7,1770035416),s=Nr(s,n,r,i,e[9],12,-1958414417),i=Nr(i,s,n,r,e[10],17,-42063),r=Nr(r,i,s,n,e[11],22,-1990404162),n=Nr(n,r,i,s,e[12],7,1804603682),s=Nr(s,n,r,i,e[13],12,-40341101),i=Nr(i,s,n,r,e[14],17,-1502002290),n=Ar(n,r=Nr(r,i,s,n,e[15],22,1236535329),i,s,e[1],5,-165796510),s=Ar(s,n,r,i,e[6],9,-1069501632),i=Ar(i,s,n,r,e[11],14,643717713),r=Ar(r,i,s,n,e[0],20,-373897302),n=Ar(n,r,i,s,e[5],5,-701558691),s=Ar(s,n,r,i,e[10],9,38016083),i=Ar(i,s,n,r,e[15],14,-660478335),r=Ar(r,i,s,n,e[4],20,-405537848),n=Ar(n,r,i,s,e[9],5,568446438),s=Ar(s,n,r,i,e[14],9,-1019803690),i=Ar(i,s,n,r,e[3],14,-187363961),r=Ar(r,i,s,n,e[8],20,1163531501),n=Ar(n,r,i,s,e[13],5,-1444681467),s=Ar(s,n,r,i,e[2],9,-51403784),i=Ar(i,s,n,r,e[7],14,1735328473),n=Er(n,r=Ar(r,i,s,n,e[12],20,-1926607734),i,s,e[5],4,-378558),s=Er(s,n,r,i,e[8],11,-2022574463),i=Er(i,s,n,r,e[11],16,1839030562),r=Er(r,i,s,n,e[14],23,-35309556),n=Er(n,r,i,s,e[1],4,-1530992060),s=Er(s,n,r,i,e[4],11,1272893353),i=Er(i,s,n,r,e[7],16,-155497632),r=Er(r,i,s,n,e[10],23,-1094730640),n=Er(n,r,i,s,e[13],4,681279174),s=Er(s,n,r,i,e[0],11,-358537222),i=Er(i,s,n,r,e[3],16,-722521979),r=Er(r,i,s,n,e[6],23,76029189),n=Er(n,r,i,s,e[9],4,-640364487),s=Er(s,n,r,i,e[12],11,-421815835),i=Er(i,s,n,r,e[15],16,530742520),n=kr(n,r=Er(r,i,s,n,e[2],23,-995338651),i,s,e[0],6,-198630844),s=kr(s,n,r,i,e[7],10,1126891415),i=kr(i,s,n,r,e[14],15,-1416354905),r=kr(r,i,s,n,e[5],21,-57434055),n=kr(n,r,i,s,e[12],6,1700485571),s=kr(s,n,r,i,e[3],10,-1894986606),i=kr(i,s,n,r,e[10],15,-1051523),r=kr(r,i,s,n,e[1],21,-2054922799),n=kr(n,r,i,s,e[8],6,1873313359),s=kr(s,n,r,i,e[15],10,-30611744),i=kr(i,s,n,r,e[6],15,-1560198380),r=kr(r,i,s,n,e[13],21,1309151649),n=kr(n,r,i,s,e[4],6,-145523070),s=kr(s,n,r,i,e[11],10,-1120210379),i=kr(i,s,n,r,e[2],15,718787259),r=kr(r,i,s,n,e[9],21,-343485551),t[0]=Po(n,t[0]),t[1]=Po(r,t[1]),t[2]=Po(i,t[2]),t[3]=Po(s,t[3])}function og(t,e,n,r,i,s){return e=Po(Po(e,t),Po(r,s)),Po(e<<i|e>>>32-i,n)}function Nr(t,e,n,r,i,s,a){return og(e&n|~e&r,t,e,i,s,a)}function Ar(t,e,n,r,i,s,a){return og(e&r|n&~r,t,e,i,s,a)}function Er(t,e,n,r,i,s,a){return og(e^n^r,t,e,i,s,a)}function kr(t,e,n,r,i,s,a){return og(n^(e|~r),t,e,i,s,a)}function mN(t){var e,n=t.length,r=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)_1(r,Y7(t.substring(e-64,e)));t=t.substring(e-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)i[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(i[e>>2]|=128<<(e%4<<3),e>55)for(_1(r,i),e=0;e<16;e++)i[e]=0;return i[14]=8*n,_1(r,i),r}function Y7(t){var e,n=[];for(e=0;e<64;e+=4)n[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return n}Gh=vt.atob.bind(vt),tv=vt.btoa.bind(vt);var Tw="0123456789abcdef".split("");function J7(t){for(var e="",n=0;n<4;n++)e+=Tw[t>>8*n+4&15]+Tw[t>>8*n&15];return e}function X7(t){return String.fromCharCode((255&t)>>0,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function nv(t){return mN(t).map(X7).join("")}var Z7=function(t){for(var e=0;e<t.length;e++)t[e]=J7(t[e]);return t.join("")}(mN("hello"))!="5d41402abc4b2a76b9719d911017c592";function Po(t,e){if(Z7){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}return t+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function rv(t,e){var n,r,i,s;if(t!==n){for(var a=(i=t,s=1+(256/t.length>>0),new Array(s+1).join(i)),o=[],l=0;l<256;l++)o[l]=l;var u=0;for(l=0;l<256;l++){var h=o[l];u=(u+h+a.charCodeAt(l))%256,o[l]=o[u],o[u]=h}n=t,r=o}else o=r;var p=e.length,g=0,m=0,b="";for(l=0;l<p;l++)m=(m+(h=o[g=(g+1)%256]))%256,o[g]=o[m],o[m]=h,a=o[(o[g]+o[m])%256],b+=String.fromCharCode(e.charCodeAt(l)^a);return b}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var Pw={print:4,modify:8,copy:16,"annot-forms":32};function Uu(t,e,n,r){this.v=1,this.r=2;var i=192;t.forEach(function(o){if(Pw.perm!==void 0)throw new Error("Invalid permission: "+o);i+=Pw[o]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var s=(e+this.padding).substr(0,32),a=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,a),this.P=-(1+(255^i)),this.encryptionKey=nv(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=rv(this.encryptionKey,this.padding)}function Bu(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",n=t.length,r=0;r<n;r++){var i=t.charCodeAt(r);i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?e+="#"+("0"+i.toString(16)).slice(-2):e+=t[r]}return e}function Cw(t){if(Gt(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(n,r,i){if(i=i||!1,typeof n!="string"||typeof r!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(n)||(e[n]={});var s=Math.random().toString(35);return e[n][s]=[r,!!i],s},this.unsubscribe=function(n){for(var r in e)if(e[r][n])return delete e[r][n],Object.keys(e[r]).length===0&&delete e[r],!0;return!1},this.publish=function(n){if(e.hasOwnProperty(n)){var r=Array.prototype.slice.call(arguments,1),i=[];for(var s in e[n]){var a=e[n][s];try{a[0].apply(t,r)}catch(o){vt.console&&tn.error("jsPDF PubSub Error",o.message,o)}a[1]&&i.push(s)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function om(t){if(!(this instanceof om))return new om(t);var e="opacity,stroke-opacity".split(",");for(var n in t)t.hasOwnProperty(n)&&e.indexOf(n)>=0&&(this[n]=t[n]);this.id="",this.objectNumber=-1}function gN(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function Cl(t,e,n,r,i){if(!(this instanceof Cl))return new Cl(t,e,n,r,i);this.type=t==="axial"?2:3,this.coords=e,this.colors=n,gN.call(this,r,i)}function tc(t,e,n,r,i){if(!(this instanceof tc))return new tc(t,e,n,r,i);this.boundingBox=t,this.xStep=e,this.yStep=n,this.stream="",this.cloneIndex=0,gN.call(this,r,i)}function gt(t){var e,n=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],i=arguments[2],s=arguments[3],a=[],o=1,l=16,u="S",h=null;Gt(t=t||{})==="object"&&(n=t.orientation,r=t.unit||r,i=t.format||i,s=t.compress||t.compressPdf||s,(h=t.encryption||null)!==null&&(h.userPassword=h.userPassword||"",h.ownerPassword=h.ownerPassword||"",h.userPermissions=h.userPermissions||[]),o=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(e=t.precision),t.floatPrecision!==void 0&&(l=t.floatPrecision),u=t.defaultPathOperation||"S"),a=t.filters||(s===!0?["FlateEncode"]:a),r=r||"mm",n=(""+(n||"P")).toLowerCase();var p=t.putOnlyUsedFonts||!1,g={},m={internal:{},__private__:{}};m.__private__.PubSub=Cw;var b="1.3",x=m.__private__.getPdfVersion=function(){return b};m.__private__.setPdfVersion=function(w){b=w};var k={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};m.__private__.getPageFormats=function(){return k};var _=m.__private__.getPageFormat=function(w){return k[w]};i=i||"a4";var A={COMPAT:"compat",ADVANCED:"advanced"},C=A.COMPAT;function F(){this.saveGraphicsState(),ae(new nt(ze,0,0,-ze,0,wr()*ze).toString()+" cm"),this.setFontSize(this.getFontSize()/ze),u="n",C=A.ADVANCED}function Y(){this.restoreGraphicsState(),u="S",C=A.COMPAT}var B=m.__private__.combineFontStyleAndFontWeight=function(w,K){if(w=="bold"&&K=="normal"||w=="bold"&&K==400||w=="normal"&&K=="italic"||w=="bold"&&K=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return K&&(w=K==400||K==="normal"?w==="italic"?"italic":"normal":K!=700&&K!=="bold"||w!=="normal"?(K==700?"bold":K)+""+w:"bold"),w};m.advancedAPI=function(w){var K=C===A.COMPAT;return K&&F.call(this),typeof w!="function"||(w(this),K&&Y.call(this)),this},m.compatAPI=function(w){var K=C===A.ADVANCED;return K&&Y.call(this),typeof w!="function"||(w(this),K&&F.call(this)),this},m.isAdvancedAPI=function(){return C===A.ADVANCED};var L,y=function(w){if(C!==A.ADVANCED)throw new Error(w+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},S=m.roundToPrecision=m.__private__.roundToPrecision=function(w,K){var ie=e||K;if(isNaN(w)||isNaN(ie))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return w.toFixed(ie).replace(/0+$/,"")};L=m.hpf=m.__private__.hpf=typeof l=="number"?function(w){if(isNaN(w))throw new Error("Invalid argument passed to jsPDF.hpf");return S(w,l)}:l==="smart"?function(w){if(isNaN(w))throw new Error("Invalid argument passed to jsPDF.hpf");return S(w,w>-1&&w<1?16:5)}:function(w){if(isNaN(w))throw new Error("Invalid argument passed to jsPDF.hpf");return S(w,16)};var R=m.f2=m.__private__.f2=function(w){if(isNaN(w))throw new Error("Invalid argument passed to jsPDF.f2");return S(w,2)},E=m.__private__.f3=function(w){if(isNaN(w))throw new Error("Invalid argument passed to jsPDF.f3");return S(w,3)},I=m.scale=m.__private__.scale=function(w){if(isNaN(w))throw new Error("Invalid argument passed to jsPDF.scale");return C===A.COMPAT?w*ze:C===A.ADVANCED?w:void 0},P=function(w){return C===A.COMPAT?wr()-w:C===A.ADVANCED?w:void 0},M=function(w){return I(P(w))};m.__private__.setPrecision=m.setPrecision=function(w){typeof parseInt(w,10)=="number"&&(e=parseInt(w,10))};var te,V="00000000000000000000000000000000",U=m.__private__.getFileId=function(){return V},z=m.__private__.setFileId=function(w){return V=w!==void 0&&/^[a-fA-F0-9]{32}$/.test(w)?w.toUpperCase():V.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),h!==null&&(on=new Uu(h.userPermissions,h.userPassword,h.ownerPassword,V)),V};m.setFileId=function(w){return z(w),this},m.getFileId=function(){return U()};var H=m.__private__.convertDateToPDFDate=function(w){var K=w.getTimezoneOffset(),ie=K<0?"+":"-",ue=Math.floor(Math.abs(K/60)),ve=Math.abs(K%60),Ee=[ie,J(ue),"'",J(ve),"'"].join("");return["D:",w.getFullYear(),J(w.getMonth()+1),J(w.getDate()),J(w.getHours()),J(w.getMinutes()),J(w.getSeconds()),Ee].join("")},ne=m.__private__.convertPDFDateToDate=function(w){var K=parseInt(w.substr(2,4),10),ie=parseInt(w.substr(6,2),10)-1,ue=parseInt(w.substr(8,2),10),ve=parseInt(w.substr(10,2),10),Ee=parseInt(w.substr(12,2),10),Oe=parseInt(w.substr(14,2),10);return new Date(K,ie,ue,ve,Ee,Oe,0)},_e=m.__private__.setCreationDate=function(w){var K;if(w===void 0&&(w=new Date),w instanceof Date)K=H(w);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(w))throw new Error("Invalid argument passed to jsPDF.setCreationDate");K=w}return te=K},O=m.__private__.getCreationDate=function(w){var K=te;return w==="jsDate"&&(K=ne(te)),K};m.setCreationDate=function(w){return _e(w),this},m.getCreationDate=function(w){return O(w)};var Q,J=m.__private__.padd2=function(w){return("0"+parseInt(w)).slice(-2)},W=m.__private__.padd2Hex=function(w){return("00"+(w=w.toString())).substr(w.length)},se=0,le=[],fe=[],pe=0,ke=[],Ie=[],je=!1,Ke=fe,Ze=function(){se=0,pe=0,fe=[],le=[],ke=[],qi=Sn(),_r=Sn()};m.__private__.setCustomOutputDestination=function(w){je=!0,Ke=w};var Se=function(w){je||(Ke=w)};m.__private__.resetCustomOutputDestination=function(){je=!1,Ke=fe};var ae=m.__private__.out=function(w){return w=w.toString(),pe+=w.length+1,Ke.push(w),Ke},Ge=m.__private__.write=function(w){return ae(arguments.length===1?w.toString():Array.prototype.join.call(arguments," "))},Fe=m.__private__.getArrayBuffer=function(w){for(var K=w.length,ie=new ArrayBuffer(K),ue=new Uint8Array(ie);K--;)ue[K]=w.charCodeAt(K);return ie},ce=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];m.__private__.getStandardFonts=function(){return ce};var Te=t.fontSize||16;m.__private__.setFontSize=m.setFontSize=function(w){return Te=C===A.ADVANCED?w/ze:w,this};var Me,Be=m.__private__.getFontSize=m.getFontSize=function(){return C===A.COMPAT?Te:Te*ze},$e=t.R2L||!1;m.__private__.setR2L=m.setR2L=function(w){return $e=w,this},m.__private__.getR2L=m.getR2L=function(){return $e};var Ye,at=m.__private__.setZoomMode=function(w){var K=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(w))Me=w;else if(isNaN(w)){if(K.indexOf(w)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+w+'" is not recognized.');Me=w}else Me=parseInt(w,10)};m.__private__.getZoomMode=function(){return Me};var tt,ct=m.__private__.setPageMode=function(w){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(w)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+w+'" is not recognized.');Ye=w};m.__private__.getPageMode=function(){return Ye};var dt=m.__private__.setLayoutMode=function(w){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(w)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+w+'" is not recognized.');tt=w};m.__private__.getLayoutMode=function(){return tt},m.__private__.setDisplayMode=m.setDisplayMode=function(w,K,ie){return at(w),dt(K),ct(ie),this};var ot={title:"",subject:"",author:"",keywords:"",creator:""};m.__private__.getDocumentProperty=function(w){if(Object.keys(ot).indexOf(w)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return ot[w]},m.__private__.getDocumentProperties=function(){return ot},m.__private__.setDocumentProperties=m.setProperties=m.setDocumentProperties=function(w){for(var K in ot)ot.hasOwnProperty(K)&&w[K]&&(ot[K]=w[K]);return this},m.__private__.setDocumentProperty=function(w,K){if(Object.keys(ot).indexOf(w)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return ot[w]=K};var ut,ze,we,He,mt,ft={},kt={},Mn=[],bt={},vr={},Bt={},$n={},xn=null,Dt=0,lt=[],Pt=new Cw(m),jr=t.hotfixes||[],Jt={},fn={},ci=[],nt=function w(K,ie,ue,ve,Ee,Oe){if(!(this instanceof w))return new w(K,ie,ue,ve,Ee,Oe);isNaN(K)&&(K=1),isNaN(ie)&&(ie=0),isNaN(ue)&&(ue=0),isNaN(ve)&&(ve=1),isNaN(Ee)&&(Ee=0),isNaN(Oe)&&(Oe=0),this._matrix=[K,ie,ue,ve,Ee,Oe]};Object.defineProperty(nt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(w){this._matrix[0]=w}}),Object.defineProperty(nt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(w){this._matrix[1]=w}}),Object.defineProperty(nt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(w){this._matrix[2]=w}}),Object.defineProperty(nt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(w){this._matrix[3]=w}}),Object.defineProperty(nt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(w){this._matrix[4]=w}}),Object.defineProperty(nt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(w){this._matrix[5]=w}}),Object.defineProperty(nt.prototype,"a",{get:function(){return this._matrix[0]},set:function(w){this._matrix[0]=w}}),Object.defineProperty(nt.prototype,"b",{get:function(){return this._matrix[1]},set:function(w){this._matrix[1]=w}}),Object.defineProperty(nt.prototype,"c",{get:function(){return this._matrix[2]},set:function(w){this._matrix[2]=w}}),Object.defineProperty(nt.prototype,"d",{get:function(){return this._matrix[3]},set:function(w){this._matrix[3]=w}}),Object.defineProperty(nt.prototype,"e",{get:function(){return this._matrix[4]},set:function(w){this._matrix[4]=w}}),Object.defineProperty(nt.prototype,"f",{get:function(){return this._matrix[5]},set:function(w){this._matrix[5]=w}}),Object.defineProperty(nt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(nt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(nt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(nt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),nt.prototype.join=function(w){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(L).join(w)},nt.prototype.multiply=function(w){var K=w.sx*this.sx+w.shy*this.shx,ie=w.sx*this.shy+w.shy*this.sy,ue=w.shx*this.sx+w.sy*this.shx,ve=w.shx*this.shy+w.sy*this.sy,Ee=w.tx*this.sx+w.ty*this.shx+this.tx,Oe=w.tx*this.shy+w.ty*this.sy+this.ty;return new nt(K,ie,ue,ve,Ee,Oe)},nt.prototype.decompose=function(){var w=this.sx,K=this.shy,ie=this.shx,ue=this.sy,ve=this.tx,Ee=this.ty,Oe=Math.sqrt(w*w+K*K),Qe=(w/=Oe)*ie+(K/=Oe)*ue;ie-=w*Qe,ue-=K*Qe;var d=Math.sqrt(ie*ie+ue*ue);return Qe/=d,w*(ue/=d)<K*(ie/=d)&&(w=-w,K=-K,Qe=-Qe,Oe=-Oe),{scale:new nt(Oe,0,0,d,0,0),translate:new nt(1,0,0,1,ve,Ee),rotate:new nt(w,K,-K,w,0,0),skew:new nt(1,0,Qe,1,0,0)}},nt.prototype.toString=function(w){return this.join(" ")},nt.prototype.inversed=function(){var w=this.sx,K=this.shy,ie=this.shx,ue=this.sy,ve=this.tx,Ee=this.ty,Oe=1/(w*ue-K*ie),Qe=ue*Oe,d=-K*Oe,T=-ie*Oe,D=w*Oe;return new nt(Qe,d,T,D,-Qe*ve-T*Ee,-d*ve-D*Ee)},nt.prototype.applyToPoint=function(w){var K=w.x*this.sx+w.y*this.shx+this.tx,ie=w.x*this.shy+w.y*this.sy+this.ty;return new aa(K,ie)},nt.prototype.applyToRectangle=function(w){var K=this.applyToPoint(w),ie=this.applyToPoint(new aa(w.x+w.w,w.y+w.h));return new Ja(K.x,K.y,ie.x-K.x,ie.y-K.y)},nt.prototype.clone=function(){var w=this.sx,K=this.shy,ie=this.shx,ue=this.sy,ve=this.tx,Ee=this.ty;return new nt(w,K,ie,ue,ve,Ee)},m.Matrix=nt;var Wr=m.matrixMult=function(w,K){return K.multiply(w)},yr=new nt(1,0,0,1,0,0);m.unitMatrix=m.identityMatrix=yr;var Vn=function(w,K){if(!vr[w]){var ie=(K instanceof Cl?"Sh":"P")+(Object.keys(bt).length+1).toString(10);K.id=ie,vr[w]=ie,bt[ie]=K,Pt.publish("addPattern",K)}};m.ShadingPattern=Cl,m.TilingPattern=tc,m.addShadingPattern=function(w,K){return y("addShadingPattern()"),Vn(w,K),this},m.beginTilingPattern=function(w){y("beginTilingPattern()"),Xa(w.boundingBox[0],w.boundingBox[1],w.boundingBox[2]-w.boundingBox[0],w.boundingBox[3]-w.boundingBox[1],w.matrix)},m.endTilingPattern=function(w,K){y("endTilingPattern()"),K.stream=Ie[Q].join(`
`),Vn(w,K),Pt.publish("endTilingPattern",K),ci.pop().restore()};var Tn=m.__private__.newObject=function(){var w=Sn();return Un(w,!0),w},Sn=m.__private__.newObjectDeferred=function(){return se++,le[se]=function(){return pe},se},Un=function(w,K){return K=typeof K=="boolean"&&K,le[w]=pe,K&&ae(w+" 0 obj"),w},Oa=m.__private__.newAdditionalObject=function(){var w={objId:Sn(),content:""};return ke.push(w),w},qi=Sn(),_r=Sn(),Gr=m.__private__.decodeColorString=function(w){var K=w.split(" ");if(K.length!==2||K[1]!=="g"&&K[1]!=="G")K.length===5&&(K[4]==="k"||K[4]==="K")&&(K=[(1-K[0])*(1-K[3]),(1-K[1])*(1-K[3]),(1-K[2])*(1-K[3]),"r"]);else{var ie=parseFloat(K[0]);K=[ie,ie,ie,"r"]}for(var ue="#",ve=0;ve<3;ve++)ue+=("0"+Math.floor(255*parseFloat(K[ve])).toString(16)).slice(-2);return ue},Dr=m.__private__.encodeColorString=function(w){var K;typeof w=="string"&&(w={ch1:w});var ie=w.ch1,ue=w.ch2,ve=w.ch3,Ee=w.ch4,Oe=w.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof ie=="string"&&ie.charAt(0)!=="#"){var Qe=new pN(ie);if(Qe.ok)ie=Qe.toHex();else if(!/^\d*\.?\d*$/.test(ie))throw new Error('Invalid color "'+ie+'" passed to jsPDF.encodeColorString.')}if(typeof ie=="string"&&/^#[0-9A-Fa-f]{3}$/.test(ie)&&(ie="#"+ie[1]+ie[1]+ie[2]+ie[2]+ie[3]+ie[3]),typeof ie=="string"&&/^#[0-9A-Fa-f]{6}$/.test(ie)){var d=parseInt(ie.substr(1),16);ie=d>>16&255,ue=d>>8&255,ve=255&d}if(ue===void 0||Ee===void 0&&ie===ue&&ue===ve)if(typeof ie=="string")K=ie+" "+Oe[0];else switch(w.precision){case 2:K=R(ie/255)+" "+Oe[0];break;case 3:default:K=E(ie/255)+" "+Oe[0]}else if(Ee===void 0||Gt(Ee)==="object"){if(Ee&&!isNaN(Ee.a)&&Ee.a===0)return K=["1.","1.","1.",Oe[1]].join(" ");if(typeof ie=="string")K=[ie,ue,ve,Oe[1]].join(" ");else switch(w.precision){case 2:K=[R(ie/255),R(ue/255),R(ve/255),Oe[1]].join(" ");break;default:case 3:K=[E(ie/255),E(ue/255),E(ve/255),Oe[1]].join(" ")}}else if(typeof ie=="string")K=[ie,ue,ve,Ee,Oe[2]].join(" ");else switch(w.precision){case 2:K=[R(ie),R(ue),R(ve),R(Ee),Oe[2]].join(" ");break;case 3:default:K=[E(ie),E(ue),E(ve),E(Ee),Oe[2]].join(" ")}return K},Fr=m.__private__.getFilters=function(){return a},Pn=m.__private__.putStream=function(w){var K=(w=w||{}).data||"",ie=w.filters||Fr(),ue=w.alreadyAppliedFilters||[],ve=w.addLength1||!1,Ee=K.length,Oe=w.objectId,Qe=function(xt){return xt};if(h!==null&&Oe===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");h!==null&&(Qe=on.encryptor(Oe,0));var d={};ie===!0&&(ie=["FlateEncode"]);var T=w.additionalKeyValues||[],D=(d=gt.API.processDataByFilters!==void 0?gt.API.processDataByFilters(K,ie):{data:K,reverseChain:[]}).reverseChain+(Array.isArray(ue)?ue.join(" "):ue.toString());if(d.data.length!==0&&(T.push({key:"Length",value:d.data.length}),ve===!0&&T.push({key:"Length1",value:Ee})),D.length!=0)if(D.split("/").length-1==1)T.push({key:"Filter",value:D});else{T.push({key:"Filter",value:"["+D+"]"});for(var X=0;X<T.length;X+=1)if(T[X].key==="DecodeParms"){for(var ge=[],Ne=0;Ne<d.reverseChain.split("/").length-1;Ne+=1)ge.push("null");ge.push(T[X].value),T[X].value="["+ge.join(" ")+"]"}}ae("<<");for(var Ve=0;Ve<T.length;Ve++)ae("/"+T[Ve].key+" "+T[Ve].value);ae(">>"),d.data.length!==0&&(ae("stream"),ae(Qe(d.data)),ae("endstream"))},hi=m.__private__.putPage=function(w){var K=w.number,ie=w.data,ue=w.objId,ve=w.contentsObjId;Un(ue,!0),ae("<</Type /Page"),ae("/Parent "+w.rootDictionaryObjId+" 0 R"),ae("/Resources "+w.resourceDictionaryObjId+" 0 R"),ae("/MediaBox ["+parseFloat(L(w.mediaBox.bottomLeftX))+" "+parseFloat(L(w.mediaBox.bottomLeftY))+" "+L(w.mediaBox.topRightX)+" "+L(w.mediaBox.topRightY)+"]"),w.cropBox!==null&&ae("/CropBox ["+L(w.cropBox.bottomLeftX)+" "+L(w.cropBox.bottomLeftY)+" "+L(w.cropBox.topRightX)+" "+L(w.cropBox.topRightY)+"]"),w.bleedBox!==null&&ae("/BleedBox ["+L(w.bleedBox.bottomLeftX)+" "+L(w.bleedBox.bottomLeftY)+" "+L(w.bleedBox.topRightX)+" "+L(w.bleedBox.topRightY)+"]"),w.trimBox!==null&&ae("/TrimBox ["+L(w.trimBox.bottomLeftX)+" "+L(w.trimBox.bottomLeftY)+" "+L(w.trimBox.topRightX)+" "+L(w.trimBox.topRightY)+"]"),w.artBox!==null&&ae("/ArtBox ["+L(w.artBox.bottomLeftX)+" "+L(w.artBox.bottomLeftY)+" "+L(w.artBox.topRightX)+" "+L(w.artBox.topRightY)+"]"),typeof w.userUnit=="number"&&w.userUnit!==1&&ae("/UserUnit "+w.userUnit),Pt.publish("putPage",{objId:ue,pageContext:lt[K],pageNumber:K,page:ie}),ae("/Contents "+ve+" 0 R"),ae(">>"),ae("endobj");var Ee=ie.join(`
`);return C===A.ADVANCED&&(Ee+=`
Q`),Un(ve,!0),Pn({data:Ee,filters:Fr(),objectId:ve}),ae("endobj"),ue},ys=m.__private__.putPages=function(){var w,K,ie=[];for(w=1;w<=Dt;w++)lt[w].objId=Sn(),lt[w].contentsObjId=Sn();for(w=1;w<=Dt;w++)ie.push(hi({number:w,data:Ie[w],objId:lt[w].objId,contentsObjId:lt[w].contentsObjId,mediaBox:lt[w].mediaBox,cropBox:lt[w].cropBox,bleedBox:lt[w].bleedBox,trimBox:lt[w].trimBox,artBox:lt[w].artBox,userUnit:lt[w].userUnit,rootDictionaryObjId:qi,resourceDictionaryObjId:_r}));Un(qi,!0),ae("<</Type /Pages");var ue="/Kids [";for(K=0;K<Dt;K++)ue+=ie[K]+" 0 R ";ae(ue+"]"),ae("/Count "+Dt),ae(">>"),ae("endobj"),Pt.publish("postPutPages")},_s=function(w){Pt.publish("putFont",{font:w,out:ae,newObject:Tn,putStream:Pn}),w.isAlreadyPutted!==!0&&(w.objectNumber=Tn(),ae("<<"),ae("/Type /Font"),ae("/BaseFont /"+Bu(w.postScriptName)),ae("/Subtype /Type1"),typeof w.encoding=="string"&&ae("/Encoding /"+w.encoding),ae("/FirstChar 32"),ae("/LastChar 255"),ae(">>"),ae("endobj"))},ws=function(){for(var w in ft)ft.hasOwnProperty(w)&&(p===!1||p===!0&&g.hasOwnProperty(w))&&_s(ft[w])},Js=function(w){w.objectNumber=Tn();var K=[];K.push({key:"Type",value:"/XObject"}),K.push({key:"Subtype",value:"/Form"}),K.push({key:"BBox",value:"["+[L(w.x),L(w.y),L(w.x+w.width),L(w.y+w.height)].join(" ")+"]"}),K.push({key:"Matrix",value:"["+w.matrix.toString()+"]"});var ie=w.pages[1].join(`
`);Pn({data:ie,additionalKeyValues:K,objectId:w.objectNumber}),ae("endobj")},Xs=function(){for(var w in Jt)Jt.hasOwnProperty(w)&&Js(Jt[w])},uu=function(w,K){var ie,ue=[],ve=1/(K-1);for(ie=0;ie<1;ie+=ve)ue.push(ie);if(ue.push(1),w[0].offset!=0){var Ee={offset:0,color:w[0].color};w.unshift(Ee)}if(w[w.length-1].offset!=1){var Oe={offset:1,color:w[w.length-1].color};w.push(Oe)}for(var Qe="",d=0,T=0;T<ue.length;T++){for(ie=ue[T];ie>w[d+1].offset;)d++;var D=w[d].offset,X=(ie-D)/(w[d+1].offset-D),ge=w[d].color,Ne=w[d+1].color;Qe+=W(Math.round((1-X)*ge[0]+X*Ne[0]).toString(16))+W(Math.round((1-X)*ge[1]+X*Ne[1]).toString(16))+W(Math.round((1-X)*ge[2]+X*Ne[2]).toString(16))}return Qe.trim()},Ma=function(w,K){K||(K=21);var ie=Tn(),ue=uu(w.colors,K),ve=[];ve.push({key:"FunctionType",value:"0"}),ve.push({key:"Domain",value:"[0.0 1.0]"}),ve.push({key:"Size",value:"["+K+"]"}),ve.push({key:"BitsPerSample",value:"8"}),ve.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),ve.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Pn({data:ue,additionalKeyValues:ve,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:ie}),ae("endobj"),w.objectNumber=Tn(),ae("<< /ShadingType "+w.type),ae("/ColorSpace /DeviceRGB");var Ee="/Coords ["+L(parseFloat(w.coords[0]))+" "+L(parseFloat(w.coords[1]))+" ";w.type===2?Ee+=L(parseFloat(w.coords[2]))+" "+L(parseFloat(w.coords[3])):Ee+=L(parseFloat(w.coords[2]))+" "+L(parseFloat(w.coords[3]))+" "+L(parseFloat(w.coords[4]))+" "+L(parseFloat(w.coords[5])),ae(Ee+="]"),w.matrix&&ae("/Matrix ["+w.matrix.toString()+"]"),ae("/Function "+ie+" 0 R"),ae("/Extend [true true]"),ae(">>"),ae("endobj")},cu=function(w,K){var ie=Sn(),ue=Tn();K.push({resourcesOid:ie,objectOid:ue}),w.objectNumber=ue;var ve=[];ve.push({key:"Type",value:"/Pattern"}),ve.push({key:"PatternType",value:"1"}),ve.push({key:"PaintType",value:"1"}),ve.push({key:"TilingType",value:"1"}),ve.push({key:"BBox",value:"["+w.boundingBox.map(L).join(" ")+"]"}),ve.push({key:"XStep",value:L(w.xStep)}),ve.push({key:"YStep",value:L(w.yStep)}),ve.push({key:"Resources",value:ie+" 0 R"}),w.matrix&&ve.push({key:"Matrix",value:"["+w.matrix.toString()+"]"}),Pn({data:w.stream,additionalKeyValues:ve,objectId:w.objectNumber}),ae("endobj")},bs=function(w){var K;for(K in bt)bt.hasOwnProperty(K)&&(bt[K]instanceof Cl?Ma(bt[K]):bt[K]instanceof tc&&cu(bt[K],w))},xs=function(w){for(var K in w.objectNumber=Tn(),ae("<<"),w)switch(K){case"opacity":ae("/ca "+R(w[K]));break;case"stroke-opacity":ae("/CA "+R(w[K]))}ae(">>"),ae("endobj")},zi=function(){var w;for(w in Bt)Bt.hasOwnProperty(w)&&xs(Bt[w])},Zs=function(){for(var w in ae("/XObject <<"),Jt)Jt.hasOwnProperty(w)&&Jt[w].objectNumber>=0&&ae("/"+w+" "+Jt[w].objectNumber+" 0 R");Pt.publish("putXobjectDict"),ae(">>")},Wc=function(){on.oid=Tn(),ae("<<"),ae("/Filter /Standard"),ae("/V "+on.v),ae("/R "+on.r),ae("/U <"+on.toHexString(on.U)+">"),ae("/O <"+on.toHexString(on.O)+">"),ae("/P "+on.P),ae(">>"),ae("endobj")},al=function(){for(var w in ae("/Font <<"),ft)ft.hasOwnProperty(w)&&(p===!1||p===!0&&g.hasOwnProperty(w))&&ae("/"+w+" "+ft[w].objectNumber+" 0 R");ae(">>")},hu=function(){if(Object.keys(bt).length>0){for(var w in ae("/Shading <<"),bt)bt.hasOwnProperty(w)&&bt[w]instanceof Cl&&bt[w].objectNumber>=0&&ae("/"+w+" "+bt[w].objectNumber+" 0 R");Pt.publish("putShadingPatternDict"),ae(">>")}},ea=function(w){if(Object.keys(bt).length>0){for(var K in ae("/Pattern <<"),bt)bt.hasOwnProperty(K)&&bt[K]instanceof m.TilingPattern&&bt[K].objectNumber>=0&&bt[K].objectNumber<w&&ae("/"+K+" "+bt[K].objectNumber+" 0 R");Pt.publish("putTilingPatternDict"),ae(">>")}},ol=function(){if(Object.keys(Bt).length>0){var w;for(w in ae("/ExtGState <<"),Bt)Bt.hasOwnProperty(w)&&Bt[w].objectNumber>=0&&ae("/"+w+" "+Bt[w].objectNumber+" 0 R");Pt.publish("putGStateDict"),ae(">>")}},an=function(w){Un(w.resourcesOid,!0),ae("<<"),ae("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),al(),hu(),ea(w.objectOid),ol(),Zs(),ae(">>"),ae("endobj")},ll=function(){var w=[];ws(),zi(),Xs(),bs(w),Pt.publish("putResources"),w.forEach(an),an({resourcesOid:_r,objectOid:Number.MAX_SAFE_INTEGER}),Pt.publish("postPutResources")},ul=function(){Pt.publish("putAdditionalObjects");for(var w=0;w<ke.length;w++){var K=ke[w];Un(K.objId,!0),ae(K.content),ae("endobj")}Pt.publish("postPutAdditionalObjects")},du=function(w){kt[w.fontName]=kt[w.fontName]||{},kt[w.fontName][w.fontStyle]=w.id},cl=function(w,K,ie,ue,ve){var Ee={id:"F"+(Object.keys(ft).length+1).toString(10),postScriptName:w,fontName:K,fontStyle:ie,encoding:ue,isStandardFont:ve||!1,metadata:{}};return Pt.publish("addFont",{font:Ee,instance:this}),ft[Ee.id]=Ee,du(Ee),Ee.id},fu=function(w){for(var K=0,ie=ce.length;K<ie;K++){var ue=cl.call(this,w[K][0],w[K][1],w[K][2],ce[K][3],!0);p===!1&&(g[ue]=!0);var ve=w[K][0].split("-");du({id:ue,fontName:ve[0],fontStyle:ve[1]||""})}Pt.publish("addFonts",{fonts:ft,dictionary:kt})},Qr=function(w){return w.foo=function(){try{return w.apply(this,arguments)}catch(ue){var K=ue.stack||"";~K.indexOf(" at ")&&(K=K.split(" at ")[1]);var ie="Error in function "+K.split(`
`)[0].split("<")[0]+": "+ue.message;if(!vt.console)throw new Error(ie);vt.console.error(ie,ue),vt.alert&&alert(ie)}},w.foo.bar=w,w.foo},Va=function(w,K){var ie,ue,ve,Ee,Oe,Qe,d,T,D;if(ve=(K=K||{}).sourceEncoding||"Unicode",Oe=K.outputEncoding,(K.autoencode||Oe)&&ft[ut].metadata&&ft[ut].metadata[ve]&&ft[ut].metadata[ve].encoding&&(Ee=ft[ut].metadata[ve].encoding,!Oe&&ft[ut].encoding&&(Oe=ft[ut].encoding),!Oe&&Ee.codePages&&(Oe=Ee.codePages[0]),typeof Oe=="string"&&(Oe=Ee[Oe]),Oe)){for(d=!1,Qe=[],ie=0,ue=w.length;ie<ue;ie++)(T=Oe[w.charCodeAt(ie)])?Qe.push(String.fromCharCode(T)):Qe.push(w[ie]),Qe[ie].charCodeAt(0)>>8&&(d=!0);w=Qe.join("")}for(ie=w.length;d===void 0&&ie!==0;)w.charCodeAt(ie-1)>>8&&(d=!0),ie--;if(!d)return w;for(Qe=K.noBOM?[]:[254,255],ie=0,ue=w.length;ie<ue;ie++){if((D=(T=w.charCodeAt(ie))>>8)>>8)throw new Error("Character at position "+ie+" of string '"+w+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Qe.push(D),Qe.push(T-(D<<8))}return String.fromCharCode.apply(void 0,Qe)},Nn=m.__private__.pdfEscape=m.pdfEscape=function(w,K){return Va(w,K).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Or=m.__private__.beginPage=function(w){Ie[++Dt]=[],lt[Dt]={objId:0,contentsObjId:0,userUnit:Number(o),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(w[0]),topRightY:Number(w[1])}},hl(Dt),Se(Ie[Q])},ta=function(w,K){var ie,ue,ve;switch(n=K||n,typeof w=="string"&&(ie=_(w.toLowerCase()),Array.isArray(ie)&&(ue=ie[0],ve=ie[1])),Array.isArray(w)&&(ue=w[0]*ze,ve=w[1]*ze),isNaN(ue)&&(ue=i[0],ve=i[1]),(ue>14400||ve>14400)&&(tn.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),ue=Math.min(14400,ue),ve=Math.min(14400,ve)),i=[ue,ve],n.substr(0,1)){case"l":ve>ue&&(i=[ve,ue]);break;case"p":ue>ve&&(i=[ve,ue])}Or(i),gl(ml),ae(sr),_l!==0&&ae(_l+" J"),Ya!==0&&ae(Ya+" j"),Pt.publish("addPage",{pageNumber:Dt})},Ua=function(w){w>0&&w<=Dt&&(Ie.splice(w,1),lt.splice(w,1),Dt--,Q>Dt&&(Q=Dt),this.setPage(Q))},hl=function(w){w>0&&w<=Dt&&(Q=w)},Ht=m.__private__.getNumberOfPages=m.getNumberOfPages=function(){return Ie.length-1},na=function(w,K,ie){var ue,ve=void 0;return ie=ie||{},w=w!==void 0?w:ft[ut].fontName,K=K!==void 0?K:ft[ut].fontStyle,ue=w.toLowerCase(),kt[ue]!==void 0&&kt[ue][K]!==void 0?ve=kt[ue][K]:kt[w]!==void 0&&kt[w][K]!==void 0?ve=kt[w][K]:ie.disableWarning===!1&&tn.warn("Unable to look up font label for font '"+w+"', '"+K+"'. Refer to getFontList() for available fonts."),ve||ie.noFallback||(ve=kt.times[K])==null&&(ve=kt.times.normal),ve},ra=m.__private__.putInfo=function(){var w=Tn(),K=function(ue){return ue};for(var ie in h!==null&&(K=on.encryptor(w,0)),ae("<<"),ae("/Producer ("+Nn(K("jsPDF "+gt.version))+")"),ot)ot.hasOwnProperty(ie)&&ot[ie]&&ae("/"+ie.substr(0,1).toUpperCase()+ie.substr(1)+" ("+Nn(K(ot[ie]))+")");ae("/CreationDate ("+Nn(K(te))+")"),ae(">>"),ae("endobj")},Hi=m.__private__.putCatalog=function(w){var K=(w=w||{}).rootDictionaryObjId||qi;switch(Tn(),ae("<<"),ae("/Type /Catalog"),ae("/Pages "+K+" 0 R"),Me||(Me="fullwidth"),Me){case"fullwidth":ae("/OpenAction [3 0 R /FitH null]");break;case"fullheight":ae("/OpenAction [3 0 R /FitV null]");break;case"fullpage":ae("/OpenAction [3 0 R /Fit]");break;case"original":ae("/OpenAction [3 0 R /XYZ null null 1]");break;default:var ie=""+Me;ie.substr(ie.length-1)==="%"&&(Me=parseInt(Me)/100),typeof Me=="number"&&ae("/OpenAction [3 0 R /XYZ null null "+R(Me)+"]")}switch(tt||(tt="continuous"),tt){case"continuous":ae("/PageLayout /OneColumn");break;case"single":ae("/PageLayout /SinglePage");break;case"two":case"twoleft":ae("/PageLayout /TwoColumnLeft");break;case"tworight":ae("/PageLayout /TwoColumnRight")}Ye&&ae("/PageMode /"+Ye),Pt.publish("putCatalog"),ae(">>"),ae("endobj")},Gc=m.__private__.putTrailer=function(){ae("trailer"),ae("<<"),ae("/Size "+(se+1)),ae("/Root "+se+" 0 R"),ae("/Info "+(se-1)+" 0 R"),h!==null&&ae("/Encrypt "+on.oid+" 0 R"),ae("/ID [ <"+V+"> <"+V+"> ]"),ae(">>")},pu=m.__private__.putHeader=function(){ae("%PDF-"+b),ae("%")},Qc=m.__private__.putXRef=function(){var w="0000000000";ae("xref"),ae("0 "+(se+1)),ae("0000000000 65535 f ");for(var K=1;K<=se;K++)typeof le[K]=="function"?ae((w+le[K]()).slice(-10)+" 00000 n "):le[K]!==void 0?ae((w+le[K]).slice(-10)+" 00000 n "):ae("0000000000 00000 n ")},$i=m.__private__.buildDocument=function(){Ze(),Se(fe),Pt.publish("buildDocument"),pu(),ys(),ul(),ll(),h!==null&&Wc(),ra(),Hi();var w=pe;return Qc(),Gc(),ae("startxref"),ae(""+w),ae("%%EOF"),Se(Ie[Q]),fe.join(`
`)},Ba=m.__private__.getBlob=function(w){return new Blob([Fe(w)],{type:"application/pdf"})},Ka=m.output=m.__private__.output=Qr(function(w,K){switch(typeof(K=K||{})=="string"?K={filename:K}:K.filename=K.filename||"generated.pdf",w){case void 0:return $i();case"save":m.save(K.filename);break;case"arraybuffer":return Fe($i());case"blob":return Ba($i());case"bloburi":case"bloburl":if(vt.URL!==void 0&&typeof vt.URL.createObjectURL=="function")return vt.URL&&vt.URL.createObjectURL(Ba($i()))||void 0;tn.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var ie="",ue=$i();try{ie=tv(ue)}catch{ie=tv(unescape(encodeURIComponent(ue)))}return"data:application/pdf;filename="+K.filename+";base64,"+ie;case"pdfobjectnewwindow":if(Object.prototype.toString.call(vt)==="[object Window]"){var ve="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Ee=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';K.pdfObjectUrl&&(ve=K.pdfObjectUrl,Ee="");var Oe='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+ve+'"'+Ee+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(K)+");<\/script></body></html>",Qe=vt.open();return Qe!==null&&Qe.document.write(Oe),Qe}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(vt)==="[object Window]"){var d='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(K.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+K.filename+'" width="500px" height="400px" /></body></html>',T=vt.open();if(T!==null){T.document.write(d);var D=this;T.document.documentElement.querySelector("#pdfViewer").onload=function(){T.document.title=K.filename,T.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(D.output("bloburl"))}}return T}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(vt)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var X='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",K)+'"></iframe></body></html>',ge=vt.open();if(ge!==null&&(ge.document.write(X),ge.document.title=K.filename),ge||typeof safari>"u")return ge;break;case"datauri":case"dataurl":return vt.document.location.href=this.output("datauristring",K);default:return null}}),Ss=function(w){return Array.isArray(jr)===!0&&jr.indexOf(w)>-1};switch(r){case"pt":ze=1;break;case"mm":ze=72/25.4;break;case"cm":ze=72/2.54;break;case"in":ze=72;break;case"px":ze=Ss("px_scaling")==1?.75:96/72;break;case"pc":case"em":ze=12;break;case"ex":ze=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);ze=r}var on=null;_e(),z();var mu=function(w){return h!==null?on.encryptor(w,0):function(K){return K}},dl=m.__private__.getPageInfo=m.getPageInfo=function(w){if(isNaN(w)||w%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:lt[w].objId,pageNumber:w,pageContext:lt[w]}},yt=m.__private__.getPageInfoByObjId=function(w){if(isNaN(w)||w%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var K in lt)if(lt[K].objId===w)break;return dl(K)},Ns=m.__private__.getCurrentPageInfo=m.getCurrentPageInfo=function(){return{objId:lt[Q].objId,pageNumber:Q,pageContext:lt[Q]}};m.addPage=function(){return ta.apply(this,arguments),this},m.setPage=function(){return hl.apply(this,arguments),Se.call(this,Ie[Q]),this},m.insertPage=function(w){return this.addPage(),this.movePage(Q,w),this},m.movePage=function(w,K){var ie,ue;if(w>K){ie=Ie[w],ue=lt[w];for(var ve=w;ve>K;ve--)Ie[ve]=Ie[ve-1],lt[ve]=lt[ve-1];Ie[K]=ie,lt[K]=ue,this.setPage(K)}else if(w<K){ie=Ie[w],ue=lt[w];for(var Ee=w;Ee<K;Ee++)Ie[Ee]=Ie[Ee+1],lt[Ee]=lt[Ee+1];Ie[K]=ie,lt[K]=ue,this.setPage(K)}return this},m.deletePage=function(){return Ua.apply(this,arguments),this},m.__private__.text=m.text=function(w,K,ie,ue,ve){var Ee,Oe,Qe,d,T,D,X,ge,Ne,Ve=(ue=ue||{}).scope||this;if(typeof w=="number"&&typeof K=="number"&&(typeof ie=="string"||Array.isArray(ie))){var xt=ie;ie=K,K=w,w=xt}if(arguments[3]instanceof nt?(y("The transform parameter of text() with a Matrix value"),Ne=ve):(Qe=arguments[4],d=arguments[5],Gt(X=arguments[3])==="object"&&X!==null||(typeof Qe=="string"&&(d=Qe,Qe=null),typeof X=="string"&&(d=X,X=null),typeof X=="number"&&(Qe=X,X=null),ue={flags:X,angle:Qe,align:d})),isNaN(K)||isNaN(ie)||w==null)throw new Error("Invalid arguments passed to jsPDF.text");if(w.length===0)return Ve;var Lt="",St=!1,zt=typeof ue.lineHeightFactor=="number"?ue.lineHeightFactor:qt,Zt=Ve.internal.scaleFactor;function Ji(nn){return nn=nn.split("	").join(Array(ue.TabLen||9).join(" ")),Nn(nn,X)}function ar(nn){for(var rn,Ln=nn.concat(),Gn=[],ha=Ln.length;ha--;)typeof(rn=Ln.shift())=="string"?Gn.push(rn):Array.isArray(nn)&&(rn.length===1||rn[1]===void 0&&rn[2]===void 0)?Gn.push(rn[0]):Gn.push([rn[0],rn[1],rn[2]]);return Gn}function Is(nn,rn){var Ln;if(typeof nn=="string")Ln=rn(nn)[0];else if(Array.isArray(nn)){for(var Gn,ha,ih=nn.concat(),Iu=[],Gd=ih.length;Gd--;)typeof(Gn=ih.shift())=="string"?Iu.push(rn(Gn)[0]):Array.isArray(Gn)&&typeof Gn[0]=="string"&&(ha=rn(Gn[0],Gn[1],Gn[2]),Iu.push([ha[0],ha[1],ha[2]]));Ln=Iu}return Ln}var Ts=!1,Jc=!0;if(typeof w=="string")Ts=!0;else if(Array.isArray(w)){var Xc=w.concat();Oe=[];for(var wu,or=Xc.length;or--;)(typeof(wu=Xc.shift())!="string"||Array.isArray(wu)&&typeof wu[0]!="string")&&(Jc=!1);Ts=Jc}if(Ts===!1)throw new Error('Type of text must be string or Array. "'+w+'" is not recognized.');typeof w=="string"&&(w=w.match(/[\r?\n]/)?w.split(/\r\n|\r|\n/g):[w]);var bu=Te/Ve.internal.scaleFactor,xu=bu*(zt-1);switch(ue.baseline){case"bottom":ie-=xu;break;case"top":ie+=bu-xu;break;case"hanging":ie+=bu-2*xu;break;case"middle":ie+=bu/2-xu}if((D=ue.maxWidth||0)>0&&(typeof w=="string"?w=Ve.splitTextToSize(w,D):Object.prototype.toString.call(w)==="[object Array]"&&(w=w.reduce(function(nn,rn){return nn.concat(Ve.splitTextToSize(rn,D))},[]))),Ee={text:w,x:K,y:ie,options:ue,mutex:{pdfEscape:Nn,activeFontKey:ut,fonts:ft,activeFontSize:Te}},Pt.publish("preProcessText",Ee),w=Ee.text,Qe=(ue=Ee.options).angle,!(Ne instanceof nt)&&Qe&&typeof Qe=="number"){Qe*=Math.PI/180,ue.rotationDirection===0&&(Qe=-Qe),C===A.ADVANCED&&(Qe=-Qe);var Su=Math.cos(Qe),Zc=Math.sin(Qe);Ne=new nt(Su,Zc,-Zc,Su,0,0)}else Qe&&Qe instanceof nt&&(Ne=Qe);C!==A.ADVANCED||Ne||(Ne=yr),(T=ue.charSpace||sa)!==void 0&&(Lt+=L(I(T))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(ge=ue.horizontalScale)!==void 0&&(Lt+=L(100*ge)+` Tz
`),ue.lang;var Yr=-1,ug=ue.renderingMode!==void 0?ue.renderingMode:ue.stroke,eh=Ve.internal.getCurrentPageInfo().pageContext;switch(ug){case 0:case!1:case"fill":Yr=0;break;case 1:case!0:case"stroke":Yr=1;break;case 2:case"fillThenStroke":Yr=2;break;case 3:case"invisible":Yr=3;break;case 4:case"fillAndAddForClipping":Yr=4;break;case 5:case"strokeAndAddPathForClipping":Yr=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Yr=6;break;case 7:case"addToPathForClipping":Yr=7}var zd=eh.usedRenderingMode!==void 0?eh.usedRenderingMode:-1;Yr!==-1?Lt+=Yr+` Tr
`:zd!==-1&&(Lt+=`0 Tr
`),Yr!==-1&&(eh.usedRenderingMode=Yr),d=ue.align||"left";var Ii,Nu=Te*zt,Hd=Ve.internal.pageSize.getWidth(),$d=ft[ut];T=ue.charSpace||sa,D=ue.maxWidth||0,X=Object.assign({autoencode:!0,noBOM:!0},ue.flags);var to=[],wl=function(nn){return Ve.getStringUnitWidth(nn,{font:$d,charSpace:T,fontSize:Te,doKerning:!1})*Te/Zt};if(Object.prototype.toString.call(w)==="[object Array]"){var Jr;Oe=ar(w),d!=="left"&&(Ii=Oe.map(wl));var Mr,no=0;if(d==="right"){K-=Ii[0],w=[],or=Oe.length;for(var la=0;la<or;la++)la===0?(Mr=pi(K),Jr=Wn(ie)):(Mr=I(no-Ii[la]),Jr=-Nu),w.push([Oe[la],Mr,Jr]),no=Ii[la]}else if(d==="center"){K-=Ii[0]/2,w=[],or=Oe.length;for(var ua=0;ua<or;ua++)ua===0?(Mr=pi(K),Jr=Wn(ie)):(Mr=I((no-Ii[ua])/2),Jr=-Nu),w.push([Oe[ua],Mr,Jr]),no=Ii[ua]}else if(d==="left"){w=[],or=Oe.length;for(var Au=0;Au<or;Au++)w.push(Oe[Au])}else if(d==="justify"&&$d.encoding==="Identity-H"){w=[],or=Oe.length,D=D!==0?D:Hd;for(var ca=0,Cn=0;Cn<or;Cn++)if(Jr=Cn===0?Wn(ie):-Nu,Mr=Cn===0?pi(K):ca,Cn<or-1){var th=I((D-Ii[Cn])/(Oe[Cn].split(" ").length-1)),Vr=Oe[Cn].split(" ");w.push([Vr[0]+" ",Mr,Jr]),ca=0;for(var Ti=1;Ti<Vr.length;Ti++){var Eu=(wl(Vr[Ti-1]+" "+Vr[Ti])-wl(Vr[Ti]))*Zt+th;Ti==Vr.length-1?w.push([Vr[Ti],Eu,0]):w.push([Vr[Ti]+" ",Eu,0]),ca-=Eu}}else w.push([Oe[Cn],Mr,Jr]);w.push(["",ca,0])}else{if(d!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(w=[],or=Oe.length,D=D!==0?D:Hd,Cn=0;Cn<or;Cn++)Jr=Cn===0?Wn(ie):-Nu,Mr=Cn===0?pi(K):0,Cn<or-1?to.push(L(I((D-Ii[Cn])/(Oe[Cn].split(" ").length-1)))):to.push(0),w.push([Oe[Cn],Mr,Jr])}}var Wd=typeof ue.R2L=="boolean"?ue.R2L:$e;Wd===!0&&(w=Is(w,function(nn,rn,Ln){return[nn.split("").reverse().join(""),rn,Ln]})),Ee={text:w,x:K,y:ie,options:ue,mutex:{pdfEscape:Nn,activeFontKey:ut,fonts:ft,activeFontSize:Te}},Pt.publish("postProcessText",Ee),w=Ee.text,St=Ee.mutex.isHex||!1;var nh=ft[ut].encoding;nh!=="WinAnsiEncoding"&&nh!=="StandardEncoding"||(w=Is(w,function(nn,rn,Ln){return[Ji(nn),rn,Ln]})),Oe=ar(w),w=[];for(var bl,xl,ro,Sl=0,ku=1,Nl=Array.isArray(Oe[0])?ku:Sl,io="",rh=function(nn,rn,Ln){var Gn="";return Ln instanceof nt?(Ln=typeof ue.angle=="number"?Wr(Ln,new nt(1,0,0,1,nn,rn)):Wr(new nt(1,0,0,1,nn,rn),Ln),C===A.ADVANCED&&(Ln=Wr(new nt(1,0,0,-1,0,0),Ln)),Gn=Ln.join(" ")+` Tm
`):Gn=L(nn)+" "+L(rn)+` Td
`,Gn},Pi=0;Pi<Oe.length;Pi++){switch(io="",Nl){case ku:ro=(St?"<":"(")+Oe[Pi][0]+(St?">":")"),bl=parseFloat(Oe[Pi][1]),xl=parseFloat(Oe[Pi][2]);break;case Sl:ro=(St?"<":"(")+Oe[Pi]+(St?">":")"),bl=pi(K),xl=Wn(ie)}to!==void 0&&to[Pi]!==void 0&&(io=to[Pi]+` Tw
`),Pi===0?w.push(io+rh(bl,xl,Ne)+ro):Nl===Sl?w.push(io+ro):Nl===ku&&w.push(io+rh(bl,xl,Ne)+ro)}w=Nl===Sl?w.join(` Tj
T* `):w.join(` Tj
`),w+=` Tj
`;var Ci=`BT
/`;return Ci+=ut+" "+Te+` Tf
`,Ci+=L(Te*zt)+` TL
`,Ci+=Qi+`
`,Ci+=Lt,Ci+=w,ae(Ci+="ET"),g[ut]=!0,Ve};var Yc=m.__private__.clip=m.clip=function(w){return ae(w==="evenodd"?"W*":"W"),this};m.clipEvenOdd=function(){return Yc("evenodd")},m.__private__.discardPath=m.discardPath=function(){return ae("n"),this};var ki=m.__private__.isValidStyle=function(w){var K=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(w)!==-1&&(K=!0),K};m.__private__.setDefaultPathOperation=m.setDefaultPathOperation=function(w){return ki(w)&&(u=w),this};var gu=m.__private__.getStyle=m.getStyle=function(w){var K=u;switch(w){case"D":case"S":K="S";break;case"F":K="f";break;case"FD":case"DF":K="B";break;case"f":case"f*":case"B":case"B*":K=w}return K},di=m.close=function(){return ae("h"),this};m.stroke=function(){return ae("S"),this},m.fill=function(w){return qa("f",w),this},m.fillEvenOdd=function(w){return qa("f*",w),this},m.fillStroke=function(w){return qa("B",w),this},m.fillStrokeEvenOdd=function(w){return qa("B*",w),this};var qa=function(w,K){Gt(K)==="object"?Ha(K,w):ae(w)},fl=function(w){w===null||C===A.ADVANCED&&w===void 0||(w=gu(w),ae(w))};function za(w,K,ie,ue,ve){var Ee=new tc(K||this.boundingBox,ie||this.xStep,ue||this.yStep,this.gState,ve||this.matrix);Ee.stream=this.stream;var Oe=w+"$$"+this.cloneIndex+++"$$";return Vn(Oe,Ee),Ee}var Ha=function(w,K){var ie=vr[w.key],ue=bt[ie];if(ue instanceof Cl)ae("q"),ae(vu(K)),ue.gState&&m.setGState(ue.gState),ae(w.matrix.toString()+" cm"),ae("/"+ie+" sh"),ae("Q");else if(ue instanceof tc){var ve=new nt(1,0,0,-1,0,wr());w.matrix&&(ve=ve.multiply(w.matrix||yr),ie=za.call(ue,w.key,w.boundingBox,w.xStep,w.yStep,ve).id),ae("q"),ae("/Pattern cs"),ae("/"+ie+" scn"),ue.gState&&m.setGState(ue.gState),ae(K),ae("Q")}},vu=function(w){switch(w){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},Wi=m.moveTo=function(w,K){return ae(L(I(w))+" "+L(M(K))+" m"),this},fi=m.lineTo=function(w,K){return ae(L(I(w))+" "+L(M(K))+" l"),this},Gi=m.curveTo=function(w,K,ie,ue,ve,Ee){return ae([L(I(w)),L(M(K)),L(I(ie)),L(M(ue)),L(I(ve)),L(M(Ee)),"c"].join(" ")),this};m.__private__.line=m.line=function(w,K,ie,ue,ve){if(isNaN(w)||isNaN(K)||isNaN(ie)||isNaN(ue)||!ki(ve))throw new Error("Invalid arguments passed to jsPDF.line");return C===A.COMPAT?this.lines([[ie-w,ue-K]],w,K,[1,1],ve||"S"):this.lines([[ie-w,ue-K]],w,K,[1,1]).stroke()},m.__private__.lines=m.lines=function(w,K,ie,ue,ve,Ee){var Oe,Qe,d,T,D,X,ge,Ne,Ve,xt,Lt,St;if(typeof w=="number"&&(St=ie,ie=K,K=w,w=St),ue=ue||[1,1],Ee=Ee||!1,isNaN(K)||isNaN(ie)||!Array.isArray(w)||!Array.isArray(ue)||!ki(ve)||typeof Ee!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Wi(K,ie),Oe=ue[0],Qe=ue[1],T=w.length,xt=K,Lt=ie,d=0;d<T;d++)(D=w[d]).length===2?(xt=D[0]*Oe+xt,Lt=D[1]*Qe+Lt,fi(xt,Lt)):(X=D[0]*Oe+xt,ge=D[1]*Qe+Lt,Ne=D[2]*Oe+xt,Ve=D[3]*Qe+Lt,xt=D[4]*Oe+xt,Lt=D[5]*Qe+Lt,Gi(X,ge,Ne,Ve,xt,Lt));return Ee&&di(),fl(ve),this},m.path=function(w){for(var K=0;K<w.length;K++){var ie=w[K],ue=ie.c;switch(ie.op){case"m":Wi(ue[0],ue[1]);break;case"l":fi(ue[0],ue[1]);break;case"c":Gi.apply(this,ue);break;case"h":di()}}return this},m.__private__.rect=m.rect=function(w,K,ie,ue,ve){if(isNaN(w)||isNaN(K)||isNaN(ie)||isNaN(ue)||!ki(ve))throw new Error("Invalid arguments passed to jsPDF.rect");return C===A.COMPAT&&(ue=-ue),ae([L(I(w)),L(M(K)),L(I(ie)),L(I(ue)),"re"].join(" ")),fl(ve),this},m.__private__.triangle=m.triangle=function(w,K,ie,ue,ve,Ee,Oe){if(isNaN(w)||isNaN(K)||isNaN(ie)||isNaN(ue)||isNaN(ve)||isNaN(Ee)||!ki(Oe))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[ie-w,ue-K],[ve-ie,Ee-ue],[w-ve,K-Ee]],w,K,[1,1],Oe,!0),this},m.__private__.roundedRect=m.roundedRect=function(w,K,ie,ue,ve,Ee,Oe){if(isNaN(w)||isNaN(K)||isNaN(ie)||isNaN(ue)||isNaN(ve)||isNaN(Ee)||!ki(Oe))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Qe=4/3*(Math.SQRT2-1);return ve=Math.min(ve,.5*ie),Ee=Math.min(Ee,.5*ue),this.lines([[ie-2*ve,0],[ve*Qe,0,ve,Ee-Ee*Qe,ve,Ee],[0,ue-2*Ee],[0,Ee*Qe,-ve*Qe,Ee,-ve,Ee],[2*ve-ie,0],[-ve*Qe,0,-ve,-Ee*Qe,-ve,-Ee],[0,2*Ee-ue],[0,-Ee*Qe,ve*Qe,-Ee,ve,-Ee]],w+ve,K,[1,1],Oe,!0),this},m.__private__.ellipse=m.ellipse=function(w,K,ie,ue,ve){if(isNaN(w)||isNaN(K)||isNaN(ie)||isNaN(ue)||!ki(ve))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Ee=4/3*(Math.SQRT2-1)*ie,Oe=4/3*(Math.SQRT2-1)*ue;return Wi(w+ie,K),Gi(w+ie,K-Oe,w+Ee,K-ue,w,K-ue),Gi(w-Ee,K-ue,w-ie,K-Oe,w-ie,K),Gi(w-ie,K+Oe,w-Ee,K+ue,w,K+ue),Gi(w+Ee,K+ue,w+ie,K+Oe,w+ie,K),fl(ve),this},m.__private__.circle=m.circle=function(w,K,ie,ue){if(isNaN(w)||isNaN(K)||isNaN(ie)||!ki(ue))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(w,K,ie,ie,ue)},m.setFont=function(w,K,ie){return ie&&(K=B(K,ie)),ut=na(w,K,{disableWarning:!1}),this};var pl=m.__private__.getFont=m.getFont=function(){return ft[na.apply(m,arguments)]};m.__private__.getFontList=m.getFontList=function(){var w,K,ie={};for(w in kt)if(kt.hasOwnProperty(w))for(K in ie[w]=[],kt[w])kt[w].hasOwnProperty(K)&&ie[w].push(K);return ie},m.addFont=function(w,K,ie,ue,ve){var Ee=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Ee.indexOf(arguments[3])!==-1?ve=arguments[3]:arguments[3]&&Ee.indexOf(arguments[3])==-1&&(ie=B(ie,ue)),ve=ve||"Identity-H",cl.call(this,w,K,ie,ve)};var qt,ml=t.lineWidth||.200025,$a=m.__private__.getLineWidth=m.getLineWidth=function(){return ml},gl=m.__private__.setLineWidth=m.setLineWidth=function(w){return ml=w,ae(L(I(w))+" w"),this};m.__private__.setLineDash=gt.API.setLineDash=gt.API.setLineDashPattern=function(w,K){if(w=w||[],K=K||0,isNaN(K)||!Array.isArray(w))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return w=w.map(function(ie){return L(I(ie))}).join(" "),K=L(I(K)),ae("["+w+"] "+K+" d"),this};var vl=m.__private__.getLineHeight=m.getLineHeight=function(){return Te*qt};m.__private__.getLineHeight=m.getLineHeight=function(){return Te*qt};var yl=m.__private__.setLineHeightFactor=m.setLineHeightFactor=function(w){return typeof(w=w||1.15)=="number"&&(qt=w),this},ia=m.__private__.getLineHeightFactor=m.getLineHeightFactor=function(){return qt};yl(t.lineHeight);var pi=m.__private__.getHorizontalCoordinate=function(w){return I(w)},Wn=m.__private__.getVerticalCoordinate=function(w){return C===A.ADVANCED?w:lt[Q].mediaBox.topRightY-lt[Q].mediaBox.bottomLeftY-I(w)},yu=m.__private__.getHorizontalCoordinateString=m.getHorizontalCoordinateString=function(w){return L(pi(w))},As=m.__private__.getVerticalCoordinateString=m.getVerticalCoordinateString=function(w){return L(Wn(w))},sr=t.strokeColor||"0 G";m.__private__.getStrokeColor=m.getDrawColor=function(){return Gr(sr)},m.__private__.setStrokeColor=m.setDrawColor=function(w,K,ie,ue){return sr=Dr({ch1:w,ch2:K,ch3:ie,ch4:ue,pdfColorType:"draw",precision:2}),ae(sr),this};var Wa=t.fillColor||"0 g";m.__private__.getFillColor=m.getFillColor=function(){return Gr(Wa)},m.__private__.setFillColor=m.setFillColor=function(w,K,ie,ue){return Wa=Dr({ch1:w,ch2:K,ch3:ie,ch4:ue,pdfColorType:"fill",precision:2}),ae(Wa),this};var Qi=t.textColor||"0 g",Ga=m.__private__.getTextColor=m.getTextColor=function(){return Gr(Qi)};m.__private__.setTextColor=m.setTextColor=function(w,K,ie,ue){return Qi=Dr({ch1:w,ch2:K,ch3:ie,ch4:ue,pdfColorType:"text",precision:3}),this};var sa=t.charSpace,Qa=m.__private__.getCharSpace=m.getCharSpace=function(){return parseFloat(sa||0)};m.__private__.setCharSpace=m.setCharSpace=function(w){if(isNaN(w))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return sa=w,this};var _l=0;m.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},m.__private__.setLineCap=m.setLineCap=function(w){var K=m.CapJoinStyles[w];if(K===void 0)throw new Error("Line cap style of '"+w+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return _l=K,ae(K+" J"),this};var Ya=0;m.__private__.setLineJoin=m.setLineJoin=function(w){var K=m.CapJoinStyles[w];if(K===void 0)throw new Error("Line join style of '"+w+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Ya=K,ae(K+" j"),this},m.__private__.setLineMiterLimit=m.__private__.setMiterLimit=m.setLineMiterLimit=m.setMiterLimit=function(w){if(w=w||0,isNaN(w))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return ae(L(I(w))+" M"),this},m.GState=om,m.setGState=function(w){(w=typeof w=="string"?Bt[$n[w]]:Es(null,w)).equals(xn)||(ae("/"+w.id+" gs"),xn=w)};var Es=function(w,K){if(!w||!$n[w]){var ie=!1;for(var ue in Bt)if(Bt.hasOwnProperty(ue)&&Bt[ue].equals(K)){ie=!0;break}if(ie)K=Bt[ue];else{var ve="GS"+(Object.keys(Bt).length+1).toString(10);Bt[ve]=K,K.id=ve}return w&&($n[w]=K.id),Pt.publish("addGState",K),K}};m.addGState=function(w,K){return Es(w,K),this},m.saveGraphicsState=function(){return ae("q"),Mn.push({key:ut,size:Te,color:Qi}),this},m.restoreGraphicsState=function(){ae("Q");var w=Mn.pop();return ut=w.key,Te=w.size,Qi=w.color,xn=null,this},m.setCurrentTransformationMatrix=function(w){return ae(w.toString()+" cm"),this},m.comment=function(w){return ae("#"+w),this};var aa=function(w,K){var ie=w||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return ie},set:function(Ee){isNaN(Ee)||(ie=parseFloat(Ee))}});var ue=K||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return ue},set:function(Ee){isNaN(Ee)||(ue=parseFloat(Ee))}});var ve="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return ve},set:function(Ee){ve=Ee.toString()}}),this},Ja=function(w,K,ie,ue){aa.call(this,w,K),this.type="rect";var ve=ie||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return ve},set:function(Oe){isNaN(Oe)||(ve=parseFloat(Oe))}});var Ee=ue||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Ee},set:function(Oe){isNaN(Oe)||(Ee=parseFloat(Oe))}}),this},oa=function(){this.page=Dt,this.currentPage=Q,this.pages=Ie.slice(0),this.pagesContext=lt.slice(0),this.x=we,this.y=He,this.matrix=mt,this.width=ks(Q),this.height=wr(Q),this.outputDestination=Ke,this.id="",this.objectNumber=-1};oa.prototype.restore=function(){Dt=this.page,Q=this.currentPage,lt=this.pagesContext,Ie=this.pages,we=this.x,He=this.y,mt=this.matrix,Za(Q,this.width),eo(Q,this.height),Ke=this.outputDestination};var Xa=function(w,K,ie,ue,ve){ci.push(new oa),Dt=Q=0,Ie=[],we=w,He=K,mt=ve,Or([ie,ue])},_u=function(w){if(fn[w])ci.pop().restore();else{var K=new oa,ie="Xo"+(Object.keys(Jt).length+1).toString(10);K.id=ie,fn[w]=ie,Jt[ie]=K,Pt.publish("addFormObject",K),ci.pop().restore()}};for(var Yi in m.beginFormObject=function(w,K,ie,ue,ve){return Xa(w,K,ie,ue,ve),this},m.endFormObject=function(w){return _u(w),this},m.doFormObject=function(w,K){var ie=Jt[fn[w]];return ae("q"),ae(K.toString()+" cm"),ae("/"+ie.id+" Do"),ae("Q"),this},m.getFormObject=function(w){var K=Jt[fn[w]];return{x:K.x,y:K.y,width:K.width,height:K.height,matrix:K.matrix}},m.save=function(w,K){return w=w||"generated.pdf",(K=K||{}).returnPromise=K.returnPromise||!1,K.returnPromise===!1?(Tl(Ba($i()),w),typeof Tl.unload=="function"&&vt.setTimeout&&setTimeout(Tl.unload,911),this):new Promise(function(ie,ue){try{var ve=Tl(Ba($i()),w);typeof Tl.unload=="function"&&vt.setTimeout&&setTimeout(Tl.unload,911),ie(ve)}catch(Ee){ue(Ee.message)}})},gt.API)gt.API.hasOwnProperty(Yi)&&(Yi==="events"&&gt.API.events.length?function(w,K){var ie,ue,ve;for(ve=K.length-1;ve!==-1;ve--)ie=K[ve][0],ue=K[ve][1],w.subscribe.apply(w,[ie].concat(typeof ue=="function"?[ue]:ue))}(Pt,gt.API.events):m[Yi]=gt.API[Yi]);var ks=m.getPageWidth=function(w){return(lt[w=w||Q].mediaBox.topRightX-lt[w].mediaBox.bottomLeftX)/ze},Za=m.setPageWidth=function(w,K){lt[w].mediaBox.topRightX=K*ze+lt[w].mediaBox.bottomLeftX},wr=m.getPageHeight=function(w){return(lt[w=w||Q].mediaBox.topRightY-lt[w].mediaBox.bottomLeftY)/ze},eo=m.setPageHeight=function(w,K){lt[w].mediaBox.topRightY=K*ze+lt[w].mediaBox.bottomLeftY};return m.internal={pdfEscape:Nn,getStyle:gu,getFont:pl,getFontSize:Be,getCharSpace:Qa,getTextColor:Ga,getLineHeight:vl,getLineHeightFactor:ia,getLineWidth:$a,write:Ge,getHorizontalCoordinate:pi,getVerticalCoordinate:Wn,getCoordinateString:yu,getVerticalCoordinateString:As,collections:{},newObject:Tn,newAdditionalObject:Oa,newObjectDeferred:Sn,newObjectDeferredBegin:Un,getFilters:Fr,putStream:Pn,events:Pt,scaleFactor:ze,pageSize:{getWidth:function(){return ks(Q)},setWidth:function(w){Za(Q,w)},getHeight:function(){return wr(Q)},setHeight:function(w){eo(Q,w)}},encryptionOptions:h,encryption:on,getEncryptor:mu,output:Ka,getNumberOfPages:Ht,pages:Ie,out:ae,f2:R,f3:E,getPageInfo:dl,getPageInfoByObjId:yt,getCurrentPageInfo:Ns,getPDFVersion:x,Point:aa,Rectangle:Ja,Matrix:nt,hasHotfix:Ss},Object.defineProperty(m.internal.pageSize,"width",{get:function(){return ks(Q)},set:function(w){Za(Q,w)},enumerable:!0,configurable:!0}),Object.defineProperty(m.internal.pageSize,"height",{get:function(){return wr(Q)},set:function(w){eo(Q,w)},enumerable:!0,configurable:!0}),fu.call(m,ce),ut="F1",ta(i,n),Pt.publish("initialized"),m}Uu.prototype.lsbFirstWord=function(t){return String.fromCharCode(t>>0&255,t>>8&255,t>>16&255,t>>24&255)},Uu.prototype.toHexString=function(t){return t.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Uu.prototype.hexToBytes=function(t){for(var e=[],n=0;n<t.length;n+=2)e.push(String.fromCharCode(parseInt(t.substr(n,2),16)));return e.join("")},Uu.prototype.processOwnerPassword=function(t,e){return rv(nv(e).substr(0,5),t)},Uu.prototype.encryptor=function(t,e){var n=nv(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(r){return rv(n,r)}},om.prototype.equals=function(t){var e,n="id,objectNumber,equals";if(!t||Gt(t)!==Gt(this))return!1;var r=0;for(e in this)if(!(n.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this[e]!==t[e])return!1;r++}for(e in t)t.hasOwnProperty(e)&&n.indexOf(e)<0&&r--;return r===0},gt.API={events:[]},gt.version="2.5.2";var En=gt.API,ly=1,lu=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Du=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Nt=function(t){return t.toFixed(2)},go=function(t){return t.toFixed(5)};En.__acroform__={};var ui=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},Lw=function(t){return t*ly},Rs=function(t){var e=new yN,n=it.internal.getHeight(t)||0,r=it.internal.getWidth(t)||0;return e.BBox=[0,0,Number(Nt(r)),Number(Nt(n))],e},eD=En.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|=1<<e},tD=En.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&=~(1<<e)},nD=En.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return t&1<<e?1:0},Dn=En.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return nD(t,e-1)},Fn=En.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return eD(t,e-1)},On=En.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return tD(t,e-1)},rD=En.__acroform__.calculateCoordinates=function(t,e){var n=e.internal.getHorizontalCoordinate,r=e.internal.getVerticalCoordinate,i=t[0],s=t[1],a=t[2],o=t[3],l={};return l.lowerLeft_X=n(i)||0,l.lowerLeft_Y=r(s+o)||0,l.upperRight_X=n(i+a)||0,l.upperRight_Y=r(s)||0,[Number(Nt(l.lowerLeft_X)),Number(Nt(l.lowerLeft_Y)),Number(Nt(l.upperRight_X)),Number(Nt(l.upperRight_Y))]},iD=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],n=t._V||t.DV,r=iv(t,n),i=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+i+" "+Nt(r.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(r.text),e.push("ET"),e.push("Q"),e.push("EMC");var s=Rs(t);return s.scope=t.scope,s.stream=e.join(`
`),s}},iv=function(t,e){var n=t.fontSize===0?t.maxFontSize:t.fontSize,r={text:"",fontSize:""},i=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");i=t.multiline?i.map(function(E){return E.split(`
`)}):i.map(function(E){return[E]});var s=n,a=it.internal.getHeight(t)||0;a=a<0?-a:a;var o=it.internal.getWidth(t)||0;o=o<0?-o:o;var l=function(E,I,P){if(E+1<i.length){var M=I+" "+i[E+1][0];return Bf(M,t,P).width<=o-4}return!1};s++;e:for(;s>0;){e="",s--;var u,h,p=Bf("3",t,s).height,g=t.multiline?a-s:(a-p)/2,m=g+=2,b=0,x=0,k=0;if(s<=0){e=`(...) Tj
`,e+="% Width of Text: "+Bf(e,t,s=12).width+", FieldWidth:"+o+`
`;break}for(var _="",A=0,C=0;C<i.length;C++)if(i.hasOwnProperty(C)){var F=!1;if(i[C].length!==1&&k!==i[C].length-1){if((p+2)*(A+2)+2>a)continue e;_+=i[C][k],F=!0,x=C,C--}else{_=(_+=i[C][k]+" ").substr(_.length-1)==" "?_.substr(0,_.length-1):_;var Y=parseInt(C),B=l(Y,_,s),L=C>=i.length-1;if(B&&!L){_+=" ",k=0;continue}if(B||L){if(L)x=Y;else if(t.multiline&&(p+2)*(A+2)+2>a)continue e}else{if(!t.multiline||(p+2)*(A+2)+2>a)continue e;x=Y}}for(var y="",S=b;S<=x;S++){var R=i[S];if(t.multiline){if(S===x){y+=R[k]+" ",k=(k+1)%R.length;continue}if(S===b){y+=R[R.length-1]+" ";continue}}y+=R[0]+" "}switch(y=y.substr(y.length-1)==" "?y.substr(0,y.length-1):y,h=Bf(y,t,s).width,t.textAlign){case"right":u=o-h-2;break;case"center":u=(o-h)/2;break;case"left":default:u=2}e+=Nt(u)+" "+Nt(m)+` Td
`,e+="("+lu(y)+`) Tj
`,e+=-Nt(u)+` 0 Td
`,m=-(s+2),h=0,b=F?x:x+1,A++,_=""}break}return r.text=e,r.fontSize=s,r},Bf=function(t,e,n){var r=e.scope.internal.getFont(e.fontName,e.fontStyle),i=e.scope.getStringUnitWidth(t,{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:e.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:i}},sD={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},aD=function(t,e){var n={type:"reference",object:t};e.internal.getPageInfo(t.page).pageContext.annotations.find(function(r){return r.type===n.type&&r.object===n.object})===void 0&&e.internal.getPageInfo(t.page).pageContext.annotations.push(n)},oD=function(t,e){for(var n in t)if(t.hasOwnProperty(n)){var r=n,i=t[n];e.internal.newObjectDeferredBegin(i.objId,!0),Gt(i)==="object"&&typeof i.putStream=="function"&&i.putStream(),delete t[r]}},lD=function(t,e){if(e.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(gs.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(sD)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");ly=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new _N,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(n){n.internal.events.unsubscribe(n.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete n.internal.acroformPlugin.acroFormDictionaryRoot._eventID,n.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(n){n.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=n.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in r)if(r.hasOwnProperty(i)){var s=r[i];s.objId=void 0,s.hasAnnotation&&aD(s,n)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(n){if(n.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");n.internal.write("/AcroForm "+n.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(n){(function(r,i){var s=!r;for(var a in r||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(a)){var o=r[a],l=[],u=o.Rect;if(o.Rect&&(o.Rect=rD(o.Rect,i)),i.internal.newObjectDeferredBegin(o.objId,!0),o.DA=it.createDefaultAppearanceStream(o),Gt(o)==="object"&&typeof o.getKeyValueListForStream=="function"&&(l=o.getKeyValueListForStream()),o.Rect=u,o.hasAppearanceStream&&!o.appearanceStreamContent){var h=iD(o);l.push({key:"AP",value:"<</N "+h+">>"}),i.internal.acroformPlugin.xForms.push(h)}if(o.appearanceStreamContent){var p="";for(var g in o.appearanceStreamContent)if(o.appearanceStreamContent.hasOwnProperty(g)){var m=o.appearanceStreamContent[g];if(p+="/"+g+" ",p+="<<",Object.keys(m).length>=1||Array.isArray(m)){for(var a in m)if(m.hasOwnProperty(a)){var b=m[a];typeof b=="function"&&(b=b.call(i,o)),p+="/"+a+" "+b+" ",i.internal.acroformPlugin.xForms.indexOf(b)>=0||i.internal.acroformPlugin.xForms.push(b)}}else typeof(b=m)=="function"&&(b=b.call(i,o)),p+="/"+a+" "+b,i.internal.acroformPlugin.xForms.indexOf(b)>=0||i.internal.acroformPlugin.xForms.push(b);p+=">>"}l.push({key:"AP",value:`<<
`+p+">>"})}i.internal.putStream({additionalKeyValues:l,objectId:o.objId}),i.internal.out("endobj")}s&&oD(i.internal.acroformPlugin.xForms,i)})(n,t)}),t.internal.acroformPlugin.isInitialized=!0}},vN=En.__acroform__.arrayToPdfArray=function(t,e,n){var r=function(a){return a};if(Array.isArray(t)){for(var i="[",s=0;s<t.length;s++)switch(s!==0&&(i+=" "),Gt(t[s])){case"boolean":case"number":case"object":i+=t[s].toString();break;case"string":t[s].substr(0,1)!=="/"?(e!==void 0&&n&&(r=n.internal.getEncryptor(e)),i+="("+lu(r(t[s].toString()))+")"):i+=t[s].toString()}return i+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},w1=function(t,e,n){var r=function(i){return i};return e!==void 0&&n&&(r=n.internal.getEncryptor(e)),(t=t||"").toString(),t="("+lu(r(t))+")"},Ms=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Ms.prototype.toString=function(){return this.objId+" 0 R"},Ms.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},Ms.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var n in e)if(Object.getOwnPropertyDescriptor(this,e[n]).configurable===!1){var r=e[n],i=this[r];i&&(Array.isArray(i)?t.push({key:r,value:vN(i,this.objId,this.scope)}):i instanceof Ms?(i.scope=this.scope,t.push({key:r,value:i.objId+" 0 R"})):typeof i!="function"&&t.push({key:r,value:i}))}return t};var yN=function(){Ms.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(n){t=n.trim()},get:function(){return t||null}})};ui(yN,Ms);var _N=function(){Ms.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var n=function(r){return r};return this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),"("+lu(n(t))+")"}},set:function(n){t=n}})};ui(_N,Ms);var gs=function t(){Ms.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(_){if(isNaN(_))throw new Error('Invalid value "'+_+'" for attribute F supplied.');e=_}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Dn(e,3)},set:function(_){_?this.F=Fn(e,3):this.F=On(e,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(_){if(isNaN(_))throw new Error('Invalid value "'+_+'" for attribute Ff supplied.');n=_}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(_){r=_!==void 0?_:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(_){r[0]=_}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(_){r[1]=_}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(_){r[2]=_}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(_){r[3]=_}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(_){switch(_){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=_;break;default:throw new Error('Invalid value "'+_+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof lm)return;s="FieldObject"+t.FieldNum++}var _=function(A){return A};return this.scope&&(_=this.scope.internal.getEncryptor(this.objId)),"("+lu(_(s))+")"},set:function(_){s=_.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(_){s=_}});var a="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return a},set:function(_){a=_}});var o="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return o},set:function(_){o=_}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(_){l=_}});var u=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return u===void 0?50/ly:u},set:function(_){u=_}});var h="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return h},set:function(_){h=_}});var p="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!p||this instanceof lm||this instanceof Bl))return w1(p,this.objId,this.scope)},set:function(_){_=_.toString(),p=_}});var g=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(g)return this instanceof rr?g:w1(g,this.objId,this.scope)},set:function(_){_=_.toString(),g=this instanceof rr?_:_.substr(0,1)==="("?Du(_.substr(1,_.length-2)):Du(_)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof rr?Du(g.substr(1,g.length-1)):g},set:function(_){_=_.toString(),g=this instanceof rr?"/"+_:_}});var m=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(m)return m},set:function(_){this.V=_}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(m)return this instanceof rr?m:w1(m,this.objId,this.scope)},set:function(_){_=_.toString(),m=this instanceof rr?_:_.substr(0,1)==="("?Du(_.substr(1,_.length-2)):Du(_)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof rr?Du(m.substr(1,m.length-1)):m},set:function(_){_=_.toString(),m=this instanceof rr?"/"+_:_}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var b,x=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return x},set:function(_){_=!!_,x=_}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(b)return b},set:function(_){b=_}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Dn(this.Ff,1)},set:function(_){_?this.Ff=Fn(this.Ff,1):this.Ff=On(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Dn(this.Ff,2)},set:function(_){_?this.Ff=Fn(this.Ff,2):this.Ff=On(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Dn(this.Ff,3)},set:function(_){_?this.Ff=Fn(this.Ff,3):this.Ff=On(this.Ff,3)}});var k=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(k!==null)return k},set:function(_){if([0,1,2].indexOf(_)===-1)throw new Error('Invalid value "'+_+'" for attribute Q supplied.');k=_}}),Object.defineProperty(this,"textAlign",{get:function(){var _;switch(k){case 0:default:_="left";break;case 1:_="center";break;case 2:_="right"}return _},configurable:!0,enumerable:!0,set:function(_){switch(_){case"right":case 2:k=2;break;case"center":case 1:k=1;break;case"left":case 0:default:k=0}}})};ui(gs,Ms);var fc=function(){gs.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(n){t=n}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return vN(e,this.objId,this.scope)},set:function(n){var r,i;i=[],typeof(r=n)=="string"&&(i=function(s,a,o){o||(o=1);for(var l,u=[];l=a.exec(s);)u.push(l[o]);return u}(r,/\((.*?)\)/g)),e=i}}),this.getOptions=function(){return e},this.setOptions=function(n){e=n,this.sort&&e.sort()},this.addOption=function(n){n=(n=n||"").toString(),e.push(n),this.sort&&e.sort()},this.removeOption=function(n,r){for(r=r||!1,n=(n=n||"").toString();e.indexOf(n)!==-1&&(e.splice(e.indexOf(n),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Dn(this.Ff,18)},set:function(n){n?this.Ff=Fn(this.Ff,18):this.Ff=On(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Dn(this.Ff,19)},set:function(n){this.combo===!0&&(n?this.Ff=Fn(this.Ff,19):this.Ff=On(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Dn(this.Ff,20)},set:function(n){n?(this.Ff=Fn(this.Ff,20),e.sort()):this.Ff=On(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Dn(this.Ff,22)},set:function(n){n?this.Ff=Fn(this.Ff,22):this.Ff=On(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Dn(this.Ff,23)},set:function(n){n?this.Ff=Fn(this.Ff,23):this.Ff=On(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Dn(this.Ff,27)},set:function(n){n?this.Ff=Fn(this.Ff,27):this.Ff=On(this.Ff,27)}}),this.hasAppearanceStream=!1};ui(fc,gs);var pc=function(){fc.call(this),this.fontName="helvetica",this.combo=!1};ui(pc,fc);var mc=function(){pc.call(this),this.combo=!0};ui(mc,pc);var hp=function(){mc.call(this),this.edit=!0};ui(hp,mc);var rr=function(){gs.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Dn(this.Ff,15)},set:function(n){n?this.Ff=Fn(this.Ff,15):this.Ff=On(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Dn(this.Ff,16)},set:function(n){n?this.Ff=Fn(this.Ff,16):this.Ff=On(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Dn(this.Ff,17)},set:function(n){n?this.Ff=Fn(this.Ff,17):this.Ff=On(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Dn(this.Ff,26)},set:function(n){n?this.Ff=Fn(this.Ff,26):this.Ff=On(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var n=function(s){return s};if(this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var r,i=[];for(r in i.push("<<"),e)i.push("/"+r+" ("+lu(n(e[r]))+")");return i.push(">>"),i.join(`
`)}},set:function(n){Gt(n)==="object"&&(e=n)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(n){typeof n=="string"&&(e.CA=n)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(n){t="/"+n}})};ui(rr,gs);var dp=function(){rr.call(this),this.pushButton=!0};ui(dp,rr);var gc=function(){rr.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e!==void 0?e:[]}})};ui(gc,rr);var lm=function(){var t,e;gs.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(i){t=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(i){e=i}});var n,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(o){return o};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var s,a=[];for(s in a.push("<<"),r)a.push("/"+s+" ("+lu(i(r[s]))+")");return a.push(">>"),a.join(`
`)},set:function(i){Gt(i)==="object"&&(r=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(i){typeof i=="string"&&(r.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(i){n=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(i){n="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=it.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};ui(lm,gs),gc.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var n=this.Kids[e];n.appearanceStreamContent=t.createAppearanceStream(n.optionName),n.caption=t.getCA()}},gc.prototype.createOption=function(t){var e=new lm;return e.Parent=this,e.optionName=t,this.Kids.push(e),uD.call(this.scope,e),e};var fp=function(){rr.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=it.CheckBox.createAppearanceStream()};ui(fp,rr);var Bl=function(){gs.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Dn(this.Ff,13)},set:function(e){e?this.Ff=Fn(this.Ff,13):this.Ff=On(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Dn(this.Ff,21)},set:function(e){e?this.Ff=Fn(this.Ff,21):this.Ff=On(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Dn(this.Ff,23)},set:function(e){e?this.Ff=Fn(this.Ff,23):this.Ff=On(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Dn(this.Ff,24)},set:function(e){e?this.Ff=Fn(this.Ff,24):this.Ff=On(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Dn(this.Ff,25)},set:function(e){e?this.Ff=Fn(this.Ff,25):this.Ff=On(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Dn(this.Ff,26)},set:function(e){e?this.Ff=Fn(this.Ff,26):this.Ff=On(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};ui(Bl,gs);var pp=function(){Bl.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Dn(this.Ff,14)},set:function(t){t?this.Ff=Fn(this.Ff,14):this.Ff=On(this.Ff,14)}}),this.password=!0};ui(pp,Bl);var it={CheckBox:{createAppearanceStream:function(){return{N:{On:it.CheckBox.YesNormal},D:{On:it.CheckBox.YesPushDown,Off:it.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=Rs(t);e.scope=t.scope;var n=[],r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,i=t.scope.__private__.encodeColorString(t.color),s=iv(t,t.caption);return n.push("0.749023 g"),n.push("0 0 "+Nt(it.internal.getWidth(t))+" "+Nt(it.internal.getHeight(t))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+r+" "+Nt(s.fontSize)+" Tf "+i),n.push("BT"),n.push(s.text),n.push("ET"),n.push("Q"),n.push("EMC"),e.stream=n.join(`
`),e},YesNormal:function(t){var e=Rs(t);e.scope=t.scope;var n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color),i=[],s=it.internal.getHeight(t),a=it.internal.getWidth(t),o=iv(t,t.caption);return i.push("1 g"),i.push("0 0 "+Nt(a)+" "+Nt(s)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+Nt(a-1)+" "+Nt(s-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+n+" "+Nt(o.fontSize)+" Tf "+r),i.push(o.text),i.push("ET"),i.push("Q"),e.stream=i.join(`
`),e},OffPushDown:function(t){var e=Rs(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+Nt(it.internal.getWidth(t))+" "+Nt(it.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:it.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=it.RadioButton.Circle.YesNormal,e.D[t]=it.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=Rs(t);e.scope=t.scope;var n=[],r=it.internal.getWidth(t)<=it.internal.getHeight(t)?it.internal.getWidth(t)/4:it.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=it.internal.Bezier_C,s=Number((r*i).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+go(it.internal.getWidth(t)/2)+" "+go(it.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+s+" "+s+" "+r+" 0 "+r+" c"),n.push("-"+s+" "+r+" -"+r+" "+s+" -"+r+" 0 c"),n.push("-"+r+" -"+s+" -"+s+" -"+r+" 0 -"+r+" c"),n.push(s+" -"+r+" "+r+" -"+s+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=Rs(t);e.scope=t.scope;var n=[],r=it.internal.getWidth(t)<=it.internal.getHeight(t)?it.internal.getWidth(t)/4:it.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*it.internal.Bezier_C).toFixed(5)),a=Number((r*it.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+go(it.internal.getWidth(t)/2)+" "+go(it.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),n.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),n.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),n.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+go(it.internal.getWidth(t)/2)+" "+go(it.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+a+" "+a+" "+r+" 0 "+r+" c"),n.push("-"+a+" "+r+" -"+r+" "+a+" -"+r+" 0 c"),n.push("-"+r+" -"+a+" -"+a+" -"+r+" 0 -"+r+" c"),n.push(a+" -"+r+" "+r+" -"+a+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(t){var e=Rs(t);e.scope=t.scope;var n=[],r=it.internal.getWidth(t)<=it.internal.getHeight(t)?it.internal.getWidth(t)/4:it.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*it.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+go(it.internal.getWidth(t)/2)+" "+go(it.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),n.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),n.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),n.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:it.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=it.RadioButton.Cross.YesNormal,e.D[t]=it.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=Rs(t);e.scope=t.scope;var n=[],r=it.internal.calculateCross(t);return n.push("q"),n.push("1 1 "+Nt(it.internal.getWidth(t)-2)+" "+Nt(it.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(Nt(r.x1.x)+" "+Nt(r.x1.y)+" m"),n.push(Nt(r.x2.x)+" "+Nt(r.x2.y)+" l"),n.push(Nt(r.x4.x)+" "+Nt(r.x4.y)+" m"),n.push(Nt(r.x3.x)+" "+Nt(r.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=Rs(t);e.scope=t.scope;var n=it.internal.calculateCross(t),r=[];return r.push("0.749023 g"),r.push("0 0 "+Nt(it.internal.getWidth(t))+" "+Nt(it.internal.getHeight(t))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+Nt(it.internal.getWidth(t)-2)+" "+Nt(it.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(Nt(n.x1.x)+" "+Nt(n.x1.y)+" m"),r.push(Nt(n.x2.x)+" "+Nt(n.x2.y)+" l"),r.push(Nt(n.x4.x)+" "+Nt(n.x4.y)+" m"),r.push(Nt(n.x3.x)+" "+Nt(n.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(t){var e=Rs(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+Nt(it.internal.getWidth(t))+" "+Nt(it.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+n}};it.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=it.internal.getWidth(t),n=it.internal.getHeight(t),r=Math.min(e,n);return{x1:{x:(e-r)/2,y:(n-r)/2+r},x2:{x:(e-r)/2+r,y:(n-r)/2},x3:{x:(e-r)/2,y:(n-r)/2},x4:{x:(e-r)/2+r,y:(n-r)/2+r}}}},it.internal.getWidth=function(t){var e=0;return Gt(t)==="object"&&(e=Lw(t.Rect[2])),e},it.internal.getHeight=function(t){var e=0;return Gt(t)==="object"&&(e=Lw(t.Rect[3])),e};var uD=En.addField=function(t){if(lD(this,t),!(t instanceof gs))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};En.AcroFormChoiceField=fc,En.AcroFormListBox=pc,En.AcroFormComboBox=mc,En.AcroFormEditBox=hp,En.AcroFormButton=rr,En.AcroFormPushButton=dp,En.AcroFormRadioButton=gc,En.AcroFormCheckBox=fp,En.AcroFormTextField=Bl,En.AcroFormPasswordField=pp,En.AcroFormAppearance=it,En.AcroForm={ChoiceField:fc,ListBox:pc,ComboBox:mc,EditBox:hp,Button:rr,PushButton:dp,RadioButton:gc,CheckBox:fp,TextField:Bl,PasswordField:pp,Appearance:it},gt.AcroForm={ChoiceField:fc,ListBox:pc,ComboBox:mc,EditBox:hp,Button:rr,PushButton:dp,RadioButton:gc,CheckBox:fp,TextField:Bl,PasswordField:pp,Appearance:it};gt.AcroForm;function wN(t){return t.reduce(function(e,n,r){return e[n]=r,e},{})}(function(t){t.__addimage__={};var e="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},r=t.__addimage__.getImageFileTypeByImageData=function(E,I){var P,M,te,V,U,z=e;if((I=I||e)==="RGBA"||E.data!==void 0&&E.data instanceof Uint8ClampedArray&&"height"in E&&"width"in E)return"RGBA";if(B(E))for(U in n)for(te=n[U],P=0;P<te.length;P+=1){for(V=!0,M=0;M<te[P].length;M+=1)if(te[P][M]!==void 0&&te[P][M]!==E[M]){V=!1;break}if(V===!0){z=U;break}}else for(U in n)for(te=n[U],P=0;P<te.length;P+=1){for(V=!0,M=0;M<te[P].length;M+=1)if(te[P][M]!==void 0&&te[P][M]!==E.charCodeAt(M)){V=!1;break}if(V===!0){z=U;break}}return z===e&&I!==e&&(z=I),z},i=function E(I){for(var P=this.internal.write,M=this.internal.putStream,te=(0,this.internal.getFilters)();te.indexOf("FlateEncode")!==-1;)te.splice(te.indexOf("FlateEncode"),1);I.objectId=this.internal.newObject();var V=[];if(V.push({key:"Type",value:"/XObject"}),V.push({key:"Subtype",value:"/Image"}),V.push({key:"Width",value:I.width}),V.push({key:"Height",value:I.height}),I.colorSpace===k.INDEXED?V.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(I.palette.length/3-1)+" "+("sMask"in I&&I.sMask!==void 0?I.objectId+2:I.objectId+1)+" 0 R]"}):(V.push({key:"ColorSpace",value:"/"+I.colorSpace}),I.colorSpace===k.DEVICE_CMYK&&V.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),V.push({key:"BitsPerComponent",value:I.bitsPerComponent}),"decodeParameters"in I&&I.decodeParameters!==void 0&&V.push({key:"DecodeParms",value:"<<"+I.decodeParameters+">>"}),"transparency"in I&&Array.isArray(I.transparency)){for(var U="",z=0,H=I.transparency.length;z<H;z++)U+=I.transparency[z]+" "+I.transparency[z]+" ";V.push({key:"Mask",value:"["+U+"]"})}I.sMask!==void 0&&V.push({key:"SMask",value:I.objectId+1+" 0 R"});var ne=I.filter!==void 0?["/"+I.filter]:void 0;if(M({data:I.data,additionalKeyValues:V,alreadyAppliedFilters:ne,objectId:I.objectId}),P("endobj"),"sMask"in I&&I.sMask!==void 0){var _e="/Predictor "+I.predictor+" /Colors 1 /BitsPerComponent "+I.bitsPerComponent+" /Columns "+I.width,O={width:I.width,height:I.height,colorSpace:"DeviceGray",bitsPerComponent:I.bitsPerComponent,decodeParameters:_e,data:I.sMask};"filter"in I&&(O.filter=I.filter),E.call(this,O)}if(I.colorSpace===k.INDEXED){var Q=this.internal.newObject();M({data:y(new Uint8Array(I.palette)),objectId:Q}),P("endobj")}},s=function(){var E=this.internal.collections.addImage_images;for(var I in E)i.call(this,E[I])},a=function(){var E,I=this.internal.collections.addImage_images,P=this.internal.write;for(var M in I)P("/I"+(E=I[M]).index,E.objectId,"0","R")},o=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",s),this.internal.events.subscribe("putXobjectDict",a))},l=function(){var E=this.internal.collections.addImage_images;return o.call(this),E},u=function(){return Object.keys(this.internal.collections.addImage_images).length},h=function(E){return typeof t["process"+E.toUpperCase()]=="function"},p=function(E){return Gt(E)==="object"&&E.nodeType===1},g=function(E,I){if(E.nodeName==="IMG"&&E.hasAttribute("src")){var P=""+E.getAttribute("src");if(P.indexOf("data:image/")===0)return Gh(unescape(P).split("base64,").pop());var M=t.loadFile(P,!0);if(M!==void 0)return M}if(E.nodeName==="CANVAS"){if(E.width===0||E.height===0)throw new Error("Given canvas must have data. Canvas width: "+E.width+", height: "+E.height);var te;switch(I){case"PNG":te="image/png";break;case"WEBP":te="image/webp";break;case"JPEG":case"JPG":default:te="image/jpeg"}return Gh(E.toDataURL(te,1).split("base64,").pop())}},m=function(E){var I=this.internal.collections.addImage_images;if(I){for(var P in I)if(E===I[P].alias)return I[P]}},b=function(E,I,P){return E||I||(E=-96,I=-96),E<0&&(E=-1*P.width*72/E/this.internal.scaleFactor),I<0&&(I=-1*P.height*72/I/this.internal.scaleFactor),E===0&&(E=I*P.width/P.height),I===0&&(I=E*P.height/P.width),[E,I]},x=function(E,I,P,M,te,V){var U=b.call(this,P,M,te),z=this.internal.getCoordinateString,H=this.internal.getVerticalCoordinateString,ne=l.call(this);if(P=U[0],M=U[1],ne[te.index]=te,V){V*=Math.PI/180;var _e=Math.cos(V),O=Math.sin(V),Q=function(W){return W.toFixed(4)},J=[Q(_e),Q(O),Q(-1*O),Q(_e),0,0,"cm"]}this.internal.write("q"),V?(this.internal.write([1,"0","0",1,z(E),H(I+M),"cm"].join(" ")),this.internal.write(J.join(" ")),this.internal.write([z(P),"0","0",z(M),"0","0","cm"].join(" "))):this.internal.write([z(P),"0","0",z(M),z(E),H(I+M),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+te.index+" Do"),this.internal.write("Q")},k=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var _=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},A=t.__addimage__.sHashCode=function(E){var I,P,M=0;if(typeof E=="string")for(P=E.length,I=0;I<P;I++)M=(M<<5)-M+E.charCodeAt(I),M|=0;else if(B(E))for(P=E.byteLength/2,I=0;I<P;I++)M=(M<<5)-M+E[I],M|=0;return M},C=t.__addimage__.validateStringAsBase64=function(E){(E=E||"").toString().trim();var I=!0;return E.length===0&&(I=!1),E.length%4!=0&&(I=!1),/^[A-Za-z0-9+/]+$/.test(E.substr(0,E.length-2))===!1&&(I=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(E.substr(-2))===!1&&(I=!1),I},F=t.__addimage__.extractImageFromDataUrl=function(E){var I=(E=E||"").split("base64,"),P=null;if(I.length===2){var M=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(I[0]);Array.isArray(M)&&(P={mimeType:M[1],charset:M[2],data:I[1]})}return P},Y=t.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};t.__addimage__.isArrayBuffer=function(E){return Y()&&E instanceof ArrayBuffer};var B=t.__addimage__.isArrayBufferView=function(E){return Y()&&typeof Uint32Array<"u"&&(E instanceof Int8Array||E instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&E instanceof Uint8ClampedArray||E instanceof Int16Array||E instanceof Uint16Array||E instanceof Int32Array||E instanceof Uint32Array||E instanceof Float32Array||E instanceof Float64Array)},L=t.__addimage__.binaryStringToUint8Array=function(E){for(var I=E.length,P=new Uint8Array(I),M=0;M<I;M++)P[M]=E.charCodeAt(M);return P},y=t.__addimage__.arrayBufferToBinaryString=function(E){for(var I="",P=B(E)?E:new Uint8Array(E),M=0;M<P.length;M+=8192)I+=String.fromCharCode.apply(null,P.subarray(M,M+8192));return I};t.addImage=function(){var E,I,P,M,te,V,U,z,H;if(typeof arguments[1]=="number"?(I=e,P=arguments[1],M=arguments[2],te=arguments[3],V=arguments[4],U=arguments[5],z=arguments[6],H=arguments[7]):(I=arguments[1],P=arguments[2],M=arguments[3],te=arguments[4],V=arguments[5],U=arguments[6],z=arguments[7],H=arguments[8]),Gt(E=arguments[0])==="object"&&!p(E)&&"imageData"in E){var ne=E;E=ne.imageData,I=ne.format||I||e,P=ne.x||P||0,M=ne.y||M||0,te=ne.w||ne.width||te,V=ne.h||ne.height||V,U=ne.alias||U,z=ne.compression||z,H=ne.rotation||ne.angle||H}var _e=this.internal.getFilters();if(z===void 0&&_e.indexOf("FlateEncode")!==-1&&(z="SLOW"),isNaN(P)||isNaN(M))throw new Error("Invalid coordinates passed to jsPDF.addImage");o.call(this);var O=S.call(this,E,I,U,z);return x.call(this,P,M,te,V,O,H),this};var S=function(E,I,P,M){var te,V,U;if(typeof E=="string"&&r(E)===e){E=unescape(E);var z=R(E,!1);(z!==""||(z=t.loadFile(E,!0))!==void 0)&&(E=z)}if(p(E)&&(E=g(E,I)),I=r(E,I),!h(I))throw new Error("addImage does not support files of type '"+I+"', please ensure that a plugin for '"+I+"' support is added.");if(((U=P)==null||U.length===0)&&(P=function(H){return typeof H=="string"||B(H)?A(H):B(H.data)?A(H.data):null}(E)),(te=m.call(this,P))||(Y()&&(E instanceof Uint8Array||I==="RGBA"||(V=E,E=L(E))),te=this["process"+I.toUpperCase()](E,u.call(this),P,function(H){return H&&typeof H=="string"&&(H=H.toUpperCase()),H in t.image_compression?H:_.NONE}(M),V)),!te)throw new Error("An unknown error occurred whilst processing the image.");return te},R=t.__addimage__.convertBase64ToBinaryString=function(E,I){var P;I=typeof I!="boolean"||I;var M,te="";if(typeof E=="string"){M=(P=F(E))!==null?P.data:E;try{te=Gh(M)}catch(V){if(I)throw C(M)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+V.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return te};t.getImageProperties=function(E){var I,P,M="";if(p(E)&&(E=g(E)),typeof E=="string"&&r(E)===e&&((M=R(E,!1))===""&&(M=t.loadFile(E)||""),E=M),P=r(E),!h(P))throw new Error("addImage does not support files of type '"+P+"', please ensure that a plugin for '"+P+"' support is added.");if(!Y()||E instanceof Uint8Array||(E=L(E)),!(I=this["process"+P.toUpperCase()](E)))throw new Error("An unknown error occurred whilst processing the image");return I.fileType=P,I}})(gt.API),function(t){var e=function(n){if(n!==void 0&&n!="")return!0};gt.API.events.push(["addPage",function(n){this.internal.getPageInfo(n.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(n){for(var r,i,s,a=this.internal.getCoordinateString,o=this.internal.getVerticalCoordinateString,l=this.internal.getPageInfoByObjId(n.objId),u=n.pageContext.annotations,h=!1,p=0;p<u.length&&!h;p++)switch((r=u[p]).type){case"link":(e(r.options.url)||e(r.options.pageNumber))&&(h=!0);break;case"reference":case"text":case"freetext":h=!0}if(h!=0){this.internal.write("/Annots [");for(var g=0;g<u.length;g++){r=u[g];var m=this.internal.pdfEscape,b=this.internal.getEncryptor(n.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var x=this.internal.newAdditionalObject(),k=this.internal.newAdditionalObject(),_=this.internal.getEncryptor(x.objId),A=r.title||"Note";s="<</Type /Annot /Subtype /Text "+(i="/Rect ["+a(r.bounds.x)+" "+o(r.bounds.y+r.bounds.h)+" "+a(r.bounds.x+r.bounds.w)+" "+o(r.bounds.y)+"] ")+"/Contents ("+m(_(r.contents))+")",s+=" /Popup "+k.objId+" 0 R",s+=" /P "+l.objId+" 0 R",s+=" /T ("+m(_(A))+") >>",x.content=s;var C=x.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+a(r.bounds.x+30)+" "+o(r.bounds.y+r.bounds.h)+" "+a(r.bounds.x+r.bounds.w+30)+" "+o(r.bounds.y)+"] ")+" /Parent "+C,r.open&&(s+=" /Open true"),s+=" >>",k.content=s,this.internal.write(x.objId,"0 R",k.objId,"0 R");break;case"freetext":i="/Rect ["+a(r.bounds.x)+" "+o(r.bounds.y)+" "+a(r.bounds.x+r.bounds.w)+" "+o(r.bounds.y+r.bounds.h)+"] ";var F=r.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+m(b(r.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+F+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(r.options.name){var Y=this.annotations._nameMap[r.options.name];r.options.pageNumber=Y.page,r.options.top=Y.y}else r.options.top||(r.options.top=0);if(i="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",s="",r.options.url)s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+m(b(r.options.url))+") >>";else if(r.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,s+=" /FitV "+r.options.left+"]";break;case"XYZ":default:var B=o(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),s+=" /XYZ "+r.options.left+" "+B+" "+r.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),t.createAnnotation=function(n){var r=this.internal.getCurrentPageInfo();switch(n.type){case"link":this.link(n.bounds.x,n.bounds.y,n.bounds.w,n.bounds.h,n);break;case"text":case"freetext":r.pageContext.annotations.push(n)}},t.link=function(n,r,i,s,a){var o=this.internal.getCurrentPageInfo(),l=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString;o.pageContext.annotations.push({finalBounds:{x:l(n),y:u(r),w:l(n+i),h:u(r+s)},options:a,type:"link"})},t.textWithLink=function(n,r,i,s){var a,o,l=this.getTextWidth(n),u=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){o=s.maxWidth;var h=this.splitTextToSize(n,o).length;a=Math.ceil(u*h)}else o=l,a=u;return this.text(n,r,i,s),i+=.2*u,s.align==="center"&&(r-=l/2),s.align==="right"&&(r-=l),this.link(r,i-u,o,a,s),l},t.getTextWidth=function(n){var r=this.internal.getFontSize();return this.getStringUnitWidth(n)*r/this.internal.scaleFactor}}(gt.API),function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];t.__arabicParser__={};var s=t.__arabicParser__.isInArabicSubstitutionA=function(x){return e[x.charCodeAt(0)]!==void 0},a=t.__arabicParser__.isArabicLetter=function(x){return typeof x=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(x)},o=t.__arabicParser__.isArabicEndLetter=function(x){return a(x)&&s(x)&&e[x.charCodeAt(0)].length<=2},l=t.__arabicParser__.isArabicAlfLetter=function(x){return a(x)&&i.indexOf(x.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(x){return a(x)&&s(x)&&e[x.charCodeAt(0)].length>=1};var u=t.__arabicParser__.arabicLetterHasFinalForm=function(x){return a(x)&&s(x)&&e[x.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(x){return a(x)&&s(x)&&e[x.charCodeAt(0)].length>=3};var h=t.__arabicParser__.arabicLetterHasMedialForm=function(x){return a(x)&&s(x)&&e[x.charCodeAt(0)].length==4},p=t.__arabicParser__.resolveLigatures=function(x){var k=0,_=n,A="",C=0;for(k=0;k<x.length;k+=1)_[x.charCodeAt(k)]!==void 0?(C++,typeof(_=_[x.charCodeAt(k)])=="number"&&(A+=String.fromCharCode(_),_=n,C=0),k===x.length-1&&(_=n,A+=x.charAt(k-(C-1)),k-=C-1,C=0)):(_=n,A+=x.charAt(k-C),k-=C,C=0);return A};t.__arabicParser__.isArabicDiacritic=function(x){return x!==void 0&&r[x.charCodeAt(0)]!==void 0};var g=t.__arabicParser__.getCorrectForm=function(x,k,_){return a(x)?s(x)===!1?-1:!u(x)||!a(k)&&!a(_)||!a(_)&&o(k)||o(x)&&!a(k)||o(x)&&l(k)||o(x)&&o(k)?0:h(x)&&a(k)&&!o(k)&&a(_)&&u(_)?3:o(x)||!a(_)?1:2:-1},m=function(x){var k=0,_=0,A=0,C="",F="",Y="",B=(x=x||"").split("\\s+"),L=[];for(k=0;k<B.length;k+=1){for(L.push(""),_=0;_<B[k].length;_+=1)C=B[k][_],F=B[k][_-1],Y=B[k][_+1],a(C)?(A=g(C,F,Y),L[k]+=A!==-1?String.fromCharCode(e[C.charCodeAt(0)][A]):C):L[k]+=C;L[k]=p(L[k])}return L.join(" ")},b=t.__arabicParser__.processArabic=t.processArabic=function(){var x,k=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,_=[];if(Array.isArray(k)){var A=0;for(_=[],A=0;A<k.length;A+=1)Array.isArray(k[A])?_.push([m(k[A][0]),k[A][1],k[A][2]]):_.push([m(k[A])]);x=_}else x=m(k);return typeof arguments[0]=="string"?x:(arguments[0].text=x,arguments[0])};t.events.push(["preProcessText",b])}(gt.API),gt.API.autoPrint=function(t){var e;switch((t=t||{}).variant=t.variant||"non-conform",t.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(t){var e=function(){var n=void 0;Object.defineProperty(this,"pdf",{get:function(){return n},set:function(o){n=o}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(o){r=isNaN(o)||Number.isInteger(o)===!1||o<0?150:o,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(o){i=isNaN(o)||Number.isInteger(o)===!1||o<0?300:o,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(o){s=o}});var a={};Object.defineProperty(this,"style",{get:function(){return a},set:function(o){a=o}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(n,r){var i;if((n=n||"2d")!=="2d")return null;for(i in r)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=r[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(gt.API),function(t){var e={left:0,top:0,bottom:0,right:0},n=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var l=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return l},set:function(x){l=x}});var u=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return u},set:function(x){u=x}});var h=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return h},set:function(x){h=x}});var p=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return p},set:function(x){p=x}});var g=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return g},set:function(x){g=x}});var m=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return m},set:function(x){m=x}});var b=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return b},set:function(x){b=x}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(l){return r.call(this),this.internal.__cell__.headerFunction=typeof l=="function"?l:void 0,this},t.getTextDimensions=function(l,u){r.call(this);var h=(u=u||{}).fontSize||this.getFontSize(),p=u.font||this.getFont(),g=u.scaleFactor||this.internal.scaleFactor,m=0,b=0,x=0,k=this;if(!Array.isArray(l)&&typeof l!="string"){if(typeof l!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");l=String(l)}var _=u.maxWidth;_>0?typeof l=="string"?l=this.splitTextToSize(l,_):Object.prototype.toString.call(l)==="[object Array]"&&(l=l.reduce(function(C,F){return C.concat(k.splitTextToSize(F,_))},[])):l=Array.isArray(l)?l:[l];for(var A=0;A<l.length;A++)m<(x=this.getStringUnitWidth(l[A],{font:p})*h)&&(m=x);return m!==0&&(b=l.length),{w:m/=g,h:Math.max((b*h*this.getLineHeightFactor()-h*(this.getLineHeightFactor()-1))/g,0)}},t.cellAddPage=function(){r.call(this),this.addPage();var l=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new s(l.left,l.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var a=t.cell=function(){var l;l=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var u=this.internal.__cell__.lastCell,h=this.internal.__cell__.padding,p=this.internal.__cell__.margins||e,g=this.internal.__cell__.tableHeaderRow,m=this.internal.__cell__.printHeaders;return u.lineNumber!==void 0&&(u.lineNumber===l.lineNumber?(l.x=(u.x||0)+(u.width||0),l.y=u.y||0):u.y+u.height+l.height+p.bottom>this.getPageHeight()?(this.cellAddPage(),l.y=p.top,m&&g&&(this.printHeaderRow(l.lineNumber,!0),l.y+=g[0].height)):l.y=u.y+u.height||l.y),l.text[0]!==void 0&&(this.rect(l.x,l.y,l.width,l.height,n===!0?"FD":void 0),l.align==="right"?this.text(l.text,l.x+l.width-h,l.y+h,{align:"right",baseline:"top"}):l.align==="center"?this.text(l.text,l.x+l.width/2,l.y+h,{align:"center",baseline:"top",maxWidth:l.width-h-h}):this.text(l.text,l.x+h,l.y+h,{align:"left",baseline:"top",maxWidth:l.width-h-h})),this.internal.__cell__.lastCell=l,this};t.table=function(l,u,h,p,g){if(r.call(this),!h)throw new Error("No data for PDF table.");var m,b,x,k,_=[],A=[],C=[],F={},Y={},B=[],L=[],y=(g=g||{}).autoSize||!1,S=g.printHeaders!==!1,R=g.css&&g.css["font-size"]!==void 0?16*g.css["font-size"]:g.fontSize||12,E=g.margins||Object.assign({width:this.getPageWidth()},e),I=typeof g.padding=="number"?g.padding:3,P=g.headerBackgroundColor||"#c8c8c8",M=g.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=S,this.internal.__cell__.margins=E,this.internal.__cell__.table_font_size=R,this.internal.__cell__.padding=I,this.internal.__cell__.headerBackgroundColor=P,this.internal.__cell__.headerTextColor=M,this.setFontSize(R),p==null)A=_=Object.keys(h[0]),C=_.map(function(){return"left"});else if(Array.isArray(p)&&Gt(p[0])==="object")for(_=p.map(function(ne){return ne.name}),A=p.map(function(ne){return ne.prompt||ne.name||""}),C=p.map(function(ne){return ne.align||"left"}),m=0;m<p.length;m+=1)Y[p[m].name]=p[m].width*(19.049976/25.4);else Array.isArray(p)&&typeof p[0]=="string"&&(A=_=p,C=_.map(function(){return"left"}));if(y||Array.isArray(p)&&typeof p[0]=="string")for(m=0;m<_.length;m+=1){for(F[k=_[m]]=h.map(function(ne){return ne[k]}),this.setFont(void 0,"bold"),B.push(this.getTextDimensions(A[m],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),b=F[k],this.setFont(void 0,"normal"),x=0;x<b.length;x+=1)B.push(this.getTextDimensions(b[x],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);Y[k]=Math.max.apply(null,B)+I+I,B=[]}if(S){var te={};for(m=0;m<_.length;m+=1)te[_[m]]={},te[_[m]].text=A[m],te[_[m]].align=C[m];var V=o.call(this,te,Y);L=_.map(function(ne){return new s(l,u,Y[ne],V,te[ne].text,void 0,te[ne].align)}),this.setTableHeaderRow(L),this.printHeaderRow(1,!1)}var U=p.reduce(function(ne,_e){return ne[_e.name]=_e.align,ne},{});for(m=0;m<h.length;m+=1){"rowStart"in g&&g.rowStart instanceof Function&&g.rowStart({row:m,data:h[m]},this);var z=o.call(this,h[m],Y);for(x=0;x<_.length;x+=1){var H=h[m][_[x]];"cellStart"in g&&g.cellStart instanceof Function&&g.cellStart({row:m,col:x,data:H},this),a.call(this,new s(l,u,Y[_[x]],z,H,m+2,U[_[x]]))}}return this.internal.__cell__.table_x=l,this.internal.__cell__.table_y=u,this};var o=function(l,u){var h=this.internal.__cell__.padding,p=this.internal.__cell__.table_font_size,g=this.internal.scaleFactor;return Object.keys(l).map(function(m){var b=l[m];return this.splitTextToSize(b.hasOwnProperty("text")?b.text:b,u[m]-h-h)},this).map(function(m){return this.getLineHeightFactor()*m.length*p/g+h+h},this).reduce(function(m,b){return Math.max(m,b)},0)};t.setTableHeaderRow=function(l){r.call(this),this.internal.__cell__.tableHeaderRow=l},t.printHeaderRow=function(l,u){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var h;if(n=!0,typeof this.internal.__cell__.headerFunction=="function"){var p=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(p[0],p[1],p[2],p[3],void 0,-1)}this.setFont(void 0,"bold");for(var g=[],m=0;m<this.internal.__cell__.tableHeaderRow.length;m+=1){h=this.internal.__cell__.tableHeaderRow[m].clone(),u&&(h.y=this.internal.__cell__.margins.top||0,g.push(h)),h.lineNumber=l;var b=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),a.call(this,h),this.setTextColor(b)}g.length>0&&this.setTableHeaderRow(g),this.setFont(void 0,"normal"),n=!1}}(gt.API);var bN={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},xN=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],sv=wN(xN),SN=[100,200,300,400,500,600,700,800,900],cD=wN(SN);function av(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),n=function(s){return bN[s=s||"normal"]?s:"normal"}(t.style),r=function(s){if(!s)return 400;if(typeof s=="number")return s>=100&&s<=900&&s%100==0?s:400;if(/^\d00$/.test(s))return parseInt(s);switch(s){case"bold":return 700;case"normal":default:return 400}}(t.weight),i=function(s){return typeof sv[s=s||"normal"]=="number"?s:"normal"}(t.stretch);return{family:e,style:n,weight:r,stretch:i,src:t.src||[],ref:t.ref||{name:e,style:[i,n,r].join(" ")}}}function Rw(t,e,n,r){var i;for(i=n;i>=0&&i<e.length;i+=r)if(t[e[i]])return t[e[i]];for(i=n;i>=0&&i<e.length;i-=r)if(t[e[i]])return t[e[i]]}var hD={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},jw={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function Dw(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function dD(t,e,n){for(var r=(n=n||{}).defaultFontFamily||"times",i=Object.assign({},hD,n.genericFontFamilies||{}),s=null,a=null,o=0;o<e.length;++o)if(i[(s=av(e[o])).family]&&(s.family=i[s.family]),t.hasOwnProperty(s.family)){a=t[s.family];break}if(!(a=a||t[r]))throw new Error("Could not find a font-family for the rule '"+Dw(s)+"' and default family '"+r+"'.");if(a=function(l,u){if(u[l])return u[l];var h=sv[l],p=h<=sv.normal?-1:1,g=Rw(u,xN,h,p);if(!g)throw new Error("Could not find a matching font-stretch value for "+l);return g}(s.stretch,a),a=function(l,u){if(u[l])return u[l];for(var h=bN[l],p=0;p<h.length;++p)if(u[h[p]])return u[h[p]];throw new Error("Could not find a matching font-style for "+l)}(s.style,a),!(a=function(l,u){if(u[l])return u[l];if(l===400&&u[500])return u[500];if(l===500&&u[400])return u[400];var h=cD[l],p=Rw(u,SN,h,l<400?-1:1);if(!p)throw new Error("Could not find a matching font-weight for value "+l);return p}(s.weight,a)))throw new Error("Failed to resolve a font for the rule '"+Dw(s)+"'.");return a}function Fw(t){return t.trimLeft()}function fD(t,e){for(var n=0;n<t.length;){if(t.charAt(n)===e)return[t.substring(0,n),t.substring(n+1)];n+=1}return null}function pD(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],t.substring(e[0].length)]}var Kf,Ow,Mw,b1=["times"];(function(t){var e,n,r,i,s,a,o,l,u,h=function(O){return O=O||{},this.isStrokeTransparent=O.isStrokeTransparent||!1,this.strokeOpacity=O.strokeOpacity||1,this.strokeStyle=O.strokeStyle||"#000000",this.fillStyle=O.fillStyle||"#000000",this.isFillTransparent=O.isFillTransparent||!1,this.fillOpacity=O.fillOpacity||1,this.font=O.font||"10px sans-serif",this.textBaseline=O.textBaseline||"alphabetic",this.textAlign=O.textAlign||"left",this.lineWidth=O.lineWidth||1,this.lineJoin=O.lineJoin||"miter",this.lineCap=O.lineCap||"butt",this.path=O.path||[],this.transform=O.transform!==void 0?O.transform.clone():new l,this.globalCompositeOperation=O.globalCompositeOperation||"normal",this.globalAlpha=O.globalAlpha||1,this.clip_path=O.clip_path||[],this.currentPoint=O.currentPoint||new a,this.miterLimit=O.miterLimit||10,this.lastPoint=O.lastPoint||new a,this.lineDashOffset=O.lineDashOffset||0,this.lineDash=O.lineDash||[],this.margin=O.margin||[0,0,0,0],this.prevPageLastElemOffset=O.prevPageLastElemOffset||0,this.ignoreClearRect=typeof O.ignoreClearRect!="boolean"||O.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new p(this),e=this.internal.f2,n=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,a=this.internal.Point,o=this.internal.Rectangle,l=this.internal.Matrix,u=new h}]);var p=function(O){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var Q=O;Object.defineProperty(this,"pdf",{get:function(){return Q}});var J=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return J},set:function(Se){J=!!Se}});var W=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return W},set:function(Se){W=!!Se}});var se=0;Object.defineProperty(this,"posX",{get:function(){return se},set:function(Se){isNaN(Se)||(se=Se)}});var le=0;Object.defineProperty(this,"posY",{get:function(){return le},set:function(Se){isNaN(Se)||(le=Se)}}),Object.defineProperty(this,"margin",{get:function(){return u.margin},set:function(Se){var ae;typeof Se=="number"?ae=[Se,Se,Se,Se]:((ae=new Array(4))[0]=Se[0],ae[1]=Se.length>=2?Se[1]:ae[0],ae[2]=Se.length>=3?Se[2]:ae[0],ae[3]=Se.length>=4?Se[3]:ae[1]),u.margin=ae}});var fe=!1;Object.defineProperty(this,"autoPaging",{get:function(){return fe},set:function(Se){fe=Se}});var pe=0;Object.defineProperty(this,"lastBreak",{get:function(){return pe},set:function(Se){pe=Se}});var ke=[];Object.defineProperty(this,"pageBreaks",{get:function(){return ke},set:function(Se){ke=Se}}),Object.defineProperty(this,"ctx",{get:function(){return u},set:function(Se){Se instanceof h&&(u=Se)}}),Object.defineProperty(this,"path",{get:function(){return u.path},set:function(Se){u.path=Se}});var Ie=[];Object.defineProperty(this,"ctxStack",{get:function(){return Ie},set:function(Se){Ie=Se}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Se){var ae;ae=g(Se),this.ctx.fillStyle=ae.style,this.ctx.isFillTransparent=ae.a===0,this.ctx.fillOpacity=ae.a,this.pdf.setFillColor(ae.r,ae.g,ae.b,{a:ae.a}),this.pdf.setTextColor(ae.r,ae.g,ae.b,{a:ae.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Se){var ae=g(Se);this.ctx.strokeStyle=ae.style,this.ctx.isStrokeTransparent=ae.a===0,this.ctx.strokeOpacity=ae.a,ae.a===0?this.pdf.setDrawColor(255,255,255):(ae.a,this.pdf.setDrawColor(ae.r,ae.g,ae.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Se){["butt","round","square"].indexOf(Se)!==-1&&(this.ctx.lineCap=Se,this.pdf.setLineCap(Se))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Se){isNaN(Se)||(this.ctx.lineWidth=Se,this.pdf.setLineWidth(Se))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Se){["bevel","round","miter"].indexOf(Se)!==-1&&(this.ctx.lineJoin=Se,this.pdf.setLineJoin(Se))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Se){isNaN(Se)||(this.ctx.miterLimit=Se,this.pdf.setMiterLimit(Se))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Se){this.ctx.textBaseline=Se}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Se){["right","end","center","left","start"].indexOf(Se)!==-1&&(this.ctx.textAlign=Se)}});var je=null;function Ke(Se,ae){if(je===null){var Ge=function(Fe){var ce=[];return Object.keys(Fe).forEach(function(Te){Fe[Te].forEach(function(Me){var Be=null;switch(Me){case"bold":Be={family:Te,weight:"bold"};break;case"italic":Be={family:Te,style:"italic"};break;case"bolditalic":Be={family:Te,weight:"bold",style:"italic"};break;case"":case"normal":Be={family:Te}}Be!==null&&(Be.ref={name:Te,style:Me},ce.push(Be))})}),ce}(Se.getFontList());je=function(Fe){for(var ce={},Te=0;Te<Fe.length;++Te){var Me=av(Fe[Te]),Be=Me.family,$e=Me.stretch,Ye=Me.style,at=Me.weight;ce[Be]=ce[Be]||{},ce[Be][$e]=ce[Be][$e]||{},ce[Be][$e][Ye]=ce[Be][$e][Ye]||{},ce[Be][$e][Ye][at]=Me}return ce}(Ge.concat(ae))}return je}var Ze=null;Object.defineProperty(this,"fontFaces",{get:function(){return Ze},set:function(Se){je=null,Ze=Se}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Se){var ae;if(this.ctx.font=Se,(ae=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(Se))!==null){var Ge=ae[1],Fe=(ae[2],ae[3]),ce=ae[4],Te=(ae[5],ae[6]),Me=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(ce)[2];ce=Math.floor(Me==="px"?parseFloat(ce)*this.pdf.internal.scaleFactor:Me==="em"?parseFloat(ce)*this.pdf.getFontSize():parseFloat(ce)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(ce);var Be=function(ot){var ut,ze,we=[],He=ot.trim();if(He==="")return b1;if(He in jw)return[jw[He]];for(;He!=="";){switch(ze=null,ut=(He=Fw(He)).charAt(0)){case'"':case"'":ze=fD(He.substring(1),ut);break;default:ze=pD(He)}if(ze===null||(we.push(ze[0]),(He=Fw(ze[1]))!==""&&He.charAt(0)!==","))return b1;He=He.replace(/^,/,"")}return we}(Te);if(this.fontFaces){var $e=dD(Ke(this.pdf,this.fontFaces),Be.map(function(ot){return{family:ot,stretch:"normal",weight:Fe,style:Ge}}));this.pdf.setFont($e.ref.name,$e.ref.style)}else{var Ye="";(Fe==="bold"||parseInt(Fe,10)>=700||Ge==="bold")&&(Ye="bold"),Ge==="italic"&&(Ye+="italic"),Ye.length===0&&(Ye="normal");for(var at="",tt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},ct=0;ct<Be.length;ct++){if(this.pdf.internal.getFont(Be[ct],Ye,{noFallback:!0,disableWarning:!0})!==void 0){at=Be[ct];break}if(Ye==="bolditalic"&&this.pdf.internal.getFont(Be[ct],"bold",{noFallback:!0,disableWarning:!0})!==void 0)at=Be[ct],Ye="bold";else if(this.pdf.internal.getFont(Be[ct],"normal",{noFallback:!0,disableWarning:!0})!==void 0){at=Be[ct],Ye="normal";break}}if(at===""){for(var dt=0;dt<Be.length;dt++)if(tt[Be[dt]]){at=tt[Be[dt]];break}}at=at===""?"Times":at,this.pdf.setFont(at,Ye)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Se){this.ctx.globalCompositeOperation=Se}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Se){this.ctx.globalAlpha=Se}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Se){this.ctx.lineDashOffset=Se,_e.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Se){this.ctx.lineDash=Se,_e.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Se){this.ctx.ignoreClearRect=!!Se}})};p.prototype.setLineDash=function(O){this.lineDash=O},p.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},p.prototype.fill=function(){F.call(this,"fill",!1)},p.prototype.stroke=function(){F.call(this,"stroke",!1)},p.prototype.beginPath=function(){this.path=[{type:"begin"}]},p.prototype.moveTo=function(O,Q){if(isNaN(O)||isNaN(Q))throw tn.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var J=this.ctx.transform.applyToPoint(new a(O,Q));this.path.push({type:"mt",x:J.x,y:J.y}),this.ctx.lastPoint=new a(O,Q)},p.prototype.closePath=function(){var O=new a(0,0),Q=0;for(Q=this.path.length-1;Q!==-1;Q--)if(this.path[Q].type==="begin"&&Gt(this.path[Q+1])==="object"&&typeof this.path[Q+1].x=="number"){O=new a(this.path[Q+1].x,this.path[Q+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new a(O.x,O.y)},p.prototype.lineTo=function(O,Q){if(isNaN(O)||isNaN(Q))throw tn.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var J=this.ctx.transform.applyToPoint(new a(O,Q));this.path.push({type:"lt",x:J.x,y:J.y}),this.ctx.lastPoint=new a(J.x,J.y)},p.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),F.call(this,null,!0)},p.prototype.quadraticCurveTo=function(O,Q,J,W){if(isNaN(J)||isNaN(W)||isNaN(O)||isNaN(Q))throw tn.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var se=this.ctx.transform.applyToPoint(new a(J,W)),le=this.ctx.transform.applyToPoint(new a(O,Q));this.path.push({type:"qct",x1:le.x,y1:le.y,x:se.x,y:se.y}),this.ctx.lastPoint=new a(se.x,se.y)},p.prototype.bezierCurveTo=function(O,Q,J,W,se,le){if(isNaN(se)||isNaN(le)||isNaN(O)||isNaN(Q)||isNaN(J)||isNaN(W))throw tn.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var fe=this.ctx.transform.applyToPoint(new a(se,le)),pe=this.ctx.transform.applyToPoint(new a(O,Q)),ke=this.ctx.transform.applyToPoint(new a(J,W));this.path.push({type:"bct",x1:pe.x,y1:pe.y,x2:ke.x,y2:ke.y,x:fe.x,y:fe.y}),this.ctx.lastPoint=new a(fe.x,fe.y)},p.prototype.arc=function(O,Q,J,W,se,le){if(isNaN(O)||isNaN(Q)||isNaN(J)||isNaN(W)||isNaN(se))throw tn.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(le=!!le,!this.ctx.transform.isIdentity){var fe=this.ctx.transform.applyToPoint(new a(O,Q));O=fe.x,Q=fe.y;var pe=this.ctx.transform.applyToPoint(new a(0,J)),ke=this.ctx.transform.applyToPoint(new a(0,0));J=Math.sqrt(Math.pow(pe.x-ke.x,2)+Math.pow(pe.y-ke.y,2))}Math.abs(se-W)>=2*Math.PI&&(W=0,se=2*Math.PI),this.path.push({type:"arc",x:O,y:Q,radius:J,startAngle:W,endAngle:se,counterclockwise:le})},p.prototype.arcTo=function(O,Q,J,W,se){throw new Error("arcTo not implemented.")},p.prototype.rect=function(O,Q,J,W){if(isNaN(O)||isNaN(Q)||isNaN(J)||isNaN(W))throw tn.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(O,Q),this.lineTo(O+J,Q),this.lineTo(O+J,Q+W),this.lineTo(O,Q+W),this.lineTo(O,Q),this.lineTo(O+J,Q),this.lineTo(O,Q)},p.prototype.fillRect=function(O,Q,J,W){if(isNaN(O)||isNaN(Q)||isNaN(J)||isNaN(W))throw tn.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!m.call(this)){var se={};this.lineCap!=="butt"&&(se.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(se.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(O,Q,J,W),this.fill(),se.hasOwnProperty("lineCap")&&(this.lineCap=se.lineCap),se.hasOwnProperty("lineJoin")&&(this.lineJoin=se.lineJoin)}},p.prototype.strokeRect=function(O,Q,J,W){if(isNaN(O)||isNaN(Q)||isNaN(J)||isNaN(W))throw tn.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");b.call(this)||(this.beginPath(),this.rect(O,Q,J,W),this.stroke())},p.prototype.clearRect=function(O,Q,J,W){if(isNaN(O)||isNaN(Q)||isNaN(J)||isNaN(W))throw tn.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(O,Q,J,W))},p.prototype.save=function(O){O=typeof O!="boolean"||O;for(var Q=this.pdf.internal.getCurrentPageInfo().pageNumber,J=0;J<this.pdf.internal.getNumberOfPages();J++)this.pdf.setPage(J+1),this.pdf.internal.out("q");if(this.pdf.setPage(Q),O){this.ctx.fontSize=this.pdf.internal.getFontSize();var W=new h(this.ctx);this.ctxStack.push(this.ctx),this.ctx=W}},p.prototype.restore=function(O){O=typeof O!="boolean"||O;for(var Q=this.pdf.internal.getCurrentPageInfo().pageNumber,J=0;J<this.pdf.internal.getNumberOfPages();J++)this.pdf.setPage(J+1),this.pdf.internal.out("Q");this.pdf.setPage(Q),O&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},p.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var g=function(O){var Q,J,W,se;if(O.isCanvasGradient===!0&&(O=O.getColor()),!O)return{r:0,g:0,b:0,a:0,style:O};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(O))Q=0,J=0,W=0,se=0;else{var le=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(O);if(le!==null)Q=parseInt(le[1]),J=parseInt(le[2]),W=parseInt(le[3]),se=1;else if((le=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(O))!==null)Q=parseInt(le[1]),J=parseInt(le[2]),W=parseInt(le[3]),se=parseFloat(le[4]);else{if(se=1,typeof O=="string"&&O.charAt(0)!=="#"){var fe=new pN(O);O=fe.ok?fe.toHex():"#000000"}O.length===4?(Q=O.substring(1,2),Q+=Q,J=O.substring(2,3),J+=J,W=O.substring(3,4),W+=W):(Q=O.substring(1,3),J=O.substring(3,5),W=O.substring(5,7)),Q=parseInt(Q,16),J=parseInt(J,16),W=parseInt(W,16)}}return{r:Q,g:J,b:W,a:se,style:O}},m=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},b=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};p.prototype.fillText=function(O,Q,J,W){if(isNaN(Q)||isNaN(J)||typeof O!="string")throw tn.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(W=isNaN(W)?void 0:W,!m.call(this)){var se=z(this.ctx.transform.rotation),le=this.ctx.transform.scaleX;I.call(this,{text:O,x:Q,y:J,scale:le,angle:se,align:this.textAlign,maxWidth:W})}},p.prototype.strokeText=function(O,Q,J,W){if(isNaN(Q)||isNaN(J)||typeof O!="string")throw tn.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!b.call(this)){W=isNaN(W)?void 0:W;var se=z(this.ctx.transform.rotation),le=this.ctx.transform.scaleX;I.call(this,{text:O,x:Q,y:J,scale:le,renderingMode:"stroke",angle:se,align:this.textAlign,maxWidth:W})}},p.prototype.measureText=function(O){if(typeof O!="string")throw tn.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var Q=this.pdf,J=this.pdf.internal.scaleFactor,W=Q.internal.getFontSize(),se=Q.getStringUnitWidth(O)*W/Q.internal.scaleFactor,le=function(fe){var pe=(fe=fe||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return pe}}),this};return new le({width:se*=Math.round(96*J/72*1e4)/1e4})},p.prototype.scale=function(O,Q){if(isNaN(O)||isNaN(Q))throw tn.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var J=new l(O,0,0,Q,0,0);this.ctx.transform=this.ctx.transform.multiply(J)},p.prototype.rotate=function(O){if(isNaN(O))throw tn.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var Q=new l(Math.cos(O),Math.sin(O),-Math.sin(O),Math.cos(O),0,0);this.ctx.transform=this.ctx.transform.multiply(Q)},p.prototype.translate=function(O,Q){if(isNaN(O)||isNaN(Q))throw tn.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var J=new l(1,0,0,1,O,Q);this.ctx.transform=this.ctx.transform.multiply(J)},p.prototype.transform=function(O,Q,J,W,se,le){if(isNaN(O)||isNaN(Q)||isNaN(J)||isNaN(W)||isNaN(se)||isNaN(le))throw tn.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var fe=new l(O,Q,J,W,se,le);this.ctx.transform=this.ctx.transform.multiply(fe)},p.prototype.setTransform=function(O,Q,J,W,se,le){O=isNaN(O)?1:O,Q=isNaN(Q)?0:Q,J=isNaN(J)?0:J,W=isNaN(W)?1:W,se=isNaN(se)?0:se,le=isNaN(le)?0:le,this.ctx.transform=new l(O,Q,J,W,se,le)};var x=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};p.prototype.drawImage=function(O,Q,J,W,se,le,fe,pe,ke){var Ie=this.pdf.getImageProperties(O),je=1,Ke=1,Ze=1,Se=1;W!==void 0&&pe!==void 0&&(Ze=pe/W,Se=ke/se,je=Ie.width/W*pe/W,Ke=Ie.height/se*ke/se),le===void 0&&(le=Q,fe=J,Q=0,J=0),W!==void 0&&pe===void 0&&(pe=W,ke=se),W===void 0&&pe===void 0&&(pe=Ie.width,ke=Ie.height);for(var ae,Ge=this.ctx.transform.decompose(),Fe=z(Ge.rotate.shx),ce=new l,Te=(ce=(ce=(ce=ce.multiply(Ge.translate)).multiply(Ge.skew)).multiply(Ge.scale)).applyToRectangle(new o(le-Q*Ze,fe-J*Se,W*je,se*Ke)),Me=k.call(this,Te),Be=[],$e=0;$e<Me.length;$e+=1)Be.indexOf(Me[$e])===-1&&Be.push(Me[$e]);if(C(Be),this.autoPaging)for(var Ye=Be[0],at=Be[Be.length-1],tt=Ye;tt<at+1;tt++){this.pdf.setPage(tt);var ct=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],dt=tt===1?this.posY+this.margin[0]:this.margin[0],ot=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ut=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],ze=tt===1?0:ot+(tt-2)*ut;if(this.ctx.clip_path.length!==0){var we=this.path;ae=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=A(ae,this.posX+this.margin[3],-ze+dt+this.ctx.prevPageLastElemOffset),Y.call(this,"fill",!0),this.path=we}var He=JSON.parse(JSON.stringify(Te));He=A([He],this.posX+this.margin[3],-ze+dt+this.ctx.prevPageLastElemOffset)[0];var mt=(tt>Ye||tt<at)&&x.call(this);mt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ct,ut,null).clip().discardPath()),this.pdf.addImage(O,"JPEG",He.x,He.y,He.w,He.h,null,null,Fe),mt&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(O,"JPEG",Te.x,Te.y,Te.w,Te.h,null,null,Fe)};var k=function(O,Q,J){var W=[];Q=Q||this.pdf.internal.pageSize.width,J=J||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var se=this.posY+this.ctx.prevPageLastElemOffset;switch(O.type){default:case"mt":case"lt":W.push(Math.floor((O.y+se)/J)+1);break;case"arc":W.push(Math.floor((O.y+se-O.radius)/J)+1),W.push(Math.floor((O.y+se+O.radius)/J)+1);break;case"qct":var le=H(this.ctx.lastPoint.x,this.ctx.lastPoint.y,O.x1,O.y1,O.x,O.y);W.push(Math.floor((le.y+se)/J)+1),W.push(Math.floor((le.y+le.h+se)/J)+1);break;case"bct":var fe=ne(this.ctx.lastPoint.x,this.ctx.lastPoint.y,O.x1,O.y1,O.x2,O.y2,O.x,O.y);W.push(Math.floor((fe.y+se)/J)+1),W.push(Math.floor((fe.y+fe.h+se)/J)+1);break;case"rect":W.push(Math.floor((O.y+se)/J)+1),W.push(Math.floor((O.y+O.h+se)/J)+1)}for(var pe=0;pe<W.length;pe+=1)for(;this.pdf.internal.getNumberOfPages()<W[pe];)_.call(this);return W},_=function(){var O=this.fillStyle,Q=this.strokeStyle,J=this.font,W=this.lineCap,se=this.lineWidth,le=this.lineJoin;this.pdf.addPage(),this.fillStyle=O,this.strokeStyle=Q,this.font=J,this.lineCap=W,this.lineWidth=se,this.lineJoin=le},A=function(O,Q,J){for(var W=0;W<O.length;W++)switch(O[W].type){case"bct":O[W].x2+=Q,O[W].y2+=J;case"qct":O[W].x1+=Q,O[W].y1+=J;case"mt":case"lt":case"arc":default:O[W].x+=Q,O[W].y+=J}return O},C=function(O){return O.sort(function(Q,J){return Q-J})},F=function(O,Q){for(var J,W,se=this.fillStyle,le=this.strokeStyle,fe=this.lineCap,pe=this.lineWidth,ke=Math.abs(pe*this.ctx.transform.scaleX),Ie=this.lineJoin,je=JSON.parse(JSON.stringify(this.path)),Ke=JSON.parse(JSON.stringify(this.path)),Ze=[],Se=0;Se<Ke.length;Se++)if(Ke[Se].x!==void 0)for(var ae=k.call(this,Ke[Se]),Ge=0;Ge<ae.length;Ge+=1)Ze.indexOf(ae[Ge])===-1&&Ze.push(ae[Ge]);for(var Fe=0;Fe<Ze.length;Fe++)for(;this.pdf.internal.getNumberOfPages()<Ze[Fe];)_.call(this);if(C(Ze),this.autoPaging)for(var ce=Ze[0],Te=Ze[Ze.length-1],Me=ce;Me<Te+1;Me++){this.pdf.setPage(Me),this.fillStyle=se,this.strokeStyle=le,this.lineCap=fe,this.lineWidth=ke,this.lineJoin=Ie;var Be=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],$e=Me===1?this.posY+this.margin[0]:this.margin[0],Ye=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],at=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],tt=Me===1?0:Ye+(Me-2)*at;if(this.ctx.clip_path.length!==0){var ct=this.path;J=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=A(J,this.posX+this.margin[3],-tt+$e+this.ctx.prevPageLastElemOffset),Y.call(this,O,!0),this.path=ct}if(W=JSON.parse(JSON.stringify(je)),this.path=A(W,this.posX+this.margin[3],-tt+$e+this.ctx.prevPageLastElemOffset),Q===!1||Me===0){var dt=(Me>ce||Me<Te)&&x.call(this);dt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Be,at,null).clip().discardPath()),Y.call(this,O,Q),dt&&this.pdf.restoreGraphicsState()}this.lineWidth=pe}else this.lineWidth=ke,Y.call(this,O,Q),this.lineWidth=pe;this.path=je},Y=function(O,Q){if((O!=="stroke"||Q||!b.call(this))&&(O==="stroke"||Q||!m.call(this))){for(var J,W,se=[],le=this.path,fe=0;fe<le.length;fe++){var pe=le[fe];switch(pe.type){case"begin":se.push({begin:!0});break;case"close":se.push({close:!0});break;case"mt":se.push({start:pe,deltas:[],abs:[]});break;case"lt":var ke=se.length;if(le[fe-1]&&!isNaN(le[fe-1].x)&&(J=[pe.x-le[fe-1].x,pe.y-le[fe-1].y],ke>0)){for(;ke>=0;ke--)if(se[ke-1].close!==!0&&se[ke-1].begin!==!0){se[ke-1].deltas.push(J),se[ke-1].abs.push(pe);break}}break;case"bct":J=[pe.x1-le[fe-1].x,pe.y1-le[fe-1].y,pe.x2-le[fe-1].x,pe.y2-le[fe-1].y,pe.x-le[fe-1].x,pe.y-le[fe-1].y],se[se.length-1].deltas.push(J);break;case"qct":var Ie=le[fe-1].x+2/3*(pe.x1-le[fe-1].x),je=le[fe-1].y+2/3*(pe.y1-le[fe-1].y),Ke=pe.x+2/3*(pe.x1-pe.x),Ze=pe.y+2/3*(pe.y1-pe.y),Se=pe.x,ae=pe.y;J=[Ie-le[fe-1].x,je-le[fe-1].y,Ke-le[fe-1].x,Ze-le[fe-1].y,Se-le[fe-1].x,ae-le[fe-1].y],se[se.length-1].deltas.push(J);break;case"arc":se.push({deltas:[],abs:[],arc:!0}),Array.isArray(se[se.length-1].abs)&&se[se.length-1].abs.push(pe)}}W=Q?null:O==="stroke"?"stroke":"fill";for(var Ge=!1,Fe=0;Fe<se.length;Fe++)if(se[Fe].arc)for(var ce=se[Fe].abs,Te=0;Te<ce.length;Te++){var Me=ce[Te];Me.type==="arc"?y.call(this,Me.x,Me.y,Me.radius,Me.startAngle,Me.endAngle,Me.counterclockwise,void 0,Q,!Ge):P.call(this,Me.x,Me.y),Ge=!0}else if(se[Fe].close===!0)this.pdf.internal.out("h"),Ge=!1;else if(se[Fe].begin!==!0){var Be=se[Fe].start.x,$e=se[Fe].start.y;M.call(this,se[Fe].deltas,Be,$e),Ge=!0}W&&S.call(this,W),Q&&R.call(this)}},B=function(O){var Q=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,J=Q*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return O-J;case"top":return O+Q-J;case"hanging":return O+Q-2*J;case"middle":return O+Q/2-J;case"ideographic":return O;case"alphabetic":default:return O}},L=function(O){return O+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};p.prototype.createLinearGradient=function(){var O=function(){};return O.colorStops=[],O.addColorStop=function(Q,J){this.colorStops.push([Q,J])},O.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},O.isCanvasGradient=!0,O},p.prototype.createPattern=function(){return this.createLinearGradient()},p.prototype.createRadialGradient=function(){return this.createLinearGradient()};var y=function(O,Q,J,W,se,le,fe,pe,ke){for(var Ie=V.call(this,J,W,se,le),je=0;je<Ie.length;je++){var Ke=Ie[je];je===0&&(ke?E.call(this,Ke.x1+O,Ke.y1+Q):P.call(this,Ke.x1+O,Ke.y1+Q)),te.call(this,O,Q,Ke.x2,Ke.y2,Ke.x3,Ke.y3,Ke.x4,Ke.y4)}pe?R.call(this):S.call(this,fe)},S=function(O){switch(O){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},R=function(){this.pdf.clip(),this.pdf.discardPath()},E=function(O,Q){this.pdf.internal.out(n(O)+" "+r(Q)+" m")},I=function(O){var Q;switch(O.align){case"right":case"end":Q="right";break;case"center":Q="center";break;case"left":case"start":default:Q="left"}var J=this.pdf.getTextDimensions(O.text),W=B.call(this,O.y),se=L.call(this,W)-J.h,le=this.ctx.transform.applyToPoint(new a(O.x,W)),fe=this.ctx.transform.decompose(),pe=new l;pe=(pe=(pe=pe.multiply(fe.translate)).multiply(fe.skew)).multiply(fe.scale);for(var ke,Ie,je,Ke=this.ctx.transform.applyToRectangle(new o(O.x,W,J.w,J.h)),Ze=pe.applyToRectangle(new o(O.x,se,J.w,J.h)),Se=k.call(this,Ze),ae=[],Ge=0;Ge<Se.length;Ge+=1)ae.indexOf(Se[Ge])===-1&&ae.push(Se[Ge]);if(C(ae),this.autoPaging)for(var Fe=ae[0],ce=ae[ae.length-1],Te=Fe;Te<ce+1;Te++){this.pdf.setPage(Te);var Me=Te===1?this.posY+this.margin[0]:this.margin[0],Be=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],$e=this.pdf.internal.pageSize.height-this.margin[2],Ye=$e-this.margin[0],at=this.pdf.internal.pageSize.width-this.margin[1],tt=at-this.margin[3],ct=Te===1?0:Be+(Te-2)*Ye;if(this.ctx.clip_path.length!==0){var dt=this.path;ke=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=A(ke,this.posX+this.margin[3],-1*ct+Me),Y.call(this,"fill",!0),this.path=dt}var ot=A([JSON.parse(JSON.stringify(Ze))],this.posX+this.margin[3],-ct+Me+this.ctx.prevPageLastElemOffset)[0];O.scale>=.01&&(Ie=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Ie*O.scale),je=this.lineWidth,this.lineWidth=je*O.scale);var ut=this.autoPaging!=="text";if(ut||ot.y+ot.h<=$e){if(ut||ot.y>=Me&&ot.x<=at){var ze=ut?O.text:this.pdf.splitTextToSize(O.text,O.maxWidth||at-ot.x)[0],we=A([JSON.parse(JSON.stringify(Ke))],this.posX+this.margin[3],-ct+Me+this.ctx.prevPageLastElemOffset)[0],He=ut&&(Te>Fe||Te<ce)&&x.call(this);He&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],tt,Ye,null).clip().discardPath()),this.pdf.text(ze,we.x,we.y,{angle:O.angle,align:Q,renderingMode:O.renderingMode}),He&&this.pdf.restoreGraphicsState()}}else ot.y<$e&&(this.ctx.prevPageLastElemOffset+=$e-ot.y);O.scale>=.01&&(this.pdf.setFontSize(Ie),this.lineWidth=je)}else O.scale>=.01&&(Ie=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Ie*O.scale),je=this.lineWidth,this.lineWidth=je*O.scale),this.pdf.text(O.text,le.x+this.posX,le.y+this.posY,{angle:O.angle,align:Q,renderingMode:O.renderingMode,maxWidth:O.maxWidth}),O.scale>=.01&&(this.pdf.setFontSize(Ie),this.lineWidth=je)},P=function(O,Q,J,W){J=J||0,W=W||0,this.pdf.internal.out(n(O+J)+" "+r(Q+W)+" l")},M=function(O,Q,J){return this.pdf.lines(O,Q,J,null,null)},te=function(O,Q,J,W,se,le,fe,pe){this.pdf.internal.out([e(i(J+O)),e(s(W+Q)),e(i(se+O)),e(s(le+Q)),e(i(fe+O)),e(s(pe+Q)),"c"].join(" "))},V=function(O,Q,J,W){for(var se=2*Math.PI,le=Math.PI/2;Q>J;)Q-=se;var fe=Math.abs(J-Q);fe<se&&W&&(fe=se-fe);for(var pe=[],ke=W?-1:1,Ie=Q;fe>1e-5;){var je=Ie+ke*Math.min(fe,le);pe.push(U.call(this,O,Ie,je)),fe-=Math.abs(je-Ie),Ie=je}return pe},U=function(O,Q,J){var W=(J-Q)/2,se=O*Math.cos(W),le=O*Math.sin(W),fe=se,pe=-le,ke=fe*fe+pe*pe,Ie=ke+fe*se+pe*le,je=4/3*(Math.sqrt(2*ke*Ie)-Ie)/(fe*le-pe*se),Ke=fe-je*pe,Ze=pe+je*fe,Se=Ke,ae=-Ze,Ge=W+Q,Fe=Math.cos(Ge),ce=Math.sin(Ge);return{x1:O*Math.cos(Q),y1:O*Math.sin(Q),x2:Ke*Fe-Ze*ce,y2:Ke*ce+Ze*Fe,x3:Se*Fe-ae*ce,y3:Se*ce+ae*Fe,x4:O*Math.cos(J),y4:O*Math.sin(J)}},z=function(O){return 180*O/Math.PI},H=function(O,Q,J,W,se,le){var fe=O+.5*(J-O),pe=Q+.5*(W-Q),ke=se+.5*(J-se),Ie=le+.5*(W-le),je=Math.min(O,se,fe,ke),Ke=Math.max(O,se,fe,ke),Ze=Math.min(Q,le,pe,Ie),Se=Math.max(Q,le,pe,Ie);return new o(je,Ze,Ke-je,Se-Ze)},ne=function(O,Q,J,W,se,le,fe,pe){var ke,Ie,je,Ke,Ze,Se,ae,Ge,Fe,ce,Te,Me,Be,$e,Ye=J-O,at=W-Q,tt=se-J,ct=le-W,dt=fe-se,ot=pe-le;for(Ie=0;Ie<41;Ie++)Fe=(ae=(je=O+(ke=Ie/40)*Ye)+ke*((Ze=J+ke*tt)-je))+ke*(Ze+ke*(se+ke*dt-Ze)-ae),ce=(Ge=(Ke=Q+ke*at)+ke*((Se=W+ke*ct)-Ke))+ke*(Se+ke*(le+ke*ot-Se)-Ge),Ie==0?(Te=Fe,Me=ce,Be=Fe,$e=ce):(Te=Math.min(Te,Fe),Me=Math.min(Me,ce),Be=Math.max(Be,Fe),$e=Math.max($e,ce));return new o(Math.round(Te),Math.round(Me),Math.round(Be-Te),Math.round($e-Me))},_e=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var O,Q,J=(O=this.ctx.lineDash,Q=this.ctx.lineDashOffset,JSON.stringify({lineDash:O,lineDashOffset:Q}));this.prevLineDash!==J&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=J)}}})(gt.API),function(t){var e=function(s){var a,o,l,u,h,p,g,m,b,x;for(o=[],l=0,u=(s+=a="\0\0\0\0".slice(s.length%4||4)).length;u>l;l+=4)(h=(s.charCodeAt(l)<<24)+(s.charCodeAt(l+1)<<16)+(s.charCodeAt(l+2)<<8)+s.charCodeAt(l+3))!==0?(p=(h=((h=((h=((h=(h-(x=h%85))/85)-(b=h%85))/85)-(m=h%85))/85)-(g=h%85))/85)%85,o.push(p+33,g+33,m+33,b+33,x+33)):o.push(122);return function(k,_){for(var A=_;A>0;A--)k.pop()}(o,a.length),String.fromCharCode.apply(String,o)+"~>"},n=function(s){var a,o,l,u,h,p=String,g="length",m=255,b="charCodeAt",x="slice",k="replace";for(s[x](-2),s=s[x](0,-2)[k](/\s/g,"")[k]("z","!!!!!"),l=[],u=0,h=(s+=a="uuuuu"[x](s[g]%5||5))[g];h>u;u+=5)o=52200625*(s[b](u)-33)+614125*(s[b](u+1)-33)+7225*(s[b](u+2)-33)+85*(s[b](u+3)-33)+(s[b](u+4)-33),l.push(m&o>>24,m&o>>16,m&o>>8,m&o);return function(_,A){for(var C=A;C>0;C--)_.pop()}(l,a[g]),p.fromCharCode.apply(p,l)},r=function(s){var a=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((s=s.replace(/\s/g,"")).indexOf(">")!==-1&&(s=s.substr(0,s.indexOf(">"))),s.length%2&&(s+="0"),a.test(s)===!1)return"";for(var o="",l=0;l<s.length;l+=2)o+=String.fromCharCode("0x"+(s[l]+s[l+1]));return o},i=function(s){for(var a=new Uint8Array(s.length),o=s.length;o--;)a[o]=s.charCodeAt(o);return s=(a=ev(a)).reduce(function(l,u){return l+String.fromCharCode(u)},"")};t.processDataByFilters=function(s,a){var o=0,l=s||"",u=[];for(typeof(a=a||[])=="string"&&(a=[a]),o=0;o<a.length;o+=1)switch(a[o]){case"ASCII85Decode":case"/ASCII85Decode":l=n(l),u.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":l=e(l),u.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":l=r(l),u.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":l=l.split("").map(function(h){return("0"+h.charCodeAt().toString(16)).slice(-2)}).join("")+">",u.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":l=i(l),u.push("/FlateDecode");break;default:throw new Error('The filter: "'+a[o]+'" is not implemented')}return{data:l,reverseChain:u.reverse().join(" ")}}}(gt.API),function(t){t.loadFile=function(e,n,r){return function(i,s,a){s=s!==!1,a=typeof a=="function"?a:function(){};var o=void 0;try{o=function(l,u,h){var p=new XMLHttpRequest,g=0,m=function(b){var x=b.length,k=[],_=String.fromCharCode;for(g=0;g<x;g+=1)k.push(_(255&b.charCodeAt(g)));return k.join("")};if(p.open("GET",l,!u),p.overrideMimeType("text/plain; charset=x-user-defined"),u===!1&&(p.onload=function(){p.status===200?h(m(this.responseText)):h(void 0)}),p.send(null),u&&p.status===200)return m(p.responseText)}(i,s,a)}catch{}return o}(e,n,r)},t.loadImageFile=t.loadFile}(gt.API),function(t){function e(){return(vt.html2canvas?Promise.resolve(vt.html2canvas):Q0(()=>import("./html2canvas.esm-CBrSDip1.js"),[])).catch(function(a){return Promise.reject(new Error("Could not load html2canvas: "+a))}).then(function(a){return a.default?a.default:a})}function n(){return(vt.DOMPurify?Promise.resolve(vt.DOMPurify):Q0(()=>import("./purify.es-C_uT9hQ1.js"),[])).catch(function(a){return Promise.reject(new Error("Could not load dompurify: "+a))}).then(function(a){return a.default?a.default:a})}var r=function(a){var o=Gt(a);return o==="undefined"?"undefined":o==="string"||a instanceof String?"string":o==="number"||a instanceof Number?"number":o==="function"||a instanceof Function?"function":a&&a.constructor===Array?"array":a&&a.nodeType===1?"element":o==="object"?"object":"unknown"},i=function(a,o){var l=document.createElement(a);for(var u in o.className&&(l.className=o.className),o.innerHTML&&o.dompurify&&(l.innerHTML=o.dompurify.sanitize(o.innerHTML)),o.style)l.style[u]=o.style[u];return l},s=function a(o){var l=Object.assign(a.convert(Promise.resolve()),JSON.parse(JSON.stringify(a.template))),u=a.convert(Promise.resolve(),l);return u=(u=u.setProgress(1,a,1,[a])).set(o)};(s.prototype=Object.create(Promise.prototype)).constructor=s,s.convert=function(a,o){return a.__proto__=o||s.prototype,a},s.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},s.prototype.from=function(a,o){return this.then(function(){switch(o=o||function(l){switch(r(l)){case"string":return"string";case"element":return l.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(a)){case"string":return this.then(n).then(function(l){return this.set({src:i("div",{innerHTML:a,dompurify:l})})});case"element":return this.set({src:a});case"canvas":return this.set({canvas:a});case"img":return this.set({img:a});default:return this.error("Unknown source type.")}})},s.prototype.to=function(a){switch(a){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},s.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var a={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},o=function l(u,h){for(var p=u.nodeType===3?document.createTextNode(u.nodeValue):u.cloneNode(!1),g=u.firstChild;g;g=g.nextSibling)h!==!0&&g.nodeType===1&&g.nodeName==="SCRIPT"||p.appendChild(l(g,h));return u.nodeType===1&&(u.nodeName==="CANVAS"?(p.width=u.width,p.height=u.height,p.getContext("2d").drawImage(u,0,0)):u.nodeName!=="TEXTAREA"&&u.nodeName!=="SELECT"||(p.value=u.value),p.addEventListener("load",function(){p.scrollTop=u.scrollTop,p.scrollLeft=u.scrollLeft},!0)),p}(this.prop.src,this.opt.html2canvas.javascriptEnabled);o.tagName==="BODY"&&(a.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:a}),this.prop.container.appendChild(o),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},s.prototype.toCanvas=function(){var a=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(a).then(e).then(function(o){var l=Object.assign({},this.opt.html2canvas);return delete l.onrendered,o(this.prop.container,l)}).then(function(o){(this.opt.html2canvas.onrendered||function(){})(o),this.prop.canvas=o,document.body.removeChild(this.prop.overlay)})},s.prototype.toContext2d=function(){var a=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(a).then(e).then(function(o){var l=this.opt.jsPDF,u=this.opt.fontFaces,h=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,p=Object.assign({async:!0,allowTaint:!0,scale:h,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete p.onrendered,l.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,l.context2d.posX=this.opt.x,l.context2d.posY=this.opt.y,l.context2d.margin=this.opt.margin,l.context2d.fontFaces=u,u)for(var g=0;g<u.length;++g){var m=u[g],b=m.src.find(function(x){return x.format==="truetype"});b&&l.addFont(b.url,m.ref.name,m.ref.style)}return p.windowHeight=p.windowHeight||0,p.windowHeight=p.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):p.windowHeight,l.context2d.save(!0),o(this.prop.container,p)}).then(function(o){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(o),this.prop.canvas=o,document.body.removeChild(this.prop.overlay)})},s.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var a=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=a})},s.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},s.prototype.output=function(a,o,l){return(l=l||"pdf").toLowerCase()==="img"||l.toLowerCase()==="image"?this.outputImg(a,o):this.outputPdf(a,o)},s.prototype.outputPdf=function(a,o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(a,o)})},s.prototype.outputImg=function(a){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(a){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+a+'" is not supported.'}})},s.prototype.save=function(a){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(a?{filename:a}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},s.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},s.prototype.set=function(a){if(r(a)!=="object")return this;var o=Object.keys(a||{}).map(function(l){if(l in s.template.prop)return function(){this.prop[l]=a[l]};switch(l){case"margin":return this.setMargin.bind(this,a.margin);case"jsPDF":return function(){return this.opt.jsPDF=a.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,a.pageSize);default:return function(){this.opt[l]=a[l]}}},this);return this.then(function(){return this.thenList(o)})},s.prototype.get=function(a,o){return this.then(function(){var l=a in s.template.prop?this.prop[a]:this.opt[a];return o?o(l):l})},s.prototype.setMargin=function(a){return this.then(function(){switch(r(a)){case"number":a=[a,a,a,a];case"array":if(a.length===2&&(a=[a[0],a[1],a[0],a[1]]),a.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=a}).then(this.setPageSize)},s.prototype.setPageSize=function(a){function o(l,u){return Math.floor(l*u/72*96)}return this.then(function(){(a=a||gt.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(a.inner={width:a.width-this.opt.margin[1]-this.opt.margin[3],height:a.height-this.opt.margin[0]-this.opt.margin[2]},a.inner.px={width:o(a.inner.width,a.k),height:o(a.inner.height,a.k)},a.inner.ratio=a.inner.height/a.inner.width),this.prop.pageSize=a})},s.prototype.setProgress=function(a,o,l,u){return a!=null&&(this.progress.val=a),o!=null&&(this.progress.state=o),l!=null&&(this.progress.n=l),u!=null&&(this.progress.stack=u),this.progress.ratio=this.progress.val/this.progress.state,this},s.prototype.updateProgress=function(a,o,l,u){return this.setProgress(a?this.progress.val+a:null,o||null,l?this.progress.n+l:null,u?this.progress.stack.concat(u):null)},s.prototype.then=function(a,o){var l=this;return this.thenCore(a,o,function(u,h){return l.updateProgress(null,null,1,[u]),Promise.prototype.then.call(this,function(p){return l.updateProgress(null,u),p}).then(u,h).then(function(p){return l.updateProgress(1),p})})},s.prototype.thenCore=function(a,o,l){l=l||Promise.prototype.then,a&&(a=a.bind(this)),o&&(o=o.bind(this));var u=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:s.convert(Object.assign({},this),Promise.prototype),h=l.call(u,a,o);return s.convert(h,this.__proto__)},s.prototype.thenExternal=function(a,o){return Promise.prototype.then.call(this,a,o)},s.prototype.thenList=function(a){var o=this;return a.forEach(function(l){o=o.thenCore(l)}),o},s.prototype.catch=function(a){a&&(a=a.bind(this));var o=Promise.prototype.catch.call(this,a);return s.convert(o,this)},s.prototype.catchExternal=function(a){return Promise.prototype.catch.call(this,a)},s.prototype.error=function(a){return this.then(function(){throw new Error(a)})},s.prototype.using=s.prototype.set,s.prototype.saveAs=s.prototype.save,s.prototype.export=s.prototype.output,s.prototype.run=s.prototype.then,gt.getPageSize=function(a,o,l){if(Gt(a)==="object"){var u=a;a=u.orientation,o=u.unit||o,l=u.format||l}o=o||"mm",l=l||"a4",a=(""+(a||"P")).toLowerCase();var h,p=(""+l).toLowerCase(),g={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(o){case"pt":h=1;break;case"mm":h=72/25.4;break;case"cm":h=72/2.54;break;case"in":h=72;break;case"px":h=.75;break;case"pc":case"em":h=12;break;case"ex":h=6;break;default:throw"Invalid unit: "+o}var m,b=0,x=0;if(g.hasOwnProperty(p))b=g[p][1]/h,x=g[p][0]/h;else try{b=l[1],x=l[0]}catch{throw new Error("Invalid format: "+l)}if(a==="p"||a==="portrait")a="p",x>b&&(m=x,x=b,b=m);else{if(a!=="l"&&a!=="landscape")throw"Invalid orientation: "+a;a="l",b>x&&(m=x,x=b,b=m)}return{width:x,height:b,unit:o,k:h,orientation:a}},t.html=function(a,o){(o=o||{}).callback=o.callback||function(){},o.html2canvas=o.html2canvas||{},o.html2canvas.canvas=o.html2canvas.canvas||this.canvas,o.jsPDF=o.jsPDF||this,o.fontFaces=o.fontFaces?o.fontFaces.map(av):null;var l=new s(o);return o.worker?l:l.from(a).doCallback()}}(gt.API),gt.API.addJS=function(t){return Mw=t,this.internal.events.subscribe("postPutResources",function(){Kf=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Kf+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),Ow=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+Mw+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Kf!==void 0&&Ow!==void 0&&this.internal.out("/Names <</JavaScript "+Kf+" 0 R>>")}),this},function(t){var e;t.events.push(["postPutResources",function(){var n=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=n.outline.render().split(/\r\n/),s=0;s<i.length;s++){var a=i[s],o=r.exec(a);if(o!=null){var l=o[1];n.internal.newObjectDeferredBegin(l,!1)}n.internal.write(a)}if(this.outline.createNamedDestinations){var u=this.internal.pages.length,h=[];for(s=0;s<u;s++){var p=n.internal.newObject();h.push(p);var g=n.internal.getPageInfo(s+1);n.internal.write("<< /D["+g.objId+" 0 R /XYZ null null null]>> endobj")}var m=n.internal.newObject();for(n.internal.write("<< /Names [ "),s=0;s<h.length;s++)n.internal.write("(page_"+(s+1)+")"+h[s]+" 0 R");n.internal.write(" ] >>","endobj"),e=n.internal.newObject(),n.internal.write("<< /Dests "+m+" 0 R"),n.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var n=this;n.outline={createNamedDestinations:!1,root:{children:[]}},n.outline.add=function(r,i,s){var a={title:i,options:s,children:[]};return r==null&&(r=this.root),r.children.push(a),a},n.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=n,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},n.outline.genIds_r=function(r){r.id=n.internal.newObjectDeferred();for(var i=0;i<r.children.length;i++)this.genIds_r(r.children[i])},n.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},n.outline.renderItems=function(r){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<r.children.length;s++){var a=r.children[s];this.objStart(a),this.line("/Title "+this.makeString(a.title)),this.line("/Parent "+this.makeRef(r)),s>0&&this.line("/Prev "+this.makeRef(r.children[s-1])),s<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[s+1])),a.children.length>0&&(this.line("/First "+this.makeRef(a.children[0])),this.line("/Last "+this.makeRef(a.children[a.children.length-1])));var o=this.count=this.count_r({count:0},a);if(o>0&&this.line("/Count "+o),a.options&&a.options.pageNumber){var l=n.internal.getPageInfo(a.options.pageNumber);this.line("/Dest ["+l.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var u=0;u<r.children.length;u++)this.renderItems(r.children[u])},n.outline.line=function(r){this.ctx.val+=r+`\r
`},n.outline.makeRef=function(r){return r.id+" 0 R"},n.outline.makeString=function(r){return"("+n.internal.pdfEscape(r)+")"},n.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},n.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},n.outline.count_r=function(r,i){for(var s=0;s<i.children.length;s++)r.count++,this.count_r(r,i.children[s]);return r.count}}])}(gt.API),function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(n,r,i,s,a,o){var l,u=this.decode.DCT_DECODE,h=null;if(typeof n=="string"||this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n)){switch(n=a||n,n=this.__addimage__.isArrayBuffer(n)?new Uint8Array(n):n,(l=function(p){for(var g,m=256*p.charCodeAt(4)+p.charCodeAt(5),b=p.length,x={width:0,height:0,numcomponents:1},k=4;k<b;k+=2){if(k+=m,e.indexOf(p.charCodeAt(k+1))!==-1){g=256*p.charCodeAt(k+5)+p.charCodeAt(k+6),x={width:256*p.charCodeAt(k+7)+p.charCodeAt(k+8),height:g,numcomponents:p.charCodeAt(k+9)};break}m=256*p.charCodeAt(k+2)+p.charCodeAt(k+3)}return x}(n=this.__addimage__.isArrayBufferView(n)?this.__addimage__.arrayBufferToBinaryString(n):n)).numcomponents){case 1:o=this.color_spaces.DEVICE_GRAY;break;case 4:o=this.color_spaces.DEVICE_CMYK;break;case 3:o=this.color_spaces.DEVICE_RGB}h={data:n,width:l.width,height:l.height,colorSpace:o,bitsPerComponent:8,filter:u,index:r,alias:i}}return h}}(gt.API);var Fu,qf,Vw,Uw,Bw,mD=function(){var t,e,n;function r(s){var a,o,l,u,h,p,g,m,b,x,k,_,A,C;for(this.data=s,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},p=null;;){switch(a=this.readUInt32(),b=(function(){var F,Y;for(Y=[],F=0;F<4;++F)Y.push(String.fromCharCode(this.data[this.pos++]));return Y}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(a);break;case"fcTL":p&&this.animation.frames.push(p),this.pos+=4,p={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},h=this.readUInt16(),u=this.readUInt16()||100,p.delay=1e3*h/u,p.disposeOp=this.data[this.pos++],p.blendOp=this.data[this.pos++],p.data=[];break;case"IDAT":case"fdAT":for(b==="fdAT"&&(this.pos+=4,a-=4),s=(p!=null?p.data:void 0)||this.imgData,_=0;0<=a?_<a:_>a;0<=a?++_:--_)s.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(l=this.palette.length/3,this.transparency.indexed=this.read(a),this.transparency.indexed.length>l)throw new Error("More transparent colors than palette size");if((x=l-this.transparency.indexed.length)>0)for(A=0;0<=x?A<x:A>x;0<=x?++A:--A)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(a)[0];break;case 2:this.transparency.rgb=this.read(a)}break;case"tEXt":g=(k=this.read(a)).indexOf(0),m=String.fromCharCode.apply(String,k.slice(0,g)),this.text[m]=String.fromCharCode.apply(String,k.slice(g+1));break;case"IEND":return p&&this.animation.frames.push(p),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(C=this.colorType)===4||C===6,o=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*o,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=a}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}r.prototype.read=function(s){var a,o;for(o=[],a=0;0<=s?a<s:a>s;0<=s?++a:--a)o.push(this.data[this.pos++]);return o},r.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.decodePixels=function(s){var a=this.pixelBitlength/8,o=new Uint8Array(this.width*this.height*a),l=0,u=this;if(s==null&&(s=this.imgData),s.length===0)return new Uint8Array(0);function h(p,g,m,b){var x,k,_,A,C,F,Y,B,L,y,S,R,E,I,P,M,te,V,U,z,H,ne=Math.ceil((u.width-p)/m),_e=Math.ceil((u.height-g)/b),O=u.width==ne&&u.height==_e;for(I=a*ne,R=O?o:new Uint8Array(I*_e),F=s.length,E=0,k=0;E<_e&&l<F;){switch(s[l++]){case 0:for(A=te=0;te<I;A=te+=1)R[k++]=s[l++];break;case 1:for(A=V=0;V<I;A=V+=1)x=s[l++],C=A<a?0:R[k-a],R[k++]=(x+C)%256;break;case 2:for(A=U=0;U<I;A=U+=1)x=s[l++],_=(A-A%a)/a,P=E&&R[(E-1)*I+_*a+A%a],R[k++]=(P+x)%256;break;case 3:for(A=z=0;z<I;A=z+=1)x=s[l++],_=(A-A%a)/a,C=A<a?0:R[k-a],P=E&&R[(E-1)*I+_*a+A%a],R[k++]=(x+Math.floor((C+P)/2))%256;break;case 4:for(A=H=0;H<I;A=H+=1)x=s[l++],_=(A-A%a)/a,C=A<a?0:R[k-a],E===0?P=M=0:(P=R[(E-1)*I+_*a+A%a],M=_&&R[(E-1)*I+(_-1)*a+A%a]),Y=C+P-M,B=Math.abs(Y-C),y=Math.abs(Y-P),S=Math.abs(Y-M),L=B<=y&&B<=S?C:y<=S?P:M,R[k++]=(x+L)%256;break;default:throw new Error("Invalid filter algorithm: "+s[l-1])}if(!O){var Q=((g+E*b)*u.width+p)*a,J=E*I;for(A=0;A<ne;A+=1){for(var W=0;W<a;W+=1)o[Q++]=R[J++];Q+=(m-1)*a}}E++}}return s=W7(s),u.interlaceMethod==1?(h(0,0,8,8),h(4,0,8,8),h(0,4,4,8),h(2,0,4,4),h(0,2,2,4),h(1,0,2,2),h(0,1,1,2)):h(0,0,1,1),o},r.prototype.decodePalette=function(){var s,a,o,l,u,h,p,g,m;for(o=this.palette,h=this.transparency.indexed||[],u=new Uint8Array((h.length||0)+o.length),l=0,s=0,a=p=0,g=o.length;p<g;a=p+=3)u[l++]=o[a],u[l++]=o[a+1],u[l++]=o[a+2],u[l++]=(m=h[s++])!=null?m:255;return u},r.prototype.copyToImageData=function(s,a){var o,l,u,h,p,g,m,b,x,k,_;if(l=this.colors,x=null,o=this.hasAlphaChannel,this.palette.length&&(x=(_=this._decodedPalette)!=null?_:this._decodedPalette=this.decodePalette(),l=4,o=!0),b=(u=s.data||s).length,p=x||a,h=g=0,l===1)for(;h<b;)m=x?4*a[h/4]:g,k=p[m++],u[h++]=k,u[h++]=k,u[h++]=k,u[h++]=o?p[m++]:255,g=m;else for(;h<b;)m=x?4*a[h/4]:g,u[h++]=p[m++],u[h++]=p[m++],u[h++]=p[m++],u[h++]=o?p[m++]:255,g=m},r.prototype.decode=function(){var s;return s=new Uint8Array(this.width*this.height*4),this.copyToImageData(s,this.decodePixels()),s};var i=function(){if(Object.prototype.toString.call(vt)==="[object Window]"){try{e=vt.document.createElement("canvas"),n=e.getContext("2d")}catch{return!1}return!0}return!1};return i(),t=function(s){var a;if(i()===!0)return n.width=s.width,n.height=s.height,n.clearRect(0,0,s.width,s.height),n.putImageData(s,0,0),(a=new Image).src=e.toDataURL(),a;throw new Error("This method requires a Browser with Canvas-capability.")},r.prototype.decodeFrames=function(s){var a,o,l,u,h,p,g,m;if(this.animation){for(m=[],o=h=0,p=(g=this.animation.frames).length;h<p;o=++h)a=g[o],l=s.createImageData(a.width,a.height),u=this.decodePixels(new Uint8Array(a.data)),this.copyToImageData(l,u),a.imageData=l,m.push(a.image=t(l));return m}},r.prototype.renderFrame=function(s,a){var o,l,u;return o=(l=this.animation.frames)[a],u=l[a-1],a===0&&s.clearRect(0,0,this.width,this.height),(u!=null?u.disposeOp:void 0)===1?s.clearRect(u.xOffset,u.yOffset,u.width,u.height):(u!=null?u.disposeOp:void 0)===2&&s.putImageData(u.imageData,u.xOffset,u.yOffset),o.blendOp===0&&s.clearRect(o.xOffset,o.yOffset,o.width,o.height),s.drawImage(o.image,o.xOffset,o.yOffset)},r.prototype.animate=function(s){var a,o,l,u,h,p,g=this;return o=0,p=this.animation,u=p.numFrames,l=p.frames,h=p.numPlays,(a=function(){var m,b;if(m=o++%u,b=l[m],g.renderFrame(s,m),u>1&&o/u<h)return g.animation._timeout=setTimeout(a,b.delay)})()},r.prototype.stopAnimation=function(){var s;return clearTimeout((s=this.animation)!=null?s._timeout:void 0)},r.prototype.render=function(s){var a,o;return s._png&&s._png.stopAnimation(),s._png=this,s.width=this.width,s.height=this.height,a=s.getContext("2d"),this.animation?(this.decodeFrames(a),this.animate(a)):(o=a.createImageData(this.width,this.height),this.copyToImageData(o,this.decodePixels()),a.putImageData(o,0,0))},r}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function gD(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!=56||t[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var n=t[e++]|t[e++]<<8,r=t[e++]|t[e++]<<8,i=t[e++],s=i>>7,a=1<<(7&i)+1;t[e++],t[e++];var o=null,l=null;s&&(o=e,l=a,e+=3*a);var u=!0,h=[],p=0,g=null,m=0,b=null;for(this.width=n,this.height=r;u&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0)e+=14,b=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((E=t[e++])>=0))throw Error("Invalid block size");if(E===0)break;e+=E}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var x=t[e++];p=t[e++]|t[e++]<<8,g=t[e++],!(1&x)&&(g=null),m=x>>2&7,e++;break;case 254:for(;;){if(!((E=t[e++])>=0))throw Error("Invalid block size");if(E===0)break;e+=E}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var k=t[e++]|t[e++]<<8,_=t[e++]|t[e++]<<8,A=t[e++]|t[e++]<<8,C=t[e++]|t[e++]<<8,F=t[e++],Y=F>>6&1,B=1<<(7&F)+1,L=o,y=l,S=!1;F>>7&&(S=!0,L=e,y=B,e+=3*B);var R=e;for(e++;;){var E;if(!((E=t[e++])>=0))throw Error("Invalid block size");if(E===0)break;e+=E}h.push({x:k,y:_,width:A,height:C,has_local_palette:S,palette_offset:L,palette_size:y,data_offset:R,data_length:e-R,transparent_index:g,interlaced:!!Y,delay:p,disposal:m});break;case 59:u=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return h.length},this.loopCount=function(){return b},this.frameInfo=function(I){if(I<0||I>=h.length)throw new Error("Frame index out of range.");return h[I]},this.decodeAndBlitFrameBGRA=function(I,P){var M=this.frameInfo(I),te=M.width*M.height,V=new Uint8Array(te);Kw(t,M.data_offset,V,te);var U=M.palette_offset,z=M.transparent_index;z===null&&(z=256);var H=M.width,ne=n-H,_e=H,O=4*(M.y*n+M.x),Q=4*((M.y+M.height)*n+M.x),J=O,W=4*ne;M.interlaced===!0&&(W+=4*n*7);for(var se=8,le=0,fe=V.length;le<fe;++le){var pe=V[le];if(_e===0&&(_e=H,(J+=W)>=Q&&(W=4*ne+4*n*(se-1),J=O+(H+ne)*(se<<1),se>>=1)),pe===z)J+=4;else{var ke=t[U+3*pe],Ie=t[U+3*pe+1],je=t[U+3*pe+2];P[J++]=je,P[J++]=Ie,P[J++]=ke,P[J++]=255}--_e}},this.decodeAndBlitFrameRGBA=function(I,P){var M=this.frameInfo(I),te=M.width*M.height,V=new Uint8Array(te);Kw(t,M.data_offset,V,te);var U=M.palette_offset,z=M.transparent_index;z===null&&(z=256);var H=M.width,ne=n-H,_e=H,O=4*(M.y*n+M.x),Q=4*((M.y+M.height)*n+M.x),J=O,W=4*ne;M.interlaced===!0&&(W+=4*n*7);for(var se=8,le=0,fe=V.length;le<fe;++le){var pe=V[le];if(_e===0&&(_e=H,(J+=W)>=Q&&(W=4*ne+4*n*(se-1),J=O+(H+ne)*(se<<1),se>>=1)),pe===z)J+=4;else{var ke=t[U+3*pe],Ie=t[U+3*pe+1],je=t[U+3*pe+2];P[J++]=ke,P[J++]=Ie,P[J++]=je,P[J++]=255}--_e}}}function Kw(t,e,n,r){for(var i=t[e++],s=1<<i,a=s+1,o=a+1,l=i+1,u=(1<<l)-1,h=0,p=0,g=0,m=t[e++],b=new Int32Array(4096),x=null;;){for(;h<16&&m!==0;)p|=t[e++]<<h,h+=8,m===1?m=t[e++]:--m;if(h<l)break;var k=p&u;if(p>>=l,h-=l,k!==s){if(k===a)break;for(var _=k<o?k:x,A=0,C=_;C>s;)C=b[C]>>8,++A;var F=C;if(g+A+(_!==k?1:0)>r)return void tn.log("Warning, gif stream longer than expected.");n[g++]=F;var Y=g+=A;for(_!==k&&(n[g++]=F),C=_;A--;)C=b[C],n[--Y]=255&C,C>>=8;x!==null&&o<4096&&(b[o++]=x<<8|F,o>=u+1&&l<12&&(++l,u=u<<1|1)),x=k}else o=a+1,u=(1<<(l=i+1))-1,x=null}return g!==r&&tn.log("Warning, gif stream shorter than expected."),n}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function x1(t){var e,n,r,i,s,a=Math.floor,o=new Array(64),l=new Array(64),u=new Array(64),h=new Array(64),p=new Array(65535),g=new Array(65535),m=new Array(64),b=new Array(64),x=[],k=0,_=7,A=new Array(64),C=new Array(64),F=new Array(64),Y=new Array(256),B=new Array(2048),L=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],y=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],S=[0,1,2,3,4,5,6,7,8,9,10,11],R=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],E=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],I=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],P=[0,1,2,3,4,5,6,7,8,9,10,11],M=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],te=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function V(O,Q){for(var J=0,W=0,se=new Array,le=1;le<=16;le++){for(var fe=1;fe<=O[le];fe++)se[Q[W]]=[],se[Q[W]][0]=J,se[Q[W]][1]=le,W++,J++;J*=2}return se}function U(O){for(var Q=O[0],J=O[1]-1;J>=0;)Q&1<<J&&(k|=1<<_),J--,--_<0&&(k==255?(z(255),z(0)):z(k),_=7,k=0)}function z(O){x.push(O)}function H(O){z(O>>8&255),z(255&O)}function ne(O,Q,J,W,se){for(var le,fe=se[0],pe=se[240],ke=function(ce,Te){var Me,Be,$e,Ye,at,tt,ct,dt,ot,ut,ze=0;for(ot=0;ot<8;++ot){Me=ce[ze],Be=ce[ze+1],$e=ce[ze+2],Ye=ce[ze+3],at=ce[ze+4],tt=ce[ze+5],ct=ce[ze+6];var we=Me+(dt=ce[ze+7]),He=Me-dt,mt=Be+ct,ft=Be-ct,kt=$e+tt,Mn=$e-tt,bt=Ye+at,vr=Ye-at,Bt=we+bt,$n=we-bt,xn=mt+kt,Dt=mt-kt;ce[ze]=Bt+xn,ce[ze+4]=Bt-xn;var lt=.707106781*(Dt+$n);ce[ze+2]=$n+lt,ce[ze+6]=$n-lt;var Pt=.382683433*((Bt=vr+Mn)-(Dt=ft+He)),jr=.5411961*Bt+Pt,Jt=1.306562965*Dt+Pt,fn=.707106781*(xn=Mn+ft),ci=He+fn,nt=He-fn;ce[ze+5]=nt+jr,ce[ze+3]=nt-jr,ce[ze+1]=ci+Jt,ce[ze+7]=ci-Jt,ze+=8}for(ze=0,ot=0;ot<8;++ot){Me=ce[ze],Be=ce[ze+8],$e=ce[ze+16],Ye=ce[ze+24],at=ce[ze+32],tt=ce[ze+40],ct=ce[ze+48];var Wr=Me+(dt=ce[ze+56]),yr=Me-dt,Vn=Be+ct,Tn=Be-ct,Sn=$e+tt,Un=$e-tt,Oa=Ye+at,qi=Ye-at,_r=Wr+Oa,Gr=Wr-Oa,Dr=Vn+Sn,Fr=Vn-Sn;ce[ze]=_r+Dr,ce[ze+32]=_r-Dr;var Pn=.707106781*(Fr+Gr);ce[ze+16]=Gr+Pn,ce[ze+48]=Gr-Pn;var hi=.382683433*((_r=qi+Un)-(Fr=Tn+yr)),ys=.5411961*_r+hi,_s=1.306562965*Fr+hi,ws=.707106781*(Dr=Un+Tn),Js=yr+ws,Xs=yr-ws;ce[ze+40]=Xs+ys,ce[ze+24]=Xs-ys,ce[ze+8]=Js+_s,ce[ze+56]=Js-_s,ze++}for(ot=0;ot<64;++ot)ut=ce[ot]*Te[ot],m[ot]=ut>0?ut+.5|0:ut-.5|0;return m}(O,Q),Ie=0;Ie<64;++Ie)b[L[Ie]]=ke[Ie];var je=b[0]-J;J=b[0],je==0?U(W[0]):(U(W[g[le=32767+je]]),U(p[le]));for(var Ke=63;Ke>0&&b[Ke]==0;)Ke--;if(Ke==0)return U(fe),J;for(var Ze,Se=1;Se<=Ke;){for(var ae=Se;b[Se]==0&&Se<=Ke;)++Se;var Ge=Se-ae;if(Ge>=16){Ze=Ge>>4;for(var Fe=1;Fe<=Ze;++Fe)U(pe);Ge&=15}le=32767+b[Se],U(se[(Ge<<4)+g[le]]),U(p[le]),Se++}return Ke!=63&&U(fe),J}function _e(O){O=Math.min(Math.max(O,1),100),s!=O&&(function(Q){for(var J=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],W=0;W<64;W++){var se=a((J[W]*Q+50)/100);se=Math.min(Math.max(se,1),255),o[L[W]]=se}for(var le=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],fe=0;fe<64;fe++){var pe=a((le[fe]*Q+50)/100);pe=Math.min(Math.max(pe,1),255),l[L[fe]]=pe}for(var ke=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Ie=0,je=0;je<8;je++)for(var Ke=0;Ke<8;Ke++)u[Ie]=1/(o[L[Ie]]*ke[je]*ke[Ke]*8),h[Ie]=1/(l[L[Ie]]*ke[je]*ke[Ke]*8),Ie++}(O<50?Math.floor(5e3/O):Math.floor(200-2*O)),s=O)}this.encode=function(O,Q){Q&&_e(Q),x=new Array,k=0,_=7,H(65496),H(65504),H(16),z(74),z(70),z(73),z(70),z(0),z(1),z(1),z(0),H(1),H(1),z(0),z(0),function(){H(65499),H(132),z(0);for(var Be=0;Be<64;Be++)z(o[Be]);z(1);for(var $e=0;$e<64;$e++)z(l[$e])}(),function(Be,$e){H(65472),H(17),z(8),H($e),H(Be),z(3),z(1),z(17),z(0),z(2),z(17),z(1),z(3),z(17),z(1)}(O.width,O.height),function(){H(65476),H(418),z(0);for(var Be=0;Be<16;Be++)z(y[Be+1]);for(var $e=0;$e<=11;$e++)z(S[$e]);z(16);for(var Ye=0;Ye<16;Ye++)z(R[Ye+1]);for(var at=0;at<=161;at++)z(E[at]);z(1);for(var tt=0;tt<16;tt++)z(I[tt+1]);for(var ct=0;ct<=11;ct++)z(P[ct]);z(17);for(var dt=0;dt<16;dt++)z(M[dt+1]);for(var ot=0;ot<=161;ot++)z(te[ot])}(),H(65498),H(12),z(3),z(1),z(0),z(2),z(17),z(3),z(17),z(0),z(63),z(0);var J=0,W=0,se=0;k=0,_=7,this.encode.displayName="_encode_";for(var le,fe,pe,ke,Ie,je,Ke,Ze,Se,ae=O.data,Ge=O.width,Fe=O.height,ce=4*Ge,Te=0;Te<Fe;){for(le=0;le<ce;){for(Ie=ce*Te+le,Ke=-1,Ze=0,Se=0;Se<64;Se++)je=Ie+(Ze=Se>>3)*ce+(Ke=4*(7&Se)),Te+Ze>=Fe&&(je-=ce*(Te+1+Ze-Fe)),le+Ke>=ce&&(je-=le+Ke-ce+4),fe=ae[je++],pe=ae[je++],ke=ae[je++],A[Se]=(B[fe]+B[pe+256>>0]+B[ke+512>>0]>>16)-128,C[Se]=(B[fe+768>>0]+B[pe+1024>>0]+B[ke+1280>>0]>>16)-128,F[Se]=(B[fe+1280>>0]+B[pe+1536>>0]+B[ke+1792>>0]>>16)-128;J=ne(A,u,J,e,r),W=ne(C,h,W,n,i),se=ne(F,h,se,n,i),le+=32}Te+=8}if(_>=0){var Me=[];Me[1]=_+1,Me[0]=(1<<_+1)-1,U(Me)}return H(65497),new Uint8Array(x)},t=t||50,function(){for(var O=String.fromCharCode,Q=0;Q<256;Q++)Y[Q]=O(Q)}(),e=V(y,S),n=V(I,P),r=V(R,E),i=V(M,te),function(){for(var O=1,Q=2,J=1;J<=15;J++){for(var W=O;W<Q;W++)g[32767+W]=J,p[32767+W]=[],p[32767+W][1]=J,p[32767+W][0]=W;for(var se=-(Q-1);se<=-O;se++)g[32767+se]=J,p[32767+se]=[],p[32767+se][1]=J,p[32767+se][0]=Q-1+se;O<<=1,Q<<=1}}(),function(){for(var O=0;O<256;O++)B[O]=19595*O,B[O+256>>0]=38470*O,B[O+512>>0]=7471*O+32768,B[O+768>>0]=-11059*O,B[O+1024>>0]=-21709*O,B[O+1280>>0]=32768*O+8421375,B[O+1536>>0]=-27439*O,B[O+1792>>0]=-5329*O}(),_e(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function ns(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function qw(t){function e(y){if(!y)throw Error("assert :P")}function n(y,S,R){for(var E=0;4>E;E++)if(y[S+E]!=R.charCodeAt(E))return!0;return!1}function r(y,S,R,E,I){for(var P=0;P<I;P++)y[S+P]=R[E+P]}function i(y,S,R,E){for(var I=0;I<E;I++)y[S+I]=R}function s(y){return new Int32Array(y)}function a(y,S){for(var R=[],E=0;E<y;E++)R.push(new S);return R}function o(y,S){var R=[];return function E(I,P,M){for(var te=M[P],V=0;V<te&&(I.push(M.length>P+1?[]:new S),!(M.length<P+1));V++)E(I[V],P+1,M)}(R,0,y),R}var l=function(){var y=this;function S(c,v){for(var N=1<<v-1>>>0;c&N;)N>>>=1;return N?(c&N-1)+N:c}function R(c,v,N,j,q){e(!(j%N));do c[v+(j-=N)]=q;while(0<j)}function E(c,v,N,j,q){if(e(2328>=q),512>=q)var $=s(512);else if(($=s(q))==null)return 0;return function(G,Z,ee,re,he,be){var xe,ye,Le=Z,Ae=1<<ee,de=s(16),me=s(16);for(e(he!=0),e(re!=null),e(G!=null),e(0<ee),ye=0;ye<he;++ye){if(15<re[ye])return 0;++de[re[ye]]}if(de[0]==he)return 0;for(me[1]=0,xe=1;15>xe;++xe){if(de[xe]>1<<xe)return 0;me[xe+1]=me[xe]+de[xe]}for(ye=0;ye<he;++ye)xe=re[ye],0<re[ye]&&(be[me[xe]++]=ye);if(me[15]==1)return(re=new I).g=0,re.value=be[0],R(G,Le,1,Ae,re),Ae;var Pe,De=-1,Ce=Ae-1,Xe=0,We=1,pt=1,Je=1<<ee;for(ye=0,xe=1,he=2;xe<=ee;++xe,he<<=1){if(We+=pt<<=1,0>(pt-=de[xe]))return 0;for(;0<de[xe];--de[xe])(re=new I).g=xe,re.value=be[ye++],R(G,Le+Xe,he,Je,re),Xe=S(Xe,xe)}for(xe=ee+1,he=2;15>=xe;++xe,he<<=1){if(We+=pt<<=1,0>(pt-=de[xe]))return 0;for(;0<de[xe];--de[xe]){if(re=new I,(Xe&Ce)!=De){for(Le+=Je,Pe=1<<(De=xe)-ee;15>De&&!(0>=(Pe-=de[De]));)++De,Pe<<=1;Ae+=Je=1<<(Pe=De-ee),G[Z+(De=Xe&Ce)].g=Pe+ee,G[Z+De].value=Le-Z-De}re.g=xe-ee,re.value=be[ye++],R(G,Le+(Xe>>ee),he,Je,re),Xe=S(Xe,xe)}}return We!=2*me[15]-1?0:Ae}(c,v,N,j,q,$)}function I(){this.value=this.g=0}function P(){this.value=this.g=0}function M(){this.G=a(5,I),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=a(or,P)}function te(c,v,N,j){e(c!=null),e(v!=null),e(2147483648>j),c.Ca=254,c.I=0,c.b=-8,c.Ka=0,c.oa=v,c.pa=N,c.Jd=v,c.Yc=N+j,c.Zc=4<=j?N+j-4+1:N,le(c)}function V(c,v){for(var N=0;0<v--;)N|=pe(c,128)<<v;return N}function U(c,v){var N=V(c,v);return fe(c)?-N:N}function z(c,v,N,j){var q,$=0;for(e(c!=null),e(v!=null),e(4294967288>j),c.Sb=j,c.Ra=0,c.u=0,c.h=0,4<j&&(j=4),q=0;q<j;++q)$+=v[N+q]<<8*q;c.Ra=$,c.bb=j,c.oa=v,c.pa=N}function H(c){for(;8<=c.u&&c.bb<c.Sb;)c.Ra>>>=8,c.Ra+=c.oa[c.pa+c.bb]<<Su-8>>>0,++c.bb,c.u-=8;J(c)&&(c.h=1,c.u=0)}function ne(c,v){if(e(0<=v),!c.h&&v<=xu){var N=Q(c)&bu[v];return c.u+=v,H(c),N}return c.h=1,c.u=0}function _e(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function O(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function Q(c){return c.Ra>>>(c.u&Su-1)>>>0}function J(c){return e(c.bb<=c.Sb),c.h||c.bb==c.Sb&&c.u>Su}function W(c,v){c.u=v,c.h=J(c)}function se(c){c.u>=Zc&&(e(c.u>=Zc),H(c))}function le(c){e(c!=null&&c.oa!=null),c.pa<c.Zc?(c.I=(c.oa[c.pa++]|c.I<<8)>>>0,c.b+=8):(e(c!=null&&c.oa!=null),c.pa<c.Yc?(c.b+=8,c.I=c.oa[c.pa++]|c.I<<8):c.Ka?c.b=0:(c.I<<=8,c.b+=8,c.Ka=1))}function fe(c){return V(c,1)}function pe(c,v){var N=c.Ca;0>c.b&&le(c);var j=c.b,q=N*v>>>8,$=(c.I>>>j>q)+0;for($?(N-=q,c.I-=q+1<<j>>>0):N=q+1,j=N,q=0;256<=j;)q+=8,j>>=8;return j=7^q+Yr[j],c.b-=j,c.Ca=(N<<j)-1,$}function ke(c,v,N){c[v+0]=N>>24&255,c[v+1]=N>>16&255,c[v+2]=N>>8&255,c[v+3]=N>>0&255}function Ie(c,v){return c[v+0]<<0|c[v+1]<<8}function je(c,v){return Ie(c,v)|c[v+2]<<16}function Ke(c,v){return Ie(c,v)|Ie(c,v+2)<<16}function Ze(c,v){var N=1<<v;return e(c!=null),e(0<v),c.X=s(N),c.X==null?0:(c.Mb=32-v,c.Xa=v,1)}function Se(c,v){e(c!=null),e(v!=null),e(c.Xa==v.Xa),r(v.X,0,c.X,0,1<<v.Xa)}function ae(){this.X=[],this.Xa=this.Mb=0}function Ge(c,v,N,j){e(N!=null),e(j!=null);var q=N[0],$=j[0];return q==0&&(q=(c*$+v/2)/v),$==0&&($=(v*q+c/2)/c),0>=q||0>=$?0:(N[0]=q,j[0]=$,1)}function Fe(c,v){return c+(1<<v)-1>>>v}function ce(c,v){return((4278255360&c)+(4278255360&v)>>>0&4278255360)+((16711935&c)+(16711935&v)>>>0&16711935)>>>0}function Te(c,v){y[v]=function(N,j,q,$,G,Z,ee){var re;for(re=0;re<G;++re){var he=y[c](Z[ee+re-1],q,$+re);Z[ee+re]=ce(N[j+re],he)}}}function Me(){this.ud=this.hd=this.jd=0}function Be(c,v){return((4278124286&(c^v))>>>1)+(c&v)>>>0}function $e(c){return 0<=c&&256>c?c:0>c?0:255<c?255:void 0}function Ye(c,v){return $e(c+(c-v+.5>>1))}function at(c,v,N){return Math.abs(v-N)-Math.abs(c-N)}function tt(c,v,N,j,q,$,G){for(j=$[G-1],N=0;N<q;++N)$[G+N]=j=ce(c[v+N],j)}function ct(c,v,N,j,q){var $;for($=0;$<N;++$){var G=c[v+$],Z=G>>8&255,ee=16711935&(ee=(ee=16711935&G)+((Z<<16)+Z));j[q+$]=(4278255360&G)+ee>>>0}}function dt(c,v){v.jd=c>>0&255,v.hd=c>>8&255,v.ud=c>>16&255}function ot(c,v,N,j,q,$){var G;for(G=0;G<j;++G){var Z=v[N+G],ee=Z>>>8,re=Z,he=255&(he=(he=Z>>>16)+((c.jd<<24>>24)*(ee<<24>>24)>>>5));re=255&(re=(re=re+((c.hd<<24>>24)*(ee<<24>>24)>>>5))+((c.ud<<24>>24)*(he<<24>>24)>>>5)),q[$+G]=(4278255360&Z)+(he<<16)+re}}function ut(c,v,N,j,q){y[v]=function($,G,Z,ee,re,he,be,xe,ye){for(ee=be;ee<xe;++ee)for(be=0;be<ye;++be)re[he++]=q(Z[j($[G++])])},y[c]=function($,G,Z,ee,re,he,be){var xe=8>>$.b,ye=$.Ea,Le=$.K[0],Ae=$.w;if(8>xe)for($=(1<<$.b)-1,Ae=(1<<xe)-1;G<Z;++G){var de,me=0;for(de=0;de<ye;++de)de&$||(me=j(ee[re++])),he[be++]=q(Le[me&Ae]),me>>=xe}else y["VP8LMapColor"+N](ee,re,Le,Ae,he,be,G,Z,ye)}}function ze(c,v,N,j,q){for(N=v+N;v<N;){var $=c[v++];j[q++]=$>>16&255,j[q++]=$>>8&255,j[q++]=$>>0&255}}function we(c,v,N,j,q){for(N=v+N;v<N;){var $=c[v++];j[q++]=$>>16&255,j[q++]=$>>8&255,j[q++]=$>>0&255,j[q++]=$>>24&255}}function He(c,v,N,j,q){for(N=v+N;v<N;){var $=(G=c[v++])>>16&240|G>>12&15,G=G>>0&240|G>>28&15;j[q++]=$,j[q++]=G}}function mt(c,v,N,j,q){for(N=v+N;v<N;){var $=(G=c[v++])>>16&248|G>>13&7,G=G>>5&224|G>>3&31;j[q++]=$,j[q++]=G}}function ft(c,v,N,j,q){for(N=v+N;v<N;){var $=c[v++];j[q++]=$>>0&255,j[q++]=$>>8&255,j[q++]=$>>16&255}}function kt(c,v,N,j,q,$){if($==0)for(N=v+N;v<N;)ke(j,(($=c[v++])[0]>>24|$[1]>>8&65280|$[2]<<8&16711680|$[3]<<24)>>>0),q+=32;else r(j,q,c,v,N)}function Mn(c,v){y[v][0]=y[c+"0"],y[v][1]=y[c+"1"],y[v][2]=y[c+"2"],y[v][3]=y[c+"3"],y[v][4]=y[c+"4"],y[v][5]=y[c+"5"],y[v][6]=y[c+"6"],y[v][7]=y[c+"7"],y[v][8]=y[c+"8"],y[v][9]=y[c+"9"],y[v][10]=y[c+"10"],y[v][11]=y[c+"11"],y[v][12]=y[c+"12"],y[v][13]=y[c+"13"],y[v][14]=y[c+"0"],y[v][15]=y[c+"0"]}function bt(c){return c==dg||c==fg||c==ef||c==pg}function vr(){this.eb=[],this.size=this.A=this.fb=0}function Bt(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function $n(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new vr,this.f.kb=new Bt,this.sd=null}function xn(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Dt(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function lt(c){return alert("todo:WebPSamplerProcessPlane"),c.T}function Pt(c,v){var N=c.T,j=v.ba.f.RGBA,q=j.eb,$=j.fb+c.ka*j.A,G=Ri[v.ba.S],Z=c.y,ee=c.O,re=c.f,he=c.N,be=c.ea,xe=c.W,ye=v.cc,Le=v.dc,Ae=v.Mc,de=v.Nc,me=c.ka,Pe=c.ka+c.T,De=c.U,Ce=De+1>>1;for(me==0?G(Z,ee,null,null,re,he,be,xe,re,he,be,xe,q,$,null,null,De):(G(v.ec,v.fc,Z,ee,ye,Le,Ae,de,re,he,be,xe,q,$-j.A,q,$,De),++N);me+2<Pe;me+=2)ye=re,Le=he,Ae=be,de=xe,he+=c.Rc,xe+=c.Rc,$+=2*j.A,G(Z,(ee+=2*c.fa)-c.fa,Z,ee,ye,Le,Ae,de,re,he,be,xe,q,$-j.A,q,$,De);return ee+=c.fa,c.j+Pe<c.o?(r(v.ec,v.fc,Z,ee,De),r(v.cc,v.dc,re,he,Ce),r(v.Mc,v.Nc,be,xe,Ce),N--):1&Pe||G(Z,ee,null,null,re,he,be,xe,re,he,be,xe,q,$+j.A,null,null,De),N}function jr(c,v,N){var j=c.F,q=[c.J];if(j!=null){var $=c.U,G=v.ba.S,Z=G==Zd||G==ef;v=v.ba.f.RGBA;var ee=[0],re=c.ka;ee[0]=c.T,c.Kb&&(re==0?--ee[0]:(--re,q[0]-=c.width),c.j+c.ka+c.T==c.o&&(ee[0]=c.o-c.j-re));var he=v.eb;re=v.fb+re*v.A,c=rn(j,q[0],c.width,$,ee,he,re+(Z?0:3),v.A),e(N==ee),c&&bt(G)&&Ci(he,re,Z,$,ee,v.A)}return 0}function Jt(c){var v=c.ma,N=v.ba.S,j=11>N,q=N==Jd||N==Xd||N==Zd||N==hg||N==12||bt(N);if(v.memory=null,v.Ib=null,v.Jb=null,v.Nd=null,!Jc(v.Oa,c,q?11:12))return 0;if(q&&bt(N)&&Oe(),c.da)alert("todo:use_scaling");else{if(j){if(v.Ib=lt,c.Kb){if(N=c.U+1>>1,v.memory=s(c.U+2*N),v.memory==null)return 0;v.ec=v.memory,v.fc=0,v.cc=v.ec,v.dc=v.fc+c.U,v.Mc=v.cc,v.Nc=v.dc+N,v.Ib=Pt,Oe()}}else alert("todo:EmitYUV");q&&(v.Jb=jr,j&&ve())}if(j&&!xy){for(c=0;256>c;++c)fA[c]=89858*(c-128)+nf>>tf,gA[c]=-22014*(c-128)+nf,mA[c]=-45773*(c-128),pA[c]=113618*(c-128)+nf>>tf;for(c=ah;c<vg;++c)v=76283*(c-16)+nf>>tf,vA[c-ah]=zt(v,255),yA[c-ah]=zt(v+8>>4,15);xy=1}return 1}function fn(c){var v=c.ma,N=c.U,j=c.T;return e(!(1&c.ka)),0>=N||0>=j?0:(N=v.Ib(c,v),v.Jb!=null&&v.Jb(c,v,N),v.Dc+=N,1)}function ci(c){c.ma.memory=null}function nt(c,v,N,j){return ne(c,8)!=47?0:(v[0]=ne(c,14)+1,N[0]=ne(c,14)+1,j[0]=ne(c,1),ne(c,3)!=0?0:!c.h)}function Wr(c,v){if(4>c)return c+1;var N=c-2>>1;return(2+(1&c)<<N)+ne(v,N)+1}function yr(c,v){return 120<v?v-120:1<=(N=((N=ZN[v-1])>>4)*c+(8-(15&N)))?N:1;var N}function Vn(c,v,N){var j=Q(N),q=c[v+=255&j].g-8;return 0<q&&(W(N,N.u+8),j=Q(N),v+=c[v].value,v+=j&(1<<q)-1),W(N,N.u+c[v].g),c[v].value}function Tn(c,v,N){return N.g+=c.g,N.value+=c.value<<v>>>0,e(8>=N.g),c.g}function Sn(c,v,N){var j=c.xc;return e((v=j==0?0:c.vc[c.md*(N>>j)+(v>>j)])<c.Wb),c.Ya[v]}function Un(c,v,N,j){var q=c.ab,$=c.c*v,G=c.C;v=G+v;var Z=N,ee=j;for(j=c.Ta,N=c.Ua;0<q--;){var re=c.gc[q],he=G,be=v,xe=Z,ye=ee,Le=(ee=j,Z=N,re.Ea);switch(e(he<be),e(be<=re.nc),re.hc){case 2:zd(xe,ye,(be-he)*Le,ee,Z);break;case 0:var Ae=he,de=be,me=ee,Pe=Z,De=(Je=re).Ea;Ae==0&&(ug(xe,ye,null,null,1,me,Pe),tt(xe,ye+1,0,0,De-1,me,Pe+1),ye+=De,Pe+=De,++Ae);for(var Ce=1<<Je.b,Xe=Ce-1,We=Fe(De,Je.b),pt=Je.K,Je=Je.w+(Ae>>Je.b)*We;Ae<de;){var Kt=pt,$t=Je,Mt=1;for(eh(xe,ye,me,Pe-De,1,me,Pe);Mt<De;){var Rt=(Mt&~Xe)+Ce;Rt>De&&(Rt=De),(0,to[Kt[$t++]>>8&15])(xe,ye+ +Mt,me,Pe+Mt-De,Rt-Mt,me,Pe+Mt),Mt=Rt}ye+=De,Pe+=De,++Ae&Xe||(Je+=We)}be!=re.nc&&r(ee,Z-Le,ee,Z+(be-he-1)*Le,Le);break;case 1:for(Le=xe,de=ye,De=(xe=re.Ea)-(Pe=xe&~(me=(ye=1<<re.b)-1)),Ae=Fe(xe,re.b),Ce=re.K,re=re.w+(he>>re.b)*Ae;he<be;){for(Xe=Ce,We=re,pt=new Me,Je=de+Pe,Kt=de+xe;de<Je;)dt(Xe[We++],pt),wl(pt,Le,de,ye,ee,Z),de+=ye,Z+=ye;de<Kt&&(dt(Xe[We++],pt),wl(pt,Le,de,De,ee,Z),de+=De,Z+=De),++he&me||(re+=Ae)}break;case 3:if(xe==ee&&ye==Z&&0<re.b){for(de=ee,xe=Le=Z+(be-he)*Le-(Pe=(be-he)*Fe(re.Ea,re.b)),ye=ee,me=Z,Ae=[],Pe=(De=Pe)-1;0<=Pe;--Pe)Ae[Pe]=ye[me+Pe];for(Pe=De-1;0<=Pe;--Pe)de[xe+Pe]=Ae[Pe];Ii(re,he,be,ee,Le,ee,Z)}else Ii(re,he,be,xe,ye,ee,Z)}Z=j,ee=N}ee!=N&&r(j,N,Z,ee,$)}function Oa(c,v){var N=c.V,j=c.Ba+c.c*c.C,q=v-c.C;if(e(v<=c.l.o),e(16>=q),0<q){var $=c.l,G=c.Ta,Z=c.Ua,ee=$.width;if(Un(c,q,N,j),q=Z=[Z],e((N=c.C)<(j=v)),e($.v<$.va),j>$.o&&(j=$.o),N<$.j){var re=$.j-N;N=$.j,q[0]+=re*ee}if(N>=j?N=0:(q[0]+=4*$.v,$.ka=N-$.j,$.U=$.va-$.v,$.T=j-N,N=1),N){if(Z=Z[0],11>(N=c.ca).S){var he=N.f.RGBA,be=(j=N.S,q=$.U,$=$.T,re=he.eb,he.A),xe=$;for(he=he.fb+c.Ma*he.A;0<xe--;){var ye=G,Le=Z,Ae=q,de=re,me=he;switch(j){case Yd:Jr(ye,Le,Ae,de,me);break;case Jd:Mr(ye,Le,Ae,de,me);break;case dg:Mr(ye,Le,Ae,de,me),Ci(de,me,0,Ae,1,0);break;case fy:ua(ye,Le,Ae,de,me);break;case Xd:kt(ye,Le,Ae,de,me,1);break;case fg:kt(ye,Le,Ae,de,me,1),Ci(de,me,0,Ae,1,0);break;case Zd:kt(ye,Le,Ae,de,me,0);break;case ef:kt(ye,Le,Ae,de,me,0),Ci(de,me,1,Ae,1,0);break;case hg:no(ye,Le,Ae,de,me);break;case pg:no(ye,Le,Ae,de,me),nn(de,me,Ae,1,0);break;case py:la(ye,Le,Ae,de,me);break;default:e(0)}Z+=ee,he+=be}c.Ma+=$}else alert("todo:EmitRescaledRowsYUVA");e(c.Ma<=N.height)}}c.C=v,e(c.C<=c.i)}function qi(c){var v;if(0<c.ua)return 0;for(v=0;v<c.Wb;++v){var N=c.Ya[v].G,j=c.Ya[v].H;if(0<N[1][j[1]+0].g||0<N[2][j[2]+0].g||0<N[3][j[3]+0].g)return 0}return 1}function _r(c,v,N,j,q,$){if(c.Z!=0){var G=c.qd,Z=c.rd;for(e(ao[c.Z]!=null);v<N;++v)ao[c.Z](G,Z,j,q,j,q,$),G=j,Z=q,q+=$;c.qd=G,c.rd=Z}}function Gr(c,v){var N=c.l.ma,j=N.Z==0||N.Z==1?c.l.j:c.C;if(j=c.C<j?j:c.C,e(v<=c.l.o),v>j){var q=c.l.width,$=N.ca,G=N.tb+q*j,Z=c.V,ee=c.Ba+c.c*j,re=c.gc;e(c.ab==1),e(re[0].hc==3),Hd(re[0],j,v,Z,ee,$,G),_r(N,j,v,$,G,q)}c.C=c.Ma=v}function Dr(c,v,N,j,q,$,G){var Z=c.$/j,ee=c.$%j,re=c.m,he=c.s,be=N+c.$,xe=be;q=N+j*q;var ye=N+j*$,Le=280+he.ua,Ae=c.Pb?Z:16777216,de=0<he.ua?he.Wa:null,me=he.wc,Pe=be<ye?Sn(he,ee,Z):null;e(c.C<$),e(ye<=q);var De=!1;e:for(;;){for(;De||be<ye;){var Ce=0;if(Z>=Ae){var Xe=be-N;e((Ae=c).Pb),Ae.wd=Ae.m,Ae.xd=Xe,0<Ae.s.ua&&Se(Ae.s.Wa,Ae.s.vb),Ae=Z+tA}if(ee&me||(Pe=Sn(he,ee,Z)),e(Pe!=null),Pe.Qb&&(v[be]=Pe.qb,De=!0),!De)if(se(re),Pe.jc){Ce=re,Xe=v;var We=be,pt=Pe.pd[Q(Ce)&or-1];e(Pe.jc),256>pt.g?(W(Ce,Ce.u+pt.g),Xe[We]=pt.value,Ce=0):(W(Ce,Ce.u+pt.g-256),e(256<=pt.value),Ce=pt.value),Ce==0&&(De=!0)}else Ce=Vn(Pe.G[0],Pe.H[0],re);if(re.h)break;if(De||256>Ce){if(!De)if(Pe.nd)v[be]=(Pe.qb|Ce<<8)>>>0;else{if(se(re),De=Vn(Pe.G[1],Pe.H[1],re),se(re),Xe=Vn(Pe.G[2],Pe.H[2],re),We=Vn(Pe.G[3],Pe.H[3],re),re.h)break;v[be]=(We<<24|De<<16|Ce<<8|Xe)>>>0}if(De=!1,++be,++ee>=j&&(ee=0,++Z,G!=null&&Z<=$&&!(Z%16)&&G(c,Z),de!=null))for(;xe<be;)Ce=v[xe++],de.X[(506832829*Ce&4294967295)>>>de.Mb]=Ce}else if(280>Ce){if(Ce=Wr(Ce-256,re),Xe=Vn(Pe.G[4],Pe.H[4],re),se(re),Xe=yr(j,Xe=Wr(Xe,re)),re.h)break;if(be-N<Xe||q-be<Ce)break e;for(We=0;We<Ce;++We)v[be+We]=v[be+We-Xe];for(be+=Ce,ee+=Ce;ee>=j;)ee-=j,++Z,G!=null&&Z<=$&&!(Z%16)&&G(c,Z);if(e(be<=q),ee&me&&(Pe=Sn(he,ee,Z)),de!=null)for(;xe<be;)Ce=v[xe++],de.X[(506832829*Ce&4294967295)>>>de.Mb]=Ce}else{if(!(Ce<Le))break e;for(De=Ce-280,e(de!=null);xe<be;)Ce=v[xe++],de.X[(506832829*Ce&4294967295)>>>de.Mb]=Ce;Ce=be,e(!(De>>>(Xe=de).Xa)),v[Ce]=Xe.X[De],De=!0}De||e(re.h==J(re))}if(c.Pb&&re.h&&be<q)e(c.m.h),c.a=5,c.m=c.wd,c.$=c.xd,0<c.s.ua&&Se(c.s.vb,c.s.Wa);else{if(re.h)break e;G!=null&&G(c,Z>$?$:Z),c.a=0,c.$=be-N}return 1}return c.a=3,0}function Fr(c){e(c!=null),c.vc=null,c.yc=null,c.Ya=null;var v=c.Wa;v!=null&&(v.X=null),c.vb=null,e(c!=null)}function Pn(){var c=new _u;return c==null?null:(c.a=0,c.xb=vy,Mn("Predictor","VP8LPredictors"),Mn("Predictor","VP8LPredictors_C"),Mn("PredictorAdd","VP8LPredictorsAdd"),Mn("PredictorAdd","VP8LPredictorsAdd_C"),zd=ct,wl=ot,Jr=ze,Mr=we,no=He,la=mt,ua=ft,y.VP8LMapColor32b=Nu,y.VP8LMapColor8b=$d,c)}function hi(c,v,N,j,q){var $=1,G=[c],Z=[v],ee=j.m,re=j.s,he=null,be=0;e:for(;;){if(N)for(;$&&ne(ee,1);){var xe=G,ye=Z,Le=j,Ae=1,de=Le.m,me=Le.gc[Le.ab],Pe=ne(de,2);if(Le.Oc&1<<Pe)$=0;else{switch(Le.Oc|=1<<Pe,me.hc=Pe,me.Ea=xe[0],me.nc=ye[0],me.K=[null],++Le.ab,e(4>=Le.ab),Pe){case 0:case 1:me.b=ne(de,3)+2,Ae=hi(Fe(me.Ea,me.b),Fe(me.nc,me.b),0,Le,me.K),me.K=me.K[0];break;case 3:var De,Ce=ne(de,8)+1,Xe=16<Ce?0:4<Ce?1:2<Ce?2:3;if(xe[0]=Fe(me.Ea,Xe),me.b=Xe,De=Ae=hi(Ce,1,0,Le,me.K)){var We,pt=Ce,Je=me,Kt=1<<(8>>Je.b),$t=s(Kt);if($t==null)De=0;else{var Mt=Je.K[0],Rt=Je.w;for($t[0]=Je.K[0][0],We=1;We<1*pt;++We)$t[We]=ce(Mt[Rt+We],$t[We-1]);for(;We<4*Kt;++We)$t[We]=0;Je.K[0]=null,Je.K[0]=$t,De=1}}Ae=De;break;case 2:break;default:e(0)}$=Ae}}if(G=G[0],Z=Z[0],$&&ne(ee,1)&&!($=1<=(be=ne(ee,4))&&11>=be)){j.a=3;break e}var en;if(en=$)t:{var Xt,It,Bn,Xr=j,Kn=G,Zr=Z,Wt=be,gi=N,vi=Xr.m,Zn=Xr.s,lr=[null],Ur=1,ji=0,Ps=eA[Wt];n:for(;;){if(gi&&ne(vi,1)){var er=ne(vi,3)+2,fa=Fe(Kn,er),Al=Fe(Zr,er),Tu=fa*Al;if(!hi(fa,Al,0,Xr,lr))break n;for(lr=lr[0],Zn.xc=er,Xt=0;Xt<Tu;++Xt){var oo=lr[Xt]>>8&65535;lr[Xt]=oo,oo>=Ur&&(Ur=oo+1)}}if(vi.h)break n;for(It=0;5>It;++It){var An=my[It];!It&&0<Wt&&(An+=1<<Wt),ji<An&&(ji=An)}var yg=a(Ur*Ps,I),Ay=Ur,Ey=a(Ay,M);if(Ey==null)var sf=null;else e(65536>=Ay),sf=Ey;var oh=s(ji);if(sf==null||oh==null||yg==null){Xr.a=1;break n}var af=yg;for(Xt=Bn=0;Xt<Ur;++Xt){var Zi=sf[Xt],Pu=Zi.G,Cu=Zi.H,ky=0,of=1,Iy=0;for(It=0;5>It;++It){An=my[It],Pu[It]=af,Cu[It]=Bn,!It&&0<Wt&&(An+=1<<Wt);i:{var lf,_g=An,uf=Xr,lh=oh,bA=af,xA=Bn,wg=0,lo=uf.m,SA=ne(lo,1);if(i(lh,0,0,_g),SA){var NA=ne(lo,1)+1,AA=ne(lo,1),Ty=ne(lo,AA==0?1:8);lh[Ty]=1,NA==2&&(lh[Ty=ne(lo,8)]=1);var cf=1}else{var Py=s(19),Cy=ne(lo,4)+4;if(19<Cy){uf.a=3;var hf=0;break i}for(lf=0;lf<Cy;++lf)Py[XN[lf]]=ne(lo,3);var bg=void 0,uh=void 0,Ly=uf,EA=Py,df=_g,Ry=lh,xg=0,uo=Ly.m,jy=8,Dy=a(128,I);r:for(;E(Dy,0,7,EA,19);){if(ne(uo,1)){var kA=2+2*ne(uo,3);if((bg=2+ne(uo,kA))>df)break r}else bg=df;for(uh=0;uh<df&&bg--;){se(uo);var Fy=Dy[0+(127&Q(uo))];W(uo,uo.u+Fy.g);var Lu=Fy.value;if(16>Lu)Ry[uh++]=Lu,Lu!=0&&(jy=Lu);else{var IA=Lu==16,Oy=Lu-16,TA=YN[Oy],My=ne(uo,QN[Oy])+TA;if(uh+My>df)break r;for(var PA=IA?jy:0;0<My--;)Ry[uh++]=PA}}xg=1;break r}xg||(Ly.a=3),cf=xg}(cf=cf&&!lo.h)&&(wg=E(bA,xA,8,lh,_g)),cf&&wg!=0?hf=wg:(uf.a=3,hf=0)}if(hf==0)break n;if(of&&JN[It]==1&&(of=af[Bn].g==0),ky+=af[Bn].g,Bn+=hf,3>=It){var ch,Sg=oh[0];for(ch=1;ch<An;++ch)oh[ch]>Sg&&(Sg=oh[ch]);Iy+=Sg}}if(Zi.nd=of,Zi.Qb=0,of&&(Zi.qb=(Pu[3][Cu[3]+0].value<<24|Pu[1][Cu[1]+0].value<<16|Pu[2][Cu[2]+0].value)>>>0,ky==0&&256>Pu[0][Cu[0]+0].value&&(Zi.Qb=1,Zi.qb+=Pu[0][Cu[0]+0].value<<8)),Zi.jc=!Zi.Qb&&6>Iy,Zi.jc){var ff,pa=Zi;for(ff=0;ff<or;++ff){var co=ff,ho=pa.pd[co],pf=pa.G[0][pa.H[0]+co];256<=pf.value?(ho.g=pf.g+256,ho.value=pf.value):(ho.g=0,ho.value=0,co>>=Tn(pf,8,ho),co>>=Tn(pa.G[1][pa.H[1]+co],16,ho),co>>=Tn(pa.G[2][pa.H[2]+co],0,ho),Tn(pa.G[3][pa.H[3]+co],24,ho))}}}Zn.vc=lr,Zn.Wb=Ur,Zn.Ya=sf,Zn.yc=yg,en=1;break t}en=0}if(!($=en)){j.a=3;break e}if(0<be){if(re.ua=1<<be,!Ze(re.Wa,be)){j.a=1,$=0;break e}}else re.ua=0;var Ng=j,Vy=G,CA=Z,Ag=Ng.s,Eg=Ag.xc;if(Ng.c=Vy,Ng.i=CA,Ag.md=Fe(Vy,Eg),Ag.wc=Eg==0?-1:(1<<Eg)-1,N){j.xb=lA;break e}if((he=s(G*Z))==null){j.a=1,$=0;break e}$=($=Dr(j,he,0,G,Z,Z,null))&&!ee.h;break e}return $?(q!=null?q[0]=he:(e(he==null),e(N)),j.$=0,N||Fr(re)):Fr(re),$}function ys(c,v){var N=c.c*c.i,j=N+v+16*v;return e(c.c<=v),c.V=s(j),c.V==null?(c.Ta=null,c.Ua=0,c.a=1,0):(c.Ta=c.V,c.Ua=c.Ba+N+v,1)}function _s(c,v){var N=c.C,j=v-N,q=c.V,$=c.Ba+c.c*N;for(e(v<=c.l.o);0<j;){var G=16<j?16:j,Z=c.l.ma,ee=c.l.width,re=ee*G,he=Z.ca,be=Z.tb+ee*N,xe=c.Ta,ye=c.Ua;Un(c,G,q,$),Ln(xe,ye,he,be,re),_r(Z,N,N+G,he,be,ee),j-=G,q+=G*c.c,N+=G}e(N==v),c.C=c.Ma=v}function ws(){this.ub=this.yd=this.td=this.Rb=0}function Js(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Xs(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function uu(){this.Yb=function(){var c=[];return function v(N,j,q){for(var $=q[j],G=0;G<$&&(N.push(q.length>j+1?[]:0),!(q.length<j+1));G++)v(N[G],j+1,q)}(c,0,[3,11]),c}()}function Ma(){this.jb=s(3),this.Wc=o([4,8],uu),this.Xc=o([4,17],uu)}function cu(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function bs(){this.ld=this.La=this.dd=this.tc=0}function xs(){this.Na=this.la=0}function zi(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Zs(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Wc(){this.uc=this.M=this.Nb=0,this.wa=Array(new bs),this.Y=0,this.ya=Array(new Zs),this.aa=0,this.l=new ea}function al(){this.y=s(16),this.f=s(8),this.ea=s(8)}function hu(){this.cb=this.a=0,this.sc="",this.m=new _e,this.Od=new ws,this.Kc=new Js,this.ed=new cu,this.Qa=new Xs,this.Ic=this.$c=this.Aa=0,this.D=new Wc,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=a(8,_e),this.ia=0,this.pb=a(4,zi),this.Pa=new Ma,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new al),this.Hd=0,this.rb=Array(new xs),this.sb=0,this.wa=Array(new bs),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Zs),this.L=this.aa=0,this.gd=o([4,2],bs),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function ea(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function ol(){var c=new hu;return c!=null&&(c.a=0,c.sc="OK",c.cb=0,c.Xb=0,sh||(sh=du)),c}function an(c,v,N){return c.a==0&&(c.a=v,c.sc=N,c.cb=0),0}function ll(c,v,N){return 3<=N&&c[v+0]==157&&c[v+1]==1&&c[v+2]==42}function ul(c,v){if(c==null)return 0;if(c.a=0,c.sc="OK",v==null)return an(c,2,"null VP8Io passed to VP8GetHeaders()");var N=v.data,j=v.w,q=v.ha;if(4>q)return an(c,7,"Truncated header.");var $=N[j+0]|N[j+1]<<8|N[j+2]<<16,G=c.Od;if(G.Rb=!(1&$),G.td=$>>1&7,G.yd=$>>4&1,G.ub=$>>5,3<G.td)return an(c,3,"Incorrect keyframe parameters.");if(!G.yd)return an(c,4,"Frame not displayable.");j+=3,q-=3;var Z=c.Kc;if(G.Rb){if(7>q)return an(c,7,"cannot parse picture header");if(!ll(N,j,q))return an(c,3,"Bad code word");Z.c=16383&(N[j+4]<<8|N[j+3]),Z.Td=N[j+4]>>6,Z.i=16383&(N[j+6]<<8|N[j+5]),Z.Ud=N[j+6]>>6,j+=7,q-=7,c.za=Z.c+15>>4,c.Ub=Z.i+15>>4,v.width=Z.c,v.height=Z.i,v.Da=0,v.j=0,v.v=0,v.va=v.width,v.o=v.height,v.da=0,v.ib=v.width,v.hb=v.height,v.U=v.width,v.T=v.height,i(($=c.Pa).jb,0,255,$.jb.length),e(($=c.Qa)!=null),$.Cb=0,$.Bb=0,$.Fb=1,i($.Zb,0,0,$.Zb.length),i($.Lb,0,0,$.Lb)}if(G.ub>q)return an(c,7,"bad partition length");te($=c.m,N,j,G.ub),j+=G.ub,q-=G.ub,G.Rb&&(Z.Ld=fe($),Z.Kd=fe($)),Z=c.Qa;var ee,re=c.Pa;if(e($!=null),e(Z!=null),Z.Cb=fe($),Z.Cb){if(Z.Bb=fe($),fe($)){for(Z.Fb=fe($),ee=0;4>ee;++ee)Z.Zb[ee]=fe($)?U($,7):0;for(ee=0;4>ee;++ee)Z.Lb[ee]=fe($)?U($,6):0}if(Z.Bb)for(ee=0;3>ee;++ee)re.jb[ee]=fe($)?V($,8):255}else Z.Bb=0;if($.Ka)return an(c,3,"cannot parse segment header");if((Z=c.ed).zd=fe($),Z.Tb=V($,6),Z.wb=V($,3),Z.Pc=fe($),Z.Pc&&fe($)){for(re=0;4>re;++re)fe($)&&(Z.vd[re]=U($,6));for(re=0;4>re;++re)fe($)&&(Z.od[re]=U($,6))}if(c.L=Z.Tb==0?0:Z.zd?1:2,$.Ka)return an(c,3,"cannot parse filter header");var he=q;if(q=ee=j,j=ee+he,Z=he,c.Xb=(1<<V(c.m,2))-1,he<3*(re=c.Xb))N=7;else{for(ee+=3*re,Z-=3*re,he=0;he<re;++he){var be=N[q+0]|N[q+1]<<8|N[q+2]<<16;be>Z&&(be=Z),te(c.Jc[+he],N,ee,be),ee+=be,Z-=be,q+=3}te(c.Jc[+re],N,ee,Z),N=ee<j?0:5}if(N!=0)return an(c,N,"cannot parse partitions");for(N=V(ee=c.m,7),q=fe(ee)?U(ee,4):0,j=fe(ee)?U(ee,4):0,Z=fe(ee)?U(ee,4):0,re=fe(ee)?U(ee,4):0,ee=fe(ee)?U(ee,4):0,he=c.Qa,be=0;4>be;++be){if(he.Cb){var xe=he.Zb[be];he.Fb||(xe+=N)}else{if(0<be){c.pb[be]=c.pb[0];continue}xe=N}var ye=c.pb[be];ye.Sc[0]=mg[zt(xe+q,127)],ye.Sc[1]=gg[zt(xe+0,127)],ye.Eb[0]=2*mg[zt(xe+j,127)],ye.Eb[1]=101581*gg[zt(xe+Z,127)]>>16,8>ye.Eb[1]&&(ye.Eb[1]=8),ye.Qc[0]=mg[zt(xe+re,117)],ye.Qc[1]=gg[zt(xe+ee,127)],ye.lc=xe+ee}if(!G.Rb)return an(c,4,"Not a key frame.");for(fe($),G=c.Pa,N=0;4>N;++N){for(q=0;8>q;++q)for(j=0;3>j;++j)for(Z=0;11>Z;++Z)re=pe($,aA[N][q][j][Z])?V($,8):iA[N][q][j][Z],G.Wc[N][q].Yb[j][Z]=re;for(q=0;17>q;++q)G.Xc[N][q]=G.Wc[N][oA[q]]}return c.kc=fe($),c.kc&&(c.Bd=V($,8)),c.cb=1}function du(c,v,N,j,q,$,G){var Z=v[q].Yb[N];for(N=0;16>q;++q){if(!pe(c,Z[N+0]))return q;for(;!pe(c,Z[N+1]);)if(Z=v[++q].Yb[0],N=0,q==16)return 16;var ee=v[q+1].Yb;if(pe(c,Z[N+2])){var re=c,he=0;if(pe(re,(xe=Z)[(be=N)+3]))if(pe(re,xe[be+6])){for(Z=0,be=2*(he=pe(re,xe[be+8]))+(xe=pe(re,xe[be+9+he])),he=0,xe=nA[be];xe[Z];++Z)he+=he+pe(re,xe[Z]);he+=3+(8<<be)}else pe(re,xe[be+7])?(he=7+2*pe(re,165),he+=pe(re,145)):he=5+pe(re,159);else he=pe(re,xe[be+4])?3+pe(re,xe[be+5]):2;Z=ee[2]}else he=1,Z=ee[1];ee=G+rA[q],0>(re=c).b&&le(re);var be,xe=re.b,ye=(be=re.Ca>>1)-(re.I>>xe)>>31;--re.b,re.Ca+=ye,re.Ca|=1,re.I-=(be+1&ye)<<xe,$[ee]=((he^ye)-ye)*j[(0<q)+0]}return 16}function cl(c){var v=c.rb[c.sb-1];v.la=0,v.Na=0,i(c.zc,0,0,c.zc.length),c.ja=0}function fu(c,v){if(c==null)return 0;if(v==null)return an(c,2,"NULL VP8Io parameter in VP8Decode().");if(!c.cb&&!ul(c,v))return 0;if(e(c.cb),v.ac==null||v.ac(v)){v.ob&&(c.L=0);var N=rf[c.L];if(c.L==2?(c.yb=0,c.zb=0):(c.yb=v.v-N>>4,c.zb=v.j-N>>4,0>c.yb&&(c.yb=0),0>c.zb&&(c.zb=0)),c.Va=v.o+15+N>>4,c.Hb=v.va+15+N>>4,c.Hb>c.za&&(c.Hb=c.za),c.Va>c.Ub&&(c.Va=c.Ub),0<c.L){var j=c.ed;for(N=0;4>N;++N){var q;if(c.Qa.Cb){var $=c.Qa.Lb[N];c.Qa.Fb||($+=j.Tb)}else $=j.Tb;for(q=0;1>=q;++q){var G=c.gd[N][q],Z=$;if(j.Pc&&(Z+=j.vd[0],q&&(Z+=j.od[0])),0<(Z=0>Z?0:63<Z?63:Z)){var ee=Z;0<j.wb&&(ee=4<j.wb?ee>>2:ee>>1)>9-j.wb&&(ee=9-j.wb),1>ee&&(ee=1),G.dd=ee,G.tc=2*Z+ee,G.ld=40<=Z?2:15<=Z?1:0}else G.tc=0;G.La=q}}}N=0}else an(c,6,"Frame setup failed"),N=c.a;if(N=N==0){if(N){c.$c=0,0<c.Aa||(c.Ic=wA);e:{N=c.Ic,j=4*(ee=c.za);var re=32*ee,he=ee+1,be=0<c.L?ee*(0<c.Aa?2:1):0,xe=(c.Aa==2?2:1)*ee;if((G=j+832+(q=3*(16*N+rf[c.L])/2*re)+($=c.Fa!=null&&0<c.Fa.length?c.Kc.c*c.Kc.i:0))!=G)N=0;else{if(G>c.Vb){if(c.Vb=0,c.Ec=s(G),c.Fc=0,c.Ec==null){N=an(c,1,"no memory during frame initialization.");break e}c.Vb=G}G=c.Ec,Z=c.Fc,c.Ac=G,c.Bc=Z,Z+=j,c.Gd=a(re,al),c.Hd=0,c.rb=a(he+1,xs),c.sb=1,c.wa=be?a(be,bs):null,c.Y=0,c.D.Nb=0,c.D.wa=c.wa,c.D.Y=c.Y,0<c.Aa&&(c.D.Y+=ee),e(!0),c.oc=G,c.pc=Z,Z+=832,c.ya=a(xe,Zs),c.aa=0,c.D.ya=c.ya,c.D.aa=c.aa,c.Aa==2&&(c.D.aa+=ee),c.R=16*ee,c.B=8*ee,ee=(re=rf[c.L])*c.R,re=re/2*c.B,c.sa=G,c.ta=Z+ee,c.qa=c.sa,c.ra=c.ta+16*N*c.R+re,c.Ha=c.qa,c.Ia=c.ra+8*N*c.B+re,c.$c=0,Z+=q,c.mb=$?G:null,c.nb=$?Z:null,e(Z+$<=c.Fc+c.Vb),cl(c),i(c.Ac,c.Bc,0,j),N=1}}if(N){if(v.ka=0,v.y=c.sa,v.O=c.ta,v.f=c.qa,v.N=c.ra,v.ea=c.Ha,v.Vd=c.Ia,v.fa=c.R,v.Rc=c.B,v.F=null,v.J=0,!Gd){for(N=-255;255>=N;++N)Gn[255+N]=0>N?-N:N;for(N=-1020;1020>=N;++N)ha[1020+N]=-128>N?-128:127<N?127:N;for(N=-112;112>=N;++N)ih[112+N]=-16>N?-16:15<N?15:N;for(N=-255;510>=N;++N)Iu[255+N]=0>N?0:255<N?255:N;Gd=1}Au=ra,ca=Ua,th=hl,Vr=Ht,Ti=na,Cn=ta,Eu=Wa,Wd=Qi,nh=Qa,bl=_l,xl=Ga,ro=sa,Sl=Ya,ku=Es,Nl=ia,io=pi,rh=Wn,Pi=yu,Xi[0]=ki,Xi[1]=Gc,Xi[2]=Ns,Xi[3]=Yc,Xi[4]=gu,Xi[5]=qa,Xi[6]=di,Xi[7]=fl,Xi[8]=Ha,Xi[9]=za,so[0]=Ss,so[1]=Qc,so[2]=$i,so[3]=Ba,so[4]=on,so[5]=mu,so[6]=dl,da[0]=Gi,da[1]=pu,da[2]=vu,da[3]=Wi,da[4]=qt,da[5]=pl,da[6]=ml,N=1}else N=0}N&&(N=function(ye,Le){for(ye.M=0;ye.M<ye.Va;++ye.M){var Ae,de=ye.Jc[ye.M&ye.Xb],me=ye.m,Pe=ye;for(Ae=0;Ae<Pe.za;++Ae){var De=me,Ce=Pe,Xe=Ce.Ac,We=Ce.Bc+4*Ae,pt=Ce.zc,Je=Ce.ya[Ce.aa+Ae];if(Ce.Qa.Bb?Je.$b=pe(De,Ce.Pa.jb[0])?2+pe(De,Ce.Pa.jb[2]):pe(De,Ce.Pa.jb[1]):Je.$b=0,Ce.kc&&(Je.Ad=pe(De,Ce.Bd)),Je.Za=!pe(De,145)+0,Je.Za){var Kt=Je.Ob,$t=0;for(Ce=0;4>Ce;++Ce){var Mt,Rt=pt[0+Ce];for(Mt=0;4>Mt;++Mt){Rt=sA[Xe[We+Mt]][Rt];for(var en=gy[pe(De,Rt[0])];0<en;)en=gy[2*en+pe(De,Rt[en])];Rt=-en,Xe[We+Mt]=Rt}r(Kt,$t,Xe,We,4),$t+=4,pt[0+Ce]=Rt}}else Rt=pe(De,156)?pe(De,128)?1:3:pe(De,163)?2:0,Je.Ob[0]=Rt,i(Xe,We,Rt,4),i(pt,0,Rt,4);Je.Dd=pe(De,142)?pe(De,114)?pe(De,183)?1:3:2:0}if(Pe.m.Ka)return an(ye,7,"Premature end-of-partition0 encountered.");for(;ye.ja<ye.za;++ye.ja){if(Pe=de,De=(me=ye).rb[me.sb-1],Xe=me.rb[me.sb+me.ja],Ae=me.ya[me.aa+me.ja],We=me.kc?Ae.Ad:0)De.la=Xe.la=0,Ae.Za||(De.Na=Xe.Na=0),Ae.Hc=0,Ae.Gc=0,Ae.ia=0;else{var Xt,It;if(De=Xe,Xe=Pe,We=me.Pa.Xc,pt=me.ya[me.aa+me.ja],Je=me.pb[pt.$b],Ce=pt.ad,Kt=0,$t=me.rb[me.sb-1],Rt=Mt=0,i(Ce,Kt,0,384),pt.Za)var Bn=0,Xr=We[3];else{en=s(16);var Kn=De.Na+$t.Na;if(Kn=sh(Xe,We[1],Kn,Je.Eb,0,en,0),De.Na=$t.Na=(0<Kn)+0,1<Kn)Au(en,0,Ce,Kt);else{var Zr=en[0]+3>>3;for(en=0;256>en;en+=16)Ce[Kt+en]=Zr}Bn=1,Xr=We[0]}var Wt=15&De.la,gi=15&$t.la;for(en=0;4>en;++en){var vi=1&gi;for(Zr=It=0;4>Zr;++Zr)Wt=Wt>>1|(vi=(Kn=sh(Xe,Xr,Kn=vi+(1&Wt),Je.Sc,Bn,Ce,Kt))>Bn)<<7,It=It<<2|(3<Kn?3:1<Kn?2:Ce[Kt+0]!=0),Kt+=16;Wt>>=4,gi=gi>>1|vi<<7,Mt=(Mt<<8|It)>>>0}for(Xr=Wt,Bn=gi>>4,Xt=0;4>Xt;Xt+=2){for(It=0,Wt=De.la>>4+Xt,gi=$t.la>>4+Xt,en=0;2>en;++en){for(vi=1&gi,Zr=0;2>Zr;++Zr)Kn=vi+(1&Wt),Wt=Wt>>1|(vi=0<(Kn=sh(Xe,We[2],Kn,Je.Qc,0,Ce,Kt)))<<3,It=It<<2|(3<Kn?3:1<Kn?2:Ce[Kt+0]!=0),Kt+=16;Wt>>=2,gi=gi>>1|vi<<5}Rt|=It<<4*Xt,Xr|=Wt<<4<<Xt,Bn|=(240&gi)<<Xt}De.la=Xr,$t.la=Bn,pt.Hc=Mt,pt.Gc=Rt,pt.ia=43690&Rt?0:Je.ia,We=!(Mt|Rt)}if(0<me.L&&(me.wa[me.Y+me.ja]=me.gd[Ae.$b][Ae.Za],me.wa[me.Y+me.ja].La|=!We),Pe.Ka)return an(ye,7,"Premature end-of-file encountered.")}if(cl(ye),me=Le,Pe=1,Ae=(de=ye).D,De=0<de.L&&de.M>=de.zb&&de.M<=de.Va,de.Aa==0)e:{if(Ae.M=de.M,Ae.uc=De,Is(de,Ae),Pe=1,Ae=(It=de.D).Nb,De=(Rt=rf[de.L])*de.R,Xe=Rt/2*de.B,en=16*Ae*de.R,Zr=8*Ae*de.B,We=de.sa,pt=de.ta-De+en,Je=de.qa,Ce=de.ra-Xe+Zr,Kt=de.Ha,$t=de.Ia-Xe+Zr,gi=(Wt=It.M)==0,Mt=Wt>=de.Va-1,de.Aa==2&&Is(de,It),It.uc)for(vi=(Kn=de).D.M,e(Kn.D.uc),It=Kn.yb;It<Kn.Hb;++It){Bn=It,Xr=vi;var Zn=(lr=(An=Kn).D).Nb;Xt=An.R;var lr=lr.wa[lr.Y+Bn],Ur=An.sa,ji=An.ta+16*Zn*Xt+16*Bn,Ps=lr.dd,er=lr.tc;if(er!=0)if(e(3<=er),An.L==1)0<Bn&&io(Ur,ji,Xt,er+4),lr.La&&Pi(Ur,ji,Xt,er),0<Xr&&Nl(Ur,ji,Xt,er+4),lr.La&&rh(Ur,ji,Xt,er);else{var fa=An.B,Al=An.qa,Tu=An.ra+8*Zn*fa+8*Bn,oo=An.Ha,An=An.Ia+8*Zn*fa+8*Bn;Zn=lr.ld,0<Bn&&(Wd(Ur,ji,Xt,er+4,Ps,Zn),bl(Al,Tu,oo,An,fa,er+4,Ps,Zn)),lr.La&&(ro(Ur,ji,Xt,er,Ps,Zn),ku(Al,Tu,oo,An,fa,er,Ps,Zn)),0<Xr&&(Eu(Ur,ji,Xt,er+4,Ps,Zn),nh(Al,Tu,oo,An,fa,er+4,Ps,Zn)),lr.La&&(xl(Ur,ji,Xt,er,Ps,Zn),Sl(Al,Tu,oo,An,fa,er,Ps,Zn))}}if(de.ia&&alert("todo:DitherRow"),me.put!=null){if(It=16*Wt,Wt=16*(Wt+1),gi?(me.y=de.sa,me.O=de.ta+en,me.f=de.qa,me.N=de.ra+Zr,me.ea=de.Ha,me.W=de.Ia+Zr):(It-=Rt,me.y=We,me.O=pt,me.f=Je,me.N=Ce,me.ea=Kt,me.W=$t),Mt||(Wt-=Rt),Wt>me.o&&(Wt=me.o),me.F=null,me.J=null,de.Fa!=null&&0<de.Fa.length&&It<Wt&&(me.J=eo(de,me,It,Wt-It),me.F=de.mb,me.F==null&&me.F.length==0)){Pe=an(de,3,"Could not decode alpha data.");break e}It<me.j&&(Rt=me.j-It,It=me.j,e(!(1&Rt)),me.O+=de.R*Rt,me.N+=de.B*(Rt>>1),me.W+=de.B*(Rt>>1),me.F!=null&&(me.J+=me.width*Rt)),It<Wt&&(me.O+=me.v,me.N+=me.v>>1,me.W+=me.v>>1,me.F!=null&&(me.J+=me.v),me.ka=It-me.j,me.U=me.va-me.v,me.T=Wt-It,Pe=me.put(me))}Ae+1!=de.Ic||Mt||(r(de.sa,de.ta-De,We,pt+16*de.R,De),r(de.qa,de.ra-Xe,Je,Ce+8*de.B,Xe),r(de.Ha,de.Ia-Xe,Kt,$t+8*de.B,Xe))}if(!Pe)return an(ye,6,"Output aborted.")}return 1}(c,v)),v.bc!=null&&v.bc(v),N&=1}return N?(c.cb=0,N):0}function Qr(c,v,N,j,q){q=c[v+N+32*j]+(q>>3),c[v+N+32*j]=-256&q?0>q?0:255:q}function Va(c,v,N,j,q,$){Qr(c,v,0,N,j+q),Qr(c,v,1,N,j+$),Qr(c,v,2,N,j-$),Qr(c,v,3,N,j-q)}function Nn(c){return(20091*c>>16)+c}function Or(c,v,N,j){var q,$=0,G=s(16);for(q=0;4>q;++q){var Z=c[v+0]+c[v+8],ee=c[v+0]-c[v+8],re=(35468*c[v+4]>>16)-Nn(c[v+12]),he=Nn(c[v+4])+(35468*c[v+12]>>16);G[$+0]=Z+he,G[$+1]=ee+re,G[$+2]=ee-re,G[$+3]=Z-he,$+=4,v++}for(q=$=0;4>q;++q)Z=(c=G[$+0]+4)+G[$+8],ee=c-G[$+8],re=(35468*G[$+4]>>16)-Nn(G[$+12]),Qr(N,j,0,0,Z+(he=Nn(G[$+4])+(35468*G[$+12]>>16))),Qr(N,j,1,0,ee+re),Qr(N,j,2,0,ee-re),Qr(N,j,3,0,Z-he),$++,j+=32}function ta(c,v,N,j){var q=c[v+0]+4,$=35468*c[v+4]>>16,G=Nn(c[v+4]),Z=35468*c[v+1]>>16;Va(N,j,0,q+G,c=Nn(c[v+1]),Z),Va(N,j,1,q+$,c,Z),Va(N,j,2,q-$,c,Z),Va(N,j,3,q-G,c,Z)}function Ua(c,v,N,j,q){Or(c,v,N,j),q&&Or(c,v+16,N,j+4)}function hl(c,v,N,j){ca(c,v+0,N,j,1),ca(c,v+32,N,j+128,1)}function Ht(c,v,N,j){var q;for(c=c[v+0]+4,q=0;4>q;++q)for(v=0;4>v;++v)Qr(N,j,v,q,c)}function na(c,v,N,j){c[v+0]&&Vr(c,v+0,N,j),c[v+16]&&Vr(c,v+16,N,j+4),c[v+32]&&Vr(c,v+32,N,j+128),c[v+48]&&Vr(c,v+48,N,j+128+4)}function ra(c,v,N,j){var q,$=s(16);for(q=0;4>q;++q){var G=c[v+0+q]+c[v+12+q],Z=c[v+4+q]+c[v+8+q],ee=c[v+4+q]-c[v+8+q],re=c[v+0+q]-c[v+12+q];$[0+q]=G+Z,$[8+q]=G-Z,$[4+q]=re+ee,$[12+q]=re-ee}for(q=0;4>q;++q)G=(c=$[0+4*q]+3)+$[3+4*q],Z=$[1+4*q]+$[2+4*q],ee=$[1+4*q]-$[2+4*q],re=c-$[3+4*q],N[j+0]=G+Z>>3,N[j+16]=re+ee>>3,N[j+32]=G-Z>>3,N[j+48]=re-ee>>3,j+=64}function Hi(c,v,N){var j,q=v-32,$=mi,G=255-c[q-1];for(j=0;j<N;++j){var Z,ee=$,re=G+c[v-1];for(Z=0;Z<N;++Z)c[v+Z]=ee[re+c[q+Z]];v+=32}}function Gc(c,v){Hi(c,v,4)}function pu(c,v){Hi(c,v,8)}function Qc(c,v){Hi(c,v,16)}function $i(c,v){var N;for(N=0;16>N;++N)r(c,v+32*N,c,v-32,16)}function Ba(c,v){var N;for(N=16;0<N;--N)i(c,v,c[v-1],16),v+=32}function Ka(c,v,N){var j;for(j=0;16>j;++j)i(v,N+32*j,c,16)}function Ss(c,v){var N,j=16;for(N=0;16>N;++N)j+=c[v-1+32*N]+c[v+N-32];Ka(j>>5,c,v)}function on(c,v){var N,j=8;for(N=0;16>N;++N)j+=c[v-1+32*N];Ka(j>>4,c,v)}function mu(c,v){var N,j=8;for(N=0;16>N;++N)j+=c[v+N-32];Ka(j>>4,c,v)}function dl(c,v){Ka(128,c,v)}function yt(c,v,N){return c+2*v+N+2>>2}function Ns(c,v){var N,j=v-32;for(j=new Uint8Array([yt(c[j-1],c[j+0],c[j+1]),yt(c[j+0],c[j+1],c[j+2]),yt(c[j+1],c[j+2],c[j+3]),yt(c[j+2],c[j+3],c[j+4])]),N=0;4>N;++N)r(c,v+32*N,j,0,j.length)}function Yc(c,v){var N=c[v-1],j=c[v-1+32],q=c[v-1+64],$=c[v-1+96];ke(c,v+0,16843009*yt(c[v-1-32],N,j)),ke(c,v+32,16843009*yt(N,j,q)),ke(c,v+64,16843009*yt(j,q,$)),ke(c,v+96,16843009*yt(q,$,$))}function ki(c,v){var N,j=4;for(N=0;4>N;++N)j+=c[v+N-32]+c[v-1+32*N];for(j>>=3,N=0;4>N;++N)i(c,v+32*N,j,4)}function gu(c,v){var N=c[v-1+0],j=c[v-1+32],q=c[v-1+64],$=c[v-1-32],G=c[v+0-32],Z=c[v+1-32],ee=c[v+2-32],re=c[v+3-32];c[v+0+96]=yt(j,q,c[v-1+96]),c[v+1+96]=c[v+0+64]=yt(N,j,q),c[v+2+96]=c[v+1+64]=c[v+0+32]=yt($,N,j),c[v+3+96]=c[v+2+64]=c[v+1+32]=c[v+0+0]=yt(G,$,N),c[v+3+64]=c[v+2+32]=c[v+1+0]=yt(Z,G,$),c[v+3+32]=c[v+2+0]=yt(ee,Z,G),c[v+3+0]=yt(re,ee,Z)}function di(c,v){var N=c[v+1-32],j=c[v+2-32],q=c[v+3-32],$=c[v+4-32],G=c[v+5-32],Z=c[v+6-32],ee=c[v+7-32];c[v+0+0]=yt(c[v+0-32],N,j),c[v+1+0]=c[v+0+32]=yt(N,j,q),c[v+2+0]=c[v+1+32]=c[v+0+64]=yt(j,q,$),c[v+3+0]=c[v+2+32]=c[v+1+64]=c[v+0+96]=yt(q,$,G),c[v+3+32]=c[v+2+64]=c[v+1+96]=yt($,G,Z),c[v+3+64]=c[v+2+96]=yt(G,Z,ee),c[v+3+96]=yt(Z,ee,ee)}function qa(c,v){var N=c[v-1+0],j=c[v-1+32],q=c[v-1+64],$=c[v-1-32],G=c[v+0-32],Z=c[v+1-32],ee=c[v+2-32],re=c[v+3-32];c[v+0+0]=c[v+1+64]=$+G+1>>1,c[v+1+0]=c[v+2+64]=G+Z+1>>1,c[v+2+0]=c[v+3+64]=Z+ee+1>>1,c[v+3+0]=ee+re+1>>1,c[v+0+96]=yt(q,j,N),c[v+0+64]=yt(j,N,$),c[v+0+32]=c[v+1+96]=yt(N,$,G),c[v+1+32]=c[v+2+96]=yt($,G,Z),c[v+2+32]=c[v+3+96]=yt(G,Z,ee),c[v+3+32]=yt(Z,ee,re)}function fl(c,v){var N=c[v+0-32],j=c[v+1-32],q=c[v+2-32],$=c[v+3-32],G=c[v+4-32],Z=c[v+5-32],ee=c[v+6-32],re=c[v+7-32];c[v+0+0]=N+j+1>>1,c[v+1+0]=c[v+0+64]=j+q+1>>1,c[v+2+0]=c[v+1+64]=q+$+1>>1,c[v+3+0]=c[v+2+64]=$+G+1>>1,c[v+0+32]=yt(N,j,q),c[v+1+32]=c[v+0+96]=yt(j,q,$),c[v+2+32]=c[v+1+96]=yt(q,$,G),c[v+3+32]=c[v+2+96]=yt($,G,Z),c[v+3+64]=yt(G,Z,ee),c[v+3+96]=yt(Z,ee,re)}function za(c,v){var N=c[v-1+0],j=c[v-1+32],q=c[v-1+64],$=c[v-1+96];c[v+0+0]=N+j+1>>1,c[v+2+0]=c[v+0+32]=j+q+1>>1,c[v+2+32]=c[v+0+64]=q+$+1>>1,c[v+1+0]=yt(N,j,q),c[v+3+0]=c[v+1+32]=yt(j,q,$),c[v+3+32]=c[v+1+64]=yt(q,$,$),c[v+3+64]=c[v+2+64]=c[v+0+96]=c[v+1+96]=c[v+2+96]=c[v+3+96]=$}function Ha(c,v){var N=c[v-1+0],j=c[v-1+32],q=c[v-1+64],$=c[v-1+96],G=c[v-1-32],Z=c[v+0-32],ee=c[v+1-32],re=c[v+2-32];c[v+0+0]=c[v+2+32]=N+G+1>>1,c[v+0+32]=c[v+2+64]=j+N+1>>1,c[v+0+64]=c[v+2+96]=q+j+1>>1,c[v+0+96]=$+q+1>>1,c[v+3+0]=yt(Z,ee,re),c[v+2+0]=yt(G,Z,ee),c[v+1+0]=c[v+3+32]=yt(N,G,Z),c[v+1+32]=c[v+3+64]=yt(j,N,G),c[v+1+64]=c[v+3+96]=yt(q,j,N),c[v+1+96]=yt($,q,j)}function vu(c,v){var N;for(N=0;8>N;++N)r(c,v+32*N,c,v-32,8)}function Wi(c,v){var N;for(N=0;8>N;++N)i(c,v,c[v-1],8),v+=32}function fi(c,v,N){var j;for(j=0;8>j;++j)i(v,N+32*j,c,8)}function Gi(c,v){var N,j=8;for(N=0;8>N;++N)j+=c[v+N-32]+c[v-1+32*N];fi(j>>4,c,v)}function pl(c,v){var N,j=4;for(N=0;8>N;++N)j+=c[v+N-32];fi(j>>3,c,v)}function qt(c,v){var N,j=4;for(N=0;8>N;++N)j+=c[v-1+32*N];fi(j>>3,c,v)}function ml(c,v){fi(128,c,v)}function $a(c,v,N){var j=c[v-N],q=c[v+0],$=3*(q-j)+cg[1020+c[v-2*N]-c[v+N]],G=Qd[112+($+4>>3)];c[v-N]=mi[255+j+Qd[112+($+3>>3)]],c[v+0]=mi[255+q-G]}function gl(c,v,N,j){var q=c[v+0],$=c[v+N];return Li[255+c[v-2*N]-c[v-N]]>j||Li[255+$-q]>j}function vl(c,v,N,j){return 4*Li[255+c[v-N]-c[v+0]]+Li[255+c[v-2*N]-c[v+N]]<=j}function yl(c,v,N,j,q){var $=c[v-3*N],G=c[v-2*N],Z=c[v-N],ee=c[v+0],re=c[v+N],he=c[v+2*N],be=c[v+3*N];return 4*Li[255+Z-ee]+Li[255+G-re]>j?0:Li[255+c[v-4*N]-$]<=q&&Li[255+$-G]<=q&&Li[255+G-Z]<=q&&Li[255+be-he]<=q&&Li[255+he-re]<=q&&Li[255+re-ee]<=q}function ia(c,v,N,j){var q=2*j+1;for(j=0;16>j;++j)vl(c,v+j,N,q)&&$a(c,v+j,N)}function pi(c,v,N,j){var q=2*j+1;for(j=0;16>j;++j)vl(c,v+j*N,1,q)&&$a(c,v+j*N,1)}function Wn(c,v,N,j){var q;for(q=3;0<q;--q)ia(c,v+=4*N,N,j)}function yu(c,v,N,j){var q;for(q=3;0<q;--q)pi(c,v+=4,N,j)}function As(c,v,N,j,q,$,G,Z){for($=2*$+1;0<q--;){if(yl(c,v,N,$,G))if(gl(c,v,N,Z))$a(c,v,N);else{var ee=c,re=v,he=N,be=ee[re-2*he],xe=ee[re-he],ye=ee[re+0],Le=ee[re+he],Ae=ee[re+2*he],de=27*(Pe=cg[1020+3*(ye-xe)+cg[1020+be-Le]])+63>>7,me=18*Pe+63>>7,Pe=9*Pe+63>>7;ee[re-3*he]=mi[255+ee[re-3*he]+Pe],ee[re-2*he]=mi[255+be+me],ee[re-he]=mi[255+xe+de],ee[re+0]=mi[255+ye-de],ee[re+he]=mi[255+Le-me],ee[re+2*he]=mi[255+Ae-Pe]}v+=j}}function sr(c,v,N,j,q,$,G,Z){for($=2*$+1;0<q--;){if(yl(c,v,N,$,G))if(gl(c,v,N,Z))$a(c,v,N);else{var ee=c,re=v,he=N,be=ee[re-he],xe=ee[re+0],ye=ee[re+he],Le=Qd[112+((Ae=3*(xe-be))+4>>3)],Ae=Qd[112+(Ae+3>>3)],de=Le+1>>1;ee[re-2*he]=mi[255+ee[re-2*he]+de],ee[re-he]=mi[255+be+Ae],ee[re+0]=mi[255+xe-Le],ee[re+he]=mi[255+ye-de]}v+=j}}function Wa(c,v,N,j,q,$){As(c,v,N,1,16,j,q,$)}function Qi(c,v,N,j,q,$){As(c,v,1,N,16,j,q,$)}function Ga(c,v,N,j,q,$){var G;for(G=3;0<G;--G)sr(c,v+=4*N,N,1,16,j,q,$)}function sa(c,v,N,j,q,$){var G;for(G=3;0<G;--G)sr(c,v+=4,1,N,16,j,q,$)}function Qa(c,v,N,j,q,$,G,Z){As(c,v,q,1,8,$,G,Z),As(N,j,q,1,8,$,G,Z)}function _l(c,v,N,j,q,$,G,Z){As(c,v,1,q,8,$,G,Z),As(N,j,1,q,8,$,G,Z)}function Ya(c,v,N,j,q,$,G,Z){sr(c,v+4*q,q,1,8,$,G,Z),sr(N,j+4*q,q,1,8,$,G,Z)}function Es(c,v,N,j,q,$,G,Z){sr(c,v+4,1,q,8,$,G,Z),sr(N,j+4,1,q,8,$,G,Z)}function aa(){this.ba=new $n,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Dt,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Ja(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function oa(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Xa(){this.ua=0,this.Wa=new ae,this.vb=new ae,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new M,this.yc=new I}function _u(){this.xb=this.a=0,this.l=new ea,this.ca=new $n,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new O,this.Pb=0,this.wd=new O,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Xa,this.ab=0,this.gc=a(4,oa),this.Oc=0}function Yi(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new ea,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function ks(c,v,N,j,q,$,G){for(c=c==null?0:c[v+0],v=0;v<G;++v)q[$+v]=c+N[j+v]&255,c=q[$+v]}function Za(c,v,N,j,q,$,G){var Z;if(c==null)ks(null,null,N,j,q,$,G);else for(Z=0;Z<G;++Z)q[$+Z]=c[v+Z]+N[j+Z]&255}function wr(c,v,N,j,q,$,G){if(c==null)ks(null,null,N,j,q,$,G);else{var Z,ee=c[v+0],re=ee,he=ee;for(Z=0;Z<G;++Z)re=he+(ee=c[v+Z])-re,he=N[j+Z]+(-256&re?0>re?0:255:re)&255,re=ee,q[$+Z]=he}}function eo(c,v,N,j){var q=v.width,$=v.o;if(e(c!=null&&v!=null),0>N||0>=j||N+j>$)return null;if(!c.Cc){if(c.ga==null){var G;if(c.ga=new Yi,(G=c.ga==null)||(G=v.width*v.o,e(c.Gb.length==0),c.Gb=s(G),c.Uc=0,c.Gb==null?G=0:(c.mb=c.Gb,c.nb=c.Uc,c.rc=null,G=1),G=!G),!G){G=c.ga;var Z=c.Fa,ee=c.P,re=c.qc,he=c.mb,be=c.nb,xe=ee+1,ye=re-1,Le=G.l;if(e(Z!=null&&he!=null&&v!=null),ao[0]=null,ao[1]=ks,ao[2]=Za,ao[3]=wr,G.ca=he,G.tb=be,G.c=v.width,G.i=v.height,e(0<G.c&&0<G.i),1>=re)v=0;else if(G.$a=Z[ee+0]>>0&3,G.Z=Z[ee+0]>>2&3,G.Lc=Z[ee+0]>>4&3,ee=Z[ee+0]>>6&3,0>G.$a||1<G.$a||4<=G.Z||1<G.Lc||ee)v=0;else if(Le.put=fn,Le.ac=Jt,Le.bc=ci,Le.ma=G,Le.width=v.width,Le.height=v.height,Le.Da=v.Da,Le.v=v.v,Le.va=v.va,Le.j=v.j,Le.o=v.o,G.$a)e:{e(G.$a==1),v=Pn();t:for(;;){if(v==null){v=0;break e}if(e(G!=null),G.mc=v,v.c=G.c,v.i=G.i,v.l=G.l,v.l.ma=G,v.l.width=G.c,v.l.height=G.i,v.a=0,z(v.m,Z,xe,ye),!hi(G.c,G.i,1,v,null)||(v.ab==1&&v.gc[0].hc==3&&qi(v.s)?(G.ic=1,Z=v.c*v.i,v.Ta=null,v.Ua=0,v.V=s(Z),v.Ba=0,v.V==null?(v.a=1,v=0):v=1):(G.ic=0,v=ys(v,G.c)),!v))break t;v=1;break e}G.mc=null,v=0}else v=ye>=G.c*G.i;G=!v}if(G)return null;c.ga.Lc!=1?c.Ga=0:j=$-N}e(c.ga!=null),e(N+j<=$);e:{if(v=(Z=c.ga).c,$=Z.l.o,Z.$a==0){if(xe=c.rc,ye=c.Vc,Le=c.Fa,ee=c.P+1+N*v,re=c.mb,he=c.nb+N*v,e(ee<=c.P+c.qc),Z.Z!=0)for(e(ao[Z.Z]!=null),G=0;G<j;++G)ao[Z.Z](xe,ye,Le,ee,re,he,v),xe=re,ye=he,he+=v,ee+=v;else for(G=0;G<j;++G)r(re,he,Le,ee,v),xe=re,ye=he,he+=v,ee+=v;c.rc=xe,c.Vc=ye}else{if(e(Z.mc!=null),v=N+j,e((G=Z.mc)!=null),e(v<=G.i),G.C>=v)v=1;else if(Z.ic||ve(),Z.ic){Z=G.V,xe=G.Ba,ye=G.c;var Ae=G.i,de=(Le=1,ee=G.$/ye,re=G.$%ye,he=G.m,be=G.s,G.$),me=ye*Ae,Pe=ye*v,De=be.wc,Ce=de<Pe?Sn(be,re,ee):null;e(de<=me),e(v<=Ae),e(qi(be));t:for(;;){for(;!he.h&&de<Pe;){if(re&De||(Ce=Sn(be,re,ee)),e(Ce!=null),se(he),256>(Ae=Vn(Ce.G[0],Ce.H[0],he)))Z[xe+de]=Ae,++de,++re>=ye&&(re=0,++ee<=v&&!(ee%16)&&Gr(G,ee));else{if(!(280>Ae)){Le=0;break t}Ae=Wr(Ae-256,he);var Xe,We=Vn(Ce.G[4],Ce.H[4],he);if(se(he),!(de>=(We=yr(ye,We=Wr(We,he)))&&me-de>=Ae)){Le=0;break t}for(Xe=0;Xe<Ae;++Xe)Z[xe+de+Xe]=Z[xe+de+Xe-We];for(de+=Ae,re+=Ae;re>=ye;)re-=ye,++ee<=v&&!(ee%16)&&Gr(G,ee);de<Pe&&re&De&&(Ce=Sn(be,re,ee))}e(he.h==J(he))}Gr(G,ee>v?v:ee);break t}!Le||he.h&&de<me?(Le=0,G.a=he.h?5:3):G.$=de,v=Le}else v=Dr(G,G.V,G.Ba,G.c,G.i,v,_s);if(!v){j=0;break e}}N+j>=$&&(c.Cc=1),j=1}if(!j)return null;if(c.Cc&&((j=c.ga)!=null&&(j.mc=null),c.ga=null,0<c.Ga))return alert("todo:WebPDequantizeLevels"),null}return c.nb+N*q}function w(c,v,N,j,q,$){for(;0<q--;){var G,Z=c,ee=v+(N?1:0),re=c,he=v+(N?0:3);for(G=0;G<j;++G){var be=re[he+4*G];be!=255&&(be*=32897,Z[ee+4*G+0]=Z[ee+4*G+0]*be>>23,Z[ee+4*G+1]=Z[ee+4*G+1]*be>>23,Z[ee+4*G+2]=Z[ee+4*G+2]*be>>23)}v+=$}}function K(c,v,N,j,q){for(;0<j--;){var $;for($=0;$<N;++$){var G=c[v+2*$+0],Z=15&(re=c[v+2*$+1]),ee=4369*Z,re=(240&re|re>>4)*ee>>16;c[v+2*$+0]=(240&G|G>>4)*ee>>16&240|(15&G|G<<4)*ee>>16>>4&15,c[v+2*$+1]=240&re|Z}v+=q}}function ie(c,v,N,j,q,$,G,Z){var ee,re,he=255;for(re=0;re<q;++re){for(ee=0;ee<j;++ee){var be=c[v+ee];$[G+4*ee]=be,he&=be}v+=N,G+=Z}return he!=255}function ue(c,v,N,j,q){var $;for($=0;$<q;++$)N[j+$]=c[v+$]>>8}function ve(){Ci=w,nn=K,rn=ie,Ln=ue}function Ee(c,v,N){y[c]=function(j,q,$,G,Z,ee,re,he,be,xe,ye,Le,Ae,de,me,Pe,De){var Ce,Xe=De-1>>1,We=Z[ee+0]|re[he+0]<<16,pt=be[xe+0]|ye[Le+0]<<16;e(j!=null);var Je=3*We+pt+131074>>2;for(v(j[q+0],255&Je,Je>>16,Ae,de),$!=null&&(Je=3*pt+We+131074>>2,v($[G+0],255&Je,Je>>16,me,Pe)),Ce=1;Ce<=Xe;++Ce){var Kt=Z[ee+Ce]|re[he+Ce]<<16,$t=be[xe+Ce]|ye[Le+Ce]<<16,Mt=We+Kt+pt+$t+524296,Rt=Mt+2*(Kt+pt)>>3;Je=Rt+We>>1,We=(Mt=Mt+2*(We+$t)>>3)+Kt>>1,v(j[q+2*Ce-1],255&Je,Je>>16,Ae,de+(2*Ce-1)*N),v(j[q+2*Ce-0],255&We,We>>16,Ae,de+(2*Ce-0)*N),$!=null&&(Je=Mt+pt>>1,We=Rt+$t>>1,v($[G+2*Ce-1],255&Je,Je>>16,me,Pe+(2*Ce-1)*N),v($[G+2*Ce+0],255&We,We>>16,me,Pe+(2*Ce+0)*N)),We=Kt,pt=$t}1&De||(Je=3*We+pt+131074>>2,v(j[q+De-1],255&Je,Je>>16,Ae,de+(De-1)*N),$!=null&&(Je=3*pt+We+131074>>2,v($[G+De-1],255&Je,Je>>16,me,Pe+(De-1)*N)))}}function Oe(){Ri[Yd]=uA,Ri[Jd]=yy,Ri[fy]=cA,Ri[Xd]=_y,Ri[Zd]=wy,Ri[hg]=by,Ri[py]=hA,Ri[dg]=yy,Ri[fg]=_y,Ri[ef]=wy,Ri[pg]=by}function Qe(c){return c&-16384?0>c?0:255:c>>dA}function d(c,v){return Qe((19077*c>>8)+(26149*v>>8)-14234)}function T(c,v,N){return Qe((19077*c>>8)-(6419*v>>8)-(13320*N>>8)+8708)}function D(c,v){return Qe((19077*c>>8)+(33050*v>>8)-17685)}function X(c,v,N,j,q){j[q+0]=d(c,N),j[q+1]=T(c,v,N),j[q+2]=D(c,v)}function ge(c,v,N,j,q){j[q+0]=D(c,v),j[q+1]=T(c,v,N),j[q+2]=d(c,N)}function Ne(c,v,N,j,q){var $=T(c,v,N);v=$<<3&224|D(c,v)>>3,j[q+0]=248&d(c,N)|$>>5,j[q+1]=v}function Ve(c,v,N,j,q){var $=240&D(c,v)|15;j[q+0]=240&d(c,N)|T(c,v,N)>>4,j[q+1]=$}function xt(c,v,N,j,q){j[q+0]=255,X(c,v,N,j,q+1)}function Lt(c,v,N,j,q){ge(c,v,N,j,q),j[q+3]=255}function St(c,v,N,j,q){X(c,v,N,j,q),j[q+3]=255}function zt(c,v){return 0>c?0:c>v?v:c}function Zt(c,v,N){y[c]=function(j,q,$,G,Z,ee,re,he,be){for(var xe=he+(-2&be)*N;he!=xe;)v(j[q+0],$[G+0],Z[ee+0],re,he),v(j[q+1],$[G+0],Z[ee+0],re,he+N),q+=2,++G,++ee,he+=2*N;1&be&&v(j[q+0],$[G+0],Z[ee+0],re,he)}}function Ji(c,v,N){return N==0?c==0?v==0?6:5:v==0?4:0:N}function ar(c,v,N,j,q){switch(c>>>30){case 3:ca(v,N,j,q,0);break;case 2:Cn(v,N,j,q);break;case 1:Vr(v,N,j,q)}}function Is(c,v){var N,j,q=v.M,$=v.Nb,G=c.oc,Z=c.pc+40,ee=c.oc,re=c.pc+584,he=c.oc,be=c.pc+600;for(N=0;16>N;++N)G[Z+32*N-1]=129;for(N=0;8>N;++N)ee[re+32*N-1]=129,he[be+32*N-1]=129;for(0<q?G[Z-1-32]=ee[re-1-32]=he[be-1-32]=129:(i(G,Z-32-1,127,21),i(ee,re-32-1,127,9),i(he,be-32-1,127,9)),j=0;j<c.za;++j){var xe=v.ya[v.aa+j];if(0<j){for(N=-1;16>N;++N)r(G,Z+32*N-4,G,Z+32*N+12,4);for(N=-1;8>N;++N)r(ee,re+32*N-4,ee,re+32*N+4,4),r(he,be+32*N-4,he,be+32*N+4,4)}var ye=c.Gd,Le=c.Hd+j,Ae=xe.ad,de=xe.Hc;if(0<q&&(r(G,Z-32,ye[Le].y,0,16),r(ee,re-32,ye[Le].f,0,8),r(he,be-32,ye[Le].ea,0,8)),xe.Za){var me=G,Pe=Z-32+16;for(0<q&&(j>=c.za-1?i(me,Pe,ye[Le].y[15],4):r(me,Pe,ye[Le+1].y,0,4)),N=0;4>N;N++)me[Pe+128+N]=me[Pe+256+N]=me[Pe+384+N]=me[Pe+0+N];for(N=0;16>N;++N,de<<=2)me=G,Pe=Z+Sy[N],Xi[xe.Ob[N]](me,Pe),ar(de,Ae,16*+N,me,Pe)}else if(me=Ji(j,q,xe.Ob[0]),so[me](G,Z),de!=0)for(N=0;16>N;++N,de<<=2)ar(de,Ae,16*+N,G,Z+Sy[N]);for(N=xe.Gc,me=Ji(j,q,xe.Dd),da[me](ee,re),da[me](he,be),de=Ae,me=ee,Pe=re,255&(xe=N>>0)&&(170&xe?th(de,256,me,Pe):Ti(de,256,me,Pe)),xe=he,de=be,255&(N>>=8)&&(170&N?th(Ae,320,xe,de):Ti(Ae,320,xe,de)),q<c.Ub-1&&(r(ye[Le].y,0,G,Z+480,16),r(ye[Le].f,0,ee,re+224,8),r(ye[Le].ea,0,he,be+224,8)),N=8*$*c.B,ye=c.sa,Le=c.ta+16*j+16*$*c.R,Ae=c.qa,xe=c.ra+8*j+N,de=c.Ha,me=c.Ia+8*j+N,N=0;16>N;++N)r(ye,Le+N*c.R,G,Z+32*N,16);for(N=0;8>N;++N)r(Ae,xe+N*c.B,ee,re+32*N,8),r(de,me+N*c.B,he,be+32*N,8)}}function Ts(c,v,N,j,q,$,G,Z,ee){var re=[0],he=[0],be=0,xe=ee!=null?ee.kd:0,ye=ee??new Ja;if(c==null||12>N)return 7;ye.data=c,ye.w=v,ye.ha=N,v=[v],N=[N],ye.gb=[ye.gb];e:{var Le=v,Ae=N,de=ye.gb;if(e(c!=null),e(Ae!=null),e(de!=null),de[0]=0,12<=Ae[0]&&!n(c,Le[0],"RIFF")){if(n(c,Le[0]+8,"WEBP")){de=3;break e}var me=Ke(c,Le[0]+4);if(12>me||4294967286<me){de=3;break e}if(xe&&me>Ae[0]-8){de=7;break e}de[0]=me,Le[0]+=12,Ae[0]-=12}de=0}if(de!=0)return de;for(me=0<ye.gb[0],N=N[0];;){e:{var Pe=c;Ae=v,de=N;var De=re,Ce=he,Xe=Le=[0];if((Je=be=[be])[0]=0,8>de[0])de=7;else{if(!n(Pe,Ae[0],"VP8X")){if(Ke(Pe,Ae[0]+4)!=10){de=3;break e}if(18>de[0]){de=7;break e}var We=Ke(Pe,Ae[0]+8),pt=1+je(Pe,Ae[0]+12);if(2147483648<=pt*(Pe=1+je(Pe,Ae[0]+15))){de=3;break e}Xe!=null&&(Xe[0]=We),De!=null&&(De[0]=pt),Ce!=null&&(Ce[0]=Pe),Ae[0]+=18,de[0]-=18,Je[0]=1}de=0}}if(be=be[0],Le=Le[0],de!=0)return de;if(Ae=!!(2&Le),!me&&be)return 3;if($!=null&&($[0]=!!(16&Le)),G!=null&&(G[0]=Ae),Z!=null&&(Z[0]=0),G=re[0],Le=he[0],be&&Ae&&ee==null){de=0;break}if(4>N){de=7;break}if(me&&be||!me&&!be&&!n(c,v[0],"ALPH")){N=[N],ye.na=[ye.na],ye.P=[ye.P],ye.Sa=[ye.Sa];e:{We=c,de=v,me=N;var Je=ye.gb;De=ye.na,Ce=ye.P,Xe=ye.Sa,pt=22,e(We!=null),e(me!=null),Pe=de[0];var Kt=me[0];for(e(De!=null),e(Xe!=null),De[0]=null,Ce[0]=null,Xe[0]=0;;){if(de[0]=Pe,me[0]=Kt,8>Kt){de=7;break e}var $t=Ke(We,Pe+4);if(4294967286<$t){de=3;break e}var Mt=8+$t+1&-2;if(pt+=Mt,0<Je&&pt>Je){de=3;break e}if(!n(We,Pe,"VP8 ")||!n(We,Pe,"VP8L")){de=0;break e}if(Kt[0]<Mt){de=7;break e}n(We,Pe,"ALPH")||(De[0]=We,Ce[0]=Pe+8,Xe[0]=$t),Pe+=Mt,Kt-=Mt}}if(N=N[0],ye.na=ye.na[0],ye.P=ye.P[0],ye.Sa=ye.Sa[0],de!=0)break}N=[N],ye.Ja=[ye.Ja],ye.xa=[ye.xa];e:if(Je=c,de=v,me=N,De=ye.gb[0],Ce=ye.Ja,Xe=ye.xa,We=de[0],Pe=!n(Je,We,"VP8 "),pt=!n(Je,We,"VP8L"),e(Je!=null),e(me!=null),e(Ce!=null),e(Xe!=null),8>me[0])de=7;else{if(Pe||pt){if(Je=Ke(Je,We+4),12<=De&&Je>De-12){de=3;break e}if(xe&&Je>me[0]-8){de=7;break e}Ce[0]=Je,de[0]+=8,me[0]-=8,Xe[0]=pt}else Xe[0]=5<=me[0]&&Je[We+0]==47&&!(Je[We+4]>>5),Ce[0]=me[0];de=0}if(N=N[0],ye.Ja=ye.Ja[0],ye.xa=ye.xa[0],v=v[0],de!=0)break;if(4294967286<ye.Ja)return 3;if(Z==null||Ae||(Z[0]=ye.xa?2:1),G=[G],Le=[Le],ye.xa){if(5>N){de=7;break}Z=G,xe=Le,Ae=$,c==null||5>N?c=0:5<=N&&c[v+0]==47&&!(c[v+4]>>5)?(me=[0],Je=[0],De=[0],z(Ce=new O,c,v,N),nt(Ce,me,Je,De)?(Z!=null&&(Z[0]=me[0]),xe!=null&&(xe[0]=Je[0]),Ae!=null&&(Ae[0]=De[0]),c=1):c=0):c=0}else{if(10>N){de=7;break}Z=Le,c==null||10>N||!ll(c,v+3,N-3)?c=0:(xe=c[v+0]|c[v+1]<<8|c[v+2]<<16,Ae=16383&(c[v+7]<<8|c[v+6]),c=16383&(c[v+9]<<8|c[v+8]),1&xe||3<(xe>>1&7)||!(xe>>4&1)||xe>>5>=ye.Ja||!Ae||!c?c=0:(G&&(G[0]=Ae),Z&&(Z[0]=c),c=1))}if(!c||(G=G[0],Le=Le[0],be&&(re[0]!=G||he[0]!=Le)))return 3;ee!=null&&(ee[0]=ye,ee.offset=v-ee.w,e(4294967286>v-ee.w),e(ee.offset==ee.ha-N));break}return de==0||de==7&&be&&ee==null?($!=null&&($[0]|=ye.na!=null&&0<ye.na.length),j!=null&&(j[0]=G),q!=null&&(q[0]=Le),0):de}function Jc(c,v,N){var j=v.width,q=v.height,$=0,G=0,Z=j,ee=q;if(v.Da=c!=null&&0<c.Da,v.Da&&(Z=c.cd,ee=c.bd,$=c.v,G=c.j,11>N||($&=-2,G&=-2),0>$||0>G||0>=Z||0>=ee||$+Z>j||G+ee>q))return 0;if(v.v=$,v.j=G,v.va=$+Z,v.o=G+ee,v.U=Z,v.T=ee,v.da=c!=null&&0<c.da,v.da){if(!Ge(Z,ee,N=[c.ib],$=[c.hb]))return 0;v.ib=N[0],v.hb=$[0]}return v.ob=c!=null&&c.ob,v.Kb=c==null||!c.Sd,v.da&&(v.ob=v.ib<3*j/4&&v.hb<3*q/4,v.Kb=0),1}function Xc(c){if(c==null)return 2;if(11>c.S){var v=c.f.RGBA;v.fb+=(c.height-1)*v.A,v.A=-v.A}else v=c.f.kb,c=c.height,v.O+=(c-1)*v.fa,v.fa=-v.fa,v.N+=(c-1>>1)*v.Ab,v.Ab=-v.Ab,v.W+=(c-1>>1)*v.Db,v.Db=-v.Db,v.F!=null&&(v.J+=(c-1)*v.lb,v.lb=-v.lb);return 0}function wu(c,v,N,j){if(j==null||0>=c||0>=v)return 2;if(N!=null){if(N.Da){var q=N.cd,$=N.bd,G=-2&N.v,Z=-2&N.j;if(0>G||0>Z||0>=q||0>=$||G+q>c||Z+$>v)return 2;c=q,v=$}if(N.da){if(!Ge(c,v,q=[N.ib],$=[N.hb]))return 2;c=q[0],v=$[0]}}j.width=c,j.height=v;e:{var ee=j.width,re=j.height;if(c=j.S,0>=ee||0>=re||!(c>=Yd&&13>c))c=2;else{if(0>=j.Rd&&j.sd==null){G=$=q=v=0;var he=(Z=ee*Ny[c])*re;if(11>c||($=(re+1)/2*(v=(ee+1)/2),c==12&&(G=(q=ee)*re)),(re=s(he+2*$+G))==null){c=1;break e}j.sd=re,11>c?((ee=j.f.RGBA).eb=re,ee.fb=0,ee.A=Z,ee.size=he):((ee=j.f.kb).y=re,ee.O=0,ee.fa=Z,ee.Fd=he,ee.f=re,ee.N=0+he,ee.Ab=v,ee.Cd=$,ee.ea=re,ee.W=0+he+$,ee.Db=v,ee.Ed=$,c==12&&(ee.F=re,ee.J=0+he+2*$),ee.Tc=G,ee.lb=q)}if(v=1,q=j.S,$=j.width,G=j.height,q>=Yd&&13>q)if(11>q)c=j.f.RGBA,v&=(Z=Math.abs(c.A))*(G-1)+$<=c.size,v&=Z>=$*Ny[q],v&=c.eb!=null;else{c=j.f.kb,Z=($+1)/2,he=(G+1)/2,ee=Math.abs(c.fa),re=Math.abs(c.Ab);var be=Math.abs(c.Db),xe=Math.abs(c.lb),ye=xe*(G-1)+$;v&=ee*(G-1)+$<=c.Fd,v&=re*(he-1)+Z<=c.Cd,v=(v&=be*(he-1)+Z<=c.Ed)&ee>=$&re>=Z&be>=Z,v&=c.y!=null,v&=c.f!=null,v&=c.ea!=null,q==12&&(v&=xe>=$,v&=ye<=c.Tc,v&=c.F!=null)}else v=0;c=v?0:2}}return c!=0||N!=null&&N.fd&&(c=Xc(j)),c}var or=64,bu=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],xu=24,Su=32,Zc=8,Yr=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Te("Predictor0","PredictorAdd0"),y.Predictor0=function(){return 4278190080},y.Predictor1=function(c){return c},y.Predictor2=function(c,v,N){return v[N+0]},y.Predictor3=function(c,v,N){return v[N+1]},y.Predictor4=function(c,v,N){return v[N-1]},y.Predictor5=function(c,v,N){return Be(Be(c,v[N+1]),v[N+0])},y.Predictor6=function(c,v,N){return Be(c,v[N-1])},y.Predictor7=function(c,v,N){return Be(c,v[N+0])},y.Predictor8=function(c,v,N){return Be(v[N-1],v[N+0])},y.Predictor9=function(c,v,N){return Be(v[N+0],v[N+1])},y.Predictor10=function(c,v,N){return Be(Be(c,v[N-1]),Be(v[N+0],v[N+1]))},y.Predictor11=function(c,v,N){var j=v[N+0];return 0>=at(j>>24&255,c>>24&255,(v=v[N-1])>>24&255)+at(j>>16&255,c>>16&255,v>>16&255)+at(j>>8&255,c>>8&255,v>>8&255)+at(255&j,255&c,255&v)?j:c},y.Predictor12=function(c,v,N){var j=v[N+0];return($e((c>>24&255)+(j>>24&255)-((v=v[N-1])>>24&255))<<24|$e((c>>16&255)+(j>>16&255)-(v>>16&255))<<16|$e((c>>8&255)+(j>>8&255)-(v>>8&255))<<8|$e((255&c)+(255&j)-(255&v)))>>>0},y.Predictor13=function(c,v,N){var j=v[N-1];return(Ye((c=Be(c,v[N+0]))>>24&255,j>>24&255)<<24|Ye(c>>16&255,j>>16&255)<<16|Ye(c>>8&255,j>>8&255)<<8|Ye(c>>0&255,j>>0&255))>>>0};var ug=y.PredictorAdd0;y.PredictorAdd1=tt,Te("Predictor2","PredictorAdd2"),Te("Predictor3","PredictorAdd3"),Te("Predictor4","PredictorAdd4"),Te("Predictor5","PredictorAdd5"),Te("Predictor6","PredictorAdd6"),Te("Predictor7","PredictorAdd7"),Te("Predictor8","PredictorAdd8"),Te("Predictor9","PredictorAdd9"),Te("Predictor10","PredictorAdd10"),Te("Predictor11","PredictorAdd11"),Te("Predictor12","PredictorAdd12"),Te("Predictor13","PredictorAdd13");var eh=y.PredictorAdd2;ut("ColorIndexInverseTransform","MapARGB","32b",function(c){return c>>8&255},function(c){return c}),ut("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(c){return c},function(c){return c>>8&255});var zd,Ii=y.ColorIndexInverseTransform,Nu=y.MapARGB,Hd=y.VP8LColorIndexInverseTransformAlpha,$d=y.MapAlpha,to=y.VP8LPredictorsAdd=[];to.length=16,(y.VP8LPredictors=[]).length=16,(y.VP8LPredictorsAdd_C=[]).length=16,(y.VP8LPredictors_C=[]).length=16;var wl,Jr,Mr,no,la,ua,Au,ca,Cn,th,Vr,Ti,Eu,Wd,nh,bl,xl,ro,Sl,ku,Nl,io,rh,Pi,Ci,nn,rn,Ln,Gn=s(511),ha=s(2041),ih=s(225),Iu=s(767),Gd=0,cg=ha,Qd=ih,mi=Iu,Li=Gn,Yd=0,Jd=1,fy=2,Xd=3,Zd=4,hg=5,py=6,dg=7,fg=8,ef=9,pg=10,QN=[2,3,7],YN=[3,3,11],my=[280,256,256,256,40],JN=[0,1,1,1,0],XN=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],ZN=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],eA=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],tA=8,mg=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],gg=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],sh=null,nA=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],rA=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],gy=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],iA=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],sA=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],aA=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],oA=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],so=[],Xi=[],da=[],lA=1,vy=2,ao=[],Ri=[];Ee("UpsampleRgbLinePair",X,3),Ee("UpsampleBgrLinePair",ge,3),Ee("UpsampleRgbaLinePair",St,4),Ee("UpsampleBgraLinePair",Lt,4),Ee("UpsampleArgbLinePair",xt,4),Ee("UpsampleRgba4444LinePair",Ve,2),Ee("UpsampleRgb565LinePair",Ne,2);var uA=y.UpsampleRgbLinePair,cA=y.UpsampleBgrLinePair,yy=y.UpsampleRgbaLinePair,_y=y.UpsampleBgraLinePair,wy=y.UpsampleArgbLinePair,by=y.UpsampleRgba4444LinePair,hA=y.UpsampleRgb565LinePair,tf=16,nf=1<<tf-1,ah=-227,vg=482,dA=6,xy=0,fA=s(256),pA=s(256),mA=s(256),gA=s(256),vA=s(vg-ah),yA=s(vg-ah);Zt("YuvToRgbRow",X,3),Zt("YuvToBgrRow",ge,3),Zt("YuvToRgbaRow",St,4),Zt("YuvToBgraRow",Lt,4),Zt("YuvToArgbRow",xt,4),Zt("YuvToRgba4444Row",Ve,2),Zt("YuvToRgb565Row",Ne,2);var Sy=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],rf=[0,2,8],_A=[8,7,6,4,4,2,2,2,1,1,1,1],wA=1;this.WebPDecodeRGBA=function(c,v,N,j,q){var $=Jd,G=new aa,Z=new $n;G.ba=Z,Z.S=$,Z.width=[Z.width],Z.height=[Z.height];var ee=Z.width,re=Z.height,he=new xn;if(he==null||c==null)var be=2;else e(he!=null),be=Ts(c,v,N,he.width,he.height,he.Pd,he.Qd,he.format,null);if(be!=0?ee=0:(ee!=null&&(ee[0]=he.width[0]),re!=null&&(re[0]=he.height[0]),ee=1),ee){Z.width=Z.width[0],Z.height=Z.height[0],j!=null&&(j[0]=Z.width),q!=null&&(q[0]=Z.height);e:{if(j=new ea,(q=new Ja).data=c,q.w=v,q.ha=N,q.kd=1,v=[0],e(q!=null),((c=Ts(q.data,q.w,q.ha,null,null,null,v,null,q))==0||c==7)&&v[0]&&(c=4),(v=c)==0){if(e(G!=null),j.data=q.data,j.w=q.w+q.offset,j.ha=q.ha-q.offset,j.put=fn,j.ac=Jt,j.bc=ci,j.ma=G,q.xa){if((c=Pn())==null){G=1;break e}if(function(xe,ye){var Le=[0],Ae=[0],de=[0];t:for(;;){if(xe==null)return 0;if(ye==null)return xe.a=2,0;if(xe.l=ye,xe.a=0,z(xe.m,ye.data,ye.w,ye.ha),!nt(xe.m,Le,Ae,de)){xe.a=3;break t}if(xe.xb=vy,ye.width=Le[0],ye.height=Ae[0],!hi(Le[0],Ae[0],1,xe,null))break t;return 1}return e(xe.a!=0),0}(c,j)){if(j=(v=wu(j.width,j.height,G.Oa,G.ba))==0){t:{j=c;n:for(;;){if(j==null){j=0;break t}if(e(j.s.yc!=null),e(j.s.Ya!=null),e(0<j.s.Wb),e((N=j.l)!=null),e((q=N.ma)!=null),j.xb!=0){if(j.ca=q.ba,j.tb=q.tb,e(j.ca!=null),!Jc(q.Oa,N,Xd)){j.a=2;break n}if(!ys(j,N.width)||N.da)break n;if((N.da||bt(j.ca.S))&&ve(),11>j.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),j.ca.f.kb.F!=null&&ve()),j.Pb&&0<j.s.ua&&j.s.vb.X==null&&!Ze(j.s.vb,j.s.Wa.Xa)){j.a=1;break n}j.xb=0}if(!Dr(j,j.V,j.Ba,j.c,j.i,N.o,Oa))break n;q.Dc=j.Ma,j=1;break t}e(j.a!=0),j=0}j=!j}j&&(v=c.a)}else v=c.a}else{if((c=new ol)==null){G=1;break e}if(c.Fa=q.na,c.P=q.P,c.qc=q.Sa,ul(c,j)){if((v=wu(j.width,j.height,G.Oa,G.ba))==0){if(c.Aa=0,N=G.Oa,e((q=c)!=null),N!=null){if(0<(ee=0>(ee=N.Md)?0:100<ee?255:255*ee/100)){for(re=he=0;4>re;++re)12>(be=q.pb[re]).lc&&(be.ia=ee*_A[0>be.lc?0:be.lc]>>3),he|=be.ia;he&&(alert("todo:VP8InitRandom"),q.ia=1)}q.Ga=N.Id,100<q.Ga?q.Ga=100:0>q.Ga&&(q.Ga=0)}fu(c,j)||(v=c.a)}}else v=c.a}v==0&&G.Oa!=null&&G.Oa.fd&&(v=Xc(G.ba))}G=v}$=G!=0?null:11>$?Z.f.RGBA.eb:Z.f.kb.y}else $=null;return $};var Ny=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function u(y,S){for(var R="",E=0;E<4;E++)R+=String.fromCharCode(y[S++]);return R}function h(y,S){return(y[S+0]<<0|y[S+1]<<8|y[S+2]<<16)>>>0}function p(y,S){return(y[S+0]<<0|y[S+1]<<8|y[S+2]<<16|y[S+3]<<24)>>>0}new l;var g=[0],m=[0],b=[],x=new l,k=t,_=function(y,S){var R={},E=0,I=!1,P=0,M=0;if(R.frames=[],!function(Q,J,W,se){for(var le=0;le<se;le++)if(Q[J+le]!=W.charCodeAt(le))return!0;return!1}(y,S,"RIFF",4)){var te,V;for(p(y,S+=4),S+=8;S<y.length;){var U=u(y,S),z=p(y,S+=4);S+=4;var H=z+(1&z);switch(U){case"VP8 ":case"VP8L":R.frames[E]===void 0&&(R.frames[E]={}),(O=R.frames[E]).src_off=I?M:S-8,O.src_size=P+z+8,E++,I&&(I=!1,P=0,M=0);break;case"VP8X":(O=R.header={}).feature_flags=y[S];var ne=S+4;O.canvas_width=1+h(y,ne),ne+=3,O.canvas_height=1+h(y,ne),ne+=3;break;case"ALPH":I=!0,P=H+8,M=S-8;break;case"ANIM":(O=R.header).bgcolor=p(y,S),ne=S+4,O.loop_count=(te=y)[(V=ne)+0]<<0|te[V+1]<<8,ne+=2;break;case"ANMF":var _e,O;(O=R.frames[E]={}).offset_x=2*h(y,S),S+=3,O.offset_y=2*h(y,S),S+=3,O.width=1+h(y,S),S+=3,O.height=1+h(y,S),S+=3,O.duration=h(y,S),S+=3,_e=y[S++],O.dispose=1&_e,O.blend=_e>>1&1}U!="ANMF"&&(S+=H)}return R}}(k,0);_.response=k,_.rgbaoutput=!0,_.dataurl=!1;var A=_.header?_.header:null,C=_.frames?_.frames:null;if(A){A.loop_counter=A.loop_count,g=[A.canvas_height],m=[A.canvas_width];for(var F=0;F<C.length&&C[F].blend!=0;F++);}var Y=C[0],B=x.WebPDecodeRGBA(k,Y.src_off,Y.src_size,m,g);Y.rgba=B,Y.imgwidth=m[0],Y.imgheight=g[0];for(var L=0;L<m[0]*g[0]*4;L++)b[L]=B[L];return this.width=m,this.height=g,this.data=b,this}(function(t){var e=function(){return typeof ev=="function"},n=function(g,m,b,x){var k=4,_=a;switch(x){case t.image_compression.FAST:k=1,_=s;break;case t.image_compression.MEDIUM:k=6,_=o;break;case t.image_compression.SLOW:k=9,_=l}g=r(g,m,b,_);var A=ev(g,{level:k});return t.__addimage__.arrayBufferToBinaryString(A)},r=function(g,m,b,x){for(var k,_,A,C=g.length/m,F=new Uint8Array(g.length+C),Y=h(),B=0;B<C;B+=1){if(A=B*m,k=g.subarray(A,A+m),x)F.set(x(k,b,_),A+B);else{for(var L,y=Y.length,S=[];L<y;L+=1)S[L]=Y[L](k,b,_);var R=p(S.concat());F.set(S[R],A+B)}_=k}return F},i=function(g){var m=Array.apply([],g);return m.unshift(0),m},s=function(g,m){var b,x=[],k=g.length;x[0]=1;for(var _=0;_<k;_+=1)b=g[_-m]||0,x[_+1]=g[_]-b+256&255;return x},a=function(g,m,b){var x,k=[],_=g.length;k[0]=2;for(var A=0;A<_;A+=1)x=b&&b[A]||0,k[A+1]=g[A]-x+256&255;return k},o=function(g,m,b){var x,k,_=[],A=g.length;_[0]=3;for(var C=0;C<A;C+=1)x=g[C-m]||0,k=b&&b[C]||0,_[C+1]=g[C]+256-(x+k>>>1)&255;return _},l=function(g,m,b){var x,k,_,A,C=[],F=g.length;C[0]=4;for(var Y=0;Y<F;Y+=1)x=g[Y-m]||0,k=b&&b[Y]||0,_=b&&b[Y-m]||0,A=u(x,k,_),C[Y+1]=g[Y]-A+256&255;return C},u=function(g,m,b){if(g===m&&m===b)return g;var x=Math.abs(m-b),k=Math.abs(g-b),_=Math.abs(g+m-b-b);return x<=k&&x<=_?g:k<=_?m:b},h=function(){return[i,s,a,o,l]},p=function(g){var m=g.map(function(b){return b.reduce(function(x,k){return x+Math.abs(k)},0)});return m.indexOf(Math.min.apply(null,m))};t.processPNG=function(g,m,b,x){var k,_,A,C,F,Y,B,L,y,S,R,E,I,P,M,te=this.decode.FLATE_DECODE,V="";if(this.__addimage__.isArrayBuffer(g)&&(g=new Uint8Array(g)),this.__addimage__.isArrayBufferView(g)){if(g=(A=new mD(g)).imgData,_=A.bits,k=A.colorSpace,F=A.colors,[4,6].indexOf(A.colorType)!==-1){if(A.bits===8){y=(L=A.pixelBitlength==32?new Uint32Array(A.decodePixels().buffer):A.pixelBitlength==16?new Uint16Array(A.decodePixels().buffer):new Uint8Array(A.decodePixels().buffer)).length,R=new Uint8Array(y*A.colors),S=new Uint8Array(y);var U,z=A.pixelBitlength-A.bits;for(P=0,M=0;P<y;P++){for(I=L[P],U=0;U<z;)R[M++]=I>>>U&255,U+=A.bits;S[P]=I>>>U&255}}if(A.bits===16){y=(L=new Uint32Array(A.decodePixels().buffer)).length,R=new Uint8Array(y*(32/A.pixelBitlength)*A.colors),S=new Uint8Array(y*(32/A.pixelBitlength)),E=A.colors>1,P=0,M=0;for(var H=0;P<y;)I=L[P++],R[M++]=I>>>0&255,E&&(R[M++]=I>>>16&255,I=L[P++],R[M++]=I>>>0&255),S[H++]=I>>>16&255;_=8}x!==t.image_compression.NONE&&e()?(g=n(R,A.width*A.colors,A.colors,x),B=n(S,A.width,1,x)):(g=R,B=S,te=void 0)}if(A.colorType===3&&(k=this.color_spaces.INDEXED,Y=A.palette,A.transparency.indexed)){var ne=A.transparency.indexed,_e=0;for(P=0,y=ne.length;P<y;++P)_e+=ne[P];if((_e/=255)===y-1&&ne.indexOf(0)!==-1)C=[ne.indexOf(0)];else if(_e!==y){for(L=A.decodePixels(),S=new Uint8Array(L.length),P=0,y=L.length;P<y;P++)S[P]=ne[L[P]];B=n(S,A.width,1)}}var O=function(Q){var J;switch(Q){case t.image_compression.FAST:J=11;break;case t.image_compression.MEDIUM:J=13;break;case t.image_compression.SLOW:J=14;break;default:J=12}return J}(x);return te===this.decode.FLATE_DECODE&&(V="/Predictor "+O+" "),V+="/Colors "+F+" /BitsPerComponent "+_+" /Columns "+A.width,(this.__addimage__.isArrayBuffer(g)||this.__addimage__.isArrayBufferView(g))&&(g=this.__addimage__.arrayBufferToBinaryString(g)),(B&&this.__addimage__.isArrayBuffer(B)||this.__addimage__.isArrayBufferView(B))&&(B=this.__addimage__.arrayBufferToBinaryString(B)),{alias:b,data:g,index:m,filter:te,decodeParameters:V,transparency:C,palette:Y,sMask:B,predictor:O,width:A.width,height:A.height,bitsPerComponent:_,colorSpace:k}}}})(gt.API),function(t){t.processGIF89A=function(e,n,r,i){var s=new gD(e),a=s.width,o=s.height,l=[];s.decodeAndBlitFrameRGBA(0,l);var u={data:l,width:a,height:o},h=new x1(100).encode(u,100);return t.processJPEG.call(this,h,n,r,i)},t.processGIF87A=t.processGIF89A}(gt.API),ns.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var n=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:i,green:r,blue:n,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},ns.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(n){tn.log("bit decode error:"+n)}},ns.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),n=e%4;for(t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<e;i++)for(var s=this.datav.getUint8(this.pos++,!0),a=r*this.width*4+8*i*4,o=0;o<8&&8*i+o<this.width;o++){var l=this.palette[s>>7-o&1];this.data[a+4*o]=l.blue,this.data[a+4*o+1]=l.green,this.data[a+4*o+2]=l.red,this.data[a+4*o+3]=255}n!==0&&(this.pos+=4-n)}},ns.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<t;i++){var s=this.datav.getUint8(this.pos++,!0),a=r*this.width*4+2*i*4,o=s>>4,l=15&s,u=this.palette[o];if(this.data[a]=u.blue,this.data[a+1]=u.green,this.data[a+2]=u.red,this.data[a+3]=255,2*i+1>=this.width)break;u=this.palette[l],this.data[a+4]=u.blue,this.data[a+4+1]=u.green,this.data[a+4+2]=u.red,this.data[a+4+3]=255}e!==0&&(this.pos+=4-e)}},ns.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),s=n*this.width*4+4*r;if(i<this.palette.length){var a=this.palette[i];this.data[s]=a.red,this.data[s+1]=a.green,this.data[s+2]=a.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}t!==0&&(this.pos+=4-t)}},ns.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<this.width;i++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(s&e)/e*255|0,o=(s>>5&e)/e*255|0,l=(s>>10&e)/e*255|0,u=s>>15?255:0,h=r*this.width*4+4*i;this.data[h]=l,this.data[h+1]=o,this.data[h+2]=a,this.data[h+3]=u}this.pos+=t}},ns.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),n=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,s=0;s<this.width;s++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(a&e)/e*255|0,l=(a>>5&n)/n*255|0,u=(a>>11)/e*255|0,h=i*this.width*4+4*s;this.data[h]=u,this.data[h+1]=l,this.data[h+2]=o,this.data[h+3]=255}this.pos+=t}},ns.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=e*this.width*4+4*n;this.data[a]=s,this.data[a+1]=i,this.data[a+2]=r,this.data[a+3]=255}this.pos+=this.width%4}},ns.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*n;this.data[o]=s,this.data[o+1]=i,this.data[o+2]=r,this.data[o+3]=a}},ns.prototype.getData=function(){return this.data},function(t){t.processBMP=function(e,n,r,i){var s=new ns(e,!1),a=s.width,o=s.height,l={data:s.getData(),width:a,height:o},u=new x1(100).encode(l,100);return t.processJPEG.call(this,u,n,r,i)}}(gt.API),qw.prototype.getData=function(){return this.data},function(t){t.processWEBP=function(e,n,r,i){var s=new qw(e),a=s.width,o=s.height,l={data:s.getData(),width:a,height:o},u=new x1(100).encode(l,100);return t.processJPEG.call(this,u,n,r,i)}}(gt.API),gt.API.processRGBA=function(t,e,n){for(var r=t.data,i=r.length,s=new Uint8Array(i/4*3),a=new Uint8Array(i/4),o=0,l=0,u=0;u<i;u+=4){var h=r[u],p=r[u+1],g=r[u+2],m=r[u+3];s[o++]=h,s[o++]=p,s[o++]=g,a[l++]=m}var b=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(a),data:b,index:e,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},gt.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Fu=gt.API,qf=Fu.getCharWidthsArray=function(t,e){var n,r,i=(e=e||{}).font||this.internal.getFont(),s=e.fontSize||this.internal.getFontSize(),a=e.charSpace||this.internal.getCharSpace(),o=e.widths?e.widths:i.metadata.Unicode.widths,l=o.fof?o.fof:1,u=e.kerning?e.kerning:i.metadata.Unicode.kerning,h=u.fof?u.fof:1,p=e.doKerning!==!1,g=0,m=t.length,b=0,x=o[0]||l,k=[];for(n=0;n<m;n++)r=t.charCodeAt(n),typeof i.metadata.widthOfString=="function"?k.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(r))+a*(1e3/s)||0)/1e3):(g=p&&Gt(u[r])==="object"&&!isNaN(parseInt(u[r][b],10))?u[r][b]/h:0,k.push((o[r]||x)/l+g)),b=r;return k},Vw=Fu.getStringUnitWidth=function(t,e){var n=(e=e||{}).fontSize||this.internal.getFontSize(),r=e.font||this.internal.getFont(),i=e.charSpace||this.internal.getCharSpace();return Fu.processArabic&&(t=Fu.processArabic(t)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(t,n,i)/n:qf.apply(this,arguments).reduce(function(s,a){return s+a},0)},Uw=function(t,e,n,r){for(var i=[],s=0,a=t.length,o=0;s!==a&&o+e[s]<n;)o+=e[s],s++;i.push(t.slice(0,s));var l=s;for(o=0;s!==a;)o+e[s]>r&&(i.push(t.slice(l,s)),o=0,l=s),o+=e[s],s++;return l!==s&&i.push(t.slice(l,s)),i},Bw=function(t,e,n){n||(n={});var r,i,s,a,o,l,u,h=[],p=[h],g=n.textIndent||0,m=0,b=0,x=t.split(" "),k=qf.apply(this,[" ",n])[0];if(l=n.lineIndent===-1?x[0].length+2:n.lineIndent||0){var _=Array(l).join(" "),A=[];x.map(function(F){(F=F.split(/\s*\n/)).length>1?A=A.concat(F.map(function(Y,B){return(B&&Y.length?`
`:"")+Y})):A.push(F[0])}),x=A,l=Vw.apply(this,[_,n])}for(s=0,a=x.length;s<a;s++){var C=0;if(r=x[s],l&&r[0]==`
`&&(r=r.substr(1),C=1),g+m+(b=(i=qf.apply(this,[r,n])).reduce(function(F,Y){return F+Y},0))>e||C){if(b>e){for(o=Uw.apply(this,[r,i,e-(g+m),e]),h.push(o.shift()),h=[o.pop()];o.length;)p.push([o.shift()]);b=i.slice(r.length-(h[0]?h[0].length:0)).reduce(function(F,Y){return F+Y},0)}else h=[r];p.push(h),g=b+l,m=k}else h.push(r),g+=m+b,m=k}return u=l?function(F,Y){return(Y?_:"")+F.join(" ")}:function(F){return F.join(" ")},p.map(u)},Fu.splitTextToSize=function(t,e,n){var r,i=(n=n||{}).fontSize||this.internal.getFontSize(),s=(function(h){if(h.widths&&h.kerning)return{widths:h.widths,kerning:h.kerning};var p=this.internal.getFont(h.fontName,h.fontStyle);return p.metadata.Unicode?{widths:p.metadata.Unicode.widths||{0:1},kerning:p.metadata.Unicode.kerning||{}}:{font:p.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,n);r=Array.isArray(t)?t:String(t).split(/\r?\n/);var a=1*this.internal.scaleFactor*e/i;s.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/i:0,s.lineIndent=n.lineIndent;var o,l,u=[];for(o=0,l=r.length;o<l;o++)u=u.concat(Bw.apply(this,[r[o],a,s]));return u},function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",n={},r={},i=0;i<e.length;i++)n[e[i]]="0123456789abcdef"[i],r["0123456789abcdef"[i]]=e[i];var s=function(p){return"0x"+parseInt(p,10).toString(16)},a=t.__fontmetrics__.compress=function(p){var g,m,b,x,k=["{"];for(var _ in p){if(g=p[_],isNaN(parseInt(_,10))?m="'"+_+"'":(_=parseInt(_,10),m=(m=s(_).slice(2)).slice(0,-1)+r[m.slice(-1)]),typeof g=="number")g<0?(b=s(g).slice(3),x="-"):(b=s(g).slice(2),x=""),b=x+b.slice(0,-1)+r[b.slice(-1)];else{if(Gt(g)!=="object")throw new Error("Don't know what to do with value type "+Gt(g)+".");b=a(g)}k.push(m+b)}return k.push("}"),k.join("")},o=t.__fontmetrics__.uncompress=function(p){if(typeof p!="string")throw new Error("Invalid argument passed to uncompress.");for(var g,m,b,x,k={},_=1,A=k,C=[],F="",Y="",B=p.length-1,L=1;L<B;L+=1)(x=p[L])=="'"?g?(b=g.join(""),g=void 0):g=[]:g?g.push(x):x=="{"?(C.push([A,b]),A={},b=void 0):x=="}"?((m=C.pop())[0][m[1]]=A,b=void 0,A=m[0]):x=="-"?_=-1:b===void 0?n.hasOwnProperty(x)?(F+=n[x],b=parseInt(F,16)*_,_=1,F=""):F+=x:n.hasOwnProperty(x)?(Y+=n[x],A[b]=parseInt(Y,16)*_,_=1,b=void 0,Y=""):Y+=x;return k},l={codePages:["WinAnsiEncoding"],WinAnsiEncoding:o("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},u={Unicode:{Courier:l,"Courier-Bold":l,"Courier-BoldOblique":l,"Courier-Oblique":l,Helvetica:l,"Helvetica-Bold":l,"Helvetica-BoldOblique":l,"Helvetica-Oblique":l,"Times-Roman":l,"Times-Bold":l,"Times-BoldItalic":l,"Times-Italic":l}},h={Unicode:{"Courier-Oblique":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":o("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":o("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":o("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:o("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:o("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":o("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:o("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":o("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":o("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":o("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(p){var g=p.font,m=h.Unicode[g.postScriptName];m&&(g.metadata.Unicode={},g.metadata.Unicode.widths=m.widths,g.metadata.Unicode.kerning=m.kerning);var b=u.Unicode[g.postScriptName];b&&(g.metadata.Unicode.encoding=b,g.encoding=b.codePages[0])}])}(gt.API),function(t){var e=function(n){for(var r=n.length,i=new Uint8Array(r),s=0;s<r;s++)i[s]=n.charCodeAt(s);return i};t.API.events.push(["addFont",function(n){var r=void 0,i=n.font,s=n.instance;if(!i.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(r=s.existsFileInVFS(i.postScriptName)===!1?s.loadFile(i.postScriptName):s.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(a,o){o=/^\x00\x01\x00\x00/.test(o)?e(o):e(Gh(o)),a.metadata=t.API.TTFFont.open(o),a.metadata.Unicode=a.metadata.Unicode||{encoding:{},kerning:{},widths:[]},a.metadata.glyIdsUsed=[0]})(i,r)}}])}(gt),function(t){function e(){return(vt.canvg?Promise.resolve(vt.canvg):Q0(()=>import("./index.es-Dwa9jrMq.js"),[])).catch(function(n){return Promise.reject(new Error("Could not load canvg: "+n))}).then(function(n){return n.default?n.default:n})}gt.API.addSvgAsImage=function(n,r,i,s,a,o,l,u){if(isNaN(r)||isNaN(i))throw tn.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(s)||isNaN(a))throw tn.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var h=document.createElement("canvas");h.width=s,h.height=a;var p=h.getContext("2d");p.fillStyle="#fff",p.fillRect(0,0,h.width,h.height);var g={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},m=this;return e().then(function(b){return b.fromString(p,n,g)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(b){return b.render(g)}).then(function(){m.addImage(h.toDataURL("image/jpeg",1),r,i,s,a,l,u)})}}(),gt.API.putTotalPages=function(t){var e,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),n=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var i=0;i<this.internal.pages[r].length;i++)this.internal.pages[r][i]=this.internal.pages[r][i].replace(e,n);return this},gt.API.viewerPreferences=function(t,e){var n;t=t||{},e=e||!1;var r,i,s,a={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},o=Object.keys(a),l=[],u=0,h=0,p=0;function g(b,x){var k,_=!1;for(k=0;k<b.length;k+=1)b[k]===x&&(_=!0);return _}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(a)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,t==="reset"||e===!0){var m=o.length;for(p=0;p<m;p+=1)n[o[p]].value=n[o[p]].defaultValue,n[o[p]].explicitSet=!1}if(Gt(t)==="object"){for(i in t)if(s=t[i],g(o,i)&&s!==void 0){if(n[i].type==="boolean"&&typeof s=="boolean")n[i].value=s;else if(n[i].type==="name"&&g(n[i].valueSet,s))n[i].value=s;else if(n[i].type==="integer"&&Number.isInteger(s))n[i].value=s;else if(n[i].type==="array"){for(u=0;u<s.length;u+=1)if(r=!0,s[u].length===1&&typeof s[u][0]=="number")l.push(String(s[u]-1));else if(s[u].length>1){for(h=0;h<s[u].length;h+=1)typeof s[u][h]!="number"&&(r=!1);r===!0&&l.push([s[u][0]-1,s[u][1]-1].join(" "))}n[i].value="["+l.join(" ")+"]"}else n[i].value=n[i].defaultValue;n[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var b,x=[];for(b in n)n[b].explicitSet===!0&&(n[b].type==="name"?x.push("/"+b+" /"+n[b].value):x.push("/"+b+" "+n[b].value));x.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+x.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},function(t){var e=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(r)),a=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),o=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),l=unescape(encodeURIComponent("</x:xmpmeta>")),u=s.length+a.length+o.length+i.length+l.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+u+" >>"),this.internal.write("stream"),this.internal.write(i+s+a+o+l),this.internal.write("endstream"),this.internal.write("endobj")},n=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(r,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",n),this.internal.events.subscribe("postPutResources",e)),this}}(gt.API),function(t){var e=t.API,n=e.pdfEscape16=function(s,a){for(var o,l=a.metadata.Unicode.widths,u=["","0","00","000","0000"],h=[""],p=0,g=s.length;p<g;++p){if(o=a.metadata.characterToGlyph(s.charCodeAt(p)),a.metadata.glyIdsUsed.push(o),a.metadata.toUnicode[o]=s.charCodeAt(p),l.indexOf(o)==-1&&(l.push(o),l.push([parseInt(a.metadata.widthOfGlyph(o),10)])),o=="0")return h.join("");o=o.toString(16),h.push(u[4-o.length],o)}return h.join("")},r=function(s){var a,o,l,u,h,p,g;for(h=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,l=[],p=0,g=(o=Object.keys(s).sort(function(m,b){return m-b})).length;p<g;p++)a=o[p],l.length>=100&&(h+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar`,l=[]),s[a]!==void 0&&s[a]!==null&&typeof s[a].toString=="function"&&(u=("0000"+s[a].toString(16)).slice(-4),a=("0000"+(+a).toString(16)).slice(-4),l.push("<"+a+"><"+u+">"));return l.length&&(h+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar
`),h+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(s){(function(a){var o=a.font,l=a.out,u=a.newObject,h=a.putStream;if(o.metadata instanceof t.API.TTFFont&&o.encoding==="Identity-H"){for(var p=o.metadata.Unicode.widths,g=o.metadata.subset.encode(o.metadata.glyIdsUsed,1),m="",b=0;b<g.length;b++)m+=String.fromCharCode(g[b]);var x=u();h({data:m,addLength1:!0,objectId:x}),l("endobj");var k=u();h({data:r(o.metadata.toUnicode),addLength1:!0,objectId:k}),l("endobj");var _=u();l("<<"),l("/Type /FontDescriptor"),l("/FontName /"+Bu(o.fontName)),l("/FontFile2 "+x+" 0 R"),l("/FontBBox "+t.API.PDFObject.convert(o.metadata.bbox)),l("/Flags "+o.metadata.flags),l("/StemV "+o.metadata.stemV),l("/ItalicAngle "+o.metadata.italicAngle),l("/Ascent "+o.metadata.ascender),l("/Descent "+o.metadata.decender),l("/CapHeight "+o.metadata.capHeight),l(">>"),l("endobj");var A=u();l("<<"),l("/Type /Font"),l("/BaseFont /"+Bu(o.fontName)),l("/FontDescriptor "+_+" 0 R"),l("/W "+t.API.PDFObject.convert(p)),l("/CIDToGIDMap /Identity"),l("/DW 1000"),l("/Subtype /CIDFontType2"),l("/CIDSystemInfo"),l("<<"),l("/Supplement 0"),l("/Registry (Adobe)"),l("/Ordering ("+o.encoding+")"),l(">>"),l(">>"),l("endobj"),o.objectNumber=u(),l("<<"),l("/Type /Font"),l("/Subtype /Type0"),l("/ToUnicode "+k+" 0 R"),l("/BaseFont /"+Bu(o.fontName)),l("/Encoding /"+o.encoding),l("/DescendantFonts ["+A+" 0 R]"),l(">>"),l("endobj"),o.isAlreadyPutted=!0}})(s)}]),e.events.push(["putFont",function(s){(function(a){var o=a.font,l=a.out,u=a.newObject,h=a.putStream;if(o.metadata instanceof t.API.TTFFont&&o.encoding==="WinAnsiEncoding"){for(var p=o.metadata.rawData,g="",m=0;m<p.length;m++)g+=String.fromCharCode(p[m]);var b=u();h({data:g,addLength1:!0,objectId:b}),l("endobj");var x=u();h({data:r(o.metadata.toUnicode),addLength1:!0,objectId:x}),l("endobj");var k=u();l("<<"),l("/Descent "+o.metadata.decender),l("/CapHeight "+o.metadata.capHeight),l("/StemV "+o.metadata.stemV),l("/Type /FontDescriptor"),l("/FontFile2 "+b+" 0 R"),l("/Flags 96"),l("/FontBBox "+t.API.PDFObject.convert(o.metadata.bbox)),l("/FontName /"+Bu(o.fontName)),l("/ItalicAngle "+o.metadata.italicAngle),l("/Ascent "+o.metadata.ascender),l(">>"),l("endobj"),o.objectNumber=u();for(var _=0;_<o.metadata.hmtx.widths.length;_++)o.metadata.hmtx.widths[_]=parseInt(o.metadata.hmtx.widths[_]*(1e3/o.metadata.head.unitsPerEm));l("<</Subtype/TrueType/Type/Font/ToUnicode "+x+" 0 R/BaseFont/"+Bu(o.fontName)+"/FontDescriptor "+k+" 0 R/Encoding/"+o.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(o.metadata.hmtx.widths)+">>"),l("endobj"),o.isAlreadyPutted=!0}})(s)}]);var i=function(s){var a,o=s.text||"",l=s.x,u=s.y,h=s.options||{},p=s.mutex||{},g=p.pdfEscape,m=p.activeFontKey,b=p.fonts,x=m,k="",_=0,A="",C=b[x].encoding;if(b[x].encoding!=="Identity-H")return{text:o,x:l,y:u,options:h,mutex:p};for(A=o,x=m,Array.isArray(o)&&(A=o[0]),_=0;_<A.length;_+=1)b[x].metadata.hasOwnProperty("cmap")&&(a=b[x].metadata.cmap.unicode.codeMap[A[_].charCodeAt(0)]),a||A[_].charCodeAt(0)<256&&b[x].metadata.hasOwnProperty("Unicode")?k+=A[_]:k+="";var F="";return parseInt(x.slice(1))<14||C==="WinAnsiEncoding"?F=g(k,x).split("").map(function(Y){return Y.charCodeAt(0).toString(16)}).join(""):C==="Identity-H"&&(F=n(k,b[x])),p.isHex=!0,{text:F,x:l,y:u,options:h,mutex:p}};e.events.push(["postProcessText",function(s){var a=s.text||"",o=[],l={text:a,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(a)){var u=0;for(u=0;u<a.length;u+=1)Array.isArray(a[u])&&a[u].length===3?o.push([i(Object.assign({},l,{text:a[u][0]})).text,a[u][1],a[u][2]]):o.push(i(Object.assign({},l,{text:a[u]})).text);s.text=o}else s.text=i(Object.assign({},l,{text:a})).text}])}(gt),function(t){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0},t.addFileToVFS=function(n,r){return e.call(this),this.internal.vFS[n]=r,this},t.getFileFromVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0?this.internal.vFS[n]:null}}(gt.API),function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(r){var i,s,a,o,l,u,h,p=e,g=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],m=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],b={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},x={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},k=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],_=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),A=!1,C=0;this.__bidiEngine__={};var F=function(E){var I=E.charCodeAt(),P=I>>8,M=x[P];return M!==void 0?p[256*M+(255&I)]:P===252||P===253?"AL":_.test(P)?"L":P===8?"R":"N"},Y=function(E){for(var I,P=0;P<E.length;P++){if((I=F(E.charAt(P)))==="L")return!1;if(I==="R")return!0}return!1},B=function(E,I,P,M){var te,V,U,z,H=I[M];switch(H){case"L":case"R":A=!1;break;case"N":case"AN":break;case"EN":A&&(H="AN");break;case"AL":A=!0,H="R";break;case"WS":H="N";break;case"CS":M<1||M+1>=I.length||(te=P[M-1])!=="EN"&&te!=="AN"||(V=I[M+1])!=="EN"&&V!=="AN"?H="N":A&&(V="AN"),H=V===te?V:"N";break;case"ES":H=(te=M>0?P[M-1]:"B")==="EN"&&M+1<I.length&&I[M+1]==="EN"?"EN":"N";break;case"ET":if(M>0&&P[M-1]==="EN"){H="EN";break}if(A){H="N";break}for(U=M+1,z=I.length;U<z&&I[U]==="ET";)U++;H=U<z&&I[U]==="EN"?"EN":"N";break;case"NSM":if(a&&!o){for(z=I.length,U=M+1;U<z&&I[U]==="NSM";)U++;if(U<z){var ne=E[M],_e=ne>=1425&&ne<=2303||ne===64286;if(te=I[U],_e&&(te==="R"||te==="AL")){H="R";break}}}H=M<1||(te=I[M-1])==="B"?"N":P[M-1];break;case"B":A=!1,i=!0,H=C;break;case"S":s=!0,H="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":A=!1;break;case"BN":H="N"}return H},L=function(E,I,P){var M=E.split("");return P&&y(M,P,{hiLevel:C}),M.reverse(),I&&I.reverse(),M.join("")},y=function(E,I,P){var M,te,V,U,z,H=-1,ne=E.length,_e=0,O=[],Q=C?m:g,J=[];for(A=!1,i=!1,s=!1,te=0;te<ne;te++)J[te]=F(E[te]);for(V=0;V<ne;V++){if(z=_e,O[V]=B(E,J,O,V),M=240&(_e=Q[z][b[O[V]]]),_e&=15,I[V]=U=Q[_e][5],M>0)if(M===16){for(te=H;te<V;te++)I[te]=1;H=-1}else H=-1;if(Q[_e][6])H===-1&&(H=V);else if(H>-1){for(te=H;te<V;te++)I[te]=U;H=-1}J[V]==="B"&&(I[V]=0),P.hiLevel|=U}s&&function(W,se,le){for(var fe=0;fe<le;fe++)if(W[fe]==="S"){se[fe]=C;for(var pe=fe-1;pe>=0&&W[pe]==="WS";pe--)se[pe]=C}}(J,I,ne)},S=function(E,I,P,M,te){if(!(te.hiLevel<E)){if(E===1&&C===1&&!i)return I.reverse(),void(P&&P.reverse());for(var V,U,z,H,ne=I.length,_e=0;_e<ne;){if(M[_e]>=E){for(z=_e+1;z<ne&&M[z]>=E;)z++;for(H=_e,U=z-1;H<U;H++,U--)V=I[H],I[H]=I[U],I[U]=V,P&&(V=P[H],P[H]=P[U],P[U]=V);_e=z}_e++}}},R=function(E,I,P){var M=E.split(""),te={hiLevel:C};return P||(P=[]),y(M,P,te),function(V,U,z){if(z.hiLevel!==0&&h)for(var H,ne=0;ne<V.length;ne++)U[ne]===1&&(H=k.indexOf(V[ne]))>=0&&(V[ne]=k[H+1])}(M,P,te),S(2,M,I,P,te),S(1,M,I,P,te),M.join("")};return this.__bidiEngine__.doBidiReorder=function(E,I,P){if(function(te,V){if(V)for(var U=0;U<te.length;U++)V[U]=U;o===void 0&&(o=Y(te)),u===void 0&&(u=Y(te))}(E,I),a||!l||u)if(a&&l&&o^u)C=o?1:0,E=L(E,I,P);else if(!a&&l&&u)C=o?1:0,E=R(E,I,P),E=L(E,I);else if(!a||o||l||u){if(a&&!l&&o^u)E=L(E,I),o?(C=0,E=R(E,I,P)):(C=1,E=R(E,I,P),E=L(E,I));else if(a&&o&&!l&&u)C=1,E=R(E,I,P),E=L(E,I);else if(!a&&!l&&o^u){var M=h;o?(C=1,E=R(E,I,P),C=0,h=!1,E=R(E,I,P),h=M):(C=0,E=R(E,I,P),E=L(E,I),C=1,h=!1,E=R(E,I,P),h=M,E=L(E,I))}}else C=0,E=R(E,I,P);else C=o?1:0,E=R(E,I,P);return E},this.__bidiEngine__.setOptions=function(E){E&&(a=E.isInputVisual,l=E.isOutputVisual,o=E.isInputRtl,u=E.isOutputRtl,h=E.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(r){var i=r.text,s=(r.x,r.y,r.options||{}),a=(r.mutex,s.lang,[]);if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,n.setOptions(s),Object.prototype.toString.call(i)==="[object Array]"){var o=0;for(a=[],o=0;o<i.length;o+=1)Object.prototype.toString.call(i[o])==="[object Array]"?a.push([n.doBidiReorder(i[o][0]),i[o][1],i[o][2]]):a.push([n.doBidiReorder(i[o])]);r.text=a}else r.text=n.doBidiReorder(i);n.setOptions({isInputVisual:!0})}])}(gt),gt.API.TTFFont=function(){function t(e){var n;if(this.rawData=e,n=this.contents=new Xo(e),this.contents.pos=4,n.readString(4)==="ttcf")throw new Error("TTCF not supported.");n.pos=0,this.parse(),this.subset=new CD(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new vD(this.contents),this.head=new _D(this),this.name=new ND(this),this.cmap=new NN(this),this.toUnicode={},this.hhea=new wD(this),this.maxp=new AD(this),this.hmtx=new ED(this),this.post=new xD(this),this.os2=new bD(this),this.loca=new PD(this),this.glyf=new kD(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var e,n,r,i,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var a,o,l,u;for(u=[],a=0,o=(l=this.bbox).length;a<o;a++)e=l[a],u.push(Math.round(e*this.scaleFactor));return u}).call(this),this.stemV=0,this.post.exists?(r=255&(i=this.post.italic_angle),32768&(n=i>>16)&&(n=-(1+(65535^n))),this.italicAngle=+(n+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(e){var n;return((n=this.cmap.unicode)!=null?n.codeMap[e]:void 0)||0},t.prototype.widthOfGlyph=function(e){var n;return n=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*n},t.prototype.widthOfString=function(e,n,r){var i,s,a,o;for(a=0,s=0,o=(e=""+e).length;0<=o?s<o:s>o;s=0<=o?++s:--s)i=e.charCodeAt(s),a+=this.widthOfGlyph(this.characterToGlyph(i))+r*(1e3/n)||0;return a*(n/1e3)},t.prototype.lineHeight=function(e,n){var r;return n==null&&(n=!1),r=n?this.lineGap:0,(this.ascender+r-this.decender)/1e3*e},t}();var vs,Xo=function(){function t(e){this.data=e??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(e){return this.data[this.pos++]=e},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},t.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},t.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},t.prototype.readString=function(e){var n,r;for(r=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)r[n]=String.fromCharCode(this.readByte());return r.join("")},t.prototype.writeString=function(e){var n,r,i;for(i=[],n=0,r=e.length;0<=r?n<r:n>r;n=0<=r?++n:--n)i.push(this.writeByte(e.charCodeAt(n)));return i},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(e){return this.writeInt16(e)},t.prototype.readLongLong=function(){var e,n,r,i,s,a,o,l;return e=this.readByte(),n=this.readByte(),r=this.readByte(),i=this.readByte(),s=this.readByte(),a=this.readByte(),o=this.readByte(),l=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^n)+1099511627776*(255^r)+4294967296*(255^i)+16777216*(255^s)+65536*(255^a)+256*(255^o)+(255^l)+1):72057594037927940*e+281474976710656*n+1099511627776*r+4294967296*i+16777216*s+65536*a+256*o+l},t.prototype.writeLongLong=function(e){var n,r;return n=Math.floor(e/4294967296),r=4294967295&e,this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(e){return this.writeInt32(e)},t.prototype.read=function(e){var n,r;for(n=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)n.push(this.readByte());return n},t.prototype.write=function(e){var n,r,i,s;for(s=[],r=0,i=e.length;r<i;r++)n=e[r],s.push(this.writeByte(n));return s},t}(),vD=function(){var t;function e(n){var r,i,s;for(this.scalarType=n.readInt(),this.tableCount=n.readShort(),this.searchRange=n.readShort(),this.entrySelector=n.readShort(),this.rangeShift=n.readShort(),this.tables={},i=0,s=this.tableCount;0<=s?i<s:i>s;i=0<=s?++i:--i)r={tag:n.readString(4),checksum:n.readInt(),offset:n.readInt(),length:n.readInt()},this.tables[r.tag]=r}return e.prototype.encode=function(n){var r,i,s,a,o,l,u,h,p,g,m,b,x;for(x in m=Object.keys(n).length,l=Math.log(2),p=16*Math.floor(Math.log(m)/l),a=Math.floor(p/l),h=16*m-p,(i=new Xo).writeInt(this.scalarType),i.writeShort(m),i.writeShort(p),i.writeShort(a),i.writeShort(h),s=16*m,u=i.pos+s,o=null,b=[],n)for(g=n[x],i.writeString(x),i.writeInt(t(g)),i.writeInt(u),i.writeInt(g.length),b=b.concat(g),x==="head"&&(o=u),u+=g.length;u%4;)b.push(0),u++;return i.write(b),r=2981146554-t(i.data),i.pos=o+8,i.writeUInt32(r),i.data},t=function(n){var r,i,s,a;for(n=AN.call(n);n.length%4;)n.push(0);for(s=new Xo(n),i=0,r=0,a=n.length;r<a;r=r+=4)i+=s.readUInt32();return 4294967295&i},e}(),yD={}.hasOwnProperty,Ys=function(t,e){for(var n in e)yD.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};vs=function(){function t(e){var n;this.file=e,n=this.file.directory.tables[this.tag],this.exists=!!n,n&&(this.offset=n.offset,this.length=n.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t}();var _D=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Ys(e,vs),e.prototype.tag="head",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.revision=n.readInt(),this.checkSumAdjustment=n.readInt(),this.magicNumber=n.readInt(),this.flags=n.readShort(),this.unitsPerEm=n.readShort(),this.created=n.readLongLong(),this.modified=n.readLongLong(),this.xMin=n.readShort(),this.yMin=n.readShort(),this.xMax=n.readShort(),this.yMax=n.readShort(),this.macStyle=n.readShort(),this.lowestRecPPEM=n.readShort(),this.fontDirectionHint=n.readShort(),this.indexToLocFormat=n.readShort(),this.glyphDataFormat=n.readShort()},e.prototype.encode=function(n){var r;return(r=new Xo).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(n),r.writeShort(this.glyphDataFormat),r.data},e}(),zw=function(){function t(e,n){var r,i,s,a,o,l,u,h,p,g,m,b,x,k,_,A,C;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=n+e.readInt(),p=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(l=0;l<256;++l)this.codeMap[l]=e.readByte();break;case 4:for(m=e.readUInt16(),g=m/2,e.pos+=6,s=function(){var F,Y;for(Y=[],l=F=0;0<=g?F<g:F>g;l=0<=g?++F:--F)Y.push(e.readUInt16());return Y}(),e.pos+=2,x=function(){var F,Y;for(Y=[],l=F=0;0<=g?F<g:F>g;l=0<=g?++F:--F)Y.push(e.readUInt16());return Y}(),u=function(){var F,Y;for(Y=[],l=F=0;0<=g?F<g:F>g;l=0<=g?++F:--F)Y.push(e.readUInt16());return Y}(),h=function(){var F,Y;for(Y=[],l=F=0;0<=g?F<g:F>g;l=0<=g?++F:--F)Y.push(e.readUInt16());return Y}(),i=(this.length-e.pos+this.offset)/2,o=function(){var F,Y;for(Y=[],l=F=0;0<=i?F<i:F>i;l=0<=i?++F:--F)Y.push(e.readUInt16());return Y}(),l=_=0,C=s.length;_<C;l=++_)for(k=s[l],r=A=b=x[l];b<=k?A<=k:A>=k;r=b<=k?++A:--A)h[l]===0?a=r+u[l]:(a=o[h[l]/2+(r-b)-(g-l)]||0)!==0&&(a+=u[l]),this.codeMap[r]=65535&a}e.pos=p}return t.encode=function(e,n){var r,i,s,a,o,l,u,h,p,g,m,b,x,k,_,A,C,F,Y,B,L,y,S,R,E,I,P,M,te,V,U,z,H,ne,_e,O,Q,J,W,se,le,fe,pe,ke,Ie,je;switch(M=new Xo,a=Object.keys(e).sort(function(Ke,Ze){return Ke-Ze}),n){case"macroman":for(x=0,k=function(){var Ke=[];for(b=0;b<256;++b)Ke.push(0);return Ke}(),A={0:0},s={},te=0,H=a.length;te<H;te++)A[pe=e[i=a[te]]]==null&&(A[pe]=++x),s[i]={old:e[i],new:A[e[i]]},k[i]=A[e[i]];return M.writeUInt16(1),M.writeUInt16(0),M.writeUInt32(12),M.writeUInt16(0),M.writeUInt16(262),M.writeUInt16(0),M.write(k),{charMap:s,subtable:M.data,maxGlyphID:x+1};case"unicode":for(I=[],p=[],C=0,A={},r={},_=u=null,V=0,ne=a.length;V<ne;V++)A[Y=e[i=a[V]]]==null&&(A[Y]=++C),r[i]={old:Y,new:A[Y]},o=A[Y]-i,_!=null&&o===u||(_&&p.push(_),I.push(i),u=o),_=i;for(_&&p.push(_),p.push(65535),I.push(65535),R=2*(S=I.length),y=2*Math.pow(Math.log(S)/Math.LN2,2),g=Math.log(y/2)/Math.LN2,L=2*S-y,l=[],B=[],m=[],b=U=0,_e=I.length;U<_e;b=++U){if(E=I[b],h=p[b],E===65535){l.push(0),B.push(0);break}if(E-(P=r[E].new)>=32768)for(l.push(0),B.push(2*(m.length+S-b)),i=z=E;E<=h?z<=h:z>=h;i=E<=h?++z:--z)m.push(r[i].new);else l.push(P-E),B.push(0)}for(M.writeUInt16(3),M.writeUInt16(1),M.writeUInt32(12),M.writeUInt16(4),M.writeUInt16(16+8*S+2*m.length),M.writeUInt16(0),M.writeUInt16(R),M.writeUInt16(y),M.writeUInt16(g),M.writeUInt16(L),le=0,O=p.length;le<O;le++)i=p[le],M.writeUInt16(i);for(M.writeUInt16(0),fe=0,Q=I.length;fe<Q;fe++)i=I[fe],M.writeUInt16(i);for(ke=0,J=l.length;ke<J;ke++)o=l[ke],M.writeUInt16(o);for(Ie=0,W=B.length;Ie<W;Ie++)F=B[Ie],M.writeUInt16(F);for(je=0,se=m.length;je<se;je++)x=m[je],M.writeUInt16(x);return{charMap:r,subtable:M.data,maxGlyphID:C+1}}},t}(),NN=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Ys(e,vs),e.prototype.tag="cmap",e.prototype.parse=function(n){var r,i,s;for(n.pos=this.offset,this.version=n.readUInt16(),s=n.readUInt16(),this.tables=[],this.unicode=null,i=0;0<=s?i<s:i>s;i=0<=s?++i:--i)r=new zw(n,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},e.encode=function(n,r){var i,s;return r==null&&(r="macroman"),i=zw.encode(n,r),(s=new Xo).writeUInt16(0),s.writeUInt16(1),i.table=s.data.concat(i.subtable),i},e}(),wD=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Ys(e,vs),e.prototype.tag="hhea",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.ascender=n.readShort(),this.decender=n.readShort(),this.lineGap=n.readShort(),this.advanceWidthMax=n.readShort(),this.minLeftSideBearing=n.readShort(),this.minRightSideBearing=n.readShort(),this.xMaxExtent=n.readShort(),this.caretSlopeRise=n.readShort(),this.caretSlopeRun=n.readShort(),this.caretOffset=n.readShort(),n.pos+=8,this.metricDataFormat=n.readShort(),this.numberOfMetrics=n.readUInt16()},e}(),bD=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Ys(e,vs),e.prototype.tag="OS/2",e.prototype.parse=function(n){if(n.pos=this.offset,this.version=n.readUInt16(),this.averageCharWidth=n.readShort(),this.weightClass=n.readUInt16(),this.widthClass=n.readUInt16(),this.type=n.readShort(),this.ySubscriptXSize=n.readShort(),this.ySubscriptYSize=n.readShort(),this.ySubscriptXOffset=n.readShort(),this.ySubscriptYOffset=n.readShort(),this.ySuperscriptXSize=n.readShort(),this.ySuperscriptYSize=n.readShort(),this.ySuperscriptXOffset=n.readShort(),this.ySuperscriptYOffset=n.readShort(),this.yStrikeoutSize=n.readShort(),this.yStrikeoutPosition=n.readShort(),this.familyClass=n.readShort(),this.panose=function(){var r,i;for(i=[],r=0;r<10;++r)i.push(n.readByte());return i}(),this.charRange=function(){var r,i;for(i=[],r=0;r<4;++r)i.push(n.readInt());return i}(),this.vendorID=n.readString(4),this.selection=n.readShort(),this.firstCharIndex=n.readShort(),this.lastCharIndex=n.readShort(),this.version>0&&(this.ascent=n.readShort(),this.descent=n.readShort(),this.lineGap=n.readShort(),this.winAscent=n.readShort(),this.winDescent=n.readShort(),this.codePageRange=function(){var r,i;for(i=[],r=0;r<2;r=++r)i.push(n.readInt());return i}(),this.version>1))return this.xHeight=n.readShort(),this.capHeight=n.readShort(),this.defaultChar=n.readShort(),this.breakChar=n.readShort(),this.maxContext=n.readShort()},e}(),xD=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Ys(e,vs),e.prototype.tag="post",e.prototype.parse=function(n){var r,i,s;switch(n.pos=this.offset,this.format=n.readInt(),this.italicAngle=n.readInt(),this.underlinePosition=n.readShort(),this.underlineThickness=n.readShort(),this.isFixedPitch=n.readInt(),this.minMemType42=n.readInt(),this.maxMemType42=n.readInt(),this.minMemType1=n.readInt(),this.maxMemType1=n.readInt(),this.format){case 65536:break;case 131072:var a;for(i=n.readUInt16(),this.glyphNameIndex=[],a=0;0<=i?a<i:a>i;a=0<=i?++a:--a)this.glyphNameIndex.push(n.readUInt16());for(this.names=[],s=[];n.pos<this.offset+this.length;)r=n.readByte(),s.push(this.names.push(n.readString(r)));return s;case 151552:return i=n.readUInt16(),this.offsets=n.read(i);case 196608:break;case 262144:return this.map=(function(){var o,l,u;for(u=[],a=o=0,l=this.file.maxp.numGlyphs;0<=l?o<l:o>l;a=0<=l?++o:--o)u.push(n.readUInt32());return u}).call(this)}},e}(),SD=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},ND=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Ys(e,vs),e.prototype.tag="name",e.prototype.parse=function(n){var r,i,s,a,o,l,u,h,p,g,m;for(n.pos=this.offset,n.readShort(),r=n.readShort(),l=n.readShort(),i=[],a=0;0<=r?a<r:a>r;a=0<=r?++a:--a)i.push({platformID:n.readShort(),encodingID:n.readShort(),languageID:n.readShort(),nameID:n.readShort(),length:n.readShort(),offset:this.offset+l+n.readShort()});for(u={},a=p=0,g=i.length;p<g;a=++p)s=i[a],n.pos=s.offset,h=n.readString(s.length),o=new SD(h,s),u[m=s.nameID]==null&&(u[m]=[]),u[s.nameID].push(o);this.strings=u,this.copyright=u[0],this.fontFamily=u[1],this.fontSubfamily=u[2],this.uniqueSubfamily=u[3],this.fontName=u[4],this.version=u[5];try{this.postscriptName=u[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=u[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=u[7],this.manufacturer=u[8],this.designer=u[9],this.description=u[10],this.vendorUrl=u[11],this.designerUrl=u[12],this.license=u[13],this.licenseUrl=u[14],this.preferredFamily=u[15],this.preferredSubfamily=u[17],this.compatibleFull=u[18],this.sampleText=u[19]},e}(),AD=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Ys(e,vs),e.prototype.tag="maxp",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.numGlyphs=n.readUInt16(),this.maxPoints=n.readUInt16(),this.maxContours=n.readUInt16(),this.maxCompositePoints=n.readUInt16(),this.maxComponentContours=n.readUInt16(),this.maxZones=n.readUInt16(),this.maxTwilightPoints=n.readUInt16(),this.maxStorage=n.readUInt16(),this.maxFunctionDefs=n.readUInt16(),this.maxInstructionDefs=n.readUInt16(),this.maxStackElements=n.readUInt16(),this.maxSizeOfInstructions=n.readUInt16(),this.maxComponentElements=n.readUInt16(),this.maxComponentDepth=n.readUInt16()},e}(),ED=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Ys(e,vs),e.prototype.tag="hmtx",e.prototype.parse=function(n){var r,i,s,a,o,l,u;for(n.pos=this.offset,this.metrics=[],r=0,l=this.file.hhea.numberOfMetrics;0<=l?r<l:r>l;r=0<=l?++r:--r)this.metrics.push({advance:n.readUInt16(),lsb:n.readInt16()});for(s=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var h,p;for(p=[],r=h=0;0<=s?h<s:h>s;r=0<=s?++h:--h)p.push(n.readInt16());return p}(),this.widths=(function(){var h,p,g,m;for(m=[],h=0,p=(g=this.metrics).length;h<p;h++)a=g[h],m.push(a.advance);return m}).call(this),i=this.widths[this.widths.length-1],u=[],r=o=0;0<=s?o<s:o>s;r=0<=s?++o:--o)u.push(this.widths.push(i));return u},e.prototype.forGlyph=function(n){return n in this.metrics?this.metrics[n]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[n-this.metrics.length]}},e}(),AN=[].slice,kD=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Ys(e,vs),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(n){var r,i,s,a,o,l,u,h,p,g;return n in this.cache?this.cache[n]:(a=this.file.loca,r=this.file.contents,i=a.indexOf(n),(s=a.lengthOf(n))===0?this.cache[n]=null:(r.pos=this.offset+i,o=(l=new Xo(r.read(s))).readShort(),h=l.readShort(),g=l.readShort(),u=l.readShort(),p=l.readShort(),this.cache[n]=o===-1?new TD(l,h,g,u,p):new ID(l,o,h,g,u,p),this.cache[n]))},e.prototype.encode=function(n,r,i){var s,a,o,l,u;for(o=[],a=[],l=0,u=r.length;l<u;l++)s=n[r[l]],a.push(o.length),s&&(o=o.concat(s.encode(i)));return a.push(o.length),{table:o,offsets:a}},e}(),ID=function(){function t(e,n,r,i,s,a){this.raw=e,this.numberOfContours=n,this.xMin=r,this.yMin=i,this.xMax=s,this.yMax=a,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t}(),TD=function(){function t(e,n,r,i,s){var a,o;for(this.raw=e,this.xMin=n,this.yMin=r,this.xMax=i,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],a=this.raw;o=a.readShort(),this.glyphOffsets.push(a.pos),this.glyphIDs.push(a.readUInt16()),32&o;)a.pos+=1&o?4:2,128&o?a.pos+=8:64&o?a.pos+=4:8&o&&(a.pos+=2)}return t.prototype.encode=function(){var e,n,r;for(n=new Xo(AN.call(this.raw.data)),e=0,r=this.glyphIDs.length;e<r;++e)n.pos=this.glyphOffsets[e];return n.data},t}(),PD=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Ys(e,vs),e.prototype.tag="loca",e.prototype.parse=function(n){var r,i;return n.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var s,a;for(a=[],i=0,s=this.length;i<s;i+=2)a.push(2*n.readUInt16());return a}).call(this):(function(){var s,a;for(a=[],i=0,s=this.length;i<s;i+=4)a.push(n.readUInt32());return a}).call(this)},e.prototype.indexOf=function(n){return this.offsets[n]},e.prototype.lengthOf=function(n){return this.offsets[n+1]-this.offsets[n]},e.prototype.encode=function(n,r){for(var i=new Uint32Array(this.offsets.length),s=0,a=0,o=0;o<i.length;++o)if(i[o]=s,a<r.length&&r[a]==o){++a,i[o]=s;var l=this.offsets[o],u=this.offsets[o+1]-l;u>0&&(s+=u)}for(var h=new Array(4*i.length),p=0;p<i.length;++p)h[4*p+3]=255&i[p],h[4*p+2]=(65280&i[p])>>8,h[4*p+1]=(16711680&i[p])>>16,h[4*p]=(4278190080&i[p])>>24;return h},e}(),CD=function(){function t(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var e,n,r,i,s;for(n in i=this.font.cmap.tables[0].codeMap,e={},s=this.subset)r=s[n],e[n]=i[r];return e},t.prototype.glyphsFor=function(e){var n,r,i,s,a,o,l;for(i={},a=0,o=e.length;a<o;a++)i[s=e[a]]=this.font.glyf.glyphFor(s);for(s in n=[],i)(r=i[s])!=null&&r.compound&&n.push.apply(n,r.glyphIDs);if(n.length>0)for(s in l=this.glyphsFor(n))r=l[s],i[s]=r;return i},t.prototype.encode=function(e,n){var r,i,s,a,o,l,u,h,p,g,m,b,x,k,_;for(i in r=NN.encode(this.generateCmap(),"unicode"),a=this.glyphsFor(e),m={0:0},_=r.charMap)m[(l=_[i]).old]=l.new;for(b in g=r.maxGlyphID,a)b in m||(m[b]=g++);return h=function(A){var C,F;for(C in F={},A)F[A[C]]=C;return F}(m),p=Object.keys(h).sort(function(A,C){return A-C}),x=function(){var A,C,F;for(F=[],A=0,C=p.length;A<C;A++)o=p[A],F.push(h[o]);return F}(),s=this.font.glyf.encode(a,x,m),u=this.font.loca.encode(s.offsets,x),k={cmap:this.font.cmap.raw(),glyf:s.table,loca:u,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(n)},this.font.os2.exists&&(k["OS/2"]=this.font.os2.raw()),this.font.directory.encode(k)},t}();gt.API.PDFObject=function(){var t;function e(){}return t=function(n,r){return(Array(r+1).join("0")+n).slice(-r)},e.convert=function(n){var r,i,s,a;if(Array.isArray(n))return"["+function(){var o,l,u;for(u=[],o=0,l=n.length;o<l;o++)r=n[o],u.push(e.convert(r));return u}().join(" ")+"]";if(typeof n=="string")return"/"+n;if(n!=null&&n.isString)return"("+n+")";if(n instanceof Date)return"(D:"+t(n.getUTCFullYear(),4)+t(n.getUTCMonth(),2)+t(n.getUTCDate(),2)+t(n.getUTCHours(),2)+t(n.getUTCMinutes(),2)+t(n.getUTCSeconds(),2)+"Z)";if({}.toString.call(n)==="[object Object]"){for(i in s=["<<"],n)a=n[i],s.push("/"+i+" "+e.convert(a));return s.push(">>"),s.join(`
`)}return""+n},e}();function Oi(t){const[e,n,r]=t.split("/");return new Date(r,n-1,e)}function um(t){const e=String(t.getDate()).padStart(2,"0"),n=String(t.getMonth()+1).padStart(2,"0"),r=t.getFullYear();return`${e}/${n}/${r}`}async function EN(t){try{return{success:!0,id:(await sl(Xn(Tt,"absences"),{...t,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})).id}}catch(e){return console.error("Error creating absence:",e),{success:!1,error:e}}}async function LD(t,e){try{const n=In(Tt,"absences",t);return await Yo(n,{...e,updatedAt:new Date().toISOString()}),{success:!0}}catch(n){return console.error("Error updating absence:",n),{success:!1,error:n}}}async function RD(t){try{return await il(In(Tt,"absences",t)),{success:!0}}catch(e){return console.error("Error deleting absence:",e),{success:!1,error:e}}}async function kN(t){try{const e=Kd(Xn(Tt,"absences"),tg("employeeId","==",t),Q2("date","asc")),n=await ms(e),r=[];return n.forEach(i=>{r.push({id:i.id,...i.data()})}),{success:!0,absences:r}}catch(e){return console.error("Error fetching employee absences:",e),{success:!1,error:e,absences:[]}}}function uy(t,e){return t.find(n=>{const r=n.date;if(n.type==="extended"&&n.endDate){const i=Oi(n.date),s=Oi(n.endDate),a=Oi(e);return a>=i&&a<=s}return r===e})}async function jD(t,e){try{const n=t.map(r=>EN({...e,employeeId:r.id,employeeName:r.name}));return await Promise.all(n),{success:!0}}catch(n){return console.error("Error creating absence for all employees:",n),{success:!1,error:n}}}async function DD(t,e,n){try{const r=await kN(t);if(!r.success)return{success:!1,absences:[]};const i=Oi(e),s=Oi(n);return{success:!0,absences:r.absences.filter(o=>{const l=Oi(o.date);if(o.type==="extended"&&o.endDate){const u=Oi(o.endDate);return l<=s&&u>=i}return l>=i&&l<=s})}}catch(r){return console.error("Error fetching absences for date range:",r),{success:!1,error:r,absences:[]}}}function FD(t,e,n){const r=uy(n,t);return r?r.type==="partial"?{worked:r.hoursWorked||0,minusLunch:r.hoursWorked||0}:{worked:0,minusLunch:0}:e==="Fredag"?{worked:7,minusLunch:7}:{worked:7.5,minusLunch:7.5}}function OD(t,e){const n=uy(e,t);if(!n)return"";let r=n.absenceReason;return n.comment&&(r+=` - ${n.comment}`),r}async function MD(t,e,n,r,i){const s=new gt({orientation:"portrait",unit:"mm",format:"a4"}),a=r?i:i.filter(b=>n.includes(b.name)),o=C7(t,e),l=o[0].formattedDate,u=o[o.length-1].formattedDate;console.log("=== PDF GENERATION DEBUG ==="),console.log("Date range:",l,"to",u),console.log("Total dates:",o.length),console.log("First date format:",l);let h=null;try{const b=await fetch("/logo_black.png");if(b.ok){const x=await b.blob();h=await new Promise(k=>{const _=new FileReader;_.onloadend=()=>k(_.result),_.readAsDataURL(x)})}}catch(b){console.log("Could not load logo:",b)}for(let b=0;b<a.length;b++){const x=a[b];b>0&&s.addPage(),console.log(`
--- Loading absences for ${x.name} (ID: ${x.id}) ---`);const k=await DD(x.id,l,u),_=k.success?k.absences:[];console.log(`Found ${_.length} absence(s) for ${x.name}`),_.length>0&&console.log("Absences:",_.map(A=>`${A.date} (${A.absenceReason})`).join(", ")),VD(s,t,e,o,x.name,h,_)}const p=rN(e),m=`Timeregistrering_${iN(t,e).replace(" / ","_")}_${p.replace(" / ","_")}.pdf`;console.log(`=== PDF GENERATION COMPLETE ===
`),s.save(m)}function VD(t,e,n,r,i,s,a){const o=t.internal.pageSize.getWidth(),l=t.internal.pageSize.getHeight(),u=15;let h=u;t.setFontSize(18),t.setFont("helvetica","bold");const p=iN(e,n);if(t.text(`${p} Timeregistrering`,u,h),s)try{t.addImage(s,"PNG",o-u-40,h-5,40,20)}catch(A){console.log("Error adding logo to PDF:",A)}h+=8,t.setFontSize(12),t.setFont("helvetica","normal");const g=rN(n);t.text(g,u,h),h+=8,t.setFontSize(9),t.setFont("helvetica","normal"),t.text("AC Handymand.dk ApS",u,h),h+=4,t.text("Axel Juels All 72",u,h),h+=4,t.text("2750 Ballerup",u,h),h+=4,t.text("CVR 42397792",u,h),h+=6,t.setFont("helvetica","normal"),t.setFontSize(9),t.text("Oversigt over arbejdstimer, sygdom, SH, FE, FF og overarbejde (OA).",u,h),h+=4,t.setFont("helvetica","bold"),t.setTextColor(255,0,0),t.text("Afleveres d. 19 i hver mned.",u,h),t.setTextColor(0,0,0),h+=8,UD(t,u,h,o-2*u,r,a);const m=l-25,b=o/3,x=(o-b)/2;t.setFont("helvetica","normal"),t.setFontSize(10),t.text("Underskrift:",x-25,m),t.line(x,m,x+b,m);const k=t.getTextWidth(i),_=x+(b-k)/2;t.text(i,_,m+6)}function UD(t,e,n,r,i,s){const a=[{header:"Dato",width:16},{header:"Ugedag",width:14},{header:"Fra kl. / Til kl.",width:22},{header:"Total timer",width:18},{header:`Total timer
minus frokost`,width:22},{header:"Afvigelse / Bemrkning",width:65},{header:"Arb. timer",width:16},{header:"OA",width:12}],o=a.reduce((b,x)=>b+x.width,0),l=r/o;a.forEach(b=>b.width*=l);const u=6,h=8;let p=e;t.setFontSize(8),t.setFont("helvetica","bold"),a.forEach(b=>{t.rect(p,n,b.width,h);const x=b.header.split(`
`),k=3,_=n+3;x.forEach((A,C)=>{const F=p+b.width/2;t.text(A,F,_+C*k,{align:"center"})}),p+=b.width}),n+=h;let g=0,m=0;t.setFont("helvetica","normal"),t.setFontSize(8),i.forEach(b=>{p=e;const x=uy(s,b.formattedDate),k=FD(b.formattedDate,b.weekday,s),_=OD(b.formattedDate,s);x&&(m++,console.log(` Absence matched on ${b.formattedDate}: ${x.absenceReason}`)),b.isWeekend||(g+=k.minusLunch),a.forEach((A,C)=>{t.rect(p,n,A.width,u);let F="",Y=[0,0,0];if(C===0)F=b.formattedDate;else if(C===1)F=b.weekday,b.isWeekend&&(Y=[255,0,0]);else if(C===2&&!b.isWeekend)(!x||x.type==="partial")&&(b.weekday==="Fredag"?F="07:00-14:30":F="07:00-15:00");else if(C===3&&!b.isWeekend)x&&x.type!=="partial"?F="0":x&&x.type==="partial"?F=(x.hoursWorked||0).toString().replace(".",","):b.weekday==="Fredag"?F="7,5":F="8";else if(C===4&&!b.isWeekend){const B=k.minusLunch;B>0?F=B.toString().replace(".",","):F="0"}else if(C===5)F=_;else if(C===6&&!b.isWeekend){const B=k.worked;B>0?F=B.toString().replace(".",","):F="0"}if(F){t.setTextColor(...Y);const B=p+A.width/2;if(C===5&&F.length>40){t.setFontSize(7);const y=t.splitTextToSize(F,A.width-2)[0];t.text(y,B,n+u/2+1.5,{align:"center"}),t.setFontSize(8)}else t.text(F,B,n+u/2+1.5,{align:"center"});t.setTextColor(0,0,0)}p+=A.width}),n+=u}),console.log(`Total absence matches in PDF table: ${m}`),p=e,a.forEach((b,x)=>{if((x===5||x===6)&&t.rect(p,n,b.width,u),x===5){t.setFont("helvetica","bold");const k="Total timer:",_=t.getTextWidth(k);t.text(k,p+b.width-_-1,n+u/2+1.5),t.setFont("helvetica","normal")}else if(x===6){t.setFont("helvetica","bold");const k=g.toString().replace(".",","),_=p+b.width/2;t.text(k,_,n+u/2+1.5,{align:"center"}),t.setFont("helvetica","normal")}p+=b.width})}function BD({employee:t,employees:e,onClose:n,onSuccess:r}){const{showSuccess:i,showError:s,showWarning:a}=ps(),[o,l]=oe.useState("partial"),[u,h]=oe.useState(!1),[p,g]=oe.useState(""),[m,b]=oe.useState("Feriedag"),[x,k]=oe.useState(""),[_,A]=oe.useState(""),[C,F]=oe.useState(""),[Y,B]=oe.useState(!1),L=["Feriedag","Feriefridag","Syg","Helligdag","Andet"],y=async S=>{if(S.preventDefault(),!p){a("Vlg venligst en dato.");return}if(o==="partial"&&!_){a("Indtast antal arbejdstimer.");return}if(o==="extended"&&!C){a("Vlg venligst slut dato.");return}if(o==="extended"){const R=new Date(p);if(new Date(C)<R){s("Slut dato skal vre efter start dato.");return}}h(!0);try{const R=new Date(p),E=um(R),I={employeeId:t.id,employeeName:t.name,date:E,type:o,absenceReason:m,comment:x||""};if(o==="partial"&&(I.hoursWorked=parseFloat(_)),o==="extended"){const P=new Date(C);I.endDate=um(P)}Y&&o==="single"?(await jD(e,{date:E,type:o,absenceReason:m,comment:x||""})).success?(i("Fravr oprettet for alle medarbejdere!"),r(),n()):s("Fejl ved oprettelse af fravr for alle medarbejdere."):(await EN(I)).success?(i("Fravr oprettet!"),r(),n()):s("Fejl ved oprettelse af fravr.")}catch(R){console.error("Error creating absence:",R),s("Der opstod en fejl.")}finally{h(!1)}};return f.jsx("div",{className:"modal-overlay",onClick:n,children:f.jsxs("div",{className:"modal-content",onClick:S=>S.stopPropagation(),children:[f.jsxs("div",{className:"modal-header",children:[f.jsxs("h2",{children:["Opret fravr - ",t.name]}),f.jsx("button",{className:"modal-close",onClick:n,children:""})]}),f.jsxs("div",{className:"absence-tabs",children:[f.jsx("button",{className:`absence-tab ${o==="partial"?"active":""}`,onClick:()=>l("partial"),children:"Delvist fravr"}),f.jsx("button",{className:`absence-tab ${o==="single"?"active":""}`,onClick:()=>l("single"),children:"Enkelte fravrsdage"}),f.jsx("button",{className:`absence-tab ${o==="extended"?"active":""}`,onClick:()=>l("extended"),children:"Lngere fravr"})]}),f.jsxs("form",{onSubmit:y,children:[f.jsxs("div",{className:"modal-body",children:[o==="partial"&&f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:"Dato *"}),f.jsx("input",{type:"date",value:p,onChange:S=>g(S.target.value),required:!0})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:"Antal arbejdstimer *"}),f.jsx("input",{type:"number",step:"0.5",min:"0",max:"12",value:_,onChange:S=>A(S.target.value),placeholder:"f.eks. 4",required:!0}),f.jsx("span",{className:"form-hint",children:"Indtast hvor mange timer der blev arbejdet"})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:"Kommentar (valgfri)"}),f.jsx("input",{type:"text",value:x,onChange:S=>k(S.target.value),placeholder:"f.eks. Gik hjem kl. 12"})]})]}),o==="single"&&f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:"Dato *"}),f.jsx("input",{type:"date",value:p,onChange:S=>g(S.target.value),required:!0})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:"Type af fravr *"}),f.jsx("select",{value:m,onChange:S=>b(S.target.value),required:!0,children:L.map(S=>f.jsx("option",{value:S,children:S},S))})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:"Kommentar (valgfri)"}),f.jsx("input",{type:"text",value:x,onChange:S=>k(S.target.value),placeholder:"f.eks. Betalt ferie"})]}),f.jsxs("div",{className:"checkbox-group",children:[f.jsx("input",{type:"checkbox",id:"applyToAll",checked:Y,onChange:S=>B(S.target.checked)}),f.jsx("label",{htmlFor:"applyToAll",className:"checkbox-label",children:"Lukkedag - tilfj fravr p alle medarbejdere"})]})]}),o==="extended"&&f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:"Start dato *"}),f.jsx("input",{type:"date",value:p,onChange:S=>g(S.target.value),required:!0})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:"Slut dato *"}),f.jsx("input",{type:"date",value:C,onChange:S=>F(S.target.value),required:!0})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:"Type af fravr *"}),f.jsx("select",{value:m,onChange:S=>b(S.target.value),required:!0,children:L.map(S=>f.jsx("option",{value:S,children:S},S))})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:"Kommentar (valgfri)"}),f.jsx("input",{type:"text",value:x,onChange:S=>k(S.target.value),placeholder:"f.eks. Sommerferie"})]})]})]}),f.jsxs("div",{className:"modal-footer",children:[f.jsx("button",{type:"button",className:"btn-secondary",onClick:n,disabled:u,children:"Annuller"}),f.jsx("button",{type:"submit",className:"btn-primary",disabled:u,children:u?"Gemmer...":"Gem fravr"})]})]})]})})}function KD({employee:t,onClose:e,onSuccess:n}){const{showSuccess:r,showError:i,showWarning:s,showConfirm:a}=ps(),[o,l]=oe.useState(new Date().getMonth()),[u,h]=oe.useState(new Date().getFullYear()),[p,g]=oe.useState([]),[m,b]=oe.useState(!0),[x,k]=oe.useState(null),[_,A]=oe.useState(!1),[C,F]=oe.useState(""),[Y,B]=oe.useState(""),[L,y]=oe.useState(""),[S,R]=oe.useState(""),[E,I]=oe.useState(""),P=["Feriedag","Feriefridag","Syg","Helligdag","Andet"],M=["Januar","Februar","Marts","April","Maj","Juni","Juli","August","September","Oktober","November","December"];oe.useEffect(()=>{te()},[]);const te=async()=>{b(!0);const W=await kN(t.id);W.success&&g(W.absences),b(!1)},V=W=>{let se=o+W,le=u;se>11?(se=0,le++):se<0&&(se=11,le--),l(se),h(le)},U=(W,se)=>new Date(se,W+1,0).getDate(),z=(W,se)=>{const le=new Date(se,W,1).getDay();return le===0?6:le-1},H=W=>{const se=`${String(W).padStart(2,"0")}/${String(o+1).padStart(2,"0")}/${u}`;return p.filter(le=>{if(le.type==="extended"&&le.endDate){const fe=Oi(le.date),pe=Oi(le.endDate),ke=Oi(se);return ke>=fe&&ke<=pe}return le.date===se})},ne=W=>{const se=H(W);se.length>0&&(k(se[0]),A(!1))},_e=()=>{if(!x)return;const se=Oi(x.date).toISOString().split("T")[0];if(F(se),y(x.absenceReason),R(x.comment||""),I(x.hoursWorked||""),x.endDate){const fe=Oi(x.endDate).toISOString().split("T")[0];B(fe)}else B("");A(!0)},O=async()=>{if(!C||!L){s("Udfyld alle pkrvede felter.");return}b(!0);const W=new Date(C),le={date:um(W),absenceReason:L,comment:S};if(x.type==="partial"&&(le.hoursWorked=parseFloat(E)),x.type==="extended"&&Y){const pe=new Date(Y);le.endDate=um(pe)}(await LD(x.id,le)).success?(r("Fravr opdateret!"),await te(),k(null),A(!1),n()):i("Fejl ved opdatering af fravr."),b(!1)},Q=async()=>{if(!x||!await a({title:"Slet fravr",message:"Er du sikker p at du vil slette dette fravr?",confirmText:"Slet",cancelText:"Annuller"}))return;b(!0),(await RD(x.id)).success?(r("Fravr slettet!"),await te(),k(null),A(!1),n()):i("Fejl ved sletning af fravr."),b(!1)},J=()=>{const W=U(o,u),se=z(o,u),le=[];for(let fe=0;fe<se;fe++)le.push(f.jsx("div",{className:"calendar-day empty"},`empty-${fe}`));for(let fe=1;fe<=W;fe++){const pe=H(fe),ke=pe.length>0;le.push(f.jsxs("div",{className:`calendar-day ${ke?"has-absence":""}`,onClick:()=>ne(fe),children:[f.jsx("div",{className:"calendar-day-number",children:fe}),ke&&f.jsx("div",{className:"calendar-absence-indicator",children:pe[0].absenceReason.substring(0,3)})]},fe))}return le};return f.jsx("div",{className:"modal-overlay",onClick:e,children:f.jsxs("div",{className:"modal-content modal-large",onClick:W=>W.stopPropagation(),children:[f.jsxs("div",{className:"modal-header",children:[f.jsxs("h2",{children:["Se / rediger fravr - ",t.name]}),f.jsx("button",{className:"modal-close",onClick:e,children:""})]}),f.jsxs("div",{className:"modal-body",children:[f.jsxs("div",{className:"calendar-navigation",children:[f.jsx("button",{className:"btn-secondary btn-small",onClick:()=>V(-1),disabled:m,children:" Forrige"}),f.jsxs("h3",{children:[M[o]," ",u]}),f.jsx("button",{className:"btn-secondary btn-small",onClick:()=>V(1),disabled:m,children:"Nste "})]}),m&&f.jsx("p",{children:"Indlser..."}),!m&&f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"calendar-container",children:[f.jsxs("div",{className:"calendar-header",children:[f.jsx("div",{className:"calendar-header-day",children:"Man"}),f.jsx("div",{className:"calendar-header-day",children:"Tir"}),f.jsx("div",{className:"calendar-header-day",children:"Ons"}),f.jsx("div",{className:"calendar-header-day",children:"Tor"}),f.jsx("div",{className:"calendar-header-day",children:"Fre"}),f.jsx("div",{className:"calendar-header-day",children:"Lr"}),f.jsx("div",{className:"calendar-header-day",children:"Sn"})]}),f.jsx("div",{className:"calendar-grid",children:J()})]}),x&&!_&&f.jsxs("div",{className:"absence-details",children:[f.jsx("h4",{children:"Fravrsdetaljer"}),f.jsxs("div",{className:"detail-row",children:[f.jsx("strong",{children:"Dato:"})," ",x.date,x.endDate&&` til ${x.endDate}`]}),f.jsxs("div",{className:"detail-row",children:[f.jsx("strong",{children:"Type:"})," ",x.absenceReason]}),x.hoursWorked!==void 0&&f.jsxs("div",{className:"detail-row",children:[f.jsx("strong",{children:"Arbejdstimer:"})," ",x.hoursWorked]}),x.comment&&f.jsxs("div",{className:"detail-row",children:[f.jsx("strong",{children:"Kommentar:"})," ",x.comment]}),f.jsxs("div",{className:"detail-actions",children:[f.jsx("button",{className:"btn-primary btn-small",onClick:_e,children:"Rediger"}),f.jsx("button",{className:"btn-small btn-danger",onClick:Q,children:"Slet"}),f.jsx("button",{className:"btn-secondary btn-small",onClick:()=>k(null),children:"Luk"})]})]}),x&&_&&f.jsxs("div",{className:"absence-details",children:[f.jsx("h4",{children:"Rediger fravr"}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:"Dato *"}),f.jsx("input",{type:"date",value:C,onChange:W=>F(W.target.value)})]}),x.type==="extended"&&f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:"Slut dato *"}),f.jsx("input",{type:"date",value:Y,onChange:W=>B(W.target.value)})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:"Type af fravr *"}),f.jsx("select",{value:L,onChange:W=>y(W.target.value),children:P.map(W=>f.jsx("option",{value:W,children:W},W))})]}),x.type==="partial"&&f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:"Arbejdstimer *"}),f.jsx("input",{type:"number",step:"0.5",min:"0",max:"12",value:E,onChange:W=>I(W.target.value)})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:"Kommentar"}),f.jsx("input",{type:"text",value:S,onChange:W=>R(W.target.value)})]}),f.jsxs("div",{className:"detail-actions",children:[f.jsx("button",{className:"btn-primary btn-small",onClick:O,children:"Gem ndringer"}),f.jsx("button",{className:"btn-secondary btn-small",onClick:()=>A(!1),children:"Annuller"})]})]})]})]}),f.jsx("div",{className:"modal-footer",children:f.jsx("button",{className:"btn-secondary",onClick:e,children:"Luk"})})]})})}function qD(){const{showError:t,showWarning:e}=ps(),[n,r]=oe.useState(new Date().getFullYear()),[i,s]=oe.useState(new Date().getMonth()),[a,o]=oe.useState(!1),[l,u]=oe.useState(""),[h,p]=oe.useState([]),[g,m]=oe.useState(!1),[b,x]=oe.useState(!1),[k,_]=oe.useState(!1),[A,C]=oe.useState(!1),[F,Y]=oe.useState(null),B=L7(),L=Array.from({length:10},(P,M)=>new Date().getFullYear()-2+M);oe.useEffect(()=>{y()},[]);const y=async()=>{m(!0);try{const P=await ms(Xn(Tt,"employees")),M=[];P.forEach(te=>{M.push({id:te.id,...te.data()})}),M.sort((te,V)=>te.name.localeCompare(V.name)),p(M),M.length>0&&!l&&u(M[0].name)}catch(P){console.error("Error loading employees:",P),t("Fejl ved indlsning af medarbejdere.")}finally{m(!1)}},S=async()=>{if(!a&&!l){e("Vlg venligst en medarbejder.");return}x(!0);try{const P=a?h.map(M=>M.name):[l];await MD(n,i,P,a,h)}catch(P){console.error("Error generating PDF:",P),t("Der opstod en fejl ved generering af PDF. Prv igen.")}finally{x(!1)}},R=P=>{Y(P),_(!0)},E=P=>{Y(P),C(!0)},I=()=>{};return f.jsxs("div",{children:[f.jsxs("div",{className:"page-header",children:[f.jsx("h1",{children:"Timeregistrering"}),f.jsx("p",{children:"Generr timeregistreringsformularer til medarbejdere"})]}),f.jsxs("div",{className:"content-card",children:[f.jsx("h3",{style:{marginBottom:"20px"},children:"Generr PDF"}),f.jsxs("div",{className:"timesheet-form",children:[f.jsxs("div",{className:"form-section",children:[f.jsx("label",{htmlFor:"year",children:"Vlg r"}),f.jsx("select",{id:"year",value:n,onChange:P=>r(Number(P.target.value)),children:L.map(P=>f.jsx("option",{value:P,children:P},P))})]}),f.jsxs("div",{className:"form-section",children:[f.jsx("label",{htmlFor:"monthPair",children:"Vlg mneder"}),f.jsx("select",{id:"monthPair",value:i,onChange:P=>s(Number(P.target.value)),children:B.map(P=>f.jsx("option",{value:P.value,children:P.label},P.value))})]}),f.jsxs("div",{className:"form-section",children:[f.jsx("label",{children:"Ansatte"}),f.jsxs("div",{className:"checkbox-group",children:[f.jsx("input",{type:"checkbox",id:"allEmployees",checked:a,onChange:P=>o(P.target.checked)}),f.jsx("label",{htmlFor:"allEmployees",children:"Alle ansatte"})]}),g?f.jsx("p",{children:"Indlser medarbejdere..."}):f.jsx("select",{value:l,onChange:P=>u(P.target.value),disabled:a||h.length===0,children:h.length===0?f.jsx("option",{value:"",children:"Ingen medarbejdere"}):h.map(P=>f.jsx("option",{value:P.name,children:P.name},P.id))}),h.length===0&&f.jsx("p",{className:"no-employees-text",children:"Tilfj medarbejdere i Indstillinger frst"})]}),f.jsx("button",{className:"btn-generate",onClick:S,disabled:b||h.length===0,children:b?"Genererer...":"Generr PDF"})]})]}),f.jsxs("div",{className:"content-card",style:{marginTop:"30px"},children:[f.jsx("h3",{style:{marginBottom:"20px"},children:"Fravr og sygdom"}),g?f.jsx("p",{children:"Indlser medarbejdere..."}):h.length===0?f.jsx("p",{className:"no-employees-text",children:"Tilfj medarbejdere i Indstillinger frst"}):f.jsx("div",{className:"absence-employee-list",children:h.map(P=>f.jsxs("div",{className:"absence-employee-row",children:[f.jsx("span",{className:"absence-employee-name",children:P.name}),f.jsxs("div",{className:"absence-employee-actions",children:[f.jsx("button",{className:"btn-primary btn-small",onClick:()=>R(P),children:"Opret fravr"}),f.jsx("button",{className:"btn-secondary btn-small",onClick:()=>E(P),children:"Se / rediger fravr"})]})]},P.id))})]}),k&&F&&f.jsx(BD,{employee:F,employees:h,onClose:()=>_(!1),onSuccess:I}),A&&F&&f.jsx(KD,{employee:F,onClose:()=>C(!1),onSuccess:I})]})}function zD({employee:t,onSave:e,onClose:n,isOpen:r}){const[i,s]=oe.useState("");oe.useEffect(()=>{s(t&&t.name||"")},[t,r]);const a=o=>{if(o.preventDefault(),!i.trim()){alert("Indtast venligst et navn.");return}e({name:i.trim()})};return r?f.jsx("div",{className:"modal-overlay",onClick:n,children:f.jsxs("div",{className:"modal-content",onClick:o=>o.stopPropagation(),children:[f.jsxs("div",{className:"modal-header",children:[f.jsx("h2",{children:t?"Redigr medarbejder":"Tilfj medarbejder"}),f.jsx("button",{className:"modal-close",onClick:n,children:""})]}),f.jsxs("form",{onSubmit:a,children:[f.jsx("div",{className:"modal-body",children:f.jsxs("div",{className:"form-group",children:[f.jsx("label",{htmlFor:"employeeName",children:"Navn *"}),f.jsx("input",{type:"text",id:"employeeName",value:i,onChange:o=>s(o.target.value),placeholder:"Indtast medarbejdernavn",autoFocus:!0,required:!0})]})}),f.jsxs("div",{className:"modal-footer",children:[f.jsx("button",{type:"button",className:"btn-secondary",onClick:n,children:"Annuller"}),f.jsx("button",{type:"submit",className:"btn-primary",children:t?"Gem":"Tilfj"})]})]})]})}):null}function HD(){const{showSuccess:t,showError:e,showCriticalConfirm:n}=ps(),[r,i]=oe.useState([]),[s,a]=oe.useState(!1),[o,l]=oe.useState(!1),[u,h]=oe.useState(null),[p,g]=oe.useState(450),[m,b]=oe.useState(!1),[x,k]=oe.useState(450);oe.useEffect(()=>{_(),A()},[]);const _=async()=>{try{const y=await ng(In(Tt,"settings","hourlyRates"));if(y.exists()){const S=y.data().defaultRate||450;g(S),k(S)}}catch(y){console.error("Error loading settings:",y)}},A=async()=>{a(!0);try{const y=await ms(Xn(Tt,"employees")),S=[];y.forEach(R=>{S.push({id:R.id,...R.data()})}),S.sort((R,E)=>R.name.localeCompare(E.name)),i(S)}catch(y){console.error("Error loading employees:",y),e("Der opstod en fejl ved indlsning af medarbejdere.")}finally{a(!1)}},C=async()=>{try{const y=parseFloat(x);if(isNaN(y)||y<=0){e("Indtast venligst en gyldig timepris.");return}await W0(In(Tt,"settings","hourlyRates"),{defaultRate:y,updatedAt:new Date().toISOString()}),g(y),b(!1),t("Timepris gemt!")}catch(y){console.error("Error saving default rate:",y),e("Der opstod en fejl ved gemning af timepris.")}},F=()=>{h(null),l(!0)},Y=y=>{h(y),l(!0)},B=async y=>{if(await n({title:"Slet medarbejder?",message:"Dette vil permanent slette medarbejderen fra systemet.",itemName:y.name,warningText:"Historiske timeregistreringer vil stadig vre synlige, men medarbejderen kan ikke vlges fremadrettet",confirmText:"Slet Permanent",cancelText:"Annuller"}))try{await il(In(Tt,"employees",y.id)),t("Medarbejder slettet!"),await A()}catch(R){console.error("Error deleting employee:",R),e("Der opstod en fejl ved sletning af medarbejder.")}},L=async y=>{try{u?(await Yo(In(Tt,"employees",u.id),{name:y.name,updatedAt:new Date().toISOString()}),t("Medarbejder opdateret!")):(await sl(Xn(Tt,"employees"),{name:y.name,createdAt:new Date().toISOString()}),t("Medarbejder oprettet!")),l(!1),await A()}catch(S){console.error("Error saving employee:",S),e("Der opstod en fejl ved gemning af medarbejder.")}};return f.jsxs("div",{children:[f.jsxs("div",{className:"page-header",children:[f.jsx("h1",{children:"Indstillinger"}),f.jsx("p",{children:"Administrr medarbejdere og priser"})]}),f.jsxs("div",{className:"content-card",style:{marginBottom:"20px"},children:[f.jsx("h2",{style:{marginBottom:"20px",fontSize:"20px",color:"#2c3e50"},children:"Standard Timepris"}),m?f.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"15px"},children:[f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[f.jsx("input",{type:"number",value:x,onChange:y=>k(y.target.value),min:"0",step:"50",style:{padding:"10px",fontSize:"18px",width:"150px",border:"1px solid #ddd",borderRadius:"5px"},autoFocus:!0}),f.jsx("span",{style:{color:"#7f8c8d"},children:"kr/time"})]}),f.jsxs("div",{style:{display:"flex",gap:"10px"},children:[f.jsx("button",{className:"btn-secondary",onClick:()=>{k(p),b(!1)},children:"Annuller"}),f.jsx("button",{className:"btn-primary",onClick:C,children:"Gem"})]})]}):f.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[f.jsxs("div",{children:[f.jsxs("div",{style:{fontSize:"32px",fontWeight:"bold",color:"#27ae60",marginBottom:"5px"},children:[p," kr"]}),f.jsx("div",{style:{fontSize:"14px",color:"#7f8c8d"},children:"Standard timepris brugt for alle sager (kan tilpasses per sag)"})]}),f.jsx("button",{className:"btn-secondary",onClick:()=>b(!0),children:"Redigr"})]})]}),f.jsxs("div",{className:"content-card",children:[f.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[f.jsx("h2",{style:{margin:0,fontSize:"20px",color:"#2c3e50"},children:"Medarbejdere"}),f.jsx("button",{className:"btn-primary",onClick:F,children:"+ Tilfj Medarbejder"})]}),s?f.jsx("p",{children:"Indlser medarbejdere..."}):r.length===0?f.jsx("div",{style:{textAlign:"center",padding:"40px",color:"#7f8c8d"},children:f.jsx("p",{children:"Ingen medarbejdere tilfjet endnu."})}):f.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[f.jsx("thead",{children:f.jsxs("tr",{style:{borderBottom:"2px solid #ecf0f1"},children:[f.jsx("th",{style:{textAlign:"left",padding:"12px",color:"#2c3e50",fontWeight:"600"},children:"Navn"}),f.jsx("th",{style:{textAlign:"right",padding:"12px",color:"#2c3e50",fontWeight:"600"},children:"Handlinger"})]})}),f.jsx("tbody",{children:r.map(y=>f.jsxs("tr",{style:{borderBottom:"1px solid #ecf0f1"},children:[f.jsx("td",{style:{padding:"15px"},children:f.jsx("strong",{style:{fontSize:"15px",color:"#2c3e50"},children:y.name})}),f.jsxs("td",{style:{padding:"15px",textAlign:"right"},children:[f.jsx("button",{className:"btn-action btn-edit",onClick:()=>Y(y),children:"Redigr"}),f.jsx("button",{className:"btn-action btn-delete",onClick:()=>B(y),children:"Slet"})]})]},y.id))})]})]}),f.jsx(zD,{isOpen:o,onClose:()=>l(!1),onSave:L,employee:u})]})}const $D=async t=>{const e=In(Tt,"projectCounter",String(t));try{const n=await ng(e);if(n.exists()){const i=(n.data().currentNumber||0)+1;return await W0(e,{currentNumber:i}),Hw(t,i)}else return await W0(e,{currentNumber:1}),Hw(t,1)}catch(n){throw console.error("Error getting next project number:",n),n}},Hw=(t,e)=>{const n=String(e).padStart(4,"0");return`${t}-${n}`},IN=t=>!t||t.length===0?0:t.reduce((e,n)=>e+(n.duration||0),0),WD=t=>!t||t.length===0?0:t.filter(e=>e.billable).reduce((e,n)=>e+(n.duration||0),0),GD=t=>!t||t.length===0?0:t.filter(e=>e.billable).reduce((e,n)=>e+(n.duration||0)*(n.rate||0),0),TN=async t=>{try{const e=Kd(Xn(Tt,"timeEntries"),tg("projectId","==",t)),n=await ms(e),r=[];return n.forEach(i=>{r.push({id:i.id,...i.data()})}),r.sort((i,s)=>new Date(s.date)-new Date(i.date)),r}catch(e){throw console.error("Error getting project time entries:",e),e}},QD=t=>t?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t):!0,YD=t=>t?t.replace(/\D/g,"").length===8:!0,JD={1e3:"Kbenhavn K",1050:"Kbenhavn K",1100:"Kbenhavn K",1150:"Kbenhavn K",1151:"Kbenhavn K",1152:"Kbenhavn K",1153:"Kbenhavn K",1154:"Kbenhavn K",1155:"Kbenhavn K",1156:"Kbenhavn K",1157:"Kbenhavn K",1158:"Kbenhavn K",1159:"Kbenhavn K",1160:"Kbenhavn K",1161:"Kbenhavn K",1162:"Kbenhavn K",1163:"Kbenhavn K",1164:"Kbenhavn K",1165:"Kbenhavn K",1166:"Kbenhavn K",1167:"Kbenhavn K",1168:"Kbenhavn K",1169:"Kbenhavn K",1170:"Kbenhavn K",1171:"Kbenhavn K",1172:"Kbenhavn K",1173:"Kbenhavn K",1174:"Kbenhavn K",1175:"Kbenhavn K",1200:"Kbenhavn K",1201:"Kbenhavn K",1202:"Kbenhavn K",1203:"Kbenhavn K",1204:"Kbenhavn K",1205:"Kbenhavn K",1206:"Kbenhavn K",1207:"Kbenhavn K",1208:"Kbenhavn K",1209:"Kbenhavn K",1210:"Kbenhavn K",1211:"Kbenhavn K",1212:"Kbenhavn K",1213:"Kbenhavn K",1214:"Kbenhavn K",1215:"Kbenhavn K",1216:"Kbenhavn K",1217:"Kbenhavn K",1218:"Kbenhavn K",1219:"Kbenhavn K",1220:"Kbenhavn K",1221:"Kbenhavn K",1240:"Kbenhavn K",1250:"Kbenhavn K",1251:"Kbenhavn K",1252:"Kbenhavn K",1253:"Kbenhavn K",1254:"Kbenhavn K",1255:"Kbenhavn K",1256:"Kbenhavn K",1257:"Kbenhavn K",1258:"Kbenhavn K",1259:"Kbenhavn K",1260:"Kbenhavn K",1261:"Kbenhavn K",1263:"Kbenhavn K",1264:"Kbenhavn K",1265:"Kbenhavn K",1266:"Kbenhavn K",1267:"Kbenhavn K",1268:"Kbenhavn K",1270:"Kbenhavn K",1271:"Kbenhavn K",1300:"Kbenhavn K",1301:"Kbenhavn K",1302:"Kbenhavn K",1303:"Kbenhavn K",1304:"Kbenhavn K",1305:"Kbenhavn K",1306:"Kbenhavn K",1307:"Kbenhavn K",1308:"Kbenhavn K",1309:"Kbenhavn K",1310:"Kbenhavn K",1311:"Kbenhavn K",1312:"Kbenhavn K",1313:"Kbenhavn K",1314:"Kbenhavn K",1315:"Kbenhavn K",1316:"Kbenhavn K",1317:"Kbenhavn K",1318:"Kbenhavn K",1319:"Kbenhavn K",1320:"Kbenhavn K",1321:"Kbenhavn K",1322:"Kbenhavn K",1323:"Kbenhavn K",1324:"Kbenhavn K",1325:"Kbenhavn K",1326:"Kbenhavn K",1327:"Kbenhavn K",1328:"Kbenhavn K",1329:"Kbenhavn K",1350:"Kbenhavn K",1352:"Kbenhavn K",1353:"Kbenhavn K",1354:"Kbenhavn K",1355:"Kbenhavn K",1356:"Kbenhavn K",1357:"Kbenhavn K",1358:"Kbenhavn K",1359:"Kbenhavn K",1360:"Kbenhavn K",1361:"Kbenhavn K",1362:"Kbenhavn K",1363:"Kbenhavn K",1364:"Kbenhavn K",1365:"Kbenhavn K",1366:"Kbenhavn K",1367:"Kbenhavn K",1368:"Kbenhavn K",1369:"Kbenhavn K",1370:"Kbenhavn K",1371:"Kbenhavn K",1400:"Kbenhavn K",1401:"Kbenhavn K",1402:"Kbenhavn K",1403:"Kbenhavn K",1406:"Kbenhavn K",1407:"Kbenhavn K",1408:"Kbenhavn K",1409:"Kbenhavn K",1410:"Kbenhavn K",1411:"Kbenhavn K",1412:"Kbenhavn K",1413:"Kbenhavn K",1414:"Kbenhavn K",1415:"Kbenhavn K",1416:"Kbenhavn K",1417:"Kbenhavn K",1418:"Kbenhavn K",1419:"Kbenhavn K",1420:"Kbenhavn K",1421:"Kbenhavn K",1422:"Kbenhavn K",1423:"Kbenhavn K",1424:"Kbenhavn K",1425:"Kbenhavn K",1426:"Kbenhavn K",1427:"Kbenhavn K",1428:"Kbenhavn K",1429:"Kbenhavn K",1430:"Kbenhavn K",1431:"Kbenhavn K",1432:"Kbenhavn K",1433:"Kbenhavn K",1434:"Kbenhavn K",1435:"Kbenhavn K",1436:"Kbenhavn K",1437:"Kbenhavn K",1438:"Kbenhavn K",1439:"Kbenhavn K",1440:"Kbenhavn K",1441:"Kbenhavn K",1448:"Kbenhavn K",1450:"Kbenhavn K",1451:"Kbenhavn K",1452:"Kbenhavn K",1453:"Kbenhavn K",1454:"Kbenhavn K",1455:"Kbenhavn K",1456:"Kbenhavn K",1457:"Kbenhavn K",1458:"Kbenhavn K",1459:"Kbenhavn K",1460:"Kbenhavn K",1461:"Kbenhavn K",1462:"Kbenhavn K",1463:"Kbenhavn K",1464:"Kbenhavn K",1465:"Kbenhavn K",1466:"Kbenhavn K",1467:"Kbenhavn K",1468:"Kbenhavn K",1470:"Kbenhavn K",1471:"Kbenhavn K",1472:"Kbenhavn K",1473:"Kbenhavn K",1500:"Kbenhavn V",1501:"Kbenhavn V",1502:"Kbenhavn V",1503:"Kbenhavn V",1504:"Kbenhavn V",1505:"Kbenhavn V",1506:"Kbenhavn V",1507:"Kbenhavn V",1508:"Kbenhavn V",1509:"Kbenhavn V",1510:"Kbenhavn V",1511:"Kbenhavn V",1512:"Kbenhavn V",1513:"Kbenhavn V",1514:"Kbenhavn V",1515:"Kbenhavn V",1516:"Kbenhavn V",1517:"Kbenhavn V",1518:"Kbenhavn V",1519:"Kbenhavn V",1520:"Kbenhavn V",1521:"Kbenhavn V",1532:"Kbenhavn V",1533:"Kbenhavn V",1550:"Kbenhavn V",1551:"Kbenhavn V",1552:"Kbenhavn V",1553:"Kbenhavn V",1554:"Kbenhavn V",1555:"Kbenhavn V",1556:"Kbenhavn V",1557:"Kbenhavn V",1558:"Kbenhavn V",1559:"Kbenhavn V",1560:"Kbenhavn V",1561:"Kbenhavn V",1562:"Kbenhavn V",1563:"Kbenhavn V",1564:"Kbenhavn V",1566:"Kbenhavn V",1567:"Kbenhavn V",1568:"Kbenhavn V",1569:"Kbenhavn V",1570:"Kbenhavn V",1571:"Kbenhavn V",1572:"Kbenhavn V",1573:"Kbenhavn V",1574:"Kbenhavn V",1575:"Kbenhavn V",1576:"Kbenhavn V",1577:"Kbenhavn V",1592:"Kbenhavn V",1599:"Kbenhavn V",1600:"Kbenhavn V",1601:"Kbenhavn V",1602:"Kbenhavn V",1603:"Kbenhavn V",1604:"Kbenhavn V",1605:"Kbenhavn V",1606:"Kbenhavn V",1607:"Kbenhavn V",1608:"Kbenhavn V",1609:"Kbenhavn V",1610:"Kbenhavn V",1611:"Kbenhavn V",1612:"Kbenhavn V",1613:"Kbenhavn V",1614:"Kbenhavn V",1615:"Kbenhavn V",1616:"Kbenhavn V",1617:"Kbenhavn V",1618:"Kbenhavn V",1619:"Kbenhavn V",1620:"Kbenhavn V",1621:"Kbenhavn V",1622:"Kbenhavn V",1623:"Kbenhavn V",1624:"Kbenhavn V",1630:"Kbenhavn V",1631:"Kbenhavn V",1632:"Kbenhavn V",1633:"Kbenhavn V",1634:"Kbenhavn V",1635:"Kbenhavn V",1650:"Kbenhavn V",1651:"Kbenhavn V",1652:"Kbenhavn V",1653:"Kbenhavn V",1654:"Kbenhavn V",1655:"Kbenhavn V",1656:"Kbenhavn V",1657:"Kbenhavn V",1658:"Kbenhavn V",1659:"Kbenhavn V",1660:"Kbenhavn V",1661:"Kbenhavn V",1662:"Kbenhavn V",1663:"Kbenhavn V",1664:"Kbenhavn V",1665:"Kbenhavn V",1666:"Kbenhavn V",1667:"Kbenhavn V",1668:"Kbenhavn V",1669:"Kbenhavn V",1670:"Kbenhavn V",1671:"Kbenhavn V",1672:"Kbenhavn V",1673:"Kbenhavn V",1674:"Kbenhavn V",1675:"Kbenhavn V",1676:"Kbenhavn V",1677:"Kbenhavn V",1699:"Kbenhavn V",1700:"Kbenhavn V",1701:"Kbenhavn V",1702:"Kbenhavn V",1703:"Kbenhavn V",1704:"Kbenhavn V",1705:"Kbenhavn V",1706:"Kbenhavn V",1707:"Kbenhavn V",1708:"Kbenhavn V",1709:"Kbenhavn V",1710:"Kbenhavn V",1711:"Kbenhavn V",1712:"Kbenhavn V",1713:"Kbenhavn V",1714:"Kbenhavn V",1715:"Kbenhavn V",1716:"Kbenhavn V",1717:"Kbenhavn V",1718:"Kbenhavn V",1719:"Kbenhavn V",1720:"Kbenhavn V",1721:"Kbenhavn V",1722:"Kbenhavn V",1723:"Kbenhavn V",1724:"Kbenhavn V",1725:"Kbenhavn V",1726:"Kbenhavn V",1727:"Kbenhavn V",1728:"Kbenhavn V",1729:"Kbenhavn V",1730:"Kbenhavn V",1731:"Kbenhavn V",1732:"Kbenhavn V",1733:"Kbenhavn V",1734:"Kbenhavn V",1735:"Kbenhavn V",1736:"Kbenhavn V",1737:"Kbenhavn V",1738:"Kbenhavn V",1739:"Kbenhavn V",1749:"Kbenhavn V",1750:"Kbenhavn V",1751:"Kbenhavn V",1752:"Kbenhavn V",1753:"Kbenhavn V",1754:"Kbenhavn V",1755:"Kbenhavn V",1756:"Kbenhavn V",1757:"Kbenhavn V",1758:"Kbenhavn V",1759:"Kbenhavn V",1760:"Kbenhavn V",1761:"Kbenhavn V",1762:"Kbenhavn V",1763:"Kbenhavn V",1764:"Kbenhavn V",1765:"Kbenhavn V",1766:"Kbenhavn V",1770:"Kbenhavn V",1771:"Kbenhavn V",1772:"Kbenhavn V",1773:"Kbenhavn V",1774:"Kbenhavn V",1775:"Kbenhavn V",1777:"Kbenhavn V",1780:"Kbenhavn V",1785:"Kbenhavn V",1786:"Kbenhavn V",1787:"Kbenhavn V",1790:"Kbenhavn V",1799:"Kbenhavn V",1800:"Frederiksberg C",1801:"Frederiksberg C",1802:"Frederiksberg C",1803:"Frederiksberg C",1804:"Frederiksberg C",1805:"Frederiksberg C",1806:"Frederiksberg C",1807:"Frederiksberg C",1808:"Frederiksberg C",1809:"Frederiksberg C",1810:"Frederiksberg C",1811:"Frederiksberg C",1812:"Frederiksberg C",1813:"Frederiksberg C",1814:"Frederiksberg C",1815:"Frederiksberg C",1816:"Frederiksberg C",1817:"Frederiksberg C",1818:"Frederiksberg C",1819:"Frederiksberg C",1820:"Frederiksberg C",1822:"Frederiksberg C",1823:"Frederiksberg C",1824:"Frederiksberg C",1825:"Frederiksberg C",1826:"Frederiksberg C",1827:"Frederiksberg C",1828:"Frederiksberg C",1829:"Frederiksberg C",1850:"Frederiksberg C",1851:"Frederiksberg C",1852:"Frederiksberg C",1853:"Frederiksberg C",1854:"Frederiksberg C",1855:"Frederiksberg C",1856:"Frederiksberg C",1857:"Frederiksberg C",1860:"Frederiksberg C",1861:"Frederiksberg C",1862:"Frederiksberg C",1863:"Frederiksberg C",1864:"Frederiksberg C",1865:"Frederiksberg C",1866:"Frederiksberg C",1867:"Frederiksberg C",1868:"Frederiksberg C",1870:"Frederiksberg C",1871:"Frederiksberg C",1872:"Frederiksberg C",1873:"Frederiksberg C",1874:"Frederiksberg C",1875:"Frederiksberg C",1876:"Frederiksberg C",1877:"Frederiksberg C",1878:"Frederiksberg C",1879:"Frederiksberg C",1900:"Frederiksberg C",1901:"Frederiksberg C",1902:"Frederiksberg C",1903:"Frederiksberg C",1904:"Frederiksberg C",1905:"Frederiksberg C",1906:"Frederiksberg C",1908:"Frederiksberg C",1909:"Frederiksberg C",1910:"Frederiksberg C",1911:"Frederiksberg C",1912:"Frederiksberg C",1913:"Frederiksberg C",1914:"Frederiksberg C",1915:"Frederiksberg C",1916:"Frederiksberg C",1917:"Frederiksberg C",1920:"Frederiksberg C",1921:"Frederiksberg C",1922:"Frederiksberg C",1923:"Frederiksberg C",1924:"Frederiksberg C",1925:"Frederiksberg C",1926:"Frederiksberg C",1927:"Frederiksberg C",1928:"Frederiksberg C",1931:"Frederiksberg C",1950:"Frederiksberg C",1951:"Frederiksberg C",1952:"Frederiksberg C",1953:"Frederiksberg C",1954:"Frederiksberg C",1955:"Frederiksberg C",1956:"Frederiksberg C",1957:"Frederiksberg C",1958:"Frederiksberg C",1959:"Frederiksberg C",1960:"Frederiksberg C",1961:"Frederiksberg C",1962:"Frederiksberg C",1963:"Frederiksberg C",1964:"Frederiksberg C",1965:"Frederiksberg C",1966:"Frederiksberg C",1967:"Frederiksberg C",1970:"Frederiksberg C",1971:"Frederiksberg C",1972:"Frederiksberg C",1973:"Frederiksberg C",1974:"Frederiksberg C",2e3:"Frederiksberg",2100:"Kbenhavn ",2150:"Nordhavn",2200:"Kbenhavn N",2300:"Kbenhavn S",2400:"Kbenhavn NV",2450:"Kbenhavn SV",2500:"Valby",2600:"Glostrup",2605:"Brndby",2610:"Rdovre",2620:"Albertslund",2625:"Vallensbk",2630:"Taastrup",2635:"Ishj",2640:"Hedehusene",2650:"Hvidovre",2660:"Brndby Strand",2665:"Vallensbk Strand",2670:"Greve",2680:"Solrd Strand",2690:"Karlslunde",2700:"Brnshj",2720:"Vanlse",2730:"Herlev",2740:"Skovlunde",2750:"Ballerup",2760:"Mlv",2765:"Smrum",2770:"Kastrup",2791:"Dragr",2800:"Kongens Lyngby",2820:"Gentofte",2830:"Virum",2840:"Holte",2850:"Nrum",2860:"Sborg",2870:"Dyssegrd",2880:"Bagsvrd",2900:"Hellerup",2920:"Charlottenlund",2930:"Klampenborg",2942:"Skodsborg",2950:"Vedbk",2960:"Rungsted Kyst",2970:"Hrsholm",2980:"Kokkedal",2990:"Niv",3e3:"Helsingr",3050:"Humlebk",3060:"Espergrde",3070:"Snekkersten",3080:"Tikb",3100:"Hornbk",3120:"Dronningmlle",3140:"lsgrde",3150:"Hellebk",3200:"Helsinge",3210:"Vejby",3220:"Tisvildeleje",3230:"Grsted",3250:"Gilleleje",3300:"Frederiksvrk",3310:"lsted",3320:"Skvinge",3330:"Grlse",3360:"Liseleje",3370:"Melby",3390:"Hundested",3400:"Hillerd",3450:"Allerd",3460:"Birkerd",3480:"Fredensborg",3490:"Kvistgrd",3500:"Vrlse",3520:"Farum",3540:"Lynge",3550:"Slangerup",3600:"Frederikssund",3630:"Jgerspris",3650:"lstykke",3660:"Stenlse",3670:"Veks Sjlland",3700:"Rnne",3720:"Aakirkeby",3730:"Nex",3740:"Svaneke",3751:"stermarie",3760:"Gudhjem",3770:"Allinge",3782:"Klemensker",3790:"Hasle",4e3:"Roskilde",4030:"Tune",4040:"Jyllinge",4050:"Skibby",4060:"Kirke Sby",4070:"Kirke Hyllinge",4100:"Ringsted",4130:"Viby Sjlland",4140:"Borup",4160:"Herlufmagle",4171:"Glums",4173:"Fjenneslev",4174:"Jystrup Midtsj",4180:"Sor",4190:"Munke Bjergby",4200:"Slagelse",4220:"Korsr",4230:"Sklskr",4241:"Vemmelev",4242:"Boeslunde",4243:"Rude",4250:"Fuglebjerg",4261:"Dalmose",4262:"Sandved",4270:"Hng",4281:"Grlev",4291:"Ruds Vedby",4293:"Dianalund",4295:"Stenlille",4296:"Nyrup",4300:"Holbk",4320:"Lejre",4330:"Hvals",4340:"Tllse",4350:"Ugerlse",4360:"Kirke Eskilstrup",4370:"Store Merlse",4390:"Vipperd",4400:"Kalundborg",4420:"Regstrup",4440:"Mrkv",4450:"Jyderup",4460:"Snertinge",4470:"Sveblle",4480:"Store Fuglede",4490:"Jerslev Sjlland",4500:"Nykbing Sj",4520:"Svinninge",4532:"Gislinge",4534:"Hrve",4540:"Frevejle",4550:"Asns",4560:"Vig",4571:"Grevinge",4572:"Nrre Asmindrup",4573:"Hjby",4581:"Rrvig",4583:"Sjllands Odde",4591:"Fllenslev",4592:"Sejer",4593:"Eskebjerg",4600:"Kge",4621:"Gadstrup",4622:"Havdrup",4623:"Lille Skensved",4632:"Bjverskov",4640:"Faxe",4652:"Hrlev",4653:"Karise",4654:"Faxe Ladeplads",4660:"Store Heddinge",4671:"Strby",4672:"Klippinge",4673:"Rdvig Stevns",4681:"Herflge",4682:"Tureby",4683:"Rnnede",4684:"Holmegaard",4690:"Haslev",4700:"Nstved",4720:"Prst",4733:"Tappernje",4735:"Mern",4736:"Karrebksminde",4750:"Lundby",4760:"Vordingborg",4771:"Kalvehave",4772:"Langebk",4773:"Stensved",4780:"Stege",4791:"Borre",4792:"Askeby",4793:"Bog By",4800:"Nykbing F",4840:"Nrre Alslev",4850:"Stubbekbing",4862:"Guldborg",4863:"Eskilstrup",4871:"Horbelev",4872:"Idestrup",4873:"Vggerlse",4874:"Gedser",4880:"Nysted",4891:"Toreby L",4892:"Kettinge",4894:"ster Ulslev",4895:"Errindlev",4900:"Nakskov",4912:"Harpelunde",4913:"Horslunde",4920:"Sllested",4930:"Maribo",4941:"Bandholm",4943:"Torrig L",4944:"Fej",4951:"Nrreballe",4952:"Stokkemarke",4953:"Vesterborg",4960:"Holeby",4970:"Rdby",4983:"Dannemare",4990:"Sakskbing",5e3:"Odense C",5100:"Odense C",5200:"Odense V",5210:"Odense NV",5220:"Odense S",5230:"Odense M",5240:"Odense N",5250:"Odense SV",5260:"Odense S",5270:"Odense N",5290:"Marslev",5300:"Kerteminde",5320:"Agedrup",5330:"Munkebo",5350:"Rynkeby",5370:"Mesinge",5380:"Dalby",5390:"Martofte",5400:"Bogense",5450:"Otterup",5462:"Morud",5463:"Harndrup",5464:"Brenderup Fyn",5466:"Asperup",5471:"Snders",5474:"Veflinge",5485:"Skamby",5491:"Blommenslyst",5492:"Vissenbjerg",5500:"Middelfart",5540:"Ullerslev",5550:"Langeskov",5560:"Aarup",5580:"Nrre Aaby",5591:"Gelsted",5592:"Ejby",5600:"Faaborg",5610:"Assens",5620:"Glamsbjerg",5631:"Ebberup",5642:"Millinge",5672:"Broby",5683:"Haarby",5690:"Tommerup",5700:"Svendborg",5750:"Ringe",5762:"Vester Skerninge",5771:"Stenstrup",5772:"Kvrndrup",5792:"rslev",5800:"Nyborg",5853:"rbk",5854:"Gislev",5856:"Ryslinge",5863:"Ferritslev Fyn",5871:"Frrup",5874:"Hesselager",5881:"Skrup Fyn",5882:"Vejstrup",5883:"Oure",5884:"Gudme",5892:"Gudbjerg Sydfyn",5900:"Rudkbing",5932:"Humble",5935:"Bagenkop",5943:"Stryn",5953:"Tranekr",5960:"Marstal",5970:"rskbing",5985:"Sby r",6e3:"Kolding",6040:"Egtved",6051:"Almind",6052:"Viuf",6064:"Jordrup",6070:"Christiansfeld",6091:"Bjert",6092:"Snder Stenderup",6093:"Sjlund",6094:"Hejls",6100:"Haderslev",6200:"Aabenraa",6230:"Rdekro",6240:"Lgumkloster",6261:"Bredebro",6270:"Tnder",6280:"Hjer",6300:"Grsten",6310:"Broager",6320:"Egernsund",6330:"Padborg",6340:"Krus",6360:"Tinglev",6372:"Bylderup-Bov",6392:"Bolderslev",6400:"Snderborg",6430:"Nordborg",6440:"Augustenborg",6470:"Sydals",6500:"Vojens",6510:"Gram",6520:"Toftlund",6534:"Agerskov",6535:"Branderup J",6541:"Bevtoft",6560:"Sommersted",6580:"Vamdrup",6600:"Vejen",6621:"Gesten",6622:"Bkke",6623:"Vorbasse",6630:"Rdding",6640:"Lunderskov",6650:"Brrup",6660:"Lintrup",6670:"Holsted",6682:"Hovborg",6683:"Fvling",6690:"Grding",6700:"Esbjerg",6701:"Esbjerg",6705:"Esbjerg ",6710:"Esbjerg V",6715:"Esbjerg N",6720:"Fan",6731:"Tjreborg",6740:"Bramming",6752:"Glejbjerg",6753:"Agerbk",6760:"Ribe",6771:"Gredstedbro",6780:"Skrbk",6792:"Rm",6800:"Varde",6818:"rre",6823:"Ansager",6830:"Nrre Nebel",6840:"Oksbl",6851:"Janderup Vestj",6852:"Billum",6853:"Vejers Strand",6854:"Henne",6855:"Outrup",6857:"Blvand",6862:"Tistrup",6870:"lgod",6880:"Tarm",6893:"Hemmet",6900:"Skjern",6920:"Videbk",6933:"Kibk",6940:"Lem St",6950:"Ringkbing",6960:"Hvide Sande",6971:"Spjald",6973:"rnhj",6980:"Tim",6990:"Ulfborg",7e3:"Fredericia",7007:"Fredericia",7029:"Fredericia",7080:"Brkop",7100:"Vejle",7120:"Vejle st",7130:"Juelsminde",7140:"Stouby",7150:"Barrit",7160:"Trring",7171:"Uldum",7173:"Vonge",7182:"Bredsten",7183:"Randbl",7184:"Vandel",7190:"Billund",7200:"Grindsted",7250:"Hejnsvig",7260:"Snder Omme",7270:"Stakroge",7280:"Snder Felding",7300:"Jelling",7321:"Gadbjerg",7323:"Give",7330:"Brande",7361:"Ejstrupholm",7362:"Hampen",7400:"Herning",7430:"Ikast",7441:"Bording",7442:"Engesvang",7451:"Sunds",7470:"Karup J",7480:"Vildbjerg",7490:"Aulum",7500:"Holstebro",7540:"Haderup",7550:"Srvad",7560:"Hjerm",7570:"Vemb",7600:"Struer",7620:"Lemvig",7650:"Bvlingbjerg",7660:"Bkmarksbro",7673:"Harbore",7680:"Thyborn",7700:"Thisted",7730:"Hanstholm",7741:"Frstrup",7742:"Vesls",7752:"Snedsted",7755:"Bedsted Thy",7760:"Hurup Thy",7770:"Vestervig",7790:"Thyholm",7800:"Skive",7830:"Vinderup",7840:"Hjslev",7850:"Stoholm Jyll",7860:"Spttrup",7870:"Roslev",7884:"Fur",7900:"Nykbing M",7950:"Erslev",7960:"Karby",7970:"Redsted M",7980:"Vils",7990:"ster Assels",8e3:"Aarhus C",8100:"Aarhus C",8200:"Aarhus N",8210:"Aarhus V",8220:"Brabrand",8230:"byhj",8240:"Risskov",8245:"Risskov ",8250:"Eg",8260:"Viby J",8270:"Hjbjerg",8300:"Odder",8305:"Sams",8310:"Tranbjerg J",8320:"Mrslet",8330:"Beder",8340:"Malling",8350:"Hundslund",8355:"Solbjerg",8361:"Hasselager",8362:"Hrning",8370:"Hadsten",8380:"Trige",8381:"Tilst",8382:"Hinnerup",8400:"Ebeltoft",8410:"Rnde",8420:"Knebel",8444:"Balle",8450:"Hammel",8462:"Harlev J",8464:"Galten",8471:"Sabro",8472:"Sporup",8500:"Grenaa",8520:"Lystrup",8530:"Hjortshj",8541:"Skdstrup",8543:"Hornslet",8544:"Mrke",8550:"Ryomgrd",8560:"Kolind",8570:"Trustrup",8581:"Nimtofte",8585:"Glesborg",8586:"rum Djurs",8592:"Anholt",8600:"Silkeborg",8620:"Kjellerup",8632:"Lemming",8641:"Sorring",8643:"Ans By",8653:"Them",8654:"Bryrup",8660:"Skanderborg",8670:"Lsby",8680:"Ry",8700:"Horsens",8721:"Daugrd",8722:"Hedensted",8723:"Lsning",8732:"Hovedgrd",8740:"Brdstrup",8751:"Gedved",8752:"stbirk",8762:"Flemming",8763:"Rask Mlle",8765:"Klovborg",8766:"Nrre Snede",8781:"Stenderup",8783:"Hornsyld",8800:"Viborg",8830:"Tjele",8831:"Lgstrup",8832:"Skals",8840:"Rdkrsbro",8850:"Bjerringbro",8860:"Ulstrup",8870:"Lang",8881:"Thors",8882:"Frvang",8883:"Gjern",8900:"Randers C",8920:"Randers NV",8930:"Randers N",8940:"Randers SV",8950:"rsted",8960:"Randers S",8961:"Allingbro",8963:"Auning",8970:"Havndal",8981:"Spentrup",8983:"Gjerlev J",8990:"Frup",9e3:"Aalborg",9100:"Aalborg",9200:"Aalborg SV",9210:"Aalborg S",9220:"Aalborg st",9230:"Svenstrup J",9240:"Nibe",9260:"Gistrup",9270:"Klarup",9280:"Storvorde",9293:"Kongerslev",9300:"Sby",9310:"Vodskov",9320:"Hjallerup",9330:"Dronninglund",9340:"Asaa",9352:"Dybvad",9362:"Gandrup",9370:"Hals",9380:"Vestbjerg",9381:"Sulsted",9382:"Tylstrup",9400:"Nrresundby",9430:"Vadum",9440:"Aabybro",9460:"Brovst",9480:"Lkken",9490:"Pandrup",9492:"Blokhus",9493:"Saltum",9500:"Hobro",9510:"Arden",9520:"Skrping",9530:"Stvring",9541:"Suldrup",9550:"Mariager",9560:"Hadsund",9574:"Blum",9575:"Terndrup",9600:"Aars",9610:"Nrager",9620:"Aalestrup",9631:"Gedsted",9632:"Mldrup",9640:"Fars",9670:"Lgstr",9681:"Ranum",9690:"Fjerritslev",9700:"Brnderslev",9740:"Jerslev J",9750:"stervr",9760:"Vr",9800:"Hjrring",9830:"Trs",9850:"Hirtshals",9870:"Sindal",9881:"Bindslev",9900:"Frederikshavn",9940:"Ls",9970:"Strandby",9981:"Jerup",9982:"lbk",9990:"Skagen"};function XD(t){if(!t)return null;const e=t.replace(/\s/g,"");return e.length!==4||!/^\d{4}$/.test(e)?null:JD[e]||null}function PN(t,e,n){if(!t&&!e&&!n)return"";const r=[];if(t&&r.push(t),e||n){const i=[];e&&i.push(e),n&&i.push(n),r.push(i.join(" "))}return r.join(", ")}function CN({isOpen:t,onClose:e,onSave:n,project:r}){const[i,s]=oe.useState({name:"",description:"",customerName:"",customerPhone:"",customerEmail:"",customerAddress:"",streetAddress:"",postalCode:"",city:"",type:"fixed-price",fixedPrice:0,status:"planned"}),[a,o]=oe.useState({});oe.useEffect(()=>{if(r)if(r.streetAddress||r.postalCode||r.city)s({name:r.name||"",description:r.description||"",customerName:r.customerName||"",customerPhone:r.customerPhone||"",customerEmail:r.customerEmail||"",customerAddress:r.customerAddress||"",streetAddress:r.streetAddress||"",postalCode:r.postalCode||"",city:r.city||"",type:r.type||"fixed-price",fixedPrice:r.fixedPrice||0,status:r.status||"planned"});else if(r.customerAddress){const g=r.customerAddress.split(",").map(k=>k.trim());let m="",b="",x="";if(g.length>=2){m=g[0];const _=g[1].match(/^(\d{4})\s+(.+)$/);_&&(b=_[1],x=_[2])}else g.length===1&&(m=g[0]);s({name:r.name||"",description:r.description||"",customerName:r.customerName||"",customerPhone:r.customerPhone||"",customerEmail:r.customerEmail||"",customerAddress:r.customerAddress||"",streetAddress:m,postalCode:b,city:x,type:r.type||"fixed-price",fixedPrice:r.fixedPrice||0,status:r.status||"planned"})}else s({name:r.name||"",description:r.description||"",customerName:r.customerName||"",customerPhone:r.customerPhone||"",customerEmail:r.customerEmail||"",customerAddress:"",streetAddress:"",postalCode:"",city:"",type:r.type||"fixed-price",fixedPrice:r.fixedPrice||0,status:r.status||"planned"});else s({name:"",description:"",customerName:"",customerPhone:"",customerEmail:"",customerAddress:"",streetAddress:"",postalCode:"",city:"",type:"fixed-price",fixedPrice:0,status:"planned"});o({})},[r,t]);const l=g=>{const{name:m,value:b}=g.target;s(x=>({...x,[m]:b})),a[m]&&o(x=>({...x,[m]:null}))},u=g=>{const m=g.target.value.replace(/\D/g,"").slice(0,4);if(s(b=>({...b,postalCode:m})),m.length===4){const b=XD(m);b?(s(x=>({...x,city:b})),a.postalCode&&o(x=>({...x,postalCode:null}))):o(x=>({...x,postalCode:"Ugyldigt postnummer"}))}else a.postalCode&&o(b=>({...b,postalCode:null}))},h=()=>{const g={};return(!i.name||i.name.trim().length<3)&&(g.name="Sagsnavn skal vre mindst 3 tegn"),i.customerEmail&&!QD(i.customerEmail)&&(g.customerEmail="Ugyldig email adresse"),i.customerPhone&&!YD(i.customerPhone)&&(g.customerPhone="Telefonnummer skal vre 8 cifre"),i.postalCode&&i.postalCode.length!==4&&(g.postalCode="Postnummer skal vre 4 cifre"),i.type==="fixed-price"&&(!i.fixedPrice||i.fixedPrice<=0)&&(g.fixedPrice="Fast pris skal vre strre end 0"),o(g),Object.keys(g).length===0},p=g=>{if(g.preventDefault(),h()){const m=PN(i.streetAddress,i.postalCode,i.city);n({...i,customerAddress:m,streetAddress:i.streetAddress,postalCode:i.postalCode,city:i.city})}};return t?f.jsx("div",{className:"modal-overlay",onClick:e,children:f.jsxs("div",{className:"modal-content",onClick:g=>g.stopPropagation(),children:[f.jsxs("div",{className:"modal-header",children:[f.jsx("h2",{children:r?"Ret Sag":"Ny Sag"}),f.jsx("button",{className:"modal-close",onClick:e,children:""})]}),f.jsxs("form",{onSubmit:p,children:[f.jsxs("div",{className:"modal-body",children:[f.jsxs("div",{className:"form-group",children:[f.jsx("label",{htmlFor:"name",children:"Sagsnavn *"}),f.jsx("input",{type:"text",id:"name",name:"name",value:i.name,onChange:l,className:a.name?"error":"",placeholder:"F.eks. Kkkenrenovering"}),a.name&&f.jsx("span",{className:"error-message",children:a.name})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{htmlFor:"description",children:"Beskrivelse"}),f.jsx("textarea",{id:"description",name:"description",value:i.description,onChange:l,placeholder:"Kort beskrivelse af sagen...",rows:"3"})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{htmlFor:"customerName",children:"Kundenavn"}),f.jsx("input",{type:"text",id:"customerName",name:"customerName",value:i.customerName,onChange:l,placeholder:"F.eks. Peter Jensen"})]}),f.jsxs("div",{className:"form-row",children:[f.jsxs("div",{className:"form-group",children:[f.jsx("label",{htmlFor:"customerPhone",children:"Telefon"}),f.jsx("input",{type:"text",id:"customerPhone",name:"customerPhone",value:i.customerPhone,onChange:l,className:a.customerPhone?"error":"",placeholder:"12345678"}),a.customerPhone&&f.jsx("span",{className:"error-message",children:a.customerPhone})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{htmlFor:"customerEmail",children:"Email"}),f.jsx("input",{type:"email",id:"customerEmail",name:"customerEmail",value:i.customerEmail,onChange:l,className:a.customerEmail?"error":"",placeholder:"kunde@example.com"}),a.customerEmail&&f.jsx("span",{className:"error-message",children:a.customerEmail})]})]}),f.jsx("div",{className:"form-section-divider",children:f.jsx("h3",{children:"Adresse"})}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{htmlFor:"streetAddress",children:"Vejnavn og nummer"}),f.jsx("input",{type:"text",id:"streetAddress",name:"streetAddress",value:i.streetAddress,onChange:l,placeholder:"F.eks. Kongevejen 10"})]}),f.jsxs("div",{className:"form-row",children:[f.jsxs("div",{className:"form-group",children:[f.jsx("label",{htmlFor:"postalCode",children:"Postnummer"}),f.jsx("input",{type:"text",id:"postalCode",name:"postalCode",value:i.postalCode,onChange:u,className:a.postalCode?"error":"",placeholder:"2830",maxLength:"4"}),a.postalCode&&f.jsx("span",{className:"error-message",children:a.postalCode}),f.jsx("small",{className:"form-hint",children:"Byen udfyldes automatisk"})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{htmlFor:"city",children:"By"}),f.jsx("input",{type:"text",id:"city",name:"city",value:i.city,onChange:l,placeholder:"Holte",readOnly:!0,className:"autofilled-field"}),f.jsx("small",{className:"form-hint",children:"Udfyldes automatisk fra postnummer"})]})]}),f.jsx("div",{className:"form-section-divider",children:f.jsx("h3",{children:"Sagens detaljer"})}),f.jsxs("div",{className:"form-row",children:[f.jsxs("div",{className:"form-group",children:[f.jsx("label",{htmlFor:"type",children:"Type *"}),f.jsxs("select",{id:"type",name:"type",value:i.type,onChange:l,children:[f.jsx("option",{value:"fixed-price",children:"Fast Pris"}),f.jsx("option",{value:"time-material",children:"Tid & Materiale"})]})]}),i.type==="fixed-price"&&f.jsxs("div",{className:"form-group",children:[f.jsx("label",{htmlFor:"fixedPrice",children:"Fast pris (kr) *"}),f.jsx("input",{type:"number",id:"fixedPrice",name:"fixedPrice",value:i.fixedPrice,onChange:l,className:a.fixedPrice?"error":"",placeholder:"25000",min:"0"}),a.fixedPrice&&f.jsx("span",{className:"error-message",children:a.fixedPrice})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{htmlFor:"status",children:"Status *"}),f.jsxs("select",{id:"status",name:"status",value:i.status,onChange:l,children:[f.jsx("option",{value:"planned",children:"Planlagt"}),f.jsx("option",{value:"in-progress",children:"I Gang"}),f.jsx("option",{value:"ready-for-invoice",children:"Klar til Faktura"}),f.jsx("option",{value:"closed",children:"Lukket"})]})]})]})]}),f.jsxs("div",{className:"modal-footer",children:[f.jsx("button",{type:"button",className:"btn-secondary",onClick:e,children:"Annuller"}),f.jsx("button",{type:"submit",className:"btn-primary",children:r?"Gem ndringer":"Opret Sag"})]})]})]})}):null}const ei=t=>new Intl.NumberFormat("da-DK",{style:"currency",currency:"DKK",minimumFractionDigits:0,maximumFractionDigits:2}).format(t),ZD=t=>{if(!t)return"";const n=t.replace(/\D/g,"").match(/^(\d{2})(\d{2})(\d{2})(\d{2})$/);return n?`${n[1]} ${n[2]} ${n[3]} ${n[4]}`:t},eF=t=>t?`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(t)}`:"#",mp=t=>{if(!t)return"";typeof t=="string"&&(t=new Date(t));const e=String(t.getDate()).padStart(2,"0"),n=String(t.getMonth()+1).padStart(2,"0"),r=t.getFullYear();return`${e}/${n}/${r}`},$w=t=>!t&&t!==0?"0":Number(t).toFixed(1).replace(".",",");function tF(){const t=Vc(),{showSuccess:e,showError:n,showCriticalConfirm:r}=ps(),[i,s]=oe.useState([]),[a,o]=oe.useState([]),[l,u]=oe.useState(!1),[h,p]=oe.useState(!1),[g,m]=oe.useState(null),[b,x]=oe.useState(""),[k,_]=oe.useState("all"),[A,C]=oe.useState("all"),[F,Y]=oe.useState({}),[B,L]=oe.useState(!1);oe.useEffect(()=>{y()},[]),oe.useEffect(()=>{R()},[i,b,k,A]);const y=async()=>{u(!0);try{const z=await ms(Xn(Tt,"projects")),H=[];z.forEach(ne=>{H.push({id:ne.id,...ne.data()})}),H.sort((ne,_e)=>_e.projectNumber&&ne.projectNumber?_e.projectNumber.localeCompare(ne.projectNumber):0),s(H),S(H)}catch(z){console.error("Error loading projects:",z),n("Hovsa! Kunne ikke indlse sager. Prv igen.")}finally{u(!1)}},S=async z=>{const H={};for(const ne of z){const _e=await TN(ne.id);H[ne.id]=IN(_e)}Y(H)},R=()=>{let z=[...i];if(b){const H=b.toLowerCase();z=z.filter(ne=>ne.name&&ne.name.toLowerCase().includes(H)||ne.customerName&&ne.customerName.toLowerCase().includes(H)||ne.projectNumber&&ne.projectNumber.toLowerCase().includes(H))}k!=="all"&&(z=z.filter(H=>H.status===k)),A!=="all"&&(z=z.filter(H=>H.type===A)),o(z)},E=()=>{m(null),p(!0)},I=(z,H)=>{z.stopPropagation(),m(H),p(!0)},P=async z=>{try{if(g)await Yo(In(Tt,"projects",g.id),z),e("Perfekt! Sagen er opdateret");else{const H=await $D();await sl(Xn(Tt,"projects"),{...z,projectNumber:H,createdAt:new Date().toISOString()}),e("Perfekt! Din nye sag er klar")}p(!1),y()}catch(H){console.error("Error saving project:",H),n("Hovsa! Noget gik galt. Prv igen")}},M=async(z,H)=>{z.stopPropagation();const ne=F[H.id]||0;if(await r({title:"Slet sag permanent?",message:"Dette kan ikke fortrydes. Alle data p sagen vil blive slettet.",itemName:`${H.projectNumber} - ${H.name}`,warningText:ne>0?`Der er registreret ${ne} timer p denne sag`:null,confirmText:"Slet Permanent",cancelText:"Annuller"}))try{await il(In(Tt,"projects",H.id)),e("Sag slettet!"),y()}catch(O){console.error("Error deleting project:",O),n("Hovsa! Kunne ikke slette sagen. Prv igen.")}},te=z=>{t(`/sager/${z.id}`)},V=z=>z==="fixed-price"?"Fast Pris":"Tid & Materiale",U=z=>{const H={planned:{color:"#3498db",label:"Planlagt",icon:""},"in-progress":{color:"#27ae60",label:"I Gang",icon:""},"ready-for-invoice":{color:"#f39c12",label:"Klar til Faktura",icon:""},closed:{color:"#9b59b6",label:"Lukket",icon:""}};return H[z]||H.planned};return f.jsxs("div",{children:[f.jsx("div",{className:"page-header-friendly",children:f.jsxs("div",{className:"welcome-section",children:[f.jsx("h1",{children:"Hej! Her er dine sager "}),f.jsx("p",{className:"welcome-subtitle",children:"Klik p en sag for at se detaljer og timeregistreringer"})]})}),f.jsxs("div",{className:"content-card",children:[f.jsxs("div",{className:"sager-controls-new",children:[f.jsxs("div",{className:"search-section",children:[f.jsxs("div",{className:"search-box-large",children:[f.jsx("span",{className:"search-icon",children:""}),f.jsx("input",{type:"text",placeholder:"Skriv kundenavn eller sagsnavn...",value:b,onChange:z=>x(z.target.value),className:"search-input-large"})]}),f.jsxs("button",{className:"btn-filter-toggle",onClick:()=>L(!B),children:["Filtre ",B?"":""]}),f.jsxs("button",{className:"btn-create-friendly",onClick:E,children:[f.jsx("span",{className:"btn-icon-large",children:"+"})," Opret ny sag"]})]}),B&&f.jsxs("div",{className:"filter-panel",children:[f.jsxs("div",{className:"filter-group",children:[f.jsx("label",{children:"Status:"}),f.jsxs("select",{value:k,onChange:z=>_(z.target.value),className:"filter-select-friendly",children:[f.jsx("option",{value:"all",children:"Alle statusser"}),f.jsx("option",{value:"planned",children:" Planlagt"}),f.jsx("option",{value:"in-progress",children:" I Gang"}),f.jsx("option",{value:"ready-for-invoice",children:" Klar til Faktura"}),f.jsx("option",{value:"closed",children:" Lukket"})]})]}),f.jsxs("div",{className:"filter-group",children:[f.jsx("label",{children:"Type:"}),f.jsxs("select",{value:A,onChange:z=>C(z.target.value),className:"filter-select-friendly",children:[f.jsx("option",{value:"all",children:"Alle typer"}),f.jsx("option",{value:"fixed-price",children:"Fast Pris"}),f.jsx("option",{value:"time-material",children:"Tid & Materiale"})]})]})]})]}),l?f.jsxs("div",{className:"loading-friendly",children:[f.jsx("div",{className:"spinner"}),f.jsx("p",{children:"Henter dine sager..."})]}):a.length===0?f.jsxs("div",{className:"empty-state-friendly",children:[f.jsx("div",{className:"empty-icon",children:""}),f.jsx("h3",{children:i.length===0?"Ingen sager endnu":"Ingen sager matcher din sgning"}),f.jsx("p",{children:i.length===0?'Klik p "Opret ny sag" for at komme i gang!':"Prv at justere dine filtre eller sgning"}),i.length===0&&f.jsxs("button",{className:"btn-create-friendly",onClick:E,style:{marginTop:"20px"},children:[f.jsx("span",{className:"btn-icon-large",children:"+"})," Opret din frste sag"]})]}):f.jsx("div",{className:"projects-grid",children:a.map(z=>{const H=U(z.status),ne=F[z.id]||0;return f.jsxs("div",{className:"project-card",style:{borderLeftColor:H.color},onClick:()=>te(z),children:[f.jsxs("div",{className:"project-card-header",children:[f.jsx("div",{className:"project-status-icon",style:{color:H.color},children:H.icon}),f.jsxs("div",{className:"project-card-actions",children:[f.jsx("button",{className:"card-action-btn edit",onClick:_e=>I(_e,z),title:"Ret sag",children:""}),f.jsx("button",{className:"card-action-btn delete",onClick:_e=>M(_e,z),title:"Slet sag",children:""})]})]}),f.jsxs("div",{className:"project-card-body",children:[f.jsx("h3",{className:"project-card-title",children:z.name}),(z.streetAddress||z.postalCode||z.city||z.customerAddress)&&f.jsxs("p",{className:"project-card-address",children:[" ",z.streetAddress&&z.postalCode&&z.city?PN(z.streetAddress,z.postalCode,z.city):z.customerAddress||"Adresse ikke angivet"]}),f.jsxs("p",{className:"project-card-customer",children:[f.jsx("span",{className:"label-subtle",children:"Kunde:"})," ",z.customerName||"Ikke angivet"]}),f.jsxs("div",{className:"project-card-meta",children:[f.jsxs("div",{className:"meta-item",children:[f.jsx("span",{className:"meta-label",children:"Sagsnr:"}),f.jsx("span",{className:"meta-value",children:z.projectNumber})]}),f.jsxs("div",{className:"meta-item",children:[f.jsx("span",{className:"meta-label",children:"Type:"}),f.jsx("span",{className:"meta-value",children:V(z.type)})]})]}),f.jsxs("div",{className:"project-card-footer",children:[f.jsxs("div",{className:"project-hours",children:[f.jsx("span",{className:"hours-icon",children:""}),f.jsxs("span",{className:"hours-value",children:[ne," timer"]})]}),f.jsx("div",{className:"project-status-badge",style:{backgroundColor:H.color+"20",color:H.color,borderColor:H.color},children:H.label})]})]}),f.jsx("div",{className:"project-card-hover-indicator",children:"Se mere "})]},z.id)})})]}),f.jsx(CN,{isOpen:h,onClose:()=>p(!1),onSave:P,project:g})]})}function nF({timeEntry:t,defaultRate:e,employees:n,onSave:r,onClose:i}){const[s,a]=oe.useState({date:"",duration:"",activity:"",billable:!0,rate:e,useCustomRate:!1,employeeName:"",selectedEmployees:[]}),[o,l]=oe.useState({});oe.useEffect(()=>{if(t)a({date:t.date||"",duration:String(t.duration||t.hours||""),activity:t.activity||t.description||"",billable:t.billable!==void 0?t.billable:!0,rate:t.rate||t.hourlyRate||e,useCustomRate:t.rate!==e,employeeName:t.employeeName||"",selectedEmployees:t.employeeName?[t.employeeName]:[]});else{const x=new Date().toISOString().split("T")[0];a(k=>({...k,date:x,duration:"",activity:"",billable:!0,rate:e,useCustomRate:!1,employeeName:n.length>0?n[0].name:"",selectedEmployees:[]}))}},[t,e,n,!0]);const h=x=>{if(!x)return 0;const k=String(x).replace(",",".");return parseFloat(k)||0},p=x=>{const{name:k,value:_,type:A,checked:C}=x.target;a(A==="checkbox"?k==="billable"?F=>({...F,billable:C,rate:C?F.useCustomRate?F.rate:e:0}):k==="useCustomRate"?F=>({...F,useCustomRate:C,rate:C&&F.rate||e}):F=>({...F,[k]:C}):F=>({...F,[k]:_})),o[k]&&l(F=>({...F,[k]:null}))},g=x=>{a(k=>{const A=k.selectedEmployees.includes(x)?k.selectedEmployees.filter(C=>C!==x):[...k.selectedEmployees,x];return{...k,selectedEmployees:A,employeeName:A.length>0?A.join(", "):""}})},m=()=>{const x={};if(!s.date)x.date="Dato er pkrvet";else{const _=new Date(s.date),A=new Date;A.setHours(0,0,0,0),_>A&&(x.date="Dato kan ikke vre i fremtiden")}const k=h(s.duration);if((!s.duration||k<=0)&&(x.duration="Varighed skal vre et positivt tal"),(!s.activity||s.activity.trim().length<3)&&(x.activity="Aktivitetsbeskrivelse skal vre mindst 3 tegn"),s.billable){const _=h(s.rate);(!s.rate||_<=0)&&(x.rate="Timepris skal vre et positivt tal")}return s.selectedEmployees.length===0&&(x.employeeName="Vlg mindst n medarbejder"),l(x),Object.keys(x).length===0},b=x=>{if(x.preventDefault(),m()){const k={date:s.date,duration:h(s.duration),activity:s.activity,billable:s.billable,rate:s.billable?h(s.rate):0,employeeName:s.employeeName};r(k)}};return f.jsx("div",{className:"modal-overlay",onClick:i,children:f.jsxs("div",{className:"modal-content time-entry-modal",onClick:x=>x.stopPropagation(),children:[f.jsxs("div",{className:"modal-header",children:[f.jsx("h2",{children:t?"Redigr Timer":"Tilfj Timer"}),f.jsx("button",{className:"modal-close",onClick:i,children:""})]}),f.jsxs("form",{onSubmit:b,className:"modal-form",children:[f.jsxs("div",{className:"form-group",children:[f.jsx("label",{htmlFor:"date",children:"Dato *"}),f.jsx("input",{type:"date",id:"date",name:"date",value:s.date,onChange:p,className:o.date?"input-error":"",max:new Date().toISOString().split("T")[0]}),o.date&&f.jsx("span",{className:"error-text",children:o.date})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{htmlFor:"duration",children:"Varighed (timer) *"}),f.jsx("input",{type:"text",id:"duration",name:"duration",value:s.duration,onChange:p,className:o.duration?"input-error":"",placeholder:"F.eks. 4,5"}),o.duration&&f.jsx("span",{className:"error-text",children:o.duration}),f.jsx("small",{className:"form-hint",children:"Brug komma for decimaler (f.eks. 4,5 timer)"})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:"Medarbejder(e) *"}),f.jsx("div",{className:"employee-multi-select",children:n.length===0?f.jsx("p",{className:"no-employees-text",children:"Ingen medarbejdere tilgngelige. Tilfj medarbejdere i Indstillinger."}):n.map(x=>f.jsxs("label",{className:"checkbox-modern",children:[f.jsx("input",{type:"checkbox",checked:s.selectedEmployees.includes(x.name),onChange:()=>g(x.name)}),f.jsx("span",{className:"checkbox-label",children:x.name})]},x.id))}),o.employeeName&&f.jsx("span",{className:"error-text",children:o.employeeName})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{htmlFor:"activity",children:"Aktivitetsbeskrivelse *"}),f.jsx("textarea",{id:"activity",name:"activity",value:s.activity,onChange:p,className:o.activity?"input-error":"",rows:"3",placeholder:"Beskriv det udfrte arbejde..."}),o.activity&&f.jsx("span",{className:"error-text",children:o.activity})]}),f.jsx("div",{className:"checkbox-group-modern",children:f.jsxs("label",{className:"checkbox-modern",children:[f.jsx("input",{type:"checkbox",name:"billable",checked:s.billable,onChange:p}),f.jsx("span",{className:"checkbox-label",children:"Fakturerbar"})]})}),f.jsxs("div",{className:"rate-section",children:[f.jsx("label",{children:"Timepris (DKK) *"}),s.billable?f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:`rate-display ${s.useCustomRate?"inactive":"active"}`,children:[f.jsxs("span",{className:"rate-value",children:[e," kr"]}),f.jsx("span",{className:"rate-note",children:"Standard timepris"})]}),f.jsx("div",{className:"checkbox-group-modern",children:f.jsxs("label",{className:"checkbox-modern",children:[f.jsx("input",{type:"checkbox",name:"useCustomRate",checked:s.useCustomRate,onChange:p}),f.jsx("span",{className:"checkbox-label",children:"Brug tilpasset timepris"})]})}),s.useCustomRate&&f.jsxs("div",{className:"form-group",children:[f.jsx("input",{type:"text",name:"rate",value:s.rate,onChange:p,className:o.rate?"input-error":"",placeholder:"F.eks. 550"}),o.rate&&f.jsx("span",{className:"error-text",children:o.rate}),f.jsx("small",{className:"form-hint",children:"Brug komma for decimaler (f.eks. 550,50)"})]})]}):f.jsxs("div",{className:"rate-display disabled",children:[f.jsx("span",{className:"rate-value",children:"0 kr"}),f.jsx("span",{className:"rate-note",children:"Ikke fakturerbar"})]})]}),f.jsxs("div",{className:"modal-footer",children:[f.jsx("button",{type:"button",className:"btn-secondary",onClick:i,children:"Annuller"}),f.jsx("button",{type:"submit",className:"btn-primary",children:t?"Gem ndringer":"Tilfj timer"})]})]})]})})}function rF({purchase:t,project:e,suppliers:n,materials:r,onSave:i,onClose:s}){const[a,o]=oe.useState({date:"",materialName:"",materialId:null,sku:"",quantity:"",unit:"stk",category:"",supplierId:"",supplierName:"",purchasePrice:"",sellingPrice:"",paymentMethod:"Firmakort",notes:""}),[l,u]=oe.useState({}),[h,p]=oe.useState(!0),[g]=oe.useState(50),m=["stk","m","m","m","kg","liter","pose","rulle","palle"],b=["Tr","Gips","El-materialer","VVS","Maling","Vrktj","Diverse"],x=["Firmakort","Faktura","Kontant","MobilePay"];oe.useEffect(()=>{if(t)o({date:t.date||"",materialName:t.materialName||"",materialId:t.materialId||null,sku:t.sku||"",quantity:String(t.quantity||""),unit:t.unit||"stk",category:t.category||"",supplierId:t.supplierId||"",supplierName:t.supplierName||"",purchasePrice:String(t.purchasePrice||""),sellingPrice:String(t.sellingPrice||""),paymentMethod:t.paymentMethod||"Firmakort",notes:t.notes||""}),p(!1);else{const L=new Date().toISOString().split("T")[0];o(y=>({...y,date:L}))}},[t]);const k=L=>{if(!L)return 0;const y=String(L).replace(",",".");return parseFloat(y)||0},_=L=>String(L).replace(".",","),A=L=>{const{name:y,value:S}=L.target;o(R=>{const E={...R,[y]:S};if(y==="materialId"&&S){const I=r.find(P=>P.id===S);if(I&&(E.materialName=I.name,E.unit=I.unit,E.category=I.category,E.sku=I.sku||"",I.defaultSupplierId)){E.supplierId=I.defaultSupplierId;const P=n.find(M=>M.id===I.defaultSupplierId);P&&(E.supplierName=P.name)}}if(y==="supplierId"&&S){const I=n.find(P=>P.id===S);I&&(E.supplierName=I.name)}if(y==="purchasePrice"&&h){const I=k(S);if(I>0){const P=g/100,M=I*(1+P);E.sellingPrice=_(M.toFixed(2))}}return E}),l[y]&&u(R=>({...R,[y]:null}))},C=L=>{p(!1),A(L)},F=()=>{const L={};a.date||(L.date="Dato er pkrvet"),(!a.materialName||a.materialName.trim().length<2)&&(L.materialName="Materiale navn er pkrvet");const y=k(a.quantity);(!a.quantity||y<=0)&&(L.quantity="Antal skal vre strre end 0"),a.unit||(L.unit="Enhed er pkrvet"),a.category||(L.category="Kategori er pkrvet"),(!a.supplierName||a.supplierName.trim().length<2)&&(L.supplierName="Leverandr er pkrvet");const S=k(a.purchasePrice);(!a.purchasePrice||S<0)&&(L.purchasePrice="Indkbspris er pkrvet");const R=k(a.sellingPrice);return(!a.sellingPrice||R<0)&&(L.sellingPrice="Salgspris er pkrvet"),R<S&&(L.sellingPrice="Salgspris br vre hjere end indkbspris"),u(L),Object.keys(L).length===0},Y=L=>{if(L.preventDefault(),F()){const y={caseId:e.id,caseNumber:e.projectNumber,caseName:e.name,date:a.date,materialId:a.materialId||null,materialName:a.materialName.trim(),sku:a.sku.trim(),quantity:k(a.quantity),unit:a.unit,category:a.category,supplierId:a.supplierId||null,supplierName:a.supplierName.trim(),purchasePrice:k(a.purchasePrice),sellingPrice:k(a.sellingPrice),paymentMethod:a.paymentMethod,notes:a.notes.trim()};i(y)}},B=()=>{const L=k(a.purchasePrice),y=k(a.sellingPrice);return L>0?((y-L)/L*100).toFixed(1):"0"};return f.jsx("div",{className:"modal-overlay",onClick:s,children:f.jsxs("div",{className:"modal-content material-purchase-modal",onClick:L=>L.stopPropagation(),children:[f.jsxs("div",{className:"modal-header",children:[f.jsx("h2",{children:t?"Redigr Materiale":"Tilfj Materiale"}),f.jsx("button",{className:"modal-close",onClick:s,children:""})]}),f.jsxs("form",{onSubmit:Y,className:"modal-form",children:[f.jsxs("div",{className:"form-group",children:[f.jsx("label",{htmlFor:"date",children:"Dato *"}),f.jsx("input",{type:"date",id:"date",name:"date",value:a.date,onChange:A,className:l.date?"input-error":"",max:new Date().toISOString().split("T")[0]}),l.date&&f.jsx("span",{className:"error-text",children:l.date})]}),r.length>0&&f.jsxs("div",{className:"form-group",children:[f.jsx("label",{htmlFor:"materialId",children:"Vlg fra katalog (valgfrit)"}),f.jsxs("select",{id:"materialId",name:"materialId",value:a.materialId||"",onChange:A,children:[f.jsx("option",{value:"",children:"-- Skriv nyt materiale --"}),r.map(L=>f.jsxs("option",{value:L.id,children:[L.name," (",L.unit,")"]},L.id))]})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{htmlFor:"materialName",children:"Materiale *"}),f.jsx("input",{type:"text",id:"materialName",name:"materialName",value:a.materialName,onChange:A,className:l.materialName?"input-error":"",placeholder:"F.eks. Gipsplader 13mm"}),l.materialName&&f.jsx("span",{className:"error-text",children:l.materialName})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{htmlFor:"sku",children:"Artikelnummer / Varenummer"}),f.jsx("input",{type:"text",id:"sku",name:"sku",value:a.sku,onChange:A,placeholder:"F.eks. 123456"}),f.jsx("small",{className:"form-hint",children:"Leverandrens varenummer - hjlper med faktura-afstemning"})]}),f.jsxs("div",{className:"form-row",children:[f.jsxs("div",{className:"form-group",children:[f.jsx("label",{htmlFor:"quantity",children:"Antal *"}),f.jsx("input",{type:"text",id:"quantity",name:"quantity",value:a.quantity,onChange:A,className:l.quantity?"input-error":"",placeholder:"F.eks. 15"}),l.quantity&&f.jsx("span",{className:"error-text",children:l.quantity})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{htmlFor:"unit",children:"Enhed *"}),f.jsx("select",{id:"unit",name:"unit",value:a.unit,onChange:A,className:l.unit?"input-error":"",children:m.map(L=>f.jsx("option",{value:L,children:L},L))}),l.unit&&f.jsx("span",{className:"error-text",children:l.unit})]})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{htmlFor:"category",children:"Kategori *"}),f.jsxs("select",{id:"category",name:"category",value:a.category,onChange:A,className:l.category?"input-error":"",children:[f.jsx("option",{value:"",children:"-- Vlg kategori --"}),b.map(L=>f.jsx("option",{value:L,children:L},L))]}),l.category&&f.jsx("span",{className:"error-text",children:l.category})]}),n.length>0?f.jsxs("div",{className:"form-group",children:[f.jsx("label",{htmlFor:"supplierId",children:"Leverandr *"}),f.jsxs("select",{id:"supplierId",name:"supplierId",value:a.supplierId,onChange:A,className:l.supplierName?"input-error":"",children:[f.jsx("option",{value:"",children:"-- Vlg leverandr --"}),n.map(L=>f.jsx("option",{value:L.id,children:L.name},L.id))]}),l.supplierName&&f.jsx("span",{className:"error-text",children:l.supplierName})]}):f.jsxs("div",{className:"form-group",children:[f.jsx("label",{htmlFor:"supplierName",children:"Leverandr *"}),f.jsx("input",{type:"text",id:"supplierName",name:"supplierName",value:a.supplierName,onChange:A,className:l.supplierName?"input-error":"",placeholder:"F.eks. XL-BYG"}),l.supplierName&&f.jsx("span",{className:"error-text",children:l.supplierName})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{htmlFor:"purchasePrice",children:"Indkbspris (DKK) *"}),f.jsx("input",{type:"text",id:"purchasePrice",name:"purchasePrice",value:a.purchasePrice,onChange:A,className:l.purchasePrice?"input-error":"",placeholder:"F.eks. 2850"}),l.purchasePrice&&f.jsx("span",{className:"error-text",children:l.purchasePrice}),f.jsx("small",{className:"form-hint",children:"Total indkbspris for det angivne antal"})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{htmlFor:"sellingPrice",children:"Salgspris (DKK) *"}),f.jsx("input",{type:"text",id:"sellingPrice",name:"sellingPrice",value:a.sellingPrice,onChange:C,className:l.sellingPrice?"input-error":"",placeholder:"F.eks. 4275"}),l.sellingPrice&&f.jsx("span",{className:"error-text",children:l.sellingPrice}),f.jsx("small",{className:"form-hint",children:h?`Auto-beregnet med ${g}% markup`:`Margin: ${B()}%`})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{htmlFor:"paymentMethod",children:"Betalingsmetode"}),f.jsx("select",{id:"paymentMethod",name:"paymentMethod",value:a.paymentMethod,onChange:A,children:x.map(L=>f.jsx("option",{value:L,children:L},L))})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{htmlFor:"notes",children:"Noter"}),f.jsx("textarea",{id:"notes",name:"notes",value:a.notes,onChange:A,rows:"2",placeholder:"Ekstra bemrkninger..."})]}),f.jsxs("div",{className:"modal-footer",children:[f.jsx("button",{type:"button",className:"btn-secondary",onClick:s,children:"Annuller"}),f.jsx("button",{type:"submit",className:"btn-primary",children:t?"Gem ndringer":"Tilfj materiale"})]})]})]})})}const iF=async(t,e="Admin")=>{try{return{success:!0,id:(await sl(Xn(Tt,"suppliers"),{...t,createdAt:new Date().toISOString(),createdBy:e,updatedAt:new Date().toISOString(),updatedBy:e})).id}}catch(n){return console.error("Error creating supplier:",n),{success:!1,error:n.message}}},LN=async()=>{try{const t=await ms(Xn(Tt,"suppliers")),e=[];return t.forEach(n=>{e.push({id:n.id,...n.data()})}),e.sort((n,r)=>(n.name||"").localeCompare(r.name)),{success:!0,suppliers:e}}catch(t){return console.error("Error getting suppliers:",t),{success:!1,error:t.message,suppliers:[]}}},sF=async(t,e,n="Admin")=>{try{return await Yo(In(Tt,"suppliers",t),{...e,updatedAt:new Date().toISOString(),updatedBy:n}),{success:!0}}catch(r){return console.error("Error updating supplier:",r),{success:!1,error:r.message}}},aF=async t=>{try{return await il(In(Tt,"suppliers",t)),{success:!0}}catch(e){return console.error("Error deleting supplier:",e),{success:!1,error:e.message}}},oF=async(t,e="Admin")=>{try{return{success:!0,id:(await sl(Xn(Tt,"materials"),{...t,createdAt:new Date().toISOString(),createdBy:e,updatedAt:new Date().toISOString(),updatedBy:e})).id}}catch(n){return console.error("Error creating material:",n),{success:!1,error:n.message}}},RN=async()=>{try{const t=await ms(Xn(Tt,"materials")),e=[];return t.forEach(n=>{e.push({id:n.id,...n.data()})}),e.sort((n,r)=>(n.name||"").localeCompare(r.name)),{success:!0,materials:e}}catch(t){return console.error("Error getting materials:",t),{success:!1,error:t.message,materials:[]}}},jN=async(t,e,n="Admin")=>{try{return await Yo(In(Tt,"materials",t),{...e,updatedAt:new Date().toISOString(),updatedBy:n}),{success:!0}}catch(r){return console.error("Error updating material:",r),{success:!1,error:r.message}}},lF=async t=>{try{return await il(In(Tt,"materials",t)),{success:!0}}catch(e){return console.error("Error deleting material:",e),{success:!1,error:e.message}}},uF=async(t,e="Admin")=>{try{const n=t.purchasePrice,i=t.sellingPrice-n,s=n>0?i/n*100:0,a=await sl(Xn(Tt,"materialPurchases"),{...t,marginKr:i,marginPercent:s,createdAt:new Date().toISOString(),createdBy:e,updatedAt:new Date().toISOString(),updatedBy:e});if(t.materialId&&t.quantity>0){const o=t.purchasePrice/t.quantity;await jN(t.materialId,{lastPurchasePrice:o,lastPurchaseDate:t.date},e)}return{success:!0,id:a.id}}catch(n){return console.error("Error creating material purchase:",n),{success:!1,error:n.message}}},cF=async t=>{try{const e=Kd(Xn(Tt,"materialPurchases"),tg("caseId","==",t),Q2("date","desc")),n=await ms(e),r=[];return n.forEach(i=>{r.push({id:i.id,...i.data()})}),{success:!0,purchases:r}}catch(e){return console.error("Error getting case material purchases:",e),{success:!1,error:e.message,purchases:[]}}},hF=async()=>{try{const t=Kd(Xn(Tt,"materialPurchases"),Q2("date","desc")),e=await ms(t),n=[];return e.forEach(r=>{n.push({id:r.id,...r.data()})}),{success:!0,purchases:n}}catch(t){return console.error("Error getting all material purchases:",t),{success:!1,error:t.message,purchases:[]}}},dF=async(t,e,n="Admin")=>{try{let r={...e};if(e.purchasePrice!==void 0||e.sellingPrice!==void 0){const s=(await ng(In(Tt,"materialPurchases",t))).data(),a=e.purchasePrice??s.purchasePrice,l=(e.sellingPrice??s.sellingPrice)-a,u=a>0?l/a*100:0;r.marginKr=l,r.marginPercent=u}return await Yo(In(Tt,"materialPurchases",t),{...r,updatedAt:new Date().toISOString(),updatedBy:n}),{success:!0}}catch(r){return console.error("Error updating material purchase:",r),{success:!1,error:r.message}}},DN=async t=>{try{return await il(In(Tt,"materialPurchases",t)),{success:!0}}catch(e){return console.error("Error deleting material purchase:",e),{success:!1,error:e.message}}},FN=t=>!t||t.length===0?0:t.reduce((e,n)=>e+(n.purchasePrice||0),0),ON=t=>!t||t.length===0?0:t.reduce((e,n)=>e+(n.sellingPrice||0),0),fF=t=>{const e=FN(t);return ON(t)-e};function pF(t,e){return e.forEach(function(n){n&&typeof n!="string"&&!Array.isArray(n)&&Object.keys(n).forEach(function(r){if(r!=="default"&&!(r in t)){var i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:function(){return n[r]}})}})}),Object.freeze(t)}function MN(t,e){return new Promise(function(n,r){let i;return mF(t).then(function(s){try{return i=s,n(new Blob([e.slice(0,2),i,e.slice(2)],{type:"image/jpeg"}))}catch(a){return r(a)}},r)})}const mF=t=>new Promise((e,n)=>{const r=new FileReader;r.addEventListener("load",({target:{result:i}})=>{const s=new DataView(i);let a=0;if(s.getUint16(a)!==65496)return n("not a valid JPEG");for(a+=2;;){const o=s.getUint16(a);if(o===65498)break;const l=s.getUint16(a+2);if(o===65505&&s.getUint32(a+4)===1165519206){const u=a+10;let h;switch(s.getUint16(u)){case 18761:h=!0;break;case 19789:h=!1;break;default:return n("TIFF header contains invalid endian")}if(s.getUint16(u+2,h)!==42)return n("TIFF header contains invalid version");const p=s.getUint32(u+4,h),g=u+p+2+12*s.getUint16(u+p,h);for(let m=u+p+2;m<g;m+=12)if(s.getUint16(m,h)==274){if(s.getUint16(m+2,h)!==3)return n("Orientation data type is invalid");if(s.getUint32(m+4,h)!==1)return n("Orientation data count is invalid");s.setUint16(m+8,1,h);break}return e(i.slice(a,a+2+l))}a+=2+l}return e(new Blob)}),r.readAsArrayBuffer(t)});var cm={},gF={get exports(){return cm},set exports(t){cm=t}};(function(t){var e,n,r={};gF.exports=r,r.parse=function(i,s){for(var a=r.bin.readUshort,o=r.bin.readUint,l=0,u={},h=new Uint8Array(i),p=h.length-4;o(h,p)!=101010256;)p--;l=p,l+=4;var g=a(h,l+=4);a(h,l+=2);var m=o(h,l+=2),b=o(h,l+=4);l+=4,l=b;for(var x=0;x<g;x++){o(h,l),l+=4,l+=4,l+=4,o(h,l+=4),m=o(h,l+=4);var k=o(h,l+=4),_=a(h,l+=4),A=a(h,l+2),C=a(h,l+4);l+=6;var F=o(h,l+=8);l+=4,l+=_+A+C,r._readLocal(h,F,u,m,k,s)}return u},r._readLocal=function(i,s,a,o,l,u){var h=r.bin.readUshort,p=r.bin.readUint;p(i,s),h(i,s+=4),h(i,s+=2);var g=h(i,s+=2);p(i,s+=2),p(i,s+=4),s+=4;var m=h(i,s+=8),b=h(i,s+=2);s+=2;var x=r.bin.readUTF8(i,s,m);if(s+=m,s+=b,u)a[x]={size:l,csize:o};else{var k=new Uint8Array(i.buffer,s);if(g==0)a[x]=new Uint8Array(k.buffer.slice(s,s+o));else{if(g!=8)throw"unknown compression method: "+g;var _=new Uint8Array(l);r.inflateRaw(k,_),a[x]=_}}},r.inflateRaw=function(i,s){return r.F.inflate(i,s)},r.inflate=function(i,s){return i[0],i[1],r.inflateRaw(new Uint8Array(i.buffer,i.byteOffset+2,i.length-6),s)},r.deflate=function(i,s){s==null&&(s={level:6});var a=0,o=new Uint8Array(50+Math.floor(1.1*i.length));o[a]=120,o[a+1]=156,a+=2,a=r.F.deflateRaw(i,o,a,s.level);var l=r.adler(i,0,i.length);return o[a+0]=l>>>24&255,o[a+1]=l>>>16&255,o[a+2]=l>>>8&255,o[a+3]=l>>>0&255,new Uint8Array(o.buffer,0,a+4)},r.deflateRaw=function(i,s){s==null&&(s={level:6});var a=new Uint8Array(50+Math.floor(1.1*i.length)),o=r.F.deflateRaw(i,a,o,s.level);return new Uint8Array(a.buffer,0,o)},r.encode=function(i,s){s==null&&(s=!1);var a=0,o=r.bin.writeUint,l=r.bin.writeUshort,u={};for(var h in i){var p=!r._noNeed(h)&&!s,g=i[h],m=r.crc.crc(g,0,g.length);u[h]={cpr:p,usize:g.length,crc:m,file:p?r.deflateRaw(g):g}}for(var h in u)a+=u[h].file.length+30+46+2*r.bin.sizeUTF8(h);a+=22;var b=new Uint8Array(a),x=0,k=[];for(var h in u){var _=u[h];k.push(x),x=r._writeHeader(b,x,h,_,0)}var A=0,C=x;for(var h in u)_=u[h],k.push(x),x=r._writeHeader(b,x,h,_,1,k[A++]);var F=x-C;return o(b,x,101010256),x+=4,l(b,x+=4,A),l(b,x+=2,A),o(b,x+=2,F),o(b,x+=4,C),x+=4,x+=2,b.buffer},r._noNeed=function(i){var s=i.split(".").pop().toLowerCase();return"png,jpg,jpeg,zip".indexOf(s)!=-1},r._writeHeader=function(i,s,a,o,l,u){var h=r.bin.writeUint,p=r.bin.writeUshort,g=o.file;return h(i,s,l==0?67324752:33639248),s+=4,l==1&&(s+=2),p(i,s,20),p(i,s+=2,0),p(i,s+=2,o.cpr?8:0),h(i,s+=2,0),h(i,s+=4,o.crc),h(i,s+=4,g.length),h(i,s+=4,o.usize),p(i,s+=4,r.bin.sizeUTF8(a)),p(i,s+=2,0),s+=2,l==1&&(s+=2,s+=2,h(i,s+=6,u),s+=4),s+=r.bin.writeUTF8(i,s,a),l==0&&(i.set(g,s),s+=g.length),s},r.crc={table:function(){for(var i=new Uint32Array(256),s=0;s<256;s++){for(var a=s,o=0;o<8;o++)1&a?a=3988292384^a>>>1:a>>>=1;i[s]=a}return i}(),update:function(i,s,a,o){for(var l=0;l<o;l++)i=r.crc.table[255&(i^s[a+l])]^i>>>8;return i},crc:function(i,s,a){return 4294967295^r.crc.update(4294967295,i,s,a)}},r.adler=function(i,s,a){for(var o=1,l=0,u=s,h=s+a;u<h;){for(var p=Math.min(u+5552,h);u<p;)l+=o+=i[u++];o%=65521,l%=65521}return l<<16|o},r.bin={readUshort:function(i,s){return i[s]|i[s+1]<<8},writeUshort:function(i,s,a){i[s]=255&a,i[s+1]=a>>8&255},readUint:function(i,s){return 16777216*i[s+3]+(i[s+2]<<16|i[s+1]<<8|i[s])},writeUint:function(i,s,a){i[s]=255&a,i[s+1]=a>>8&255,i[s+2]=a>>16&255,i[s+3]=a>>24&255},readASCII:function(i,s,a){for(var o="",l=0;l<a;l++)o+=String.fromCharCode(i[s+l]);return o},writeASCII:function(i,s,a){for(var o=0;o<a.length;o++)i[s+o]=a.charCodeAt(o)},pad:function(i){return i.length<2?"0"+i:i},readUTF8:function(i,s,a){for(var o,l="",u=0;u<a;u++)l+="%"+r.bin.pad(i[s+u].toString(16));try{o=decodeURIComponent(l)}catch{return r.bin.readASCII(i,s,a)}return o},writeUTF8:function(i,s,a){for(var o=a.length,l=0,u=0;u<o;u++){var h=a.charCodeAt(u);if(!(4294967168&h))i[s+l]=h,l++;else if(!(4294965248&h))i[s+l]=192|h>>6,i[s+l+1]=128|h>>0&63,l+=2;else if(!(4294901760&h))i[s+l]=224|h>>12,i[s+l+1]=128|h>>6&63,i[s+l+2]=128|h>>0&63,l+=3;else{if(4292870144&h)throw"e";i[s+l]=240|h>>18,i[s+l+1]=128|h>>12&63,i[s+l+2]=128|h>>6&63,i[s+l+3]=128|h>>0&63,l+=4}}return l},sizeUTF8:function(i){for(var s=i.length,a=0,o=0;o<s;o++){var l=i.charCodeAt(o);if(!(4294967168&l))a++;else if(!(4294965248&l))a+=2;else if(!(4294901760&l))a+=3;else{if(4292870144&l)throw"e";a+=4}}return a}},r.F={},r.F.deflateRaw=function(i,s,a,o){var l=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][o],u=r.F.U,h=r.F._goodIndex;r.F._hash;var p=r.F._putsE,g=0,m=a<<3,b=0,x=i.length;if(o==0){for(;g<x;)p(s,m,g+(E=Math.min(65535,x-g))==x?1:0),m=r.F._copyExact(i,g,E,s,m+8),g+=E;return m>>>3}var k=u.lits,_=u.strt,A=u.prev,C=0,F=0,Y=0,B=0,L=0,y=0;for(x>2&&(_[y=r.F._hash(i,0)]=0),g=0;g<x;g++){if(L=y,g+1<x-2){y=r.F._hash(i,g+1);var S=g+1&32767;A[S]=_[y],_[y]=S}if(b<=g){(C>14e3||F>26697)&&x-g>100&&(b<g&&(k[C]=g-b,C+=2,b=g),m=r.F._writeBlock(g==x-1||b==x?1:0,k,C,B,i,Y,g-Y,s,m),C=F=B=0,Y=g);var R=0;g<x-2&&(R=r.F._bestMatch(i,g,A,L,Math.min(l[2],x-g),l[3]));var E=R>>>16,I=65535&R;if(R!=0){I=65535&R;var P=h(E=R>>>16,u.of0);u.lhst[257+P]++;var M=h(I,u.df0);u.dhst[M]++,B+=u.exb[P]+u.dxb[M],k[C]=E<<23|g-b,k[C+1]=I<<16|P<<8|M,C+=2,b=g+E}else u.lhst[i[g]]++;F++}}for(Y==g&&i.length!=0||(b<g&&(k[C]=g-b,C+=2,b=g),m=r.F._writeBlock(1,k,C,B,i,Y,g-Y,s,m),C=0,F=0,C=F=B=0,Y=g);7&m;)m++;return m>>>3},r.F._bestMatch=function(i,s,a,o,l,u){var h=32767&s,p=a[h],g=h-p+32768&32767;if(p==h||o!=r.F._hash(i,s-g))return 0;for(var m=0,b=0,x=Math.min(32767,s);g<=x&&--u!=0&&p!=h;){if(m==0||i[s+m]==i[s+m-g]){var k=r.F._howLong(i,s,g);if(k>m){if(b=g,(m=k)>=l)break;g+2<k&&(k=g+2);for(var _=0,A=0;A<k-2;A++){var C=s-g+A+32768&32767,F=C-a[C]+32768&32767;F>_&&(_=F,p=C)}}}g+=(h=p)-(p=a[h])+32768&32767}return m<<16|b},r.F._howLong=function(i,s,a){if(i[s]!=i[s-a]||i[s+1]!=i[s+1-a]||i[s+2]!=i[s+2-a])return 0;var o=s,l=Math.min(i.length,s+258);for(s+=3;s<l&&i[s]==i[s-a];)s++;return s-o},r.F._hash=function(i,s){return(i[s]<<8|i[s+1])+(i[s+2]<<4)&65535},r.saved=0,r.F._writeBlock=function(i,s,a,o,l,u,h,p,g){var m,b,x,k,_,A,C,F,Y,B=r.F.U,L=r.F._putsF,y=r.F._putsE;B.lhst[256]++,b=(m=r.F.getTrees())[0],x=m[1],k=m[2],_=m[3],A=m[4],C=m[5],F=m[6],Y=m[7];var S=32+(g+3&7?8-(g+3&7):0)+(h<<3),R=o+r.F.contSize(B.fltree,B.lhst)+r.F.contSize(B.fdtree,B.dhst),E=o+r.F.contSize(B.ltree,B.lhst)+r.F.contSize(B.dtree,B.dhst);E+=14+3*C+r.F.contSize(B.itree,B.ihst)+(2*B.ihst[16]+3*B.ihst[17]+7*B.ihst[18]);for(var I=0;I<286;I++)B.lhst[I]=0;for(I=0;I<30;I++)B.dhst[I]=0;for(I=0;I<19;I++)B.ihst[I]=0;var P=S<R&&S<E?0:R<E?1:2;if(L(p,g,i),L(p,g+1,P),g+=3,P==0){for(;7&g;)g++;g=r.F._copyExact(l,u,h,p,g)}else{var M,te;if(P==1&&(M=B.fltree,te=B.fdtree),P==2){r.F.makeCodes(B.ltree,b),r.F.revCodes(B.ltree,b),r.F.makeCodes(B.dtree,x),r.F.revCodes(B.dtree,x),r.F.makeCodes(B.itree,k),r.F.revCodes(B.itree,k),M=B.ltree,te=B.dtree,y(p,g,_-257),y(p,g+=5,A-1),y(p,g+=5,C-4),g+=4;for(var V=0;V<C;V++)y(p,g+3*V,B.itree[1+(B.ordr[V]<<1)]);g+=3*C,g=r.F._codeTiny(F,B.itree,p,g),g=r.F._codeTiny(Y,B.itree,p,g)}for(var U=u,z=0;z<a;z+=2){for(var H=s[z],ne=H>>>23,_e=U+(8388607&H);U<_e;)g=r.F._writeLit(l[U++],M,p,g);if(ne!=0){var O=s[z+1],Q=O>>16,J=O>>8&255,W=255&O;y(p,g=r.F._writeLit(257+J,M,p,g),ne-B.of0[J]),g+=B.exb[J],L(p,g=r.F._writeLit(W,te,p,g),Q-B.df0[W]),g+=B.dxb[W],U+=ne}}g=r.F._writeLit(256,M,p,g)}return g},r.F._copyExact=function(i,s,a,o,l){var u=l>>>3;return o[u]=a,o[u+1]=a>>>8,o[u+2]=255-o[u],o[u+3]=255-o[u+1],u+=4,o.set(new Uint8Array(i.buffer,s,a),u),l+(a+4<<3)},r.F.getTrees=function(){for(var i=r.F.U,s=r.F._hufTree(i.lhst,i.ltree,15),a=r.F._hufTree(i.dhst,i.dtree,15),o=[],l=r.F._lenCodes(i.ltree,o),u=[],h=r.F._lenCodes(i.dtree,u),p=0;p<o.length;p+=2)i.ihst[o[p]]++;for(p=0;p<u.length;p+=2)i.ihst[u[p]]++;for(var g=r.F._hufTree(i.ihst,i.itree,7),m=19;m>4&&i.itree[1+(i.ordr[m-1]<<1)]==0;)m--;return[s,a,g,l,h,m,o,u]},r.F.getSecond=function(i){for(var s=[],a=0;a<i.length;a+=2)s.push(i[a+1]);return s},r.F.nonZero=function(i){for(var s="",a=0;a<i.length;a+=2)i[a+1]!=0&&(s+=(a>>1)+",");return s},r.F.contSize=function(i,s){for(var a=0,o=0;o<s.length;o++)a+=s[o]*i[1+(o<<1)];return a},r.F._codeTiny=function(i,s,a,o){for(var l=0;l<i.length;l+=2){var u=i[l],h=i[l+1];o=r.F._writeLit(u,s,a,o);var p=u==16?2:u==17?3:7;u>15&&(r.F._putsE(a,o,h,p),o+=p)}return o},r.F._lenCodes=function(i,s){for(var a=i.length;a!=2&&i[a-1]==0;)a-=2;for(var o=0;o<a;o+=2){var l=i[o+1],u=o+3<a?i[o+3]:-1,h=o+5<a?i[o+5]:-1,p=o==0?-1:i[o-1];if(l==0&&u==l&&h==l){for(var g=o+5;g+2<a&&i[g+2]==l;)g+=2;(m=Math.min(g+1-o>>>1,138))<11?s.push(17,m-3):s.push(18,m-11),o+=2*m-2}else if(l==p&&u==l&&h==l){for(g=o+5;g+2<a&&i[g+2]==l;)g+=2;var m=Math.min(g+1-o>>>1,6);s.push(16,m-3),o+=2*m-2}else s.push(l,0)}return a>>>1},r.F._hufTree=function(i,s,a){var o=[],l=i.length,u=s.length,h=0;for(h=0;h<u;h+=2)s[h]=0,s[h+1]=0;for(h=0;h<l;h++)i[h]!=0&&o.push({lit:h,f:i[h]});var p=o.length,g=o.slice(0);if(p==0)return 0;if(p==1){var m=o[0].lit;return g=m==0?1:0,s[1+(m<<1)]=1,s[1+(g<<1)]=1,1}o.sort(function(F,Y){return F.f-Y.f});var b=o[0],x=o[1],k=0,_=1,A=2;for(o[0]={lit:-1,f:b.f+x.f,l:b,r:x,d:0};_!=p-1;)b=k!=_&&(A==p||o[k].f<o[A].f)?o[k++]:o[A++],x=k!=_&&(A==p||o[k].f<o[A].f)?o[k++]:o[A++],o[_++]={lit:-1,f:b.f+x.f,l:b,r:x};var C=r.F.setDepth(o[_-1],0);for(C>a&&(r.F.restrictDepth(g,a,C),C=a),h=0;h<p;h++)s[1+(g[h].lit<<1)]=g[h].d;return C},r.F.setDepth=function(i,s){return i.lit!=-1?(i.d=s,s):Math.max(r.F.setDepth(i.l,s+1),r.F.setDepth(i.r,s+1))},r.F.restrictDepth=function(i,s,a){var o=0,l=1<<a-s,u=0;for(i.sort(function(p,g){return g.d==p.d?p.f-g.f:g.d-p.d}),o=0;o<i.length&&i[o].d>s;o++){var h=i[o].d;i[o].d=s,u+=l-(1<<a-h)}for(u>>>=a-s;u>0;)(h=i[o].d)<s?(i[o].d++,u-=1<<s-h-1):o++;for(;o>=0;o--)i[o].d==s&&u<0&&(i[o].d--,u++);u!=0&&console.log("debt left")},r.F._goodIndex=function(i,s){var a=0;return s[16|a]<=i&&(a|=16),s[8|a]<=i&&(a|=8),s[4|a]<=i&&(a|=4),s[2|a]<=i&&(a|=2),s[1|a]<=i&&(a|=1),a},r.F._writeLit=function(i,s,a,o){return r.F._putsF(a,o,s[i<<1]),o+s[1+(i<<1)]},r.F.inflate=function(i,s){var a=Uint8Array;if(i[0]==3&&i[1]==0)return s||new a(0);var o=r.F,l=o._bitsF,u=o._bitsE,h=o._decodeTiny,p=o.makeCodes,g=o.codes2map,m=o._get17,b=o.U,x=s==null;x&&(s=new a(i.length>>>2<<3));for(var k,_,A=0,C=0,F=0,Y=0,B=0,L=0,y=0,S=0,R=0;A==0;)if(A=l(i,R,1),C=l(i,R+1,2),R+=3,C!=0){if(x&&(s=r.F._check(s,S+(1<<17))),C==1&&(k=b.flmap,_=b.fdmap,L=511,y=31),C==2){F=u(i,R,5)+257,Y=u(i,R+5,5)+1,B=u(i,R+10,4)+4,R+=14;for(var E=0;E<38;E+=2)b.itree[E]=0,b.itree[E+1]=0;var I=1;for(E=0;E<B;E++){var P=u(i,R+3*E,3);b.itree[1+(b.ordr[E]<<1)]=P,P>I&&(I=P)}R+=3*B,p(b.itree,I),g(b.itree,I,b.imap),k=b.lmap,_=b.dmap,R=h(b.imap,(1<<I)-1,F+Y,i,R,b.ttree);var M=o._copyOut(b.ttree,0,F,b.ltree);L=(1<<M)-1;var te=o._copyOut(b.ttree,F,Y,b.dtree);y=(1<<te)-1,p(b.ltree,M),g(b.ltree,M,k),p(b.dtree,te),g(b.dtree,te,_)}for(;;){var V=k[m(i,R)&L];R+=15&V;var U=V>>>4;if(!(U>>>8))s[S++]=U;else{if(U==256)break;var z=S+U-254;if(U>264){var H=b.ldef[U-257];z=S+(H>>>3)+u(i,R,7&H),R+=7&H}var ne=_[m(i,R)&y];R+=15&ne;var _e=ne>>>4,O=b.ddef[_e],Q=(O>>>4)+l(i,R,15&O);for(R+=15&O,x&&(s=r.F._check(s,S+(1<<17)));S<z;)s[S]=s[S++-Q],s[S]=s[S++-Q],s[S]=s[S++-Q],s[S]=s[S++-Q];S=z}}}else{7&R&&(R+=8-(7&R));var J=4+(R>>>3),W=i[J-4]|i[J-3]<<8;x&&(s=r.F._check(s,S+W)),s.set(new a(i.buffer,i.byteOffset+J,W),S),R=J+W<<3,S+=W}return s.length==S?s:s.slice(0,S)},r.F._check=function(i,s){var a=i.length;if(s<=a)return i;var o=new Uint8Array(Math.max(a<<1,s));return o.set(i,0),o},r.F._decodeTiny=function(i,s,a,o,l,u){for(var h=r.F._bitsE,p=r.F._get17,g=0;g<a;){var m=i[p(o,l)&s];l+=15&m;var b=m>>>4;if(b<=15)u[g]=b,g++;else{var x=0,k=0;b==16?(k=3+h(o,l,2),l+=2,x=u[g-1]):b==17?(k=3+h(o,l,3),l+=3):b==18&&(k=11+h(o,l,7),l+=7);for(var _=g+k;g<_;)u[g]=x,g++}}return l},r.F._copyOut=function(i,s,a,o){for(var l=0,u=0,h=o.length>>>1;u<a;){var p=i[u+s];o[u<<1]=0,o[1+(u<<1)]=p,p>l&&(l=p),u++}for(;u<h;)o[u<<1]=0,o[1+(u<<1)]=0,u++;return l},r.F.makeCodes=function(i,s){for(var a,o,l,u,h=r.F.U,p=i.length,g=h.bl_count,m=0;m<=s;m++)g[m]=0;for(m=1;m<p;m+=2)g[i[m]]++;var b=h.next_code;for(a=0,g[0]=0,o=1;o<=s;o++)a=a+g[o-1]<<1,b[o]=a;for(l=0;l<p;l+=2)(u=i[l+1])!=0&&(i[l]=b[u],b[u]++)},r.F.codes2map=function(i,s,a){for(var o=i.length,l=r.F.U.rev15,u=0;u<o;u+=2)if(i[u+1]!=0)for(var h=u>>1,p=i[u+1],g=h<<4|p,m=s-p,b=i[u]<<m,x=b+(1<<m);b!=x;)a[l[b]>>>15-s]=g,b++},r.F.revCodes=function(i,s){for(var a=r.F.U.rev15,o=15-s,l=0;l<i.length;l+=2){var u=i[l]<<s-i[l+1];i[l]=a[u]>>>o}},r.F._putsE=function(i,s,a){a<<=7&s;var o=s>>>3;i[o]|=a,i[o+1]|=a>>>8},r.F._putsF=function(i,s,a){a<<=7&s;var o=s>>>3;i[o]|=a,i[o+1]|=a>>>8,i[o+2]|=a>>>16},r.F._bitsE=function(i,s,a){return(i[s>>>3]|i[1+(s>>>3)]<<8)>>>(7&s)&(1<<a)-1},r.F._bitsF=function(i,s,a){return(i[s>>>3]|i[1+(s>>>3)]<<8|i[2+(s>>>3)]<<16)>>>(7&s)&(1<<a)-1},r.F._get17=function(i,s){return(i[s>>>3]|i[1+(s>>>3)]<<8|i[2+(s>>>3)]<<16)>>>(7&s)},r.F._get25=function(i,s){return(i[s>>>3]|i[1+(s>>>3)]<<8|i[2+(s>>>3)]<<16|i[3+(s>>>3)]<<24)>>>(7&s)},r.F.U=(e=Uint16Array,n=Uint32Array,{next_code:new e(16),bl_count:new e(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new e(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new n(32),flmap:new e(512),fltree:[],fdmap:new e(32),fdtree:[],lmap:new e(32768),ltree:[],ttree:[],dmap:new e(32768),dtree:[],imap:new e(512),itree:[],rev15:new e(32768),lhst:new n(286),dhst:new n(30),ihst:new n(19),lits:new n(15e3),strt:new e(65536),prev:new e(32768)}),function(){for(var i=r.F.U,s=0;s<32768;s++){var a=s;a=(4278255360&(a=(4042322160&(a=(3435973836&(a=(2863311530&a)>>>1|(1431655765&a)<<1))>>>2|(858993459&a)<<2))>>>4|(252645135&a)<<4))>>>8|(16711935&a)<<8,i.rev15[s]=(a>>>16|a<<16)>>>17}function o(l,u,h){for(;u--!=0;)l.push(0,h)}for(s=0;s<32;s++)i.ldef[s]=i.of0[s]<<3|i.exb[s],i.ddef[s]=i.df0[s]<<4|i.dxb[s];o(i.fltree,144,8),o(i.fltree,112,9),o(i.fltree,24,7),o(i.fltree,8,8),r.F.makeCodes(i.fltree,9),r.F.codes2map(i.fltree,9,i.flmap),r.F.revCodes(i.fltree,9),o(i.fdtree,32,5),r.F.makeCodes(i.fdtree,5),r.F.codes2map(i.fdtree,5,i.fdmap),r.F.revCodes(i.fdtree,5),o(i.itree,19,0),o(i.ltree,286,0),o(i.dtree,30,0),o(i.ttree,320,0)}()})();var vF=pF({__proto__:null,default:cm},[cm]);const rs=function(){var t={nextZero(h,p){for(;h[p]!=0;)p++;return p},readUshort:(h,p)=>h[p]<<8|h[p+1],writeUshort(h,p,g){h[p]=g>>8&255,h[p+1]=255&g},readUint:(h,p)=>16777216*h[p]+(h[p+1]<<16|h[p+2]<<8|h[p+3]),writeUint(h,p,g){h[p]=g>>24&255,h[p+1]=g>>16&255,h[p+2]=g>>8&255,h[p+3]=255&g},readASCII(h,p,g){let m="";for(let b=0;b<g;b++)m+=String.fromCharCode(h[p+b]);return m},writeASCII(h,p,g){for(let m=0;m<g.length;m++)h[p+m]=g.charCodeAt(m)},readBytes(h,p,g){const m=[];for(let b=0;b<g;b++)m.push(h[p+b]);return m},pad:h=>h.length<2?`0${h}`:h,readUTF8(h,p,g){let m,b="";for(let x=0;x<g;x++)b+=`%${t.pad(h[p+x].toString(16))}`;try{m=decodeURIComponent(b)}catch{return t.readASCII(h,p,g)}return m}};function e(h,p,g,m){const b=p*g,x=s(m),k=Math.ceil(p*x/8),_=new Uint8Array(4*b),A=new Uint32Array(_.buffer),{ctype:C}=m,{depth:F}=m,Y=t.readUshort;if(C==6){const H=b<<2;if(F==8)for(var B=0;B<H;B+=4)_[B]=h[B],_[B+1]=h[B+1],_[B+2]=h[B+2],_[B+3]=h[B+3];if(F==16)for(B=0;B<H;B++)_[B]=h[B<<1]}else if(C==2){const H=m.tabs.tRNS;if(H==null){if(F==8)for(B=0;B<b;B++){var L=3*B;A[B]=255<<24|h[L+2]<<16|h[L+1]<<8|h[L]}if(F==16)for(B=0;B<b;B++)L=6*B,A[B]=255<<24|h[L+4]<<16|h[L+2]<<8|h[L]}else{var y=H[0];const ne=H[1],_e=H[2];if(F==8)for(B=0;B<b;B++){var S=B<<2;L=3*B,A[B]=255<<24|h[L+2]<<16|h[L+1]<<8|h[L],h[L]==y&&h[L+1]==ne&&h[L+2]==_e&&(_[S+3]=0)}if(F==16)for(B=0;B<b;B++)S=B<<2,L=6*B,A[B]=255<<24|h[L+4]<<16|h[L+2]<<8|h[L],Y(h,L)==y&&Y(h,L+2)==ne&&Y(h,L+4)==_e&&(_[S+3]=0)}}else if(C==3){const H=m.tabs.PLTE,ne=m.tabs.tRNS,_e=ne?ne.length:0;if(F==1)for(var R=0;R<g;R++){var E=R*k,I=R*p;for(B=0;B<p;B++){S=I+B<<2;var P=3*(M=h[E+(B>>3)]>>7-((7&B)<<0)&1);_[S]=H[P],_[S+1]=H[P+1],_[S+2]=H[P+2],_[S+3]=M<_e?ne[M]:255}}if(F==2)for(R=0;R<g;R++)for(E=R*k,I=R*p,B=0;B<p;B++)S=I+B<<2,P=3*(M=h[E+(B>>2)]>>6-((3&B)<<1)&3),_[S]=H[P],_[S+1]=H[P+1],_[S+2]=H[P+2],_[S+3]=M<_e?ne[M]:255;if(F==4)for(R=0;R<g;R++)for(E=R*k,I=R*p,B=0;B<p;B++)S=I+B<<2,P=3*(M=h[E+(B>>1)]>>4-((1&B)<<2)&15),_[S]=H[P],_[S+1]=H[P+1],_[S+2]=H[P+2],_[S+3]=M<_e?ne[M]:255;if(F==8)for(B=0;B<b;B++){var M;S=B<<2,P=3*(M=h[B]),_[S]=H[P],_[S+1]=H[P+1],_[S+2]=H[P+2],_[S+3]=M<_e?ne[M]:255}}else if(C==4){if(F==8)for(B=0;B<b;B++){S=B<<2;var te=h[V=B<<1];_[S]=te,_[S+1]=te,_[S+2]=te,_[S+3]=h[V+1]}if(F==16)for(B=0;B<b;B++){var V;S=B<<2,te=h[V=B<<2],_[S]=te,_[S+1]=te,_[S+2]=te,_[S+3]=h[V+2]}}else if(C==0)for(y=m.tabs.tRNS?m.tabs.tRNS:-1,R=0;R<g;R++){const H=R*k,ne=R*p;if(F==1)for(var U=0;U<p;U++){var z=(te=255*(h[H+(U>>>3)]>>>7-(7&U)&1))==255*y?0:255;A[ne+U]=z<<24|te<<16|te<<8|te}else if(F==2)for(U=0;U<p;U++)z=(te=85*(h[H+(U>>>2)]>>>6-((3&U)<<1)&3))==85*y?0:255,A[ne+U]=z<<24|te<<16|te<<8|te;else if(F==4)for(U=0;U<p;U++)z=(te=17*(h[H+(U>>>1)]>>>4-((1&U)<<2)&15))==17*y?0:255,A[ne+U]=z<<24|te<<16|te<<8|te;else if(F==8)for(U=0;U<p;U++)z=(te=h[H+U])==y?0:255,A[ne+U]=z<<24|te<<16|te<<8|te;else if(F==16)for(U=0;U<p;U++)te=h[H+(U<<1)],z=Y(h,H+(U<<1))==y?0:255,A[ne+U]=z<<24|te<<16|te<<8|te}return _}function n(h,p,g,m){const b=s(h),x=Math.ceil(g*b/8),k=new Uint8Array((x+1+h.interlace)*m);return p=h.tabs.CgBI?i(p,k):r(p,k),h.interlace==0?p=a(p,h,0,g,m):h.interlace==1&&(p=function(A,C){const F=C.width,Y=C.height,B=s(C),L=B>>3,y=Math.ceil(F*B/8),S=new Uint8Array(Y*y);let R=0;const E=[0,0,4,0,2,0,1],I=[0,4,0,2,0,1,0],P=[8,8,8,4,4,2,2],M=[8,8,4,4,2,2,1];let te=0;for(;te<7;){const U=P[te],z=M[te];let H=0,ne=0,_e=E[te];for(;_e<Y;)_e+=U,ne++;let O=I[te];for(;O<F;)O+=z,H++;const Q=Math.ceil(H*B/8);a(A,C,R,H,ne);let J=0,W=E[te];for(;W<Y;){let se=I[te],le=R+J*Q<<3;for(;se<F;){var V;if(B==1&&(V=(V=A[le>>3])>>7-(7&le)&1,S[W*y+(se>>3)]|=V<<7-((7&se)<<0)),B==2&&(V=(V=A[le>>3])>>6-(7&le)&3,S[W*y+(se>>2)]|=V<<6-((3&se)<<1)),B==4&&(V=(V=A[le>>3])>>4-(7&le)&15,S[W*y+(se>>1)]|=V<<4-((1&se)<<2)),B>=8){const fe=W*y+se*L;for(let pe=0;pe<L;pe++)S[fe+pe]=A[(le>>3)+pe]}le+=B,se+=z}J++,W+=U}H*ne!=0&&(R+=ne*(1+Q)),te+=1}return S}(p,h)),p}function r(h,p){return i(new Uint8Array(h.buffer,2,h.length-6),p)}var i=function(){const h={H:{}};return h.H.N=function(p,g){const m=Uint8Array;let b,x,k=0,_=0,A=0,C=0,F=0,Y=0,B=0,L=0,y=0;if(p[0]==3&&p[1]==0)return g||new m(0);const S=h.H,R=S.b,E=S.e,I=S.R,P=S.n,M=S.A,te=S.Z,V=S.m,U=g==null;for(U&&(g=new m(p.length>>>2<<5));k==0;)if(k=R(p,y,1),_=R(p,y+1,2),y+=3,_!=0){if(U&&(g=h.H.W(g,L+(1<<17))),_==1&&(b=V.J,x=V.h,Y=511,B=31),_==2){A=E(p,y,5)+257,C=E(p,y+5,5)+1,F=E(p,y+10,4)+4,y+=14;let H=1;for(var z=0;z<38;z+=2)V.Q[z]=0,V.Q[z+1]=0;for(z=0;z<F;z++){const O=E(p,y+3*z,3);V.Q[1+(V.X[z]<<1)]=O,O>H&&(H=O)}y+=3*F,P(V.Q,H),M(V.Q,H,V.u),b=V.w,x=V.d,y=I(V.u,(1<<H)-1,A+C,p,y,V.v);const ne=S.V(V.v,0,A,V.C);Y=(1<<ne)-1;const _e=S.V(V.v,A,C,V.D);B=(1<<_e)-1,P(V.C,ne),M(V.C,ne,b),P(V.D,_e),M(V.D,_e,x)}for(;;){const H=b[te(p,y)&Y];y+=15&H;const ne=H>>>4;if(!(ne>>>8))g[L++]=ne;else{if(ne==256)break;{let _e=L+ne-254;if(ne>264){const se=V.q[ne-257];_e=L+(se>>>3)+E(p,y,7&se),y+=7&se}const O=x[te(p,y)&B];y+=15&O;const Q=O>>>4,J=V.c[Q],W=(J>>>4)+R(p,y,15&J);for(y+=15&J;L<_e;)g[L]=g[L++-W],g[L]=g[L++-W],g[L]=g[L++-W],g[L]=g[L++-W];L=_e}}}}else{7&y&&(y+=8-(7&y));const H=4+(y>>>3),ne=p[H-4]|p[H-3]<<8;U&&(g=h.H.W(g,L+ne)),g.set(new m(p.buffer,p.byteOffset+H,ne),L),y=H+ne<<3,L+=ne}return g.length==L?g:g.slice(0,L)},h.H.W=function(p,g){const m=p.length;if(g<=m)return p;const b=new Uint8Array(m<<1);return b.set(p,0),b},h.H.R=function(p,g,m,b,x,k){const _=h.H.e,A=h.H.Z;let C=0;for(;C<m;){const F=p[A(b,x)&g];x+=15&F;const Y=F>>>4;if(Y<=15)k[C]=Y,C++;else{let B=0,L=0;Y==16?(L=3+_(b,x,2),x+=2,B=k[C-1]):Y==17?(L=3+_(b,x,3),x+=3):Y==18&&(L=11+_(b,x,7),x+=7);const y=C+L;for(;C<y;)k[C]=B,C++}}return x},h.H.V=function(p,g,m,b){let x=0,k=0;const _=b.length>>>1;for(;k<m;){const A=p[k+g];b[k<<1]=0,b[1+(k<<1)]=A,A>x&&(x=A),k++}for(;k<_;)b[k<<1]=0,b[1+(k<<1)]=0,k++;return x},h.H.n=function(p,g){const m=h.H.m,b=p.length;let x,k,_,A;const C=m.j;for(var F=0;F<=g;F++)C[F]=0;for(F=1;F<b;F+=2)C[p[F]]++;const Y=m.K;for(x=0,C[0]=0,k=1;k<=g;k++)x=x+C[k-1]<<1,Y[k]=x;for(_=0;_<b;_+=2)A=p[_+1],A!=0&&(p[_]=Y[A],Y[A]++)},h.H.A=function(p,g,m){const b=p.length,x=h.H.m.r;for(let k=0;k<b;k+=2)if(p[k+1]!=0){const _=k>>1,A=p[k+1],C=_<<4|A,F=g-A;let Y=p[k]<<F;const B=Y+(1<<F);for(;Y!=B;)m[x[Y]>>>15-g]=C,Y++}},h.H.l=function(p,g){const m=h.H.m.r,b=15-g;for(let x=0;x<p.length;x+=2){const k=p[x]<<g-p[x+1];p[x]=m[k]>>>b}},h.H.M=function(p,g,m){m<<=7&g;const b=g>>>3;p[b]|=m,p[b+1]|=m>>>8},h.H.I=function(p,g,m){m<<=7&g;const b=g>>>3;p[b]|=m,p[b+1]|=m>>>8,p[b+2]|=m>>>16},h.H.e=function(p,g,m){return(p[g>>>3]|p[1+(g>>>3)]<<8)>>>(7&g)&(1<<m)-1},h.H.b=function(p,g,m){return(p[g>>>3]|p[1+(g>>>3)]<<8|p[2+(g>>>3)]<<16)>>>(7&g)&(1<<m)-1},h.H.Z=function(p,g){return(p[g>>>3]|p[1+(g>>>3)]<<8|p[2+(g>>>3)]<<16)>>>(7&g)},h.H.i=function(p,g){return(p[g>>>3]|p[1+(g>>>3)]<<8|p[2+(g>>>3)]<<16|p[3+(g>>>3)]<<24)>>>(7&g)},h.H.m=function(){const p=Uint16Array,g=Uint32Array;return{K:new p(16),j:new p(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new p(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new g(32),J:new p(512),_:[],h:new p(32),$:[],w:new p(32768),C:[],v:[],d:new p(32768),D:[],u:new p(512),Q:[],r:new p(32768),s:new g(286),Y:new g(30),a:new g(19),t:new g(15e3),k:new p(65536),g:new p(32768)}}(),function(){const p=h.H.m;for(var g=0;g<32768;g++){let b=g;b=(2863311530&b)>>>1|(1431655765&b)<<1,b=(3435973836&b)>>>2|(858993459&b)<<2,b=(4042322160&b)>>>4|(252645135&b)<<4,b=(4278255360&b)>>>8|(16711935&b)<<8,p.r[g]=(b>>>16|b<<16)>>>17}function m(b,x,k){for(;x--!=0;)b.push(0,k)}for(g=0;g<32;g++)p.q[g]=p.S[g]<<3|p.T[g],p.c[g]=p.p[g]<<4|p.z[g];m(p._,144,8),m(p._,112,9),m(p._,24,7),m(p._,8,8),h.H.n(p._,9),h.H.A(p._,9,p.J),h.H.l(p._,9),m(p.$,32,5),h.H.n(p.$,5),h.H.A(p.$,5,p.h),h.H.l(p.$,5),m(p.Q,19,0),m(p.C,286,0),m(p.D,30,0),m(p.v,320,0)}(),h.H.N}();function s(h){return[1,null,3,1,2,null,4][h.ctype]*h.depth}function a(h,p,g,m,b){let x=s(p);const k=Math.ceil(m*x/8);let _,A;x=Math.ceil(x/8);let C=h[g],F=0;if(C>1&&(h[g]=[0,0,1][C-2]),C==3)for(F=x;F<k;F++)h[F+1]=h[F+1]+(h[F+1-x]>>>1)&255;for(let Y=0;Y<b;Y++)if(_=g+Y*k,A=_+Y+1,C=h[A-1],F=0,C==0)for(;F<k;F++)h[_+F]=h[A+F];else if(C==1){for(;F<x;F++)h[_+F]=h[A+F];for(;F<k;F++)h[_+F]=h[A+F]+h[_+F-x]}else if(C==2)for(;F<k;F++)h[_+F]=h[A+F]+h[_+F-k];else if(C==3){for(;F<x;F++)h[_+F]=h[A+F]+(h[_+F-k]>>>1);for(;F<k;F++)h[_+F]=h[A+F]+(h[_+F-k]+h[_+F-x]>>>1)}else{for(;F<x;F++)h[_+F]=h[A+F]+o(0,h[_+F-k],0);for(;F<k;F++)h[_+F]=h[A+F]+o(h[_+F-x],h[_+F-k],h[_+F-x-k])}return h}function o(h,p,g){const m=h+p-g,b=m-h,x=m-p,k=m-g;return b*b<=x*x&&b*b<=k*k?h:x*x<=k*k?p:g}function l(h,p,g){g.width=t.readUint(h,p),p+=4,g.height=t.readUint(h,p),p+=4,g.depth=h[p],p++,g.ctype=h[p],p++,g.compress=h[p],p++,g.filter=h[p],p++,g.interlace=h[p],p++}function u(h,p,g,m,b,x,k,_,A){const C=Math.min(p,b),F=Math.min(g,x);let Y=0,B=0;for(let te=0;te<F;te++)for(let V=0;V<C;V++)if(k>=0&&_>=0?(Y=te*p+V<<2,B=(_+te)*b+k+V<<2):(Y=(-_+te)*p-k+V<<2,B=te*b+V<<2),A==0)m[B]=h[Y],m[B+1]=h[Y+1],m[B+2]=h[Y+2],m[B+3]=h[Y+3];else if(A==1){var L=h[Y+3]*.00392156862745098,y=h[Y]*L,S=h[Y+1]*L,R=h[Y+2]*L,E=m[B+3]*(1/255),I=m[B]*E,P=m[B+1]*E,M=m[B+2]*E;const U=1-L,z=L+E*U,H=z==0?0:1/z;m[B+3]=255*z,m[B+0]=(y+I*U)*H,m[B+1]=(S+P*U)*H,m[B+2]=(R+M*U)*H}else if(A==2)L=h[Y+3],y=h[Y],S=h[Y+1],R=h[Y+2],E=m[B+3],I=m[B],P=m[B+1],M=m[B+2],L==E&&y==I&&S==P&&R==M?(m[B]=0,m[B+1]=0,m[B+2]=0,m[B+3]=0):(m[B]=y,m[B+1]=S,m[B+2]=R,m[B+3]=L);else if(A==3){if(L=h[Y+3],y=h[Y],S=h[Y+1],R=h[Y+2],E=m[B+3],I=m[B],P=m[B+1],M=m[B+2],L==E&&y==I&&S==P&&R==M)continue;if(L<220&&E>20)return!1}return!0}return{decode:function(p){const g=new Uint8Array(p);let m=8;const b=t,x=b.readUshort,k=b.readUint,_={tabs:{},frames:[]},A=new Uint8Array(g.length);let C,F=0,Y=0;const B=[137,80,78,71,13,10,26,10];for(var L=0;L<8;L++)if(g[L]!=B[L])throw"The input is not a PNG file!";for(;m<g.length;){const te=b.readUint(g,m);m+=4;const V=b.readASCII(g,m,4);if(m+=4,V=="IHDR")l(g,m,_);else if(V=="iCCP"){for(var y=m;g[y]!=0;)y++;b.readASCII(g,m,y-m),g[y+1];const U=g.slice(y+2,m+te);let z=null;try{z=r(U)}catch{z=i(U)}_.tabs[V]=z}else if(V=="CgBI")_.tabs[V]=g.slice(m,m+4);else if(V=="IDAT"){for(L=0;L<te;L++)A[F+L]=g[m+L];F+=te}else if(V=="acTL")_.tabs[V]={num_frames:k(g,m),num_plays:k(g,m+4)},C=new Uint8Array(g.length);else if(V=="fcTL"){Y!=0&&((M=_.frames[_.frames.length-1]).data=n(_,C.slice(0,Y),M.rect.width,M.rect.height),Y=0);const U={x:k(g,m+12),y:k(g,m+16),width:k(g,m+4),height:k(g,m+8)};let z=x(g,m+22);z=x(g,m+20)/(z==0?100:z);const H={rect:U,delay:Math.round(1e3*z),dispose:g[m+24],blend:g[m+25]};_.frames.push(H)}else if(V=="fdAT"){for(L=0;L<te-4;L++)C[Y+L]=g[m+L+4];Y+=te-4}else if(V=="pHYs")_.tabs[V]=[b.readUint(g,m),b.readUint(g,m+4),g[m+8]];else if(V=="cHRM")for(_.tabs[V]=[],L=0;L<8;L++)_.tabs[V].push(b.readUint(g,m+4*L));else if(V=="tEXt"||V=="zTXt"){_.tabs[V]==null&&(_.tabs[V]={});var S=b.nextZero(g,m),R=b.readASCII(g,m,S-m),E=m+te-S-1;if(V=="tEXt")P=b.readASCII(g,S+1,E);else{var I=r(g.slice(S+2,S+2+E));P=b.readUTF8(I,0,I.length)}_.tabs[V][R]=P}else if(V=="iTXt"){_.tabs[V]==null&&(_.tabs[V]={}),S=0,y=m,S=b.nextZero(g,y),R=b.readASCII(g,y,S-y);const U=g[y=S+1];var P;g[y+1],y+=2,S=b.nextZero(g,y),b.readASCII(g,y,S-y),y=S+1,S=b.nextZero(g,y),b.readUTF8(g,y,S-y),E=te-((y=S+1)-m),U==0?P=b.readUTF8(g,y,E):(I=r(g.slice(y,y+E)),P=b.readUTF8(I,0,I.length)),_.tabs[V][R]=P}else if(V=="PLTE")_.tabs[V]=b.readBytes(g,m,te);else if(V=="hIST"){const U=_.tabs.PLTE.length/3;for(_.tabs[V]=[],L=0;L<U;L++)_.tabs[V].push(x(g,m+2*L))}else if(V=="tRNS")_.ctype==3?_.tabs[V]=b.readBytes(g,m,te):_.ctype==0?_.tabs[V]=x(g,m):_.ctype==2&&(_.tabs[V]=[x(g,m),x(g,m+2),x(g,m+4)]);else if(V=="gAMA")_.tabs[V]=b.readUint(g,m)/1e5;else if(V=="sRGB")_.tabs[V]=g[m];else if(V=="bKGD")_.ctype==0||_.ctype==4?_.tabs[V]=[x(g,m)]:_.ctype==2||_.ctype==6?_.tabs[V]=[x(g,m),x(g,m+2),x(g,m+4)]:_.ctype==3&&(_.tabs[V]=g[m]);else if(V=="IEND")break;m+=te,b.readUint(g,m),m+=4}var M;return Y!=0&&((M=_.frames[_.frames.length-1]).data=n(_,C.slice(0,Y),M.rect.width,M.rect.height)),_.data=n(_,A,_.width,_.height),delete _.compress,delete _.interlace,delete _.filter,_},toRGBA8:function(p){const g=p.width,m=p.height;if(p.tabs.acTL==null)return[e(p.data,g,m,p).buffer];const b=[];p.frames[0].data==null&&(p.frames[0].data=p.data);const x=g*m*4,k=new Uint8Array(x),_=new Uint8Array(x),A=new Uint8Array(x);for(let F=0;F<p.frames.length;F++){const Y=p.frames[F],B=Y.rect.x,L=Y.rect.y,y=Y.rect.width,S=Y.rect.height,R=e(Y.data,y,S,p);if(F!=0)for(var C=0;C<x;C++)A[C]=k[C];if(Y.blend==0?u(R,y,S,k,g,m,B,L,0):Y.blend==1&&u(R,y,S,k,g,m,B,L,1),b.push(k.buffer.slice(0)),Y.dispose!=0){if(Y.dispose==1)u(_,y,S,k,g,m,B,L,0);else if(Y.dispose==2)for(C=0;C<x;C++)k[C]=A[C]}}return b},_paeth:o,_copyTile:u,_bin:t}}();(function(){const{_copyTile:t}=rs,{_bin:e}=rs,n=rs._paeth;var r={table:function(){const y=new Uint32Array(256);for(let S=0;S<256;S++){let R=S;for(let E=0;E<8;E++)1&R?R=3988292384^R>>>1:R>>>=1;y[S]=R}return y}(),update(y,S,R,E){for(let I=0;I<E;I++)y=r.table[255&(y^S[R+I])]^y>>>8;return y},crc:(y,S,R)=>4294967295^r.update(4294967295,y,S,R)};function i(y,S,R,E){S[R]+=y[0]*E>>4,S[R+1]+=y[1]*E>>4,S[R+2]+=y[2]*E>>4,S[R+3]+=y[3]*E>>4}function s(y){return Math.max(0,Math.min(255,y))}function a(y,S){const R=y[0]-S[0],E=y[1]-S[1],I=y[2]-S[2],P=y[3]-S[3];return R*R+E*E+I*I+P*P}function o(y,S,R,E,I,P,M){M==null&&(M=1);const te=E.length,V=[];for(var U=0;U<te;U++){const W=E[U];V.push([W>>>0&255,W>>>8&255,W>>>16&255,W>>>24&255])}for(U=0;U<te;U++){let W=4294967295;for(var z=0,H=0;H<te;H++){var ne=a(V[U],V[H]);H!=U&&ne<W&&(W=ne,z=H)}}const _e=new Uint32Array(I.buffer),O=new Int16Array(S*R*4),Q=[0,8,2,10,12,4,14,6,3,11,1,9,15,7,13,5];for(U=0;U<Q.length;U++)Q[U]=255*((Q[U]+.5)/16-.5);for(let W=0;W<R;W++)for(let se=0;se<S;se++){var J;U=4*(W*S+se),M!=2?J=[s(y[U]+O[U]),s(y[U+1]+O[U+1]),s(y[U+2]+O[U+2]),s(y[U+3]+O[U+3])]:(ne=Q[4*(3&W)+(3&se)],J=[s(y[U]+ne),s(y[U+1]+ne),s(y[U+2]+ne),s(y[U+3]+ne)]),z=0;let le=16777215;for(H=0;H<te;H++){const ke=a(J,V[H]);ke<le&&(le=ke,z=H)}const fe=V[z],pe=[J[0]-fe[0],J[1]-fe[1],J[2]-fe[2],J[3]-fe[3]];M==1&&(se!=S-1&&i(pe,O,U+4,7),W!=R-1&&(se!=0&&i(pe,O,U+4*S-4,3),i(pe,O,U+4*S,5),se!=S-1&&i(pe,O,U+4*S+4,1))),P[U>>2]=z,_e[U>>2]=E[z]}}function l(y,S,R,E,I){I==null&&(I={});const{crc:P}=r,M=e.writeUint,te=e.writeUshort,V=e.writeASCII;let U=8;const z=y.frames.length>1;let H,ne=!1,_e=33+(z?20:0);if(I.sRGB!=null&&(_e+=13),I.pHYs!=null&&(_e+=21),I.iCCP!=null&&(H=pako.deflate(I.iCCP),_e+=21+H.length+4),y.ctype==3){for(var O=y.plte.length,Q=0;Q<O;Q++)y.plte[Q]>>>24!=255&&(ne=!0);_e+=8+3*O+4+(ne?8+1*O+4:0)}for(var J=0;J<y.frames.length;J++)z&&(_e+=38),_e+=(fe=y.frames[J]).cimg.length+12,J!=0&&(_e+=4);_e+=12;const W=new Uint8Array(_e),se=[137,80,78,71,13,10,26,10];for(Q=0;Q<8;Q++)W[Q]=se[Q];if(M(W,U,13),U+=4,V(W,U,"IHDR"),U+=4,M(W,U,S),U+=4,M(W,U,R),U+=4,W[U]=y.depth,U++,W[U]=y.ctype,U++,W[U]=0,U++,W[U]=0,U++,W[U]=0,U++,M(W,U,P(W,U-17,17)),U+=4,I.sRGB!=null&&(M(W,U,1),U+=4,V(W,U,"sRGB"),U+=4,W[U]=I.sRGB,U++,M(W,U,P(W,U-5,5)),U+=4),I.iCCP!=null){const pe=13+H.length;M(W,U,pe),U+=4,V(W,U,"iCCP"),U+=4,V(W,U,"ICC profile"),U+=11,U+=2,W.set(H,U),U+=H.length,M(W,U,P(W,U-(pe+4),pe+4)),U+=4}if(I.pHYs!=null&&(M(W,U,9),U+=4,V(W,U,"pHYs"),U+=4,M(W,U,I.pHYs[0]),U+=4,M(W,U,I.pHYs[1]),U+=4,W[U]=I.pHYs[2],U++,M(W,U,P(W,U-13,13)),U+=4),z&&(M(W,U,8),U+=4,V(W,U,"acTL"),U+=4,M(W,U,y.frames.length),U+=4,M(W,U,I.loop!=null?I.loop:0),U+=4,M(W,U,P(W,U-12,12)),U+=4),y.ctype==3){for(M(W,U,3*(O=y.plte.length)),U+=4,V(W,U,"PLTE"),U+=4,Q=0;Q<O;Q++){const pe=3*Q,ke=y.plte[Q],Ie=255&ke,je=ke>>>8&255,Ke=ke>>>16&255;W[U+pe+0]=Ie,W[U+pe+1]=je,W[U+pe+2]=Ke}if(U+=3*O,M(W,U,P(W,U-3*O-4,3*O+4)),U+=4,ne){for(M(W,U,O),U+=4,V(W,U,"tRNS"),U+=4,Q=0;Q<O;Q++)W[U+Q]=y.plte[Q]>>>24&255;U+=O,M(W,U,P(W,U-O-4,O+4)),U+=4}}let le=0;for(J=0;J<y.frames.length;J++){var fe=y.frames[J];z&&(M(W,U,26),U+=4,V(W,U,"fcTL"),U+=4,M(W,U,le++),U+=4,M(W,U,fe.rect.width),U+=4,M(W,U,fe.rect.height),U+=4,M(W,U,fe.rect.x),U+=4,M(W,U,fe.rect.y),U+=4,te(W,U,E[J]),U+=2,te(W,U,1e3),U+=2,W[U]=fe.dispose,U++,W[U]=fe.blend,U++,M(W,U,P(W,U-30,30)),U+=4);const pe=fe.cimg;M(W,U,(O=pe.length)+(J==0?0:4)),U+=4;const ke=U;V(W,U,J==0?"IDAT":"fdAT"),U+=4,J!=0&&(M(W,U,le++),U+=4),W.set(pe,U),U+=O,M(W,U,P(W,ke,U-ke)),U+=4}return M(W,U,0),U+=4,V(W,U,"IEND"),U+=4,M(W,U,P(W,U-4,4)),U+=4,W.buffer}function u(y,S,R){for(let E=0;E<y.frames.length;E++){const I=y.frames[E];I.rect.width;const P=I.rect.height,M=new Uint8Array(P*I.bpl+P);I.cimg=m(I.img,P,I.bpp,I.bpl,M,S,R)}}function h(y,S,R,E,I){const P=I[0],M=I[1],te=I[2],V=I[3],U=I[4],z=I[5];let H=6,ne=8,_e=255;for(var O=0;O<y.length;O++){const ae=new Uint8Array(y[O]);for(var Q=ae.length,J=0;J<Q;J+=4)_e&=ae[J+3]}const W=_e!=255,se=function(Ge,Fe,ce,Te,Me,Be){const $e=[];for(var Ye=0;Ye<Ge.length;Ye++){const ut=new Uint8Array(Ge[Ye]),ze=new Uint32Array(ut.buffer);var at;let we=0,He=0,mt=Fe,ft=ce,kt=Te?1:0;if(Ye!=0){const Mn=Be||Te||Ye==1||$e[Ye-2].dispose!=0?1:2;let bt=0,vr=1e9;for(let Bt=0;Bt<Mn;Bt++){var tt=new Uint8Array(Ge[Ye-1-Bt]);const $n=new Uint32Array(Ge[Ye-1-Bt]);let xn=Fe,Dt=ce,lt=-1,Pt=-1;for(let Jt=0;Jt<ce;Jt++)for(let fn=0;fn<Fe;fn++)ze[dt=Jt*Fe+fn]!=$n[dt]&&(fn<xn&&(xn=fn),fn>lt&&(lt=fn),Jt<Dt&&(Dt=Jt),Jt>Pt&&(Pt=Jt));lt==-1&&(xn=Dt=lt=Pt=0),Me&&((1&xn)==1&&xn--,(1&Dt)==1&&Dt--);const jr=(lt-xn+1)*(Pt-Dt+1);jr<vr&&(vr=jr,bt=Bt,we=xn,He=Dt,mt=lt-xn+1,ft=Pt-Dt+1)}tt=new Uint8Array(Ge[Ye-1-bt]),bt==1&&($e[Ye-1].dispose=2),at=new Uint8Array(mt*ft*4),t(tt,Fe,ce,at,mt,ft,-we,-He,0),kt=t(ut,Fe,ce,at,mt,ft,-we,-He,3)?1:0,kt==1?g(ut,Fe,ce,at,{x:we,y:He,width:mt,height:ft}):t(ut,Fe,ce,at,mt,ft,-we,-He,0)}else at=ut.slice(0);$e.push({rect:{x:we,y:He,width:mt,height:ft},img:at,blend:kt,dispose:0})}if(Te)for(Ye=0;Ye<$e.length;Ye++){if((ot=$e[Ye]).blend==1)continue;const ut=ot.rect,ze=$e[Ye-1].rect,we=Math.min(ut.x,ze.x),He=Math.min(ut.y,ze.y),mt={x:we,y:He,width:Math.max(ut.x+ut.width,ze.x+ze.width)-we,height:Math.max(ut.y+ut.height,ze.y+ze.height)-He};$e[Ye-1].dispose=1,Ye-1!=0&&p(Ge,Fe,ce,$e,Ye-1,mt,Me),p(Ge,Fe,ce,$e,Ye,mt,Me)}let ct=0;if(Ge.length!=1)for(var dt=0;dt<$e.length;dt++){var ot;ct+=(ot=$e[dt]).rect.width*ot.rect.height}return $e}(y,S,R,P,M,te),le={},fe=[],pe=[];if(E!=0){const ae=[];for(J=0;J<se.length;J++)ae.push(se[J].img.buffer);const Ge=function(Me){let Be=0;for(var $e=0;$e<Me.length;$e++)Be+=Me[$e].byteLength;const Ye=new Uint8Array(Be);let at=0;for($e=0;$e<Me.length;$e++){const tt=new Uint8Array(Me[$e]),ct=tt.length;for(let dt=0;dt<ct;dt+=4){let ot=tt[dt],ut=tt[dt+1],ze=tt[dt+2];const we=tt[dt+3];we==0&&(ot=ut=ze=0),Ye[at+dt]=ot,Ye[at+dt+1]=ut,Ye[at+dt+2]=ze,Ye[at+dt+3]=we}at+=ct}return Ye.buffer}(ae),Fe=x(Ge,E);for(J=0;J<Fe.plte.length;J++)fe.push(Fe.plte[J].est.rgba);let ce=0;for(J=0;J<se.length;J++){const Te=(Ie=se[J]).img.length;var ke=new Uint8Array(Fe.inds.buffer,ce>>2,Te>>2);pe.push(ke);const Me=new Uint8Array(Fe.abuf,ce,Te);z&&o(Ie.img,Ie.rect.width,Ie.rect.height,fe,Me,ke),Ie.img.set(Me),ce+=Te}}else for(O=0;O<se.length;O++){var Ie=se[O];const ae=new Uint32Array(Ie.img.buffer);var je=Ie.rect.width;for(Q=ae.length,ke=new Uint8Array(Q),pe.push(ke),J=0;J<Q;J++){const Ge=ae[J];if(J!=0&&Ge==ae[J-1])ke[J]=ke[J-1];else if(J>je&&Ge==ae[J-je])ke[J]=ke[J-je];else{let Fe=le[Ge];if(Fe==null&&(le[Ge]=Fe=fe.length,fe.push(Ge),fe.length>=300))break;ke[J]=Fe}}}const Ke=fe.length;for(Ke<=256&&U==0&&(ne=Ke<=2?1:Ke<=4?2:Ke<=16?4:8,ne=Math.max(ne,V)),O=0;O<se.length;O++){(Ie=se[O]).rect.x,Ie.rect.y,je=Ie.rect.width;const ae=Ie.rect.height;let Ge=Ie.img;new Uint32Array(Ge.buffer);let Fe=4*je,ce=4;if(Ke<=256&&U==0){Fe=Math.ceil(ne*je/8);var Ze=new Uint8Array(Fe*ae);const Te=pe[O];for(let Me=0;Me<ae;Me++){J=Me*Fe;const Be=Me*je;if(ne==8)for(var Se=0;Se<je;Se++)Ze[J+Se]=Te[Be+Se];else if(ne==4)for(Se=0;Se<je;Se++)Ze[J+(Se>>1)]|=Te[Be+Se]<<4-4*(1&Se);else if(ne==2)for(Se=0;Se<je;Se++)Ze[J+(Se>>2)]|=Te[Be+Se]<<6-2*(3&Se);else if(ne==1)for(Se=0;Se<je;Se++)Ze[J+(Se>>3)]|=Te[Be+Se]<<7-1*(7&Se)}Ge=Ze,H=3,ce=1}else if(W==0&&se.length==1){Ze=new Uint8Array(je*ae*3);const Te=je*ae;for(J=0;J<Te;J++){const Me=3*J,Be=4*J;Ze[Me]=Ge[Be],Ze[Me+1]=Ge[Be+1],Ze[Me+2]=Ge[Be+2]}Ge=Ze,H=2,ce=3,Fe=3*je}Ie.img=Ge,Ie.bpl=Fe,Ie.bpp=ce}return{ctype:H,depth:ne,plte:fe,frames:se}}function p(y,S,R,E,I,P,M){const te=Uint8Array,V=Uint32Array,U=new te(y[I-1]),z=new V(y[I-1]),H=I+1<y.length?new te(y[I+1]):null,ne=new te(y[I]),_e=new V(ne.buffer);let O=S,Q=R,J=-1,W=-1;for(let le=0;le<P.height;le++)for(let fe=0;fe<P.width;fe++){const pe=P.x+fe,ke=P.y+le,Ie=ke*S+pe,je=_e[Ie];je==0||E[I-1].dispose==0&&z[Ie]==je&&(H==null||H[4*Ie+3]!=0)||(pe<O&&(O=pe),pe>J&&(J=pe),ke<Q&&(Q=ke),ke>W&&(W=ke))}J==-1&&(O=Q=J=W=0),M&&((1&O)==1&&O--,(1&Q)==1&&Q--),P={x:O,y:Q,width:J-O+1,height:W-Q+1};const se=E[I];se.rect=P,se.blend=1,se.img=new Uint8Array(P.width*P.height*4),E[I-1].dispose==0?(t(U,S,R,se.img,P.width,P.height,-P.x,-P.y,0),g(ne,S,R,se.img,P)):t(ne,S,R,se.img,P.width,P.height,-P.x,-P.y,0)}function g(y,S,R,E,I){t(y,S,R,E,I.width,I.height,-I.x,-I.y,2)}function m(y,S,R,E,I,P,M){const te=[];let V,U=[0,1,2,3,4];P!=-1?U=[P]:(S*E>5e5||R==1)&&(U=[0]),M&&(V={level:0});const z=vF;for(var H=0;H<U.length;H++){for(let O=0;O<S;O++)b(I,y,O,E,R,U[H]);te.push(z.deflate(I,V))}let ne,_e=1e9;for(H=0;H<te.length;H++)te[H].length<_e&&(ne=H,_e=te[H].length);return te[ne]}function b(y,S,R,E,I,P){const M=R*E;let te=M+R;if(y[te]=P,te++,P==0)if(E<500)for(var V=0;V<E;V++)y[te+V]=S[M+V];else y.set(new Uint8Array(S.buffer,M,E),te);else if(P==1){for(V=0;V<I;V++)y[te+V]=S[M+V];for(V=I;V<E;V++)y[te+V]=S[M+V]-S[M+V-I]+256&255}else if(R==0){for(V=0;V<I;V++)y[te+V]=S[M+V];if(P==2)for(V=I;V<E;V++)y[te+V]=S[M+V];if(P==3)for(V=I;V<E;V++)y[te+V]=S[M+V]-(S[M+V-I]>>1)+256&255;if(P==4)for(V=I;V<E;V++)y[te+V]=S[M+V]-n(S[M+V-I],0,0)+256&255}else{if(P==2)for(V=0;V<E;V++)y[te+V]=S[M+V]+256-S[M+V-E]&255;if(P==3){for(V=0;V<I;V++)y[te+V]=S[M+V]+256-(S[M+V-E]>>1)&255;for(V=I;V<E;V++)y[te+V]=S[M+V]+256-(S[M+V-E]+S[M+V-I]>>1)&255}if(P==4){for(V=0;V<I;V++)y[te+V]=S[M+V]+256-n(0,S[M+V-E],0)&255;for(V=I;V<E;V++)y[te+V]=S[M+V]+256-n(S[M+V-I],S[M+V-E],S[M+V-I-E])&255}}}function x(y,S){const R=new Uint8Array(y),E=R.slice(0),I=new Uint32Array(E.buffer),P=k(E,S),M=P[0],te=P[1],V=R.length,U=new Uint8Array(V>>2);let z;if(R.length<2e7)for(var H=0;H<V;H+=4)z=_(M,ne=R[H]*(1/255),_e=R[H+1]*(1/255),O=R[H+2]*(1/255),Q=R[H+3]*(1/255)),U[H>>2]=z.ind,I[H>>2]=z.est.rgba;else for(H=0;H<V;H+=4){var ne=R[H]*.00392156862745098,_e=R[H+1]*(1/255),O=R[H+2]*(1/255),Q=R[H+3]*(1/255);for(z=M;z.left;)z=A(z.est,ne,_e,O,Q)<=0?z.left:z.right;U[H>>2]=z.ind,I[H>>2]=z.est.rgba}return{abuf:E.buffer,inds:U,plte:te}}function k(y,S,R){R==null&&(R=1e-4);const E=new Uint32Array(y.buffer),I={i0:0,i1:y.length,bst:null,est:null,tdst:0,left:null,right:null};I.bst=Y(y,I.i0,I.i1),I.est=B(I.bst);const P=[I];for(;P.length<S;){let te=0,V=0;for(var M=0;M<P.length;M++)P[M].est.L>te&&(te=P[M].est.L,V=M);if(te<R)break;const U=P[V],z=C(y,E,U.i0,U.i1,U.est.e,U.est.eMq255);if(U.i0>=z||U.i1<=z){U.est.L=0;continue}const H={i0:U.i0,i1:z,bst:null,est:null,tdst:0,left:null,right:null};H.bst=Y(y,H.i0,H.i1),H.est=B(H.bst);const ne={i0:z,i1:U.i1,bst:null,est:null,tdst:0,left:null,right:null};for(ne.bst={R:[],m:[],N:U.bst.N-H.bst.N},M=0;M<16;M++)ne.bst.R[M]=U.bst.R[M]-H.bst.R[M];for(M=0;M<4;M++)ne.bst.m[M]=U.bst.m[M]-H.bst.m[M];ne.est=B(ne.bst),U.left=H,U.right=ne,P[V]=H,P.push(ne)}for(P.sort((te,V)=>V.bst.N-te.bst.N),M=0;M<P.length;M++)P[M].ind=M;return[I,P]}function _(y,S,R,E,I){if(y.left==null)return y.tdst=function(H,ne,_e,O,Q){const J=ne-H[0],W=_e-H[1],se=O-H[2],le=Q-H[3];return J*J+W*W+se*se+le*le}(y.est.q,S,R,E,I),y;const P=A(y.est,S,R,E,I);let M=y.left,te=y.right;P>0&&(M=y.right,te=y.left);const V=_(M,S,R,E,I);if(V.tdst<=P*P)return V;const U=_(te,S,R,E,I);return U.tdst<V.tdst?U:V}function A(y,S,R,E,I){const{e:P}=y;return P[0]*S+P[1]*R+P[2]*E+P[3]*I-y.eMq}function C(y,S,R,E,I,P){for(E-=4;R<E;){for(;F(y,R,I)<=P;)R+=4;for(;F(y,E,I)>P;)E-=4;if(R>=E)break;const M=S[R>>2];S[R>>2]=S[E>>2],S[E>>2]=M,R+=4,E-=4}for(;F(y,R,I)>P;)R-=4;return R+4}function F(y,S,R){return y[S]*R[0]+y[S+1]*R[1]+y[S+2]*R[2]+y[S+3]*R[3]}function Y(y,S,R){const E=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],I=[0,0,0,0],P=R-S>>2;for(let M=S;M<R;M+=4){const te=y[M]*.00392156862745098,V=y[M+1]*(1/255),U=y[M+2]*(1/255),z=y[M+3]*(1/255);I[0]+=te,I[1]+=V,I[2]+=U,I[3]+=z,E[0]+=te*te,E[1]+=te*V,E[2]+=te*U,E[3]+=te*z,E[5]+=V*V,E[6]+=V*U,E[7]+=V*z,E[10]+=U*U,E[11]+=U*z,E[15]+=z*z}return E[4]=E[1],E[8]=E[2],E[9]=E[6],E[12]=E[3],E[13]=E[7],E[14]=E[11],{R:E,m:I,N:P}}function B(y){const{R:S}=y,{m:R}=y,{N:E}=y,I=R[0],P=R[1],M=R[2],te=R[3],V=E==0?0:1/E,U=[S[0]-I*I*V,S[1]-I*P*V,S[2]-I*M*V,S[3]-I*te*V,S[4]-P*I*V,S[5]-P*P*V,S[6]-P*M*V,S[7]-P*te*V,S[8]-M*I*V,S[9]-M*P*V,S[10]-M*M*V,S[11]-M*te*V,S[12]-te*I*V,S[13]-te*P*V,S[14]-te*M*V,S[15]-te*te*V],z=U,H=L;let ne=[Math.random(),Math.random(),Math.random(),Math.random()],_e=0,O=0;if(E!=0)for(let J=0;J<16&&(ne=H.multVec(z,ne),O=Math.sqrt(H.dot(ne,ne)),ne=H.sml(1/O,ne),!(J!=0&&Math.abs(O-_e)<1e-9));J++)_e=O;const Q=[I*V,P*V,M*V,te*V];return{Cov:U,q:Q,e:ne,L:_e,eMq255:H.dot(H.sml(255,Q),ne),eMq:H.dot(ne,Q),rgba:(Math.round(255*Q[3])<<24|Math.round(255*Q[2])<<16|Math.round(255*Q[1])<<8|Math.round(255*Q[0])<<0)>>>0}}var L={multVec:(y,S)=>[y[0]*S[0]+y[1]*S[1]+y[2]*S[2]+y[3]*S[3],y[4]*S[0]+y[5]*S[1]+y[6]*S[2]+y[7]*S[3],y[8]*S[0]+y[9]*S[1]+y[10]*S[2]+y[11]*S[3],y[12]*S[0]+y[13]*S[1]+y[14]*S[2]+y[15]*S[3]],dot:(y,S)=>y[0]*S[0]+y[1]*S[1]+y[2]*S[2]+y[3]*S[3],sml:(y,S)=>[y*S[0],y*S[1],y*S[2],y*S[3]]};rs.encode=function(S,R,E,I,P,M,te){I==null&&(I=0),te==null&&(te=!1);const V=h(S,R,E,I,[!1,!1,!1,0,te,!1]);return u(V,-1),l(V,R,E,P,M)},rs.encodeLL=function(S,R,E,I,P,M,te,V){const U={ctype:0+(I==1?0:2)+(P==0?0:4),depth:M,frames:[]},z=(I+P)*M,H=z*R;for(let ne=0;ne<S.length;ne++)U.frames.push({rect:{x:0,y:0,width:R,height:E},img:new Uint8Array(S[ne]),blend:0,dispose:1,bpp:Math.ceil(z/8),bpl:Math.ceil(H/8)});return u(U,0,!0),l(U,R,E,te,V)},rs.encode.compress=h,rs.encode.dither=o,rs.quantize=x,rs.quantize.getKDtree=k,rs.quantize.getNearest=_})();const VN={toArrayBuffer(t,e){const n=t.width,r=t.height,i=n<<2,s=t.getContext("2d").getImageData(0,0,n,r),a=new Uint32Array(s.data.buffer),o=(32*n+31)/32<<2,l=o*r,u=122+l,h=new ArrayBuffer(u),p=new DataView(h),g=1<<20;let m,b,x,k,_=g,A=0,C=0,F=0;function Y(y){p.setUint16(C,y,!0),C+=2}function B(y){p.setUint32(C,y,!0),C+=4}function L(y){C+=y}Y(19778),B(u),L(4),B(122),B(108),B(n),B(-r>>>0),Y(1),Y(32),B(3),B(l),B(2835),B(2835),L(8),B(16711680),B(65280),B(255),B(4278190080),B(1466527264),function y(){for(;A<r&&_>0;){for(k=122+A*o,m=0;m<i;)_--,b=a[F++],x=b>>>24,p.setUint32(k+m,b<<8|x),m+=4;A++}F<a.length?(_=g,setTimeout(y,VN._dly)):e(h)}()},toBlob(t,e){this.toArrayBuffer(t,n=>{e(new Blob([n],{type:"image/bmp"}))})},_dly:9};var ri={CHROME:"CHROME",FIREFOX:"FIREFOX",DESKTOP_SAFARI:"DESKTOP_SAFARI",IE:"IE",IOS:"IOS",ETC:"ETC"},yF={[ri.CHROME]:16384,[ri.FIREFOX]:11180,[ri.DESKTOP_SAFARI]:16384,[ri.IE]:8192,[ri.IOS]:4096,[ri.ETC]:8192};const cy=typeof window<"u",UN=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,hm=cy&&window.cordova&&window.cordova.require&&window.cordova.require("cordova/modulemapper"),_F=(cy||UN)&&(hm&&hm.getOriginalSymbol(window,"File")||typeof File<"u"&&File),BN=(cy||UN)&&(hm&&hm.getOriginalSymbol(window,"FileReader")||typeof FileReader<"u"&&FileReader);function hy(t,e,n=Date.now()){return new Promise(r=>{const i=t.split(","),s=i[0].match(/:(.*?);/)[1],a=globalThis.atob(i[1]);let o=a.length;const l=new Uint8Array(o);for(;o--;)l[o]=a.charCodeAt(o);const u=new Blob([l],{type:s});u.name=e,u.lastModified=n,r(u)})}function KN(t){return new Promise((e,n)=>{const r=new BN;r.onload=()=>e(r.result),r.onerror=i=>n(i),r.readAsDataURL(t)})}function qN(t){return new Promise((e,n)=>{const r=new Image;r.onload=()=>e(r),r.onerror=i=>n(i),r.src=t})}function Fl(){if(Fl.cachedResult!==void 0)return Fl.cachedResult;let t=ri.ETC;const{userAgent:e}=navigator;return/Chrom(e|ium)/i.test(e)?t=ri.CHROME:/iP(ad|od|hone)/i.test(e)&&/WebKit/i.test(e)?t=ri.IOS:/Safari/i.test(e)?t=ri.DESKTOP_SAFARI:/Firefox/i.test(e)?t=ri.FIREFOX:(/MSIE/i.test(e)||document.documentMode)&&(t=ri.IE),Fl.cachedResult=t,Fl.cachedResult}function zN(t,e){const n=Fl(),r=yF[n];let i=t,s=e,a=i*s;const o=i>s?s/i:i/s;for(;a>r*r;){const l=(r+i)/2,u=(r+s)/2;l<u?(s=u,i=u*o):(s=l*o,i=l),a=i*s}return{width:i,height:s}}function lg(t,e){let n,r;try{if(n=new OffscreenCanvas(t,e),r=n.getContext("2d"),r===null)throw new Error("getContext of OffscreenCanvas returns null")}catch{n=document.createElement("canvas"),r=n.getContext("2d")}return n.width=t,n.height=e,[n,r]}function HN(t,e){const{width:n,height:r}=zN(t.width,t.height),[i,s]=lg(n,r);return e&&/jpe?g/.test(e)&&(s.fillStyle="white",s.fillRect(0,0,i.width,i.height)),s.drawImage(t,0,0,i.width,i.height),i}function gp(){return gp.cachedResult!==void 0||(gp.cachedResult=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&typeof document<"u"&&"ontouchend"in document),gp.cachedResult}function dm(t,e={}){return new Promise(function(n,r){let i,s;var a=function(){try{return s=HN(i,e.fileType||t.type),n([i,s])}catch(l){return r(l)}},o=function(l){try{var u=function(h){try{throw h}catch(p){return r(p)}};try{let h;return KN(t).then(function(p){try{return h=p,qN(h).then(function(g){try{return i=g,function(){try{return a()}catch(m){return r(m)}}()}catch(m){return u(m)}},u)}catch(g){return u(g)}},u)}catch(h){u(h)}}catch(h){return r(h)}};try{if(gp()||[ri.DESKTOP_SAFARI,ri.MOBILE_SAFARI].includes(Fl()))throw new Error("Skip createImageBitmap on IOS and Safari");return createImageBitmap(t).then(function(l){try{return i=l,a()}catch{return o()}},o)}catch{o()}})}function fm(t,e,n,r,i=1){return new Promise(function(s,a){let o;if(e==="image/png"){let u,h,p;return u=t.getContext("2d"),{data:h}=u.getImageData(0,0,t.width,t.height),p=rs.encode([h.buffer],t.width,t.height,4096*i),o=new Blob([p],{type:e}),o.name=n,o.lastModified=r,l.call(this)}{let u=function(){return l.call(this)};if(e==="image/bmp")return new Promise(h=>VN.toBlob(t,h)).then((function(h){try{return o=h,o.name=n,o.lastModified=r,u.call(this)}catch(p){return a(p)}}).bind(this),a);{let h=function(){return u.call(this)};if(typeof OffscreenCanvas=="function"&&t instanceof OffscreenCanvas)return t.convertToBlob({type:e,quality:i}).then((function(p){try{return o=p,o.name=n,o.lastModified=r,h.call(this)}catch(g){return a(g)}}).bind(this),a);{let p;return p=t.toDataURL(e,i),hy(p,n,r).then((function(g){try{return o=g,h.call(this)}catch(m){return a(m)}}).bind(this),a)}}}function l(){return s(o)}})}function Ds(t){t.width=0,t.height=0}function nc(){return new Promise(function(t,e){let n,r,i,s;return nc.cachedResult!==void 0?t(nc.cachedResult):hy("data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==","test.jpg",Date.now()).then(function(a){try{return n=a,dm(n).then(function(o){try{return r=o[1],fm(r,n.type,n.name,n.lastModified).then(function(l){try{return i=l,Ds(r),dm(i).then(function(u){try{return s=u[0],nc.cachedResult=s.width===1&&s.height===2,t(nc.cachedResult)}catch(h){return e(h)}},e)}catch(u){return e(u)}},e)}catch(l){return e(l)}},e)}catch(o){return e(o)}},e)})}function $N(t){return new Promise((e,n)=>{const r=new BN;r.onload=i=>{const s=new DataView(i.target.result);if(s.getUint16(0,!1)!=65496)return e(-2);const a=s.byteLength;let o=2;for(;o<a;){if(s.getUint16(o+2,!1)<=8)return e(-1);const l=s.getUint16(o,!1);if(o+=2,l==65505){if(s.getUint32(o+=2,!1)!=1165519206)return e(-1);const u=s.getUint16(o+=6,!1)==18761;o+=s.getUint32(o+4,u);const h=s.getUint16(o,u);o+=2;for(let p=0;p<h;p++)if(s.getUint16(o+12*p,u)==274)return e(s.getUint16(o+12*p+8,u))}else{if((65280&l)!=65280)break;o+=s.getUint16(o,!1)}}return e(-1)},r.onerror=i=>n(i),r.readAsArrayBuffer(t)})}function WN(t,e){const{width:n}=t,{height:r}=t,{maxWidthOrHeight:i}=e;let s,a=t;return isFinite(i)&&(n>i||r>i)&&([a,s]=lg(n,r),n>r?(a.width=i,a.height=r/n*i):(a.width=n/r*i,a.height=i),s.drawImage(t,0,0,a.width,a.height),Ds(t)),a}function GN(t,e){const{width:n}=t,{height:r}=t,[i,s]=lg(n,r);switch(e>4&&e<9?(i.width=r,i.height=n):(i.width=n,i.height=r),e){case 2:s.transform(-1,0,0,1,n,0);break;case 3:s.transform(-1,0,0,-1,n,r);break;case 4:s.transform(1,0,0,-1,0,r);break;case 5:s.transform(0,1,1,0,0,0);break;case 6:s.transform(0,1,-1,0,r,0);break;case 7:s.transform(0,-1,-1,0,r,n);break;case 8:s.transform(0,-1,1,0,0,n)}return s.drawImage(t,0,0,n,r),Ds(t),i}function Ww(t,e,n=0){return new Promise(function(r,i){let s,a,o,l,u,h,p,g,m,b,x,k,_,A,C,F,Y,B,L,y;function S(E=5){if(e.signal&&e.signal.aborted)throw e.signal.reason;s+=E,e.onProgress(Math.min(s,100))}function R(E){if(e.signal&&e.signal.aborted)throw e.signal.reason;s=Math.min(Math.max(E,s),100),e.onProgress(s)}return s=n,a=e.maxIteration||10,o=1024*e.maxSizeMB*1024,S(),dm(t,e).then((function(E){try{return[,l]=E,S(),u=WN(l,e),S(),new Promise(function(I,P){var M;if(!(M=e.exifOrientation))return $N(t).then((function(V){try{return M=V,te.call(this)}catch(U){return P(U)}}).bind(this),P);function te(){return I(M)}return te.call(this)}).then((function(I){try{return h=I,S(),nc().then((function(P){try{return p=P?u:GN(u,h),S(),g=e.initialQuality||1,m=e.fileType||t.type,fm(p,m,t.name,t.lastModified,g).then((function(M){try{{let V=function(){if(a--&&(C>o||C>_)){let z,H;return z=y?.95*L.width:L.width,H=y?.95*L.height:L.height,[Y,B]=lg(z,H),B.drawImage(L,0,0,z,H),g*=m==="image/png"?.85:.95,fm(Y,m,t.name,t.lastModified,g).then(function(ne){try{return F=ne,Ds(L),L=Y,C=F.size,R(Math.min(99,Math.floor((A-C)/(A-o)*100))),V}catch(_e){return i(_e)}},i)}return[1]},U=function(){return Ds(L),Ds(Y),Ds(u),Ds(p),Ds(l),R(100),r(F)};if(b=M,S(),x=b.size>o,k=b.size>t.size,!x&&!k)return R(100),r(b);var te;return _=t.size,A=b.size,C=A,L=p,y=!e.alwaysKeepResolution&&x,(te=(function(z){for(;z;){if(z.then)return void z.then(te,i);try{if(z.pop){if(z.length)return z.pop()?U.call(this):z;z=V}else z=z.call(this)}catch(H){return i(H)}}}).bind(this))(V)}}catch(V){return i(V)}}).bind(this),i)}catch(M){return i(M)}}).bind(this),i)}catch(P){return i(P)}}).bind(this),i)}catch(I){return i(I)}}).bind(this),i)})}const wF=`
let scriptImported = false
self.addEventListener('message', async (e) => {
  const { file, id, imageCompressionLibUrl, options } = e.data
  options.onProgress = (progress) => self.postMessage({ progress, id })
  try {
    if (!scriptImported) {
      // console.log('[worker] importScripts', imageCompressionLibUrl)
      self.importScripts(imageCompressionLibUrl)
      scriptImported = true
    }
    // console.log('[worker] self', self)
    const compressedFile = await imageCompression(file, options)
    self.postMessage({ file: compressedFile, id })
  } catch (e) {
    // console.error('[worker] error', e)
    self.postMessage({ error: e.message + '\\n' + e.stack, id })
  }
})
`;let S1;function bF(t,e){return new Promise((n,r)=>{S1||(S1=function(a){const o=[];return o.push(a),URL.createObjectURL(new Blob(o))}(wF));const i=new Worker(S1);i.addEventListener("message",function(a){if(e.signal&&e.signal.aborted)i.terminate();else if(a.data.progress===void 0){if(a.data.error)return r(new Error(a.data.error)),void i.terminate();n(a.data.file),i.terminate()}else e.onProgress(a.data.progress)}),i.addEventListener("error",r),e.signal&&e.signal.addEventListener("abort",()=>{r(e.signal.reason),i.terminate()}),i.postMessage({file:t,imageCompressionLibUrl:e.libURL,options:{...e,onProgress:void 0,signal:void 0}})})}function ur(t,e){return new Promise(function(n,r){let i,s,a,o,l,u;if(i={...e},a=0,{onProgress:o}=i,i.maxSizeMB=i.maxSizeMB||Number.POSITIVE_INFINITY,l=typeof i.useWebWorker!="boolean"||i.useWebWorker,delete i.useWebWorker,i.onProgress=m=>{a=m,typeof o=="function"&&o(a)},!(t instanceof Blob||t instanceof _F))return r(new Error("The file given is not an instance of Blob or File"));if(!/^image/.test(t.type))return r(new Error("The file given is not an image"));if(u=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,!l||typeof Worker!="function"||u)return Ww(t,i).then((function(m){try{return s=m,g.call(this)}catch(b){return r(b)}}).bind(this),r);var h=(function(){try{return g.call(this)}catch(m){return r(m)}}).bind(this),p=function(m){try{return Ww(t,i).then(function(b){try{return s=b,h()}catch(x){return r(x)}},r)}catch(b){return r(b)}};try{return i.libURL=i.libURL||"https://cdn.jsdelivr.net/npm/browser-image-compression@2.0.2/dist/browser-image-compression.js",bF(t,i).then(function(m){try{return s=m,h()}catch{return p()}},p)}catch{p()}function g(){try{s.name=t.name,s.lastModified=t.lastModified}catch{}try{i.preserveExif&&t.type==="image/jpeg"&&(!i.fileType||i.fileType&&i.fileType===t.type)&&(s=MN(t,s))}catch{}return n(s)}})}ur.getDataUrlFromFile=KN,ur.getFilefromDataUrl=hy,ur.loadImage=qN,ur.drawImageInCanvas=HN,ur.drawFileInCanvas=dm,ur.canvasToFile=fm,ur.getExifOrientation=$N,ur.handleMaxWidthOrHeight=WN,ur.followExifOrientation=GN,ur.cleanupCanvasMemory=Ds,ur.isAutoOrientationInBrowser=nc,ur.approximateBelowMaximumCanvasSizeOfBrowser=zN,ur.copyExifWithoutOrientation=MN,ur.getBrowserName=Fl,ur.version="2.0.2";const xF={"image/jpeg":".jpg","image/jpg":".jpg","image/png":".png","application/pdf":".pdf","application/msword":".doc","application/vnd.openxmlformats-officedocument.wordprocessingml.document":".docx","application/vnd.ms-excel":".xls","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":".xlsx","text/plain":".txt","text/csv":".csv"},SF=t=>{if(t===0)return"0 Bytes";const e=1024,n=["Bytes","KB","MB","GB"],r=Math.floor(Math.log(t)/Math.log(e));return Math.round(t/Math.pow(e,r)*100)/100+" "+n[r]},dy=t=>xF[t]||"",NF=()=>`file_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,AF=t=>t.replace(/[^a-zA-Z0-9._-]/g,"_").replace(/_{2,}/g,"_").toLowerCase(),EF=(t,e,n,r)=>{const i=AF(t.name);dy(t.type)||`${t.name.split(".").pop()}`;const s=`${r}_${i}`,a=`projects/${e}/${n}/${s}`,o=ny(sy,a);return{uploadTask:tN(o,t,{contentType:t.type}),storagePath:a,filename:s}},kF=async(t,e,n,r)=>{if(!t)return null;const i="thumbnail",s=dy(t.type),a=`${r}_${i}${s}`,o=`projects/${e}/${n}/${a}`,l=ny(sy,o);try{return await tN(l,t),{thumbnailURL:await nN(l),thumbnailPath:o}}catch(u){return console.error("Thumbnail upload error:",u),null}},Gw=async t=>{try{const e=ny(sy,t);return await b7(e),{success:!0}}catch(e){return console.error("Storage delete error:",e),{success:!1,error:e.message}}},IF=async t=>{try{return{success:!0,fileId:(await sl(Xn(Tt,"files"),{...t,uploadedAt:new Date().toISOString(),createdAt:new Date().toISOString()})).id}}catch(e){return console.error("Firestore save error:",e),{success:!1,error:e.message}}},TF=async t=>{try{const e=Kd(Xn(Tt,"files"),tg("sagsnummer","==",t)),n=await ms(e),r=[];return n.forEach(i=>{r.push({id:i.id,...i.data()})}),{success:!0,files:r}}catch(e){return console.error("Firestore get files error:",e),{success:!1,error:e.message,files:[]}}},PF=(t,e)=>t.filter(n=>n.fileCategory===e),CF=async t=>{try{return await il(In(Tt,"files",t)),{success:!0}}catch(e){return console.error("Firestore delete error:",e),{success:!1,error:e.message}}},LF=async({file:t,thumbnail:e,sagsnummer:n,projectId:r,projectName:i,category:s,uploadedBy:a,uploadedByUID:o,originalSize:l,compressedSize:u,isCompressed:h,description:p="",onProgress:g})=>{const m=NF();try{const{uploadTask:b,storagePath:x,filename:k}=EF(t,n,s,m);return new Promise((_,A)=>{b.on("state_changed",C=>{const F=C.bytesTransferred/C.totalBytes*100;g&&g(F)},C=>{console.error("Upload error:",C),A({success:!1,error:C.message})},async()=>{try{const C=await nN(b.snapshot.ref);let F=null;e&&(F=await kF(e,n,s,m));const Y={fileId:m,fileName:t.name,originalFileName:t.name,fileType:t.type,fileExtension:dy(t.type),fileCategory:s,fileSizeOriginal:l,fileSizeCompressed:u,isCompressed:h,compressionRatio:h?Math.round((1-u/l)*100)+"%":null,sagsnummer:n,projectId:r,projectName:i,fileURL:C,storagePath:x,thumbnailURL:(F==null?void 0:F.thumbnailURL)||null,thumbnailPath:(F==null?void 0:F.thumbnailPath)||null,uploadedBy:a,uploadedByUID:o,description:p.trim(),tags:[]},B=await IF(Y);B.success?_({success:!0,fileId:B.fileId,fileData:{...Y,id:B.fileId}}):A(B)}catch(C){A({success:!1,error:C.message})}})})}catch(b){return console.error("Upload process error:",b),{success:!1,error:b.message}}},RF=async t=>{try{return await Gw(t.storagePath),t.thumbnailPath&&await Gw(t.thumbnailPath),await CF(t.id),{success:!0}}catch(e){return console.error("Delete file error:",e),{success:!1,error:e.message}}};function jF({sagsnummer:t,projectId:e,projectName:n,uploadedBy:r,uploadedByUID:i,onUploadComplete:s}){const[a,o]=oe.useState(!1),[l,u]=oe.useState(0),[h,p]=oe.useState(0),[g,m]=oe.useState(!1),[b,x]=oe.useState(null),[k,_]=oe.useState(""),[A,C]=oe.useState(""),F=oe.useRef(null),{showSuccess:Y,showError:B}=ps(),L=M=>{var V;const te=(V=M.target.files)==null?void 0:V[0];te&&(x(te),C(""),m(!0))},y=M=>{var V;M.preventDefault();const te=(V=M.dataTransfer.files)==null?void 0:V[0];te&&(x(te),C(""),m(!0))},S=M=>{M.preventDefault()},R=M=>{_(M)},E=async()=>{if(!k){B("Vlg venligst en kategori");return}m(!1),b&&(await P(b,k,A),x(null),_(""),C(""))},I=async(M,te)=>{try{const U=await ur(M,{maxSizeMB:1,maxWidthOrHeight:1920,useWebWorker:!0,onProgress:te}),H=await ur(M,{maxSizeMB:.1,maxWidthOrHeight:200,useWebWorker:!0});return{compressed:U,thumbnail:H}}catch(V){return console.error("Image compression error:",V),{compressed:M,thumbnail:null}}},P=async(M,te,V)=>{if(M.size>10485760){B("Filen er for stor. Maksimum 10MB tilladt.");return}o(!0),u(0),p(0);try{let z=M,H=M.size,ne=M.size,_e=!1,O=null;if(M.type.startsWith("image/")){const J=await I(M,W=>{p(W)});J.compressed&&(z=J.compressed,ne=J.compressed.size,_e=!0),J.thumbnail&&(O=J.thumbnail),p(100)}const Q=await LF({file:z,thumbnail:O,sagsnummer:t,projectId:e,projectName:n,category:te,uploadedBy:r,uploadedByUID:i,originalSize:H,compressedSize:ne,isCompressed:_e,description:V,onProgress:J=>{u(Math.round(J))}});Q.success?(Y("Fil uploaded!"),s(Q.fileData),F.current&&(F.current.value="")):B("Upload fejlede")}catch(z){console.error("Upload error:",z),B("Upload fejlede - prv igen")}finally{o(!1),p(0),u(0)}};return f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"file-upload-area-compact",children:[f.jsxs("div",{className:"upload-dropzone-compact",onDrop:y,onDragOver:S,onClick:()=>{var M;return(M=F.current)==null?void 0:M.click()},children:[f.jsx("span",{className:"upload-icon-compact",children:""}),f.jsx("span",{className:"upload-text-compact",children:"Drag & drop eller klik for at uploade fil"})]}),f.jsx("input",{ref:F,type:"file",onChange:L,style:{display:"none"}}),a&&f.jsxs("div",{className:"upload-progress-compact",children:[h>0&&h<100&&f.jsxs(f.Fragment,{children:[f.jsxs("span",{className:"progress-text-compact",children:["Komprimerer... ",h,"%"]}),f.jsx("div",{className:"progress-bar-container",children:f.jsx("div",{className:"progress-bar",style:{width:`${h}%`}})})]}),l>0&&f.jsxs(f.Fragment,{children:[f.jsxs("span",{className:"progress-text-compact",children:["Uploader... ",l,"%"]}),f.jsx("div",{className:"progress-bar-container",children:f.jsx("div",{className:"progress-bar",style:{width:`${l}%`}})})]})]})]}),g&&f.jsx("div",{className:"confirm-overlay",children:f.jsxs("div",{className:"confirm-dialog file-upload-dialog",children:[f.jsxs("div",{className:"confirm-header",children:[f.jsx("h3",{children:"Upload fil"}),f.jsx("button",{className:"modal-close",onClick:()=>{m(!1),x(null),_(""),C("")},children:""})]}),f.jsxs("div",{className:"confirm-body",children:[f.jsx("div",{className:"file-info",children:f.jsxs("p",{className:"file-name",children:[" ",b==null?void 0:b.name]})}),f.jsxs("div",{className:"form-group",style:{marginTop:"16px"},children:[f.jsx("label",{children:"Vlg kategori *"}),f.jsxs("div",{className:"category-selection-compact",children:[f.jsxs("button",{type:"button",className:`category-btn-compact ${k==="bilag"?"selected":""}`,onClick:()=>R("bilag"),children:[f.jsx("span",{className:"category-icon",children:""}),f.jsx("span",{children:"Bilag"})]}),f.jsxs("button",{type:"button",className:`category-btn-compact ${k==="billeder"?"selected":""}`,onClick:()=>R("billeder"),children:[f.jsx("span",{className:"category-icon",children:""}),f.jsx("span",{children:"Billeder"})]}),f.jsxs("button",{type:"button",className:`category-btn-compact ${k==="dokumenter"?"selected":""}`,onClick:()=>R("dokumenter"),children:[f.jsx("span",{className:"category-icon",children:""}),f.jsx("span",{children:"Dokumenter"})]})]})]}),f.jsxs("div",{className:"form-group",style:{marginTop:"16px"},children:[f.jsx("label",{htmlFor:"fileNote",children:"Kommentar/Note (valgfri)"}),f.jsx("textarea",{id:"fileNote",value:A,onChange:M=>C(M.target.value),placeholder:"Tilfj en note eller kommentar til filen...",rows:"3",maxLength:"500",style:{width:"100%",padding:"10px",border:"1px solid #ddd",borderRadius:"6px",fontSize:"14px",fontFamily:"inherit",resize:"vertical"}}),f.jsxs("small",{className:"form-hint",children:[A.length,"/500 tegn"]})]})]}),f.jsxs("div",{className:"confirm-footer",children:[f.jsx("button",{className:"btn-secondary",onClick:()=>{m(!1),x(null),_(""),C("")},children:"Annuller"}),f.jsx("button",{className:"btn-primary",onClick:E,disabled:!k,children:"Upload fil"})]})]})})]})}function N1({category:t,files:e,onPreview:n,onDelete:r,onDownload:i}){const a=(()=>{switch(t){case"bilag":return{icon:"",title:"Bilag",emptyText:"Ingen bilag endnu"};case"billeder":return{icon:"",title:"Billeder",emptyText:"Ingen billeder endnu"};case"dokumenter":return{icon:"",title:"Dokumenter",emptyText:"Ingen dokumenter endnu"};default:return{icon:"",title:"Filer",emptyText:"Ingen filer endnu"}}})();return f.jsxs("div",{className:"file-category-column",children:[f.jsxs("div",{className:"category-header",children:[f.jsx("span",{className:"category-icon",children:a.icon}),f.jsx("h3",{children:a.title}),f.jsx("span",{className:"category-count",children:e.length})]}),f.jsx("div",{className:"files-list",children:e.length===0?f.jsxs("div",{className:"empty-state-file",children:[f.jsx("div",{className:"empty-icon",children:a.icon}),f.jsx("p",{children:a.emptyText})]}):e.map(o=>{var l;return f.jsxs("div",{className:"file-item",children:[f.jsx("div",{className:"file-preview",onClick:()=>n(o),children:o.thumbnailURL?f.jsx("img",{src:o.thumbnailURL,alt:o.fileName}):f.jsx("div",{className:"file-icon",children:(l=o.fileType)!=null&&l.startsWith("image/")?"":""})}),f.jsxs("div",{className:"file-details",children:[f.jsx("div",{className:"file-name",title:o.fileName,children:o.fileName}),o.description&&f.jsxs("div",{className:"file-note",title:o.description,children:[" ",o.description]}),f.jsxs("div",{className:"file-meta",children:[f.jsx("span",{className:"file-date",children:mp(o.uploadedAt)}),o.fileSizeCompressed&&f.jsx("span",{className:"file-size",children:SF(o.fileSizeCompressed)})]}),o.uploadedBy&&f.jsxs("div",{className:"file-uploader",children:[" ",o.uploadedBy]})]}),f.jsxs("div",{className:"file-actions",children:[f.jsx("button",{className:"action-btn",onClick:()=>n(o),title:"Vis",children:""}),f.jsx("button",{className:"action-btn",onClick:()=>i(o),title:"Download",children:""}),f.jsx("button",{className:"action-btn danger",onClick:()=>r(o),title:"Slet",children:""})]})]},o.id)})})]})}function DF({file:t,onClose:e,onNext:n,onPrev:r,hasNext:i,hasPrev:s}){return oe.useEffect(()=>{const o=l=>{l.key==="Escape"&&e(),l.key==="ArrowLeft"&&s&&r(),l.key==="ArrowRight"&&i&&n()};return window.addEventListener("keydown",o),()=>window.removeEventListener("keydown",o)},[e,n,r,i,s]),oe.useEffect(()=>{if(!t)return;const o=t.fileType==="application/pdf",l=t.fileType.startsWith("image/");if(o){window.open(t.fileURL,"_blank"),e();return}l||e()},[t,e]),!t||!t.fileType.startsWith("image/")?null:f.jsx("div",{className:"preview-overlay",onClick:e,children:f.jsxs("div",{className:"preview-modal",onClick:o=>o.stopPropagation(),children:[f.jsxs("div",{className:"preview-header",children:[f.jsx("span",{className:"preview-filename",children:t.fileName}),f.jsx("button",{className:"preview-close",onClick:e,"aria-label":"Luk",children:""})]}),f.jsx("div",{className:"preview-content",children:f.jsx("img",{src:t.fileURL,alt:t.fileName,className:"preview-image"})}),f.jsxs("div",{className:"preview-navigation",children:[s&&f.jsx("button",{className:"preview-nav-btn preview-prev",onClick:r,"aria-label":"Forrige",children:""}),i&&f.jsx("button",{className:"preview-nav-btn preview-next",onClick:n,"aria-label":"Nste",children:""})]})]})})}function FF({project:t,currentUser:e}){const[n,r]=oe.useState([]),[i,s]=oe.useState(!0),[a,o]=oe.useState(""),[l,u]=oe.useState("newest"),[h,p]=oe.useState(null),[g,m]=oe.useState(0),[b,x]=oe.useState(""),{showSuccess:k,showError:_,showConfirm:A}=ps();oe.useEffect(()=>{C()},[t.projectNumber]);const C=async()=>{s(!0);try{const V=await TF(t.projectNumber);V.success?r(V.files):_("Kunne ikke indlse filer")}catch(V){console.error("Error loading files:",V),_("Kunne ikke indlse filer")}finally{s(!1)}},F=V=>{r(U=>[...U,V])},Y=async V=>{if(await A({title:"Slet fil?",message:`Er du sikker p at du vil slette "${V.fileName}"? Denne handling kan ikke fortrydes.`,confirmText:"Slet fil",cancelText:"Annuller",type:"danger"}))try{(await RF(V)).success?(r(H=>H.filter(ne=>ne.id!==V.id)),k("Fil slettet")):_("Kunne ikke slette fil")}catch(z){console.error("Delete error:",z),_("Kunne ikke slette fil")}},B=V=>{window.open(V.fileURL,"_blank")},L=V=>{const U=V.fileCategory,H=E(U).findIndex(ne=>ne.id===V.id);p(V),m(H),x(U)},y=()=>{const V=E(b);if(g<V.length-1){const U=g+1;p(V[U]),m(U)}},S=()=>{if(g>0){const V=E(b),U=g-1;p(V[U]),m(U)}},R=()=>{let V=[...n];if(a.trim()){const U=a.toLowerCase();V=V.filter(z=>{var H;return z.fileName.toLowerCase().includes(U)||((H=z.description)==null?void 0:H.toLowerCase().includes(U))})}return V.sort((U,z)=>l==="newest"?new Date(z.uploadedAt)-new Date(U.uploadedAt):l==="oldest"?new Date(U.uploadedAt)-new Date(z.uploadedAt):l==="name"?U.fileName.localeCompare(z.fileName):0),V},E=V=>{const U=R();return PF(U,V)};if(i)return f.jsxs("div",{className:"loading-text",children:[f.jsx("span",{className:"loading-spinner-dark"}),"Indlser filer..."]});const I=E("bilag"),P=E("billeder"),M=E("dokumenter"),te=b?E(b):[];return f.jsxs("div",{className:"files-tab",children:[f.jsx(jF,{sagsnummer:t.projectNumber,projectId:t.id,projectName:t.name,uploadedBy:e,uploadedByUID:"user123",onUploadComplete:F}),f.jsxs("div",{className:"files-controls",children:[f.jsx("input",{type:"text",placeholder:"Sg efter filnavn...",value:a,onChange:V=>o(V.target.value),className:"search-input"}),f.jsxs("select",{value:l,onChange:V=>u(V.target.value),className:"filter-select",children:[f.jsx("option",{value:"newest",children:"Nyeste frst"}),f.jsx("option",{value:"oldest",children:"ldste frst"}),f.jsx("option",{value:"name",children:"Navn (A-Z)"})]})]}),f.jsxs("div",{className:"files-columns",children:[f.jsx(N1,{category:"bilag",files:I,onPreview:L,onDelete:Y,onDownload:B}),f.jsx(N1,{category:"billeder",files:P,onPreview:L,onDelete:Y,onDownload:B}),f.jsx(N1,{category:"dokumenter",files:M,onPreview:L,onDelete:Y,onDownload:B})]}),f.jsx(DF,{file:h,onClose:()=>p(null),onNext:y,onPrev:S,hasNext:g<te.length-1,hasPrev:g>0})]})}function OF(){const{id:t}=Fk(),e=Vc(),[n,r]=oe.useState(null),[i,s]=oe.useState([]),[a,o]=oe.useState([]),[l,u]=oe.useState([]),[h,p]=oe.useState([]),[g,m]=oe.useState([]),[b,x]=oe.useState(!0),[k,_]=oe.useState(!1),[A,C]=oe.useState(!1),[F,Y]=oe.useState(!1),[B,L]=oe.useState(null),[y,S]=oe.useState(null),[R,E]=oe.useState(450),[I,P]=oe.useState("oversigt");oe.useEffect(()=>{M(),te(),V(),U(),z(),H()},[t]);const M=async()=>{try{const ce=await ng(In(Tt,"projects",t));ce.exists()?r({id:ce.id,...ce.data()}):(alert("Sag ikke fundet"),e("/sager"))}catch(ce){console.error("Error loading project:",ce),alert("Der opstod en fejl ved indlsning af sag.")}finally{x(!1)}},te=async()=>{try{const ce=await TN(t);s(ce)}catch(ce){console.error("Error loading time entries:",ce)}},V=async()=>{try{const ce=await cF(t);ce.success&&o(ce.purchases)}catch(ce){console.error("Error loading material purchases:",ce)}},U=async()=>{try{const ce=await LN();ce.success&&u(ce.suppliers)}catch(ce){console.error("Error loading suppliers:",ce)}},z=async()=>{try{const ce=await RN();ce.success&&p(ce.materials)}catch(ce){console.error("Error loading materials:",ce)}},H=async()=>{try{const ce=await ms(Xn(Tt,"employees")),Te=[];ce.forEach(Me=>{Te.push({id:Me.id,...Me.data()})}),Te.sort((Me,Be)=>Me.name.localeCompare(Be.name)),m(Te)}catch(ce){console.error("Error loading employees:",ce)}},ne=()=>{_(!0)},_e=async ce=>{try{await Yo(In(Tt,"projects",t),{...ce,updatedAt:new Date().toISOString(),updatedBy:"Admin"}),_(!1),await M()}catch(Te){console.error("Error updating project:",Te),alert("Der opstod en fejl ved opdatering af sag.")}},O=()=>{L(null),C(!0)},Q=ce=>{L(ce),C(!0)},J=async ce=>{if(window.confirm("Er du sikker p, at du vil slette denne timeregistrering?"))try{await il(In(Tt,"timeEntries",ce.id)),await te()}catch(Te){console.error("Error deleting time entry:",Te),alert("Der opstod en fejl ved sletning af timeregistrering.")}},W=async ce=>{try{const Te={...ce,projectId:t,duration:ce.duration,hours:ce.duration,hourlyRate:ce.rate||0,employeeName:ce.employeeName||"Ikke angivet",activity:ce.activity,billable:ce.billable,rate:ce.rate||0};B?await Yo(In(Tt,"timeEntries",B.id),{...Te,updatedAt:new Date().toISOString()}):await sl(Xn(Tt,"timeEntries"),{...Te,createdAt:new Date().toISOString(),createdBy:"Admin"}),C(!1),await te()}catch(Te){console.error("Error saving time entry:",Te),alert("Der opstod en fejl ved gemning af timeregistrering.")}},se=()=>{S(null),Y(!0)},le=ce=>{S(ce),Y(!0)},fe=async ce=>{if(window.confirm("Er du sikker p, at du vil slette dette materiale?"))try{(await DN(ce.id)).success?await V():alert("Der opstod en fejl ved sletning af materiale.")}catch(Te){console.error("Error deleting material:",Te),alert("Der opstod en fejl ved sletning af materiale.")}},pe=async ce=>{try{y?(await dF(y.id,ce)).success?(Y(!1),await V()):alert("Der opstod en fejl ved opdatering af materiale."):(await uF(ce)).success?(Y(!1),await V()):alert("Der opstod en fejl ved tilfjelse af materiale.")}catch(Te){console.error("Error saving material:",Te),alert("Der opstod en fejl ved gemning af materiale.")}},ke=ce=>ce==="fixed-price"?"Fast Pris":"Tid & Materiale",Ie=ce=>{const Te={planned:{color:"#3498db",label:"Planlagt"},"in-progress":{color:"#27ae60",label:"I Gang"},"ready-for-invoice":{color:"#f39c12",label:"Klar til Faktura"},closed:{color:"#9b59b6",label:"Lukket"}};return Te[ce]||Te.planned};if(b)return f.jsx("div",{children:f.jsx("div",{className:"page-header-friendly",children:f.jsxs("div",{className:"loading-friendly",children:[f.jsx("div",{className:"spinner"}),f.jsx("p",{children:"Henter sag..."})]})})});if(!n)return null;const je=IN(i),Ke=WD(i),Ze=GD(i),Se=FN(a),ae=ON(a),Ge=fF(a),Fe=Ie(n.status);return f.jsxs("div",{children:[f.jsxs("div",{className:"sag-details-header",children:[f.jsx("button",{className:"btn-back-friendly",onClick:()=>e("/sager"),children:" Tilbage til alle sager"}),f.jsxs("div",{className:"sag-details-title-section",children:[f.jsx("h1",{className:"sag-details-customer",children:n.customerName||"Kunde ikke angivet"}),f.jsx("p",{className:"sag-details-name",children:n.name}),f.jsxs("div",{className:"sag-details-meta",children:[f.jsxs("span",{className:"sag-meta-number",children:["Sagsnr. ",n.projectNumber]}),f.jsx("span",{className:"sag-meta-divider",children:""}),f.jsx("span",{className:"sag-meta-status",style:{backgroundColor:Fe.color+"20",color:Fe.color,border:`2px solid ${Fe.color}`},children:Fe.label})]})]})]}),f.jsxs("div",{className:"sag-tabs-colorful",children:[f.jsxs("button",{className:`sag-tab-colorful tab-blue ${I==="oversigt"?"active":""}`,onClick:()=>P("oversigt"),children:[f.jsx("span",{className:"tab-icon",children:""}),f.jsx("span",{className:"tab-text",children:"Oversigt"})]}),f.jsxs("button",{className:`sag-tab-colorful tab-green ${I==="timer"?"active":""}`,onClick:()=>P("timer"),children:[f.jsx("span",{className:"tab-icon",children:""}),f.jsx("span",{className:"tab-text",children:"Timer"})]}),f.jsxs("button",{className:`sag-tab-colorful tab-orange ${I==="materialer"?"active":""}`,onClick:()=>P("materialer"),children:[f.jsx("span",{className:"tab-icon",children:""}),f.jsx("span",{className:"tab-text",children:"Materialer"})]}),f.jsxs("button",{className:`sag-tab-colorful tab-purple ${I==="dokumenter"?"active":""}`,onClick:()=>P("dokumenter"),children:[f.jsx("span",{className:"tab-icon",children:""}),f.jsx("span",{className:"tab-text",children:"Dokumenter"})]})]}),f.jsxs("div",{className:"sag-tab-content-colorful",children:[I==="oversigt"&&f.jsx("div",{className:"oversigt-tab-new",children:f.jsxs("div",{className:"sag-sections-grid",children:[f.jsxs("div",{className:"sag-section-card section-blue",children:[f.jsxs("div",{className:"section-header header-blue",children:[f.jsxs("div",{className:"section-header-left",children:[f.jsx("span",{className:"section-icon",children:""}),f.jsx("h2",{children:"Sagsoplysninger"})]}),f.jsx("button",{className:"btn-section-action",onClick:ne,children:" Ret"})]}),f.jsxs("div",{className:"section-body",children:[f.jsxs("div",{className:"info-row",children:[f.jsx("span",{className:"info-label-new",children:"Status:"}),f.jsx("span",{className:"info-badge",style:{backgroundColor:Fe.color+"20",color:Fe.color,border:`2px solid ${Fe.color}`},children:Fe.label})]}),f.jsxs("div",{className:"info-row",children:[f.jsx("span",{className:"info-label-new",children:"Type:"}),f.jsx("span",{className:"info-value-new",children:ke(n.type)})]}),n.type==="fixed-price"&&f.jsxs("div",{className:"info-row",children:[f.jsx("span",{className:"info-label-new",children:"Fast pris:"}),f.jsx("span",{className:"info-value-new highlight-green",children:ei(n.fixedPrice)})]}),f.jsxs("div",{className:"info-row",children:[f.jsx("span",{className:"info-label-new",children:"Oprettet:"}),f.jsx("span",{className:"info-value-new",children:mp(n.createdAt)})]}),n.description&&f.jsxs("div",{className:"info-row full",children:[f.jsx("span",{className:"info-label-new",children:"Beskrivelse:"}),f.jsx("p",{className:"info-description-new",children:n.description})]})]})]}),f.jsxs("div",{className:"sag-section-card section-blue",children:[f.jsx("div",{className:"section-header header-blue",children:f.jsxs("div",{className:"section-header-left",children:[f.jsx("span",{className:"section-icon",children:""}),f.jsx("h2",{children:"Kundeoplysninger"})]})}),f.jsxs("div",{className:"section-body",children:[f.jsxs("div",{className:"info-row",children:[f.jsx("span",{className:"info-label-new",children:"Navn:"}),f.jsx("span",{className:"info-value-new",children:n.customerName||"Ikke angivet"})]}),n.customerPhone&&f.jsxs("div",{className:"info-row",children:[f.jsx("span",{className:"info-label-new",children:"Telefon:"}),f.jsxs("a",{href:`tel:${n.customerPhone}`,className:"info-link-new",children:[" ",ZD(n.customerPhone)]})]}),n.customerEmail&&f.jsxs("div",{className:"info-row",children:[f.jsx("span",{className:"info-label-new",children:"Email:"}),f.jsxs("a",{href:`mailto:${n.customerEmail}`,className:"info-link-new",children:[" ",n.customerEmail]})]}),n.customerAddress&&f.jsxs("div",{className:"info-row full",children:[f.jsx("span",{className:"info-label-new",children:"Adresse:"}),f.jsxs("a",{href:eF(n.customerAddress),target:"_blank",rel:"noopener noreferrer",className:"info-link-new",children:[" ",n.customerAddress]})]})]})]}),f.jsxs("div",{className:"sag-section-card section-green",children:[f.jsx("div",{className:"section-header header-green",children:f.jsxs("div",{className:"section-header-left",children:[f.jsx("span",{className:"section-icon",children:""}),f.jsx("h2",{children:"Timer Status"})]})}),f.jsxs("div",{className:"section-body",children:[f.jsxs("div",{className:"stats-compact",children:[f.jsxs("div",{className:"stat-compact",children:[f.jsx("div",{className:"stat-value-compact",children:je.toFixed(1)}),f.jsx("div",{className:"stat-label-compact",children:"I alt arbejdet"})]}),f.jsxs("div",{className:"stat-compact",children:[f.jsx("div",{className:"stat-value-compact highlight-green",children:Ke.toFixed(1)}),f.jsx("div",{className:"stat-label-compact",children:"Kan faktureres"})]}),f.jsxs("div",{className:"stat-compact",children:[f.jsx("div",{className:"stat-value-compact highlight-green",children:ei(Ze)}),f.jsx("div",{className:"stat-label-compact",children:"Vrdi"})]})]}),i.length>0&&f.jsxs("div",{className:"recent-activity",children:[f.jsx("p",{className:"recent-label",children:"Seneste registreringer:"}),i.slice(0,3).map((ce,Te)=>f.jsxs("div",{className:"recent-item-compact",children:[f.jsx("span",{className:"recent-date",children:mp(ce.date)}),f.jsx("span",{className:"recent-name",children:ce.employeeName}),f.jsx("span",{className:"recent-hours",children:$w(ce.duration||ce.hours||0)})]},Te))]})]})]}),f.jsxs("div",{className:"sag-section-card section-orange",children:[f.jsx("div",{className:"section-header header-orange",children:f.jsxs("div",{className:"section-header-left",children:[f.jsx("span",{className:"section-icon",children:""}),f.jsx("h2",{children:"Materialer Status"})]})}),f.jsx("div",{className:"section-body",children:f.jsxs("div",{className:"stats-compact",children:[f.jsxs("div",{className:"stat-compact",children:[f.jsx("div",{className:"stat-value-compact",children:a.length}),f.jsx("div",{className:"stat-label-compact",children:"Indkb"})]}),f.jsxs("div",{className:"stat-compact",children:[f.jsx("div",{className:"stat-value-compact",children:ei(Se)}),f.jsx("div",{className:"stat-label-compact",children:"Indkbspris"})]}),f.jsxs("div",{className:"stat-compact",children:[f.jsx("div",{className:"stat-value-compact",children:ei(ae)}),f.jsx("div",{className:"stat-label-compact",children:"Salgspris"})]}),f.jsxs("div",{className:"stat-compact",children:[f.jsx("div",{className:"stat-value-compact",style:{color:Ge>=0?"#27ae60":"#e74c3c"},children:ei(Ge)}),f.jsx("div",{className:"stat-label-compact",children:"Avance"})]})]})})]})]})}),I==="timer"&&f.jsxs("div",{className:"timer-tab-new",children:[f.jsxs("div",{className:"tab-header-section",children:[f.jsxs("div",{className:"tab-summary-boxes",children:[f.jsxs("div",{className:"summary-box box-green",children:[f.jsx("div",{className:"summary-icon",children:""}),f.jsxs("div",{className:"summary-content",children:[f.jsxs("div",{className:"summary-value",children:[je.toFixed(1)," timer"]}),f.jsx("div",{className:"summary-label",children:"I alt arbejdet"})]})]}),f.jsxs("div",{className:"summary-box box-green",children:[f.jsx("div",{className:"summary-icon",children:""}),f.jsxs("div",{className:"summary-content",children:[f.jsxs("div",{className:"summary-value",children:[Ke.toFixed(1)," timer"]}),f.jsx("div",{className:"summary-label",children:"Kan faktureres"})]})]}),f.jsxs("div",{className:"summary-box box-green",children:[f.jsx("div",{className:"summary-icon",children:""}),f.jsxs("div",{className:"summary-content",children:[f.jsx("div",{className:"summary-value",children:ei(Ze)}),f.jsx("div",{className:"summary-label",children:"Total vrdi"})]})]})]}),f.jsxs("button",{className:"btn-add-friendly btn-green",onClick:O,children:[f.jsx("span",{className:"btn-icon-large",children:"+"})," Registrer nye timer"]})]}),f.jsx("div",{className:"content-table-wrapper",children:i.length===0?f.jsxs("div",{className:"empty-state-friendly",children:[f.jsx("div",{className:"empty-icon",children:""}),f.jsx("h3",{children:"Ingen timer registreret endnu"}),f.jsx("p",{children:'Klik p "Registrer nye timer" for at komme i gang'})]}):f.jsxs("table",{className:"friendly-table",children:[f.jsx("thead",{children:f.jsxs("tr",{children:[f.jsx("th",{children:"Dato"}),f.jsx("th",{children:"Medarbejder"}),f.jsx("th",{children:"Timer"}),f.jsx("th",{children:"Timepris"}),f.jsx("th",{children:"Fakturerbar"}),f.jsx("th",{children:"Vrdi"}),f.jsx("th",{children:"Aktivitet"}),f.jsx("th",{})]})}),f.jsx("tbody",{children:i.map(ce=>f.jsxs("tr",{children:[f.jsx("td",{children:mp(ce.date)}),f.jsx("td",{className:"employee-cell",children:ce.employeeName||"Ikke angivet"}),f.jsx("td",{className:"hours-cell",children:$w(ce.duration||ce.hours||0)}),f.jsx("td",{children:ei(ce.rate||ce.hourlyRate||0)}),f.jsx("td",{children:ce.billable?"":""}),f.jsx("td",{className:"value-cell",children:ce.billable?ei((ce.duration||ce.hours||0)*(ce.rate||ce.hourlyRate||0)):"-"}),f.jsx("td",{className:"activity-cell",children:ce.activity||ce.description||"-"}),f.jsxs("td",{className:"actions-cell",children:[f.jsx("button",{className:"btn-icon-action",onClick:()=>Q(ce),title:"Ret",children:""}),f.jsx("button",{className:"btn-icon-action",onClick:()=>J(ce),title:"Slet",children:""})]})]},ce.id))})]})})]}),I==="materialer"&&f.jsxs("div",{className:"materialer-tab-new",children:[f.jsxs("div",{className:"tab-header-section",children:[f.jsxs("div",{className:"tab-summary-boxes",children:[f.jsxs("div",{className:"summary-box box-orange",children:[f.jsx("div",{className:"summary-icon",children:""}),f.jsxs("div",{className:"summary-content",children:[f.jsx("div",{className:"summary-value",children:a.length}),f.jsx("div",{className:"summary-label",children:"Indkb"})]})]}),f.jsxs("div",{className:"summary-box box-orange",children:[f.jsx("div",{className:"summary-icon",children:""}),f.jsxs("div",{className:"summary-content",children:[f.jsx("div",{className:"summary-value",children:ei(Se)}),f.jsx("div",{className:"summary-label",children:"Indkbspris"})]})]}),f.jsxs("div",{className:"summary-box box-orange",children:[f.jsx("div",{className:"summary-icon",children:""}),f.jsxs("div",{className:"summary-content",children:[f.jsx("div",{className:"summary-value",children:ei(ae)}),f.jsx("div",{className:"summary-label",children:"Salgspris"})]})]}),f.jsxs("div",{className:`summary-box ${Ge>=0?"box-green":"box-red"}`,children:[f.jsx("div",{className:"summary-icon",children:Ge>=0?"":""}),f.jsxs("div",{className:"summary-content",children:[f.jsx("div",{className:"summary-value",children:ei(Ge)}),f.jsx("div",{className:"summary-label",children:"Avance"})]})]})]}),f.jsxs("button",{className:"btn-add-friendly btn-orange",onClick:se,children:[f.jsx("span",{className:"btn-icon-large",children:"+"})," Tilfj materiale"]})]}),f.jsx("div",{className:"content-table-wrapper",children:a.length===0?f.jsxs("div",{className:"empty-state-friendly",children:[f.jsx("div",{className:"empty-icon",children:""}),f.jsx("h3",{children:"Ingen materialer endnu"}),f.jsx("p",{children:'Klik p "Tilfj materiale" for at registrere indkb'})]}):f.jsxs("table",{className:"friendly-table",children:[f.jsx("thead",{children:f.jsxs("tr",{children:[f.jsx("th",{children:"Materiale"}),f.jsx("th",{children:"Leverandr"}),f.jsx("th",{children:"Antal"}),f.jsx("th",{children:"Indkbspris"}),f.jsx("th",{children:"Salgspris"}),f.jsx("th",{children:"Avance"}),f.jsx("th",{})]})}),f.jsx("tbody",{children:a.map(ce=>f.jsxs("tr",{children:[f.jsx("td",{className:"material-cell",children:ce.materialName||"Ikke angivet"}),f.jsx("td",{children:ce.supplierName||"-"}),f.jsxs("td",{children:[ce.quantity," ",ce.unit]}),f.jsx("td",{children:ei(ce.purchasePrice)}),f.jsx("td",{children:ei(ce.sellingPrice)}),f.jsx("td",{className:"margin-cell",style:{color:(ce.marginKr||0)>=0?"#27ae60":"#e74c3c"},children:ei(ce.marginKr)}),f.jsxs("td",{className:"actions-cell",children:[f.jsx("button",{className:"btn-icon-action",onClick:()=>le(ce),title:"Ret",children:""}),f.jsx("button",{className:"btn-icon-action",onClick:()=>fe(ce),title:"Slet",children:""})]})]},ce.id))})]})})]}),I==="dokumenter"&&f.jsx("div",{className:"dokumenter-tab-new",children:f.jsx(FF,{project:n,currentUser:"Admin"})})]}),k&&f.jsx(CN,{isOpen:k,project:n,onClose:()=>_(!1),onSave:_e}),A&&f.jsx(nF,{timeEntry:B,defaultRate:R,employees:g,onClose:()=>C(!1),onSave:W}),F&&f.jsx(rF,{purchase:y,project:n,suppliers:l,materials:h,onClose:()=>Y(!1),onSave:pe})]})}function MF({supplier:t,onSave:e,onClose:n}){const[r,i]=oe.useState({name:"",cvr:"",contactPerson:"",phone:"",email:"",address:"",customerNumber:"",type:"",preferredPaymentMethod:"",notes:""}),[s,a]=oe.useState({}),o=["Byggemarked","Grossist","Specialforhandler","Tmmerhandel","El-grossist","VVS-grossist","Malerforretning","Vrktjsforhandler","Andet"],l=["Faktura","Kontant","Kort","Firmakort","MobilePay","Konto"];oe.useEffect(()=>{t&&i({name:t.name||"",cvr:t.cvr||"",contactPerson:t.contactPerson||"",phone:t.phone||"",email:t.email||"",address:t.address||"",customerNumber:t.customerNumber||"",type:t.type||"",preferredPaymentMethod:t.preferredPaymentMethod||"",notes:t.notes||""})},[t]);const u=k=>{const{name:_,value:A}=k.target;i(C=>({...C,[_]:A})),s[_]&&a(C=>({...C,[_]:null}))},h=k=>k.replace(/\D/g,"").slice(0,8),p=k=>{const _=h(k.target.value);i(A=>({...A,cvr:_})),s.cvr&&a(A=>({...A,cvr:null}))},g=k=>k.replace(/\D/g,"").slice(0,8),m=k=>{const _=g(k.target.value);i(A=>({...A,phone:_})),s.phone&&a(A=>({...A,phone:null}))},b=()=>{const k={};return(!r.name||r.name.trim().length<2)&&(k.name="Leverandrnavn er pkrvet (min. 2 tegn)"),(!r.cvr||r.cvr.length!==8)&&(k.cvr="CVR skal vre 8 cifre"),r.email&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r.email)&&(k.email="Ugyldig email-adresse"),r.phone&&r.phone.length!==8&&(k.phone="Telefonnummer skal vre 8 cifre"),a(k),Object.keys(k).length===0},x=k=>{if(k.preventDefault(),b()){const _={name:r.name.trim(),cvr:r.cvr,contactPerson:r.contactPerson.trim(),phone:r.phone,email:r.email.trim().toLowerCase(),address:r.address.trim(),customerNumber:r.customerNumber.trim(),type:r.type,preferredPaymentMethod:r.preferredPaymentMethod,notes:r.notes.trim()};e(_)}};return f.jsx("div",{className:"modal-overlay",onClick:n,children:f.jsxs("div",{className:"modal-content supplier-modal",onClick:k=>k.stopPropagation(),children:[f.jsxs("div",{className:"modal-header",children:[f.jsx("h2",{children:t?"Redigr Leverandr":"Tilfj Leverandr"}),f.jsx("button",{className:"modal-close",onClick:n,children:""})]}),f.jsxs("form",{onSubmit:x,className:"modal-form",children:[f.jsxs("div",{className:"form-section",children:[f.jsx("h3",{className:"form-section-title",children:"Grundoplysninger"}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{htmlFor:"name",children:"Leverandrnavn *"}),f.jsx("input",{type:"text",id:"name",name:"name",value:r.name,onChange:u,className:s.name?"input-error":"",placeholder:"F.eks. XL-BYG Slagelse",autoFocus:!0}),s.name&&f.jsx("span",{className:"error-text",children:s.name})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{htmlFor:"cvr",children:"CVR-nummer *"}),f.jsx("input",{type:"text",id:"cvr",name:"cvr",value:r.cvr,onChange:p,className:s.cvr?"input-error":"",placeholder:"12345678",maxLength:"8"}),s.cvr&&f.jsx("span",{className:"error-text",children:s.cvr}),f.jsx("small",{className:"form-hint",children:"8 cifre uden mellemrum"})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{htmlFor:"customerNumber",children:"Kundenummer"}),f.jsx("input",{type:"text",id:"customerNumber",name:"customerNumber",value:r.customerNumber,onChange:u,placeholder:"Vores kundenummer hos leverandren"}),f.jsx("small",{className:"form-hint",children:"Jeres kontonummer eller kundenummer hos denne leverandr"})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{htmlFor:"type",children:"Type"}),f.jsxs("select",{id:"type",name:"type",value:r.type,onChange:u,children:[f.jsx("option",{value:"",children:"-- Vlg type --"}),o.map(k=>f.jsx("option",{value:k,children:k},k))]})]})]}),f.jsxs("div",{className:"form-section",children:[f.jsx("h3",{className:"form-section-title",children:"Kontaktoplysninger"}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{htmlFor:"contactPerson",children:"Kontaktperson"}),f.jsx("input",{type:"text",id:"contactPerson",name:"contactPerson",value:r.contactPerson,onChange:u,placeholder:"F.eks. Hans Jensen"})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{htmlFor:"phone",children:"Telefon"}),f.jsx("input",{type:"text",id:"phone",name:"phone",value:r.phone,onChange:m,className:s.phone?"input-error":"",placeholder:"12345678",maxLength:"8"}),s.phone&&f.jsx("span",{className:"error-text",children:s.phone}),f.jsx("small",{className:"form-hint",children:"8 cifre uden mellemrum"})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{htmlFor:"email",children:"Email"}),f.jsx("input",{type:"email",id:"email",name:"email",value:r.email,onChange:u,className:s.email?"input-error":"",placeholder:"kontakt@leverandoer.dk"}),s.email&&f.jsx("span",{className:"error-text",children:s.email})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{htmlFor:"address",children:"Adresse"}),f.jsx("textarea",{id:"address",name:"address",value:r.address,onChange:u,rows:"2",placeholder:`Gadenavn 123
1234 By`})]})]}),f.jsxs("div",{className:"form-section",children:[f.jsx("h3",{className:"form-section-title",children:"Betaling"}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{htmlFor:"preferredPaymentMethod",children:"Foretrukken betalingsmetode"}),f.jsxs("select",{id:"preferredPaymentMethod",name:"preferredPaymentMethod",value:r.preferredPaymentMethod,onChange:u,children:[f.jsx("option",{value:"",children:"-- Vlg betalingsmetode --"}),l.map(k=>f.jsx("option",{value:k,children:k},k))]})]})]}),f.jsxs("div",{className:"form-section",children:[f.jsx("h3",{className:"form-section-title",children:"Noter"}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{htmlFor:"notes",children:"Interne bemrkninger"}),f.jsx("textarea",{id:"notes",name:"notes",value:r.notes,onChange:u,rows:"3",placeholder:"Ekstra noter om leverandren..."})]})]}),f.jsxs("div",{className:"modal-footer",children:[f.jsx("button",{type:"button",className:"btn-secondary",onClick:n,children:"Annuller"}),f.jsx("button",{type:"submit",className:"btn-primary",children:t?"Gem ndringer":"Tilfj leverandr"})]})]})]})})}function VF({material:t,suppliers:e,onSave:n,onClose:r}){const[i,s]=oe.useState({name:"",sku:"",unit:"stk",category:"",defaultSupplierId:"",defaultSupplierName:"",standardMarkup:"50"}),[a,o]=oe.useState({}),l=["stk","m","m","m","kg","liter","pose","rulle","palle"],u=["Tr","Gips","El-materialer","VVS","Maling","Vrktj","Diverse"];oe.useEffect(()=>{t&&s({name:t.name||"",sku:t.sku||"",unit:t.unit||"stk",category:t.category||"",defaultSupplierId:t.defaultSupplierId||"",defaultSupplierName:t.defaultSupplierName||"",standardMarkup:String(t.standardMarkup||50)})},[t]);const h=m=>{const{name:b,value:x}=m.target;s(k=>{const _={...k,[b]:x};if(b==="defaultSupplierId"&&x){const A=e.find(C=>C.id===x);A&&(_.defaultSupplierName=A.name)}else b==="defaultSupplierId"&&!x&&(_.defaultSupplierName="");return _}),a[b]&&o(k=>({...k,[b]:null}))},p=()=>{const m={};(!i.name||i.name.trim().length<2)&&(m.name="Materiale navn er pkrvet (min. 2 tegn)"),i.unit||(m.unit="Enhed er pkrvet"),i.category||(m.category="Kategori er pkrvet");const b=parseFloat(i.standardMarkup);return(isNaN(b)||b<0||b>500)&&(m.standardMarkup="Avance skal vre mellem 0 og 500%"),o(m),Object.keys(m).length===0},g=m=>{if(m.preventDefault(),p()){const b={name:i.name.trim(),sku:i.sku.trim(),unit:i.unit,category:i.category,defaultSupplierId:i.defaultSupplierId||null,defaultSupplierName:i.defaultSupplierName,standardMarkup:parseFloat(i.standardMarkup)};n(b)}};return f.jsx("div",{className:"modal-overlay",onClick:r,children:f.jsxs("div",{className:"modal-content material-modal",onClick:m=>m.stopPropagation(),children:[f.jsxs("div",{className:"modal-header",children:[f.jsx("h2",{children:t?"Redigr Materiale":"Tilfj Materiale"}),f.jsx("button",{className:"modal-close",onClick:r,children:""})]}),f.jsxs("form",{onSubmit:g,className:"modal-form",children:[f.jsxs("div",{className:"form-section",children:[f.jsx("h3",{className:"form-section-title",children:"Grundoplysninger"}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{htmlFor:"name",children:"Materiale navn *"}),f.jsx("input",{type:"text",id:"name",name:"name",value:i.name,onChange:h,className:a.name?"input-error":"",placeholder:"F.eks. Gipsplader 13mm",autoFocus:!0}),a.name&&f.jsx("span",{className:"error-text",children:a.name})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{htmlFor:"sku",children:"Artikelnummer / Varenummer"}),f.jsx("input",{type:"text",id:"sku",name:"sku",value:i.sku,onChange:h,placeholder:"F.eks. GP13-001"}),f.jsx("small",{className:"form-hint",children:"Leverandrens varenummer"})]}),f.jsxs("div",{className:"form-row",children:[f.jsxs("div",{className:"form-group",children:[f.jsx("label",{htmlFor:"unit",children:"Enhed *"}),f.jsx("select",{id:"unit",name:"unit",value:i.unit,onChange:h,className:a.unit?"input-error":"",children:l.map(m=>f.jsx("option",{value:m,children:m},m))}),a.unit&&f.jsx("span",{className:"error-text",children:a.unit})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{htmlFor:"category",children:"Kategori *"}),f.jsxs("select",{id:"category",name:"category",value:i.category,onChange:h,className:a.category?"input-error":"",children:[f.jsx("option",{value:"",children:"-- Vlg --"}),u.map(m=>f.jsx("option",{value:m,children:m},m))]}),a.category&&f.jsx("span",{className:"error-text",children:a.category})]})]})]}),f.jsxs("div",{className:"form-section",children:[f.jsx("h3",{className:"form-section-title",children:"Standard leverandr & prisstning"}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{htmlFor:"defaultSupplierId",children:"Standard leverandr"}),f.jsxs("select",{id:"defaultSupplierId",name:"defaultSupplierId",value:i.defaultSupplierId,onChange:h,children:[f.jsx("option",{value:"",children:"-- Ingen standard --"}),e.map(m=>f.jsx("option",{value:m.id,children:m.name},m.id))]}),f.jsx("small",{className:"form-hint",children:"Vlges automatisk nr du tilfjer dette materiale til en sag"})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{htmlFor:"standardMarkup",children:"Standard avance (%) *"}),f.jsx("input",{type:"text",id:"standardMarkup",name:"standardMarkup",value:i.standardMarkup,onChange:h,className:a.standardMarkup?"input-error":"",placeholder:"F.eks. 50"}),a.standardMarkup&&f.jsx("span",{className:"error-text",children:a.standardMarkup}),f.jsx("small",{className:"form-hint",children:"Bruges til at beregne salgspris automatisk (f.eks. 50% = indkb * 1.5)"})]}),t&&t.lastPurchasePrice&&f.jsxs("div",{className:"info-box",children:[f.jsx("div",{className:"info-box-title",children:"Seneste indkb"}),f.jsxs("div",{className:"info-box-content",children:[f.jsx("strong",{children:"Pris pr. enhed:"})," ",t.lastPurchasePrice.toFixed(2)," kr",f.jsx("br",{}),f.jsx("strong",{children:"Dato:"})," ",new Date(t.lastPurchaseDate).toLocaleDateString("da-DK")]})]})]}),f.jsxs("div",{className:"modal-footer",children:[f.jsx("button",{type:"button",className:"btn-secondary",onClick:r,children:"Annuller"}),f.jsx("button",{type:"submit",className:"btn-primary",children:t?"Gem ndringer":"Tilfj materiale"})]})]})]})})}function UF(){const{showSuccess:t,showError:e,showCriticalConfirm:n}=ps(),[r,i]=oe.useState("leverandoerer"),[s,a]=oe.useState([]),[o,l]=oe.useState([]),[u,h]=oe.useState([]),[p,g]=oe.useState([]),[m,b]=oe.useState([]),[x,k]=oe.useState([]),[_,A]=oe.useState(!1),[C,F]=oe.useState(!1),[Y,B]=oe.useState(!1),[L,y]=oe.useState(null),[S,R]=oe.useState(null),[E,I]=oe.useState(""),[P,M]=oe.useState("all"),[te,V]=oe.useState(""),[U,z]=oe.useState("all"),[H,ne]=oe.useState(""),[_e,O]=oe.useState("all"),[Q,J]=oe.useState("all"),[W,se]=oe.useState(!1),[le,fe]=oe.useState(!1),[pe,ke]=oe.useState(!1);oe.useEffect(()=>{r==="leverandoerer"?Ie():r==="katalog"?(je(),Ie()):r==="indkoeb"&&(Ke(),Ie())},[r]),oe.useEffect(()=>{Ze()},[s,E,P]),oe.useEffect(()=>{Se()},[o,te,U]),oe.useEffect(()=>{ae()},[u,H,_e,Q]);const Ie=async()=>{A(!0);try{const we=await LN();we.success&&a(we.suppliers)}catch(we){console.error("Error loading suppliers:",we)}finally{A(!1)}},je=async()=>{A(!0);try{const we=await RN();we.success&&l(we.materials)}catch(we){console.error("Error loading materials:",we)}finally{A(!1)}},Ke=async()=>{A(!0);try{const we=await hF();we.success&&h(we.purchases)}catch(we){console.error("Error loading purchases:",we)}finally{A(!1)}},Ze=()=>{let we=[...s];if(E.trim()){const He=E.toLowerCase();we=we.filter(mt=>{var ft,kt,Mn,bt,vr;return((ft=mt.name)==null?void 0:ft.toLowerCase().includes(He))||((kt=mt.contactPerson)==null?void 0:kt.toLowerCase().includes(He))||((Mn=mt.phone)==null?void 0:Mn.toLowerCase().includes(He))||((bt=mt.email)==null?void 0:bt.toLowerCase().includes(He))||((vr=mt.cvr)==null?void 0:vr.toLowerCase().includes(He))})}P!=="all"&&(we=we.filter(He=>He.type===P)),g(we)},Se=()=>{let we=[...o];if(te.trim()){const He=te.toLowerCase();we=we.filter(mt=>{var ft,kt;return((ft=mt.name)==null?void 0:ft.toLowerCase().includes(He))||((kt=mt.sku)==null?void 0:kt.toLowerCase().includes(He))})}U!=="all"&&(we=we.filter(He=>He.category===U)),b(we)},ae=()=>{let we=[...u];if(H.trim()){const He=H.toLowerCase();we=we.filter(mt=>{var ft,kt,Mn,bt;return((ft=mt.materialName)==null?void 0:ft.toLowerCase().includes(He))||((kt=mt.supplierName)==null?void 0:kt.toLowerCase().includes(He))||((Mn=mt.caseName)==null?void 0:Mn.toLowerCase().includes(He))||((bt=mt.caseNumber)==null?void 0:bt.toLowerCase().includes(He))})}_e!=="all"&&(we=we.filter(He=>He.supplierId===_e)),Q!=="all"&&(we=we.filter(He=>He.category===Q)),k(we)},Ge=()=>{const we=x.reduce((ft,kt)=>ft+(kt.purchasePrice||0),0),He=x.reduce((ft,kt)=>ft+(kt.sellingPrice||0),0),mt=He-we;return{totalPurchaseCost:we,totalSellingPrice:He,totalMargin:mt}},Fe=we=>`${we.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,".")} kr`,ce=()=>{y(null),F(!0)},Te=we=>{y(we),F(!0)},Me=async we=>{if(await n({title:"Slet leverandr?",message:"Dette vil permanent slette leverandren.",itemName:we.name,warningText:null,confirmText:"Slet Permanent",cancelText:"Annuller"}))try{(await aF(we.id)).success?(t("Leverandr slettet!"),await Ie()):e("Der opstod en fejl ved sletning af leverandr.")}catch(mt){console.error("Error deleting supplier:",mt),e("Der opstod en fejl ved sletning af leverandr.")}},Be=async we=>{try{L?(await sF(L.id,we)).success?(F(!1),t("Leverandr opdateret!"),await Ie()):e("Der opstod en fejl ved opdatering af leverandr."):(await iF(we)).success?(F(!1),t("Leverandr oprettet!"),await Ie()):e("Der opstod en fejl ved tilfjelse af leverandr.")}catch(He){console.error("Error saving supplier:",He),e("Der opstod en fejl ved gemning af leverandr.")}},$e=()=>{R(null),B(!0)},Ye=we=>{R(we),B(!0)},at=async we=>{if(await n({title:"Slet materiale?",message:"Dette vil permanent slette materialet fra kataloget.",itemName:we.name,warningText:we.lastPurchaseDate?"Dette materiale har historiske indkb knyttet til sig":null,confirmText:"Slet Permanent",cancelText:"Annuller"}))try{(await lF(we.id)).success?(t("Materiale slettet!"),await je()):e("Der opstod en fejl ved sletning af materiale.")}catch(mt){console.error("Error deleting material:",mt),e("Der opstod en fejl ved sletning af materiale.")}},tt=async we=>{try{S?(await jN(S.id,we)).success?(B(!1),t("Materiale opdateret!"),await je()):e("Der opstod en fejl ved opdatering af materiale."):(await oF(we)).success?(B(!1),t("Materiale oprettet!"),await je()):e("Der opstod en fejl ved tilfjelse af materiale.")}catch(He){console.error("Error saving material:",He),e("Der opstod en fejl ved gemning af materiale.")}},ct=async we=>{if(await n({title:"Slet indkb?",message:"Dette vil permanent slette indkbet.",itemName:we.materialName,warningText:`Fra sag: ${we.caseName||"Ukendt sag"}`,confirmText:"Slet Permanent",cancelText:"Annuller"}))try{(await DN(we.id)).success?(t("Indkb slettet!"),await Ke()):e("Der opstod en fejl ved sletning af indkb.")}catch(mt){console.error("Error deleting purchase:",mt),e("Der opstod en fejl ved sletning af indkb.")}},dt=()=>{const we=new Set;return o.forEach(He=>He.category&&we.add(He.category)),Array.from(we).sort()},{totalPurchaseCost:ot,totalSellingPrice:ut,totalMargin:ze}=Ge();return f.jsxs("div",{children:[f.jsxs("div",{className:"welcome-section",children:[f.jsx("h1",{children:"Hej! Her er dine materialer"}),f.jsx("p",{className:"helper-text",children:"Administrer leverandrer, materialer og hold styr p alle indkb"})]}),f.jsxs("div",{className:"sag-tabs-colorful material-tabs",children:[f.jsxs("button",{className:`sag-tab-colorful tab-blue ${r==="leverandoerer"?"active":""}`,onClick:()=>i("leverandoerer"),children:[f.jsx("span",{className:"tab-icon",children:""}),f.jsx("span",{className:"tab-text",children:"Leverandrer"})]}),f.jsxs("button",{className:`sag-tab-colorful tab-green ${r==="katalog"?"active":""}`,onClick:()=>i("katalog"),children:[f.jsx("span",{className:"tab-icon",children:""}),f.jsx("span",{className:"tab-text",children:"Materiale Katalog"})]}),f.jsxs("button",{className:`sag-tab-colorful tab-orange ${r==="indkoeb"?"active":""}`,onClick:()=>i("indkoeb"),children:[f.jsx("span",{className:"tab-icon",children:""}),f.jsx("span",{className:"tab-text",children:"Alle Indkb"})]})]}),f.jsxs("div",{className:"tab-content-area",children:[r==="leverandoerer"&&f.jsxs("div",{className:"tab-section",children:[f.jsxs("div",{className:"tab-header-section",children:[f.jsxs("div",{children:[f.jsx("h2",{className:"tab-title",children:"Dine leverandrer"}),f.jsx("p",{className:"tab-subtitle",children:"Hold styr p kontaktinfo og leverandrdetaljer"})]}),f.jsxs("button",{className:"btn-add-friendly btn-blue",onClick:ce,children:[f.jsx("span",{className:"btn-icon-large",children:"+"})," Ny leverandr"]})]}),f.jsxs("div",{className:"search-section",children:[f.jsxs("div",{className:"search-box-large",children:[f.jsx("span",{className:"search-icon",children:""}),f.jsx("input",{type:"text",placeholder:"Sg efter navn, kontakt, telefon, email eller CVR...",value:E,onChange:we=>I(we.target.value),className:"search-input-large"})]}),f.jsxs("button",{className:`btn-filter-toggle ${W?"active":""}`,onClick:()=>se(!W),children:["Filtre ",W?"":""]})]}),W&&f.jsx("div",{className:"filter-panel",children:f.jsxs("div",{className:"filter-group",children:[f.jsx("label",{children:"Type"}),f.jsxs("select",{value:P,onChange:we=>M(we.target.value),className:"filter-select-friendly",children:[f.jsx("option",{value:"all",children:"Alle typer"}),f.jsx("option",{value:"Byggemarked",children:"Byggemarked"}),f.jsx("option",{value:"Grossist",children:"Grossist"}),f.jsx("option",{value:"Specialforhandler",children:"Specialforhandler"}),f.jsx("option",{value:"Andet",children:"Andet"})]})]})}),f.jsx("div",{className:"content-table-wrapper",children:_?f.jsxs("div",{className:"empty-state-friendly",children:[f.jsx("div",{className:"empty-icon",children:""}),f.jsx("h3",{children:"Henter leverandrer..."})]}):p.length===0?f.jsxs("div",{className:"empty-state-friendly",children:[f.jsx("div",{className:"empty-icon",children:""}),f.jsxs("h3",{children:["Ingen leverandrer ",E||P!=="all"?"matcher din sgning":"endnu"]}),f.jsx("p",{children:E||P!=="all"?"Prv en anden sgning":'Klik p "Ny leverandr" for at komme i gang'})]}):f.jsxs("table",{className:"friendly-table",children:[f.jsx("thead",{children:f.jsxs("tr",{children:[f.jsx("th",{children:"Navn"}),f.jsx("th",{children:"Type"}),f.jsx("th",{children:"Kontaktperson"}),f.jsx("th",{children:"Telefon"}),f.jsx("th",{children:"Email"}),f.jsx("th",{children:"CVR"}),f.jsx("th",{})]})}),f.jsx("tbody",{children:p.map(we=>f.jsxs("tr",{children:[f.jsx("td",{className:"supplier-name-cell",children:f.jsx("strong",{children:we.name})}),f.jsx("td",{children:f.jsx("span",{className:"badge-neutral",children:we.type||"-"})}),f.jsx("td",{children:we.contactPerson||"-"}),f.jsx("td",{children:we.phone||"-"}),f.jsx("td",{children:we.email||"-"}),f.jsx("td",{children:we.cvr||"-"}),f.jsxs("td",{className:"actions-cell",children:[f.jsx("button",{className:"btn-icon-friendly btn-edit",onClick:()=>Te(we),title:"Ret",children:""}),f.jsx("button",{className:"btn-icon-friendly btn-delete",onClick:()=>Me(we),title:"Slet",children:""})]})]},we.id))})]})})]}),r==="katalog"&&f.jsxs("div",{className:"tab-section",children:[f.jsxs("div",{className:"tab-header-section",children:[f.jsxs("div",{children:[f.jsx("h2",{className:"tab-title",children:"Materiale katalog"}),f.jsx("p",{className:"tab-subtitle",children:"Opret genbrugelige materialer med standardpriser"})]}),f.jsxs("button",{className:"btn-add-friendly btn-green",onClick:$e,children:[f.jsx("span",{className:"btn-icon-large",children:"+"})," Nyt materiale"]})]}),f.jsxs("div",{className:"search-section",children:[f.jsxs("div",{className:"search-box-large",children:[f.jsx("span",{className:"search-icon",children:""}),f.jsx("input",{type:"text",placeholder:"Sg efter materiale navn eller varenummer...",value:te,onChange:we=>V(we.target.value),className:"search-input-large"})]}),f.jsxs("button",{className:`btn-filter-toggle ${le?"active":""}`,onClick:()=>fe(!le),children:["Filtre ",le?"":""]})]}),le&&f.jsx("div",{className:"filter-panel",children:f.jsxs("div",{className:"filter-group",children:[f.jsx("label",{children:"Kategori"}),f.jsxs("select",{value:U,onChange:we=>z(we.target.value),className:"filter-select-friendly",children:[f.jsx("option",{value:"all",children:"Alle kategorier"}),dt().map(we=>f.jsx("option",{value:we,children:we},we))]})]})}),f.jsx("div",{className:"content-table-wrapper",children:_?f.jsxs("div",{className:"empty-state-friendly",children:[f.jsx("div",{className:"empty-icon",children:""}),f.jsx("h3",{children:"Henter materialer..."})]}):m.length===0?f.jsxs("div",{className:"empty-state-friendly",children:[f.jsx("div",{className:"empty-icon",children:""}),f.jsxs("h3",{children:["Ingen materialer ",te||U!=="all"?"matcher din sgning":"endnu"]}),f.jsx("p",{children:te||U!=="all"?"Prv en anden sgning":'Klik p "Nyt materiale" for at tilfje til kataloget'})]}):f.jsxs("table",{className:"friendly-table",children:[f.jsx("thead",{children:f.jsxs("tr",{children:[f.jsx("th",{children:"Materiale"}),f.jsx("th",{children:"Varenr."}),f.jsx("th",{children:"Kategori"}),f.jsx("th",{children:"Enhed"}),f.jsx("th",{children:"Standard avance"}),f.jsx("th",{children:"Seneste pris"}),f.jsx("th",{})]})}),f.jsx("tbody",{children:m.map(we=>f.jsxs("tr",{children:[f.jsx("td",{className:"material-name-cell",children:f.jsx("strong",{children:we.name})}),f.jsx("td",{children:we.sku||"-"}),f.jsx("td",{children:f.jsx("span",{className:"badge-neutral",children:we.category})}),f.jsx("td",{children:we.unit}),f.jsxs("td",{children:[we.standardMarkup,"%"]}),f.jsx("td",{children:we.lastPurchasePrice?f.jsxs(f.Fragment,{children:[Fe(we.lastPurchasePrice),we.lastPurchaseDate&&f.jsx("div",{style:{fontSize:"11px",color:"#7f8c8d"},children:new Date(we.lastPurchaseDate).toLocaleDateString("da-DK")})]}):"-"}),f.jsxs("td",{className:"actions-cell",children:[f.jsx("button",{className:"btn-icon-friendly btn-edit",onClick:()=>Ye(we),title:"Ret",children:""}),f.jsx("button",{className:"btn-icon-friendly btn-delete",onClick:()=>at(we),title:"Slet",children:""})]})]},we.id))})]})})]}),r==="indkoeb"&&f.jsxs("div",{className:"tab-section",children:[f.jsx("div",{className:"tab-header-section",children:f.jsxs("div",{children:[f.jsx("h2",{className:"tab-title",children:"Alle indkb"}),f.jsx("p",{className:"tab-subtitle",children:"Oversigt over alle materialeindkb p tvrs af sager"})]})}),f.jsxs("div",{className:"tab-summary-boxes",children:[f.jsxs("div",{className:"summary-box box-blue",children:[f.jsx("div",{className:"summary-icon",children:""}),f.jsxs("div",{className:"summary-content",children:[f.jsx("div",{className:"summary-value",children:Fe(ot)}),f.jsx("div",{className:"summary-label",children:"Indkbt for"})]})]}),f.jsxs("div",{className:"summary-box box-orange",children:[f.jsx("div",{className:"summary-icon",children:""}),f.jsxs("div",{className:"summary-content",children:[f.jsx("div",{className:"summary-value",children:Fe(ut)}),f.jsx("div",{className:"summary-label",children:"Slges for"})]})]}),f.jsxs("div",{className:`summary-box ${ze>=0?"box-green":"box-red"}`,children:[f.jsx("div",{className:"summary-icon",children:ze>=0?"":""}),f.jsxs("div",{className:"summary-content",children:[f.jsx("div",{className:"summary-value",children:Fe(ze)}),f.jsx("div",{className:"summary-label",children:"Total avance"})]})]})]}),f.jsxs("div",{className:"search-section",children:[f.jsxs("div",{className:"search-box-large",children:[f.jsx("span",{className:"search-icon",children:""}),f.jsx("input",{type:"text",placeholder:"Sg efter materiale, leverandr, sag...",value:H,onChange:we=>ne(we.target.value),className:"search-input-large"})]}),f.jsxs("button",{className:`btn-filter-toggle ${pe?"active":""}`,onClick:()=>ke(!pe),children:["Filtre ",pe?"":""]})]}),pe&&f.jsxs("div",{className:"filter-panel",children:[f.jsxs("div",{className:"filter-group",children:[f.jsx("label",{children:"Leverandr"}),f.jsxs("select",{value:_e,onChange:we=>O(we.target.value),className:"filter-select-friendly",children:[f.jsx("option",{value:"all",children:"Alle leverandrer"}),s.map(we=>f.jsx("option",{value:we.id,children:we.name},we.id))]})]}),f.jsxs("div",{className:"filter-group",children:[f.jsx("label",{children:"Kategori"}),f.jsxs("select",{value:Q,onChange:we=>J(we.target.value),className:"filter-select-friendly",children:[f.jsx("option",{value:"all",children:"Alle kategorier"}),dt().map(we=>f.jsx("option",{value:we,children:we},we))]})]})]}),f.jsx("div",{className:"content-table-wrapper",children:_?f.jsxs("div",{className:"empty-state-friendly",children:[f.jsx("div",{className:"empty-icon",children:""}),f.jsx("h3",{children:"Henter indkb..."})]}):x.length===0?f.jsxs("div",{className:"empty-state-friendly",children:[f.jsx("div",{className:"empty-icon",children:""}),f.jsxs("h3",{children:["Ingen indkb ",H||_e!=="all"||Q!=="all"?"matcher din sgning":"endnu"]}),f.jsx("p",{children:H||_e!=="all"||Q!=="all"?"Prv en anden sgning":"Indkb vises her nr du tilfjer materialer til sager"})]}):f.jsxs("table",{className:"friendly-table",children:[f.jsx("thead",{children:f.jsxs("tr",{children:[f.jsx("th",{children:"Dato"}),f.jsx("th",{children:"Materiale"}),f.jsx("th",{children:"Sag"}),f.jsx("th",{children:"Leverandr"}),f.jsx("th",{children:"Antal"}),f.jsx("th",{children:"Indkbspris"}),f.jsx("th",{children:"Salgspris"}),f.jsx("th",{children:"Avance"}),f.jsx("th",{})]})}),f.jsx("tbody",{children:x.map(we=>f.jsxs("tr",{children:[f.jsx("td",{children:new Date(we.date).toLocaleDateString("da-DK")}),f.jsxs("td",{className:"material-name-cell",children:[f.jsx("strong",{children:we.materialName}),we.sku&&f.jsx("div",{style:{fontSize:"11px",color:"#7f8c8d"},children:we.sku})]}),f.jsxs("td",{children:[f.jsx("div",{children:we.caseName||"Ukendt"}),f.jsx("div",{style:{fontSize:"11px",color:"#7f8c8d"},children:we.caseNumber})]}),f.jsx("td",{children:we.supplierName||"-"}),f.jsxs("td",{children:[we.quantity," ",we.unit]}),f.jsx("td",{children:Fe(we.purchasePrice)}),f.jsx("td",{children:Fe(we.sellingPrice)}),f.jsxs("td",{className:"margin-cell",style:{color:(we.marginKr||0)>=0?"#27ae60":"#e74c3c"},children:[f.jsx("div",{children:Fe(we.marginKr||0)}),f.jsxs("div",{style:{fontSize:"11px"},children:["(",(we.marginPercent||0).toFixed(1),"%)"]})]}),f.jsx("td",{className:"actions-cell",children:f.jsx("button",{className:"btn-icon-friendly btn-delete",onClick:()=>ct(we),title:"Slet",children:""})})]},we.id))})]})})]})]}),C&&f.jsx(MF,{supplier:L,onClose:()=>F(!1),onSave:Be}),Y&&f.jsx(VF,{material:S,suppliers:s,onClose:()=>B(!1),onSave:tt})]})}function BF(){const t=Vc(),e=async()=>{try{await JP(iy),t("/login")}catch(n){console.error("Error logging out:",n),alert("Der opstod en fejl ved logud.")}};return f.jsxs("div",{className:"app-layout",children:[f.jsxs("aside",{className:"sidebar",children:[f.jsxs("div",{className:"sidebar-header",children:[f.jsx("img",{src:"/logo_white.png",alt:"Piblo Logo",className:"sidebar-logo",onError:n=>{n.target.style.display="none",n.target.nextElementSibling.style.display="block"}}),f.jsx("div",{style:{width:"80px",height:"80px",margin:"0 auto 15px",display:"none",alignItems:"center",justifyContent:"center",fontSize:"40px"},children:""}),f.jsx("div",{className:"sidebar-title",children:"Piblo"})]}),f.jsxs("nav",{className:"sidebar-nav",children:[f.jsx(Lf,{to:"/sager",className:({isActive:n})=>`nav-item ${n?"active":""}`,children:"Sager"}),f.jsx(Lf,{to:"/materialer",className:({isActive:n})=>`nav-item ${n?"active":""}`,children:"Materialer"}),f.jsx(Lf,{to:"/timeregistrering",className:({isActive:n})=>`nav-item ${n?"active":""}`,children:"Timeregistrering"}),f.jsx(Lf,{to:"/indstillinger",className:({isActive:n})=>`nav-item ${n?"active":""}`,children:"Indstillinger"})]}),f.jsx("div",{className:"sidebar-footer",children:f.jsx("button",{className:"btn-logout",onClick:e,children:"Log ud"})})]}),f.jsx("main",{className:"main-content",children:f.jsx(Jk,{})})]})}function KF(){const[t,e]=oe.useState(null),[n,r]=oe.useState(!0);return oe.useEffect(()=>{const i=YP(iy,s=>{e(s),r(!1)});return()=>i()},[]),{user:t,loading:n}}function qF({children:t}){const{user:e,loading:n}=KF();return n?f.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"100vh",fontSize:"18px",color:"#7f8c8d"},children:"Indlser..."}):e?t:f.jsx(w0,{to:"/login",replace:!0})}function zF(){return f.jsxs(pI,{children:[f.jsx(oI,{children:f.jsxs(Zk,{children:[f.jsx(Ls,{path:"/login",element:f.jsx(k7,{})}),f.jsxs(Ls,{path:"/",element:f.jsx(qF,{children:f.jsx(BF,{})}),children:[f.jsx(Ls,{index:!0,element:f.jsx(w0,{to:"/sager",replace:!0})}),f.jsx(Ls,{path:"sager",element:f.jsx(tF,{})}),f.jsx(Ls,{path:"sager/:id",element:f.jsx(OF,{})}),f.jsx(Ls,{path:"materialer",element:f.jsx(UF,{})}),f.jsx(Ls,{path:"timeregistrering",element:f.jsx(qD,{})}),f.jsx(Ls,{path:"indstillinger",element:f.jsx(HD,{})})]}),f.jsx(Ls,{path:"*",element:f.jsx(w0,{to:"/",replace:!0})})]})}),f.jsx(yI,{}),f.jsx(_I,{}),f.jsx(wI,{})]})}A1.createRoot(document.getElementById("root")).render(f.jsx(sb.StrictMode,{children:f.jsx(zF,{})}));export{Gt as _,HF as c,RA as g};
